{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/process/browser.js","webpack:///./src/JumpDemo.js","webpack:///./src/libs/OrbitControls.js","webpack:///./src/libs/Tween.js","webpack:///./src/libs/three.js","webpack:///./wx/game.js","webpack:///./wx/symbol.js","webpack:///./wx/tween-adapter.js","webpack:///./wx/weapp-adapter.js"],"names":["THREE","TWEEN","scene","camera","renderer","plane","shadowLight","jumper","cube","secondCube","id","_this","isJumping","diffX","diffY","cubeContainer","touchStartTime","touchEndTime","JumpDemo","Scene","PerspectiveCamera","innerWidth","innerHeight","ctx","canvas","getContext","antialias","WebGLRenderer","context","setClearColor","setSize","shadowMap","enabled","position","x","y","z","createPlane","createBox","createJumper","createLights","addListeners","OrbitControls","requestAnimationFrame","loop","DirectionalLight","castShadow","set","shadow","left","right","top","bottom","near","fa","mapSize","width","height","add","target","ambientLight","AmbientLight","helper","CameraHelper","planeGeometry","PlaneBufferGeometry","planeMaterial","MeshLambertMaterial","color","Mesh","receiveShadow","boxGeometry","BoxGeometry","boxMaterial","MeshPhongMaterial","flatShading","FlatShading","translateZ","rotation","push","clone","translateX","translateY","firstCubePos","secondCubePos","currentCubePos","nextCubePos","Object3D","cylinderGeometry","CylinderGeometry","cylinderMaterial","cylinder","Math","PI","topSphereGeometry","SphereGeometry","topSphereMaterial","topSphere","middleSphereGeometry","middleSphereMaterial","middleSphere","update","render","addEventListener","onTouchStart","onTouchEnd","data","Date","getTime","console","log","CalculateJumpDiff","startCoords","finishCoords","tween","Tween","to","easing","Easing","Sinusoidal","InOut","onUpdate","onComplete","addNewMesh","moveCamera","start","newCube","random","cameraStartCoords","cameraFinishCoords","Linear","None","object","domElement","undefined","document","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","position0","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","changeEvent","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","getAutoRotationAngle","sphericalDelta","max","min","makeSafe","radius","scale","panOffset","setFromSpherical","lookAt","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","clientWidth","warn","dollyIn","dollyScale","dollyOut","handleMouseDownRotate","event","clientX","clientY","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","subVectors","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","keyCode","handleTouchStartRotate","touches","pageX","pageY","handleTouchStartDolly","dx","dy","sqrt","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","handleTouchEnd","preventDefault","button","stopPropagation","prototype","Object","create","EventDispatcher","constructor","defineProperties","center","get","noZoom","value","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","_tweens","getAll","removeAll","remove","i","indexOf","splice","time","preserve","now","process","hrtime","performance","bind","assign","source","_object","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_repeat","_repeatDelayTime","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","Interpolation","_chainedTweens","_onStartCallback","_onStartCallbackFired","_onUpdateCallback","_onCompleteCallback","_onStopCallback","properties","duration","property","Array","concat","stop","call","stopChainedTweens","end","numChainedTweens","delay","amount","repeat","times","repeatDelay","yoyo","interpolation","chain","arguments","onStart","callback","onStop","elapsed","charAt","parseFloat","isFinite","tmp","k","Quadratic","In","Out","Cubic","Quartic","Quintic","cos","sin","Exponential","Circular","Elastic","Back","s","Bounce","m","f","floor","fn","Utils","Bezier","b","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","t3","root","define","global","factory","exports","module","Number","EPSILON","isInteger","sign","Function","defineProperty","toString","match","TypeError","output","index","nextKey","hasOwnProperty","listener","_listeners","listeners","hasEventListener","listenerArray","array","slice","l","REVISION","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","_Math","DEG2RAD","RAD2DEG","generateUUID","lut","d0","d1","d2","d3","uuid","toUpperCase","clamp","euclideanModulo","mapLinear","a1","a2","b1","b2","lerp","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","LN2","floorPowerOfTwo","isVector2","setScalar","scalar","setX","setY","setComponent","Error","getComponent","w","addVectors","addScalar","addScaledVector","subScalar","multiply","divide","divideScalar","applyMatrix3","e","elements","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","lengthSq","manhattanLength","abs","normalize","atan2","distanceTo","manhattanDistanceTo","setLength","alpha","lerpVectors","v2","equals","fromArray","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","c","Matrix4","error","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","identity","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","d","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","zero","one","q","compose","eye","crossVectors","multiplyMatrices","premultiply","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","applyToBufferAttribute","count","getZ","applyMatrix4","setXYZ","determinant","transpose","setPosition","getInverse","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","axis","tx","ty","makeScale","makeShear","_x","_y","_z","_w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","decompose","vector","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","far","makeOrthographic","h","p","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","len","tDir","onChangeCallback","setFromEuler","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","r","vFrom","vTo","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","onChange","isVector3","setZ","multiplyVectors","applyEuler","applyAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","project","projectionMatrix","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","angleTo","acos","dz","sinPhiRadius","setFromCylindrical","setFromMatrixPosition","setFromMatrixScale","Matrix3","isMatrix3","setFromMatrix4","g","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","cx","cy","rotate","translate","textureId","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","name","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","isTexture","updateMatrix","toJSON","meta","isRootObject","textures","getDataURL","HTMLCanvasElement","createElementNS","ImageData","putImageData","drawImage","toDataURL","metadata","generator","wrap","images","url","transformUv","uv","Vector4","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","getW","WebGLRenderTarget","options","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","WebGLRenderTargetCube","activeCubeFace","activeMipMapLevel","isWebGLRenderTargetCube","DataTexture","isDataTexture","Box3","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","setFromObject","expandByObject","box","isEmpty","getCenter","getSize","point","expandByVector","expandByScalar","traverse","node","geometry","isGeometry","vertices","isBufferGeometry","attributes","updateMatrixWorld","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","closestPoint","sphere","clampPoint","intersectsPlane","constant","intersectsTriangle","f0","f1","f2","testAxis","extents","triangleNormal","satForAxes","axes","j","triangle","distanceToPoint","clampedPoint","getBoundingSphere","Sphere","intersect","union","xax","xay","xaz","xbx","xby","xbz","yax","yay","yaz","ybx","yby","ybz","zax","zay","zaz","zbx","zby","zbz","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","Plane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","direction","delta","denominator","intersectsLine","startSign","endSign","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","referencePoint","Frustum","p4","p5","planes","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","sprite","negRadius","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_pars_maps","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","ShaderChunk","UniformsUtils","merge","uniforms","merged","u","uniforms_src","uniforms_dst","parameter_src","isColor","isArray","ColorKeywords","Color","setRGB","setHex","setStyle","hex","setHSL","hue2rgb","style","handleAlpha","string","exec","components","parseInt","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","hsl","addColors","color1","color2","UniformsLib","diffuse","opacity","map","uvTransform","alphaMap","specularmap","specularMap","envmap","envMap","flipEnvMap","reflectivity","refractionRatio","maxMipLevel","aomap","aoMap","aoMapIntensity","lightmap","lightMap","lightMapIntensity","emissivemap","emissiveMap","bumpmap","bumpMap","bumpScale","normalmap","normalMap","normalScale","displacementmap","displacementMap","displacementScale","displacementBias","roughnessmap","roughnessMap","metalnessmap","metalnessMap","gradientmap","gradientMap","fog","fogDensity","fogNear","fogFar","fogColor","lights","ambientLightColor","directionalLights","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotShadowMap","spotShadowMatrix","pointLights","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ShaderLib","basic","vertexShader","fragmentShader","lambert","emissive","phong","specular","shininess","standard","roughness","metalness","envMapIntensity","dashed","dashSize","totalSize","depth","tCube","tFlip","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","physical","clearCoat","clearCoatRoughness","WebGLAnimation","isAnimating","animationLoop","onAnimationFrame","frame","setAnimationLoop","setContext","WebGLAttributes","gl","buffers","WeakMap","createBuffer","bufferType","usage","dynamic","DYNAMIC_DRAW","STATIC_DRAW","buffer","bindBuffer","bufferData","onUploadCallback","FLOAT","Float32Array","Float64Array","Uint16Array","UNSIGNED_SHORT","Int16Array","SHORT","Uint32Array","UNSIGNED_INT","Int32Array","INT","Int8Array","BYTE","Uint8Array","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","updateRange","bufferSubData","subarray","isInterleavedBufferAttribute","deleteBuffer","delete","Euler","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","enable","toggle","disable","test","layers","object3DId","parent","children","DefaultUp","onRotationChange","onQuaternionChange","enumerable","modelViewMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","frustumCulled","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","localToWorld","worldToLocal","isCamera","getObjectById","getObjectByProperty","getObjectByName","child","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverseVisible","traverseAncestors","force","geometries","materials","shapes","JSON","stringify","serialize","library","parameters","shape","material","uuids","extractFromCache","cache","values","key","recursive","parse","Camera","matrixWorldInverse","OrthographicCamera","view","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","zoomW","zoomH","scaleW","scaleH","Face3","materialIndex","vertexNormals","vertexColors","geometryId","Geometry","colors","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","face","jl","computeBoundingBox","obj","fromBufferGeometry","indices","positions","normals","uvs","uvs2","uv2","tempNormals","tempUVs","tempUVs2","addFace","groups","group","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","isMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","precision","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","materialIndexSort","sort","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","kl","uvsCopy","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","BufferAttribute","itemSize","normalized","isBufferAttribute","setArray","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","DirectGeometry","computeGroups","fromGeometry","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","arrayMax","bufferGeometryId","BufferGeometry","morphAttributes","drawRange","getIndex","setIndex","addAttribute","getAttribute","removeAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","isPoints","isLine","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","isNaN","pA","pB","pC","normalizeNormals","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","toNonIndexed","geometry2","array2","morphAttribute","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","PlaneGeometry","width_half","height_half","segment_width","segment_height","materialId","Material","blending","side","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","overdraw","isMaterial","onBeforeCompile","setValues","newValue","currentValue","isRoot","emissiveIntensity","sizeAttenuation","linewidth","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","srcPlanes","dstPlanes","MeshBasicMaterial","combine","isMeshBasicMaterial","ShaderMaterial","defines","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","Ray","origin","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","Line3","distanceSq","closestPointToPointParameter","startP","startEnd","clampToLine","startEnd2","startEnd_startP","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","edgeList","projectedPoint","drawMode","updateMorphTargets","setDrawMode","morphTargetInfluences","morphTargetDictionary","ml","String","inverseMatrix","tempA","tempB","tempC","uvA","uvB","uvC","barycoord","intersectionPoint","intersectionPointWorld","uvIntersection","uv1","uv3","checkIntersection","raycaster","checkBufferGeometryIntersection","intersection","intersects","faceIndex","fvA","fvB","fvC","isMultiMaterial","faceMaterial","morphInfluences","tl","influence","targets","uvs_f","WebGLBackground","objects","clearColor","clearAlpha","planeCamera","planeMesh","boxMesh","renderList","forceClear","background","setClear","autoClear","clear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","renderBufferDirect","getClearColor","getClearAlpha","setClearAlpha","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","extension","drawArraysInstancedANGLE","maxInstancedCount","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","maxPrecision","logarithmicDepthBuffer","maxTextures","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","floatVertexTextures","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","numPlanes","numIntersection","init","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","geometryAttributes","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER","getWireframeAttribute","geometryIndex","WebGLIndexedBufferRenderer","drawElements","drawElementsInstancedANGLE","WebGLInfo","calls","triangles","lines","instanceCount","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","LINES","LINE_STRIP","LINE_LOOP","POINTS","programs","autoReset","absNumericalSort","WebGLMorphtargets","influencesList","program","objectInfluences","influences","getUniforms","setValue","WebGLObjects","updateList","CubeTexture","emptyTexture","emptyCubeTexture","UniformContainer","seq","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocTextureUnit","setValue1f","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2f","uniform2fv","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4f","uniform4fv","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setTexture2D","setValueT6","setTextureCube","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","getSingularSetter","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","updateCache","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","StructuredUniform","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","addLineNumbers","split","join","WebGLShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","programIdCount","getEncodingComponents","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMapping","toneMappingName","generateExtensions","rendererExtensions","chunks","envMapCubeUV","filter","filterEmptyLine","generateDefines","fetchAttributeLocations","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","parseIncludes","pattern","include","unrollLoops","snippet","unroll","WebGLProgram","code","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","programLog","getProgramInfoLog","trim","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","cachedUniforms","cachedAttributes","getAttributes","destroy","deleteProgram","usedTimes","WebGLPrograms","capabilities","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","parameterNames","allocateBones","skeleton","bones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","gammaOverrideLinear","getParameters","shadows","nClipPlanes","nClipIntersection","shaderID","isSkinnedMesh","currentRenderTarget","getRenderTarget","gammaOutput","gammaInput","envMapMode","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","getProgramCode","acquireProgram","pl","programInfo","releaseProgram","pop","WebGLProperties","painterSortStable","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","renderItem","WebGLRenderLists","lists","list","UniformsCache","light","halfWidth","halfHeight","WebGLLights","ambient","vector3","matrix42","setup","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","intensity","isAmbientLight","isDirectionalLight","bias","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","spritesArray","pushLight","pushShadow","pushSprite","setupLights","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","WebGLShadowMap","_renderer","_objects","_frustum","_projScreenMatrix","_shadowMapSize","_maxShadowMapSize","_lookTarget","_lightPositionWorld","_MorphingFlag","_SkinningFlag","_NumberOfMaterialVariants","_depthMaterials","_distanceMaterials","_materialCache","cubeDirections","cubeUps","cube2DViewPorts","useMorphing","useSkinning","depthMaterial","distanceMaterial","autoUpdate","_gl","_state","BLEND","setTest","setScissorTest","faceCount","shadowCamera","vpWidth","vpHeight","pars","isSpotLightShadow","shadowMatrix","setRenderTarget","vpDimensions","renderObject","getDepthMaterial","lightPositionWorld","result","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","variantIndex","keyA","keyB","materialsForVariant","cachedMaterial","groupMaterial","CanvasTexture","isCanvasTexture","WebGLSpriteRenderer","vertexBuffer","elementBuffer","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fogDepth","fillStyle","fillRect","sprites","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","CULL_FACE","vertexAttribPointer","activeTexture","TEXTURE0","oldFogType","sceneFogType","isFog","density","setBlending","setMask","WebGLState","utils","ColorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","colorBuffer","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentProgram","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","setFlipSided","setCullFace","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","vertexAttribDivisorANGLE","disableVertexAttribArray","getCompressedTextureFormats","formats","COMPRESSED_TEXTURE_FORMATS","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","convert","setMaterial","frontFaceCW","setPolygonOffset","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","setLineWidth","lineWidth","factor","POLYGON_OFFSET_FILL","SCISSOR_TEST","webglSlot","webglType","webglTexture","boundTexture","compressedTexImage2D","apply","WebGLTextures","_isWebGL2","WebGL2RenderingContext","_videoTextures","_canvas","clampToMaxSize","maxSize","makePowerOfTwo","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","generateMipmap","textureProperties","__maxMipLevel","LOG2E","filterFallback","LINEAR","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTarget","deallocateRenderTarget","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","slot","updateVideoTexture","__version","complete","uploadTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isCompressedTexture","cubeImage","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","setTextureCubeDynamic","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","CLAMP_TO_EDGE","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isDepthTexture","internalFormat","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","WebGLUtils","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","RGB","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","aspect","focus","filmGauge","filmOffset","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","skew","ArrayCamera","cameras","isArrayCamera","WebVRManager","device","frameData","poseTarget","standingMatrix","standingMatrixInverse","VRFrameData","onVRDisplayPresentChange","tempQuaternion","tempPosition","cameraL","bounds","cameraR","cameraVR","isPresenting","currentSize","currentPixelRatio","eyeParameters","getEyeParameters","renderWidth","renderHeight","getPixelRatio","setDrawingBufferSize","animation","userHeight","getDevice","setDevice","setPoseTarget","getCamera","depthNear","depthFar","getFrameData","stageParameters","sittingToStandingTransform","pose","poseObject","orientation","leftViewMatrix","rightViewMatrix","leftProjectionMatrix","rightProjectionMatrix","getLayers","layer","leftBounds","rightBounds","getStandingMatrix","submitFrame","WebXRManager","session","frameOfRef","setCompatibleXRDevice","setSession","setFramebuffer","baseLayer","XRWebGLLayer","requestFrameOfReference","frameOfReferenceType","then","updateCamera","onAnimationFrameCallback","getDevicePose","views","getViewport","getViewMatrix","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","currentRenderList","currentRenderState","sortObjects","toneMappingExposure","toneMappingWhitePoint","_isContextLost","_framebuffer","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_usedTextureUnits","_width","_height","_pixelRatio","_viewport","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_vector3","getTargetPixelRatio","contextAttributes","onContextLost","onContextRestore","message","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","spriteRenderer","initGLContext","vr","navigator","getContextAttributes","forceContextLoss","loseContext","forceContextRestore","restoreContext","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","pixelRatio","getCurrentViewport","setScissor","boolean","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","isMeshPhongMaterial","isMeshStandardMaterial","isMeshNormalMaterial","normalArray","nx","ny","nz","uvArray","colorArray","setProgram","geometryProgram","updateBuffers","rangeFactor","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","compile","isLight","initMaterial","projectObject","opaqueObjects","transparentObjects","overrideMaterial","renderObjects","isSprite","isImmediateRenderObject","camera2","materialProperties","programChange","lightsHash","numSupportedMorphTargets","numSupportedMorphNormals","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isMeshLambertMaterial","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isShadowMaterial","ltc_1","LTC_1","ltc_2","LTC_2","uvScaleMap","textureUnit","warned","setTexture","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","FogExp2","Fog","SpriteMaterial","isSpriteMaterial","Sprite","intersectPoint","worldPosition","worldScale","guessSizeSq","LOD","levels","addLevel","getObjectForDistance","matrixPosition","Skeleton","boneInverses","calculateInverses","bone","isBone","offsetMatrix","identityMatrix","getBoneByName","Bone","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","initBones","normalizeSkinWeights","gbone","pos","rotq","scl","sw","vec","skinWeight","linecap","linejoin","Line","LineSegments","computeLineDistances","positionAttribute","linePrecision","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","nbVertices","LineLoop","Points","threshold","params","localThreshold","localThresholdSq","testPoint","rayPointDistanceSq","distanceToRay","Group","isGroup","VideoTexture","video","readyState","HAVE_CURRENT_DATA","CompressedTexture","DepthTexture","WireframeGeometry","o","ol","edge","edges","ParametricGeometry","func","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","PolyhedronGeometry","detail","PolyhedronBufferGeometry","uvBuffer","subdivide","appplyRadius","generateUVs","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","azi","correctUV","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","closed","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","frames","computeFrenetFrames","P","generateBufferData","generateSegment","generateIndices","getPointAt","N","B","TorusKnotGeometry","tube","heightScale","TorusKnotBufferGeometry","P1","P2","T","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","invSize","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","prev","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","nextZ","prevZ","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q2","inside","Node","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","forEach","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","ahole","hl","shapePoints","extractPoints","reverse","scalePt2","pt","bs","vert","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","buildLidFaces","buildSideFaces","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","text","TextBufferGeometry","font","isFont","generateShapes","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","segment","radiusStep","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","base","inverseSegments","n1","n2","ShapeGeometry","ShapeBufferGeometry","toJSON$1","shapeHole","indexOffset","shapeVertices","shapeHoles","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","Geometries","freeze","RawShaderMaterial","Materials","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","itemStart","itemEnd","itemError","resolveURL","setURLModifier","transform","DefaultLoadingManager","loading","FileLoader","manager","load","cached","setTimeout","dataUriRegex","dataUriRegexResult","mimeType","isBase64","decodeURIComponent","atob","response","responseType","toLowerCase","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","open","callbacks","status","withCredentials","overrideMimeType","header","requestHeader","setRequestHeader","send","setPath","setResponseType","setWithCredentials","setMimeType","CompressedTextureLoader","_parser","loader","loadTexture","texDatas","loaded","mipmapCount","isCubemap","DataTextureLoader","texData","ImageLoader","crossOrigin","onImageLoad","onImageError","substr","src","setCrossOrigin","CubeTextureLoader","urls","TextureLoader","isJPEG","search","Curve","arcLengthDivisions","getPoint","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","getTangentAt","mat","MAX_VALUE","tz","fromJSON","json","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","weight","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","tangent","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","lens","cacheLengths","sums","resolution","Path","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","absarc","absellipse","ellipse","firstPoint","lastPoint","Shape","getPointsHoles","holesPts","Light","HemisphereLight","LightShadow","SpotLightShadow","SpotLight","power","PointLight","DirectionalLightShadow","RectAreaLight","StringKeyframeTrack","KeyframeTrack","ValueTypeName","ValueBufferType","DefaultInterpolation","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","BooleanKeyframeTrack","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","QuaternionLinearInterpolant","QuaternionKeyframeTrack","getValueSize","ColorKeyframeTrack","NumberKeyframeTrack","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","AnimationUtils","arraySlice","from","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","TimeBufferType","setInterpolation","validate","optimize","trackType","_getTrackTypeForValueTypeName","track","getInterpolation","typeName","VectorKeyframeTrack","InterpolantFactoryMethodDiscrete","factoryMethod","createInterpolant","shift","timeOffset","timeScale","startTime","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","AnimationClip","tracks","resetDuration","jsonTracks","frameTime","fps","clip","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","MaterialLoader","setTextures","getTexture","shading","BufferGeometryLoader","typedArray","TYPED_ARRAYS","drawcalls","offsets","Loader","Handlers","handlers","regex","onLoadStart","onLoadProgress","onLoadComplete","initMaterials","texturePath","createMaterial","BlendingMode","textureLoader","materialLoader","fullPath","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapEmissiveRepeat","mapEmissiveOffset","mapEmissiveWrap","mapEmissiveAnisotropy","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapMetalnessRepeat","mapMetalnessOffset","mapMetalnessWrap","mapMetalnessAnisotropy","mapRoughnessRepeat","mapRoughnessOffset","mapRoughnessWrap","mapRoughnessAnisotropy","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","escape","extractUrlBase","lastIndexOf","JSONLoader","setTexturePath","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","parseMorphing","dstVertices","srcVertices","morphColors","parseAnimations","outputAnimations","morphAnimationClips","ObjectLoader","substring","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","details","geometryShapes","loadImage","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","ImageBitmapLoader","createImageBitmap","fetch","setOptions","res","blob","imageBitmap","catch","ShapePath","subPaths","currentPath","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Font","paths","createPaths","chars","line_height","yMax","yMin","underlineThickness","char","ret","createPath","glyph","glyphs","cpx","cpy","cpx1","cpy1","cpx2","cpy2","outline","_cachedOutline","action","ha","FontLoader","AudioContext","webkitAudioContext","AudioLoader","decodeAudioData","audioBuffer","StereoCamera","eyeSep","instance","eyeRight","eyeLeft","eyeSepOnProjection","ymax","xmin","xmax","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","AudioListener","gain","createGain","connect","destination","getInput","removeFilter","disconnect","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","setValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","Audio","autoplay","playbackRate","isPlaying","hasPlaybackControl","sourceType","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setBuffer","play","createBufferSource","onended","onEnded","pause","getFilters","setFilters","setPlaybackRate","getPlaybackRate","getLoop","setLoop","getVolume","setVolume","PositionalAudio","panner","createPanner","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","setMaxDistance","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","PropertyMixer","binding","mixFunction","_slerp","_select","_lerp","_mixBufferRegion","cumulativeWeight","useCount","referenceCount","accumulate","accuIndex","currentWeight","mix","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","RESERVED_CHARS_RE","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","findNode","nodeName","isAnimationObjectGroup","sanitizeNodeName","reservedRe","RegExp","wordChar","wordCharOrDot","directoryRe","nodeRe","objectRe","propertyRe","trackRe","supportedObjectNames","matches","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","getValue_direct","getValue_array","resolvedProperty","getValue_arrayElement","getValue_toArray","SetterByBindingTypeAndVersioning","setValue_direct","targetObject","setValue_direct_setNeedsUpdate","setValue_direct_setMatrixWorldNeedsUpdate","setValue_array","dest","setValue_array_setNeedsUpdate","setValue_array_setMatrixWorldNeedsUpdate","setValue_arrayElement","setValue_arrayElement_setNeedsUpdate","setValue_arrayElement_setMatrixWorldNeedsUpdate","setValue_fromArray","setValue_fromArray_setNeedsUpdate","setValue_fromArray_setMatrixWorldNeedsUpdate","getValue_unbound","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","total","inUse","bindingsPerObject","nObjects","nCachedObjects","indicesByUUID","parsedPaths","nBindings","knownObject","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","interpolant","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","_setEndings","handle_stop","pingPong","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","remove_empty_map","_","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedBufferGeometry","InterleavedBufferAttribute","interleavedBuffer","InterleavedBuffer","isInterleavedBuffer","InstancedInterleavedBuffer","InstancedBufferAttribute","Raycaster","PointCloud","ascSort","intersectObject","setFromCamera","coords","intersectObjects","Clock","autoStart","oldTime","elapsedTime","running","getElapsedTime","getDelta","newTime","other","vec3","Cylindrical","Box2","ImmediateRenderObject","VertexNormalsHelper","nNormals","objGeometry","objPos","objNorm","SpotLightHelper","cone","coneLength","coneWidth","getBoneList","boneList","SkeletonHelper","boneMatrix","matrixWorldInv","PointLightHelper","sphereSize","RectAreaLightHelper","HemisphereLightHelper","GridHelper","PolarGridHelper","radials","circles","FaceNormalsHelper","DirectionalLightHelper","lightPlane","targetLine","pointMap","colorFrustum","colorCone","colorUp","colorTarget","colorCross","addLine","addPoint","setPoint","BoxHelper","Box3Helper","PlaneHelper","positions2","lineGeometry","coneGeometry","ArrowHelper","headLength","headWidth","setDirection","setColor","AxesHelper","Face4","LineStrip","LinePieces","MeshFaceMaterial","MultiMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","ClosedSplineCurve3","SplineCurve3","Spline","initFromArray","getControlPointsArray","reparametrizeByArcLength","AxisHelper","BoundingBoxHelper","EdgesHelper","setColors","WireframeHelper","XHRLoader","BinaryTextureLoader","isIntersectionBox","isIntersectionSphere","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBuffer","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","copyIndicesArray","addIndex","addDrawCall","clearDrawCalls","computeOffsets","getArrays","addShapeList","wrapAround","wrapRGB","metal","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","shadowMapCullFace","renderReverseSided","renderSingleSided","standing","audioLoader","getData","updateCubeMap","GeometryUtils","geometry1","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","Projector","projectVector","unprojectVector","pickingRay","CanvasRenderer","SceneUtils","createMultiMaterialObject","detach","attach","LensFlare","CubeGeometry","Symbol","idCounter","iterator","oldFunc","modules","installedModules","__webpack_require__","moduleId","_window2","_window","_interopRequireWildcard","__esModule","newObj","default","GameGlobal","inject","_wx$getSystemInfoSync","getSystemInfoSync","platform","__devtoolssubcontext","descriptor","getOwnPropertyDescriptor","configurable","_key","_descriptor","_key2","__isAdapterInjected","cancelAnimationFrame","clearInterval","clearTimeout","setInterval","location","localStorage","HTMLElement","FileReader","Image","WebSocket","_WindowProperties","_constructor","_Canvas","_Canvas2","_interopRequireDefault","_document2","_document3","_navigator2","_navigator3","_XMLHttpRequest2","_XMLHttpRequest3","_WebSocket2","_WebSocket3","_Image2","_Image3","_Audio2","_Audio3","_FileReader2","_FileReader3","_HTMLElement2","_HTMLElement3","_localStorage2","_localStorage3","_location2","_location3","screenWidth","screenHeight","devicePixelRatio","screen","availWidth","availHeight","ontouchstart","ontouchmove","ontouchend","_HTMLElement4","_classCallCheck","Constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","writable","setPrototypeOf","__proto__","_HTMLElement","getPrototypeOf","_createClass","props","protoProps","staticProps","_Element2","_Element3","_util","_Element","tagName","className","childern","insertBefore","noop","innerHTML","setAttribute","getBoundingClientRect","fontSize","_Node2","_Node3","ELement","_Node","_EventTarget2","_EventTarget3","_EventTarget","childNodes","appendChild","cloneNode","copyNode","removeChild","findIndex","_events","EventTarget","events","capture","once","passive","Canvas","_document","hasModifiedCanvasPrototype","hasInit2DContextConstructor","hasInitWebGLContextConstructor","createCanvas","_getContext","_Image","_Audio","visibilityState","documentElement","hidden","head","createElement","getElementById","getElementsByTagName","querySelector","query","querySelectorAll","createImage","_HTMLAudioElement2","_HTMLAudioElement3","HAVE_NOTHING","HAVE_METADATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA","_innerAudioContext","_src","_loop","_autoplay","_HTMLAudioElement","innerAudioContext","createInnerAudioContext","onCanplay","onPlay","onPause","canPlayType","mediaType","newAudio","_HTMLMediaElement2","_HTMLMediaElement3","HTMLAudioElement","_HTMLMediaElement","HTMLMediaElement","addTextTrack","captureStream","fastSeek","TouchEvent","currentTarget","targetTouches","changedTouches","touchEventHandlerFactory","touchEvent","timeStamp","onTouchCancel","language","appVersion","userAgent","onLine","geolocation","getCurrentPosition","watchPosition","clearWatch","_url","_method","_requestHeader","_responseHeader","_requestTask","_triggerEvent","_len","args","_changeReadyState","onabort","onerror","onload","onloadstart","onprogress","ontimeout","onloadend","onreadystatechange","responseText","responseXML","statusText","abort","myRequestTask","getAllResponseHeaders","responseHeader","getResponseHeader","method","OPENED","that","success","_ref","statusCode","HEADERS_RECEIVED","LOADING","bytes","byteLength","DONE","fail","_ref2","errMsg","myHeader","UNSEND","_socketTask","protocols","binaryType","bufferedAmount","onclose","onmessage","onopen","protocol","CONNECTING","socketTask","connectSocket","onClose","CLOSED","onMessage","onOpen","OPEN","close","reason","CLOSING","_wx$getStorageInfoSyn","getStorageInfoSync","_wx$getStorageInfoSyn2","getItem","getStorageSync","setItem","setStorageSync","removeItem","removeStorageSync","clearStorageSync","href","reload"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;;;;;;;;;;ACvLtC;;IAAYA,K;;AACZ;;AACA;;IAAYC,K;;;;;;AACZ;;AAEA,IAAIC,cAAJ;AACA,IAAIC,eAAJ;AACA,IAAIC,iBAAJ;AACA,IAAIC,cAAJ;AACA,IAAIC,oBAAJ;AACA,IAAIC,eAAJ;AACA,IAAIC,aAAJ;AACA,IAAIC,mBAAJ;AACA,IAAIC,KAAK,CAAT;AACA,IAAIC,cAAJ;AACA,IAAIC,kBAAJ;AACA,IAAIC,cAAJ;AACA,IAAIC,cAAJ;AACA,IAAIC,gBAAgB,EAApB;AACA,IAAIC,uBAAJ;AACA,IAAIC,qBAAJ;;IAEqBC,Q;AAEjB,wBAAc;AAAA;;AAAA;;AACVhB,gBAAQ,IAAIF,MAAMmB,KAAV,EAAR;AACAhB,iBAAS,IAAIH,MAAMoB,iBAAV,CAA4B,EAA5B,EAAgCC,aAAaC,WAA7C,EAA0D,GAA1D,EAA+D,IAA/D,CAAT;AACA,YAAMC,MAAMC,OAAOC,UAAP,CAAkB,OAAlB,EAA2B,EAAEC,WAAW,IAAb,EAA3B,CAAZ;AACAtB,mBAAW,IAAIJ,MAAM2B,aAAV,CAAwB,EAAEC,SAASL,GAAX,EAAgBC,QAAQA,MAAxB,EAAxB,CAAX;AACApB,iBAASyB,aAAT,CAAuB,SAAvB;AACAzB,iBAAS0B,OAAT,CAAiBT,UAAjB,EAA6BC,WAA7B;AACAlB,iBAAS2B,SAAT,CAAmBC,OAAnB,GAA6B,IAA7B;;AAEA7B,eAAO8B,QAAP,CAAgBC,CAAhB,GAAoB,CAApB;AACA/B,eAAO8B,QAAP,CAAgBE,CAAhB,GAAoB,CAAC,CAArB;AACAhC,eAAO8B,QAAP,CAAgBG,CAAhB,GAAoB,CAApB;;AAEA,aAAKC,WAAL;AACA,aAAKC,SAAL;AACA,aAAKC,YAAL;AACA,aAAKC,YAAL;;AAEA,aAAKC,YAAL;;AAEA,YAAIzC,MAAM0C,aAAV,CAAwBvC,MAAxB;AACAQ,gBAAQ,IAAR;AACAgC,8BAAsB;AAAA,mBAAM,OAAKC,IAAL,EAAN;AAAA,SAAtB;AAEH;;;;uCAEc;AACXtC,0BAAc,IAAIN,MAAM6C,gBAAV,CAA2B,SAA3B,EAAsC,CAAtC,CAAd;AACA;AACA;AACAvC,wBAAYwC,UAAZ,GAAyB,IAAzB;AACAxC,wBAAY2B,QAAZ,CAAqBc,GAArB,CAAyB,GAAzB,EAA8B,CAA9B,EAAiC,GAAjC;AACAzC,wBAAY0C,MAAZ,CAAmBC,IAAnB,GAA0B,CAAC,GAA3B;AACA3C,wBAAY0C,MAAZ,CAAmBE,KAAnB,GAA2B,GAA3B;AACA5C,wBAAY0C,MAAZ,CAAmBG,GAAnB,GAAyB,GAAzB;AACA7C,wBAAY0C,MAAZ,CAAmBI,MAAnB,GAA4B,CAAC,GAA7B;AACA;AACA;AACA9C,wBAAY0C,MAAZ,CAAmB7C,MAAnB,CAA0BkD,IAA1B,GAAiC,GAAjC;AACA/C,wBAAY0C,MAAZ,CAAmB7C,MAAnB,CAA0BmD,EAA1B,GAA+B,GAA/B;AACAhD,wBAAY0C,MAAZ,CAAmBO,OAAnB,CAA2BC,KAA3B,GAAmC,IAAnC;AACAlD,wBAAY0C,MAAZ,CAAmBO,OAAnB,CAA2BE,MAA3B,GAAoC,IAApC;AACAvD,kBAAMwD,GAAN,CAAUpD,WAAV;;AAEAA,wBAAYqD,MAAZ,GAAqBpD,MAArB;;AAEA,gBAAIqD,eAAe,IAAI5D,MAAM6D,YAAV,CAAuB,SAAvB,EAAkC,GAAlC,CAAnB;AACA3D,kBAAMwD,GAAN,CAAUE,YAAV;;AAEA,gBAAIE,SAAS,IAAI9D,MAAM+D,YAAV,CAAuBzD,YAAY0C,MAAZ,CAAmB7C,MAA1C,CAAb;AACAD,kBAAMwD,GAAN,CAAUI,MAAV;AACH;;;sCAEa;AACV,gBAAIE,gBAAgB,IAAIhE,MAAMiE,mBAAV,CAA8B,GAA9B,EAAmC,GAAnC,EAAwC,EAAxC,EAA4C,EAA5C,CAApB;AACA,gBAAIC,gBAAgB,IAAIlE,MAAMmE,mBAAV,CAA8B;AAC9CC,uBAAO;AADuC,aAA9B,CAApB;AAGA/D,oBAAQ,IAAIL,MAAMqE,IAAV,CAAeL,aAAf,EAA8BE,aAA9B,CAAR;AACA7D,kBAAMiE,aAAN,GAAsB,IAAtB;AACApE,kBAAMwD,GAAN,CAAUrD,KAAV;AACH;;;oCAEW;;AAER;AACA;AACA,gBAAIkE,cAAc,IAAIvE,MAAMwE,WAAV,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,GAA5B,EAAiC,CAAjC,EAAoC,CAApC,EAAuC,CAAvC,CAAlB;AACA;AACA,gBAAIC,cAAc,IAAIzE,MAAM0E,iBAAV,CAA4B;AAC1CN,uBAAO,SADmC;AAE1CO,6BAAa3E,MAAM4E;AACnB;AAH0C,aAA5B,CAAlB;AAKApE,mBAAO,IAAIR,MAAMqE,IAAV,CAAeE,WAAf,EAA4BE,WAA5B,CAAP;AACAjE,iBAAKqE,UAAL,CAAgB,IAAhB;AACArE,iBAAKsE,QAAL,CAAc1C,CAAd,GAAkB,CAAC,EAAnB;AACA5B,iBAAKsC,UAAL,GAAkB,IAAlB;AACAtC,iBAAK8D,aAAL,GAAqB,IAArB;AACAvD,0BAAcgE,IAAd,CAAmBvE,IAAnB;AACAN,kBAAMwD,GAAN,CAAUlD,IAAV;AACAE;;AAEA;AACAD,yBAAaD,KAAKwE,KAAL,EAAb;AACAvE,uBAAWqC,UAAX,GAAwB,IAAxB;AACArC,uBAAW6D,aAAX,GAA2B,IAA3B;AACA7D,uBAAWwE,UAAX,CAAsB,CAAC,CAAvB;AACAxE,uBAAWyE,UAAX,CAAsB,CAAtB;AACAhF,kBAAMwD,GAAN,CAAUjD,UAAV;AACAM,0BAAcgE,IAAd,CAAmBtE,UAAnB;AACAC;;AAGA;AACA,gBAAIyE,eAAe3E,KAAKyB,QAAxB;AACA,gBAAImD,gBAAgB3E,WAAWwB,QAA/B;AACApB,oBAAQuE,cAAclD,CAAd,GAAkBiD,aAAajD,CAAvC;AACApB,oBAAQsE,cAAcjD,CAAd,GAAkBgD,aAAahD,CAAvC;AACH;;;4CAEmB;AAChB;AACA,gBAAIkD,iBAAiBtE,cAAcL,KAAK,CAAnB,EAAsBuB,QAA3C;AACA,gBAAIqD,cAAcvE,cAAcL,KAAK,CAAnB,EAAsBuB,QAAxC;AACApB,oBAAQyE,YAAYpD,CAAZ,GAAgBmD,eAAenD,CAAvC;AACApB,oBAAQwE,YAAYnD,CAAZ,GAAgBkD,eAAelD,CAAvC;AACH;;;uCAEc;;AAEX;AACA5B,qBAAS,IAAIP,MAAMuF,QAAV,EAAT;;AAEA,gBAAIC,mBAAmB,IAAIxF,MAAMyF,gBAAV,CAA2B,GAA3B,EAAgC,GAAhC,EAAqC,GAArC,CAAvB;AACA,gBAAIC,mBAAmB,IAAI1F,MAAM0E,iBAAV,CAA4B,EAAEN,OAAO,SAAT,EAA5B,CAAvB;AACA,gBAAIuB,WAAW,IAAI3F,MAAMqE,IAAV,CAAemB,gBAAf,EAAiCE,gBAAjC,CAAf;AACAC,qBAAS1D,QAAT,CAAkBc,GAAlB,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,IAA5B;AACA4C,qBAASb,QAAT,CAAkB5C,CAAlB,GAAsB0D,KAAKC,EAAL,GAAU,CAAhC;AACAF,qBAAS7C,UAAT,GAAsB,IAAtB;AACAvC,mBAAOmD,GAAP,CAAWiC,QAAX;;AAEA,gBAAIG,oBAAoB,IAAI9F,MAAM+F,cAAV,CAAyB,IAAzB,CAAxB;AACA,gBAAIC,oBAAoB,IAAIhG,MAAM0E,iBAAV,CAA4B,EAAEN,OAAO,SAAT,EAA5B,CAAxB;AACA,gBAAI6B,YAAY,IAAIjG,MAAMqE,IAAV,CAAeyB,iBAAf,EAAkCE,iBAAlC,CAAhB;AACAC,sBAAUhE,QAAV,CAAmBc,GAAnB,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,IAA7B;AACAkD,sBAAUnD,UAAV,GAAuB,IAAvB;AACAvC,mBAAOmD,GAAP,CAAWuC,SAAX;;AAEA,gBAAIC,uBAAuB,IAAIlG,MAAM+F,cAAV,CAAyB,IAAzB,CAA3B;AACA,gBAAII,uBAAuB,IAAInG,MAAM0E,iBAAV,CAA4B,EAAEN,OAAO,SAAT,EAA5B,CAA3B;AACA,gBAAIgC,eAAe,IAAIpG,MAAMqE,IAAV,CAAe6B,oBAAf,EAAqCC,oBAArC,CAAnB;AACAC,yBAAanE,QAAb,CAAsBc,GAAtB,CAA0B,CAA1B,EAA6B,CAA7B,EAAgC,GAAhC;AACAqD,yBAAatD,UAAb,GAA0B,IAA1B;AACAvC,mBAAOmD,GAAP,CAAW0C,YAAX;AACA7F,mBAAOuC,UAAP,GAAoB,IAApB;;AAEA5C,kBAAMwD,GAAN,CAAUnD,MAAV;AACH;;;+BAEM;AAAA;;AACHN,kBAAMoG,MAAN;AACAjG,qBAASkG,MAAT,CAAgBpG,KAAhB,EAAuBC,MAAvB;AACAwC,kCAAsB;AAAA,uBAAM,OAAKC,IAAL,EAAN;AAAA,aAAtB;AACH;;;uCAEc;AACXpB,mBAAO+E,gBAAP,CAAwB,YAAxB,EAAsC,KAAKC,YAA3C,EAAyD,KAAzD;AACAhF,mBAAO+E,gBAAP,CAAwB,UAAxB,EAAoC,KAAKE,UAAzC,EAAqD,KAArD;AACH;;;qCAEYC,I,EAAM;AACf,gBAAI9F,SAAJ,EAAe;AACX;AACH;AACDI,6BAAiB,IAAI2F,IAAJ,GAAWC,OAAX,EAAjB;AACH;;;mCAEUF,I,EAAM;AACb,gBAAI9F,SAAJ,EAAe;AACX;AACH;AACDK,2BAAe,IAAI0F,IAAJ,GAAWC,OAAX,EAAf;;AAEAC,oBAAQC,GAAR,CAAY,cAAZ,EAA4B7F,eAAeD,cAA3C;;AAIAL,kBAAMoG,iBAAN;AACA;AACA,gBAAIC,cAAc,EAAE9E,GAAG3B,OAAO0B,QAAP,CAAgBC,CAArB,EAAwBC,GAAG5B,OAAO0B,QAAP,CAAgBE,CAA3C,EAA8CC,GAAG,CAAjD,EAAlB;AACA,gBAAI6E,eAAe,EAAE/E,GAAG8E,YAAY9E,CAAZ,GAAgBrB,KAArB,EAA4BsB,GAAG6E,YAAY7E,CAAZ,GAAgBrB,KAA/C,EAAsDsB,GAAG,CAAzD,EAAnB;AACA,gBAAI8E,QAAQ,IAAIjH,MAAMkH,KAAV,CAAgBH,WAAhB,EACPI,EADO,CACJH,YADI,EACU,IADV,EAEPI,MAFO,CAEApH,MAAMqH,MAAN,CAAaC,UAAb,CAAwBC,KAFxB,EAGPC,QAHO,CAGE,YAAM;AACZ,oBAAIrF,UAAJ;AACA,oBAAI4E,YAAY5E,CAAZ,IAAiB,CAArB,EAAwB;AACpBA,wBAAI4E,YAAY5E,CAAhB;AACH,iBAFD,MAEO;AACHA,wBAAI,IAAI4E,YAAY5E,CAApB;AACH;AACD;AACA7B,uBAAO0B,QAAP,CAAgBc,GAAhB,CAAoBiE,YAAY9E,CAAhC,EAAmC8E,YAAY7E,CAA/C,EAAkDC,IAAI,CAAtD;AACH,aAZO,EAaPsF,UAbO,CAaI,YAAM;AACd/G,sBAAMgH,UAAN;AACAhH,sBAAMiH,UAAN;AACH,aAhBO,CAAZ;AAiBAhH,wBAAY,IAAZ;AACAsG,kBAAMW,KAAN;AACH;;;qCAEY;AACT,gBAAIC,UAAU/G,cAAcL,KAAK,CAAnB,EAAsBsE,KAAtB,EAAd;AACA8C,oBAAQhF,UAAR,GAAqB,IAArB;AACAgF,oBAAQxD,aAAR,GAAwB,IAAxB;AACA,gBAAIsB,KAAKmC,MAAL,KAAgB,GAApB,EAAyB;AACrBD,wBAAQ5C,UAAR,CAAmB,CAAnB;AACA;AACH,aAHD,MAGO;AACH;AACA4C,wBAAQ7C,UAAR,CAAmB,CAAC,CAApB;AACH;AACD/E,kBAAMwD,GAAN,CAAUoE,OAAV;AACA/G,0BAAcgE,IAAd,CAAmB+C,OAAnB;AACApH;AACH;;;qCAEY;AACT,iBAAKqG,iBAAL;AACA,gBAAIiB,oBAAoB,EAAE9F,GAAG/B,OAAO8B,QAAP,CAAgBC,CAArB,EAAwBC,GAAGhC,OAAO8B,QAAP,CAAgBE,CAA3C,EAA8CC,GAAGjC,OAAO8B,QAAP,CAAgBG,CAAjE,EAAxB;AACA,gBAAI6F,qBAAqB,EAAE/F,GAAG8F,kBAAkB9F,CAAlB,GAAsBrB,KAA3B,EAAkCsB,GAAG6F,kBAAkB7F,CAAlB,GAAsBrB,KAA3D,EAAkEsB,GAAGjC,OAAO8B,QAAP,CAAgBG,CAArF,EAAzB;AACA,gBAAI8E,QAAQ,IAAIjH,MAAMkH,KAAV,CAAgBa,iBAAhB,EACPZ,EADO,CACJa,kBADI,EACgB,IADhB,EAEPZ,MAFO,CAEApH,MAAMqH,MAAN,CAAaY,MAAb,CAAoBC,IAFpB,EAGPV,QAHO,CAGE,YAAM;AACZtH,uBAAO8B,QAAP,CAAgBc,GAAhB,CAAoBiF,kBAAkB9F,CAAtC,EAAyC8F,kBAAkB7F,CAA3D,EAA8D6F,kBAAkB5F,CAAhF;AACH,aALO,EAMPsF,UANO,CAMI,YAAM;AACd9G,4BAAY,KAAZ;AACH,aARO,CAAZ;AASAsG,kBAAMW,KAAN;AACH;;;;;;kBAjOgB3G,Q;;;;;;;;;;;;;;ACtBrB;;IAAYlB,K;;;;AAEZ;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;;AAEAA,MAAM0C,aAAN,GAAsB,UAAU0F,MAAV,EAAkBC,UAAlB,EAA8B;;AAElD,SAAKD,MAAL,GAAcA,MAAd;;AAEA,SAAKC,UAAL,GAAmBA,eAAeC,SAAhB,GAA6BD,UAA7B,GAA0CE,QAA5D;;AAEA;AACA,SAAKvG,OAAL,GAAe,IAAf;;AAEA;AACA,SAAK2B,MAAL,GAAc,IAAI3D,MAAMwI,OAAV,EAAd;;AAEA;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAKC,WAAL,GAAmBC,QAAnB;;AAEA;AACA,SAAKC,OAAL,GAAe,CAAf;AACA,SAAKC,OAAL,GAAeF,QAAf;;AAEA;AACA;AACA,SAAKG,aAAL,GAAqB,CAArB,CAtBkD,CAsB1B;AACxB,SAAKC,aAAL,GAAqBnD,KAAKC,EAA1B,CAvBkD,CAuBpB;;AAE9B;AACA;AACA,SAAKmD,eAAL,GAAuB,CAAEL,QAAzB,CA3BkD,CA2Bf;AACnC,SAAKM,eAAL,GAAuBN,QAAvB,CA5BkD,CA4BjB;;AAEjC;AACA;AACA,SAAKO,aAAL,GAAqB,KAArB;AACA,SAAKC,aAAL,GAAqB,IAArB;;AAEA;AACA;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,SAAL,GAAiB,GAAjB;;AAEA;AACA,SAAKC,YAAL,GAAoB,IAApB;AACA,SAAKC,WAAL,GAAmB,GAAnB;;AAEA;AACA,SAAKC,SAAL,GAAiB,IAAjB;AACA,SAAKC,WAAL,GAAmB,GAAnB,CA9CkD,CA8C1B;;AAExB;AACA;AACA,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,eAAL,GAAuB,GAAvB,CAnDkD,CAmDtB;;AAE5B;AACA,SAAKC,UAAL,GAAkB,IAAlB;;AAEA;AACA,SAAKC,IAAL,GAAY,EAAEC,MAAM,EAAR,EAAYC,IAAI,EAAhB,EAAoBC,OAAO,EAA3B,EAA+BC,QAAQ,EAAvC,EAAZ;;AAEA;AACA,SAAKC,YAAL,GAAoB,EAAEC,OAAOnK,MAAMoK,KAAN,CAAYN,IAArB,EAA2BO,MAAMrK,MAAMoK,KAAN,CAAYE,MAA7C,EAAqDC,KAAKvK,MAAMoK,KAAN,CAAYJ,KAAtE,EAApB;;AAEA;AACA,SAAKQ,OAAL,GAAe,KAAK7G,MAAL,CAAYqB,KAAZ,EAAf;AACA,SAAKyF,SAAL,GAAiB,KAAKrC,MAAL,CAAYnG,QAAZ,CAAqB+C,KAArB,EAAjB;AACA,SAAK0F,KAAL,GAAa,KAAKtC,MAAL,CAAYuC,IAAzB;;AAEA;AACA;AACA;;AAEA,SAAKC,aAAL,GAAqB,YAAY;;AAE/B,eAAOC,UAAUC,GAAjB;AAED,KAJD;;AAMA,SAAKC,iBAAL,GAAyB,YAAY;;AAEnC,eAAOF,UAAUG,KAAjB;AAED,KAJD;;AAMA,SAAKC,SAAL,GAAiB,YAAY;;AAE3BC,cAAMV,OAAN,CAAcW,IAAd,CAAmBD,MAAMvH,MAAzB;AACAuH,cAAMT,SAAN,CAAgBU,IAAhB,CAAqBD,MAAM9C,MAAN,CAAanG,QAAlC;AACAiJ,cAAMR,KAAN,GAAcQ,MAAM9C,MAAN,CAAauC,IAA3B;AAED,KAND;;AAQA,SAAKS,KAAL,GAAa,YAAY;;AAEvBF,cAAMvH,MAAN,CAAawH,IAAb,CAAkBD,MAAMV,OAAxB;AACAU,cAAM9C,MAAN,CAAanG,QAAb,CAAsBkJ,IAAtB,CAA2BD,MAAMT,SAAjC;AACAS,cAAM9C,MAAN,CAAauC,IAAb,GAAoBO,MAAMR,KAA1B;;AAEAQ,cAAM9C,MAAN,CAAaiD,sBAAb;AACAH,cAAMI,aAAN,CAAoBC,WAApB;;AAEAL,cAAM7E,MAAN;;AAEAmF,gBAAQC,MAAMC,IAAd;AAED,KAbD;;AAeA;AACA,SAAKrF,MAAL,GAAc,YAAY;;AAExB,YAAIsF,SAAS,IAAI3L,MAAMwI,OAAV,EAAb;;AAEA;AACA,YAAIoD,OAAO,IAAI5L,MAAM6L,UAAV,GAAuBC,kBAAvB,CAA0C1D,OAAO2D,EAAjD,EAAqD,IAAI/L,MAAMwI,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAArD,CAAX;AACA,YAAIwD,cAAcJ,KAAK5G,KAAL,GAAaiH,OAAb,EAAlB;;AAEA,YAAIC,eAAe,IAAIlM,MAAMwI,OAAV,EAAnB;AACA,YAAI2D,iBAAiB,IAAInM,MAAM6L,UAAV,EAArB;;AAEA,eAAO,SAASxF,MAAT,GAAkB;;AAEvB,gBAAIpE,WAAWiJ,MAAM9C,MAAN,CAAanG,QAA5B;;AAEA0J,mBAAOR,IAAP,CAAYlJ,QAAZ,EAAsBmK,GAAtB,CAA0BlB,MAAMvH,MAAhC;;AAEA;AACAgI,mBAAOU,eAAP,CAAuBT,IAAvB;;AAEA;AACAf,sBAAUyB,cAAV,CAAyBX,MAAzB;;AAEA,gBAAIT,MAAMxB,UAAN,IAAoB8B,UAAUC,MAAMC,IAAxC,EAA8C;;AAE5Ca,2BAAWC,sBAAX;AAED;;AAED3B,sBAAUG,KAAV,IAAmByB,eAAezB,KAAlC;AACAH,sBAAUC,GAAV,IAAiB2B,eAAe3B,GAAhC;;AAEA;AACAD,sBAAUG,KAAV,GAAkBpF,KAAK8G,GAAL,CAASxB,MAAMlC,eAAf,EAAgCpD,KAAK+G,GAAL,CAASzB,MAAMjC,eAAf,EAAgC4B,UAAUG,KAA1C,CAAhC,CAAlB;;AAEA;AACAH,sBAAUC,GAAV,GAAgBlF,KAAK8G,GAAL,CAASxB,MAAMpC,aAAf,EAA8BlD,KAAK+G,GAAL,CAASzB,MAAMnC,aAAf,EAA8B8B,UAAUC,GAAxC,CAA9B,CAAhB;;AAEAD,sBAAU+B,QAAV;;AAGA/B,sBAAUgC,MAAV,IAAoBC,KAApB;;AAEA;AACAjC,sBAAUgC,MAAV,GAAmBjH,KAAK8G,GAAL,CAASxB,MAAMzC,WAAf,EAA4B7C,KAAK+G,GAAL,CAASzB,MAAMxC,WAAf,EAA4BmC,UAAUgC,MAAtC,CAA5B,CAAnB;;AAEA;AACA3B,kBAAMvH,MAAN,CAAaD,GAAb,CAAiBqJ,SAAjB;;AAEApB,mBAAOqB,gBAAP,CAAwBnC,SAAxB;;AAEA;AACAc,mBAAOU,eAAP,CAAuBL,WAAvB;;AAEA/J,qBAASkJ,IAAT,CAAcD,MAAMvH,MAApB,EAA4BD,GAA5B,CAAgCiI,MAAhC;;AAEAT,kBAAM9C,MAAN,CAAa6E,MAAb,CAAoB/B,MAAMvH,MAA1B;;AAEA,gBAAIuH,MAAMhC,aAAN,KAAwB,IAA5B,EAAkC;;AAEhCuD,+BAAezB,KAAf,IAAyB,IAAIE,MAAM/B,aAAnC;AACAsD,+BAAe3B,GAAf,IAAuB,IAAII,MAAM/B,aAAjC;AAED,aALD,MAKO;;AAELsD,+BAAe1J,GAAf,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB;AAED;;AAED+J,oBAAQ,CAAR;AACAC,sBAAUhK,GAAV,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;;AAEA;AACA;AACA;;AAEA,gBAAImK,eACFhB,aAAaiB,iBAAb,CAA+BjC,MAAM9C,MAAN,CAAanG,QAA5C,IAAwDmL,GADtD,IAEF,KAAK,IAAIjB,eAAekB,GAAf,CAAmBnC,MAAM9C,MAAN,CAAakF,UAAhC,CAAT,IAAwDF,GAF1D,EAE+D;;AAE7DlC,sBAAMI,aAAN,CAAoBC,WAApB;;AAEAW,6BAAaf,IAAb,CAAkBD,MAAM9C,MAAN,CAAanG,QAA/B;AACAkK,+BAAehB,IAAf,CAAoBD,MAAM9C,MAAN,CAAakF,UAAjC;AACAJ,8BAAc,KAAd;;AAEA,uBAAO,IAAP;AAED;;AAED,mBAAO,KAAP;AAED,SAjFD;AAmFD,KA9Fa,EAAd;;AAgGA,SAAKK,OAAL,GAAe,YAAY;;AAEzBrC,cAAM7C,UAAN,CAAiBmF,mBAAjB,CAAqC,aAArC,EAAoDC,aAApD,EAAmE,KAAnE;AACAvC,cAAM7C,UAAN,CAAiBmF,mBAAjB,CAAqC,WAArC,EAAkDE,WAAlD,EAA+D,KAA/D;AACAxC,cAAM7C,UAAN,CAAiBmF,mBAAjB,CAAqC,OAArC,EAA8CG,YAA9C,EAA4D,KAA5D;;AAEAzC,cAAM7C,UAAN,CAAiBmF,mBAAjB,CAAqC,YAArC,EAAmDhH,YAAnD,EAAiE,KAAjE;AACA0E,cAAM7C,UAAN,CAAiBmF,mBAAjB,CAAqC,UAArC,EAAiD/G,UAAjD,EAA6D,KAA7D;AACAyE,cAAM7C,UAAN,CAAiBmF,mBAAjB,CAAqC,WAArC,EAAkDI,WAAlD,EAA+D,KAA/D;;AAEArF,iBAASiF,mBAAT,CAA6B,WAA7B,EAA0CK,WAA1C,EAAuD,KAAvD;AACAtF,iBAASiF,mBAAT,CAA6B,SAA7B,EAAwCM,SAAxC,EAAmD,KAAnD;;AAEAC,eAAOP,mBAAP,CAA2B,SAA3B,EAAsCQ,SAAtC,EAAiD,KAAjD;;AAEA;AAED,KAjBD;;AAmBA;AACA;AACA;;AAEA,QAAI9C,QAAQ,IAAZ;;AAEA,QAAIK,cAAc,EAAE0C,MAAM,QAAR,EAAlB;AACA,QAAIC,aAAa,EAAED,MAAM,OAAR,EAAjB;AACA,QAAIE,WAAW,EAAEF,MAAM,KAAR,EAAf;;AAEA,QAAIxC,QAAQ,EAAEC,MAAM,CAAE,CAAV,EAAa0C,QAAQ,CAArB,EAAwBC,OAAO,CAA/B,EAAkC9D,KAAK,CAAvC,EAA0C+D,cAAc,CAAxD,EAA2DC,aAAa,CAAxE,EAA2EC,WAAW,CAAtF,EAAZ;;AAEA,QAAIhD,QAAQC,MAAMC,IAAlB;;AAEA,QAAI0B,MAAM,QAAV;;AAEA;AACA,QAAIvC,YAAY,IAAI7K,MAAMyO,SAAV,EAAhB;AACA,QAAIhC,iBAAiB,IAAIzM,MAAMyO,SAAV,EAArB;;AAEA,QAAI3B,QAAQ,CAAZ;AACA,QAAIC,YAAY,IAAI/M,MAAMwI,OAAV,EAAhB;AACA,QAAI0E,cAAc,KAAlB;;AAEA,QAAIwB,cAAc,IAAI1O,MAAM2O,OAAV,EAAlB;AACA,QAAIC,YAAY,IAAI5O,MAAM2O,OAAV,EAAhB;AACA,QAAIE,cAAc,IAAI7O,MAAM2O,OAAV,EAAlB;;AAEA,QAAIG,WAAW,IAAI9O,MAAM2O,OAAV,EAAf;AACA,QAAII,SAAS,IAAI/O,MAAM2O,OAAV,EAAb;AACA,QAAIK,WAAW,IAAIhP,MAAM2O,OAAV,EAAf;;AAEA,QAAIM,aAAa,IAAIjP,MAAM2O,OAAV,EAAjB;AACA,QAAIO,WAAW,IAAIlP,MAAM2O,OAAV,EAAf;AACA,QAAIQ,aAAa,IAAInP,MAAM2O,OAAV,EAAjB;;AAEA,aAASnC,oBAAT,GAAgC;;AAE9B,eAAO,IAAI5G,KAAKC,EAAT,GAAc,EAAd,GAAmB,EAAnB,GAAwBqF,MAAMvB,eAArC;AAED;;AAED,aAASyF,YAAT,GAAwB;;AAEtB,eAAOxJ,KAAKyJ,GAAL,CAAS,IAAT,EAAenE,MAAM7B,SAArB,CAAP;AAED;;AAED,aAASkD,UAAT,CAAoB+C,KAApB,EAA2B;;AAEzB7C,uBAAezB,KAAf,IAAwBsE,KAAxB;AAED;;AAED,aAASC,QAAT,CAAkBD,KAAlB,EAAyB;;AAEvB7C,uBAAe3B,GAAf,IAAsBwE,KAAtB;AAED;;AAED,QAAIE,UAAU,YAAY;;AAExB,YAAIC,IAAI,IAAIzP,MAAMwI,OAAV,EAAR;;AAEA,eAAO,SAASgH,OAAT,CAAiBE,QAAjB,EAA2BC,YAA3B,EAAyC;;AAE9CF,cAAEG,mBAAF,CAAsBD,YAAtB,EAAoC,CAApC,EAF8C,CAEN;AACxCF,cAAEI,cAAF,CAAiB,CAAEH,QAAnB;;AAEA3C,sBAAUrJ,GAAV,CAAc+L,CAAd;AAED,SAPD;AASD,KAba,EAAd;;AAeA,QAAIK,QAAQ,YAAY;;AAEtB,YAAIL,IAAI,IAAIzP,MAAMwI,OAAV,EAAR;;AAEA,eAAO,SAASsH,KAAT,CAAeJ,QAAf,EAAyBC,YAAzB,EAAuC;;AAE5CF,cAAEG,mBAAF,CAAsBD,YAAtB,EAAoC,CAApC,EAF4C,CAEJ;AACxCF,cAAEI,cAAF,CAAiBH,QAAjB;;AAEA3C,sBAAUrJ,GAAV,CAAc+L,CAAd;AAED,SAPD;AASD,KAbW,EAAZ;;AAeA;AACA,QAAIM,MAAM,YAAY;;AAEpB,YAAIpE,SAAS,IAAI3L,MAAMwI,OAAV,EAAb;;AAEA,eAAO,SAASuH,GAAT,CAAaC,MAAb,EAAqBC,MAArB,EAA6B;;AAElC,gBAAIC,UAAUhF,MAAM7C,UAAN,KAAqBE,QAArB,GAAgC2C,MAAM7C,UAAN,CAAiB8H,IAAjD,GAAwDjF,MAAM7C,UAA5E;;AAEA,gBAAI6C,MAAM9C,MAAN,CAAagI,mBAAjB,EAAsC;;AAEpC;AACA,oBAAInO,WAAWiJ,MAAM9C,MAAN,CAAanG,QAA5B;AACA0J,uBAAOR,IAAP,CAAYlJ,QAAZ,EAAsBmK,GAAtB,CAA0BlB,MAAMvH,MAAhC;AACA,oBAAI0M,iBAAiB1E,OAAO2E,MAAP,EAArB;;AAEA;AACAD,kCAAkBzK,KAAK2K,GAAL,CAAUrF,MAAM9C,MAAN,CAAaoI,GAAb,GAAmB,CAApB,GAAyB5K,KAAKC,EAA9B,GAAmC,KAA5C,CAAlB;;AAEA;AACA2J,wBAAQ,IAAIQ,MAAJ,GAAaK,cAAb,GAA8BH,QAAQO,YAA9C,EAA4DvF,MAAM9C,MAAN,CAAasI,MAAzE;AACAZ,sBAAM,IAAIG,MAAJ,GAAaI,cAAb,GAA8BH,QAAQO,YAA5C,EAA0DvF,MAAM9C,MAAN,CAAasI,MAAvE;AAED,aAdD,MAcO,IAAIxF,MAAM9C,MAAN,CAAauI,oBAAjB,EAAuC;;AAE5C;AACAnB,wBAAQQ,UAAU9E,MAAM9C,MAAN,CAAalF,KAAb,GAAqBgI,MAAM9C,MAAN,CAAanF,IAA5C,IAAoDiI,MAAM9C,MAAN,CAAauC,IAAjE,GAAwEuF,QAAQU,WAAxF,EAAqG1F,MAAM9C,MAAN,CAAasI,MAAlH;AACAZ,sBAAMG,UAAU/E,MAAM9C,MAAN,CAAajF,GAAb,GAAmB+H,MAAM9C,MAAN,CAAahF,MAA1C,IAAoD8H,MAAM9C,MAAN,CAAauC,IAAjE,GAAwEuF,QAAQO,YAAtF,EAAoGvF,MAAM9C,MAAN,CAAasI,MAAjH;AAED,aANM,MAMA;;AAEL;AACA7J,wBAAQgK,IAAR,CAAa,8EAAb;AACA3F,sBAAM1B,SAAN,GAAkB,KAAlB;AAED;AAEF,SAhCD;AAkCD,KAtCS,EAAV;;AAwCA,aAASsH,OAAT,CAAiBC,UAAjB,EAA6B;;AAE3B,YAAI7F,MAAM9C,MAAN,CAAagI,mBAAjB,EAAsC;;AAEpCtD,qBAASiE,UAAT;AAED,SAJD,MAIO,IAAI7F,MAAM9C,MAAN,CAAauI,oBAAjB,EAAuC;;AAE5CzF,kBAAM9C,MAAN,CAAauC,IAAb,GAAoB/E,KAAK8G,GAAL,CAASxB,MAAMtC,OAAf,EAAwBhD,KAAK+G,GAAL,CAASzB,MAAMrC,OAAf,EAAwBqC,MAAM9C,MAAN,CAAauC,IAAb,GAAoBoG,UAA5C,CAAxB,CAApB;AACA7F,kBAAM9C,MAAN,CAAaiD,sBAAb;AACA6B,0BAAc,IAAd;AAED,SANM,MAMA;;AAELrG,oBAAQgK,IAAR,CAAa,qFAAb;AACA3F,kBAAM9B,UAAN,GAAmB,KAAnB;AAED;AAEF;;AAED,aAAS4H,QAAT,CAAkBD,UAAlB,EAA8B;;AAE5B,YAAI7F,MAAM9C,MAAN,CAAagI,mBAAjB,EAAsC;;AAEpCtD,qBAASiE,UAAT;AAED,SAJD,MAIO,IAAI7F,MAAM9C,MAAN,CAAauI,oBAAjB,EAAuC;;AAE5CzF,kBAAM9C,MAAN,CAAauC,IAAb,GAAoB/E,KAAK8G,GAAL,CAASxB,MAAMtC,OAAf,EAAwBhD,KAAK+G,GAAL,CAASzB,MAAMrC,OAAf,EAAwBqC,MAAM9C,MAAN,CAAauC,IAAb,GAAoBoG,UAA5C,CAAxB,CAApB;AACA7F,kBAAM9C,MAAN,CAAaiD,sBAAb;AACA6B,0BAAc,IAAd;AAED,SANM,MAMA;;AAELrG,oBAAQgK,IAAR,CAAa,qFAAb;AACA3F,kBAAM9B,UAAN,GAAmB,KAAnB;AAED;AAEF;;AAED;AACA;AACA;;AAEA,aAAS6H,qBAAT,CAA+BC,KAA/B,EAAsC;;AAEpC;;AAEAxC,oBAAY3L,GAAZ,CAAgBmO,MAAMC,OAAtB,EAA+BD,MAAME,OAArC;AAED;;AAED,aAASC,oBAAT,CAA8BH,KAA9B,EAAqC;;AAEnC;;AAEAjC,mBAAWlM,GAAX,CAAemO,MAAMC,OAArB,EAA8BD,MAAME,OAApC;AAED;;AAED,aAASE,kBAAT,CAA4BJ,KAA5B,EAAmC;;AAEjC;;AAEApC,iBAAS/L,GAAT,CAAamO,MAAMC,OAAnB,EAA4BD,MAAME,OAAlC;AAED;;AAED,aAASG,qBAAT,CAA+BL,KAA/B,EAAsC;;AAEpC;;AAEAtC,kBAAU7L,GAAV,CAAcmO,MAAMC,OAApB,EAA6BD,MAAME,OAAnC;AACAvC,oBAAY2C,UAAZ,CAAuB5C,SAAvB,EAAkCF,WAAlC;;AAEA,YAAIwB,UAAUhF,MAAM7C,UAAN,KAAqBE,QAArB,GAAgC2C,MAAM7C,UAAN,CAAiB8H,IAAjD,GAAwDjF,MAAM7C,UAA5E;;AAEA;AACAkE,mBAAW,IAAI3G,KAAKC,EAAT,GAAcgJ,YAAY3M,CAA1B,GAA8BgO,QAAQU,WAAtC,GAAoD1F,MAAM3B,WAArE;;AAEA;AACAgG,iBAAS,IAAI3J,KAAKC,EAAT,GAAcgJ,YAAY1M,CAA1B,GAA8B+N,QAAQO,YAAtC,GAAqDvF,MAAM3B,WAApE;;AAEAmF,oBAAYvD,IAAZ,CAAiByD,SAAjB;;AAEA1D,cAAM7E,MAAN;AAED;;AAED,aAASoL,oBAAT,CAA8BP,KAA9B,EAAqC;;AAEnC;;AAEAhC,iBAASnM,GAAT,CAAamO,MAAMC,OAAnB,EAA4BD,MAAME,OAAlC;;AAEAjC,mBAAWqC,UAAX,CAAsBtC,QAAtB,EAAgCD,UAAhC;;AAEA,YAAIE,WAAWhN,CAAX,GAAe,CAAnB,EAAsB;;AAEpB2O,oBAAQ1B,cAAR;AAED,SAJD,MAIO,IAAID,WAAWhN,CAAX,GAAe,CAAnB,EAAsB;;AAE3B6O,qBAAS5B,cAAT;AAED;;AAEDH,mBAAW9D,IAAX,CAAgB+D,QAAhB;;AAEAhE,cAAM7E,MAAN;AAED;;AAED,aAASqL,kBAAT,CAA4BR,KAA5B,EAAmC;;AAEjC;;AAEAnC,eAAOhM,GAAP,CAAWmO,MAAMC,OAAjB,EAA0BD,MAAME,OAAhC;;AAEApC,iBAASwC,UAAT,CAAoBzC,MAApB,EAA4BD,QAA5B;;AAEAiB,YAAIf,SAAS9M,CAAb,EAAgB8M,SAAS7M,CAAzB;;AAEA2M,iBAAS3D,IAAT,CAAc4D,MAAd;;AAEA7D,cAAM7E,MAAN;AAED;;AAED,aAASsL,aAAT,CAAuBT,KAAvB,EAA8B;;AAE5B;;AAED;;AAED,aAASU,gBAAT,CAA0BV,KAA1B,EAAiC;;AAE/B;;AAEA,YAAIA,MAAMjB,MAAN,GAAe,CAAnB,EAAsB;;AAEpBe,qBAAS5B,cAAT;AAED,SAJD,MAIO,IAAI8B,MAAMjB,MAAN,GAAe,CAAnB,EAAsB;;AAE3Ba,oBAAQ1B,cAAR;AAED;;AAEDlE,cAAM7E,MAAN;AAED;;AAED,aAASwL,aAAT,CAAuBX,KAAvB,EAA8B;;AAE5B;;AAEA,gBAAQA,MAAMY,OAAd;;AAEE,iBAAK5G,MAAMrB,IAAN,CAAWE,EAAhB;AACEgG,oBAAI,CAAJ,EAAO7E,MAAMzB,WAAb;AACAyB,sBAAM7E,MAAN;AACA;;AAEF,iBAAK6E,MAAMrB,IAAN,CAAWI,MAAhB;AACE8F,oBAAI,CAAJ,EAAO,CAAE7E,MAAMzB,WAAf;AACAyB,sBAAM7E,MAAN;AACA;;AAEF,iBAAK6E,MAAMrB,IAAN,CAAWC,IAAhB;AACEiG,oBAAI7E,MAAMzB,WAAV,EAAuB,CAAvB;AACAyB,sBAAM7E,MAAN;AACA;;AAEF,iBAAK6E,MAAMrB,IAAN,CAAWG,KAAhB;AACE+F,oBAAI,CAAE7E,MAAMzB,WAAZ,EAAyB,CAAzB;AACAyB,sBAAM7E,MAAN;AACA;;AApBJ;AAwBD;;AAED,aAAS0L,sBAAT,CAAgCb,KAAhC,EAAuC;;AAErC;;AAEAxC,oBAAY3L,GAAZ,CAAgBmO,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAAjC,EAAwCf,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAAzD;AAED;;AAED,aAASC,qBAAT,CAA+BjB,KAA/B,EAAsC;;AAEpC;;AAEA,YAAIkB,KAAKlB,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyBf,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAAnD;AACA,YAAII,KAAKnB,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAAjB,GAAyBhB,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAAnD;;AAEA,YAAIxC,WAAW9J,KAAK0M,IAAL,CAAUF,KAAKA,EAAL,GAAUC,KAAKA,EAAzB,CAAf;;AAEApD,mBAAWlM,GAAX,CAAe,CAAf,EAAkB2M,QAAlB;AAED;;AAED,aAAS6C,mBAAT,CAA6BrB,KAA7B,EAAoC;;AAElC;;AAEApC,iBAAS/L,GAAT,CAAamO,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAA9B,EAAqCf,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAAtD;AAED;;AAED,aAASM,qBAAT,CAA+BtB,KAA/B,EAAsC;;AAEpC;;AAEAtC,kBAAU7L,GAAV,CAAcmO,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAA/B,EAAsCf,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAAvD;AACArD,oBAAY2C,UAAZ,CAAuB5C,SAAvB,EAAkCF,WAAlC;;AAEA,YAAIwB,UAAUhF,MAAM7C,UAAN,KAAqBE,QAArB,GAAgC2C,MAAM7C,UAAN,CAAiB8H,IAAjD,GAAwDjF,MAAM7C,UAA5E;;AAEA;AACA;AACAkE,mBAAW,IAAI3G,KAAKC,EAAT,GAAcgJ,YAAY3M,CAA1B,GAA8B6L,OAAO1M,UAArC,GAAkD6J,MAAM3B,WAAnE;;AAEA;AACA;AACAgG,iBAAS,IAAI3J,KAAKC,EAAT,GAAcgJ,YAAY1M,CAA1B,GAA8B4L,OAAOzM,WAArC,GAAmD4J,MAAM3B,WAAlE;;AAEAmF,oBAAYvD,IAAZ,CAAiByD,SAAjB;;AAEA1D,cAAM7E,MAAN;AAED;;AAED,aAASoM,oBAAT,CAA8BvB,KAA9B,EAAqC;;AAEnC;;AAEA,YAAIkB,KAAKlB,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAAjB,GAAyBf,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAAnD;AACA,YAAII,KAAKnB,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAAjB,GAAyBhB,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAAnD;;AAEA,YAAIxC,WAAW9J,KAAK0M,IAAL,CAAUF,KAAKA,EAAL,GAAUC,KAAKA,EAAzB,CAAf;;AAEAnD,iBAASnM,GAAT,CAAa,CAAb,EAAgB2M,QAAhB;;AAEAP,mBAAWqC,UAAX,CAAsBtC,QAAtB,EAAgCD,UAAhC;;AAEA,YAAIE,WAAWhN,CAAX,GAAe,CAAnB,EAAsB;;AAEpB6O,qBAAS5B,cAAT;AAED,SAJD,MAIO,IAAID,WAAWhN,CAAX,GAAe,CAAnB,EAAsB;;AAE3B2O,oBAAQ1B,cAAR;AAED;;AAEDH,mBAAW9D,IAAX,CAAgB+D,QAAhB;;AAEAhE,cAAM7E,MAAN;AAED;;AAED,aAASqM,kBAAT,CAA4BxB,KAA5B,EAAmC;;AAEjC;;AAEAnC,eAAOhM,GAAP,CAAWmO,MAAMc,OAAN,CAAc,CAAd,EAAiBC,KAA5B,EAAmCf,MAAMc,OAAN,CAAc,CAAd,EAAiBE,KAApD;;AAEAlD,iBAASwC,UAAT,CAAoBzC,MAApB,EAA4BD,QAA5B;;AAEAiB,YAAIf,SAAS9M,CAAb,EAAgB8M,SAAS7M,CAAzB;;AAEA2M,iBAAS3D,IAAT,CAAc4D,MAAd;;AAEA7D,cAAM7E,MAAN;AAED;;AAED,aAASsM,cAAT,CAAwBzB,KAAxB,EAA+B,CAI9B;;AAFC;;AAIF;AACA;AACA;;AAEA,aAASxD,WAAT,CAAqBwD,KAArB,EAA4B;;AAE1B,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAtB,EAA6B;;AAE7BkP,cAAM0B,cAAN;;AAEA,gBAAQ1B,MAAM2B,MAAd;;AAEE,iBAAK3H,MAAMhB,YAAN,CAAmBC,KAAxB;;AAEE,oBAAIe,MAAM5B,YAAN,KAAuB,KAA3B,EAAkC;;AAElC2H,sCAAsBC,KAAtB;;AAEA1F,wBAAQC,MAAM2C,MAAd;;AAEA;;AAEF,iBAAKlD,MAAMhB,YAAN,CAAmBG,IAAxB;;AAEE,oBAAIa,MAAM9B,UAAN,KAAqB,KAAzB,EAAgC;;AAEhCiI,qCAAqBH,KAArB;;AAEA1F,wBAAQC,MAAM4C,KAAd;;AAEA;;AAEF,iBAAKnD,MAAMhB,YAAN,CAAmBK,GAAxB;;AAEE,oBAAIW,MAAM1B,SAAN,KAAoB,KAAxB,EAA+B;;AAE/B8H,mCAAmBJ,KAAnB;;AAEA1F,wBAAQC,MAAMlB,GAAd;;AAEA;;AA9BJ;;AAkCA,YAAIiB,UAAUC,MAAMC,IAApB,EAA0B;;AAExBnD,qBAAShC,gBAAT,CAA0B,WAA1B,EAAuCsH,WAAvC,EAAoD,KAApD;AACAtF,qBAAShC,gBAAT,CAA0B,SAA1B,EAAqCuH,SAArC,EAAgD,KAAhD;;AAEA5C,kBAAMI,aAAN,CAAoB4C,UAApB;AAED;AAEF;;AAED,aAASL,WAAT,CAAqBqD,KAArB,EAA4B;;AAE1B,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAtB,EAA6B;;AAE7BkP,cAAM0B,cAAN;;AAEA,gBAAQpH,KAAR;;AAEE,iBAAKC,MAAM2C,MAAX;;AAEE,oBAAIlD,MAAM5B,YAAN,KAAuB,KAA3B,EAAkC;;AAElCiI,sCAAsBL,KAAtB;;AAEA;;AAEF,iBAAKzF,MAAM4C,KAAX;;AAEE,oBAAInD,MAAM9B,UAAN,KAAqB,KAAzB,EAAgC;;AAEhCqI,qCAAqBP,KAArB;;AAEA;;AAEF,iBAAKzF,MAAMlB,GAAX;;AAEE,oBAAIW,MAAM1B,SAAN,KAAoB,KAAxB,EAA+B;;AAE/BkI,mCAAmBR,KAAnB;;AAEA;;AAxBJ;AA4BD;;AAED,aAASpD,SAAT,CAAmBoD,KAAnB,EAA0B;;AAExB,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAtB,EAA6B;;AAE7B2P,sBAAcT,KAAd;;AAEA3I,iBAASiF,mBAAT,CAA6B,WAA7B,EAA0CK,WAA1C,EAAuD,KAAvD;AACAtF,iBAASiF,mBAAT,CAA6B,SAA7B,EAAwCM,SAAxC,EAAmD,KAAnD;;AAEA5C,cAAMI,aAAN,CAAoB6C,QAApB;;AAEA3C,gBAAQC,MAAMC,IAAd;AAED;;AAED,aAASiC,YAAT,CAAsBuD,KAAtB,EAA6B;;AAE3B,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAlB,IAA2BkJ,MAAM9B,UAAN,KAAqB,KAAhD,IAA0DoC,UAAUC,MAAMC,IAAhB,IAAwBF,UAAUC,MAAM2C,MAAtG,EAA+G;;AAE/G8C,cAAM0B,cAAN;AACA1B,cAAM4B,eAAN;;AAEAlB,yBAAiBV,KAAjB;;AAEAhG,cAAMI,aAAN,CAAoB4C,UAApB,EAT2B,CASM;AACjChD,cAAMI,aAAN,CAAoB6C,QAApB;AAED;;AAED,aAASH,SAAT,CAAmBkD,KAAnB,EAA0B;;AAExB,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAlB,IAA2BkJ,MAAMtB,UAAN,KAAqB,KAAhD,IAAyDsB,MAAM1B,SAAN,KAAoB,KAAjF,EAAwF;;AAExFqI,sBAAcX,KAAd;AAED;;AAED,aAAS1K,YAAT,CAAsB0K,KAAtB,EAA6B;;AAE3B,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAtB,EAA6B;;AAE7B,gBAAQkP,MAAMc,OAAN,CAAc1B,MAAtB;;AAEE,iBAAK,CAAL;AAAQ;;AAEN,oBAAIpF,MAAM5B,YAAN,KAAuB,KAA3B,EAAkC;;AAElCyI,uCAAuBb,KAAvB;;AAEA1F,wBAAQC,MAAM6C,YAAd;;AAEA;;AAEF,iBAAK,CAAL;AAAQ;;AAEN,oBAAIpD,MAAM9B,UAAN,KAAqB,KAAzB,EAAgC;;AAEhC+I,sCAAsBjB,KAAtB;;AAEA1F,wBAAQC,MAAM8C,WAAd;;AAEA;;AAEF,iBAAK,CAAL;AAAQ;;AAEN,oBAAIrD,MAAM1B,SAAN,KAAoB,KAAxB,EAA+B;;AAE/B+I,oCAAoBrB,KAApB;;AAEA1F,wBAAQC,MAAM+C,SAAd;;AAEA;;AAEF;;AAEEhD,wBAAQC,MAAMC,IAAd;;AAlCJ;;AAsCA,YAAIF,UAAUC,MAAMC,IAApB,EAA0B;;AAExBR,kBAAMI,aAAN,CAAoB4C,UAApB;AAED;AAEF;;AAED,aAASN,WAAT,CAAqBsD,KAArB,EAA4B;;AAE1B,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAtB,EAA6B;;AAE7BkP,cAAM0B,cAAN;AACA1B,cAAM4B,eAAN;;AAEA,gBAAQ5B,MAAMc,OAAN,CAAc1B,MAAtB;;AAEE,iBAAK,CAAL;AAAQ;;AAEN,oBAAIpF,MAAM5B,YAAN,KAAuB,KAA3B,EAAkC;AAClC,oBAAIkC,UAAUC,MAAM6C,YAApB,EAAkC,OAHpC,CAG4C;;AAE1CkE,sCAAsBtB,KAAtB;;AAEA;;AAEF,iBAAK,CAAL;AAAQ;;AAEN,oBAAIhG,MAAM9B,UAAN,KAAqB,KAAzB,EAAgC;AAChC,oBAAIoC,UAAUC,MAAM8C,WAApB,EAAiC,OAHnC,CAG2C;;AAEzCkE,qCAAqBvB,KAArB;;AAEA;;AAEF,iBAAK,CAAL;AAAQ;;AAEN,oBAAIhG,MAAM1B,SAAN,KAAoB,KAAxB,EAA+B;AAC/B,oBAAIgC,UAAUC,MAAM+C,SAApB,EAA+B,OAHjC,CAGyC;;AAEvCkE,mCAAmBxB,KAAnB;;AAEA;;AAEF;;AAEE1F,wBAAQC,MAAMC,IAAd;;AA/BJ;AAkCD;;AAED,aAASjF,UAAT,CAAoByK,KAApB,EAA2B;;AAEzB,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAtB,EAA6B;;AAE7B2Q,uBAAezB,KAAf;;AAEAhG,cAAMI,aAAN,CAAoB6C,QAApB;;AAEA3C,gBAAQC,MAAMC,IAAd;AAED;;AAED,aAAS+B,aAAT,CAAuByD,KAAvB,EAA8B;;AAE5B,YAAIhG,MAAMlJ,OAAN,KAAkB,KAAtB,EAA6B;;AAE7BkP,cAAM0B,cAAN;AAED;;AAED;;AAEA1H,UAAM7C,UAAN,CAAiB9B,gBAAjB,CAAkC,aAAlC,EAAiDkH,aAAjD,EAAgE,KAAhE;;AAEAvC,UAAM7C,UAAN,CAAiB9B,gBAAjB,CAAkC,WAAlC,EAA+CmH,WAA/C,EAA4D,KAA5D;AACAxC,UAAM7C,UAAN,CAAiB9B,gBAAjB,CAAkC,OAAlC,EAA2CoH,YAA3C,EAAyD,KAAzD;;AAEAzC,UAAM7C,UAAN,CAAiB9B,gBAAjB,CAAkC,YAAlC,EAAgDC,YAAhD,EAA8D,KAA9D;AACA0E,UAAM7C,UAAN,CAAiB9B,gBAAjB,CAAkC,UAAlC,EAA8CE,UAA9C,EAA0D,KAA1D;AACAyE,UAAM7C,UAAN,CAAiB9B,gBAAjB,CAAkC,WAAlC,EAA+CqH,WAA/C,EAA4D,KAA5D;;AAEAG,WAAOxH,gBAAP,CAAwB,SAAxB,EAAmCyH,SAAnC,EAA8C,KAA9C;;AAEA;;AAEA,SAAK3H,MAAL;AAED,CAn4BD;;AAq4BArG,MAAM0C,aAAN,CAAoBqQ,SAApB,GAAgCC,OAAOC,MAAP,CAAcjT,MAAMkT,eAAN,CAAsBH,SAApC,CAAhC;AACA/S,MAAM0C,aAAN,CAAoBqQ,SAApB,CAA8BI,WAA9B,GAA4CnT,MAAM0C,aAAlD;;AAEAsQ,OAAOI,gBAAP,CAAwBpT,MAAM0C,aAAN,CAAoBqQ,SAA5C,EAAuD;;AAErDM,YAAQ;;AAENC,aAAK,eAAY;;AAEfzM,oBAAQgK,IAAR,CAAa,0DAAb;AACA,mBAAO,KAAKlN,MAAZ;AAED;;AAPK,KAF6C;;AAarD;;AAEA4P,YAAQ;;AAEND,aAAK,eAAY;;AAEfzM,oBAAQgK,IAAR,CAAa,4EAAb;AACA,mBAAO,CAAC,KAAKzH,UAAb;AAED,SAPK;;AASNrG,aAAK,aAAUyQ,KAAV,EAAiB;;AAEpB3M,oBAAQgK,IAAR,CAAa,4EAAb;AACA,iBAAKzH,UAAL,GAAkB,CAACoK,KAAnB;AAED;;AAdK,KAf6C;;AAiCrDC,cAAU;;AAERH,aAAK,eAAY;;AAEfzM,oBAAQgK,IAAR,CAAa,gFAAb;AACA,mBAAO,CAAC,KAAKvH,YAAb;AAED,SAPO;;AASRvG,aAAK,aAAUyQ,KAAV,EAAiB;;AAEpB3M,oBAAQgK,IAAR,CAAa,gFAAb;AACA,iBAAKvH,YAAL,GAAoB,CAACkK,KAArB;AAED;;AAdO,KAjC2C;;AAmDrDE,WAAO;;AAELJ,aAAK,eAAY;;AAEfzM,oBAAQgK,IAAR,CAAa,0EAAb;AACA,mBAAO,CAAC,KAAKrH,SAAb;AAED,SAPI;;AASLzG,aAAK,aAAUyQ,KAAV,EAAiB;;AAEpB3M,oBAAQgK,IAAR,CAAa,0EAAb;AACA,iBAAKrH,SAAL,GAAiB,CAACgK,KAAlB;AAED;;AAdI,KAnD8C;;AAqErDG,YAAQ;;AAENL,aAAK,eAAY;;AAEfzM,oBAAQgK,IAAR,CAAa,4EAAb;AACA,mBAAO,CAAC,KAAKjH,UAAb;AAED,SAPK;;AASN7G,aAAK,aAAUyQ,KAAV,EAAiB;;AAEpB3M,oBAAQgK,IAAR,CAAa,4EAAb;AACA,iBAAKjH,UAAL,GAAkB,CAAC4J,KAAnB;AAED;;AAdK,KArE6C;;AAuFrDI,kBAAc;;AAEZN,aAAK,eAAY;;AAEfzM,oBAAQgK,IAAR,CAAa,qFAAb;AACA,mBAAO,CAAC,KAAK3H,aAAb;AAED,SAPW;;AASZnG,aAAK,aAAUyQ,KAAV,EAAiB;;AAEpB3M,oBAAQgK,IAAR,CAAa,qFAAb;AACA,iBAAK3H,aAAL,GAAqB,CAACsK,KAAtB;AAED;;AAdW,KAvFuC;;AAyGrDK,0BAAsB;;AAEpBP,aAAK,eAAY;;AAEfzM,oBAAQgK,IAAR,CAAa,0FAAb;AACA,mBAAO,KAAK1H,aAAZ;AAED,SAPmB;;AASpBpG,aAAK,aAAUyQ,KAAV,EAAiB;;AAEpB3M,oBAAQgK,IAAR,CAAa,0FAAb;AACA,iBAAK1H,aAAL,GAAqBqK,KAArB;AAED;;AAdmB;;AAzG+B,CAAvD,E;;;;;;;;;;;;;;;;ACz5BA;;;;;;;;;AASA,IAAIvT,QAAQA,SAAU,YAAY;;AAE9B,QAAI6T,UAAU,EAAd;;AAEA,WAAO;;AAEHC,gBAAQ,kBAAY;;AAEhB,mBAAOD,OAAP;AAEH,SANE;;AAQHE,mBAAW,qBAAY;;AAEnBF,sBAAU,EAAV;AAEH,SAZE;;AAcHpQ,aAAK,aAAUwD,KAAV,EAAiB;;AAElB4M,oBAAQ/O,IAAR,CAAamC,KAAb;AAEH,SAlBE;;AAoBH+M,gBAAQ,gBAAU/M,KAAV,EAAiB;;AAErB,gBAAIgN,IAAIJ,QAAQK,OAAR,CAAgBjN,KAAhB,CAAR;;AAEA,gBAAIgN,MAAM,CAAC,CAAX,EAAc;AACVJ,wBAAQM,MAAR,CAAeF,CAAf,EAAkB,CAAlB;AACH;AAEJ,SA5BE;;AA8BH7N,gBAAQ,gBAAUgO,IAAV,EAAgBC,QAAhB,EAA0B;;AAE9B,gBAAIR,QAAQxD,MAAR,KAAmB,CAAvB,EAA0B;AACtB,uBAAO,KAAP;AACH;;AAED,gBAAI4D,IAAI,CAAR;;AAEAG,mBAAOA,SAAS/L,SAAT,GAAqB+L,IAArB,GAA4BpU,MAAMsU,GAAN,EAAnC;;AAEA,mBAAOL,IAAIJ,QAAQxD,MAAnB,EAA2B;;AAEvB,oBAAIwD,QAAQI,CAAR,EAAW7N,MAAX,CAAkBgO,IAAlB,KAA2BC,QAA/B,EAAyC;AACrCJ;AACH,iBAFD,MAEO;AACHJ,4BAAQM,MAAR,CAAeF,CAAf,EAAkB,CAAlB;AACH;AAEJ;;AAED,mBAAO,IAAP;AAEH;AApDE,KAAP;AAuDH,CA3DoB,EAArB;;AA8DA;AACA;AACA,IAAI,OAAQnG,MAAR,KAAoB,WAApB,IAAmC,OAAQyG,OAAR,KAAqB,WAA5D,EAAyE;AACrEvU,UAAMsU,GAAN,GAAY,YAAY;AACpB,YAAIF,OAAOG,QAAQC,MAAR,EAAX;;AAEA;AACA,eAAOJ,KAAK,CAAL,IAAU,IAAV,GAAiBA,KAAK,CAAL,IAAU,OAAlC;AACH,KALD;AAMH;AACD;AARA,KASK,IAAI,OAAQtG,MAAR,KAAoB,WAApB,IACLA,OAAO2G,WAAP,KAAuBpM,SADlB,IAELyF,OAAO2G,WAAP,CAAmBH,GAAnB,KAA2BjM,SAF1B,EAEqC;AACtC;AACA;AACArI,cAAMsU,GAAN,GAAYxG,OAAO2G,WAAP,CAAmBH,GAAnB,CAAuBI,IAAvB,CAA4B5G,OAAO2G,WAAnC,CAAZ;AACH;AACD;AAPK,SAQA,IAAI/N,KAAK4N,GAAL,KAAajM,SAAjB,EAA4B;AAC7BrI,kBAAMsU,GAAN,GAAY5N,KAAK4N,GAAjB;AACH;AACD;AAHK,aAIA;AACDtU,sBAAMsU,GAAN,GAAY,YAAY;AACpB,2BAAO,IAAI5N,IAAJ,GAAWC,OAAX,EAAP;AACH,iBAFD;AAGH;;AAGD,SAASgO,MAAT,CAAgBjR,MAAhB,EAAwBkR,MAAxB,EAAgC;AAC5B,QAAIhL,OAAOmJ,OAAOnJ,IAAP,CAAYgL,MAAZ,CAAX;AACA,QAAIvE,SAASzG,KAAKyG,MAAlB;;AAEA,SAAK,IAAI4D,IAAI,CAAb,EAAgBA,IAAI5D,MAApB,EAA4B4D,KAAK,CAAjC,EAAoC;AAChCvQ,eAAOkG,KAAKqK,CAAL,CAAP,IAAkBW,OAAOhL,KAAKqK,CAAL,CAAP,CAAlB;AACH;;AAED,WAAOvQ,MAAP;AACH;;AAGD1D,MAAMkH,KAAN,GAAc,UAAUiB,MAAV,EAAkB;;AAE5B,SAAK0M,OAAL,GAAe1M,MAAf;AACA,SAAK2M,YAAL,GAAoB,EAApB;AACA,SAAKC,UAAL,GAAkB,EAAlB;AACA,SAAKC,kBAAL,GAA0B,EAA1B;AACA,SAAKC,SAAL,GAAiB,IAAjB;AACA,SAAKC,OAAL,GAAe,CAAf;AACA,SAAKC,gBAAL,GAAwB9M,SAAxB;AACA,SAAK+M,KAAL,GAAa,KAAb;AACA,SAAKC,UAAL,GAAkB,KAAlB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKC,eAAL,GAAuBzV,MAAMqH,MAAN,CAAaY,MAAb,CAAoBC,IAA3C;AACA,SAAKwN,sBAAL,GAA8B1V,MAAM2V,aAAN,CAAoB1N,MAAlD;AACA,SAAK2N,cAAL,GAAsB,EAAtB;AACA,SAAKC,gBAAL,GAAwB,IAAxB;AACA,SAAKC,qBAAL,GAA6B,KAA7B;AACA,SAAKC,iBAAL,GAAyB,IAAzB;AACA,SAAKC,mBAAL,GAA2B,IAA3B;AACA,SAAKC,eAAL,GAAuB,IAAvB;AAEH,CAvBD;;AAyBAjW,MAAMkH,KAAN,CAAY4L,SAAZ,GAAwB6B,OAAO5B,OAAOC,MAAP,CAAcD,OAAOD,SAArB,CAAP,EAAwC;AAC5D3L,QAAI,SAASA,EAAT,CAAY+O,UAAZ,EAAwBC,QAAxB,EAAkC;;AAElC,aAAKpB,UAAL,GAAkBmB,UAAlB;;AAEA,YAAIC,aAAa9N,SAAjB,EAA4B;AACxB,iBAAK4M,SAAL,GAAiBkB,QAAjB;AACH;;AAED,eAAO,IAAP;AAEH,KAX2D;;AAa5DvO,WAAO,SAASA,KAAT,CAAewM,IAAf,EAAqB;;AAExBpU,cAAMyD,GAAN,CAAU,IAAV;;AAEA,aAAK4R,UAAL,GAAkB,IAAlB;;AAEA,aAAKS,qBAAL,GAA6B,KAA7B;;AAEA,aAAKN,UAAL,GAAkBpB,SAAS/L,SAAT,GAAqB+L,IAArB,GAA4BpU,MAAMsU,GAAN,EAA9C;AACA,aAAKkB,UAAL,IAAmB,KAAKD,UAAxB;;AAEA,aAAK,IAAIa,QAAT,IAAqB,KAAKrB,UAA1B,EAAsC;;AAElC;AACA,gBAAI,KAAKA,UAAL,CAAgBqB,QAAhB,aAAqCC,KAAzC,EAAgD;;AAE5C,oBAAI,KAAKtB,UAAL,CAAgBqB,QAAhB,EAA0B/F,MAA1B,KAAqC,CAAzC,EAA4C;AACxC;AACH;;AAED;AACA,qBAAK0E,UAAL,CAAgBqB,QAAhB,IAA4B,CAAC,KAAKvB,OAAL,CAAauB,QAAb,CAAD,EAAyBE,MAAzB,CAAgC,KAAKvB,UAAL,CAAgBqB,QAAhB,CAAhC,CAA5B;AAEH;;AAED;AACA;AACA,gBAAI,KAAKvB,OAAL,CAAauB,QAAb,MAA2B/N,SAA/B,EAA0C;AACtC;AACH;;AAED;AACA,iBAAKyM,YAAL,CAAkBsB,QAAlB,IAA8B,KAAKvB,OAAL,CAAauB,QAAb,CAA9B;;AAEA,gBAAK,KAAKtB,YAAL,CAAkBsB,QAAlB,aAAuCC,KAAxC,KAAmD,KAAvD,EAA8D;AAC1D,qBAAKvB,YAAL,CAAkBsB,QAAlB,KAA+B,GAA/B,CAD0D,CACtB;AACvC;;AAED,iBAAKpB,kBAAL,CAAwBoB,QAAxB,IAAoC,KAAKtB,YAAL,CAAkBsB,QAAlB,KAA+B,CAAnE;AAEH;;AAED,eAAO,IAAP;AAEH,KAzD2D;;AA2D5DG,UAAM,SAASA,IAAT,GAAgB;;AAElB,YAAI,CAAC,KAAKlB,UAAV,EAAsB;AAClB,mBAAO,IAAP;AACH;;AAEDrV,cAAMgU,MAAN,CAAa,IAAb;AACA,aAAKqB,UAAL,GAAkB,KAAlB;;AAEA,YAAI,KAAKY,eAAL,KAAyB,IAA7B,EAAmC;AAC/B,iBAAKA,eAAL,CAAqBO,IAArB,CAA0B,KAAK3B,OAA/B,EAAwC,KAAKA,OAA7C;AACH;;AAED,aAAK4B,iBAAL;AACA,eAAO,IAAP;AAEH,KA3E2D;;AA6E5DC,SAAK,SAASA,GAAT,GAAe;;AAEhB,aAAKtQ,MAAL,CAAY,KAAKoP,UAAL,GAAkB,KAAKP,SAAnC;AACA,eAAO,IAAP;AAEH,KAlF2D;;AAoF5DwB,uBAAmB,SAASA,iBAAT,GAA6B;;AAE5C,aAAK,IAAIxC,IAAI,CAAR,EAAW0C,mBAAmB,KAAKf,cAAL,CAAoBvF,MAAvD,EAA+D4D,IAAI0C,gBAAnE,EAAqF1C,GAArF,EAA0F;AACtF,iBAAK2B,cAAL,CAAoB3B,CAApB,EAAuBsC,IAAvB;AACH;AAEJ,KA1F2D;;AA4F5DK,WAAO,SAASA,KAAT,CAAeC,MAAf,EAAuB;;AAE1B,aAAKtB,UAAL,GAAkBsB,MAAlB;AACA,eAAO,IAAP;AAEH,KAjG2D;;AAmG5DC,YAAQ,SAASA,MAAT,CAAgBC,KAAhB,EAAuB;;AAE3B,aAAK7B,OAAL,GAAe6B,KAAf;AACA,eAAO,IAAP;AAEH,KAxG2D;;AA0G5DC,iBAAa,SAASA,WAAT,CAAqBH,MAArB,EAA6B;;AAEtC,aAAK1B,gBAAL,GAAwB0B,MAAxB;AACA,eAAO,IAAP;AAEH,KA/G2D;;AAiH5DI,UAAM,SAASA,IAAT,CAAcA,IAAd,EAAoB;;AAEtB,aAAK7B,KAAL,GAAa6B,IAAb;AACA,eAAO,IAAP;AAEH,KAtH2D;;AAwH5D7P,YAAQ,SAASA,MAAT,CAAgBA,MAAhB,EAAwB;;AAE5B,aAAKqO,eAAL,GAAuBrO,MAAvB;AACA,eAAO,IAAP;AAEH,KA7H2D;;AA+H5D8P,mBAAe,SAASA,aAAT,CAAuBA,aAAvB,EAAsC;;AAEjD,aAAKxB,sBAAL,GAA8BwB,aAA9B;AACA,eAAO,IAAP;AAEH,KApI2D;;AAsI5DC,WAAO,SAASA,KAAT,GAAiB;;AAEpB,aAAKvB,cAAL,GAAsBwB,SAAtB;AACA,eAAO,IAAP;AAEH,KA3I2D;;AA6I5DC,aAAS,SAASA,OAAT,CAAiBC,QAAjB,EAA2B;;AAEhC,aAAKzB,gBAAL,GAAwByB,QAAxB;AACA,eAAO,IAAP;AAEH,KAlJ2D;;AAoJ5D9P,cAAU,SAASA,QAAT,CAAkB8P,QAAlB,EAA4B;;AAElC,aAAKvB,iBAAL,GAAyBuB,QAAzB;AACA,eAAO,IAAP;AAEH,KAzJ2D;;AA2J5D7P,gBAAY,SAASA,UAAT,CAAoB6P,QAApB,EAA8B;;AAEtC,aAAKtB,mBAAL,GAA2BsB,QAA3B;AACA,eAAO,IAAP;AAEH,KAhK2D;;AAkK5DC,YAAQ,SAASA,MAAT,CAAgBD,QAAhB,EAA0B;;AAE9B,aAAKrB,eAAL,GAAuBqB,QAAvB;AACA,eAAO,IAAP;AAEH,KAvK2D;;AAyK5DlR,YAAQ,SAASA,MAAT,CAAgBgO,IAAhB,EAAsB;;AAE1B,YAAIgC,QAAJ;AACA,YAAIoB,OAAJ;AACA,YAAIjE,KAAJ;;AAEA,YAAIa,OAAO,KAAKoB,UAAhB,EAA4B;AACxB,mBAAO,IAAP;AACH;;AAED,YAAI,KAAKM,qBAAL,KAA+B,KAAnC,EAA0C;;AAEtC,gBAAI,KAAKD,gBAAL,KAA0B,IAA9B,EAAoC;AAChC,qBAAKA,gBAAL,CAAsBW,IAAtB,CAA2B,KAAK3B,OAAhC,EAAyC,KAAKA,OAA9C;AACH;;AAED,iBAAKiB,qBAAL,GAA6B,IAA7B;AACH;;AAED0B,kBAAU,CAACpD,OAAO,KAAKoB,UAAb,IAA2B,KAAKP,SAA1C;AACAuC,kBAAUA,UAAU,CAAV,GAAc,CAAd,GAAkBA,OAA5B;;AAEAjE,gBAAQ,KAAKkC,eAAL,CAAqB+B,OAArB,CAAR;;AAEA,aAAKpB,QAAL,IAAiB,KAAKrB,UAAtB,EAAkC;;AAE9B;AACA,gBAAI,KAAKD,YAAL,CAAkBsB,QAAlB,MAAgC/N,SAApC,EAA+C;AAC3C;AACH;;AAED,gBAAIT,QAAQ,KAAKkN,YAAL,CAAkBsB,QAAlB,KAA+B,CAA3C;AACA,gBAAIM,MAAM,KAAK3B,UAAL,CAAgBqB,QAAhB,CAAV;;AAEA,gBAAIM,eAAeL,KAAnB,EAA0B;;AAEtB,qBAAKxB,OAAL,CAAauB,QAAb,IAAyB,KAAKV,sBAAL,CAA4BgB,GAA5B,EAAiCnD,KAAjC,CAAzB;AAEH,aAJD,MAIO;;AAEH;AACA,oBAAI,OAAQmD,GAAR,KAAiB,QAArB,EAA+B;;AAE3B,wBAAIA,IAAIe,MAAJ,CAAW,CAAX,MAAkB,GAAlB,IAAyBf,IAAIe,MAAJ,CAAW,CAAX,MAAkB,GAA/C,EAAoD;AAChDf,8BAAM9O,QAAQ8P,WAAWhB,GAAX,CAAd;AACH,qBAFD,MAEO;AACHA,8BAAMgB,WAAWhB,GAAX,CAAN;AACH;AACJ;;AAED;AACA,oBAAI,OAAQA,GAAR,KAAiB,QAArB,EAA+B;AAC3B,yBAAK7B,OAAL,CAAauB,QAAb,IAAyBxO,QAAQ,CAAC8O,MAAM9O,KAAP,IAAgB2L,KAAjD;AACH;AAEJ;AAEJ;;AAED,YAAI,KAAKwC,iBAAL,KAA2B,IAA/B,EAAqC;AACjC,iBAAKA,iBAAL,CAAuBS,IAAvB,CAA4B,KAAK3B,OAAjC,EAA0CtB,KAA1C;AACH;;AAED,YAAIiE,YAAY,CAAhB,EAAmB;;AAEf,gBAAI,KAAKtC,OAAL,GAAe,CAAnB,EAAsB;;AAElB,oBAAIyC,SAAS,KAAKzC,OAAd,CAAJ,EAA4B;AACxB,yBAAKA,OAAL;AACH;;AAED;AACA,qBAAKkB,QAAL,IAAiB,KAAKpB,kBAAtB,EAA0C;;AAEtC,wBAAI,OAAQ,KAAKD,UAAL,CAAgBqB,QAAhB,CAAR,KAAuC,QAA3C,EAAqD;AACjD,6BAAKpB,kBAAL,CAAwBoB,QAAxB,IAAoC,KAAKpB,kBAAL,CAAwBoB,QAAxB,IAAoCsB,WAAW,KAAK3C,UAAL,CAAgBqB,QAAhB,CAAX,CAAxE;AACH;;AAED,wBAAI,KAAKhB,KAAT,EAAgB;AACZ,4BAAIwC,MAAM,KAAK5C,kBAAL,CAAwBoB,QAAxB,CAAV;;AAEA,6BAAKpB,kBAAL,CAAwBoB,QAAxB,IAAoC,KAAKrB,UAAL,CAAgBqB,QAAhB,CAApC;AACA,6BAAKrB,UAAL,CAAgBqB,QAAhB,IAA4BwB,GAA5B;AACH;;AAED,yBAAK9C,YAAL,CAAkBsB,QAAlB,IAA8B,KAAKpB,kBAAL,CAAwBoB,QAAxB,CAA9B;AAEH;;AAED,oBAAI,KAAKhB,KAAT,EAAgB;AACZ,yBAAKE,SAAL,GAAiB,CAAC,KAAKA,SAAvB;AACH;;AAED,oBAAI,KAAKH,gBAAL,KAA0B9M,SAA9B,EAAyC;AACrC,yBAAKmN,UAAL,GAAkBpB,OAAO,KAAKe,gBAA9B;AACH,iBAFD,MAEO;AACH,yBAAKK,UAAL,GAAkBpB,OAAO,KAAKmB,UAA9B;AACH;;AAED,uBAAO,IAAP;AAEH,aApCD,MAoCO;;AAEH,oBAAI,KAAKS,mBAAL,KAA6B,IAAjC,EAAuC;;AAEnC,yBAAKA,mBAAL,CAAyBQ,IAAzB,CAA8B,KAAK3B,OAAnC,EAA4C,KAAKA,OAAjD;AACH;;AAED,qBAAK,IAAIZ,IAAI,CAAR,EAAW0C,mBAAmB,KAAKf,cAAL,CAAoBvF,MAAvD,EAA+D4D,IAAI0C,gBAAnE,EAAqF1C,GAArF,EAA0F;AACtF;AACA;AACA,yBAAK2B,cAAL,CAAoB3B,CAApB,EAAuBrM,KAAvB,CAA6B,KAAK4N,UAAL,GAAkB,KAAKP,SAApD;AACH;;AAED,uBAAO,KAAP;AAEH;AAEJ;;AAED,eAAO,IAAP;AAEH;AAnS2D,CAAxC,CAAxB;;AAuSAjV,MAAMqH,MAAN,GAAe;;AAEXY,YAAQ;;AAEJC,cAAM,cAAU2P,CAAV,EAAa;;AAEf,mBAAOA,CAAP;AAEH;;AANG,KAFG;;AAYXC,eAAW;;AAEPC,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAOA,IAAIA,CAAX;AAEH,SANM;;AAQPG,aAAK,aAAUH,CAAV,EAAa;;AAEd,mBAAOA,KAAK,IAAIA,CAAT,CAAP;AAEH,SAZM;;AAcPtQ,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAI,CAACA,KAAK,CAAN,IAAW,CAAf,EAAkB;AACd,uBAAO,MAAMA,CAAN,GAAUA,CAAjB;AACH;;AAED,mBAAO,CAAE,GAAF,IAAS,EAAEA,CAAF,IAAOA,IAAI,CAAX,IAAgB,CAAzB,CAAP;AAEH;;AAtBM,KAZA;;AAsCXI,WAAO;;AAEHF,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAOA,IAAIA,CAAJ,GAAQA,CAAf;AAEH,SANE;;AAQHG,aAAK,aAAUH,CAAV,EAAa;;AAEd,mBAAO,EAAEA,CAAF,GAAMA,CAAN,GAAUA,CAAV,GAAc,CAArB;AAEH,SAZE;;AAcHtQ,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAI,CAACA,KAAK,CAAN,IAAW,CAAf,EAAkB;AACd,uBAAO,MAAMA,CAAN,GAAUA,CAAV,GAAcA,CAArB;AACH;;AAED,mBAAO,OAAO,CAACA,KAAK,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmB,CAA1B,CAAP;AAEH;;AAtBE,KAtCI;;AAgEXK,aAAS;;AAELH,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAOA,IAAIA,CAAJ,GAAQA,CAAR,GAAYA,CAAnB;AAEH,SANI;;AAQLG,aAAK,aAAUH,CAAV,EAAa;;AAEd,mBAAO,IAAK,EAAEA,CAAF,GAAMA,CAAN,GAAUA,CAAV,GAAcA,CAA1B;AAEH,SAZI;;AAcLtQ,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAI,CAACA,KAAK,CAAN,IAAW,CAAf,EAAkB;AACd,uBAAO,MAAMA,CAAN,GAAUA,CAAV,GAAcA,CAAd,GAAkBA,CAAzB;AACH;;AAED,mBAAO,CAAE,GAAF,IAAS,CAACA,KAAK,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuB,CAAhC,CAAP;AAEH;;AAtBI,KAhEE;;AA0FXM,aAAS;;AAELJ,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAOA,IAAIA,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAvB;AAEH,SANI;;AAQLG,aAAK,aAAUH,CAAV,EAAa;;AAEd,mBAAO,EAAEA,CAAF,GAAMA,CAAN,GAAUA,CAAV,GAAcA,CAAd,GAAkBA,CAAlB,GAAsB,CAA7B;AAEH,SAZI;;AAcLtQ,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAI,CAACA,KAAK,CAAN,IAAW,CAAf,EAAkB;AACd,uBAAO,MAAMA,CAAN,GAAUA,CAAV,GAAcA,CAAd,GAAkBA,CAAlB,GAAsBA,CAA7B;AACH;;AAED,mBAAO,OAAO,CAACA,KAAK,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAAvB,GAA2B,CAAlC,CAAP;AAEH;;AAtBI,KA1FE;;AAoHXvQ,gBAAY;;AAERyQ,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAO,IAAIlS,KAAKyS,GAAL,CAASP,IAAIlS,KAAKC,EAAT,GAAc,CAAvB,CAAX;AAEH,SANO;;AAQRoS,aAAK,aAAUH,CAAV,EAAa;;AAEd,mBAAOlS,KAAK0S,GAAL,CAASR,IAAIlS,KAAKC,EAAT,GAAc,CAAvB,CAAP;AAEH,SAZO;;AAcR2B,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,mBAAO,OAAO,IAAIlS,KAAKyS,GAAL,CAASzS,KAAKC,EAAL,GAAUiS,CAAnB,CAAX,CAAP;AAEH;;AAlBO,KApHD;;AA0IXS,iBAAa;;AAETP,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAOA,MAAM,CAAN,GAAU,CAAV,GAAclS,KAAKyJ,GAAL,CAAS,IAAT,EAAeyI,IAAI,CAAnB,CAArB;AAEH,SANQ;;AAQTG,aAAK,aAAUH,CAAV,EAAa;;AAEd,mBAAOA,MAAM,CAAN,GAAU,CAAV,GAAc,IAAIlS,KAAKyJ,GAAL,CAAS,CAAT,EAAY,CAAE,EAAF,GAAOyI,CAAnB,CAAzB;AAEH,SAZQ;;AAcTtQ,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAED,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAED,gBAAI,CAACA,KAAK,CAAN,IAAW,CAAf,EAAkB;AACd,uBAAO,MAAMlS,KAAKyJ,GAAL,CAAS,IAAT,EAAeyI,IAAI,CAAnB,CAAb;AACH;;AAED,mBAAO,OAAO,CAAElS,KAAKyJ,GAAL,CAAS,CAAT,EAAY,CAAE,EAAF,IAAQyI,IAAI,CAAZ,CAAZ,CAAF,GAAgC,CAAvC,CAAP;AAEH;;AA9BQ,KA1IF;;AA4KXU,cAAU;;AAENR,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAO,IAAIlS,KAAK0M,IAAL,CAAU,IAAIwF,IAAIA,CAAlB,CAAX;AAEH,SANK;;AAQNG,aAAK,aAAUH,CAAV,EAAa;;AAEd,mBAAOlS,KAAK0M,IAAL,CAAU,IAAK,EAAEwF,CAAF,GAAMA,CAArB,CAAP;AAEH,SAZK;;AAcNtQ,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAI,CAACA,KAAK,CAAN,IAAW,CAAf,EAAkB;AACd,uBAAO,CAAE,GAAF,IAASlS,KAAK0M,IAAL,CAAU,IAAIwF,IAAIA,CAAlB,IAAuB,CAAhC,CAAP;AACH;;AAED,mBAAO,OAAOlS,KAAK0M,IAAL,CAAU,IAAI,CAACwF,KAAK,CAAN,IAAWA,CAAzB,IAA8B,CAArC,CAAP;AAEH;;AAtBK,KA5KC;;AAsMXW,aAAS;;AAELT,YAAI,YAAUF,CAAV,EAAa;;AAEb,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAED,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAED,mBAAO,CAAClS,KAAKyJ,GAAL,CAAS,CAAT,EAAY,MAAMyI,IAAI,CAAV,CAAZ,CAAD,GAA6BlS,KAAK0S,GAAL,CAAS,CAACR,IAAI,GAAL,IAAY,CAAZ,GAAgBlS,KAAKC,EAA9B,CAApC;AAEH,SAdI;;AAgBLoS,aAAK,aAAUH,CAAV,EAAa;;AAEd,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAED,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAED,mBAAOlS,KAAKyJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMyI,CAAlB,IAAuBlS,KAAK0S,GAAL,CAAS,CAACR,IAAI,GAAL,IAAY,CAAZ,GAAgBlS,KAAKC,EAA9B,CAAvB,GAA2D,CAAlE;AAEH,SA5BI;;AA8BL2B,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAED,gBAAIA,MAAM,CAAV,EAAa;AACT,uBAAO,CAAP;AACH;;AAEDA,iBAAK,CAAL;;AAEA,gBAAIA,IAAI,CAAR,EAAW;AACP,uBAAO,CAAC,GAAD,GAAOlS,KAAKyJ,GAAL,CAAS,CAAT,EAAY,MAAMyI,IAAI,CAAV,CAAZ,CAAP,GAAmClS,KAAK0S,GAAL,CAAS,CAACR,IAAI,GAAL,IAAY,CAAZ,GAAgBlS,KAAKC,EAA9B,CAA1C;AACH;;AAED,mBAAO,MAAMD,KAAKyJ,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,IAAOyI,IAAI,CAAX,CAAZ,CAAN,GAAmClS,KAAK0S,GAAL,CAAS,CAACR,IAAI,GAAL,IAAY,CAAZ,GAAgBlS,KAAKC,EAA9B,CAAnC,GAAuE,CAA9E;AAEH;;AAhDI,KAtME;;AA0PX6S,UAAM;;AAEFV,YAAI,YAAUF,CAAV,EAAa;;AAEb,gBAAIa,IAAI,OAAR;;AAEA,mBAAOb,IAAIA,CAAJ,IAAS,CAACa,IAAI,CAAL,IAAUb,CAAV,GAAca,CAAvB,CAAP;AAEH,SARC;;AAUFV,aAAK,aAAUH,CAAV,EAAa;;AAEd,gBAAIa,IAAI,OAAR;;AAEA,mBAAO,EAAEb,CAAF,GAAMA,CAAN,IAAW,CAACa,IAAI,CAAL,IAAUb,CAAV,GAAca,CAAzB,IAA8B,CAArC;AAEH,SAhBC;;AAkBFnR,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAIa,IAAI,UAAU,KAAlB;;AAEA,gBAAI,CAACb,KAAK,CAAN,IAAW,CAAf,EAAkB;AACd,uBAAO,OAAOA,IAAIA,CAAJ,IAAS,CAACa,IAAI,CAAL,IAAUb,CAAV,GAAca,CAAvB,CAAP,CAAP;AACH;;AAED,mBAAO,OAAO,CAACb,KAAK,CAAN,IAAWA,CAAX,IAAgB,CAACa,IAAI,CAAL,IAAUb,CAAV,GAAca,CAA9B,IAAmC,CAA1C,CAAP;AAEH;;AA5BC,KA1PK;;AA0RXC,YAAQ;;AAEJZ,YAAI,YAAUF,CAAV,EAAa;;AAEb,mBAAO,IAAI7X,MAAMqH,MAAN,CAAasR,MAAb,CAAoBX,GAApB,CAAwB,IAAIH,CAA5B,CAAX;AAEH,SANG;;AAQJG,aAAK,aAAUH,CAAV,EAAa;;AAEd,gBAAIA,IAAK,IAAI,IAAb,EAAoB;AAChB,uBAAO,SAASA,CAAT,GAAaA,CAApB;AACH,aAFD,MAEO,IAAIA,IAAK,IAAI,IAAb,EAAoB;AACvB,uBAAO,UAAUA,KAAM,MAAM,IAAtB,IAA+BA,CAA/B,GAAmC,IAA1C;AACH,aAFM,MAEA,IAAIA,IAAK,MAAM,IAAf,EAAsB;AACzB,uBAAO,UAAUA,KAAM,OAAO,IAAvB,IAAgCA,CAAhC,GAAoC,MAA3C;AACH,aAFM,MAEA;AACH,uBAAO,UAAUA,KAAM,QAAQ,IAAxB,IAAiCA,CAAjC,GAAqC,QAA5C;AACH;AAEJ,SApBG;;AAsBJtQ,eAAO,eAAUsQ,CAAV,EAAa;;AAEhB,gBAAIA,IAAI,GAAR,EAAa;AACT,uBAAO7X,MAAMqH,MAAN,CAAasR,MAAb,CAAoBZ,EAApB,CAAuBF,IAAI,CAA3B,IAAgC,GAAvC;AACH;;AAED,mBAAO7X,MAAMqH,MAAN,CAAasR,MAAb,CAAoBX,GAApB,CAAwBH,IAAI,CAAJ,GAAQ,CAAhC,IAAqC,GAArC,GAA2C,GAAlD;AAEH;;AA9BG;;AA1RG,CAAf;;AA8TA7X,MAAM2V,aAAN,GAAsB;;AAElB1N,YAAQ,gBAAUuH,CAAV,EAAaqI,CAAb,EAAgB;;AAEpB,YAAIe,IAAIpJ,EAAEa,MAAF,GAAW,CAAnB;AACA,YAAIwI,IAAID,IAAIf,CAAZ;AACA,YAAI5D,IAAItO,KAAKmT,KAAL,CAAWD,CAAX,CAAR;AACA,YAAIE,KAAK/Y,MAAM2V,aAAN,CAAoBqD,KAApB,CAA0B/Q,MAAnC;;AAEA,YAAI4P,IAAI,CAAR,EAAW;AACP,mBAAOkB,GAAGvJ,EAAE,CAAF,CAAH,EAASA,EAAE,CAAF,CAAT,EAAeqJ,CAAf,CAAP;AACH;;AAED,YAAIhB,IAAI,CAAR,EAAW;AACP,mBAAOkB,GAAGvJ,EAAEoJ,CAAF,CAAH,EAASpJ,EAAEoJ,IAAI,CAAN,CAAT,EAAmBA,IAAIC,CAAvB,CAAP;AACH;;AAED,eAAOE,GAAGvJ,EAAEyE,CAAF,CAAH,EAASzE,EAAEyE,IAAI,CAAJ,GAAQ2E,CAAR,GAAYA,CAAZ,GAAgB3E,IAAI,CAAtB,CAAT,EAAmC4E,IAAI5E,CAAvC,CAAP;AAEH,KAnBiB;;AAqBlBgF,YAAQ,gBAAUzJ,CAAV,EAAaqI,CAAb,EAAgB;;AAEpB,YAAIqB,IAAI,CAAR;AACA,YAAIC,IAAI3J,EAAEa,MAAF,GAAW,CAAnB;AACA,YAAI+I,KAAKzT,KAAKyJ,GAAd;AACA,YAAIiK,KAAKrZ,MAAM2V,aAAN,CAAoBqD,KAApB,CAA0BM,SAAnC;;AAEA,aAAK,IAAIrF,IAAI,CAAb,EAAgBA,KAAKkF,CAArB,EAAwBlF,GAAxB,EAA6B;AACzBiF,iBAAKE,GAAG,IAAIvB,CAAP,EAAUsB,IAAIlF,CAAd,IAAmBmF,GAAGvB,CAAH,EAAM5D,CAAN,CAAnB,GAA8BzE,EAAEyE,CAAF,CAA9B,GAAqCoF,GAAGF,CAAH,EAAMlF,CAAN,CAA1C;AACH;;AAED,eAAOiF,CAAP;AAEH,KAlCiB;;AAoClBK,gBAAY,oBAAU/J,CAAV,EAAaqI,CAAb,EAAgB;;AAExB,YAAIe,IAAIpJ,EAAEa,MAAF,GAAW,CAAnB;AACA,YAAIwI,IAAID,IAAIf,CAAZ;AACA,YAAI5D,IAAItO,KAAKmT,KAAL,CAAWD,CAAX,CAAR;AACA,YAAIE,KAAK/Y,MAAM2V,aAAN,CAAoBqD,KAApB,CAA0BO,UAAnC;;AAEA,YAAI/J,EAAE,CAAF,MAASA,EAAEoJ,CAAF,CAAb,EAAmB;;AAEf,gBAAIf,IAAI,CAAR,EAAW;AACP5D,oBAAItO,KAAKmT,KAAL,CAAWD,IAAID,KAAK,IAAIf,CAAT,CAAf,CAAJ;AACH;;AAED,mBAAOkB,GAAGvJ,EAAE,CAACyE,IAAI,CAAJ,GAAQ2E,CAAT,IAAcA,CAAhB,CAAH,EAAuBpJ,EAAEyE,CAAF,CAAvB,EAA6BzE,EAAE,CAACyE,IAAI,CAAL,IAAU2E,CAAZ,CAA7B,EAA6CpJ,EAAE,CAACyE,IAAI,CAAL,IAAU2E,CAAZ,CAA7C,EAA6DC,IAAI5E,CAAjE,CAAP;AAEH,SARD,MAQO;;AAEH,gBAAI4D,IAAI,CAAR,EAAW;AACP,uBAAOrI,EAAE,CAAF,KAAQuJ,GAAGvJ,EAAE,CAAF,CAAH,EAASA,EAAE,CAAF,CAAT,EAAeA,EAAE,CAAF,CAAf,EAAqBA,EAAE,CAAF,CAArB,EAA2B,CAACqJ,CAA5B,IAAiCrJ,EAAE,CAAF,CAAzC,CAAP;AACH;;AAED,gBAAIqI,IAAI,CAAR,EAAW;AACP,uBAAOrI,EAAEoJ,CAAF,KAAQG,GAAGvJ,EAAEoJ,CAAF,CAAH,EAASpJ,EAAEoJ,CAAF,CAAT,EAAepJ,EAAEoJ,IAAI,CAAN,CAAf,EAAyBpJ,EAAEoJ,IAAI,CAAN,CAAzB,EAAmCC,IAAID,CAAvC,IAA4CpJ,EAAEoJ,CAAF,CAApD,CAAP;AACH;;AAED,mBAAOG,GAAGvJ,EAAEyE,IAAIA,IAAI,CAAR,GAAY,CAAd,CAAH,EAAqBzE,EAAEyE,CAAF,CAArB,EAA2BzE,EAAEoJ,IAAI3E,IAAI,CAAR,GAAY2E,CAAZ,GAAgB3E,IAAI,CAAtB,CAA3B,EAAqDzE,EAAEoJ,IAAI3E,IAAI,CAAR,GAAY2E,CAAZ,GAAgB3E,IAAI,CAAtB,CAArD,EAA+E4E,IAAI5E,CAAnF,CAAP;AAEH;AAEJ,KAjEiB;;AAmElB+E,WAAO;;AAEH/Q,gBAAQ,gBAAUuR,EAAV,EAAcC,EAAd,EAAkBC,CAAlB,EAAqB;;AAEzB,mBAAO,CAACD,KAAKD,EAAN,IAAYE,CAAZ,GAAgBF,EAAvB;AAEH,SANE;;AAQHF,mBAAW,mBAAUH,CAAV,EAAalF,CAAb,EAAgB;;AAEvB,gBAAI0F,KAAK3Z,MAAM2V,aAAN,CAAoBqD,KAApB,CAA0BY,SAAnC;;AAEA,mBAAOD,GAAGR,CAAH,IAAQQ,GAAG1F,CAAH,CAAR,GAAgB0F,GAAGR,IAAIlF,CAAP,CAAvB;AAEH,SAdE;;AAgBH2F,mBAAY,YAAY;;AAEpB,gBAAIC,IAAI,CAAC,CAAD,CAAR;;AAEA,mBAAO,UAAUV,CAAV,EAAa;;AAEhB,oBAAIT,IAAI,CAAR;;AAEA,oBAAImB,EAAEV,CAAF,CAAJ,EAAU;AACN,2BAAOU,EAAEV,CAAF,CAAP;AACH;;AAED,qBAAK,IAAIlF,IAAIkF,CAAb,EAAgBlF,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxByE,yBAAKzE,CAAL;AACH;;AAED4F,kBAAEV,CAAF,IAAOT,CAAP;AACA,uBAAOA,CAAP;AAEH,aAfD;AAiBH,SArBU,EAhBR;;AAuCHa,oBAAY,oBAAUC,EAAV,EAAcC,EAAd,EAAkBK,EAAlB,EAAsBC,EAAtB,EAA0BL,CAA1B,EAA6B;;AAErC,gBAAIM,KAAK,CAACF,KAAKN,EAAN,IAAY,GAArB;AACA,gBAAIS,KAAK,CAACF,KAAKN,EAAN,IAAY,GAArB;AACA,gBAAIS,KAAKR,IAAIA,CAAb;AACA,gBAAIS,KAAKT,IAAIQ,EAAb;;AAEA,mBAAO,CAAC,IAAIT,EAAJ,GAAS,IAAIK,EAAb,GAAkBE,EAAlB,GAAuBC,EAAxB,IAA8BE,EAA9B,GAAmC,CAAC,CAAE,CAAF,GAAMV,EAAN,GAAW,IAAIK,EAAf,GAAoB,IAAIE,EAAxB,GAA6BC,EAA9B,IAAoCC,EAAvE,GAA4EF,KAAKN,CAAjF,GAAqFD,EAA5F;AAEH;;AAhDE;;AAnEW,CAAtB;;AAyHA;AACA,CAAC,UAAUW,IAAV,EAAgB;;AAEb,QAAI,IAAJ,EAAgD;;AAE5C;AACAC,QAAA,iCAAO,EAAP,mCAAW,YAAY;AACnB,mBAAOra,KAAP;AACH,SAFD;AAAA;AAIH,KAPD,MAOO,EAUN;AAEJ,CArBD,a;;;;;;;;;;;;;yUCz2BC,UAAUsa,MAAV,CAAkBC,OAAlB,CAA2B,CACxB,0BAAOC,OAAP,KAAmB,QAAnB,EAA+B,MAAOC,OAAP,GAAkB,WAAjD,CAA+DF,QAAQC,OAAR,CAA/D,CACI,MAA6C,iCAAO,CAAC,OAAD,CAAP,oCAAoBD,OAApB;AAAA;AAAA;AAAA,oGAA7C,CACK,SAFT,CAGH,CAJA,YAIQ,SAAUC,OAAV,CAAmB,CAAE,aAE1B;AAEA,GAAKE,OAAOC,OAAP,GAAmBtS,SAAxB,CAAoC,CAEhCqS,OAAOC,OAAP,CAAiBhV,KAAKyJ,GAAL,CAAU,CAAV,CAAa,CAAE,EAAf,CAAjB,CAEH,CAED,GAAKsL,OAAOE,SAAP,GAAqBvS,SAA1B,CAAsC,CAElC;AACA;AAEAqS,OAAOE,SAAP,CAAmB,SAAWrH,KAAX,CAAmB,CAElC,MAAO,OAAOA,MAAP,GAAiB,QAAjB,EAA6BoE,SAAUpE,KAAV,CAA7B,EAAkD5N,KAAKmT,KAAL,CAAYvF,KAAZ,IAAwBA,KAAjF,CAEH,CAJD,CAMH,CAED;AAEA,GAAK5N,KAAKkV,IAAL,GAAcxS,SAAnB,CAA+B,CAE3B;AAEA1C,KAAKkV,IAAL,CAAY,SAAW5Y,CAAX,CAAe,CAEvB,MAASA,GAAI,CAAN,CAAY,CAAE,CAAd,CAAoBA,EAAI,CAAN,CAAY,CAAZ,CAAgB,CAAEA,CAA3C,CAEH,CAJD,CAMH,CAED,GAAK,QAAU6Y,UAAShI,SAAnB,GAAiC,KAAtC,CAA8C,CAE1C;AACA;AAEAC,OAAOgI,cAAP,CAAuBD,SAAShI,SAAhC,CAA2C,MAA3C,CAAmD,CAE/CO,IAAK,cAAY,CAEb,MAAO,MAAK2H,QAAL,GAAgBC,KAAhB,CAAuB,2BAAvB,EAAsD,CAAtD,CAAP,CAEH,CAN8C,CAAnD,EAUH,CAED,GAAKlI,OAAO4B,MAAP,GAAkBtM,SAAvB,CAAmC,CAE/B;AACA;AAEA,CAAE,UAAY,CAEV0K,OAAO4B,MAAP,CAAgB,SAAWjR,MAAX,CAAoB,CAEhC,GAAKA,SAAW2E,SAAX,EAAwB3E,SAAW,IAAxC,CAA+C,CAE3C,KAAM,IAAIwX,UAAJ,CAAe,4CAAf,CAAN,CAEH,CAED,GAAIC,QAASpI,OAAQrP,MAAR,CAAb,CAEA,IAAM,GAAI0X,OAAQ,CAAlB,CAAqBA,MAAQhE,UAAU/G,MAAvC,CAA+C+K,OAA/C,CAA0D,CAEtD,GAAIxG,QAASwC,UAAWgE,KAAX,CAAb,CAEA,GAAKxG,SAAWvM,SAAX,EAAwBuM,SAAW,IAAxC,CAA+C,CAE3C,IAAM,GAAIyG,QAAV,GAAqBzG,OAArB,CAA8B,CAE1B,GAAK7B,OAAOD,SAAP,CAAiBwI,cAAjB,CAAgC9E,IAAhC,CAAsC5B,MAAtC,CAA8CyG,OAA9C,CAAL,CAA+D,CAE3DF,OAAQE,OAAR,EAAoBzG,OAAQyG,OAAR,CAApB,CAEH,CAEJ,CAEJ,CAEJ,CAED,MAAOF,OAAP,CAEH,CAhCD,CAkCH,CApCD,IAsCH,CAED;;OAIA,QAASlI,gBAAT,EAA2B,CAAE,CAE7BF,OAAO4B,MAAP,CAAe1B,gBAAgBH,SAA/B,CAA0C,CAEtCxM,iBAAkB,0BAAW0H,IAAX,CAAiBuN,QAAjB,CAA4B,CAE1C,GAAK,KAAKC,UAAL,GAAoBnT,SAAzB,CAAqC,KAAKmT,UAAL,CAAkB,EAAlB,CAErC,GAAIC,WAAY,KAAKD,UAArB,CAEA,GAAKC,UAAWzN,IAAX,IAAsB3F,SAA3B,CAAuC,CAEnCoT,UAAWzN,IAAX,EAAoB,EAApB,CAEH,CAED,GAAKyN,UAAWzN,IAAX,EAAkBkG,OAAlB,CAA2BqH,QAA3B,IAA0C,CAAE,CAAjD,CAAqD,CAEjDE,UAAWzN,IAAX,EAAkBlJ,IAAlB,CAAwByW,QAAxB,EAEH,CAEJ,CApBqC,CAsBtCG,iBAAkB,0BAAW1N,IAAX,CAAiBuN,QAAjB,CAA4B,CAE1C,GAAK,KAAKC,UAAL,GAAoBnT,SAAzB,CAAqC,MAAO,MAAP,CAErC,GAAIoT,WAAY,KAAKD,UAArB,CAEA,MAAOC,WAAWzN,IAAX,IAAsB3F,SAAtB,EAAmCoT,UAAWzN,IAAX,EAAkBkG,OAAlB,CAA2BqH,QAA3B,IAA0C,CAAE,CAAtF,CAEH,CA9BqC,CAgCtChO,oBAAqB,6BAAWS,IAAX,CAAiBuN,QAAjB,CAA4B,CAE7C,GAAK,KAAKC,UAAL,GAAoBnT,SAAzB,CAAqC,OAErC,GAAIoT,WAAY,KAAKD,UAArB,CACA,GAAIG,eAAgBF,UAAWzN,IAAX,CAApB,CAEA,GAAK2N,gBAAkBtT,SAAvB,CAAmC,CAE/B,GAAI+S,OAAQO,cAAczH,OAAd,CAAuBqH,QAAvB,CAAZ,CAEA,GAAKH,QAAU,CAAE,CAAjB,CAAqB,CAEjBO,cAAcxH,MAAd,CAAsBiH,KAAtB,CAA6B,CAA7B,EAEH,CAEJ,CAEJ,CAnDqC,CAqDtC/P,cAAe,uBAAW4F,KAAX,CAAmB,CAE9B,GAAK,KAAKuK,UAAL,GAAoBnT,SAAzB,CAAqC,OAErC,GAAIoT,WAAY,KAAKD,UAArB,CACA,GAAIG,eAAgBF,UAAWxK,MAAMjD,IAAjB,CAApB,CAEA,GAAK2N,gBAAkBtT,SAAvB,CAAmC,CAE/B4I,MAAMvN,MAAN,CAAe,IAAf,CAEA,GAAIkY,OAAQD,cAAcE,KAAd,CAAqB,CAArB,CAAZ,CAEA,IAAM,GAAI5H,GAAI,CAAR,CAAW6H,EAAIF,MAAMvL,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAA1C,CAAiD,CAE7C2H,MAAO3H,CAAP,EAAWuC,IAAX,CAAiB,IAAjB,CAAuBvF,KAAvB,EAEH,CAEJ,CAEJ,CA1EqC,CAA1C,EA8EA,GAAI8K,UAAW,IAAf,CACA,GAAI5R,OAAQ,CAAEN,KAAM,CAAR,CAAWQ,OAAQ,CAAnB,CAAsBN,MAAO,CAA7B,CAAZ,CACA,GAAIiS,cAAe,CAAnB,CACA,GAAIC,cAAe,CAAnB,CACA,GAAIC,eAAgB,CAApB,CACA,GAAIC,mBAAoB,CAAxB,CACA,GAAIC,sBAAuB,CAA3B,CACA,GAAIC,uBAAwB,CAA5B,CACA,GAAIC,gBAAiB,CAArB,CACA,GAAIC,cAAe,CAAnB,CACA,GAAIC,kBAAmB,CAAvB,CACA,GAAIC,WAAY,CAAhB,CACA,GAAIC,UAAW,CAAf,CACA,GAAIC,YAAa,CAAjB,CACA,GAAIhY,aAAc,CAAlB,CACA,GAAIiY,eAAgB,CAApB,CACA,GAAIC,UAAW,CAAf,CACA,GAAIC,YAAa,CAAjB,CACA,GAAIC,cAAe,CAAnB,CACA,GAAIC,YAAa,CAAjB,CACA,GAAIC,gBAAiB,CAArB,CACA,GAAIC,kBAAmB,CAAvB,CACA,GAAIC,qBAAsB,CAA1B,CACA,GAAIC,kBAAmB,CAAvB,CACA,GAAIC,gBAAiB,CAArB,CACA,GAAIC,aAAc,GAAlB,CACA,GAAIC,kBAAmB,GAAvB,CACA,GAAIC,yBAA0B,GAA9B,CACA,GAAIC,aAAc,GAAlB,CACA,GAAIC,aAAc,GAAlB,CACA,GAAIC,YAAa,GAAjB,CACA,GAAIC,WAAY,GAAhB,CACA,GAAIC,gBAAiB,GAArB,CACA,GAAIC,wBAAyB,GAA7B,CACA,GAAIC,gBAAiB,GAArB,CACA,GAAIC,wBAAyB,GAA7B,CACA,GAAIC,gBAAiB,GAArB,CACA,GAAIC,wBAAyB,GAA7B,CACA,GAAIC,gBAAiB,GAArB,CACA,GAAIC,wBAAyB,GAA7B,CACA,GAAIC,wBAAyB,GAA7B,CACA,GAAIC,YAAa,CAAjB,CACA,GAAIC,aAAc,CAAlB,CACA,GAAIC,WAAY,CAAhB,CACA,GAAIC,gBAAiB,CAArB,CACA,GAAIC,YAAa,CAAjB,CACA,GAAIC,mBAAoB,CAAxB,CACA,GAAIC,cAAe,CAAnB,CACA,GAAIC,eAAgB,CAApB,CACA,GAAIC,mBAAoB,CAAxB,CACA,GAAIC,cAAe,CAAnB,CACA,GAAIC,cAAe,CAAnB,CACA,GAAIC,eAAgB,CAApB,CACA,GAAIC,mBAAoB,CAAxB,CACA,GAAIC,qBAAsB,CAA1B,CACA,GAAIC,uBAAwB,CAA5B,CACA,GAAIC,mBAAoB,CAAxB,CACA,GAAIC,WAAY,GAAhB,CACA,GAAIC,uBAAwB,GAA5B,CACA,GAAIC,uBAAwB,GAA5B,CACA,GAAIC,kCAAmC,GAAvC,CACA,GAAIC,kCAAmC,GAAvC,CACA,GAAIC,4BAA6B,GAAjC,CACA,GAAIC,yBAA0B,GAA9B,CACA,GAAIC,yBAA0B,GAA9B,CACA,GAAIC,gBAAiB,IAArB,CACA,GAAIC,qBAAsB,IAA1B,CACA,GAAIC,wBAAyB,IAA7B,CACA,GAAIC,eAAgB,IAApB,CACA,GAAIC,4BAA6B,IAAjC,CACA,GAAIC,2BAA4B,IAAhC,CACA,GAAIC,cAAe,IAAnB,CACA,GAAIC,2BAA4B,IAAhC,CACA,GAAIC,0BAA2B,IAA/B,CACA,GAAIC,kBAAmB,IAAvB,CACA,GAAIC,UAAW,IAAf,CACA,GAAIC,WAAY,IAAhB,CACA,GAAIC,mBAAoB,IAAxB,CACA,GAAIC,SAAU,IAAd,CACA,GAAIC,iBAAkB,IAAtB,CACA,GAAIC,WAAY,IAAhB,CACA,GAAIC,eAAgB,IAApB,CACA,GAAIC,uBAAwB,IAA5B,CACA,GAAIC,uBAAwB,IAA5B,CACA,GAAIC,sBAAuB,IAA3B,CACA,GAAIC,oBAAqB,IAAzB,CACA,GAAIC,aAAc,IAAlB,CACA,GAAIC,WAAY,IAAhB,CACA,GAAIC,YAAa,IAAjB,CACA,GAAIC,iBAAkB,IAAtB,CACA,GAAIC,sBAAuB,IAA3B,CACA,GAAIC,YAAaH,UAAjB,CACA,GAAII,aAAc,IAAlB,CACA,GAAIC,oBAAqB,IAAzB,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,uBAAwB,KAA5B,CACA,GAAIC,uBAAwB,KAA5B,CACA,GAAIC,uBAAwB,KAA5B,CACA,GAAIC,yBAA0B,KAA9B,CACA,GAAIC,yBAA0B,KAA9B,CACA,GAAIC,0BAA2B,KAA/B,CACA,GAAIC,0BAA2B,KAA/B,CACA,GAAIC,iBAAkB,KAAtB,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,sBAAuB,KAA3B,CACA,GAAIC,uBAAwB,KAA5B,CACA,GAAIC,uBAAwB,KAA5B,CACA,GAAIC,uBAAwB,KAA5B,CACA,GAAIC,wBAAyB,KAA7B,CACA,GAAIC,wBAAyB,KAA7B,CACA,GAAIC,wBAAyB,KAA7B,CACA,GAAIC,UAAW,IAAf,CACA,GAAIC,YAAa,IAAjB,CACA,GAAIC,cAAe,IAAnB,CACA,GAAIC,qBAAsB,IAA1B,CACA,GAAIC,mBAAoB,IAAxB,CACA,GAAIC,mBAAoB,IAAxB,CACA,GAAIC,qBAAsB,IAA1B,CACA,GAAIC,iBAAkB,IAAtB,CACA,GAAIC,kBAAmB,IAAvB,CACA,GAAIC,mBAAoB,CAAxB,CACA,GAAIC,uBAAwB,CAA5B,CACA,GAAIC,qBAAsB,CAA1B,CACA,GAAIC,gBAAiB,IAArB,CACA,GAAIC,cAAe,IAAnB,CACA,GAAIC,eAAgB,IAApB,CACA,GAAIC,cAAe,IAAnB,CACA,GAAIC,gBAAiB,IAArB,CACA,GAAIC,eAAgB,IAApB,CACA,GAAIC,gBAAiB,IAArB,CACA,GAAIC,cAAe,IAAnB,CACA,GAAIC,mBAAoB,IAAxB,CACA,GAAIC,kBAAmB,IAAvB,CAEA;;;OAKA,GAAIC,OAAQ,CAERC,QAAS9e,KAAKC,EAAL,CAAU,GAFX,CAGR8e,QAAS,IAAM/e,KAAKC,EAHZ,CAKR+e,aAAgB,UAAY,CAExB;AAEA,GAAIC,KAAM,EAAV,CAEA,IAAM,GAAI3Q,GAAI,CAAd,CAAiBA,EAAI,GAArB,CAA0BA,GAA1B,CAAiC,CAE7B2Q,IAAK3Q,CAAL,EAAW,CAAEA,EAAI,EAAJ,CAAS,GAAT,CAAe,EAAjB,EAA0BA,CAAF,CAAM+G,QAAN,CAAgB,EAAhB,CAAnC,CAEH,CAED,MAAO,SAAS2J,aAAT,EAAwB,CAE3B,GAAIE,IAAKlf,KAAKmC,MAAL,GAAgB,UAAhB,CAA6B,CAAtC,CACA,GAAIgd,IAAKnf,KAAKmC,MAAL,GAAgB,UAAhB,CAA6B,CAAtC,CACA,GAAIid,IAAKpf,KAAKmC,MAAL,GAAgB,UAAhB,CAA6B,CAAtC,CACA,GAAIkd,IAAKrf,KAAKmC,MAAL,GAAgB,UAAhB,CAA6B,CAAtC,CACA,GAAImd,MAAOL,IAAKC,GAAK,IAAV,EAAmBD,IAAKC,IAAM,CAAN,CAAU,IAAf,CAAnB,CAA2CD,IAAKC,IAAM,EAAN,CAAW,IAAhB,CAA3C,CAAoED,IAAKC,IAAM,EAAN,CAAW,IAAhB,CAApE,CAA6F,GAA7F,CACPD,IAAKE,GAAK,IAAV,CADO,CACYF,IAAKE,IAAM,CAAN,CAAU,IAAf,CADZ,CACoC,GADpC,CAC0CF,IAAKE,IAAM,EAAN,CAAW,IAAX,CAAkB,IAAvB,CAD1C,CAC0EF,IAAKE,IAAM,EAAN,CAAW,IAAhB,CAD1E,CACmG,GADnG,CAEPF,IAAKG,GAAK,IAAL,CAAY,IAAjB,CAFO,CAEmBH,IAAKG,IAAM,CAAN,CAAU,IAAf,CAFnB,CAE2C,GAF3C,CAEiDH,IAAKG,IAAM,EAAN,CAAW,IAAhB,CAFjD,CAE0EH,IAAKG,IAAM,EAAN,CAAW,IAAhB,CAF1E,CAGPH,IAAKI,GAAK,IAAV,CAHO,CAGYJ,IAAKI,IAAM,CAAN,CAAU,IAAf,CAHZ,CAGoCJ,IAAKI,IAAM,EAAN,CAAW,IAAhB,CAHpC,CAG6DJ,IAAKI,IAAM,EAAN,CAAW,IAAhB,CAHxE,CAKA;AACA,MAAOC,MAAKC,WAAL,EAAP,CAEH,CAdD,CAgBH,CA5Ba,EALN,CAmCRC,MAAO,eAAW5R,KAAX,CAAkB7G,GAAlB,CAAuBD,GAAvB,CAA6B,CAEhC,MAAO9G,MAAK8G,GAAL,CAAUC,GAAV,CAAe/G,KAAK+G,GAAL,CAAUD,GAAV,CAAe8G,KAAf,CAAf,CAAP,CAEH,CAvCO,CAyCR;AACA;AAEA6R,gBAAiB,yBAAWjM,CAAX,CAAcP,CAAd,CAAkB,CAE/B,MAAO,CAAIO,EAAIP,CAAN,CAAYA,CAAd,EAAoBA,CAA3B,CAEH,CAhDO,CAkDR;AAEAyM,UAAW,mBAAWpjB,CAAX,CAAcqjB,EAAd,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA0BC,EAA1B,CAA+B,CAEtC,MAAOD,IAAK,CAAEvjB,EAAIqjB,EAAN,GAAeG,GAAKD,EAApB,GAA6BD,GAAKD,EAAlC,CAAZ,CAEH,CAxDO,CA0DR;AAEAI,KAAM,cAAWzjB,CAAX,CAAcC,CAAd,CAAiBwX,CAAjB,CAAqB,CAEvB,MAAO,CAAE,EAAIA,CAAN,EAAYzX,CAAZ,CAAgByX,EAAIxX,CAA3B,CAEH,CAhEO,CAkER;AAEAyjB,WAAY,oBAAW1jB,CAAX,CAAcyK,GAAd,CAAmBD,GAAnB,CAAyB,CAEjC,GAAKxK,GAAKyK,GAAV,CAAgB,MAAO,EAAP,CAChB,GAAKzK,GAAKwK,GAAV,CAAgB,MAAO,EAAP,CAEhBxK,EAAI,CAAEA,EAAIyK,GAAN,GAAgBD,IAAMC,GAAtB,CAAJ,CAEA,MAAOzK,GAAIA,CAAJ,EAAU,EAAI,EAAIA,CAAlB,CAAP,CAEH,CA7EO,CA+ER2jB,aAAc,sBAAW3jB,CAAX,CAAcyK,GAAd,CAAmBD,GAAnB,CAAyB,CAEnC,GAAKxK,GAAKyK,GAAV,CAAgB,MAAO,EAAP,CAChB,GAAKzK,GAAKwK,GAAV,CAAgB,MAAO,EAAP,CAEhBxK,EAAI,CAAEA,EAAIyK,GAAN,GAAgBD,IAAMC,GAAtB,CAAJ,CAEA,MAAOzK,GAAIA,CAAJ,CAAQA,CAAR,EAAcA,GAAMA,EAAI,CAAJ,CAAQ,EAAd,EAAqB,EAAnC,CAAP,CAEH,CAxFO,CA0FR;AAEA4jB,QAAS,iBAAWC,GAAX,CAAgBC,IAAhB,CAAuB,CAE5B,MAAOD,KAAMngB,KAAKmT,KAAL,CAAYnT,KAAKmC,MAAL,IAAkBie,KAAOD,GAAP,CAAa,CAA/B,CAAZ,CAAb,CAEH,CAhGO,CAkGR;AAEAE,UAAW,mBAAWF,GAAX,CAAgBC,IAAhB,CAAuB,CAE9B,MAAOD,KAAMngB,KAAKmC,MAAL,IAAkBie,KAAOD,GAAzB,CAAb,CAEH,CAxGO,CA0GR;AAEAG,gBAAiB,yBAAWC,KAAX,CAAmB,CAEhC,MAAOA,QAAU,IAAMvgB,KAAKmC,MAAL,EAAhB,CAAP,CAEH,CAhHO,CAkHRqe,SAAU,kBAAWC,OAAX,CAAqB,CAE3B,MAAOA,SAAU5B,MAAMC,OAAvB,CAEH,CAtHO,CAwHR4B,SAAU,kBAAWC,OAAX,CAAqB,CAE3B,MAAOA,SAAU9B,MAAME,OAAvB,CAEH,CA5HO,CA8HR6B,aAAc,sBAAWhT,KAAX,CAAmB,CAE7B,MAAO,CAAEA,MAAUA,MAAQ,CAApB,IAA8B,CAA9B,EAAmCA,QAAU,CAApD,CAEH,CAlIO,CAoIRiT,eAAgB,wBAAWjT,KAAX,CAAmB,CAE/B,MAAO5N,MAAKyJ,GAAL,CAAU,CAAV,CAAazJ,KAAK8gB,IAAL,CAAW9gB,KAAKkB,GAAL,CAAU0M,KAAV,EAAoB5N,KAAK+gB,GAApC,CAAb,CAAP,CAEH,CAxIO,CA0IRC,gBAAiB,yBAAWpT,KAAX,CAAmB,CAEhC,MAAO5N,MAAKyJ,GAAL,CAAU,CAAV,CAAazJ,KAAKmT,KAAL,CAAYnT,KAAKkB,GAAL,CAAU0M,KAAV,EAAoB5N,KAAK+gB,GAArC,CAAb,CAAP,CAEH,CA9IO,CAAZ,CAkJA;;;;;OAOA,QAAShY,QAAT,CAAkBzM,CAAlB,CAAqBC,CAArB,CAAyB,CAErB,KAAKD,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAASA,GAAK,CAAd,CAEH,CAED6Q,OAAOI,gBAAP,CAAyBzE,QAAQoE,SAAjC,CAA4C,CAExC,QAAS,CAELO,IAAK,cAAY,CAEb,MAAO,MAAKpR,CAAZ,CAEH,CANI,CAQLa,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAKtR,CAAL,CAASsR,KAAT,CAEH,CAZI,CAF+B,CAkBxC,SAAU,CAENF,IAAK,cAAY,CAEb,MAAO,MAAKnR,CAAZ,CAEH,CANK,CAQNY,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAKrR,CAAL,CAASqR,KAAT,CAEH,CAZK,CAlB8B,CAA5C,EAoCAR,OAAO4B,MAAP,CAAejG,QAAQoE,SAAvB,CAAkC,CAE9B8T,UAAW,IAFmB,CAI9B9jB,IAAK,aAAWb,CAAX,CAAcC,CAAd,CAAkB,CAEnB,KAAKD,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAX6B,CAa9B2kB,UAAW,mBAAWC,MAAX,CAAoB,CAE3B,KAAK7kB,CAAL,CAAS6kB,MAAT,CACA,KAAK5kB,CAAL,CAAS4kB,MAAT,CAEA,MAAO,KAAP,CAEH,CApB6B,CAsB9BC,KAAM,cAAW9kB,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CA5B6B,CA8B9B+kB,KAAM,cAAW9kB,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CApC6B,CAsC9B+kB,aAAc,sBAAW7L,KAAX,CAAkB7H,KAAlB,CAA0B,CAEpC,OAAS6H,KAAT,EAEI,IAAK,EAAL,CAAQ,KAAKnZ,CAAL,CAASsR,KAAT,CAAgB,MACxB,IAAK,EAAL,CAAQ,KAAKrR,CAAL,CAASqR,KAAT,CAAgB,MACxB,QAAS,KAAM,IAAI2T,MAAJ,CAAW,0BAA4B9L,KAAvC,CAAN,CAJb,CAQA,MAAO,KAAP,CAEH,CAlD6B,CAoD9B+L,aAAc,sBAAW/L,KAAX,CAAmB,CAE7B,OAASA,KAAT,EAEI,IAAK,EAAL,CAAQ,MAAO,MAAKnZ,CAAZ,CACR,IAAK,EAAL,CAAQ,MAAO,MAAKC,CAAZ,CACR,QAAS,KAAM,IAAIglB,MAAJ,CAAW,0BAA4B9L,KAAvC,CAAN,CAJb,CAQH,CA9D6B,CAgE9BrW,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAKjR,CAA3B,CAA8B,KAAKC,CAAnC,CAAP,CAEH,CApE6B,CAsE9BgJ,KAAM,cAAWsE,CAAX,CAAe,CAEjB,KAAKvN,CAAL,CAASuN,EAAEvN,CAAX,CACA,KAAKC,CAAL,CAASsN,EAAEtN,CAAX,CAEA,MAAO,KAAP,CAEH,CA7E6B,CA+E9BuB,IAAK,aAAW+L,CAAX,CAAc4X,CAAd,CAAkB,CAEnB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,uFAAd,EACA,MAAO,MAAKyW,UAAL,CAAiB7X,CAAjB,CAAoB4X,CAApB,CAAP,CAEH,CAED,KAAKnlB,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CAEA,MAAO,KAAP,CAEH,CA7F6B,CA+F9BolB,UAAW,mBAAW5O,CAAX,CAAe,CAEtB,KAAKzW,CAAL,EAAUyW,CAAV,CACA,KAAKxW,CAAL,EAAUwW,CAAV,CAEA,MAAO,KAAP,CAEH,CAtG6B,CAwG9B2O,WAAY,oBAAWxN,CAAX,CAAcX,CAAd,CAAkB,CAE1B,KAAKjX,CAAL,CAAS4X,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAjB,CACA,KAAKC,CAAL,CAAS2X,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAjB,CAEA,MAAO,KAAP,CAEH,CA/G6B,CAiH9BqlB,gBAAiB,yBAAW/X,CAAX,CAAckJ,CAAd,CAAkB,CAE/B,KAAKzW,CAAL,EAAUuN,EAAEvN,CAAF,CAAMyW,CAAhB,CACA,KAAKxW,CAAL,EAAUsN,EAAEtN,CAAF,CAAMwW,CAAhB,CAEA,MAAO,KAAP,CAEH,CAxH6B,CA0H9BvM,IAAK,aAAWqD,CAAX,CAAc4X,CAAd,CAAkB,CAEnB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,uFAAd,EACA,MAAO,MAAKW,UAAL,CAAiB/B,CAAjB,CAAoB4X,CAApB,CAAP,CAEH,CAED,KAAKnlB,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CAEA,MAAO,KAAP,CAEH,CAxI6B,CA0I9BslB,UAAW,mBAAW9O,CAAX,CAAe,CAEtB,KAAKzW,CAAL,EAAUyW,CAAV,CACA,KAAKxW,CAAL,EAAUwW,CAAV,CAEA,MAAO,KAAP,CAEH,CAjJ6B,CAmJ9BnH,WAAY,oBAAWsI,CAAX,CAAcX,CAAd,CAAkB,CAE1B,KAAKjX,CAAL,CAAS4X,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAjB,CACA,KAAKC,CAAL,CAAS2X,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAjB,CAEA,MAAO,KAAP,CAEH,CA1J6B,CA4J9BulB,SAAU,kBAAWjY,CAAX,CAAe,CAErB,KAAKvN,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CAEA,MAAO,KAAP,CAEH,CAnK6B,CAqK9B0N,eAAgB,wBAAWkX,MAAX,CAAoB,CAEhC,KAAK7kB,CAAL,EAAU6kB,MAAV,CACA,KAAK5kB,CAAL,EAAU4kB,MAAV,CAEA,MAAO,KAAP,CAEH,CA5K6B,CA8K9BY,OAAQ,gBAAWlY,CAAX,CAAe,CAEnB,KAAKvN,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CAEA,MAAO,KAAP,CAEH,CArL6B,CAuL9BylB,aAAc,sBAAWb,MAAX,CAAoB,CAE9B,MAAO,MAAKlX,cAAL,CAAqB,EAAIkX,MAAzB,CAAP,CAEH,CA3L6B,CA6L9Bc,aAAc,sBAAWhP,CAAX,CAAe,CAEzB,GAAI3W,GAAI,KAAKA,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CACA,GAAI2lB,GAAIjP,EAAEkP,QAAV,CAEA,KAAK7lB,CAAL,CAAS4lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,CAAnC,CACA,KAAK3lB,CAAL,CAAS2lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,CAAnC,CAEA,MAAO,KAAP,CAEH,CAvM6B,CAyM9Bnb,IAAK,aAAW8C,CAAX,CAAe,CAEhB,KAAKvN,CAAL,CAAS0D,KAAK+G,GAAL,CAAU,KAAKzK,CAAf,CAAkBuN,EAAEvN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK+G,GAAL,CAAU,KAAKxK,CAAf,CAAkBsN,EAAEtN,CAApB,CAAT,CAEA,MAAO,KAAP,CAEH,CAhN6B,CAkN9BuK,IAAK,aAAW+C,CAAX,CAAe,CAEhB,KAAKvN,CAAL,CAAS0D,KAAK8G,GAAL,CAAU,KAAKxK,CAAf,CAAkBuN,EAAEvN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8G,GAAL,CAAU,KAAKvK,CAAf,CAAkBsN,EAAEtN,CAApB,CAAT,CAEA,MAAO,KAAP,CAEH,CAzN6B,CA2N9BijB,MAAO,eAAWzY,GAAX,CAAgBD,GAAhB,CAAsB,CAEzB;AAEA,KAAKxK,CAAL,CAAS0D,KAAK8G,GAAL,CAAUC,IAAIzK,CAAd,CAAiB0D,KAAK+G,GAAL,CAAUD,IAAIxK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8G,GAAL,CAAUC,IAAIxK,CAAd,CAAiByD,KAAK+G,GAAL,CAAUD,IAAIvK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CApO6B,CAsO9B6lB,YAAa,UAAY,CAErB,GAAIrb,KAAM,GAAIgC,QAAJ,EAAV,CACA,GAAIjC,KAAM,GAAIiC,QAAJ,EAAV,CAEA,MAAO,SAASqZ,YAAT,CAAsBC,MAAtB,CAA8BC,MAA9B,CAAuC,CAE1Cvb,IAAI5J,GAAJ,CAASklB,MAAT,CAAiBA,MAAjB,EACAvb,IAAI3J,GAAJ,CAASmlB,MAAT,CAAiBA,MAAjB,EAEA,MAAO,MAAK9C,KAAL,CAAYzY,GAAZ,CAAiBD,GAAjB,CAAP,CAEH,CAPD,CASH,CAdY,EAtOiB,CAsP9Byb,YAAa,qBAAWxb,GAAX,CAAgBD,GAAhB,CAAsB,CAE/B,GAAI4D,QAAS,KAAKA,MAAL,EAAb,CAEA,MAAO,MAAKsX,YAAL,CAAmBtX,QAAU,CAA7B,EAAiCT,cAAjC,CAAiDjK,KAAK8G,GAAL,CAAUC,GAAV,CAAe/G,KAAK+G,GAAL,CAAUD,GAAV,CAAe4D,MAAf,CAAf,CAAjD,CAAP,CAEH,CA5P6B,CA8P9ByI,MAAO,gBAAY,CAEf,KAAK7W,CAAL,CAAS0D,KAAKmT,KAAL,CAAY,KAAK7W,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAKmT,KAAL,CAAY,KAAK5W,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CArQ6B,CAuQ9BukB,KAAM,eAAY,CAEd,KAAKxkB,CAAL,CAAS0D,KAAK8gB,IAAL,CAAW,KAAKxkB,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8gB,IAAL,CAAW,KAAKvkB,CAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CA9Q6B,CAgR9BimB,MAAO,gBAAY,CAEf,KAAKlmB,CAAL,CAAS0D,KAAKwiB,KAAL,CAAY,KAAKlmB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAKwiB,KAAL,CAAY,KAAKjmB,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CAvR6B,CAyR9BkmB,YAAa,sBAAY,CAErB,KAAKnmB,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiB0D,KAAK8gB,IAAL,CAAW,KAAKxkB,CAAhB,CAAjB,CAAuC0D,KAAKmT,KAAL,CAAY,KAAK7W,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiByD,KAAK8gB,IAAL,CAAW,KAAKvkB,CAAhB,CAAjB,CAAuCyD,KAAKmT,KAAL,CAAY,KAAK5W,CAAjB,CAAhD,CAEA,MAAO,KAAP,CAEH,CAhS6B,CAkS9BmmB,OAAQ,iBAAY,CAEhB,KAAKpmB,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CAEA,MAAO,KAAP,CAEH,CAzS6B,CA2S9BkL,IAAK,aAAWoC,CAAX,CAAe,CAEhB,MAAO,MAAKvN,CAAL,CAASuN,EAAEvN,CAAX,CAAe,KAAKC,CAAL,CAASsN,EAAEtN,CAAjC,CAEH,CA/S6B,CAiT9BomB,SAAU,mBAAY,CAElB,MAAO,MAAKrmB,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAKC,CAAL,CAAS,KAAKA,CAAvC,CAEH,CArT6B,CAuT9BmO,OAAQ,iBAAY,CAEhB,MAAO1K,MAAK0M,IAAL,CAAW,KAAKpQ,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAKC,CAAL,CAAS,KAAKA,CAA3C,CAAP,CAEH,CA3T6B,CA6T9BqmB,gBAAiB,0BAAY,CAEzB,MAAO5iB,MAAK6iB,GAAL,CAAU,KAAKvmB,CAAf,EAAqB0D,KAAK6iB,GAAL,CAAU,KAAKtmB,CAAf,CAA5B,CAEH,CAjU6B,CAmU9BumB,UAAW,oBAAY,CAEnB,MAAO,MAAKd,YAAL,CAAmB,KAAKtX,MAAL,IAAiB,CAApC,CAAP,CAEH,CAvU6B,CAyU9BhB,MAAO,gBAAY,CAEf;AAEA,GAAIA,OAAQ1J,KAAK+iB,KAAL,CAAY,KAAKxmB,CAAjB,CAAoB,KAAKD,CAAzB,CAAZ,CAEA,GAAKoN,MAAQ,CAAb,CAAiBA,OAAS,EAAI1J,KAAKC,EAAlB,CAEjB,MAAOyJ,MAAP,CAEH,CAnV6B,CAqV9BsZ,WAAY,oBAAWnZ,CAAX,CAAe,CAEvB,MAAO7J,MAAK0M,IAAL,CAAW,KAAKnF,iBAAL,CAAwBsC,CAAxB,CAAX,CAAP,CAEH,CAzV6B,CA2V9BtC,kBAAmB,2BAAWsC,CAAX,CAAe,CAE9B,GAAI2C,IAAK,KAAKlQ,CAAL,CAASuN,EAAEvN,CAApB,CAAuBmQ,GAAK,KAAKlQ,CAAL,CAASsN,EAAEtN,CAAvC,CACA,MAAOiQ,IAAKA,EAAL,CAAUC,GAAKA,EAAtB,CAEH,CAhW6B,CAkW9BwW,oBAAqB,6BAAWpZ,CAAX,CAAe,CAEhC,MAAO7J,MAAK6iB,GAAL,CAAU,KAAKvmB,CAAL,CAASuN,EAAEvN,CAArB,EAA2B0D,KAAK6iB,GAAL,CAAU,KAAKtmB,CAAL,CAASsN,EAAEtN,CAArB,CAAlC,CAEH,CAtW6B,CAwW9B2mB,UAAW,mBAAWxY,MAAX,CAAoB,CAE3B,MAAO,MAAKoY,SAAL,GAAiB7Y,cAAjB,CAAiCS,MAAjC,CAAP,CAEH,CA5W6B,CA8W9BqV,KAAM,cAAWlW,CAAX,CAAcsZ,KAAd,CAAsB,CAExB,KAAK7mB,CAAL,EAAU,CAAEuN,EAAEvN,CAAF,CAAM,KAAKA,CAAb,EAAmB6mB,KAA7B,CACA,KAAK5mB,CAAL,EAAU,CAAEsN,EAAEtN,CAAF,CAAM,KAAKA,CAAb,EAAmB4mB,KAA7B,CAEA,MAAO,KAAP,CAEH,CArX6B,CAuX9BC,YAAa,qBAAW9O,EAAX,CAAe+O,EAAf,CAAmBF,KAAnB,CAA2B,CAEpC,MAAO,MAAKvX,UAAL,CAAiByX,EAAjB,CAAqB/O,EAArB,EAA0BrK,cAA1B,CAA0CkZ,KAA1C,EAAkDrlB,GAAlD,CAAuDwW,EAAvD,CAAP,CAEH,CA3X6B,CA6X9BgP,OAAQ,gBAAWzZ,CAAX,CAAe,CAEnB,MAAWA,GAAEvN,CAAF,GAAQ,KAAKA,CAAf,EAAwBuN,EAAEtN,CAAF,GAAQ,KAAKA,CAA9C,CAEH,CAjY6B,CAmY9BgnB,UAAW,mBAAWtN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAElC,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,KAAKzJ,CAAL,CAAS2Z,MAAOlQ,MAAP,CAAT,CACA,KAAKxJ,CAAL,CAAS0Z,MAAOlQ,OAAS,CAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CA5Y6B,CA8Y9Byd,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5BkQ,MAAOlQ,MAAP,EAAkB,KAAKzJ,CAAvB,CACA2Z,MAAOlQ,OAAS,CAAhB,EAAsB,KAAKxJ,CAA3B,CAEA,MAAO0Z,MAAP,CAEH,CAxZ6B,CA0Z9BwN,oBAAqB,6BAAWC,SAAX,CAAsBjO,KAAtB,CAA6B1P,MAA7B,CAAsC,CAEvD,GAAKA,SAAWrD,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,qEAAd,EAEH,CAED,KAAK3O,CAAL,CAASonB,UAAUC,IAAV,CAAgBlO,KAAhB,CAAT,CACA,KAAKlZ,CAAL,CAASmnB,UAAUE,IAAV,CAAgBnO,KAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CAva6B,CAya9BoO,aAAc,sBAAWpW,MAAX,CAAmB/D,KAAnB,CAA2B,CAErC,GAAIoa,GAAI9jB,KAAKyS,GAAL,CAAU/I,KAAV,CAAR,CAA2BqJ,EAAI/S,KAAK0S,GAAL,CAAUhJ,KAAV,CAA/B,CAEA,GAAIpN,GAAI,KAAKA,CAAL,CAASmR,OAAOnR,CAAxB,CACA,GAAIC,GAAI,KAAKA,CAAL,CAASkR,OAAOlR,CAAxB,CAEA,KAAKD,CAAL,CAASA,EAAIwnB,CAAJ,CAAQvnB,EAAIwW,CAAZ,CAAgBtF,OAAOnR,CAAhC,CACA,KAAKC,CAAL,CAASD,EAAIyW,CAAJ,CAAQxW,EAAIunB,CAAZ,CAAgBrW,OAAOlR,CAAhC,CAEA,MAAO,KAAP,CAEH,CArb6B,CAAlC,EAybA;;;;;;;;;;;OAaA,QAASwnB,QAAT,EAAmB,CAEf,KAAK5B,QAAL,CAAgB,CAEZ,CAFY,CAET,CAFS,CAEN,CAFM,CAEH,CAFG,CAGZ,CAHY,CAGT,CAHS,CAGN,CAHM,CAGH,CAHG,CAIZ,CAJY,CAIT,CAJS,CAIN,CAJM,CAIH,CAJG,CAKZ,CALY,CAKT,CALS,CAKN,CALM,CAKH,CALG,CAAhB,CASA,GAAK1Q,UAAU/G,MAAV,CAAmB,CAAxB,CAA4B,CAExBzJ,QAAQ+iB,KAAR,CAAe,+EAAf,EAEH,CAEJ,CAED5W,OAAO4B,MAAP,CAAe+U,QAAQ5W,SAAvB,CAAkC,CAE9B8W,UAAW,IAFmB,CAI9B9mB,IAAK,aAAW+mB,GAAX,CAAgBC,GAAhB,CAAqBC,GAArB,CAA0BC,GAA1B,CAA+BC,GAA/B,CAAoCC,GAApC,CAAyCC,GAAzC,CAA8CC,GAA9C,CAAmDC,GAAnD,CAAwDC,GAAxD,CAA6DC,GAA7D,CAAkEC,GAAlE,CAAuEC,GAAvE,CAA4EC,GAA5E,CAAiFC,GAAjF,CAAsFC,GAAtF,CAA4F,CAE7F,GAAIC,IAAK,KAAK/C,QAAd,CAEA+C,GAAI,CAAJ,EAAUhB,GAAV,CAAegB,GAAI,CAAJ,EAAUf,GAAV,CAAee,GAAI,CAAJ,EAAUd,GAAV,CAAec,GAAI,EAAJ,EAAWb,GAAX,CAC7Ca,GAAI,CAAJ,EAAUZ,GAAV,CAAeY,GAAI,CAAJ,EAAUX,GAAV,CAAeW,GAAI,CAAJ,EAAUV,GAAV,CAAeU,GAAI,EAAJ,EAAWT,GAAX,CAC7CS,GAAI,CAAJ,EAAUR,GAAV,CAAeQ,GAAI,CAAJ,EAAUP,GAAV,CAAeO,GAAI,EAAJ,EAAWN,GAAX,CAAgBM,GAAI,EAAJ,EAAWL,GAAX,CAC9CK,GAAI,CAAJ,EAAUJ,GAAV,CAAeI,GAAI,CAAJ,EAAUH,GAAV,CAAeG,GAAI,EAAJ,EAAWF,GAAX,CAAgBE,GAAI,EAAJ,EAAWD,GAAX,CAE9C,MAAO,KAAP,CAEH,CAf6B,CAiB9BE,SAAU,mBAAY,CAElB,KAAKhoB,GAAL,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAEa,CAFb,CAGI,CAHJ,CAGO,CAHP,CAGU,CAHV,CAGa,CAHb,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,CAIa,CAJb,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CA9B6B,CAgC9BiC,MAAO,gBAAY,CAEf,MAAO,IAAI2kB,QAAJ,GAAcR,SAAd,CAAyB,KAAKpB,QAA9B,CAAP,CAEH,CApC6B,CAsC9B5c,KAAM,cAAW0N,CAAX,CAAe,CAEjB,GAAIiS,IAAK,KAAK/C,QAAd,CACA,GAAIiD,IAAKnS,EAAEkP,QAAX,CAEA+C,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CACzDF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CACzDF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CAAqBF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CAC3DF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CAAqBF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CAAqBF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CAAqBF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CAE/D,MAAO,KAAP,CAEH,CAlD6B,CAoD9BC,aAAc,sBAAWpS,CAAX,CAAe,CAEzB,GAAIiS,IAAK,KAAK/C,QAAd,CAAwBiD,GAAKnS,EAAEkP,QAA/B,CAEA+C,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CACAF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CACAF,GAAI,EAAJ,EAAWE,GAAI,EAAJ,CAAX,CAEA,MAAO,KAAP,CAEH,CA9D6B,CAgE9BE,aAAc,sBAAWC,KAAX,CAAkBC,KAAlB,CAAyBC,KAAzB,CAAiC,CAE3CF,MAAMvb,mBAAN,CAA2B,IAA3B,CAAiC,CAAjC,EACAwb,MAAMxb,mBAAN,CAA2B,IAA3B,CAAiC,CAAjC,EACAyb,MAAMzb,mBAAN,CAA2B,IAA3B,CAAiC,CAAjC,EAEA,MAAO,KAAP,CAEH,CAxE6B,CA0E9B0b,UAAW,mBAAWH,KAAX,CAAkBC,KAAlB,CAAyBC,KAAzB,CAAiC,CAExC,KAAKtoB,GAAL,CACIooB,MAAMjpB,CADV,CACakpB,MAAMlpB,CADnB,CACsBmpB,MAAMnpB,CAD5B,CAC+B,CAD/B,CAEIipB,MAAMhpB,CAFV,CAEaipB,MAAMjpB,CAFnB,CAEsBkpB,MAAMlpB,CAF5B,CAE+B,CAF/B,CAGIgpB,MAAM/oB,CAHV,CAGagpB,MAAMhpB,CAHnB,CAGsBipB,MAAMjpB,CAH5B,CAG+B,CAH/B,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,CAIa,CAJb,EAOA,MAAO,KAAP,CAEH,CArF6B,CAuF9BmpB,gBAAiB,UAAY,CAEzB,GAAIrR,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAAS+iB,gBAAT,CAA0B1S,CAA1B,CAA8B,CAEjC;AAEA,GAAIiS,IAAK,KAAK/C,QAAd,CACA,GAAIiD,IAAKnS,EAAEkP,QAAX,CAEA,GAAIyD,QAAS,EAAItR,GAAGtK,mBAAH,CAAwBiJ,CAAxB,CAA2B,CAA3B,EAA+BvI,MAA/B,EAAjB,CACA,GAAImb,QAAS,EAAIvR,GAAGtK,mBAAH,CAAwBiJ,CAAxB,CAA2B,CAA3B,EAA+BvI,MAA/B,EAAjB,CACA,GAAIob,QAAS,EAAIxR,GAAGtK,mBAAH,CAAwBiJ,CAAxB,CAA2B,CAA3B,EAA+BvI,MAA/B,EAAjB,CAEAwa,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUQ,MAApB,CACAV,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUQ,MAApB,CACAV,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUQ,MAApB,CACAV,GAAI,CAAJ,EAAU,CAAV,CAEAA,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUS,MAApB,CACAX,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUS,MAApB,CACAX,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUS,MAApB,CACAX,GAAI,CAAJ,EAAU,CAAV,CAEAA,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUU,MAApB,CACAZ,GAAI,CAAJ,EAAUE,GAAI,CAAJ,EAAUU,MAApB,CACAZ,GAAI,EAAJ,EAAWE,GAAI,EAAJ,EAAWU,MAAtB,CACAZ,GAAI,EAAJ,EAAW,CAAX,CAEAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CAEA,MAAO,KAAP,CAEH,CAjCD,CAmCH,CAvCgB,EAvFa,CAgI9Ba,sBAAuB,+BAAWC,KAAX,CAAmB,CAEtC,GAAK,EAAIA,OAASA,MAAMC,OAAnB,CAAL,CAAoC,CAEhChlB,QAAQ+iB,KAAR,CAAe,uGAAf,EAEH,CAED,GAAIkB,IAAK,KAAK/C,QAAd,CAEA,GAAI7lB,GAAI0pB,MAAM1pB,CAAd,CAAiBC,EAAIypB,MAAMzpB,CAA3B,CAA8BC,EAAIwpB,MAAMxpB,CAAxC,CACA,GAAI0X,GAAIlU,KAAKyS,GAAL,CAAUnW,CAAV,CAAR,CAAuBiX,EAAIvT,KAAK0S,GAAL,CAAUpW,CAAV,CAA3B,CACA,GAAIwnB,GAAI9jB,KAAKyS,GAAL,CAAUlW,CAAV,CAAR,CAAuB2pB,EAAIlmB,KAAK0S,GAAL,CAAUnW,CAAV,CAA3B,CACA,GAAI2lB,GAAIliB,KAAKyS,GAAL,CAAUjW,CAAV,CAAR,CAAuB0W,EAAIlT,KAAK0S,GAAL,CAAUlW,CAAV,CAA3B,CAEA,GAAKwpB,MAAMG,KAAN,GAAgB,KAArB,CAA6B,CAEzB,GAAIC,IAAKlS,EAAIgO,CAAb,CAAgBmE,GAAKnS,EAAIhB,CAAzB,CAA4BoT,GAAK/S,EAAI2O,CAArC,CAAwCqE,GAAKhT,EAAIL,CAAjD,CAEAgS,GAAI,CAAJ,EAAUpB,EAAI5B,CAAd,CACAgD,GAAI,CAAJ,EAAU,CAAEpB,CAAF,CAAM5Q,CAAhB,CACAgS,GAAI,CAAJ,EAAUgB,CAAV,CAEAhB,GAAI,CAAJ,EAAUmB,GAAKC,GAAKJ,CAApB,CACAhB,GAAI,CAAJ,EAAUkB,GAAKG,GAAKL,CAApB,CACAhB,GAAI,CAAJ,EAAU,CAAE3R,CAAF,CAAMuQ,CAAhB,CAEAoB,GAAI,CAAJ,EAAUqB,GAAKH,GAAKF,CAApB,CACAhB,GAAI,CAAJ,EAAUoB,GAAKD,GAAKH,CAApB,CACAhB,GAAI,EAAJ,EAAWhR,EAAI4P,CAAf,CAEH,CAhBD,IAgBO,IAAKkC,MAAMG,KAAN,GAAgB,KAArB,CAA6B,CAEhC,GAAIK,IAAK1C,EAAI5B,CAAb,CAAgBuE,GAAK3C,EAAI5Q,CAAzB,CAA4BwT,GAAKR,EAAIhE,CAArC,CAAwCyE,GAAKT,EAAIhT,CAAjD,CAEAgS,GAAI,CAAJ,EAAUsB,GAAKG,GAAKpT,CAApB,CACA2R,GAAI,CAAJ,EAAUwB,GAAKnT,CAAL,CAASkT,EAAnB,CACAvB,GAAI,CAAJ,EAAUhR,EAAIgS,CAAd,CAEAhB,GAAI,CAAJ,EAAUhR,EAAIhB,CAAd,CACAgS,GAAI,CAAJ,EAAUhR,EAAIgO,CAAd,CACAgD,GAAI,CAAJ,EAAU,CAAE3R,CAAZ,CAEA2R,GAAI,CAAJ,EAAUuB,GAAKlT,CAAL,CAASmT,EAAnB,CACAxB,GAAI,CAAJ,EAAUyB,GAAKH,GAAKjT,CAApB,CACA2R,GAAI,EAAJ,EAAWhR,EAAI4P,CAAf,CAEH,CAhBM,IAgBA,IAAKkC,MAAMG,KAAN,GAAgB,KAArB,CAA6B,CAEhC,GAAIK,IAAK1C,EAAI5B,CAAb,CAAgBuE,GAAK3C,EAAI5Q,CAAzB,CAA4BwT,GAAKR,EAAIhE,CAArC,CAAwCyE,GAAKT,EAAIhT,CAAjD,CAEAgS,GAAI,CAAJ,EAAUsB,GAAKG,GAAKpT,CAApB,CACA2R,GAAI,CAAJ,EAAU,CAAEhR,CAAF,CAAMhB,CAAhB,CACAgS,GAAI,CAAJ,EAAUwB,GAAKD,GAAKlT,CAApB,CAEA2R,GAAI,CAAJ,EAAUuB,GAAKC,GAAKnT,CAApB,CACA2R,GAAI,CAAJ,EAAUhR,EAAIgO,CAAd,CACAgD,GAAI,CAAJ,EAAUyB,GAAKH,GAAKjT,CAApB,CAEA2R,GAAI,CAAJ,EAAU,CAAEhR,CAAF,CAAMgS,CAAhB,CACAhB,GAAI,CAAJ,EAAU3R,CAAV,CACA2R,GAAI,EAAJ,EAAWhR,EAAI4P,CAAf,CAEH,CAhBM,IAgBA,IAAKkC,MAAMG,KAAN,GAAgB,KAArB,CAA6B,CAEhC,GAAIC,IAAKlS,EAAIgO,CAAb,CAAgBmE,GAAKnS,EAAIhB,CAAzB,CAA4BoT,GAAK/S,EAAI2O,CAArC,CAAwCqE,GAAKhT,EAAIL,CAAjD,CAEAgS,GAAI,CAAJ,EAAUpB,EAAI5B,CAAd,CACAgD,GAAI,CAAJ,EAAUoB,GAAKJ,CAAL,CAASG,EAAnB,CACAnB,GAAI,CAAJ,EAAUkB,GAAKF,CAAL,CAASK,EAAnB,CAEArB,GAAI,CAAJ,EAAUpB,EAAI5Q,CAAd,CACAgS,GAAI,CAAJ,EAAUqB,GAAKL,CAAL,CAASE,EAAnB,CACAlB,GAAI,CAAJ,EAAUmB,GAAKH,CAAL,CAASI,EAAnB,CAEApB,GAAI,CAAJ,EAAU,CAAEgB,CAAZ,CACAhB,GAAI,CAAJ,EAAU3R,EAAIuQ,CAAd,CACAoB,GAAI,EAAJ,EAAWhR,EAAI4P,CAAf,CAEH,CAhBM,IAgBA,IAAKkC,MAAMG,KAAN,GAAgB,KAArB,CAA6B,CAEhC,GAAIS,IAAK1S,EAAI4P,CAAb,CAAgB+C,GAAK3S,EAAIgS,CAAzB,CAA4BY,GAAKvT,EAAIuQ,CAArC,CAAwCiD,GAAKxT,EAAI2S,CAAjD,CAEAhB,GAAI,CAAJ,EAAUpB,EAAI5B,CAAd,CACAgD,GAAI,CAAJ,EAAU6B,GAAKH,GAAK1T,CAApB,CACAgS,GAAI,CAAJ,EAAU4B,GAAK5T,CAAL,CAAS2T,EAAnB,CAEA3B,GAAI,CAAJ,EAAUhS,CAAV,CACAgS,GAAI,CAAJ,EAAUhR,EAAIgO,CAAd,CACAgD,GAAI,CAAJ,EAAU,CAAE3R,CAAF,CAAM2O,CAAhB,CAEAgD,GAAI,CAAJ,EAAU,CAAEgB,CAAF,CAAMhE,CAAhB,CACAgD,GAAI,CAAJ,EAAU2B,GAAK3T,CAAL,CAAS4T,EAAnB,CACA5B,GAAI,EAAJ,EAAW0B,GAAKG,GAAK7T,CAArB,CAEH,CAhBM,IAgBA,IAAK8S,MAAMG,KAAN,GAAgB,KAArB,CAA6B,CAEhC,GAAIS,IAAK1S,EAAI4P,CAAb,CAAgB+C,GAAK3S,EAAIgS,CAAzB,CAA4BY,GAAKvT,EAAIuQ,CAArC,CAAwCiD,GAAKxT,EAAI2S,CAAjD,CAEAhB,GAAI,CAAJ,EAAUpB,EAAI5B,CAAd,CACAgD,GAAI,CAAJ,EAAU,CAAEhS,CAAZ,CACAgS,GAAI,CAAJ,EAAUgB,EAAIhE,CAAd,CAEAgD,GAAI,CAAJ,EAAU0B,GAAK1T,CAAL,CAAS6T,EAAnB,CACA7B,GAAI,CAAJ,EAAUhR,EAAIgO,CAAd,CACAgD,GAAI,CAAJ,EAAU2B,GAAK3T,CAAL,CAAS4T,EAAnB,CAEA5B,GAAI,CAAJ,EAAU4B,GAAK5T,CAAL,CAAS2T,EAAnB,CACA3B,GAAI,CAAJ,EAAU3R,EAAI2O,CAAd,CACAgD,GAAI,EAAJ,EAAW6B,GAAK7T,CAAL,CAAS0T,EAApB,CAEH,CAED;AACA1B,GAAI,CAAJ,EAAU,CAAV,CACAA,GAAI,CAAJ,EAAU,CAAV,CACAA,GAAI,EAAJ,EAAW,CAAX,CAEA;AACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CACAA,GAAI,EAAJ,EAAW,CAAX,CAEA,MAAO,KAAP,CAEH,CA9P6B,CAgQ9B8B,2BAA4B,UAAY,CAEpC,GAAIC,MAAO,GAAIrkB,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAX,CACA,GAAIskB,KAAM,GAAItkB,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAV,CAEA,MAAO,SAASokB,2BAAT,CAAqCG,CAArC,CAAyC,CAE5C,MAAO,MAAKC,OAAL,CAAcH,IAAd,CAAoBE,CAApB,CAAuBD,GAAvB,CAAP,CAEH,CAJD,CAMH,CAX2B,EAhQE,CA6Q9B7f,OAAQ,UAAY,CAEhB,GAAI/K,GAAI,GAAIsG,QAAJ,EAAR,CACA,GAAIrG,GAAI,GAAIqG,QAAJ,EAAR,CACA,GAAIpG,GAAI,GAAIoG,QAAJ,EAAR,CAEA,MAAO,SAASyE,OAAT,CAAiBggB,GAAjB,CAAsBtpB,MAAtB,CAA8BoI,EAA9B,CAAmC,CAEtC,GAAI+e,IAAK,KAAK/C,QAAd,CAEA3lB,EAAEoP,UAAF,CAAcyb,GAAd,CAAmBtpB,MAAnB,EAEA,GAAKvB,EAAEmmB,QAAF,KAAiB,CAAtB,CAA0B,CAEtB;AAEAnmB,EAAEA,CAAF,CAAM,CAAN,CAEH,CAEDA,EAAEsmB,SAAF,GACAxmB,EAAEgrB,YAAF,CAAgBnhB,EAAhB,CAAoB3J,CAApB,EAEA,GAAKF,EAAEqmB,QAAF,KAAiB,CAAtB,CAA0B,CAEtB;AAEA,GAAK3iB,KAAK6iB,GAAL,CAAU1c,GAAG3J,CAAb,IAAqB,CAA1B,CAA8B,CAE1BA,EAAEF,CAAF,EAAO,MAAP,CAEH,CAJD,IAIO,CAEHE,EAAEA,CAAF,EAAO,MAAP,CAEH,CAEDA,EAAEsmB,SAAF,GACAxmB,EAAEgrB,YAAF,CAAgBnhB,EAAhB,CAAoB3J,CAApB,EAEH,CAEDF,EAAEwmB,SAAF,GACAvmB,EAAE+qB,YAAF,CAAgB9qB,CAAhB,CAAmBF,CAAnB,EAEA4oB,GAAI,CAAJ,EAAU5oB,EAAEA,CAAZ,CAAe4oB,GAAI,CAAJ,EAAU3oB,EAAED,CAAZ,CAAe4oB,GAAI,CAAJ,EAAU1oB,EAAEF,CAAZ,CAC9B4oB,GAAI,CAAJ,EAAU5oB,EAAEC,CAAZ,CAAe2oB,GAAI,CAAJ,EAAU3oB,EAAEA,CAAZ,CAAe2oB,GAAI,CAAJ,EAAU1oB,EAAED,CAAZ,CAC9B2oB,GAAI,CAAJ,EAAU5oB,EAAEE,CAAZ,CAAe0oB,GAAI,CAAJ,EAAU3oB,EAAEC,CAAZ,CAAe0oB,GAAI,EAAJ,EAAW1oB,EAAEA,CAAb,CAE9B,MAAO,KAAP,CAEH,CA7CD,CA+CH,CArDO,EA7QsB,CAoU9BslB,SAAU,kBAAW7O,CAAX,CAAcO,CAAd,CAAkB,CAExB,GAAKA,IAAM9Q,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,kGAAd,EACA,MAAO,MAAKsc,gBAAL,CAAuBtU,CAAvB,CAA0BO,CAA1B,CAAP,CAEH,CAED,MAAO,MAAK+T,gBAAL,CAAuB,IAAvB,CAA6BtU,CAA7B,CAAP,CAEH,CA/U6B,CAiV9BuU,YAAa,qBAAWvU,CAAX,CAAe,CAExB,MAAO,MAAKsU,gBAAL,CAAuBtU,CAAvB,CAA0B,IAA1B,CAAP,CAEH,CArV6B,CAuV9BsU,iBAAkB,0BAAWrT,CAAX,CAAcX,CAAd,CAAkB,CAEhC,GAAI6S,IAAKlS,EAAEiO,QAAX,CACA,GAAImE,IAAK/S,EAAE4O,QAAX,CACA,GAAI+C,IAAK,KAAK/C,QAAd,CAEA,GAAIsF,KAAMrB,GAAI,CAAJ,CAAV,CAAmBsB,IAAMtB,GAAI,CAAJ,CAAzB,CAAkCuB,IAAMvB,GAAI,CAAJ,CAAxC,CAAiDwB,IAAMxB,GAAI,EAAJ,CAAvD,CACA,GAAIyB,KAAMzB,GAAI,CAAJ,CAAV,CAAmB0B,IAAM1B,GAAI,CAAJ,CAAzB,CAAkC2B,IAAM3B,GAAI,CAAJ,CAAxC,CAAiD4B,IAAM5B,GAAI,EAAJ,CAAvD,CACA,GAAI6B,KAAM7B,GAAI,CAAJ,CAAV,CAAmB8B,IAAM9B,GAAI,CAAJ,CAAzB,CAAkC+B,IAAM/B,GAAI,EAAJ,CAAxC,CAAkDgC,IAAMhC,GAAI,EAAJ,CAAxD,CACA,GAAIiC,KAAMjC,GAAI,CAAJ,CAAV,CAAmBkC,IAAMlC,GAAI,CAAJ,CAAzB,CAAkCmC,IAAMnC,GAAI,EAAJ,CAAxC,CAAkDoC,IAAMpC,GAAI,EAAJ,CAAxD,CAEA,GAAIqC,KAAMnC,GAAI,CAAJ,CAAV,CAAmBoC,IAAMpC,GAAI,CAAJ,CAAzB,CAAkCqC,IAAMrC,GAAI,CAAJ,CAAxC,CAAiDsC,IAAMtC,GAAI,EAAJ,CAAvD,CACA,GAAIuC,KAAMvC,GAAI,CAAJ,CAAV,CAAmBwC,IAAMxC,GAAI,CAAJ,CAAzB,CAAkCyC,IAAMzC,GAAI,CAAJ,CAAxC,CAAiD0C,IAAM1C,GAAI,EAAJ,CAAvD,CACA,GAAI2C,KAAM3C,GAAI,CAAJ,CAAV,CAAmB4C,IAAM5C,GAAI,CAAJ,CAAzB,CAAkC6C,IAAM7C,GAAI,EAAJ,CAAxC,CAAkD8C,IAAM9C,GAAI,EAAJ,CAAxD,CACA,GAAI+C,KAAM/C,GAAI,CAAJ,CAAV,CAAmBgD,IAAMhD,GAAI,CAAJ,CAAzB,CAAkCiD,IAAMjD,GAAI,EAAJ,CAAxC,CAAkDkD,IAAMlD,GAAI,EAAJ,CAAxD,CAEApB,GAAI,CAAJ,EAAUuC,IAAMgB,GAAN,CAAYf,IAAMmB,GAAlB,CAAwBlB,IAAMsB,GAA9B,CAAoCrB,IAAMyB,GAApD,CACAnE,GAAI,CAAJ,EAAUuC,IAAMiB,GAAN,CAAYhB,IAAMoB,GAAlB,CAAwBnB,IAAMuB,GAA9B,CAAoCtB,IAAM0B,GAApD,CACApE,GAAI,CAAJ,EAAUuC,IAAMkB,GAAN,CAAYjB,IAAMqB,GAAlB,CAAwBpB,IAAMwB,GAA9B,CAAoCvB,IAAM2B,GAApD,CACArE,GAAI,EAAJ,EAAWuC,IAAMmB,GAAN,CAAYlB,IAAMsB,GAAlB,CAAwBrB,IAAMyB,GAA9B,CAAoCxB,IAAM4B,GAArD,CAEAtE,GAAI,CAAJ,EAAU2C,IAAMY,GAAN,CAAYX,IAAMe,GAAlB,CAAwBd,IAAMkB,GAA9B,CAAoCjB,IAAMqB,GAApD,CACAnE,GAAI,CAAJ,EAAU2C,IAAMa,GAAN,CAAYZ,IAAMgB,GAAlB,CAAwBf,IAAMmB,GAA9B,CAAoClB,IAAMsB,GAApD,CACApE,GAAI,CAAJ,EAAU2C,IAAMc,GAAN,CAAYb,IAAMiB,GAAlB,CAAwBhB,IAAMoB,GAA9B,CAAoCnB,IAAMuB,GAApD,CACArE,GAAI,EAAJ,EAAW2C,IAAMe,GAAN,CAAYd,IAAMkB,GAAlB,CAAwBjB,IAAMqB,GAA9B,CAAoCpB,IAAMwB,GAArD,CAEAtE,GAAI,CAAJ,EAAU+C,IAAMQ,GAAN,CAAYP,IAAMW,GAAlB,CAAwBV,IAAMc,GAA9B,CAAoCb,IAAMiB,GAApD,CACAnE,GAAI,CAAJ,EAAU+C,IAAMS,GAAN,CAAYR,IAAMY,GAAlB,CAAwBX,IAAMe,GAA9B,CAAoCd,IAAMkB,GAApD,CACApE,GAAI,EAAJ,EAAW+C,IAAMU,GAAN,CAAYT,IAAMa,GAAlB,CAAwBZ,IAAMgB,GAA9B,CAAoCf,IAAMmB,GAArD,CACArE,GAAI,EAAJ,EAAW+C,IAAMW,GAAN,CAAYV,IAAMc,GAAlB,CAAwBb,IAAMiB,GAA9B,CAAoChB,IAAMoB,GAArD,CAEAtE,GAAI,CAAJ,EAAUmD,IAAMI,GAAN,CAAYH,IAAMO,GAAlB,CAAwBN,IAAMU,GAA9B,CAAoCT,IAAMa,GAApD,CACAnE,GAAI,CAAJ,EAAUmD,IAAMK,GAAN,CAAYJ,IAAMQ,GAAlB,CAAwBP,IAAMW,GAA9B,CAAoCV,IAAMc,GAApD,CACApE,GAAI,EAAJ,EAAWmD,IAAMM,GAAN,CAAYL,IAAMS,GAAlB,CAAwBR,IAAMY,GAA9B,CAAoCX,IAAMe,GAArD,CACArE,GAAI,EAAJ,EAAWmD,IAAMO,GAAN,CAAYN,IAAMU,GAAlB,CAAwBT,IAAMa,GAA9B,CAAoCZ,IAAMgB,GAArD,CAEA,MAAO,KAAP,CAEH,CA7X6B,CA+X9Bvf,eAAgB,wBAAW8I,CAAX,CAAe,CAE3B,GAAImS,IAAK,KAAK/C,QAAd,CAEA+C,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,EAAJ,GAAYnS,CAAZ,CAC1CmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,EAAJ,GAAYnS,CAAZ,CAC1CmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,EAAJ,GAAYnS,CAAZ,CAAemS,GAAI,EAAJ,GAAYnS,CAAZ,CAC3CmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,EAAJ,GAAYnS,CAAZ,CAAemS,GAAI,EAAJ,GAAYnS,CAAZ,CAE3C,MAAO,KAAP,CAEH,CA1Y6B,CA4Y9B0W,uBAAwB,UAAY,CAEhC,GAAInV,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAAS6mB,uBAAT,CAAiC/F,SAAjC,CAA6C,CAEhD,IAAM,GAAIpV,GAAI,CAAR,CAAW6H,EAAIuN,UAAUgG,KAA/B,CAAsCpb,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDgG,GAAGhY,CAAH,CAAOonB,UAAUC,IAAV,CAAgBrV,CAAhB,CAAP,CACAgG,GAAG/X,CAAH,CAAOmnB,UAAUE,IAAV,CAAgBtV,CAAhB,CAAP,CACAgG,GAAG9X,CAAH,CAAOknB,UAAUiG,IAAV,CAAgBrb,CAAhB,CAAP,CAEAgG,GAAGsV,YAAH,CAAiB,IAAjB,EAEAlG,UAAUmG,MAAV,CAAkBvb,CAAlB,CAAqBgG,GAAGhY,CAAxB,CAA2BgY,GAAG/X,CAA9B,CAAiC+X,GAAG9X,CAApC,EAEH,CAED,MAAOknB,UAAP,CAEH,CAhBD,CAkBH,CAtBuB,EA5YM,CAoa9BoG,YAAa,sBAAY,CAErB,GAAI5E,IAAK,KAAK/C,QAAd,CAEA,GAAI+B,KAAMgB,GAAI,CAAJ,CAAV,CAAmBf,IAAMe,GAAI,CAAJ,CAAzB,CAAkCd,IAAMc,GAAI,CAAJ,CAAxC,CAAiDb,IAAMa,GAAI,EAAJ,CAAvD,CACA,GAAIZ,KAAMY,GAAI,CAAJ,CAAV,CAAmBX,IAAMW,GAAI,CAAJ,CAAzB,CAAkCV,IAAMU,GAAI,CAAJ,CAAxC,CAAiDT,IAAMS,GAAI,EAAJ,CAAvD,CACA,GAAIR,KAAMQ,GAAI,CAAJ,CAAV,CAAmBP,IAAMO,GAAI,CAAJ,CAAzB,CAAkCN,IAAMM,GAAI,EAAJ,CAAxC,CAAkDL,IAAMK,GAAI,EAAJ,CAAxD,CACA,GAAIJ,KAAMI,GAAI,CAAJ,CAAV,CAAmBH,IAAMG,GAAI,CAAJ,CAAzB,CAAkCF,IAAME,GAAI,EAAJ,CAAxC,CAAkDD,IAAMC,GAAI,EAAJ,CAAxD,CAEA;AACA;AAEA,MACIJ,MACI,CAAET,GAAF,CAAQG,GAAR,CAAcG,GAAd,CACEP,IAAMK,GAAN,CAAYE,GADd,CAEEN,IAAME,GAAN,CAAYK,GAFd,CAGET,IAAMM,GAAN,CAAYG,GAHd,CAIER,IAAMG,GAAN,CAAYM,GAJd,CAKEV,IAAMK,GAAN,CAAYK,GANlB,EAQAE,KACI,CAAEb,GAAF,CAAQM,GAAR,CAAcK,GAAd,CACEX,IAAMO,GAAN,CAAYG,GADd,CAEEP,IAAMC,GAAN,CAAYM,GAFd,CAGER,IAAME,GAAN,CAAYO,GAHd,CAIET,IAAMK,GAAN,CAAYC,GAJd,CAKEL,IAAMG,GAAN,CAAYE,GANlB,CARA,CAgBAM,KACI,CAAEd,GAAF,CAAQO,GAAR,CAAcE,GAAd,CACET,IAAMK,GAAN,CAAYM,GADd,CAEER,IAAMC,GAAN,CAAYK,GAFd,CAGER,IAAMG,GAAN,CAAYO,GAHd,CAIER,IAAME,GAAN,CAAYG,GAJd,CAKEP,IAAMM,GAAN,CAAYC,GANlB,CAhBA,CAwBAO,KACI,CAAEb,GAAF,CAAQG,GAAR,CAAcG,GAAd,CACER,IAAMM,GAAN,CAAYG,GADd,CAEET,IAAMK,GAAN,CAAYK,GAFd,CAGER,IAAME,GAAN,CAAYK,GAHd,CAIER,IAAMG,GAAN,CAAYM,GAJd,CAKET,IAAMK,GAAN,CAAYE,GANlB,CAzBJ,CAoCH,CApd6B,CAsd9BqF,UAAW,oBAAY,CAEnB,GAAI7E,IAAK,KAAK/C,QAAd,CACA,GAAIlQ,IAAJ,CAEAA,IAAMiT,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAmBA,GAAI,CAAJ,EAAUjT,GAAV,CAClCA,IAAMiT,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAmBA,GAAI,CAAJ,EAAUjT,GAAV,CAClCA,IAAMiT,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAmBA,GAAI,CAAJ,EAAUjT,GAAV,CAElCA,IAAMiT,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,EAAJ,CAAV,CAAoBA,GAAI,EAAJ,EAAWjT,GAAX,CACnCA,IAAMiT,GAAI,CAAJ,CAAN,CAAeA,GAAI,CAAJ,EAAUA,GAAI,EAAJ,CAAV,CAAoBA,GAAI,EAAJ,EAAWjT,GAAX,CACnCA,IAAMiT,GAAI,EAAJ,CAAN,CAAgBA,GAAI,EAAJ,EAAWA,GAAI,EAAJ,CAAX,CAAqBA,GAAI,EAAJ,EAAWjT,GAAX,CAErC,MAAO,KAAP,CAEH,CAre6B,CAue9B+X,YAAa,qBAAWngB,CAAX,CAAe,CAExB,GAAIqb,IAAK,KAAK/C,QAAd,CAEA+C,GAAI,EAAJ,EAAWrb,EAAEvN,CAAb,CACA4oB,GAAI,EAAJ,EAAWrb,EAAEtN,CAAb,CACA2oB,GAAI,EAAJ,EAAWrb,EAAErN,CAAb,CAEA,MAAO,KAAP,CAEH,CAjf6B,CAmf9BytB,WAAY,oBAAWhX,CAAX,CAAciX,iBAAd,CAAkC,CAE1C;AACA,GAAIhF,IAAK,KAAK/C,QAAd,CACIiD,GAAKnS,EAAEkP,QADX,CAGI+B,IAAMkB,GAAI,CAAJ,CAHV,CAGmBd,IAAMc,GAAI,CAAJ,CAHzB,CAGkCV,IAAMU,GAAI,CAAJ,CAHxC,CAGiDN,IAAMM,GAAI,CAAJ,CAHvD,CAIIjB,IAAMiB,GAAI,CAAJ,CAJV,CAImBb,IAAMa,GAAI,CAAJ,CAJzB,CAIkCT,IAAMS,GAAI,CAAJ,CAJxC,CAIiDL,IAAMK,GAAI,CAAJ,CAJvD,CAKIhB,IAAMgB,GAAI,CAAJ,CALV,CAKmBZ,IAAMY,GAAI,CAAJ,CALzB,CAKkCR,IAAMQ,GAAI,EAAJ,CALxC,CAKkDJ,IAAMI,GAAI,EAAJ,CALxD,CAMIf,IAAMe,GAAI,EAAJ,CANV,CAMoBX,IAAMW,GAAI,EAAJ,CAN1B,CAMoCP,IAAMO,GAAI,EAAJ,CAN1C,CAMoDH,IAAMG,GAAI,EAAJ,CAN1D,CAQI+E,IAAM3F,IAAMK,GAAN,CAAYE,GAAZ,CAAkBN,IAAMG,GAAN,CAAYG,GAA9B,CAAoCN,IAAME,GAAN,CAAYK,GAAhD,CAAsDT,IAAMM,GAAN,CAAYG,GAAlE,CAAwER,IAAMG,GAAN,CAAYM,GAApF,CAA0FV,IAAMK,GAAN,CAAYK,GARhH,CASImF,IAAM/F,IAAMO,GAAN,CAAYG,GAAZ,CAAkBX,IAAMS,GAAN,CAAYE,GAA9B,CAAoCV,IAAMM,GAAN,CAAYK,GAAhD,CAAsDb,IAAMU,GAAN,CAAYG,GAAlE,CAAwEZ,IAAMO,GAAN,CAAYM,GAApF,CAA0Fd,IAAMS,GAAN,CAAYK,GAThH,CAUIoF,IAAMjG,IAAMK,GAAN,CAAYM,GAAZ,CAAkBV,IAAMG,GAAN,CAAYO,GAA9B,CAAoCV,IAAME,GAAN,CAAYS,GAAhD,CAAsDb,IAAMM,GAAN,CAAYO,GAAlE,CAAwEZ,IAAMG,GAAN,CAAYU,GAApF,CAA0Fd,IAAMK,GAAN,CAAYS,GAVhH,CAWIqF,IAAMjG,IAAMG,GAAN,CAAYG,GAAZ,CAAkBP,IAAMK,GAAN,CAAYE,GAA9B,CAAoCN,IAAME,GAAN,CAAYK,GAAhD,CAAsDT,IAAMM,GAAN,CAAYG,GAAlE,CAAwER,IAAMG,GAAN,CAAYM,GAApF,CAA0FV,IAAMK,GAAN,CAAYK,GAXhH,CAaA,GAAI0F,KAAMrG,IAAMiG,GAAN,CAAY7F,IAAM8F,GAAlB,CAAwB1F,IAAM2F,GAA9B,CAAoCvF,IAAMwF,GAApD,CAEA,GAAKC,MAAQ,CAAb,CAAiB,CAEb,GAAIC,KAAM,oEAAV,CAEA,GAAKN,oBAAsB,IAA3B,CAAkC,CAE9B,KAAM,IAAI3I,MAAJ,CAAWiJ,GAAX,CAAN,CAEH,CAJD,IAIO,CAEHvpB,QAAQgK,IAAR,CAAcuf,GAAd,EAEH,CAED,MAAO,MAAKrF,QAAL,EAAP,CAEH,CAED,GAAIsF,QAAS,EAAIF,GAAjB,CAEArF,GAAI,CAAJ,EAAUiF,IAAMM,MAAhB,CACAvF,GAAI,CAAJ,EAAU,CAAET,IAAMG,GAAN,CAAYE,GAAZ,CAAkBN,IAAMK,GAAN,CAAYC,GAA9B,CAAoCL,IAAMC,GAAN,CAAYM,GAAhD,CAAsDV,IAAMO,GAAN,CAAYG,GAAlE,CAAwER,IAAME,GAAN,CAAYO,GAApF,CAA0FX,IAAMM,GAAN,CAAYK,GAAxG,EAAgHwF,MAA1H,CACAvF,GAAI,CAAJ,EAAU,CAAEX,IAAMM,GAAN,CAAYC,GAAZ,CAAkBL,IAAME,GAAN,CAAYG,GAA9B,CAAoCL,IAAMC,GAAN,CAAYK,GAAhD,CAAsDT,IAAMO,GAAN,CAAYE,GAAlE,CAAwER,IAAMG,GAAN,CAAYO,GAApF,CAA0FX,IAAMK,GAAN,CAAYM,GAAxG,EAAgHwF,MAA1H,CACAvF,GAAI,CAAJ,EAAU,CAAEV,IAAMG,GAAN,CAAYG,GAAZ,CAAkBP,IAAMK,GAAN,CAAYE,GAA9B,CAAoCN,IAAME,GAAN,CAAYK,GAAhD,CAAsDT,IAAMM,GAAN,CAAYG,GAAlE,CAAwER,IAAMG,GAAN,CAAYM,GAApF,CAA0FV,IAAMK,GAAN,CAAYK,GAAxG,EAAgHyF,MAA1H,CAEAvF,GAAI,CAAJ,EAAUkF,IAAMK,MAAhB,CACAvF,GAAI,CAAJ,EAAU,CAAEd,IAAMS,GAAN,CAAYC,GAAZ,CAAkBT,IAAMO,GAAN,CAAYE,GAA9B,CAAoCT,IAAMK,GAAN,CAAYM,GAAhD,CAAsDd,IAAMW,GAAN,CAAYG,GAAlE,CAAwEZ,IAAMM,GAAN,CAAYO,GAApF,CAA0Ff,IAAMU,GAAN,CAAYK,GAAxG,EAAgHwF,MAA1H,CACAvF,GAAI,CAAJ,EAAU,CAAEb,IAAMM,GAAN,CAAYG,GAAZ,CAAkBX,IAAMU,GAAN,CAAYC,GAA9B,CAAoCT,IAAMK,GAAN,CAAYK,GAAhD,CAAsDb,IAAMW,GAAN,CAAYE,GAAlE,CAAwEZ,IAAMO,GAAN,CAAYO,GAApF,CAA0Ff,IAAMS,GAAN,CAAYM,GAAxG,EAAgHwF,MAA1H,CACAvF,GAAI,CAAJ,EAAU,CAAEf,IAAMS,GAAN,CAAYE,GAAZ,CAAkBV,IAAMO,GAAN,CAAYG,GAA9B,CAAoCV,IAAMM,GAAN,CAAYK,GAAhD,CAAsDb,IAAMU,GAAN,CAAYG,GAAlE,CAAwEZ,IAAMO,GAAN,CAAYM,GAApF,CAA0Fd,IAAMS,GAAN,CAAYK,GAAxG,EAAgHyF,MAA1H,CAEAvF,GAAI,CAAJ,EAAUmF,IAAMI,MAAhB,CACAvF,GAAI,CAAJ,EAAU,CAAEb,IAAMG,GAAN,CAAYM,GAAZ,CAAkBV,IAAMK,GAAN,CAAYK,GAA9B,CAAoCT,IAAMC,GAAN,CAAYU,GAAhD,CAAsDd,IAAMO,GAAN,CAAYO,GAAlE,CAAwEZ,IAAME,GAAN,CAAYW,GAApF,CAA0Ff,IAAMM,GAAN,CAAYS,GAAxG,EAAgHwF,MAA1H,CACAvF,GAAI,EAAJ,EAAW,CAAEf,IAAMM,GAAN,CAAYK,GAAZ,CAAkBT,IAAME,GAAN,CAAYO,GAA9B,CAAoCT,IAAMC,GAAN,CAAYS,GAAhD,CAAsDb,IAAMO,GAAN,CAAYM,GAAlE,CAAwEZ,IAAMG,GAAN,CAAYW,GAApF,CAA0Ff,IAAMK,GAAN,CAAYU,GAAxG,EAAgHwF,MAA3H,CACAvF,GAAI,EAAJ,EAAW,CAAEd,IAAMG,GAAN,CAAYO,GAAZ,CAAkBX,IAAMK,GAAN,CAAYM,GAA9B,CAAoCV,IAAME,GAAN,CAAYS,GAAhD,CAAsDb,IAAMM,GAAN,CAAYO,GAAlE,CAAwEZ,IAAMG,GAAN,CAAYU,GAApF,CAA0Fd,IAAMK,GAAN,CAAYS,GAAxG,EAAgHyF,MAA3H,CAEAvF,GAAI,EAAJ,EAAWoF,IAAMG,MAAjB,CACAvF,GAAI,EAAJ,EAAW,CAAEd,IAAMK,GAAN,CAAYC,GAAZ,CAAkBL,IAAMG,GAAN,CAAYE,GAA9B,CAAoCL,IAAMC,GAAN,CAAYM,GAAhD,CAAsDV,IAAMO,GAAN,CAAYG,GAAlE,CAAwER,IAAME,GAAN,CAAYO,GAApF,CAA0FX,IAAMM,GAAN,CAAYK,GAAxG,EAAgH4F,MAA3H,CACAvF,GAAI,EAAJ,EAAW,CAAEb,IAAME,GAAN,CAAYG,GAAZ,CAAkBP,IAAMM,GAAN,CAAYC,GAA9B,CAAoCL,IAAMC,GAAN,CAAYK,GAAhD,CAAsDT,IAAMO,GAAN,CAAYE,GAAlE,CAAwER,IAAMG,GAAN,CAAYO,GAApF,CAA0FX,IAAMK,GAAN,CAAYM,GAAxG,EAAgH4F,MAA3H,CACAvF,GAAI,EAAJ,EAAW,CAAEf,IAAMK,GAAN,CAAYE,GAAZ,CAAkBN,IAAMG,GAAN,CAAYG,GAA9B,CAAoCN,IAAME,GAAN,CAAYK,GAAhD,CAAsDT,IAAMM,GAAN,CAAYG,GAAlE,CAAwER,IAAMG,GAAN,CAAYM,GAApF,CAA0FV,IAAMK,GAAN,CAAYK,GAAxG,EAAgH6F,MAA3H,CAEA,MAAO,KAAP,CAEH,CA/iB6B,CAijB9BvjB,MAAO,eAAW2C,CAAX,CAAe,CAElB,GAAIqb,IAAK,KAAK/C,QAAd,CACA,GAAI7lB,GAAIuN,EAAEvN,CAAV,CAAaC,EAAIsN,EAAEtN,CAAnB,CAAsBC,EAAIqN,EAAErN,CAA5B,CAEA0oB,GAAI,CAAJ,GAAW5oB,CAAX,CAAc4oB,GAAI,CAAJ,GAAW3oB,CAAX,CAAc2oB,GAAI,CAAJ,GAAW1oB,CAAX,CAC5B0oB,GAAI,CAAJ,GAAW5oB,CAAX,CAAc4oB,GAAI,CAAJ,GAAW3oB,CAAX,CAAc2oB,GAAI,CAAJ,GAAW1oB,CAAX,CAC5B0oB,GAAI,CAAJ,GAAW5oB,CAAX,CAAc4oB,GAAI,CAAJ,GAAW3oB,CAAX,CAAc2oB,GAAI,EAAJ,GAAY1oB,CAAZ,CAC5B0oB,GAAI,CAAJ,GAAW5oB,CAAX,CAAc4oB,GAAI,CAAJ,GAAW3oB,CAAX,CAAc2oB,GAAI,EAAJ,GAAY1oB,CAAZ,CAE5B,MAAO,KAAP,CAEH,CA7jB6B,CA+jB9BkuB,kBAAmB,4BAAY,CAE3B,GAAIxF,IAAK,KAAK/C,QAAd,CAEA,GAAIwI,UAAWzF,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAoBA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAA9B,CAAwCA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAjE,CACA,GAAI0F,UAAW1F,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAoBA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAA9B,CAAwCA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAjE,CACA,GAAI2F,UAAW3F,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAAV,CAAoBA,GAAI,CAAJ,EAAUA,GAAI,CAAJ,CAA9B,CAAwCA,GAAI,EAAJ,EAAWA,GAAI,EAAJ,CAAlE,CAEA,MAAOllB,MAAK0M,IAAL,CAAW1M,KAAK8G,GAAL,CAAU6jB,QAAV,CAAoBC,QAApB,CAA8BC,QAA9B,CAAX,CAAP,CAEH,CAzkB6B,CA2kB9BC,gBAAiB,yBAAWxuB,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB,CAElC,KAAKW,GAAL,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAEab,CAFb,CAGI,CAHJ,CAGO,CAHP,CAGU,CAHV,CAGaC,CAHb,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,CAIaC,CAJb,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CAxlB6B,CA0lB9BuuB,cAAe,uBAAW3lB,KAAX,CAAmB,CAE9B,GAAI0e,GAAI9jB,KAAKyS,GAAL,CAAUrN,KAAV,CAAR,CAA2B2N,EAAI/S,KAAK0S,GAAL,CAAUtN,KAAV,CAA/B,CAEA,KAAKjI,GAAL,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAEa,CAFb,CAGI,CAHJ,CAGO2mB,CAHP,CAGU,CAAE/Q,CAHZ,CAGe,CAHf,CAII,CAJJ,CAIOA,CAJP,CAIU+Q,CAJV,CAIa,CAJb,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CAzmB6B,CA2mB9BkH,cAAe,uBAAW5lB,KAAX,CAAmB,CAE9B,GAAI0e,GAAI9jB,KAAKyS,GAAL,CAAUrN,KAAV,CAAR,CAA2B2N,EAAI/S,KAAK0S,GAAL,CAAUtN,KAAV,CAA/B,CAEA,KAAKjI,GAAL,CAEI2mB,CAFJ,CAEO,CAFP,CAEU/Q,CAFV,CAEa,CAFb,CAGI,CAHJ,CAGO,CAHP,CAGU,CAHV,CAGa,CAHb,CAII,CAAEA,CAJN,CAIS,CAJT,CAIY+Q,CAJZ,CAIe,CAJf,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CA1nB6B,CA4nB9BmH,cAAe,uBAAW7lB,KAAX,CAAmB,CAE9B,GAAI0e,GAAI9jB,KAAKyS,GAAL,CAAUrN,KAAV,CAAR,CAA2B2N,EAAI/S,KAAK0S,GAAL,CAAUtN,KAAV,CAA/B,CAEA,KAAKjI,GAAL,CAEI2mB,CAFJ,CAEO,CAAE/Q,CAFT,CAEY,CAFZ,CAEe,CAFf,CAGIA,CAHJ,CAGO+Q,CAHP,CAGU,CAHV,CAGa,CAHb,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,CAIa,CAJb,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CA3oB6B,CA6oB9BoH,iBAAkB,0BAAWC,IAAX,CAAiBzhB,KAAjB,CAAyB,CAEvC;AAEA,GAAIoa,GAAI9jB,KAAKyS,GAAL,CAAU/I,KAAV,CAAR,CACA,GAAIqJ,GAAI/S,KAAK0S,GAAL,CAAUhJ,KAAV,CAAR,CACA,GAAIqK,GAAI,EAAI+P,CAAZ,CACA,GAAIxnB,GAAI6uB,KAAK7uB,CAAb,CAAgBC,EAAI4uB,KAAK5uB,CAAzB,CAA4BC,EAAI2uB,KAAK3uB,CAArC,CACA,GAAI4uB,IAAKrX,EAAIzX,CAAb,CAAgB+uB,GAAKtX,EAAIxX,CAAzB,CAEA,KAAKY,GAAL,CAEIiuB,GAAK9uB,CAAL,CAASwnB,CAFb,CAEgBsH,GAAK7uB,CAAL,CAASwW,EAAIvW,CAF7B,CAEgC4uB,GAAK5uB,CAAL,CAASuW,EAAIxW,CAF7C,CAEgD,CAFhD,CAGI6uB,GAAK7uB,CAAL,CAASwW,EAAIvW,CAHjB,CAGoB6uB,GAAK9uB,CAAL,CAASunB,CAH7B,CAGgCuH,GAAK7uB,CAAL,CAASuW,EAAIzW,CAH7C,CAGgD,CAHhD,CAII8uB,GAAK5uB,CAAL,CAASuW,EAAIxW,CAJjB,CAIoB8uB,GAAK7uB,CAAL,CAASuW,EAAIzW,CAJjC,CAIoCyX,EAAIvX,CAAJ,CAAQA,CAAR,CAAYsnB,CAJhD,CAImD,CAJnD,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CAlqB6B,CAoqB9BwH,UAAW,mBAAWhvB,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB,CAE5B,KAAKW,GAAL,CAEIb,CAFJ,CAEO,CAFP,CAEU,CAFV,CAEa,CAFb,CAGI,CAHJ,CAGOC,CAHP,CAGU,CAHV,CAGa,CAHb,CAII,CAJJ,CAIO,CAJP,CAIUC,CAJV,CAIa,CAJb,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CAjrB6B,CAmrB9B+uB,UAAW,mBAAWjvB,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB,CAE5B,KAAKW,GAAL,CAEI,CAFJ,CAEOZ,CAFP,CAEUC,CAFV,CAEa,CAFb,CAGIF,CAHJ,CAGO,CAHP,CAGUE,CAHV,CAGa,CAHb,CAIIF,CAJJ,CAIOC,CAJP,CAIU,CAJV,CAIa,CAJb,CAKI,CALJ,CAKO,CALP,CAKU,CALV,CAKa,CALb,EASA,MAAO,KAAP,CAEH,CAhsB6B,CAksB9B6qB,QAAS,iBAAW/qB,QAAX,CAAqBqL,UAArB,CAAiCR,KAAjC,CAAyC,CAE9C,GAAIge,IAAK,KAAK/C,QAAd,CAEA,GAAI7lB,GAAIoL,WAAW8jB,EAAnB,CAAuBjvB,EAAImL,WAAW+jB,EAAtC,CAA0CjvB,EAAIkL,WAAWgkB,EAAzD,CAA6DjK,EAAI/Z,WAAWikB,EAA5E,CACA,GAAIC,IAAKtvB,EAAIA,CAAb,CAAgBuvB,GAAKtvB,EAAIA,CAAzB,CAA4BuvB,GAAKtvB,EAAIA,CAArC,CACA,GAAIuvB,IAAKzvB,EAAIsvB,EAAb,CAAiBI,GAAK1vB,EAAIuvB,EAA1B,CAA8BI,GAAK3vB,EAAIwvB,EAAvC,CACA,GAAII,IAAK3vB,EAAIsvB,EAAb,CAAiBM,GAAK5vB,EAAIuvB,EAA1B,CAA8BM,GAAK5vB,EAAIsvB,EAAvC,CACA,GAAIO,IAAK5K,EAAImK,EAAb,CAAiBU,GAAK7K,EAAIoK,EAA1B,CAA8BU,GAAK9K,EAAIqK,EAAvC,CAEA,GAAIU,IAAKtlB,MAAM5K,CAAf,CAAkBmwB,GAAKvlB,MAAM3K,CAA7B,CAAgCmwB,GAAKxlB,MAAM1K,CAA3C,CAEA0oB,GAAI,CAAJ,EAAU,CAAE,GAAMgH,GAAKE,EAAX,CAAF,EAAsBI,EAAhC,CACAtH,GAAI,CAAJ,EAAU,CAAE8G,GAAKO,EAAP,EAAcC,EAAxB,CACAtH,GAAI,CAAJ,EAAU,CAAE+G,GAAKK,EAAP,EAAcE,EAAxB,CACAtH,GAAI,CAAJ,EAAU,CAAV,CAEAA,GAAI,CAAJ,EAAU,CAAE8G,GAAKO,EAAP,EAAcE,EAAxB,CACAvH,GAAI,CAAJ,EAAU,CAAE,GAAM6G,GAAKK,EAAX,CAAF,EAAsBK,EAAhC,CACAvH,GAAI,CAAJ,EAAU,CAAEiH,GAAKE,EAAP,EAAcI,EAAxB,CACAvH,GAAI,CAAJ,EAAU,CAAV,CAEAA,GAAI,CAAJ,EAAU,CAAE+G,GAAKK,EAAP,EAAcI,EAAxB,CACAxH,GAAI,CAAJ,EAAU,CAAEiH,GAAKE,EAAP,EAAcK,EAAxB,CACAxH,GAAI,EAAJ,EAAW,CAAE,GAAM6G,GAAKG,EAAX,CAAF,EAAsBQ,EAAjC,CACAxH,GAAI,EAAJ,EAAW,CAAX,CAEAA,GAAI,EAAJ,EAAW7oB,SAASC,CAApB,CACA4oB,GAAI,EAAJ,EAAW7oB,SAASE,CAApB,CACA2oB,GAAI,EAAJ,EAAW7oB,SAASG,CAApB,CACA0oB,GAAI,EAAJ,EAAW,CAAX,CAEA,MAAO,KAAP,CAEH,CApuB6B,CAsuB9ByH,UAAW,UAAY,CAEnB,GAAIC,QAAS,GAAIhqB,QAAJ,EAAb,CACA,GAAIkI,QAAS,GAAIiZ,QAAJ,EAAb,CAEA,MAAO,SAAS4I,UAAT,CAAoBtwB,QAApB,CAA8BqL,UAA9B,CAA0CR,KAA1C,CAAkD,CAErD,GAAIge,IAAK,KAAK/C,QAAd,CAEA,GAAIqK,IAAKI,OAAOzvB,GAAP,CAAY+nB,GAAI,CAAJ,CAAZ,CAAqBA,GAAI,CAAJ,CAArB,CAA8BA,GAAI,CAAJ,CAA9B,EAAwCxa,MAAxC,EAAT,CACA,GAAI+hB,IAAKG,OAAOzvB,GAAP,CAAY+nB,GAAI,CAAJ,CAAZ,CAAqBA,GAAI,CAAJ,CAArB,CAA8BA,GAAI,CAAJ,CAA9B,EAAwCxa,MAAxC,EAAT,CACA,GAAIgiB,IAAKE,OAAOzvB,GAAP,CAAY+nB,GAAI,CAAJ,CAAZ,CAAqBA,GAAI,CAAJ,CAArB,CAA8BA,GAAI,EAAJ,CAA9B,EAAyCxa,MAAzC,EAAT,CAEA;AACA,GAAI6f,KAAM,KAAKT,WAAL,EAAV,CACA,GAAKS,IAAM,CAAX,CAAeiC,GAAK,CAAEA,EAAP,CAEfnwB,SAASC,CAAT,CAAa4oB,GAAI,EAAJ,CAAb,CACA7oB,SAASE,CAAT,CAAa2oB,GAAI,EAAJ,CAAb,CACA7oB,SAASG,CAAT,CAAa0oB,GAAI,EAAJ,CAAb,CAEA;AACApa,OAAOvF,IAAP,CAAa,IAAb,EAEA,GAAIsnB,OAAQ,EAAIL,EAAhB,CACA,GAAIM,OAAQ,EAAIL,EAAhB,CACA,GAAIM,OAAQ,EAAIL,EAAhB,CAEA5hB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB0K,KAAxB,CACA/hB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB0K,KAAxB,CACA/hB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB0K,KAAxB,CAEA/hB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB2K,KAAxB,CACAhiB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB2K,KAAxB,CACAhiB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB2K,KAAxB,CAEAhiB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB4K,KAAxB,CACAjiB,OAAOqX,QAAP,CAAiB,CAAjB,GAAwB4K,KAAxB,CACAjiB,OAAOqX,QAAP,CAAiB,EAAjB,GAAyB4K,KAAzB,CAEArlB,WAAWslB,qBAAX,CAAkCliB,MAAlC,EAEA5D,MAAM5K,CAAN,CAAUkwB,EAAV,CACAtlB,MAAM3K,CAAN,CAAUkwB,EAAV,CACAvlB,MAAM1K,CAAN,CAAUkwB,EAAV,CAEA,MAAO,KAAP,CAEH,CA3CD,CA6CH,CAlDU,EAtuBmB,CA0xB9BO,gBAAiB,yBAAW5vB,IAAX,CAAiBC,KAAjB,CAAwBC,GAAxB,CAA6BC,MAA7B,CAAqCC,IAArC,CAA2CyvB,GAA3C,CAAiD,CAE9D,GAAKA,MAAQxqB,SAAb,CAAyB,CAErBzB,QAAQgK,IAAR,CAAc,sGAAd,EAEH,CAED,GAAIia,IAAK,KAAK/C,QAAd,CACA,GAAI7lB,GAAI,EAAImB,IAAJ,EAAaH,MAAQD,IAArB,CAAR,CACA,GAAId,GAAI,EAAIkB,IAAJ,EAAaF,IAAMC,MAAnB,CAAR,CAEA,GAAI0W,GAAI,CAAE5W,MAAQD,IAAV,GAAqBC,MAAQD,IAA7B,CAAR,CACA,GAAIkW,GAAI,CAAEhW,IAAMC,MAAR,GAAqBD,IAAMC,MAA3B,CAAR,CACA,GAAIsmB,GAAI,EAAIoJ,IAAMzvB,IAAV,GAAqByvB,IAAMzvB,IAA3B,CAAR,CACA,GAAIyoB,GAAI,CAAE,CAAF,CAAMgH,GAAN,CAAYzvB,IAAZ,EAAqByvB,IAAMzvB,IAA3B,CAAR,CAEAynB,GAAI,CAAJ,EAAU5oB,CAAV,CAAa4oB,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAUhR,CAAV,CAAagR,GAAI,EAAJ,EAAW,CAAX,CACvCA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU3oB,CAAV,CAAa2oB,GAAI,CAAJ,EAAU3R,CAAV,CAAa2R,GAAI,EAAJ,EAAW,CAAX,CACvCA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAWpB,CAAX,CAAcoB,GAAI,EAAJ,EAAWgB,CAAX,CACxChB,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE,CAAb,CAAgBA,GAAI,EAAJ,EAAW,CAAX,CAE1C,MAAO,KAAP,CAEH,CAlzB6B,CAozB9BiI,iBAAkB,0BAAW9vB,IAAX,CAAiBC,KAAjB,CAAwBC,GAAxB,CAA6BC,MAA7B,CAAqCC,IAArC,CAA2CyvB,GAA3C,CAAiD,CAE/D,GAAIhI,IAAK,KAAK/C,QAAd,CACA,GAAIV,GAAI,KAAQnkB,MAAQD,IAAhB,CAAR,CACA,GAAI+vB,GAAI,KAAQ7vB,IAAMC,MAAd,CAAR,CACA,GAAI6vB,GAAI,KAAQH,IAAMzvB,IAAd,CAAR,CAEA,GAAInB,GAAI,CAAEgB,MAAQD,IAAV,EAAmBokB,CAA3B,CACA,GAAIllB,GAAI,CAAEgB,IAAMC,MAAR,EAAmB4vB,CAA3B,CACA,GAAI5wB,GAAI,CAAE0wB,IAAMzvB,IAAR,EAAiB4vB,CAAzB,CAEAnI,GAAI,CAAJ,EAAU,EAAIzD,CAAd,CAAiByD,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE5oB,CAAb,CAC3C4oB,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,EAAIkI,CAAd,CAAiBlI,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE3oB,CAAb,CAC3C2oB,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAE,CAAF,CAAMmI,CAAjB,CAAoBnI,GAAI,EAAJ,EAAW,CAAE1oB,CAAb,CAC9C0oB,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,CAAJ,EAAU,CAAV,CAAaA,GAAI,EAAJ,EAAW,CAAX,CAAcA,GAAI,EAAJ,EAAW,CAAX,CAExC,MAAO,KAAP,CAEH,CAt0B6B,CAw0B9B5B,OAAQ,gBAAWxY,MAAX,CAAoB,CAExB,GAAIoa,IAAK,KAAK/C,QAAd,CACA,GAAIiD,IAAKta,OAAOqX,QAAhB,CAEA,IAAM,GAAI7T,GAAI,CAAd,CAAiBA,EAAI,EAArB,CAAyBA,GAAzB,CAAgC,CAE5B,GAAK4W,GAAI5W,CAAJ,IAAY8W,GAAI9W,CAAJ,CAAjB,CAA2B,MAAO,MAAP,CAE9B,CAED,MAAO,KAAP,CAEH,CAr1B6B,CAu1B9BiV,UAAW,mBAAWtN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAElC,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,IAAM,GAAIuI,GAAI,CAAd,CAAiBA,EAAI,EAArB,CAAyBA,GAAzB,CAAgC,CAE5B,KAAK6T,QAAL,CAAe7T,CAAf,EAAqB2H,MAAO3H,EAAIvI,MAAX,CAArB,CAEH,CAED,MAAO,KAAP,CAEH,CAn2B6B,CAq2B9Byd,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,GAAImf,IAAK,KAAK/C,QAAd,CAEAlM,MAAOlQ,MAAP,EAAkBmf,GAAI,CAAJ,CAAlB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CAEAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CAEAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,EAAhB,EAAuBmf,GAAI,EAAJ,CAAvB,CACAjP,MAAOlQ,OAAS,EAAhB,EAAuBmf,GAAI,EAAJ,CAAvB,CAEAjP,MAAOlQ,OAAS,EAAhB,EAAuBmf,GAAI,EAAJ,CAAvB,CACAjP,MAAOlQ,OAAS,EAAhB,EAAuBmf,GAAI,EAAJ,CAAvB,CACAjP,MAAOlQ,OAAS,EAAhB,EAAuBmf,GAAI,EAAJ,CAAvB,CACAjP,MAAOlQ,OAAS,EAAhB,EAAuBmf,GAAI,EAAJ,CAAvB,CAEA,MAAOjP,MAAP,CAEH,CAl4B6B,CAAlC,EAs4BA;;;;;OAOA,QAAShQ,WAAT,CAAqB3J,CAArB,CAAwBC,CAAxB,CAA2BC,CAA3B,CAA8BilB,CAA9B,CAAkC,CAE9B,KAAK+J,EAAL,CAAUlvB,GAAK,CAAf,CACA,KAAKmvB,EAAL,CAAUlvB,GAAK,CAAf,CACA,KAAKmvB,EAAL,CAAUlvB,GAAK,CAAf,CACA,KAAKmvB,EAAL,CAAYlK,IAAM/e,SAAR,CAAsB+e,CAAtB,CAA0B,CAApC,CAEH,CAEDrU,OAAO4B,MAAP,CAAe/I,UAAf,CAA2B,CAEvBqnB,MAAO,eAAWC,EAAX,CAAeC,EAAf,CAAmBC,EAAnB,CAAuB1Z,CAAvB,CAA2B,CAE9B,MAAO0Z,IAAGloB,IAAH,CAASgoB,EAAT,EAAcD,KAAd,CAAqBE,EAArB,CAAyBzZ,CAAzB,CAAP,CAEH,CANsB,CAQvB2Z,UAAW,mBAAWC,GAAX,CAAgBC,SAAhB,CAA2BC,IAA3B,CAAiCC,UAAjC,CAA6CC,IAA7C,CAAmDC,UAAnD,CAA+Dja,CAA/D,CAAmE,CAE1E;AAEA,GAAIka,IAAKJ,KAAMC,WAAa,CAAnB,CAAT,CACII,GAAKL,KAAMC,WAAa,CAAnB,CADT,CAEIK,GAAKN,KAAMC,WAAa,CAAnB,CAFT,CAGIM,GAAKP,KAAMC,WAAa,CAAnB,CAHT,CAKIO,GAAKN,KAAMC,WAAa,CAAnB,CALT,CAMIM,GAAKP,KAAMC,WAAa,CAAnB,CANT,CAOIO,GAAKR,KAAMC,WAAa,CAAnB,CAPT,CAQIQ,GAAKT,KAAMC,WAAa,CAAnB,CART,CAUA,GAAKI,KAAOI,EAAP,EAAaP,KAAOI,EAApB,EAA0BH,KAAOI,EAAjC,EAAuCH,KAAOI,EAAnD,CAAwD,CAEpD,GAAIxb,GAAI,EAAIgB,CAAZ,CAEItB,IAAMwb,GAAKI,EAAL,CAAUH,GAAKI,EAAf,CAAoBH,GAAKI,EAAzB,CAA8BH,GAAKI,EAF7C,CAIIC,IAAQhc,KAAO,CAAP,CAAW,CAAX,CAAe,CAAE,CAJ7B,CAKIic,OAAS,EAAIjc,IAAMA,GALvB,CAOA;AACA,GAAKic,OAAS3Z,OAAOC,OAArB,CAA+B,CAE3B,GAAItC,KAAM1S,KAAK0M,IAAL,CAAWgiB,MAAX,CAAV,CACIC,IAAM3uB,KAAK+iB,KAAL,CAAYrQ,GAAZ,CAAiBD,IAAMgc,GAAvB,CADV,CAGA1b,EAAI/S,KAAK0S,GAAL,CAAUK,EAAI4b,GAAd,EAAsBjc,GAA1B,CACAqB,EAAI/T,KAAK0S,GAAL,CAAUqB,EAAI4a,GAAd,EAAsBjc,GAA1B,CAEH,CAED,GAAIkc,MAAO7a,EAAI0a,GAAf,CAEAR,GAAKA,GAAKlb,CAAL,CAASsb,GAAKO,IAAnB,CACAV,GAAKA,GAAKnb,CAAL,CAASub,GAAKM,IAAnB,CACAT,GAAKA,GAAKpb,CAAL,CAASwb,GAAKK,IAAnB,CACAR,GAAKA,GAAKrb,CAAL,CAASyb,GAAKI,IAAnB,CAEA;AACA,GAAK7b,IAAM,EAAIgB,CAAf,CAAmB,CAEf,GAAIb,GAAI,EAAIlT,KAAK0M,IAAL,CAAWuhB,GAAKA,EAAL,CAAUC,GAAKA,EAAf,CAAoBC,GAAKA,EAAzB,CAA8BC,GAAKA,EAA9C,CAAZ,CAEAH,IAAM/a,CAAN,CACAgb,IAAMhb,CAAN,CACAib,IAAMjb,CAAN,CACAkb,IAAMlb,CAAN,CAEH,CAEJ,CAEDya,IAAKC,SAAL,EAAmBK,EAAnB,CACAN,IAAKC,UAAY,CAAjB,EAAuBM,EAAvB,CACAP,IAAKC,UAAY,CAAjB,EAAuBO,EAAvB,CACAR,IAAKC,UAAY,CAAjB,EAAuBQ,EAAvB,CAEH,CApEsB,CAA3B,EAwEAhhB,OAAOI,gBAAP,CAAyBvH,WAAWkH,SAApC,CAA+C,CAE3C7Q,EAAG,CAECoR,IAAK,cAAY,CAEb,MAAO,MAAK8d,EAAZ,CAEH,CANF,CAQCruB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK4d,EAAL,CAAU5d,KAAV,CACA,KAAKihB,gBAAL,GAEH,CAbF,CAFwC,CAmB3CtyB,EAAG,CAECmR,IAAK,cAAY,CAEb,MAAO,MAAK+d,EAAZ,CAEH,CANF,CAQCtuB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK6d,EAAL,CAAU7d,KAAV,CACA,KAAKihB,gBAAL,GAEH,CAbF,CAnBwC,CAoC3CryB,EAAG,CAECkR,IAAK,cAAY,CAEb,MAAO,MAAKge,EAAZ,CAEH,CANF,CAQCvuB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK8d,EAAL,CAAU9d,KAAV,CACA,KAAKihB,gBAAL,GAEH,CAbF,CApCwC,CAqD3CpN,EAAG,CAEC/T,IAAK,cAAY,CAEb,MAAO,MAAKie,EAAZ,CAEH,CANF,CAQCxuB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK+d,EAAL,CAAU/d,KAAV,CACA,KAAKihB,gBAAL,GAEH,CAbF,CArDwC,CAA/C,EAwEAzhB,OAAO4B,MAAP,CAAe/I,WAAWkH,SAA1B,CAAqC,CAEjChQ,IAAK,aAAWb,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAoBilB,CAApB,CAAwB,CAEzB,KAAK+J,EAAL,CAAUlvB,CAAV,CACA,KAAKmvB,EAAL,CAAUlvB,CAAV,CACA,KAAKmvB,EAAL,CAAUlvB,CAAV,CACA,KAAKmvB,EAAL,CAAUlK,CAAV,CAEA,KAAKoN,gBAAL,GAEA,MAAO,KAAP,CAEH,CAbgC,CAejCzvB,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAKie,EAA3B,CAA+B,KAAKC,EAApC,CAAwC,KAAKC,EAA7C,CAAiD,KAAKC,EAAtD,CAAP,CAEH,CAnBgC,CAqBjCpmB,KAAM,cAAWmC,UAAX,CAAwB,CAE1B,KAAK8jB,EAAL,CAAU9jB,WAAWpL,CAArB,CACA,KAAKmvB,EAAL,CAAU/jB,WAAWnL,CAArB,CACA,KAAKmvB,EAAL,CAAUhkB,WAAWlL,CAArB,CACA,KAAKmvB,EAAL,CAAUjkB,WAAW+Z,CAArB,CAEA,KAAKoN,gBAAL,GAEA,MAAO,KAAP,CAEH,CAhCgC,CAkCjCC,aAAc,sBAAW9I,KAAX,CAAkBvlB,MAAlB,CAA2B,CAErC,GAAK,EAAIulB,OAASA,MAAMC,OAAnB,CAAL,CAAoC,CAEhC,KAAM,IAAI1E,MAAJ,CAAW,kGAAX,CAAN,CAEH,CAED,GAAIjlB,GAAI0pB,MAAMwF,EAAd,CAAkBjvB,EAAIypB,MAAMyF,EAA5B,CAAgCjvB,EAAIwpB,MAAM0F,EAA1C,CAA8CvF,MAAQH,MAAMG,KAA5D,CAEA;AACA;AACA;AAEA,GAAI1T,KAAMzS,KAAKyS,GAAf,CACA,GAAIC,KAAM1S,KAAK0S,GAAf,CAEA,GAAIqc,IAAKtc,IAAKnW,EAAI,CAAT,CAAT,CACA,GAAI0yB,IAAKvc,IAAKlW,EAAI,CAAT,CAAT,CACA,GAAI0yB,IAAKxc,IAAKjW,EAAI,CAAT,CAAT,CAEA,GAAI0yB,IAAKxc,IAAKpW,EAAI,CAAT,CAAT,CACA,GAAI6yB,IAAKzc,IAAKnW,EAAI,CAAT,CAAT,CACA,GAAI6yB,IAAK1c,IAAKlW,EAAI,CAAT,CAAT,CAEA,GAAK2pB,QAAU,KAAf,CAAuB,CAEnB,KAAKqF,EAAL,CAAU0D,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CACA,KAAK3D,EAAL,CAAUsD,GAAKI,EAAL,CAAUF,EAAV,CAAeC,GAAKF,EAAL,CAAUI,EAAnC,CACA,KAAK1D,EAAL,CAAUqD,GAAKC,EAAL,CAAUI,EAAV,CAAeF,GAAKC,EAAL,CAAUF,EAAnC,CACA,KAAKtD,EAAL,CAAUoD,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CAEH,CAPD,IAOO,IAAKjJ,QAAU,KAAf,CAAuB,CAE1B,KAAKqF,EAAL,CAAU0D,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CACA,KAAK3D,EAAL,CAAUsD,GAAKI,EAAL,CAAUF,EAAV,CAAeC,GAAKF,EAAL,CAAUI,EAAnC,CACA,KAAK1D,EAAL,CAAUqD,GAAKC,EAAL,CAAUI,EAAV,CAAeF,GAAKC,EAAL,CAAUF,EAAnC,CACA,KAAKtD,EAAL,CAAUoD,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CAEH,CAPM,IAOA,IAAKjJ,QAAU,KAAf,CAAuB,CAE1B,KAAKqF,EAAL,CAAU0D,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CACA,KAAK3D,EAAL,CAAUsD,GAAKI,EAAL,CAAUF,EAAV,CAAeC,GAAKF,EAAL,CAAUI,EAAnC,CACA,KAAK1D,EAAL,CAAUqD,GAAKC,EAAL,CAAUI,EAAV,CAAeF,GAAKC,EAAL,CAAUF,EAAnC,CACA,KAAKtD,EAAL,CAAUoD,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CAEH,CAPM,IAOA,IAAKjJ,QAAU,KAAf,CAAuB,CAE1B,KAAKqF,EAAL,CAAU0D,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CACA,KAAK3D,EAAL,CAAUsD,GAAKI,EAAL,CAAUF,EAAV,CAAeC,GAAKF,EAAL,CAAUI,EAAnC,CACA,KAAK1D,EAAL,CAAUqD,GAAKC,EAAL,CAAUI,EAAV,CAAeF,GAAKC,EAAL,CAAUF,EAAnC,CACA,KAAKtD,EAAL,CAAUoD,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CAEH,CAPM,IAOA,IAAKjJ,QAAU,KAAf,CAAuB,CAE1B,KAAKqF,EAAL,CAAU0D,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CACA,KAAK3D,EAAL,CAAUsD,GAAKI,EAAL,CAAUF,EAAV,CAAeC,GAAKF,EAAL,CAAUI,EAAnC,CACA,KAAK1D,EAAL,CAAUqD,GAAKC,EAAL,CAAUI,EAAV,CAAeF,GAAKC,EAAL,CAAUF,EAAnC,CACA,KAAKtD,EAAL,CAAUoD,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CAEH,CAPM,IAOA,IAAKjJ,QAAU,KAAf,CAAuB,CAE1B,KAAKqF,EAAL,CAAU0D,GAAKF,EAAL,CAAUC,EAAV,CAAeF,GAAKI,EAAL,CAAUC,EAAnC,CACA,KAAK3D,EAAL,CAAUsD,GAAKI,EAAL,CAAUF,EAAV,CAAeC,GAAKF,EAAL,CAAUI,EAAnC,CACA,KAAK1D,EAAL,CAAUqD,GAAKC,EAAL,CAAUI,EAAV,CAAeF,GAAKC,EAAL,CAAUF,EAAnC,CACA,KAAKtD,EAAL,CAAUoD,GAAKC,EAAL,CAAUC,EAAV,CAAeC,GAAKC,EAAL,CAAUC,EAAnC,CAEH,CAED,GAAK3uB,SAAW,KAAhB,CAAwB,KAAKouB,gBAAL,GAExB,MAAO,KAAP,CAEH,CA3GgC,CA6GjCQ,iBAAkB,0BAAWlE,IAAX,CAAiBzhB,KAAjB,CAAyB,CAEvC;AAEA;AAEA,GAAI4lB,WAAY5lB,MAAQ,CAAxB,CAA2BqJ,EAAI/S,KAAK0S,GAAL,CAAU4c,SAAV,CAA/B,CAEA,KAAK9D,EAAL,CAAUL,KAAK7uB,CAAL,CAASyW,CAAnB,CACA,KAAK0Y,EAAL,CAAUN,KAAK5uB,CAAL,CAASwW,CAAnB,CACA,KAAK2Y,EAAL,CAAUP,KAAK3uB,CAAL,CAASuW,CAAnB,CACA,KAAK4Y,EAAL,CAAU3rB,KAAKyS,GAAL,CAAU6c,SAAV,CAAV,CAEA,KAAKT,gBAAL,GAEA,MAAO,KAAP,CAEH,CA9HgC,CAgIjC7B,sBAAuB,+BAAW/Z,CAAX,CAAe,CAElC;AAEA;AAEA,GAAIiS,IAAKjS,EAAEkP,QAAX,CAEIoN,IAAMrK,GAAI,CAAJ,CAFV,CAEmBsK,IAAMtK,GAAI,CAAJ,CAFzB,CAEkCuK,IAAMvK,GAAI,CAAJ,CAFxC,CAGIwK,IAAMxK,GAAI,CAAJ,CAHV,CAGmByK,IAAMzK,GAAI,CAAJ,CAHzB,CAGkC0K,IAAM1K,GAAI,CAAJ,CAHxC,CAII2K,IAAM3K,GAAI,CAAJ,CAJV,CAImB4K,IAAM5K,GAAI,CAAJ,CAJzB,CAIkC6K,IAAM7K,GAAI,EAAJ,CAJxC,CAMI8K,MAAQT,IAAMI,GAAN,CAAYI,GANxB,CAOIhd,CAPJ,CASA,GAAKid,MAAQ,CAAb,CAAiB,CAEbjd,EAAI,IAAM/S,KAAK0M,IAAL,CAAWsjB,MAAQ,GAAnB,CAAV,CAEA,KAAKrE,EAAL,CAAU,KAAO5Y,CAAjB,CACA,KAAKyY,EAAL,CAAU,CAAEsE,IAAMF,GAAR,EAAgB7c,CAA1B,CACA,KAAK0Y,EAAL,CAAU,CAAEgE,IAAMI,GAAR,EAAgB9c,CAA1B,CACA,KAAK2Y,EAAL,CAAU,CAAEgE,IAAMF,GAAR,EAAgBzc,CAA1B,CAEH,CATD,IASO,IAAKwc,IAAMI,GAAN,EAAaJ,IAAMQ,GAAxB,CAA8B,CAEjChd,EAAI,IAAM/S,KAAK0M,IAAL,CAAW,IAAM6iB,GAAN,CAAYI,GAAZ,CAAkBI,GAA7B,CAAV,CAEA,KAAKpE,EAAL,CAAU,CAAEmE,IAAMF,GAAR,EAAgB7c,CAA1B,CACA,KAAKyY,EAAL,CAAU,KAAOzY,CAAjB,CACA,KAAK0Y,EAAL,CAAU,CAAE+D,IAAME,GAAR,EAAgB3c,CAA1B,CACA,KAAK2Y,EAAL,CAAU,CAAE+D,IAAMI,GAAR,EAAgB9c,CAA1B,CAEH,CATM,IASA,IAAK4c,IAAMI,GAAX,CAAiB,CAEpBhd,EAAI,IAAM/S,KAAK0M,IAAL,CAAW,IAAMijB,GAAN,CAAYJ,GAAZ,CAAkBQ,GAA7B,CAAV,CAEA,KAAKpE,EAAL,CAAU,CAAE8D,IAAMI,GAAR,EAAgB9c,CAA1B,CACA,KAAKyY,EAAL,CAAU,CAAEgE,IAAME,GAAR,EAAgB3c,CAA1B,CACA,KAAK0Y,EAAL,CAAU,KAAO1Y,CAAjB,CACA,KAAK2Y,EAAL,CAAU,CAAEkE,IAAME,GAAR,EAAgB/c,CAA1B,CAEH,CATM,IASA,CAEHA,EAAI,IAAM/S,KAAK0M,IAAL,CAAW,IAAMqjB,GAAN,CAAYR,GAAZ,CAAkBI,GAA7B,CAAV,CAEA,KAAKhE,EAAL,CAAU,CAAE+D,IAAMF,GAAR,EAAgBzc,CAA1B,CACA,KAAKyY,EAAL,CAAU,CAAEiE,IAAMI,GAAR,EAAgB9c,CAA1B,CACA,KAAK0Y,EAAL,CAAU,CAAEmE,IAAME,GAAR,EAAgB/c,CAA1B,CACA,KAAK2Y,EAAL,CAAU,KAAO3Y,CAAjB,CAEH,CAED,KAAK8b,gBAAL,GAEA,MAAO,KAAP,CAEH,CAzLgC,CA2LjC3oB,mBAAoB,UAAY,CAE5B;AAEA,GAAIoO,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIqtB,EAAJ,CAEA,GAAIzoB,KAAM,QAAV,CAEA,MAAO,SAAStB,mBAAT,CAA6BgqB,KAA7B,CAAoCC,GAApC,CAA0C,CAE7C,GAAK7b,KAAO5R,SAAZ,CAAwB4R,GAAK,GAAI1R,QAAJ,EAAL,CAExBqtB,EAAIC,MAAMzoB,GAAN,CAAW0oB,GAAX,EAAmB,CAAvB,CAEA,GAAKF,EAAIzoB,GAAT,CAAe,CAEXyoB,EAAI,CAAJ,CAEA,GAAKjwB,KAAK6iB,GAAL,CAAUqN,MAAM5zB,CAAhB,EAAsB0D,KAAK6iB,GAAL,CAAUqN,MAAM1zB,CAAhB,CAA3B,CAAiD,CAE7C8X,GAAGnX,GAAH,CAAQ,CAAE+yB,MAAM3zB,CAAhB,CAAmB2zB,MAAM5zB,CAAzB,CAA4B,CAA5B,EAEH,CAJD,IAIO,CAEHgY,GAAGnX,GAAH,CAAQ,CAAR,CAAW,CAAE+yB,MAAM1zB,CAAnB,CAAsB0zB,MAAM3zB,CAA5B,EAEH,CAEJ,CAdD,IAcO,CAEH+X,GAAGgT,YAAH,CAAiB4I,KAAjB,CAAwBC,GAAxB,EAEH,CAED,KAAK3E,EAAL,CAAUlX,GAAGhY,CAAb,CACA,KAAKmvB,EAAL,CAAUnX,GAAG/X,CAAb,CACA,KAAKmvB,EAAL,CAAUpX,GAAG9X,CAAb,CACA,KAAKmvB,EAAL,CAAUsE,CAAV,CAEA,MAAO,MAAKnN,SAAL,EAAP,CAEH,CAjCD,CAmCH,CA5CmB,EA3La,CAyOjCzc,QAAS,kBAAY,CAEjB;AAEA,MAAO,MAAK+pB,SAAL,EAAP,CAEH,CA/OgC,CAiPjCA,UAAW,oBAAY,CAEnB,KAAK5E,EAAL,EAAW,CAAE,CAAb,CACA,KAAKC,EAAL,EAAW,CAAE,CAAb,CACA,KAAKC,EAAL,EAAW,CAAE,CAAb,CAEA,KAAKmD,gBAAL,GAEA,MAAO,KAAP,CAEH,CA3PgC,CA6PjCpnB,IAAK,aAAWoC,CAAX,CAAe,CAEhB,MAAO,MAAK2hB,EAAL,CAAU3hB,EAAE2hB,EAAZ,CAAiB,KAAKC,EAAL,CAAU5hB,EAAE4hB,EAA7B,CAAkC,KAAKC,EAAL,CAAU7hB,EAAE6hB,EAA9C,CAAmD,KAAKC,EAAL,CAAU9hB,EAAE8hB,EAAtE,CAEH,CAjQgC,CAmQjChJ,SAAU,mBAAY,CAElB,MAAO,MAAK6I,EAAL,CAAU,KAAKA,EAAf,CAAoB,KAAKC,EAAL,CAAU,KAAKA,EAAnC,CAAwC,KAAKC,EAAL,CAAU,KAAKA,EAAvD,CAA4D,KAAKC,EAAL,CAAU,KAAKA,EAAlF,CAEH,CAvQgC,CAyQjCjhB,OAAQ,iBAAY,CAEhB,MAAO1K,MAAK0M,IAAL,CAAW,KAAK8e,EAAL,CAAU,KAAKA,EAAf,CAAoB,KAAKC,EAAL,CAAU,KAAKA,EAAnC,CAAwC,KAAKC,EAAL,CAAU,KAAKA,EAAvD,CAA4D,KAAKC,EAAL,CAAU,KAAKA,EAAtF,CAAP,CAEH,CA7QgC,CA+QjC7I,UAAW,oBAAY,CAEnB,GAAI3M,GAAI,KAAKzL,MAAL,EAAR,CAEA,GAAKyL,IAAM,CAAX,CAAe,CAEX,KAAKqV,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAU,CAAV,CAEH,CAPD,IAOO,CAEHxV,EAAI,EAAIA,CAAR,CAEA,KAAKqV,EAAL,CAAU,KAAKA,EAAL,CAAUrV,CAApB,CACA,KAAKsV,EAAL,CAAU,KAAKA,EAAL,CAAUtV,CAApB,CACA,KAAKuV,EAAL,CAAU,KAAKA,EAAL,CAAUvV,CAApB,CACA,KAAKwV,EAAL,CAAU,KAAKA,EAAL,CAAUxV,CAApB,CAEH,CAED,KAAK0Y,gBAAL,GAEA,MAAO,KAAP,CAEH,CAzSgC,CA2SjC/M,SAAU,kBAAWqF,CAAX,CAAckG,CAAd,CAAkB,CAExB,GAAKA,IAAM3qB,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,wGAAd,EACA,MAAO,MAAKolB,mBAAL,CAA0BlJ,CAA1B,CAA6BkG,CAA7B,CAAP,CAEH,CAED,MAAO,MAAKgD,mBAAL,CAA0B,IAA1B,CAAgClJ,CAAhC,CAAP,CAEH,CAtTgC,CAwTjCK,YAAa,qBAAWL,CAAX,CAAe,CAExB,MAAO,MAAKkJ,mBAAL,CAA0BlJ,CAA1B,CAA6B,IAA7B,CAAP,CAEH,CA5TgC,CA8TjCkJ,oBAAqB,6BAAWnc,CAAX,CAAcX,CAAd,CAAkB,CAEnC;AAEA,GAAI+c,KAAMpc,EAAEsX,EAAZ,CAAgB+E,IAAMrc,EAAEuX,EAAxB,CAA4B+E,IAAMtc,EAAEwX,EAApC,CAAwC+E,IAAMvc,EAAEyX,EAAhD,CACA,GAAI+E,KAAMnd,EAAEiY,EAAZ,CAAgBmF,IAAMpd,EAAEkY,EAAxB,CAA4BmF,IAAMrd,EAAEmY,EAApC,CAAwCmF,IAAMtd,EAAEoY,EAAhD,CAEA,KAAKH,EAAL,CAAU8E,IAAMO,GAAN,CAAYJ,IAAMC,GAAlB,CAAwBH,IAAMK,GAA9B,CAAoCJ,IAAMG,GAApD,CACA,KAAKlF,EAAL,CAAU8E,IAAMM,GAAN,CAAYJ,IAAME,GAAlB,CAAwBH,IAAME,GAA9B,CAAoCJ,IAAMM,GAApD,CACA,KAAKlF,EAAL,CAAU8E,IAAMK,GAAN,CAAYJ,IAAMG,GAAlB,CAAwBN,IAAMK,GAA9B,CAAoCJ,IAAMG,GAApD,CACA,KAAK/E,EAAL,CAAU8E,IAAMI,GAAN,CAAYP,IAAMI,GAAlB,CAAwBH,IAAMI,GAA9B,CAAoCH,IAAMI,GAApD,CAEA,KAAK/B,gBAAL,GAEA,MAAO,KAAP,CAEH,CA9UgC,CAgVjCvB,MAAO,eAAWE,EAAX,CAAezZ,CAAf,CAAmB,CAEtB,GAAKA,IAAM,CAAX,CAAe,MAAO,KAAP,CACf,GAAKA,IAAM,CAAX,CAAe,MAAO,MAAKxO,IAAL,CAAWioB,EAAX,CAAP,CAEf,GAAIlxB,GAAI,KAAKkvB,EAAb,CAAiBjvB,EAAI,KAAKkvB,EAA1B,CAA8BjvB,EAAI,KAAKkvB,EAAvC,CAA2CjK,EAAI,KAAKkK,EAApD,CAEA;AAEA,GAAImF,cAAerP,EAAI+L,GAAG7B,EAAP,CAAYrvB,EAAIkxB,GAAGhC,EAAnB,CAAwBjvB,EAAIixB,GAAG/B,EAA/B,CAAoCjvB,EAAIgxB,GAAG9B,EAA9D,CAEA,GAAKoF,aAAe,CAApB,CAAwB,CAEpB,KAAKnF,EAAL,CAAU,CAAE6B,GAAG7B,EAAf,CACA,KAAKH,EAAL,CAAU,CAAEgC,GAAGhC,EAAf,CACA,KAAKC,EAAL,CAAU,CAAE+B,GAAG/B,EAAf,CACA,KAAKC,EAAL,CAAU,CAAE8B,GAAG9B,EAAf,CAEAoF,aAAe,CAAEA,YAAjB,CAEH,CATD,IASO,CAEH,KAAKvrB,IAAL,CAAWioB,EAAX,EAEH,CAED,GAAKsD,cAAgB,GAArB,CAA2B,CAEvB,KAAKnF,EAAL,CAAUlK,CAAV,CACA,KAAK+J,EAAL,CAAUlvB,CAAV,CACA,KAAKmvB,EAAL,CAAUlvB,CAAV,CACA,KAAKmvB,EAAL,CAAUlvB,CAAV,CAEA,MAAO,KAAP,CAEH,CAED,GAAIu0B,cAAe/wB,KAAK0M,IAAL,CAAW,IAAMokB,aAAeA,YAAhC,CAAnB,CAEA,GAAK9wB,KAAK6iB,GAAL,CAAUkO,YAAV,EAA2B,KAAhC,CAAwC,CAEpC,KAAKpF,EAAL,CAAU,KAAQlK,EAAI,KAAKkK,EAAjB,CAAV,CACA,KAAKH,EAAL,CAAU,KAAQlvB,EAAI,KAAKkvB,EAAjB,CAAV,CACA,KAAKC,EAAL,CAAU,KAAQlvB,EAAI,KAAKkvB,EAAjB,CAAV,CACA,KAAKC,EAAL,CAAU,KAAQlvB,EAAI,KAAKkvB,EAAjB,CAAV,CAEA,MAAO,KAAP,CAEH,CAED,GAAIsF,WAAYhxB,KAAK+iB,KAAL,CAAYgO,YAAZ,CAA0BD,YAA1B,CAAhB,CACA,GAAIG,QAASjxB,KAAK0S,GAAL,CAAU,CAAE,EAAIqB,CAAN,EAAYid,SAAtB,EAAoCD,YAAjD,CACIG,OAASlxB,KAAK0S,GAAL,CAAUqB,EAAIid,SAAd,EAA4BD,YADzC,CAGA,KAAKpF,EAAL,CAAYlK,EAAIwP,MAAJ,CAAa,KAAKtF,EAAL,CAAUuF,MAAnC,CACA,KAAK1F,EAAL,CAAYlvB,EAAI20B,MAAJ,CAAa,KAAKzF,EAAL,CAAU0F,MAAnC,CACA,KAAKzF,EAAL,CAAYlvB,EAAI00B,MAAJ,CAAa,KAAKxF,EAAL,CAAUyF,MAAnC,CACA,KAAKxF,EAAL,CAAYlvB,EAAIy0B,MAAJ,CAAa,KAAKvF,EAAL,CAAUwF,MAAnC,CAEA,KAAKrC,gBAAL,GAEA,MAAO,KAAP,CAEH,CA/YgC,CAiZjCvL,OAAQ,gBAAW5b,UAAX,CAAwB,CAE5B,MAASA,YAAW8jB,EAAX,GAAkB,KAAKA,EAAzB,EAAmC9jB,WAAW+jB,EAAX,GAAkB,KAAKA,EAA1D,EAAoE/jB,WAAWgkB,EAAX,GAAkB,KAAKA,EAA3F,EAAqGhkB,WAAWikB,EAAX,GAAkB,KAAKA,EAAnI,CAEH,CArZgC,CAuZjCpI,UAAW,mBAAWtN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAElC,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,KAAKylB,EAAL,CAAUvV,MAAOlQ,MAAP,CAAV,CACA,KAAK0lB,EAAL,CAAUxV,MAAOlQ,OAAS,CAAhB,CAAV,CACA,KAAK2lB,EAAL,CAAUzV,MAAOlQ,OAAS,CAAhB,CAAV,CACA,KAAK4lB,EAAL,CAAU1V,MAAOlQ,OAAS,CAAhB,CAAV,CAEA,KAAK8oB,gBAAL,GAEA,MAAO,KAAP,CAEH,CApagC,CAsajCrL,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5BkQ,MAAOlQ,MAAP,EAAkB,KAAKylB,EAAvB,CACAvV,MAAOlQ,OAAS,CAAhB,EAAsB,KAAK0lB,EAA3B,CACAxV,MAAOlQ,OAAS,CAAhB,EAAsB,KAAK2lB,EAA3B,CACAzV,MAAOlQ,OAAS,CAAhB,EAAsB,KAAK4lB,EAA3B,CAEA,MAAO1V,MAAP,CAEH,CAlbgC,CAobjCkb,SAAU,kBAAWxf,QAAX,CAAsB,CAE5B,KAAKkd,gBAAL,CAAwBld,QAAxB,CAEA,MAAO,KAAP,CAEH,CA1bgC,CA4bjCkd,iBAAkB,2BAAY,CAAE,CA5bC,CAArC,EAgcA;;;;;;;OASA,QAASjsB,QAAT,CAAkBtG,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA4B,CAExB,KAAKF,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAASA,GAAK,CAAd,CAEH,CAED4Q,OAAO4B,MAAP,CAAepM,QAAQuK,SAAvB,CAAkC,CAE9BikB,UAAW,IAFmB,CAI9Bj0B,IAAK,aAAWb,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB,CAEtB,KAAKF,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAZ6B,CAc9B0kB,UAAW,mBAAWC,MAAX,CAAoB,CAE3B,KAAK7kB,CAAL,CAAS6kB,MAAT,CACA,KAAK5kB,CAAL,CAAS4kB,MAAT,CACA,KAAK3kB,CAAL,CAAS2kB,MAAT,CAEA,MAAO,KAAP,CAEH,CAtB6B,CAwB9BC,KAAM,cAAW9kB,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CA9B6B,CAgC9B+kB,KAAM,cAAW9kB,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAtC6B,CAwC9B80B,KAAM,cAAW70B,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CA9C6B,CAgD9B8kB,aAAc,sBAAW7L,KAAX,CAAkB7H,KAAlB,CAA0B,CAEpC,OAAS6H,KAAT,EAEI,IAAK,EAAL,CAAQ,KAAKnZ,CAAL,CAASsR,KAAT,CAAgB,MACxB,IAAK,EAAL,CAAQ,KAAKrR,CAAL,CAASqR,KAAT,CAAgB,MACxB,IAAK,EAAL,CAAQ,KAAKpR,CAAL,CAASoR,KAAT,CAAgB,MACxB,QAAS,KAAM,IAAI2T,MAAJ,CAAW,0BAA4B9L,KAAvC,CAAN,CALb,CASA,MAAO,KAAP,CAEH,CA7D6B,CA+D9B+L,aAAc,sBAAW/L,KAAX,CAAmB,CAE7B,OAASA,KAAT,EAEI,IAAK,EAAL,CAAQ,MAAO,MAAKnZ,CAAZ,CACR,IAAK,EAAL,CAAQ,MAAO,MAAKC,CAAZ,CACR,IAAK,EAAL,CAAQ,MAAO,MAAKC,CAAZ,CACR,QAAS,KAAM,IAAI+kB,MAAJ,CAAW,0BAA4B9L,KAAvC,CAAN,CALb,CASH,CA1E6B,CA4E9BrW,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAKjR,CAA3B,CAA8B,KAAKC,CAAnC,CAAsC,KAAKC,CAA3C,CAAP,CAEH,CAhF6B,CAkF9B+I,KAAM,cAAWsE,CAAX,CAAe,CAEjB,KAAKvN,CAAL,CAASuN,EAAEvN,CAAX,CACA,KAAKC,CAAL,CAASsN,EAAEtN,CAAX,CACA,KAAKC,CAAL,CAASqN,EAAErN,CAAX,CAEA,MAAO,KAAP,CAEH,CA1F6B,CA4F9BsB,IAAK,aAAW+L,CAAX,CAAc4X,CAAd,CAAkB,CAEnB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,uFAAd,EACA,MAAO,MAAKyW,UAAL,CAAiB7X,CAAjB,CAAoB4X,CAApB,CAAP,CAEH,CAED,KAAKnlB,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CACA,KAAKC,CAAL,EAAUqN,EAAErN,CAAZ,CAEA,MAAO,KAAP,CAEH,CA3G6B,CA6G9BmlB,UAAW,mBAAW5O,CAAX,CAAe,CAEtB,KAAKzW,CAAL,EAAUyW,CAAV,CACA,KAAKxW,CAAL,EAAUwW,CAAV,CACA,KAAKvW,CAAL,EAAUuW,CAAV,CAEA,MAAO,KAAP,CAEH,CArH6B,CAuH9B2O,WAAY,oBAAWxN,CAAX,CAAcX,CAAd,CAAkB,CAE1B,KAAKjX,CAAL,CAAS4X,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAjB,CACA,KAAKC,CAAL,CAAS2X,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAjB,CACA,KAAKC,CAAL,CAAS0X,EAAE1X,CAAF,CAAM+W,EAAE/W,CAAjB,CAEA,MAAO,KAAP,CAEH,CA/H6B,CAiI9BolB,gBAAiB,yBAAW/X,CAAX,CAAckJ,CAAd,CAAkB,CAE/B,KAAKzW,CAAL,EAAUuN,EAAEvN,CAAF,CAAMyW,CAAhB,CACA,KAAKxW,CAAL,EAAUsN,EAAEtN,CAAF,CAAMwW,CAAhB,CACA,KAAKvW,CAAL,EAAUqN,EAAErN,CAAF,CAAMuW,CAAhB,CAEA,MAAO,KAAP,CAEH,CAzI6B,CA2I9BvM,IAAK,aAAWqD,CAAX,CAAc4X,CAAd,CAAkB,CAEnB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,uFAAd,EACA,MAAO,MAAKW,UAAL,CAAiB/B,CAAjB,CAAoB4X,CAApB,CAAP,CAEH,CAED,KAAKnlB,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CACA,KAAKC,CAAL,EAAUqN,EAAErN,CAAZ,CAEA,MAAO,KAAP,CAEH,CA1J6B,CA4J9BqlB,UAAW,mBAAW9O,CAAX,CAAe,CAEtB,KAAKzW,CAAL,EAAUyW,CAAV,CACA,KAAKxW,CAAL,EAAUwW,CAAV,CACA,KAAKvW,CAAL,EAAUuW,CAAV,CAEA,MAAO,KAAP,CAEH,CApK6B,CAsK9BnH,WAAY,oBAAWsI,CAAX,CAAcX,CAAd,CAAkB,CAE1B,KAAKjX,CAAL,CAAS4X,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAjB,CACA,KAAKC,CAAL,CAAS2X,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAjB,CACA,KAAKC,CAAL,CAAS0X,EAAE1X,CAAF,CAAM+W,EAAE/W,CAAjB,CAEA,MAAO,KAAP,CAEH,CA9K6B,CAgL9BslB,SAAU,kBAAWjY,CAAX,CAAc4X,CAAd,CAAkB,CAExB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,iGAAd,EACA,MAAO,MAAKqmB,eAAL,CAAsBznB,CAAtB,CAAyB4X,CAAzB,CAAP,CAEH,CAED,KAAKnlB,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CACA,KAAKC,CAAL,EAAUqN,EAAErN,CAAZ,CAEA,MAAO,KAAP,CAEH,CA/L6B,CAiM9ByN,eAAgB,wBAAWkX,MAAX,CAAoB,CAEhC,KAAK7kB,CAAL,EAAU6kB,MAAV,CACA,KAAK5kB,CAAL,EAAU4kB,MAAV,CACA,KAAK3kB,CAAL,EAAU2kB,MAAV,CAEA,MAAO,KAAP,CAEH,CAzM6B,CA2M9BmQ,gBAAiB,yBAAWpd,CAAX,CAAcX,CAAd,CAAkB,CAE/B,KAAKjX,CAAL,CAAS4X,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAjB,CACA,KAAKC,CAAL,CAAS2X,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAjB,CACA,KAAKC,CAAL,CAAS0X,EAAE1X,CAAF,CAAM+W,EAAE/W,CAAjB,CAEA,MAAO,KAAP,CAEH,CAnN6B,CAqN9B+0B,WAAY,UAAY,CAEpB,GAAI7pB,YAAa,GAAIzB,WAAJ,EAAjB,CAEA,MAAO,SAASsrB,WAAT,CAAqBvL,KAArB,CAA6B,CAEhC,GAAK,EAAIA,OAASA,MAAMC,OAAnB,CAAL,CAAoC,CAEhChlB,QAAQ+iB,KAAR,CAAe,6FAAf,EAEH,CAED,MAAO,MAAKvd,eAAL,CAAsBiB,WAAWonB,YAAX,CAAyB9I,KAAzB,CAAtB,CAAP,CAEH,CAVD,CAYH,CAhBW,EArNkB,CAuO9BwL,eAAgB,UAAY,CAExB,GAAI9pB,YAAa,GAAIzB,WAAJ,EAAjB,CAEA,MAAO,SAASurB,eAAT,CAAyBrG,IAAzB,CAA+BzhB,KAA/B,CAAuC,CAE1C,MAAO,MAAKjD,eAAL,CAAsBiB,WAAW2nB,gBAAX,CAA6BlE,IAA7B,CAAmCzhB,KAAnC,CAAtB,CAAP,CAEH,CAJD,CAMH,CAVe,EAvOc,CAmP9BuY,aAAc,sBAAWhP,CAAX,CAAe,CAEzB,GAAI3W,GAAI,KAAKA,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,GAAI0lB,GAAIjP,EAAEkP,QAAV,CAEA,KAAK7lB,CAAL,CAAS4lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAA5C,CACA,KAAKD,CAAL,CAAS2lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAA5C,CACA,KAAKA,CAAL,CAAS0lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAA5C,CAEA,MAAO,KAAP,CAEH,CA9P6B,CAgQ9BotB,aAAc,sBAAW3W,CAAX,CAAe,CAEzB,GAAI3W,GAAI,KAAKA,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,GAAI0lB,GAAIjP,EAAEkP,QAAV,CAEA,GAAIV,GAAI,GAAMS,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,EAAH,EAAU1lB,CAApC,CAAwC0lB,EAAG,EAAH,CAA9C,CAAR,CAEA,KAAK5lB,CAAL,CAAS,CAAE4lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAAnC,CAAuC0lB,EAAG,EAAH,CAAzC,EAAqDT,CAA9D,CACA,KAAKllB,CAAL,CAAS,CAAE2lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAAnC,CAAuC0lB,EAAG,EAAH,CAAzC,EAAqDT,CAA9D,CACA,KAAKjlB,CAAL,CAAS,CAAE0lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,EAAH,EAAU1lB,CAApC,CAAwC0lB,EAAG,EAAH,CAA1C,EAAsDT,CAA/D,CAEA,MAAO,KAAP,CAEH,CA7Q6B,CA+Q9Bhb,gBAAiB,yBAAW0gB,CAAX,CAAe,CAE5B,GAAI7qB,GAAI,KAAKA,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,GAAIi1B,IAAKtK,EAAE7qB,CAAX,CAAco1B,GAAKvK,EAAE5qB,CAArB,CAAwBo1B,GAAKxK,EAAE3qB,CAA/B,CAAkCo1B,GAAKzK,EAAE1F,CAAzC,CAEA;AAEA,GAAIoQ,IAAKD,GAAKt1B,CAAL,CAASo1B,GAAKl1B,CAAd,CAAkBm1B,GAAKp1B,CAAhC,CACA,GAAIu1B,IAAKF,GAAKr1B,CAAL,CAASo1B,GAAKr1B,CAAd,CAAkBm1B,GAAKj1B,CAAhC,CACA,GAAIu1B,IAAKH,GAAKp1B,CAAL,CAASi1B,GAAKl1B,CAAd,CAAkBm1B,GAAKp1B,CAAhC,CACA,GAAI01B,IAAK,CAAEP,EAAF,CAAOn1B,CAAP,CAAWo1B,GAAKn1B,CAAhB,CAAoBo1B,GAAKn1B,CAAlC,CAEA;AAEA,KAAKF,CAAL,CAASu1B,GAAKD,EAAL,CAAUI,GAAK,CAAEP,EAAjB,CAAsBK,GAAK,CAAEH,EAA7B,CAAkCI,GAAK,CAAEL,EAAlD,CACA,KAAKn1B,CAAL,CAASu1B,GAAKF,EAAL,CAAUI,GAAK,CAAEN,EAAjB,CAAsBK,GAAK,CAAEN,EAA7B,CAAkCI,GAAK,CAAEF,EAAlD,CACA,KAAKn1B,CAAL,CAASu1B,GAAKH,EAAL,CAAUI,GAAK,CAAEL,EAAjB,CAAsBE,GAAK,CAAEH,EAA7B,CAAkCI,GAAK,CAAEL,EAAlD,CAEA,MAAO,KAAP,CAEH,CAnS6B,CAqS9BQ,QAAS,UAAY,CAEjB,GAAInnB,QAAS,GAAIiZ,QAAJ,EAAb,CAEA,MAAO,SAASkO,QAAT,CAAkB13B,MAAlB,CAA2B,CAE9BuQ,OAAOyc,gBAAP,CAAyBhtB,OAAO23B,gBAAhC,CAAkDpnB,OAAOmf,UAAP,CAAmB1vB,OAAO43B,WAA1B,CAAlD,EACA,MAAO,MAAKvI,YAAL,CAAmB9e,MAAnB,CAAP,CAEH,CALD,CAOH,CAXQ,EArSqB,CAkT9BsnB,UAAW,UAAY,CAEnB,GAAItnB,QAAS,GAAIiZ,QAAJ,EAAb,CAEA,MAAO,SAASqO,UAAT,CAAoB73B,MAApB,CAA6B,CAEhCuQ,OAAOyc,gBAAP,CAAyBhtB,OAAO43B,WAAhC,CAA6CrnB,OAAOmf,UAAP,CAAmB1vB,OAAO23B,gBAA1B,CAA7C,EACA,MAAO,MAAKtI,YAAL,CAAmB9e,MAAnB,CAAP,CAEH,CALD,CAOH,CAXU,EAlTmB,CA+T9BunB,mBAAoB,4BAAWpf,CAAX,CAAe,CAE/B;AACA;AAEA,GAAI3W,GAAI,KAAKA,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CACA,GAAI0lB,GAAIjP,EAAEkP,QAAV,CAEA,KAAK7lB,CAAL,CAAS4lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAA5C,CACA,KAAKD,CAAL,CAAS2lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAA5C,CACA,KAAKA,CAAL,CAAS0lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,EAAH,EAAU1lB,CAA7C,CAEA,MAAO,MAAKsmB,SAAL,EAAP,CAEH,CA7U6B,CA+U9Bf,OAAQ,gBAAWlY,CAAX,CAAe,CAEnB,KAAKvN,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CACA,KAAKC,CAAL,EAAUqN,EAAErN,CAAZ,CAEA,MAAO,KAAP,CAEH,CAvV6B,CAyV9BwlB,aAAc,sBAAWb,MAAX,CAAoB,CAE9B,MAAO,MAAKlX,cAAL,CAAqB,EAAIkX,MAAzB,CAAP,CAEH,CA7V6B,CA+V9Bpa,IAAK,aAAW8C,CAAX,CAAe,CAEhB,KAAKvN,CAAL,CAAS0D,KAAK+G,GAAL,CAAU,KAAKzK,CAAf,CAAkBuN,EAAEvN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK+G,GAAL,CAAU,KAAKxK,CAAf,CAAkBsN,EAAEtN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK+G,GAAL,CAAU,KAAKvK,CAAf,CAAkBqN,EAAErN,CAApB,CAAT,CAEA,MAAO,KAAP,CAEH,CAvW6B,CAyW9BsK,IAAK,aAAW+C,CAAX,CAAe,CAEhB,KAAKvN,CAAL,CAAS0D,KAAK8G,GAAL,CAAU,KAAKxK,CAAf,CAAkBuN,EAAEvN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8G,GAAL,CAAU,KAAKvK,CAAf,CAAkBsN,EAAEtN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK8G,GAAL,CAAU,KAAKtK,CAAf,CAAkBqN,EAAErN,CAApB,CAAT,CAEA,MAAO,KAAP,CAEH,CAjX6B,CAmX9BgjB,MAAO,eAAWzY,GAAX,CAAgBD,GAAhB,CAAsB,CAEzB;AAEA,KAAKxK,CAAL,CAAS0D,KAAK8G,GAAL,CAAUC,IAAIzK,CAAd,CAAiB0D,KAAK+G,GAAL,CAAUD,IAAIxK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8G,GAAL,CAAUC,IAAIxK,CAAd,CAAiByD,KAAK+G,GAAL,CAAUD,IAAIvK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK8G,GAAL,CAAUC,IAAIvK,CAAd,CAAiBwD,KAAK+G,GAAL,CAAUD,IAAItK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CA7X6B,CA+X9B4lB,YAAa,UAAY,CAErB,GAAIrb,KAAM,GAAInE,QAAJ,EAAV,CACA,GAAIkE,KAAM,GAAIlE,QAAJ,EAAV,CAEA,MAAO,SAASwf,YAAT,CAAsBC,MAAtB,CAA8BC,MAA9B,CAAuC,CAE1Cvb,IAAI5J,GAAJ,CAASklB,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,EACAvb,IAAI3J,GAAJ,CAASmlB,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,EAEA,MAAO,MAAK9C,KAAL,CAAYzY,GAAZ,CAAiBD,GAAjB,CAAP,CAEH,CAPD,CASH,CAdY,EA/XiB,CA+Y9Byb,YAAa,qBAAWxb,GAAX,CAAgBD,GAAhB,CAAsB,CAE/B,GAAI4D,QAAS,KAAKA,MAAL,EAAb,CAEA,MAAO,MAAKsX,YAAL,CAAmBtX,QAAU,CAA7B,EAAiCT,cAAjC,CAAiDjK,KAAK8G,GAAL,CAAUC,GAAV,CAAe/G,KAAK+G,GAAL,CAAUD,GAAV,CAAe4D,MAAf,CAAf,CAAjD,CAAP,CAEH,CArZ6B,CAuZ9ByI,MAAO,gBAAY,CAEf,KAAK7W,CAAL,CAAS0D,KAAKmT,KAAL,CAAY,KAAK7W,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAKmT,KAAL,CAAY,KAAK5W,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAKmT,KAAL,CAAY,KAAK3W,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CA/Z6B,CAia9BskB,KAAM,eAAY,CAEd,KAAKxkB,CAAL,CAAS0D,KAAK8gB,IAAL,CAAW,KAAKxkB,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8gB,IAAL,CAAW,KAAKvkB,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK8gB,IAAL,CAAW,KAAKtkB,CAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CAza6B,CA2a9BgmB,MAAO,gBAAY,CAEf,KAAKlmB,CAAL,CAAS0D,KAAKwiB,KAAL,CAAY,KAAKlmB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAKwiB,KAAL,CAAY,KAAKjmB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAKwiB,KAAL,CAAY,KAAKhmB,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CAnb6B,CAqb9BimB,YAAa,sBAAY,CAErB,KAAKnmB,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiB0D,KAAK8gB,IAAL,CAAW,KAAKxkB,CAAhB,CAAjB,CAAuC0D,KAAKmT,KAAL,CAAY,KAAK7W,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiByD,KAAK8gB,IAAL,CAAW,KAAKvkB,CAAhB,CAAjB,CAAuCyD,KAAKmT,KAAL,CAAY,KAAK5W,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBwD,KAAK8gB,IAAL,CAAW,KAAKtkB,CAAhB,CAAjB,CAAuCwD,KAAKmT,KAAL,CAAY,KAAK3W,CAAjB,CAAhD,CAEA,MAAO,KAAP,CAEH,CA7b6B,CA+b9BkmB,OAAQ,iBAAY,CAEhB,KAAKpmB,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CAEA,MAAO,KAAP,CAEH,CAvc6B,CAyc9BiL,IAAK,aAAWoC,CAAX,CAAe,CAEhB,MAAO,MAAKvN,CAAL,CAASuN,EAAEvN,CAAX,CAAe,KAAKC,CAAL,CAASsN,EAAEtN,CAA1B,CAA8B,KAAKC,CAAL,CAASqN,EAAErN,CAAhD,CAEH,CA7c6B,CA+c9B;AAEAmmB,SAAU,mBAAY,CAElB,MAAO,MAAKrmB,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAKC,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAAzD,CAEH,CArd6B,CAud9BkO,OAAQ,iBAAY,CAEhB,MAAO1K,MAAK0M,IAAL,CAAW,KAAKpQ,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAKC,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAA7D,CAAP,CAEH,CA3d6B,CA6d9BomB,gBAAiB,0BAAY,CAEzB,MAAO5iB,MAAK6iB,GAAL,CAAU,KAAKvmB,CAAf,EAAqB0D,KAAK6iB,GAAL,CAAU,KAAKtmB,CAAf,CAArB,CAA0CyD,KAAK6iB,GAAL,CAAU,KAAKrmB,CAAf,CAAjD,CAEH,CAje6B,CAme9BsmB,UAAW,oBAAY,CAEnB,MAAO,MAAKd,YAAL,CAAmB,KAAKtX,MAAL,IAAiB,CAApC,CAAP,CAEH,CAve6B,CAye9BwY,UAAW,mBAAWxY,MAAX,CAAoB,CAE3B,MAAO,MAAKoY,SAAL,GAAiB7Y,cAAjB,CAAiCS,MAAjC,CAAP,CAEH,CA7e6B,CA+e9BqV,KAAM,cAAWlW,CAAX,CAAcsZ,KAAd,CAAsB,CAExB,KAAK7mB,CAAL,EAAU,CAAEuN,EAAEvN,CAAF,CAAM,KAAKA,CAAb,EAAmB6mB,KAA7B,CACA,KAAK5mB,CAAL,EAAU,CAAEsN,EAAEtN,CAAF,CAAM,KAAKA,CAAb,EAAmB4mB,KAA7B,CACA,KAAK3mB,CAAL,EAAU,CAAEqN,EAAErN,CAAF,CAAM,KAAKA,CAAb,EAAmB2mB,KAA7B,CAEA,MAAO,KAAP,CAEH,CAvf6B,CAyf9BC,YAAa,qBAAW9O,EAAX,CAAe+O,EAAf,CAAmBF,KAAnB,CAA2B,CAEpC,MAAO,MAAKvX,UAAL,CAAiByX,EAAjB,CAAqB/O,EAArB,EAA0BrK,cAA1B,CAA0CkZ,KAA1C,EAAkDrlB,GAAlD,CAAuDwW,EAAvD,CAAP,CAEH,CA7f6B,CA+f9Bge,MAAO,eAAWzoB,CAAX,CAAc4X,CAAd,CAAkB,CAErB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,2FAAd,EACA,MAAO,MAAKqc,YAAL,CAAmBzd,CAAnB,CAAsB4X,CAAtB,CAAP,CAEH,CAED,MAAO,MAAK6F,YAAL,CAAmB,IAAnB,CAAyBzd,CAAzB,CAAP,CAEH,CA1gB6B,CA4gB9Byd,aAAc,sBAAWpT,CAAX,CAAcX,CAAd,CAAkB,CAE5B,GAAIgf,IAAKre,EAAE5X,CAAX,CAAck2B,GAAKte,EAAE3X,CAArB,CAAwBk2B,GAAKve,EAAE1X,CAA/B,CACA,GAAIk2B,IAAKnf,EAAEjX,CAAX,CAAcq2B,GAAKpf,EAAEhX,CAArB,CAAwBq2B,GAAKrf,EAAE/W,CAA/B,CAEA,KAAKF,CAAL,CAASk2B,GAAKI,EAAL,CAAUH,GAAKE,EAAxB,CACA,KAAKp2B,CAAL,CAASk2B,GAAKC,EAAL,CAAUH,GAAKK,EAAxB,CACA,KAAKp2B,CAAL,CAAS+1B,GAAKI,EAAL,CAAUH,GAAKE,EAAxB,CAEA,MAAO,KAAP,CAEH,CAvhB6B,CAyhB9BG,gBAAiB,yBAAWjG,MAAX,CAAoB,CAEjC,GAAIzL,QAASyL,OAAOnlB,GAAP,CAAY,IAAZ,EAAqBmlB,OAAOjK,QAAP,EAAlC,CAEA,MAAO,MAAKpd,IAAL,CAAWqnB,MAAX,EAAoB3iB,cAApB,CAAoCkX,MAApC,CAAP,CAEH,CA/hB6B,CAiiB9B2R,eAAgB,UAAY,CAExB,GAAIxe,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASkwB,eAAT,CAAyBC,WAAzB,CAAuC,CAE1Cze,GAAG/O,IAAH,CAAS,IAAT,EAAgBstB,eAAhB,CAAiCE,WAAjC,EAEA,MAAO,MAAKvsB,GAAL,CAAU8N,EAAV,CAAP,CAEH,CAND,CAQH,CAZe,EAjiBc,CA+iB9B0e,QAAS,UAAY,CAEjB;AACA;AAEA,GAAI1e,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASowB,QAAT,CAAkBC,MAAlB,CAA2B,CAE9B,MAAO,MAAKzsB,GAAL,CAAU8N,GAAG/O,IAAH,CAAS0tB,MAAT,EAAkBhpB,cAAlB,CAAkC,EAAI,KAAKxC,GAAL,CAAUwrB,MAAV,CAAtC,CAAV,CAAP,CAEH,CAJD,CAMH,CAbQ,EA/iBqB,CA8jB9BC,QAAS,iBAAWrpB,CAAX,CAAe,CAEpB,GAAIzE,OAAQ,KAAKqC,GAAL,CAAUoC,CAAV,EAAkB7J,KAAK0M,IAAL,CAAW,KAAKiW,QAAL,GAAkB9Y,EAAE8Y,QAAF,EAA7B,CAA9B,CAEA;AAEA,MAAO3iB,MAAKmzB,IAAL,CAAWtU,MAAMW,KAAN,CAAapa,KAAb,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,CAAX,CAAP,CAEH,CAtkB6B,CAwkB9B4d,WAAY,oBAAWnZ,CAAX,CAAe,CAEvB,MAAO7J,MAAK0M,IAAL,CAAW,KAAKnF,iBAAL,CAAwBsC,CAAxB,CAAX,CAAP,CAEH,CA5kB6B,CA8kB9BtC,kBAAmB,2BAAWsC,CAAX,CAAe,CAE9B,GAAI2C,IAAK,KAAKlQ,CAAL,CAASuN,EAAEvN,CAApB,CAAuBmQ,GAAK,KAAKlQ,CAAL,CAASsN,EAAEtN,CAAvC,CAA0C62B,GAAK,KAAK52B,CAAL,CAASqN,EAAErN,CAA1D,CAEA,MAAOgQ,IAAKA,EAAL,CAAUC,GAAKA,EAAf,CAAoB2mB,GAAKA,EAAhC,CAEH,CAplB6B,CAslB9BnQ,oBAAqB,6BAAWpZ,CAAX,CAAe,CAEhC,MAAO7J,MAAK6iB,GAAL,CAAU,KAAKvmB,CAAL,CAASuN,EAAEvN,CAArB,EAA2B0D,KAAK6iB,GAAL,CAAU,KAAKtmB,CAAL,CAASsN,EAAEtN,CAArB,CAA3B,CAAsDyD,KAAK6iB,GAAL,CAAU,KAAKrmB,CAAL,CAASqN,EAAErN,CAArB,CAA7D,CAEH,CA1lB6B,CA4lB9B4K,iBAAkB,0BAAW2L,CAAX,CAAe,CAE7B,GAAIsgB,cAAerzB,KAAK0S,GAAL,CAAUK,EAAE7N,GAAZ,EAAoB6N,EAAE9L,MAAzC,CAEA,KAAK3K,CAAL,CAAS+2B,aAAerzB,KAAK0S,GAAL,CAAUK,EAAE3N,KAAZ,CAAxB,CACA,KAAK7I,CAAL,CAASyD,KAAKyS,GAAL,CAAUM,EAAE7N,GAAZ,EAAoB6N,EAAE9L,MAA/B,CACA,KAAKzK,CAAL,CAAS62B,aAAerzB,KAAKyS,GAAL,CAAUM,EAAE3N,KAAZ,CAAxB,CAEA,MAAO,KAAP,CAEH,CAtmB6B,CAwmB9BkuB,mBAAoB,4BAAWxP,CAAX,CAAe,CAE/B,KAAKxnB,CAAL,CAASwnB,EAAE7c,MAAF,CAAWjH,KAAK0S,GAAL,CAAUoR,EAAE1e,KAAZ,CAApB,CACA,KAAK7I,CAAL,CAASunB,EAAEvnB,CAAX,CACA,KAAKC,CAAL,CAASsnB,EAAE7c,MAAF,CAAWjH,KAAKyS,GAAL,CAAUqR,EAAE1e,KAAZ,CAApB,CAEA,MAAO,KAAP,CAEH,CAhnB6B,CAknB9BmuB,sBAAuB,+BAAWtgB,CAAX,CAAe,CAElC,GAAIiP,GAAIjP,EAAEkP,QAAV,CAEA,KAAK7lB,CAAL,CAAS4lB,EAAG,EAAH,CAAT,CACA,KAAK3lB,CAAL,CAAS2lB,EAAG,EAAH,CAAT,CACA,KAAK1lB,CAAL,CAAS0lB,EAAG,EAAH,CAAT,CAEA,MAAO,KAAP,CAEH,CA5nB6B,CA8nB9BsR,mBAAoB,4BAAWvgB,CAAX,CAAe,CAE/B,GAAIuZ,IAAK,KAAKxiB,mBAAL,CAA0BiJ,CAA1B,CAA6B,CAA7B,EAAiCvI,MAAjC,EAAT,CACA,GAAI+hB,IAAK,KAAKziB,mBAAL,CAA0BiJ,CAA1B,CAA6B,CAA7B,EAAiCvI,MAAjC,EAAT,CACA,GAAIgiB,IAAK,KAAK1iB,mBAAL,CAA0BiJ,CAA1B,CAA6B,CAA7B,EAAiCvI,MAAjC,EAAT,CAEA,KAAKpO,CAAL,CAASkwB,EAAT,CACA,KAAKjwB,CAAL,CAASkwB,EAAT,CACA,KAAKjwB,CAAL,CAASkwB,EAAT,CAEA,MAAO,KAAP,CAEH,CA1oB6B,CA4oB9B1iB,oBAAqB,6BAAWiJ,CAAX,CAAcwC,KAAd,CAAsB,CAEvC,MAAO,MAAK8N,SAAL,CAAgBtQ,EAAEkP,QAAlB,CAA4B1M,MAAQ,CAApC,CAAP,CAEH,CAhpB6B,CAkpB9B6N,OAAQ,gBAAWzZ,CAAX,CAAe,CAEnB,MAAWA,GAAEvN,CAAF,GAAQ,KAAKA,CAAf,EAAwBuN,EAAEtN,CAAF,GAAQ,KAAKA,CAArC,EAA8CsN,EAAErN,CAAF,GAAQ,KAAKA,CAApE,CAEH,CAtpB6B,CAwpB9B+mB,UAAW,mBAAWtN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAElC,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,KAAKzJ,CAAL,CAAS2Z,MAAOlQ,MAAP,CAAT,CACA,KAAKxJ,CAAL,CAAS0Z,MAAOlQ,OAAS,CAAhB,CAAT,CACA,KAAKvJ,CAAL,CAASyZ,MAAOlQ,OAAS,CAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CAlqB6B,CAoqB9Byd,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5BkQ,MAAOlQ,MAAP,EAAkB,KAAKzJ,CAAvB,CACA2Z,MAAOlQ,OAAS,CAAhB,EAAsB,KAAKxJ,CAA3B,CACA0Z,MAAOlQ,OAAS,CAAhB,EAAsB,KAAKvJ,CAA3B,CAEA,MAAOyZ,MAAP,CAEH,CA/qB6B,CAirB9BwN,oBAAqB,6BAAWC,SAAX,CAAsBjO,KAAtB,CAA6B1P,MAA7B,CAAsC,CAEvD,GAAKA,SAAWrD,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,qEAAd,EAEH,CAED,KAAK3O,CAAL,CAASonB,UAAUC,IAAV,CAAgBlO,KAAhB,CAAT,CACA,KAAKlZ,CAAL,CAASmnB,UAAUE,IAAV,CAAgBnO,KAAhB,CAAT,CACA,KAAKjZ,CAAL,CAASknB,UAAUiG,IAAV,CAAgBlU,KAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CA/rB6B,CAAlC,EAmsBA;;;;;OAOA,QAASge,QAAT,EAAmB,CAEf,KAAKtR,QAAL,CAAgB,CAEZ,CAFY,CAET,CAFS,CAEN,CAFM,CAGZ,CAHY,CAGT,CAHS,CAGN,CAHM,CAIZ,CAJY,CAIT,CAJS,CAIN,CAJM,CAAhB,CAQA,GAAK1Q,UAAU/G,MAAV,CAAmB,CAAxB,CAA4B,CAExBzJ,QAAQ+iB,KAAR,CAAe,+EAAf,EAEH,CAEJ,CAED5W,OAAO4B,MAAP,CAAeykB,QAAQtmB,SAAvB,CAAkC,CAE9BumB,UAAW,IAFmB,CAI9Bv2B,IAAK,aAAW+mB,GAAX,CAAgBC,GAAhB,CAAqBC,GAArB,CAA0BE,GAA1B,CAA+BC,GAA/B,CAAoCC,GAApC,CAAyCE,GAAzC,CAA8CC,GAA9C,CAAmDC,GAAnD,CAAyD,CAE1D,GAAIM,IAAK,KAAK/C,QAAd,CAEA+C,GAAI,CAAJ,EAAUhB,GAAV,CAAegB,GAAI,CAAJ,EAAUZ,GAAV,CAAeY,GAAI,CAAJ,EAAUR,GAAV,CAC9BQ,GAAI,CAAJ,EAAUf,GAAV,CAAee,GAAI,CAAJ,EAAUX,GAAV,CAAeW,GAAI,CAAJ,EAAUP,GAAV,CAC9BO,GAAI,CAAJ,EAAUd,GAAV,CAAec,GAAI,CAAJ,EAAUV,GAAV,CAAeU,GAAI,CAAJ,EAAUN,GAAV,CAE9B,MAAO,KAAP,CAEH,CAd6B,CAgB9BO,SAAU,mBAAY,CAElB,KAAKhoB,GAAL,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAGI,CAHJ,CAGO,CAHP,CAGU,CAHV,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,EAQA,MAAO,KAAP,CAEH,CA5B6B,CA8B9BiC,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBgW,SAAvB,CAAkC,KAAKpB,QAAvC,CAAP,CAEH,CAlC6B,CAoC9B5c,KAAM,cAAW0N,CAAX,CAAe,CAEjB,GAAIiS,IAAK,KAAK/C,QAAd,CACA,GAAIiD,IAAKnS,EAAEkP,QAAX,CAEA+C,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CACtCF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CACtCF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAAmBF,GAAI,CAAJ,EAAUE,GAAI,CAAJ,CAAV,CAEtC,MAAO,KAAP,CAEH,CA/C6B,CAiD9BuO,eAAgB,wBAAW1gB,CAAX,CAAe,CAE3B,GAAImS,IAAKnS,EAAEkP,QAAX,CAEA,KAAKhlB,GAAL,CAEIioB,GAAI,CAAJ,CAFJ,CAEaA,GAAI,CAAJ,CAFb,CAEsBA,GAAI,CAAJ,CAFtB,CAGIA,GAAI,CAAJ,CAHJ,CAGaA,GAAI,CAAJ,CAHb,CAGsBA,GAAI,CAAJ,CAHtB,CAIIA,GAAI,CAAJ,CAJJ,CAIaA,GAAI,CAAJ,CAJb,CAIsBA,GAAI,EAAJ,CAJtB,EAQA,MAAO,KAAP,CAEH,CA/D6B,CAiE9BqE,uBAAwB,UAAY,CAEhC,GAAInV,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAAS6mB,uBAAT,CAAiC/F,SAAjC,CAA6C,CAEhD,IAAM,GAAIpV,GAAI,CAAR,CAAW6H,EAAIuN,UAAUgG,KAA/B,CAAsCpb,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDgG,GAAGhY,CAAH,CAAOonB,UAAUC,IAAV,CAAgBrV,CAAhB,CAAP,CACAgG,GAAG/X,CAAH,CAAOmnB,UAAUE,IAAV,CAAgBtV,CAAhB,CAAP,CACAgG,GAAG9X,CAAH,CAAOknB,UAAUiG,IAAV,CAAgBrb,CAAhB,CAAP,CAEAgG,GAAG2N,YAAH,CAAiB,IAAjB,EAEAyB,UAAUmG,MAAV,CAAkBvb,CAAlB,CAAqBgG,GAAGhY,CAAxB,CAA2BgY,GAAG/X,CAA9B,CAAiC+X,GAAG9X,CAApC,EAEH,CAED,MAAOknB,UAAP,CAEH,CAhBD,CAkBH,CAtBuB,EAjEM,CAyF9B5B,SAAU,kBAAW7O,CAAX,CAAe,CAErB,MAAO,MAAKsU,gBAAL,CAAuB,IAAvB,CAA6BtU,CAA7B,CAAP,CAEH,CA7F6B,CA+F9BuU,YAAa,qBAAWvU,CAAX,CAAe,CAExB,MAAO,MAAKsU,gBAAL,CAAuBtU,CAAvB,CAA0B,IAA1B,CAAP,CAEH,CAnG6B,CAqG9BsU,iBAAkB,0BAAWrT,CAAX,CAAcX,CAAd,CAAkB,CAEhC,GAAI6S,IAAKlS,EAAEiO,QAAX,CACA,GAAImE,IAAK/S,EAAE4O,QAAX,CACA,GAAI+C,IAAK,KAAK/C,QAAd,CAEA,GAAIsF,KAAMrB,GAAI,CAAJ,CAAV,CAAmBsB,IAAMtB,GAAI,CAAJ,CAAzB,CAAkCuB,IAAMvB,GAAI,CAAJ,CAAxC,CACA,GAAIyB,KAAMzB,GAAI,CAAJ,CAAV,CAAmB0B,IAAM1B,GAAI,CAAJ,CAAzB,CAAkC2B,IAAM3B,GAAI,CAAJ,CAAxC,CACA,GAAI6B,KAAM7B,GAAI,CAAJ,CAAV,CAAmB8B,IAAM9B,GAAI,CAAJ,CAAzB,CAAkC+B,IAAM/B,GAAI,CAAJ,CAAxC,CAEA,GAAIqC,KAAMnC,GAAI,CAAJ,CAAV,CAAmBoC,IAAMpC,GAAI,CAAJ,CAAzB,CAAkCqC,IAAMrC,GAAI,CAAJ,CAAxC,CACA,GAAIuC,KAAMvC,GAAI,CAAJ,CAAV,CAAmBwC,IAAMxC,GAAI,CAAJ,CAAzB,CAAkCyC,IAAMzC,GAAI,CAAJ,CAAxC,CACA,GAAI2C,KAAM3C,GAAI,CAAJ,CAAV,CAAmB4C,IAAM5C,GAAI,CAAJ,CAAzB,CAAkC6C,IAAM7C,GAAI,CAAJ,CAAxC,CAEApB,GAAI,CAAJ,EAAUuC,IAAMgB,GAAN,CAAYf,IAAMmB,GAAlB,CAAwBlB,IAAMsB,GAAxC,CACA/D,GAAI,CAAJ,EAAUuC,IAAMiB,GAAN,CAAYhB,IAAMoB,GAAlB,CAAwBnB,IAAMuB,GAAxC,CACAhE,GAAI,CAAJ,EAAUuC,IAAMkB,GAAN,CAAYjB,IAAMqB,GAAlB,CAAwBpB,IAAMwB,GAAxC,CAEAjE,GAAI,CAAJ,EAAU2C,IAAMY,GAAN,CAAYX,IAAMe,GAAlB,CAAwBd,IAAMkB,GAAxC,CACA/D,GAAI,CAAJ,EAAU2C,IAAMa,GAAN,CAAYZ,IAAMgB,GAAlB,CAAwBf,IAAMmB,GAAxC,CACAhE,GAAI,CAAJ,EAAU2C,IAAMc,GAAN,CAAYb,IAAMiB,GAAlB,CAAwBhB,IAAMoB,GAAxC,CAEAjE,GAAI,CAAJ,EAAU+C,IAAMQ,GAAN,CAAYP,IAAMW,GAAlB,CAAwBV,IAAMc,GAAxC,CACA/D,GAAI,CAAJ,EAAU+C,IAAMS,GAAN,CAAYR,IAAMY,GAAlB,CAAwBX,IAAMe,GAAxC,CACAhE,GAAI,CAAJ,EAAU+C,IAAMU,GAAN,CAAYT,IAAMa,GAAlB,CAAwBZ,IAAMgB,GAAxC,CAEA,MAAO,KAAP,CAEH,CAjI6B,CAmI9Blf,eAAgB,wBAAW8I,CAAX,CAAe,CAE3B,GAAImS,IAAK,KAAK/C,QAAd,CAEA+C,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAC5BmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAC5BmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAAcmS,GAAI,CAAJ,GAAWnS,CAAX,CAE5B,MAAO,KAAP,CAEH,CA7I6B,CA+I9B+W,YAAa,sBAAY,CAErB,GAAI5E,IAAK,KAAK/C,QAAd,CAEA,GAAIjO,GAAIgR,GAAI,CAAJ,CAAR,CAAiB3R,EAAI2R,GAAI,CAAJ,CAArB,CAA8BpB,EAAIoB,GAAI,CAAJ,CAAlC,CACIgB,EAAIhB,GAAI,CAAJ,CADR,CACiBhD,EAAIgD,GAAI,CAAJ,CADrB,CAC8BhS,EAAIgS,GAAI,CAAJ,CADlC,CAEI0O,EAAI1O,GAAI,CAAJ,CAFR,CAEiBkI,EAAIlI,GAAI,CAAJ,CAFrB,CAE8B5W,EAAI4W,GAAI,CAAJ,CAFlC,CAIA,MAAOhR,GAAIgO,CAAJ,CAAQ5T,CAAR,CAAY4F,EAAIhB,CAAJ,CAAQka,CAApB,CAAwB7Z,EAAI2S,CAAJ,CAAQ5X,CAAhC,CAAoCiF,EAAIL,CAAJ,CAAQ0gB,CAA5C,CAAgD9P,EAAIoC,CAAJ,CAAQkH,CAAxD,CAA4DtJ,EAAI5B,CAAJ,CAAQ0R,CAA3E,CAEH,CAzJ6B,CA2J9B3J,WAAY,oBAAWnf,MAAX,CAAmBof,iBAAnB,CAAuC,CAE/C,GAAKpf,QAAUA,OAAOmZ,SAAtB,CAAkC,CAE9BhjB,QAAQ+iB,KAAR,CAAe,kEAAf,EAEH,CAED,GAAIoB,IAAKta,OAAOqX,QAAhB,CACI+C,GAAK,KAAK/C,QADd,CAGI+B,IAAMkB,GAAI,CAAJ,CAHV,CAGmBd,IAAMc,GAAI,CAAJ,CAHzB,CAGkCV,IAAMU,GAAI,CAAJ,CAHxC,CAIIjB,IAAMiB,GAAI,CAAJ,CAJV,CAImBb,IAAMa,GAAI,CAAJ,CAJzB,CAIkCT,IAAMS,GAAI,CAAJ,CAJxC,CAKIhB,IAAMgB,GAAI,CAAJ,CALV,CAKmBZ,IAAMY,GAAI,CAAJ,CALzB,CAKkCR,IAAMQ,GAAI,CAAJ,CALxC,CAOI+E,IAAMvF,IAAML,GAAN,CAAYI,IAAMH,GAP5B,CAQI4F,IAAMzF,IAAMP,GAAN,CAAYQ,IAAMT,GAR5B,CASIkG,IAAM7F,IAAML,GAAN,CAAYI,IAAMH,GAT5B,CAWImG,IAAMrG,IAAMiG,GAAN,CAAY7F,IAAM8F,GAAlB,CAAwB1F,IAAM2F,GAXxC,CAaA,GAAKE,MAAQ,CAAb,CAAiB,CAEb,GAAIC,KAAM,oEAAV,CAEA,GAAKN,oBAAsB,IAA3B,CAAkC,CAE9B,KAAM,IAAI3I,MAAJ,CAAWiJ,GAAX,CAAN,CAEH,CAJD,IAIO,CAEHvpB,QAAQgK,IAAR,CAAcuf,GAAd,EAEH,CAED,MAAO,MAAKrF,QAAL,EAAP,CAEH,CAED,GAAIsF,QAAS,EAAIF,GAAjB,CAEArF,GAAI,CAAJ,EAAUiF,IAAMM,MAAhB,CACAvF,GAAI,CAAJ,EAAU,CAAER,IAAMF,GAAN,CAAYI,IAAMN,GAApB,EAA4BmG,MAAtC,CACAvF,GAAI,CAAJ,EAAU,CAAEP,IAAML,GAAN,CAAYI,IAAMH,GAApB,EAA4BkG,MAAtC,CAEAvF,GAAI,CAAJ,EAAUkF,IAAMK,MAAhB,CACAvF,GAAI,CAAJ,EAAU,CAAEN,IAAMV,GAAN,CAAYQ,IAAMN,GAApB,EAA4BqG,MAAtC,CACAvF,GAAI,CAAJ,EAAU,CAAER,IAAMP,GAAN,CAAYQ,IAAMT,GAApB,EAA4BuG,MAAtC,CAEAvF,GAAI,CAAJ,EAAUmF,IAAMI,MAAhB,CACAvF,GAAI,CAAJ,EAAU,CAAEZ,IAAMF,GAAN,CAAYI,IAAMN,GAApB,EAA4BuG,MAAtC,CACAvF,GAAI,CAAJ,EAAU,CAAEX,IAAML,GAAN,CAAYI,IAAMH,GAApB,EAA4BsG,MAAtC,CAEA,MAAO,KAAP,CAEH,CAlN6B,CAoN9BV,UAAW,oBAAY,CAEnB,GAAI9X,IAAJ,CAASgB,EAAI,KAAKkP,QAAlB,CAEAlQ,IAAMgB,EAAG,CAAH,CAAN,CAAcA,EAAG,CAAH,EAASA,EAAG,CAAH,CAAT,CAAiBA,EAAG,CAAH,EAAShB,GAAT,CAC/BA,IAAMgB,EAAG,CAAH,CAAN,CAAcA,EAAG,CAAH,EAASA,EAAG,CAAH,CAAT,CAAiBA,EAAG,CAAH,EAAShB,GAAT,CAC/BA,IAAMgB,EAAG,CAAH,CAAN,CAAcA,EAAG,CAAH,EAASA,EAAG,CAAH,CAAT,CAAiBA,EAAG,CAAH,EAAShB,GAAT,CAE/B,MAAO,KAAP,CAEH,CA9N6B,CAgO9B4hB,gBAAiB,yBAAWC,OAAX,CAAqB,CAElC,MAAO,MAAKH,cAAL,CAAqBG,OAArB,EAA+B7J,UAA/B,CAA2C,IAA3C,EAAkDF,SAAlD,EAAP,CAEH,CApO6B,CAsO9BgK,mBAAoB,4BAAW9D,CAAX,CAAe,CAE/B,GAAIhd,GAAI,KAAKkP,QAAb,CAEA8N,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CACAgd,EAAG,CAAH,EAAShd,EAAG,CAAH,CAAT,CAEA,MAAO,KAAP,CAEH,CAtP6B,CAwP9B+gB,eAAgB,wBAAW5I,EAAX,CAAeC,EAAf,CAAmBmB,EAAnB,CAAuBC,EAAvB,CAA2BvtB,QAA3B,CAAqC+0B,EAArC,CAAyCC,EAAzC,CAA8C,CAE1D,GAAIpQ,GAAI9jB,KAAKyS,GAAL,CAAUvT,QAAV,CAAR,CACA,GAAI6T,GAAI/S,KAAK0S,GAAL,CAAUxT,QAAV,CAAR,CAEA,KAAK/B,GAAL,CACIqvB,GAAK1I,CADT,CACY0I,GAAKzZ,CADjB,CACoB,CAAEyZ,EAAF,EAAS1I,EAAImQ,EAAJ,CAASlhB,EAAImhB,EAAtB,EAA6BD,EAA7B,CAAkC7I,EADtD,CAEI,CAAEqB,EAAF,CAAO1Z,CAFX,CAEc0Z,GAAK3I,CAFnB,CAEsB,CAAE2I,EAAF,EAAS,CAAE1Z,CAAF,CAAMkhB,EAAN,CAAWnQ,EAAIoQ,EAAxB,EAA+BA,EAA/B,CAAoC7I,EAF1D,CAGI,CAHJ,CAGO,CAHP,CAGU,CAHV,EAMH,CAnQ6B,CAqQ9BnkB,MAAO,eAAWslB,EAAX,CAAeC,EAAf,CAAoB,CAEvB,GAAIvH,IAAK,KAAK/C,QAAd,CAEA+C,GAAI,CAAJ,GAAWsH,EAAX,CAAetH,GAAI,CAAJ,GAAWsH,EAAX,CAAetH,GAAI,CAAJ,GAAWsH,EAAX,CAC9BtH,GAAI,CAAJ,GAAWuH,EAAX,CAAevH,GAAI,CAAJ,GAAWuH,EAAX,CAAevH,GAAI,CAAJ,GAAWuH,EAAX,CAE9B,MAAO,KAAP,CAEH,CA9Q6B,CAgR9B0H,OAAQ,gBAAW/uB,KAAX,CAAmB,CAEvB,GAAI0e,GAAI9jB,KAAKyS,GAAL,CAAUrN,KAAV,CAAR,CACA,GAAI2N,GAAI/S,KAAK0S,GAAL,CAAUtN,KAAV,CAAR,CAEA,GAAI8f,IAAK,KAAK/C,QAAd,CAEA,GAAIsF,KAAMvC,GAAI,CAAJ,CAAV,CAAmBwC,IAAMxC,GAAI,CAAJ,CAAzB,CAAkCyC,IAAMzC,GAAI,CAAJ,CAAxC,CACA,GAAI2C,KAAM3C,GAAI,CAAJ,CAAV,CAAmB4C,IAAM5C,GAAI,CAAJ,CAAzB,CAAkC6C,IAAM7C,GAAI,CAAJ,CAAxC,CAEAA,GAAI,CAAJ,EAAUpB,EAAI2D,GAAJ,CAAU1U,EAAI8U,GAAxB,CACA3C,GAAI,CAAJ,EAAUpB,EAAI4D,GAAJ,CAAU3U,EAAI+U,GAAxB,CACA5C,GAAI,CAAJ,EAAUpB,EAAI6D,GAAJ,CAAU5U,EAAIgV,GAAxB,CAEA7C,GAAI,CAAJ,EAAU,CAAEnS,CAAF,CAAM0U,GAAN,CAAY3D,EAAI+D,GAA1B,CACA3C,GAAI,CAAJ,EAAU,CAAEnS,CAAF,CAAM2U,GAAN,CAAY5D,EAAIgE,GAA1B,CACA5C,GAAI,CAAJ,EAAU,CAAEnS,CAAF,CAAM4U,GAAN,CAAY7D,EAAIiE,GAA1B,CAEA,MAAO,KAAP,CAEH,CApS6B,CAsS9BqM,UAAW,mBAAWhJ,EAAX,CAAeC,EAAf,CAAoB,CAE3B,GAAInG,IAAK,KAAK/C,QAAd,CAEA+C,GAAI,CAAJ,GAAWkG,GAAKlG,GAAI,CAAJ,CAAhB,CAAyBA,GAAI,CAAJ,GAAWkG,GAAKlG,GAAI,CAAJ,CAAhB,CAAyBA,GAAI,CAAJ,GAAWkG,GAAKlG,GAAI,CAAJ,CAAhB,CAClDA,GAAI,CAAJ,GAAWmG,GAAKnG,GAAI,CAAJ,CAAhB,CAAyBA,GAAI,CAAJ,GAAWmG,GAAKnG,GAAI,CAAJ,CAAhB,CAAyBA,GAAI,CAAJ,GAAWmG,GAAKnG,GAAI,CAAJ,CAAhB,CAElD,MAAO,KAAP,CAEH,CA/S6B,CAiT9B5B,OAAQ,gBAAWxY,MAAX,CAAoB,CAExB,GAAIoa,IAAK,KAAK/C,QAAd,CACA,GAAIiD,IAAKta,OAAOqX,QAAhB,CAEA,IAAM,GAAI7T,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAK4W,GAAI5W,CAAJ,IAAY8W,GAAI9W,CAAJ,CAAjB,CAA2B,MAAO,MAAP,CAE9B,CAED,MAAO,KAAP,CAEH,CA9T6B,CAgU9BiV,UAAW,mBAAWtN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAElC,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,IAAM,GAAIuI,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,KAAK6T,QAAL,CAAe7T,CAAf,EAAqB2H,MAAO3H,EAAIvI,MAAX,CAArB,CAEH,CAED,MAAO,KAAP,CAEH,CA5U6B,CA8U9Byd,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,GAAImf,IAAK,KAAK/C,QAAd,CAEAlM,MAAOlQ,MAAP,EAAkBmf,GAAI,CAAJ,CAAlB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CAEAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CAEAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CACAjP,MAAOlQ,OAAS,CAAhB,EAAsBmf,GAAI,CAAJ,CAAtB,CAEA,MAAOjP,MAAP,CAEH,CAnW6B,CAAlC,EAuWA;;;;OAMA,GAAIoe,WAAY,CAAhB,CAEA,QAASC,QAAT,CAAkBC,KAAlB,CAAyBC,OAAzB,CAAkCC,KAAlC,CAAyCC,KAAzC,CAAgDC,SAAhD,CAA2DC,SAA3D,CAAsEC,MAAtE,CAA8ExsB,IAA9E,CAAoFysB,UAApF,CAAgGC,QAAhG,CAA2G,CAEvG3nB,OAAOgI,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAExH,MAAOymB,WAAT,CAAnC,EAEA,KAAK/U,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA,KAAKgW,IAAL,CAAY,EAAZ,CAEA,KAAKT,KAAL,CAAaA,QAAU7xB,SAAV,CAAsB6xB,KAAtB,CAA8BD,QAAQW,aAAnD,CACA,KAAKC,OAAL,CAAe,EAAf,CAEA,KAAKV,OAAL,CAAeA,UAAY9xB,SAAZ,CAAwB8xB,OAAxB,CAAkCF,QAAQa,eAAzD,CAEA,KAAKV,KAAL,CAAaA,QAAU/xB,SAAV,CAAsB+xB,KAAtB,CAA8Bra,mBAA3C,CACA,KAAKsa,KAAL,CAAaA,QAAUhyB,SAAV,CAAsBgyB,KAAtB,CAA8Bta,mBAA3C,CAEA,KAAKua,SAAL,CAAiBA,YAAcjyB,SAAd,CAA0BiyB,SAA1B,CAAsCla,YAAvD,CACA,KAAKma,SAAL,CAAiBA,YAAclyB,SAAd,CAA0BkyB,SAA1B,CAAsCja,wBAAvD,CAEA,KAAKma,UAAL,CAAkBA,aAAepyB,SAAf,CAA2BoyB,UAA3B,CAAwC,CAA1D,CAEA,KAAKD,MAAL,CAAcA,SAAWnyB,SAAX,CAAuBmyB,MAAvB,CAAgCnZ,UAA9C,CACA,KAAKrT,IAAL,CAAYA,OAAS3F,SAAT,CAAqB2F,IAArB,CAA4BuS,gBAAxC,CAEA,KAAK7U,MAAL,CAAc,GAAIgD,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAd,CACA,KAAKoI,MAAL,CAAc,GAAIpI,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAd,CACA,KAAK0E,MAAL,CAAc,GAAI1E,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAd,CACA,KAAK7J,QAAL,CAAgB,CAAhB,CAEA,KAAKk2B,gBAAL,CAAwB,IAAxB,CACA,KAAKtqB,MAAL,CAAc,GAAI2oB,QAAJ,EAAd,CAEA,KAAK4B,eAAL,CAAuB,IAAvB,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CACA,KAAKC,KAAL,CAAa,IAAb,CACA,KAAKC,eAAL,CAAuB,CAAvB,CAA0B;AAE1B;AACA;AACA;AACA;AACA,KAAKT,QAAL,CAAgBA,WAAaryB,SAAb,CAAyBqyB,QAAzB,CAAoC5W,cAApD,CAEA,KAAKsX,OAAL,CAAe,CAAf,CACA,KAAK5zB,QAAL,CAAgB,IAAhB,CAEH,CAEDyyB,QAAQW,aAAR,CAAwBvyB,SAAxB,CACA4xB,QAAQa,eAAR,CAA0Bxb,SAA1B,CAEA2a,QAAQnnB,SAAR,CAAoBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeC,gBAAgBH,SAA/B,CAAf,CAA2D,CAE3EI,YAAa+mB,OAF8D,CAI3EoB,UAAW,IAJgE,CAM3EC,aAAc,uBAAY,CAEtB,KAAK7qB,MAAL,CAAYkpB,cAAZ,CAA4B,KAAKjuB,MAAL,CAAYzJ,CAAxC,CAA2C,KAAKyJ,MAAL,CAAYxJ,CAAvD,CAA0D,KAAK4U,MAAL,CAAY7U,CAAtE,CAAyE,KAAK6U,MAAL,CAAY5U,CAArF,CAAwF,KAAK2C,QAA7F,CAAuG,KAAKuO,MAAL,CAAYnR,CAAnH,CAAsH,KAAKmR,MAAL,CAAYlR,CAAlI,EAEH,CAV0E,CAY3E6C,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAhB0E,CAkB3EA,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAK+lB,IAAL,CAAY/lB,OAAO+lB,IAAnB,CAEA,KAAKT,KAAL,CAAatlB,OAAOslB,KAApB,CACA,KAAKW,OAAL,CAAejmB,OAAOimB,OAAP,CAAehf,KAAf,CAAsB,CAAtB,CAAf,CAEA,KAAKse,OAAL,CAAevlB,OAAOulB,OAAtB,CAEA,KAAKC,KAAL,CAAaxlB,OAAOwlB,KAApB,CACA,KAAKC,KAAL,CAAazlB,OAAOylB,KAApB,CAEA,KAAKC,SAAL,CAAiB1lB,OAAO0lB,SAAxB,CACA,KAAKC,SAAL,CAAiB3lB,OAAO2lB,SAAxB,CAEA,KAAKE,UAAL,CAAkB7lB,OAAO6lB,UAAzB,CAEA,KAAKD,MAAL,CAAc5lB,OAAO4lB,MAArB,CACA,KAAKxsB,IAAL,CAAY4G,OAAO5G,IAAnB,CAEA,KAAKtC,MAAL,CAAYR,IAAZ,CAAkB0J,OAAOlJ,MAAzB,EACA,KAAKoL,MAAL,CAAY5L,IAAZ,CAAkB0J,OAAOkC,MAAzB,EACA,KAAK1D,MAAL,CAAYlI,IAAZ,CAAkB0J,OAAOxB,MAAzB,EACA,KAAKvO,QAAL,CAAgB+P,OAAO/P,QAAvB,CAEA,KAAKk2B,gBAAL,CAAwBnmB,OAAOmmB,gBAA/B,CACA,KAAKtqB,MAAL,CAAYvF,IAAZ,CAAkB0J,OAAOnE,MAAzB,EAEA,KAAKuqB,eAAL,CAAuBpmB,OAAOomB,eAA9B,CACA,KAAKC,gBAAL,CAAwBrmB,OAAOqmB,gBAA/B,CACA,KAAKC,KAAL,CAAatmB,OAAOsmB,KAApB,CACA,KAAKC,eAAL,CAAuBvmB,OAAOumB,eAA9B,CACA,KAAKT,QAAL,CAAgB9lB,OAAO8lB,QAAvB,CAEA,MAAO,KAAP,CAEH,CAtD0E,CAwD3Ea,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAIC,cAAiBD,OAASnzB,SAAT,EAAsB,MAAOmzB,KAAP,GAAgB,QAA3D,CAEA,GAAK,CAAEC,YAAF,EAAkBD,KAAKE,QAAL,CAAe,KAAKzW,IAApB,IAA+B5c,SAAtD,CAAkE,CAE9D,MAAOmzB,MAAKE,QAAL,CAAe,KAAKzW,IAApB,CAAP,CAEH,CAED,QAAS0W,WAAT,CAAqBzB,KAArB,CAA6B,CAEzB,GAAI34B,OAAJ,CAEA,GAAK24B,gBAAiB0B,kBAAtB,CAA0C,CAEtCr6B,OAAS24B,KAAT,CAEH,CAJD,IAIO,CAEH34B,OAAS+G,SAASuzB,eAAT,CAA0B,8BAA1B,CAA0D,QAA1D,CAAT,CACAt6B,OAAOgC,KAAP,CAAe22B,MAAM32B,KAArB,CACAhC,OAAOiC,MAAP,CAAgB02B,MAAM12B,MAAtB,CAEA,GAAI7B,SAAUJ,OAAOC,UAAP,CAAmB,IAAnB,CAAd,CAEA,GAAK04B,gBAAiB4B,UAAtB,CAAkC,CAE9Bn6B,QAAQo6B,YAAR,CAAsB7B,KAAtB,CAA6B,CAA7B,CAAgC,CAAhC,EAEH,CAJD,IAIO,CAEHv4B,QAAQq6B,SAAR,CAAmB9B,KAAnB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgCA,MAAM32B,KAAtC,CAA6C22B,MAAM12B,MAAnD,EAEH,CAEJ,CAED,GAAKjC,OAAOgC,KAAP,CAAe,IAAf,EAAuBhC,OAAOiC,MAAP,CAAgB,IAA5C,CAAmD,CAE/C,MAAOjC,QAAO06B,SAAP,CAAkB,YAAlB,CAAgC,GAAhC,CAAP,CAEH,CAJD,IAIO,CAEH,MAAO16B,QAAO06B,SAAP,CAAkB,WAAlB,CAAP,CAEH,CAEJ,CAED,GAAI9gB,QAAS,CAET+gB,SAAU,CACNd,QAAS,GADH,CAENptB,KAAM,SAFA,CAGNmuB,UAAW,gBAHL,CAFD,CAQTlX,KAAM,KAAKA,IARF,CAST0V,KAAM,KAAKA,IATF,CAWTR,QAAS,KAAKA,OAXL,CAaTrjB,OAAQ,CAAE,KAAKA,MAAL,CAAY7U,CAAd,CAAiB,KAAK6U,MAAL,CAAY5U,CAA7B,CAbC,CAcTwJ,OAAQ,CAAE,KAAKA,MAAL,CAAYzJ,CAAd,CAAiB,KAAKyJ,MAAL,CAAYxJ,CAA7B,CAdC,CAeTkR,OAAQ,CAAE,KAAKA,MAAL,CAAYnR,CAAd,CAAiB,KAAKmR,MAAL,CAAYlR,CAA7B,CAfC,CAgBT2C,SAAU,KAAKA,QAhBN,CAkBTu3B,KAAM,CAAE,KAAKhC,KAAP,CAAc,KAAKC,KAAnB,CAlBG,CAoBTG,OAAQ,KAAKA,MApBJ,CAqBTD,UAAW,KAAKA,SArBP,CAsBTD,UAAW,KAAKA,SAtBP,CAuBTG,WAAY,KAAKA,UAvBR,CAyBTS,MAAO,KAAKA,KAzBH,CAAb,CA6BA,GAAK,KAAKhB,KAAL,GAAe7xB,SAApB,CAAgC,CAE5B;AAEA,GAAI6xB,OAAQ,KAAKA,KAAjB,CAEA,GAAKA,MAAMjV,IAAN,GAAe5c,SAApB,CAAgC,CAE5B6xB,MAAMjV,IAAN,CAAaT,MAAMG,YAAN,EAAb,CAAmC;AAEtC,CAED,GAAK,CAAE8W,YAAF,EAAkBD,KAAKa,MAAL,CAAanC,MAAMjV,IAAnB,IAA8B5c,SAArD,CAAiE,CAE7DmzB,KAAKa,MAAL,CAAanC,MAAMjV,IAAnB,EAA4B,CACxBA,KAAMiV,MAAMjV,IADY,CAExBqX,IAAKX,WAAYzB,KAAZ,CAFmB,CAA5B,CAKH,CAED/e,OAAO+e,KAAP,CAAeA,MAAMjV,IAArB,CAEH,CAED,GAAK,CAAEwW,YAAP,CAAsB,CAElBD,KAAKE,QAAL,CAAe,KAAKzW,IAApB,EAA6B9J,MAA7B,CAEH,CAED,MAAOA,OAAP,CAEH,CAxK0E,CA0K3E7N,QAAS,kBAAY,CAEjB,KAAKjC,aAAL,CAAoB,CAAE2C,KAAM,SAAR,CAApB,EAEH,CA9K0E,CAgL3EuuB,YAAa,qBAAWC,EAAX,CAAgB,CAEzB,GAAK,KAAKrC,OAAL,GAAiB7a,SAAtB,CAAkC,OAElCkd,GAAG5U,YAAH,CAAiB,KAAKnX,MAAtB,EAEA,GAAK+rB,GAAGv6B,CAAH,CAAO,CAAP,EAAYu6B,GAAGv6B,CAAH,CAAO,CAAxB,CAA4B,CAExB,OAAS,KAAKm4B,KAAd,EAEI,IAAKta,eAAL,CAEI0c,GAAGv6B,CAAH,CAAOu6B,GAAGv6B,CAAH,CAAO0D,KAAKmT,KAAL,CAAY0jB,GAAGv6B,CAAf,CAAd,CACA,MAEJ,IAAK8d,oBAAL,CAEIyc,GAAGv6B,CAAH,CAAOu6B,GAAGv6B,CAAH,CAAO,CAAP,CAAW,CAAX,CAAe,CAAtB,CACA,MAEJ,IAAK+d,uBAAL,CAEI,GAAKra,KAAK6iB,GAAL,CAAU7iB,KAAKmT,KAAL,CAAY0jB,GAAGv6B,CAAf,EAAqB,CAA/B,IAAuC,CAA5C,CAAgD,CAE5Cu6B,GAAGv6B,CAAH,CAAO0D,KAAK8gB,IAAL,CAAW+V,GAAGv6B,CAAd,EAAoBu6B,GAAGv6B,CAA9B,CAEH,CAJD,IAIO,CAEHu6B,GAAGv6B,CAAH,CAAOu6B,GAAGv6B,CAAH,CAAO0D,KAAKmT,KAAL,CAAY0jB,GAAGv6B,CAAf,CAAd,CAEH,CACD,MAvBR,CA2BH,CAED,GAAKu6B,GAAGt6B,CAAH,CAAO,CAAP,EAAYs6B,GAAGt6B,CAAH,CAAO,CAAxB,CAA4B,CAExB,OAAS,KAAKm4B,KAAd,EAEI,IAAKva,eAAL,CAEI0c,GAAGt6B,CAAH,CAAOs6B,GAAGt6B,CAAH,CAAOyD,KAAKmT,KAAL,CAAY0jB,GAAGt6B,CAAf,CAAd,CACA,MAEJ,IAAK6d,oBAAL,CAEIyc,GAAGt6B,CAAH,CAAOs6B,GAAGt6B,CAAH,CAAO,CAAP,CAAW,CAAX,CAAe,CAAtB,CACA,MAEJ,IAAK8d,uBAAL,CAEI,GAAKra,KAAK6iB,GAAL,CAAU7iB,KAAKmT,KAAL,CAAY0jB,GAAGt6B,CAAf,EAAqB,CAA/B,IAAuC,CAA5C,CAAgD,CAE5Cs6B,GAAGt6B,CAAH,CAAOyD,KAAK8gB,IAAL,CAAW+V,GAAGt6B,CAAd,EAAoBs6B,GAAGt6B,CAA9B,CAEH,CAJD,IAIO,CAEHs6B,GAAGt6B,CAAH,CAAOs6B,GAAGt6B,CAAH,CAAOyD,KAAKmT,KAAL,CAAY0jB,GAAGt6B,CAAf,CAAd,CAEH,CACD,MAvBR,CA2BH,CAED,GAAK,KAAKg5B,KAAV,CAAkB,CAEdsB,GAAGt6B,CAAH,CAAO,EAAIs6B,GAAGt6B,CAAd,CAEH,CAEJ,CA1P0E,CAA3D,CAApB,CA8PA6Q,OAAOgI,cAAP,CAAuBkf,QAAQnnB,SAA/B,CAA0C,aAA1C,CAAyD,CAErDhQ,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,GAAKA,QAAU,IAAf,CAAsB,KAAK6nB,OAAL,GAEzB,CANoD,CAAzD,EAUA;;;;;;OAQA,QAASqB,QAAT,CAAkBx6B,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA2BilB,CAA3B,CAA+B,CAE3B,KAAKnlB,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAASA,GAAK,CAAd,CACA,KAAKC,CAAL,CAASA,GAAK,CAAd,CACA,KAAKilB,CAAL,CAAWA,IAAM/e,SAAR,CAAsB+e,CAAtB,CAA0B,CAAnC,CAEH,CAEDrU,OAAO4B,MAAP,CAAe8nB,QAAQ3pB,SAAvB,CAAkC,CAE9B4pB,UAAW,IAFmB,CAI9B55B,IAAK,aAAWb,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAoBilB,CAApB,CAAwB,CAEzB,KAAKnlB,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CACA,KAAKilB,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAb6B,CAe9BP,UAAW,mBAAWC,MAAX,CAAoB,CAE3B,KAAK7kB,CAAL,CAAS6kB,MAAT,CACA,KAAK5kB,CAAL,CAAS4kB,MAAT,CACA,KAAK3kB,CAAL,CAAS2kB,MAAT,CACA,KAAKM,CAAL,CAASN,MAAT,CAEA,MAAO,KAAP,CAEH,CAxB6B,CA0B9BC,KAAM,cAAW9kB,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAhC6B,CAkC9B+kB,KAAM,cAAW9kB,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAxC6B,CA0C9B80B,KAAM,cAAW70B,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAhD6B,CAkD9Bw6B,KAAM,cAAWvV,CAAX,CAAe,CAEjB,KAAKA,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAxD6B,CA0D9BH,aAAc,sBAAW7L,KAAX,CAAkB7H,KAAlB,CAA0B,CAEpC,OAAS6H,KAAT,EAEI,IAAK,EAAL,CAAQ,KAAKnZ,CAAL,CAASsR,KAAT,CAAgB,MACxB,IAAK,EAAL,CAAQ,KAAKrR,CAAL,CAASqR,KAAT,CAAgB,MACxB,IAAK,EAAL,CAAQ,KAAKpR,CAAL,CAASoR,KAAT,CAAgB,MACxB,IAAK,EAAL,CAAQ,KAAK6T,CAAL,CAAS7T,KAAT,CAAgB,MACxB,QAAS,KAAM,IAAI2T,MAAJ,CAAW,0BAA4B9L,KAAvC,CAAN,CANb,CAUA,MAAO,KAAP,CAEH,CAxE6B,CA0E9B+L,aAAc,sBAAW/L,KAAX,CAAmB,CAE7B,OAASA,KAAT,EAEI,IAAK,EAAL,CAAQ,MAAO,MAAKnZ,CAAZ,CACR,IAAK,EAAL,CAAQ,MAAO,MAAKC,CAAZ,CACR,IAAK,EAAL,CAAQ,MAAO,MAAKC,CAAZ,CACR,IAAK,EAAL,CAAQ,MAAO,MAAKilB,CAAZ,CACR,QAAS,KAAM,IAAIF,MAAJ,CAAW,0BAA4B9L,KAAvC,CAAN,CANb,CAUH,CAtF6B,CAwF9BrW,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAKjR,CAA3B,CAA8B,KAAKC,CAAnC,CAAsC,KAAKC,CAA3C,CAA8C,KAAKilB,CAAnD,CAAP,CAEH,CA5F6B,CA8F9Blc,KAAM,cAAWsE,CAAX,CAAe,CAEjB,KAAKvN,CAAL,CAASuN,EAAEvN,CAAX,CACA,KAAKC,CAAL,CAASsN,EAAEtN,CAAX,CACA,KAAKC,CAAL,CAASqN,EAAErN,CAAX,CACA,KAAKilB,CAAL,CAAW5X,EAAE4X,CAAF,GAAQ/e,SAAV,CAAwBmH,EAAE4X,CAA1B,CAA8B,CAAvC,CAEA,MAAO,KAAP,CAEH,CAvG6B,CAyG9B3jB,IAAK,aAAW+L,CAAX,CAAc4X,CAAd,CAAkB,CAEnB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,uFAAd,EACA,MAAO,MAAKyW,UAAL,CAAiB7X,CAAjB,CAAoB4X,CAApB,CAAP,CAEH,CAED,KAAKnlB,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CACA,KAAKC,CAAL,EAAUqN,EAAErN,CAAZ,CACA,KAAKilB,CAAL,EAAU5X,EAAE4X,CAAZ,CAEA,MAAO,KAAP,CAEH,CAzH6B,CA2H9BE,UAAW,mBAAW5O,CAAX,CAAe,CAEtB,KAAKzW,CAAL,EAAUyW,CAAV,CACA,KAAKxW,CAAL,EAAUwW,CAAV,CACA,KAAKvW,CAAL,EAAUuW,CAAV,CACA,KAAK0O,CAAL,EAAU1O,CAAV,CAEA,MAAO,KAAP,CAEH,CApI6B,CAsI9B2O,WAAY,oBAAWxN,CAAX,CAAcX,CAAd,CAAkB,CAE1B,KAAKjX,CAAL,CAAS4X,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAjB,CACA,KAAKC,CAAL,CAAS2X,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAjB,CACA,KAAKC,CAAL,CAAS0X,EAAE1X,CAAF,CAAM+W,EAAE/W,CAAjB,CACA,KAAKilB,CAAL,CAASvN,EAAEuN,CAAF,CAAMlO,EAAEkO,CAAjB,CAEA,MAAO,KAAP,CAEH,CA/I6B,CAiJ9BG,gBAAiB,yBAAW/X,CAAX,CAAckJ,CAAd,CAAkB,CAE/B,KAAKzW,CAAL,EAAUuN,EAAEvN,CAAF,CAAMyW,CAAhB,CACA,KAAKxW,CAAL,EAAUsN,EAAEtN,CAAF,CAAMwW,CAAhB,CACA,KAAKvW,CAAL,EAAUqN,EAAErN,CAAF,CAAMuW,CAAhB,CACA,KAAK0O,CAAL,EAAU5X,EAAE4X,CAAF,CAAM1O,CAAhB,CAEA,MAAO,KAAP,CAEH,CA1J6B,CA4J9BvM,IAAK,aAAWqD,CAAX,CAAc4X,CAAd,CAAkB,CAEnB,GAAKA,IAAM/e,SAAX,CAAuB,CAEnBzB,QAAQgK,IAAR,CAAc,uFAAd,EACA,MAAO,MAAKW,UAAL,CAAiB/B,CAAjB,CAAoB4X,CAApB,CAAP,CAEH,CAED,KAAKnlB,CAAL,EAAUuN,EAAEvN,CAAZ,CACA,KAAKC,CAAL,EAAUsN,EAAEtN,CAAZ,CACA,KAAKC,CAAL,EAAUqN,EAAErN,CAAZ,CACA,KAAKilB,CAAL,EAAU5X,EAAE4X,CAAZ,CAEA,MAAO,KAAP,CAEH,CA5K6B,CA8K9BI,UAAW,mBAAW9O,CAAX,CAAe,CAEtB,KAAKzW,CAAL,EAAUyW,CAAV,CACA,KAAKxW,CAAL,EAAUwW,CAAV,CACA,KAAKvW,CAAL,EAAUuW,CAAV,CACA,KAAK0O,CAAL,EAAU1O,CAAV,CAEA,MAAO,KAAP,CAEH,CAvL6B,CAyL9BnH,WAAY,oBAAWsI,CAAX,CAAcX,CAAd,CAAkB,CAE1B,KAAKjX,CAAL,CAAS4X,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAjB,CACA,KAAKC,CAAL,CAAS2X,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAjB,CACA,KAAKC,CAAL,CAAS0X,EAAE1X,CAAF,CAAM+W,EAAE/W,CAAjB,CACA,KAAKilB,CAAL,CAASvN,EAAEuN,CAAF,CAAMlO,EAAEkO,CAAjB,CAEA,MAAO,KAAP,CAEH,CAlM6B,CAoM9BxX,eAAgB,wBAAWkX,MAAX,CAAoB,CAEhC,KAAK7kB,CAAL,EAAU6kB,MAAV,CACA,KAAK5kB,CAAL,EAAU4kB,MAAV,CACA,KAAK3kB,CAAL,EAAU2kB,MAAV,CACA,KAAKM,CAAL,EAAUN,MAAV,CAEA,MAAO,KAAP,CAEH,CA7M6B,CA+M9ByI,aAAc,sBAAW3W,CAAX,CAAe,CAEzB,GAAI3W,GAAI,KAAKA,CAAb,CAAgBC,EAAI,KAAKA,CAAzB,CAA4BC,EAAI,KAAKA,CAArC,CAAwCilB,EAAI,KAAKA,CAAjD,CACA,GAAIS,GAAIjP,EAAEkP,QAAV,CAEA,KAAK7lB,CAAL,CAAS4lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAAnC,CAAuC0lB,EAAG,EAAH,EAAUT,CAA1D,CACA,KAAKllB,CAAL,CAAS2lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,CAAH,EAAS1lB,CAAnC,CAAuC0lB,EAAG,EAAH,EAAUT,CAA1D,CACA,KAAKjlB,CAAL,CAAS0lB,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,EAAH,EAAU1lB,CAApC,CAAwC0lB,EAAG,EAAH,EAAUT,CAA3D,CACA,KAAKA,CAAL,CAASS,EAAG,CAAH,EAAS5lB,CAAT,CAAa4lB,EAAG,CAAH,EAAS3lB,CAAtB,CAA0B2lB,EAAG,EAAH,EAAU1lB,CAApC,CAAwC0lB,EAAG,EAAH,EAAUT,CAA3D,CAEA,MAAO,KAAP,CAEH,CA3N6B,CA6N9BO,aAAc,sBAAWb,MAAX,CAAoB,CAE9B,MAAO,MAAKlX,cAAL,CAAqB,EAAIkX,MAAzB,CAAP,CAEH,CAjO6B,CAmO9B8V,2BAA4B,oCAAW9P,CAAX,CAAe,CAEvC;AAEA;AAEA,KAAK1F,CAAL,CAAS,EAAIzhB,KAAKmzB,IAAL,CAAWhM,EAAE1F,CAAb,CAAb,CAEA,GAAI1O,GAAI/S,KAAK0M,IAAL,CAAW,EAAIya,EAAE1F,CAAF,CAAM0F,EAAE1F,CAAvB,CAAR,CAEA,GAAK1O,EAAI,MAAT,CAAkB,CAEd,KAAKzW,CAAL,CAAS,CAAT,CACA,KAAKC,CAAL,CAAS,CAAT,CACA,KAAKC,CAAL,CAAS,CAAT,CAEH,CAND,IAMO,CAEH,KAAKF,CAAL,CAAS6qB,EAAE7qB,CAAF,CAAMyW,CAAf,CACA,KAAKxW,CAAL,CAAS4qB,EAAE5qB,CAAF,CAAMwW,CAAf,CACA,KAAKvW,CAAL,CAAS2qB,EAAE3qB,CAAF,CAAMuW,CAAf,CAEH,CAED,MAAO,KAAP,CAEH,CA7P6B,CA+P9BmkB,+BAAgC,wCAAWjkB,CAAX,CAAe,CAE3C;AAEA;AAEA,GAAIvJ,MAAJ,CAAWpN,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAqB;AACjB26B,QAAU,IADd,CACqB;AACjBC,SAAW,GAFf,CAEqB;AAEjBlS,GAAKjS,EAAEkP,QAJX,CAMIoN,IAAMrK,GAAI,CAAJ,CANV,CAMmBsK,IAAMtK,GAAI,CAAJ,CANzB,CAMkCuK,IAAMvK,GAAI,CAAJ,CANxC,CAOIwK,IAAMxK,GAAI,CAAJ,CAPV,CAOmByK,IAAMzK,GAAI,CAAJ,CAPzB,CAOkC0K,IAAM1K,GAAI,CAAJ,CAPxC,CAQI2K,IAAM3K,GAAI,CAAJ,CARV,CAQmB4K,IAAM5K,GAAI,CAAJ,CARzB,CAQkC6K,IAAM7K,GAAI,EAAJ,CARxC,CAUA,GAAOllB,KAAK6iB,GAAL,CAAU2M,IAAME,GAAhB,EAAwByH,OAA1B,EACCn3B,KAAK6iB,GAAL,CAAU4M,IAAMI,GAAhB,EAAwBsH,OADzB,EAECn3B,KAAK6iB,GAAL,CAAU+M,IAAME,GAAhB,EAAwBqH,OAF9B,CAE0C,CAEtC;AACA;AACA;AAEA,GAAOn3B,KAAK6iB,GAAL,CAAU2M,IAAME,GAAhB,EAAwB0H,QAA1B,EACCp3B,KAAK6iB,GAAL,CAAU4M,IAAMI,GAAhB,EAAwBuH,QADzB,EAECp3B,KAAK6iB,GAAL,CAAU+M,IAAME,GAAhB,EAAwBsH,QAFzB,EAGCp3B,KAAK6iB,GAAL,CAAU0M,IAAMI,GAAN,CAAYI,GAAZ,CAAkB,CAA5B,EAAkCqH,QAHxC,CAGqD,CAEjD;AAEA,KAAKj6B,GAAL,CAAU,CAAV,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,EAEA,MAAO,KAAP,CAAa;AAEhB,CAED;AAEAuM,MAAQ1J,KAAKC,EAAb,CAEA,GAAI8rB,IAAK,CAAEwD,IAAM,CAAR,EAAc,CAAvB,CACA,GAAIrD,IAAK,CAAEyD,IAAM,CAAR,EAAc,CAAvB,CACA,GAAIvD,IAAK,CAAE2D,IAAM,CAAR,EAAc,CAAvB,CACA,GAAI/D,IAAK,CAAEwD,IAAME,GAAR,EAAgB,CAAzB,CACA,GAAIzD,IAAK,CAAEwD,IAAMI,GAAR,EAAgB,CAAzB,CACA,GAAI1D,IAAK,CAAEyD,IAAME,GAAR,EAAgB,CAAzB,CAEA,GAAO/D,GAAKG,EAAP,EAAiBH,GAAKK,EAA3B,CAAkC,CAE9B;AAEA,GAAKL,GAAKoL,OAAV,CAAoB,CAEhB76B,EAAI,CAAJ,CACAC,EAAI,WAAJ,CACAC,EAAI,WAAJ,CAEH,CAND,IAMO,CAEHF,EAAI0D,KAAK0M,IAAL,CAAWqf,EAAX,CAAJ,CACAxvB,EAAIyvB,GAAK1vB,CAAT,CACAE,EAAIyvB,GAAK3vB,CAAT,CAEH,CAEJ,CAlBD,IAkBO,IAAK4vB,GAAKE,EAAV,CAAe,CAElB;AAEA,GAAKF,GAAKiL,OAAV,CAAoB,CAEhB76B,EAAI,WAAJ,CACAC,EAAI,CAAJ,CACAC,EAAI,WAAJ,CAEH,CAND,IAMO,CAEHD,EAAIyD,KAAK0M,IAAL,CAAWwf,EAAX,CAAJ,CACA5vB,EAAI0vB,GAAKzvB,CAAT,CACAC,EAAI2vB,GAAK5vB,CAAT,CAEH,CAEJ,CAlBM,IAkBA,CAEH;AAEA,GAAK6vB,GAAK+K,OAAV,CAAoB,CAEhB76B,EAAI,WAAJ,CACAC,EAAI,WAAJ,CACAC,EAAI,CAAJ,CAEH,CAND,IAMO,CAEHA,EAAIwD,KAAK0M,IAAL,CAAW0f,EAAX,CAAJ,CACA9vB,EAAI2vB,GAAKzvB,CAAT,CACAD,EAAI4vB,GAAK3vB,CAAT,CAEH,CAEJ,CAED,KAAKW,GAAL,CAAUb,CAAV,CAAaC,CAAb,CAAgBC,CAAhB,CAAmBkN,KAAnB,EAEA,MAAO,KAAP,CAAa;AAEhB,CAED;AAEA,GAAIqJ,GAAI/S,KAAK0M,IAAL,CAAW,CAAEojB,IAAMF,GAAR,GAAkBE,IAAMF,GAAxB,EACf,CAAEH,IAAMI,GAAR,GAAkBJ,IAAMI,GAAxB,CADe,CAEf,CAAEH,IAAMF,GAAR,GAAkBE,IAAMF,GAAxB,CAFI,CAAR,CAEqC;AAErC,GAAKxvB,KAAK6iB,GAAL,CAAU9P,CAAV,EAAgB,KAArB,CAA6BA,EAAI,CAAJ,CAE7B;AACA;AAEA,KAAKzW,CAAL,CAAS,CAAEwzB,IAAMF,GAAR,EAAgB7c,CAAzB,CACA,KAAKxW,CAAL,CAAS,CAAEkzB,IAAMI,GAAR,EAAgB9c,CAAzB,CACA,KAAKvW,CAAL,CAAS,CAAEkzB,IAAMF,GAAR,EAAgBzc,CAAzB,CACA,KAAK0O,CAAL,CAASzhB,KAAKmzB,IAAL,CAAW,CAAE5D,IAAMI,GAAN,CAAYI,GAAZ,CAAkB,CAApB,EAA0B,CAArC,CAAT,CAEA,MAAO,KAAP,CAEH,CA/X6B,CAiY9BhpB,IAAK,aAAW8C,CAAX,CAAe,CAEhB,KAAKvN,CAAL,CAAS0D,KAAK+G,GAAL,CAAU,KAAKzK,CAAf,CAAkBuN,EAAEvN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK+G,GAAL,CAAU,KAAKxK,CAAf,CAAkBsN,EAAEtN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK+G,GAAL,CAAU,KAAKvK,CAAf,CAAkBqN,EAAErN,CAApB,CAAT,CACA,KAAKilB,CAAL,CAASzhB,KAAK+G,GAAL,CAAU,KAAK0a,CAAf,CAAkB5X,EAAE4X,CAApB,CAAT,CAEA,MAAO,KAAP,CAEH,CA1Y6B,CA4Y9B3a,IAAK,aAAW+C,CAAX,CAAe,CAEhB,KAAKvN,CAAL,CAAS0D,KAAK8G,GAAL,CAAU,KAAKxK,CAAf,CAAkBuN,EAAEvN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8G,GAAL,CAAU,KAAKvK,CAAf,CAAkBsN,EAAEtN,CAApB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK8G,GAAL,CAAU,KAAKtK,CAAf,CAAkBqN,EAAErN,CAApB,CAAT,CACA,KAAKilB,CAAL,CAASzhB,KAAK8G,GAAL,CAAU,KAAK2a,CAAf,CAAkB5X,EAAE4X,CAApB,CAAT,CAEA,MAAO,KAAP,CAEH,CArZ6B,CAuZ9BjC,MAAO,eAAWzY,GAAX,CAAgBD,GAAhB,CAAsB,CAEzB;AAEA,KAAKxK,CAAL,CAAS0D,KAAK8G,GAAL,CAAUC,IAAIzK,CAAd,CAAiB0D,KAAK+G,GAAL,CAAUD,IAAIxK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8G,GAAL,CAAUC,IAAIxK,CAAd,CAAiByD,KAAK+G,GAAL,CAAUD,IAAIvK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK8G,GAAL,CAAUC,IAAIvK,CAAd,CAAiBwD,KAAK+G,GAAL,CAAUD,IAAItK,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CACA,KAAKilB,CAAL,CAASzhB,KAAK8G,GAAL,CAAUC,IAAI0a,CAAd,CAAiBzhB,KAAK+G,GAAL,CAAUD,IAAI2a,CAAd,CAAiB,KAAKA,CAAtB,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CAla6B,CAoa9BW,YAAa,UAAY,CAErB,GAAIrb,IAAJ,CAASD,GAAT,CAEA,MAAO,SAASsb,YAAT,CAAsBC,MAAtB,CAA8BC,MAA9B,CAAuC,CAE1C,GAAKvb,MAAQrE,SAAb,CAAyB,CAErBqE,IAAM,GAAI+vB,QAAJ,EAAN,CACAhwB,IAAM,GAAIgwB,QAAJ,EAAN,CAEH,CAED/vB,IAAI5J,GAAJ,CAASklB,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,CAAiCA,MAAjC,EACAvb,IAAI3J,GAAJ,CAASmlB,MAAT,CAAiBA,MAAjB,CAAyBA,MAAzB,CAAiCA,MAAjC,EAEA,MAAO,MAAK9C,KAAL,CAAYzY,GAAZ,CAAiBD,GAAjB,CAAP,CAEH,CAdD,CAgBH,CApBY,EApaiB,CA0b9Byb,YAAa,qBAAWxb,GAAX,CAAgBD,GAAhB,CAAsB,CAE/B,GAAI4D,QAAS,KAAKA,MAAL,EAAb,CAEA,MAAO,MAAKsX,YAAL,CAAmBtX,QAAU,CAA7B,EAAiCT,cAAjC,CAAiDjK,KAAK8G,GAAL,CAAUC,GAAV,CAAe/G,KAAK+G,GAAL,CAAUD,GAAV,CAAe4D,MAAf,CAAf,CAAjD,CAAP,CAEH,CAhc6B,CAkc9ByI,MAAO,gBAAY,CAEf,KAAK7W,CAAL,CAAS0D,KAAKmT,KAAL,CAAY,KAAK7W,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAKmT,KAAL,CAAY,KAAK5W,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAKmT,KAAL,CAAY,KAAK3W,CAAjB,CAAT,CACA,KAAKilB,CAAL,CAASzhB,KAAKmT,KAAL,CAAY,KAAKsO,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CA3c6B,CA6c9BX,KAAM,eAAY,CAEd,KAAKxkB,CAAL,CAAS0D,KAAK8gB,IAAL,CAAW,KAAKxkB,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAK8gB,IAAL,CAAW,KAAKvkB,CAAhB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAK8gB,IAAL,CAAW,KAAKtkB,CAAhB,CAAT,CACA,KAAKilB,CAAL,CAASzhB,KAAK8gB,IAAL,CAAW,KAAKW,CAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CAtd6B,CAwd9Be,MAAO,gBAAY,CAEf,KAAKlmB,CAAL,CAAS0D,KAAKwiB,KAAL,CAAY,KAAKlmB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASyD,KAAKwiB,KAAL,CAAY,KAAKjmB,CAAjB,CAAT,CACA,KAAKC,CAAL,CAASwD,KAAKwiB,KAAL,CAAY,KAAKhmB,CAAjB,CAAT,CACA,KAAKilB,CAAL,CAASzhB,KAAKwiB,KAAL,CAAY,KAAKf,CAAjB,CAAT,CAEA,MAAO,KAAP,CAEH,CAje6B,CAme9BgB,YAAa,sBAAY,CAErB,KAAKnmB,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiB0D,KAAK8gB,IAAL,CAAW,KAAKxkB,CAAhB,CAAjB,CAAuC0D,KAAKmT,KAAL,CAAY,KAAK7W,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiByD,KAAK8gB,IAAL,CAAW,KAAKvkB,CAAhB,CAAjB,CAAuCyD,KAAKmT,KAAL,CAAY,KAAK5W,CAAjB,CAAhD,CACA,KAAKC,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBwD,KAAK8gB,IAAL,CAAW,KAAKtkB,CAAhB,CAAjB,CAAuCwD,KAAKmT,KAAL,CAAY,KAAK3W,CAAjB,CAAhD,CACA,KAAKilB,CAAL,CAAW,KAAKA,CAAL,CAAS,CAAX,CAAiBzhB,KAAK8gB,IAAL,CAAW,KAAKW,CAAhB,CAAjB,CAAuCzhB,KAAKmT,KAAL,CAAY,KAAKsO,CAAjB,CAAhD,CAEA,MAAO,KAAP,CAEH,CA5e6B,CA8e9BiB,OAAQ,iBAAY,CAEhB,KAAKpmB,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKC,CAAL,CAAS,CAAE,KAAKA,CAAhB,CACA,KAAKilB,CAAL,CAAS,CAAE,KAAKA,CAAhB,CAEA,MAAO,KAAP,CAEH,CAvf6B,CAyf9Bha,IAAK,aAAWoC,CAAX,CAAe,CAEhB,MAAO,MAAKvN,CAAL,CAASuN,EAAEvN,CAAX,CAAe,KAAKC,CAAL,CAASsN,EAAEtN,CAA1B,CAA8B,KAAKC,CAAL,CAASqN,EAAErN,CAAzC,CAA6C,KAAKilB,CAAL,CAAS5X,EAAE4X,CAA/D,CAEH,CA7f6B,CA+f9BkB,SAAU,mBAAY,CAElB,MAAO,MAAKrmB,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAKC,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAAlD,CAAsD,KAAKilB,CAAL,CAAS,KAAKA,CAA3E,CAEH,CAngB6B,CAqgB9B/W,OAAQ,iBAAY,CAEhB,MAAO1K,MAAK0M,IAAL,CAAW,KAAKpQ,CAAL,CAAS,KAAKA,CAAd,CAAkB,KAAKC,CAAL,CAAS,KAAKA,CAAhC,CAAoC,KAAKC,CAAL,CAAS,KAAKA,CAAlD,CAAsD,KAAKilB,CAAL,CAAS,KAAKA,CAA/E,CAAP,CAEH,CAzgB6B,CA2gB9BmB,gBAAiB,0BAAY,CAEzB,MAAO5iB,MAAK6iB,GAAL,CAAU,KAAKvmB,CAAf,EAAqB0D,KAAK6iB,GAAL,CAAU,KAAKtmB,CAAf,CAArB,CAA0CyD,KAAK6iB,GAAL,CAAU,KAAKrmB,CAAf,CAA1C,CAA+DwD,KAAK6iB,GAAL,CAAU,KAAKpB,CAAf,CAAtE,CAEH,CA/gB6B,CAihB9BqB,UAAW,oBAAY,CAEnB,MAAO,MAAKd,YAAL,CAAmB,KAAKtX,MAAL,IAAiB,CAApC,CAAP,CAEH,CArhB6B,CAuhB9BwY,UAAW,mBAAWxY,MAAX,CAAoB,CAE3B,MAAO,MAAKoY,SAAL,GAAiB7Y,cAAjB,CAAiCS,MAAjC,CAAP,CAEH,CA3hB6B,CA6hB9BqV,KAAM,cAAWlW,CAAX,CAAcsZ,KAAd,CAAsB,CAExB,KAAK7mB,CAAL,EAAU,CAAEuN,EAAEvN,CAAF,CAAM,KAAKA,CAAb,EAAmB6mB,KAA7B,CACA,KAAK5mB,CAAL,EAAU,CAAEsN,EAAEtN,CAAF,CAAM,KAAKA,CAAb,EAAmB4mB,KAA7B,CACA,KAAK3mB,CAAL,EAAU,CAAEqN,EAAErN,CAAF,CAAM,KAAKA,CAAb,EAAmB2mB,KAA7B,CACA,KAAK1B,CAAL,EAAU,CAAE5X,EAAE4X,CAAF,CAAM,KAAKA,CAAb,EAAmB0B,KAA7B,CAEA,MAAO,KAAP,CAEH,CAtiB6B,CAwiB9BC,YAAa,qBAAW9O,EAAX,CAAe+O,EAAf,CAAmBF,KAAnB,CAA2B,CAEpC,MAAO,MAAKvX,UAAL,CAAiByX,EAAjB,CAAqB/O,EAArB,EAA0BrK,cAA1B,CAA0CkZ,KAA1C,EAAkDrlB,GAAlD,CAAuDwW,EAAvD,CAAP,CAEH,CA5iB6B,CA8iB9BgP,OAAQ,gBAAWzZ,CAAX,CAAe,CAEnB,MAAWA,GAAEvN,CAAF,GAAQ,KAAKA,CAAf,EAAwBuN,EAAEtN,CAAF,GAAQ,KAAKA,CAArC,EAA8CsN,EAAErN,CAAF,GAAQ,KAAKA,CAA3D,EAAoEqN,EAAE4X,CAAF,GAAQ,KAAKA,CAA1F,CAEH,CAljB6B,CAojB9B8B,UAAW,mBAAWtN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAElC,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,KAAKzJ,CAAL,CAAS2Z,MAAOlQ,MAAP,CAAT,CACA,KAAKxJ,CAAL,CAAS0Z,MAAOlQ,OAAS,CAAhB,CAAT,CACA,KAAKvJ,CAAL,CAASyZ,MAAOlQ,OAAS,CAAhB,CAAT,CACA,KAAK0b,CAAL,CAASxL,MAAOlQ,OAAS,CAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CA/jB6B,CAikB9Byd,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5BkQ,MAAOlQ,MAAP,EAAkB,KAAKzJ,CAAvB,CACA2Z,MAAOlQ,OAAS,CAAhB,EAAsB,KAAKxJ,CAA3B,CACA0Z,MAAOlQ,OAAS,CAAhB,EAAsB,KAAKvJ,CAA3B,CACAyZ,MAAOlQ,OAAS,CAAhB,EAAsB,KAAK0b,CAA3B,CAEA,MAAOxL,MAAP,CAEH,CA7kB6B,CA+kB9BwN,oBAAqB,6BAAWC,SAAX,CAAsBjO,KAAtB,CAA6B1P,MAA7B,CAAsC,CAEvD,GAAKA,SAAWrD,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,qEAAd,EAEH,CAED,KAAK3O,CAAL,CAASonB,UAAUC,IAAV,CAAgBlO,KAAhB,CAAT,CACA,KAAKlZ,CAAL,CAASmnB,UAAUE,IAAV,CAAgBnO,KAAhB,CAAT,CACA,KAAKjZ,CAAL,CAASknB,UAAUiG,IAAV,CAAgBlU,KAAhB,CAAT,CACA,KAAKgM,CAAL,CAASiC,UAAU2T,IAAV,CAAgB5hB,KAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CA9lB6B,CAAlC,EAkmBA;;;;OAMA;;;;GAKA,QAAS6hB,kBAAT,CAA4B15B,KAA5B,CAAmCC,MAAnC,CAA2C05B,OAA3C,CAAqD,CAEjD,KAAK35B,KAAL,CAAaA,KAAb,CACA,KAAKC,MAAL,CAAcA,MAAd,CAEA,KAAK25B,OAAL,CAAe,GAAIV,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmBl5B,KAAnB,CAA0BC,MAA1B,CAAf,CACA,KAAK45B,WAAL,CAAmB,KAAnB,CAEA,KAAKC,QAAL,CAAgB,GAAIZ,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmBl5B,KAAnB,CAA0BC,MAA1B,CAAhB,CAEA05B,QAAUA,SAAW,EAArB,CAEA,GAAKA,QAAQ3C,SAAR,GAAsBlyB,SAA3B,CAAuC60B,QAAQ3C,SAAR,CAAoBna,YAApB,CAEvC,KAAKkd,OAAL,CAAe,GAAIrD,QAAJ,CAAa5xB,SAAb,CAAwBA,SAAxB,CAAmC60B,QAAQ9C,KAA3C,CAAkD8C,QAAQ7C,KAA1D,CAAiE6C,QAAQ5C,SAAzE,CAAoF4C,QAAQ3C,SAA5F,CAAuG2C,QAAQ1C,MAA/G,CAAuH0C,QAAQlvB,IAA/H,CAAqIkvB,QAAQzC,UAA7I,CAAyJyC,QAAQxC,QAAjK,CAAf,CAEA,KAAK4C,OAAL,CAAatC,eAAb,CAA+BkC,QAAQlC,eAAR,GAA4B3yB,SAA5B,CAAwC60B,QAAQlC,eAAhD,CAAkE,IAAjG,CAEA,KAAKuC,WAAL,CAAmBL,QAAQK,WAAR,GAAwBl1B,SAAxB,CAAoC60B,QAAQK,WAA5C,CAA0D,IAA7E,CACA,KAAKC,aAAL,CAAqBN,QAAQM,aAAR,GAA0Bn1B,SAA1B,CAAsC60B,QAAQM,aAA9C,CAA8D,IAAnF,CACA,KAAKC,YAAL,CAAoBP,QAAQO,YAAR,GAAyBp1B,SAAzB,CAAqC60B,QAAQO,YAA7C,CAA4D,IAAhF,CAEH,CAEDR,kBAAkBnqB,SAAlB,CAA8BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeC,gBAAgBH,SAA/B,CAAf,CAA2D,CAErFI,YAAa+pB,iBAFwE,CAIrFS,oBAAqB,IAJgE,CAMrF77B,QAAS,iBAAW0B,KAAX,CAAkBC,MAAlB,CAA2B,CAEhC,GAAK,KAAKD,KAAL,GAAeA,KAAf,EAAwB,KAAKC,MAAL,GAAgBA,MAA7C,CAAsD,CAElD,KAAKD,KAAL,CAAaA,KAAb,CACA,KAAKC,MAAL,CAAcA,MAAd,CAEA,KAAK8J,OAAL,GAEH,CAED,KAAK+vB,QAAL,CAAcv6B,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,CAAyBS,KAAzB,CAAgCC,MAAhC,EACA,KAAK25B,OAAL,CAAar6B,GAAb,CAAkB,CAAlB,CAAqB,CAArB,CAAwBS,KAAxB,CAA+BC,MAA/B,EAEH,CApBoF,CAsBrFuB,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CA1BoF,CA4BrFA,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAKrR,KAAL,CAAaqR,OAAOrR,KAApB,CACA,KAAKC,MAAL,CAAcoR,OAAOpR,MAArB,CAEA,KAAK65B,QAAL,CAAcnyB,IAAd,CAAoB0J,OAAOyoB,QAA3B,EAEA,KAAKC,OAAL,CAAe1oB,OAAO0oB,OAAP,CAAev4B,KAAf,EAAf,CAEA,KAAKw4B,WAAL,CAAmB3oB,OAAO2oB,WAA1B,CACA,KAAKC,aAAL,CAAqB5oB,OAAO4oB,aAA5B,CACA,KAAKC,YAAL,CAAoB7oB,OAAO6oB,YAA3B,CAEA,MAAO,KAAP,CAEH,CA3CoF,CA6CrFnwB,QAAS,kBAAY,CAEjB,KAAKjC,aAAL,CAAoB,CAAE2C,KAAM,SAAR,CAApB,EAEH,CAjDoF,CAA3D,CAA9B,CAqDA;;OAIA,QAAS2vB,sBAAT,CAAgCp6B,KAAhC,CAAuCC,MAAvC,CAA+C05B,OAA/C,CAAyD,CAErDD,kBAAkBzmB,IAAlB,CAAwB,IAAxB,CAA8BjT,KAA9B,CAAqCC,MAArC,CAA6C05B,OAA7C,EAEA,KAAKU,cAAL,CAAsB,CAAtB,CAAyB;AACzB,KAAKC,iBAAL,CAAyB,CAAzB,CAEH,CAEDF,sBAAsB7qB,SAAtB,CAAkCC,OAAOC,MAAP,CAAeiqB,kBAAkBnqB,SAAjC,CAAlC,CACA6qB,sBAAsB7qB,SAAtB,CAAgCI,WAAhC,CAA8CyqB,qBAA9C,CAEAA,sBAAsB7qB,SAAtB,CAAgCgrB,uBAAhC,CAA0D,IAA1D,CAEA;;OAIA,QAASC,YAAT,CAAsBt3B,IAAtB,CAA4BlD,KAA5B,CAAmCC,MAAnC,CAA2Cg3B,MAA3C,CAAmDxsB,IAAnD,CAAyDmsB,OAAzD,CAAkEC,KAAlE,CAAyEC,KAAzE,CAAgFC,SAAhF,CAA2FC,SAA3F,CAAsGE,UAAtG,CAAkHC,QAAlH,CAA6H,CAEzHT,QAAQzjB,IAAR,CAAc,IAAd,CAAoB,IAApB,CAA0B2jB,OAA1B,CAAmCC,KAAnC,CAA0CC,KAA1C,CAAiDC,SAAjD,CAA4DC,SAA5D,CAAuEC,MAAvE,CAA+ExsB,IAA/E,CAAqFysB,UAArF,CAAiGC,QAAjG,EAEA,KAAKR,KAAL,CAAa,CAAEzzB,KAAMA,IAAR,CAAclD,MAAOA,KAArB,CAA4BC,OAAQA,MAApC,CAAb,CAEA,KAAK82B,SAAL,CAAiBA,YAAcjyB,SAAd,CAA0BiyB,SAA1B,CAAsCra,aAAvD,CACA,KAAKsa,SAAL,CAAiBA,YAAclyB,SAAd,CAA0BkyB,SAA1B,CAAsCta,aAAvD,CAEA,KAAK+a,eAAL,CAAuB,KAAvB,CACA,KAAKE,KAAL,CAAa,KAAb,CACA,KAAKC,eAAL,CAAuB,CAAvB,CAEH,CAED4C,YAAYjrB,SAAZ,CAAwBC,OAAOC,MAAP,CAAeinB,QAAQnnB,SAAvB,CAAxB,CACAirB,YAAYjrB,SAAZ,CAAsBI,WAAtB,CAAoC6qB,WAApC,CAEAA,YAAYjrB,SAAZ,CAAsBkrB,aAAtB,CAAsC,IAAtC,CAEA;;;OAKA,QAASC,KAAT,CAAevxB,GAAf,CAAoBD,GAApB,CAA0B,CAEtB,KAAKC,GAAL,CAAaA,MAAQrE,SAAV,CAAwBqE,GAAxB,CAA8B,GAAInE,QAAJ,CAAa,CAAEG,QAAf,CAAyB,CAAEA,QAA3B,CAAqC,CAAEA,QAAvC,CAAzC,CACA,KAAK+D,GAAL,CAAaA,MAAQpE,SAAV,CAAwBoE,GAAxB,CAA8B,GAAIlE,QAAJ,CAAa,CAAEG,QAAf,CAAyB,CAAEA,QAA3B,CAAqC,CAAEA,QAAvC,CAAzC,CAEH,CAEDqK,OAAO4B,MAAP,CAAespB,KAAKnrB,SAApB,CAA+B,CAE3BorB,OAAQ,IAFmB,CAI3Bp7B,IAAK,aAAW4J,GAAX,CAAgBD,GAAhB,CAAsB,CAEvB,KAAKC,GAAL,CAASxB,IAAT,CAAewB,GAAf,EACA,KAAKD,GAAL,CAASvB,IAAT,CAAeuB,GAAf,EAEA,MAAO,KAAP,CAEH,CAX0B,CAa3B0xB,aAAc,sBAAWviB,KAAX,CAAmB,CAE7B,GAAIwiB,MAAO,CAAE11B,QAAb,CACA,GAAI21B,MAAO,CAAE31B,QAAb,CACA,GAAI41B,MAAO,CAAE51B,QAAb,CAEA,GAAI61B,MAAO,CAAE71B,QAAb,CACA,GAAI81B,MAAO,CAAE91B,QAAb,CACA,GAAI+1B,MAAO,CAAE/1B,QAAb,CAEA,IAAM,GAAIuL,GAAI,CAAR,CAAW6H,EAAIF,MAAMvL,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAAK,CAA/C,CAAmD,CAE/C,GAAIhS,GAAI2Z,MAAO3H,CAAP,CAAR,CACA,GAAI/R,GAAI0Z,MAAO3H,EAAI,CAAX,CAAR,CACA,GAAI9R,GAAIyZ,MAAO3H,EAAI,CAAX,CAAR,CAEA,GAAKhS,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAChB,GAAKC,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAChB,GAAKC,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAEhB,GAAKF,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAChB,GAAKC,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAChB,GAAKC,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAEnB,CAED,KAAKuK,GAAL,CAAS5J,GAAT,CAAcs7B,IAAd,CAAoBC,IAApB,CAA0BC,IAA1B,EACA,KAAK7xB,GAAL,CAAS3J,GAAT,CAAcy7B,IAAd,CAAoBC,IAApB,CAA0BC,IAA1B,EAEA,MAAO,KAAP,CAEH,CA5C0B,CA8C3BC,uBAAwB,gCAAWrV,SAAX,CAAuB,CAE3C,GAAI+U,MAAO,CAAE11B,QAAb,CACA,GAAI21B,MAAO,CAAE31B,QAAb,CACA,GAAI41B,MAAO,CAAE51B,QAAb,CAEA,GAAI61B,MAAO,CAAE71B,QAAb,CACA,GAAI81B,MAAO,CAAE91B,QAAb,CACA,GAAI+1B,MAAO,CAAE/1B,QAAb,CAEA,IAAM,GAAIuL,GAAI,CAAR,CAAW6H,EAAIuN,UAAUgG,KAA/B,CAAsCpb,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhD,GAAIhS,GAAIonB,UAAUC,IAAV,CAAgBrV,CAAhB,CAAR,CACA,GAAI/R,GAAImnB,UAAUE,IAAV,CAAgBtV,CAAhB,CAAR,CACA,GAAI9R,GAAIknB,UAAUiG,IAAV,CAAgBrb,CAAhB,CAAR,CAEA,GAAKhS,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAChB,GAAKC,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAChB,GAAKC,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAEhB,GAAKF,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAChB,GAAKC,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAChB,GAAKC,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAEnB,CAED,KAAKuK,GAAL,CAAS5J,GAAT,CAAcs7B,IAAd,CAAoBC,IAApB,CAA0BC,IAA1B,EACA,KAAK7xB,GAAL,CAAS3J,GAAT,CAAcy7B,IAAd,CAAoBC,IAApB,CAA0BC,IAA1B,EAEA,MAAO,KAAP,CAEH,CA7E0B,CA+E3BE,cAAe,uBAAWC,MAAX,CAAoB,CAE/B,KAAKC,SAAL,GAEA,IAAM,GAAI5qB,GAAI,CAAR,CAAW6qB,GAAKF,OAAOvuB,MAA7B,CAAqC4D,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhD,KAAK8qB,aAAL,CAAoBH,OAAQ3qB,CAAR,CAApB,EAEH,CAED,MAAO,KAAP,CAEH,CA3F0B,CA6F3B+qB,qBAAsB,UAAY,CAE9B,GAAI/kB,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASy2B,qBAAT,CAA+B5rB,MAA/B,CAAuC6rB,IAAvC,CAA8C,CAEjD,GAAIC,UAAWjlB,GAAG/O,IAAH,CAAS+zB,IAAT,EAAgBrvB,cAAhB,CAAgC,GAAhC,CAAf,CAEA,KAAKlD,GAAL,CAASxB,IAAT,CAAekI,MAAf,EAAwBjH,GAAxB,CAA6B+yB,QAA7B,EACA,KAAKzyB,GAAL,CAASvB,IAAT,CAAekI,MAAf,EAAwB3P,GAAxB,CAA6By7B,QAA7B,EAEA,MAAO,KAAP,CAEH,CATD,CAWH,CAfqB,EA7FK,CA8G3BC,cAAe,uBAAWh3B,MAAX,CAAoB,CAE/B,KAAK02B,SAAL,GAEA,MAAO,MAAKO,cAAL,CAAqBj3B,MAArB,CAAP,CAEH,CApH0B,CAsH3BpD,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CA1H0B,CA4H3BA,KAAM,cAAWm0B,GAAX,CAAiB,CAEnB,KAAK3yB,GAAL,CAASxB,IAAT,CAAem0B,IAAI3yB,GAAnB,EACA,KAAKD,GAAL,CAASvB,IAAT,CAAem0B,IAAI5yB,GAAnB,EAEA,MAAO,KAAP,CAEH,CAnI0B,CAqI3BoyB,UAAW,oBAAY,CAEnB,KAAKnyB,GAAL,CAASzK,CAAT,CAAa,KAAKyK,GAAL,CAASxK,CAAT,CAAa,KAAKwK,GAAL,CAASvK,CAAT,CAAa,CAAEuG,QAAzC,CACA,KAAK+D,GAAL,CAASxK,CAAT,CAAa,KAAKwK,GAAL,CAASvK,CAAT,CAAa,KAAKuK,GAAL,CAAStK,CAAT,CAAa,CAAEuG,QAAzC,CAEA,MAAO,KAAP,CAEH,CA5I0B,CA8I3B42B,QAAS,kBAAY,CAEjB;AAEA,MAAS,MAAK7yB,GAAL,CAASxK,CAAT,CAAa,KAAKyK,GAAL,CAASzK,CAAxB,EAAiC,KAAKwK,GAAL,CAASvK,CAAT,CAAa,KAAKwK,GAAL,CAASxK,CAAvD,EAAgE,KAAKuK,GAAL,CAAStK,CAAT,CAAa,KAAKuK,GAAL,CAASvK,CAA7F,CAEH,CApJ0B,CAsJ3Bo9B,UAAW,mBAAW77B,MAAX,CAAoB,CAE3B,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,iDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO,MAAK+2B,OAAL,GAAiB57B,OAAOZ,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,CAAjB,CAAyCY,OAAO2jB,UAAP,CAAmB,KAAK3a,GAAxB,CAA6B,KAAKD,GAAlC,EAAwCmD,cAAxC,CAAwD,GAAxD,CAAhD,CAEH,CAjK0B,CAmK3B4vB,QAAS,iBAAW97B,MAAX,CAAoB,CAEzB,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,+CAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO,MAAK+2B,OAAL,GAAiB57B,OAAOZ,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,CAAjB,CAAyCY,OAAO6N,UAAP,CAAmB,KAAK9E,GAAxB,CAA6B,KAAKC,GAAlC,CAAhD,CAEH,CA9K0B,CAgL3BqyB,cAAe,uBAAWU,KAAX,CAAmB,CAE9B,KAAK/yB,GAAL,CAASA,GAAT,CAAc+yB,KAAd,EACA,KAAKhzB,GAAL,CAASA,GAAT,CAAcgzB,KAAd,EAEA,MAAO,KAAP,CAEH,CAvL0B,CAyL3BC,eAAgB,wBAAWnN,MAAX,CAAoB,CAEhC,KAAK7lB,GAAL,CAASP,GAAT,CAAcomB,MAAd,EACA,KAAK9lB,GAAL,CAAShJ,GAAT,CAAc8uB,MAAd,EAEA,MAAO,KAAP,CAEH,CAhM0B,CAkM3BoN,eAAgB,wBAAW7Y,MAAX,CAAoB,CAEhC,KAAKpa,GAAL,CAAS4a,SAAT,CAAoB,CAAER,MAAtB,EACA,KAAKra,GAAL,CAAS6a,SAAT,CAAoBR,MAApB,EAEA,MAAO,KAAP,CAEH,CAzM0B,CA2M3BsY,eAAgB,UAAY,CAExB;AACA;AAEA,GAAIn0B,MAAJ,CAAWgJ,CAAX,CAAc6H,CAAd,CAEA,GAAI7B,IAAK,GAAI1R,QAAJ,EAAT,CAEA,QAASq3B,SAAT,CAAmBC,IAAnB,CAA0B,CAEtB,GAAIC,UAAWD,KAAKC,QAApB,CAEA,GAAKA,WAAaz3B,SAAlB,CAA8B,CAE1B,GAAKy3B,SAASC,UAAd,CAA2B,CAEvB,GAAIC,UAAWF,SAASE,QAAxB,CAEA,IAAM/rB,EAAI,CAAJ,CAAO6H,EAAIkkB,SAAS3vB,MAA1B,CAAkC4D,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5CgG,GAAG/O,IAAH,CAAS80B,SAAU/rB,CAAV,CAAT,EACAgG,GAAGsV,YAAH,CAAiBsQ,KAAK/H,WAAtB,EAEA7sB,MAAM8zB,aAAN,CAAqB9kB,EAArB,EAEH,CAEJ,CAbD,IAaO,IAAK6lB,SAASG,gBAAd,CAAiC,CAEpC,GAAI5W,WAAYyW,SAASI,UAAT,CAAoBl+B,QAApC,CAEA,GAAKqnB,YAAchhB,SAAnB,CAA+B,CAE3B,IAAM4L,EAAI,CAAJ,CAAO6H,EAAIuN,UAAUgG,KAA3B,CAAkCpb,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5CgG,GAAGmP,mBAAH,CAAwBC,SAAxB,CAAmCpV,CAAnC,EAAuCsb,YAAvC,CAAqDsQ,KAAK/H,WAA1D,EAEA7sB,MAAM8zB,aAAN,CAAqB9kB,EAArB,EAEH,CAEJ,CAEJ,CAEJ,CAEJ,CAED,MAAO,SAASmlB,eAAT,CAAyBj3B,MAAzB,CAAkC,CAErC8C,MAAQ,IAAR,CAEA9C,OAAOg4B,iBAAP,CAA0B,IAA1B,EAEAh4B,OAAOy3B,QAAP,CAAiBA,QAAjB,EAEA,MAAO,KAAP,CAEH,CAVD,CAYH,CA9De,EA3MW,CA2Q3BQ,cAAe,uBAAWX,KAAX,CAAmB,CAE9B,MAAOA,OAAMx9B,CAAN,CAAU,KAAKyK,GAAL,CAASzK,CAAnB,EAAwBw9B,MAAMx9B,CAAN,CAAU,KAAKwK,GAAL,CAASxK,CAA3C,EACPw9B,MAAMv9B,CAAN,CAAU,KAAKwK,GAAL,CAASxK,CADZ,EACiBu9B,MAAMv9B,CAAN,CAAU,KAAKuK,GAAL,CAASvK,CADpC,EAEPu9B,MAAMt9B,CAAN,CAAU,KAAKuK,GAAL,CAASvK,CAFZ,EAEiBs9B,MAAMt9B,CAAN,CAAU,KAAKsK,GAAL,CAAStK,CAFpC,CAEwC,KAFxC,CAEgD,IAFvD,CAIH,CAjR0B,CAmR3Bk+B,YAAa,qBAAWhB,GAAX,CAAiB,CAE1B,MAAO,MAAK3yB,GAAL,CAASzK,CAAT,EAAco9B,IAAI3yB,GAAJ,CAAQzK,CAAtB,EAA2Bo9B,IAAI5yB,GAAJ,CAAQxK,CAAR,EAAa,KAAKwK,GAAL,CAASxK,CAAjD,EACH,KAAKyK,GAAL,CAASxK,CAAT,EAAcm9B,IAAI3yB,GAAJ,CAAQxK,CADnB,EACwBm9B,IAAI5yB,GAAJ,CAAQvK,CAAR,EAAa,KAAKuK,GAAL,CAASvK,CAD9C,EAEH,KAAKwK,GAAL,CAASvK,CAAT,EAAck9B,IAAI3yB,GAAJ,CAAQvK,CAFnB,EAEwBk9B,IAAI5yB,GAAJ,CAAQtK,CAAR,EAAa,KAAKsK,GAAL,CAAStK,CAFrD,CAIH,CAzR0B,CA2R3Bm+B,aAAc,sBAAWb,KAAX,CAAkB/7B,MAAlB,CAA2B,CAErC;AACA;AAEA,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,oDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAOZ,GAAP,CACH,CAAE28B,MAAMx9B,CAAN,CAAU,KAAKyK,GAAL,CAASzK,CAArB,GAA6B,KAAKwK,GAAL,CAASxK,CAAT,CAAa,KAAKyK,GAAL,CAASzK,CAAnD,CADG,CAEH,CAAEw9B,MAAMv9B,CAAN,CAAU,KAAKwK,GAAL,CAASxK,CAArB,GAA6B,KAAKuK,GAAL,CAASvK,CAAT,CAAa,KAAKwK,GAAL,CAASxK,CAAnD,CAFG,CAGH,CAAEu9B,MAAMt9B,CAAN,CAAU,KAAKuK,GAAL,CAASvK,CAArB,GAA6B,KAAKsK,GAAL,CAAStK,CAAT,CAAa,KAAKuK,GAAL,CAASvK,CAAnD,CAHG,CAAP,CAMH,CA7S0B,CA+S3Bo+B,cAAe,uBAAWlB,GAAX,CAAiB,CAE5B;AACA,MAAOA,KAAI5yB,GAAJ,CAAQxK,CAAR,CAAY,KAAKyK,GAAL,CAASzK,CAArB,EAA0Bo9B,IAAI3yB,GAAJ,CAAQzK,CAAR,CAAY,KAAKwK,GAAL,CAASxK,CAA/C,EACPo9B,IAAI5yB,GAAJ,CAAQvK,CAAR,CAAY,KAAKwK,GAAL,CAASxK,CADd,EACmBm9B,IAAI3yB,GAAJ,CAAQxK,CAAR,CAAY,KAAKuK,GAAL,CAASvK,CADxC,EAEPm9B,IAAI5yB,GAAJ,CAAQtK,CAAR,CAAY,KAAKuK,GAAL,CAASvK,CAFd,EAEmBk9B,IAAI3yB,GAAJ,CAAQvK,CAAR,CAAY,KAAKsK,GAAL,CAAStK,CAFxC,CAE4C,KAF5C,CAEoD,IAF3D,CAIH,CAtT0B,CAwT3Bq+B,iBAAoB,UAAY,CAE5B,GAAIC,cAAe,GAAIl4B,QAAJ,EAAnB,CAEA,MAAO,SAASi4B,iBAAT,CAA2BE,MAA3B,CAAoC,CAEvC;AACA,KAAKC,UAAL,CAAiBD,OAAOttB,MAAxB,CAAgCqtB,YAAhC,EAEA;AACA,MAAOA,cAAavzB,iBAAb,CAAgCwzB,OAAOttB,MAAvC,GAAqDstB,OAAO9zB,MAAP,CAAgB8zB,OAAO9zB,MAAnF,CAEH,CARD,CAUH,CAdiB,EAxTS,CAwU3Bg0B,gBAAiB,yBAAWxgC,KAAX,CAAmB,CAEhC;AACA;AAEA,GAAIsM,IAAJ,CAASD,GAAT,CAEA,GAAKrM,MAAMw4B,MAAN,CAAa32B,CAAb,CAAiB,CAAtB,CAA0B,CAEtByK,IAAMtM,MAAMw4B,MAAN,CAAa32B,CAAb,CAAiB,KAAKyK,GAAL,CAASzK,CAAhC,CACAwK,IAAMrM,MAAMw4B,MAAN,CAAa32B,CAAb,CAAiB,KAAKwK,GAAL,CAASxK,CAAhC,CAEH,CALD,IAKO,CAEHyK,IAAMtM,MAAMw4B,MAAN,CAAa32B,CAAb,CAAiB,KAAKwK,GAAL,CAASxK,CAAhC,CACAwK,IAAMrM,MAAMw4B,MAAN,CAAa32B,CAAb,CAAiB,KAAKyK,GAAL,CAASzK,CAAhC,CAEH,CAED,GAAK7B,MAAMw4B,MAAN,CAAa12B,CAAb,CAAiB,CAAtB,CAA0B,CAEtBwK,KAAOtM,MAAMw4B,MAAN,CAAa12B,CAAb,CAAiB,KAAKwK,GAAL,CAASxK,CAAjC,CACAuK,KAAOrM,MAAMw4B,MAAN,CAAa12B,CAAb,CAAiB,KAAKuK,GAAL,CAASvK,CAAjC,CAEH,CALD,IAKO,CAEHwK,KAAOtM,MAAMw4B,MAAN,CAAa12B,CAAb,CAAiB,KAAKuK,GAAL,CAASvK,CAAjC,CACAuK,KAAOrM,MAAMw4B,MAAN,CAAa12B,CAAb,CAAiB,KAAKwK,GAAL,CAASxK,CAAjC,CAEH,CAED,GAAK9B,MAAMw4B,MAAN,CAAaz2B,CAAb,CAAiB,CAAtB,CAA0B,CAEtBuK,KAAOtM,MAAMw4B,MAAN,CAAaz2B,CAAb,CAAiB,KAAKuK,GAAL,CAASvK,CAAjC,CACAsK,KAAOrM,MAAMw4B,MAAN,CAAaz2B,CAAb,CAAiB,KAAKsK,GAAL,CAAStK,CAAjC,CAEH,CALD,IAKO,CAEHuK,KAAOtM,MAAMw4B,MAAN,CAAaz2B,CAAb,CAAiB,KAAKsK,GAAL,CAAStK,CAAjC,CACAsK,KAAOrM,MAAMw4B,MAAN,CAAaz2B,CAAb,CAAiB,KAAKuK,GAAL,CAASvK,CAAjC,CAEH,CAED,MAASuK,MAAOtM,MAAMygC,QAAb,EAAyBp0B,KAAOrM,MAAMygC,QAA/C,CAEH,CArX0B,CAuX3BC,mBAAsB,UAAY,CAE9B;AACA,GAAI9mB,IAAK,GAAIzR,QAAJ,EAAT,CACA,GAAI0R,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIygB,IAAK,GAAIzgB,QAAJ,EAAT,CAEA;AACA,GAAIw4B,IAAK,GAAIx4B,QAAJ,EAAT,CACA,GAAIy4B,IAAK,GAAIz4B,QAAJ,EAAT,CACA,GAAI04B,IAAK,GAAI14B,QAAJ,EAAT,CAEA,GAAI24B,UAAW,GAAI34B,QAAJ,EAAf,CAEA,GAAI6K,QAAS,GAAI7K,QAAJ,EAAb,CACA,GAAI44B,SAAU,GAAI54B,QAAJ,EAAd,CAEA,GAAI64B,gBAAiB,GAAI74B,QAAJ,EAArB,CAEA,QAAS84B,WAAT,CAAqBC,IAArB,CAA4B,CAExB,GAAIrtB,EAAJ,CAAOstB,CAAP,CAEA,IAAMttB,EAAI,CAAJ,CAAOstB,EAAID,KAAKjxB,MAAL,CAAc,CAA/B,CAAkC4D,GAAKstB,CAAvC,CAA0CttB,GAAK,CAA/C,CAAmD,CAE/CitB,SAAShY,SAAT,CAAoBoY,IAApB,CAA0BrtB,CAA1B,EACA;AACA,GAAI2hB,GAAIuL,QAAQl/B,CAAR,CAAY0D,KAAK6iB,GAAL,CAAU0Y,SAASj/B,CAAnB,CAAZ,CAAqCk/B,QAAQj/B,CAAR,CAAYyD,KAAK6iB,GAAL,CAAU0Y,SAASh/B,CAAnB,CAAjD,CAA0Ei/B,QAAQh/B,CAAR,CAAYwD,KAAK6iB,GAAL,CAAU0Y,SAAS/+B,CAAnB,CAA9F,CACA;AACA,GAAIqX,IAAKQ,GAAG5M,GAAH,CAAQ8zB,QAAR,CAAT,CACA,GAAIznB,IAAKQ,GAAG7M,GAAH,CAAQ8zB,QAAR,CAAT,CACA,GAAIpnB,IAAKkP,GAAG5b,GAAH,CAAQ8zB,QAAR,CAAT,CACA;AACA,GAAKv7B,KAAK8G,GAAL,CAAU,CAAE9G,KAAK8G,GAAL,CAAU+M,EAAV,CAAcC,EAAd,CAAkBK,EAAlB,CAAZ,CAAoCnU,KAAK+G,GAAL,CAAU8M,EAAV,CAAcC,EAAd,CAAkBK,EAAlB,CAApC,EAA+D8b,CAApE,CAAwE,CAEpE;AACA;AACA,MAAO,MAAP,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAED,MAAO,SAASkL,mBAAT,CAA6BU,QAA7B,CAAwC,CAE3C,GAAK,KAAKlC,OAAL,EAAL,CAAsB,CAElB,MAAO,MAAP,CAEH,CAED;AACA,KAAKC,SAAL,CAAgBnsB,MAAhB,EACA+tB,QAAQ5vB,UAAR,CAAoB,KAAK9E,GAAzB,CAA8B2G,MAA9B,EAEA;AACA4G,GAAGzI,UAAH,CAAeiwB,SAAS3nB,CAAxB,CAA2BzG,MAA3B,EACA6G,GAAG1I,UAAH,CAAeiwB,SAAStoB,CAAxB,CAA2B9F,MAA3B,EACA4V,GAAGzX,UAAH,CAAeiwB,SAAS/X,CAAxB,CAA2BrW,MAA3B,EAEA;AACA2tB,GAAGxvB,UAAH,CAAe0I,EAAf,CAAmBD,EAAnB,EACAgnB,GAAGzvB,UAAH,CAAeyX,EAAf,CAAmB/O,EAAnB,EACAgnB,GAAG1vB,UAAH,CAAeyI,EAAf,CAAmBgP,EAAnB,EAEA;AACA;AACA;AACA,GAAIsY,MAAO,CACP,CADO,CACJ,CAAEP,GAAG5+B,CADD,CACI4+B,GAAG7+B,CADP,CACU,CADV,CACa,CAAE8+B,GAAG7+B,CADlB,CACqB6+B,GAAG9+B,CADxB,CAC2B,CAD3B,CAC8B,CAAE++B,GAAG9+B,CADnC,CACsC8+B,GAAG/+B,CADzC,CAEP6+B,GAAG5+B,CAFI,CAED,CAFC,CAEE,CAAE4+B,GAAG9+B,CAFP,CAEU++B,GAAG7+B,CAFb,CAEgB,CAFhB,CAEmB,CAAE6+B,GAAG/+B,CAFxB,CAE2Bg/B,GAAG9+B,CAF9B,CAEiC,CAFjC,CAEoC,CAAE8+B,GAAGh/B,CAFzC,CAGP,CAAE8+B,GAAG7+B,CAHE,CAGC6+B,GAAG9+B,CAHJ,CAGO,CAHP,CAGU,CAAE++B,GAAG9+B,CAHf,CAGkB8+B,GAAG/+B,CAHrB,CAGwB,CAHxB,CAG2B,CAAEg/B,GAAG/+B,CAHhC,CAGmC++B,GAAGh/B,CAHtC,CAGyC,CAHzC,CAAX,CAKA,GAAK,CAAEo/B,WAAYC,IAAZ,CAAP,CAA4B,CAExB,MAAO,MAAP,CAEH,CAED;AACAA,KAAO,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,CAAP,CACA,GAAK,CAAED,WAAYC,IAAZ,CAAP,CAA4B,CAExB,MAAO,MAAP,CAEH,CAED;AACA;AACAF,eAAenU,YAAf,CAA6B8T,EAA7B,CAAiCC,EAAjC,EACAM,KAAO,CAAEF,eAAen/B,CAAjB,CAAoBm/B,eAAel/B,CAAnC,CAAsCk/B,eAAej/B,CAArD,CAAP,CACA,MAAOk/B,YAAYC,IAAZ,CAAP,CAEH,CAlDD,CAoDH,CAnGmB,EAvXO,CA4d3BX,WAAY,oBAAWlB,KAAX,CAAkB/7B,MAAlB,CAA2B,CAEnC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,kDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAOwH,IAAP,CAAau0B,KAAb,EAAqBta,KAArB,CAA4B,KAAKzY,GAAjC,CAAsC,KAAKD,GAA3C,CAAP,CAEH,CAve0B,CAye3Bg1B,gBAAiB,UAAY,CAEzB,GAAIxnB,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASk5B,gBAAT,CAA0BhC,KAA1B,CAAkC,CAErC,GAAIiC,cAAeznB,GAAG/O,IAAH,CAASu0B,KAAT,EAAiBta,KAAjB,CAAwB,KAAKzY,GAA7B,CAAkC,KAAKD,GAAvC,CAAnB,CACA,MAAOi1B,cAAav1B,GAAb,CAAkBszB,KAAlB,EAA0BpvB,MAA1B,EAAP,CAEH,CALD,CAOH,CAXgB,EAzeU,CAsf3BsxB,kBAAmB,UAAY,CAE3B,GAAI1nB,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASo5B,kBAAT,CAA4Bj+B,MAA5B,CAAqC,CAExC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,yDAAd,EACAlN,OAAS,GAAIk+B,OAAJ,EAAT,CAEH,CAED,KAAKrC,SAAL,CAAgB77B,OAAO0P,MAAvB,EAEA1P,OAAOkJ,MAAP,CAAgB,KAAK4yB,OAAL,CAAcvlB,EAAd,EAAmB5J,MAAnB,GAA8B,GAA9C,CAEA,MAAO3M,OAAP,CAEH,CAfD,CAiBH,CArBkB,EAtfQ,CA6gB3Bm+B,UAAW,mBAAWxC,GAAX,CAAiB,CAExB,KAAK3yB,GAAL,CAASD,GAAT,CAAc4yB,IAAI3yB,GAAlB,EACA,KAAKD,GAAL,CAASC,GAAT,CAAc2yB,IAAI5yB,GAAlB,EAEA;AACA,GAAK,KAAK6yB,OAAL,EAAL,CAAsB,KAAKT,SAAL,GAEtB,MAAO,KAAP,CAEH,CAvhB0B,CAyhB3BiD,MAAO,eAAWzC,GAAX,CAAiB,CAEpB,KAAK3yB,GAAL,CAASA,GAAT,CAAc2yB,IAAI3yB,GAAlB,EACA,KAAKD,GAAL,CAASA,GAAT,CAAc4yB,IAAI5yB,GAAlB,EAEA,MAAO,KAAP,CAEH,CAhiB0B,CAkiB3B8iB,aAAc,sBAAW9e,MAAX,CAAoB,CAE9B;AACA,GAAK,KAAK6uB,OAAL,EAAL,CAAuB,MAAO,KAAP,CAEvB,GAAI1mB,GAAInI,OAAOqX,QAAf,CAEA,GAAIia,KAAMnpB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASzK,CAA5B,CAA+B+/B,IAAMppB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASzK,CAAvD,CAA0DggC,IAAMrpB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASzK,CAAlF,CACA,GAAIigC,KAAMtpB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAASxK,CAA5B,CAA+BkgC,IAAMvpB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAASxK,CAAvD,CAA0DmgC,IAAMxpB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAASxK,CAAlF,CACA,GAAIogC,KAAMzpB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASxK,CAA5B,CAA+BogC,IAAM1pB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASxK,CAAvD,CAA0DqgC,IAAM3pB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASxK,CAAlF,CACA,GAAIsgC,KAAM5pB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAASvK,CAA5B,CAA+BugC,IAAM7pB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAASvK,CAAvD,CAA0DwgC,IAAM9pB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAASvK,CAAlF,CACA,GAAIygC,KAAM/pB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASvK,CAA5B,CAA+BygC,IAAMhqB,EAAG,CAAH,EAAS,KAAKlM,GAAL,CAASvK,CAAvD,CAA0D0gC,IAAMjqB,EAAG,EAAH,EAAU,KAAKlM,GAAL,CAASvK,CAAnF,CACA,GAAI2gC,KAAMlqB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAAStK,CAA5B,CAA+B4gC,IAAMnqB,EAAG,CAAH,EAAS,KAAKnM,GAAL,CAAStK,CAAvD,CAA0D6gC,IAAMpqB,EAAG,EAAH,EAAU,KAAKnM,GAAL,CAAStK,CAAnF,CAEA,KAAKuK,GAAL,CAASzK,CAAT,CAAa0D,KAAK+G,GAAL,CAAUq1B,GAAV,CAAeG,GAAf,EAAuBv8B,KAAK+G,GAAL,CAAU21B,GAAV,CAAeG,GAAf,CAAvB,CAA8C78B,KAAK+G,GAAL,CAAUi2B,GAAV,CAAeG,GAAf,CAA9C,CAAqElqB,EAAG,EAAH,CAAlF,CACA,KAAKlM,GAAL,CAASxK,CAAT,CAAayD,KAAK+G,GAAL,CAAUs1B,GAAV,CAAeG,GAAf,EAAuBx8B,KAAK+G,GAAL,CAAU41B,GAAV,CAAeG,GAAf,CAAvB,CAA8C98B,KAAK+G,GAAL,CAAUk2B,GAAV,CAAeG,GAAf,CAA9C,CAAqEnqB,EAAG,EAAH,CAAlF,CACA,KAAKlM,GAAL,CAASvK,CAAT,CAAawD,KAAK+G,GAAL,CAAUu1B,GAAV,CAAeG,GAAf,EAAuBz8B,KAAK+G,GAAL,CAAU61B,GAAV,CAAeG,GAAf,CAAvB,CAA8C/8B,KAAK+G,GAAL,CAAUm2B,GAAV,CAAeG,GAAf,CAA9C,CAAqEpqB,EAAG,EAAH,CAAlF,CACA,KAAKnM,GAAL,CAASxK,CAAT,CAAa0D,KAAK8G,GAAL,CAAUs1B,GAAV,CAAeG,GAAf,EAAuBv8B,KAAK8G,GAAL,CAAU41B,GAAV,CAAeG,GAAf,CAAvB,CAA8C78B,KAAK8G,GAAL,CAAUk2B,GAAV,CAAeG,GAAf,CAA9C,CAAqElqB,EAAG,EAAH,CAAlF,CACA,KAAKnM,GAAL,CAASvK,CAAT,CAAayD,KAAK8G,GAAL,CAAUu1B,GAAV,CAAeG,GAAf,EAAuBx8B,KAAK8G,GAAL,CAAU61B,GAAV,CAAeG,GAAf,CAAvB,CAA8C98B,KAAK8G,GAAL,CAAUm2B,GAAV,CAAeG,GAAf,CAA9C,CAAqEnqB,EAAG,EAAH,CAAlF,CACA,KAAKnM,GAAL,CAAStK,CAAT,CAAawD,KAAK8G,GAAL,CAAUw1B,GAAV,CAAeG,GAAf,EAAuBz8B,KAAK8G,GAAL,CAAU81B,GAAV,CAAeG,GAAf,CAAvB,CAA8C/8B,KAAK8G,GAAL,CAAUo2B,GAAV,CAAeG,GAAf,CAA9C,CAAqEpqB,EAAG,EAAH,CAAlF,CAEA,MAAO,KAAP,CAEH,CAzjB0B,CA2jB3BmhB,UAAW,mBAAWruB,MAAX,CAAoB,CAE3B,KAAKgB,GAAL,CAASjJ,GAAT,CAAciI,MAAd,EACA,KAAKe,GAAL,CAAShJ,GAAT,CAAciI,MAAd,EAEA,MAAO,KAAP,CAEH,CAlkB0B,CAokB3Bud,OAAQ,gBAAWoW,GAAX,CAAiB,CAErB,MAAOA,KAAI3yB,GAAJ,CAAQuc,MAAR,CAAgB,KAAKvc,GAArB,GAA8B2yB,IAAI5yB,GAAJ,CAAQwc,MAAR,CAAgB,KAAKxc,GAArB,CAArC,CAEH,CAxkB0B,CAA/B,EA4kBA;;;OAKA,QAASm1B,OAAT,CAAiBxuB,MAAjB,CAAyBxG,MAAzB,CAAkC,CAE9B,KAAKwG,MAAL,CAAgBA,SAAW/K,SAAb,CAA2B+K,MAA3B,CAAoC,GAAI7K,QAAJ,EAAlD,CACA,KAAKqE,MAAL,CAAgBA,SAAWvE,SAAb,CAA2BuE,MAA3B,CAAoC,CAAlD,CAEH,CAEDmG,OAAO4B,MAAP,CAAeitB,OAAO9uB,SAAtB,CAAiC,CAE7BhQ,IAAK,aAAWsQ,MAAX,CAAmBxG,MAAnB,CAA4B,CAE7B,KAAKwG,MAAL,CAAYlI,IAAZ,CAAkBkI,MAAlB,EACA,KAAKxG,MAAL,CAAcA,MAAd,CAEA,MAAO,KAAP,CAEH,CAT4B,CAW7B+xB,cAAe,UAAY,CAEvB,GAAIU,KAAM,GAAIpB,KAAJ,EAAV,CAEA,MAAO,SAASU,cAAT,CAAwBC,MAAxB,CAAgCqE,cAAhC,CAAiD,CAEpD,GAAI7vB,QAAS,KAAKA,MAAlB,CAEA,GAAK6vB,iBAAmB56B,SAAxB,CAAoC,CAEhC+K,OAAOlI,IAAP,CAAa+3B,cAAb,EAEH,CAJD,IAIO,CAEH5D,IAAIV,aAAJ,CAAmBC,MAAnB,EAA4BW,SAA5B,CAAuCnsB,MAAvC,EAEH,CAED,GAAI8vB,aAAc,CAAlB,CAEA,IAAM,GAAIjvB,GAAI,CAAR,CAAW6qB,GAAKF,OAAOvuB,MAA7B,CAAqC4D,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhDivB,YAAcv9B,KAAK8G,GAAL,CAAUy2B,WAAV,CAAuB9vB,OAAOlG,iBAAP,CAA0B0xB,OAAQ3qB,CAAR,CAA1B,CAAvB,CAAd,CAEH,CAED,KAAKrH,MAAL,CAAcjH,KAAK0M,IAAL,CAAW6wB,WAAX,CAAd,CAEA,MAAO,KAAP,CAEH,CA1BD,CA4BH,CAhCc,EAXc,CA6C7Bn+B,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAjD4B,CAmD7BA,KAAM,cAAWw1B,MAAX,CAAoB,CAEtB,KAAKttB,MAAL,CAAYlI,IAAZ,CAAkBw1B,OAAOttB,MAAzB,EACA,KAAKxG,MAAL,CAAc8zB,OAAO9zB,MAArB,CAEA,MAAO,KAAP,CAEH,CA1D4B,CA4D7Bu2B,MAAO,gBAAY,CAEf,MAAS,MAAKv2B,MAAL,EAAe,CAAxB,CAEH,CAhE4B,CAkE7BwzB,cAAe,uBAAWX,KAAX,CAAmB,CAE9B,MAASA,OAAMvyB,iBAAN,CAAyB,KAAKkG,MAA9B,GAA4C,KAAKxG,MAAL,CAAc,KAAKA,MAAxE,CAEH,CAtE4B,CAwE7B60B,gBAAiB,yBAAWhC,KAAX,CAAmB,CAEhC,MAASA,OAAM9W,UAAN,CAAkB,KAAKvV,MAAvB,EAAkC,KAAKxG,MAAhD,CAEH,CA5E4B,CA8E7B4zB,iBAAkB,0BAAWE,MAAX,CAAoB,CAElC,GAAI0C,WAAY,KAAKx2B,MAAL,CAAc8zB,OAAO9zB,MAArC,CAEA,MAAO8zB,QAAOttB,MAAP,CAAclG,iBAAd,CAAiC,KAAKkG,MAAtC,GAAoDgwB,UAAYA,SAAvE,CAEH,CApF4B,CAsF7B7C,cAAe,uBAAWlB,GAAX,CAAiB,CAE5B,MAAOA,KAAImB,gBAAJ,CAAsB,IAAtB,CAAP,CAEH,CA1F4B,CA4F7BI,gBAAiB,yBAAWxgC,KAAX,CAAmB,CAEhC,MAAOuF,MAAK6iB,GAAL,CAAUpoB,MAAMqhC,eAAN,CAAuB,KAAKruB,MAA5B,CAAV,GAAoD,KAAKxG,MAAhE,CAEH,CAhG4B,CAkG7B+zB,WAAY,oBAAWlB,KAAX,CAAkB/7B,MAAlB,CAA2B,CAEnC,GAAI2/B,eAAgB,KAAKjwB,MAAL,CAAYlG,iBAAZ,CAA+BuyB,KAA/B,CAApB,CAEA,GAAK/7B,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,oDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED7E,OAAOwH,IAAP,CAAau0B,KAAb,EAEA,GAAK4D,cAAkB,KAAKz2B,MAAL,CAAc,KAAKA,MAA1C,CAAqD,CAEjDlJ,OAAOyI,GAAP,CAAY,KAAKiH,MAAjB,EAA0BqV,SAA1B,GACA/kB,OAAOkM,cAAP,CAAuB,KAAKhD,MAA5B,EAAqCnJ,GAArC,CAA0C,KAAK2P,MAA/C,EAEH,CAED,MAAO1P,OAAP,CAEH,CAxH4B,CA0H7B4/B,eAAgB,wBAAW5/B,MAAX,CAAoB,CAEhC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,wDAAd,EACAlN,OAAS,GAAIu6B,KAAJ,EAAT,CAEH,CAEDv6B,OAAOZ,GAAP,CAAY,KAAKsQ,MAAjB,CAAyB,KAAKA,MAA9B,EACA1P,OAAOi8B,cAAP,CAAuB,KAAK/yB,MAA5B,EAEA,MAAOlJ,OAAP,CAEH,CAxI4B,CA0I7B6rB,aAAc,sBAAW9e,MAAX,CAAoB,CAE9B,KAAK2C,MAAL,CAAYmc,YAAZ,CAA0B9e,MAA1B,EACA,KAAK7D,MAAL,CAAc,KAAKA,MAAL,CAAc6D,OAAO4f,iBAAP,EAA5B,CAEA,MAAO,KAAP,CAEH,CAjJ4B,CAmJ7B0J,UAAW,mBAAWruB,MAAX,CAAoB,CAE3B,KAAK0H,MAAL,CAAY3P,GAAZ,CAAiBiI,MAAjB,EAEA,MAAO,KAAP,CAEH,CAzJ4B,CA2J7Bud,OAAQ,gBAAWyX,MAAX,CAAoB,CAExB,MAAOA,QAAOttB,MAAP,CAAc6V,MAAd,CAAsB,KAAK7V,MAA3B,GAAyCstB,OAAO9zB,MAAP,GAAkB,KAAKA,MAAvE,CAEH,CA/J4B,CAAjC,EAmKA;;OAIA,QAAS22B,MAAT,CAAgB3K,MAAhB,CAAwBiI,QAAxB,CAAmC,CAE/B;AAEA,KAAKjI,MAAL,CAAgBA,SAAWvwB,SAAb,CAA2BuwB,MAA3B,CAAoC,GAAIrwB,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAlD,CACA,KAAKs4B,QAAL,CAAkBA,WAAax4B,SAAf,CAA6Bw4B,QAA7B,CAAwC,CAAxD,CAEH,CAED9tB,OAAO4B,MAAP,CAAe4uB,MAAMzwB,SAArB,CAAgC,CAE5BhQ,IAAK,aAAW81B,MAAX,CAAmBiI,QAAnB,CAA8B,CAE/B,KAAKjI,MAAL,CAAY1tB,IAAZ,CAAkB0tB,MAAlB,EACA,KAAKiI,QAAL,CAAgBA,QAAhB,CAEA,MAAO,KAAP,CAEH,CAT2B,CAW5B2C,cAAe,uBAAWvhC,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAoBilB,CAApB,CAAwB,CAEnC,KAAKwR,MAAL,CAAY91B,GAAZ,CAAiBb,CAAjB,CAAoBC,CAApB,CAAuBC,CAAvB,EACA,KAAK0+B,QAAL,CAAgBzZ,CAAhB,CAEA,MAAO,KAAP,CAEH,CAlB2B,CAoB5Bqc,8BAA+B,uCAAW7K,MAAX,CAAmB6G,KAAnB,CAA2B,CAEtD,KAAK7G,MAAL,CAAY1tB,IAAZ,CAAkB0tB,MAAlB,EACA,KAAKiI,QAAL,CAAgB,CAAEpB,MAAMryB,GAAN,CAAW,KAAKwrB,MAAhB,CAAlB,CAEA,MAAO,KAAP,CAEH,CA3B2B,CA6B5B8K,sBAAuB,UAAY,CAE/B,GAAIzpB,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIygB,IAAK,GAAIzgB,QAAJ,EAAT,CAEA,MAAO,SAASm7B,sBAAT,CAAgC7pB,CAAhC,CAAmCX,CAAnC,CAAsCuQ,CAAtC,CAA0C,CAE7C,GAAImP,QAAS3e,GAAG1I,UAAH,CAAekY,CAAf,CAAkBvQ,CAAlB,EAAsB+e,KAAtB,CAA6BjP,GAAGzX,UAAH,CAAesI,CAAf,CAAkBX,CAAlB,CAA7B,EAAqDuP,SAArD,EAAb,CAEA;AAEA,KAAKgb,6BAAL,CAAoC7K,MAApC,CAA4C/e,CAA5C,EAEA,MAAO,KAAP,CAEH,CAVD,CAYH,CAjBsB,EA7BK,CAgD5B9U,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CApD2B,CAsD5BA,KAAM,cAAW9K,KAAX,CAAmB,CAErB,KAAKw4B,MAAL,CAAY1tB,IAAZ,CAAkB9K,MAAMw4B,MAAxB,EACA,KAAKiI,QAAL,CAAgBzgC,MAAMygC,QAAtB,CAEA,MAAO,KAAP,CAEH,CA7D2B,CA+D5BpY,UAAW,oBAAY,CAEnB;AAEA,GAAIkb,qBAAsB,IAAM,KAAK/K,MAAL,CAAYvoB,MAAZ,EAAhC,CACA,KAAKuoB,MAAL,CAAYhpB,cAAZ,CAA4B+zB,mBAA5B,EACA,KAAK9C,QAAL,EAAiB8C,mBAAjB,CAEA,MAAO,KAAP,CAEH,CAzE2B,CA2E5Btb,OAAQ,iBAAY,CAEhB,KAAKwY,QAAL,EAAiB,CAAE,CAAnB,CACA,KAAKjI,MAAL,CAAYvQ,MAAZ,GAEA,MAAO,KAAP,CAEH,CAlF2B,CAoF5BoZ,gBAAiB,yBAAWhC,KAAX,CAAmB,CAEhC,MAAO,MAAK7G,MAAL,CAAYxrB,GAAZ,CAAiBqyB,KAAjB,EAA2B,KAAKoB,QAAvC,CAEH,CAxF2B,CA0F5B+C,iBAAkB,0BAAWlD,MAAX,CAAoB,CAElC,MAAO,MAAKe,eAAL,CAAsBf,OAAOttB,MAA7B,EAAwCstB,OAAO9zB,MAAtD,CAEH,CA9F2B,CAgG5Bi3B,aAAc,sBAAWpE,KAAX,CAAkB/7B,MAAlB,CAA2B,CAErC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,qDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAOwH,IAAP,CAAa,KAAK0tB,MAAlB,EAA2BhpB,cAA3B,CAA2C,CAAE,KAAK6xB,eAAL,CAAsBhC,KAAtB,CAA7C,EAA6Eh8B,GAA7E,CAAkFg8B,KAAlF,CAAP,CAEH,CA3G2B,CA6G5BqE,cAAe,UAAY,CAEvB,GAAI7pB,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASu7B,cAAT,CAAwBC,IAAxB,CAA8BrgC,MAA9B,CAAuC,CAE1C,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,sDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,GAAIy7B,WAAYD,KAAKE,KAAL,CAAYhqB,EAAZ,CAAhB,CAEA,GAAIiqB,aAAc,KAAKtL,MAAL,CAAYxrB,GAAZ,CAAiB42B,SAAjB,CAAlB,CAEA,GAAKE,cAAgB,CAArB,CAAyB,CAErB;AACA,GAAK,KAAKzC,eAAL,CAAsBsC,KAAKn8B,KAA3B,IAAuC,CAA5C,CAAgD,CAE5C,MAAOlE,QAAOwH,IAAP,CAAa64B,KAAKn8B,KAAlB,CAAP,CAEH,CAED;AACA,MAAOS,UAAP,CAEH,CAED,GAAIqR,GAAI,EAAIqqB,KAAKn8B,KAAL,CAAWwF,GAAX,CAAgB,KAAKwrB,MAArB,EAAgC,KAAKiI,QAAzC,EAAsDqD,WAA9D,CAEA,GAAKxqB,EAAI,CAAJ,EAASA,EAAI,CAAlB,CAAsB,CAElB,MAAOrR,UAAP,CAEH,CAED,MAAO3E,QAAOwH,IAAP,CAAa84B,SAAb,EAAyBp0B,cAAzB,CAAyC8J,CAAzC,EAA6CjW,GAA7C,CAAkDsgC,KAAKn8B,KAAvD,CAAP,CAEH,CArCD,CAuCH,CA3Cc,EA7Ga,CA0J5Bu8B,eAAgB,wBAAWJ,IAAX,CAAkB,CAE9B;AAEA,GAAIK,WAAY,KAAK3C,eAAL,CAAsBsC,KAAKn8B,KAA3B,CAAhB,CACA,GAAIy8B,SAAU,KAAK5C,eAAL,CAAsBsC,KAAKrtB,GAA3B,CAAd,CAEA,MAAS0tB,WAAY,CAAZ,EAAiBC,QAAU,CAA7B,EAAsCA,QAAU,CAAV,EAAeD,UAAY,CAAxE,CAEH,CAnK2B,CAqK5B7D,cAAe,uBAAWlB,GAAX,CAAiB,CAE5B,MAAOA,KAAIuB,eAAJ,CAAqB,IAArB,CAAP,CAEH,CAzK2B,CA2K5BJ,iBAAkB,0BAAWE,MAAX,CAAoB,CAElC,MAAOA,QAAOE,eAAP,CAAwB,IAAxB,CAAP,CAEH,CA/K2B,CAiL5B0D,cAAe,uBAAW5gC,MAAX,CAAoB,CAE/B,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,sDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAOwH,IAAP,CAAa,KAAK0tB,MAAlB,EAA2BhpB,cAA3B,CAA2C,CAAE,KAAKixB,QAAlD,CAAP,CAEH,CA5L2B,CA8L5BtR,aAAc,UAAY,CAEtB,GAAItV,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIg8B,IAAK,GAAInL,QAAJ,EAAT,CAEA,MAAO,SAAS7J,aAAT,CAAuB9e,MAAvB,CAA+B+zB,oBAA/B,CAAsD,CAEzD,GAAIC,cAAeD,sBAAwBD,GAAG/K,eAAH,CAAoB/oB,MAApB,CAA3C,CAEA,GAAIi0B,gBAAiB,KAAKJ,aAAL,CAAoBrqB,EAApB,EAAyBsV,YAAzB,CAAuC9e,MAAvC,CAArB,CAEA,GAAImoB,QAAS,KAAKA,MAAL,CAAYhR,YAAZ,CAA0B6c,YAA1B,EAAyChc,SAAzC,EAAb,CAEA,KAAKoY,QAAL,CAAgB,CAAE6D,eAAet3B,GAAf,CAAoBwrB,MAApB,CAAlB,CAEA,MAAO,KAAP,CAEH,CAZD,CAcH,CAnBa,EA9Lc,CAmN5BmB,UAAW,mBAAWruB,MAAX,CAAoB,CAE3B,KAAKm1B,QAAL,EAAiBn1B,OAAO0B,GAAP,CAAY,KAAKwrB,MAAjB,CAAjB,CAEA,MAAO,KAAP,CAEH,CAzN2B,CA2N5B3P,OAAQ,gBAAW7oB,KAAX,CAAmB,CAEvB,MAAOA,OAAMw4B,MAAN,CAAa3P,MAAb,CAAqB,KAAK2P,MAA1B,GAAwCx4B,MAAMygC,QAAN,GAAmB,KAAKA,QAAvE,CAEH,CA/N2B,CAAhC,EAmOA;;;;OAMA,QAAS8D,QAAT,CAAkBnrB,EAAlB,CAAsBC,EAAtB,CAA0BK,EAA1B,CAA8BC,EAA9B,CAAkC6qB,EAAlC,CAAsCC,EAAtC,CAA2C,CAEvC,KAAKC,MAAL,CAAc,CAERtrB,KAAOnR,SAAT,CAAuBmR,EAAvB,CAA4B,GAAI+pB,MAAJ,EAFlB,CAGR9pB,KAAOpR,SAAT,CAAuBoR,EAAvB,CAA4B,GAAI8pB,MAAJ,EAHlB,CAIRzpB,KAAOzR,SAAT,CAAuByR,EAAvB,CAA4B,GAAIypB,MAAJ,EAJlB,CAKRxpB,KAAO1R,SAAT,CAAuB0R,EAAvB,CAA4B,GAAIwpB,MAAJ,EALlB,CAMRqB,KAAOv8B,SAAT,CAAuBu8B,EAAvB,CAA4B,GAAIrB,MAAJ,EANlB,CAORsB,KAAOx8B,SAAT,CAAuBw8B,EAAvB,CAA4B,GAAItB,MAAJ,EAPlB,CAAd,CAWH,CAEDxwB,OAAO4B,MAAP,CAAegwB,QAAQ7xB,SAAvB,CAAkC,CAE9BhQ,IAAK,aAAW0W,EAAX,CAAeC,EAAf,CAAmBK,EAAnB,CAAuBC,EAAvB,CAA2B6qB,EAA3B,CAA+BC,EAA/B,CAAoC,CAErC,GAAIC,QAAS,KAAKA,MAAlB,CAEAA,OAAQ,CAAR,EAAY55B,IAAZ,CAAkBsO,EAAlB,EACAsrB,OAAQ,CAAR,EAAY55B,IAAZ,CAAkBuO,EAAlB,EACAqrB,OAAQ,CAAR,EAAY55B,IAAZ,CAAkB4O,EAAlB,EACAgrB,OAAQ,CAAR,EAAY55B,IAAZ,CAAkB6O,EAAlB,EACA+qB,OAAQ,CAAR,EAAY55B,IAAZ,CAAkB05B,EAAlB,EACAE,OAAQ,CAAR,EAAY55B,IAAZ,CAAkB25B,EAAlB,EAEA,MAAO,KAAP,CAEH,CAf6B,CAiB9B9/B,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CArB6B,CAuB9BA,KAAM,cAAW65B,OAAX,CAAqB,CAEvB,GAAID,QAAS,KAAKA,MAAlB,CAEA,IAAM,GAAI7wB,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B6wB,OAAQ7wB,CAAR,EAAY/I,IAAZ,CAAkB65B,QAAQD,MAAR,CAAgB7wB,CAAhB,CAAlB,EAEH,CAED,MAAO,KAAP,CAEH,CAnC6B,CAqC9B+wB,cAAe,uBAAWpsB,CAAX,CAAe,CAE1B,GAAIksB,QAAS,KAAKA,MAAlB,CACA,GAAI/Z,IAAKnS,EAAEkP,QAAX,CACA,GAAImd,KAAMla,GAAI,CAAJ,CAAV,CAAmBma,IAAMna,GAAI,CAAJ,CAAzB,CAAkCoa,IAAMpa,GAAI,CAAJ,CAAxC,CAAiDqa,IAAMra,GAAI,CAAJ,CAAvD,CACA,GAAIsa,KAAMta,GAAI,CAAJ,CAAV,CAAmBua,IAAMva,GAAI,CAAJ,CAAzB,CAAkCwa,IAAMxa,GAAI,CAAJ,CAAxC,CAAiDya,IAAMza,GAAI,CAAJ,CAAvD,CACA,GAAI0a,KAAM1a,GAAI,CAAJ,CAAV,CAAmB2a,IAAM3a,GAAI,CAAJ,CAAzB,CAAkC4a,KAAO5a,GAAI,EAAJ,CAAzC,CAAmD6a,KAAO7a,GAAI,EAAJ,CAA1D,CACA,GAAI8a,MAAO9a,GAAI,EAAJ,CAAX,CAAqB+a,KAAO/a,GAAI,EAAJ,CAA5B,CAAsCgb,KAAOhb,GAAI,EAAJ,CAA7C,CAAuDib,KAAOjb,GAAI,EAAJ,CAA9D,CAEA+Z,OAAQ,CAAR,EAAYtB,aAAZ,CAA2B4B,IAAMH,GAAjC,CAAsCO,IAAMH,GAA5C,CAAiDO,KAAOH,GAAxD,CAA6DO,KAAOH,IAApE,EAA2Epd,SAA3E,GACAqc,OAAQ,CAAR,EAAYtB,aAAZ,CAA2B4B,IAAMH,GAAjC,CAAsCO,IAAMH,GAA5C,CAAiDO,KAAOH,GAAxD,CAA6DO,KAAOH,IAApE,EAA2Epd,SAA3E,GACAqc,OAAQ,CAAR,EAAYtB,aAAZ,CAA2B4B,IAAMF,GAAjC,CAAsCM,IAAMF,GAA5C,CAAiDM,KAAOF,GAAxD,CAA6DM,KAAOF,IAApE,EAA2Erd,SAA3E,GACAqc,OAAQ,CAAR,EAAYtB,aAAZ,CAA2B4B,IAAMF,GAAjC,CAAsCM,IAAMF,GAA5C,CAAiDM,KAAOF,GAAxD,CAA6DM,KAAOF,IAApE,EAA2Erd,SAA3E,GACAqc,OAAQ,CAAR,EAAYtB,aAAZ,CAA2B4B,IAAMD,GAAjC,CAAsCK,IAAMD,GAA5C,CAAiDK,KAAOD,IAAxD,CAA8DK,KAAOD,IAArE,EAA4Etd,SAA5E,GACAqc,OAAQ,CAAR,EAAYtB,aAAZ,CAA2B4B,IAAMD,GAAjC,CAAsCK,IAAMD,GAA5C,CAAiDK,KAAOD,IAAxD,CAA8DK,KAAOD,IAArE,EAA4Etd,SAA5E,GAEA,MAAO,KAAP,CAEH,CAvD6B,CAyD9Bwd,iBAAkB,UAAY,CAE1B,GAAIvF,QAAS,GAAIkB,OAAJ,EAAb,CAEA,MAAO,SAASqE,iBAAT,CAA2B99B,MAA3B,CAAoC,CAEvC,GAAI23B,UAAW33B,OAAO23B,QAAtB,CAEA,GAAKA,SAASoG,cAAT,GAA4B,IAAjC,CACIpG,SAASqG,qBAAT,GAEJzF,OAAOx1B,IAAP,CAAa40B,SAASoG,cAAtB,EACK3W,YADL,CACmBpnB,OAAO2vB,WAD1B,EAGA,MAAO,MAAK0I,gBAAL,CAAuBE,MAAvB,CAAP,CAEH,CAZD,CAcH,CAlBiB,EAzDY,CA6E9B0F,iBAAkB,UAAY,CAE1B,GAAI1F,QAAS,GAAIkB,OAAJ,EAAb,CAEA,MAAO,SAASwE,iBAAT,CAA2BC,MAA3B,CAAoC,CAEvC3F,OAAOttB,MAAP,CAActQ,GAAd,CAAmB,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,EACA49B,OAAO9zB,MAAP,CAAgB,kBAAhB,CACA8zB,OAAOnR,YAAP,CAAqB8W,OAAOvO,WAA5B,EAEA,MAAO,MAAK0I,gBAAL,CAAuBE,MAAvB,CAAP,CAEH,CARD,CAUH,CAdiB,EA7EY,CA6F9BF,iBAAkB,0BAAWE,MAAX,CAAoB,CAElC,GAAIoE,QAAS,KAAKA,MAAlB,CACA,GAAI1xB,QAASstB,OAAOttB,MAApB,CACA,GAAIkzB,WAAY,CAAE5F,OAAO9zB,MAAzB,CAEA,IAAM,GAAIqH,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAIxE,UAAWq1B,OAAQ7wB,CAAR,EAAYwtB,eAAZ,CAA6BruB,MAA7B,CAAf,CAEA,GAAK3D,SAAW62B,SAAhB,CAA4B,CAExB,MAAO,MAAP,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAjH6B,CAmH9B/F,cAAe,UAAY,CAEvB,GAAI9mB,IAAK,GAAIlR,QAAJ,EAAT,CACIuR,GAAK,GAAIvR,QAAJ,EADT,CAGA,MAAO,SAASg4B,cAAT,CAAwBlB,GAAxB,CAA8B,CAEjC,GAAIyF,QAAS,KAAKA,MAAlB,CAEA,IAAM,GAAI7wB,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAI7T,OAAQ0kC,OAAQ7wB,CAAR,CAAZ,CAEAwF,GAAGxX,CAAH,CAAO7B,MAAMw4B,MAAN,CAAa32B,CAAb,CAAiB,CAAjB,CAAqBo9B,IAAI3yB,GAAJ,CAAQzK,CAA7B,CAAiCo9B,IAAI5yB,GAAJ,CAAQxK,CAAhD,CACA6X,GAAG7X,CAAH,CAAO7B,MAAMw4B,MAAN,CAAa32B,CAAb,CAAiB,CAAjB,CAAqBo9B,IAAI5yB,GAAJ,CAAQxK,CAA7B,CAAiCo9B,IAAI3yB,GAAJ,CAAQzK,CAAhD,CACAwX,GAAGvX,CAAH,CAAO9B,MAAMw4B,MAAN,CAAa12B,CAAb,CAAiB,CAAjB,CAAqBm9B,IAAI3yB,GAAJ,CAAQxK,CAA7B,CAAiCm9B,IAAI5yB,GAAJ,CAAQvK,CAAhD,CACA4X,GAAG5X,CAAH,CAAO9B,MAAMw4B,MAAN,CAAa12B,CAAb,CAAiB,CAAjB,CAAqBm9B,IAAI5yB,GAAJ,CAAQvK,CAA7B,CAAiCm9B,IAAI3yB,GAAJ,CAAQxK,CAAhD,CACAuX,GAAGtX,CAAH,CAAO/B,MAAMw4B,MAAN,CAAaz2B,CAAb,CAAiB,CAAjB,CAAqBk9B,IAAI3yB,GAAJ,CAAQvK,CAA7B,CAAiCk9B,IAAI5yB,GAAJ,CAAQtK,CAAhD,CACA2X,GAAG3X,CAAH,CAAO/B,MAAMw4B,MAAN,CAAaz2B,CAAb,CAAiB,CAAjB,CAAqBk9B,IAAI5yB,GAAJ,CAAQtK,CAA7B,CAAiCk9B,IAAI3yB,GAAJ,CAAQvK,CAAhD,CAEA,GAAI2iB,IAAK1kB,MAAMqhC,eAAN,CAAuBhoB,EAAvB,CAAT,CACA,GAAIsL,IAAK3kB,MAAMqhC,eAAN,CAAuB3nB,EAAvB,CAAT,CAEA;AAEA,GAAKgL,GAAK,CAAL,EAAUC,GAAK,CAApB,CAAwB,CAEpB,MAAO,MAAP,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CA9BD,CAgCH,CArCc,EAnHe,CA0J9Bqb,cAAe,uBAAWX,KAAX,CAAmB,CAE9B,GAAIqF,QAAS,KAAKA,MAAlB,CAEA,IAAM,GAAI7wB,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAK6wB,OAAQ7wB,CAAR,EAAYwtB,eAAZ,CAA6BhC,KAA7B,EAAuC,CAA5C,CAAgD,CAE5C,MAAO,MAAP,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CA1K6B,CAAlC,EA8KA,GAAI8G,mBAAoB,kFAAxB,CAEA,GAAIC,wBAAyB,8DAA7B,CAEA,GAAIC,oBAAqB,0EAAzB,CAEA,GAAIC,gBAAiB,4aAArB,CAEA,GAAIC,qBAAsB,uFAA1B,CAEA,GAAIC,cAAe,0CAAnB,CAEA,GAAIC,oBAAqB,yCAAzB,CAEA,GAAIC,OAAQ,o7LAAZ,CAEA,GAAIC,uBAAwB,k9BAA5B,CAEA,GAAIC,0BAA2B,0jBAA/B,CAEA,GAAIC,+BAAgC,4LAApC,CAEA,GAAIC,6BAA8B,qHAAlC,CAEA,GAAIC,wBAAyB,2HAA7B,CAEA,GAAIC,gBAAiB,yDAArB,CAEA,GAAIC,qBAAsB,oDAA1B,CAEA,GAAIC,mBAAoB,kDAAxB,CAEA,GAAIC,cAAe,qDAAnB,CAEA,GAAIC,QAAS,2rEAAb,CAEA,GAAIC,6BAA8B,olIAAlC,CAEA,GAAIC,sBAAuB,gIAA3B,CAEA,GAAIC,6BAA8B,mJAAlC,CAEA,GAAIC,wBAAyB,mKAA7B,CAEA,GAAIC,sBAAuB,8MAA3B,CAEA,GAAIC,2BAA4B,oEAAhC,CAEA,GAAIC,oBAAqB,yDAAzB,CAEA,GAAIC,yBAA0B,+uFAA9B,CAEA,GAAIC,iBAAkB,gqDAAtB,CAEA,GAAIC,sBAAuB,8oBAA3B,CAEA,GAAIC,oBAAqB,gOAAzB,CAEA,GAAIC,eAAgB,sgBAApB,CAEA,GAAIC,YAAa,qDAAjB,CAEA,GAAIC,iBAAkB,qDAAtB,CAEA,GAAIC,cAAe,8SAAnB,CAEA,GAAIC,mBAAoB,2MAAxB,CAEA,GAAIC,2BAA4B,yYAAhC,CAEA,GAAIC,mBAAoB,8HAAxB,CAEA,GAAIC,wBAAyB,gGAA7B,CAEA,GAAIC,uBAAwB,wuEAA5B,CAEA,GAAIC,mBAAoB,qpHAAxB,CAEA,GAAIC,kBAAmB,k5GAAvB,CAEA,GAAIC,uBAAwB,uMAA5B,CAEA,GAAIC,4BAA6B,46CAAjC,CAEA,GAAIC,0BAA2B,6iBAA/B,CAEA,GAAIC,+BAAgC,8uJAApC,CAEA,GAAIC,uBAAwB,6xFAA5B,CAEA,GAAIC,sBAAuB,0yBAA3B,CAEA,GAAIC,qBAAsB,6PAA1B,CAEA,GAAIC,sBAAuB,yIAA3B,CAEA,GAAIC,2BAA4B,yIAAhC,CAEA,GAAIC,yBAA0B,uIAA9B,CAEA,GAAIC,oBAAqB,uPAAzB,CAEA,GAAIC,cAAe,qJAAnB,CAEA,GAAIC,mBAAoB,oDAAxB,CAEA,GAAIC,uBAAwB,yMAA5B,CAEA,GAAIC,4BAA6B,iFAAjC,CAEA,GAAIC,uBAAwB,wKAA5B,CAEA,GAAIC,4BAA6B,oEAAjC,CAEA,GAAIC,oBAAqB,+UAAzB,CAEA,GAAIC,yBAA0B,0KAA9B,CAEA,GAAIC,oBAAqB,yqBAAzB,CAEA,GAAIC,uBAAwB,gaAA5B,CAEA,GAAIC,sBAAuB,4LAA3B,CAEA,GAAIC,yBAA0B,0zBAA9B,CAEA,GAAIC,SAAU,oyCAAd,CAEA,GAAIC,8BAA+B,6EAAnC,CAEA,GAAIC,gBAAiB,+GAArB,CAEA,GAAIC,oBAAqB,yFAAzB,CAEA,GAAIC,yBAA0B,oVAA9B,CAEA,GAAIC,uBAAwB,wKAA5B,CAEA,GAAIC,4BAA6B,oEAAjC,CAEA,GAAIC,yBAA0B,ipNAA9B,CAEA,GAAIC,uBAAwB,yeAA5B,CAEA,GAAIC,kBAAmB,qlBAAvB,CAEA,GAAIC,0BAA2B,2wCAA/B,CAEA,GAAIC,iBAAkB,iOAAtB,CAEA,GAAIC,sBAAuB,2gCAA3B,CAEA,GAAIC,iBAAkB,gYAAtB,CAEA,GAAIC,mBAAoB,6WAAxB,CAEA,GAAIC,sBAAuB,yLAA3B,CAEA,GAAIC,2BAA4B,kEAAhC,CAEA,GAAIC,sBAAuB,8FAA3B,CAEA,GAAIC,2BAA4B,+6BAAhC,CAEA,GAAIC,kBAAmB,gQAAvB,CAEA,GAAIC,gBAAiB,+RAArB,CAEA,GAAIC,WAAY,wRAAhB,CAEA,GAAIC,mBAAoB,mFAAxB,CAEA,GAAIC,iBAAkB,0GAAtB,CAEA,GAAIC,YAAa,4EAAjB,CAEA,GAAIC,iBAAkB,yJAAtB,CAEA,GAAIC,WAAY,uPAAhB,CAEA,GAAIC,WAAY,gOAAhB,CAEA,GAAIC,YAAa,svBAAjB,CAEA,GAAIC,YAAa,mqBAAjB,CAEA,GAAIC,mBAAoB,8rBAAxB,CAEA,GAAIC,mBAAoB,mtBAAxB,CAEA,GAAIC,eAAgB,mXAApB,CAEA,GAAIC,eAAgB,8LAApB,CAEA,GAAIC,iBAAkB,oyBAAtB,CAEA,GAAIC,iBAAkB,ihBAAtB,CAEA,GAAIC,gBAAiB,u8CAArB,CAEA,GAAIC,gBAAiB,s2BAArB,CAEA,GAAIC,kBAAmB,qnEAAvB,CAEA,GAAIC,kBAAmB,8lCAAvB,CAEA,GAAIC,gBAAiB,shEAArB,CAEA,GAAIC,gBAAiB,sqCAArB,CAEA,GAAIC,mBAAoB,gwEAAxB,CAEA,GAAIC,mBAAoB,8mCAAxB,CAEA,GAAIC,aAAc,gjBAAlB,CAEA,GAAIC,aAAc,g8BAAlB,CAEA,GAAIC,aAAc,ywBAAlB,CAEA,GAAIC,aAAc,+mBAAlB,CAEA,GAAIC,aAAc,gWAAlB,CAEA,GAAIC,aAAc,gOAAlB,CAEA,GAAIC,aAAc,CACdjH,kBAAmBA,iBADL,CAEdC,uBAAwBA,sBAFV,CAGdC,mBAAoBA,kBAHN,CAIdC,eAAgBA,cAJF,CAKdC,oBAAqBA,mBALP,CAMdC,aAAcA,YANA,CAOdC,mBAAoBA,kBAPN,CAQdC,MAAOA,KARO,CASdC,sBAAuBA,qBATT,CAUdC,yBAA0BA,wBAVZ,CAWdC,8BAA+BA,6BAXjB,CAYdC,4BAA6BA,2BAZf,CAadC,uBAAwBA,sBAbV,CAcdC,eAAgBA,cAdF,CAedC,oBAAqBA,mBAfP,CAgBdC,kBAAmBA,iBAhBL,CAiBdC,aAAcA,YAjBA,CAkBdC,OAAQA,MAlBM,CAmBdC,4BAA6BA,2BAnBf,CAoBdC,qBAAsBA,oBApBR,CAqBdC,4BAA6BA,2BArBf,CAsBdC,uBAAwBA,sBAtBV,CAuBdC,qBAAsBA,oBAvBR,CAwBdC,0BAA2BA,yBAxBb,CAyBdC,mBAAoBA,kBAzBN,CA0BdC,wBAAyBA,uBA1BX,CA2BdC,gBAAiBA,eA3BH,CA4BdC,qBAAsBA,oBA5BR,CA6BdC,mBAAoBA,kBA7BN,CA8BdC,cAAeA,aA9BD,CA+BdC,WAAYA,UA/BE,CAgCdC,gBAAiBA,eAhCH,CAiCdC,aAAcA,YAjCA,CAkCdC,kBAAmBA,iBAlCL,CAmCdC,0BAA2BA,yBAnCb,CAoCdC,kBAAmBA,iBApCL,CAqCdC,uBAAwBA,sBArCV,CAsCdC,sBAAuBA,qBAtCT,CAuCdC,kBAAmBA,iBAvCL,CAwCdC,iBAAkBA,gBAxCJ,CAyCdC,sBAAuBA,qBAzCT,CA0CdC,2BAA4BA,0BA1Cd,CA2CdC,yBAA0BA,wBA3CZ,CA4CdC,8BAA+BA,6BA5CjB,CA6CdC,sBAAuBA,qBA7CT,CA8CdC,qBAAsBA,oBA9CR,CA+CdC,oBAAqBA,mBA/CP,CAgDdC,qBAAsBA,oBAhDR,CAiDdC,0BAA2BA,yBAjDb,CAkDdC,wBAAyBA,uBAlDX,CAmDdC,mBAAoBA,kBAnDN,CAoDdC,aAAcA,YApDA,CAqDdC,kBAAmBA,iBArDL,CAsDdC,sBAAuBA,qBAtDT,CAuDdC,2BAA4BA,0BAvDd,CAwDdC,sBAAuBA,qBAxDT,CAyDdC,2BAA4BA,0BAzDd,CA0DdC,mBAAoBA,kBA1DN,CA2DdC,wBAAyBA,uBA3DX,CA4DdC,mBAAoBA,kBA5DN,CA6DdC,sBAAuBA,qBA7DT,CA8DdC,qBAAsBA,oBA9DR,CA+DdC,wBAAyBA,uBA/DX,CAgEdC,QAASA,OAhEK,CAiEdC,6BAA8BA,4BAjEhB,CAkEdC,eAAgBA,cAlEF,CAmEdC,mBAAoBA,kBAnEN,CAoEdC,wBAAyBA,uBApEX,CAqEdC,sBAAuBA,qBArET,CAsEdC,2BAA4BA,0BAtEd,CAuEdC,wBAAyBA,uBAvEX,CAwEdC,sBAAuBA,qBAxET,CAyEdC,iBAAkBA,gBAzEJ,CA0EdC,yBAA0BA,wBA1EZ,CA2EdC,gBAAiBA,eA3EH,CA4EdC,qBAAsBA,oBA5ER,CA6EdC,gBAAiBA,eA7EH,CA8EdC,kBAAmBA,iBA9EL,CA+EdC,qBAAsBA,oBA/ER,CAgFdC,0BAA2BA,yBAhFb,CAiFdC,qBAAsBA,oBAjFR,CAkFdC,0BAA2BA,yBAlFb,CAmFdC,iBAAkBA,gBAnFJ,CAoFdC,eAAgBA,cApFF,CAqFdC,UAAWA,SArFG,CAsFdC,kBAAmBA,iBAtFL,CAuFdC,gBAAiBA,eAvFH,CAwFdC,WAAYA,UAxFE,CAyFdC,gBAAiBA,eAzFH,CA2FdC,UAAWA,SA3FG,CA4FdC,UAAWA,SA5FG,CA6FdC,WAAYA,UA7FE,CA8FdC,WAAYA,UA9FE,CA+FdC,kBAAmBA,iBA/FL,CAgGdC,kBAAmBA,iBAhGL,CAiGdC,cAAeA,aAjGD,CAkGdC,cAAeA,aAlGD,CAmGdC,gBAAiBA,eAnGH,CAoGdC,gBAAiBA,eApGH,CAqGdC,eAAgBA,cArGF,CAsGdC,eAAgBA,cAtGF,CAuGdC,iBAAkBA,gBAvGJ,CAwGdC,iBAAkBA,gBAxGJ,CAyGdC,eAAgBA,cAzGF,CA0GdC,eAAgBA,cA1GF,CA2GdC,kBAAmBA,iBA3GL,CA4GdC,kBAAmBA,iBA5GL,CA6GdC,YAAaA,WA7GC,CA8GdC,YAAaA,WA9GC,CA+GdC,YAAaA,WA/GC,CAgHdC,YAAaA,WAhHC,CAiHdC,YAAaA,WAjHC,CAkHdC,YAAaA,WAlHC,CAAlB,CAqHA;;OAIA,GAAIE,eAAgB,CAEhBC,MAAO,eAAWC,QAAX,CAAsB,CAEzB,GAAIC,QAAS,EAAb,CAEA,IAAM,GAAIC,GAAI,CAAd,CAAiBA,EAAIF,SAASt9B,MAA9B,CAAsCw9B,GAAtC,CAA6C,CAEzC,GAAIj2B,KAAM,KAAK7S,KAAL,CAAY4oC,SAAUE,CAAV,CAAZ,CAAV,CAEA,IAAM,GAAI7a,EAAV,GAAepb,IAAf,CAAqB,CAEjBg2B,OAAQ5a,CAAR,EAAcpb,IAAKob,CAAL,CAAd,CAEH,CAEJ,CAED,MAAO4a,OAAP,CAEH,CApBe,CAsBhB7oC,MAAO,eAAW+oC,YAAX,CAA0B,CAE7B,GAAIC,cAAe,EAAnB,CAEA,IAAM,GAAIF,EAAV,GAAeC,aAAf,CAA8B,CAE1BC,aAAcF,CAAd,EAAoB,EAApB,CAEA,IAAM,GAAI7a,EAAV,GAAe8a,cAAcD,CAAd,CAAf,CAAmC,CAE/B,GAAIG,eAAgBF,aAAcD,CAAd,EAAmB7a,CAAnB,CAApB,CAEA,GAAKgb,gBAAmBA,cAAcC,OAAd,EACpBD,cAAc3U,SADM,EACO2U,cAAcpkB,SADrB,EAEpBokB,cAAcpnB,SAFM,EAEOonB,cAAcjX,SAFrB,EAEkCiX,cAActR,SAFhD,EAGpBsR,cAAc3S,SAHb,CAAL,CAGgC,CAE5B0S,aAAcF,CAAd,EAAmB7a,CAAnB,EAAyBgb,cAAcjpC,KAAd,EAAzB,CAEH,CAPD,IAOO,IAAKsR,MAAM63B,OAAN,CAAeF,aAAf,CAAL,CAAsC,CAEzCD,aAAcF,CAAd,EAAmB7a,CAAnB,EAAyBgb,cAAcnyB,KAAd,EAAzB,CAEH,CAJM,IAIA,CAEHkyB,aAAcF,CAAd,EAAmB7a,CAAnB,EAAyBgb,aAAzB,CAEH,CAEJ,CAEJ,CAED,MAAOD,aAAP,CAEH,CAzDe,CAApB,CA6DA;;OAIA,GAAII,eAAgB,CAAE,YAAa,QAAf,CAAyB,eAAgB,QAAzC,CAAmD,OAAQ,QAA3D,CAAqE,aAAc,QAAnF,CAA6F,QAAS,QAAtG,CAChB,QAAS,QADO,CACG,SAAU,QADb,CACuB,QAAS,QADhC,CAC0C,iBAAkB,QAD5D,CACsE,OAAQ,QAD9E,CACwF,aAAc,QADtG,CAEhB,QAAS,QAFO,CAEG,YAAa,QAFhB,CAE0B,YAAa,QAFvC,CAEiD,aAAc,QAF/D,CAEyE,YAAa,QAFtF,CAEgG,QAAS,QAFzG,CAGhB,iBAAkB,QAHF,CAGY,WAAY,QAHxB,CAGkC,UAAW,QAH7C,CAGuD,OAAQ,QAH/D,CAGyE,WAAY,QAHrF,CAG+F,WAAY,QAH3G,CAIhB,gBAAiB,QAJD,CAIW,WAAY,QAJvB,CAIiC,YAAa,QAJ9C,CAIwD,WAAY,QAJpE,CAI8E,YAAa,QAJ3F,CAIqG,cAAe,QAJpH,CAKhB,iBAAkB,QALF,CAKY,aAAc,QAL1B,CAKoC,aAAc,QALlD,CAK4D,UAAW,QALvE,CAKiF,aAAc,QAL/F,CAKyG,eAAgB,QALzH,CAMhB,gBAAiB,QAND,CAMW,gBAAiB,QAN5B,CAMsC,gBAAiB,QANvD,CAMiE,gBAAiB,QANlF,CAM4F,aAAc,QAN1G,CAOhB,WAAY,QAPI,CAOM,cAAe,QAPrB,CAO+B,UAAW,QAP1C,CAOoD,UAAW,QAP/D,CAOyE,aAAc,QAPvF,CAOiG,YAAa,QAP9G,CAQhB,cAAe,QARC,CAQS,cAAe,QARxB,CAQkC,UAAW,QAR7C,CAQuD,YAAa,QARpE,CAQ8E,aAAc,QAR5F,CAQsG,OAAQ,QAR9G,CAShB,YAAa,QATG,CASO,OAAQ,QATf,CASyB,QAAS,QATlC,CAS4C,cAAe,QAT3D,CASqE,OAAQ,QAT7E,CASuF,WAAY,QATnG,CAS6G,UAAW,QATxH,CAUhB,YAAa,QAVG,CAUO,SAAU,QAVjB,CAU2B,QAAS,QAVpC,CAU8C,QAAS,QAVvD,CAUiE,WAAY,QAV7E,CAUuF,gBAAiB,QAVxG,CAUkH,YAAa,QAV/H,CAWhB,eAAgB,QAXA,CAWU,YAAa,QAXvB,CAWiC,aAAc,QAX/C,CAWyD,YAAa,QAXtE,CAWgF,uBAAwB,QAXxG,CAWkH,YAAa,QAX/H,CAYhB,aAAc,QAZE,CAYQ,YAAa,QAZrB,CAY+B,YAAa,QAZ5C,CAYsD,cAAe,QAZrE,CAY+E,gBAAiB,QAZhG,CAY0G,eAAgB,QAZ1H,CAahB,iBAAkB,QAbF,CAaY,iBAAkB,QAb9B,CAawC,iBAAkB,QAb1D,CAaoE,cAAe,QAbnF,CAa6F,OAAQ,QAbrG,CAa+G,YAAa,QAb5H,CAchB,QAAS,QAdO,CAcG,UAAW,QAdd,CAcwB,SAAU,QAdlC,CAc4C,mBAAoB,QAdhE,CAc0E,aAAc,QAdxF,CAckG,eAAgB,QAdlH,CAehB,eAAgB,QAfA,CAeU,iBAAkB,QAf5B,CAesC,kBAAmB,QAfzD,CAemE,oBAAqB,QAfxF,CAekG,kBAAmB,QAfrH,CAgBhB,kBAAmB,QAhBH,CAgBa,eAAgB,QAhB7B,CAgBuC,YAAa,QAhBpD,CAgB8D,YAAa,QAhB3E,CAgBqF,WAAY,QAhBjG,CAgB2G,cAAe,QAhB1H,CAiBhB,OAAQ,QAjBQ,CAiBE,UAAW,QAjBb,CAiBuB,QAAS,QAjBhC,CAiB0C,YAAa,QAjBvD,CAiBiE,SAAU,QAjB3E,CAiBqF,YAAa,QAjBlG,CAiB4G,SAAU,QAjBtH,CAkBhB,gBAAiB,QAlBD,CAkBW,YAAa,QAlBxB,CAkBkC,gBAAiB,QAlBnD,CAkB6D,gBAAiB,QAlB9E,CAkBwF,aAAc,QAlBtG,CAkBgH,YAAa,QAlB7H,CAmBhB,OAAQ,QAnBQ,CAmBE,OAAQ,QAnBV,CAmBoB,OAAQ,QAnB5B,CAmBsC,aAAc,QAnBpD,CAmB8D,SAAU,QAnBxE,CAmBkF,gBAAiB,QAnBnG,CAmB6G,MAAO,QAnBpH,CAmB8H,YAAa,QAnB3I,CAoBhB,YAAa,QApBG,CAoBO,cAAe,QApBtB,CAoBgC,SAAU,QApB1C,CAoBoD,aAAc,QApBlE,CAoB4E,WAAY,QApBxF,CAoBkG,WAAY,QApB9G,CAqBhB,SAAU,QArBM,CAqBI,SAAU,QArBd,CAqBwB,UAAW,QArBnC,CAqB6C,YAAa,QArB1D,CAqBoE,YAAa,QArBjF,CAqB2F,YAAa,QArBxG,CAqBkH,OAAQ,QArB1H,CAsBhB,cAAe,QAtBC,CAsBS,YAAa,QAtBtB,CAsBgC,MAAO,QAtBvC,CAsBiD,OAAQ,QAtBzD,CAsBmE,UAAW,QAtB9E,CAsBwF,SAAU,QAtBlG,CAsB4G,YAAa,QAtBzH,CAuBhB,SAAU,QAvBM,CAuBI,QAAS,QAvBb,CAuBuB,QAAS,QAvBhC,CAuB0C,aAAc,QAvBxD,CAuBkE,SAAU,QAvB5E,CAuBsF,cAAe,QAvBrG,CAApB,CAyBA,QAASC,MAAT,CAAgBxY,CAAhB,CAAmB2D,CAAnB,CAAsBrgB,CAAtB,CAA0B,CAEtB,GAAKqgB,IAAMlxB,SAAN,EAAmB6Q,IAAM7Q,SAA9B,CAA0C,CAEtC;AACA,MAAO,MAAKvF,GAAL,CAAU8yB,CAAV,CAAP,CAEH,CAED,MAAO,MAAKyY,MAAL,CAAazY,CAAb,CAAgB2D,CAAhB,CAAmBrgB,CAAnB,CAAP,CAEH,CAEDnG,OAAO4B,MAAP,CAAey5B,MAAMt7B,SAArB,CAAgC,CAE5Bm7B,QAAS,IAFmB,CAI5BrY,EAAG,CAJyB,CAItB2D,EAAG,CAJmB,CAIhBrgB,EAAG,CAJa,CAM5BpW,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,GAAKA,OAASA,MAAM06B,OAApB,CAA8B,CAE1B,KAAK/iC,IAAL,CAAWqI,KAAX,EAEH,CAJD,IAIO,IAAK,MAAOA,MAAP,GAAiB,QAAtB,CAAiC,CAEpC,KAAK+6B,MAAL,CAAa/6B,KAAb,EAEH,CAJM,IAIA,IAAK,MAAOA,MAAP,GAAiB,QAAtB,CAAiC,CAEpC,KAAKg7B,QAAL,CAAeh7B,KAAf,EAEH,CAED,MAAO,KAAP,CAEH,CAxB2B,CA0B5BsT,UAAW,mBAAWC,MAAX,CAAoB,CAE3B,KAAK8O,CAAL,CAAS9O,MAAT,CACA,KAAKyS,CAAL,CAASzS,MAAT,CACA,KAAK5N,CAAL,CAAS4N,MAAT,CAEA,MAAO,KAAP,CAEH,CAlC2B,CAoC5BwnB,OAAQ,gBAAWE,GAAX,CAAiB,CAErBA,IAAM7oC,KAAKmT,KAAL,CAAY01B,GAAZ,CAAN,CAEA,KAAK5Y,CAAL,CAAS,CAAE4Y,KAAO,EAAP,CAAY,GAAd,EAAsB,GAA/B,CACA,KAAKjV,CAAL,CAAS,CAAEiV,KAAO,CAAP,CAAW,GAAb,EAAqB,GAA9B,CACA,KAAKt1B,CAAL,CAAS,CAAEs1B,IAAM,GAAR,EAAgB,GAAzB,CAEA,MAAO,KAAP,CAEH,CA9C2B,CAgD5BH,OAAQ,gBAAWzY,CAAX,CAAc2D,CAAd,CAAiBrgB,CAAjB,CAAqB,CAEzB,KAAK0c,CAAL,CAASA,CAAT,CACA,KAAK2D,CAAL,CAASA,CAAT,CACA,KAAKrgB,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAxD2B,CA0D5Bu1B,OAAQ,UAAY,CAEhB,QAASC,QAAT,CAAkB1b,CAAlB,CAAqBlG,CAArB,CAAwBpT,CAAxB,CAA4B,CAExB,GAAKA,EAAI,CAAT,CAAaA,GAAK,CAAL,CACb,GAAKA,EAAI,CAAT,CAAaA,GAAK,CAAL,CACb,GAAKA,EAAI,EAAI,CAAb,CAAiB,MAAOsZ,GAAI,CAAElG,EAAIkG,CAAN,EAAY,CAAZ,CAAgBtZ,CAA3B,CACjB,GAAKA,EAAI,EAAI,CAAb,CAAiB,MAAOoT,EAAP,CACjB,GAAKpT,EAAI,EAAI,CAAb,CAAiB,MAAOsZ,GAAI,CAAElG,EAAIkG,CAAN,EAAY,CAAZ,EAAkB,EAAI,CAAJ,CAAQtZ,CAA1B,CAAX,CACjB,MAAOsZ,EAAP,CAEH,CAED,MAAO,SAASyb,OAAT,CAAiB1b,CAAjB,CAAoBra,CAApB,CAAuBoD,CAAvB,CAA2B,CAE9B;AACAiX,EAAIvO,MAAMY,eAAN,CAAuB2N,CAAvB,CAA0B,CAA1B,CAAJ,CACAra,EAAI8L,MAAMW,KAAN,CAAazM,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAJ,CACAoD,EAAI0I,MAAMW,KAAN,CAAarJ,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAJ,CAEA,GAAKpD,IAAM,CAAX,CAAe,CAEX,KAAKkd,CAAL,CAAS,KAAK2D,CAAL,CAAS,KAAKrgB,CAAL,CAAS4C,CAA3B,CAEH,CAJD,IAIO,CAEH,GAAIkX,GAAIlX,GAAK,GAAL,CAAWA,GAAM,EAAIpD,CAAV,CAAX,CAA2BoD,EAAIpD,CAAJ,CAAUoD,EAAIpD,CAAjD,CACA,GAAIoU,GAAM,EAAIhR,CAAN,CAAYkX,CAApB,CAEA,KAAK4C,CAAL,CAAS8Y,QAAS5hB,CAAT,CAAYkG,CAAZ,CAAeD,EAAI,EAAI,CAAvB,CAAT,CACA,KAAKwG,CAAL,CAASmV,QAAS5hB,CAAT,CAAYkG,CAAZ,CAAeD,CAAf,CAAT,CACA,KAAK7Z,CAAL,CAASw1B,QAAS5hB,CAAT,CAAYkG,CAAZ,CAAeD,EAAI,EAAI,CAAvB,CAAT,CAEH,CAED,MAAO,KAAP,CAEH,CAxBD,CA0BH,CAvCO,EA1DoB,CAmG5Bwb,SAAU,kBAAWI,KAAX,CAAmB,CAEzB,QAASC,YAAT,CAAsBC,MAAtB,CAA+B,CAE3B,GAAKA,SAAWxmC,SAAhB,CAA4B,OAE5B,GAAKqP,WAAYm3B,MAAZ,EAAuB,CAA5B,CAAgC,CAE5BjoC,QAAQgK,IAAR,CAAc,mCAAqC+9B,KAArC,CAA6C,mBAA3D,EAEH,CAEJ,CAGD,GAAI/1B,EAAJ,CAEA,GAAKA,EAAI,kCAAkCk2B,IAAlC,CAAwCH,KAAxC,CAAT,CAA2D,CAEvD;AAEA,GAAIxqC,MAAJ,CACA,GAAIw2B,MAAO/hB,EAAG,CAAH,CAAX,CACA,GAAIm2B,YAAan2B,EAAG,CAAH,CAAjB,CAEA,OAAS+hB,IAAT,EAEI,IAAK,KAAL,CACA,IAAK,MAAL,CAEI,GAAKx2B,MAAQ,gEAAgE2qC,IAAhE,CAAsEC,UAAtE,CAAb,CAAkG,CAE9F;AACA,KAAKnZ,CAAL,CAASjwB,KAAK+G,GAAL,CAAU,GAAV,CAAesiC,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAKo1B,CAAL,CAAS5zB,KAAK+G,GAAL,CAAU,GAAV,CAAesiC,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAK+U,CAAL,CAASvT,KAAK+G,GAAL,CAAU,GAAV,CAAesiC,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CAEAyqC,YAAazqC,MAAO,CAAP,CAAb,EAEA,MAAO,KAAP,CAEH,CAED,GAAKA,MAAQ,sEAAsE2qC,IAAtE,CAA4EC,UAA5E,CAAb,CAAwG,CAEpG;AACA,KAAKnZ,CAAL,CAASjwB,KAAK+G,GAAL,CAAU,GAAV,CAAesiC,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAKo1B,CAAL,CAAS5zB,KAAK+G,GAAL,CAAU,GAAV,CAAesiC,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CACA,KAAK+U,CAAL,CAASvT,KAAK+G,GAAL,CAAU,GAAV,CAAesiC,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,CAAf,EAA8C,GAAvD,CAEAyqC,YAAazqC,MAAO,CAAP,CAAb,EAEA,MAAO,KAAP,CAEH,CAED,MAEJ,IAAK,KAAL,CACA,IAAK,MAAL,CAEI,GAAKA,MAAQ,gFAAgF2qC,IAAhF,CAAsFC,UAAtF,CAAb,CAAkH,CAE9G;AACA,GAAIhc,GAAIrb,WAAYvT,MAAO,CAAP,CAAZ,EAA2B,GAAnC,CACA,GAAIuU,GAAIs2B,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,EAA6B,GAArC,CACA,GAAI2X,GAAIkzB,SAAU7qC,MAAO,CAAP,CAAV,CAAsB,EAAtB,EAA6B,GAArC,CAEAyqC,YAAazqC,MAAO,CAAP,CAAb,EAEA,MAAO,MAAKsqC,MAAL,CAAa1b,CAAb,CAAgBra,CAAhB,CAAmBoD,CAAnB,CAAP,CAEH,CAED,MAjDR,CAqDH,CA7DD,IA6DO,IAAKlD,EAAI,qBAAqBk2B,IAArB,CAA2BH,KAA3B,CAAT,CAA8C,CAEjD;AAEA,GAAIH,KAAM51B,EAAG,CAAH,CAAV,CACA,GAAIqmB,MAAOuP,IAAIn+B,MAAf,CAEA,GAAK4uB,OAAS,CAAd,CAAkB,CAEd;AACA,KAAKrJ,CAAL,CAASoZ,SAAUR,IAAI/2B,MAAJ,CAAY,CAAZ,EAAkB+2B,IAAI/2B,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAK8hB,CAAL,CAASyV,SAAUR,IAAI/2B,MAAJ,CAAY,CAAZ,EAAkB+2B,IAAI/2B,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAKyB,CAAL,CAAS81B,SAAUR,IAAI/2B,MAAJ,CAAY,CAAZ,EAAkB+2B,IAAI/2B,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CAEA,MAAO,KAAP,CAEH,CATD,IASO,IAAKwnB,OAAS,CAAd,CAAkB,CAErB;AACA,KAAKrJ,CAAL,CAASoZ,SAAUR,IAAI/2B,MAAJ,CAAY,CAAZ,EAAkB+2B,IAAI/2B,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAK8hB,CAAL,CAASyV,SAAUR,IAAI/2B,MAAJ,CAAY,CAAZ,EAAkB+2B,IAAI/2B,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CACA,KAAKyB,CAAL,CAAS81B,SAAUR,IAAI/2B,MAAJ,CAAY,CAAZ,EAAkB+2B,IAAI/2B,MAAJ,CAAY,CAAZ,CAA5B,CAA6C,EAA7C,EAAoD,GAA7D,CAEA,MAAO,KAAP,CAEH,CAEJ,CAED,GAAKk3B,OAASA,MAAMt+B,MAAN,CAAe,CAA7B,CAAiC,CAE7B;AACA,GAAIm+B,KAAML,cAAeQ,KAAf,CAAV,CAEA,GAAKH,MAAQnmC,SAAb,CAAyB,CAErB;AACA,KAAKimC,MAAL,CAAaE,GAAb,EAEH,CALD,IAKO,CAEH;AACA5nC,QAAQgK,IAAR,CAAc,8BAAgC+9B,KAA9C,EAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAnO2B,CAqO5B5pC,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAK0iB,CAA3B,CAA8B,KAAK2D,CAAnC,CAAsC,KAAKrgB,CAA3C,CAAP,CAEH,CAzO2B,CA2O5BhO,KAAM,cAAW/G,KAAX,CAAmB,CAErB,KAAKyxB,CAAL,CAASzxB,MAAMyxB,CAAf,CACA,KAAK2D,CAAL,CAASp1B,MAAMo1B,CAAf,CACA,KAAKrgB,CAAL,CAAS/U,MAAM+U,CAAf,CAEA,MAAO,KAAP,CAEH,CAnP2B,CAqP5B+1B,kBAAmB,2BAAW9qC,KAAX,CAAkB+qC,WAAlB,CAAgC,CAE/C,GAAKA,cAAgB7mC,SAArB,CAAiC6mC,YAAc,GAAd,CAEjC,KAAKtZ,CAAL,CAASjwB,KAAKyJ,GAAL,CAAUjL,MAAMyxB,CAAhB,CAAmBsZ,WAAnB,CAAT,CACA,KAAK3V,CAAL,CAAS5zB,KAAKyJ,GAAL,CAAUjL,MAAMo1B,CAAhB,CAAmB2V,WAAnB,CAAT,CACA,KAAKh2B,CAAL,CAASvT,KAAKyJ,GAAL,CAAUjL,MAAM+U,CAAhB,CAAmBg2B,WAAnB,CAAT,CAEA,MAAO,KAAP,CAEH,CA/P2B,CAiQ5BC,kBAAmB,2BAAWhrC,KAAX,CAAkB+qC,WAAlB,CAAgC,CAE/C,GAAKA,cAAgB7mC,SAArB,CAAiC6mC,YAAc,GAAd,CAEjC,GAAIE,aAAgBF,YAAc,CAAhB,CAAwB,IAAMA,WAA9B,CAA8C,GAAhE,CAEA,KAAKtZ,CAAL,CAASjwB,KAAKyJ,GAAL,CAAUjL,MAAMyxB,CAAhB,CAAmBwZ,WAAnB,CAAT,CACA,KAAK7V,CAAL,CAAS5zB,KAAKyJ,GAAL,CAAUjL,MAAMo1B,CAAhB,CAAmB6V,WAAnB,CAAT,CACA,KAAKl2B,CAAL,CAASvT,KAAKyJ,GAAL,CAAUjL,MAAM+U,CAAhB,CAAmBk2B,WAAnB,CAAT,CAEA,MAAO,KAAP,CAEH,CA7Q2B,CA+Q5BC,qBAAsB,8BAAWH,WAAX,CAAyB,CAE3C,KAAKD,iBAAL,CAAwB,IAAxB,CAA8BC,WAA9B,EAEA,MAAO,KAAP,CAEH,CArR2B,CAuR5BI,qBAAsB,8BAAWJ,WAAX,CAAyB,CAE3C,KAAKC,iBAAL,CAAwB,IAAxB,CAA8BD,WAA9B,EAEA,MAAO,KAAP,CAEH,CA7R2B,CA+R5BK,OAAQ,iBAAY,CAEhB,MAAS,MAAK3Z,CAAL,CAAS,GAAX,EAAoB,EAApB,CAA2B,KAAK2D,CAAL,CAAS,GAAX,EAAoB,CAA7C,CAAmD,KAAKrgB,CAAL,CAAS,GAAX,EAAoB,CAA5E,CAEH,CAnS2B,CAqS5Bs2B,aAAc,uBAAY,CAEtB,MAAO,CAAE,SAAW,KAAKD,MAAL,GAAcv0B,QAAd,CAAwB,EAAxB,CAAb,EAA4Ca,KAA5C,CAAmD,CAAE,CAArD,CAAP,CAEH,CAzS2B,CA2S5B4zB,OAAQ,gBAAW/rC,MAAX,CAAoB,CAExB;AAEA,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,+CAAd,EACAlN,OAAS,CAAEqvB,EAAG,CAAL,CAAQra,EAAG,CAAX,CAAcoD,EAAG,CAAjB,CAAT,CAEH,CAED,GAAI8Z,GAAI,KAAKA,CAAb,CAAgB2D,EAAI,KAAKA,CAAzB,CAA4BrgB,EAAI,KAAKA,CAArC,CAEA,GAAIzM,KAAM9G,KAAK8G,GAAL,CAAUmpB,CAAV,CAAa2D,CAAb,CAAgBrgB,CAAhB,CAAV,CACA,GAAIxM,KAAM/G,KAAK+G,GAAL,CAAUkpB,CAAV,CAAa2D,CAAb,CAAgBrgB,CAAhB,CAAV,CAEA,GAAIw2B,IAAJ,CAASC,UAAT,CACA,GAAIC,WAAY,CAAEljC,IAAMD,GAAR,EAAgB,GAAhC,CAEA,GAAKC,MAAQD,GAAb,CAAmB,CAEfijC,IAAM,CAAN,CACAC,WAAa,CAAb,CAEH,CALD,IAKO,CAEH,GAAI1L,OAAQx3B,IAAMC,GAAlB,CAEAijC,WAAaC,WAAa,GAAb,CAAmB3L,OAAUx3B,IAAMC,GAAhB,CAAnB,CAA2Cu3B,OAAU,EAAIx3B,GAAJ,CAAUC,GAApB,CAAxD,CAEA,OAASD,GAAT,EAEI,IAAKmpB,EAAL,CAAQ8Z,IAAM,CAAEnW,EAAIrgB,CAAN,EAAY+qB,KAAZ,EAAsB1K,EAAIrgB,CAAJ,CAAQ,CAAR,CAAY,CAAlC,CAAN,CAA6C,MACrD,IAAKqgB,EAAL,CAAQmW,IAAM,CAAEx2B,EAAI0c,CAAN,EAAYqO,KAAZ,CAAoB,CAA1B,CAA6B,MACrC,IAAK/qB,EAAL,CAAQw2B,IAAM,CAAE9Z,EAAI2D,CAAN,EAAY0K,KAAZ,CAAoB,CAA1B,CAA6B,MAJzC,CAQAyL,KAAO,CAAP,CAEH,CAEDhsC,OAAOqvB,CAAP,CAAW2c,GAAX,CACAhsC,OAAOgV,CAAP,CAAWi3B,UAAX,CACAjsC,OAAOoY,CAAP,CAAW8zB,SAAX,CAEA,MAAOlsC,OAAP,CAEH,CA3V2B,CA6V5BmsC,SAAU,mBAAY,CAElB,MAAO,QAAa,KAAKja,CAAL,CAAS,GAAX,CAAmB,CAA9B,EAAoC,GAApC,EAA8C,KAAK2D,CAAL,CAAS,GAAX,CAAmB,CAA/D,EAAqE,GAArE,EAA+E,KAAKrgB,CAAL,CAAS,GAAX,CAAmB,CAAhG,EAAsG,GAA7G,CAEH,CAjW2B,CAmW5B42B,UAAW,UAAY,CAEnB,GAAIC,KAAM,EAAV,CAEA,MAAO,UAAWhd,CAAX,CAAcra,CAAd,CAAiBoD,CAAjB,CAAqB,CAExB,KAAK2zB,MAAL,CAAaM,GAAb,EAEAA,IAAIhd,CAAJ,EAASA,CAAT,CAAYgd,IAAIr3B,CAAJ,EAASA,CAAT,CAAYq3B,IAAIj0B,CAAJ,EAASA,CAAT,CAExB,KAAK2yB,MAAL,CAAasB,IAAIhd,CAAjB,CAAoBgd,IAAIr3B,CAAxB,CAA2Bq3B,IAAIj0B,CAA/B,EAEA,MAAO,KAAP,CAEH,CAVD,CAYH,CAhBU,EAnWiB,CAqX5BrY,IAAK,aAAWU,KAAX,CAAmB,CAEpB,KAAKyxB,CAAL,EAAUzxB,MAAMyxB,CAAhB,CACA,KAAK2D,CAAL,EAAUp1B,MAAMo1B,CAAhB,CACA,KAAKrgB,CAAL,EAAU/U,MAAM+U,CAAhB,CAEA,MAAO,KAAP,CAEH,CA7X2B,CA+X5B82B,UAAW,mBAAWC,MAAX,CAAmBC,MAAnB,CAA4B,CAEnC,KAAKta,CAAL,CAASqa,OAAOra,CAAP,CAAWsa,OAAOta,CAA3B,CACA,KAAK2D,CAAL,CAAS0W,OAAO1W,CAAP,CAAW2W,OAAO3W,CAA3B,CACA,KAAKrgB,CAAL,CAAS+2B,OAAO/2B,CAAP,CAAWg3B,OAAOh3B,CAA3B,CAEA,MAAO,KAAP,CAEH,CAvY2B,CAyY5BoO,UAAW,mBAAW5O,CAAX,CAAe,CAEtB,KAAKkd,CAAL,EAAUld,CAAV,CACA,KAAK6gB,CAAL,EAAU7gB,CAAV,CACA,KAAKQ,CAAL,EAAUR,CAAV,CAEA,MAAO,KAAP,CAEH,CAjZ2B,CAmZ5BvM,IAAK,aAAWhI,KAAX,CAAmB,CAEpB,KAAKyxB,CAAL,CAASjwB,KAAK8G,GAAL,CAAU,CAAV,CAAa,KAAKmpB,CAAL,CAASzxB,MAAMyxB,CAA5B,CAAT,CACA,KAAK2D,CAAL,CAAS5zB,KAAK8G,GAAL,CAAU,CAAV,CAAa,KAAK8sB,CAAL,CAASp1B,MAAMo1B,CAA5B,CAAT,CACA,KAAKrgB,CAAL,CAASvT,KAAK8G,GAAL,CAAU,CAAV,CAAa,KAAKyM,CAAL,CAAS/U,MAAM+U,CAA5B,CAAT,CAEA,MAAO,KAAP,CAEH,CA3Z2B,CA6Z5BuO,SAAU,kBAAWtjB,KAAX,CAAmB,CAEzB,KAAKyxB,CAAL,EAAUzxB,MAAMyxB,CAAhB,CACA,KAAK2D,CAAL,EAAUp1B,MAAMo1B,CAAhB,CACA,KAAKrgB,CAAL,EAAU/U,MAAM+U,CAAhB,CAEA,MAAO,KAAP,CAEH,CAra2B,CAua5BtJ,eAAgB,wBAAW8I,CAAX,CAAe,CAE3B,KAAKkd,CAAL,EAAUld,CAAV,CACA,KAAK6gB,CAAL,EAAU7gB,CAAV,CACA,KAAKQ,CAAL,EAAUR,CAAV,CAEA,MAAO,KAAP,CAEH,CA/a2B,CAib5BgN,KAAM,cAAWvhB,KAAX,CAAkB2kB,KAAlB,CAA0B,CAE5B,KAAK8M,CAAL,EAAU,CAAEzxB,MAAMyxB,CAAN,CAAU,KAAKA,CAAjB,EAAuB9M,KAAjC,CACA,KAAKyQ,CAAL,EAAU,CAAEp1B,MAAMo1B,CAAN,CAAU,KAAKA,CAAjB,EAAuBzQ,KAAjC,CACA,KAAK5P,CAAL,EAAU,CAAE/U,MAAM+U,CAAN,CAAU,KAAKA,CAAjB,EAAuB4P,KAAjC,CAEA,MAAO,KAAP,CAEH,CAzb2B,CA2b5BG,OAAQ,gBAAWQ,CAAX,CAAe,CAEnB,MAASA,GAAEmM,CAAF,GAAQ,KAAKA,CAAf,EAAwBnM,EAAE8P,CAAF,GAAQ,KAAKA,CAArC,EAA8C9P,EAAEvQ,CAAF,GAAQ,KAAKA,CAAlE,CAEH,CA/b2B,CAic5BgQ,UAAW,mBAAWtN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAElC,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,KAAKkqB,CAAL,CAASha,MAAOlQ,MAAP,CAAT,CACA,KAAK6tB,CAAL,CAAS3d,MAAOlQ,OAAS,CAAhB,CAAT,CACA,KAAKwN,CAAL,CAAS0C,MAAOlQ,OAAS,CAAhB,CAAT,CAEA,MAAO,KAAP,CAEH,CA3c2B,CA6c5Byd,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5BkQ,MAAOlQ,MAAP,EAAkB,KAAKkqB,CAAvB,CACAha,MAAOlQ,OAAS,CAAhB,EAAsB,KAAK6tB,CAA3B,CACA3d,MAAOlQ,OAAS,CAAhB,EAAsB,KAAKwN,CAA3B,CAEA,MAAO0C,MAAP,CAEH,CAxd2B,CA0d5B2f,OAAQ,iBAAY,CAEhB,MAAO,MAAKgU,MAAL,EAAP,CAEH,CA9d2B,CAAhC,EAkeA;;OAIA,GAAIY,aAAc,CAEd3I,OAAQ,CAEJ4I,QAAS,CAAE78B,MAAO,GAAI66B,MAAJ,CAAW,QAAX,CAAT,CAFL,CAGJiC,QAAS,CAAE98B,MAAO,GAAT,CAHL,CAKJ+8B,IAAK,CAAE/8B,MAAO,IAAT,CALD,CAMJg9B,YAAa,CAAEh9B,MAAO,GAAI6lB,QAAJ,EAAT,CANT,CAQJoX,SAAU,CAAEj9B,MAAO,IAAT,CARN,CAFM,CAcdk9B,YAAa,CAETC,YAAa,CAAEn9B,MAAO,IAAT,CAFJ,CAdC,CAoBdo9B,OAAQ,CAEJC,OAAQ,CAAEr9B,MAAO,IAAT,CAFJ,CAGJs9B,WAAY,CAAEt9B,MAAO,CAAE,CAAX,CAHR,CAIJu9B,aAAc,CAAEv9B,MAAO,GAAT,CAJV,CAKJw9B,gBAAiB,CAAEx9B,MAAO,IAAT,CALb,CAMJy9B,YAAa,CAAEz9B,MAAO,CAAT,CANT,CApBM,CA8Bd09B,MAAO,CAEHC,MAAO,CAAE39B,MAAO,IAAT,CAFJ,CAGH49B,eAAgB,CAAE59B,MAAO,CAAT,CAHb,CA9BO,CAqCd69B,SAAU,CAENC,SAAU,CAAE99B,MAAO,IAAT,CAFJ,CAGN+9B,kBAAmB,CAAE/9B,MAAO,CAAT,CAHb,CArCI,CA4Cdg+B,YAAa,CAETC,YAAa,CAAEj+B,MAAO,IAAT,CAFJ,CA5CC,CAkDdk+B,QAAS,CAELC,QAAS,CAAEn+B,MAAO,IAAT,CAFJ,CAGLo+B,UAAW,CAAEp+B,MAAO,CAAT,CAHN,CAlDK,CAyDdq+B,UAAW,CAEPC,UAAW,CAAEt+B,MAAO,IAAT,CAFJ,CAGPu+B,YAAa,CAAEv+B,MAAO,GAAI7E,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAT,CAHN,CAzDG,CAgEdqjC,gBAAiB,CAEbC,gBAAiB,CAAEz+B,MAAO,IAAT,CAFJ,CAGb0+B,kBAAmB,CAAE1+B,MAAO,CAAT,CAHN,CAIb2+B,iBAAkB,CAAE3+B,MAAO,CAAT,CAJL,CAhEH,CAwEd4+B,aAAc,CAEVC,aAAc,CAAE7+B,MAAO,IAAT,CAFJ,CAxEA,CA8Ed8+B,aAAc,CAEVC,aAAc,CAAE/+B,MAAO,IAAT,CAFJ,CA9EA,CAoFdg/B,YAAa,CAETC,YAAa,CAAEj/B,MAAO,IAAT,CAFJ,CApFC,CA0Fdk/B,IAAK,CAEDC,WAAY,CAAEn/B,MAAO,OAAT,CAFX,CAGDo/B,QAAS,CAAEp/B,MAAO,CAAT,CAHR,CAIDq/B,OAAQ,CAAEr/B,MAAO,IAAT,CAJP,CAKDs/B,SAAU,CAAEt/B,MAAO,GAAI66B,MAAJ,CAAW,QAAX,CAAT,CALT,CA1FS,CAmGd0E,OAAQ,CAEJC,kBAAmB,CAAEx/B,MAAO,EAAT,CAFf,CAIJy/B,kBAAmB,CAAEz/B,MAAO,EAAT,CAAa2C,WAAY,CACpC8tB,UAAW,EADyB,CAEpC7/B,MAAO,EAF6B,CAIpCpB,OAAQ,EAJ4B,CAKpCkwC,WAAY,EALwB,CAMpCC,aAAc,EANsB,CAOpCC,cAAe,EAPqB,CAAzB,CAJf,CAcJC,qBAAsB,CAAE7/B,MAAO,EAAT,CAdlB,CAeJ8/B,wBAAyB,CAAE9/B,MAAO,EAAT,CAfrB,CAiBJ+/B,WAAY,CAAE//B,MAAO,EAAT,CAAa2C,WAAY,CAC7B/R,MAAO,EADsB,CAE7BnC,SAAU,EAFmB,CAG7BgiC,UAAW,EAHkB,CAI7Bv0B,SAAU,EAJmB,CAK7B8jC,QAAS,EALoB,CAM7BC,YAAa,EANgB,CAO7BC,MAAO,EAPsB,CAS7B1wC,OAAQ,EATqB,CAU7BkwC,WAAY,EAViB,CAW7BC,aAAc,EAXe,CAY7BC,cAAe,EAZc,CAAzB,CAjBR,CAgCJO,cAAe,CAAEngC,MAAO,EAAT,CAhCX,CAiCJogC,iBAAkB,CAAEpgC,MAAO,EAAT,CAjCd,CAmCJqgC,YAAa,CAAErgC,MAAO,EAAT,CAAa2C,WAAY,CAC9B/R,MAAO,EADuB,CAE9BnC,SAAU,EAFoB,CAG9ByxC,MAAO,EAHuB,CAI9BhkC,SAAU,EAJoB,CAM9B1M,OAAQ,EANsB,CAO9BkwC,WAAY,EAPkB,CAQ9BC,aAAc,EARgB,CAS9BC,cAAe,EATe,CAU9BU,iBAAkB,EAVY,CAW9BC,gBAAiB,EAXa,CAAzB,CAnCT,CAiDJC,eAAgB,CAAExgC,MAAO,EAAT,CAjDZ,CAkDJygC,kBAAmB,CAAEzgC,MAAO,EAAT,CAlDf,CAoDJ0gC,iBAAkB,CAAE1gC,MAAO,EAAT,CAAa2C,WAAY,CACnC8tB,UAAW,EADwB,CAEnCkQ,SAAU,EAFyB,CAGnCC,YAAa,EAHsB,CAAzB,CApDd,CA0DJ;AACAC,eAAgB,CAAE7gC,MAAO,EAAT,CAAa2C,WAAY,CACjC/R,MAAO,EAD0B,CAEjCnC,SAAU,EAFuB,CAGjCuB,MAAO,EAH0B,CAIjCC,OAAQ,EAJyB,CAAzB,CA3DZ,CAnGM,CAuKdo7B,OAAQ,CAEJwR,QAAS,CAAE78B,MAAO,GAAI66B,MAAJ,CAAW,QAAX,CAAT,CAFL,CAGJiC,QAAS,CAAE98B,MAAO,GAAT,CAHL,CAIJ0rB,KAAM,CAAE1rB,MAAO,GAAT,CAJF,CAKJ1G,MAAO,CAAE0G,MAAO,GAAT,CALH,CAMJ+8B,IAAK,CAAE/8B,MAAO,IAAT,CAND,CAOJg9B,YAAa,CAAEh9B,MAAO,GAAI6lB,QAAJ,EAAT,CAPT,CAvKM,CAAlB,CAoLA;;;;OAMA,GAAIib,WAAY,CAEZC,MAAO,CAEH3G,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAYM,WAFe,CAG3BN,YAAYQ,MAHe,CAI3BR,YAAYc,KAJe,CAK3Bd,YAAYiB,QALe,CAM3BjB,YAAYsC,GANe,CAArB,CAFP,CAWH8B,aAAc/G,YAAYb,cAXvB,CAYH6H,eAAgBhH,YAAYd,cAZzB,CAFK,CAkBZ+H,QAAS,CAEL9G,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAYM,WAFe,CAG3BN,YAAYQ,MAHe,CAI3BR,YAAYc,KAJe,CAK3Bd,YAAYiB,QALe,CAM3BjB,YAAYoB,WANe,CAO3BpB,YAAYsC,GAPe,CAQ3BtC,YAAY2C,MARe,CAS3B,CACI4B,SAAU,CAAEnhC,MAAO,GAAI66B,MAAJ,CAAW,QAAX,CAAT,CADd,CAT2B,CAArB,CAFL,CAgBLmG,aAAc/G,YAAYX,gBAhBrB,CAiBL2H,eAAgBhH,YAAYZ,gBAjBvB,CAlBG,CAuCZ+H,MAAO,CAEHhH,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAYM,WAFe,CAG3BN,YAAYQ,MAHe,CAI3BR,YAAYc,KAJe,CAK3Bd,YAAYiB,QALe,CAM3BjB,YAAYoB,WANe,CAO3BpB,YAAYsB,OAPe,CAQ3BtB,YAAYyB,SARe,CAS3BzB,YAAY4B,eATe,CAU3B5B,YAAYoC,WAVe,CAW3BpC,YAAYsC,GAXe,CAY3BtC,YAAY2C,MAZe,CAa3B,CACI4B,SAAU,CAAEnhC,MAAO,GAAI66B,MAAJ,CAAW,QAAX,CAAT,CADd,CAEIwG,SAAU,CAAErhC,MAAO,GAAI66B,MAAJ,CAAW,QAAX,CAAT,CAFd,CAGIyG,UAAW,CAAEthC,MAAO,EAAT,CAHf,CAb2B,CAArB,CAFP,CAsBHghC,aAAc/G,YAAYT,cAtBvB,CAuBHyH,eAAgBhH,YAAYV,cAvBzB,CAvCK,CAkEZgI,SAAU,CAENnH,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAYQ,MAFe,CAG3BR,YAAYc,KAHe,CAI3Bd,YAAYiB,QAJe,CAK3BjB,YAAYoB,WALe,CAM3BpB,YAAYsB,OANe,CAO3BtB,YAAYyB,SAPe,CAQ3BzB,YAAY4B,eARe,CAS3B5B,YAAYgC,YATe,CAU3BhC,YAAYkC,YAVe,CAW3BlC,YAAYsC,GAXe,CAY3BtC,YAAY2C,MAZe,CAa3B,CACI4B,SAAU,CAAEnhC,MAAO,GAAI66B,MAAJ,CAAW,QAAX,CAAT,CADd,CAEI2G,UAAW,CAAExhC,MAAO,GAAT,CAFf,CAGIyhC,UAAW,CAAEzhC,MAAO,GAAT,CAHf,CAII0hC,gBAAiB,CAAE1hC,MAAO,CAAI;AAAb,CAJrB,CAb2B,CAArB,CAFJ,CAuBNghC,aAAc/G,YAAYP,iBAvBpB,CAwBNuH,eAAgBhH,YAAYR,iBAxBtB,CAlEE,CA8FZpO,OAAQ,CAEJ+O,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAYvR,MADe,CAE3BuR,YAAYsC,GAFe,CAArB,CAFN,CAOJ8B,aAAc/G,YAAYH,WAPtB,CAQJmH,eAAgBhH,YAAYJ,WARxB,CA9FI,CA0GZ8H,OAAQ,CAEJvH,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAYsC,GAFe,CAG3B,CACI5lC,MAAO,CAAE0G,MAAO,CAAT,CADX,CAEI4hC,SAAU,CAAE5hC,MAAO,CAAT,CAFd,CAGI6hC,UAAW,CAAE7hC,MAAO,CAAT,CAHf,CAH2B,CAArB,CAFN,CAYJghC,aAAc/G,YAAYf,eAZtB,CAaJ+H,eAAgBhH,YAAYhB,eAbxB,CA1GI,CA2HZ6I,MAAO,CAEH1H,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAY4B,eAFe,CAArB,CAFP,CAOHwC,aAAc/G,YAAYrB,UAPvB,CAQHqI,eAAgBhH,YAAYtB,UARzB,CA3HK,CAuIZtT,OAAQ,CAEJ+U,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAYsB,OAFe,CAG3BtB,YAAYyB,SAHe,CAI3BzB,YAAY4B,eAJe,CAK3B,CACI1B,QAAS,CAAE98B,MAAO,GAAT,CADb,CAL2B,CAArB,CAFN,CAYJghC,aAAc/G,YAAYL,WAZtB,CAaJqH,eAAgBhH,YAAYN,WAbxB,CAvII,CAwJZ;;+EAIA3sC,KAAM,CAEFotC,SAAU,CACN2H,MAAO,CAAE/hC,MAAO,IAAT,CADD,CAENgiC,MAAO,CAAEhiC,MAAO,CAAE,CAAX,CAFD,CAGN88B,QAAS,CAAE98B,MAAO,GAAT,CAHH,CAFR,CAQFghC,aAAc/G,YAAYvB,SARxB,CASFuI,eAAgBhH,YAAYxB,SAT1B,CA5JM,CAyKZwJ,SAAU,CAEN7H,SAAU,CACN8H,UAAW,CAAEliC,MAAO,IAAT,CADL,CAFJ,CAMNghC,aAAc/G,YAAYjB,aANpB,CAONiI,eAAgBhH,YAAYlB,aAPtB,CAzKE,CAoLZoJ,aAAc,CAEV/H,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY3I,MADe,CAE3B2I,YAAY4B,eAFe,CAG3B,CACI4D,kBAAmB,CAAEpiC,MAAO,GAAIhL,QAAJ,EAAT,CADvB,CAEIqtC,aAAc,CAAEriC,MAAO,CAAT,CAFlB,CAGIsiC,YAAa,CAAEtiC,MAAO,IAAT,CAHjB,CAH2B,CAArB,CAFA,CAYVghC,aAAc/G,YAAYnB,iBAZhB,CAaVmI,eAAgBhH,YAAYpB,iBAblB,CApLF,CAqMZrpC,OAAQ,CAEJ4qC,SAAUF,cAAcC,KAAd,CAAqB,CAC3ByC,YAAY2C,MADe,CAE3B3C,YAAYsC,GAFe,CAG3B,CACItuC,MAAO,CAAEoP,MAAO,GAAI66B,MAAJ,CAAW,OAAX,CAAT,CADX,CAEIiC,QAAS,CAAE98B,MAAO,GAAT,CAFb,CAH2B,CAArB,CAFN,CAWJghC,aAAc/G,YAAYD,WAXtB,CAYJiH,eAAgBhH,YAAYF,WAZxB,CArMI,CAAhB,CAuNA+G,UAAUyB,QAAV,CAAqB,CAEjBnI,SAAUF,cAAcC,KAAd,CAAqB,CAC3B2G,UAAUS,QAAV,CAAmBnH,QADQ,CAE3B,CACIoI,UAAW,CAAExiC,MAAO,CAAT,CADf,CAEIyiC,mBAAoB,CAAEziC,MAAO,CAAT,CAFxB,CAF2B,CAArB,CAFO,CAUjBghC,aAAc/G,YAAYP,iBAVT,CAWjBuH,eAAgBhH,YAAYR,iBAXX,CAArB,CAeA;;OAIA,QAASiJ,eAAT,EAA0B,CAEtB,GAAIt0C,SAAU,IAAd,CACA,GAAIu0C,aAAc,KAAlB,CACA,GAAIC,eAAgB,IAApB,CAEA,QAASC,iBAAT,CAA2BhiC,IAA3B,CAAiCiiC,KAAjC,CAAyC,CAErC,GAAKH,cAAgB,KAArB,CAA6B,OAE7BC,cAAe/hC,IAAf,CAAqBiiC,KAArB,EAEA10C,QAAQe,qBAAR,CAA+B0zC,gBAA/B,EAEH,CAED,MAAO,CAEHxuC,MAAO,gBAAY,CAEf,GAAKsuC,cAAgB,IAArB,CAA4B,OAC5B,GAAKC,gBAAkB,IAAvB,CAA8B,OAE9Bx0C,QAAQe,qBAAR,CAA+B0zC,gBAA/B,EAEAF,YAAc,IAAd,CAEH,CAXE,CAaH3/B,KAAM,eAAY,CAEd2/B,YAAc,KAAd,CAEH,CAjBE,CAmBHI,iBAAkB,0BAAWh/B,QAAX,CAAsB,CAEpC6+B,cAAgB7+B,QAAhB,CAEH,CAvBE,CAyBHi/B,WAAY,oBAAWhjC,KAAX,CAAmB,CAE3B5R,QAAU4R,KAAV,CAEH,CA7BE,CAAP,CAiCH,CAED;;OAIA,QAASijC,gBAAT,CAA0BC,EAA1B,CAA+B,CAE3B,GAAIC,SAAU,GAAIC,QAAJ,EAAd,CAEA,QAASC,aAAT,CAAuBvtB,SAAvB,CAAkCwtB,UAAlC,CAA+C,CAE3C,GAAIj7B,OAAQyN,UAAUzN,KAAtB,CACA,GAAIk7B,OAAQztB,UAAU0tB,OAAV,CAAoBN,GAAGO,YAAvB,CAAsCP,GAAGQ,WAArD,CAEA,GAAIC,QAAST,GAAGG,YAAH,EAAb,CAEAH,GAAGU,UAAH,CAAeN,UAAf,CAA2BK,MAA3B,EACAT,GAAGW,UAAH,CAAeP,UAAf,CAA2Bj7B,KAA3B,CAAkCk7B,KAAlC,EAEAztB,UAAUguB,gBAAV,GAEA,GAAIrpC,MAAOyoC,GAAGa,KAAd,CAEA,GAAK17B,gBAAiB27B,aAAtB,CAAqC,CAEjCvpC,KAAOyoC,GAAGa,KAAV,CAEH,CAJD,IAIO,IAAK17B,gBAAiB47B,aAAtB,CAAqC,CAExC5wC,QAAQgK,IAAR,CAAc,sEAAd,EAEH,CAJM,IAIA,IAAKgL,gBAAiB67B,YAAtB,CAAoC,CAEvCzpC,KAAOyoC,GAAGiB,cAAV,CAEH,CAJM,IAIA,IAAK97B,gBAAiB+7B,WAAtB,CAAmC,CAEtC3pC,KAAOyoC,GAAGmB,KAAV,CAEH,CAJM,IAIA,IAAKh8B,gBAAiBi8B,YAAtB,CAAoC,CAEvC7pC,KAAOyoC,GAAGqB,YAAV,CAEH,CAJM,IAIA,IAAKl8B,gBAAiBm8B,WAAtB,CAAmC,CAEtC/pC,KAAOyoC,GAAGuB,GAAV,CAEH,CAJM,IAIA,IAAKp8B,gBAAiBq8B,UAAtB,CAAkC,CAErCjqC,KAAOyoC,GAAGyB,IAAV,CAEH,CAJM,IAIA,IAAKt8B,gBAAiBu8B,WAAtB,CAAmC,CAEtCnqC,KAAOyoC,GAAG2B,aAAV,CAEH,CAED,MAAO,CACHlB,OAAQA,MADL,CAEHlpC,KAAMA,IAFH,CAGHqqC,gBAAiBz8B,MAAM08B,iBAHpB,CAIHld,QAAS/R,UAAU+R,OAJhB,CAAP,CAOH,CAED,QAASmd,aAAT,CAAuBrB,MAAvB,CAA+B7tB,SAA/B,CAA0CwtB,UAA1C,CAAuD,CAEnD,GAAIj7B,OAAQyN,UAAUzN,KAAtB,CACA,GAAI48B,aAAcnvB,UAAUmvB,WAA5B,CAEA/B,GAAGU,UAAH,CAAeN,UAAf,CAA2BK,MAA3B,EAEA,GAAK7tB,UAAU0tB,OAAV,GAAsB,KAA3B,CAAmC,CAE/BN,GAAGW,UAAH,CAAeP,UAAf,CAA2Bj7B,KAA3B,CAAkC66B,GAAGQ,WAArC,EAEH,CAJD,IAIO,IAAKuB,YAAYnpB,KAAZ,GAAsB,CAAE,CAA7B,CAAiC,CAEpC;AAEAonB,GAAGgC,aAAH,CAAkB5B,UAAlB,CAA8B,CAA9B,CAAiCj7B,KAAjC,EAEH,CANM,IAMA,IAAK48B,YAAYnpB,KAAZ,GAAsB,CAA3B,CAA+B,CAElCzoB,QAAQ+iB,KAAR,CAAe,yKAAf,EAEH,CAJM,IAIA,CAEH8sB,GAAGgC,aAAH,CAAkB5B,UAAlB,CAA8B2B,YAAY9sC,MAAZ,CAAqBkQ,MAAM08B,iBAAzD,CACI18B,MAAM88B,QAAN,CAAgBF,YAAY9sC,MAA5B,CAAoC8sC,YAAY9sC,MAAZ,CAAqB8sC,YAAYnpB,KAArE,CADJ,EAGAmpB,YAAYnpB,KAAZ,CAAoB,CAAE,CAAtB,CAAyB;AAE5B,CAEJ,CAED;AAEA,QAAShc,IAAT,CAAcgW,SAAd,CAA0B,CAEtB,GAAKA,UAAUsvB,4BAAf,CAA8CtvB,UAAYA,UAAU5iB,IAAtB,CAE9C,MAAOiwC,SAAQrjC,GAAR,CAAagW,SAAb,CAAP,CAEH,CAED,QAASrV,OAAT,CAAiBqV,SAAjB,CAA6B,CAEzB,GAAKA,UAAUsvB,4BAAf,CAA8CtvB,UAAYA,UAAU5iB,IAAtB,CAE9C,GAAIA,MAAOiwC,QAAQrjC,GAAR,CAAagW,SAAb,CAAX,CAEA,GAAK5iB,IAAL,CAAY,CAERgwC,GAAGmC,YAAH,CAAiBnyC,KAAKywC,MAAtB,EAEAR,QAAQmC,MAAR,CAAgBxvB,SAAhB,EAEH,CAEJ,CAED,QAASjjB,OAAT,CAAiBijB,SAAjB,CAA4BwtB,UAA5B,CAAyC,CAErC,GAAKxtB,UAAUsvB,4BAAf,CAA8CtvB,UAAYA,UAAU5iB,IAAtB,CAE9C,GAAIA,MAAOiwC,QAAQrjC,GAAR,CAAagW,SAAb,CAAX,CAEA,GAAK5iB,OAAS4B,SAAd,CAA0B,CAEtBquC,QAAQ5zC,GAAR,CAAaumB,SAAb,CAAwButB,aAAcvtB,SAAd,CAAyBwtB,UAAzB,CAAxB,EAEH,CAJD,IAIO,IAAKpwC,KAAK20B,OAAL,CAAe/R,UAAU+R,OAA9B,CAAwC,CAE3Cmd,aAAc9xC,KAAKywC,MAAnB,CAA2B7tB,SAA3B,CAAsCwtB,UAAtC,EAEApwC,KAAK20B,OAAL,CAAe/R,UAAU+R,OAAzB,CAEH,CAEJ,CAED,MAAO,CAEH/nB,IAAKA,GAFF,CAGHW,OAAQA,MAHL,CAIH5N,OAAQA,MAJL,CAAP,CAQH,CAED;;;;OAMA,QAAS0yC,MAAT,CAAgB72C,CAAhB,CAAmBC,CAAnB,CAAsBC,CAAtB,CAAyB2pB,KAAzB,CAAiC,CAE7B,KAAKqF,EAAL,CAAUlvB,GAAK,CAAf,CACA,KAAKmvB,EAAL,CAAUlvB,GAAK,CAAf,CACA,KAAKmvB,EAAL,CAAUlvB,GAAK,CAAf,CACA,KAAK42C,MAAL,CAAcjtB,OAASgtB,MAAME,YAA7B,CAEH,CAEDF,MAAMG,cAAN,CAAuB,CAAE,KAAF,CAAS,KAAT,CAAgB,KAAhB,CAAuB,KAAvB,CAA8B,KAA9B,CAAqC,KAArC,CAAvB,CAEAH,MAAME,YAAN,CAAqB,KAArB,CAEAjmC,OAAOI,gBAAP,CAAyB2lC,MAAMhmC,SAA/B,CAA0C,CAEtC7Q,EAAG,CAECoR,IAAK,cAAY,CAEb,MAAO,MAAK8d,EAAZ,CAEH,CANF,CAQCruB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK4d,EAAL,CAAU5d,KAAV,CACA,KAAKihB,gBAAL,GAEH,CAbF,CAFmC,CAmBtCtyB,EAAG,CAECmR,IAAK,cAAY,CAEb,MAAO,MAAK+d,EAAZ,CAEH,CANF,CAQCtuB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK6d,EAAL,CAAU7d,KAAV,CACA,KAAKihB,gBAAL,GAEH,CAbF,CAnBmC,CAoCtCryB,EAAG,CAECkR,IAAK,cAAY,CAEb,MAAO,MAAKge,EAAZ,CAEH,CANF,CAQCvuB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK8d,EAAL,CAAU9d,KAAV,CACA,KAAKihB,gBAAL,GAEH,CAbF,CApCmC,CAqDtC1I,MAAO,CAEHzY,IAAK,cAAY,CAEb,MAAO,MAAK0lC,MAAZ,CAEH,CANE,CAQHj2C,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAKwlC,MAAL,CAAcxlC,KAAd,CACA,KAAKihB,gBAAL,GAEH,CAbE,CArD+B,CAA1C,EAwEAzhB,OAAO4B,MAAP,CAAemkC,MAAMhmC,SAArB,CAAgC,CAE5B8Y,QAAS,IAFmB,CAI5B9oB,IAAK,aAAWb,CAAX,CAAcC,CAAd,CAAiBC,CAAjB,CAAoB2pB,KAApB,CAA4B,CAE7B,KAAKqF,EAAL,CAAUlvB,CAAV,CACA,KAAKmvB,EAAL,CAAUlvB,CAAV,CACA,KAAKmvB,EAAL,CAAUlvB,CAAV,CACA,KAAK42C,MAAL,CAAcjtB,OAAS,KAAKitB,MAA5B,CAEA,KAAKvkB,gBAAL,GAEA,MAAO,KAAP,CAEH,CAf2B,CAiB5BzvB,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAKie,EAA3B,CAA+B,KAAKC,EAApC,CAAwC,KAAKC,EAA7C,CAAiD,KAAK0nB,MAAtD,CAAP,CAEH,CArB2B,CAuB5B7tC,KAAM,cAAWygB,KAAX,CAAmB,CAErB,KAAKwF,EAAL,CAAUxF,MAAMwF,EAAhB,CACA,KAAKC,EAAL,CAAUzF,MAAMyF,EAAhB,CACA,KAAKC,EAAL,CAAU1F,MAAM0F,EAAhB,CACA,KAAK0nB,MAAL,CAAcptB,MAAMotB,MAApB,CAEA,KAAKvkB,gBAAL,GAEA,MAAO,KAAP,CAEH,CAlC2B,CAoC5B7B,sBAAuB,+BAAW/Z,CAAX,CAAckT,KAAd,CAAqB1lB,MAArB,CAA8B,CAEjD,GAAI+e,OAAQX,MAAMW,KAAlB,CAEA;AAEA,GAAI0F,IAAKjS,EAAEkP,QAAX,CACA,GAAIoN,KAAMrK,GAAI,CAAJ,CAAV,CAAmBsK,IAAMtK,GAAI,CAAJ,CAAzB,CAAkCuK,IAAMvK,GAAI,CAAJ,CAAxC,CACA,GAAIwK,KAAMxK,GAAI,CAAJ,CAAV,CAAmByK,IAAMzK,GAAI,CAAJ,CAAzB,CAAkC0K,IAAM1K,GAAI,CAAJ,CAAxC,CACA,GAAI2K,KAAM3K,GAAI,CAAJ,CAAV,CAAmB4K,IAAM5K,GAAI,CAAJ,CAAzB,CAAkC6K,IAAM7K,GAAI,EAAJ,CAAxC,CAEAiB,MAAQA,OAAS,KAAKitB,MAAtB,CAEA,GAAKjtB,QAAU,KAAf,CAAuB,CAEnB,KAAKsF,EAAL,CAAUzrB,KAAKuzC,IAAL,CAAW/zB,MAAOiQ,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAX,CAAV,CAEA,GAAKzvB,KAAK6iB,GAAL,CAAU4M,GAAV,EAAkB,OAAvB,CAAiC,CAE7B,KAAKjE,EAAL,CAAUxrB,KAAK+iB,KAAL,CAAY,CAAE6M,GAAd,CAAmBG,GAAnB,CAAV,CACA,KAAKrE,EAAL,CAAU1rB,KAAK+iB,KAAL,CAAY,CAAEyM,GAAd,CAAmBD,GAAnB,CAAV,CAEH,CALD,IAKO,CAEH,KAAK/D,EAAL,CAAUxrB,KAAK+iB,KAAL,CAAY+M,GAAZ,CAAiBH,GAAjB,CAAV,CACA,KAAKjE,EAAL,CAAU,CAAV,CAEH,CAEJ,CAhBD,IAgBO,IAAKvF,QAAU,KAAf,CAAuB,CAE1B,KAAKqF,EAAL,CAAUxrB,KAAKuzC,IAAL,CAAW,CAAE/zB,MAAOoQ,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAb,CAAV,CAEA,GAAK5vB,KAAK6iB,GAAL,CAAU+M,GAAV,EAAkB,OAAvB,CAAiC,CAE7B,KAAKnE,EAAL,CAAUzrB,KAAK+iB,KAAL,CAAY0M,GAAZ,CAAiBM,GAAjB,CAAV,CACA,KAAKrE,EAAL,CAAU1rB,KAAK+iB,KAAL,CAAY2M,GAAZ,CAAiBC,GAAjB,CAAV,CAEH,CALD,IAKO,CAEH,KAAKlE,EAAL,CAAUzrB,KAAK+iB,KAAL,CAAY,CAAE8M,GAAd,CAAmBN,GAAnB,CAAV,CACA,KAAK7D,EAAL,CAAU,CAAV,CAEH,CAEJ,CAhBM,IAgBA,IAAKvF,QAAU,KAAf,CAAuB,CAE1B,KAAKqF,EAAL,CAAUxrB,KAAKuzC,IAAL,CAAW/zB,MAAOsQ,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAX,CAAV,CAEA,GAAK9vB,KAAK6iB,GAAL,CAAUiN,GAAV,EAAkB,OAAvB,CAAiC,CAE7B,KAAKrE,EAAL,CAAUzrB,KAAK+iB,KAAL,CAAY,CAAE8M,GAAd,CAAmBE,GAAnB,CAAV,CACA,KAAKrE,EAAL,CAAU1rB,KAAK+iB,KAAL,CAAY,CAAEyM,GAAd,CAAmBG,GAAnB,CAAV,CAEH,CALD,IAKO,CAEH,KAAKlE,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAU1rB,KAAK+iB,KAAL,CAAY2M,GAAZ,CAAiBH,GAAjB,CAAV,CAEH,CAEJ,CAhBM,IAgBA,IAAKpJ,QAAU,KAAf,CAAuB,CAE1B,KAAKsF,EAAL,CAAUzrB,KAAKuzC,IAAL,CAAW,CAAE/zB,MAAOqQ,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAb,CAAV,CAEA,GAAK7vB,KAAK6iB,GAAL,CAAUgN,GAAV,EAAkB,OAAvB,CAAiC,CAE7B,KAAKrE,EAAL,CAAUxrB,KAAK+iB,KAAL,CAAY+M,GAAZ,CAAiBC,GAAjB,CAAV,CACA,KAAKrE,EAAL,CAAU1rB,KAAK+iB,KAAL,CAAY2M,GAAZ,CAAiBH,GAAjB,CAAV,CAEH,CALD,IAKO,CAEH,KAAK/D,EAAL,CAAU,CAAV,CACA,KAAKE,EAAL,CAAU1rB,KAAK+iB,KAAL,CAAY,CAAEyM,GAAd,CAAmBG,GAAnB,CAAV,CAEH,CAEJ,CAhBM,IAgBA,IAAKxJ,QAAU,KAAf,CAAuB,CAE1B,KAAKuF,EAAL,CAAU1rB,KAAKuzC,IAAL,CAAW/zB,MAAOkQ,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAX,CAAV,CAEA,GAAK1vB,KAAK6iB,GAAL,CAAU6M,GAAV,EAAkB,OAAvB,CAAiC,CAE7B,KAAKlE,EAAL,CAAUxrB,KAAK+iB,KAAL,CAAY,CAAE6M,GAAd,CAAmBD,GAAnB,CAAV,CACA,KAAKlE,EAAL,CAAUzrB,KAAK+iB,KAAL,CAAY,CAAE8M,GAAd,CAAmBN,GAAnB,CAAV,CAEH,CALD,IAKO,CAEH,KAAK/D,EAAL,CAAU,CAAV,CACA,KAAKC,EAAL,CAAUzrB,KAAK+iB,KAAL,CAAY0M,GAAZ,CAAiBM,GAAjB,CAAV,CAEH,CAEJ,CAhBM,IAgBA,IAAK5J,QAAU,KAAf,CAAuB,CAE1B,KAAKuF,EAAL,CAAU1rB,KAAKuzC,IAAL,CAAW,CAAE/zB,MAAOgQ,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAjB,CAAb,CAAV,CAEA,GAAKxvB,KAAK6iB,GAAL,CAAU2M,GAAV,EAAkB,OAAvB,CAAiC,CAE7B,KAAKhE,EAAL,CAAUxrB,KAAK+iB,KAAL,CAAY+M,GAAZ,CAAiBH,GAAjB,CAAV,CACA,KAAKlE,EAAL,CAAUzrB,KAAK+iB,KAAL,CAAY0M,GAAZ,CAAiBF,GAAjB,CAAV,CAEH,CALD,IAKO,CAEH,KAAK/D,EAAL,CAAUxrB,KAAK+iB,KAAL,CAAY,CAAE6M,GAAd,CAAmBG,GAAnB,CAAV,CACA,KAAKtE,EAAL,CAAU,CAAV,CAEH,CAEJ,CAhBM,IAgBA,CAEHxqB,QAAQgK,IAAR,CAAc,kEAAoEkb,KAAlF,EAEH,CAED,KAAKitB,MAAL,CAAcjtB,KAAd,CAEA,GAAK1lB,SAAW,KAAhB,CAAwB,KAAKouB,gBAAL,GAExB,MAAO,KAAP,CAEH,CA7J2B,CA+J5B2kB,kBAAmB,UAAY,CAE3B,GAAI1oC,QAAS,GAAIiZ,QAAJ,EAAb,CAEA,MAAO,SAASyvB,kBAAT,CAA4BrsB,CAA5B,CAA+BhB,KAA/B,CAAsC1lB,MAAtC,CAA+C,CAElDqK,OAAOkc,0BAAP,CAAmCG,CAAnC,EAEA,MAAO,MAAK6F,qBAAL,CAA4BliB,MAA5B,CAAoCqb,KAApC,CAA2C1lB,MAA3C,CAAP,CAEH,CAND,CAQH,CAZkB,EA/JS,CA6K5BiG,eAAgB,wBAAWmD,CAAX,CAAcsc,KAAd,CAAsB,CAElC,MAAO,MAAKhpB,GAAL,CAAU0M,EAAEvN,CAAZ,CAAeuN,EAAEtN,CAAjB,CAAoBsN,EAAErN,CAAtB,CAAyB2pB,OAAS,KAAKitB,MAAvC,CAAP,CAEH,CAjL2B,CAmL5BK,QAAS,UAAY,CAEjB;AAEA,GAAItsB,GAAI,GAAIlhB,WAAJ,EAAR,CAEA,MAAO,SAASwtC,QAAT,CAAkBC,QAAlB,CAA6B,CAEhCvsB,EAAE2H,YAAF,CAAgB,IAAhB,EAEA,MAAO,MAAK0kB,iBAAL,CAAwBrsB,CAAxB,CAA2BusB,QAA3B,CAAP,CAEH,CAND,CAQH,CAdQ,EAnLmB,CAmM5BpwB,OAAQ,gBAAW0C,KAAX,CAAmB,CAEvB,MAASA,OAAMwF,EAAN,GAAa,KAAKA,EAApB,EAA8BxF,MAAMyF,EAAN,GAAa,KAAKA,EAAhD,EAA0DzF,MAAM0F,EAAN,GAAa,KAAKA,EAA5E,EAAsF1F,MAAMotB,MAAN,GAAiB,KAAKA,MAAnH,CAEH,CAvM2B,CAyM5B7vB,UAAW,mBAAWtN,KAAX,CAAmB,CAE1B,KAAKuV,EAAL,CAAUvV,MAAO,CAAP,CAAV,CACA,KAAKwV,EAAL,CAAUxV,MAAO,CAAP,CAAV,CACA,KAAKyV,EAAL,CAAUzV,MAAO,CAAP,CAAV,CACA,GAAKA,MAAO,CAAP,IAAevT,SAApB,CAAgC,KAAK0wC,MAAL,CAAcn9B,MAAO,CAAP,CAAd,CAEhC,KAAK4Y,gBAAL,GAEA,MAAO,KAAP,CAEH,CApN2B,CAsN5BrL,QAAS,iBAAWvN,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEhC,GAAKkQ,QAAUvT,SAAf,CAA2BuT,MAAQ,EAAR,CAC3B,GAAKlQ,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5BkQ,MAAOlQ,MAAP,EAAkB,KAAKylB,EAAvB,CACAvV,MAAOlQ,OAAS,CAAhB,EAAsB,KAAK0lB,EAA3B,CACAxV,MAAOlQ,OAAS,CAAhB,EAAsB,KAAK2lB,EAA3B,CACAzV,MAAOlQ,OAAS,CAAhB,EAAsB,KAAKqtC,MAA3B,CAEA,MAAOn9B,MAAP,CAEH,CAlO2B,CAoO5B09B,UAAW,mBAAWC,cAAX,CAA4B,CAEnC,GAAKA,cAAL,CAAsB,CAElB,MAAOA,gBAAez2C,GAAf,CAAoB,KAAKquB,EAAzB,CAA6B,KAAKC,EAAlC,CAAsC,KAAKC,EAA3C,CAAP,CAEH,CAJD,IAIO,CAEH,MAAO,IAAI9oB,QAAJ,CAAa,KAAK4oB,EAAlB,CAAsB,KAAKC,EAA3B,CAA+B,KAAKC,EAApC,CAAP,CAEH,CAEJ,CAhP2B,CAkP5ByF,SAAU,kBAAWxf,QAAX,CAAsB,CAE5B,KAAKkd,gBAAL,CAAwBld,QAAxB,CAEA,MAAO,KAAP,CAEH,CAxP2B,CA0P5Bkd,iBAAkB,2BAAY,CAAE,CA1PJ,CAAhC,EA8PA;;OAIA,QAASglB,OAAT,EAAkB,CAEd,KAAKC,IAAL,CAAY,EAAI,CAAhB,CAEH,CAED1mC,OAAO4B,MAAP,CAAe6kC,OAAO1mC,SAAtB,CAAiC,CAE7BhQ,IAAK,aAAW42C,OAAX,CAAqB,CAEtB,KAAKD,IAAL,CAAY,GAAKC,OAAL,CAAe,CAA3B,CAEH,CAN4B,CAQ7BC,OAAQ,gBAAWD,OAAX,CAAqB,CAEzB,KAAKD,IAAL,EAAa,GAAKC,OAAL,CAAe,CAA5B,CAEH,CAZ4B,CAc7BE,OAAQ,gBAAWF,OAAX,CAAqB,CAEzB,KAAKD,IAAL,EAAa,GAAKC,OAAL,CAAe,CAA5B,CAEH,CAlB4B,CAoB7BG,QAAS,iBAAWH,OAAX,CAAqB,CAE1B,KAAKD,IAAL,EAAa,EAAI,GAAKC,OAAL,CAAe,CAAnB,CAAb,CAEH,CAxB4B,CA0B7BI,KAAM,cAAWC,MAAX,CAAoB,CAEtB,MAAO,CAAE,KAAKN,IAAL,CAAYM,OAAON,IAArB,IAAgC,CAAvC,CAEH,CA9B4B,CAAjC,EAkCA;;;;;;OAQA,GAAIO,YAAa,CAAjB,CAEA,QAAS10C,SAAT,EAAoB,CAEhByN,OAAOgI,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAExH,MAAOymC,YAAT,CAAnC,EAEA,KAAK/0B,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA,KAAKgW,IAAL,CAAY,EAAZ,CACA,KAAK3sB,IAAL,CAAY,UAAZ,CAEA,KAAKisC,MAAL,CAAc,IAAd,CACA,KAAKC,QAAL,CAAgB,EAAhB,CAEA,KAAKpuC,EAAL,CAAUxG,SAAS60C,SAAT,CAAmBp1C,KAAnB,EAAV,CAEA,GAAI/C,UAAW,GAAIuG,QAAJ,EAAf,CACA,GAAI1D,UAAW,GAAIi0C,MAAJ,EAAf,CACA,GAAIzrC,YAAa,GAAIzB,WAAJ,EAAjB,CACA,GAAIiB,OAAQ,GAAItE,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAZ,CAEA,QAAS6xC,iBAAT,EAA4B,CAExB/sC,WAAWonB,YAAX,CAAyB5vB,QAAzB,CAAmC,KAAnC,EAEH,CAED,QAASw1C,mBAAT,EAA8B,CAE1Bx1C,SAASs0C,iBAAT,CAA4B9rC,UAA5B,CAAwChF,SAAxC,CAAmD,KAAnD,EAEH,CAEDxD,SAASiyB,QAAT,CAAmBsjB,gBAAnB,EACA/sC,WAAWypB,QAAX,CAAqBujB,kBAArB,EAEAtnC,OAAOI,gBAAP,CAAyB,IAAzB,CAA+B,CAC3BnR,SAAU,CACNs4C,WAAY,IADN,CAEN/mC,MAAOvR,QAFD,CADiB,CAK3B6C,SAAU,CACNy1C,WAAY,IADN,CAEN/mC,MAAO1O,QAFD,CALiB,CAS3BwI,WAAY,CACRitC,WAAY,IADJ,CAER/mC,MAAOlG,UAFC,CATe,CAa3BR,MAAO,CACHytC,WAAY,IADT,CAEH/mC,MAAO1G,KAFJ,CAboB,CAiB3B0tC,gBAAiB,CACbhnC,MAAO,GAAImW,QAAJ,EADM,CAjBU,CAoB3B+a,aAAc,CACVlxB,MAAO,GAAI6lB,QAAJ,EADG,CApBa,CAA/B,EAyBA,KAAK3oB,MAAL,CAAc,GAAIiZ,QAAJ,EAAd,CACA,KAAKoO,WAAL,CAAmB,GAAIpO,QAAJ,EAAnB,CAEA,KAAKqR,gBAAL,CAAwBz1B,SAASk1C,uBAAjC,CACA,KAAKC,sBAAL,CAA8B,KAA9B,CAEA,KAAKV,MAAL,CAAc,GAAIP,OAAJ,EAAd,CACA,KAAKkB,OAAL,CAAe,IAAf,CAEA,KAAK73C,UAAL,CAAkB,KAAlB,CACA,KAAKwB,aAAL,CAAqB,KAArB,CAEA,KAAKs2C,aAAL,CAAqB,IAArB,CACA,KAAKC,WAAL,CAAmB,CAAnB,CAEA,KAAKC,QAAL,CAAgB,EAAhB,CAEH,CAEDv1C,SAAS60C,SAAT,CAAqB,GAAI5xC,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAArB,CACAjD,SAASk1C,uBAAT,CAAmC,IAAnC,CAEAl1C,SAASwN,SAAT,CAAqBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeC,gBAAgBH,SAA/B,CAAf,CAA2D,CAE5EI,YAAa5N,QAF+D,CAI5Ew1C,WAAY,IAJgE,CAM5EC,eAAgB,yBAAY,CAAE,CAN8C,CAO5EC,cAAe,wBAAY,CAAE,CAP+C,CAS5EC,YAAa,qBAAWxqC,MAAX,CAAoB,CAE7B,KAAKA,MAAL,CAAYyc,gBAAZ,CAA8Bzc,MAA9B,CAAsC,KAAKA,MAA3C,EAEA,KAAKA,MAAL,CAAY6hB,SAAZ,CAAuB,KAAKtwB,QAA5B,CAAsC,KAAKqL,UAA3C,CAAuD,KAAKR,KAA5D,EAEH,CAf2E,CAiB5ET,gBAAiB,yBAAW0gB,CAAX,CAAe,CAE5B,KAAKzf,UAAL,CAAgB8f,WAAhB,CAA6BL,CAA7B,EAEA,MAAO,KAAP,CAEH,CAvB2E,CAyB5EouB,yBAA0B,kCAAWpqB,IAAX,CAAiBzhB,KAAjB,CAAyB,CAE/C;AAEA,KAAKhC,UAAL,CAAgB2nB,gBAAhB,CAAkClE,IAAlC,CAAwCzhB,KAAxC,EAEH,CA/B2E,CAiC5E8rC,qBAAsB,8BAAWxvB,KAAX,CAAmB,CAErC,KAAKte,UAAL,CAAgBonB,YAAhB,CAA8B9I,KAA9B,CAAqC,IAArC,EAEH,CArC2E,CAuC5EyvB,sBAAuB,+BAAWxiC,CAAX,CAAe,CAElC;AAEA,KAAKvL,UAAL,CAAgBslB,qBAAhB,CAAuC/Z,CAAvC,EAEH,CA7C2E,CA+C5EyiC,0BAA2B,mCAAWvuB,CAAX,CAAe,CAEtC;AAEA,KAAKzf,UAAL,CAAgBnC,IAAhB,CAAsB4hB,CAAtB,EAEH,CArD2E,CAuD5EwuB,aAAc,UAAY,CAEtB;AACA;AAEA,GAAIC,IAAK,GAAI3vC,WAAJ,EAAT,CAEA,MAAO,SAAS0vC,aAAT,CAAuBxqB,IAAvB,CAA6BzhB,KAA7B,CAAqC,CAExCksC,GAAGvmB,gBAAH,CAAqBlE,IAArB,CAA2BzhB,KAA3B,EAEA,KAAKhC,UAAL,CAAgBoa,QAAhB,CAA0B8zB,EAA1B,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAjBa,EAvD8D,CA0E5EC,kBAAmB,UAAY,CAE3B;AACA;AACA;AAEA,GAAID,IAAK,GAAI3vC,WAAJ,EAAT,CAEA,MAAO,SAAS4vC,kBAAT,CAA4B1qB,IAA5B,CAAkCzhB,KAAlC,CAA0C,CAE7CksC,GAAGvmB,gBAAH,CAAqBlE,IAArB,CAA2BzhB,KAA3B,EAEA,KAAKhC,UAAL,CAAgB8f,WAAhB,CAA6BouB,EAA7B,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAlBkB,EA1EyD,CA8F5EE,QAAS,UAAY,CAEjB,GAAIxhC,IAAK,GAAI1R,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAT,CAEA,MAAO,SAASkzC,QAAT,CAAkBpsC,KAAlB,CAA0B,CAE7B,MAAO,MAAKisC,YAAL,CAAmBrhC,EAAnB,CAAuB5K,KAAvB,CAAP,CAEH,CAJD,CAMH,CAVQ,EA9FmE,CA0G5EqsC,QAAS,UAAY,CAEjB,GAAIzhC,IAAK,GAAI1R,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAT,CAEA,MAAO,SAASmzC,QAAT,CAAkBrsC,KAAlB,CAA0B,CAE7B,MAAO,MAAKisC,YAAL,CAAmBrhC,EAAnB,CAAuB5K,KAAvB,CAAP,CAEH,CAJD,CAMH,CAVQ,EA1GmE,CAsH5EssC,QAAS,UAAY,CAEjB,GAAI1hC,IAAK,GAAI1R,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAT,CAEA,MAAO,SAASozC,QAAT,CAAkBtsC,KAAlB,CAA0B,CAE7B,MAAO,MAAKisC,YAAL,CAAmBrhC,EAAnB,CAAuB5K,KAAvB,CAAP,CAEH,CAJD,CAMH,CAVQ,EAtHmE,CAkI5EusC,gBAAiB,UAAY,CAEzB;AACA;AAEA,GAAI3hC,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASqzC,gBAAT,CAA0B9qB,IAA1B,CAAgCrhB,QAAhC,CAA2C,CAE9CwK,GAAG/O,IAAH,CAAS4lB,IAAT,EAAgB1kB,eAAhB,CAAiC,KAAKiB,UAAtC,EAEA,KAAKrL,QAAL,CAAcyB,GAAd,CAAmBwW,GAAGrK,cAAH,CAAmBH,QAAnB,CAAnB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAjBgB,EAlI2D,CAqJ5EzK,WAAY,UAAY,CAEpB,GAAIiV,IAAK,GAAI1R,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAT,CAEA,MAAO,SAASvD,WAAT,CAAqByK,QAArB,CAAgC,CAEnC,MAAO,MAAKmsC,eAAL,CAAsB3hC,EAAtB,CAA0BxK,QAA1B,CAAP,CAEH,CAJD,CAMH,CAVW,EArJgE,CAiK5ExK,WAAY,UAAY,CAEpB,GAAIgV,IAAK,GAAI1R,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAT,CAEA,MAAO,SAAStD,WAAT,CAAqBwK,QAArB,CAAgC,CAEnC,MAAO,MAAKmsC,eAAL,CAAsB3hC,EAAtB,CAA0BxK,QAA1B,CAAP,CAEH,CAJD,CAMH,CAVW,EAjKgE,CA6K5E7K,WAAY,UAAY,CAEpB,GAAIqV,IAAK,GAAI1R,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAT,CAEA,MAAO,SAAS3D,WAAT,CAAqB6K,QAArB,CAAgC,CAEnC,MAAO,MAAKmsC,eAAL,CAAsB3hC,EAAtB,CAA0BxK,QAA1B,CAAP,CAEH,CAJD,CAMH,CAVW,EA7KgE,CAyL5EosC,aAAc,sBAAWtpB,MAAX,CAAoB,CAE9B,MAAOA,QAAOhD,YAAP,CAAqB,KAAKuI,WAA1B,CAAP,CAEH,CA7L2E,CA+L5EgkB,aAAc,UAAY,CAEtB,GAAIvX,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAASoyB,aAAT,CAAuBvpB,MAAvB,CAAgC,CAEnC,MAAOA,QAAOhD,YAAP,CAAqBgV,GAAG3U,UAAH,CAAe,KAAKkI,WAApB,CAArB,CAAP,CAEH,CAJD,CAMH,CAVa,EA/L8D,CA2M5E9qB,OAAQ,UAAY,CAEhB;AAEA,GAAIu3B,IAAK,GAAI7a,QAAJ,EAAT,CACA,GAAI6I,QAAS,GAAIhqB,QAAJ,EAAb,CAEA,MAAO,SAASyE,OAAT,CAAiB/K,CAAjB,CAAoBC,CAApB,CAAuBC,CAAvB,CAA2B,CAE9B,GAAKF,EAAE80B,SAAP,CAAmB,CAEfxE,OAAOrnB,IAAP,CAAajJ,CAAb,EAEH,CAJD,IAIO,CAEHswB,OAAOzvB,GAAP,CAAYb,CAAZ,CAAeC,CAAf,CAAkBC,CAAlB,EAEH,CAED,GAAK,KAAK45C,QAAV,CAAqB,CAEjBxX,GAAGv3B,MAAH,CAAW,KAAKhL,QAAhB,CAA0BuwB,MAA1B,CAAkC,KAAKzmB,EAAvC,EAEH,CAJD,IAIO,CAEHy4B,GAAGv3B,MAAH,CAAWulB,MAAX,CAAmB,KAAKvwB,QAAxB,CAAkC,KAAK8J,EAAvC,EAEH,CAED,KAAKuB,UAAL,CAAgBslB,qBAAhB,CAAuC4R,EAAvC,EAEH,CAxBD,CA0BH,CAjCO,EA3MoE,CA8O5E9gC,IAAK,aAAW0E,MAAX,CAAoB,CAErB,GAAKiP,UAAU/G,MAAV,CAAmB,CAAxB,CAA4B,CAExB,IAAM,GAAI4D,GAAI,CAAd,CAAiBA,EAAImD,UAAU/G,MAA/B,CAAuC4D,GAAvC,CAA8C,CAE1C,KAAKxQ,GAAL,CAAU2T,UAAWnD,CAAX,CAAV,EAEH,CAED,MAAO,KAAP,CAEH,CAED,GAAK9L,SAAW,IAAhB,CAAuB,CAEnBvB,QAAQ+iB,KAAR,CAAe,iEAAf,CAAkFxhB,MAAlF,EACA,MAAO,KAAP,CAEH,CAED,GAAOA,QAAUA,OAAO2yC,UAAxB,CAAuC,CAEnC,GAAK3yC,OAAO8xC,MAAP,GAAkB,IAAvB,CAA8B,CAE1B9xC,OAAO8xC,MAAP,CAAcjmC,MAAd,CAAsB7L,MAAtB,EAEH,CAEDA,OAAO8xC,MAAP,CAAgB,IAAhB,CACA9xC,OAAOkD,aAAP,CAAsB,CAAE2C,KAAM,OAAR,CAAtB,EAEA,KAAKksC,QAAL,CAAcp1C,IAAd,CAAoBqD,MAApB,EAEH,CAbD,IAaO,CAEHvB,QAAQ+iB,KAAR,CAAe,+DAAf,CAAgFxhB,MAAhF,EAEH,CAED,MAAO,KAAP,CAEH,CAxR2E,CA0R5E6L,OAAQ,gBAAW7L,MAAX,CAAoB,CAExB,GAAKiP,UAAU/G,MAAV,CAAmB,CAAxB,CAA4B,CAExB,IAAM,GAAI4D,GAAI,CAAd,CAAiBA,EAAImD,UAAU/G,MAA/B,CAAuC4D,GAAvC,CAA8C,CAE1C,KAAKD,MAAL,CAAaoD,UAAWnD,CAAX,CAAb,EAEH,CAED,MAAO,KAAP,CAEH,CAED,GAAImH,OAAQ,KAAK8+B,QAAL,CAAchmC,OAAd,CAAuB/L,MAAvB,CAAZ,CAEA,GAAKiT,QAAU,CAAE,CAAjB,CAAqB,CAEjBjT,OAAO8xC,MAAP,CAAgB,IAAhB,CAEA9xC,OAAOkD,aAAP,CAAsB,CAAE2C,KAAM,SAAR,CAAtB,EAEA,KAAKksC,QAAL,CAAc/lC,MAAd,CAAsBiH,KAAtB,CAA6B,CAA7B,EAEH,CAED,MAAO,KAAP,CAEH,CAtT2E,CAwT5E4gC,cAAe,uBAAWv7C,EAAX,CAAgB,CAE3B,MAAO,MAAKw7C,mBAAL,CAA0B,IAA1B,CAAgCx7C,EAAhC,CAAP,CAEH,CA5T2E,CA8T5Ey7C,gBAAiB,yBAAWvhB,IAAX,CAAkB,CAE/B,MAAO,MAAKshB,mBAAL,CAA0B,MAA1B,CAAkCthB,IAAlC,CAAP,CAEH,CAlU2E,CAoU5EshB,oBAAqB,6BAAWthB,IAAX,CAAiBpnB,KAAjB,CAAyB,CAE1C,GAAK,KAAMonB,IAAN,IAAiBpnB,KAAtB,CAA8B,MAAO,KAAP,CAE9B,IAAM,GAAIU,GAAI,CAAR,CAAW6H,EAAI,KAAKo+B,QAAL,CAAc7pC,MAAnC,CAA2C4D,EAAI6H,CAA/C,CAAkD7H,GAAlD,CAAyD,CAErD,GAAIkoC,OAAQ,KAAKjC,QAAL,CAAejmC,CAAf,CAAZ,CACA,GAAI9L,QAASg0C,MAAMF,mBAAN,CAA2BthB,IAA3B,CAAiCpnB,KAAjC,CAAb,CAEA,GAAKpL,SAAWE,SAAhB,CAA4B,CAExB,MAAOF,OAAP,CAEH,CAEJ,CAED,MAAOE,UAAP,CAEH,CAvV2E,CAyV5E+zC,iBAAkB,0BAAW14C,MAAX,CAAoB,CAElC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,4DAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,KAAK43B,iBAAL,CAAwB,IAAxB,EAEA,MAAOz8B,QAAOw1B,qBAAP,CAA8B,KAAKpB,WAAnC,CAAP,CAEH,CAtW2E,CAwW5EukB,mBAAoB,UAAY,CAE5B,GAAIr6C,UAAW,GAAIuG,QAAJ,EAAf,CACA,GAAIsE,OAAQ,GAAItE,QAAJ,EAAZ,CAEA,MAAO,SAAS8zC,mBAAT,CAA6B34C,MAA7B,CAAsC,CAEzC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,8DAAd,EACAlN,OAAS,GAAIkI,WAAJ,EAAT,CAEH,CAED,KAAKu0B,iBAAL,CAAwB,IAAxB,EAEA,KAAKrI,WAAL,CAAiBxF,SAAjB,CAA4BtwB,QAA5B,CAAsC0B,MAAtC,CAA8CmJ,KAA9C,EAEA,MAAOnJ,OAAP,CAEH,CAfD,CAiBH,CAtBmB,EAxWwD,CAgY5E44C,cAAe,UAAY,CAEvB,GAAIt6C,UAAW,GAAIuG,QAAJ,EAAf,CACA,GAAI8E,YAAa,GAAIzB,WAAJ,EAAjB,CAEA,MAAO,SAAS0wC,cAAT,CAAwB54C,MAAxB,CAAiC,CAEpC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,yDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,KAAK43B,iBAAL,CAAwB,IAAxB,EAEA,KAAKrI,WAAL,CAAiBxF,SAAjB,CAA4BtwB,QAA5B,CAAsCqL,UAAtC,CAAkD3J,MAAlD,EAEA,MAAOA,OAAP,CAEH,CAfD,CAiBH,CAtBc,EAhY6D,CAwZ5E64C,kBAAmB,UAAY,CAE3B,GAAIlvC,YAAa,GAAIzB,WAAJ,EAAjB,CAEA,MAAO,SAAS2wC,kBAAT,CAA4B74C,MAA5B,CAAqC,CAExC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,6DAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,KAAK8zC,kBAAL,CAAyBhvC,UAAzB,EAEA,MAAO3J,QAAOZ,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAAsBsJ,eAAtB,CAAuCiB,UAAvC,CAAP,CAEH,CAbD,CAeH,CAnBkB,EAxZyD,CA6a5EmvC,QAAS,kBAAY,CAAE,CA7aqD,CA+a5E5c,SAAU,kBAAWtoB,QAAX,CAAsB,CAE5BA,SAAU,IAAV,EAEA,GAAI4iC,UAAW,KAAKA,QAApB,CAEA,IAAM,GAAIjmC,GAAI,CAAR,CAAW6H,EAAIo+B,SAAS7pC,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDimC,SAAUjmC,CAAV,EAAc2rB,QAAd,CAAwBtoB,QAAxB,EAEH,CAEJ,CA3b2E,CA6b5EmlC,gBAAiB,yBAAWnlC,QAAX,CAAsB,CAEnC,GAAK,KAAKojC,OAAL,GAAiB,KAAtB,CAA8B,OAE9BpjC,SAAU,IAAV,EAEA,GAAI4iC,UAAW,KAAKA,QAApB,CAEA,IAAM,GAAIjmC,GAAI,CAAR,CAAW6H,EAAIo+B,SAAS7pC,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDimC,SAAUjmC,CAAV,EAAcwoC,eAAd,CAA+BnlC,QAA/B,EAEH,CAEJ,CA3c2E,CA6c5EolC,kBAAmB,2BAAWplC,QAAX,CAAsB,CAErC,GAAI2iC,QAAS,KAAKA,MAAlB,CAEA,GAAKA,SAAW,IAAhB,CAAuB,CAEnB3iC,SAAU2iC,MAAV,EAEAA,OAAOyC,iBAAP,CAA0BplC,QAA1B,EAEH,CAEJ,CAzd2E,CA2d5EgkB,aAAc,uBAAY,CAEtB,KAAK7qB,MAAL,CAAYsc,OAAZ,CAAqB,KAAK/qB,QAA1B,CAAoC,KAAKqL,UAAzC,CAAqD,KAAKR,KAA1D,EAEA,KAAK4tC,sBAAL,CAA8B,IAA9B,CAEH,CAje2E,CAme5Eta,kBAAmB,2BAAWwc,KAAX,CAAmB,CAElC,GAAK,KAAK5hB,gBAAV,CAA6B,KAAKO,YAAL,GAE7B,GAAK,KAAKmf,sBAAL,EAA+BkC,KAApC,CAA4C,CAExC,GAAK,KAAK1C,MAAL,GAAgB,IAArB,CAA4B,CAExB,KAAKniB,WAAL,CAAiB5sB,IAAjB,CAAuB,KAAKuF,MAA5B,EAEH,CAJD,IAIO,CAEH,KAAKqnB,WAAL,CAAiB5K,gBAAjB,CAAmC,KAAK+sB,MAAL,CAAYniB,WAA/C,CAA4D,KAAKrnB,MAAjE,EAEH,CAED,KAAKgqC,sBAAL,CAA8B,KAA9B,CAEAkC,MAAQ,IAAR,CAEH,CAED;AAEA,GAAIzC,UAAW,KAAKA,QAApB,CAEA,IAAM,GAAIjmC,GAAI,CAAR,CAAW6H,EAAIo+B,SAAS7pC,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDimC,SAAUjmC,CAAV,EAAcksB,iBAAd,CAAiCwc,KAAjC,EAEH,CAEJ,CAngB2E,CAqgB5EphB,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB;AACA,GAAIC,cAAiBD,OAASnzB,SAAT,EAAsB,MAAOmzB,KAAP,GAAgB,QAA3D,CAEA,GAAIrgB,QAAS,EAAb,CAEA;AACA;AACA;AACA,GAAKsgB,YAAL,CAAoB,CAEhB;AACAD,KAAO,CACHohB,WAAY,EADT,CAEHC,UAAW,EAFR,CAGHnhB,SAAU,EAHP,CAIHW,OAAQ,EAJL,CAKHygB,OAAQ,EALL,CAAP,CAQA3hC,OAAO+gB,QAAP,CAAkB,CACdd,QAAS,GADK,CAEdptB,KAAM,QAFQ,CAGdmuB,UAAW,iBAHG,CAAlB,CAMH,CAED;AAEA,GAAIh0B,QAAS,EAAb,CAEAA,OAAO8c,IAAP,CAAc,KAAKA,IAAnB,CACA9c,OAAO6F,IAAP,CAAc,KAAKA,IAAnB,CAEA,GAAK,KAAK2sB,IAAL,GAAc,EAAnB,CAAwBxyB,OAAOwyB,IAAP,CAAc,KAAKA,IAAnB,CACxB,GAAK,KAAK93B,UAAL,GAAoB,IAAzB,CAAgCsF,OAAOtF,UAAP,CAAoB,IAApB,CAChC,GAAK,KAAKwB,aAAL,GAAuB,IAA5B,CAAmC8D,OAAO9D,aAAP,CAAuB,IAAvB,CACnC,GAAK,KAAKq2C,OAAL,GAAiB,KAAtB,CAA8BvyC,OAAOuyC,OAAP,CAAiB,KAAjB,CAC9B,GAAK,KAAKC,aAAL,GAAuB,KAA5B,CAAoCxyC,OAAOwyC,aAAP,CAAuB,KAAvB,CACpC,GAAK,KAAKC,WAAL,GAAqB,CAA1B,CAA8BzyC,OAAOyyC,WAAP,CAAqB,KAAKA,WAA1B,CAC9B,GAAKmC,KAAKC,SAAL,CAAgB,KAAKnC,QAArB,IAAoC,IAAzC,CAAgD1yC,OAAO0yC,QAAP,CAAkB,KAAKA,QAAvB,CAEhD1yC,OAAOsI,MAAP,CAAgB,KAAKA,MAAL,CAAY0Y,OAAZ,EAAhB,CAEA,GAAK,KAAK4R,gBAAL,GAA0B,KAA/B,CAAuC5yB,OAAO4yB,gBAAP,CAA0B,KAA1B,CAEvC;AAEA,QAASkiB,UAAT,CAAoBC,OAApB,CAA6BjtC,OAA7B,CAAuC,CAEnC,GAAKitC,QAASjtC,QAAQgV,IAAjB,IAA4B5c,SAAjC,CAA6C,CAEzC60C,QAASjtC,QAAQgV,IAAjB,EAA0BhV,QAAQsrB,MAAR,CAAgBC,IAAhB,CAA1B,CAEH,CAED,MAAOvrB,SAAQgV,IAAf,CAEH,CAED,GAAK,KAAK6a,QAAL,GAAkBz3B,SAAvB,CAAmC,CAE/BF,OAAO23B,QAAP,CAAkBmd,UAAWzhB,KAAKohB,UAAhB,CAA4B,KAAK9c,QAAjC,CAAlB,CAEA,GAAIqd,YAAa,KAAKrd,QAAL,CAAcqd,UAA/B,CAEA,GAAKA,aAAe90C,SAAf,EAA4B80C,WAAWL,MAAX,GAAsBz0C,SAAvD,CAAmE,CAE/D,GAAIy0C,QAASK,WAAWL,MAAxB,CAEA,GAAKzmC,MAAM63B,OAAN,CAAe4O,MAAf,CAAL,CAA+B,CAE3B,IAAM,GAAI7oC,GAAI,CAAR,CAAW6H,EAAIghC,OAAOzsC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAImpC,OAAQN,OAAQ7oC,CAAR,CAAZ,CAEAgpC,UAAWzhB,KAAKshB,MAAhB,CAAwBM,KAAxB,EAEH,CAEJ,CAVD,IAUO,CAEHH,UAAWzhB,KAAKshB,MAAhB,CAAwBA,MAAxB,EAEH,CAEJ,CAEJ,CAED,GAAK,KAAKO,QAAL,GAAkBh1C,SAAvB,CAAmC,CAE/B,GAAKgO,MAAM63B,OAAN,CAAe,KAAKmP,QAApB,CAAL,CAAsC,CAElC,GAAIC,OAAQ,EAAZ,CAEA,IAAM,GAAIrpC,GAAI,CAAR,CAAW6H,EAAI,KAAKuhC,QAAL,CAAchtC,MAAnC,CAA2C4D,EAAI6H,CAA/C,CAAkD7H,GAAlD,CAAyD,CAErDqpC,MAAMx4C,IAAN,CAAYm4C,UAAWzhB,KAAKqhB,SAAhB,CAA2B,KAAKQ,QAAL,CAAeppC,CAAf,CAA3B,CAAZ,EAEH,CAED9L,OAAOk1C,QAAP,CAAkBC,KAAlB,CAEH,CAZD,IAYO,CAEHn1C,OAAOk1C,QAAP,CAAkBJ,UAAWzhB,KAAKqhB,SAAhB,CAA2B,KAAKQ,QAAhC,CAAlB,CAEH,CAEJ,CAED;AAEA,GAAK,KAAKnD,QAAL,CAAc7pC,MAAd,CAAuB,CAA5B,CAAgC,CAE5BlI,OAAO+xC,QAAP,CAAkB,EAAlB,CAEA,IAAM,GAAIjmC,GAAI,CAAd,CAAiBA,EAAI,KAAKimC,QAAL,CAAc7pC,MAAnC,CAA2C4D,GAA3C,CAAkD,CAE9C9L,OAAO+xC,QAAP,CAAgBp1C,IAAhB,CAAsB,KAAKo1C,QAAL,CAAejmC,CAAf,EAAmBsnB,MAAnB,CAA2BC,IAA3B,EAAkCrzB,MAAxD,EAEH,CAEJ,CAED,GAAKszB,YAAL,CAAoB,CAEhB,GAAImhB,YAAaW,iBAAkB/hB,KAAKohB,UAAvB,CAAjB,CACA,GAAIC,WAAYU,iBAAkB/hB,KAAKqhB,SAAvB,CAAhB,CACA,GAAInhB,UAAW6hB,iBAAkB/hB,KAAKE,QAAvB,CAAf,CACA,GAAIW,QAASkhB,iBAAkB/hB,KAAKa,MAAvB,CAAb,CACA,GAAIygB,QAASS,iBAAkB/hB,KAAKshB,MAAvB,CAAb,CAEA,GAAKF,WAAWvsC,MAAX,CAAoB,CAAzB,CAA6B8K,OAAOyhC,UAAP,CAAoBA,UAApB,CAC7B,GAAKC,UAAUxsC,MAAV,CAAmB,CAAxB,CAA4B8K,OAAO0hC,SAAP,CAAmBA,SAAnB,CAC5B,GAAKnhB,SAASrrB,MAAT,CAAkB,CAAvB,CAA2B8K,OAAOugB,QAAP,CAAkBA,QAAlB,CAC3B,GAAKW,OAAOhsB,MAAP,CAAgB,CAArB,CAAyB8K,OAAOkhB,MAAP,CAAgBA,MAAhB,CACzB,GAAKygB,OAAOzsC,MAAP,CAAgB,CAArB,CAAyB8K,OAAO2hC,MAAP,CAAgBA,MAAhB,CAE5B,CAED3hC,OAAOhT,MAAP,CAAgBA,MAAhB,CAEA,MAAOgT,OAAP,CAEA;AACA;AACA;AACA,QAASoiC,iBAAT,CAA2BC,KAA3B,CAAmC,CAE/B,GAAIC,QAAS,EAAb,CACA,IAAM,GAAIC,IAAV,GAAiBF,MAAjB,CAAyB,CAErB,GAAI/2C,MAAO+2C,MAAOE,GAAP,CAAX,CACA,MAAOj3C,MAAKy1B,QAAZ,CACAuhB,OAAO34C,IAAP,CAAa2B,IAAb,EAEH,CACD,MAAOg3C,OAAP,CAEH,CAEJ,CA1qB2E,CA4qB5E14C,MAAO,eAAW44C,SAAX,CAAuB,CAE1B,MAAO,IAAI,MAAKzqC,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAmCyyC,SAAnC,CAAP,CAEH,CAhrB2E,CAkrB5EzyC,KAAM,cAAW0J,MAAX,CAAmB+oC,SAAnB,CAA+B,CAEjC,GAAKA,YAAct1C,SAAnB,CAA+Bs1C,UAAY,IAAZ,CAE/B,KAAKhjB,IAAL,CAAY/lB,OAAO+lB,IAAnB,CAEA,KAAK7uB,EAAL,CAAQZ,IAAR,CAAc0J,OAAO9I,EAArB,EAEA,KAAK9J,QAAL,CAAckJ,IAAd,CAAoB0J,OAAO5S,QAA3B,EACA,KAAKqL,UAAL,CAAgBnC,IAAhB,CAAsB0J,OAAOvH,UAA7B,EACA,KAAKR,KAAL,CAAW3B,IAAX,CAAiB0J,OAAO/H,KAAxB,EAEA,KAAK4D,MAAL,CAAYvF,IAAZ,CAAkB0J,OAAOnE,MAAzB,EACA,KAAKqnB,WAAL,CAAiB5sB,IAAjB,CAAuB0J,OAAOkjB,WAA9B,EAEA,KAAKiD,gBAAL,CAAwBnmB,OAAOmmB,gBAA/B,CACA,KAAK0f,sBAAL,CAA8B7lC,OAAO6lC,sBAArC,CAEA,KAAKV,MAAL,CAAYN,IAAZ,CAAmB7kC,OAAOmlC,MAAP,CAAcN,IAAjC,CACA,KAAKiB,OAAL,CAAe9lC,OAAO8lC,OAAtB,CAEA,KAAK73C,UAAL,CAAkB+R,OAAO/R,UAAzB,CACA,KAAKwB,aAAL,CAAqBuQ,OAAOvQ,aAA5B,CAEA,KAAKs2C,aAAL,CAAqB/lC,OAAO+lC,aAA5B,CACA,KAAKC,WAAL,CAAmBhmC,OAAOgmC,WAA1B,CAEA,KAAKC,QAAL,CAAgBkC,KAAKa,KAAL,CAAYb,KAAKC,SAAL,CAAgBpoC,OAAOimC,QAAvB,CAAZ,CAAhB,CAEA,GAAK8C,YAAc,IAAnB,CAA0B,CAEtB,IAAM,GAAI1pC,GAAI,CAAd,CAAiBA,EAAIW,OAAOslC,QAAP,CAAgB7pC,MAArC,CAA6C4D,GAA7C,CAAoD,CAEhD,GAAIkoC,OAAQvnC,OAAOslC,QAAP,CAAiBjmC,CAAjB,CAAZ,CACA,KAAKxQ,GAAL,CAAU04C,MAAMp3C,KAAN,EAAV,EAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CA5tB2E,CAA3D,CAArB,CAguBA;;;;OAMA,QAAS84C,OAAT,EAAkB,CAEdv4C,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,QAAZ,CAEA,KAAK8vC,kBAAL,CAA0B,GAAIp0B,QAAJ,EAA1B,CACA,KAAKmO,gBAAL,CAAwB,GAAInO,QAAJ,EAAxB,CAEH,CAEDm0B,OAAO/qC,SAAP,CAAmBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAEnEI,YAAa2qC,MAFsD,CAInE9B,SAAU,IAJyD,CAMnE7wC,KAAM,cAAW0J,MAAX,CAAmB+oC,SAAnB,CAA+B,CAEjCr4C,SAASwN,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,CAA4C+oC,SAA5C,EAEA,KAAKG,kBAAL,CAAwB5yC,IAAxB,CAA8B0J,OAAOkpC,kBAArC,EACA,KAAKjmB,gBAAL,CAAsB3sB,IAAtB,CAA4B0J,OAAOijB,gBAAnC,EAEA,MAAO,KAAP,CAEH,CAfkE,CAiBnE0kB,kBAAmB,UAAY,CAE3B,GAAIlvC,YAAa,GAAIzB,WAAJ,EAAjB,CAEA,MAAO,SAAS2wC,kBAAT,CAA4B74C,MAA5B,CAAqC,CAExC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,2DAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,KAAK8zC,kBAAL,CAAyBhvC,UAAzB,EAEA,MAAO3J,QAAOZ,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAE,CAApB,EAAwBsJ,eAAxB,CAAyCiB,UAAzC,CAAP,CAEH,CAbD,CAeH,CAnBkB,EAjBgD,CAsCnE8yB,kBAAmB,2BAAWwc,KAAX,CAAmB,CAElCr3C,SAASwN,SAAT,CAAmBqtB,iBAAnB,CAAqC3pB,IAArC,CAA2C,IAA3C,CAAiDmmC,KAAjD,EAEA,KAAKmB,kBAAL,CAAwBluB,UAAxB,CAAoC,KAAKkI,WAAzC,EAEH,CA5CkE,CA8CnE/yB,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAlDkE,CAApD,CAAnB,CAsDA;;;OAKA,QAAS6yC,mBAAT,CAA6B/6C,IAA7B,CAAmCC,KAAnC,CAA0CC,GAA1C,CAA+CC,MAA/C,CAAuDC,IAAvD,CAA6DyvB,GAA7D,CAAmE,CAE/DgrB,OAAOrnC,IAAP,CAAa,IAAb,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAKtD,IAAL,CAAY,CAAZ,CACA,KAAKszC,IAAL,CAAY,IAAZ,CAEA,KAAKh7C,IAAL,CAAYA,IAAZ,CACA,KAAKC,KAAL,CAAaA,KAAb,CACA,KAAKC,GAAL,CAAWA,GAAX,CACA,KAAKC,MAAL,CAAcA,MAAd,CAEA,KAAKC,IAAL,CAAcA,OAASiF,SAAX,CAAyBjF,IAAzB,CAAgC,GAA5C,CACA,KAAKyvB,GAAL,CAAaA,MAAQxqB,SAAV,CAAwBwqB,GAAxB,CAA8B,IAAzC,CAEA,KAAKznB,sBAAL,GAEH,CAED2yC,mBAAmBjrC,SAAnB,CAA+BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe6qC,OAAO/qC,SAAtB,CAAf,CAAkD,CAE7EI,YAAa6qC,kBAFgE,CAI7ErtC,qBAAsB,IAJuD,CAM7ExF,KAAM,cAAW0J,MAAX,CAAmB+oC,SAAnB,CAA+B,CAEjCE,OAAO/qC,SAAP,CAAiB5H,IAAjB,CAAsBsL,IAAtB,CAA4B,IAA5B,CAAkC5B,MAAlC,CAA0C+oC,SAA1C,EAEA,KAAK36C,IAAL,CAAY4R,OAAO5R,IAAnB,CACA,KAAKC,KAAL,CAAa2R,OAAO3R,KAApB,CACA,KAAKC,GAAL,CAAW0R,OAAO1R,GAAlB,CACA,KAAKC,MAAL,CAAcyR,OAAOzR,MAArB,CACA,KAAKC,IAAL,CAAYwR,OAAOxR,IAAnB,CACA,KAAKyvB,GAAL,CAAWje,OAAOie,GAAlB,CAEA,KAAKnoB,IAAL,CAAYkK,OAAOlK,IAAnB,CACA,KAAKszC,IAAL,CAAYppC,OAAOopC,IAAP,GAAgB,IAAhB,CAAuB,IAAvB,CAA8BjrC,OAAO4B,MAAP,CAAe,EAAf,CAAmBC,OAAOopC,IAA1B,CAA1C,CAEA,MAAO,KAAP,CAEH,CAtB4E,CAwB7EC,cAAe,uBAAWC,SAAX,CAAsBC,UAAtB,CAAkCl8C,CAAlC,CAAqCC,CAArC,CAAwCqB,KAAxC,CAA+CC,MAA/C,CAAwD,CAEnE,GAAK,KAAKw6C,IAAL,GAAc,IAAnB,CAA0B,CAEtB,KAAKA,IAAL,CAAY,CACRj8C,QAAS,IADD,CAERm8C,UAAW,CAFH,CAGRC,WAAY,CAHJ,CAIRC,QAAS,CAJD,CAKRC,QAAS,CALD,CAMR96C,MAAO,CANC,CAORC,OAAQ,CAPA,CAAZ,CAUH,CAED,KAAKw6C,IAAL,CAAUj8C,OAAV,CAAoB,IAApB,CACA,KAAKi8C,IAAL,CAAUE,SAAV,CAAsBA,SAAtB,CACA,KAAKF,IAAL,CAAUG,UAAV,CAAuBA,UAAvB,CACA,KAAKH,IAAL,CAAUI,OAAV,CAAoBn8C,CAApB,CACA,KAAK+7C,IAAL,CAAUK,OAAV,CAAoBn8C,CAApB,CACA,KAAK87C,IAAL,CAAUz6C,KAAV,CAAkBA,KAAlB,CACA,KAAKy6C,IAAL,CAAUx6C,MAAV,CAAmBA,MAAnB,CAEA,KAAK4H,sBAAL,GAEH,CAlD4E,CAoD7EkzC,gBAAiB,0BAAY,CAEzB,GAAK,KAAKN,IAAL,GAAc,IAAnB,CAA0B,CAEtB,KAAKA,IAAL,CAAUj8C,OAAV,CAAoB,KAApB,CAEH,CAED,KAAKqJ,sBAAL,GAEH,CA9D4E,CAgE7EA,uBAAwB,iCAAY,CAEhC,GAAI+G,IAAK,CAAE,KAAKlP,KAAL,CAAa,KAAKD,IAApB,GAA+B,EAAI,KAAK0H,IAAxC,CAAT,CACA,GAAI0H,IAAK,CAAE,KAAKlP,GAAL,CAAW,KAAKC,MAAlB,GAA+B,EAAI,KAAKuH,IAAxC,CAAT,CACA,GAAIkvB,IAAK,CAAE,KAAK32B,KAAL,CAAa,KAAKD,IAApB,EAA6B,CAAtC,CACA,GAAI62B,IAAK,CAAE,KAAK32B,GAAL,CAAW,KAAKC,MAAlB,EAA6B,CAAtC,CAEA,GAAIH,MAAO42B,GAAKznB,EAAhB,CACA,GAAIlP,OAAQ22B,GAAKznB,EAAjB,CACA,GAAIjP,KAAM22B,GAAKznB,EAAf,CACA,GAAIjP,QAAS02B,GAAKznB,EAAlB,CAEA,GAAK,KAAK4rC,IAAL,GAAc,IAAd,EAAsB,KAAKA,IAAL,CAAUj8C,OAArC,CAA+C,CAE3C,GAAIw8C,OAAQ,KAAK7zC,IAAL,EAAc,KAAKszC,IAAL,CAAUz6C,KAAV,CAAkB,KAAKy6C,IAAL,CAAUE,SAA1C,CAAZ,CACA,GAAIM,OAAQ,KAAK9zC,IAAL,EAAc,KAAKszC,IAAL,CAAUx6C,MAAV,CAAmB,KAAKw6C,IAAL,CAAUG,UAA3C,CAAZ,CACA,GAAIM,QAAS,CAAE,KAAKx7C,KAAL,CAAa,KAAKD,IAApB,EAA6B,KAAKg7C,IAAL,CAAUz6C,KAApD,CACA,GAAIm7C,QAAS,CAAE,KAAKx7C,GAAL,CAAW,KAAKC,MAAlB,EAA6B,KAAK66C,IAAL,CAAUx6C,MAApD,CAEAR,MAAQy7C,QAAW,KAAKT,IAAL,CAAUI,OAAV,CAAoBG,KAA/B,CAAR,CACAt7C,MAAQD,KAAOy7C,QAAW,KAAKT,IAAL,CAAUz6C,KAAV,CAAkBg7C,KAA7B,CAAf,CACAr7C,KAAOw7C,QAAW,KAAKV,IAAL,CAAUK,OAAV,CAAoBG,KAA/B,CAAP,CACAr7C,OAASD,IAAMw7C,QAAW,KAAKV,IAAL,CAAUx6C,MAAV,CAAmBg7C,KAA9B,CAAf,CAEH,CAED,KAAK3mB,gBAAL,CAAsB/E,gBAAtB,CAAwC9vB,IAAxC,CAA8CC,KAA9C,CAAqDC,GAArD,CAA0DC,MAA1D,CAAkE,KAAKC,IAAvE,CAA6E,KAAKyvB,GAAlF,EAEH,CA5F4E,CA8F7E0I,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAI/0B,MAAOnB,SAASwN,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAsCglB,IAAtC,CAAX,CAEA/0B,KAAK0B,MAAL,CAAYuC,IAAZ,CAAmB,KAAKA,IAAxB,CACAjE,KAAK0B,MAAL,CAAYnF,IAAZ,CAAmB,KAAKA,IAAxB,CACAyD,KAAK0B,MAAL,CAAYlF,KAAZ,CAAoB,KAAKA,KAAzB,CACAwD,KAAK0B,MAAL,CAAYjF,GAAZ,CAAkB,KAAKA,GAAvB,CACAuD,KAAK0B,MAAL,CAAYhF,MAAZ,CAAqB,KAAKA,MAA1B,CACAsD,KAAK0B,MAAL,CAAY/E,IAAZ,CAAmB,KAAKA,IAAxB,CACAqD,KAAK0B,MAAL,CAAY0qB,GAAZ,CAAkB,KAAKA,GAAvB,CAEA,GAAK,KAAKmrB,IAAL,GAAc,IAAnB,CAA0Bv3C,KAAK0B,MAAL,CAAY61C,IAAZ,CAAmBjrC,OAAO4B,MAAP,CAAe,EAAf,CAAmB,KAAKqpC,IAAxB,CAAnB,CAE1B,MAAOv3C,KAAP,CAEH,CA9G4E,CAAlD,CAA/B,CAkHA;;;OAKA,QAASk4C,MAAT,CAAgB9kC,CAAhB,CAAmBX,CAAnB,CAAsBuQ,CAAtB,CAAyBmP,MAAzB,CAAiCz0B,KAAjC,CAAwCy6C,aAAxC,CAAwD,CAEpD,KAAK/kC,CAAL,CAASA,CAAT,CACA,KAAKX,CAAL,CAASA,CAAT,CACA,KAAKuQ,CAAL,CAASA,CAAT,CAEA,KAAKmP,MAAL,CAAgBA,QAAUA,OAAO7B,SAAnB,CAAiC6B,MAAjC,CAA0C,GAAIrwB,QAAJ,EAAxD,CACA,KAAKs2C,aAAL,CAAqBxoC,MAAM63B,OAAN,CAAetV,MAAf,EAA0BA,MAA1B,CAAmC,EAAxD,CAEA,KAAKz0B,KAAL,CAAeA,OAASA,MAAM8pC,OAAjB,CAA6B9pC,KAA7B,CAAqC,GAAIiqC,MAAJ,EAAlD,CACA,KAAK0Q,YAAL,CAAoBzoC,MAAM63B,OAAN,CAAe/pC,KAAf,EAAyBA,KAAzB,CAAiC,EAArD,CAEA,KAAKy6C,aAAL,CAAqBA,gBAAkBv2C,SAAlB,CAA8Bu2C,aAA9B,CAA8C,CAAnE,CAEH,CAED7rC,OAAO4B,MAAP,CAAegqC,MAAM7rC,SAArB,CAAgC,CAE5B/N,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAN2B,CAQ5BA,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAKiF,CAAL,CAASjF,OAAOiF,CAAhB,CACA,KAAKX,CAAL,CAAStE,OAAOsE,CAAhB,CACA,KAAKuQ,CAAL,CAAS7U,OAAO6U,CAAhB,CAEA,KAAKmP,MAAL,CAAY1tB,IAAZ,CAAkB0J,OAAOgkB,MAAzB,EACA,KAAKz0B,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EAEA,KAAKy6C,aAAL,CAAqBhqC,OAAOgqC,aAA5B,CAEA,IAAM,GAAI3qC,GAAI,CAAR,CAAW6qB,GAAKlqB,OAAOiqC,aAAP,CAAqBxuC,MAA3C,CAAmD4D,EAAI6qB,EAAvD,CAA2D7qB,GAA3D,CAAkE,CAE9D,KAAK4qC,aAAL,CAAoB5qC,CAApB,EAA0BW,OAAOiqC,aAAP,CAAsB5qC,CAAtB,EAA0BlP,KAA1B,EAA1B,CAEH,CAED,IAAM,GAAIkP,GAAI,CAAR,CAAW6qB,GAAKlqB,OAAOkqC,YAAP,CAAoBzuC,MAA1C,CAAkD4D,EAAI6qB,EAAtD,CAA0D7qB,GAA1D,CAAiE,CAE7D,KAAK6qC,YAAL,CAAmB7qC,CAAnB,EAAyBW,OAAOkqC,YAAP,CAAqB7qC,CAArB,EAAyBlP,KAAzB,EAAzB,CAEH,CAED,MAAO,KAAP,CAEH,CAjC2B,CAAhC,EAqCA;;;;;;;OASA,GAAIg6C,YAAa,CAAjB,CAAoB;AAEpB,QAASC,SAAT,EAAoB,CAEhBjsC,OAAOgI,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAExH,MAAOwrC,YAAc,CAAvB,CAAnC,EAEA,KAAK95B,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA,KAAKgW,IAAL,CAAY,EAAZ,CACA,KAAK3sB,IAAL,CAAY,UAAZ,CAEA,KAAKgyB,QAAL,CAAgB,EAAhB,CACA,KAAKif,MAAL,CAAc,EAAd,CACA,KAAKC,KAAL,CAAa,EAAb,CACA,KAAKC,aAAL,CAAqB,CAAC,EAAD,CAArB,CAEA,KAAKC,YAAL,CAAoB,EAApB,CACA,KAAKC,YAAL,CAAoB,EAApB,CAEA,KAAKC,WAAL,CAAmB,EAAnB,CACA,KAAKC,WAAL,CAAmB,EAAnB,CAEA,KAAKC,aAAL,CAAqB,EAArB,CAEA,KAAKC,WAAL,CAAmB,IAAnB,CACA,KAAKvZ,cAAL,CAAsB,IAAtB,CAEA;AAEA,KAAKwZ,kBAAL,CAA0B,KAA1B,CACA,KAAKC,kBAAL,CAA0B,KAA1B,CACA,KAAKC,aAAL,CAAqB,KAArB,CACA,KAAKC,iBAAL,CAAyB,KAAzB,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CACA,KAAKC,uBAAL,CAA+B,KAA/B,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CAEH,CAEDhB,SAASlsC,SAAT,CAAqBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeC,gBAAgBH,SAA/B,CAAf,CAA2D,CAE5EI,YAAa8rC,QAF+D,CAI5Ejf,WAAY,IAJgE,CAM5Ekb,YAAa,qBAAWxqC,MAAX,CAAoB,CAE7B,GAAIg0B,cAAe,GAAIrL,QAAJ,GAAcI,eAAd,CAA+B/oB,MAA/B,CAAnB,CAEA,IAAM,GAAIwD,GAAI,CAAR,CAAW6qB,GAAK,KAAKkB,QAAL,CAAc3vB,MAApC,CAA4C4D,EAAI6qB,EAAhD,CAAoD7qB,GAApD,CAA2D,CAEvD,GAAIgsC,QAAS,KAAKjgB,QAAL,CAAe/rB,CAAf,CAAb,CACAgsC,OAAO1wB,YAAP,CAAqB9e,MAArB,EAEH,CAED,IAAM,GAAIwD,GAAI,CAAR,CAAW6qB,GAAK,KAAKogB,KAAL,CAAW7uC,MAAjC,CAAyC4D,EAAI6qB,EAA7C,CAAiD7qB,GAAjD,CAAwD,CAEpD,GAAIisC,MAAO,KAAKhB,KAAL,CAAYjrC,CAAZ,CAAX,CACAisC,KAAKtnB,MAAL,CAAYhR,YAAZ,CAA0B6c,YAA1B,EAAyChc,SAAzC,GAEA,IAAM,GAAI8Y,GAAI,CAAR,CAAW4e,GAAKD,KAAKrB,aAAL,CAAmBxuC,MAAzC,CAAiDkxB,EAAI4e,EAArD,CAAyD5e,GAAzD,CAAgE,CAE5D2e,KAAKrB,aAAL,CAAoBtd,CAApB,EAAwB3Z,YAAxB,CAAsC6c,YAAtC,EAAqDhc,SAArD,GAEH,CAEJ,CAED,GAAK,KAAKg3B,WAAL,GAAqB,IAA1B,CAAiC,CAE7B,KAAKW,kBAAL,GAEH,CAED,GAAK,KAAKla,cAAL,GAAwB,IAA7B,CAAoC,CAEhC,KAAKC,qBAAL,GAEH,CAED,KAAKwZ,kBAAL,CAA0B,IAA1B,CACA,KAAKE,iBAAL,CAAyB,IAAzB,CAEA,MAAO,KAAP,CAEH,CA/C2E,CAiD5EpE,QAAS,UAAY,CAEjB;AAEA,GAAIlX,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAAS+xB,QAAT,CAAkBpsC,KAAlB,CAA0B,CAE7Bk1B,GAAG7T,aAAH,CAAkBrhB,KAAlB,EAEA,KAAK4rC,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBQ,EAjDmE,CAmE5EmX,QAAS,UAAY,CAEjB;AAEA,GAAInX,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAASgyB,QAAT,CAAkBrsC,KAAlB,CAA0B,CAE7Bk1B,GAAG5T,aAAH,CAAkBthB,KAAlB,EAEA,KAAK4rC,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBQ,EAnEmE,CAqF5EoX,QAAS,UAAY,CAEjB;AAEA,GAAIpX,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAASiyB,QAAT,CAAkBtsC,KAAlB,CAA0B,CAE7Bk1B,GAAG3T,aAAH,CAAkBvhB,KAAlB,EAEA,KAAK4rC,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBQ,EArFmE,CAuG5ExK,UAAW,UAAY,CAEnB;AAEA,GAAIwK,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAASqQ,UAAT,CAAoB93B,CAApB,CAAuBC,CAAvB,CAA0BC,CAA1B,CAA8B,CAEjCoiC,GAAG9T,eAAH,CAAoBxuB,CAApB,CAAuBC,CAAvB,CAA0BC,CAA1B,EAEA,KAAK84C,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBU,EAvGiE,CAyH5E13B,MAAO,UAAY,CAEf;AAEA,GAAI03B,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAAS7c,MAAT,CAAgB5K,CAAhB,CAAmBC,CAAnB,CAAsBC,CAAtB,CAA0B,CAE7BoiC,GAAGtT,SAAH,CAAchvB,CAAd,CAAiBC,CAAjB,CAAoBC,CAApB,EAEA,KAAK84C,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBM,EAzHqE,CA2I5Ev3B,OAAQ,UAAY,CAEhB,GAAIqzC,KAAM,GAAI/6C,SAAJ,EAAV,CAEA,MAAO,SAAS0H,OAAT,CAAiBulB,MAAjB,CAA0B,CAE7B8tB,IAAIrzC,MAAJ,CAAYulB,MAAZ,EAEA8tB,IAAI/kB,YAAJ,GAEA,KAAK2f,WAAL,CAAkBoF,IAAI5vC,MAAtB,EAEH,CARD,CAUH,CAdO,EA3IoE,CA2J5E6vC,mBAAoB,4BAAWxgB,QAAX,CAAsB,CAEtC,GAAI70B,OAAQ,IAAZ,CAEA,GAAIs1C,SAAUzgB,SAAS1kB,KAAT,GAAmB,IAAnB,CAA0B0kB,SAAS1kB,KAAT,CAAeQ,KAAzC,CAAiDvT,SAA/D,CACA,GAAI63B,YAAaJ,SAASI,UAA1B,CAEA,GAAIsgB,WAAYtgB,WAAWl+B,QAAX,CAAoB4Z,KAApC,CACA,GAAI6kC,SAAUvgB,WAAWtH,MAAX,GAAsBvwB,SAAtB,CAAkC63B,WAAWtH,MAAX,CAAkBhd,KAApD,CAA4DvT,SAA1E,CACA,GAAI42C,QAAS/e,WAAW/7B,KAAX,GAAqBkE,SAArB,CAAiC63B,WAAW/7B,KAAX,CAAiByX,KAAlD,CAA0DvT,SAAvE,CACA,GAAIq4C,KAAMxgB,WAAW1D,EAAX,GAAkBn0B,SAAlB,CAA8B63B,WAAW1D,EAAX,CAAc5gB,KAA5C,CAAoDvT,SAA9D,CACA,GAAIs4C,MAAOzgB,WAAW0gB,GAAX,GAAmBv4C,SAAnB,CAA+B63B,WAAW0gB,GAAX,CAAehlC,KAA9C,CAAsDvT,SAAjE,CAEA,GAAKs4C,OAASt4C,SAAd,CAA0B,KAAK82C,aAAL,CAAoB,CAApB,EAA0B,EAA1B,CAE1B,GAAI0B,aAAc,EAAlB,CACA,GAAIC,SAAU,EAAd,CACA,GAAIC,UAAW,EAAf,CAEA,IAAM,GAAI9sC,GAAI,CAAR,CAAWstB,EAAI,CAArB,CAAwBttB,EAAIusC,UAAUnwC,MAAtC,CAA8C4D,GAAK,CAAL,CAAQstB,GAAK,CAA3D,CAA+D,CAE3Dt2B,MAAM+0B,QAAN,CAAel7B,IAAf,CAAqB,GAAIyD,QAAJ,CAAai4C,UAAWvsC,CAAX,CAAb,CAA6BusC,UAAWvsC,EAAI,CAAf,CAA7B,CAAiDusC,UAAWvsC,EAAI,CAAf,CAAjD,CAArB,EAEA,GAAKwsC,UAAYp4C,SAAjB,CAA6B,CAEzBw4C,YAAY/7C,IAAZ,CAAkB,GAAIyD,QAAJ,CAAak4C,QAASxsC,CAAT,CAAb,CAA2BwsC,QAASxsC,EAAI,CAAb,CAA3B,CAA6CwsC,QAASxsC,EAAI,CAAb,CAA7C,CAAlB,EAEH,CAED,GAAKgrC,SAAW52C,SAAhB,CAA4B,CAExB4C,MAAMg0C,MAAN,CAAan6C,IAAb,CAAmB,GAAIspC,MAAJ,CAAW6Q,OAAQhrC,CAAR,CAAX,CAAwBgrC,OAAQhrC,EAAI,CAAZ,CAAxB,CAAyCgrC,OAAQhrC,EAAI,CAAZ,CAAzC,CAAnB,EAEH,CAED,GAAKysC,MAAQr4C,SAAb,CAAyB,CAErBy4C,QAAQh8C,IAAR,CAAc,GAAI4J,QAAJ,CAAagyC,IAAKnf,CAAL,CAAb,CAAuBmf,IAAKnf,EAAI,CAAT,CAAvB,CAAd,EAEH,CAED,GAAKof,OAASt4C,SAAd,CAA0B,CAEtB04C,SAASj8C,IAAT,CAAe,GAAI4J,QAAJ,CAAaiyC,KAAMpf,CAAN,CAAb,CAAwBof,KAAMpf,EAAI,CAAV,CAAxB,CAAf,EAEH,CAEJ,CAED,QAASyf,QAAT,CAAkBnnC,CAAlB,CAAqBX,CAArB,CAAwBuQ,CAAxB,CAA2Bm1B,aAA3B,CAA2C,CAEvC,GAAIC,eAAgB4B,UAAYp4C,SAAZ,CAAwB,CAAEw4C,YAAahnC,CAAb,EAAiB9U,KAAjB,EAAF,CAA4B87C,YAAa3nC,CAAb,EAAiBnU,KAAjB,EAA5B,CAAsD87C,YAAap3B,CAAb,EAAiB1kB,KAAjB,EAAtD,CAAxB,CAA2G,EAA/H,CACA,GAAI+5C,cAAeG,SAAW52C,SAAX,CAAuB,CAAE4C,MAAMg0C,MAAN,CAAcplC,CAAd,EAAkB9U,KAAlB,EAAF,CAA6BkG,MAAMg0C,MAAN,CAAc/lC,CAAd,EAAkBnU,KAAlB,EAA7B,CAAwDkG,MAAMg0C,MAAN,CAAcx1B,CAAd,EAAkB1kB,KAAlB,EAAxD,CAAvB,CAA6G,EAAhI,CAEA,GAAIm7C,MAAO,GAAIvB,MAAJ,CAAW9kC,CAAX,CAAcX,CAAd,CAAiBuQ,CAAjB,CAAoBo1B,aAApB,CAAmCC,YAAnC,CAAiDF,aAAjD,CAAX,CAEA3zC,MAAMi0C,KAAN,CAAYp6C,IAAZ,CAAkBo7C,IAAlB,EAEA,GAAKQ,MAAQr4C,SAAb,CAAyB,CAErB4C,MAAMk0C,aAAN,CAAqB,CAArB,EAAyBr6C,IAAzB,CAA+B,CAAEg8C,QAASjnC,CAAT,EAAa9U,KAAb,EAAF,CAAwB+7C,QAAS5nC,CAAT,EAAanU,KAAb,EAAxB,CAA8C+7C,QAASr3B,CAAT,EAAa1kB,KAAb,EAA9C,CAA/B,EAEH,CAED,GAAK47C,OAASt4C,SAAd,CAA0B,CAEtB4C,MAAMk0C,aAAN,CAAqB,CAArB,EAAyBr6C,IAAzB,CAA+B,CAAEi8C,SAAUlnC,CAAV,EAAc9U,KAAd,EAAF,CAAyBg8C,SAAU7nC,CAAV,EAAcnU,KAAd,EAAzB,CAAgDg8C,SAAUt3B,CAAV,EAAc1kB,KAAd,EAAhD,CAA/B,EAEH,CAEJ,CAED,GAAIk8C,QAASnhB,SAASmhB,MAAtB,CAEA,GAAKA,OAAO5wC,MAAP,CAAgB,CAArB,CAAyB,CAErB,IAAM,GAAI4D,GAAI,CAAd,CAAiBA,EAAIgtC,OAAO5wC,MAA5B,CAAoC4D,GAApC,CAA2C,CAEvC,GAAIitC,OAAQD,OAAQhtC,CAAR,CAAZ,CAEA,GAAIrM,OAAQs5C,MAAMt5C,KAAlB,CACA,GAAIynB,OAAQ6xB,MAAM7xB,KAAlB,CAEA,IAAM,GAAIkS,GAAI35B,KAAR,CAAeu4C,GAAKv4C,MAAQynB,KAAlC,CAAyCkS,EAAI4e,EAA7C,CAAiD5e,GAAK,CAAtD,CAA0D,CAEtD,GAAKgf,UAAYl4C,SAAjB,CAA6B,CAEzB24C,QAAST,QAAShf,CAAT,CAAT,CAAuBgf,QAAShf,EAAI,CAAb,CAAvB,CAAyCgf,QAAShf,EAAI,CAAb,CAAzC,CAA2D2f,MAAMtC,aAAjE,EAEH,CAJD,IAIO,CAEHoC,QAASzf,CAAT,CAAYA,EAAI,CAAhB,CAAmBA,EAAI,CAAvB,CAA0B2f,MAAMtC,aAAhC,EAEH,CAEJ,CAEJ,CAEJ,CAzBD,IAyBO,CAEH,GAAK2B,UAAYl4C,SAAjB,CAA6B,CAEzB,IAAM,GAAI4L,GAAI,CAAd,CAAiBA,EAAIssC,QAAQlwC,MAA7B,CAAqC4D,GAAK,CAA1C,CAA8C,CAE1C+sC,QAAST,QAAStsC,CAAT,CAAT,CAAuBssC,QAAStsC,EAAI,CAAb,CAAvB,CAAyCssC,QAAStsC,EAAI,CAAb,CAAzC,EAEH,CAEJ,CARD,IAQO,CAEH,IAAM,GAAIA,GAAI,CAAd,CAAiBA,EAAIusC,UAAUnwC,MAAV,CAAmB,CAAxC,CAA2C4D,GAAK,CAAhD,CAAoD,CAEhD+sC,QAAS/sC,CAAT,CAAYA,EAAI,CAAhB,CAAmBA,EAAI,CAAvB,EAEH,CAEJ,CAEJ,CAED,KAAKktC,kBAAL,GAEA,GAAKrhB,SAAS2f,WAAT,GAAyB,IAA9B,CAAqC,CAEjC,KAAKA,WAAL,CAAmB3f,SAAS2f,WAAT,CAAqB16C,KAArB,EAAnB,CAEH,CAED,GAAK+6B,SAASoG,cAAT,GAA4B,IAAjC,CAAwC,CAEpC,KAAKA,cAAL,CAAsBpG,SAASoG,cAAT,CAAwBnhC,KAAxB,EAAtB,CAEH,CAED,MAAO,KAAP,CAEH,CApS2E,CAsS5EqO,OAAQ,UAAY,CAEhB,GAAI1H,QAAS,GAAInD,QAAJ,EAAb,CAEA,MAAO,SAAS6K,OAAT,EAAkB,CAErB,KAAKgtC,kBAAL,GAEA,KAAKX,WAAL,CAAiBlgB,SAAjB,CAA4B7zB,MAA5B,EAAqC2c,MAArC,GAEA,KAAK0R,SAAL,CAAgBruB,OAAOzJ,CAAvB,CAA0ByJ,OAAOxJ,CAAjC,CAAoCwJ,OAAOvJ,CAA3C,EAEA,MAAO,KAAP,CAEH,CAVD,CAYH,CAhBO,EAtSoE,CAwT5EsmB,UAAW,oBAAY,CAEnB,KAAK0d,qBAAL,GAEA,GAAI/yB,QAAS,KAAK8yB,cAAL,CAAoB9yB,MAAjC,CACA,GAAIxG,QAAS,KAAKs5B,cAAL,CAAoBt5B,MAAjC,CAEA,GAAI8L,GAAI9L,SAAW,CAAX,CAAe,CAAf,CAAmB,IAAMA,MAAjC,CAEA,GAAI6D,QAAS,GAAIiZ,QAAJ,EAAb,CACAjZ,OAAO3N,GAAP,CACI4V,CADJ,CACO,CADP,CACU,CADV,CACa,CAAEA,CAAF,CAAMtF,OAAOnR,CAD1B,CAEI,CAFJ,CAEOyW,CAFP,CAEU,CAFV,CAEa,CAAEA,CAAF,CAAMtF,OAAOlR,CAF1B,CAGI,CAHJ,CAGO,CAHP,CAGUwW,CAHV,CAGa,CAAEA,CAAF,CAAMtF,OAAOjR,CAH1B,CAII,CAJJ,CAIO,CAJP,CAIU,CAJV,CAIa,CAJb,EAOA,KAAK84C,WAAL,CAAkBxqC,MAAlB,EAEA,MAAO,KAAP,CAEH,CA7U2E,CA+U5E0wC,mBAAoB,6BAAY,CAE5B,GAAIC,IAAK,GAAI74C,QAAJ,EAAT,CAAwB84C,GAAK,GAAI94C,QAAJ,EAA7B,CAEA,IAAM,GAAIsQ,GAAI,CAAR,CAAWyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAAjC,CAAyCwI,EAAIyoC,EAA7C,CAAiDzoC,GAAjD,CAAwD,CAEpD,GAAIqnC,MAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAX,CAEA,GAAI0oC,IAAK,KAAKvhB,QAAL,CAAekgB,KAAKrmC,CAApB,CAAT,CACA,GAAI2nC,IAAK,KAAKxhB,QAAL,CAAekgB,KAAKhnC,CAApB,CAAT,CACA,GAAIuoC,IAAK,KAAKzhB,QAAL,CAAekgB,KAAKz2B,CAApB,CAAT,CAEA23B,GAAG7vC,UAAH,CAAekwC,EAAf,CAAmBD,EAAnB,EACAH,GAAG9vC,UAAH,CAAegwC,EAAf,CAAmBC,EAAnB,EACAJ,GAAGnpB,KAAH,CAAUopB,EAAV,EAEAD,GAAG34B,SAAH,GAEAy3B,KAAKtnB,MAAL,CAAY1tB,IAAZ,CAAkBk2C,EAAlB,EAEH,CAEJ,CArW2E,CAuW5EM,qBAAsB,8BAAWC,YAAX,CAA0B,CAE5C,GAAKA,eAAiBt5C,SAAtB,CAAkCs5C,aAAe,IAAf,CAElC,GAAInyC,EAAJ,CAAOoyC,EAAP,CAAW/oC,CAAX,CAAcyoC,EAAd,CAAkBpB,IAAlB,CAAwBlgB,QAAxB,CAEAA,SAAW,GAAI3pB,MAAJ,CAAW,KAAK2pB,QAAL,CAAc3vB,MAAzB,CAAX,CAEA,IAAMb,EAAI,CAAJ,CAAOoyC,GAAK,KAAK5hB,QAAL,CAAc3vB,MAAhC,CAAwCb,EAAIoyC,EAA5C,CAAgDpyC,GAAhD,CAAuD,CAEnDwwB,SAAUxwB,CAAV,EAAgB,GAAIjH,QAAJ,EAAhB,CAEH,CAED,GAAKo5C,YAAL,CAAoB,CAEhB;AACA;AAEA,GAAIJ,GAAJ,CAAQC,EAAR,CAAYC,EAAZ,CACA,GAAIL,IAAK,GAAI74C,QAAJ,EAAT,CAAwB84C,GAAK,GAAI94C,QAAJ,EAA7B,CAEA,IAAMsQ,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDqnC,KAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAP,CAEA0oC,GAAK,KAAKvhB,QAAL,CAAekgB,KAAKrmC,CAApB,CAAL,CACA2nC,GAAK,KAAKxhB,QAAL,CAAekgB,KAAKhnC,CAApB,CAAL,CACAuoC,GAAK,KAAKzhB,QAAL,CAAekgB,KAAKz2B,CAApB,CAAL,CAEA23B,GAAG7vC,UAAH,CAAekwC,EAAf,CAAmBD,EAAnB,EACAH,GAAG9vC,UAAH,CAAegwC,EAAf,CAAmBC,EAAnB,EACAJ,GAAGnpB,KAAH,CAAUopB,EAAV,EAEArhB,SAAUkgB,KAAKrmC,CAAf,EAAmBpW,GAAnB,CAAwB29C,EAAxB,EACAphB,SAAUkgB,KAAKhnC,CAAf,EAAmBzV,GAAnB,CAAwB29C,EAAxB,EACAphB,SAAUkgB,KAAKz2B,CAAf,EAAmBhmB,GAAnB,CAAwB29C,EAAxB,EAEH,CAEJ,CA1BD,IA0BO,CAEH,KAAKD,kBAAL,GAEA,IAAMtoC,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDqnC,KAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAP,CAEAmnB,SAAUkgB,KAAKrmC,CAAf,EAAmBpW,GAAnB,CAAwBy8C,KAAKtnB,MAA7B,EACAoH,SAAUkgB,KAAKhnC,CAAf,EAAmBzV,GAAnB,CAAwBy8C,KAAKtnB,MAA7B,EACAoH,SAAUkgB,KAAKz2B,CAAf,EAAmBhmB,GAAnB,CAAwBy8C,KAAKtnB,MAA7B,EAEH,CAEJ,CAED,IAAMppB,EAAI,CAAJ,CAAOoyC,GAAK,KAAK5hB,QAAL,CAAc3vB,MAAhC,CAAwCb,EAAIoyC,EAA5C,CAAgDpyC,GAAhD,CAAuD,CAEnDwwB,SAAUxwB,CAAV,EAAciZ,SAAd,GAEH,CAED,IAAM5P,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDqnC,KAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAP,CAEA,GAAIgmC,eAAgBqB,KAAKrB,aAAzB,CAEA,GAAKA,cAAcxuC,MAAd,GAAyB,CAA9B,CAAkC,CAE9BwuC,cAAe,CAAf,EAAmB3zC,IAAnB,CAAyB80B,SAAUkgB,KAAKrmC,CAAf,CAAzB,EACAglC,cAAe,CAAf,EAAmB3zC,IAAnB,CAAyB80B,SAAUkgB,KAAKhnC,CAAf,CAAzB,EACA2lC,cAAe,CAAf,EAAmB3zC,IAAnB,CAAyB80B,SAAUkgB,KAAKz2B,CAAf,CAAzB,EAEH,CAND,IAMO,CAEHo1B,cAAe,CAAf,EAAqB7e,SAAUkgB,KAAKrmC,CAAf,EAAmB9U,KAAnB,EAArB,CACA85C,cAAe,CAAf,EAAqB7e,SAAUkgB,KAAKhnC,CAAf,EAAmBnU,KAAnB,EAArB,CACA85C,cAAe,CAAf,EAAqB7e,SAAUkgB,KAAKz2B,CAAf,EAAmB1kB,KAAnB,EAArB,CAEH,CAEJ,CAED,GAAK,KAAKm6C,KAAL,CAAW7uC,MAAX,CAAoB,CAAzB,CAA6B,CAEzB,KAAKwvC,iBAAL,CAAyB,IAAzB,CAEH,CAEJ,CAjc2E,CAmc5EgC,yBAA0B,mCAAY,CAElC,GAAIhpC,EAAJ,CAAOyoC,EAAP,CAAWpB,IAAX,CAEA,KAAKiB,kBAAL,GAEA,IAAMtoC,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDqnC,KAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAP,CAEA,GAAIgmC,eAAgBqB,KAAKrB,aAAzB,CAEA,GAAKA,cAAcxuC,MAAd,GAAyB,CAA9B,CAAkC,CAE9BwuC,cAAe,CAAf,EAAmB3zC,IAAnB,CAAyBg1C,KAAKtnB,MAA9B,EACAimB,cAAe,CAAf,EAAmB3zC,IAAnB,CAAyBg1C,KAAKtnB,MAA9B,EACAimB,cAAe,CAAf,EAAmB3zC,IAAnB,CAAyBg1C,KAAKtnB,MAA9B,EAEH,CAND,IAMO,CAEHimB,cAAe,CAAf,EAAqBqB,KAAKtnB,MAAL,CAAY7zB,KAAZ,EAArB,CACA85C,cAAe,CAAf,EAAqBqB,KAAKtnB,MAAL,CAAY7zB,KAAZ,EAArB,CACA85C,cAAe,CAAf,EAAqBqB,KAAKtnB,MAAL,CAAY7zB,KAAZ,EAArB,CAEH,CAEJ,CAED,GAAK,KAAKm6C,KAAL,CAAW7uC,MAAX,CAAoB,CAAzB,CAA6B,CAEzB,KAAKwvC,iBAAL,CAAyB,IAAzB,CAEH,CAEJ,CAre2E,CAue5EiC,oBAAqB,8BAAY,CAE7B,GAAI7tC,EAAJ,CAAO6qB,EAAP,CAAWjmB,CAAX,CAAcyoC,EAAd,CAAkBpB,IAAlB,CAEA;AACA;AACA;AAEA,IAAMrnC,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDqnC,KAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAP,CAEA,GAAK,CAAEqnC,KAAK6B,oBAAZ,CAAmC,CAE/B7B,KAAK6B,oBAAL,CAA4B7B,KAAKtnB,MAAL,CAAY7zB,KAAZ,EAA5B,CAEH,CAJD,IAIO,CAEHm7C,KAAK6B,oBAAL,CAA0B72C,IAA1B,CAAgCg1C,KAAKtnB,MAArC,EAEH,CAED,GAAK,CAAEsnB,KAAK8B,uBAAZ,CAAsC9B,KAAK8B,uBAAL,CAA+B,EAA/B,CAEtC,IAAM/tC,EAAI,CAAJ,CAAO6qB,GAAKohB,KAAKrB,aAAL,CAAmBxuC,MAArC,CAA6C4D,EAAI6qB,EAAjD,CAAqD7qB,GAArD,CAA4D,CAExD,GAAK,CAAEisC,KAAK8B,uBAAL,CAA8B/tC,CAA9B,CAAP,CAA2C,CAEvCisC,KAAK8B,uBAAL,CAA8B/tC,CAA9B,EAAoCisC,KAAKrB,aAAL,CAAoB5qC,CAApB,EAAwBlP,KAAxB,EAApC,CAEH,CAJD,IAIO,CAEHm7C,KAAK8B,uBAAL,CAA8B/tC,CAA9B,EAAkC/I,IAAlC,CAAwCg1C,KAAKrB,aAAL,CAAoB5qC,CAApB,CAAxC,EAEH,CAEJ,CAEJ,CAED;AAEA,GAAIguC,QAAS,GAAIjD,SAAJ,EAAb,CACAiD,OAAO/C,KAAP,CAAe,KAAKA,KAApB,CAEA,IAAMjrC,EAAI,CAAJ,CAAO6qB,GAAK,KAAKsgB,YAAL,CAAkB/uC,MAApC,CAA4C4D,EAAI6qB,EAAhD,CAAoD7qB,GAApD,CAA2D,CAEvD;AAEA,GAAK,CAAE,KAAKorC,YAAL,CAAmBprC,CAAnB,CAAP,CAAgC,CAE5B,KAAKorC,YAAL,CAAmBprC,CAAnB,EAAyB,EAAzB,CACA,KAAKorC,YAAL,CAAmBprC,CAAnB,EAAuBiuC,WAAvB,CAAqC,EAArC,CACA,KAAK7C,YAAL,CAAmBprC,CAAnB,EAAuB4qC,aAAvB,CAAuC,EAAvC,CAEA,GAAIsD,gBAAiB,KAAK9C,YAAL,CAAmBprC,CAAnB,EAAuBiuC,WAA5C,CACA,GAAIE,kBAAmB,KAAK/C,YAAL,CAAmBprC,CAAnB,EAAuB4qC,aAA9C,CAEA,GAAIwD,WAAJ,CAAgBxD,aAAhB,CAEA,IAAMhmC,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDwpC,WAAa,GAAI95C,QAAJ,EAAb,CACAs2C,cAAgB,CAAEhlC,EAAG,GAAItR,QAAJ,EAAL,CAAoB2Q,EAAG,GAAI3Q,QAAJ,EAAvB,CAAsCkhB,EAAG,GAAIlhB,QAAJ,EAAzC,CAAhB,CAEA45C,eAAer9C,IAAf,CAAqBu9C,UAArB,EACAD,iBAAiBt9C,IAAjB,CAAuB+5C,aAAvB,EAEH,CAEJ,CAED,GAAIQ,cAAe,KAAKA,YAAL,CAAmBprC,CAAnB,CAAnB,CAEA;AAEAguC,OAAOjiB,QAAP,CAAkB,KAAKof,YAAL,CAAmBnrC,CAAnB,EAAuB+rB,QAAzC,CAEA;AAEAiiB,OAAOd,kBAAP,GACAc,OAAOP,oBAAP,GAEA;AAEA,GAAIW,WAAJ,CAAgBxD,aAAhB,CAEA,IAAMhmC,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDqnC,KAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAP,CAEAwpC,WAAahD,aAAa6C,WAAb,CAA0BrpC,CAA1B,CAAb,CACAgmC,cAAgBQ,aAAaR,aAAb,CAA4BhmC,CAA5B,CAAhB,CAEAwpC,WAAWn3C,IAAX,CAAiBg1C,KAAKtnB,MAAtB,EAEAimB,cAAchlC,CAAd,CAAgB3O,IAAhB,CAAsBg1C,KAAKrB,aAAL,CAAoB,CAApB,CAAtB,EACAA,cAAc3lC,CAAd,CAAgBhO,IAAhB,CAAsBg1C,KAAKrB,aAAL,CAAoB,CAApB,CAAtB,EACAA,cAAcp1B,CAAd,CAAgBve,IAAhB,CAAsBg1C,KAAKrB,aAAL,CAAoB,CAApB,CAAtB,EAEH,CAEJ,CAED;AAEA,IAAMhmC,EAAI,CAAJ,CAAOyoC,GAAK,KAAKpC,KAAL,CAAW7uC,MAA7B,CAAqCwI,EAAIyoC,EAAzC,CAA6CzoC,GAA7C,CAAoD,CAEhDqnC,KAAO,KAAKhB,KAAL,CAAYrmC,CAAZ,CAAP,CAEAqnC,KAAKtnB,MAAL,CAAcsnB,KAAK6B,oBAAnB,CACA7B,KAAKrB,aAAL,CAAqBqB,KAAK8B,uBAA1B,CAEH,CAEJ,CA1lB2E,CA4lB5E5B,mBAAoB,6BAAY,CAE5B,GAAK,KAAKX,WAAL,GAAqB,IAA1B,CAAiC,CAE7B,KAAKA,WAAL,CAAmB,GAAIxhB,KAAJ,EAAnB,CAEH,CAED,KAAKwhB,WAAL,CAAiB9gB,aAAjB,CAAgC,KAAKqB,QAArC,EAEH,CAtmB2E,CAwmB5EmG,sBAAuB,gCAAY,CAE/B,GAAK,KAAKD,cAAL,GAAwB,IAA7B,CAAoC,CAEhC,KAAKA,cAAL,CAAsB,GAAItE,OAAJ,EAAtB,CAEH,CAED,KAAKsE,cAAL,CAAoBvH,aAApB,CAAmC,KAAKqB,QAAxC,EAEH,CAlnB2E,CAonB5E0N,MAAO,eAAW5N,QAAX,CAAqBrvB,MAArB,CAA6B6xC,mBAA7B,CAAmD,CAEtD,GAAK,EAAIxiB,UAAYA,SAASC,UAAzB,CAAL,CAA6C,CAEzCn5B,QAAQ+iB,KAAR,CAAe,qEAAf,CAAsFmW,QAAtF,EACA,OAEH,CAED,GAAI2E,aAAJ,CACI8d,aAAe,KAAKviB,QAAL,CAAc3vB,MADjC,CAEImyC,UAAY,KAAKxiB,QAFrB,CAGIyiB,UAAY3iB,SAASE,QAHzB,CAII0iB,OAAS,KAAKxD,KAJlB,CAKIyD,OAAS7iB,SAASof,KALtB,CAMI0D,KAAO,KAAKzD,aAAL,CAAoB,CAApB,CANX,CAOIwB,KAAO7gB,SAASqf,aAAT,CAAwB,CAAxB,CAPX,CAQI0D,QAAU,KAAK5D,MARnB,CASI6D,QAAUhjB,SAASmf,MATvB,CAWA,GAAKqD,sBAAwBj6C,SAA7B,CAAyCi6C,oBAAsB,CAAtB,CAEzC,GAAK7xC,SAAWpI,SAAhB,CAA4B,CAExBo8B,aAAe,GAAIrL,QAAJ,GAAcI,eAAd,CAA+B/oB,MAA/B,CAAf,CAEH,CAED;AAEA,IAAM,GAAIwD,GAAI,CAAR,CAAW6qB,GAAK2jB,UAAUpyC,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnD,GAAIgsC,QAASwC,UAAWxuC,CAAX,CAAb,CAEA,GAAI8uC,YAAa9C,OAAOl7C,KAAP,EAAjB,CAEA,GAAK0L,SAAWpI,SAAhB,CAA4B06C,WAAWxzB,YAAX,CAAyB9e,MAAzB,EAE5B+xC,UAAU19C,IAAV,CAAgBi+C,UAAhB,EAEH,CAED;AAEA,IAAM,GAAI9uC,GAAI,CAAR,CAAW6qB,GAAKgkB,QAAQzyC,MAA9B,CAAsC4D,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjD4uC,QAAQ/9C,IAAR,CAAcg+C,QAAS7uC,CAAT,EAAalP,KAAb,EAAd,EAEH,CAED;AAEA,IAAMkP,EAAI,CAAJ,CAAO6qB,GAAK6jB,OAAOtyC,MAAzB,CAAiC4D,EAAI6qB,EAArC,CAAyC7qB,GAAzC,CAAgD,CAE5C,GAAIisC,MAAOyC,OAAQ1uC,CAAR,CAAX,CAAwB+uC,QAAxB,CAAkCpqB,MAAlC,CAA0Cz0B,KAA1C,CACI8+C,kBAAoB/C,KAAKrB,aAD7B,CAEIqE,iBAAmBhD,KAAKpB,YAF5B,CAIAkE,SAAW,GAAIrE,MAAJ,CAAWuB,KAAKrmC,CAAL,CAAS0oC,YAApB,CAAkCrC,KAAKhnC,CAAL,CAASqpC,YAA3C,CAAyDrC,KAAKz2B,CAAL,CAAS84B,YAAlE,CAAX,CACAS,SAASpqB,MAAT,CAAgB1tB,IAAhB,CAAsBg1C,KAAKtnB,MAA3B,EAEA,GAAK6L,eAAiBp8B,SAAtB,CAAkC,CAE9B26C,SAASpqB,MAAT,CAAgBhR,YAAhB,CAA8B6c,YAA9B,EAA6Chc,SAA7C,GAEH,CAED,IAAM,GAAI8Y,GAAI,CAAR,CAAW4e,GAAK8C,kBAAkB5yC,MAAxC,CAAgDkxB,EAAI4e,EAApD,CAAwD5e,GAAxD,CAA+D,CAE3D3I,OAASqqB,kBAAmB1hB,CAAnB,EAAuBx8B,KAAvB,EAAT,CAEA,GAAK0/B,eAAiBp8B,SAAtB,CAAkC,CAE9BuwB,OAAOhR,YAAP,CAAqB6c,YAArB,EAAoChc,SAApC,GAEH,CAEDu6B,SAASnE,aAAT,CAAuB/5C,IAAvB,CAA6B8zB,MAA7B,EAEH,CAEDoqB,SAAS7+C,KAAT,CAAe+G,IAAf,CAAqBg1C,KAAK/7C,KAA1B,EAEA,IAAM,GAAIo9B,GAAI,CAAR,CAAW4e,GAAK+C,iBAAiB7yC,MAAvC,CAA+CkxB,EAAI4e,EAAnD,CAAuD5e,GAAvD,CAA8D,CAE1Dp9B,MAAQ++C,iBAAkB3hB,CAAlB,CAAR,CACAyhB,SAASlE,YAAT,CAAsBh6C,IAAtB,CAA4BX,MAAMY,KAAN,EAA5B,EAEH,CAEDi+C,SAASpE,aAAT,CAAyBsB,KAAKtB,aAAL,CAAqB0D,mBAA9C,CAEAI,OAAO59C,IAAP,CAAak+C,QAAb,EAEH,CAED;AAEA,IAAM/uC,EAAI,CAAJ,CAAO6qB,GAAK6hB,KAAKtwC,MAAvB,CAA+B4D,EAAI6qB,EAAnC,CAAuC7qB,GAAvC,CAA8C,CAE1C,GAAIuoB,IAAKmkB,KAAM1sC,CAAN,CAAT,CAAoBkvC,OAAS,EAA7B,CAEA,GAAK3mB,KAAOn0B,SAAZ,CAAwB,CAEpB,SAEH,CAED,IAAM,GAAIk5B,GAAI,CAAR,CAAW4e,GAAK3jB,GAAGnsB,MAAzB,CAAiCkxB,EAAI4e,EAArC,CAAyC5e,GAAzC,CAAgD,CAE5C4hB,OAAOr+C,IAAP,CAAa03B,GAAI+E,CAAJ,EAAQx8B,KAAR,EAAb,EAEH,CAED69C,KAAK99C,IAAL,CAAWq+C,MAAX,EAEH,CAEJ,CA1uB2E,CA4uB5EC,UAAW,mBAAWC,IAAX,CAAkB,CAEzB,GAAK,EAAIA,MAAQA,KAAKC,MAAjB,CAAL,CAAiC,CAE7B18C,QAAQ+iB,KAAR,CAAe,iEAAf,CAAkF05B,IAAlF,EACA,OAEH,CAED,GAAKA,KAAKtoB,gBAAV,CAA6BsoB,KAAK/nB,YAAL,GAE7B,KAAKoS,KAAL,CAAY2V,KAAKvjB,QAAjB,CAA2BujB,KAAK5yC,MAAhC,EAEH,CAzvB2E,CA2vB5E;;;;KAMA8yC,cAAe,wBAAY,CAEvB,GAAIC,aAAc,EAAlB,CAAsB;AACtB,GAAIC,QAAS,EAAb,CAAiBC,QAAU,EAA3B,CAEA,GAAIl0C,EAAJ,CAAOkuC,GAAP,CACA,GAAIiG,iBAAkB,CAAtB,CAAyB;AACzB,GAAIC,WAAYj+C,KAAKyJ,GAAL,CAAU,EAAV,CAAcu0C,eAAd,CAAhB,CACA,GAAI1vC,EAAJ,CAAO6qB,EAAP,CAAWohB,IAAX,CACA,GAAIK,QAAJ,CAAahf,CAAb,CAAgB4e,EAAhB,CAEA,IAAMlsC,EAAI,CAAJ,CAAO6qB,GAAK,KAAKkB,QAAL,CAAc3vB,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnDzE,EAAI,KAAKwwB,QAAL,CAAe/rB,CAAf,CAAJ,CACAypC,IAAM/3C,KAAKwiB,KAAL,CAAY3Y,EAAEvN,CAAF,CAAM2hD,SAAlB,EAAgC,GAAhC,CAAsCj+C,KAAKwiB,KAAL,CAAY3Y,EAAEtN,CAAF,CAAM0hD,SAAlB,CAAtC,CAAsE,GAAtE,CAA4Ej+C,KAAKwiB,KAAL,CAAY3Y,EAAErN,CAAF,CAAMyhD,SAAlB,CAAlF,CAEA,GAAKJ,YAAa9F,GAAb,IAAuBr1C,SAA5B,CAAwC,CAEpCm7C,YAAa9F,GAAb,EAAqBzpC,CAArB,CACAwvC,OAAO3+C,IAAP,CAAa,KAAKk7B,QAAL,CAAe/rB,CAAf,CAAb,EACAyvC,QAASzvC,CAAT,EAAewvC,OAAOpzC,MAAP,CAAgB,CAA/B,CAEH,CAND,IAMO,CAEH;AACAqzC,QAASzvC,CAAT,EAAeyvC,QAASF,YAAa9F,GAAb,CAAT,CAAf,CAEH,CAEJ,CAGD;AACA;AACA,GAAImG,qBAAsB,EAA1B,CAEA,IAAM5vC,EAAI,CAAJ,CAAO6qB,GAAK,KAAKogB,KAAL,CAAW7uC,MAA7B,CAAqC4D,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhDisC,KAAO,KAAKhB,KAAL,CAAYjrC,CAAZ,CAAP,CAEAisC,KAAKrmC,CAAL,CAAS6pC,QAASxD,KAAKrmC,CAAd,CAAT,CACAqmC,KAAKhnC,CAAL,CAASwqC,QAASxD,KAAKhnC,CAAd,CAAT,CACAgnC,KAAKz2B,CAAL,CAASi6B,QAASxD,KAAKz2B,CAAd,CAAT,CAEA82B,QAAU,CAAEL,KAAKrmC,CAAP,CAAUqmC,KAAKhnC,CAAf,CAAkBgnC,KAAKz2B,CAAvB,CAAV,CAEA;AACA;AACA,IAAM,GAAItQ,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAKonC,QAASpnC,CAAT,IAAiBonC,QAAS,CAAEpnC,EAAI,CAAN,EAAY,CAArB,CAAtB,CAAiD,CAE7C0qC,oBAAoB/+C,IAApB,CAA0BmP,CAA1B,EACA,MAEH,CAEJ,CAEJ,CAED,IAAMA,EAAI4vC,oBAAoBxzC,MAApB,CAA6B,CAAvC,CAA0C4D,GAAK,CAA/C,CAAkDA,GAAlD,CAAyD,CAErD,GAAI6vC,KAAMD,oBAAqB5vC,CAArB,CAAV,CAEA,KAAKirC,KAAL,CAAW/qC,MAAX,CAAmB2vC,GAAnB,CAAwB,CAAxB,EAEA,IAAMviB,EAAI,CAAJ,CAAO4e,GAAK,KAAKhB,aAAL,CAAmB9uC,MAArC,CAA6CkxB,EAAI4e,EAAjD,CAAqD5e,GAArD,CAA4D,CAExD,KAAK4d,aAAL,CAAoB5d,CAApB,EAAwBptB,MAAxB,CAAgC2vC,GAAhC,CAAqC,CAArC,EAEH,CAEJ,CAED;AAEA,GAAIC,MAAO,KAAK/jB,QAAL,CAAc3vB,MAAd,CAAuBozC,OAAOpzC,MAAzC,CACA,KAAK2vB,QAAL,CAAgByjB,MAAhB,CACA,MAAOM,KAAP,CAEH,CAl1B2E,CAo1B5EplB,cAAe,uBAAWC,MAAX,CAAoB,CAE/B,KAAKoB,QAAL,CAAgB,EAAhB,CAEA,IAAM,GAAI/rB,GAAI,CAAR,CAAW6H,EAAI8iB,OAAOvuB,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAIwrB,OAAQb,OAAQ3qB,CAAR,CAAZ,CACA,KAAK+rB,QAAL,CAAcl7B,IAAd,CAAoB,GAAIyD,QAAJ,CAAak3B,MAAMx9B,CAAnB,CAAsBw9B,MAAMv9B,CAA5B,CAA+Bu9B,MAAMt9B,CAAN,EAAW,CAA1C,CAApB,EAEH,CAED,MAAO,KAAP,CAEH,CAj2B2E,CAm2B5E6hD,yBAA0B,mCAAY,CAElC,GAAI9E,OAAQ,KAAKA,KAAjB,CACA,GAAI7uC,QAAS6uC,MAAM7uC,MAAnB,CAEA;AAEA,IAAM,GAAI4D,GAAI,CAAd,CAAiBA,EAAI5D,MAArB,CAA6B4D,GAA7B,CAAoC,CAEhCirC,MAAOjrC,CAAP,EAAWgwC,GAAX,CAAiBhwC,CAAjB,CAEH,CAED;AAEA,QAASiwC,kBAAT,CAA4BrqC,CAA5B,CAA+BX,CAA/B,CAAmC,CAE/B,MAAOW,GAAE+kC,aAAF,CAAkB1lC,EAAE0lC,aAA3B,CAEH,CAEDM,MAAMiF,IAAN,CAAYD,iBAAZ,EAEA;AAEA,GAAItB,MAAO,KAAKzD,aAAL,CAAoB,CAApB,CAAX,CACA,GAAIwB,MAAO,KAAKxB,aAAL,CAAoB,CAApB,CAAX,CAEA,GAAIiF,QAAJ,CAAaC,OAAb,CAEA,GAAKzB,MAAQA,KAAKvyC,MAAL,GAAgBA,MAA7B,CAAsC+zC,QAAU,EAAV,CACtC,GAAKzD,MAAQA,KAAKtwC,MAAL,GAAgBA,MAA7B,CAAsCg0C,QAAU,EAAV,CAEtC,IAAM,GAAIpwC,GAAI,CAAd,CAAiBA,EAAI5D,MAArB,CAA6B4D,GAA7B,CAAoC,CAEhC,GAAIxT,IAAKy+C,MAAOjrC,CAAP,EAAWgwC,GAApB,CAEA,GAAKG,OAAL,CAAeA,QAAQt/C,IAAR,CAAc89C,KAAMniD,EAAN,CAAd,EACf,GAAK4jD,OAAL,CAAeA,QAAQv/C,IAAR,CAAc67C,KAAMlgD,EAAN,CAAd,EAElB,CAED,GAAK2jD,OAAL,CAAe,KAAKjF,aAAL,CAAoB,CAApB,EAA0BiF,OAA1B,CACf,GAAKC,OAAL,CAAe,KAAKlF,aAAL,CAAoB,CAApB,EAA0BkF,OAA1B,CAElB,CAh5B2E,CAk5B5E9oB,OAAQ,iBAAY,CAEhB,GAAI90B,MAAO,CACPy1B,SAAU,CACNd,QAAS,GADH,CAENptB,KAAM,UAFA,CAGNmuB,UAAW,iBAHL,CADH,CAAX,CAQA;AAEA11B,KAAKwe,IAAL,CAAY,KAAKA,IAAjB,CACAxe,KAAKuH,IAAL,CAAY,KAAKA,IAAjB,CACA,GAAK,KAAK2sB,IAAL,GAAc,EAAnB,CAAwBl0B,KAAKk0B,IAAL,CAAY,KAAKA,IAAjB,CAExB,GAAK,KAAKwiB,UAAL,GAAoB90C,SAAzB,CAAqC,CAEjC,GAAI80C,YAAa,KAAKA,UAAtB,CAEA,IAAM,GAAIO,IAAV,GAAiBP,WAAjB,CAA8B,CAE1B,GAAKA,WAAYO,GAAZ,IAAsBr1C,SAA3B,CAAuC5B,KAAMi3C,GAAN,EAAcP,WAAYO,GAAZ,CAAd,CAE1C,CAED,MAAOj3C,KAAP,CAEH,CAED,GAAIu5B,UAAW,EAAf,CAEA,IAAM,GAAI/rB,GAAI,CAAd,CAAiBA,EAAI,KAAK+rB,QAAL,CAAc3vB,MAAnC,CAA2C4D,GAA3C,CAAkD,CAE9C,GAAIgsC,QAAS,KAAKjgB,QAAL,CAAe/rB,CAAf,CAAb,CACA+rB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEH,CAED,GAAI+8C,OAAQ,EAAZ,CACA,GAAIuB,SAAU,EAAd,CACA,GAAI6D,aAAc,EAAlB,CACA,GAAIrF,QAAS,EAAb,CACA,GAAIsF,YAAa,EAAjB,CACA,GAAI7D,KAAM,EAAV,CACA,GAAI8D,SAAU,EAAd,CAEA,IAAM,GAAIvwC,GAAI,CAAd,CAAiBA,EAAI,KAAKirC,KAAL,CAAW7uC,MAAhC,CAAwC4D,GAAxC,CAA+C,CAE3C,GAAIisC,MAAO,KAAKhB,KAAL,CAAYjrC,CAAZ,CAAX,CAEA,GAAIwwC,aAAc,IAAlB,CACA,GAAIC,WAAY,KAAhB,CAAuB;AACvB,GAAIC,iBAAkB,KAAKxF,aAAL,CAAoB,CAApB,EAAyBlrC,CAAzB,IAAiC5L,SAAvD,CACA,GAAIu8C,eAAgB1E,KAAKtnB,MAAL,CAAYvoB,MAAZ,GAAuB,CAA3C,CACA,GAAIw0C,qBAAsB3E,KAAKrB,aAAL,CAAmBxuC,MAAnB,CAA4B,CAAtD,CACA,GAAIy0C,cAAe5E,KAAK/7C,KAAL,CAAWyxB,CAAX,GAAiB,CAAjB,EAAsBsqB,KAAK/7C,KAAL,CAAWo1B,CAAX,GAAiB,CAAvC,EAA4C2mB,KAAK/7C,KAAL,CAAW+U,CAAX,GAAiB,CAAhF,CACA,GAAI6rC,oBAAqB7E,KAAKpB,YAAL,CAAkBzuC,MAAlB,CAA2B,CAApD,CAEA,GAAI20C,UAAW,CAAf,CAEAA,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqB,CAArB,CAAX,CAAqC;AACrCA,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBP,WAArB,CAAX,CACAO,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBN,SAArB,CAAX,CACAM,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBL,eAArB,CAAX,CACAK,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBJ,aAArB,CAAX,CACAI,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBH,mBAArB,CAAX,CACAG,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBF,YAArB,CAAX,CACAE,SAAWC,OAAQD,QAAR,CAAkB,CAAlB,CAAqBD,kBAArB,CAAX,CAEA7F,MAAMp6C,IAAN,CAAYkgD,QAAZ,EACA9F,MAAMp6C,IAAN,CAAYo7C,KAAKrmC,CAAjB,CAAoBqmC,KAAKhnC,CAAzB,CAA4BgnC,KAAKz2B,CAAjC,EACAy1B,MAAMp6C,IAAN,CAAYo7C,KAAKtB,aAAjB,EAEA,GAAK+F,eAAL,CAAuB,CAEnB,GAAIxF,eAAgB,KAAKA,aAAL,CAAoB,CAApB,EAAyBlrC,CAAzB,CAApB,CAEAirC,MAAMp6C,IAAN,CACIogD,WAAY/F,cAAe,CAAf,CAAZ,CADJ,CAEI+F,WAAY/F,cAAe,CAAf,CAAZ,CAFJ,CAGI+F,WAAY/F,cAAe,CAAf,CAAZ,CAHJ,EAMH,CAED,GAAKyF,aAAL,CAAqB,CAEjB1F,MAAMp6C,IAAN,CAAYqgD,eAAgBjF,KAAKtnB,MAArB,CAAZ,EAEH,CAED,GAAKisB,mBAAL,CAA2B,CAEvB,GAAIhG,eAAgBqB,KAAKrB,aAAzB,CAEAK,MAAMp6C,IAAN,CACIqgD,eAAgBtG,cAAe,CAAf,CAAhB,CADJ,CAEIsG,eAAgBtG,cAAe,CAAf,CAAhB,CAFJ,CAGIsG,eAAgBtG,cAAe,CAAf,CAAhB,CAHJ,EAMH,CAED,GAAKiG,YAAL,CAAoB,CAEhB5F,MAAMp6C,IAAN,CAAYsgD,cAAelF,KAAK/7C,KAApB,CAAZ,EAEH,CAED,GAAK4gD,kBAAL,CAA0B,CAEtB,GAAIjG,cAAeoB,KAAKpB,YAAxB,CAEAI,MAAMp6C,IAAN,CACIsgD,cAAetG,aAAc,CAAd,CAAf,CADJ,CAEIsG,cAAetG,aAAc,CAAd,CAAf,CAFJ,CAGIsG,cAAetG,aAAc,CAAd,CAAf,CAHJ,EAMH,CAEJ,CAED,QAASmG,OAAT,CAAiB1xC,KAAjB,CAAwBvR,QAAxB,CAAkCD,OAAlC,CAA4C,CAExC,MAAOA,SAAUwR,MAAU,GAAKvR,QAAzB,CAAsCuR,MAAU,EAAI,GAAKvR,QAAT,CAAvD,CAEH,CAED,QAASmjD,eAAT,CAAyBvsB,MAAzB,CAAkC,CAE9B,GAAIysB,MAAOzsB,OAAO32B,CAAP,CAAS+Y,QAAT,GAAsB4d,OAAO12B,CAAP,CAAS8Y,QAAT,EAAtB,CAA4C4d,OAAOz2B,CAAP,CAAS6Y,QAAT,EAAvD,CAEA,GAAKspC,YAAae,IAAb,IAAwBh9C,SAA7B,CAAyC,CAErC,MAAOi8C,aAAae,IAAb,CAAP,CAEH,CAEDf,YAAae,IAAb,EAAsB5E,QAAQpwC,MAAR,CAAiB,CAAvC,CACAowC,QAAQ37C,IAAR,CAAc8zB,OAAO32B,CAArB,CAAwB22B,OAAO12B,CAA/B,CAAkC02B,OAAOz2B,CAAzC,EAEA,MAAOmiD,aAAae,IAAb,CAAP,CAEH,CAED,QAASD,cAAT,CAAwBjhD,KAAxB,CAAgC,CAE5B,GAAIkhD,MAAOlhD,MAAMyxB,CAAN,CAAQ5a,QAAR,GAAqB7W,MAAMo1B,CAAN,CAAQve,QAAR,EAArB,CAA0C7W,MAAM+U,CAAN,CAAQ8B,QAAR,EAArD,CAEA,GAAKupC,WAAYc,IAAZ,IAAuBh9C,SAA5B,CAAwC,CAEpC,MAAOk8C,YAAYc,IAAZ,CAAP,CAEH,CAEDd,WAAYc,IAAZ,EAAqBpG,OAAO5uC,MAA5B,CACA4uC,OAAOn6C,IAAP,CAAaX,MAAMorC,MAAN,EAAb,EAEA,MAAOgV,YAAYc,IAAZ,CAAP,CAEH,CAED,QAASH,WAAT,CAAqB1oB,EAArB,CAA0B,CAEtB,GAAI6oB,MAAO7oB,GAAGv6B,CAAH,CAAK+Y,QAAL,GAAkBwhB,GAAGt6B,CAAH,CAAK8Y,QAAL,EAA7B,CAEA,GAAKwpC,QAASa,IAAT,IAAoBh9C,SAAzB,CAAqC,CAEjC,MAAOm8C,SAASa,IAAT,CAAP,CAEH,CAEDb,QAASa,IAAT,EAAkB3E,IAAIrwC,MAAJ,CAAa,CAA/B,CACAqwC,IAAI57C,IAAJ,CAAU03B,GAAGv6B,CAAb,CAAgBu6B,GAAGt6B,CAAnB,EAEA,MAAOsiD,SAASa,IAAT,CAAP,CAEH,CAED5+C,KAAKA,IAAL,CAAY,EAAZ,CAEAA,KAAKA,IAAL,CAAUu5B,QAAV,CAAqBA,QAArB,CACAv5B,KAAKA,IAAL,CAAUg6C,OAAV,CAAoBA,OAApB,CACA,GAAKxB,OAAO5uC,MAAP,CAAgB,CAArB,CAAyB5J,KAAKA,IAAL,CAAUw4C,MAAV,CAAmBA,MAAnB,CACzB,GAAKyB,IAAIrwC,MAAJ,CAAa,CAAlB,CAAsB5J,KAAKA,IAAL,CAAUi6C,GAAV,CAAgB,CAAEA,GAAF,CAAhB,CAAyB;AAC/Cj6C,KAAKA,IAAL,CAAUy4C,KAAV,CAAkBA,KAAlB,CAEA,MAAOz4C,KAAP,CAEH,CAjlC2E,CAmlC5E1B,MAAO,gBAAY,CAEf;;;;;;;;;;;;;;;;;;;;;;MAwBA,MAAO,IAAIi6C,SAAJ,GAAe9zC,IAAf,CAAqB,IAArB,CAAP,CAEH,CA/mC2E,CAinC5EA,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,GAAIX,EAAJ,CAAO6qB,EAAP,CAAWyC,CAAX,CAAc4e,EAAd,CAAkBtoC,CAAlB,CAAqBytC,EAArB,CAEA;AAEA,KAAKtlB,QAAL,CAAgB,EAAhB,CACA,KAAKif,MAAL,CAAc,EAAd,CACA,KAAKC,KAAL,CAAa,EAAb,CACA,KAAKC,aAAL,CAAqB,CAAC,EAAD,CAArB,CACA,KAAKC,YAAL,CAAoB,EAApB,CACA,KAAKC,YAAL,CAAoB,EAApB,CACA,KAAKC,WAAL,CAAmB,EAAnB,CACA,KAAKC,WAAL,CAAmB,EAAnB,CACA,KAAKC,aAAL,CAAqB,EAArB,CACA,KAAKC,WAAL,CAAmB,IAAnB,CACA,KAAKvZ,cAAL,CAAsB,IAAtB,CAEA;AAEA,KAAKvL,IAAL,CAAY/lB,OAAO+lB,IAAnB,CAEA;AAEA,GAAIqF,UAAWprB,OAAOorB,QAAtB,CAEA,IAAM/rB,EAAI,CAAJ,CAAO6qB,GAAKkB,SAAS3vB,MAA3B,CAAmC4D,EAAI6qB,EAAvC,CAA2C7qB,GAA3C,CAAkD,CAE9C,KAAK+rB,QAAL,CAAcl7B,IAAd,CAAoBk7B,SAAU/rB,CAAV,EAAclP,KAAd,EAApB,EAEH,CAED;AAEA,GAAIk6C,QAASrqC,OAAOqqC,MAApB,CAEA,IAAMhrC,EAAI,CAAJ,CAAO6qB,GAAKmgB,OAAO5uC,MAAzB,CAAiC4D,EAAI6qB,EAArC,CAAyC7qB,GAAzC,CAAgD,CAE5C,KAAKgrC,MAAL,CAAYn6C,IAAZ,CAAkBm6C,OAAQhrC,CAAR,EAAYlP,KAAZ,EAAlB,EAEH,CAED;AAEA,GAAIm6C,OAAQtqC,OAAOsqC,KAAnB,CAEA,IAAMjrC,EAAI,CAAJ,CAAO6qB,GAAKogB,MAAM7uC,MAAxB,CAAgC4D,EAAI6qB,EAApC,CAAwC7qB,GAAxC,CAA+C,CAE3C,KAAKirC,KAAL,CAAWp6C,IAAX,CAAiBo6C,MAAOjrC,CAAP,EAAWlP,KAAX,EAAjB,EAEH,CAED;AAEA,IAAMkP,EAAI,CAAJ,CAAO6qB,GAAKlqB,OAAOuqC,aAAP,CAAqB9uC,MAAvC,CAA+C4D,EAAI6qB,EAAnD,CAAuD7qB,GAAvD,CAA8D,CAE1D,GAAIkrC,eAAgBvqC,OAAOuqC,aAAP,CAAsBlrC,CAAtB,CAApB,CAEA,GAAK,KAAKkrC,aAAL,CAAoBlrC,CAApB,IAA4B5L,SAAjC,CAA6C,CAEzC,KAAK82C,aAAL,CAAoBlrC,CAApB,EAA0B,EAA1B,CAEH,CAED,IAAMstB,EAAI,CAAJ,CAAO4e,GAAKhB,cAAc9uC,MAAhC,CAAwCkxB,EAAI4e,EAA5C,CAAgD5e,GAAhD,CAAuD,CAEnD,GAAImf,KAAMvB,cAAe5d,CAAf,CAAV,CAA8BgkB,QAAU,EAAxC,CAEA,IAAM1tC,EAAI,CAAJ,CAAOytC,GAAK5E,IAAIrwC,MAAtB,CAA8BwH,EAAIytC,EAAlC,CAAsCztC,GAAtC,CAA6C,CAEzC,GAAI2kB,IAAKkkB,IAAK7oC,CAAL,CAAT,CAEA0tC,QAAQzgD,IAAR,CAAc03B,GAAGz3B,KAAH,EAAd,EAEH,CAED,KAAKo6C,aAAL,CAAoBlrC,CAApB,EAAwBnP,IAAxB,CAA8BygD,OAA9B,EAEH,CAEJ,CAED;AAEA,GAAInG,cAAexqC,OAAOwqC,YAA1B,CAEA,IAAMnrC,EAAI,CAAJ,CAAO6qB,GAAKsgB,aAAa/uC,MAA/B,CAAuC4D,EAAI6qB,EAA3C,CAA+C7qB,GAA/C,CAAsD,CAElD,GAAIuxC,aAAc,EAAlB,CACAA,YAAY7qB,IAAZ,CAAmBykB,aAAcnrC,CAAd,EAAkB0mB,IAArC,CAEA;AAEA,GAAKykB,aAAcnrC,CAAd,EAAkB+rB,QAAlB,GAA+B33B,SAApC,CAAgD,CAE5Cm9C,YAAYxlB,QAAZ,CAAuB,EAAvB,CAEA,IAAMuB,EAAI,CAAJ,CAAO4e,GAAKf,aAAcnrC,CAAd,EAAkB+rB,QAAlB,CAA2B3vB,MAA7C,CAAqDkxB,EAAI4e,EAAzD,CAA6D5e,GAA7D,CAAoE,CAEhEikB,YAAYxlB,QAAZ,CAAqBl7B,IAArB,CAA2Bs6C,aAAcnrC,CAAd,EAAkB+rB,QAAlB,CAA4BuB,CAA5B,EAAgCx8B,KAAhC,EAA3B,EAEH,CAEJ,CAED;AAEA,GAAKq6C,aAAcnrC,CAAd,EAAkBwsC,OAAlB,GAA8Bp4C,SAAnC,CAA+C,CAE3Cm9C,YAAY/E,OAAZ,CAAsB,EAAtB,CAEA,IAAMlf,EAAI,CAAJ,CAAO4e,GAAKf,aAAcnrC,CAAd,EAAkBwsC,OAAlB,CAA0BpwC,MAA5C,CAAoDkxB,EAAI4e,EAAxD,CAA4D5e,GAA5D,CAAmE,CAE/DikB,YAAY/E,OAAZ,CAAoB37C,IAApB,CAA0Bs6C,aAAcnrC,CAAd,EAAkBwsC,OAAlB,CAA2Blf,CAA3B,EAA+Bx8B,KAA/B,EAA1B,EAEH,CAEJ,CAED,KAAKq6C,YAAL,CAAkBt6C,IAAlB,CAAwB0gD,WAAxB,EAEH,CAED;AAEA,GAAInG,cAAezqC,OAAOyqC,YAA1B,CAEA,IAAMprC,EAAI,CAAJ,CAAO6qB,GAAKugB,aAAahvC,MAA/B,CAAuC4D,EAAI6qB,EAA3C,CAA+C7qB,GAA/C,CAAsD,CAElD,GAAIwxC,aAAc,EAAlB,CAEA;AAEA,GAAKpG,aAAcprC,CAAd,EAAkB4qC,aAAlB,GAAoCx2C,SAAzC,CAAqD,CAEjDo9C,YAAY5G,aAAZ,CAA4B,EAA5B,CAEA,IAAMtd,EAAI,CAAJ,CAAO4e,GAAKd,aAAcprC,CAAd,EAAkB4qC,aAAlB,CAAgCxuC,MAAlD,CAA0DkxB,EAAI4e,EAA9D,CAAkE5e,GAAlE,CAAyE,CAErE,GAAImkB,iBAAkBrG,aAAcprC,CAAd,EAAkB4qC,aAAlB,CAAiCtd,CAAjC,CAAtB,CACA,GAAIokB,kBAAmB,EAAvB,CAEAA,iBAAiB9rC,CAAjB,CAAqB6rC,gBAAgB7rC,CAAhB,CAAkB9U,KAAlB,EAArB,CACA4gD,iBAAiBzsC,CAAjB,CAAqBwsC,gBAAgBxsC,CAAhB,CAAkBnU,KAAlB,EAArB,CACA4gD,iBAAiBl8B,CAAjB,CAAqBi8B,gBAAgBj8B,CAAhB,CAAkB1kB,KAAlB,EAArB,CAEA0gD,YAAY5G,aAAZ,CAA0B/5C,IAA1B,CAAgC6gD,gBAAhC,EAEH,CAEJ,CAED;AAEA,GAAKtG,aAAcprC,CAAd,EAAkBiuC,WAAlB,GAAkC75C,SAAvC,CAAmD,CAE/Co9C,YAAYvD,WAAZ,CAA0B,EAA1B,CAEA,IAAM3gB,EAAI,CAAJ,CAAO4e,GAAKd,aAAcprC,CAAd,EAAkBiuC,WAAlB,CAA8B7xC,MAAhD,CAAwDkxB,EAAI4e,EAA5D,CAAgE5e,GAAhE,CAAuE,CAEnEkkB,YAAYvD,WAAZ,CAAwBp9C,IAAxB,CAA8Bu6C,aAAcprC,CAAd,EAAkBiuC,WAAlB,CAA+B3gB,CAA/B,EAAmCx8B,KAAnC,EAA9B,EAEH,CAEJ,CAED,KAAKs6C,YAAL,CAAkBv6C,IAAlB,CAAwB2gD,WAAxB,EAEH,CAED;AAEA,GAAInG,aAAc1qC,OAAO0qC,WAAzB,CAEA,IAAMrrC,EAAI,CAAJ,CAAO6qB,GAAKwgB,YAAYjvC,MAA9B,CAAsC4D,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjD,KAAKqrC,WAAL,CAAiBx6C,IAAjB,CAAuBw6C,YAAarrC,CAAb,EAAiBlP,KAAjB,EAAvB,EAEH,CAED;AAEA,GAAIw6C,aAAc3qC,OAAO2qC,WAAzB,CAEA,IAAMtrC,EAAI,CAAJ,CAAO6qB,GAAKygB,YAAYlvC,MAA9B,CAAsC4D,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjD,KAAKsrC,WAAL,CAAiBz6C,IAAjB,CAAuBy6C,YAAatrC,CAAb,EAAiBlP,KAAjB,EAAvB,EAEH,CAED;AAEA,GAAIy6C,eAAgB5qC,OAAO4qC,aAA3B,CAEA,IAAMvrC,EAAI,CAAJ,CAAO6qB,GAAK0gB,cAAcnvC,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnD,KAAKurC,aAAL,CAAmB16C,IAAnB,CAAyB06C,cAAevrC,CAAf,CAAzB,EAEH,CAED;AAEA,GAAIwrC,aAAc7qC,OAAO6qC,WAAzB,CAEA,GAAKA,cAAgB,IAArB,CAA4B,CAExB,KAAKA,WAAL,CAAmBA,YAAY16C,KAAZ,EAAnB,CAEH,CAED;AAEA,GAAImhC,gBAAiBtxB,OAAOsxB,cAA5B,CAEA,GAAKA,iBAAmB,IAAxB,CAA+B,CAE3B,KAAKA,cAAL,CAAsBA,eAAenhC,KAAf,EAAtB,CAEH,CAED;AAEA,KAAK26C,kBAAL,CAA0B9qC,OAAO8qC,kBAAjC,CACA,KAAKC,kBAAL,CAA0B/qC,OAAO+qC,kBAAjC,CACA,KAAKC,aAAL,CAAqBhrC,OAAOgrC,aAA5B,CACA,KAAKC,iBAAL,CAAyBjrC,OAAOirC,iBAAhC,CACA,KAAKC,gBAAL,CAAwBlrC,OAAOkrC,gBAA/B,CACA,KAAKC,uBAAL,CAA+BnrC,OAAOmrC,uBAAtC,CACA,KAAKC,gBAAL,CAAwBprC,OAAOorC,gBAA/B,CAEA,MAAO,KAAP,CAEH,CAz1C2E,CA21C5E1yC,QAAS,kBAAY,CAEjB,KAAKjC,aAAL,CAAoB,CAAE2C,KAAM,SAAR,CAApB,EAEH,CA/1C2E,CAA3D,CAArB,CAm2CA;;OAIA,QAAS43C,gBAAT,CAA0BhqC,KAA1B,CAAiCiqC,QAAjC,CAA2CC,UAA3C,CAAwD,CAEpD,GAAKzvC,MAAM63B,OAAN,CAAetyB,KAAf,CAAL,CAA8B,CAE1B,KAAM,IAAIV,UAAJ,CAAe,uDAAf,CAAN,CAEH,CAED,KAAKyf,IAAL,CAAY,EAAZ,CAEA,KAAK/e,KAAL,CAAaA,KAAb,CACA,KAAKiqC,QAAL,CAAgBA,QAAhB,CACA,KAAKx2B,KAAL,CAAazT,QAAUvT,SAAV,CAAsBuT,MAAMvL,MAAN,CAAew1C,QAArC,CAAgD,CAA7D,CACA,KAAKC,UAAL,CAAkBA,aAAe,IAAjC,CAEA,KAAK/O,OAAL,CAAe,KAAf,CACA,KAAKyB,WAAL,CAAmB,CAAE9sC,OAAQ,CAAV,CAAa2jB,MAAO,CAAE,CAAtB,CAAnB,CAEA,KAAK+L,OAAL,CAAe,CAAf,CAEH,CAEDroB,OAAOgI,cAAP,CAAuB6qC,gBAAgB9yC,SAAvC,CAAkD,aAAlD,CAAiE,CAE7DhQ,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,GAAKA,QAAU,IAAf,CAAsB,KAAK6nB,OAAL,GAEzB,CAN4D,CAAjE,EAUAroB,OAAO4B,MAAP,CAAeixC,gBAAgB9yC,SAA/B,CAA0C,CAEtCizC,kBAAmB,IAFmB,CAItC1O,iBAAkB,2BAAY,CAAE,CAJM,CAMtC2O,SAAU,kBAAWpqC,KAAX,CAAmB,CAEzB,GAAKvF,MAAM63B,OAAN,CAAetyB,KAAf,CAAL,CAA8B,CAE1B,KAAM,IAAIV,UAAJ,CAAe,uDAAf,CAAN,CAEH,CAED,KAAKmU,KAAL,CAAazT,QAAUvT,SAAV,CAAsBuT,MAAMvL,MAAN,CAAe,KAAKw1C,QAA1C,CAAqD,CAAlE,CACA,KAAKjqC,KAAL,CAAaA,KAAb,CAEA,MAAO,KAAP,CAEH,CAnBqC,CAqBtCqqC,WAAY,oBAAW1yC,KAAX,CAAmB,CAE3B,KAAKwjC,OAAL,CAAexjC,KAAf,CAEA,MAAO,KAAP,CAEH,CA3BqC,CA6BtCrI,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAK+lB,IAAL,CAAY/lB,OAAO+lB,IAAnB,CACA,KAAK/e,KAAL,CAAa,GAAIhH,QAAOgH,KAAP,CAAa1I,WAAjB,CAA8B0B,OAAOgH,KAArC,CAAb,CACA,KAAKiqC,QAAL,CAAgBjxC,OAAOixC,QAAvB,CACA,KAAKx2B,KAAL,CAAaza,OAAOya,KAApB,CACA,KAAKy2B,UAAL,CAAkBlxC,OAAOkxC,UAAzB,CAEA,KAAK/O,OAAL,CAAeniC,OAAOmiC,OAAtB,CAEA,MAAO,KAAP,CAEH,CAzCqC,CA2CtCmP,OAAQ,gBAAWC,MAAX,CAAmB98B,SAAnB,CAA8B+8B,MAA9B,CAAuC,CAE3CD,QAAU,KAAKN,QAAf,CACAO,QAAU/8B,UAAUw8B,QAApB,CAEA,IAAM,GAAI5xC,GAAI,CAAR,CAAW6H,EAAI,KAAK+pC,QAA1B,CAAoC5xC,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,KAAK2H,KAAL,CAAYuqC,OAASlyC,CAArB,EAA2BoV,UAAUzN,KAAV,CAAiBwqC,OAASnyC,CAA1B,CAA3B,CAEH,CAED,MAAO,KAAP,CAEH,CAxDqC,CA0DtCoyC,UAAW,mBAAWzqC,KAAX,CAAmB,CAE1B,KAAKA,KAAL,CAAW9Y,GAAX,CAAgB8Y,KAAhB,EAEA,MAAO,KAAP,CAEH,CAhEqC,CAkEtC0qC,gBAAiB,yBAAWrH,MAAX,CAAoB,CAEjC,GAAIrjC,OAAQ,KAAKA,KAAjB,CAAwBlQ,OAAS,CAAjC,CAEA,IAAM,GAAIuI,GAAI,CAAR,CAAW6H,EAAImjC,OAAO5uC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAI9P,OAAQ86C,OAAQhrC,CAAR,CAAZ,CAEA,GAAK9P,QAAUkE,SAAf,CAA2B,CAEvBzB,QAAQgK,IAAR,CAAc,6DAAd,CAA6EqD,CAA7E,EACA9P,MAAQ,GAAIiqC,MAAJ,EAAR,CAEH,CAEDxyB,MAAOlQ,QAAP,EAAqBvH,MAAMyxB,CAA3B,CACAha,MAAOlQ,QAAP,EAAqBvH,MAAMo1B,CAA3B,CACA3d,MAAOlQ,QAAP,EAAqBvH,MAAM+U,CAA3B,CAEH,CAED,MAAO,KAAP,CAEH,CAzFqC,CA2FtCqtC,kBAAmB,2BAAWC,OAAX,CAAqB,CAEpC,GAAI5qC,OAAQ,KAAKA,KAAjB,CAAwBlQ,OAAS,CAAjC,CAEA,IAAM,GAAIuI,GAAI,CAAR,CAAW6H,EAAI0qC,QAAQn2C,MAA7B,CAAqC4D,EAAI6H,CAAzC,CAA4C7H,GAA5C,CAAmD,CAE/C,GAAIse,QAASi0B,QAASvyC,CAAT,CAAb,CAEA,GAAKse,SAAWlqB,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,gEAAd,CAAgFqD,CAAhF,EACAse,OAAS,GAAI7jB,QAAJ,EAAT,CAEH,CAEDkN,MAAOlQ,QAAP,EAAqB6mB,OAAOtwB,CAA5B,CACA2Z,MAAOlQ,QAAP,EAAqB6mB,OAAOrwB,CAA5B,CAEH,CAED,MAAO,KAAP,CAEH,CAjHqC,CAmHtCukD,kBAAmB,2BAAWD,OAAX,CAAqB,CAEpC,GAAI5qC,OAAQ,KAAKA,KAAjB,CAAwBlQ,OAAS,CAAjC,CAEA,IAAM,GAAIuI,GAAI,CAAR,CAAW6H,EAAI0qC,QAAQn2C,MAA7B,CAAqC4D,EAAI6H,CAAzC,CAA4C7H,GAA5C,CAAmD,CAE/C,GAAIse,QAASi0B,QAASvyC,CAAT,CAAb,CAEA,GAAKse,SAAWlqB,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,gEAAd,CAAgFqD,CAAhF,EACAse,OAAS,GAAIhqB,QAAJ,EAAT,CAEH,CAEDqT,MAAOlQ,QAAP,EAAqB6mB,OAAOtwB,CAA5B,CACA2Z,MAAOlQ,QAAP,EAAqB6mB,OAAOrwB,CAA5B,CACA0Z,MAAOlQ,QAAP,EAAqB6mB,OAAOpwB,CAA5B,CAEH,CAED,MAAO,KAAP,CAEH,CA1IqC,CA4ItCukD,kBAAmB,2BAAWF,OAAX,CAAqB,CAEpC,GAAI5qC,OAAQ,KAAKA,KAAjB,CAAwBlQ,OAAS,CAAjC,CAEA,IAAM,GAAIuI,GAAI,CAAR,CAAW6H,EAAI0qC,QAAQn2C,MAA7B,CAAqC4D,EAAI6H,CAAzC,CAA4C7H,GAA5C,CAAmD,CAE/C,GAAIse,QAASi0B,QAASvyC,CAAT,CAAb,CAEA,GAAKse,SAAWlqB,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,gEAAd,CAAgFqD,CAAhF,EACAse,OAAS,GAAIkK,QAAJ,EAAT,CAEH,CAED7gB,MAAOlQ,QAAP,EAAqB6mB,OAAOtwB,CAA5B,CACA2Z,MAAOlQ,QAAP,EAAqB6mB,OAAOrwB,CAA5B,CACA0Z,MAAOlQ,QAAP,EAAqB6mB,OAAOpwB,CAA5B,CACAyZ,MAAOlQ,QAAP,EAAqB6mB,OAAOnL,CAA5B,CAEH,CAED,MAAO,KAAP,CAEH,CApKqC,CAsKtCtkB,IAAK,aAAWyQ,KAAX,CAAkB7H,MAAlB,CAA2B,CAE5B,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,KAAKkQ,KAAL,CAAW9Y,GAAX,CAAgByQ,KAAhB,CAAuB7H,MAAvB,EAEA,MAAO,KAAP,CAEH,CA9KqC,CAgLtC4d,KAAM,cAAWlO,KAAX,CAAmB,CAErB,MAAO,MAAKQ,KAAL,CAAYR,MAAQ,KAAKyqC,QAAzB,CAAP,CAEH,CApLqC,CAsLtC9+B,KAAM,cAAW3L,KAAX,CAAkBnZ,CAAlB,CAAsB,CAExB,KAAK2Z,KAAL,CAAYR,MAAQ,KAAKyqC,QAAzB,EAAsC5jD,CAAtC,CAEA,MAAO,KAAP,CAEH,CA5LqC,CA8LtCsnB,KAAM,cAAWnO,KAAX,CAAmB,CAErB,MAAO,MAAKQ,KAAL,CAAYR,MAAQ,KAAKyqC,QAAb,CAAwB,CAApC,CAAP,CAEH,CAlMqC,CAoMtC7+B,KAAM,cAAW5L,KAAX,CAAkBlZ,CAAlB,CAAsB,CAExB,KAAK0Z,KAAL,CAAYR,MAAQ,KAAKyqC,QAAb,CAAwB,CAApC,EAA0C3jD,CAA1C,CAEA,MAAO,KAAP,CAEH,CA1MqC,CA4MtCotB,KAAM,cAAWlU,KAAX,CAAmB,CAErB,MAAO,MAAKQ,KAAL,CAAYR,MAAQ,KAAKyqC,QAAb,CAAwB,CAApC,CAAP,CAEH,CAhNqC,CAkNtC7uB,KAAM,cAAW5b,KAAX,CAAkBjZ,CAAlB,CAAsB,CAExB,KAAKyZ,KAAL,CAAYR,MAAQ,KAAKyqC,QAAb,CAAwB,CAApC,EAA0C1jD,CAA1C,CAEA,MAAO,KAAP,CAEH,CAxNqC,CA0NtC66B,KAAM,cAAW5hB,KAAX,CAAmB,CAErB,MAAO,MAAKQ,KAAL,CAAYR,MAAQ,KAAKyqC,QAAb,CAAwB,CAApC,CAAP,CAEH,CA9NqC,CAgOtClpB,KAAM,cAAWvhB,KAAX,CAAkBgM,CAAlB,CAAsB,CAExB,KAAKxL,KAAL,CAAYR,MAAQ,KAAKyqC,QAAb,CAAwB,CAApC,EAA0Cz+B,CAA1C,CAEA,MAAO,KAAP,CAEH,CAtOqC,CAwOtCu/B,MAAO,eAAWvrC,KAAX,CAAkBnZ,CAAlB,CAAqBC,CAArB,CAAyB,CAE5BkZ,OAAS,KAAKyqC,QAAd,CAEA,KAAKjqC,KAAL,CAAYR,MAAQ,CAApB,EAA0BnZ,CAA1B,CACA,KAAK2Z,KAAL,CAAYR,MAAQ,CAApB,EAA0BlZ,CAA1B,CAEA,MAAO,KAAP,CAEH,CAjPqC,CAmPtCstB,OAAQ,gBAAWpU,KAAX,CAAkBnZ,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA4B,CAEhCiZ,OAAS,KAAKyqC,QAAd,CAEA,KAAKjqC,KAAL,CAAYR,MAAQ,CAApB,EAA0BnZ,CAA1B,CACA,KAAK2Z,KAAL,CAAYR,MAAQ,CAApB,EAA0BlZ,CAA1B,CACA,KAAK0Z,KAAL,CAAYR,MAAQ,CAApB,EAA0BjZ,CAA1B,CAEA,MAAO,KAAP,CAEH,CA7PqC,CA+PtCykD,QAAS,iBAAWxrC,KAAX,CAAkBnZ,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA2BilB,CAA3B,CAA+B,CAEpChM,OAAS,KAAKyqC,QAAd,CAEA,KAAKjqC,KAAL,CAAYR,MAAQ,CAApB,EAA0BnZ,CAA1B,CACA,KAAK2Z,KAAL,CAAYR,MAAQ,CAApB,EAA0BlZ,CAA1B,CACA,KAAK0Z,KAAL,CAAYR,MAAQ,CAApB,EAA0BjZ,CAA1B,CACA,KAAKyZ,KAAL,CAAYR,MAAQ,CAApB,EAA0BgM,CAA1B,CAEA,MAAO,KAAP,CAEH,CA1QqC,CA4QtCy/B,SAAU,kBAAWvvC,QAAX,CAAsB,CAE5B,KAAK+/B,gBAAL,CAAwB//B,QAAxB,CAEA,MAAO,KAAP,CAEH,CAlRqC,CAoRtCvS,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAK0I,KAA3B,CAAkC,KAAKiqC,QAAvC,EAAkD36C,IAAlD,CAAwD,IAAxD,CAAP,CAEH,CAxRqC,CAA1C,EA4RA;AAEA,QAAS47C,oBAAT,CAA8BlrC,KAA9B,CAAqCiqC,QAArC,CAA+CC,UAA/C,CAA4D,CAExDF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAIyhC,UAAJ,CAAer8B,KAAf,CAA5B,CAAoDiqC,QAApD,CAA8DC,UAA9D,EAEH,CAEDgB,oBAAoBh0C,SAApB,CAAgCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAhC,CACAg0C,oBAAoBh0C,SAApB,CAA8BI,WAA9B,CAA4C4zC,mBAA5C,CAGA,QAASC,qBAAT,CAA+BnrC,KAA/B,CAAsCiqC,QAAtC,CAAgDC,UAAhD,CAA6D,CAEzDF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAI2hC,WAAJ,CAAgBv8B,KAAhB,CAA5B,CAAqDiqC,QAArD,CAA+DC,UAA/D,EAEH,CAEDiB,qBAAqBj0C,SAArB,CAAiCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAjC,CACAi0C,qBAAqBj0C,SAArB,CAA+BI,WAA/B,CAA6C6zC,oBAA7C,CAGA,QAASC,4BAAT,CAAsCprC,KAAtC,CAA6CiqC,QAA7C,CAAuDC,UAAvD,CAAoE,CAEhEF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAIywC,kBAAJ,CAAuBrrC,KAAvB,CAA5B,CAA4DiqC,QAA5D,CAAsEC,UAAtE,EAEH,CAEDkB,4BAA4Bl0C,SAA5B,CAAwCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAxC,CACAk0C,4BAA4Bl0C,SAA5B,CAAsCI,WAAtC,CAAoD8zC,2BAApD,CAGA,QAASE,qBAAT,CAA+BtrC,KAA/B,CAAsCiqC,QAAtC,CAAgDC,UAAhD,CAA6D,CAEzDF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAImhC,WAAJ,CAAgB/7B,KAAhB,CAA5B,CAAqDiqC,QAArD,CAA+DC,UAA/D,EAEH,CAEDoB,qBAAqBp0C,SAArB,CAAiCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAjC,CACAo0C,qBAAqBp0C,SAArB,CAA+BI,WAA/B,CAA6Cg0C,oBAA7C,CAGA,QAASC,sBAAT,CAAgCvrC,KAAhC,CAAuCiqC,QAAvC,CAAiDC,UAAjD,CAA8D,CAE1DF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAIihC,YAAJ,CAAiB77B,KAAjB,CAA5B,CAAsDiqC,QAAtD,CAAgEC,UAAhE,EAEH,CAEDqB,sBAAsBr0C,SAAtB,CAAkCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAlC,CACAq0C,sBAAsBr0C,SAAtB,CAAgCI,WAAhC,CAA8Ci0C,qBAA9C,CAGA,QAASC,qBAAT,CAA+BxrC,KAA/B,CAAsCiqC,QAAtC,CAAgDC,UAAhD,CAA6D,CAEzDF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAIuhC,WAAJ,CAAgBn8B,KAAhB,CAA5B,CAAqDiqC,QAArD,CAA+DC,UAA/D,EAEH,CAEDsB,qBAAqBt0C,SAArB,CAAiCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAjC,CACAs0C,qBAAqBt0C,SAArB,CAA+BI,WAA/B,CAA6Ck0C,oBAA7C,CAGA,QAASC,sBAAT,CAAgCzrC,KAAhC,CAAuCiqC,QAAvC,CAAiDC,UAAjD,CAA8D,CAE1DF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAIqhC,YAAJ,CAAiBj8B,KAAjB,CAA5B,CAAsDiqC,QAAtD,CAAgEC,UAAhE,EAEH,CAEDuB,sBAAsBv0C,SAAtB,CAAkCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAlC,CACAu0C,sBAAsBv0C,SAAtB,CAAgCI,WAAhC,CAA8Cm0C,qBAA9C,CAGA,QAASC,uBAAT,CAAiC1rC,KAAjC,CAAwCiqC,QAAxC,CAAkDC,UAAlD,CAA+D,CAE3DF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAI+gC,aAAJ,CAAkB37B,KAAlB,CAA5B,CAAuDiqC,QAAvD,CAAiEC,UAAjE,EAEH,CAEDwB,uBAAuBx0C,SAAvB,CAAmCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAnC,CACAw0C,uBAAuBx0C,SAAvB,CAAiCI,WAAjC,CAA+Co0C,sBAA/C,CAGA,QAASC,uBAAT,CAAiC3rC,KAAjC,CAAwCiqC,QAAxC,CAAkDC,UAAlD,CAA+D,CAE3DF,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4B,GAAIghC,aAAJ,CAAkB57B,KAAlB,CAA5B,CAAuDiqC,QAAvD,CAAiEC,UAAjE,EAEH,CAEDyB,uBAAuBz0C,SAAvB,CAAmCC,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAnC,CACAy0C,uBAAuBz0C,SAAvB,CAAiCI,WAAjC,CAA+Cq0C,sBAA/C,CAEA;;OAIA,QAASC,eAAT,EAA0B,CAEtB,KAAKxnB,QAAL,CAAgB,EAAhB,CACA,KAAKygB,OAAL,CAAe,EAAf,CACA,KAAKxB,MAAL,CAAc,EAAd,CACA,KAAKyB,GAAL,CAAW,EAAX,CACA,KAAKC,IAAL,CAAY,EAAZ,CAEA,KAAKM,MAAL,CAAc,EAAd,CAEA,KAAK7B,YAAL,CAAoB,EAApB,CAEA,KAAKE,WAAL,CAAmB,EAAnB,CACA,KAAKC,WAAL,CAAmB,EAAnB,CAEA;AAEA,KAAKE,WAAL,CAAmB,IAAnB,CACA,KAAKvZ,cAAL,CAAsB,IAAtB,CAEA;AAEA,KAAKyZ,kBAAL,CAA0B,KAA1B,CACA,KAAKE,iBAAL,CAAyB,KAAzB,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CACA,KAAKF,aAAL,CAAqB,KAArB,CACA,KAAKI,gBAAL,CAAwB,KAAxB,CAEH,CAEDjtC,OAAO4B,MAAP,CAAe6yC,eAAe10C,SAA9B,CAAyC,CAErC20C,cAAe,uBAAW3nB,QAAX,CAAsB,CAEjC,GAAIohB,MAAJ,CACA,GAAID,QAAS,EAAb,CACA,GAAIrC,eAAgBv2C,SAApB,CAEA,GAAI62C,OAAQpf,SAASof,KAArB,CAEA,IAAM,GAAIjrC,GAAI,CAAd,CAAiBA,EAAIirC,MAAM7uC,MAA3B,CAAmC4D,GAAnC,CAA0C,CAEtC,GAAIisC,MAAOhB,MAAOjrC,CAAP,CAAX,CAEA;AAEA,GAAKisC,KAAKtB,aAAL,GAAuBA,aAA5B,CAA4C,CAExCA,cAAgBsB,KAAKtB,aAArB,CAEA,GAAKsC,QAAU74C,SAAf,CAA2B,CAEvB64C,MAAM7xB,KAAN,CAAgBpb,EAAI,CAAN,CAAYitC,MAAMt5C,KAAhC,CACAq5C,OAAOn8C,IAAP,CAAao8C,KAAb,EAEH,CAEDA,MAAQ,CACJt5C,MAAOqM,EAAI,CADP,CAEJ2qC,cAAeA,aAFX,CAAR,CAKH,CAEJ,CAED,GAAKsC,QAAU74C,SAAf,CAA2B,CAEvB64C,MAAM7xB,KAAN,CAAgBpb,EAAI,CAAN,CAAYitC,MAAMt5C,KAAhC,CACAq5C,OAAOn8C,IAAP,CAAao8C,KAAb,EAEH,CAED,KAAKD,MAAL,CAAcA,MAAd,CAEH,CA7CoC,CA+CrCyG,aAAc,sBAAW5nB,QAAX,CAAsB,CAEhC,GAAIof,OAAQpf,SAASof,KAArB,CACA,GAAIlf,UAAWF,SAASE,QAAxB,CACA,GAAImf,eAAgBrf,SAASqf,aAA7B,CAEA,GAAIwF,iBAAkBxF,cAAe,CAAf,GAAsBA,cAAe,CAAf,EAAmB9uC,MAAnB,CAA4B,CAAxE,CACA,GAAIs3C,kBAAmBxI,cAAe,CAAf,GAAsBA,cAAe,CAAf,EAAmB9uC,MAAnB,CAA4B,CAAzE,CAEA;AAEA,GAAI+uC,cAAetf,SAASsf,YAA5B,CACA,GAAIwI,oBAAqBxI,aAAa/uC,MAAtC,CAEA,GAAIw3C,qBAAJ,CAEA,GAAKD,mBAAqB,CAA1B,CAA8B,CAE1BC,qBAAuB,EAAvB,CAEA,IAAM,GAAI5zC,GAAI,CAAd,CAAiBA,EAAI2zC,kBAArB,CAAyC3zC,GAAzC,CAAgD,CAE5C4zC,qBAAsB5zC,CAAtB,EAA4B,EAA5B,CAEH,CAED,KAAKmrC,YAAL,CAAkBp9C,QAAlB,CAA6B6lD,oBAA7B,CAEH,CAED,GAAIxI,cAAevf,SAASuf,YAA5B,CACA,GAAIyI,oBAAqBzI,aAAahvC,MAAtC,CAEA,GAAI03C,mBAAJ,CAEA,GAAKD,mBAAqB,CAA1B,CAA8B,CAE1BC,mBAAqB,EAArB,CAEA,IAAM,GAAI9zC,GAAI,CAAd,CAAiBA,EAAI6zC,kBAArB,CAAyC7zC,GAAzC,CAAgD,CAE5C8zC,mBAAoB9zC,CAApB,EAA0B,EAA1B,CAEH,CAED,KAAKmrC,YAAL,CAAkBxmB,MAAlB,CAA2BmvB,kBAA3B,CAEH,CAED;AAEA,GAAIxI,aAAczf,SAASyf,WAA3B,CACA,GAAID,aAAcxf,SAASwf,WAA3B,CAEA,GAAI0I,gBAAiBzI,YAAYlvC,MAAZ,GAAuB2vB,SAAS3vB,MAArD,CACA,GAAI43C,gBAAiB3I,YAAYjvC,MAAZ,GAAuB2vB,SAAS3vB,MAArD,CAEA;AAEA,GAAK6uC,MAAM7uC,MAAN,GAAiB,CAAtB,CAA0B,CAEtBzJ,QAAQ+iB,KAAR,CAAe,8DAAf,EAEH,CAED,IAAM,GAAI1V,GAAI,CAAd,CAAiBA,EAAIirC,MAAM7uC,MAA3B,CAAmC4D,GAAnC,CAA0C,CAEtC,GAAIisC,MAAOhB,MAAOjrC,CAAP,CAAX,CAEA,KAAK+rB,QAAL,CAAcl7B,IAAd,CAAoBk7B,SAAUkgB,KAAKrmC,CAAf,CAApB,CAAwCmmB,SAAUkgB,KAAKhnC,CAAf,CAAxC,CAA4D8mB,SAAUkgB,KAAKz2B,CAAf,CAA5D,EAEA,GAAIo1B,eAAgBqB,KAAKrB,aAAzB,CAEA,GAAKA,cAAcxuC,MAAd,GAAyB,CAA9B,CAAkC,CAE9B,KAAKowC,OAAL,CAAa37C,IAAb,CAAmB+5C,cAAe,CAAf,CAAnB,CAAuCA,cAAe,CAAf,CAAvC,CAA2DA,cAAe,CAAf,CAA3D,EAEH,CAJD,IAIO,CAEH,GAAIjmB,QAASsnB,KAAKtnB,MAAlB,CAEA,KAAK6nB,OAAL,CAAa37C,IAAb,CAAmB8zB,MAAnB,CAA2BA,MAA3B,CAAmCA,MAAnC,EAEH,CAED,GAAIkmB,cAAeoB,KAAKpB,YAAxB,CAEA,GAAKA,aAAazuC,MAAb,GAAwB,CAA7B,CAAiC,CAE7B,KAAK4uC,MAAL,CAAYn6C,IAAZ,CAAkBg6C,aAAc,CAAd,CAAlB,CAAqCA,aAAc,CAAd,CAArC,CAAwDA,aAAc,CAAd,CAAxD,EAEH,CAJD,IAIO,CAEH,GAAI36C,OAAQ+7C,KAAK/7C,KAAjB,CAEA,KAAK86C,MAAL,CAAYn6C,IAAZ,CAAkBX,KAAlB,CAAyBA,KAAzB,CAAgCA,KAAhC,EAEH,CAED,GAAKwgD,kBAAoB,IAAzB,CAAgC,CAE5B,GAAIuD,WAAY/I,cAAe,CAAf,EAAoBlrC,CAApB,CAAhB,CAEA,GAAKi0C,YAAc7/C,SAAnB,CAA+B,CAE3B,KAAKq4C,GAAL,CAAS57C,IAAT,CAAeojD,UAAW,CAAX,CAAf,CAA+BA,UAAW,CAAX,CAA/B,CAA+CA,UAAW,CAAX,CAA/C,EAEH,CAJD,IAIO,CAEHthD,QAAQgK,IAAR,CAAc,0DAAd,CAA0EqD,CAA1E,EAEA,KAAKysC,GAAL,CAAS57C,IAAT,CAAe,GAAI4J,QAAJ,EAAf,CAA8B,GAAIA,QAAJ,EAA9B,CAA6C,GAAIA,QAAJ,EAA7C,EAEH,CAEJ,CAED,GAAKi5C,mBAAqB,IAA1B,CAAiC,CAE7B,GAAIO,WAAY/I,cAAe,CAAf,EAAoBlrC,CAApB,CAAhB,CAEA,GAAKi0C,YAAc7/C,SAAnB,CAA+B,CAE3B,KAAKs4C,IAAL,CAAU77C,IAAV,CAAgBojD,UAAW,CAAX,CAAhB,CAAgCA,UAAW,CAAX,CAAhC,CAAgDA,UAAW,CAAX,CAAhD,EAEH,CAJD,IAIO,CAEHthD,QAAQgK,IAAR,CAAc,2DAAd,CAA2EqD,CAA3E,EAEA,KAAK0sC,IAAL,CAAU77C,IAAV,CAAgB,GAAI4J,QAAJ,EAAhB,CAA+B,GAAIA,QAAJ,EAA/B,CAA8C,GAAIA,QAAJ,EAA9C,EAEH,CAEJ,CAED;AAEA,IAAM,GAAI6yB,GAAI,CAAd,CAAiBA,EAAIqmB,kBAArB,CAAyCrmB,GAAzC,CAAgD,CAE5C,GAAIikB,aAAcpG,aAAc7d,CAAd,EAAkBvB,QAApC,CAEA6nB,qBAAsBtmB,CAAtB,EAA0Bz8B,IAA1B,CAAgC0gD,YAAatF,KAAKrmC,CAAlB,CAAhC,CAAuD2rC,YAAatF,KAAKhnC,CAAlB,CAAvD,CAA8EssC,YAAatF,KAAKz2B,CAAlB,CAA9E,EAEH,CAED,IAAM,GAAI8X,GAAI,CAAd,CAAiBA,EAAIumB,kBAArB,CAAyCvmB,GAAzC,CAAgD,CAE5C,GAAIkkB,aAAcpG,aAAc9d,CAAd,EAAkBsd,aAAlB,CAAiC5qC,CAAjC,CAAlB,CAEA8zC,mBAAoBxmB,CAApB,EAAwBz8B,IAAxB,CAA8B2gD,YAAY5rC,CAA1C,CAA6C4rC,YAAYvsC,CAAzD,CAA4DusC,YAAYh8B,CAAxE,EAEH,CAED;AAEA,GAAKu+B,cAAL,CAAsB,CAElB,KAAKzI,WAAL,CAAiBz6C,IAAjB,CAAuBy6C,YAAaW,KAAKrmC,CAAlB,CAAvB,CAA8C0lC,YAAaW,KAAKhnC,CAAlB,CAA9C,CAAqEqmC,YAAaW,KAAKz2B,CAAlB,CAArE,EAEH,CAED,GAAKw+B,cAAL,CAAsB,CAElB,KAAK3I,WAAL,CAAiBx6C,IAAjB,CAAuBw6C,YAAaY,KAAKrmC,CAAlB,CAAvB,CAA8CylC,YAAaY,KAAKhnC,CAAlB,CAA9C,CAAqEomC,YAAaY,KAAKz2B,CAAlB,CAArE,EAEH,CAEJ,CAED,KAAKg+B,aAAL,CAAoB3nB,QAApB,EAEA,KAAK6f,kBAAL,CAA0B7f,SAAS6f,kBAAnC,CACA,KAAKE,iBAAL,CAAyB/f,SAAS+f,iBAAlC,CACA,KAAKC,gBAAL,CAAwBhgB,SAASggB,gBAAjC,CACA,KAAKF,aAAL,CAAqB9f,SAAS8f,aAA9B,CACA,KAAKI,gBAAL,CAAwBlgB,SAASkgB,gBAAjC,CAEA,MAAO,KAAP,CAEH,CAlOoC,CAAzC,EAsOA;;OAIA,QAASmI,SAAT,CAAmBvsC,KAAnB,CAA2B,CAEvB,GAAKA,MAAMvL,MAAN,GAAiB,CAAtB,CAA0B,MAAO,CAAE3H,QAAT,CAE1B,GAAI+D,KAAMmP,MAAO,CAAP,CAAV,CAEA,IAAM,GAAI3H,GAAI,CAAR,CAAW6H,EAAIF,MAAMvL,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C,EAAG7H,CAA7C,CAAiD,CAE7C,GAAK2H,MAAO3H,CAAP,EAAaxH,GAAlB,CAAwBA,IAAMmP,MAAO3H,CAAP,CAAN,CAE3B,CAED,MAAOxH,IAAP,CAEH,CAED;;;OAKA,GAAI27C,kBAAmB,CAAvB,CAA0B;AAE1B,QAASC,eAAT,EAA0B,CAEtBt1C,OAAOgI,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAExH,MAAO60C,kBAAoB,CAA7B,CAAnC,EAEA,KAAKnjC,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA,KAAKgW,IAAL,CAAY,EAAZ,CACA,KAAK3sB,IAAL,CAAY,gBAAZ,CAEA,KAAKoN,KAAL,CAAa,IAAb,CACA,KAAK8kB,UAAL,CAAkB,EAAlB,CAEA,KAAKooB,eAAL,CAAuB,EAAvB,CAEA,KAAKrH,MAAL,CAAc,EAAd,CAEA,KAAKxB,WAAL,CAAmB,IAAnB,CACA,KAAKvZ,cAAL,CAAsB,IAAtB,CAEA,KAAKqiB,SAAL,CAAiB,CAAE3gD,MAAO,CAAT,CAAYynB,MAAO3mB,QAAnB,CAAjB,CAEA,KAAKmyC,QAAL,CAAgB,EAAhB,CAEH,CAEDwN,eAAev1C,SAAf,CAA2BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeC,gBAAgBH,SAA/B,CAAf,CAA2D,CAElFI,YAAam1C,cAFqE,CAIlFpoB,iBAAkB,IAJgE,CAMlFuoB,SAAU,mBAAY,CAElB,MAAO,MAAKptC,KAAZ,CAEH,CAViF,CAYlFqtC,SAAU,kBAAWrtC,KAAX,CAAmB,CAEzB,GAAK/E,MAAM63B,OAAN,CAAe9yB,KAAf,CAAL,CAA8B,CAE1B,KAAKA,KAAL,CAAa,IAAM+sC,SAAU/sC,KAAV,EAAoB,KAApB,CAA4BisC,qBAA5B,CAAoDF,qBAA1D,EAAmF/rC,KAAnF,CAA0F,CAA1F,CAAb,CAEH,CAJD,IAIO,CAEH,KAAKA,KAAL,CAAaA,KAAb,CAEH,CAEJ,CAxBiF,CA0BlFstC,aAAc,sBAAW/tB,IAAX,CAAiBtR,SAAjB,CAA6B,CAEvC,GAAK,EAAIA,WAAaA,UAAU08B,iBAA3B,GAAkD,EAAI18B,WAAaA,UAAUsvB,4BAA3B,CAAvD,CAAmH,CAE/G/xC,QAAQgK,IAAR,CAAc,wEAAd,EAEA,MAAO,MAAK83C,YAAL,CAAmB/tB,IAAnB,CAAyB,GAAIirB,gBAAJ,CAAqBxuC,UAAW,CAAX,CAArB,CAAqCA,UAAW,CAAX,CAArC,CAAzB,CAAP,CAEH,CAED,GAAKujB,OAAS,OAAd,CAAwB,CAEpB/zB,QAAQgK,IAAR,CAAc,yEAAd,EACA,KAAK63C,QAAL,CAAep/B,SAAf,EAEA,MAAO,KAAP,CAEH,CAED,KAAK6W,UAAL,CAAiBvF,IAAjB,EAA0BtR,SAA1B,CAEA,MAAO,KAAP,CAEH,CAjDiF,CAmDlFs/B,aAAc,sBAAWhuB,IAAX,CAAkB,CAE5B,MAAO,MAAKuF,UAAL,CAAiBvF,IAAjB,CAAP,CAEH,CAvDiF,CAyDlFiuB,gBAAiB,yBAAWjuB,IAAX,CAAkB,CAE/B,MAAO,MAAKuF,UAAL,CAAiBvF,IAAjB,CAAP,CAEA,MAAO,KAAP,CAEH,CA/DiF,CAiElFkuB,SAAU,kBAAWjhD,KAAX,CAAkBynB,KAAlB,CAAyBuvB,aAAzB,CAAyC,CAE/C,KAAKqC,MAAL,CAAYn8C,IAAZ,CAAkB,CAEd8C,MAAOA,KAFO,CAGdynB,MAAOA,KAHO,CAIduvB,cAAeA,gBAAkBv2C,SAAlB,CAA8Bu2C,aAA9B,CAA8C,CAJ/C,CAAlB,EAQH,CA3EiF,CA6ElFkK,YAAa,sBAAY,CAErB,KAAK7H,MAAL,CAAc,EAAd,CAEH,CAjFiF,CAmFlF8H,aAAc,sBAAWnhD,KAAX,CAAkBynB,KAAlB,CAA0B,CAEpC,KAAKk5B,SAAL,CAAe3gD,KAAf,CAAuBA,KAAvB,CACA,KAAK2gD,SAAL,CAAel5B,KAAf,CAAuBA,KAAvB,CAEH,CAxFiF,CA0FlF4rB,YAAa,qBAAWxqC,MAAX,CAAoB,CAE7B,GAAIzO,UAAW,KAAKk+B,UAAL,CAAgBl+B,QAA/B,CAEA,GAAKA,WAAaqG,SAAlB,CAA8B,CAE1BoI,OAAO2e,sBAAP,CAA+BptB,QAA/B,EACAA,SAASgnD,WAAT,CAAuB,IAAvB,CAEH,CAED,GAAIpwB,QAAS,KAAKsH,UAAL,CAAgBtH,MAA7B,CAEA,GAAKA,SAAWvwB,SAAhB,CAA4B,CAExB,GAAIo8B,cAAe,GAAIrL,QAAJ,GAAcI,eAAd,CAA+B/oB,MAA/B,CAAnB,CAEAg0B,aAAarV,sBAAb,CAAqCwJ,MAArC,EACAA,OAAOowB,WAAP,CAAqB,IAArB,CAEH,CAED,GAAK,KAAKvJ,WAAL,GAAqB,IAA1B,CAAiC,CAE7B,KAAKW,kBAAL,GAEH,CAED,GAAK,KAAKla,cAAL,GAAwB,IAA7B,CAAoC,CAEhC,KAAKC,qBAAL,GAEH,CAED,MAAO,KAAP,CAEH,CA9HiF,CAgIlFsV,QAAS,UAAY,CAEjB;AAEA,GAAIlX,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAAS+xB,QAAT,CAAkBpsC,KAAlB,CAA0B,CAE7Bk1B,GAAG7T,aAAH,CAAkBrhB,KAAlB,EAEA,KAAK4rC,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBQ,EAhIyE,CAkJlFmX,QAAS,UAAY,CAEjB;AAEA,GAAInX,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAASgyB,QAAT,CAAkBrsC,KAAlB,CAA0B,CAE7Bk1B,GAAG5T,aAAH,CAAkBthB,KAAlB,EAEA,KAAK4rC,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBQ,EAlJyE,CAoKlFoX,QAAS,UAAY,CAEjB;AAEA,GAAIpX,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAASiyB,QAAT,CAAkBtsC,KAAlB,CAA0B,CAE7Bk1B,GAAG3T,aAAH,CAAkBvhB,KAAlB,EAEA,KAAK4rC,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBQ,EApKyE,CAsLlFxK,UAAW,UAAY,CAEnB;AAEA,GAAIwK,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAASqQ,UAAT,CAAoB93B,CAApB,CAAuBC,CAAvB,CAA0BC,CAA1B,CAA8B,CAEjCoiC,GAAG9T,eAAH,CAAoBxuB,CAApB,CAAuBC,CAAvB,CAA0BC,CAA1B,EAEA,KAAK84C,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBU,EAtLuE,CAwMlF13B,MAAO,UAAY,CAEf;AAEA,GAAI03B,IAAK,GAAI7a,QAAJ,EAAT,CAEA,MAAO,SAAS7c,MAAT,CAAgB5K,CAAhB,CAAmBC,CAAnB,CAAsBC,CAAtB,CAA0B,CAE7BoiC,GAAGtT,SAAH,CAAchvB,CAAd,CAAiBC,CAAjB,CAAoBC,CAApB,EAEA,KAAK84C,WAAL,CAAkB1W,EAAlB,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAhBM,EAxM2E,CA0NlFv3B,OAAQ,UAAY,CAEhB,GAAIqzC,KAAM,GAAI/6C,SAAJ,EAAV,CAEA,MAAO,SAAS0H,OAAT,CAAiBulB,MAAjB,CAA0B,CAE7B8tB,IAAIrzC,MAAJ,CAAYulB,MAAZ,EAEA8tB,IAAI/kB,YAAJ,GAEA,KAAK2f,WAAL,CAAkBoF,IAAI5vC,MAAtB,EAEH,CARD,CAUH,CAdO,EA1N0E,CA0OlF2C,OAAQ,UAAY,CAEhB,GAAI1H,QAAS,GAAInD,QAAJ,EAAb,CAEA,MAAO,SAAS6K,OAAT,EAAkB,CAErB,KAAKgtC,kBAAL,GAEA,KAAKX,WAAL,CAAiBlgB,SAAjB,CAA4B7zB,MAA5B,EAAqC2c,MAArC,GAEA,KAAK0R,SAAL,CAAgBruB,OAAOzJ,CAAvB,CAA0ByJ,OAAOxJ,CAAjC,CAAoCwJ,OAAOvJ,CAA3C,EAEA,MAAO,KAAP,CAEH,CAVD,CAYH,CAhBO,EA1O0E,CA4PlFg9B,cAAe,uBAAWh3B,MAAX,CAAoB,CAE/B;AAEA,GAAI23B,UAAW33B,OAAO23B,QAAtB,CAEA,GAAK33B,OAAO8gD,QAAP,EAAmB9gD,OAAO+gD,MAA/B,CAAwC,CAEpC,GAAI1I,WAAY,GAAI8G,uBAAJ,CAA4BxnB,SAASE,QAAT,CAAkB3vB,MAAlB,CAA2B,CAAvD,CAA0D,CAA1D,CAAhB,CACA,GAAI4uC,QAAS,GAAIqI,uBAAJ,CAA4BxnB,SAASmf,MAAT,CAAgB5uC,MAAhB,CAAyB,CAArD,CAAwD,CAAxD,CAAb,CAEA,KAAKq4C,YAAL,CAAmB,UAAnB,CAA+BlI,UAAUiG,iBAAV,CAA6B3mB,SAASE,QAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,OAAnB,CAA4BzJ,OAAOqH,eAAP,CAAwBxmB,SAASmf,MAAjC,CAA5B,EAEA,GAAKnf,SAAS0f,aAAT,EAA0B1f,SAAS0f,aAAT,CAAuBnvC,MAAvB,GAAkCyvB,SAASE,QAAT,CAAkB3vB,MAAnF,CAA4F,CAExF,GAAImvC,eAAgB,GAAI8H,uBAAJ,CAA4BxnB,SAAS0f,aAAT,CAAuBnvC,MAAnD,CAA2D,CAA3D,CAApB,CAEA,KAAKq4C,YAAL,CAAmB,cAAnB,CAAmClJ,cAAc6G,SAAd,CAAyBvmB,SAAS0f,aAAlC,CAAnC,EAEH,CAED,GAAK1f,SAASoG,cAAT,GAA4B,IAAjC,CAAwC,CAEpC,KAAKA,cAAL,CAAsBpG,SAASoG,cAAT,CAAwBnhC,KAAxB,EAAtB,CAEH,CAED,GAAK+6B,SAAS2f,WAAT,GAAyB,IAA9B,CAAqC,CAEjC,KAAKA,WAAL,CAAmB3f,SAAS2f,WAAT,CAAqB16C,KAArB,EAAnB,CAEH,CAEJ,CA5BD,IA4BO,IAAKoD,OAAOm7C,MAAZ,CAAqB,CAExB,GAAKxjB,UAAYA,SAASC,UAA1B,CAAuC,CAEnC,KAAK2nB,YAAL,CAAmB5nB,QAAnB,EAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CA1SiF,CA4SlFnB,cAAe,uBAAWC,MAAX,CAAoB,CAE/B,GAAI58B,UAAW,EAAf,CAEA,IAAM,GAAIiS,GAAI,CAAR,CAAW6H,EAAI8iB,OAAOvuB,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAIwrB,OAAQb,OAAQ3qB,CAAR,CAAZ,CACAjS,SAAS8C,IAAT,CAAe26B,MAAMx9B,CAArB,CAAwBw9B,MAAMv9B,CAA9B,CAAiCu9B,MAAMt9B,CAAN,EAAW,CAA5C,EAEH,CAED,KAAKumD,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtlD,QAA5B,CAAsC,CAAtC,CAA/B,EAEA,MAAO,KAAP,CAEH,CA3TiF,CA6TlFmnD,iBAAkB,0BAAWhhD,MAAX,CAAoB,CAElC,GAAI23B,UAAW33B,OAAO23B,QAAtB,CAEA,GAAK33B,OAAOm7C,MAAZ,CAAqB,CAEjB,GAAI8F,QAAStpB,SAASupB,gBAAtB,CAEA,GAAKvpB,SAAS4f,kBAAT,GAAgC,IAArC,CAA4C,CAExC0J,OAAS/gD,SAAT,CACAy3B,SAAS4f,kBAAT,CAA8B,KAA9B,CAEH,CAED,GAAK0J,SAAW/gD,SAAhB,CAA4B,CAExB,MAAO,MAAKq/C,YAAL,CAAmB5nB,QAAnB,CAAP,CAEH,CAEDspB,OAAOzJ,kBAAP,CAA4B7f,SAAS6f,kBAArC,CACAyJ,OAAOvJ,iBAAP,CAA2B/f,SAAS+f,iBAApC,CACAuJ,OAAOtJ,gBAAP,CAA0BhgB,SAASggB,gBAAnC,CACAsJ,OAAOxJ,aAAP,CAAuB9f,SAAS8f,aAAhC,CACAwJ,OAAOpJ,gBAAP,CAA0BlgB,SAASkgB,gBAAnC,CAEAlgB,SAAS6f,kBAAT,CAA8B,KAA9B,CACA7f,SAAS+f,iBAAT,CAA6B,KAA7B,CACA/f,SAASggB,gBAAT,CAA4B,KAA5B,CACAhgB,SAAS8f,aAAT,CAAyB,KAAzB,CACA9f,SAASkgB,gBAAT,CAA4B,KAA5B,CAEAlgB,SAAWspB,MAAX,CAEH,CAED,GAAI//B,UAAJ,CAEA,GAAKyW,SAAS6f,kBAAT,GAAgC,IAArC,CAA4C,CAExCt2B,UAAY,KAAK6W,UAAL,CAAgBl+B,QAA5B,CAEA,GAAKqnB,YAAchhB,SAAnB,CAA+B,CAE3BghB,UAAUo9B,iBAAV,CAA6B3mB,SAASE,QAAtC,EACA3W,UAAU2/B,WAAV,CAAwB,IAAxB,CAEH,CAEDlpB,SAAS6f,kBAAT,CAA8B,KAA9B,CAEH,CAED,GAAK7f,SAAS+f,iBAAT,GAA+B,IAApC,CAA2C,CAEvCx2B,UAAY,KAAK6W,UAAL,CAAgBtH,MAA5B,CAEA,GAAKvP,YAAchhB,SAAnB,CAA+B,CAE3BghB,UAAUo9B,iBAAV,CAA6B3mB,SAAS2gB,OAAtC,EACAp3B,UAAU2/B,WAAV,CAAwB,IAAxB,CAEH,CAEDlpB,SAAS+f,iBAAT,CAA6B,KAA7B,CAEH,CAED,GAAK/f,SAASggB,gBAAT,GAA8B,IAAnC,CAA0C,CAEtCz2B,UAAY,KAAK6W,UAAL,CAAgB/7B,KAA5B,CAEA,GAAKklB,YAAchhB,SAAnB,CAA+B,CAE3BghB,UAAUi9B,eAAV,CAA2BxmB,SAASmf,MAApC,EACA51B,UAAU2/B,WAAV,CAAwB,IAAxB,CAEH,CAEDlpB,SAASggB,gBAAT,CAA4B,KAA5B,CAEH,CAED,GAAKhgB,SAAS8f,aAAd,CAA8B,CAE1Bv2B,UAAY,KAAK6W,UAAL,CAAgB1D,EAA5B,CAEA,GAAKnT,YAAchhB,SAAnB,CAA+B,CAE3BghB,UAAUk9B,iBAAV,CAA6BzmB,SAAS4gB,GAAtC,EACAr3B,UAAU2/B,WAAV,CAAwB,IAAxB,CAEH,CAEDlpB,SAAS8f,aAAT,CAAyB,KAAzB,CAEH,CAED,GAAK9f,SAASigB,uBAAd,CAAwC,CAEpC12B,UAAY,KAAK6W,UAAL,CAAgBopB,YAA5B,CAEA,GAAKjgC,YAAchhB,SAAnB,CAA+B,CAE3BghB,UAAUg9B,SAAV,CAAqBvmB,SAAS0f,aAA9B,EACAn2B,UAAU2/B,WAAV,CAAwB,IAAxB,CAEH,CAEDlpB,SAASigB,uBAAT,CAAmC,KAAnC,CAEH,CAED,GAAKjgB,SAASkgB,gBAAd,CAAiC,CAE7BlgB,SAAS2nB,aAAT,CAAwBt/C,OAAO23B,QAA/B,EACA,KAAKmhB,MAAL,CAAcnhB,SAASmhB,MAAvB,CAEAnhB,SAASkgB,gBAAT,CAA4B,KAA5B,CAEH,CAED,MAAO,KAAP,CAEH,CA1biF,CA4blF0H,aAAc,sBAAW5nB,QAAX,CAAsB,CAEhCA,SAASupB,gBAAT,CAA4B,GAAI7B,eAAJ,GAAqBE,YAArB,CAAmC5nB,QAAnC,CAA5B,CAEA,MAAO,MAAKypB,kBAAL,CAAyBzpB,SAASupB,gBAAlC,CAAP,CAEH,CAlciF,CAoclFE,mBAAoB,4BAAWzpB,QAAX,CAAsB,CAEtC,GAAI0gB,WAAY,GAAIjJ,aAAJ,CAAkBzX,SAASE,QAAT,CAAkB3vB,MAAlB,CAA2B,CAA7C,CAAhB,CACA,KAAKq4C,YAAL,CAAmB,UAAnB,CAA+B,GAAI9C,gBAAJ,CAAqBpF,SAArB,CAAgC,CAAhC,EAAoCiG,iBAApC,CAAuD3mB,SAASE,QAAhE,CAA/B,EAEA,GAAKF,SAAS2gB,OAAT,CAAiBpwC,MAAjB,CAA0B,CAA/B,CAAmC,CAE/B,GAAIowC,SAAU,GAAIlJ,aAAJ,CAAkBzX,SAAS2gB,OAAT,CAAiBpwC,MAAjB,CAA0B,CAA5C,CAAd,CACA,KAAKq4C,YAAL,CAAmB,QAAnB,CAA6B,GAAI9C,gBAAJ,CAAqBnF,OAArB,CAA8B,CAA9B,EAAkCgG,iBAAlC,CAAqD3mB,SAAS2gB,OAA9D,CAA7B,EAEH,CAED,GAAK3gB,SAASmf,MAAT,CAAgB5uC,MAAhB,CAAyB,CAA9B,CAAkC,CAE9B,GAAI4uC,QAAS,GAAI1H,aAAJ,CAAkBzX,SAASmf,MAAT,CAAgB5uC,MAAhB,CAAyB,CAA3C,CAAb,CACA,KAAKq4C,YAAL,CAAmB,OAAnB,CAA4B,GAAI9C,gBAAJ,CAAqB3G,MAArB,CAA6B,CAA7B,EAAiCqH,eAAjC,CAAkDxmB,SAASmf,MAA3D,CAA5B,EAEH,CAED,GAAKnf,SAAS4gB,GAAT,CAAarwC,MAAb,CAAsB,CAA3B,CAA+B,CAE3B,GAAIqwC,KAAM,GAAInJ,aAAJ,CAAkBzX,SAAS4gB,GAAT,CAAarwC,MAAb,CAAsB,CAAxC,CAAV,CACA,KAAKq4C,YAAL,CAAmB,IAAnB,CAAyB,GAAI9C,gBAAJ,CAAqBlF,GAArB,CAA0B,CAA1B,EAA8B6F,iBAA9B,CAAiDzmB,SAAS4gB,GAA1D,CAAzB,EAEH,CAED,GAAK5gB,SAAS6gB,IAAT,CAActwC,MAAd,CAAuB,CAA5B,CAAgC,CAE5B,GAAIswC,MAAO,GAAIpJ,aAAJ,CAAkBzX,SAAS6gB,IAAT,CAActwC,MAAd,CAAuB,CAAzC,CAAX,CACA,KAAKq4C,YAAL,CAAmB,KAAnB,CAA0B,GAAI9C,gBAAJ,CAAqBjF,IAArB,CAA2B,CAA3B,EAA+B4F,iBAA/B,CAAkDzmB,SAAS6gB,IAA3D,CAA1B,EAEH,CAED;AAEA,KAAKM,MAAL,CAAcnhB,SAASmhB,MAAvB,CAEA;AAEA,IAAM,GAAItmB,KAAV,GAAkBmF,UAASsf,YAA3B,CAA0C,CAEtC,GAAIxjC,OAAQ,EAAZ,CACA,GAAIwjC,cAAetf,SAASsf,YAAT,CAAuBzkB,IAAvB,CAAnB,CAEA,IAAM,GAAI1mB,GAAI,CAAR,CAAW6H,EAAIsjC,aAAa/uC,MAAlC,CAA0C4D,EAAI6H,CAA9C,CAAiD7H,GAAjD,CAAwD,CAEpD,GAAIuxC,aAAcpG,aAAcnrC,CAAd,CAAlB,CAEA,GAAIoV,WAAY,GAAIi+B,uBAAJ,CAA4B9B,YAAYn1C,MAAZ,CAAqB,CAAjD,CAAoD,CAApD,CAAhB,CAEAuL,MAAM9W,IAAN,CAAYukB,UAAUo9B,iBAAV,CAA6BjB,WAA7B,CAAZ,EAEH,CAED,KAAK8C,eAAL,CAAsB3tB,IAAtB,EAA+B/e,KAA/B,CAEH,CAED;AAEA,GAAKkkB,SAASyf,WAAT,CAAqBlvC,MAArB,CAA8B,CAAnC,CAAuC,CAEnC,GAAIkvC,aAAc,GAAI+H,uBAAJ,CAA4BxnB,SAASyf,WAAT,CAAqBlvC,MAArB,CAA8B,CAA1D,CAA6D,CAA7D,CAAlB,CACA,KAAKq4C,YAAL,CAAmB,WAAnB,CAAgCnJ,YAAYmH,iBAAZ,CAA+B5mB,SAASyf,WAAxC,CAAhC,EAEH,CAED,GAAKzf,SAASwf,WAAT,CAAqBjvC,MAArB,CAA8B,CAAnC,CAAuC,CAEnC,GAAIivC,aAAc,GAAIgI,uBAAJ,CAA4BxnB,SAASwf,WAAT,CAAqBjvC,MAArB,CAA8B,CAA1D,CAA6D,CAA7D,CAAlB,CACA,KAAKq4C,YAAL,CAAmB,YAAnB,CAAiCpJ,YAAYoH,iBAAZ,CAA+B5mB,SAASwf,WAAxC,CAAjC,EAEH,CAED;AAEA,GAAKxf,SAASoG,cAAT,GAA4B,IAAjC,CAAwC,CAEpC,KAAKA,cAAL,CAAsBpG,SAASoG,cAAT,CAAwBnhC,KAAxB,EAAtB,CAEH,CAED,GAAK+6B,SAAS2f,WAAT,GAAyB,IAA9B,CAAqC,CAEjC,KAAKA,WAAL,CAAmB3f,SAAS2f,WAAT,CAAqB16C,KAArB,EAAnB,CAEH,CAED,MAAO,KAAP,CAEH,CA9hBiF,CAgiBlFq7C,mBAAoB,6BAAY,CAE5B,GAAK,KAAKX,WAAL,GAAqB,IAA1B,CAAiC,CAE7B,KAAKA,WAAL,CAAmB,GAAIxhB,KAAJ,EAAnB,CAEH,CAED,GAAIj8B,UAAW,KAAKk+B,UAAL,CAAgBl+B,QAA/B,CAEA,GAAKA,WAAaqG,SAAlB,CAA8B,CAE1B,KAAKo3C,WAAL,CAAiB/gB,sBAAjB,CAAyC18B,QAAzC,EAEH,CAJD,IAIO,CAEH,KAAKy9C,WAAL,CAAiB5gB,SAAjB,GAEH,CAED,GAAK2qB,MAAO,KAAK/J,WAAL,CAAiB/yC,GAAjB,CAAqBzK,CAA5B,GAAmCunD,MAAO,KAAK/J,WAAL,CAAiB/yC,GAAjB,CAAqBxK,CAA5B,CAAnC,EAAsEsnD,MAAO,KAAK/J,WAAL,CAAiB/yC,GAAjB,CAAqBvK,CAA5B,CAA3E,CAA6G,CAEzGyE,QAAQ+iB,KAAR,CAAe,mIAAf,CAAoJ,IAApJ,EAEH,CAEJ,CA1jBiF,CA4jBlFwc,sBAAuB,UAAY,CAE/B,GAAI9G,KAAM,GAAIpB,KAAJ,EAAV,CACA,GAAI1L,QAAS,GAAIhqB,QAAJ,EAAb,CAEA,MAAO,SAAS49B,sBAAT,EAAiC,CAEpC,GAAK,KAAKD,cAAL,GAAwB,IAA7B,CAAoC,CAEhC,KAAKA,cAAL,CAAsB,GAAItE,OAAJ,EAAtB,CAEH,CAED,GAAI5/B,UAAW,KAAKk+B,UAAL,CAAgBl+B,QAA/B,CAEA,GAAKA,QAAL,CAAgB,CAEZ,GAAIoR,QAAS,KAAK8yB,cAAL,CAAoB9yB,MAAjC,CAEAisB,IAAIX,sBAAJ,CAA4B18B,QAA5B,EACAq9B,IAAIE,SAAJ,CAAensB,MAAf,EAEA;AACA;AAEA,GAAI8vB,aAAc,CAAlB,CAEA,IAAM,GAAIjvB,GAAI,CAAR,CAAW6qB,GAAK98B,SAASqtB,KAA/B,CAAsCpb,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjDse,OAAOtwB,CAAP,CAAWD,SAASsnB,IAAT,CAAerV,CAAf,CAAX,CACAse,OAAOrwB,CAAP,CAAWF,SAASunB,IAAT,CAAetV,CAAf,CAAX,CACAse,OAAOpwB,CAAP,CAAWH,SAASstB,IAAT,CAAerb,CAAf,CAAX,CACAivB,YAAcv9B,KAAK8G,GAAL,CAAUy2B,WAAV,CAAuB9vB,OAAOlG,iBAAP,CAA0BqlB,MAA1B,CAAvB,CAAd,CAEH,CAED,KAAK2T,cAAL,CAAoBt5B,MAApB,CAA6BjH,KAAK0M,IAAL,CAAW6wB,WAAX,CAA7B,CAEA,GAAKsmB,MAAO,KAAKtjB,cAAL,CAAoBt5B,MAA3B,CAAL,CAA2C,CAEvChG,QAAQ+iB,KAAR,CAAe,8HAAf,CAA+I,IAA/I,EAEH,CAEJ,CAEJ,CAzCD,CA2CH,CAhDsB,EA5jB2D,CA8mBlFw3B,mBAAoB,6BAAY,CAE5B;AAEH,CAlnBiF,CAonBlFO,qBAAsB,+BAAY,CAE9B,GAAItmC,OAAQ,KAAKA,KAAjB,CACA,GAAI8kB,YAAa,KAAKA,UAAtB,CACA,GAAI+gB,QAAS,KAAKA,MAAlB,CAEA,GAAK/gB,WAAWl+B,QAAhB,CAA2B,CAEvB,GAAIw+C,WAAYtgB,WAAWl+B,QAAX,CAAoB4Z,KAApC,CAEA,GAAKskB,WAAWtH,MAAX,GAAsBvwB,SAA3B,CAAuC,CAEnC,KAAKqgD,YAAL,CAAmB,QAAnB,CAA6B,GAAI9C,gBAAJ,CAAqB,GAAIrO,aAAJ,CAAkBiJ,UAAUnwC,MAA5B,CAArB,CAA2D,CAA3D,CAA7B,EAEH,CAJD,IAIO,CAEH;AAEA,GAAIuL,OAAQskB,WAAWtH,MAAX,CAAkBhd,KAA9B,CAEA,IAAM,GAAI3H,GAAI,CAAR,CAAW6qB,GAAKljB,MAAMvL,MAA5B,CAAoC4D,EAAI6qB,EAAxC,CAA4C7qB,GAA5C,CAAmD,CAE/C2H,MAAO3H,CAAP,EAAa,CAAb,CAEH,CAEJ,CAED,GAAIwsC,SAAUvgB,WAAWtH,MAAX,CAAkBhd,KAAhC,CAEA,GAAI2lC,GAAJ,CAAQC,EAAR,CAAYC,EAAZ,CACA,GAAIgI,IAAK,GAAIlhD,QAAJ,EAAT,CAAwBmhD,GAAK,GAAInhD,QAAJ,EAA7B,CAA4CohD,GAAK,GAAIphD,QAAJ,EAAjD,CACA,GAAI64C,IAAK,GAAI74C,QAAJ,EAAT,CAAwB84C,GAAK,GAAI94C,QAAJ,EAA7B,CAEA;AAEA,GAAK6S,KAAL,CAAa,CAET,GAAImlC,SAAUnlC,MAAMQ,KAApB,CAEA,GAAKqlC,OAAO5wC,MAAP,GAAkB,CAAvB,CAA2B,CAEvB,KAAKw4C,QAAL,CAAe,CAAf,CAAkBtI,QAAQlwC,MAA1B,EAEH,CAED,IAAM,GAAIkxB,GAAI,CAAR,CAAW4e,GAAKc,OAAO5wC,MAA7B,CAAqCkxB,EAAI4e,EAAzC,CAA6C,EAAG5e,CAAhD,CAAoD,CAEhD,GAAI2f,OAAQD,OAAQ1f,CAAR,CAAZ,CAEA,GAAI35B,OAAQs5C,MAAMt5C,KAAlB,CACA,GAAIynB,OAAQ6xB,MAAM7xB,KAAlB,CAEA,IAAM,GAAIpb,GAAIrM,KAAR,CAAek3B,GAAKl3B,MAAQynB,KAAlC,CAAyCpb,EAAI6qB,EAA7C,CAAiD7qB,GAAK,CAAtD,CAA0D,CAEtDstC,GAAKhB,QAAStsC,EAAI,CAAb,EAAmB,CAAxB,CACAutC,GAAKjB,QAAStsC,EAAI,CAAb,EAAmB,CAAxB,CACAwtC,GAAKlB,QAAStsC,EAAI,CAAb,EAAmB,CAAxB,CAEAw1C,GAAGvgC,SAAH,CAAcs3B,SAAd,CAAyBe,EAAzB,EACAmI,GAAGxgC,SAAH,CAAcs3B,SAAd,CAAyBgB,EAAzB,EACAmI,GAAGzgC,SAAH,CAAcs3B,SAAd,CAAyBiB,EAAzB,EAEAL,GAAG7vC,UAAH,CAAeo4C,EAAf,CAAmBD,EAAnB,EACArI,GAAG9vC,UAAH,CAAek4C,EAAf,CAAmBC,EAAnB,EACAtI,GAAGnpB,KAAH,CAAUopB,EAAV,EAEAZ,QAASc,EAAT,GAAiBH,GAAGn/C,CAApB,CACAw+C,QAASc,GAAK,CAAd,GAAqBH,GAAGl/C,CAAxB,CACAu+C,QAASc,GAAK,CAAd,GAAqBH,GAAGj/C,CAAxB,CAEAs+C,QAASe,EAAT,GAAiBJ,GAAGn/C,CAApB,CACAw+C,QAASe,GAAK,CAAd,GAAqBJ,GAAGl/C,CAAxB,CACAu+C,QAASe,GAAK,CAAd,GAAqBJ,GAAGj/C,CAAxB,CAEAs+C,QAASgB,EAAT,GAAiBL,GAAGn/C,CAApB,CACAw+C,QAASgB,GAAK,CAAd,GAAqBL,GAAGl/C,CAAxB,CACAu+C,QAASgB,GAAK,CAAd,GAAqBL,GAAGj/C,CAAxB,CAEH,CAEJ,CAEJ,CA/CD,IA+CO,CAEH;AAEA,IAAM,GAAI8R,GAAI,CAAR,CAAW6qB,GAAK0hB,UAAUnwC,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAK,CAArD,CAAyD,CAErDw1C,GAAGvgC,SAAH,CAAcs3B,SAAd,CAAyBvsC,CAAzB,EACAy1C,GAAGxgC,SAAH,CAAcs3B,SAAd,CAAyBvsC,EAAI,CAA7B,EACA01C,GAAGzgC,SAAH,CAAcs3B,SAAd,CAAyBvsC,EAAI,CAA7B,EAEAmtC,GAAG7vC,UAAH,CAAeo4C,EAAf,CAAmBD,EAAnB,EACArI,GAAG9vC,UAAH,CAAek4C,EAAf,CAAmBC,EAAnB,EACAtI,GAAGnpB,KAAH,CAAUopB,EAAV,EAEAZ,QAASxsC,CAAT,EAAemtC,GAAGn/C,CAAlB,CACAw+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGl/C,CAAtB,CACAu+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGj/C,CAAtB,CAEAs+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGn/C,CAAtB,CACAw+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGl/C,CAAtB,CACAu+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGj/C,CAAtB,CAEAs+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGn/C,CAAtB,CACAw+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGl/C,CAAtB,CACAu+C,QAASxsC,EAAI,CAAb,EAAmBmtC,GAAGj/C,CAAtB,CAEH,CAEJ,CAED,KAAKynD,gBAAL,GAEA1pB,WAAWtH,MAAX,CAAkBowB,WAAlB,CAAgC,IAAhC,CAEH,CAEJ,CA3uBiF,CA6uBlFtb,MAAO,eAAW5N,QAAX,CAAqBp0B,MAArB,CAA8B,CAEjC,GAAK,EAAIo0B,UAAYA,SAASG,gBAAzB,CAAL,CAAmD,CAE/Cr5B,QAAQ+iB,KAAR,CAAe,iFAAf,CAAkGmW,QAAlG,EACA,OAEH,CAED,GAAKp0B,SAAWrD,SAAhB,CAA4B,CAExBqD,OAAS,CAAT,CAEA9E,QAAQgK,IAAR,CACI,sFACE,qEAFN,EAKH,CAED,GAAIsvB,YAAa,KAAKA,UAAtB,CAEA,IAAM,GAAIwd,IAAV,GAAiBxd,WAAjB,CAA8B,CAE1B,GAAKJ,SAASI,UAAT,CAAqBwd,GAArB,IAA+Br1C,SAApC,CAAgD,SAEhD,GAAIwhD,YAAa3pB,WAAYwd,GAAZ,CAAjB,CACA,GAAIoM,iBAAkBD,WAAWjuC,KAAjC,CAEA,GAAImuC,YAAajqB,SAASI,UAAT,CAAqBwd,GAArB,CAAjB,CACA,GAAIsM,iBAAkBD,WAAWnuC,KAAjC,CAEA,GAAIquC,eAAgBF,WAAWlE,QAA/B,CAEA,IAAM,GAAI5xC,GAAI,CAAR,CAAWstB,EAAI0oB,cAAgBv+C,MAArC,CAA6CuI,EAAI+1C,gBAAgB35C,MAAjE,CAAyE4D,IAAMstB,GAA/E,CAAsF,CAElFuoB,gBAAiBvoB,CAAjB,EAAuByoB,gBAAiB/1C,CAAjB,CAAvB,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAzxBiF,CA2xBlF21C,iBAAkB,UAAY,CAE1B,GAAIr3B,QAAS,GAAIhqB,QAAJ,EAAb,CAEA,MAAO,SAASqhD,iBAAT,EAA4B,CAE/B,GAAInJ,SAAU,KAAKvgB,UAAL,CAAgBtH,MAA9B,CAEA,IAAM,GAAI3kB,GAAI,CAAR,CAAW6qB,GAAK2hB,QAAQpxB,KAA9B,CAAqCpb,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhDse,OAAOtwB,CAAP,CAAWw+C,QAAQn3B,IAAR,CAAcrV,CAAd,CAAX,CACAse,OAAOrwB,CAAP,CAAWu+C,QAAQl3B,IAAR,CAActV,CAAd,CAAX,CACAse,OAAOpwB,CAAP,CAAWs+C,QAAQnxB,IAAR,CAAcrb,CAAd,CAAX,CAEAse,OAAO9J,SAAP,GAEAg4B,QAAQjxB,MAAR,CAAgBvb,CAAhB,CAAmBse,OAAOtwB,CAA1B,CAA6BswB,OAAOrwB,CAApC,CAAuCqwB,OAAOpwB,CAA9C,EAEH,CAEJ,CAhBD,CAkBH,CAtBiB,EA3xBgE,CAmzBlF+nD,aAAc,uBAAY,CAEtB,GAAK,KAAK9uC,KAAL,GAAe,IAApB,CAA2B,CAEvBxU,QAAQgK,IAAR,CAAc,uEAAd,EACA,MAAO,KAAP,CAEH,CAED,GAAIu5C,WAAY,GAAI9B,eAAJ,EAAhB,CAEA,GAAI9H,SAAU,KAAKnlC,KAAL,CAAWQ,KAAzB,CACA,GAAIskB,YAAa,KAAKA,UAAtB,CAEA,IAAM,GAAIvF,KAAV,GAAkBuF,WAAlB,CAA+B,CAE3B,GAAI7W,WAAY6W,WAAYvF,IAAZ,CAAhB,CAEA,GAAI/e,OAAQyN,UAAUzN,KAAtB,CACA,GAAIiqC,UAAWx8B,UAAUw8B,QAAzB,CAEA,GAAIuE,QAAS,GAAIxuC,OAAM1I,WAAV,CAAuBqtC,QAAQlwC,MAAR,CAAiBw1C,QAAxC,CAAb,CAEA,GAAIzqC,OAAQ,CAAZ,CAAegrC,OAAS,CAAxB,CAEA,IAAM,GAAInyC,GAAI,CAAR,CAAW6H,EAAIykC,QAAQlwC,MAA7B,CAAqC4D,EAAI6H,CAAzC,CAA4C7H,GAA5C,CAAmD,CAE/CmH,MAAQmlC,QAAStsC,CAAT,EAAe4xC,QAAvB,CAEA,IAAM,GAAItkB,GAAI,CAAd,CAAiBA,EAAIskB,QAArB,CAA+BtkB,GAA/B,CAAsC,CAElC6oB,OAAQhE,QAAR,EAAsBxqC,MAAOR,OAAP,CAAtB,CAEH,CAEJ,CAED+uC,UAAUzB,YAAV,CAAwB/tB,IAAxB,CAA8B,GAAIirB,gBAAJ,CAAqBwE,MAArB,CAA6BvE,QAA7B,CAA9B,EAEH,CAED,GAAI5E,QAAS,KAAKA,MAAlB,CAEA,IAAM,GAAIhtC,GAAI,CAAR,CAAW6H,EAAImlC,OAAO5wC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAIitC,OAAQD,OAAQhtC,CAAR,CAAZ,CACAk2C,UAAUtB,QAAV,CAAoB3H,MAAMt5C,KAA1B,CAAiCs5C,MAAM7xB,KAAvC,CAA8C6xB,MAAMtC,aAApD,EAEH,CAED,MAAOuL,UAAP,CAEH,CAv2BiF,CAy2BlF5uB,OAAQ,iBAAY,CAEhB,GAAI90B,MAAO,CACPy1B,SAAU,CACNd,QAAS,GADH,CAENptB,KAAM,gBAFA,CAGNmuB,UAAW,uBAHL,CADH,CAAX,CAQA;AAEA11B,KAAKwe,IAAL,CAAY,KAAKA,IAAjB,CACAxe,KAAKuH,IAAL,CAAY,KAAKA,IAAjB,CACA,GAAK,KAAK2sB,IAAL,GAAc,EAAnB,CAAwBl0B,KAAKk0B,IAAL,CAAY,KAAKA,IAAjB,CACxB,GAAK5nB,OAAOnJ,IAAP,CAAa,KAAKixC,QAAlB,EAA6BxqC,MAA7B,CAAsC,CAA3C,CAA+C5J,KAAKo0C,QAAL,CAAgB,KAAKA,QAArB,CAE/C,GAAK,KAAKsC,UAAL,GAAoB90C,SAAzB,CAAqC,CAEjC,GAAI80C,YAAa,KAAKA,UAAtB,CAEA,IAAM,GAAIO,IAAV,GAAiBP,WAAjB,CAA8B,CAE1B,GAAKA,WAAYO,GAAZ,IAAsBr1C,SAA3B,CAAuC5B,KAAMi3C,GAAN,EAAcP,WAAYO,GAAZ,CAAd,CAE1C,CAED,MAAOj3C,KAAP,CAEH,CAEDA,KAAKA,IAAL,CAAY,CAAEy5B,WAAY,EAAd,CAAZ,CAEA,GAAI9kB,OAAQ,KAAKA,KAAjB,CAEA,GAAKA,QAAU,IAAf,CAAsB,CAElB,GAAIQ,OAAQvF,MAAMvD,SAAN,CAAgB+I,KAAhB,CAAsBrF,IAAtB,CAA4B4E,MAAMQ,KAAlC,CAAZ,CAEAnV,KAAKA,IAAL,CAAU2U,KAAV,CAAkB,CACdpN,KAAMoN,MAAMQ,KAAN,CAAY1I,WAAZ,CAAwBynB,IADhB,CAEd/e,MAAOA,KAFO,CAAlB,CAKH,CAED,GAAIskB,YAAa,KAAKA,UAAtB,CAEA,IAAM,GAAIwd,IAAV,GAAiBxd,WAAjB,CAA8B,CAE1B,GAAI7W,WAAY6W,WAAYwd,GAAZ,CAAhB,CAEA,GAAI9hC,OAAQvF,MAAMvD,SAAN,CAAgB+I,KAAhB,CAAsBrF,IAAtB,CAA4B6S,UAAUzN,KAAtC,CAAZ,CAEAnV,KAAKA,IAAL,CAAUy5B,UAAV,CAAsBwd,GAAtB,EAA8B,CAC1BmI,SAAUx8B,UAAUw8B,QADM,CAE1B73C,KAAMqb,UAAUzN,KAAV,CAAgB1I,WAAhB,CAA4BynB,IAFR,CAG1B/e,MAAOA,KAHmB,CAI1BkqC,WAAYz8B,UAAUy8B,UAJI,CAA9B,CAOH,CAED,GAAI7E,QAAS,KAAKA,MAAlB,CAEA,GAAKA,OAAO5wC,MAAP,CAAgB,CAArB,CAAyB,CAErB5J,KAAKA,IAAL,CAAUw6C,MAAV,CAAmBlE,KAAKa,KAAL,CAAYb,KAAKC,SAAL,CAAgBiE,MAAhB,CAAZ,CAAnB,CAEH,CAED,GAAI/a,gBAAiB,KAAKA,cAA1B,CAEA,GAAKA,iBAAmB,IAAxB,CAA+B,CAE3Bz/B,KAAKA,IAAL,CAAUy/B,cAAV,CAA2B,CACvB9yB,OAAQ8yB,eAAe9yB,MAAf,CAAsB+V,OAAtB,EADe,CAEvBvc,OAAQs5B,eAAet5B,MAFA,CAA3B,CAKH,CAED,MAAOnG,KAAP,CAEH,CA77BiF,CA+7BlF1B,MAAO,gBAAY,CAEf;;;;;;;;;;;;;;;;;;;;;;MAwBA,MAAO,IAAIsjD,eAAJ,GAAqBn9C,IAArB,CAA2B,IAA3B,CAAP,CAEH,CA39BiF,CA69BlFA,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,GAAI+lB,KAAJ,CAAU1mB,CAAV,CAAa6H,CAAb,CAEA;AAEA,KAAKV,KAAL,CAAa,IAAb,CACA,KAAK8kB,UAAL,CAAkB,EAAlB,CACA,KAAKooB,eAAL,CAAuB,EAAvB,CACA,KAAKrH,MAAL,CAAc,EAAd,CACA,KAAKxB,WAAL,CAAmB,IAAnB,CACA,KAAKvZ,cAAL,CAAsB,IAAtB,CAEA;AAEA,KAAKvL,IAAL,CAAY/lB,OAAO+lB,IAAnB,CAEA;AAEA,GAAIvf,OAAQxG,OAAOwG,KAAnB,CAEA,GAAKA,QAAU,IAAf,CAAsB,CAElB,KAAKqtC,QAAL,CAAertC,MAAMrW,KAAN,EAAf,EAEH,CAED;AAEA,GAAIm7B,YAAatrB,OAAOsrB,UAAxB,CAEA,IAAMvF,IAAN,GAAcuF,WAAd,CAA2B,CAEvB,GAAI7W,WAAY6W,WAAYvF,IAAZ,CAAhB,CACA,KAAK+tB,YAAL,CAAmB/tB,IAAnB,CAAyBtR,UAAUtkB,KAAV,EAAzB,EAEH,CAED;AAEA,GAAIujD,iBAAkB1zC,OAAO0zC,eAA7B,CAEA,IAAM3tB,IAAN,GAAc2tB,gBAAd,CAAgC,CAE5B,GAAI1sC,OAAQ,EAAZ,CACA,GAAIyuC,gBAAiB/B,gBAAiB3tB,IAAjB,CAArB,CAA8C;AAE9C,IAAM1mB,EAAI,CAAJ,CAAO6H,EAAIuuC,eAAeh6C,MAAhC,CAAwC4D,EAAI6H,CAA5C,CAA+C7H,GAA/C,CAAsD,CAElD2H,MAAM9W,IAAN,CAAYulD,eAAgBp2C,CAAhB,EAAoBlP,KAApB,EAAZ,EAEH,CAED,KAAKujD,eAAL,CAAsB3tB,IAAtB,EAA+B/e,KAA/B,CAEH,CAED;AAEA,GAAIqlC,QAASrsC,OAAOqsC,MAApB,CAEA,IAAMhtC,EAAI,CAAJ,CAAO6H,EAAImlC,OAAO5wC,MAAxB,CAAgC4D,EAAI6H,CAApC,CAAuC7H,GAAvC,CAA8C,CAE1C,GAAIitC,OAAQD,OAAQhtC,CAAR,CAAZ,CACA,KAAK40C,QAAL,CAAe3H,MAAMt5C,KAArB,CAA4Bs5C,MAAM7xB,KAAlC,CAAyC6xB,MAAMtC,aAA/C,EAEH,CAED;AAEA,GAAIa,aAAc7qC,OAAO6qC,WAAzB,CAEA,GAAKA,cAAgB,IAArB,CAA4B,CAExB,KAAKA,WAAL,CAAmBA,YAAY16C,KAAZ,EAAnB,CAEH,CAED;AAEA,GAAImhC,gBAAiBtxB,OAAOsxB,cAA5B,CAEA,GAAKA,iBAAmB,IAAxB,CAA+B,CAE3B,KAAKA,cAAL,CAAsBA,eAAenhC,KAAf,EAAtB,CAEH,CAED;AAEA,KAAKwjD,SAAL,CAAe3gD,KAAf,CAAuBgN,OAAO2zC,SAAP,CAAiB3gD,KAAxC,CACA,KAAK2gD,SAAL,CAAel5B,KAAf,CAAuBza,OAAO2zC,SAAP,CAAiBl5B,KAAxC,CAEA;AAEA,KAAKwrB,QAAL,CAAgBjmC,OAAOimC,QAAvB,CAEA,MAAO,KAAP,CAEH,CAhkCiF,CAkkClFvtC,QAAS,kBAAY,CAEjB,KAAKjC,aAAL,CAAoB,CAAE2C,KAAM,SAAR,CAApB,EAEH,CAtkCiF,CAA3D,CAA3B,CA0kCA;;;OAKA;AAEA,QAASzJ,YAAT,CAAsBhB,KAAtB,CAA6BC,MAA7B,CAAqC6xC,KAArC,CAA4CiV,aAA5C,CAA2DC,cAA3D,CAA2EC,aAA3E,CAA2F,CAEvFxL,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,aAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd55C,MAAOA,KADO,CAEdC,OAAQA,MAFM,CAGd6xC,MAAOA,KAHO,CAIdiV,cAAeA,aAJD,CAKdC,eAAgBA,cALF,CAMdC,cAAeA,aAND,CAAlB,CASA,KAAKlK,kBAAL,CAAyB,GAAImK,kBAAJ,CAAuBlnD,KAAvB,CAA8BC,MAA9B,CAAsC6xC,KAAtC,CAA6CiV,aAA7C,CAA4DC,cAA5D,CAA4EC,aAA5E,CAAzB,EACA,KAAKjH,aAAL,GAEH,CAEDh/C,YAAYuO,SAAZ,CAAwBC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAAxB,CACAvO,YAAYuO,SAAZ,CAAsBI,WAAtB,CAAoC3O,WAApC,CAEA;AAEA,QAASkmD,kBAAT,CAA4BlnD,KAA5B,CAAmCC,MAAnC,CAA2C6xC,KAA3C,CAAkDiV,aAAlD,CAAiEC,cAAjE,CAAiFC,aAAjF,CAAiG,CAE7FnC,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd55C,MAAOA,KADO,CAEdC,OAAQA,MAFM,CAGd6xC,MAAOA,KAHO,CAIdiV,cAAeA,aAJD,CAKdC,eAAgBA,cALF,CAMdC,cAAeA,aAND,CAAlB,CASA,GAAIv/C,OAAQ,IAAZ,CAEA1H,MAAQA,OAAS,CAAjB,CACAC,OAASA,QAAU,CAAnB,CACA6xC,MAAQA,OAAS,CAAjB,CAEA;AAEAiV,cAAgB3kD,KAAKmT,KAAL,CAAYwxC,aAAZ,GAA+B,CAA/C,CACAC,eAAiB5kD,KAAKmT,KAAL,CAAYyxC,cAAZ,GAAgC,CAAjD,CACAC,cAAgB7kD,KAAKmT,KAAL,CAAY0xC,aAAZ,GAA+B,CAA/C,CAEA;AAEA,GAAIjK,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,GAAIgK,kBAAmB,CAAvB,CACA,GAAIC,YAAa,CAAjB,CAEA;AAEAC,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAAE,CAA7B,CAAgC,CAAE,CAAlC,CAAqCvV,KAArC,CAA4C7xC,MAA5C,CAAoDD,KAApD,CAA2DinD,aAA3D,CAA0ED,cAA1E,CAA0F,CAA1F,EAA+F;AAC/FK,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAA3B,CAA8B,CAAE,CAAhC,CAAmCvV,KAAnC,CAA0C7xC,MAA1C,CAAkD,CAAED,KAApD,CAA2DinD,aAA3D,CAA0ED,cAA1E,CAA0F,CAA1F,EAA+F;AAC/FK,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAA3B,CAA8B,CAA9B,CAAiCrnD,KAAjC,CAAwC8xC,KAAxC,CAA+C7xC,MAA/C,CAAuD8mD,aAAvD,CAAsEE,aAAtE,CAAqF,CAArF,EAA0F;AAC1FI,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAA3B,CAA8B,CAAE,CAAhC,CAAmCrnD,KAAnC,CAA0C8xC,KAA1C,CAAiD,CAAE7xC,MAAnD,CAA2D8mD,aAA3D,CAA0EE,aAA1E,CAAyF,CAAzF,EAA8F;AAC9FI,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAA3B,CAA8B,CAAE,CAAhC,CAAmCrnD,KAAnC,CAA0CC,MAA1C,CAAkD6xC,KAAlD,CAAyDiV,aAAzD,CAAwEC,cAAxE,CAAwF,CAAxF,EAA6F;AAC7FK,WAAY,GAAZ,CAAiB,GAAjB,CAAsB,GAAtB,CAA2B,CAAE,CAA7B,CAAgC,CAAE,CAAlC,CAAqCrnD,KAArC,CAA4CC,MAA5C,CAAoD,CAAE6xC,KAAtD,CAA6DiV,aAA7D,CAA4EC,cAA5E,CAA4F,CAA5F,EAAiG;AAEjG;AAEA,KAAK9B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEA,QAASkK,WAAT,CAAqB/c,CAArB,CAAwBr+B,CAAxB,CAA2B4X,CAA3B,CAA8ByjC,IAA9B,CAAoCC,IAApC,CAA0CvnD,KAA1C,CAAiDC,MAAjD,CAAyD6xC,KAAzD,CAAgE0V,KAAhE,CAAuEC,KAAvE,CAA8EpM,aAA9E,CAA8F,CAE1F,GAAIqM,cAAe1nD,MAAQwnD,KAA3B,CACA,GAAIG,eAAgB1nD,OAASwnD,KAA7B,CAEA,GAAIG,WAAY5nD,MAAQ,CAAxB,CACA,GAAI6nD,YAAa5nD,OAAS,CAA1B,CACA,GAAI6nD,WAAYhW,MAAQ,CAAxB,CAEA,GAAIiW,QAASP,MAAQ,CAArB,CACA,GAAIQ,QAASP,MAAQ,CAArB,CAEA,GAAIQ,eAAgB,CAApB,CACA,GAAIC,YAAa,CAAjB,CAEA,GAAIj0B,GAAJ,CAAQC,EAAR,CAEA,GAAIlF,QAAS,GAAIhqB,QAAJ,EAAb,CAEA;AAEA,IAAMkvB,GAAK,CAAX,CAAcA,GAAK8zB,MAAnB,CAA2B9zB,IAA3B,CAAmC,CAE/B,GAAIv1B,GAAIu1B,GAAKyzB,aAAL,CAAqBE,UAA7B,CAEA,IAAM5zB,GAAK,CAAX,CAAcA,GAAK8zB,MAAnB,CAA2B9zB,IAA3B,CAAmC,CAE/B,GAAIv1B,GAAIu1B,GAAKyzB,YAAL,CAAoBE,SAA5B,CAEA;AAEA54B,OAAQsb,CAAR,EAAc5rC,EAAI4oD,IAAlB,CACAt4B,OAAQ/iB,CAAR,EAActN,EAAI4oD,IAAlB,CACAv4B,OAAQnL,CAAR,EAAcikC,SAAd,CAEA;AAEArrB,SAASl7B,IAAT,CAAeytB,OAAOtwB,CAAtB,CAAyBswB,OAAOrwB,CAAhC,CAAmCqwB,OAAOpwB,CAA1C,EAEA;AAEAowB,OAAQsb,CAAR,EAAc,CAAd,CACAtb,OAAQ/iB,CAAR,EAAc,CAAd,CACA+iB,OAAQnL,CAAR,EAAciuB,MAAQ,CAAR,CAAY,CAAZ,CAAgB,CAAE,CAAhC,CAEA;AAEAoL,QAAQ37C,IAAR,CAAcytB,OAAOtwB,CAArB,CAAwBswB,OAAOrwB,CAA/B,CAAkCqwB,OAAOpwB,CAAzC,EAEA;AAEAu+C,IAAI57C,IAAJ,CAAU0yB,GAAKuzB,KAAf,EACArK,IAAI57C,IAAJ,CAAU,EAAM2yB,GAAKuzB,KAArB,EAEA;AAEAQ,eAAiB,CAAjB,CAEH,CAEJ,CAED;AAEA;AACA;AACA;AAEA,IAAM/zB,GAAK,CAAX,CAAcA,GAAKuzB,KAAnB,CAA0BvzB,IAA1B,CAAkC,CAE9B,IAAMD,GAAK,CAAX,CAAcA,GAAKuzB,KAAnB,CAA0BvzB,IAA1B,CAAkC,CAE9B,GAAI3d,GAAI6wC,iBAAmBlzB,EAAnB,CAAwB8zB,OAAS7zB,EAAzC,CACA,GAAIve,GAAIwxC,iBAAmBlzB,EAAnB,CAAwB8zB,QAAW7zB,GAAK,CAAhB,CAAhC,CACA,GAAIhO,GAAIihC,kBAAqBlzB,GAAK,CAA1B,EAAgC8zB,QAAW7zB,GAAK,CAAhB,CAAxC,CACA,GAAI5L,GAAI6+B,kBAAqBlzB,GAAK,CAA1B,EAAgC8zB,OAAS7zB,EAAjD,CAEA;AAEA8oB,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEA;AAEA4/B,YAAc,CAAd,CAEH,CAEJ,CAED;AAEAxgD,MAAM49C,QAAN,CAAgB8B,UAAhB,CAA4Bc,UAA5B,CAAwC7M,aAAxC,EAEA;AAEA+L,YAAcc,UAAd,CAEA;AAEAf,kBAAoBc,aAApB,CAEH,CAEJ,CAEDf,kBAAkB33C,SAAlB,CAA8BC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAA9B,CACA23C,kBAAkB33C,SAAlB,CAA4BI,WAA5B,CAA0Cu3C,iBAA1C,CAEA;;;OAKA;AAEA,QAASiB,cAAT,CAAwBnoD,KAAxB,CAA+BC,MAA/B,CAAuC8mD,aAAvC,CAAsDC,cAAtD,CAAuE,CAEnEvL,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,eAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd55C,MAAOA,KADO,CAEdC,OAAQA,MAFM,CAGd8mD,cAAeA,aAHD,CAIdC,eAAgBA,cAJF,CAAlB,CAOA,KAAKjK,kBAAL,CAAyB,GAAIt8C,oBAAJ,CAAyBT,KAAzB,CAAgCC,MAAhC,CAAwC8mD,aAAxC,CAAuDC,cAAvD,CAAzB,EACA,KAAKhH,aAAL,GAEH,CAEDmI,cAAc54C,SAAd,CAA0BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA1B,CACA44C,cAAc54C,SAAd,CAAwBI,WAAxB,CAAsCw4C,aAAtC,CAEA;AAEA,QAAS1nD,oBAAT,CAA8BT,KAA9B,CAAqCC,MAArC,CAA6C8mD,aAA7C,CAA4DC,cAA5D,CAA6E,CAEzElC,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,qBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd55C,MAAOA,KADO,CAEdC,OAAQA,MAFM,CAGd8mD,cAAeA,aAHD,CAIdC,eAAgBA,cAJF,CAAlB,CAOAhnD,MAAQA,OAAS,CAAjB,CACAC,OAASA,QAAU,CAAnB,CAEA,GAAImoD,YAAapoD,MAAQ,CAAzB,CACA,GAAIqoD,aAAcpoD,OAAS,CAA3B,CAEA,GAAIunD,OAAQplD,KAAKmT,KAAL,CAAYwxC,aAAZ,GAA+B,CAA3C,CACA,GAAIU,OAAQrlD,KAAKmT,KAAL,CAAYyxC,cAAZ,GAAgC,CAA5C,CAEA,GAAIe,QAASP,MAAQ,CAArB,CACA,GAAIQ,QAASP,MAAQ,CAArB,CAEA,GAAIa,eAAgBtoD,MAAQwnD,KAA5B,CACA,GAAIe,gBAAiBtoD,OAASwnD,KAA9B,CAEA,GAAIxzB,GAAJ,CAAQC,EAAR,CAEA;AAEA,GAAI8oB,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,IAAMjpB,GAAK,CAAX,CAAcA,GAAK8zB,MAAnB,CAA2B9zB,IAA3B,CAAmC,CAE/B,GAAIv1B,GAAIu1B,GAAKq0B,cAAL,CAAsBF,WAA9B,CAEA,IAAMp0B,GAAK,CAAX,CAAcA,GAAK8zB,MAAnB,CAA2B9zB,IAA3B,CAAmC,CAE/B,GAAIv1B,GAAIu1B,GAAKq0B,aAAL,CAAqBF,UAA7B,CAEA3rB,SAASl7B,IAAT,CAAe7C,CAAf,CAAkB,CAAEC,CAApB,CAAuB,CAAvB,EAEAu+C,QAAQ37C,IAAR,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,EAEA47C,IAAI57C,IAAJ,CAAU0yB,GAAKuzB,KAAf,EACArK,IAAI57C,IAAJ,CAAU,EAAM2yB,GAAKuzB,KAArB,EAEH,CAEJ,CAED;AAEA,IAAMvzB,GAAK,CAAX,CAAcA,GAAKuzB,KAAnB,CAA0BvzB,IAA1B,CAAkC,CAE9B,IAAMD,GAAK,CAAX,CAAcA,GAAKuzB,KAAnB,CAA0BvzB,IAA1B,CAAkC,CAE9B,GAAI3d,GAAI2d,GAAK8zB,OAAS7zB,EAAtB,CACA,GAAIve,GAAIse,GAAK8zB,QAAW7zB,GAAK,CAAhB,CAAb,CACA,GAAIhO,GAAM+N,GAAK,CAAP,CAAa8zB,QAAW7zB,GAAK,CAAhB,CAArB,CACA,GAAI5L,GAAM2L,GAAK,CAAP,CAAa8zB,OAAS7zB,EAA9B,CAEA;AAEA8oB,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEH,CAEJ,CAED;AAEA,KAAK48B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEH,CAED18C,oBAAoB8O,SAApB,CAAgCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAhC,CACA9O,oBAAoB8O,SAApB,CAA8BI,WAA9B,CAA4ClP,mBAA5C,CAEA;;;OAKA,GAAI+nD,YAAa,CAAjB,CAEA,QAASC,SAAT,EAAoB,CAEhBj5C,OAAOgI,cAAP,CAAuB,IAAvB,CAA6B,IAA7B,CAAmC,CAAExH,MAAOw4C,YAAT,CAAnC,EAEA,KAAK9mC,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA,KAAKgW,IAAL,CAAY,EAAZ,CACA,KAAK3sB,IAAL,CAAY,UAAZ,CAEA,KAAKykC,GAAL,CAAW,IAAX,CACA,KAAKK,MAAL,CAAc,IAAd,CAEA,KAAKmZ,QAAL,CAAgBhvC,cAAhB,CACA,KAAKivC,IAAL,CAAYzvC,SAAZ,CACA,KAAK/X,WAAL,CAAmB,KAAnB,CACA,KAAKo6C,YAAL,CAAoBjiC,QAApB,CAA8B;AAE9B,KAAKwzB,OAAL,CAAe,CAAf,CACA,KAAK8b,WAAL,CAAmB,KAAnB,CAEA,KAAKC,QAAL,CAAgBruC,cAAhB,CACA,KAAKsuC,QAAL,CAAgBruC,sBAAhB,CACA,KAAKsuC,aAAL,CAAqBhvC,WAArB,CACA,KAAKivC,aAAL,CAAqB,IAArB,CACA,KAAKC,aAAL,CAAqB,IAArB,CACA,KAAKC,kBAAL,CAA0B,IAA1B,CAEA,KAAKC,SAAL,CAAiBjuC,cAAjB,CACA,KAAKkuC,SAAL,CAAiB,IAAjB,CACA,KAAKC,UAAL,CAAkB,IAAlB,CAEA,KAAKC,cAAL,CAAsB,IAAtB,CACA,KAAKC,gBAAL,CAAwB,KAAxB,CACA,KAAKC,WAAL,CAAmB,KAAnB,CAEA,KAAKC,UAAL,CAAkB,IAAlB,CAEA,KAAKC,UAAL,CAAkB,IAAlB,CAEA,KAAKrJ,SAAL,CAAiB,IAAjB,CAAuB;AAEvB,KAAKsJ,aAAL,CAAqB,KAArB,CACA,KAAKC,mBAAL,CAA2B,CAA3B,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAKC,SAAL,CAAiB,KAAjB,CAEA,KAAKC,SAAL,CAAiB,CAAjB,CACA,KAAKC,kBAAL,CAA0B,KAA1B,CAEA,KAAKC,QAAL,CAAgB,CAAhB,CAAmB;AAEnB,KAAK9S,OAAL,CAAe,IAAf,CAEA,KAAKG,QAAL,CAAgB,EAAhB,CAEA,KAAKmO,WAAL,CAAmB,IAAnB,CAEH,CAEDgD,SAASl5C,SAAT,CAAqBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeC,gBAAgBH,SAA/B,CAAf,CAA2D,CAE5EI,YAAa84C,QAF+D,CAI5EyB,WAAY,IAJgE,CAM5EC,gBAAiB,0BAAY,CAAE,CAN6C,CAQ5EC,UAAW,mBAAWlQ,MAAX,CAAoB,CAE3B,GAAKA,SAAWp1C,SAAhB,CAA4B,OAE5B,IAAM,GAAIq1C,IAAV,GAAiBD,OAAjB,CAA0B,CAEtB,GAAImQ,UAAWnQ,OAAQC,GAAR,CAAf,CAEA,GAAKkQ,WAAavlD,SAAlB,CAA8B,CAE1BzB,QAAQgK,IAAR,CAAc,oBAAsB8sC,GAAtB,CAA4B,2BAA1C,EACA,SAEH,CAED;AACA,GAAKA,MAAQ,SAAb,CAAyB,CAErB92C,QAAQgK,IAAR,CAAc,SAAW,KAAK5C,IAAhB,CAAuB,oEAArC,EACA,KAAKtJ,WAAL,CAAqBkpD,WAAajpD,WAAf,CAA+B,IAA/B,CAAsC,KAAzD,CACA,SAEH,CAED,GAAIkpD,cAAe,KAAMnQ,GAAN,CAAnB,CAEA,GAAKmQ,eAAiBxlD,SAAtB,CAAkC,CAE9BzB,QAAQgK,IAAR,CAAc,SAAW,KAAK5C,IAAhB,CAAuB,KAAvB,CAA+B0vC,GAA/B,CAAqC,uCAAnD,EACA,SAEH,CAED,GAAKmQ,cAAgBA,aAAa5f,OAAlC,CAA4C,CAExC4f,aAAa/qD,GAAb,CAAkB8qD,QAAlB,EAEH,CAJD,IAIO,IAAOC,cAAgBA,aAAa92B,SAA/B,EAAgD62B,UAAYA,SAAS72B,SAA1E,CAAwF,CAE3F82B,aAAa3iD,IAAb,CAAmB0iD,QAAnB,EAEH,CAJM,IAIA,IAAKlQ,MAAQ,UAAb,CAA0B,CAE7B;AACA,KAAMA,GAAN,EAAchjC,OAAQkzC,QAAR,CAAd,CAEH,CALM,IAKA,CAEH,KAAMlQ,GAAN,EAAckQ,QAAd,CAEH,CAEJ,CAEJ,CA9D2E,CAgE5EryB,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAIsyB,QAAWtyB,OAASnzB,SAAT,EAAsB,MAAOmzB,KAAP,GAAgB,QAArD,CAEA,GAAKsyB,MAAL,CAAc,CAEVtyB,KAAO,CACHE,SAAU,EADP,CAEHW,OAAQ,EAFL,CAAP,CAKH,CAED,GAAI51B,MAAO,CACPy1B,SAAU,CACNd,QAAS,GADH,CAENptB,KAAM,UAFA,CAGNmuB,UAAW,iBAHL,CADH,CAAX,CAQA;AACA11B,KAAKwe,IAAL,CAAY,KAAKA,IAAjB,CACAxe,KAAKuH,IAAL,CAAY,KAAKA,IAAjB,CAEA,GAAK,KAAK2sB,IAAL,GAAc,EAAnB,CAAwBl0B,KAAKk0B,IAAL,CAAY,KAAKA,IAAjB,CAExB,GAAK,KAAKx2B,KAAL,EAAc,KAAKA,KAAL,CAAW8pC,OAA9B,CAAwCxnC,KAAKtC,KAAL,CAAa,KAAKA,KAAL,CAAWorC,MAAX,EAAb,CAExC,GAAK,KAAKwF,SAAL,GAAmB1sC,SAAxB,CAAoC5B,KAAKsuC,SAAL,CAAiB,KAAKA,SAAtB,CACpC,GAAK,KAAKC,SAAL,GAAmB3sC,SAAxB,CAAoC5B,KAAKuuC,SAAL,CAAiB,KAAKA,SAAtB,CAEpC,GAAK,KAAKN,QAAL,EAAiB,KAAKA,QAAL,CAAczG,OAApC,CAA8CxnC,KAAKiuC,QAAL,CAAgB,KAAKA,QAAL,CAAcnF,MAAd,EAAhB,CAC9C,GAAK,KAAKwe,iBAAL,GAA2B,CAAhC,CAAoCtnD,KAAKsnD,iBAAL,CAAyB,KAAKA,iBAA9B,CAEpC,GAAK,KAAKnZ,QAAL,EAAiB,KAAKA,QAAL,CAAc3G,OAApC,CAA8CxnC,KAAKmuC,QAAL,CAAgB,KAAKA,QAAL,CAAcrF,MAAd,EAAhB,CAC9C,GAAK,KAAKsF,SAAL,GAAmBxsC,SAAxB,CAAoC5B,KAAKouC,SAAL,CAAiB,KAAKA,SAAtB,CACpC,GAAK,KAAKkB,SAAL,GAAmB1tC,SAAxB,CAAoC5B,KAAKsvC,SAAL,CAAiB,KAAKA,SAAtB,CACpC,GAAK,KAAKC,kBAAL,GAA4B3tC,SAAjC,CAA6C5B,KAAKuvC,kBAAL,CAA0B,KAAKA,kBAA/B,CAE7C,GAAK,KAAK1F,GAAL,EAAY,KAAKA,GAAL,CAASjV,SAA1B,CAAsC50B,KAAK6pC,GAAL,CAAW,KAAKA,GAAL,CAAS/U,MAAT,CAAiBC,IAAjB,EAAwBvW,IAAnC,CACtC,GAAK,KAAKurB,QAAL,EAAiB,KAAKA,QAAL,CAAcnV,SAApC,CAAgD50B,KAAK+pC,QAAL,CAAgB,KAAKA,QAAL,CAAcjV,MAAd,CAAsBC,IAAtB,EAA6BvW,IAA7C,CAChD,GAAK,KAAKosB,QAAL,EAAiB,KAAKA,QAAL,CAAchW,SAApC,CAAgD50B,KAAK4qC,QAAL,CAAgB,KAAKA,QAAL,CAAc9V,MAAd,CAAsBC,IAAtB,EAA6BvW,IAA7C,CAEhD,GAAK,KAAKisB,KAAL,EAAc,KAAKA,KAAL,CAAW7V,SAA9B,CAA0C,CAEtC50B,KAAKyqC,KAAL,CAAa,KAAKA,KAAL,CAAW3V,MAAX,CAAmBC,IAAnB,EAA0BvW,IAAvC,CACAxe,KAAK0qC,cAAL,CAAsB,KAAKA,cAA3B,CAEH,CAED,GAAK,KAAKO,OAAL,EAAgB,KAAKA,OAAL,CAAarW,SAAlC,CAA8C,CAE1C50B,KAAKirC,OAAL,CAAe,KAAKA,OAAL,CAAanW,MAAb,CAAqBC,IAArB,EAA4BvW,IAA3C,CACAxe,KAAKkrC,SAAL,CAAiB,KAAKA,SAAtB,CAEH,CAED,GAAK,KAAKE,SAAL,EAAkB,KAAKA,SAAL,CAAexW,SAAtC,CAAkD,CAE9C50B,KAAKorC,SAAL,CAAiB,KAAKA,SAAL,CAAetW,MAAf,CAAuBC,IAAvB,EAA8BvW,IAA/C,CACAxe,KAAKqrC,WAAL,CAAmB,KAAKA,WAAL,CAAiB3oB,OAAjB,EAAnB,CAEH,CAED,GAAK,KAAK6oB,eAAL,EAAwB,KAAKA,eAAL,CAAqB3W,SAAlD,CAA8D,CAE1D50B,KAAKurC,eAAL,CAAuB,KAAKA,eAAL,CAAqBzW,MAArB,CAA6BC,IAA7B,EAAoCvW,IAA3D,CACAxe,KAAKwrC,iBAAL,CAAyB,KAAKA,iBAA9B,CACAxrC,KAAKyrC,gBAAL,CAAwB,KAAKA,gBAA7B,CAEH,CAED,GAAK,KAAKE,YAAL,EAAqB,KAAKA,YAAL,CAAkB/W,SAA5C,CAAwD50B,KAAK2rC,YAAL,CAAoB,KAAKA,YAAL,CAAkB7W,MAAlB,CAA0BC,IAA1B,EAAiCvW,IAArD,CACxD,GAAK,KAAKqtB,YAAL,EAAqB,KAAKA,YAAL,CAAkBjX,SAA5C,CAAwD50B,KAAK6rC,YAAL,CAAoB,KAAKA,YAAL,CAAkB/W,MAAlB,CAA0BC,IAA1B,EAAiCvW,IAArD,CAExD,GAAK,KAAKusB,WAAL,EAAoB,KAAKA,WAAL,CAAiBnW,SAA1C,CAAsD50B,KAAK+qC,WAAL,CAAmB,KAAKA,WAAL,CAAiBjW,MAAjB,CAAyBC,IAAzB,EAAgCvW,IAAnD,CACtD,GAAK,KAAKyrB,WAAL,EAAoB,KAAKA,WAAL,CAAiBrV,SAA1C,CAAsD50B,KAAKiqC,WAAL,CAAmB,KAAKA,WAAL,CAAiBnV,MAAjB,CAAyBC,IAAzB,EAAgCvW,IAAnD,CAEtD,GAAK,KAAK2rB,MAAL,EAAe,KAAKA,MAAL,CAAYvV,SAAhC,CAA4C,CAExC50B,KAAKmqC,MAAL,CAAc,KAAKA,MAAL,CAAYrV,MAAZ,CAAoBC,IAApB,EAA2BvW,IAAzC,CACAxe,KAAKqqC,YAAL,CAAoB,KAAKA,YAAzB,CAAuC;AAE1C,CAED,GAAK,KAAK0B,WAAL,EAAoB,KAAKA,WAAL,CAAiBnX,SAA1C,CAAsD,CAElD50B,KAAK+rC,WAAL,CAAmB,KAAKA,WAAL,CAAiBjX,MAAjB,CAAyBC,IAAzB,EAAgCvW,IAAnD,CAEH,CAED,GAAK,KAAKga,IAAL,GAAc52B,SAAnB,CAA+B5B,KAAKw4B,IAAL,CAAY,KAAKA,IAAjB,CAC/B,GAAK,KAAK+uB,eAAL,GAAyB3lD,SAA9B,CAA0C5B,KAAKunD,eAAL,CAAuB,KAAKA,eAA5B,CAE1C,GAAK,KAAK/B,QAAL,GAAkBhvC,cAAvB,CAAwCxW,KAAKwlD,QAAL,CAAgB,KAAKA,QAArB,CACxC,GAAK,KAAKvnD,WAAL,GAAqB,IAA1B,CAAiC+B,KAAK/B,WAAL,CAAmB,KAAKA,WAAxB,CACjC,GAAK,KAAKwnD,IAAL,GAAczvC,SAAnB,CAA+BhW,KAAKylD,IAAL,CAAY,KAAKA,IAAjB,CAC/B,GAAK,KAAKpN,YAAL,GAAsBjiC,QAA3B,CAAsCpW,KAAKq4C,YAAL,CAAoB,KAAKA,YAAzB,CAEtC,GAAK,KAAKzO,OAAL,CAAe,CAApB,CAAwB5pC,KAAK4pC,OAAL,CAAe,KAAKA,OAApB,CACxB,GAAK,KAAK8b,WAAL,GAAqB,IAA1B,CAAiC1lD,KAAK0lD,WAAL,CAAmB,KAAKA,WAAxB,CAEjC1lD,KAAKimD,SAAL,CAAiB,KAAKA,SAAtB,CACAjmD,KAAKkmD,SAAL,CAAiB,KAAKA,SAAtB,CACAlmD,KAAKmmD,UAAL,CAAkB,KAAKA,UAAvB,CAEA;AACA,GAAK,KAAK/nD,QAAL,GAAkB,CAAvB,CAA2B4B,KAAK5B,QAAL,CAAgB,KAAKA,QAArB,CAE3B,GAAK,KAAKopD,SAAL,GAAmB,CAAxB,CAA4BxnD,KAAKwnD,SAAL,CAAiB,KAAKA,SAAtB,CAC5B,GAAK,KAAK9Y,QAAL,GAAkB9sC,SAAvB,CAAmC5B,KAAK0uC,QAAL,CAAgB,KAAKA,QAArB,CACnC,GAAK,KAAK+Y,OAAL,GAAiB7lD,SAAtB,CAAkC5B,KAAKynD,OAAL,CAAe,KAAKA,OAApB,CAClC,GAAK,KAAKrhD,KAAL,GAAexE,SAApB,CAAgC5B,KAAKoG,KAAL,CAAa,KAAKA,KAAlB,CAEhC,GAAK,KAAKwgD,SAAL,GAAmB,IAAxB,CAA+B5mD,KAAK4mD,SAAL,CAAiB,IAAjB,CAE/B,GAAK,KAAKC,SAAL,CAAiB,CAAtB,CAA0B7mD,KAAK6mD,SAAL,CAAiB,KAAKA,SAAtB,CAC1B,GAAK,KAAKC,kBAAL,GAA4B,IAAjC,CAAwC9mD,KAAK8mD,kBAAL,CAA0B,KAAKA,kBAA/B,CAExC,GAAK,KAAKY,SAAL,GAAmB,IAAxB,CAA+B1nD,KAAK0nD,SAAL,CAAiB,KAAKA,SAAtB,CAC/B,GAAK,KAAKC,kBAAL,CAA0B,CAA/B,CAAmC3nD,KAAK2nD,kBAAL,CAA0B,KAAKA,kBAA/B,CACnC,GAAK,KAAKC,gBAAL,GAA0B,OAA/B,CAAyC5nD,KAAK4nD,gBAAL,CAAwB,KAAKA,gBAA7B,CACzC,GAAK,KAAKC,iBAAL,GAA2B,OAAhC,CAA0C7nD,KAAK6nD,iBAAL,CAAyB,KAAKA,iBAA9B,CAE1C,GAAK,KAAKlP,YAAL,GAAsB,IAA3B,CAAkC34C,KAAK24C,YAAL,CAAoB,IAApB,CAClC,GAAK,KAAKmP,QAAL,GAAkB,IAAvB,CAA8B9nD,KAAK8nD,QAAL,CAAgB,IAAhB,CAE9B,GAAK,KAAK7T,OAAL,GAAiB,KAAtB,CAA8Bj0C,KAAKi0C,OAAL,CAAe,KAAf,CAC9B,GAAKqC,KAAKC,SAAL,CAAgB,KAAKnC,QAArB,IAAoC,IAAzC,CAAgDp0C,KAAKo0C,QAAL,CAAgB,KAAKA,QAArB,CAEhD;AAEA,QAAS0C,iBAAT,CAA2BC,KAA3B,CAAmC,CAE/B,GAAIC,QAAS,EAAb,CAEA,IAAM,GAAIC,IAAV,GAAiBF,MAAjB,CAAyB,CAErB,GAAI/2C,MAAO+2C,MAAOE,GAAP,CAAX,CACA,MAAOj3C,MAAKy1B,QAAZ,CACAuhB,OAAO34C,IAAP,CAAa2B,IAAb,EAEH,CAED,MAAOg3C,OAAP,CAEH,CAED,GAAKqQ,MAAL,CAAc,CAEV,GAAIpyB,UAAW6hB,iBAAkB/hB,KAAKE,QAAvB,CAAf,CACA,GAAIW,QAASkhB,iBAAkB/hB,KAAKa,MAAvB,CAAb,CAEA,GAAKX,SAASrrB,MAAT,CAAkB,CAAvB,CAA2B5J,KAAKi1B,QAAL,CAAgBA,QAAhB,CAC3B,GAAKW,OAAOhsB,MAAP,CAAgB,CAArB,CAAyB5J,KAAK41B,MAAL,CAAcA,MAAd,CAE5B,CAED,MAAO51B,KAAP,CAEH,CAjO2E,CAmO5E1B,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAvO2E,CAyO5EA,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAK+lB,IAAL,CAAY/lB,OAAO+lB,IAAnB,CAEA,KAAK8X,GAAL,CAAW79B,OAAO69B,GAAlB,CACA,KAAKK,MAAL,CAAcl+B,OAAOk+B,MAArB,CAEA,KAAKmZ,QAAL,CAAgBr3C,OAAOq3C,QAAvB,CACA,KAAKC,IAAL,CAAYt3C,OAAOs3C,IAAnB,CACA,KAAKxnD,WAAL,CAAmBkQ,OAAOlQ,WAA1B,CACA,KAAKo6C,YAAL,CAAoBlqC,OAAOkqC,YAA3B,CAEA,KAAKzO,OAAL,CAAez7B,OAAOy7B,OAAtB,CACA,KAAK8b,WAAL,CAAmBv3C,OAAOu3C,WAA1B,CAEA,KAAKC,QAAL,CAAgBx3C,OAAOw3C,QAAvB,CACA,KAAKC,QAAL,CAAgBz3C,OAAOy3C,QAAvB,CACA,KAAKC,aAAL,CAAqB13C,OAAO03C,aAA5B,CACA,KAAKC,aAAL,CAAqB33C,OAAO23C,aAA5B,CACA,KAAKC,aAAL,CAAqB53C,OAAO43C,aAA5B,CACA,KAAKC,kBAAL,CAA0B73C,OAAO63C,kBAAjC,CAEA,KAAKC,SAAL,CAAiB93C,OAAO83C,SAAxB,CACA,KAAKC,SAAL,CAAiB/3C,OAAO+3C,SAAxB,CACA,KAAKC,UAAL,CAAkBh4C,OAAOg4C,UAAzB,CAEA,KAAKK,UAAL,CAAkBr4C,OAAOq4C,UAAzB,CAEA,KAAKrJ,SAAL,CAAiBhvC,OAAOgvC,SAAxB,CAEA,KAAKsJ,aAAL,CAAqBt4C,OAAOs4C,aAA5B,CACA,KAAKC,mBAAL,CAA2Bv4C,OAAOu4C,mBAAlC,CACA,KAAKC,kBAAL,CAA0Bx4C,OAAOw4C,kBAAjC,CAEA,KAAKC,SAAL,CAAiBz4C,OAAOy4C,SAAxB,CAEA,KAAKC,SAAL,CAAiB14C,OAAO04C,SAAxB,CACA,KAAKC,kBAAL,CAA0B34C,OAAO24C,kBAAjC,CAEA,KAAKC,QAAL,CAAgB54C,OAAO44C,QAAvB,CAEA,KAAK9S,OAAL,CAAe9lC,OAAO8lC,OAAtB,CACA,KAAKG,QAAL,CAAgBkC,KAAKa,KAAL,CAAYb,KAAKC,SAAL,CAAgBpoC,OAAOimC,QAAvB,CAAZ,CAAhB,CAEA,KAAKkS,WAAL,CAAmBn4C,OAAOm4C,WAA1B,CACA,KAAKD,gBAAL,CAAwBl4C,OAAOk4C,gBAA/B,CAEA,GAAI0B,WAAY55C,OAAOi4C,cAAvB,CACI4B,UAAY,IADhB,CAGA,GAAKD,YAAc,IAAnB,CAA0B,CAEtB,GAAIr1C,GAAIq1C,UAAUn+C,MAAlB,CACAo+C,UAAY,GAAIp4C,MAAJ,CAAW8C,CAAX,CAAZ,CAEA,IAAM,GAAIlF,GAAI,CAAd,CAAiBA,IAAMkF,CAAvB,CAA0B,EAAGlF,CAA7B,EACIw6C,UAAWx6C,CAAX,EAAiBu6C,UAAWv6C,CAAX,EAAelP,KAAf,EAAjB,CADJ,CAGH,CAED,KAAK8nD,cAAL,CAAsB4B,SAAtB,CAEA,KAAKzB,UAAL,CAAkBp4C,OAAOo4C,UAAzB,CAEA,MAAO,KAAP,CAEH,CA3S2E,CA6S5E1/C,QAAS,kBAAY,CAEjB,KAAKjC,aAAL,CAAoB,CAAE2C,KAAM,SAAR,CAApB,EAEH,CAjT2E,CAA3D,CAArB,CAqTA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAmCA,QAAS0gD,kBAAT,CAA4BvR,UAA5B,CAAyC,CAErC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CAAoC;AAEpC,KAAKkC,GAAL,CAAW,IAAX,CAEA,KAAKe,QAAL,CAAgB,IAAhB,CACA,KAAKC,iBAAL,CAAyB,GAAzB,CAEA,KAAKJ,KAAL,CAAa,IAAb,CACA,KAAKC,cAAL,CAAsB,GAAtB,CAEA,KAAKT,WAAL,CAAmB,IAAnB,CAEA,KAAKF,QAAL,CAAgB,IAAhB,CAEA,KAAKI,MAAL,CAAc,IAAd,CACA,KAAK+d,OAAL,CAAe7vC,iBAAf,CACA,KAAKgyB,YAAL,CAAoB,CAApB,CACA,KAAKC,eAAL,CAAuB,IAAvB,CAEA,KAAKod,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKC,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAKnP,YAAL,CAAoB,KAApB,CAEA,KAAKtM,MAAL,CAAc,KAAd,CAEA,KAAK6a,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDuR,kBAAkB57C,SAAlB,CAA8BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA9B,CACA47C,kBAAkB57C,SAAlB,CAA4BI,WAA5B,CAA0Cw7C,iBAA1C,CAEAA,kBAAkB57C,SAAlB,CAA4B87C,mBAA5B,CAAkD,IAAlD,CAEAF,kBAAkB57C,SAAlB,CAA4B5H,IAA5B,CAAmC,SAAW0J,MAAX,CAAoB,CAEnDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EAEA,KAAKmsC,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKe,QAAL,CAAgBz8B,OAAOy8B,QAAvB,CACA,KAAKC,iBAAL,CAAyB18B,OAAO08B,iBAAhC,CAEA,KAAKJ,KAAL,CAAat8B,OAAOs8B,KAApB,CACA,KAAKC,cAAL,CAAsBv8B,OAAOu8B,cAA7B,CAEA,KAAKT,WAAL,CAAmB97B,OAAO87B,WAA1B,CAEA,KAAKF,QAAL,CAAgB57B,OAAO47B,QAAvB,CAEA,KAAKI,MAAL,CAAch8B,OAAOg8B,MAArB,CACA,KAAK+d,OAAL,CAAe/5C,OAAO+5C,OAAtB,CACA,KAAK7d,YAAL,CAAoBl8B,OAAOk8B,YAA3B,CACA,KAAKC,eAAL,CAAuBn8B,OAAOm8B,eAA9B,CAEA,KAAKod,SAAL,CAAiBv5C,OAAOu5C,SAAxB,CACA,KAAKC,kBAAL,CAA0Bx5C,OAAOw5C,kBAAjC,CACA,KAAKC,gBAAL,CAAwBz5C,OAAOy5C,gBAA/B,CACA,KAAKC,iBAAL,CAAyB15C,OAAO05C,iBAAhC,CAEA,KAAKC,QAAL,CAAgB35C,OAAO25C,QAAvB,CACA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CAEA,MAAO,KAAP,CAEH,CAjCD,CAmCA;;;;;;;;;;;;;;;;;;;OAqBA,QAASyP,eAAT,CAAyB1R,UAAzB,CAAsC,CAElC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,gBAAZ,CAEA,KAAK8gD,OAAL,CAAe,EAAf,CACA,KAAKnhB,QAAL,CAAgB,EAAhB,CAEA,KAAK4G,YAAL,CAAoB,+FAApB,CACA,KAAKC,cAAL,CAAsB,gEAAtB,CAEA,KAAKyZ,SAAL,CAAiB,CAAjB,CAEA,KAAKE,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAK3b,GAAL,CAAW,KAAX,CAAkB;AAClB,KAAKK,MAAL,CAAc,KAAd,CAAqB;AACrB,KAAKic,QAAL,CAAgB,KAAhB,CAAuB;AAEvB,KAAKR,QAAL,CAAgB,KAAhB,CAAuB;AACvB,KAAKnP,YAAL,CAAoB,KAApB,CAA2B;AAC3B,KAAKC,YAAL,CAAoB,KAApB,CAA2B;AAE3B,KAAK2P,UAAL,CAAkB,CACdC,YAAa,KADC,CACM;AACpBC,UAAW,KAFG,CAEI;AAClBC,YAAa,KAHC,CAGM;AACpBC,iBAAkB,KAAM;AAJV,CAAlB,CAOA;AACA;AACA,KAAKC,sBAAL,CAA8B,CAC1B,QAAS,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CADiB,CAE1B,KAAM,CAAE,CAAF,CAAK,CAAL,CAFoB,CAG1B,MAAO,CAAE,CAAF,CAAK,CAAL,CAHmB,CAA9B,CAMA,KAAKC,mBAAL,CAA2BjnD,SAA3B,CACA,KAAKknD,kBAAL,CAA0B,KAA1B,CAEA,GAAKpS,aAAe90C,SAApB,CAAgC,CAE5B,GAAK80C,WAAWjd,UAAX,GAA0B73B,SAA/B,CAA2C,CAEvCzB,QAAQ+iB,KAAR,CAAe,yFAAf,EAEH,CAED,KAAKgkC,SAAL,CAAgBxQ,UAAhB,EAEH,CAEJ,CAED0R,eAAe/7C,SAAf,CAA2BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA3B,CACA+7C,eAAe/7C,SAAf,CAAyBI,WAAzB,CAAuC27C,cAAvC,CAEAA,eAAe/7C,SAAf,CAAyB08C,gBAAzB,CAA4C,IAA5C,CAEAX,eAAe/7C,SAAf,CAAyB5H,IAAzB,CAAgC,SAAW0J,MAAX,CAAoB,CAEhDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAK4/B,cAAL,CAAsB5/B,OAAO4/B,cAA7B,CACA,KAAKD,YAAL,CAAoB3/B,OAAO2/B,YAA3B,CAEA,KAAK5G,QAAL,CAAgBF,cAAc1oC,KAAd,CAAqB6P,OAAO+4B,QAA5B,CAAhB,CAEA,KAAKmhB,OAAL,CAAe/7C,OAAO4B,MAAP,CAAe,EAAf,CAAmBC,OAAOk6C,OAA1B,CAAf,CAEA,KAAKX,SAAL,CAAiBv5C,OAAOu5C,SAAxB,CACA,KAAKC,kBAAL,CAA0Bx5C,OAAOw5C,kBAAjC,CAEA,KAAKtb,MAAL,CAAcl+B,OAAOk+B,MAArB,CACA,KAAKic,QAAL,CAAgBn6C,OAAOm6C,QAAvB,CAEA,KAAKR,QAAL,CAAgB35C,OAAO25C,QAAvB,CAEA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CACA,KAAKC,YAAL,CAAoBzqC,OAAOyqC,YAA3B,CAEA,KAAK2P,UAAL,CAAkBp6C,OAAOo6C,UAAzB,CAEA,MAAO,KAAP,CAEH,CA1BD,CA4BAH,eAAe/7C,SAAf,CAAyByoB,MAAzB,CAAkC,SAAWC,IAAX,CAAkB,CAEhD,GAAI/0B,MAAOulD,SAASl5C,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAsCglB,IAAtC,CAAX,CAEA/0B,KAAKknC,QAAL,CAAgB,KAAKA,QAArB,CACAlnC,KAAK8tC,YAAL,CAAoB,KAAKA,YAAzB,CACA9tC,KAAK+tC,cAAL,CAAsB,KAAKA,cAA3B,CAEA,MAAO/tC,KAAP,CAEH,CAVD,CAYA;;OAIA,QAASgpD,IAAT,CAAcC,MAAd,CAAsB1rB,SAAtB,CAAkC,CAE9B,KAAK0rB,MAAL,CAAgBA,SAAWrnD,SAAb,CAA2BqnD,MAA3B,CAAoC,GAAInnD,QAAJ,EAAlD,CACA,KAAKy7B,SAAL,CAAmBA,YAAc37B,SAAhB,CAA8B27B,SAA9B,CAA0C,GAAIz7B,QAAJ,EAA3D,CAEH,CAEDwK,OAAO4B,MAAP,CAAe86C,IAAI38C,SAAnB,CAA8B,CAE1BhQ,IAAK,aAAW4sD,MAAX,CAAmB1rB,SAAnB,CAA+B,CAEhC,KAAK0rB,MAAL,CAAYxkD,IAAZ,CAAkBwkD,MAAlB,EACA,KAAK1rB,SAAL,CAAe94B,IAAf,CAAqB84B,SAArB,EAEA,MAAO,KAAP,CAEH,CATyB,CAW1Bj/B,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAfyB,CAiB1BA,KAAM,cAAWykD,GAAX,CAAiB,CAEnB,KAAKD,MAAL,CAAYxkD,IAAZ,CAAkBykD,IAAID,MAAtB,EACA,KAAK1rB,SAAL,CAAe94B,IAAf,CAAqBykD,IAAI3rB,SAAzB,EAEA,MAAO,KAAP,CAEH,CAxByB,CA0B1B4rB,GAAI,YAAWl2C,CAAX,CAAchW,MAAd,CAAuB,CAEvB,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,yCAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAOwH,IAAP,CAAa,KAAK84B,SAAlB,EAA8Bp0B,cAA9B,CAA8C8J,CAA9C,EAAkDjW,GAAlD,CAAuD,KAAKisD,MAA5D,CAAP,CAEH,CArCyB,CAuC1B1iD,OAAQ,gBAAWwC,CAAX,CAAe,CAEnB,KAAKw0B,SAAL,CAAe94B,IAAf,CAAqBsE,CAArB,EAAyBrD,GAAzB,CAA8B,KAAKujD,MAAnC,EAA4CjnC,SAA5C,GAEA,MAAO,KAAP,CAEH,CA7CyB,CA+C1BonC,OAAQ,UAAY,CAEhB,GAAI51C,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASsnD,OAAT,CAAiBn2C,CAAjB,CAAqB,CAExB,KAAKg2C,MAAL,CAAYxkD,IAAZ,CAAkB,KAAK0kD,EAAL,CAASl2C,CAAT,CAAYO,EAAZ,CAAlB,EAEA,MAAO,KAAP,CAEH,CAND,CAQH,CAZO,EA/CkB,CA6D1B61C,oBAAqB,6BAAWrwB,KAAX,CAAkB/7B,MAAlB,CAA2B,CAE5C,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,0DAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED7E,OAAO6N,UAAP,CAAmBkuB,KAAnB,CAA0B,KAAKiwB,MAA/B,EAEA,GAAIK,mBAAoBrsD,OAAO0J,GAAP,CAAY,KAAK42B,SAAjB,CAAxB,CAEA,GAAK+rB,kBAAoB,CAAzB,CAA6B,CAEzB,MAAOrsD,QAAOwH,IAAP,CAAa,KAAKwkD,MAAlB,CAAP,CAEH,CAED,MAAOhsD,QAAOwH,IAAP,CAAa,KAAK84B,SAAlB,EAA8Bp0B,cAA9B,CAA8CmgD,iBAA9C,EAAkEtsD,GAAlE,CAAuE,KAAKisD,MAA5E,CAAP,CAEH,CAlFyB,CAoF1BjuB,gBAAiB,yBAAWhC,KAAX,CAAmB,CAEhC,MAAO95B,MAAK0M,IAAL,CAAW,KAAK29C,iBAAL,CAAwBvwB,KAAxB,CAAX,CAAP,CAEH,CAxFyB,CA0F1BuwB,kBAAmB,UAAY,CAE3B,GAAI/1C,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASynD,kBAAT,CAA4BvwB,KAA5B,CAAoC,CAEvC,GAAIswB,mBAAoB91C,GAAG1I,UAAH,CAAekuB,KAAf,CAAsB,KAAKiwB,MAA3B,EAAoCtiD,GAApC,CAAyC,KAAK42B,SAA9C,CAAxB,CAEA;AAEA,GAAK+rB,kBAAoB,CAAzB,CAA6B,CAEzB,MAAO,MAAKL,MAAL,CAAYxiD,iBAAZ,CAA+BuyB,KAA/B,CAAP,CAEH,CAEDxlB,GAAG/O,IAAH,CAAS,KAAK84B,SAAd,EAA0Bp0B,cAA1B,CAA0CmgD,iBAA1C,EAA8DtsD,GAA9D,CAAmE,KAAKisD,MAAxE,EAEA,MAAOz1C,IAAG/M,iBAAH,CAAsBuyB,KAAtB,CAAP,CAEH,CAhBD,CAkBH,CAtBkB,EA1FO,CAkH1BwwB,oBAAqB,UAAY,CAE7B,GAAIC,WAAY,GAAI3nD,QAAJ,EAAhB,CACA,GAAI4nD,QAAS,GAAI5nD,QAAJ,EAAb,CACA,GAAIw7C,MAAO,GAAIx7C,QAAJ,EAAX,CAEA,MAAO,SAAS0nD,oBAAT,CAA8Bj2C,EAA9B,CAAkCC,EAAlC,CAAsCm2C,kBAAtC,CAA0DC,sBAA1D,CAAmF,CAEtF;AACA;AACA;AACA;AACA;AACA;AAEAH,UAAUhlD,IAAV,CAAgB8O,EAAhB,EAAqBvW,GAArB,CAA0BwW,EAA1B,EAA+BrK,cAA/B,CAA+C,GAA/C,EACAugD,OAAOjlD,IAAP,CAAa+O,EAAb,EAAkB9N,GAAlB,CAAuB6N,EAAvB,EAA4ByO,SAA5B,GACAs7B,KAAK74C,IAAL,CAAW,KAAKwkD,MAAhB,EAAyBvjD,GAAzB,CAA8B+jD,SAA9B,EAEA,GAAII,WAAYt2C,GAAG2O,UAAH,CAAe1O,EAAf,EAAsB,GAAtC,CACA,GAAIs2C,KAAM,CAAE,KAAKvsB,SAAL,CAAe52B,GAAf,CAAoB+iD,MAApB,CAAZ,CACA,GAAIK,IAAKzM,KAAK32C,GAAL,CAAU,KAAK42B,SAAf,CAAT,CACA,GAAIxe,IAAK,CAAEu+B,KAAK32C,GAAL,CAAU+iD,MAAV,CAAX,CACA,GAAI1mC,GAAIs6B,KAAKz7B,QAAL,EAAR,CACA,GAAI4H,KAAMvqB,KAAK6iB,GAAL,CAAU,EAAI+nC,IAAMA,GAApB,CAAV,CACA,GAAIE,GAAJ,CAAQ57B,EAAR,CAAY67B,OAAZ,CAAqBC,MAArB,CAEA,GAAKzgC,IAAM,CAAX,CAAe,CAEX;AAEAugC,GAAKF,IAAM/qC,EAAN,CAAWgrC,EAAhB,CACA37B,GAAK07B,IAAMC,EAAN,CAAWhrC,EAAhB,CACAmrC,OAASL,UAAYpgC,GAArB,CAEA,GAAKugC,IAAM,CAAX,CAAe,CAEX,GAAK57B,IAAM,CAAE87B,MAAb,CAAsB,CAElB,GAAK97B,IAAM87B,MAAX,CAAoB,CAEhB;AACA;AAEA,GAAIC,QAAS,EAAI1gC,GAAjB,CACAugC,IAAMG,MAAN,CACA/7B,IAAM+7B,MAAN,CACAF,QAAUD,IAAOA,GAAKF,IAAM17B,EAAX,CAAgB,EAAI27B,EAA3B,EAAkC37B,IAAO07B,IAAME,EAAN,CAAW57B,EAAX,CAAgB,EAAIrP,EAA3B,CAAlC,CAAoEiE,CAA9E,CAEH,CAVD,IAUO,CAEH;AAEAoL,GAAKy7B,SAAL,CACAG,GAAK9qD,KAAK8G,GAAL,CAAU,CAAV,CAAa,EAAI8jD,IAAM17B,EAAN,CAAW27B,EAAf,CAAb,CAAL,CACAE,QAAU,CAAED,EAAF,CAAOA,EAAP,CAAY57B,IAAOA,GAAK,EAAIrP,EAAhB,CAAZ,CAAmCiE,CAA7C,CAEH,CAEJ,CAtBD,IAsBO,CAEH;AAEAoL,GAAK,CAAEy7B,SAAP,CACAG,GAAK9qD,KAAK8G,GAAL,CAAU,CAAV,CAAa,EAAI8jD,IAAM17B,EAAN,CAAW27B,EAAf,CAAb,CAAL,CACAE,QAAU,CAAED,EAAF,CAAOA,EAAP,CAAY57B,IAAOA,GAAK,EAAIrP,EAAhB,CAAZ,CAAmCiE,CAA7C,CAEH,CAEJ,CAlCD,IAkCO,CAEH,GAAKoL,IAAM,CAAE87B,MAAb,CAAsB,CAElB;AAEAF,GAAK9qD,KAAK8G,GAAL,CAAU,CAAV,CAAa,EAAI,CAAE8jD,GAAF,CAAQD,SAAR,CAAoBE,EAAxB,CAAb,CAAL,CACA37B,GAAO47B,GAAK,CAAP,CAAa,CAAEH,SAAf,CAA2B3qD,KAAK+G,GAAL,CAAU/G,KAAK8G,GAAL,CAAU,CAAE6jD,SAAZ,CAAuB,CAAE9qC,EAAzB,CAAV,CAAyC8qC,SAAzC,CAAhC,CACAI,QAAU,CAAED,EAAF,CAAOA,EAAP,CAAY57B,IAAOA,GAAK,EAAIrP,EAAhB,CAAZ,CAAmCiE,CAA7C,CAEH,CARD,IAQO,IAAKoL,IAAM87B,MAAX,CAAoB,CAEvB;AAEAF,GAAK,CAAL,CACA57B,GAAKlvB,KAAK+G,GAAL,CAAU/G,KAAK8G,GAAL,CAAU,CAAE6jD,SAAZ,CAAuB,CAAE9qC,EAAzB,CAAV,CAAyC8qC,SAAzC,CAAL,CACAI,QAAU77B,IAAOA,GAAK,EAAIrP,EAAhB,EAAuBiE,CAAjC,CAEH,CARM,IAQA,CAEH;AAEAgnC,GAAK9qD,KAAK8G,GAAL,CAAU,CAAV,CAAa,EAAI8jD,IAAMD,SAAN,CAAkBE,EAAtB,CAAb,CAAL,CACA37B,GAAO47B,GAAK,CAAP,CAAaH,SAAb,CAAyB3qD,KAAK+G,GAAL,CAAU/G,KAAK8G,GAAL,CAAU,CAAE6jD,SAAZ,CAAuB,CAAE9qC,EAAzB,CAAV,CAAyC8qC,SAAzC,CAA9B,CACAI,QAAU,CAAED,EAAF,CAAOA,EAAP,CAAY57B,IAAOA,GAAK,EAAIrP,EAAhB,CAAZ,CAAmCiE,CAA7C,CAEH,CAEJ,CAEJ,CAxED,IAwEO,CAEH;AAEAoL,GAAO07B,IAAM,CAAR,CAAc,CAAED,SAAhB,CAA4BA,SAAjC,CACAG,GAAK9qD,KAAK8G,GAAL,CAAU,CAAV,CAAa,EAAI8jD,IAAM17B,EAAN,CAAW27B,EAAf,CAAb,CAAL,CACAE,QAAU,CAAED,EAAF,CAAOA,EAAP,CAAY57B,IAAOA,GAAK,EAAIrP,EAAhB,CAAZ,CAAmCiE,CAA7C,CAEH,CAED,GAAK2mC,kBAAL,CAA0B,CAEtBA,mBAAmBllD,IAAnB,CAAyB,KAAK84B,SAA9B,EAA0Cp0B,cAA1C,CAA0D6gD,EAA1D,EAA+DhtD,GAA/D,CAAoE,KAAKisD,MAAzE,EAEH,CAED,GAAKW,sBAAL,CAA8B,CAE1BA,uBAAuBnlD,IAAvB,CAA6BilD,MAA7B,EAAsCvgD,cAAtC,CAAsDilB,EAAtD,EAA2DpxB,GAA3D,CAAgEysD,SAAhE,EAEH,CAED,MAAOQ,QAAP,CAEH,CArHD,CAuHH,CA7HoB,EAlHK,CAiP1BG,gBAAiB,UAAY,CAEzB,GAAI52C,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASsoD,gBAAT,CAA0BnwB,MAA1B,CAAkCh9B,MAAlC,CAA2C,CAE9CuW,GAAG1I,UAAH,CAAemvB,OAAOttB,MAAtB,CAA8B,KAAKs8C,MAAnC,EACA,GAAIoB,KAAM72C,GAAG7M,GAAH,CAAQ,KAAK42B,SAAb,CAAV,CACA,GAAIjf,IAAK9K,GAAG7M,GAAH,CAAQ6M,EAAR,EAAe62C,IAAMA,GAA9B,CACA,GAAIC,SAAUrwB,OAAO9zB,MAAP,CAAgB8zB,OAAO9zB,MAArC,CAEA,GAAKmY,GAAKgsC,OAAV,CAAoB,MAAO,KAAP,CAEpB,GAAIC,KAAMrrD,KAAK0M,IAAL,CAAW0+C,QAAUhsC,EAArB,CAAV,CAEA;AACA,GAAIksC,IAAKH,IAAME,GAAf,CAEA;AACA,GAAIE,IAAKJ,IAAME,GAAf,CAEA;AACA,GAAKC,GAAK,CAAL,EAAUC,GAAK,CAApB,CAAwB,MAAO,KAAP,CAExB;AACA;AACA;AACA,GAAKD,GAAK,CAAV,CAAc,MAAO,MAAKrB,EAAL,CAASsB,EAAT,CAAaxtD,MAAb,CAAP,CAEd;AACA,MAAO,MAAKksD,EAAL,CAASqB,EAAT,CAAavtD,MAAb,CAAP,CAEH,CA5BD,CA8BH,CAlCgB,EAjPS,CAqR1B88B,iBAAkB,0BAAWE,MAAX,CAAoB,CAElC,MAAO,MAAKe,eAAL,CAAsBf,OAAOttB,MAA7B,GAAyCstB,OAAO9zB,MAAvD,CAEH,CAzRyB,CA2R1BukD,gBAAiB,yBAAW/wD,KAAX,CAAmB,CAEhC,GAAI8jC,aAAc9jC,MAAMw4B,MAAN,CAAaxrB,GAAb,CAAkB,KAAK42B,SAAvB,CAAlB,CAEA,GAAKE,cAAgB,CAArB,CAAyB,CAErB;AACA,GAAK9jC,MAAMqhC,eAAN,CAAuB,KAAKiuB,MAA5B,IAAyC,CAA9C,CAAkD,CAE9C,MAAO,EAAP,CAEH,CAED;AAEA,MAAO,KAAP,CAEH,CAED,GAAIh2C,GAAI,EAAI,KAAKg2C,MAAL,CAAYtiD,GAAZ,CAAiBhN,MAAMw4B,MAAvB,EAAkCx4B,MAAMygC,QAA5C,EAAyDqD,WAAjE,CAEA;AAEA,MAAOxqB,IAAK,CAAL,CAASA,CAAT,CAAa,IAApB,CAEH,CApTyB,CAsT1B03C,eAAgB,wBAAWhxD,KAAX,CAAkBsD,MAAlB,CAA2B,CAEvC,GAAIgW,GAAI,KAAKy3C,eAAL,CAAsB/wD,KAAtB,CAAR,CAEA,GAAKsZ,IAAM,IAAX,CAAkB,CAEd,MAAO,KAAP,CAEH,CAED,MAAO,MAAKk2C,EAAL,CAASl2C,CAAT,CAAYhW,MAAZ,CAAP,CAEH,CAlUyB,CAoU1Bk9B,gBAAiB,yBAAWxgC,KAAX,CAAmB,CAEhC;AAEA,GAAIixD,aAAcjxD,MAAMqhC,eAAN,CAAuB,KAAKiuB,MAA5B,CAAlB,CAEA,GAAK2B,cAAgB,CAArB,CAAyB,CAErB,MAAO,KAAP,CAEH,CAED,GAAIntB,aAAc9jC,MAAMw4B,MAAN,CAAaxrB,GAAb,CAAkB,KAAK42B,SAAvB,CAAlB,CAEA,GAAKE,YAAcmtB,WAAd,CAA4B,CAAjC,CAAqC,CAEjC,MAAO,KAAP,CAEH,CAED;AAEA,MAAO,MAAP,CAEH,CA5VyB,CA8V1BC,aAAc,sBAAWjyB,GAAX,CAAgB37B,MAAhB,CAAyB,CAEnC,GAAI6tD,KAAJ,CAAUC,IAAV,CAAgBC,KAAhB,CAAuBC,KAAvB,CAA8BC,KAA9B,CAAqCC,KAArC,CAEA,GAAIC,SAAU,EAAI,KAAK7tB,SAAL,CAAe/hC,CAAjC,CACI6vD,QAAU,EAAI,KAAK9tB,SAAL,CAAe9hC,CADjC,CAEI6vD,QAAU,EAAI,KAAK/tB,SAAL,CAAe7hC,CAFjC,CAIA,GAAIutD,QAAS,KAAKA,MAAlB,CAEA,GAAKmC,SAAW,CAAhB,CAAoB,CAEhBN,KAAO,CAAElyB,IAAI3yB,GAAJ,CAAQzK,CAAR,CAAYytD,OAAOztD,CAArB,EAA2B4vD,OAAlC,CACAL,KAAO,CAAEnyB,IAAI5yB,GAAJ,CAAQxK,CAAR,CAAYytD,OAAOztD,CAArB,EAA2B4vD,OAAlC,CAEH,CALD,IAKO,CAEHN,KAAO,CAAElyB,IAAI5yB,GAAJ,CAAQxK,CAAR,CAAYytD,OAAOztD,CAArB,EAA2B4vD,OAAlC,CACAL,KAAO,CAAEnyB,IAAI3yB,GAAJ,CAAQzK,CAAR,CAAYytD,OAAOztD,CAArB,EAA2B4vD,OAAlC,CAEH,CAED,GAAKC,SAAW,CAAhB,CAAoB,CAEhBL,MAAQ,CAAEpyB,IAAI3yB,GAAJ,CAAQxK,CAAR,CAAYwtD,OAAOxtD,CAArB,EAA2B4vD,OAAnC,CACAJ,MAAQ,CAAEryB,IAAI5yB,GAAJ,CAAQvK,CAAR,CAAYwtD,OAAOxtD,CAArB,EAA2B4vD,OAAnC,CAEH,CALD,IAKO,CAEHL,MAAQ,CAAEpyB,IAAI5yB,GAAJ,CAAQvK,CAAR,CAAYwtD,OAAOxtD,CAArB,EAA2B4vD,OAAnC,CACAJ,MAAQ,CAAEryB,IAAI3yB,GAAJ,CAAQxK,CAAR,CAAYwtD,OAAOxtD,CAArB,EAA2B4vD,OAAnC,CAEH,CAED,GAAOP,KAAOG,KAAT,EAAsBD,MAAQD,IAAnC,CAA4C,MAAO,KAAP,CAE5C;AACA;AAEA,GAAKC,MAAQF,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOE,KAAP,CAErC,GAAKC,MAAQF,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOE,KAAP,CAErC,GAAKK,SAAW,CAAhB,CAAoB,CAEhBJ,MAAQ,CAAEtyB,IAAI3yB,GAAJ,CAAQvK,CAAR,CAAYutD,OAAOvtD,CAArB,EAA2B4vD,OAAnC,CACAH,MAAQ,CAAEvyB,IAAI5yB,GAAJ,CAAQtK,CAAR,CAAYutD,OAAOvtD,CAArB,EAA2B4vD,OAAnC,CAEH,CALD,IAKO,CAEHJ,MAAQ,CAAEtyB,IAAI5yB,GAAJ,CAAQtK,CAAR,CAAYutD,OAAOvtD,CAArB,EAA2B4vD,OAAnC,CACAH,MAAQ,CAAEvyB,IAAI3yB,GAAJ,CAAQvK,CAAR,CAAYutD,OAAOvtD,CAArB,EAA2B4vD,OAAnC,CAEH,CAED,GAAOR,KAAOK,KAAT,EAAsBD,MAAQH,IAAnC,CAA4C,MAAO,KAAP,CAE5C,GAAKG,MAAQJ,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOI,KAAP,CAErC,GAAKC,MAAQJ,IAAR,EAAgBA,OAASA,IAA9B,CAAqCA,KAAOI,KAAP,CAErC;AAEA,GAAKJ,KAAO,CAAZ,CAAgB,MAAO,KAAP,CAEhB,MAAO,MAAK5B,EAAL,CAAS2B,MAAQ,CAAR,CAAYA,IAAZ,CAAmBC,IAA5B,CAAkC9tD,MAAlC,CAAP,CAEH,CAjayB,CAma1B68B,cAAiB,UAAY,CAEzB,GAAI/wB,GAAI,GAAIjH,QAAJ,EAAR,CAEA,MAAO,SAASg4B,cAAT,CAAwBlB,GAAxB,CAA8B,CAEjC,MAAO,MAAKiyB,YAAL,CAAmBjyB,GAAnB,CAAwB7vB,CAAxB,IAAgC,IAAvC,CAEH,CAJD,CAMH,CAVc,EAnaW,CA+a1BwiD,kBAAmB,UAAY,CAE3B;AACA,GAAIjO,MAAO,GAAIx7C,QAAJ,EAAX,CACA,GAAI0pD,OAAQ,GAAI1pD,QAAJ,EAAZ,CACA,GAAI2pD,OAAQ,GAAI3pD,QAAJ,EAAZ,CACA,GAAIqwB,QAAS,GAAIrwB,QAAJ,EAAb,CAEA,MAAO,SAASypD,kBAAT,CAA4Bn4C,CAA5B,CAA+BX,CAA/B,CAAkCuQ,CAAlC,CAAqC0oC,eAArC,CAAsDzuD,MAAtD,CAA+D,CAElE;AAEAuuD,MAAM1gD,UAAN,CAAkB2H,CAAlB,CAAqBW,CAArB,EACAq4C,MAAM3gD,UAAN,CAAkBkY,CAAlB,CAAqB5P,CAArB,EACA+e,OAAO3L,YAAP,CAAqBglC,KAArB,CAA4BC,KAA5B,EAEA;AACA;AACA;AACA;AACA;AACA,GAAIE,KAAM,KAAKpuB,SAAL,CAAe52B,GAAf,CAAoBwrB,MAApB,CAAV,CACA,GAAI/d,KAAJ,CAEA,GAAKu3C,IAAM,CAAX,CAAe,CAEX,GAAKD,eAAL,CAAuB,MAAO,KAAP,CACvBt3C,KAAO,CAAP,CAEH,CALD,IAKO,IAAKu3C,IAAM,CAAX,CAAe,CAElBv3C,KAAO,CAAE,CAAT,CACAu3C,IAAM,CAAEA,GAAR,CAEH,CALM,IAKA,CAEH,MAAO,KAAP,CAEH,CAEDrO,KAAKxyC,UAAL,CAAiB,KAAKm+C,MAAtB,CAA8B71C,CAA9B,EACA,GAAIw4C,QAASx3C,KAAO,KAAKmpB,SAAL,CAAe52B,GAAf,CAAoB8kD,MAAMjlC,YAAN,CAAoB82B,IAApB,CAA0BmO,KAA1B,CAApB,CAApB,CAEA;AACA,GAAKG,OAAS,CAAd,CAAkB,CAEd,MAAO,KAAP,CAEH,CAED,GAAIC,QAASz3C,KAAO,KAAKmpB,SAAL,CAAe52B,GAAf,CAAoB6kD,MAAMh6B,KAAN,CAAa8rB,IAAb,CAApB,CAApB,CAEA;AACA,GAAKuO,OAAS,CAAd,CAAkB,CAEd,MAAO,KAAP,CAEH,CAED;AACA,GAAKD,OAASC,MAAT,CAAkBF,GAAvB,CAA6B,CAEzB,MAAO,KAAP,CAEH,CAED;AACA,GAAIG,KAAM,CAAE13C,IAAF,CAASkpC,KAAK32C,GAAL,CAAUwrB,MAAV,CAAnB,CAEA;AACA,GAAK25B,IAAM,CAAX,CAAe,CAEX,MAAO,KAAP,CAEH,CAED;AACA,MAAO,MAAK3C,EAAL,CAAS2C,IAAMH,GAAf,CAAoB1uD,MAApB,CAAP,CAEH,CAvED,CAyEH,CAjFkB,EA/aO,CAkgB1B6rB,aAAc,sBAAWkK,OAAX,CAAqB,CAE/B,KAAKi2B,MAAL,CAAYngC,YAAZ,CAA0BkK,OAA1B,EACA,KAAKuK,SAAL,CAAehM,kBAAf,CAAmCyB,OAAnC,EAEA,MAAO,KAAP,CAEH,CAzgByB,CA2gB1BxQ,OAAQ,gBAAW0mC,GAAX,CAAiB,CAErB,MAAOA,KAAID,MAAJ,CAAWzmC,MAAX,CAAmB,KAAKymC,MAAxB,GAAoCC,IAAI3rB,SAAJ,CAAc/a,MAAd,CAAsB,KAAK+a,SAA3B,CAA3C,CAEH,CA/gByB,CAA9B,EAmhBA;;OAIA,QAASwuB,MAAT,CAAgB5qD,KAAhB,CAAuB8O,GAAvB,CAA6B,CAEzB,KAAK9O,KAAL,CAAeA,QAAUS,SAAZ,CAA0BT,KAA1B,CAAkC,GAAIW,QAAJ,EAA/C,CACA,KAAKmO,GAAL,CAAaA,MAAQrO,SAAV,CAAwBqO,GAAxB,CAA8B,GAAInO,QAAJ,EAAzC,CAEH,CAEDwK,OAAO4B,MAAP,CAAe69C,MAAM1/C,SAArB,CAAgC,CAE5BhQ,IAAK,aAAW8E,KAAX,CAAkB8O,GAAlB,CAAwB,CAEzB,KAAK9O,KAAL,CAAWsD,IAAX,CAAiBtD,KAAjB,EACA,KAAK8O,GAAL,CAASxL,IAAT,CAAewL,GAAf,EAEA,MAAO,KAAP,CAEH,CAT2B,CAW5B3R,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAf2B,CAiB5BA,KAAM,cAAW64B,IAAX,CAAkB,CAEpB,KAAKn8B,KAAL,CAAWsD,IAAX,CAAiB64B,KAAKn8B,KAAtB,EACA,KAAK8O,GAAL,CAASxL,IAAT,CAAe64B,KAAKrtB,GAApB,EAEA,MAAO,KAAP,CAEH,CAxB2B,CA0B5B6oB,UAAW,mBAAW77B,MAAX,CAAoB,CAE3B,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,kDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAO2jB,UAAP,CAAmB,KAAKzf,KAAxB,CAA+B,KAAK8O,GAApC,EAA0C9G,cAA1C,CAA0D,GAA1D,CAAP,CAEH,CArC2B,CAuC5Bq0B,MAAO,eAAWvgC,MAAX,CAAoB,CAEvB,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,8CAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAO6N,UAAP,CAAmB,KAAKmF,GAAxB,CAA6B,KAAK9O,KAAlC,CAAP,CAEH,CAlD2B,CAoD5B6qD,WAAY,qBAAY,CAEpB,MAAO,MAAK7qD,KAAL,CAAWsF,iBAAX,CAA8B,KAAKwJ,GAAnC,CAAP,CAEH,CAxD2B,CA0D5BjH,SAAU,mBAAY,CAElB,MAAO,MAAK7H,KAAL,CAAW+gB,UAAX,CAAuB,KAAKjS,GAA5B,CAAP,CAEH,CA9D2B,CAgE5Bk5C,GAAI,YAAWl2C,CAAX,CAAchW,MAAd,CAAuB,CAEvB,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,2CAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO,MAAK07B,KAAL,CAAYvgC,MAAZ,EAAqBkM,cAArB,CAAqC8J,CAArC,EAAyCjW,GAAzC,CAA8C,KAAKmE,KAAnD,CAAP,CAEH,CA3E2B,CA6E5B8qD,6BAA8B,UAAY,CAEtC,GAAIC,QAAS,GAAIpqD,QAAJ,EAAb,CACA,GAAIqqD,UAAW,GAAIrqD,QAAJ,EAAf,CAEA,MAAO,SAASmqD,6BAAT,CAAuCjzB,KAAvC,CAA8CozB,WAA9C,CAA4D,CAE/DF,OAAOphD,UAAP,CAAmBkuB,KAAnB,CAA0B,KAAK73B,KAA/B,EACAgrD,SAASrhD,UAAT,CAAqB,KAAKmF,GAA1B,CAA+B,KAAK9O,KAApC,EAEA,GAAIkrD,WAAYF,SAASxlD,GAAT,CAAcwlD,QAAd,CAAhB,CACA,GAAIG,iBAAkBH,SAASxlD,GAAT,CAAculD,MAAd,CAAtB,CAEA,GAAIj5C,GAAIq5C,gBAAkBD,SAA1B,CAEA,GAAKD,WAAL,CAAmB,CAEfn5C,EAAI8K,MAAMW,KAAN,CAAazL,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAJ,CAEH,CAED,MAAOA,EAAP,CAEH,CAlBD,CAoBH,CAzB6B,EA7EF,CAwG5Bo2C,oBAAqB,6BAAWrwB,KAAX,CAAkBozB,WAAlB,CAA+BnvD,MAA/B,CAAwC,CAEzD,GAAIgW,GAAI,KAAKg5C,4BAAL,CAAmCjzB,KAAnC,CAA0CozB,WAA1C,CAAR,CAEA,GAAKnvD,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,4DAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO,MAAK07B,KAAL,CAAYvgC,MAAZ,EAAqBkM,cAArB,CAAqC8J,CAArC,EAAyCjW,GAAzC,CAA8C,KAAKmE,KAAnD,CAAP,CAEH,CArH2B,CAuH5B2nB,aAAc,sBAAW9e,MAAX,CAAoB,CAE9B,KAAK7I,KAAL,CAAW2nB,YAAX,CAAyB9e,MAAzB,EACA,KAAKiG,GAAL,CAAS6Y,YAAT,CAAuB9e,MAAvB,EAEA,MAAO,KAAP,CAEH,CA9H2B,CAgI5BwY,OAAQ,gBAAW8a,IAAX,CAAkB,CAEtB,MAAOA,MAAKn8B,KAAL,CAAWqhB,MAAX,CAAmB,KAAKrhB,KAAxB,GAAmCm8B,KAAKrtB,GAAL,CAASuS,MAAT,CAAiB,KAAKvS,GAAtB,CAA1C,CAEH,CApI2B,CAAhC,EAwIA;;;OAKA,QAASs8C,SAAT,CAAmBn5C,CAAnB,CAAsBX,CAAtB,CAAyBuQ,CAAzB,CAA6B,CAEzB,KAAK5P,CAAL,CAAWA,IAAMxR,SAAR,CAAsBwR,CAAtB,CAA0B,GAAItR,QAAJ,EAAnC,CACA,KAAK2Q,CAAL,CAAWA,IAAM7Q,SAAR,CAAsB6Q,CAAtB,CAA0B,GAAI3Q,QAAJ,EAAnC,CACA,KAAKkhB,CAAL,CAAWA,IAAMphB,SAAR,CAAsBohB,CAAtB,CAA0B,GAAIlhB,QAAJ,EAAnC,CAEH,CAEDwK,OAAO4B,MAAP,CAAeq+C,QAAf,CAAyB,CAErBC,UAAW,UAAY,CAEnB,GAAIj5C,IAAK,GAAIzR,QAAJ,EAAT,CAEA,MAAO,SAAS0qD,UAAT,CAAoBp5C,CAApB,CAAuBX,CAAvB,CAA0BuQ,CAA1B,CAA6B/lB,MAA7B,CAAsC,CAEzC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,qDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED7E,OAAO6N,UAAP,CAAmBkY,CAAnB,CAAsBvQ,CAAtB,EACAc,GAAGzI,UAAH,CAAesI,CAAf,CAAkBX,CAAlB,EACAxV,OAAOu0B,KAAP,CAAcje,EAAd,EAEA,GAAIk5C,gBAAiBxvD,OAAO4kB,QAAP,EAArB,CACA,GAAK4qC,eAAiB,CAAtB,CAA0B,CAEtB,MAAOxvD,QAAOkM,cAAP,CAAuB,EAAIjK,KAAK0M,IAAL,CAAW6gD,cAAX,CAA3B,CAAP,CAEH,CAED,MAAOxvD,QAAOZ,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,CAAP,CAEH,CAtBD,CAwBH,CA5BU,EAFU,CAgCrB;AACA;AACAqwD,aAAc,UAAY,CAEtB,GAAIn5C,IAAK,GAAIzR,QAAJ,EAAT,CACA,GAAI0R,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIygB,IAAK,GAAIzgB,QAAJ,EAAT,CAEA,MAAO,SAAS4qD,aAAT,CAAuB1zB,KAAvB,CAA8B5lB,CAA9B,CAAiCX,CAAjC,CAAoCuQ,CAApC,CAAuC/lB,MAAvC,CAAgD,CAEnDsW,GAAGzI,UAAH,CAAekY,CAAf,CAAkB5P,CAAlB,EACAI,GAAG1I,UAAH,CAAe2H,CAAf,CAAkBW,CAAlB,EACAmP,GAAGzX,UAAH,CAAekuB,KAAf,CAAsB5lB,CAAtB,EAEA,GAAIu5C,OAAQp5C,GAAG5M,GAAH,CAAQ4M,EAAR,CAAZ,CACA,GAAIq5C,OAAQr5C,GAAG5M,GAAH,CAAQ6M,EAAR,CAAZ,CACA,GAAIq5C,OAAQt5C,GAAG5M,GAAH,CAAQ4b,EAAR,CAAZ,CACA,GAAIuqC,OAAQt5C,GAAG7M,GAAH,CAAQ6M,EAAR,CAAZ,CACA,GAAIu5C,OAAQv5C,GAAG7M,GAAH,CAAQ4b,EAAR,CAAZ,CAEA,GAAIyqC,OAAUL,MAAQG,KAAR,CAAgBF,MAAQA,KAAtC,CAEA,GAAK3vD,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,wDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED;AACA,GAAKkrD,QAAU,CAAf,CAAmB,CAEf;AACA;AACA,MAAO/vD,QAAOZ,GAAP,CAAY,CAAE,CAAd,CAAiB,CAAE,CAAnB,CAAsB,CAAE,CAAxB,CAAP,CAEH,CAED,GAAI4wD,UAAW,EAAID,KAAnB,CACA,GAAI5lB,GAAI,CAAE0lB,MAAQD,KAAR,CAAgBD,MAAQG,KAA1B,EAAoCE,QAA5C,CACA,GAAIlkD,GAAI,CAAE4jD,MAAQI,KAAR,CAAgBH,MAAQC,KAA1B,EAAoCI,QAA5C,CAEA;AACA,MAAOhwD,QAAOZ,GAAP,CAAY,EAAI+qC,CAAJ,CAAQr+B,CAApB,CAAuBA,CAAvB,CAA0Bq+B,CAA1B,CAAP,CAEH,CArCD,CAuCH,CA7Ca,EAlCO,CAiFrBzN,cAAe,UAAY,CAEvB,GAAInmB,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAAS63B,cAAT,CAAwBX,KAAxB,CAA+B5lB,CAA/B,CAAkCX,CAAlC,CAAqCuQ,CAArC,CAAyC,CAE5CupC,SAASG,YAAT,CAAuB1zB,KAAvB,CAA8B5lB,CAA9B,CAAiCX,CAAjC,CAAoCuQ,CAApC,CAAuCxP,EAAvC,EAEA,MAASA,IAAGhY,CAAH,EAAQ,CAAV,EAAmBgY,GAAG/X,CAAH,EAAQ,CAA3B,EAAsC+X,GAAGhY,CAAH,CAAOgY,GAAG/X,CAAZ,EAAmB,CAA9D,CAEH,CAND,CAQH,CAZc,EAjFM,CAAzB,EAiGA6Q,OAAO4B,MAAP,CAAeq+C,SAASlgD,SAAxB,CAAmC,CAE/BhQ,IAAK,aAAW+W,CAAX,CAAcX,CAAd,CAAiBuQ,CAAjB,CAAqB,CAEtB,KAAK5P,CAAL,CAAO3O,IAAP,CAAa2O,CAAb,EACA,KAAKX,CAAL,CAAOhO,IAAP,CAAagO,CAAb,EACA,KAAKuQ,CAAL,CAAOve,IAAP,CAAaue,CAAb,EAEA,MAAO,KAAP,CAEH,CAV8B,CAY/BkqC,wBAAyB,iCAAW/0B,MAAX,CAAmBg1B,EAAnB,CAAuBC,EAAvB,CAA2BC,EAA3B,CAAgC,CAErD,KAAKj6C,CAAL,CAAO3O,IAAP,CAAa0zB,OAAQg1B,EAAR,CAAb,EACA,KAAK16C,CAAL,CAAOhO,IAAP,CAAa0zB,OAAQi1B,EAAR,CAAb,EACA,KAAKpqC,CAAL,CAAOve,IAAP,CAAa0zB,OAAQk1B,EAAR,CAAb,EAEA,MAAO,KAAP,CAEH,CApB8B,CAsB/B/uD,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CA1B8B,CA4B/BA,KAAM,cAAWs2B,QAAX,CAAsB,CAExB,KAAK3nB,CAAL,CAAO3O,IAAP,CAAas2B,SAAS3nB,CAAtB,EACA,KAAKX,CAAL,CAAOhO,IAAP,CAAas2B,SAAStoB,CAAtB,EACA,KAAKuQ,CAAL,CAAOve,IAAP,CAAas2B,SAAS/X,CAAtB,EAEA,MAAO,KAAP,CAEH,CApC8B,CAsC/BsqC,QAAS,UAAY,CAEjB,GAAI/5C,IAAK,GAAIzR,QAAJ,EAAT,CACA,GAAI0R,IAAK,GAAI1R,QAAJ,EAAT,CAEA,MAAO,SAASwrD,QAAT,EAAmB,CAEtB/5C,GAAGzI,UAAH,CAAe,KAAKkY,CAApB,CAAuB,KAAKvQ,CAA5B,EACAe,GAAG1I,UAAH,CAAe,KAAKsI,CAApB,CAAuB,KAAKX,CAA5B,EAEA,MAAOc,IAAGie,KAAH,CAAUhe,EAAV,EAAe5J,MAAf,GAA0B,GAAjC,CAEH,CAPD,CASH,CAdQ,EAtCsB,CAsD/B2jD,YAAa,qBAAWtwD,MAAX,CAAoB,CAE7B,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,uDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAO2jB,UAAP,CAAmB,KAAKxN,CAAxB,CAA2B,KAAKX,CAAhC,EAAoCzV,GAApC,CAAyC,KAAKgmB,CAA9C,EAAkD7Z,cAAlD,CAAkE,EAAI,CAAtE,CAAP,CAEH,CAjE8B,CAmE/BqjD,UAAW,mBAAWvvD,MAAX,CAAoB,CAE3B,MAAOsvD,UAASC,SAAT,CAAoB,KAAKp5C,CAAzB,CAA4B,KAAKX,CAAjC,CAAoC,KAAKuQ,CAAzC,CAA4C/lB,MAA5C,CAAP,CAEH,CAvE8B,CAyE/BuwD,SAAU,kBAAWvwD,MAAX,CAAoB,CAE1B,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,oDAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,MAAO7E,QAAOggC,qBAAP,CAA8B,KAAK7pB,CAAnC,CAAsC,KAAKX,CAA3C,CAA8C,KAAKuQ,CAAnD,CAAP,CAEH,CApF8B,CAsF/B0pC,aAAc,sBAAW1zB,KAAX,CAAkB/7B,MAAlB,CAA2B,CAErC,MAAOsvD,UAASG,YAAT,CAAuB1zB,KAAvB,CAA8B,KAAK5lB,CAAnC,CAAsC,KAAKX,CAA3C,CAA8C,KAAKuQ,CAAnD,CAAsD/lB,MAAtD,CAAP,CAEH,CA1F8B,CA4F/B08B,cAAe,uBAAWX,KAAX,CAAmB,CAE9B,MAAOuzB,UAAS5yB,aAAT,CAAwBX,KAAxB,CAA+B,KAAK5lB,CAApC,CAAuC,KAAKX,CAA5C,CAA+C,KAAKuQ,CAApD,CAAP,CAEH,CAhG8B,CAkG/B8W,cAAe,uBAAWlB,GAAX,CAAiB,CAE5B,MAAOA,KAAIyB,kBAAJ,CAAwB,IAAxB,CAAP,CAEH,CAtG8B,CAwG/BgvB,oBAAqB,UAAY,CAE7B,GAAI1vD,OAAQ,GAAImjC,MAAJ,EAAZ,CACA,GAAI2wB,UAAW,CAAE,GAAI1B,MAAJ,EAAF,CAAe,GAAIA,MAAJ,EAAf,CAA4B,GAAIA,MAAJ,EAA5B,CAAf,CACA,GAAI2B,gBAAiB,GAAI5rD,QAAJ,EAArB,CACA,GAAIk4B,cAAe,GAAIl4B,QAAJ,EAAnB,CAEA,MAAO,SAASunD,oBAAT,CAA8BrwB,KAA9B,CAAqC/7B,MAArC,CAA8C,CAEjD,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,+DAAd,EACAlN,OAAS,GAAI6E,QAAJ,EAAT,CAEH,CAED,GAAIC,aAAcE,QAAlB,CAEA;AAEAtI,MAAMsjC,qBAAN,CAA6B,KAAK7pB,CAAlC,CAAqC,KAAKX,CAA1C,CAA6C,KAAKuQ,CAAlD,EACArpB,MAAMyjC,YAAN,CAAoBpE,KAApB,CAA2B00B,cAA3B,EAEA;AAEA,GAAK,KAAK/zB,aAAL,CAAoB+zB,cAApB,IAAyC,IAA9C,CAAqD,CAEjD;AAEAzwD,OAAOwH,IAAP,CAAaipD,cAAb,EAEH,CAND,IAMO,CAEH;AAEAD,SAAU,CAAV,EAAcpxD,GAAd,CAAmB,KAAK+W,CAAxB,CAA2B,KAAKX,CAAhC,EACAg7C,SAAU,CAAV,EAAcpxD,GAAd,CAAmB,KAAKoW,CAAxB,CAA2B,KAAKuQ,CAAhC,EACAyqC,SAAU,CAAV,EAAcpxD,GAAd,CAAmB,KAAK2mB,CAAxB,CAA2B,KAAK5P,CAAhC,EAEA,IAAM,GAAI5F,GAAI,CAAd,CAAiBA,EAAIigD,SAAS7jD,MAA9B,CAAsC4D,GAAtC,CAA6C,CAEzCigD,SAAUjgD,CAAV,EAAc67C,mBAAd,CAAmCqE,cAAnC,CAAmD,IAAnD,CAAyD1zB,YAAzD,EAEA,GAAIhxB,UAAW0kD,eAAejnD,iBAAf,CAAkCuzB,YAAlC,CAAf,CAEA,GAAKhxB,SAAWjH,WAAhB,CAA8B,CAE1BA,YAAciH,QAAd,CAEA/L,OAAOwH,IAAP,CAAau1B,YAAb,EAEH,CAEJ,CAEJ,CAED,MAAO/8B,OAAP,CAEH,CApDD,CAsDH,CA7DoB,EAxGU,CAuK/BulB,OAAQ,gBAAWuY,QAAX,CAAsB,CAE1B,MAAOA,UAAS3nB,CAAT,CAAWoP,MAAX,CAAmB,KAAKpP,CAAxB,GAA+B2nB,SAAStoB,CAAT,CAAW+P,MAAX,CAAmB,KAAK/P,CAAxB,CAA/B,EAA8DsoB,SAAS/X,CAAT,CAAWR,MAAX,CAAmB,KAAKQ,CAAxB,CAArE,CAEH,CA3K8B,CAAnC,EA+KA;;;;;OAOA,QAASrlB,KAAT,CAAe07B,QAAf,CAAyBud,QAAzB,CAAoC,CAEhC/3C,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,MAAZ,CAEA,KAAK8xB,QAAL,CAAgBA,WAAaz3B,SAAb,CAAyBy3B,QAAzB,CAAoC,GAAIuoB,eAAJ,EAApD,CACA,KAAKhL,QAAL,CAAgBA,WAAah1C,SAAb,CAAyBg1C,QAAzB,CAAoC,GAAIqR,kBAAJ,CAAuB,CAAEvqD,MAAOwB,KAAKmC,MAAL,GAAgB,QAAzB,CAAvB,CAApD,CAEA,KAAKssD,QAAL,CAAgBzwC,iBAAhB,CAEA,KAAK0wC,kBAAL,GAEH,CAEDjwD,KAAK0O,SAAL,CAAiBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAEjEI,YAAa9O,IAFoD,CAIjEk/C,OAAQ,IAJyD,CAMjEgR,YAAa,qBAAW/gD,KAAX,CAAmB,CAE5B,KAAK6gD,QAAL,CAAgB7gD,KAAhB,CAEH,CAVgE,CAYjErI,KAAM,cAAW0J,MAAX,CAAoB,CAEtBtP,SAASwN,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKw/C,QAAL,CAAgBx/C,OAAOw/C,QAAvB,CAEA,GAAKx/C,OAAO2/C,qBAAP,GAAiClsD,SAAtC,CAAkD,CAE9C,KAAKksD,qBAAL,CAA6B3/C,OAAO2/C,qBAAP,CAA6B14C,KAA7B,EAA7B,CAEH,CAED,GAAKjH,OAAO4/C,qBAAP,GAAiCnsD,SAAtC,CAAkD,CAE9C,KAAKmsD,qBAAL,CAA6BzhD,OAAO4B,MAAP,CAAe,EAAf,CAAmBC,OAAO4/C,qBAA1B,CAA7B,CAEH,CAED,MAAO,KAAP,CAEH,CAhCgE,CAkCjEH,mBAAoB,6BAAY,CAE5B,GAAIv0B,UAAW,KAAKA,QAApB,CACA,GAAIlnB,EAAJ,CAAO67C,EAAP,CAAW95B,IAAX,CAEA,GAAKmF,SAASG,gBAAd,CAAiC,CAE7B,GAAIqoB,iBAAkBxoB,SAASwoB,eAA/B,CACA,GAAI1+C,MAAOmJ,OAAOnJ,IAAP,CAAa0+C,eAAb,CAAX,CAEA,GAAK1+C,KAAKyG,MAAL,CAAc,CAAnB,CAAuB,CAEnB,GAAIg6C,gBAAiB/B,gBAAiB1+C,KAAM,CAAN,CAAjB,CAArB,CAEA,GAAKygD,iBAAmBhiD,SAAxB,CAAoC,CAEhC,KAAKksD,qBAAL,CAA6B,EAA7B,CACA,KAAKC,qBAAL,CAA6B,EAA7B,CAEA,IAAM57C,EAAI,CAAJ,CAAO67C,GAAKpK,eAAeh6C,MAAjC,CAAyCuI,EAAI67C,EAA7C,CAAiD77C,GAAjD,CAAwD,CAEpD+hB,KAAO0vB,eAAgBzxC,CAAhB,EAAoB+hB,IAApB,EAA4B+5B,OAAQ97C,CAAR,CAAnC,CAEA,KAAK27C,qBAAL,CAA2BzvD,IAA3B,CAAiC,CAAjC,EACA,KAAK0vD,qBAAL,CAA4B75B,IAA5B,EAAqC/hB,CAArC,CAEH,CAEJ,CAEJ,CAEJ,CA3BD,IA2BO,CAEH,GAAIwmC,cAAetf,SAASsf,YAA5B,CAEA,GAAKA,eAAiB/2C,SAAjB,EAA8B+2C,aAAa/uC,MAAb,CAAsB,CAAzD,CAA6D,CAEzD,KAAKkkD,qBAAL,CAA6B,EAA7B,CACA,KAAKC,qBAAL,CAA6B,EAA7B,CAEA,IAAM57C,EAAI,CAAJ,CAAO67C,GAAKrV,aAAa/uC,MAA/B,CAAuCuI,EAAI67C,EAA3C,CAA+C77C,GAA/C,CAAsD,CAElD+hB,KAAOykB,aAAcxmC,CAAd,EAAkB+hB,IAAlB,EAA0B+5B,OAAQ97C,CAAR,CAAjC,CAEA,KAAK27C,qBAAL,CAA2BzvD,IAA3B,CAAiC,CAAjC,EACA,KAAK0vD,qBAAL,CAA4B75B,IAA5B,EAAqC/hB,CAArC,CAEH,CAEJ,CAEJ,CAEJ,CAxFgE,CA0FjE4jC,QAAW,UAAY,CAEnB,GAAImY,eAAgB,GAAIjrC,QAAJ,EAApB,CACA,GAAIimC,KAAM,GAAIF,IAAJ,EAAV,CACA,GAAI/uB,QAAS,GAAIkB,OAAJ,EAAb,CAEA,GAAI2f,IAAK,GAAIh5C,QAAJ,EAAT,CACA,GAAIi5C,IAAK,GAAIj5C,QAAJ,EAAT,CACA,GAAIk5C,IAAK,GAAIl5C,QAAJ,EAAT,CAEA,GAAIqsD,OAAQ,GAAIrsD,QAAJ,EAAZ,CACA,GAAIssD,OAAQ,GAAItsD,QAAJ,EAAZ,CACA,GAAIusD,OAAQ,GAAIvsD,QAAJ,EAAZ,CAEA,GAAIwsD,KAAM,GAAIrmD,QAAJ,EAAV,CACA,GAAIsmD,KAAM,GAAItmD,QAAJ,EAAV,CACA,GAAIumD,KAAM,GAAIvmD,QAAJ,EAAV,CAEA,GAAIwmD,WAAY,GAAI3sD,QAAJ,EAAhB,CAEA,GAAI4sD,mBAAoB,GAAI5sD,QAAJ,EAAxB,CACA,GAAI6sD,wBAAyB,GAAI7sD,QAAJ,EAA7B,CAEA,QAAS8sD,eAAT,CAAyB51B,KAAzB,CAAgChmB,EAAhC,CAAoCK,EAApC,CAAwCC,EAAxC,CAA4Cu7C,GAA5C,CAAiD1U,GAAjD,CAAsD2U,GAAtD,CAA4D,CAExDvC,SAASG,YAAT,CAAuB1zB,KAAvB,CAA8BhmB,EAA9B,CAAkCK,EAAlC,CAAsCC,EAAtC,CAA0Cm7C,SAA1C,EAEAI,IAAI1lD,cAAJ,CAAoBslD,UAAUjzD,CAA9B,EACA2+C,IAAIhxC,cAAJ,CAAoBslD,UAAUhzD,CAA9B,EACAqzD,IAAI3lD,cAAJ,CAAoBslD,UAAU/yD,CAA9B,EAEAmzD,IAAI7xD,GAAJ,CAASm9C,GAAT,EAAen9C,GAAf,CAAoB8xD,GAApB,EAEA,MAAOD,KAAIvwD,KAAJ,EAAP,CAEH,CAED,QAASywD,kBAAT,CAA4BrtD,MAA5B,CAAoCk1C,QAApC,CAA8CoY,SAA9C,CAAyD9F,GAAzD,CAA8DlG,EAA9D,CAAkEC,EAAlE,CAAsEC,EAAtE,CAA0ElqB,KAA1E,CAAkF,CAE9E,GAAIoC,UAAJ,CAEA,GAAKwb,SAAS6O,IAAT,GAAkBxvC,QAAvB,CAAkC,CAE9BmlB,UAAY8tB,IAAIqC,iBAAJ,CAAuBrI,EAAvB,CAA2BD,EAA3B,CAA+BD,EAA/B,CAAmC,IAAnC,CAAyChqB,KAAzC,CAAZ,CAEH,CAJD,IAIO,CAEHoC,UAAY8tB,IAAIqC,iBAAJ,CAAuBvI,EAAvB,CAA2BC,EAA3B,CAA+BC,EAA/B,CAAmCtM,SAAS6O,IAAT,GAAkBvvC,UAArD,CAAiE8iB,KAAjE,CAAZ,CAEH,CAED,GAAKoC,YAAc,IAAnB,CAA0B,MAAO,KAAP,CAE1BuzB,uBAAuBlqD,IAAvB,CAA6Bu0B,KAA7B,EACA21B,uBAAuB7lC,YAAvB,CAAqCpnB,OAAO2vB,WAA5C,EAEA,GAAIroB,UAAWgmD,UAAU9F,GAAV,CAAcD,MAAd,CAAqB/mC,UAArB,CAAiCysC,sBAAjC,CAAf,CAEA,GAAK3lD,SAAWgmD,UAAUryD,IAArB,EAA6BqM,SAAWgmD,UAAU5iC,GAAvD,CAA6D,MAAO,KAAP,CAE7D,MAAO,CACHpjB,SAAUA,QADP,CAEHgwB,MAAO21B,uBAAuBrwD,KAAvB,EAFJ,CAGHoD,OAAQA,MAHL,CAAP,CAMH,CAED,QAASutD,gCAAT,CAA0CvtD,MAA1C,CAAkDstD,SAAlD,CAA6D9F,GAA7D,CAAkE3tD,QAAlE,CAA4Ew6B,EAA5E,CAAgF3iB,CAAhF,CAAmFX,CAAnF,CAAsFuQ,CAAtF,CAA0F,CAEtF83B,GAAGn4B,mBAAH,CAAwBpnB,QAAxB,CAAkC6X,CAAlC,EACA2nC,GAAGp4B,mBAAH,CAAwBpnB,QAAxB,CAAkCkX,CAAlC,EACAuoC,GAAGr4B,mBAAH,CAAwBpnB,QAAxB,CAAkCynB,CAAlC,EAEA,GAAIksC,cAAeH,kBAAmBrtD,MAAnB,CAA2BA,OAAOk1C,QAAlC,CAA4CoY,SAA5C,CAAuD9F,GAAvD,CAA4DpO,EAA5D,CAAgEC,EAAhE,CAAoEC,EAApE,CAAwE0T,iBAAxE,CAAnB,CAEA,GAAKQ,YAAL,CAAoB,CAEhB,GAAKn5B,EAAL,CAAU,CAENu4B,IAAI3rC,mBAAJ,CAAyBoT,EAAzB,CAA6B3iB,CAA7B,EACAm7C,IAAI5rC,mBAAJ,CAAyBoT,EAAzB,CAA6BtjB,CAA7B,EACA+7C,IAAI7rC,mBAAJ,CAAyBoT,EAAzB,CAA6B/S,CAA7B,EAEAksC,aAAan5B,EAAb,CAAkB64B,eAAgBF,iBAAhB,CAAmC5T,EAAnC,CAAuCC,EAAvC,CAA2CC,EAA3C,CAA+CsT,GAA/C,CAAoDC,GAApD,CAAyDC,GAAzD,CAAlB,CAEH,CAED,GAAI/U,MAAO,GAAIvB,MAAJ,CAAW9kC,CAAX,CAAcX,CAAd,CAAiBuQ,CAAjB,CAAX,CACAupC,SAASC,SAAT,CAAoB1R,EAApB,CAAwBC,EAAxB,CAA4BC,EAA5B,CAAgCvB,KAAKtnB,MAArC,EAEA+8B,aAAazV,IAAb,CAAoBA,IAApB,CAEH,CAED,MAAOyV,aAAP,CAEH,CAED,MAAO,SAASnZ,QAAT,CAAkBiZ,SAAlB,CAA6BG,UAA7B,CAA0C,CAE7C,GAAI91B,UAAW,KAAKA,QAApB,CACA,GAAIud,UAAW,KAAKA,QAApB,CACA,GAAIvlB,aAAc,KAAKA,WAAvB,CAEA,GAAKulB,WAAah1C,SAAlB,CAA8B,OAE9B;AAEA,GAAKy3B,SAASoG,cAAT,GAA4B,IAAjC,CAAwCpG,SAASqG,qBAAT,GAExCzF,OAAOx1B,IAAP,CAAa40B,SAASoG,cAAtB,EACAxF,OAAOnR,YAAP,CAAqBuI,WAArB,EAEA,GAAK29B,UAAU9F,GAAV,CAAcnvB,gBAAd,CAAgCE,MAAhC,IAA6C,KAAlD,CAA0D,OAE1D;AAEAi0B,cAAc/kC,UAAd,CAA0BkI,WAA1B,EACA63B,IAAIzkD,IAAJ,CAAUuqD,UAAU9F,GAApB,EAA0BpgC,YAA1B,CAAwColC,aAAxC,EAEA;AAEA,GAAK70B,SAAS2f,WAAT,GAAyB,IAA9B,CAAqC,CAEjC,GAAKkQ,IAAIpvB,aAAJ,CAAmBT,SAAS2f,WAA5B,IAA8C,KAAnD,CAA2D,OAE9D,CAED,GAAIkW,aAAJ,CAEA,GAAK71B,SAASG,gBAAd,CAAiC,CAE7B,GAAIpmB,EAAJ,CAAOX,CAAP,CAAUuQ,CAAV,CACA,GAAIrO,OAAQ0kB,SAAS1kB,KAArB,CACA,GAAIpZ,UAAW89B,SAASI,UAAT,CAAoBl+B,QAAnC,CACA,GAAIw6B,IAAKsD,SAASI,UAAT,CAAoB1D,EAA7B,CACA,GAAIvoB,EAAJ,CAAO6H,CAAP,CAEA,GAAKV,QAAU,IAAf,CAAsB,CAElB;AAEA,IAAMnH,EAAI,CAAJ,CAAO6H,EAAIV,MAAMiU,KAAvB,CAA8Bpb,EAAI6H,CAAlC,CAAqC7H,GAAK,CAA1C,CAA8C,CAE1C4F,EAAIuB,MAAMkO,IAAN,CAAYrV,CAAZ,CAAJ,CACAiF,EAAIkC,MAAMkO,IAAN,CAAYrV,EAAI,CAAhB,CAAJ,CACAwV,EAAIrO,MAAMkO,IAAN,CAAYrV,EAAI,CAAhB,CAAJ,CAEA0hD,aAAeD,gCAAiC,IAAjC,CAAuCD,SAAvC,CAAkD9F,GAAlD,CAAuD3tD,QAAvD,CAAiEw6B,EAAjE,CAAqE3iB,CAArE,CAAwEX,CAAxE,CAA2EuQ,CAA3E,CAAf,CAEA,GAAKksC,YAAL,CAAoB,CAEhBA,aAAaE,SAAb,CAAyBlwD,KAAKmT,KAAL,CAAY7E,EAAI,CAAhB,CAAzB,CAA8C;AAC9C2hD,WAAW9wD,IAAX,CAAiB6wD,YAAjB,EAEH,CAEJ,CAEJ,CArBD,IAqBO,IAAK3zD,WAAaqG,SAAlB,CAA8B,CAEjC;AAEA,IAAM4L,EAAI,CAAJ,CAAO6H,EAAI9Z,SAASqtB,KAA1B,CAAiCpb,EAAI6H,CAArC,CAAwC7H,GAAK,CAA7C,CAAiD,CAE7C4F,EAAI5F,CAAJ,CACAiF,EAAIjF,EAAI,CAAR,CACAwV,EAAIxV,EAAI,CAAR,CAEA0hD,aAAeD,gCAAiC,IAAjC,CAAuCD,SAAvC,CAAkD9F,GAAlD,CAAuD3tD,QAAvD,CAAiEw6B,EAAjE,CAAqE3iB,CAArE,CAAwEX,CAAxE,CAA2EuQ,CAA3E,CAAf,CAEA,GAAKksC,YAAL,CAAoB,CAEhBA,aAAaE,SAAb,CAAyBlwD,KAAKmT,KAAL,CAAY7E,EAAI,CAAhB,CAAzB,CAA8C;AAC9C2hD,WAAW9wD,IAAX,CAAiB6wD,YAAjB,EAEH,CAEJ,CAEJ,CAEJ,CApDD,IAoDO,IAAK71B,SAASC,UAAd,CAA2B,CAE9B,GAAI+1B,IAAJ,CAASC,GAAT,CAAcC,GAAd,CACA,GAAIC,iBAAkB5/C,MAAM63B,OAAN,CAAemP,QAAf,CAAtB,CAEA,GAAIrd,UAAWF,SAASE,QAAxB,CACA,GAAIkf,OAAQpf,SAASof,KAArB,CACA,GAAIwB,IAAJ,CAEA,GAAIvB,eAAgBrf,SAASqf,aAAT,CAAwB,CAAxB,CAApB,CACA,GAAKA,cAAc9uC,MAAd,CAAuB,CAA5B,CAAgCqwC,IAAMvB,aAAN,CAEhC,IAAM,GAAItmC,GAAI,CAAR,CAAWyoC,GAAKpC,MAAM7uC,MAA5B,CAAoCwI,EAAIyoC,EAAxC,CAA4CzoC,GAA5C,CAAmD,CAE/C,GAAIqnC,MAAOhB,MAAOrmC,CAAP,CAAX,CACA,GAAIq9C,cAAeD,gBAAkB5Y,SAAU6C,KAAKtB,aAAf,CAAlB,CAAmDvB,QAAtE,CAEA,GAAK6Y,eAAiB7tD,SAAtB,CAAkC,SAElCytD,IAAM91B,SAAUkgB,KAAKrmC,CAAf,CAAN,CACAk8C,IAAM/1B,SAAUkgB,KAAKhnC,CAAf,CAAN,CACA88C,IAAMh2B,SAAUkgB,KAAKz2B,CAAf,CAAN,CAEA,GAAKysC,aAAa9W,YAAb,GAA8B,IAAnC,CAA0C,CAEtC,GAAIA,cAAetf,SAASsf,YAA5B,CACA,GAAI+W,iBAAkB,KAAK5B,qBAA3B,CAEAhT,GAAGz+C,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,EACA0+C,GAAG1+C,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,EACA2+C,GAAG3+C,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,EAEA,IAAM,GAAI4W,GAAI,CAAR,CAAW08C,GAAKhX,aAAa/uC,MAAnC,CAA2CqJ,EAAI08C,EAA/C,CAAmD18C,GAAnD,CAA0D,CAEtD,GAAI28C,WAAYF,gBAAiBz8C,CAAjB,CAAhB,CAEA,GAAK28C,YAAc,CAAnB,CAAuB,SAEvB,GAAIC,SAAUlX,aAAc1lC,CAAd,EAAkBsmB,QAAhC,CAEAuhB,GAAGh6B,eAAH,CAAoBqtC,MAAMrjD,UAAN,CAAkB+kD,QAASpW,KAAKrmC,CAAd,CAAlB,CAAqCi8C,GAArC,CAApB,CAAgEO,SAAhE,EACA7U,GAAGj6B,eAAH,CAAoBstC,MAAMtjD,UAAN,CAAkB+kD,QAASpW,KAAKhnC,CAAd,CAAlB,CAAqC68C,GAArC,CAApB,CAAgEM,SAAhE,EACA5U,GAAGl6B,eAAH,CAAoButC,MAAMvjD,UAAN,CAAkB+kD,QAASpW,KAAKz2B,CAAd,CAAlB,CAAqCusC,GAArC,CAApB,CAAgEK,SAAhE,EAEH,CAED9U,GAAG99C,GAAH,CAAQqyD,GAAR,EACAtU,GAAG/9C,GAAH,CAAQsyD,GAAR,EACAtU,GAAGh+C,GAAH,CAAQuyD,GAAR,EAEAF,IAAMvU,EAAN,CACAwU,IAAMvU,EAAN,CACAwU,IAAMvU,EAAN,CAEH,CAEDkU,aAAeH,kBAAmB,IAAnB,CAAyBU,YAAzB,CAAuCT,SAAvC,CAAkD9F,GAAlD,CAAuDmG,GAAvD,CAA4DC,GAA5D,CAAiEC,GAAjE,CAAsEb,iBAAtE,CAAf,CAEA,GAAKQ,YAAL,CAAoB,CAEhB,GAAKjV,KAAOA,IAAK7nC,CAAL,CAAZ,CAAuB,CAEnB,GAAI09C,OAAQ7V,IAAK7nC,CAAL,CAAZ,CACAk8C,IAAI7pD,IAAJ,CAAUqrD,MAAO,CAAP,CAAV,EACAvB,IAAI9pD,IAAJ,CAAUqrD,MAAO,CAAP,CAAV,EACAtB,IAAI/pD,IAAJ,CAAUqrD,MAAO,CAAP,CAAV,EAEAZ,aAAan5B,EAAb,CAAkB64B,eAAgBF,iBAAhB,CAAmCW,GAAnC,CAAwCC,GAAxC,CAA6CC,GAA7C,CAAkDjB,GAAlD,CAAuDC,GAAvD,CAA4DC,GAA5D,CAAlB,CAEH,CAEDU,aAAazV,IAAb,CAAoBA,IAApB,CACAyV,aAAaE,SAAb,CAAyBh9C,CAAzB,CACA+8C,WAAW9wD,IAAX,CAAiB6wD,YAAjB,EAEH,CAEJ,CAEJ,CAEJ,CArKD,CAuKH,CA1QU,EA1FsD,CAsWjE5wD,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAK4sB,QAA3B,CAAqC,KAAKud,QAA1C,EAAqDnyC,IAArD,CAA2D,IAA3D,CAAP,CAEH,CA1WgE,CAApD,CAAjB,CA8WA;;OAIA,QAASsrD,gBAAT,CAA0Br2D,QAA1B,CAAoCoL,KAApC,CAA2CkrD,OAA3C,CAAoDlJ,kBAApD,CAAyE,CAErE,GAAImJ,YAAa,GAAItoB,MAAJ,CAAW,QAAX,CAAjB,CACA,GAAIuoB,YAAa,CAAjB,CAEA,GAAIC,YAAJ,CAAiBC,SAAjB,CACA,GAAIC,QAAJ,CAEA,QAASzwD,OAAT,CAAiB0wD,UAAjB,CAA6B92D,KAA7B,CAAoCC,MAApC,CAA4C82D,UAA5C,CAAyD,CAErD,GAAIC,YAAah3D,MAAMg3D,UAAvB,CAEA,GAAKA,aAAe,IAApB,CAA2B,CAEvBC,SAAUR,UAAV,CAAsBC,UAAtB,EAEH,CAJD,IAIO,IAAKM,YAAcA,WAAWhpB,OAA9B,CAAwC,CAE3CipB,SAAUD,UAAV,CAAsB,CAAtB,EACAD,WAAa,IAAb,CAEH,CAED,GAAK72D,SAASg3D,SAAT,EAAsBH,UAA3B,CAAwC,CAEpC72D,SAASi3D,KAAT,CAAgBj3D,SAASk3D,cAAzB,CAAyCl3D,SAASm3D,cAAlD,CAAkEn3D,SAASo3D,gBAA3E,EAEH,CAED,GAAKN,YAAcA,WAAWO,aAA9B,CAA8C,CAE1C,GAAKV,UAAYzuD,SAAjB,CAA6B,CAEzByuD,QAAU,GAAI1yD,KAAJ,CACN,GAAIqmD,kBAAJ,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B,CAA7B,CADM,CAEN,GAAIoE,eAAJ,CAAoB,CAChBlhB,SAAU0G,UAAU9zC,IAAV,CAAeotC,QADT,CAEhB4G,aAAcF,UAAU9zC,IAAV,CAAeg0C,YAFb,CAGhBC,eAAgBH,UAAU9zC,IAAV,CAAei0C,cAHf,CAIhB0X,KAAMxvC,QAJU,CAKhBiwC,UAAW,IALK,CAMhBC,WAAY,KANI,CAOhBna,IAAK,KAPW,CAApB,CAFM,CAAV,CAaAqkB,QAAQh3B,QAAR,CAAiB8oB,eAAjB,CAAkC,QAAlC,EACAkO,QAAQh3B,QAAR,CAAiB8oB,eAAjB,CAAkC,IAAlC,EAEAkO,QAAQ/b,cAAR,CAAyB,SAAW56C,QAAX,CAAqBF,KAArB,CAA4BC,MAA5B,CAAqC,CAE1D,KAAK43B,WAAL,CAAiB9M,YAAjB,CAA+B9qB,OAAO43B,WAAtC,EAEH,CAJD,CAMA2+B,QAAQrwD,MAAR,CAAgB0wD,OAAhB,EAEH,CAEDA,QAAQzZ,QAAR,CAAiB1P,QAAjB,CAA0B2H,KAA1B,CAAgC/hC,KAAhC,CAAwC0jD,UAAxC,CAEAF,WAAWjyD,IAAX,CAAiBgyD,OAAjB,CAA0BA,QAAQh3B,QAAlC,CAA4Cg3B,QAAQzZ,QAApD,CAA8D,CAA9D,CAAiE,IAAjE,EAEH,CAlCD,IAkCO,IAAK4Z,YAAcA,WAAW57B,SAA9B,CAA0C,CAE7C,GAAKu7B,cAAgBvuD,SAArB,CAAiC,CAE7BuuD,YAAc,GAAI7Y,mBAAJ,CAAwB,CAAE,CAA1B,CAA6B,CAA7B,CAAgC,CAAhC,CAAmC,CAAE,CAArC,CAAwC,CAAxC,CAA2C,CAA3C,CAAd,CAEA8Y,UAAY,GAAIzyD,KAAJ,CACR,GAAIJ,oBAAJ,CAAyB,CAAzB,CAA4B,CAA5B,CADQ,CAER,GAAI0qD,kBAAJ,CAAuB,CAAE/B,UAAW,KAAb,CAAoBC,WAAY,KAAhC,CAAuCna,IAAK,KAA5C,CAAvB,CAFQ,CAAZ,CAKAgkB,QAAQrwD,MAAR,CAAgBywD,SAAhB,EAEH,CAEDA,UAAUxZ,QAAV,CAAmB/M,GAAnB,CAAyB2mB,UAAzB,CAEA;AAEA92D,SAASs3D,kBAAT,CAA6Bb,WAA7B,CAA0C,IAA1C,CAAgDC,UAAU/2B,QAA1D,CAAoE+2B,UAAUxZ,QAA9E,CAAwFwZ,SAAxF,CAAmG,IAAnG,EAEH,CAEJ,CAED,QAASK,SAAT,CAAmB/yD,KAAnB,CAA0B2kB,KAA1B,CAAkC,CAE9Bvd,MAAMmrC,OAAN,CAAcvyC,KAAd,CAAoB+yD,QAApB,CAA8B/yD,MAAMyxB,CAApC,CAAuCzxB,MAAMo1B,CAA7C,CAAgDp1B,MAAM+U,CAAtD,CAAyD4P,KAAzD,CAAgEykC,kBAAhE,EAEH,CAED,MAAO,CAEHmK,cAAe,wBAAY,CAEvB,MAAOhB,WAAP,CAEH,CANE,CAOH90D,cAAe,uBAAWuC,KAAX,CAAkB2kB,KAAlB,CAA0B,CAErC4tC,WAAW5zD,GAAX,CAAgBqB,KAAhB,EACAwyD,WAAa7tC,QAAUzgB,SAAV,CAAsBygB,KAAtB,CAA8B,CAA3C,CACAouC,SAAUR,UAAV,CAAsBC,UAAtB,EAEH,CAbE,CAcHgB,cAAe,wBAAY,CAEvB,MAAOhB,WAAP,CAEH,CAlBE,CAmBHiB,cAAe,uBAAW9uC,KAAX,CAAmB,CAE9B6tC,WAAa7tC,KAAb,CACAouC,SAAUR,UAAV,CAAsBC,UAAtB,EAEH,CAxBE,CAyBHtwD,OAAQA,MAzBL,CAAP,CA6BH,CAED;;OAIA,QAASwxD,oBAAT,CAA8BphB,EAA9B,CAAkCuY,UAAlC,CAA8C8I,IAA9C,CAAqD,CAEjD,GAAIC,KAAJ,CAEA,QAASC,QAAT,CAAkBzkD,KAAlB,CAA0B,CAEtBwkD,KAAOxkD,KAAP,CAEH,CAED,QAASlN,OAAT,CAAiBuB,KAAjB,CAAwBynB,KAAxB,CAAgC,CAE5BonB,GAAGwhB,UAAH,CAAeF,IAAf,CAAqBnwD,KAArB,CAA4BynB,KAA5B,EAEAyoC,KAAK1xD,MAAL,CAAaipB,KAAb,CAAoB0oC,IAApB,EAEH,CAED,QAASG,gBAAT,CAA0Bp4B,QAA1B,CAAoCl4B,KAApC,CAA2CynB,KAA3C,CAAmD,CAE/C,GAAI8oC,WAAYnJ,WAAW37C,GAAX,CAAgB,wBAAhB,CAAhB,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,CAEtBvxD,QAAQ+iB,KAAR,CAAe,gIAAf,EACA,OAEH,CAEDwuC,UAAUC,wBAAV,CAAoCL,IAApC,CAA0CnwD,KAA1C,CAAiDynB,KAAjD,CAAwDyQ,SAASu4B,iBAAjE,EAEAP,KAAK1xD,MAAL,CAAaipB,KAAb,CAAoB0oC,IAApB,CAA0Bj4B,SAASu4B,iBAAnC,EAEH,CAED;AAEA,KAAKL,OAAL,CAAeA,OAAf,CACA,KAAK3xD,MAAL,CAAcA,MAAd,CACA,KAAK6xD,eAAL,CAAuBA,eAAvB,CAEH,CAED;;OAIA,QAASI,kBAAT,CAA4B7hB,EAA5B,CAAgCuY,UAAhC,CAA4C7R,UAA5C,CAAyD,CAErD,GAAIob,cAAJ,CAEA,QAASC,iBAAT,EAA4B,CAExB,GAAKD,gBAAkBlwD,SAAvB,CAAmC,MAAOkwD,cAAP,CAEnC,GAAIJ,WAAYnJ,WAAW37C,GAAX,CAAgB,gCAAhB,CAAhB,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,CAEtBI,cAAgB9hB,GAAGnW,YAAH,CAAiB63B,UAAUM,8BAA3B,CAAhB,CAEH,CAJD,IAIO,CAEHF,cAAgB,CAAhB,CAEH,CAED,MAAOA,cAAP,CAEH,CAED,QAASG,gBAAT,CAA0B9U,SAA1B,CAAsC,CAElC,GAAKA,YAAc,OAAnB,CAA6B,CAEzB,GAAKnN,GAAGkiB,wBAAH,CAA6BliB,GAAGmiB,aAAhC,CAA+CniB,GAAGoiB,UAAlD,EAA+DjV,SAA/D,CAA2E,CAA3E,EACDnN,GAAGkiB,wBAAH,CAA6BliB,GAAGqiB,eAAhC,CAAiDriB,GAAGoiB,UAApD,EAAiEjV,SAAjE,CAA6E,CADjF,CACqF,CAEjF,MAAO,OAAP,CAEH,CAEDA,UAAY,SAAZ,CAEH,CAED,GAAKA,YAAc,SAAnB,CAA+B,CAE3B,GAAKnN,GAAGkiB,wBAAH,CAA6BliB,GAAGmiB,aAAhC,CAA+CniB,GAAGsiB,YAAlD,EAAiEnV,SAAjE,CAA6E,CAA7E,EACDnN,GAAGkiB,wBAAH,CAA6BliB,GAAGqiB,eAAhC,CAAiDriB,GAAGsiB,YAApD,EAAmEnV,SAAnE,CAA+E,CADnF,CACuF,CAEnF,MAAO,SAAP,CAEH,CAEJ,CAED,MAAO,MAAP,CAEH,CAED,GAAIA,WAAYzG,WAAWyG,SAAX,GAAyBv7C,SAAzB,CAAqC80C,WAAWyG,SAAhD,CAA4D,OAA5E,CACA,GAAIoV,cAAeN,gBAAiB9U,SAAjB,CAAnB,CAEA,GAAKoV,eAAiBpV,SAAtB,CAAkC,CAE9Bh9C,QAAQgK,IAAR,CAAc,sBAAd,CAAsCgzC,SAAtC,CAAiD,sBAAjD,CAAyEoV,YAAzE,CAAuF,UAAvF,EACApV,UAAYoV,YAAZ,CAEH,CAED,GAAIC,wBAAyB9b,WAAW8b,sBAAX,GAAsC,IAAnE,CAEA,GAAIC,aAAcziB,GAAGnW,YAAH,CAAiBmW,GAAG0iB,uBAApB,CAAlB,CACA,GAAIC,mBAAoB3iB,GAAGnW,YAAH,CAAiBmW,GAAG4iB,8BAApB,CAAxB,CACA,GAAIC,gBAAiB7iB,GAAGnW,YAAH,CAAiBmW,GAAG8iB,gBAApB,CAArB,CACA,GAAIC,gBAAiB/iB,GAAGnW,YAAH,CAAiBmW,GAAGgjB,yBAApB,CAArB,CAEA,GAAIC,eAAgBjjB,GAAGnW,YAAH,CAAiBmW,GAAGkjB,kBAApB,CAApB,CACA,GAAIC,mBAAoBnjB,GAAGnW,YAAH,CAAiBmW,GAAGojB,0BAApB,CAAxB,CACA,GAAIC,aAAcrjB,GAAGnW,YAAH,CAAiBmW,GAAGsjB,mBAApB,CAAlB,CACA,GAAIC,qBAAsBvjB,GAAGnW,YAAH,CAAiBmW,GAAGwjB,4BAApB,CAA1B,CAEA,GAAIC,gBAAiBd,kBAAoB,CAAzC,CACA,GAAIe,uBAAwB,CAAC,CAAEnL,WAAW37C,GAAX,CAAgB,mBAAhB,CAA/B,CACA,GAAI+mD,qBAAsBF,gBAAkBC,qBAA5C,CAEA,MAAO,CAEH3B,iBAAkBA,gBAFf,CAGHE,gBAAiBA,eAHd,CAKH9U,UAAWA,SALR,CAMHqV,uBAAwBA,sBANrB,CAQHC,YAAaA,WARV,CASHE,kBAAmBA,iBAThB,CAUHE,eAAgBA,cAVb,CAWHE,eAAgBA,cAXb,CAaHE,cAAeA,aAbZ,CAcHE,kBAAmBA,iBAdhB,CAeHE,YAAaA,WAfV,CAgBHE,oBAAqBA,mBAhBlB,CAkBHE,eAAgBA,cAlBb,CAmBHC,sBAAuBA,qBAnBpB,CAoBHC,oBAAqBA,mBApBlB,CAAP,CAwBH,CAED;;OAIA,QAASC,cAAT,EAAyB,CAErB,GAAIpvD,OAAQ,IAAZ,CAEIqvD,YAAc,IAFlB,CAGIC,gBAAkB,CAHtB,CAIIC,qBAAuB,KAJ3B,CAKIC,iBAAmB,KALvB,CAOIr6D,MAAQ,GAAImjC,MAAJ,EAPZ,CAQIm3B,iBAAmB,GAAIthC,QAAJ,EARvB,CAUIuhC,QAAU,CAAEpnD,MAAO,IAAT,CAAey1C,YAAa,KAA5B,CAVd,CAYA,KAAK2R,OAAL,CAAeA,OAAf,CACA,KAAKC,SAAL,CAAiB,CAAjB,CACA,KAAKC,eAAL,CAAuB,CAAvB,CAEA,KAAKC,IAAL,CAAY,SAAWh2B,MAAX,CAAmBi2B,mBAAnB,CAAwC76D,MAAxC,CAAiD,CAEzD,GAAI6B,SACA+iC,OAAOz0B,MAAP,GAAkB,CAAlB,EACA0qD,mBADA,EAEA;AACA;AACAR,kBAAoB,CAJpB,EAKAC,oBANJ,CAQAA,qBAAuBO,mBAAvB,CAEAT,YAAcU,cAAel2B,MAAf,CAAuB5kC,MAAvB,CAA+B,CAA/B,CAAd,CACAq6D,gBAAkBz1B,OAAOz0B,MAAzB,CAEA,MAAOtO,QAAP,CAEH,CAjBD,CAmBA,KAAKk5D,YAAL,CAAoB,UAAY,CAE5BR,iBAAmB,IAAnB,CACAO,cAAe,IAAf,EAEH,CALD,CAOA,KAAKE,UAAL,CAAkB,UAAY,CAE1BT,iBAAmB,KAAnB,CACAU,mBAEH,CALD,CAOA,KAAKC,QAAL,CAAgB,SAAWt2B,MAAX,CAAmBgoB,gBAAnB,CAAqCC,WAArC,CAAkD7sD,MAAlD,CAA0Ds9C,KAA1D,CAAiE6d,SAAjE,CAA6E,CAEzF,GAAK,CAAEb,oBAAF,EAA0B11B,SAAW,IAArC,EAA6CA,OAAOz0B,MAAP,GAAkB,CAA/D,EAAoEoqD,kBAAoB,CAAE1N,WAA/F,CAA6G,CAEzG;AAEA,GAAK0N,gBAAL,CAAwB,CAEpB;AAEAO,cAAe,IAAf,EAEH,CAND,IAMO,CAEHG,mBAEH,CAEJ,CAhBD,IAgBO,CAEH,GAAIG,SAAUb,iBAAmB,CAAnB,CAAuBF,eAArC,CACIgB,QAAUD,QAAU,CADxB,CAGIE,SAAWhe,MAAMie,aAAN,EAAuB,IAHtC,CAKAd,QAAQpnD,KAAR,CAAgBioD,QAAhB,CAA0B;AAE1BA,SAAWR,cAAel2B,MAAf,CAAuB5kC,MAAvB,CAA+Bq7D,OAA/B,CAAwCF,SAAxC,CAAX,CAEA,IAAM,GAAIpnD,GAAI,CAAd,CAAiBA,IAAMsnD,OAAvB,CAAgC,EAAGtnD,CAAnC,CAAuC,CAEnCunD,SAAUvnD,CAAV,EAAgBqmD,YAAarmD,CAAb,CAAhB,CAEH,CAEDupC,MAAMie,aAAN,CAAsBD,QAAtB,CACA,KAAKX,eAAL,CAAuB/N,iBAAmB,KAAK8N,SAAxB,CAAoC,CAA3D,CACA,KAAKA,SAAL,EAAkBU,OAAlB,CAEH,CAGJ,CA1CD,CA4CA,QAASH,iBAAT,EAA4B,CAExB,GAAKR,QAAQpnD,KAAR,GAAkB+mD,WAAvB,CAAqC,CAEjCK,QAAQpnD,KAAR,CAAgB+mD,WAAhB,CACAK,QAAQ3R,WAAR,CAAsBuR,gBAAkB,CAAxC,CAEH,CAEDtvD,MAAM2vD,SAAN,CAAkBL,eAAlB,CACAtvD,MAAM4vD,eAAN,CAAwB,CAAxB,CAEH,CAED,QAASG,cAAT,CAAwBl2B,MAAxB,CAAgC5kC,MAAhC,CAAwCqzB,SAAxC,CAAmDmoC,aAAnD,CAAmE,CAE/D,GAAIC,SAAU72B,SAAW,IAAX,CAAkBA,OAAOz0B,MAAzB,CAAkC,CAAhD,CACImrD,SAAW,IADf,CAGA,GAAKG,UAAY,CAAjB,CAAqB,CAEjBH,SAAWb,QAAQpnD,KAAnB,CAEA,GAAKmoD,gBAAkB,IAAlB,EAA0BF,WAAa,IAA5C,CAAmD,CAE/C,GAAII,UAAWroC,UAAYooC,QAAU,CAArC,CACIE,WAAa37D,OAAO49C,kBADxB,CAGA4c,iBAAiBlhC,eAAjB,CAAkCqiC,UAAlC,EAEA,GAAKL,WAAa,IAAb,EAAqBA,SAASnrD,MAAT,CAAkBurD,QAA5C,CAAuD,CAEnDJ,SAAW,GAAIjkB,aAAJ,CAAkBqkB,QAAlB,CAAX,CAEH,CAED,IAAM,GAAI3nD,GAAI,CAAR,CAAW6nD,GAAKvoC,SAAtB,CAAiCtf,IAAM0nD,OAAvC,CAAgD,EAAG1nD,CAAH,CAAM6nD,IAAM,CAA5D,CAAgE,CAE5D17D,MAAM8K,IAAN,CAAY45B,OAAQ7wB,CAAR,CAAZ,EAA0Bsb,YAA1B,CAAwCssC,UAAxC,CAAoDnB,gBAApD,EAEAt6D,MAAMw4B,MAAN,CAAazP,OAAb,CAAsBqyC,QAAtB,CAAgCM,EAAhC,EACAN,SAAUM,GAAK,CAAf,EAAqB17D,MAAMygC,QAA3B,CAEH,CAEJ,CAED85B,QAAQpnD,KAAR,CAAgBioD,QAAhB,CACAb,QAAQ3R,WAAR,CAAsB,IAAtB,CAEH,CAED/9C,MAAM2vD,SAAN,CAAkBe,OAAlB,CAEA,MAAOH,SAAP,CAEH,CAEJ,CAED;;OAIA,QAASO,gBAAT,CAA0BtlB,EAA1B,CAA+B,CAE3B,GAAIuY,YAAa,EAAjB,CAEA,MAAO,CAEH37C,IAAK,aAAWsnB,IAAX,CAAkB,CAEnB,GAAKq0B,WAAYr0B,IAAZ,IAAuBtyB,SAA5B,CAAwC,CAEpC,MAAO2mD,YAAYr0B,IAAZ,CAAP,CAEH,CAED,GAAIw9B,UAAJ,CAEA,OAASx9B,IAAT,EAEI,IAAK,qBAAL,CACIw9B,UAAY1hB,GAAGulB,YAAH,CAAiB,qBAAjB,GAA4CvlB,GAAGulB,YAAH,CAAiB,yBAAjB,CAA5C,EAA4FvlB,GAAGulB,YAAH,CAAiB,4BAAjB,CAAxG,CACA,MAEJ,IAAK,gCAAL,CACI7D,UAAY1hB,GAAGulB,YAAH,CAAiB,gCAAjB,GAAuDvlB,GAAGulB,YAAH,CAAiB,oCAAjB,CAAvD,EAAkHvlB,GAAGulB,YAAH,CAAiB,uCAAjB,CAA9H,CACA,MAEJ,IAAK,+BAAL,CACI7D,UAAY1hB,GAAGulB,YAAH,CAAiB,+BAAjB,GAAsDvlB,GAAGulB,YAAH,CAAiB,mCAAjB,CAAtD,EAAgHvlB,GAAGulB,YAAH,CAAiB,sCAAjB,CAA5H,CACA,MAEJ,IAAK,gCAAL,CACI7D,UAAY1hB,GAAGulB,YAAH,CAAiB,gCAAjB,GAAuDvlB,GAAGulB,YAAH,CAAiB,uCAAjB,CAAnE,CACA,MAEJ,QACI7D,UAAY1hB,GAAGulB,YAAH,CAAiBrhC,IAAjB,CAAZ,CAnBR,CAuBA,GAAKw9B,YAAc,IAAnB,CAA0B,CAEtBvxD,QAAQgK,IAAR,CAAc,wBAA0B+pB,IAA1B,CAAiC,2BAA/C,EAEH,CAEDq0B,WAAYr0B,IAAZ,EAAqBw9B,SAArB,CAEA,MAAOA,UAAP,CAEH,CA7CE,CAAP,CAiDH,CAED;;OAIA,QAAS8D,gBAAT,CAA0BxlB,EAA1B,CAA8BvW,UAA9B,CAA0C43B,IAA1C,CAAiD,CAE7C,GAAIlb,YAAa,EAAjB,CACA,GAAIsf,qBAAsB,EAA1B,CAEA,QAASC,kBAAT,CAA4BlrD,KAA5B,CAAoC,CAEhC,GAAI6uB,UAAW7uB,MAAMvN,MAArB,CACA,GAAI04D,gBAAiBxf,WAAY9c,SAASr/B,EAArB,CAArB,CAEA,GAAK27D,eAAehhD,KAAf,GAAyB,IAA9B,CAAqC,CAEjC8kB,WAAWlsB,MAAX,CAAmBooD,eAAehhD,KAAlC,EAEH,CAED,IAAM,GAAIuf,KAAV,GAAkByhC,gBAAel8B,UAAjC,CAA8C,CAE1CA,WAAWlsB,MAAX,CAAmBooD,eAAel8B,UAAf,CAA2BvF,IAA3B,CAAnB,EAEH,CAEDmF,SAASvyB,mBAAT,CAA8B,SAA9B,CAAyC4uD,iBAAzC,EAEA,MAAOvf,YAAY9c,SAASr/B,EAArB,CAAP,CAEA;AAEA,GAAI4oB,WAAY6yC,oBAAqBp8B,SAASr/B,EAA9B,CAAhB,CAEA,GAAK4oB,SAAL,CAAiB,CAEb6W,WAAWlsB,MAAX,CAAmBqV,SAAnB,EACA,MAAO6yC,qBAAqBp8B,SAASr/B,EAA9B,CAAP,CAEH,CAED4oB,UAAY6yC,oBAAqBE,eAAe37D,EAApC,CAAZ,CAEA,GAAK4oB,SAAL,CAAiB,CAEb6W,WAAWlsB,MAAX,CAAmBqV,SAAnB,EACA,MAAO6yC,qBAAqBE,eAAe37D,EAApC,CAAP,CAEH,CAED;AAEAq3D,KAAKuE,MAAL,CAAYzf,UAAZ,GAEH,CAED,QAASvpC,IAAT,CAAclL,MAAd,CAAsB23B,QAAtB,CAAiC,CAE7B,GAAIs8B,gBAAiBxf,WAAY9c,SAASr/B,EAArB,CAArB,CAEA,GAAK27D,cAAL,CAAsB,MAAOA,eAAP,CAEtBt8B,SAASx5B,gBAAT,CAA2B,SAA3B,CAAsC61D,iBAAtC,EAEA,GAAKr8B,SAASG,gBAAd,CAAiC,CAE7Bm8B,eAAiBt8B,QAAjB,CAEH,CAJD,IAIO,IAAKA,SAASC,UAAd,CAA2B,CAE9B,GAAKD,SAASw8B,eAAT,GAA6Bj0D,SAAlC,CAA8C,CAE1Cy3B,SAASw8B,eAAT,CAA2B,GAAIjU,eAAJ,GAAqBlpB,aAArB,CAAoCh3B,MAApC,CAA3B,CAEH,CAEDi0D,eAAiBt8B,SAASw8B,eAA1B,CAEH,CAED1f,WAAY9c,SAASr/B,EAArB,EAA4B27D,cAA5B,CAEAtE,KAAKuE,MAAL,CAAYzf,UAAZ,GAEA,MAAOwf,eAAP,CAEH,CAED,QAASh2D,OAAT,CAAiB05B,QAAjB,CAA4B,CAExB,GAAI1kB,OAAQ0kB,SAAS1kB,KAArB,CACA,GAAImhD,oBAAqBz8B,SAASI,UAAlC,CAEA,GAAK9kB,QAAU,IAAf,CAAsB,CAElB8kB,WAAW95B,MAAX,CAAmBgV,KAAnB,CAA0Bq7B,GAAG+lB,oBAA7B,EAEH,CAED,IAAM,GAAI7hC,KAAV,GAAkB4hC,mBAAlB,CAAuC,CAEnCr8B,WAAW95B,MAAX,CAAmBm2D,mBAAoB5hC,IAApB,CAAnB,CAA+C8b,GAAGgmB,YAAlD,EAEH,CAED;AAEA,GAAInU,iBAAkBxoB,SAASwoB,eAA/B,CAEA,IAAM,GAAI3tB,KAAV,GAAkB2tB,gBAAlB,CAAoC,CAEhC,GAAI1sC,OAAQ0sC,gBAAiB3tB,IAAjB,CAAZ,CAEA,IAAM,GAAI1mB,GAAI,CAAR,CAAW6H,EAAIF,MAAMvL,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAA1C,CAAiD,CAE7CisB,WAAW95B,MAAX,CAAmBwV,MAAO3H,CAAP,CAAnB,CAA+BwiC,GAAGgmB,YAAlC,EAEH,CAEJ,CAEJ,CAED,QAASC,sBAAT,CAAgC58B,QAAhC,CAA2C,CAEvC,GAAIzW,WAAY6yC,oBAAqBp8B,SAASr/B,EAA9B,CAAhB,CAEA,GAAK4oB,SAAL,CAAiB,MAAOA,UAAP,CAEjB,GAAIk3B,SAAU,EAAd,CAEA,GAAIoc,eAAgB78B,SAAS1kB,KAA7B,CACA,GAAImhD,oBAAqBz8B,SAASI,UAAlC,CAEA;AAEA,GAAKy8B,gBAAkB,IAAvB,CAA8B,CAE1B,GAAI/gD,OAAQ+gD,cAAc/gD,KAA1B,CAEA,IAAM,GAAI3H,GAAI,CAAR,CAAW6H,EAAIF,MAAMvL,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAAK,CAA/C,CAAmD,CAE/C,GAAI4F,GAAI+B,MAAO3H,EAAI,CAAX,CAAR,CACA,GAAIiF,GAAI0C,MAAO3H,EAAI,CAAX,CAAR,CACA,GAAIwV,GAAI7N,MAAO3H,EAAI,CAAX,CAAR,CAEAssC,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoBA,CAApB,CAAuBuQ,CAAvB,CAA0BA,CAA1B,CAA6B5P,CAA7B,EAEH,CAEJ,CAdD,IAcO,CAEH,GAAI+B,OAAQ2gD,mBAAmBv6D,QAAnB,CAA4B4Z,KAAxC,CAEA,IAAM,GAAI3H,GAAI,CAAR,CAAW6H,EAAMF,MAAMvL,MAAN,CAAe,CAAjB,CAAuB,CAA5C,CAA+C4D,EAAI6H,CAAnD,CAAsD7H,GAAK,CAA3D,CAA+D,CAE3D,GAAI4F,GAAI5F,EAAI,CAAZ,CACA,GAAIiF,GAAIjF,EAAI,CAAZ,CACA,GAAIwV,GAAIxV,EAAI,CAAZ,CAEAssC,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoBA,CAApB,CAAuBuQ,CAAvB,CAA0BA,CAA1B,CAA6B5P,CAA7B,EAEH,CAEJ,CAED;AAEAwP,UAAY,IAAM8+B,SAAU5H,OAAV,EAAsB,KAAtB,CAA8B8G,qBAA9B,CAAsDF,qBAA5D,EAAqF5G,OAArF,CAA8F,CAA9F,CAAZ,CAEArgB,WAAW95B,MAAX,CAAmBijB,SAAnB,CAA8BotB,GAAG+lB,oBAAjC,EAEAN,oBAAqBp8B,SAASr/B,EAA9B,EAAqC4oB,SAArC,CAEA,MAAOA,UAAP,CAEH,CAED,MAAO,CAEHhW,IAAKA,GAFF,CAGHjN,OAAQA,MAHL,CAKHs2D,sBAAuBA,qBALpB,CAAP,CASH,CAED;;OAIA,QAASE,2BAAT,CAAqCnmB,EAArC,CAAyCuY,UAAzC,CAAqD8I,IAArD,CAA4D,CAExD,GAAIC,KAAJ,CAEA,QAASC,QAAT,CAAkBzkD,KAAlB,CAA0B,CAEtBwkD,KAAOxkD,KAAP,CAEH,CAED,GAAIvF,KAAJ,CAAUqqC,eAAV,CAEA,QAASoQ,SAAT,CAAmBl1C,KAAnB,CAA2B,CAEvBvF,KAAOuF,MAAMvF,IAAb,CACAqqC,gBAAkB9kC,MAAM8kC,eAAxB,CAEH,CAED,QAAShyC,OAAT,CAAiBuB,KAAjB,CAAwBynB,KAAxB,CAAgC,CAE5BonB,GAAGomB,YAAH,CAAiB9E,IAAjB,CAAuB1oC,KAAvB,CAA8BrhB,IAA9B,CAAoCpG,MAAQywC,eAA5C,EAEAyf,KAAK1xD,MAAL,CAAaipB,KAAb,CAAoB0oC,IAApB,EAEH,CAED,QAASG,gBAAT,CAA0Bp4B,QAA1B,CAAoCl4B,KAApC,CAA2CynB,KAA3C,CAAmD,CAE/C,GAAI8oC,WAAYnJ,WAAW37C,GAAX,CAAgB,wBAAhB,CAAhB,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,CAEtBvxD,QAAQ+iB,KAAR,CAAe,uIAAf,EACA,OAEH,CAEDwuC,UAAU2E,0BAAV,CAAsC/E,IAAtC,CAA4C1oC,KAA5C,CAAmDrhB,IAAnD,CAAyDpG,MAAQywC,eAAjE,CAAkFvY,SAASu4B,iBAA3F,EAEAP,KAAK1xD,MAAL,CAAaipB,KAAb,CAAoB0oC,IAApB,CAA0Bj4B,SAASu4B,iBAAnC,EAEH,CAED;AAEA,KAAKL,OAAL,CAAeA,OAAf,CACA,KAAKvP,QAAL,CAAgBA,QAAhB,CACA,KAAKpiD,MAAL,CAAcA,MAAd,CACA,KAAK6xD,eAAL,CAAuBA,eAAvB,CAEH,CAED;;OAIA,QAAS6E,UAAT,CAAoBtmB,EAApB,CAAyB,CAErB,GAAI4lB,QAAS,CACTzf,WAAY,CADH,CAETlhB,SAAU,CAFD,CAAb,CAKA,GAAIr1B,QAAS,CACTgwC,MAAO,CADE,CAET2mB,MAAO,CAFE,CAGTC,UAAW,CAHF,CAITr+B,OAAQ,CAJC,CAKTs+B,MAAO,CALE,CAAb,CAQA,QAAS92D,OAAT,CAAiBipB,KAAjB,CAAwB0oC,IAAxB,CAA8BoF,aAA9B,CAA8C,CAE1CA,cAAgBA,eAAiB,CAAjC,CAEA92D,OAAO22D,KAAP,GAEA,OAASjF,IAAT,EAEI,IAAKthB,IAAG2mB,SAAR,CACI/2D,OAAO42D,SAAP,EAAoBE,eAAkB9tC,MAAQ,CAA1B,CAApB,CACA,MAEJ,IAAKonB,IAAG4mB,cAAR,CACA,IAAK5mB,IAAG6mB,YAAR,CACIj3D,OAAO42D,SAAP,EAAoBE,eAAkB9tC,MAAQ,CAA1B,CAApB,CACA,MAEJ,IAAKonB,IAAG8mB,KAAR,CACIl3D,OAAO62D,KAAP,EAAgBC,eAAkB9tC,MAAQ,CAA1B,CAAhB,CACA,MAEJ,IAAKonB,IAAG+mB,UAAR,CACIn3D,OAAO62D,KAAP,EAAgBC,eAAkB9tC,MAAQ,CAA1B,CAAhB,CACA,MAEJ,IAAKonB,IAAGgnB,SAAR,CACIp3D,OAAO62D,KAAP,EAAgBC,cAAgB9tC,KAAhC,CACA,MAEJ,IAAKonB,IAAGinB,MAAR,CACIr3D,OAAOu4B,MAAP,EAAiBu+B,cAAgB9tC,KAAjC,CACA,MAEJ,QACIzoB,QAAQ+iB,KAAR,CAAe,qCAAf,CAAsDouC,IAAtD,EACA,MA7BR,CAiCH,CAED,QAAS5sD,MAAT,EAAiB,CAEb9E,OAAOgwC,KAAP,GACAhwC,OAAO22D,KAAP,CAAe,CAAf,CACA32D,OAAO42D,SAAP,CAAmB,CAAnB,CACA52D,OAAOu4B,MAAP,CAAgB,CAAhB,CACAv4B,OAAO62D,KAAP,CAAe,CAAf,CAEH,CAED,MAAO,CACHb,OAAQA,MADL,CAEHh2D,OAAQA,MAFL,CAGHs3D,SAAU,IAHP,CAIHC,UAAW,IAJR,CAKHzyD,MAAOA,KALJ,CAMH/E,OAAQA,MANL,CAAP,CASH,CAED;;OAIA,QAASy3D,iBAAT,CAA2BhkD,CAA3B,CAA8BX,CAA9B,CAAkC,CAE9B,MAAOvT,MAAK6iB,GAAL,CAAUtP,EAAG,CAAH,CAAV,EAAqBvT,KAAK6iB,GAAL,CAAU3O,EAAG,CAAH,CAAV,CAA5B,CAEH,CAED,QAASikD,kBAAT,CAA4BrnB,EAA5B,CAAiC,CAE7B,GAAIsnB,gBAAiB,EAArB,CACA,GAAI5H,iBAAkB,GAAI5e,aAAJ,CAAkB,CAAlB,CAAtB,CAEA,QAASnxC,OAAT,CAAiB+B,MAAjB,CAAyB23B,QAAzB,CAAmCud,QAAnC,CAA6C2gB,OAA7C,CAAuD,CAEnD,GAAIC,kBAAmB91D,OAAOosD,qBAA9B,CAEA,GAAIlkD,QAAS4tD,iBAAiB5tD,MAA9B,CAEA,GAAI6tD,YAAaH,eAAgBj+B,SAASr/B,EAAzB,CAAjB,CAEA,GAAKy9D,aAAe71D,SAApB,CAAgC,CAE5B;AAEA61D,WAAa,EAAb,CAEA,IAAM,GAAIjqD,GAAI,CAAd,CAAiBA,EAAI5D,MAArB,CAA6B4D,GAA7B,CAAoC,CAEhCiqD,WAAYjqD,CAAZ,EAAkB,CAAEA,CAAF,CAAK,CAAL,CAAlB,CAEH,CAED8pD,eAAgBj+B,SAASr/B,EAAzB,EAAgCy9D,UAAhC,CAEH,CAED,GAAI9e,cAAe/B,SAAS+B,YAAT,EAAyBtf,SAASwoB,eAAT,CAAyBtmD,QAArE,CACA,GAAIq9C,cAAehC,SAASgC,YAAT,EAAyBvf,SAASwoB,eAAT,CAAyB1vB,MAArE,CAEA;AAEA,IAAM,GAAI3kB,GAAI,CAAd,CAAiBA,EAAI5D,MAArB,CAA6B4D,GAA7B,CAAoC,CAEhC,GAAIoiD,WAAY6H,WAAYjqD,CAAZ,CAAhB,CAEA,GAAKoiD,UAAW,CAAX,IAAmB,CAAxB,CAA4B,CAExB,GAAKjX,YAAL,CAAoBtf,SAAS8oB,eAAT,CAA0B,cAAgB30C,CAA1C,EACpB,GAAKorC,YAAL,CAAoBvf,SAAS8oB,eAAT,CAA0B,cAAgB30C,CAA1C,EAEvB,CAEJ,CAED;AAEA,IAAM,GAAIA,GAAI,CAAd,CAAiBA,EAAI5D,MAArB,CAA6B4D,GAA7B,CAAoC,CAEhC,GAAIoiD,WAAY6H,WAAYjqD,CAAZ,CAAhB,CAEAoiD,UAAW,CAAX,EAAiBpiD,CAAjB,CACAoiD,UAAW,CAAX,EAAiB4H,iBAAkBhqD,CAAlB,CAAjB,CAEH,CAEDiqD,WAAW/Z,IAAX,CAAiB0Z,gBAAjB,EAEA;AAEA,IAAM,GAAI5pD,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAIoiD,WAAY6H,WAAYjqD,CAAZ,CAAhB,CAEA,GAAKoiD,SAAL,CAAiB,CAEb,GAAIj7C,OAAQi7C,UAAW,CAAX,CAAZ,CACA,GAAI9iD,OAAQ8iD,UAAW,CAAX,CAAZ,CAEA,GAAK9iD,KAAL,CAAa,CAET,GAAK6rC,YAAL,CAAoBtf,SAAS4oB,YAAT,CAAuB,cAAgBz0C,CAAvC,CAA0CmrC,aAAchkC,KAAd,CAA1C,EACpB,GAAKikC,YAAL,CAAoBvf,SAAS4oB,YAAT,CAAuB,cAAgBz0C,CAAvC,CAA0CorC,aAAcjkC,KAAd,CAA1C,EAEpB+6C,gBAAiBliD,CAAjB,EAAuBV,KAAvB,CACA,SAEH,CAEJ,CAED4iD,gBAAiBliD,CAAjB,EAAuB,CAAvB,CAEH,CAED+pD,QAAQG,WAAR,GAAsBC,QAAtB,CAAgC3nB,EAAhC,CAAoC,uBAApC,CAA6D0f,eAA7D,EAEH,CAED,MAAO,CAEH/vD,OAAQA,MAFL,CAAP,CAMH,CAED;;OAIA,QAASi4D,aAAT,CAAuBzhB,UAAvB,CAAmCkb,IAAnC,CAA0C,CAEtC,GAAIwG,YAAa,EAAjB,CAEA,QAASl4D,OAAT,CAAiB+B,MAAjB,CAA0B,CAEtB,GAAIkuC,OAAQyhB,KAAKzxD,MAAL,CAAYgwC,KAAxB,CAEA,GAAIvW,UAAW33B,OAAO23B,QAAtB,CACA,GAAIs8B,gBAAiBxf,WAAWvpC,GAAX,CAAgBlL,MAAhB,CAAwB23B,QAAxB,CAArB,CAEA;AAEA,GAAKw+B,WAAYlC,eAAe37D,EAA3B,IAAoC41C,KAAzC,CAAiD,CAE7C,GAAKvW,SAASC,UAAd,CAA2B,CAEvBq8B,eAAejT,gBAAf,CAAiChhD,MAAjC,EAEH,CAEDy0C,WAAWx2C,MAAX,CAAmBg2D,cAAnB,EAEAkC,WAAYlC,eAAe37D,EAA3B,EAAkC41C,KAAlC,CAEH,CAED,MAAO+lB,eAAP,CAEH,CAED,QAAS9uD,QAAT,EAAmB,CAEfgxD,WAAa,EAAb,CAEH,CAED,MAAO,CAEHl4D,OAAQA,MAFL,CAGHkH,QAASA,OAHN,CAAP,CAOH,CAED;;OAIA,QAASixD,YAAT,CAAsBliC,MAAtB,CAA8BlC,OAA9B,CAAuCC,KAAvC,CAA8CC,KAA9C,CAAqDC,SAArD,CAAgEC,SAAhE,CAA2EC,MAA3E,CAAmFxsB,IAAnF,CAAyFysB,UAAzF,CAAqGC,QAArG,CAAgH,CAE5G2B,OAASA,SAAWh0B,SAAX,CAAuBg0B,MAAvB,CAAgC,EAAzC,CACAlC,QAAUA,UAAY9xB,SAAZ,CAAwB8xB,OAAxB,CAAkC5a,qBAA5C,CAEA0a,QAAQzjB,IAAR,CAAc,IAAd,CAAoB6lB,MAApB,CAA4BlC,OAA5B,CAAqCC,KAArC,CAA4CC,KAA5C,CAAmDC,SAAnD,CAA8DC,SAA9D,CAAyEC,MAAzE,CAAiFxsB,IAAjF,CAAuFysB,UAAvF,CAAmGC,QAAnG,EAEA,KAAKQ,KAAL,CAAa,KAAb,CAEH,CAEDqjC,YAAYzrD,SAAZ,CAAwBC,OAAOC,MAAP,CAAeinB,QAAQnnB,SAAvB,CAAxB,CACAyrD,YAAYzrD,SAAZ,CAAsBI,WAAtB,CAAoCqrD,WAApC,CAEAA,YAAYzrD,SAAZ,CAAsB0kD,aAAtB,CAAsC,IAAtC,CAEAzkD,OAAOgI,cAAP,CAAuBwjD,YAAYzrD,SAAnC,CAA8C,QAA9C,CAAwD,CAEpDO,IAAK,cAAY,CAEb,MAAO,MAAK6mB,KAAZ,CAEH,CANmD,CAQpDp3B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,KAAK2mB,KAAL,CAAa3mB,KAAb,CAEH,CAZmD,CAAxD,EAgBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAiDA,GAAIirD,cAAe,GAAIvkC,QAAJ,EAAnB,CACA,GAAIwkC,kBAAmB,GAAIF,YAAJ,EAAvB,CAEA;AAEA,QAASG,iBAAT,EAA4B,CAExB,KAAKC,GAAL,CAAW,EAAX,CACA,KAAKruB,GAAL,CAAW,EAAX,CAEH,CAED;AAEA;AAEA,GAAIsuB,eAAgB,EAApB,CACA,GAAIC,eAAgB,EAApB,CAEA;AAEA,GAAIC,WAAY,GAAIvnB,aAAJ,CAAkB,EAAlB,CAAhB,CACA,GAAIwnB,WAAY,GAAIxnB,aAAJ,CAAkB,CAAlB,CAAhB,CACA,GAAIynB,WAAY,GAAIznB,aAAJ,CAAkB,CAAlB,CAAhB,CAEA;AAEA,QAAS0nB,QAAT,CAAkBrjD,KAAlB,CAAyBsjD,OAAzB,CAAkCC,SAAlC,CAA8C,CAE1C,GAAIC,WAAYxjD,MAAO,CAAP,CAAhB,CAEA,GAAKwjD,WAAa,CAAb,EAAkBA,UAAY,CAAnC,CAAuC,MAAOxjD,MAAP,CACvC;AACA;AAEA,GAAIzC,GAAI+lD,QAAUC,SAAlB,CACIvpC,EAAIgpC,cAAezlD,CAAf,CADR,CAGA,GAAKyc,IAAMvtB,SAAX,CAAuB,CAEnButB,EAAI,GAAI2hB,aAAJ,CAAkBp+B,CAAlB,CAAJ,CACAylD,cAAezlD,CAAf,EAAqByc,CAArB,CAEH,CAED,GAAKspC,UAAY,CAAjB,CAAqB,CAEjBE,UAAUj2C,OAAV,CAAmByM,CAAnB,CAAsB,CAAtB,EAEA,IAAM,GAAI3hB,GAAI,CAAR,CAAWvI,OAAS,CAA1B,CAA6BuI,IAAMirD,OAAnC,CAA4C,EAAGjrD,CAA/C,CAAmD,CAE/CvI,QAAUyzD,SAAV,CACAvjD,MAAO3H,CAAP,EAAWkV,OAAX,CAAoByM,CAApB,CAAuBlqB,MAAvB,EAEH,CAEJ,CAED,MAAOkqB,EAAP,CAEH,CAED,QAASypC,YAAT,CAAsBxlD,CAAtB,CAAyBX,CAAzB,CAA6B,CAEzB,GAAKW,EAAExJ,MAAF,GAAa6I,EAAE7I,MAApB,CAA6B,MAAO,MAAP,CAE7B,IAAM,GAAI4D,GAAI,CAAR,CAAW6H,EAAIjC,EAAExJ,MAAvB,CAA+B4D,EAAI6H,CAAnC,CAAsC7H,GAAtC,CAA6C,CAEzC,GAAK4F,EAAG5F,CAAH,IAAWiF,EAAGjF,CAAH,CAAhB,CAAyB,MAAO,MAAP,CAE5B,CAED,MAAO,KAAP,CAEH,CAED,QAASoyC,UAAT,CAAoBxsC,CAApB,CAAuBX,CAAvB,CAA2B,CAEvB,IAAM,GAAIjF,GAAI,CAAR,CAAW6H,EAAI5C,EAAE7I,MAAvB,CAA+B4D,EAAI6H,CAAnC,CAAsC7H,GAAtC,CAA6C,CAEzC4F,EAAG5F,CAAH,EAASiF,EAAGjF,CAAH,CAAT,CAEH,CAEJ,CAED;AAEA,QAASqrD,cAAT,CAAwBn/D,QAAxB,CAAkCgZ,CAAlC,CAAsC,CAElC,GAAIyc,GAAIipC,cAAe1lD,CAAf,CAAR,CAEA,GAAKyc,IAAMvtB,SAAX,CAAuB,CAEnButB,EAAI,GAAImiB,WAAJ,CAAgB5+B,CAAhB,CAAJ,CACA0lD,cAAe1lD,CAAf,EAAqByc,CAArB,CAEH,CAED,IAAM,GAAI3hB,GAAI,CAAd,CAAiBA,IAAMkF,CAAvB,CAA0B,EAAGlF,CAA7B,EACI2hB,EAAG3hB,CAAH,EAAS9T,SAASo/D,gBAAT,EAAT,CADJ,CAGA,MAAO3pC,EAAP,CAEH,CAED;AAEA;AACA;AAEA;AAEA,QAAS4pC,WAAT,CAAqB/oB,EAArB,CAAyBjnC,CAAzB,CAA6B,CAEzB,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAKA,MAAO,CAAP,IAAehuC,CAApB,CAAwB,OAExBinC,GAAGgpB,SAAH,CAAc,KAAKC,IAAnB,CAAyBlwD,CAAzB,EAEAguC,MAAO,CAAP,EAAahuC,CAAb,CAEH,CAED,QAASmwD,WAAT,CAAqBlpB,EAArB,CAAyBjnC,CAAzB,CAA6B,CAEzB,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAKA,MAAO,CAAP,IAAehuC,CAApB,CAAwB,OAExBinC,GAAGmpB,SAAH,CAAc,KAAKF,IAAnB,CAAyBlwD,CAAzB,EAEAguC,MAAO,CAAP,EAAahuC,CAAb,CAEH,CAED;AAEA,QAASqwD,YAAT,CAAsBppB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAKhuC,EAAEvN,CAAF,GAAQoG,SAAb,CAAyB,CAErB,GAAKm1C,MAAO,CAAP,IAAehuC,EAAEvN,CAAjB,EAAsBu7C,MAAO,CAAP,IAAehuC,EAAEtN,CAA5C,CAAgD,CAE5Cu0C,GAAGqpB,SAAH,CAAc,KAAKJ,IAAnB,CAAyBlwD,EAAEvN,CAA3B,CAA8BuN,EAAEtN,CAAhC,EAEAs7C,MAAO,CAAP,EAAahuC,EAAEvN,CAAf,CACAu7C,MAAO,CAAP,EAAahuC,EAAEtN,CAAf,CAEH,CAEJ,CAXD,IAWO,CAEH,GAAKm9D,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAGspB,UAAH,CAAe,KAAKL,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CAEJ,CAED,QAASwwD,YAAT,CAAsBvpB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAKhuC,EAAEvN,CAAF,GAAQoG,SAAb,CAAyB,CAErB,GAAKm1C,MAAO,CAAP,IAAehuC,EAAEvN,CAAjB,EAAsBu7C,MAAO,CAAP,IAAehuC,EAAEtN,CAAvC,EAA4Cs7C,MAAO,CAAP,IAAehuC,EAAErN,CAAlE,CAAsE,CAElEs0C,GAAGwpB,SAAH,CAAc,KAAKP,IAAnB,CAAyBlwD,EAAEvN,CAA3B,CAA8BuN,EAAEtN,CAAhC,CAAmCsN,EAAErN,CAArC,EAEAq7C,MAAO,CAAP,EAAahuC,EAAEvN,CAAf,CACAu7C,MAAO,CAAP,EAAahuC,EAAEtN,CAAf,CACAs7C,MAAO,CAAP,EAAahuC,EAAErN,CAAf,CAEH,CAEJ,CAZD,IAYO,IAAKqN,EAAEomB,CAAF,GAAQvtB,SAAb,CAAyB,CAE5B,GAAKm1C,MAAO,CAAP,IAAehuC,EAAEomB,CAAjB,EAAsB4nB,MAAO,CAAP,IAAehuC,EAAE+pB,CAAvC,EAA4CikB,MAAO,CAAP,IAAehuC,EAAE0J,CAAlE,CAAsE,CAElEu9B,GAAGwpB,SAAH,CAAc,KAAKP,IAAnB,CAAyBlwD,EAAEomB,CAA3B,CAA8BpmB,EAAE+pB,CAAhC,CAAmC/pB,EAAE0J,CAArC,EAEAskC,MAAO,CAAP,EAAahuC,EAAEomB,CAAf,CACA4nB,MAAO,CAAP,EAAahuC,EAAE+pB,CAAf,CACAikB,MAAO,CAAP,EAAahuC,EAAE0J,CAAf,CAEH,CAEJ,CAZM,IAYA,CAEH,GAAKmmD,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAGypB,UAAH,CAAe,KAAKR,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CAEJ,CAED,QAAS2wD,YAAT,CAAsB1pB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAKhuC,EAAEvN,CAAF,GAAQoG,SAAb,CAAyB,CAErB,GAAKm1C,MAAO,CAAP,IAAehuC,EAAEvN,CAAjB,EAAsBu7C,MAAO,CAAP,IAAehuC,EAAEtN,CAAvC,EAA4Cs7C,MAAO,CAAP,IAAehuC,EAAErN,CAA7D,EAAkEq7C,MAAO,CAAP,IAAehuC,EAAE4X,CAAxF,CAA4F,CAExFqvB,GAAG2pB,SAAH,CAAc,KAAKV,IAAnB,CAAyBlwD,EAAEvN,CAA3B,CAA8BuN,EAAEtN,CAAhC,CAAmCsN,EAAErN,CAArC,CAAwCqN,EAAE4X,CAA1C,EAEAo2B,MAAO,CAAP,EAAahuC,EAAEvN,CAAf,CACAu7C,MAAO,CAAP,EAAahuC,EAAEtN,CAAf,CACAs7C,MAAO,CAAP,EAAahuC,EAAErN,CAAf,CACAq7C,MAAO,CAAP,EAAahuC,EAAE4X,CAAf,CAEH,CAEJ,CAbD,IAaO,CAEH,GAAKi4C,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAG4pB,UAAH,CAAe,KAAKX,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CAEJ,CAED;AAEA,QAAS8wD,YAAT,CAAsB7pB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI11B,UAAWtY,EAAEsY,QAAjB,CAEA,GAAKA,WAAazf,SAAlB,CAA8B,CAE1B,GAAKg3D,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAG8pB,gBAAH,CAAqB,KAAKb,IAA1B,CAAgC,KAAhC,CAAuClwD,CAAvC,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CARD,IAQO,CAEH,GAAK6vD,YAAa7hB,KAAb,CAAoB11B,QAApB,CAAL,CAAsC,OAEtCk3C,UAAUl8D,GAAV,CAAeglB,QAAf,EAEA2uB,GAAG8pB,gBAAH,CAAqB,KAAKb,IAA1B,CAAgC,KAAhC,CAAuCV,SAAvC,EAEA3Y,UAAW7I,KAAX,CAAkB11B,QAAlB,EAEH,CAEJ,CAED,QAAS04C,YAAT,CAAsB/pB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI11B,UAAWtY,EAAEsY,QAAjB,CAEA,GAAKA,WAAazf,SAAlB,CAA8B,CAE1B,GAAKg3D,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAGgqB,gBAAH,CAAqB,KAAKf,IAA1B,CAAgC,KAAhC,CAAuClwD,CAAvC,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CARD,IAQO,CAEH,GAAK6vD,YAAa7hB,KAAb,CAAoB11B,QAApB,CAAL,CAAsC,OAEtCi3C,UAAUj8D,GAAV,CAAeglB,QAAf,EAEA2uB,GAAGgqB,gBAAH,CAAqB,KAAKf,IAA1B,CAAgC,KAAhC,CAAuCX,SAAvC,EAEA1Y,UAAW7I,KAAX,CAAkB11B,QAAlB,EAEH,CAEJ,CAED,QAAS44C,YAAT,CAAsBjqB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI11B,UAAWtY,EAAEsY,QAAjB,CAEA,GAAKA,WAAazf,SAAlB,CAA8B,CAE1B,GAAKg3D,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAGkqB,gBAAH,CAAqB,KAAKjB,IAA1B,CAAgC,KAAhC,CAAuClwD,CAAvC,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CARD,IAQO,CAEH,GAAK6vD,YAAa7hB,KAAb,CAAoB11B,QAApB,CAAL,CAAsC,OAEtCg3C,UAAUh8D,GAAV,CAAeglB,QAAf,EAEA2uB,GAAGkqB,gBAAH,CAAqB,KAAKjB,IAA1B,CAAgC,KAAhC,CAAuCZ,SAAvC,EAEAzY,UAAW7I,KAAX,CAAkB11B,QAAlB,EAEH,CAEJ,CAED;AAEA,QAAS84C,WAAT,CAAqBnqB,EAArB,CAAyBjnC,CAAzB,CAA4BrP,QAA5B,CAAuC,CAEnC,GAAIq9C,OAAQ,KAAKA,KAAjB,CACA,GAAIqjB,MAAO1gE,SAASo/D,gBAAT,EAAX,CAEA,GAAK/hB,MAAO,CAAP,IAAeqjB,IAApB,CAA2B,CAEvBpqB,GAAGmpB,SAAH,CAAc,KAAKF,IAAnB,CAAyBmB,IAAzB,EACArjB,MAAO,CAAP,EAAaqjB,IAAb,CAEH,CAED1gE,SAAS2gE,YAAT,CAAuBtxD,GAAKgvD,YAA5B,CAA0CqC,IAA1C,EAEH,CAED,QAASE,WAAT,CAAqBtqB,EAArB,CAAyBjnC,CAAzB,CAA4BrP,QAA5B,CAAuC,CAEnC,GAAIq9C,OAAQ,KAAKA,KAAjB,CACA,GAAIqjB,MAAO1gE,SAASo/D,gBAAT,EAAX,CAEA,GAAK/hB,MAAO,CAAP,IAAeqjB,IAApB,CAA2B,CAEvBpqB,GAAGmpB,SAAH,CAAc,KAAKF,IAAnB,CAAyBmB,IAAzB,EACArjB,MAAO,CAAP,EAAaqjB,IAAb,CAEH,CAED1gE,SAAS6gE,cAAT,CAAyBxxD,GAAKivD,gBAA9B,CAAgDoC,IAAhD,EAEH,CAED;AAEA,QAASI,YAAT,CAAsBxqB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAK6hB,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAGyqB,UAAH,CAAe,KAAKxB,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CAED,QAAS2xD,YAAT,CAAsB1qB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAK6hB,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAG2qB,UAAH,CAAe,KAAK1B,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CAED,QAAS6xD,YAAT,CAAsB5qB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAK6hB,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAG6qB,UAAH,CAAe,KAAK5B,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CAED;AAEA,QAAS+xD,kBAAT,CAA4BvzD,IAA5B,CAAmC,CAE/B,OAASA,IAAT,EAEI,IAAK,OAAL,CAAa,MAAOwxD,WAAP,CAAmB;AAChC,IAAK,OAAL,CAAa,MAAOK,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOG,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOG,YAAP,CAAoB;AAEjC,IAAK,OAAL,CAAa,MAAOG,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AAEjC,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOE,WAAP,CAAmB;AAC7C,IAAK,OAAL,CAAa,MAAOG,WAAP,CAAmB;AAEhC,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOpB,WAAP,CAAmB;AAC7C,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOsB,YAAP,CAAoB;AAC9C,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AAC9C,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AAjBlD,CAqBH,CAED;AAEA,QAASG,YAAT,CAAsB/qB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAK6hB,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAGgrB,UAAH,CAAe,KAAK/B,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CACD,QAASkyD,YAAT,CAAsBjrB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CAEA,GAAK6hB,YAAa7hB,KAAb,CAAoBhuC,CAApB,CAAL,CAA+B,OAE/BinC,GAAGkrB,UAAH,CAAe,KAAKjC,IAApB,CAA0BlwD,CAA1B,EAEA62C,UAAW7I,KAAX,CAAkBhuC,CAAlB,EAEH,CAED;AAEA,QAASoyD,YAAT,CAAsBnrB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI/2C,MAAOw4D,QAASzvD,CAAT,CAAY,KAAKyvB,IAAjB,CAAuB,CAAvB,CAAX,CAEA,GAAKogC,YAAa7hB,KAAb,CAAoB/2C,IAApB,CAAL,CAAkC,OAElCgwC,GAAGspB,UAAH,CAAe,KAAKL,IAApB,CAA0Bj5D,IAA1B,EAEA,KAAKo7D,WAAL,CAAkBp7D,IAAlB,EAEH,CAED,QAASq7D,YAAT,CAAsBrrB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI/2C,MAAOw4D,QAASzvD,CAAT,CAAY,KAAKyvB,IAAjB,CAAuB,CAAvB,CAAX,CAEA,GAAKogC,YAAa7hB,KAAb,CAAoB/2C,IAApB,CAAL,CAAkC,OAElCgwC,GAAGypB,UAAH,CAAe,KAAKR,IAApB,CAA0Bj5D,IAA1B,EAEA,KAAKo7D,WAAL,CAAkBp7D,IAAlB,EAEH,CAED,QAASs7D,YAAT,CAAsBtrB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI/2C,MAAOw4D,QAASzvD,CAAT,CAAY,KAAKyvB,IAAjB,CAAuB,CAAvB,CAAX,CAEA,GAAKogC,YAAa7hB,KAAb,CAAoB/2C,IAApB,CAAL,CAAkC,OAElCgwC,GAAG4pB,UAAH,CAAe,KAAKX,IAApB,CAA0Bj5D,IAA1B,EAEA,KAAKo7D,WAAL,CAAkBp7D,IAAlB,EAEH,CAED;AAEA,QAASu7D,YAAT,CAAsBvrB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI/2C,MAAOw4D,QAASzvD,CAAT,CAAY,KAAKyvB,IAAjB,CAAuB,CAAvB,CAAX,CAEA,GAAKogC,YAAa7hB,KAAb,CAAoB/2C,IAApB,CAAL,CAAkC,OAElCgwC,GAAG8pB,gBAAH,CAAqB,KAAKb,IAA1B,CAAgC,KAAhC,CAAuCj5D,IAAvC,EAEA,KAAKo7D,WAAL,CAAkBp7D,IAAlB,EAEH,CAED,QAASw7D,YAAT,CAAsBxrB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI/2C,MAAOw4D,QAASzvD,CAAT,CAAY,KAAKyvB,IAAjB,CAAuB,CAAvB,CAAX,CAEA,GAAKogC,YAAa7hB,KAAb,CAAoB/2C,IAApB,CAAL,CAAkC,OAElCgwC,GAAGgqB,gBAAH,CAAqB,KAAKf,IAA1B,CAAgC,KAAhC,CAAuCj5D,IAAvC,EAEA,KAAKo7D,WAAL,CAAkBp7D,IAAlB,EAEH,CAED,QAASy7D,YAAT,CAAsBzrB,EAAtB,CAA0BjnC,CAA1B,CAA8B,CAE1B,GAAIguC,OAAQ,KAAKA,KAAjB,CACA,GAAI/2C,MAAOw4D,QAASzvD,CAAT,CAAY,KAAKyvB,IAAjB,CAAuB,EAAvB,CAAX,CAEA,GAAKogC,YAAa7hB,KAAb,CAAoB/2C,IAApB,CAAL,CAAkC,OAElCgwC,GAAGkqB,gBAAH,CAAqB,KAAKjB,IAA1B,CAAgC,KAAhC,CAAuCj5D,IAAvC,EAEA,KAAKo7D,WAAL,CAAkBp7D,IAAlB,EAEH,CAED;AAEA,QAAS07D,YAAT,CAAsB1rB,EAAtB,CAA0BjnC,CAA1B,CAA6BrP,QAA7B,CAAwC,CAEpC,GAAIq9C,OAAQ,KAAKA,KAAjB,CACA,GAAIrkC,GAAI3J,EAAEa,MAAV,CAEA,GAAI+xD,OAAQ9C,cAAen/D,QAAf,CAAyBgZ,CAAzB,CAAZ,CAEA,GAAKkmD,YAAa7hB,KAAb,CAAoB4kB,KAApB,IAAgC,KAArC,CAA6C,CAEzC3rB,GAAGkrB,UAAH,CAAe,KAAKjC,IAApB,CAA0B0C,KAA1B,EACA/b,UAAW7I,KAAX,CAAkB4kB,KAAlB,EAEH,CAED,IAAM,GAAInuD,GAAI,CAAd,CAAiBA,IAAMkF,CAAvB,CAA0B,EAAGlF,CAA7B,CAAiC,CAE7B9T,SAAS2gE,YAAT,CAAuBtxD,EAAGyE,CAAH,GAAUuqD,YAAjC,CAA+C4D,MAAOnuD,CAAP,CAA/C,EAEH,CAEJ,CAED,QAASouD,YAAT,CAAsB5rB,EAAtB,CAA0BjnC,CAA1B,CAA6BrP,QAA7B,CAAwC,CAEpC,GAAIq9C,OAAQ,KAAKA,KAAjB,CACA,GAAIrkC,GAAI3J,EAAEa,MAAV,CAEA,GAAI+xD,OAAQ9C,cAAen/D,QAAf,CAAyBgZ,CAAzB,CAAZ,CAEA,GAAKkmD,YAAa7hB,KAAb,CAAoB4kB,KAApB,IAAgC,KAArC,CAA6C,CAEzC3rB,GAAGkrB,UAAH,CAAe,KAAKjC,IAApB,CAA0B0C,KAA1B,EACA/b,UAAW7I,KAAX,CAAkB4kB,KAAlB,EAEH,CAED,IAAM,GAAInuD,GAAI,CAAd,CAAiBA,IAAMkF,CAAvB,CAA0B,EAAGlF,CAA7B,CAAiC,CAE7B9T,SAAS6gE,cAAT,CAAyBxxD,EAAGyE,CAAH,GAAUwqD,gBAAnC,CAAqD2D,MAAOnuD,CAAP,CAArD,EAEH,CAEJ,CAED;AAEA,QAASquD,mBAAT,CAA6Bt0D,IAA7B,CAAoC,CAEhC,OAASA,IAAT,EAEI,IAAK,OAAL,CAAa,MAAOwzD,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOI,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOC,YAAP,CAAoB;AAEjC,IAAK,OAAL,CAAa,MAAOC,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOC,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOC,YAAP,CAAoB;AAEjC,IAAK,OAAL,CAAa,MAAOC,YAAP,CAAoB;AACjC,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AAEjC,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOX,YAAP,CAAoB;AAC9C,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOT,YAAP,CAAoB;AAC9C,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AAC9C,IAAK,OAAL,CAAa,IAAK,OAAL,CAAa,MAAOE,YAAP,CAAoB;AAjBlD,CAqBH,CAED;AAEA,QAASkB,cAAT,CAAwB9hE,EAAxB,CAA4B+hE,UAA5B,CAAwC9C,IAAxC,CAA+C,CAE3C,KAAKj/D,EAAL,CAAUA,EAAV,CACA,KAAKi/D,IAAL,CAAYA,IAAZ,CACA,KAAKliB,KAAL,CAAa,EAAb,CACA,KAAK4gB,QAAL,CAAgBmD,kBAAmBiB,WAAWx0D,IAA9B,CAAhB,CAEA;AAEH,CAED,QAASy0D,iBAAT,CAA2BhiE,EAA3B,CAA+B+hE,UAA/B,CAA2C9C,IAA3C,CAAkD,CAE9C,KAAKj/D,EAAL,CAAUA,EAAV,CACA,KAAKi/D,IAAL,CAAYA,IAAZ,CACA,KAAKliB,KAAL,CAAa,EAAb,CACA,KAAKve,IAAL,CAAYujC,WAAWvjC,IAAvB,CACA,KAAKm/B,QAAL,CAAgBkE,mBAAoBE,WAAWx0D,IAA/B,CAAhB,CAEA;AAEH,CAEDy0D,iBAAiB3vD,SAAjB,CAA2B+uD,WAA3B,CAAyC,SAAWp7D,IAAX,CAAkB,CAEvD,GAAI+2C,OAAQ,KAAKA,KAAjB,CAEA,GAAK/2C,eAAgB8wC,aAAhB,EAAgCiG,MAAMntC,MAAN,GAAiB5J,KAAK4J,MAA3D,CAAoE,CAEhE,KAAKmtC,KAAL,CAAa,GAAIjG,aAAJ,CAAkB9wC,KAAK4J,MAAvB,CAAb,CAEH,CAEDg2C,UAAW7I,KAAX,CAAkB/2C,IAAlB,EAEH,CAZD,CAcA,QAASi8D,kBAAT,CAA4BjiE,EAA5B,CAAiC,CAE7B,KAAKA,EAAL,CAAUA,EAAV,CAEAi+D,iBAAiBloD,IAAjB,CAAuB,IAAvB,EAA+B;AAElC,CAEDksD,kBAAkB5vD,SAAlB,CAA4BsrD,QAA5B,CAAuC,SAAW3nB,EAAX,CAAeljC,KAAf,CAAuB,CAE1D;AACA;AAEA,GAAIorD,KAAM,KAAKA,GAAf,CAEA,IAAM,GAAI1qD,GAAI,CAAR,CAAWkF,EAAIwlD,IAAItuD,MAAzB,CAAiC4D,IAAMkF,CAAvC,CAA0C,EAAGlF,CAA7C,CAAiD,CAE7C,GAAI45B,GAAI8wB,IAAK1qD,CAAL,CAAR,CACA45B,EAAEuwB,QAAF,CAAY3nB,EAAZ,CAAgBljC,MAAOs6B,EAAEptC,EAAT,CAAhB,EAEH,CAEJ,CAdD,CAgBA;AAEA;AAEA,GAAIkiE,YAAa,0BAAjB,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,QAASC,WAAT,CAAqBC,SAArB,CAAgCC,aAAhC,CAAgD,CAE5CD,UAAUlE,GAAV,CAAc75D,IAAd,CAAoBg+D,aAApB,EACAD,UAAUvyB,GAAV,CAAewyB,cAAcriE,EAA7B,EAAoCqiE,aAApC,CAEH,CAED,QAASC,aAAT,CAAuBP,UAAvB,CAAmC9C,IAAnC,CAAyCmD,SAAzC,CAAqD,CAEjD,GAAIG,MAAOR,WAAW7nC,IAAtB,CACIsoC,WAAaD,KAAK3yD,MADtB,CAGA;AACAsyD,WAAWO,SAAX,CAAuB,CAAvB,CAEA,MAAQ,IAAR,CAAe,CAEX,GAAIjoD,OAAQ0nD,WAAW7zB,IAAX,CAAiBk0B,IAAjB,CAAZ,CACIG,SAAWR,WAAWO,SAD1B,CAGIziE,GAAKwa,MAAO,CAAP,CAHT,CAIImoD,UAAYnoD,MAAO,CAAP,IAAe,GAJ/B,CAKIooD,UAAYpoD,MAAO,CAAP,CALhB,CAOA,GAAKmoD,SAAL,CAAiB3iE,GAAKA,GAAK,CAAV,CAAa;AAE9B,GAAK4iE,YAAch7D,SAAd,EAA2Bg7D,YAAc,GAAd,EAAqBF,SAAW,CAAX,GAAiBF,UAAtE,CAAmF,CAE/E;AAEAL,WAAYC,SAAZ,CAAuBQ,YAAch7D,SAAd,CACnB,GAAIk6D,cAAJ,CAAmB9hE,EAAnB,CAAuB+hE,UAAvB,CAAmC9C,IAAnC,CADmB,CAEnB,GAAI+C,iBAAJ,CAAsBhiE,EAAtB,CAA0B+hE,UAA1B,CAAsC9C,IAAtC,CAFJ,EAIA,MAEH,CAVD,IAUO,CAEH;AAEA,GAAIpvB,KAAMuyB,UAAUvyB,GAApB,CAAyBgzB,KAAOhzB,IAAK7vC,EAAL,CAAhC,CAEA,GAAK6iE,OAASj7D,SAAd,CAA0B,CAEtBi7D,KAAO,GAAIZ,kBAAJ,CAAuBjiE,EAAvB,CAAP,CACAmiE,WAAYC,SAAZ,CAAuBS,IAAvB,EAEH,CAEDT,UAAYS,IAAZ,CAEH,CAEJ,CAEJ,CAED;AAEA,QAASC,cAAT,CAAwB9sB,EAAxB,CAA4BunB,OAA5B,CAAqC79D,QAArC,CAAgD,CAE5Cu+D,iBAAiBloD,IAAjB,CAAuB,IAAvB,EAEA,KAAKrW,QAAL,CAAgBA,QAAhB,CAEA,GAAIgZ,GAAIs9B,GAAG+sB,mBAAH,CAAwBxF,OAAxB,CAAiCvnB,GAAGgtB,eAApC,CAAR,CAEA,IAAM,GAAIxvD,GAAI,CAAd,CAAiBA,EAAIkF,CAArB,CAAwB,EAAGlF,CAA3B,CAA+B,CAE3B,GAAI6jD,MAAOrhB,GAAGitB,gBAAH,CAAqB1F,OAArB,CAA8B/pD,CAA9B,CAAX,CACIyrD,KAAOjpB,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgClG,KAAKn9B,IAArC,CADX,CAGAooC,aAAcjL,IAAd,CAAoB4H,IAApB,CAA0B,IAA1B,EAEH,CAEJ,CAED6D,cAAczwD,SAAd,CAAwBsrD,QAAxB,CAAmC,SAAW3nB,EAAX,CAAe9b,IAAf,CAAqBpnB,KAArB,CAA6B,CAE5D,GAAIs6B,GAAI,KAAKyC,GAAL,CAAU3V,IAAV,CAAR,CAEA,GAAKkT,IAAMxlC,SAAX,CAAuBwlC,EAAEuwB,QAAF,CAAY3nB,EAAZ,CAAgBljC,KAAhB,CAAuB,KAAKpT,QAA5B,EAE1B,CAND,CAQAojE,cAAczwD,SAAd,CAAwB8wD,WAAxB,CAAsC,SAAWntB,EAAX,CAAetuC,MAAf,CAAuBwyB,IAAvB,CAA8B,CAEhE,GAAInrB,GAAIrH,OAAQwyB,IAAR,CAAR,CAEA,GAAKnrB,IAAMnH,SAAX,CAAuB,KAAK+1D,QAAL,CAAe3nB,EAAf,CAAmB9b,IAAnB,CAAyBnrB,CAAzB,EAE1B,CAND,CASA;AAEA+zD,cAAcM,MAAd,CAAuB,SAAWptB,EAAX,CAAekoB,GAAf,CAAoBlhB,MAApB,CAA4Bt9C,QAA5B,CAAuC,CAE1D,IAAM,GAAI8T,GAAI,CAAR,CAAWkF,EAAIwlD,IAAItuD,MAAzB,CAAiC4D,IAAMkF,CAAvC,CAA0C,EAAGlF,CAA7C,CAAiD,CAE7C,GAAI45B,GAAI8wB,IAAK1qD,CAAL,CAAR,CACIzE,EAAIiuC,OAAQ5P,EAAEptC,EAAV,CADR,CAGA,GAAK+O,EAAEw5C,WAAF,GAAkB,KAAvB,CAA+B,CAE3B;AACAnb,EAAEuwB,QAAF,CAAY3nB,EAAZ,CAAgBjnC,EAAE+D,KAAlB,CAAyBpT,QAAzB,EAEH,CAEJ,CAEJ,CAhBD,CAkBAojE,cAAcO,YAAd,CAA6B,SAAWnF,GAAX,CAAgBlhB,MAAhB,CAAyB,CAElD,GAAI7nB,GAAI,EAAR,CAEA,IAAM,GAAI3hB,GAAI,CAAR,CAAWkF,EAAIwlD,IAAItuD,MAAzB,CAAiC4D,IAAMkF,CAAvC,CAA0C,EAAGlF,CAA7C,CAAiD,CAE7C,GAAI45B,GAAI8wB,IAAK1qD,CAAL,CAAR,CACA,GAAK45B,EAAEptC,EAAF,GAAQg9C,OAAb,CAAsB7nB,EAAE9wB,IAAF,CAAQ+oC,CAAR,EAEzB,CAED,MAAOjY,EAAP,CAEH,CAbD,CAeA;;OAIA,QAASmuC,eAAT,CAAyBl1B,MAAzB,CAAkC,CAE9B,GAAIquB,OAAQruB,OAAOm1B,KAAP,CAAc,IAAd,CAAZ,CAEA,IAAM,GAAI/vD,GAAI,CAAd,CAAiBA,EAAIipD,MAAM7sD,MAA3B,CAAmC4D,GAAnC,CAA0C,CAEtCipD,MAAOjpD,CAAP,EAAeA,EAAI,CAAN,CAAY,IAAZ,CAAmBipD,MAAOjpD,CAAP,CAAhC,CAEH,CAED,MAAOipD,OAAM+G,IAAN,CAAY,IAAZ,CAAP,CAEH,CAED,QAASC,YAAT,CAAsBztB,EAAtB,CAA0BzoC,IAA1B,CAAgC6gC,MAAhC,CAAyC,CAErC,GAAIs1B,QAAS1tB,GAAG2tB,YAAH,CAAiBp2D,IAAjB,CAAb,CAEAyoC,GAAG4tB,YAAH,CAAiBF,MAAjB,CAAyBt1B,MAAzB,EACA4H,GAAG6tB,aAAH,CAAkBH,MAAlB,EAEA,GAAK1tB,GAAG8tB,kBAAH,CAAuBJ,MAAvB,CAA+B1tB,GAAG+tB,cAAlC,IAAuD,KAA5D,CAAoE,CAEhE59D,QAAQ+iB,KAAR,CAAe,8CAAf,EAEH,CAED,GAAK8sB,GAAGguB,gBAAH,CAAqBN,MAArB,IAAkC,EAAvC,CAA4C,CAExCv9D,QAAQgK,IAAR,CAAc,0CAAd,CAA0D5C,OAASyoC,GAAGmiB,aAAZ,CAA4B,QAA5B,CAAuC,UAAjG,CAA6GniB,GAAGguB,gBAAH,CAAqBN,MAArB,CAA7G,CAA4IJ,eAAgBl1B,MAAhB,CAA5I,EAEH,CAED;AACA;AAEA,MAAOs1B,OAAP,CAEH,CAED;;OAIA,GAAIO,gBAAiB,CAArB,CAEA,QAASC,sBAAT,CAAgCjqC,QAAhC,CAA2C,CAEvC,OAASA,QAAT,EAEI,IAAK5W,eAAL,CACI,MAAO,CAAE,QAAF,CAAY,WAAZ,CAAP,CACJ,IAAKC,aAAL,CACI,MAAO,CAAE,MAAF,CAAU,WAAV,CAAP,CACJ,IAAKE,aAAL,CACI,MAAO,CAAE,MAAF,CAAU,WAAV,CAAP,CACJ,IAAKE,cAAL,CACI,MAAO,CAAE,MAAF,CAAU,gBAAV,CAAP,CACJ,IAAKC,eAAL,CACI,MAAO,CAAE,MAAF,CAAU,iBAAV,CAAP,CACJ,IAAKC,aAAL,CACI,MAAO,CAAE,MAAF,CAAU,kBAAV,CAAP,CACJ,IAAKL,cAAL,CACI,MAAO,CAAE,OAAF,CAAW,kCAAX,CAAP,CACJ,QACI,KAAM,IAAIkD,MAAJ,CAAW,yBAA2BwT,QAAtC,CAAN,CAjBR,CAqBH,CAED,QAASkqC,yBAAT,CAAmCC,YAAnC,CAAiDnqC,QAAjD,CAA4D,CAExD,GAAIqU,YAAa41B,sBAAuBjqC,QAAvB,CAAjB,CACA,MAAO,QAAUmqC,YAAV,CAAyB,0BAAzB,CAAsD91B,WAAY,CAAZ,CAAtD,CAAwE,UAAxE,CAAqFA,WAAY,CAAZ,CAArF,CAAuG,KAA9G,CAEH,CAED,QAAS+1B,yBAAT,CAAmCD,YAAnC,CAAiDnqC,QAAjD,CAA4D,CAExD,GAAIqU,YAAa41B,sBAAuBjqC,QAAvB,CAAjB,CACA,MAAO,QAAUmqC,YAAV,CAAyB,kCAAzB,CAA8D91B,WAAY,CAAZ,CAA9D,CAAgFA,WAAY,CAAZ,CAAhF,CAAkG,KAAzG,CAEH,CAED,QAASg2B,uBAAT,CAAiCF,YAAjC,CAA+CG,WAA/C,CAA6D,CAEzD,GAAIC,gBAAJ,CAEA,OAASD,WAAT,EAEI,IAAK9lD,kBAAL,CACI+lD,gBAAkB,QAAlB,CACA,MAEJ,IAAK9lD,oBAAL,CACI8lD,gBAAkB,UAAlB,CACA,MAEJ,IAAK7lD,sBAAL,CACI6lD,gBAAkB,YAAlB,CACA,MAEJ,IAAK5lD,kBAAL,CACI4lD,gBAAkB,iBAAlB,CACA,MAEJ,QACI,KAAM,IAAI/9C,MAAJ,CAAW,4BAA8B89C,WAAzC,CAAN,CAnBR,CAuBA,MAAO,QAAUH,YAAV,CAAyB,0BAAzB,CAAsDI,eAAtD,CAAwE,yBAA/E,CAEH,CAED,QAASC,mBAAT,CAA6BlW,UAA7B,CAAyC7R,UAAzC,CAAqDgoB,kBAArD,CAA0E,CAEtEnW,WAAaA,YAAc,EAA3B,CAEA,GAAIoW,QAAS,CACPpW,WAAWC,WAAX,EAA0B9R,WAAWkoB,YAArC,EAAqDloB,WAAWzL,OAAhE,EAA2EyL,WAAWtL,SAAtF,EAAmGsL,WAAWz4C,WAAhH,CAAgI,iDAAhI,CAAoL,EAD3K,CAET,CAAEsqD,WAAWE,SAAX,EAAwB/R,WAAW8b,sBAArC,GAAiEkM,mBAAmB9xD,GAAnB,CAAwB,gBAAxB,CAAjE,CAA8G,uCAA9G,CAAwJ,EAF/I,CAGP27C,WAAWG,WAAb,EAA8BgW,mBAAmB9xD,GAAnB,CAAwB,oBAAxB,CAA9B,CAA+E,0CAA/E,CAA4H,EAHnH,CAIT,CAAE27C,WAAWI,gBAAX,EAA+BjS,WAAWvM,MAA5C,GAAwDu0B,mBAAmB9xD,GAAnB,CAAwB,wBAAxB,CAAxD,CAA6G,+CAA7G,CAA+J,EAJtJ,CAAb,CAOA,MAAO+xD,QAAOE,MAAP,CAAeC,eAAf,EAAiCtB,IAAjC,CAAuC,IAAvC,CAAP,CAEH,CAED,QAASuB,gBAAT,CAA0B1W,OAA1B,CAAoC,CAEhC,GAAIsW,QAAS,EAAb,CAEA,IAAM,GAAIzqC,KAAV,GAAkBm0B,QAAlB,CAA4B,CAExB,GAAIv7C,OAAQu7C,QAASn0B,IAAT,CAAZ,CAEA,GAAKpnB,QAAU,KAAf,CAAuB,SAEvB6xD,OAAOtgE,IAAP,CAAa,WAAa61B,IAAb,CAAoB,GAApB,CAA0BpnB,KAAvC,EAEH,CAED,MAAO6xD,QAAOnB,IAAP,CAAa,IAAb,CAAP,CAEH,CAED,QAASwB,wBAAT,CAAkChvB,EAAlC,CAAsCunB,OAAtC,CAAgD,CAE5C,GAAI99B,YAAa,EAAjB,CAEA,GAAI/mB,GAAIs9B,GAAG+sB,mBAAH,CAAwBxF,OAAxB,CAAiCvnB,GAAGivB,iBAApC,CAAR,CAEA,IAAM,GAAIzxD,GAAI,CAAd,CAAiBA,EAAIkF,CAArB,CAAwBlF,GAAxB,CAA+B,CAE3B,GAAI6jD,MAAOrhB,GAAGkvB,eAAH,CAAoB3H,OAApB,CAA6B/pD,CAA7B,CAAX,CACA,GAAI0mB,MAAOm9B,KAAKn9B,IAAhB,CAEA;AAEAuF,WAAYvF,IAAZ,EAAqB8b,GAAGmvB,iBAAH,CAAsB5H,OAAtB,CAA+BrjC,IAA/B,CAArB,CAEH,CAED,MAAOuF,WAAP,CAEH,CAED,QAASqlC,gBAAT,CAA0B12B,MAA1B,CAAmC,CAE/B,MAAOA,UAAW,EAAlB,CAEH,CAED,QAASg3B,iBAAT,CAA2Bh3B,MAA3B,CAAmCsO,UAAnC,CAAgD,CAE5C,MAAOtO,QACFi3B,OADE,CACO,iBADP,CAC0B3oB,WAAW4oB,YADrC,EAEFD,OAFE,CAEO,kBAFP,CAE2B3oB,WAAW6oB,aAFtC,EAGFF,OAHE,CAGO,uBAHP,CAGgC3oB,WAAW8oB,iBAH3C,EAIFH,OAJE,CAIO,mBAJP,CAI4B3oB,WAAW+oB,cAJvC,EAKFJ,OALE,CAKO,kBALP,CAK2B3oB,WAAWgpB,aALtC,CAAP,CAOH,CAED,QAASC,yBAAT,CAAmCv3B,MAAnC,CAA2CsO,UAA3C,CAAwD,CAEpD,MAAOtO,QACFi3B,OADE,CACO,sBADP,CAC+B3oB,WAAWkpB,iBAD1C,EAEFP,OAFE,CAEO,wBAFP,CAEmC3oB,WAAWkpB,iBAAX,CAA+BlpB,WAAWmpB,mBAF7E,CAAP,CAIH,CAED,QAASC,cAAT,CAAwB13B,MAAxB,CAAiC,CAE7B,GAAI23B,SAAU,iCAAd,CAEA,QAASV,QAAT,CAAkB7qD,KAAlB,CAAyBwrD,OAAzB,CAAmC,CAE/B,GAAIX,SAAUt4B,YAAai5B,OAAb,CAAd,CAEA,GAAKX,UAAYz9D,SAAjB,CAA6B,CAEzB,KAAM,IAAI6e,MAAJ,CAAW,6BAA+Bu/C,OAA/B,CAAyC,GAApD,CAAN,CAEH,CAED,MAAOF,eAAeT,OAAf,CAAP,CAEH,CAED,MAAOj3B,QAAOi3B,OAAP,CAAgBU,OAAhB,CAAyBV,OAAzB,CAAP,CAEH,CAED,QAASY,YAAT,CAAsB73B,MAAtB,CAA+B,CAE3B,GAAI23B,SAAU,8FAAd,CAEA,QAASV,QAAT,CAAkB7qD,KAAlB,CAAyBrT,KAAzB,CAAgC8O,GAAhC,CAAqCiwD,OAArC,CAA+C,CAE3C,GAAIC,QAAS,EAAb,CAEA,IAAM,GAAI3yD,GAAI+6B,SAAUpnC,KAAV,CAAd,CAAiCqM,EAAI+6B,SAAUt4B,GAAV,CAArC,CAAsDzC,GAAtD,CAA6D,CAEzD2yD,QAAUD,QAAQb,OAAR,CAAiB,UAAjB,CAA6B,KAAO7xD,CAAP,CAAW,IAAxC,CAAV,CAEH,CAED,MAAO2yD,OAAP,CAEH,CAED,MAAO/3B,QAAOi3B,OAAP,CAAgBU,OAAhB,CAAyBV,OAAzB,CAAP,CAEH,CAED,QAASe,aAAT,CAAuB1mE,QAAvB,CAAiC6uD,UAAjC,CAA6C8X,IAA7C,CAAmDzpB,QAAnD,CAA6D8mB,MAA7D,CAAqEhnB,UAArE,CAAkF,CAE9E,GAAI1G,IAAKt2C,SAASwB,OAAlB,CAEA,GAAImtD,SAAUzR,SAASyR,OAAvB,CAEA,GAAIva,cAAe4vB,OAAO5vB,YAA1B,CACA,GAAIC,gBAAiB2vB,OAAO3vB,cAA5B,CAEA,GAAIuyB,qBAAsB,sBAA1B,CAEA,GAAK5pB,WAAW6pB,aAAX,GAA6BzqD,YAAlC,CAAiD,CAE7CwqD,oBAAsB,oBAAtB,CAEH,CAJD,IAIO,IAAK5pB,WAAW6pB,aAAX,GAA6BxqD,gBAAlC,CAAqD,CAExDuqD,oBAAsB,yBAAtB,CAEH,CAED,GAAIE,kBAAmB,kBAAvB,CACA,GAAIC,kBAAmB,wBAAvB,CACA,GAAIC,sBAAuB,0BAA3B,CAEA,GAAKhqB,WAAWvM,MAAhB,CAAyB,CAErB,OAASyM,SAASzM,MAAT,CAAgBzW,OAAzB,EAEI,IAAK5a,sBAAL,CACA,IAAKC,sBAAL,CACIynD,iBAAmB,kBAAnB,CACA,MAEJ,IAAKrnD,wBAAL,CACA,IAAKC,wBAAL,CACIonD,iBAAmB,qBAAnB,CACA,MAEJ,IAAKxnD,iCAAL,CACA,IAAKC,iCAAL,CACIunD,iBAAmB,qBAAnB,CACA,MAEJ,IAAKtnD,2BAAL,CACIsnD,iBAAmB,oBAAnB,CACA,MAnBR,CAuBA,OAAS5pB,SAASzM,MAAT,CAAgBzW,OAAzB,EAEI,IAAK3a,sBAAL,CACA,IAAKE,iCAAL,CACIwnD,iBAAmB,wBAAnB,CACA,MALR,CASA,OAAS7pB,SAASsR,OAAlB,EAEI,IAAK7vC,kBAAL,CACIqoD,qBAAuB,0BAAvB,CACA,MAEJ,IAAKpoD,aAAL,CACIooD,qBAAuB,qBAAvB,CACA,MAEJ,IAAKnoD,aAAL,CACImoD,qBAAuB,qBAAvB,CACA,MAZR,CAgBH,CAED,GAAIC,mBAAsBjnE,SAAS+uC,WAAT,CAAuB,CAAzB,CAA+B/uC,SAAS+uC,WAAxC,CAAsD,GAA9E,CAEA;AAEA;AAEA,GAAIm4B,kBAAmBnC,mBAAoB7nB,SAAS2R,UAA7B,CAAyC7R,UAAzC,CAAqD6R,UAArD,CAAvB,CAEA,GAAIsY,eAAgB9B,gBAAiB1W,OAAjB,CAApB,CAEA;AAEA,GAAIkP,SAAUvnB,GAAG8wB,aAAH,EAAd,CAEA,GAAIC,aAAJ,CAAkBC,cAAlB,CAEA,GAAKpqB,SAASqqB,mBAAd,CAAoC,CAEhCF,aAAe,CAEXF,aAFW,EAIbhC,MAJa,CAILC,eAJK,EAIatB,IAJb,CAImB,IAJnB,CAAf,CAMA,GAAKuD,aAAan3D,MAAb,CAAsB,CAA3B,CAA+B,CAE3Bm3D,cAAgB,IAAhB,CAEH,CAEDC,eAAiB,CAEbJ,gBAFa,CAGbC,aAHa,EAKfhC,MALe,CAKPC,eALO,EAKWtB,IALX,CAKiB,IALjB,CAAjB,CAOA,GAAKwD,eAAep3D,MAAf,CAAwB,CAA7B,CAAiC,CAE7Bo3D,gBAAkB,IAAlB,CAEH,CAEJ,CA3BD,IA2BO,CAEHD,aAAe,CAEX,aAAerqB,WAAWyG,SAA1B,CAAsC,SAF3B,CAGX,aAAezG,WAAWyG,SAA1B,CAAsC,OAH3B,CAKX,uBAAyBugB,OAAOxpC,IALrB,CAOX2sC,aAPW,CASXnqB,WAAWwqB,sBAAX,CAAoC,yBAApC,CAAgE,EATrD,CAWX,wBAA0BP,iBAXf,CAaX,qBAAuBjqB,WAAWyqB,QAbvB,CAcTzqB,WAAW0qB,MAAX,EAAqB1qB,WAAW1K,GAAlC,CAA0C,iBAA1C,CAA8D,EAdnD,CAeT0K,WAAW0qB,MAAX,EAAqB1qB,WAAW2qB,MAAlC,CAA6C,kBAA7C,CAAkE,EAfvD,CAiBX3qB,WAAW7M,GAAX,CAAiB,iBAAjB,CAAqC,EAjB1B,CAkBX6M,WAAWvM,MAAX,CAAoB,oBAApB,CAA2C,EAlBhC,CAmBXuM,WAAWvM,MAAX,CAAoB,WAAas2B,gBAAjC,CAAoD,EAnBzC,CAoBX/pB,WAAW9L,QAAX,CAAsB,sBAAtB,CAA+C,EApBpC,CAqBX8L,WAAWjM,KAAX,CAAmB,mBAAnB,CAAyC,EArB9B,CAsBXiM,WAAW3L,WAAX,CAAyB,yBAAzB,CAAqD,EAtB1C,CAuBX2L,WAAWzL,OAAX,CAAqB,qBAArB,CAA6C,EAvBlC,CAwBXyL,WAAWtL,SAAX,CAAuB,uBAAvB,CAAiD,EAxBtC,CAyBXsL,WAAWnL,eAAX,EAA8BmL,WAAWwqB,sBAAzC,CAAkE,6BAAlE,CAAkG,EAzBvF,CA0BXxqB,WAAWzM,WAAX,CAAyB,yBAAzB,CAAqD,EA1B1C,CA2BXyM,WAAW/K,YAAX,CAA0B,0BAA1B,CAAuD,EA3B5C,CA4BX+K,WAAW7K,YAAX,CAA0B,0BAA1B,CAAuD,EA5B5C,CA6BX6K,WAAW3M,QAAX,CAAsB,sBAAtB,CAA+C,EA7BpC,CA8BX2M,WAAW2B,YAAX,CAA0B,mBAA1B,CAAgD,EA9BrC,CAgCX3B,WAAWz4C,WAAX,CAAyB,qBAAzB,CAAiD,EAhCtC,CAkCXy4C,WAAWoR,QAAX,CAAsB,sBAAtB,CAA+C,EAlCpC,CAmCXpR,WAAW4qB,gBAAX,CAA8B,sBAA9B,CAAuD,EAnC5C,CAqCX5qB,WAAWiC,YAAX,CAA0B,0BAA1B,CAAuD,EArC5C,CAsCXjC,WAAWkC,YAAX,EAA2BlC,WAAWz4C,WAAX,GAA2B,KAAtD,CAA8D,0BAA9D,CAA2F,EAtChF,CAuCXy4C,WAAW6qB,WAAX,CAAyB,sBAAzB,CAAkD,EAvCvC,CAwCX7qB,WAAW8qB,SAAX,CAAuB,oBAAvB,CAA8C,EAxCnC,CA0CX9qB,WAAW+qB,gBAAX,CAA8B,uBAA9B,CAAwD,EA1C7C,CA2CX/qB,WAAW+qB,gBAAX,CAA8B,WAAanB,mBAA3C,CAAiE,EA3CtD,CA6CX5pB,WAAW6Q,eAAX,CAA6B,6BAA7B,CAA6D,EA7ClD,CA+CX7Q,WAAW8b,sBAAX,CAAoC,yBAApC,CAAgE,EA/CrD,CAgDX9b,WAAW8b,sBAAX,EAAqCjK,WAAW37C,GAAX,CAAgB,gBAAhB,CAArC,CAA0E,6BAA1E,CAA0G,EAhD/F,CAkDX,2BAlDW,CAmDX,+BAnDW,CAoDX,gCApDW,CAqDX,0BArDW,CAsDX,4BAtDW,CAuDX,8BAvDW,CAyDX,0BAzDW,CA0DX,wBA1DW,CA2DX,oBA3DW,CA6DX,kBA7DW,CA+DX,wBA/DW,CAiEX,QAjEW,CAmEX,yBAnEW,CAqEX,+BArEW,CAsEX,+BAtEW,CAuEX,+BAvEW,CAwEX,+BAxEW,CA0EX,0BA1EW,CA4EX,gCA5EW,CA6EX,gCA7EW,CA8EX,gCA9EW,CA+EX,gCA/EW,CAiFX,QAjFW,CAmFX,gCAnFW,CAoFX,gCApFW,CAqFX,gCArFW,CAsFX,gCAtFW,CAwFX,SAxFW,CA0FX,QA1FW,CA4FX,qBA5FW,CA8FX,4BA9FW,CA+FX,6BA/FW,CAiGX,QAjGW,CAmGX,IAnGW,EAqGbiyD,MArGa,CAqGLC,eArGK,EAqGatB,IArGb,CAqGmB,IArGnB,CAAf,CAuGAwD,eAAiB,CAEbJ,gBAFa,CAIb,aAAelqB,WAAWyG,SAA1B,CAAsC,SAJzB,CAKb,aAAezG,WAAWyG,SAA1B,CAAsC,OALzB,CAOb,uBAAyBugB,OAAOxpC,IAPnB,CASb2sC,aATa,CAWbnqB,WAAWmQ,SAAX,CAAuB,qBAAuBnQ,WAAWmQ,SAAlC,EAAgDnQ,WAAWmQ,SAAX,CAAuB,CAAvB,CAA2B,EAA3B,CAAgC,IAAhF,CAAvB,CAAgH,EAXnG,CAWuG;AAEpH,wBAA0B8Z,iBAbb,CAeXjqB,WAAW0qB,MAAX,EAAqB1qB,WAAW1K,GAAlC,CAA0C,iBAA1C,CAA8D,EAfjD,CAgBX0K,WAAW0qB,MAAX,EAAqB1qB,WAAW2qB,MAAlC,CAA6C,kBAA7C,CAAkE,EAhBrD,CAkBb3qB,WAAW7M,GAAX,CAAiB,iBAAjB,CAAqC,EAlBxB,CAmBb6M,WAAWvM,MAAX,CAAoB,oBAApB,CAA2C,EAnB9B,CAoBbuM,WAAWvM,MAAX,CAAoB,WAAaq2B,gBAAjC,CAAoD,EApBvC,CAqBb9pB,WAAWvM,MAAX,CAAoB,WAAas2B,gBAAjC,CAAoD,EArBvC,CAsBb/pB,WAAWvM,MAAX,CAAoB,WAAau2B,oBAAjC,CAAwD,EAtB3C,CAuBbhqB,WAAW9L,QAAX,CAAsB,sBAAtB,CAA+C,EAvBlC,CAwBb8L,WAAWjM,KAAX,CAAmB,mBAAnB,CAAyC,EAxB5B,CAyBbiM,WAAW3L,WAAX,CAAyB,yBAAzB,CAAqD,EAzBxC,CA0Bb2L,WAAWzL,OAAX,CAAqB,qBAArB,CAA6C,EA1BhC,CA2BbyL,WAAWtL,SAAX,CAAuB,uBAAvB,CAAiD,EA3BpC,CA4BbsL,WAAWzM,WAAX,CAAyB,yBAAzB,CAAqD,EA5BxC,CA6BbyM,WAAW/K,YAAX,CAA0B,0BAA1B,CAAuD,EA7B1C,CA8Bb+K,WAAW7K,YAAX,CAA0B,0BAA1B,CAAuD,EA9B1C,CA+Bb6K,WAAW3M,QAAX,CAAsB,sBAAtB,CAA+C,EA/BlC,CAgCb2M,WAAW2B,YAAX,CAA0B,mBAA1B,CAAgD,EAhCnC,CAkCb3B,WAAW3K,WAAX,CAAyB,yBAAzB,CAAqD,EAlCxC,CAoCb2K,WAAWz4C,WAAX,CAAyB,qBAAzB,CAAiD,EApCpC,CAsCby4C,WAAW6qB,WAAX,CAAyB,sBAAzB,CAAkD,EAtCrC,CAuCb7qB,WAAW8qB,SAAX,CAAuB,oBAAvB,CAA8C,EAvCjC,CAyCb9qB,WAAW+qB,gBAAX,CAA8B,uBAA9B,CAAwD,EAzC3C,CA0Cb/qB,WAAW+qB,gBAAX,CAA8B,WAAanB,mBAA3C,CAAiE,EA1CpD,CA4Cb5pB,WAAWoQ,kBAAX,CAAgC,6BAAhC,CAAgE,EA5CnD,CA8CbpQ,WAAWgrB,uBAAX,CAAqC,mCAArC,CAA2E,EA9C9D,CAgDbhrB,WAAW8b,sBAAX,CAAoC,yBAApC,CAAgE,EAhDnD,CAiDb9b,WAAW8b,sBAAX,EAAqCjK,WAAW37C,GAAX,CAAgB,gBAAhB,CAArC,CAA0E,6BAA1E,CAA0G,EAjD7F,CAmDb8pC,WAAWvM,MAAX,EAAqBoe,WAAW37C,GAAX,CAAgB,wBAAhB,CAArB,CAAkE,yBAAlE,CAA8F,EAnDjF,CAqDb,0BArDa,CAsDb,8BAtDa,CAwDX8pC,WAAW6nB,WAAX,GAA2B/lD,aAA7B,CAA+C,sBAA/C,CAAwE,EAxD3D,CAyDXk+B,WAAW6nB,WAAX,GAA2B/lD,aAA7B,CAA+CuuB,YAAa,2BAAb,CAA/C,CAA4F,EAzD/E,CAyDmF;AAC9F2P,WAAW6nB,WAAX,GAA2B/lD,aAA7B,CAA+C8lD,uBAAwB,aAAxB,CAAuC5nB,WAAW6nB,WAAlD,CAA/C,CAAiH,EA1DpG,CA4Db7nB,WAAWkQ,SAAX,CAAuB,mBAAvB,CAA6C,EA5DhC,CA8DXlQ,WAAWirB,cAAX,EAA6BjrB,WAAWkrB,WAAxC,EAAuDlrB,WAAWmrB,cAAlE,EAAoFnrB,WAAWorB,mBAAjG,CAAyH/6B,YAAa,yBAAb,CAAzH,CAAoK,EA9DvJ,CA8D2J;AACxK2P,WAAWkrB,WAAX,CAAyBzD,yBAA0B,kBAA1B,CAA8CznB,WAAWkrB,WAAzD,CAAzB,CAAkG,EA/DrF,CAgEblrB,WAAWmrB,cAAX,CAA4B1D,yBAA0B,qBAA1B,CAAiDznB,WAAWmrB,cAA5D,CAA5B,CAA2G,EAhE9F,CAiEbnrB,WAAWorB,mBAAX,CAAiC3D,yBAA0B,0BAA1B,CAAsDznB,WAAWorB,mBAAjE,CAAjC,CAA0H,EAjE7G,CAkEbprB,WAAWirB,cAAX,CAA4BtD,yBAA0B,qBAA1B,CAAiD3nB,WAAWirB,cAA5D,CAA5B,CAA2G,EAlE9F,CAoEbjrB,WAAWqrB,YAAX,CAA0B,yBAA2BnrB,SAASmrB,YAA9D,CAA6E,EApEhE,CAsEb,IAtEa,EAwEflD,MAxEe,CAwEPC,eAxEO,EAwEWtB,IAxEX,CAwEiB,IAxEjB,CAAjB,CA0EH,CAED1vB,aAAegyB,cAAehyB,YAAf,CAAf,CACAA,aAAesxB,iBAAkBtxB,YAAlB,CAAgC4I,UAAhC,CAAf,CACA5I,aAAe6xB,yBAA0B7xB,YAA1B,CAAwC4I,UAAxC,CAAf,CAEA3I,eAAiB+xB,cAAe/xB,cAAf,CAAjB,CACAA,eAAiBqxB,iBAAkBrxB,cAAlB,CAAkC2I,UAAlC,CAAjB,CACA3I,eAAiB4xB,yBAA0B5xB,cAA1B,CAA0C2I,UAA1C,CAAjB,CAEA5I,aAAemyB,YAAanyB,YAAb,CAAf,CACAC,eAAiBkyB,YAAalyB,cAAb,CAAjB,CAEA,GAAIi0B,YAAajB,aAAejzB,YAAhC,CACA,GAAIm0B,cAAejB,eAAiBjzB,cAApC,CAEA;AACA;AAEA,GAAIm0B,gBAAiBzE,YAAaztB,EAAb,CAAiBA,GAAGmiB,aAApB,CAAmC6P,UAAnC,CAArB,CACA,GAAIG,kBAAmB1E,YAAaztB,EAAb,CAAiBA,GAAGqiB,eAApB,CAAqC4P,YAArC,CAAvB,CAEAjyB,GAAGoyB,YAAH,CAAiB7K,OAAjB,CAA0B2K,cAA1B,EACAlyB,GAAGoyB,YAAH,CAAiB7K,OAAjB,CAA0B4K,gBAA1B,EAEA;AAEA,GAAKvrB,SAASiS,mBAAT,GAAiCjnD,SAAtC,CAAkD,CAE9CouC,GAAGqyB,kBAAH,CAAuB9K,OAAvB,CAAgC,CAAhC,CAAmC3gB,SAASiS,mBAA5C,EAEH,CAJD,IAIO,IAAKnS,WAAWiC,YAAX,GAA4B,IAAjC,CAAwC,CAE3C;AACA3I,GAAGqyB,kBAAH,CAAuB9K,OAAvB,CAAgC,CAAhC,CAAmC,UAAnC,EAEH,CAEDvnB,GAAGsyB,WAAH,CAAgB/K,OAAhB,EAEA,GAAIgL,YAAavyB,GAAGwyB,iBAAH,CAAsBjL,OAAtB,EAAgCkL,IAAhC,EAAjB,CACA,GAAIC,WAAY1yB,GAAGguB,gBAAH,CAAqBkE,cAArB,EAAsCO,IAAtC,EAAhB,CACA,GAAIE,aAAc3yB,GAAGguB,gBAAH,CAAqBmE,gBAArB,EAAwCM,IAAxC,EAAlB,CAEA,GAAIG,UAAW,IAAf,CACA,GAAIC,iBAAkB,IAAtB,CAEA;AACA;AAEA,GAAK7yB,GAAG+sB,mBAAH,CAAwBxF,OAAxB,CAAiCvnB,GAAG8yB,WAApC,IAAsD,KAA3D,CAAmE,CAE/DF,SAAW,KAAX,CAEAziE,QAAQ+iB,KAAR,CAAe,oCAAf,CAAqD8sB,GAAG+yB,QAAH,EAArD,CAAoE,oBAApE,CAA0F/yB,GAAG+sB,mBAAH,CAAwBxF,OAAxB,CAAiCvnB,GAAGgzB,eAApC,CAA1F,CAAiJ,sBAAjJ,CAAyKT,UAAzK,CAAqLG,SAArL,CAAgMC,WAAhM,EAEH,CAND,IAMO,IAAKJ,aAAe,EAApB,CAAyB,CAE5BpiE,QAAQgK,IAAR,CAAc,4CAAd,CAA4Do4D,UAA5D,EAEH,CAJM,IAIA,IAAKG,YAAc,EAAd,EAAoBC,cAAgB,EAAzC,CAA8C,CAEjDE,gBAAkB,KAAlB,CAEH,CAED,GAAKA,eAAL,CAAuB,CAEnB,KAAKI,WAAL,CAAmB,CAEfL,SAAUA,QAFK,CAGfhsB,SAAUA,QAHK,CAKf2rB,WAAYA,UALG,CAOfz0B,aAAc,CAEV1tC,IAAKsiE,SAFK,CAGVQ,OAAQnC,YAHE,CAPC,CAcfhzB,eAAgB,CAEZ3tC,IAAKuiE,WAFO,CAGZO,OAAQlC,cAHI,CAdD,CAAnB,CAuBH,CAED;AAEAhxB,GAAGmzB,YAAH,CAAiBjB,cAAjB,EACAlyB,GAAGmzB,YAAH,CAAiBhB,gBAAjB,EAEA;AAEA,GAAIiB,eAAJ,CAEA,KAAK1L,WAAL,CAAmB,UAAY,CAE3B,GAAK0L,iBAAmBxhE,SAAxB,CAAoC,CAEhCwhE,eAAiB,GAAItG,cAAJ,CAAmB9sB,EAAnB,CAAuBunB,OAAvB,CAAgC79D,QAAhC,CAAjB,CAEH,CAED,MAAO0pE,eAAP,CAEH,CAVD,CAYA;AAEA,GAAIC,iBAAJ,CAEA,KAAKC,aAAL,CAAqB,UAAY,CAE7B,GAAKD,mBAAqBzhE,SAA1B,CAAsC,CAElCyhE,iBAAmBrE,wBAAyBhvB,EAAzB,CAA6BunB,OAA7B,CAAnB,CAEH,CAED,MAAO8L,iBAAP,CAEH,CAVD,CAYA;AAEA,KAAKE,OAAL,CAAe,UAAY,CAEvBvzB,GAAGwzB,aAAH,CAAkBjM,OAAlB,EACA,KAAKA,OAAL,CAAe31D,SAAf,CAEH,CALD,CAOA;AAEA0K,OAAOI,gBAAP,CAAyB,IAAzB,CAA+B,CAE3Bw6B,SAAU,CACNt6B,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,sDAAd,EACA,MAAO,MAAKutD,WAAL,EAAP,CAEH,CANK,CAFiB,CAW3Bj+B,WAAY,CACR7sB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,0DAAd,EACA,MAAO,MAAKm5D,aAAL,EAAP,CAEH,CANO,CAXe,CAA/B,EAuBA;AAEA,KAAKpvC,IAAL,CAAYwpC,OAAOxpC,IAAnB,CACA,KAAKl6B,EAAL,CAAUikE,gBAAV,CACA,KAAKoC,IAAL,CAAYA,IAAZ,CACA,KAAKoD,SAAL,CAAiB,CAAjB,CACA,KAAKlM,OAAL,CAAeA,OAAf,CACA,KAAKzpB,YAAL,CAAoBo0B,cAApB,CACA,KAAKn0B,cAAL,CAAsBo0B,gBAAtB,CAEA,MAAO,KAAP,CAEH,CAED;;OAIA,QAASuB,cAAT,CAAwBhqE,QAAxB,CAAkC6uD,UAAlC,CAA8Cob,YAA9C,CAA6D,CAEzD,GAAIzM,UAAW,EAAf,CAEA,GAAI0M,WAAY,CACZC,kBAAmB,OADP,CAEZC,qBAAsB,cAFV,CAGZC,mBAAoB,QAHR,CAIZ9b,kBAAmB,OAJP,CAKZxqD,oBAAqB,SALT,CAMZO,kBAAmB,OANP,CAOZgmE,iBAAkB,OAPN,CAQZC,qBAAsB,UARV,CASZC,qBAAsB,UATV,CAUZC,kBAAmB,OAVP,CAWZC,mBAAoB,QAXR,CAYZC,eAAgB,QAZJ,CAaZC,eAAgB,QAbJ,CAAhB,CAgBA,GAAIC,gBAAiB,CACjB,WADiB,CACJ,wBADI,CACsB,KADtB,CAC6B,aAD7B,CAC4C,QAD5C,CACsD,YADtD,CACoE,gBADpE,CAEjB,UAFiB,CAEL,OAFK,CAEI,aAFJ,CAEmB,qBAFnB,CAE0C,SAF1C,CAEqD,WAFrD,CAEkE,iBAFlE,CAEqF,aAFrF,CAGjB,cAHiB,CAGD,cAHC,CAGe,aAHf,CAIjB,UAJiB,CAIL,SAJK,CAIM,cAJN,CAIsB,KAJtB,CAI6B,QAJ7B,CAIuC,QAJvC,CAKjB,aALiB,CAKF,iBALE,CAKiB,wBALjB,CAK2C,UAL3C,CAMjB,UANiB,CAML,kBANK,CAMe,cANf,CAM+B,cAN/B,CAOjB,iBAPiB,CAOE,iBAPF,CAOqB,oBAPrB,CAQjB,cARiB,CAQD,gBARC,CAQiB,eARjB,CAQkC,eARlC,CAQmD,mBARnD,CASjB,kBATiB,CASG,eATH,CASoB,aATpB,CASmC,yBATnC,CAUjB,WAViB,CAUJ,aAVI,CAUW,WAVX,CAUwB,mBAVxB,CAU6C,qBAV7C,CAUoE,cAVpE,CAUoF,WAVpF,CAArB,CAcA,QAASC,cAAT,CAAwB9iE,MAAxB,CAAiC,CAE7B,GAAI+iE,UAAW/iE,OAAO+iE,QAAtB,CACA,GAAIC,OAAQD,SAASC,KAArB,CAEA,GAAKf,aAAahQ,mBAAlB,CAAwC,CAEpC,MAAO,KAAP,CAEH,CAJD,IAIO,CAEH;AACA;AACA;AACA;AACA;AACA;AAEA,GAAIgR,iBAAkBhB,aAAaxQ,iBAAnC,CACA,GAAIyR,iBAAkB1lE,KAAKmT,KAAL,CAAY,CAAEsyD,gBAAkB,EAApB,EAA2B,CAAvC,CAAtB,CAEA,GAAIxD,UAAWjiE,KAAK+G,GAAL,CAAU2+D,eAAV,CAA2BF,MAAM96D,MAAjC,CAAf,CAEA,GAAKu3D,SAAWuD,MAAM96D,MAAtB,CAA+B,CAE3BzJ,QAAQgK,IAAR,CAAc,qCAAuCu6D,MAAM96D,MAA7C,CAAsD,4BAAtD,CAAqFu3D,QAArF,CAAgG,GAA9G,EACA,MAAO,EAAP,CAEH,CAED,MAAOA,SAAP,CAEH,CAEJ,CAED,QAAS0D,0BAAT,CAAoCh7B,GAApC,CAAyCi7B,mBAAzC,CAA+D,CAE3D,GAAI7wC,SAAJ,CAEA,GAAK,CAAE4V,GAAP,CAAa,CAET5V,SAAW5W,cAAX,CAEH,CAJD,IAIO,IAAKwsB,IAAIjV,SAAT,CAAqB,CAExBX,SAAW4V,IAAI5V,QAAf,CAEH,CAJM,IAIA,IAAK4V,IAAI5S,mBAAT,CAA+B,CAElC92B,QAAQgK,IAAR,CAAc,2HAAd,EACA8pB,SAAW4V,IAAIhT,OAAJ,CAAY5C,QAAvB,CAEH,CAED;AACA,GAAKA,WAAa5W,cAAb,EAA+BynD,mBAApC,CAA0D,CAEtD7wC,SAAW1W,aAAX,CAEH,CAED,MAAO0W,SAAP,CAEH,CAED,KAAK8wC,aAAL,CAAqB,SAAWnuB,QAAX,CAAqBvK,MAArB,CAA6B24B,OAA7B,CAAsCh5B,GAAtC,CAA2Ci5B,WAA3C,CAAwDC,iBAAxD,CAA2ExjE,MAA3E,CAAoF,CAErG,GAAIyjE,UAAWvB,UAAWhtB,SAASrvC,IAApB,CAAf,CAEA;AACA;AAEA,GAAI45D,UAAWz/D,OAAO0jE,aAAP,CAAuBZ,cAAe9iE,MAAf,CAAvB,CAAiD,CAAhE,CACA,GAAIy7C,WAAYwmB,aAAaxmB,SAA7B,CAEA,GAAKvG,SAASuG,SAAT,GAAuB,IAA5B,CAAmC,CAE/BA,UAAYwmB,aAAa1R,eAAb,CAA8Brb,SAASuG,SAAvC,CAAZ,CAEA,GAAKA,YAAcvG,SAASuG,SAA5B,CAAwC,CAEpCh9C,QAAQgK,IAAR,CAAc,mCAAd,CAAmDysC,SAASuG,SAA5D,CAAuE,sBAAvE,CAA+FA,SAA/F,CAA0G,UAA1G,EAEH,CAEJ,CAED,GAAIkoB,qBAAsB3rE,SAAS4rE,eAAT,EAA1B,CAEA,GAAI5uB,YAAa,CAEbyuB,SAAUA,QAFG,CAIbhoB,UAAWA,SAJE,CAKb+jB,uBAAwByC,aAAalQ,cALxB,CAMbkO,eAAgBkD,0BAA6B,CAAEQ,mBAAJ,CAA4B,IAA5B,CAAmCA,oBAAoBxuC,OAAlF,CAA2Fn9B,SAAS6rE,WAApG,CANH,CAOb17B,IAAK,CAAC,CAAE+M,SAAS/M,GAPJ,CAQb+3B,YAAaiD,0BAA2BjuB,SAAS/M,GAApC,CAAyCnwC,SAAS8rE,UAAlD,CARA,CASbr7B,OAAQ,CAAC,CAAEyM,SAASzM,MATP,CAUbs7B,WAAY7uB,SAASzM,MAAT,EAAmByM,SAASzM,MAAT,CAAgBzW,OAVlC,CAWbmuC,eAAgBgD,0BAA2BjuB,SAASzM,MAApC,CAA4CzwC,SAAS8rE,UAArD,CAXH,CAYb5G,aAAgB,CAAC,CAAEhoB,SAASzM,MAAd,GAA8ByM,SAASzM,MAAT,CAAgBzW,OAAhB,GAA4Bva,uBAA9B,EAA6Dy9B,SAASzM,MAAT,CAAgBzW,OAAhB,GAA4Bta,uBAArH,CAZD,CAabwxB,SAAU,CAAC,CAAEgM,SAAShM,QAbT,CAcbH,MAAO,CAAC,CAAEmM,SAASnM,KAdN,CAebM,YAAa,CAAC,CAAE6L,SAAS7L,WAfZ,CAgBb+2B,oBAAqB+C,0BAA2BjuB,SAAS7L,WAApC,CAAiDrxC,SAAS8rE,UAA1D,CAhBR,CAiBbv6B,QAAS,CAAC,CAAE2L,SAAS3L,OAjBR,CAkBbG,UAAW,CAAC,CAAEwL,SAASxL,SAlBV,CAmBbG,gBAAiB,CAAC,CAAEqL,SAASrL,eAnBhB,CAoBbI,aAAc,CAAC,CAAEiL,SAASjL,YApBb,CAqBbE,aAAc,CAAC,CAAE+K,SAAS/K,YArBb,CAsBb5B,YAAa,CAAC,CAAE2M,SAAS3M,WAtBZ,CAuBbF,SAAU,CAAC,CAAE6M,SAAS7M,QAvBT,CAyBbgC,YAAa,CAAC,CAAE6K,SAAS7K,WAzBZ,CA2Bbmc,QAAStR,SAASsR,OA3BL,CA6Bb7P,aAAczB,SAASyB,YA7BV,CA+BbrM,IAAK,CAAC,CAAEA,GA/BK,CAgCbo1B,OAAQxqB,SAAS5K,GAhCJ,CAiCbq1B,OAAUr1B,KAAOA,IAAI05B,SAjCR,CAmCbznE,YAAa24C,SAAS34C,WAnCT,CAqCbspD,gBAAiB3Q,SAAS2Q,eArCb,CAsCbiL,uBAAwBmR,aAAanR,sBAtCxB,CAwCb1K,SAAUlR,SAASkR,QAAT,EAAqBqZ,SAAW,CAxC7B,CAyCbA,SAAUA,QAzCG,CA0CbG,iBAAkBqC,aAAahQ,mBA1ClB,CA4Cbhb,aAAc/B,SAAS+B,YA5CV,CA6CbC,aAAchC,SAASgC,YA7CV,CA8Cb+sB,gBAAiBjsE,SAASisE,eA9Cb,CA+CbC,gBAAiBlsE,SAASksE,eA/Cb,CAiDbtG,aAAcjzB,OAAOw5B,WAAP,CAAmBj8D,MAjDpB,CAkDb61D,eAAgBpzB,OAAOrT,KAAP,CAAapvB,MAlDhB,CAmDb21D,cAAelzB,OAAOy5B,IAAP,CAAYl8D,MAnDd,CAoDb41D,kBAAmBnzB,OAAO05B,QAAP,CAAgBn8D,MApDtB,CAqDb81D,cAAerzB,OAAO25B,IAAP,CAAYp8D,MArDd,CAuDbg2D,kBAAmBqF,WAvDN,CAwDbpF,oBAAqBqF,iBAxDR,CA0Dbte,UAAWhQ,SAASgQ,SA1DP,CA4Db6a,iBAAkB/nE,SAAS2B,SAAT,CAAmBC,OAAnB,EAA8BoG,OAAO9D,aAArC,EAAsDonE,QAAQp7D,MAAR,CAAiB,CA5D5E,CA6Db22D,cAAe7mE,SAAS2B,SAAT,CAAmBkM,IA7DrB,CA+Dbg3D,YAAa7kE,SAAS6kE,WA/DT,CAgEbmD,wBAAyBhoE,SAASgoE,uBAhErB,CAkEb5a,mBAAoBlQ,SAASkQ,kBAlEhB,CAoEbD,UAAWjQ,SAASiQ,SApEP,CAqEb0a,YAAa3qB,SAAS6O,IAAT,GAAkBvvC,UArElB,CAsEbsrD,UAAW5qB,SAAS6O,IAAT,GAAkBxvC,QAtEhB,CAwEb8rD,aAAgBnrB,SAASmrB,YAAT,GAA0BngE,SAA5B,CAA0Cg1C,SAASmrB,YAAnD,CAAkE,KAxEnE,CAAjB,CA4EA,MAAOrrB,WAAP,CAEH,CAtGD,CAwGA,KAAKuvB,cAAL,CAAsB,SAAWrvB,QAAX,CAAqBF,UAArB,CAAkC,CAEpD,GAAIvhC,OAAQ,EAAZ,CAEA,GAAKuhC,WAAWyuB,QAAhB,CAA2B,CAEvBhwD,MAAM9W,IAAN,CAAYq4C,WAAWyuB,QAAvB,EAEH,CAJD,IAIO,CAEHhwD,MAAM9W,IAAN,CAAYu4C,SAAS7I,cAArB,EACA54B,MAAM9W,IAAN,CAAYu4C,SAAS9I,YAArB,EAEH,CAED,GAAK8I,SAASyR,OAAT,GAAqBzmD,SAA1B,CAAsC,CAElC,IAAM,GAAIsyB,KAAV,GAAkB0iB,UAASyR,OAA3B,CAAqC,CAEjClzC,MAAM9W,IAAN,CAAY61B,IAAZ,EACA/e,MAAM9W,IAAN,CAAYu4C,SAASyR,OAAT,CAAkBn0B,IAAlB,CAAZ,EAEH,CAEJ,CAED,IAAM,GAAI1mB,GAAI,CAAd,CAAiBA,EAAI+2D,eAAe36D,MAApC,CAA4C4D,GAA5C,CAAmD,CAE/C2H,MAAM9W,IAAN,CAAYq4C,WAAY6tB,eAAgB/2D,CAAhB,CAAZ,CAAZ,EAEH,CAED2H,MAAM9W,IAAN,CAAYu4C,SAASqQ,eAAT,CAAyB1yC,QAAzB,EAAZ,EAEAY,MAAM9W,IAAN,CAAY3E,SAAS6rE,WAArB,EAEA,MAAOpwD,OAAMqoD,IAAN,EAAP,CAEH,CAtCD,CAwCA,KAAK0I,cAAL,CAAsB,SAAWtvB,QAAX,CAAqB8mB,MAArB,CAA6BhnB,UAA7B,CAAyC2pB,IAAzC,CAAgD,CAElE,GAAI9I,QAAJ,CAEA;AACA,IAAM,GAAIhrC,GAAI,CAAR,CAAW45C,GAAKjP,SAASttD,MAA/B,CAAuC2iB,EAAI45C,EAA3C,CAA+C55C,GAA/C,CAAsD,CAElD,GAAI65C,aAAclP,SAAU3qC,CAAV,CAAlB,CAEA,GAAK65C,YAAY/F,IAAZ,GAAqBA,IAA1B,CAAiC,CAE7B9I,QAAU6O,WAAV,CACA,EAAG7O,QAAQkM,SAAX,CAEA,MAEH,CAEJ,CAED,GAAKlM,UAAY31D,SAAjB,CAA6B,CAEzB21D,QAAU,GAAI6I,aAAJ,CAAkB1mE,QAAlB,CAA4B6uD,UAA5B,CAAwC8X,IAAxC,CAA8CzpB,QAA9C,CAAwD8mB,MAAxD,CAAgEhnB,UAAhE,CAAV,CACAwgB,SAAS74D,IAAT,CAAek5D,OAAf,EAEH,CAED,MAAOA,QAAP,CAEH,CA7BD,CA+BA,KAAK8O,cAAL,CAAsB,SAAW9O,OAAX,CAAqB,CAEvC,GAAK,EAAGA,QAAQkM,SAAX,GAAyB,CAA9B,CAAkC,CAE9B;AACA,GAAIj2D,GAAI0pD,SAASzpD,OAAT,CAAkB8pD,OAAlB,CAAR,CACAL,SAAU1pD,CAAV,EAAgB0pD,SAAUA,SAASttD,MAAT,CAAkB,CAA5B,CAAhB,CACAstD,SAASoP,GAAT,GAEA;AACA/O,QAAQgM,OAAR,GAEH,CAEJ,CAdD,CAgBA;AACA,KAAKrM,QAAL,CAAgBA,QAAhB,CAEH,CAED;;OAIA,QAASqP,gBAAT,EAA2B,CAEvB,GAAI92D,YAAa,GAAIygC,QAAJ,EAAjB,CAEA,QAAStjC,IAAT,CAAclL,MAAd,CAAuB,CAEnB,GAAImoC,KAAMp6B,WAAW7C,GAAX,CAAgBlL,MAAhB,CAAV,CAEA,GAAKmoC,MAAQjoC,SAAb,CAAyB,CAErBioC,IAAM,EAAN,CACAp6B,WAAWpT,GAAX,CAAgBqF,MAAhB,CAAwBmoC,GAAxB,EAEH,CAED,MAAOA,IAAP,CAEH,CAED,QAASt8B,OAAT,CAAiB7L,MAAjB,CAA0B,CAEtB+N,WAAW2iC,MAAX,CAAmB1wC,MAAnB,EAEH,CAED,QAAS/B,OAAT,CAAiB+B,MAAjB,CAAyBu1C,GAAzB,CAA8BnqC,KAA9B,CAAsC,CAElC2C,WAAW7C,GAAX,CAAgBlL,MAAhB,EAA0Bu1C,GAA1B,EAAkCnqC,KAAlC,CAEH,CAED,QAASjG,QAAT,EAAmB,CAEf4I,WAAa,GAAIygC,QAAJ,EAAb,CAEH,CAED,MAAO,CACHtjC,IAAKA,GADF,CAEHW,OAAQA,MAFL,CAGH5N,OAAQA,MAHL,CAIHkH,QAASA,OAJN,CAAP,CAOH,CAED;;OAIA,QAAS2/D,kBAAT,CAA4BpzD,CAA5B,CAA+BX,CAA/B,CAAmC,CAE/B,GAAKW,EAAE+gC,WAAF,GAAkB1hC,EAAE0hC,WAAzB,CAAuC,CAEnC,MAAO/gC,GAAE+gC,WAAF,CAAgB1hC,EAAE0hC,WAAzB,CAEH,CAJD,IAIO,IAAK/gC,EAAEmkD,OAAF,EAAa9kD,EAAE8kD,OAAf,EAA0BnkD,EAAEmkD,OAAF,GAAc9kD,EAAE8kD,OAA/C,CAAyD,CAE5D,MAAOnkD,GAAEmkD,OAAF,CAAUv9D,EAAV,CAAeyY,EAAE8kD,OAAF,CAAUv9D,EAAhC,CAEH,CAJM,IAIA,IAAKoZ,EAAEwjC,QAAF,CAAW58C,EAAX,GAAkByY,EAAEmkC,QAAF,CAAW58C,EAAlC,CAAuC,CAE1C,MAAOoZ,GAAEwjC,QAAF,CAAW58C,EAAX,CAAgByY,EAAEmkC,QAAF,CAAW58C,EAAlC,CAEH,CAJM,IAIA,IAAKoZ,EAAE1X,CAAF,GAAQ+W,EAAE/W,CAAf,CAAmB,CAEtB,MAAO0X,GAAE1X,CAAF,CAAM+W,EAAE/W,CAAf,CAEH,CAJM,IAIA,CAEH,MAAO0X,GAAEpZ,EAAF,CAAOyY,EAAEzY,EAAhB,CAEH,CAEJ,CAED,QAASysE,yBAAT,CAAmCrzD,CAAnC,CAAsCX,CAAtC,CAA0C,CAEtC,GAAKW,EAAE+gC,WAAF,GAAkB1hC,EAAE0hC,WAAzB,CAAuC,CAEnC,MAAO/gC,GAAE+gC,WAAF,CAAgB1hC,EAAE0hC,WAAzB,CAEH,CAAC,GAAK/gC,EAAE1X,CAAF,GAAQ+W,EAAE/W,CAAf,CAAmB,CAEjB,MAAO+W,GAAE/W,CAAF,CAAM0X,EAAE1X,CAAf,CAEH,CAJC,IAIK,CAEH,MAAO0X,GAAEpZ,EAAF,CAAOyY,EAAEzY,EAAhB,CAEH,CAEJ,CAED,QAAS0sE,gBAAT,EAA2B,CAEvB,GAAIC,aAAc,EAAlB,CACA,GAAIC,kBAAmB,CAAvB,CAEA,GAAIC,QAAS,EAAb,CACA,GAAInhB,aAAc,EAAlB,CAEA,QAAS2O,KAAT,EAAgB,CAEZuS,iBAAmB,CAAnB,CAEAC,OAAOj9D,MAAP,CAAgB,CAAhB,CACA87C,YAAY97C,MAAZ,CAAqB,CAArB,CAEH,CAED,QAASvL,KAAT,CAAeqD,MAAf,CAAuB23B,QAAvB,CAAiCud,QAAjC,CAA2Cl7C,CAA3C,CAA8C++C,KAA9C,CAAsD,CAElD,GAAIqsB,YAAaH,YAAaC,gBAAb,CAAjB,CAEA,GAAKE,aAAellE,SAApB,CAAgC,CAE5BklE,WAAa,CACT9sE,GAAI0H,OAAO1H,EADF,CAET0H,OAAQA,MAFC,CAGT23B,SAAUA,QAHD,CAITud,SAAUA,QAJD,CAKT2gB,QAAS3gB,SAAS2gB,OALT,CAMTpjB,YAAazyC,OAAOyyC,WANX,CAOTz4C,EAAGA,CAPM,CAQT++C,MAAOA,KARE,CAAb,CAWAksB,YAAaC,gBAAb,EAAkCE,UAAlC,CAEH,CAfD,IAeO,CAEHA,WAAW9sE,EAAX,CAAgB0H,OAAO1H,EAAvB,CACA8sE,WAAWplE,MAAX,CAAoBA,MAApB,CACAolE,WAAWztC,QAAX,CAAsBA,QAAtB,CACAytC,WAAWlwB,QAAX,CAAsBA,QAAtB,CACAkwB,WAAWvP,OAAX,CAAqB3gB,SAAS2gB,OAA9B,CACAuP,WAAW3yB,WAAX,CAAyBzyC,OAAOyyC,WAAhC,CACA2yB,WAAWprE,CAAX,CAAeA,CAAf,CACAorE,WAAWrsB,KAAX,CAAmBA,KAAnB,CAEH,CAED,CAAE7D,SAAS8O,WAAT,GAAyB,IAAzB,CAAgCA,WAAhC,CAA8CmhB,MAAhD,EAAyDxoE,IAAzD,CAA+DyoE,UAA/D,EAEAF,mBAEH,CAED,QAASlpB,KAAT,EAAgB,CAEZ,GAAKmpB,OAAOj9D,MAAP,CAAgB,CAArB,CAAyBi9D,OAAOnpB,IAAP,CAAa8oB,iBAAb,EACzB,GAAK9gB,YAAY97C,MAAZ,CAAqB,CAA1B,CAA8B87C,YAAYhI,IAAZ,CAAkB+oB,wBAAlB,EAEjC,CAED,MAAO,CACHI,OAAQA,MADL,CAEHnhB,YAAaA,WAFV,CAIH2O,KAAMA,IAJH,CAKHh2D,KAAMA,IALH,CAOHq/C,KAAMA,IAPH,CAAP,CAUH,CAED,QAASqpB,iBAAT,EAA4B,CAExB,GAAIC,OAAQ,EAAZ,CAEA,QAASp6D,IAAT,CAAcpT,KAAd,CAAqBC,MAArB,CAA8B,CAE1B,GAAImlD,MAAOplD,MAAMQ,EAAN,CAAW,GAAX,CAAiBP,OAAOO,EAAnC,CACA,GAAIitE,MAAOD,MAAOpoB,IAAP,CAAX,CAEA,GAAKqoB,OAASrlE,SAAd,CAA0B,CAEtB;AAEAqlE,KAAO,GAAIP,gBAAJ,EAAP,CACAM,MAAOpoB,IAAP,EAAgBqoB,IAAhB,CAEH,CAED,MAAOA,KAAP,CAEH,CAED,QAASpgE,QAAT,EAAmB,CAEfmgE,MAAQ,EAAR,CAEH,CAED,MAAO,CACHp6D,IAAKA,GADF,CAEH/F,QAASA,OAFN,CAAP,CAKH,CAED;;OAIA,QAASqgE,cAAT,EAAyB,CAErB,GAAI76B,QAAS,EAAb,CAEA,MAAO,CAEHz/B,IAAK,aAAWu6D,KAAX,CAAmB,CAEpB,GAAK96B,OAAQ86B,MAAMntE,EAAd,IAAuB4H,SAA5B,CAAwC,CAEpC,MAAOyqC,QAAQ86B,MAAMntE,EAAd,CAAP,CAEH,CAED,GAAIktC,SAAJ,CAEA,OAASigC,MAAM5/D,IAAf,EAEI,IAAK,kBAAL,CACI2/B,SAAW,CACP3J,UAAW,GAAIz7B,QAAJ,EADJ,CAEPpE,MAAO,GAAIiqC,MAAJ,EAFA,CAIPrrC,OAAQ,KAJD,CAKPkwC,WAAY,CALL,CAMPC,aAAc,CANP,CAOPC,cAAe,GAAIzkC,QAAJ,EAPR,CAAX,CASA,MAEJ,IAAK,WAAL,CACIi/B,SAAW,CACP3rC,SAAU,GAAIuG,QAAJ,EADH,CAEPy7B,UAAW,GAAIz7B,QAAJ,EAFJ,CAGPpE,MAAO,GAAIiqC,MAAJ,EAHA,CAIP3+B,SAAU,CAJH,CAKP8jC,QAAS,CALF,CAMPC,YAAa,CANN,CAOPC,MAAO,CAPA,CASP1wC,OAAQ,KATD,CAUPkwC,WAAY,CAVL,CAWPC,aAAc,CAXP,CAYPC,cAAe,GAAIzkC,QAAJ,EAZR,CAAX,CAcA,MAEJ,IAAK,YAAL,CACIi/B,SAAW,CACP3rC,SAAU,GAAIuG,QAAJ,EADH,CAEPpE,MAAO,GAAIiqC,MAAJ,EAFA,CAGP3+B,SAAU,CAHH,CAIPgkC,MAAO,CAJA,CAMP1wC,OAAQ,KAND,CAOPkwC,WAAY,CAPL,CAQPC,aAAc,CARP,CASPC,cAAe,GAAIzkC,QAAJ,EATR,CAUPmlC,iBAAkB,CAVX,CAWPC,gBAAiB,IAXV,CAAX,CAaA,MAEJ,IAAK,iBAAL,CACInG,SAAW,CACP3J,UAAW,GAAIz7B,QAAJ,EADJ,CAEP2rC,SAAU,GAAI9F,MAAJ,EAFH,CAGP+F,YAAa,GAAI/F,MAAJ,EAHN,CAAX,CAKA,MAEJ,IAAK,eAAL,CACIT,SAAW,CACPxpC,MAAO,GAAIiqC,MAAJ,EADA,CAEPpsC,SAAU,GAAIuG,QAAJ,EAFH,CAGPslE,UAAW,GAAItlE,QAAJ,EAHJ,CAIPulE,WAAY,GAAIvlE,QAAJ,EACZ;AALO,CAAX,CAOA,MA/DR,CAmEAuqC,OAAQ86B,MAAMntE,EAAd,EAAqBktC,QAArB,CAEA,MAAOA,SAAP,CAEH,CAnFE,CAAP,CAuFH,CAED,GAAIte,OAAQ,CAAZ,CAEA,QAAS0+C,YAAT,EAAuB,CAEnB,GAAIvwB,OAAQ,GAAImwB,cAAJ,EAAZ,CAEA,GAAIpiE,OAAQ,CAER9K,GAAI4uB,OAFI,CAIRg2B,KAAM,EAJE,CAMR2oB,QAAS,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAND,CAOR1B,YAAa,EAPL,CAQRl5B,qBAAsB,EARd,CASRC,wBAAyB,EATjB,CAURk5B,KAAM,EAVE,CAWR74B,cAAe,EAXP,CAYRC,iBAAkB,EAZV,CAaR64B,SAAU,EAbF,CAcR/sC,MAAO,EAdC,CAeRsU,eAAgB,EAfR,CAgBRC,kBAAmB,EAhBX,CAiBRy4B,KAAM,EAjBE,CAAZ,CAqBA,GAAIwB,SAAU,GAAI1lE,QAAJ,EAAd,CACA,GAAIkxB,SAAU,GAAI/P,QAAJ,EAAd,CACA,GAAIwkD,UAAW,GAAIxkD,QAAJ,EAAf,CAEA,QAASykD,MAAT,CAAgBr7B,MAAhB,CAAwB24B,OAAxB,CAAiCvrE,MAAjC,CAA0C,CAEtC,GAAI01B,GAAI,CAAR,CAAW2D,EAAI,CAAf,CAAkBrgB,EAAI,CAAtB,CAEA,GAAIk1D,mBAAoB,CAAxB,CACA,GAAIC,aAAc,CAAlB,CACA,GAAIC,YAAa,CAAjB,CACA,GAAIC,gBAAiB,CAArB,CACA,GAAIC,YAAa,CAAjB,CAEA,GAAI3S,YAAa37D,OAAO49C,kBAAxB,CAEA,IAAM,GAAI7pC,GAAI,CAAR,CAAW6H,EAAIg3B,OAAOziC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAI25D,OAAQ96B,OAAQ7+B,CAAR,CAAZ,CAEA,GAAI9P,OAAQypE,MAAMzpE,KAAlB,CACA,GAAIsqE,WAAYb,MAAMa,SAAtB,CACA,GAAIh/D,UAAWm+D,MAAMn+D,QAArB,CAEA,GAAI3N,WAAc8rE,MAAM7qE,MAAN,EAAgB6qE,MAAM7qE,MAAN,CAAautC,GAA/B,CAAuCs9B,MAAM7qE,MAAN,CAAautC,GAAb,CAAiBhT,OAAxD,CAAkE,IAAlF,CAEA,GAAKswC,MAAMc,cAAX,CAA4B,CAExB94C,GAAKzxB,MAAMyxB,CAAN,CAAU64C,SAAf,CACAl1C,GAAKp1B,MAAMo1B,CAAN,CAAUk1C,SAAf,CACAv1D,GAAK/U,MAAM+U,CAAN,CAAUu1D,SAAf,CAEH,CAND,IAMO,IAAKb,MAAMe,kBAAX,CAAgC,CAEnC,GAAIhhC,UAAW6P,MAAMnqC,GAAN,CAAWu6D,KAAX,CAAf,CAEAjgC,SAASxpC,KAAT,CAAe+G,IAAf,CAAqB0iE,MAAMzpE,KAA3B,EAAmCyL,cAAnC,CAAmDg+D,MAAMa,SAAzD,EACA9gC,SAAS3J,SAAT,CAAmB9K,qBAAnB,CAA0C00C,MAAM91C,WAAhD,EACAm2C,QAAQ/0C,qBAAR,CAA+B00C,MAAMlqE,MAAN,CAAao0B,WAA5C,EACA6V,SAAS3J,SAAT,CAAmB73B,GAAnB,CAAwB8hE,OAAxB,EACAtgC,SAAS3J,SAAT,CAAmBhM,kBAAnB,CAAuC6jC,UAAvC,EAEAluB,SAAS5qC,MAAT,CAAkB6qE,MAAM/qE,UAAxB,CAEA,GAAK+qE,MAAM/qE,UAAX,CAAwB,CAEpB,GAAIE,QAAS6qE,MAAM7qE,MAAnB,CAEA4qC,SAASsF,UAAT,CAAsBlwC,OAAO6rE,IAA7B,CACAjhC,SAASuF,YAAT,CAAwBnwC,OAAO6J,MAA/B,CACA+gC,SAASwF,aAAT,CAAyBpwC,OAAOO,OAAhC,CAEH,CAEDiI,MAAM6nC,oBAAN,CAA4Bg7B,iBAA5B,EAAkDtsE,SAAlD,CACAyJ,MAAM8nC,uBAAN,CAA+B+6B,iBAA/B,EAAqDR,MAAM7qE,MAAN,CAAa0N,MAAlE,CACAlF,MAAM+gE,WAAN,CAAmB8B,iBAAnB,EAAyCzgC,QAAzC,CAEAygC,oBAEH,CA5BM,IA4BA,IAAKR,MAAMiB,WAAX,CAAyB,CAE5B,GAAIlhC,UAAW6P,MAAMnqC,GAAN,CAAWu6D,KAAX,CAAf,CAEAjgC,SAAS3rC,QAAT,CAAkBk3B,qBAAlB,CAAyC00C,MAAM91C,WAA/C,EACA6V,SAAS3rC,QAAT,CAAkButB,YAAlB,CAAgCssC,UAAhC,EAEAluB,SAASxpC,KAAT,CAAe+G,IAAf,CAAqB/G,KAArB,EAA6ByL,cAA7B,CAA6C6+D,SAA7C,EACA9gC,SAASl+B,QAAT,CAAoBA,QAApB,CAEAk+B,SAAS3J,SAAT,CAAmB9K,qBAAnB,CAA0C00C,MAAM91C,WAAhD,EACAm2C,QAAQ/0C,qBAAR,CAA+B00C,MAAMlqE,MAAN,CAAao0B,WAA5C,EACA6V,SAAS3J,SAAT,CAAmB73B,GAAnB,CAAwB8hE,OAAxB,EACAtgC,SAAS3J,SAAT,CAAmBhM,kBAAnB,CAAuC6jC,UAAvC,EAEAluB,SAAS4F,OAAT,CAAmB5tC,KAAKyS,GAAL,CAAUw1D,MAAMv+D,KAAhB,CAAnB,CACAs+B,SAAS6F,WAAT,CAAuB7tC,KAAKyS,GAAL,CAAUw1D,MAAMv+D,KAAN,EAAgB,EAAIu+D,MAAMkB,QAA1B,CAAV,CAAvB,CACAnhC,SAAS8F,KAAT,CAAmBm6B,MAAMn+D,QAAN,GAAmB,CAArB,CAA2B,GAA3B,CAAiCm+D,MAAMn6B,KAAxD,CAEA9F,SAAS5qC,MAAT,CAAkB6qE,MAAM/qE,UAAxB,CAEA,GAAK+qE,MAAM/qE,UAAX,CAAwB,CAEpB,GAAIE,QAAS6qE,MAAM7qE,MAAnB,CAEA4qC,SAASsF,UAAT,CAAsBlwC,OAAO6rE,IAA7B,CACAjhC,SAASuF,YAAT,CAAwBnwC,OAAO6J,MAA/B,CACA+gC,SAASwF,aAAT,CAAyBpwC,OAAOO,OAAhC,CAEH,CAEDiI,MAAMmoC,aAAN,CAAqB46B,UAArB,EAAoCxsE,SAApC,CACAyJ,MAAMooC,gBAAN,CAAwB26B,UAAxB,EAAuCV,MAAM7qE,MAAN,CAAa0N,MAApD,CACAlF,MAAMghE,IAAN,CAAY+B,UAAZ,EAA2B3gC,QAA3B,CAEA2gC,aAEH,CArCM,IAqCA,IAAKV,MAAMmB,eAAX,CAA6B,CAEhC,GAAIphC,UAAW6P,MAAMnqC,GAAN,CAAWu6D,KAAX,CAAf,CAEA;AACA;AAEA;AACAjgC,SAASxpC,KAAT,CAAe+G,IAAf,CAAqB/G,KAArB,EAA6ByL,cAA7B,CAA6C6+D,SAA7C,EAEA9gC,SAAS3rC,QAAT,CAAkBk3B,qBAAlB,CAAyC00C,MAAM91C,WAA/C,EACA6V,SAAS3rC,QAAT,CAAkButB,YAAlB,CAAgCssC,UAAhC,EAEA;AACAqS,SAASpjD,QAAT,GACA2O,QAAQvuB,IAAR,CAAc0iE,MAAM91C,WAApB,EACA2B,QAAQtM,WAAR,CAAqB0uC,UAArB,EACAqS,SAAS5iD,eAAT,CAA0BmO,OAA1B,EAEAkU,SAASkgC,SAAT,CAAmB/qE,GAAnB,CAAwB8qE,MAAMrqE,KAAN,CAAc,GAAtC,CAA2C,GAA3C,CAAgD,GAAhD,EACAoqC,SAASmgC,UAAT,CAAoBhrE,GAApB,CAAyB,GAAzB,CAA8B8qE,MAAMpqE,MAAN,CAAe,GAA7C,CAAkD,GAAlD,EAEAmqC,SAASkgC,SAAT,CAAmBt+C,YAAnB,CAAiC2+C,QAAjC,EACAvgC,SAASmgC,UAAT,CAAoBv+C,YAApB,CAAkC2+C,QAAlC,EAEA;AACA;AAEA3iE,MAAMihE,QAAN,CAAgB+B,cAAhB,EAAmC5gC,QAAnC,CAEA4gC,iBAEH,CAhCM,IAgCA,IAAKX,MAAMoB,YAAX,CAA0B,CAE7B,GAAIrhC,UAAW6P,MAAMnqC,GAAN,CAAWu6D,KAAX,CAAf,CAEAjgC,SAAS3rC,QAAT,CAAkBk3B,qBAAlB,CAAyC00C,MAAM91C,WAA/C,EACA6V,SAAS3rC,QAAT,CAAkButB,YAAlB,CAAgCssC,UAAhC,EAEAluB,SAASxpC,KAAT,CAAe+G,IAAf,CAAqB0iE,MAAMzpE,KAA3B,EAAmCyL,cAAnC,CAAmDg+D,MAAMa,SAAzD,EACA9gC,SAASl+B,QAAT,CAAoBm+D,MAAMn+D,QAA1B,CACAk+B,SAAS8F,KAAT,CAAmBm6B,MAAMn+D,QAAN,GAAmB,CAArB,CAA2B,GAA3B,CAAiCm+D,MAAMn6B,KAAxD,CAEA9F,SAAS5qC,MAAT,CAAkB6qE,MAAM/qE,UAAxB,CAEA,GAAK+qE,MAAM/qE,UAAX,CAAwB,CAEpB,GAAIE,QAAS6qE,MAAM7qE,MAAnB,CAEA4qC,SAASsF,UAAT,CAAsBlwC,OAAO6rE,IAA7B,CACAjhC,SAASuF,YAAT,CAAwBnwC,OAAO6J,MAA/B,CACA+gC,SAASwF,aAAT,CAAyBpwC,OAAOO,OAAhC,CACAqqC,SAASkG,gBAAT,CAA4B9wC,OAAO7C,MAAP,CAAckD,IAA1C,CACAuqC,SAASmG,eAAT,CAA2B/wC,OAAO7C,MAAP,CAAc2yB,GAAzC,CAEH,CAEDtnB,MAAMwoC,cAAN,CAAsBs6B,WAAtB,EAAsCvsE,SAAtC,CACAyJ,MAAMyoC,iBAAN,CAAyBq6B,WAAzB,EAAyCT,MAAM7qE,MAAN,CAAa0N,MAAtD,CACAlF,MAAMk0B,KAAN,CAAa4uC,WAAb,EAA6B1gC,QAA7B,CAEA0gC,cAEH,CA/BM,IA+BA,IAAKT,MAAMqB,iBAAX,CAA+B,CAElC,GAAIthC,UAAW6P,MAAMnqC,GAAN,CAAWu6D,KAAX,CAAf,CAEAjgC,SAAS3J,SAAT,CAAmB9K,qBAAnB,CAA0C00C,MAAM91C,WAAhD,EACA6V,SAAS3J,SAAT,CAAmBhM,kBAAnB,CAAuC6jC,UAAvC,EACAluB,SAAS3J,SAAT,CAAmBvb,SAAnB,GAEAklB,SAASuG,QAAT,CAAkBhpC,IAAlB,CAAwB0iE,MAAMzpE,KAA9B,EAAsCyL,cAAtC,CAAsD6+D,SAAtD,EACA9gC,SAASwG,WAAT,CAAqBjpC,IAArB,CAA2B0iE,MAAMz5B,WAAjC,EAA+CvkC,cAA/C,CAA+D6+D,SAA/D,EAEAljE,MAAMkhE,IAAN,CAAY+B,UAAZ,EAA2B7gC,QAA3B,CAEA6gC,aAEH,CAEJ,CAEDjjE,MAAMyiE,OAAN,CAAe,CAAf,EAAqBp4C,CAArB,CACArqB,MAAMyiE,OAAN,CAAe,CAAf,EAAqBz0C,CAArB,CACAhuB,MAAMyiE,OAAN,CAAe,CAAf,EAAqB90D,CAArB,CAEA3N,MAAM+gE,WAAN,CAAkBj8D,MAAlB,CAA2B+9D,iBAA3B,CACA7iE,MAAMghE,IAAN,CAAWl8D,MAAX,CAAoBi+D,UAApB,CACA/iE,MAAMihE,QAAN,CAAen8D,MAAf,CAAwBk+D,cAAxB,CACAhjE,MAAMk0B,KAAN,CAAYpvB,MAAZ,CAAqBg+D,WAArB,CACA9iE,MAAMkhE,IAAN,CAAWp8D,MAAX,CAAoBm+D,UAApB,CAEAjjE,MAAM85C,IAAN,CAAa95C,MAAM9K,EAAN,CAAW,GAAX,CAAiB2tE,iBAAjB,CAAqC,GAArC,CAA2CC,WAA3C,CAAyD,GAAzD,CAA+DC,UAA/D,CAA4E,GAA5E,CAAkFC,cAAlF,CAAmG,GAAnG,CAAyGC,UAAzG,CAAsH,GAAtH,CAA4H/C,QAAQp7D,MAAjJ,CAEH,CAED,MAAO,CACH89D,MAAOA,KADJ,CAEH5iE,MAAOA,KAFJ,CAAP,CAKH,CAED;;OAIA,QAAS2jE,iBAAT,EAA4B,CAExB,GAAIp8B,QAAS,GAAIi7B,YAAJ,EAAb,CAEA,GAAIoB,aAAc,EAAlB,CACA,GAAIC,cAAe,EAAnB,CACA,GAAIC,cAAe,EAAnB,CAEA,QAASvU,KAAT,EAAgB,CAEZqU,YAAY9+D,MAAZ,CAAqB,CAArB,CACA++D,aAAa/+D,MAAb,CAAsB,CAAtB,CACAg/D,aAAah/D,MAAb,CAAsB,CAAtB,CAEH,CAED,QAASi/D,UAAT,CAAoB1B,KAApB,CAA4B,CAExBuB,YAAYrqE,IAAZ,CAAkB8oE,KAAlB,EAEH,CAED,QAAS2B,WAAT,CAAqBlvE,WAArB,CAAmC,CAE/B+uE,aAAatqE,IAAb,CAAmBzE,WAAnB,EAEH,CAED,QAASmvE,WAAT,CAAqBnvE,WAArB,CAAmC,CAE/BgvE,aAAavqE,IAAb,CAAmBzE,WAAnB,EAEH,CAED,QAASovE,YAAT,CAAsBvvE,MAAtB,CAA+B,CAE3B4yC,OAAOq7B,KAAP,CAAcgB,WAAd,CAA2BC,YAA3B,CAAyClvE,MAAzC,EAEH,CAED,GAAIqL,OAAQ,CACR4jE,YAAaA,WADL,CAERC,aAAcA,YAFN,CAGRC,aAAcA,YAHN,CAKRv8B,OAAQA,MALA,CAAZ,CAQA,MAAO,CACHgoB,KAAMA,IADH,CAEHvvD,MAAOA,KAFJ,CAGHkkE,YAAaA,WAHV,CAKHH,UAAWA,SALR,CAMHC,WAAYA,UANT,CAOHC,WAAYA,UAPT,CAAP,CAUH,CAED,QAASE,kBAAT,EAA6B,CAEzB,GAAIC,cAAe,EAAnB,CAEA,QAASt8D,IAAT,CAAcpT,KAAd,CAAqBC,MAArB,CAA8B,CAE1B,GAAImlD,MAAOplD,MAAMQ,EAAN,CAAW,GAAX,CAAiBP,OAAOO,EAAnC,CAEA,GAAImvE,aAAcD,aAActqB,IAAd,CAAlB,CAEA,GAAKuqB,cAAgBvnE,SAArB,CAAiC,CAE7BunE,YAAc,GAAIV,iBAAJ,EAAd,CACAS,aAActqB,IAAd,EAAuBuqB,WAAvB,CAEH,CAED,MAAOA,YAAP,CAEH,CAED,QAAStiE,QAAT,EAAmB,CAEfqiE,aAAe,EAAf,CAEH,CAED,MAAO,CACHt8D,IAAKA,GADF,CAEH/F,QAASA,OAFN,CAAP,CAKH,CAED;;;;;;;;;;;;;;;;;;;;;OAuBA,QAASg9D,kBAAT,CAA4BntB,UAA5B,CAAyC,CAErC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAKw6D,YAAL,CAAoBlkD,iBAApB,CAEA,KAAKiqC,QAAL,CAAgB,KAAhB,CACA,KAAKnP,YAAL,CAAoB,KAApB,CAEA,KAAK9O,GAAL,CAAW,IAAX,CAEA,KAAKE,QAAL,CAAgB,IAAhB,CAEA,KAAKwB,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKic,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAK3b,GAAL,CAAW,KAAX,CACA,KAAKK,MAAL,CAAc,KAAd,CAEA,KAAK6a,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDmtB,kBAAkBx3D,SAAlB,CAA8BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA9B,CACAw3D,kBAAkBx3D,SAAlB,CAA4BI,WAA5B,CAA0Co3D,iBAA1C,CAEAA,kBAAkBx3D,SAAlB,CAA4B+8D,mBAA5B,CAAkD,IAAlD,CAEAvF,kBAAkBx3D,SAAlB,CAA4B5H,IAA5B,CAAmC,SAAW0J,MAAX,CAAoB,CAEnDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAK4zD,YAAL,CAAoB5zD,OAAO4zD,YAA3B,CAEA,KAAKja,QAAL,CAAgB35C,OAAO25C,QAAvB,CACA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CAEA,KAAK9O,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKE,QAAL,CAAgB57B,OAAO47B,QAAvB,CAEA,KAAKwB,eAAL,CAAuBp9B,OAAOo9B,eAA9B,CACA,KAAKC,iBAAL,CAAyBr9B,OAAOq9B,iBAAhC,CACA,KAAKC,gBAAL,CAAwBt9B,OAAOs9B,gBAA/B,CAEA,KAAKic,SAAL,CAAiBv5C,OAAOu5C,SAAxB,CACA,KAAKC,kBAAL,CAA0Bx5C,OAAOw5C,kBAAjC,CAEA,MAAO,KAAP,CAEH,CAtBD,CAwBA;;;;;;;;;;;;;;;;;;;;;OAuBA,QAASmc,qBAAT,CAA+BptB,UAA/B,CAA4C,CAExC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,sBAAZ,CAEA,KAAK2nC,iBAAL,CAAyB,GAAIptC,QAAJ,EAAzB,CACA,KAAKqtC,YAAL,CAAoB,CAApB,CACA,KAAKC,WAAL,CAAmB,IAAnB,CAEA,KAAK0Y,QAAL,CAAgB,KAAhB,CACA,KAAKnP,YAAL,CAAoB,KAApB,CAEA,KAAK9O,GAAL,CAAW,IAAX,CAEA,KAAKE,QAAL,CAAgB,IAAhB,CAEA,KAAKwB,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKO,GAAL,CAAW,KAAX,CACA,KAAKK,MAAL,CAAc,KAAd,CAEA,KAAK6a,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDotB,qBAAqBz3D,SAArB,CAAiCC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAAjC,CACAy3D,qBAAqBz3D,SAArB,CAA+BI,WAA/B,CAA6Cq3D,oBAA7C,CAEAA,qBAAqBz3D,SAArB,CAA+Bg9D,sBAA/B,CAAwD,IAAxD,CAEAvF,qBAAqBz3D,SAArB,CAA+B5H,IAA/B,CAAsC,SAAW0J,MAAX,CAAoB,CAEtDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAK+gC,iBAAL,CAAuBzqC,IAAvB,CAA6B0J,OAAO+gC,iBAApC,EACA,KAAKC,YAAL,CAAoBhhC,OAAOghC,YAA3B,CACA,KAAKC,WAAL,CAAmBjhC,OAAOihC,WAA1B,CAEA,KAAK0Y,QAAL,CAAgB35C,OAAO25C,QAAvB,CACA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CAEA,KAAK9O,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKE,QAAL,CAAgB57B,OAAO47B,QAAvB,CAEA,KAAKwB,eAAL,CAAuBp9B,OAAOo9B,eAA9B,CACA,KAAKC,iBAAL,CAAyBr9B,OAAOq9B,iBAAhC,CACA,KAAKC,gBAAL,CAAwBt9B,OAAOs9B,gBAA/B,CAEA,MAAO,KAAP,CAEH,CArBD,CAuBA;;;OAKA,QAAS69B,eAAT,CAAyBC,SAAzB,CAAoCC,QAApC,CAA8C3W,cAA9C,CAA+D,CAE3D,GAAI4W,UAAW,GAAIvrC,QAAJ,EAAf,CACIwrC,kBAAoB,GAAIzmD,QAAJ,EADxB,CAGI0mD,eAAiB,GAAI1hE,QAAJ,EAHrB,CAII2hE,kBAAoB,GAAI3hE,QAAJ,CAAa4qD,cAAb,CAA6BA,cAA7B,CAJxB,CAMIgX,YAAc,GAAI/nE,QAAJ,EANlB,CAOIgoE,oBAAsB,GAAIhoE,QAAJ,EAP1B,CASIioE,cAAgB,CATpB,CAUIC,cAAgB,CAVpB,CAYIC,0BAA4B,CAAEF,cAAgBC,aAAlB,EAAoC,CAZpE,CAcIE,gBAAkB,GAAIt6D,MAAJ,CAAWq6D,yBAAX,CAdtB,CAeIE,mBAAqB,GAAIv6D,MAAJ,CAAWq6D,yBAAX,CAfzB,CAiBIG,eAAiB,EAjBrB,CAmBA,GAAI7jB,YAAa,CAAE,EAAGtwC,QAAL,CAAe,EAAGD,SAAlB,CAA6B,EAAGE,UAAhC,CAAjB,CAEA,GAAIm0D,gBAAiB,CACjB,GAAIvoE,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CADiB,CACO,GAAIA,QAAJ,CAAa,CAAE,CAAf,CAAkB,CAAlB,CAAqB,CAArB,CADP,CACiC,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CADjC,CAEjB,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAE,CAArB,CAFiB,CAES,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAFT,CAEiC,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAE,CAAlB,CAAqB,CAArB,CAFjC,CAArB,CAKA,GAAIwoE,SAAU,CACV,GAAIxoE,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CADU,CACc,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CADd,CACsC,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CADtC,CAEV,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAFU,CAEc,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAFd,CAEsC,GAAIA,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAE,CAArB,CAFtC,CAAd,CAKA,GAAIyoE,iBAAkB,CAClB,GAAIv0C,QAAJ,EADkB,CACH,GAAIA,QAAJ,EADG,CACY,GAAIA,QAAJ,EADZ,CAElB,GAAIA,QAAJ,EAFkB,CAEH,GAAIA,QAAJ,EAFG,CAEY,GAAIA,QAAJ,EAFZ,CAAtB,CAKA;AAEA,IAAM,GAAIxoB,GAAI,CAAd,CAAiBA,IAAMy8D,yBAAvB,CAAkD,EAAGz8D,CAArD,CAAyD,CAErD,GAAIg9D,aAAc,CAAEh9D,EAAIu8D,aAAN,IAA0B,CAA5C,CACA,GAAIU,aAAc,CAAEj9D,EAAIw8D,aAAN,IAA0B,CAA5C,CAEA,GAAIU,eAAgB,GAAI7G,kBAAJ,CAAuB,CAEvC9B,aAAcjkD,gBAFyB,CAIvC66B,aAAc6xB,WAJyB,CAKvC1iB,SAAU2iB,WAL6B,CAAvB,CAApB,CASAP,gBAAiB18D,CAAjB,EAAuBk9D,aAAvB,CAEA;AAEA,GAAIC,kBAAmB,GAAI7G,qBAAJ,CAA0B,CAE7CnrB,aAAc6xB,WAF+B,CAG7C1iB,SAAU2iB,WAHmC,CAA1B,CAAvB,CAOAN,mBAAoB38D,CAApB,EAA0Bm9D,gBAA1B,CAEH,CAED;AAEA,GAAInmE,OAAQ,IAAZ,CAEA,KAAKlJ,OAAL,CAAe,KAAf,CAEA,KAAKsvE,UAAL,CAAkB,IAAlB,CACA,KAAKroB,WAAL,CAAmB,KAAnB,CAEA,KAAKh7C,IAAL,CAAYuO,YAAZ,CAEA,KAAKlW,MAAL,CAAc,SAAWysC,MAAX,CAAmB7yC,KAAnB,CAA0BC,MAA1B,CAAmC,CAE7C,GAAK+K,MAAMlJ,OAAN,GAAkB,KAAvB,CAA+B,OAC/B,GAAKkJ,MAAMomE,UAAN,GAAqB,KAArB,EAA8BpmE,MAAM+9C,WAAN,GAAsB,KAAzD,CAAiE,OAEjE,GAAKlW,OAAOziC,MAAP,GAAkB,CAAvB,CAA2B,OAE3B;AACA,GAAIihE,KAAMtB,UAAUruE,OAApB,CACA,GAAI4vE,QAASvB,UAAUzkE,KAAvB,CAEA;AACAgmE,OAAO13B,OAAP,CAAgBy3B,IAAIE,KAApB,EACAD,OAAO76B,OAAP,CAAevyC,KAAf,CAAqB+yD,QAArB,CAA+B,CAA/B,CAAkC,CAAlC,CAAqC,CAArC,CAAwC,CAAxC,EACAqa,OAAO76B,OAAP,CAAerB,KAAf,CAAqBo8B,OAArB,CAA8B,IAA9B,EACAF,OAAOG,cAAP,CAAuB,KAAvB,EAEA;AAEA,GAAIC,UAAJ,CAEA,IAAM,GAAI19D,GAAI,CAAR,CAAW6qB,GAAKgU,OAAOziC,MAA7B,CAAqC4D,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhD,GAAI25D,OAAQ96B,OAAQ7+B,CAAR,CAAZ,CACA,GAAIlR,QAAS6qE,MAAM7qE,MAAnB,CACA,GAAIisE,cAAepB,OAASA,MAAMoB,YAAlC,CAEA,GAAKjsE,SAAWsF,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,uBAAd,CAAuCg9D,KAAvC,CAA8C,gBAA9C,EACA,SAEH,CAED,GAAIgE,cAAe7uE,OAAO7C,MAA1B,CAEAkwE,eAAellE,IAAf,CAAqBnI,OAAOO,OAA5B,EACA8sE,eAAe1jE,GAAf,CAAoB2jE,iBAApB,EAEA,GAAKrB,YAAL,CAAoB,CAEhB,GAAI6C,SAAUzB,eAAenuE,CAA7B,CACA,GAAI6vE,UAAW1B,eAAeluE,CAA9B,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA8uE,gBAAiB,CAAjB,EAAqBluE,GAArB,CAA0B+uE,QAAU,CAApC,CAAuCC,QAAvC,CAAiDD,OAAjD,CAA0DC,QAA1D,EACA;AACAd,gBAAiB,CAAjB,EAAqBluE,GAArB,CAA0B,CAA1B,CAA6BgvE,QAA7B,CAAuCD,OAAvC,CAAgDC,QAAhD,EACA;AACAd,gBAAiB,CAAjB,EAAqBluE,GAArB,CAA0B+uE,QAAU,CAApC,CAAuCC,QAAvC,CAAiDD,OAAjD,CAA0DC,QAA1D,EACA;AACAd,gBAAiB,CAAjB,EAAqBluE,GAArB,CAA0B+uE,OAA1B,CAAmCC,QAAnC,CAA6CD,OAA7C,CAAsDC,QAAtD,EACA;AACAd,gBAAiB,CAAjB,EAAqBluE,GAArB,CAA0B+uE,QAAU,CAApC,CAAuC,CAAvC,CAA0CA,OAA1C,CAAmDC,QAAnD,EACA;AACAd,gBAAiB,CAAjB,EAAqBluE,GAArB,CAA0B+uE,OAA1B,CAAmC,CAAnC,CAAsCA,OAAtC,CAA+CC,QAA/C,EAEA1B,eAAenuE,CAAf,EAAoB,GAApB,CACAmuE,eAAeluE,CAAf,EAAoB,GAApB,CAEH,CAED,GAAKa,OAAOutC,GAAP,GAAe,IAApB,CAA2B,CAEvB,GAAIyhC,MAAO,CAAEx3C,UAAWta,aAAb,CAA4Bqa,UAAWra,aAAvC,CAAsDua,OAAQnZ,UAA9D,CAAX,CAEAte,OAAOutC,GAAP,CAAa,GAAIrT,kBAAJ,CAAuBmzC,eAAenuE,CAAtC,CAAyCmuE,eAAeluE,CAAxD,CAA2D6vE,IAA3D,CAAb,CACAhvE,OAAOutC,GAAP,CAAWhT,OAAX,CAAmB3C,IAAnB,CAA0BizC,MAAMjzC,IAAN,CAAa,YAAvC,CAEAi3C,aAAaxmE,sBAAb,GAEH,CAED,GAAKrI,OAAOivE,iBAAZ,CAAgC,CAE5BjvE,OAAOqD,MAAP,CAAewnE,KAAf,EAEH,CAED,GAAI9rE,WAAYiB,OAAOutC,GAAvB,CACA,GAAI2hC,cAAelvE,OAAO0N,MAA1B,CAEA8/D,oBAAoBr3C,qBAApB,CAA2C00C,MAAM91C,WAAjD,EACA85C,aAAa5vE,QAAb,CAAsBkJ,IAAtB,CAA4BqlE,mBAA5B,EAEA,GAAKvB,YAAL,CAAoB,CAEhB2C,UAAY,CAAZ,CAEA;AACA;AAEAM,aAAaxhD,eAAb,CAA8B,CAAE8/C,oBAAoBtuE,CAApD,CAAuD,CAAEsuE,oBAAoBruE,CAA7E,CAAgF,CAAEquE,oBAAoBpuE,CAAtG,EAEH,CATD,IASO,CAEHwvE,UAAY,CAAZ,CAEArB,YAAYp3C,qBAAZ,CAAmC00C,MAAMlqE,MAAN,CAAao0B,WAAhD,EACA85C,aAAa5kE,MAAb,CAAqBsjE,WAArB,EACAsB,aAAazxC,iBAAb,GAEA;AAEA8xC,aAAanvE,GAAb,CACI,GADJ,CACS,GADT,CACc,GADd,CACmB,GADnB,CAEI,GAFJ,CAES,GAFT,CAEc,GAFd,CAEmB,GAFnB,CAGI,GAHJ,CAGS,GAHT,CAGc,GAHd,CAGmB,GAHnB,CAII,GAJJ,CAIS,GAJT,CAIc,GAJd,CAImB,GAJnB,EAOAmvE,aAAaxqD,QAAb,CAAuBmqD,aAAa/5C,gBAApC,EACAo6C,aAAaxqD,QAAb,CAAuBmqD,aAAa9zB,kBAApC,EAEH,CAEDkyB,UAAUkC,eAAV,CAA2BpwE,SAA3B,EACAkuE,UAAU5Y,KAAV,GAEA;AACA;AAEA,IAAM,GAAIlX,MAAO,CAAjB,CAAoBA,KAAOyxB,SAA3B,CAAsCzxB,MAAtC,CAAgD,CAE5C,GAAK8uB,YAAL,CAAoB,CAEhBsB,YAAYplE,IAAZ,CAAkB0mE,aAAa5vE,QAA/B,EACAsuE,YAAY7sE,GAAZ,CAAiBqtE,eAAgB5wB,IAAhB,CAAjB,EACA0xB,aAAa9lE,EAAb,CAAgBZ,IAAhB,CAAsB6lE,QAAS7wB,IAAT,CAAtB,EACA0xB,aAAa5kE,MAAb,CAAqBsjE,WAArB,EACAsB,aAAazxC,iBAAb,GAEA,GAAIgyC,cAAenB,gBAAiB9wB,IAAjB,CAAnB,CACAqxB,OAAOl0C,QAAP,CAAiB80C,YAAjB,EAEH,CAED;AAEAhC,kBAAkBjjD,gBAAlB,CAAoC0kD,aAAa/5C,gBAAjD,CAAmE+5C,aAAa9zB,kBAAhF,EACAoyB,SAASlrC,aAAT,CAAwBmrC,iBAAxB,EAEA;AAEAiC,aAAcnyE,KAAd,CAAqBC,MAArB,CAA6B0xE,YAA7B,CAA2C5C,YAA3C,EAEH,CAEJ,CAED/jE,MAAM+9C,WAAN,CAAoB,KAApB,CAEH,CArKD,CAuKA,QAASqpB,iBAAT,CAA2BlqE,MAA3B,CAAmCk1C,QAAnC,CAA6C2xB,YAA7C,CAA2DsD,kBAA3D,CAA+Ez+B,gBAA/E,CAAiGC,eAAjG,CAAmH,CAE/G,GAAIhU,UAAW33B,OAAO23B,QAAtB,CAEA,GAAIyyC,QAAS,IAAb,CAEA,GAAIC,kBAAmB7B,eAAvB,CACA,GAAI8B,gBAAiBtqE,OAAOuqE,mBAA5B,CAEA,GAAK1D,YAAL,CAAoB,CAEhBwD,iBAAmB5B,kBAAnB,CACA6B,eAAiBtqE,OAAOwqE,sBAAxB,CAEH,CAED,GAAK,CAAEF,cAAP,CAAwB,CAEpB,GAAIxB,aAAc,KAAlB,CAEA,GAAK5zB,SAAS+B,YAAd,CAA6B,CAEzB,GAAKtf,UAAYA,SAASG,gBAA1B,CAA6C,CAEzCgxC,YAAcnxC,SAASwoB,eAAT,EAA4BxoB,SAASwoB,eAAT,CAAyBtmD,QAArD,EAAiE89B,SAASwoB,eAAT,CAAyBtmD,QAAzB,CAAkCqO,MAAlC,CAA2C,CAA1H,CAEH,CAJD,IAIO,IAAKyvB,UAAYA,SAASC,UAA1B,CAAuC,CAE1CkxC,YAAcnxC,SAASsf,YAAT,EAAyBtf,SAASsf,YAAT,CAAsB/uC,MAAtB,CAA+B,CAAtE,CAEH,CAEJ,CAED,GAAKlI,OAAO0jE,aAAP,EAAwBxuB,SAASkR,QAAT,GAAsB,KAAnD,CAA2D,CAEvD3nD,QAAQgK,IAAR,CAAc,8EAAd,CAA8FzI,MAA9F,EAEH,CAED,GAAI+oE,aAAc/oE,OAAO0jE,aAAP,EAAwBxuB,SAASkR,QAAnD,CAEA,GAAIqkB,cAAe,CAAnB,CAEA,GAAK3B,WAAL,CAAmB2B,cAAgBpC,aAAhB,CACnB,GAAKU,WAAL,CAAmB0B,cAAgBnC,aAAhB,CAEnB8B,OAASC,iBAAkBI,YAAlB,CAAT,CAEH,CAjCD,IAiCO,CAEHL,OAASE,cAAT,CAEH,CAED,GAAKzC,UAAUxV,oBAAV,EACDnd,SAAS0P,WAAT,GAAyB,IADxB,EAED1P,SAASwP,cAAT,CAAwBx8C,MAAxB,GAAmC,CAFvC,CAE2C,CAEvC;AACA;AAEA,GAAIwiE,MAAON,OAAOttD,IAAlB,CAAwB6tD,KAAOz1B,SAASp4B,IAAxC,CAEA,GAAI8tD,qBAAsBlC,eAAgBgC,IAAhB,CAA1B,CAEA,GAAKE,sBAAwB1qE,SAA7B,CAAyC,CAErC0qE,oBAAsB,EAAtB,CACAlC,eAAgBgC,IAAhB,EAAyBE,mBAAzB,CAEH,CAED,GAAIC,gBAAiBD,oBAAqBD,IAArB,CAArB,CAEA,GAAKE,iBAAmB3qE,SAAxB,CAAoC,CAEhC2qE,eAAiBT,OAAOxtE,KAAP,EAAjB,CACAguE,oBAAqBD,IAArB,EAA8BE,cAA9B,CAEH,CAEDT,OAASS,cAAT,CAEH,CAEDT,OAAO73B,OAAP,CAAiB2C,SAAS3C,OAA1B,CACA63B,OAAOpkB,SAAP,CAAmB9Q,SAAS8Q,SAA5B,CAEAokB,OAAOrmB,IAAP,CAAgB7O,SAAS2P,UAAT,EAAuB,IAAzB,CAAkC3P,SAAS2P,UAA3C,CAAwDA,WAAY3P,SAAS6O,IAArB,CAAtE,CAEAqmB,OAAOxlB,WAAP,CAAqB1P,SAAS0P,WAA9B,CACAwlB,OAAO1lB,cAAP,CAAwBxP,SAASwP,cAAjC,CACA0lB,OAAOzlB,gBAAP,CAA0BzP,SAASyP,gBAAnC,CAEAylB,OAAOnkB,kBAAP,CAA4B/Q,SAAS+Q,kBAArC,CACAmkB,OAAOtkB,SAAP,CAAmB5Q,SAAS4Q,SAA5B,CAEA,GAAK+gB,cAAgBuD,OAAOzC,sBAA5B,CAAqD,CAEjDyC,OAAO58B,iBAAP,CAAyBzqC,IAAzB,CAA+BonE,kBAA/B,EACAC,OAAO38B,YAAP,CAAsB/B,gBAAtB,CACA0+B,OAAO18B,WAAP,CAAqB/B,eAArB,CAEH,CAED,MAAOy+B,OAAP,CAEH,CAED,QAASH,aAAT,CAAuBjqE,MAAvB,CAA+BjI,MAA/B,CAAuC0xE,YAAvC,CAAqD5C,YAArD,CAAoE,CAEhE,GAAK7mE,OAAOuyC,OAAP,GAAmB,KAAxB,CAAgC,OAEhC,GAAIA,SAAUvyC,OAAO4xC,MAAP,CAAcD,IAAd,CAAoB55C,OAAO65C,MAA3B,CAAd,CAEA,GAAKW,UAAavyC,OAAOm7C,MAAP,EAAiBn7C,OAAO+gD,MAAxB,EAAkC/gD,OAAO8gD,QAAtD,CAAL,CAAwE,CAEpE,GAAK9gD,OAAOtF,UAAP,GAAuB,CAAEsF,OAAOwyC,aAAT,EAA0Bu1B,SAASjqC,gBAAT,CAA2B99B,MAA3B,CAAjD,CAAL,CAA8F,CAE1FA,OAAOoyC,eAAP,CAAuBrtB,gBAAvB,CAAyC0kD,aAAa9zB,kBAAtD,CAA0E31C,OAAO2vB,WAAjF,EAEA,GAAIgI,UAAWmwC,SAAS7pE,MAAT,CAAiB+B,MAAjB,CAAf,CACA,GAAIk1C,UAAWl1C,OAAOk1C,QAAtB,CAEA,GAAKhnC,MAAM63B,OAAN,CAAemP,QAAf,CAAL,CAAiC,CAE7B,GAAI4D,QAASnhB,SAASmhB,MAAtB,CAEA,IAAM,GAAIppC,GAAI,CAAR,CAAWytC,GAAKrE,OAAO5wC,MAA7B,CAAqCwH,EAAIytC,EAAzC,CAA6CztC,GAA7C,CAAoD,CAEhD,GAAIqpC,OAAQD,OAAQppC,CAAR,CAAZ,CACA,GAAIo7D,eAAgB51B,SAAU6D,MAAMtC,aAAhB,CAApB,CAEA,GAAKq0B,eAAiBA,cAAcv4B,OAApC,CAA8C,CAE1C,GAAIy2B,eAAgBkB,iBAAkBlqE,MAAlB,CAA0B8qE,aAA1B,CAAyCjE,YAAzC,CAAuDuB,mBAAvD,CAA4EqB,aAAaxuE,IAAzF,CAA+FwuE,aAAa/+C,GAA5G,CAApB,CACAm9C,UAAUvY,kBAAV,CAA8Bma,YAA9B,CAA4C,IAA5C,CAAkD9xC,QAAlD,CAA4DqxC,aAA5D,CAA2EhpE,MAA3E,CAAmF+4C,KAAnF,EAEH,CAEJ,CAEJ,CAlBD,IAkBO,IAAK7D,SAAS3C,OAAd,CAAwB,CAE3B,GAAIy2B,eAAgBkB,iBAAkBlqE,MAAlB,CAA0Bk1C,QAA1B,CAAoC2xB,YAApC,CAAkDuB,mBAAlD,CAAuEqB,aAAaxuE,IAApF,CAA0FwuE,aAAa/+C,GAAvG,CAApB,CACAm9C,UAAUvY,kBAAV,CAA8Bma,YAA9B,CAA4C,IAA5C,CAAkD9xC,QAAlD,CAA4DqxC,aAA5D,CAA2EhpE,MAA3E,CAAmF,IAAnF,EAEH,CAEJ,CAEJ,CAED,GAAI+xC,UAAW/xC,OAAO+xC,QAAtB,CAEA,IAAM,GAAIjmC,GAAI,CAAR,CAAW6H,EAAIo+B,SAAS7pC,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDm+D,aAAcl4B,SAAUjmC,CAAV,CAAd,CAA6B/T,MAA7B,CAAqC0xE,YAArC,CAAmD5C,YAAnD,EAEH,CAEJ,CAEJ,CAED;;OAIA,QAASkE,cAAT,CAAwB3xE,MAAxB,CAAgC44B,OAAhC,CAAyCC,KAAzC,CAAgDC,KAAhD,CAAuDC,SAAvD,CAAkEC,SAAlE,CAA6EC,MAA7E,CAAqFxsB,IAArF,CAA2FysB,UAA3F,CAAwG,CAEpGR,QAAQzjB,IAAR,CAAc,IAAd,CAAoBjV,MAApB,CAA4B44B,OAA5B,CAAqCC,KAArC,CAA4CC,KAA5C,CAAmDC,SAAnD,CAA8DC,SAA9D,CAAyEC,MAAzE,CAAiFxsB,IAAjF,CAAuFysB,UAAvF,EAEA,KAAKuuB,WAAL,CAAmB,IAAnB,CAEH,CAEDkqB,cAAcpgE,SAAd,CAA0BC,OAAOC,MAAP,CAAeinB,QAAQnnB,SAAvB,CAA1B,CACAogE,cAAcpgE,SAAd,CAAwBI,WAAxB,CAAsCggE,aAAtC,CACAA,cAAcpgE,SAAd,CAAwBqgE,eAAxB,CAA0C,IAA1C,CAEA;;;OAKA,QAASC,oBAAT,CAA8BjzE,QAA9B,CAAwCs2C,EAAxC,CAA4ClrC,KAA5C,CAAmDmwB,QAAnD,CAA6D0uC,YAA7D,CAA4E,CAExE,GAAIiJ,aAAJ,CAAkBC,aAAlB,CACA,GAAItV,QAAJ,CAAa99B,UAAb,CAAyByN,QAAzB,CAEA,GAAIrQ,QAAJ,CAEA;AAEA,GAAIi2C,gBAAiB,GAAIhrE,QAAJ,EAArB,CACA,GAAIirE,gBAAiB,GAAI5nE,WAAJ,EAArB,CACA,GAAI6nE,aAAc,GAAIlrE,QAAJ,EAAlB,CAEA,QAASuyD,KAAT,EAAgB,CAEZ,GAAI96B,UAAW,GAAIuX,aAAJ,CAAkB,CAC7B,CAAE,GAD2B,CACtB,CAAE,GADoB,CACf,CADe,CACZ,CADY,CAE7B,GAF6B,CAExB,CAAE,GAFsB,CAEjB,CAFiB,CAEd,CAFc,CAG7B,GAH6B,CAGxB,GAHwB,CAGnB,CAHmB,CAGhB,CAHgB,CAI7B,CAAE,GAJ2B,CAItB,GAJsB,CAIjB,CAJiB,CAId,CAJc,CAAlB,CAAf,CAOA,GAAI2H,OAAQ,GAAIzH,YAAJ,CAAiB,CACzB,CADyB,CACtB,CADsB,CACnB,CADmB,CAEzB,CAFyB,CAEtB,CAFsB,CAEnB,CAFmB,CAAjB,CAAZ,CAKA47B,aAAe58B,GAAGG,YAAH,EAAf,CACA08B,cAAgB78B,GAAGG,YAAH,EAAhB,CAEAH,GAAGU,UAAH,CAAeV,GAAGgmB,YAAlB,CAAgC4W,YAAhC,EACA58B,GAAGW,UAAH,CAAeX,GAAGgmB,YAAlB,CAAgCz8B,QAAhC,CAA0CyW,GAAGQ,WAA7C,EAEAR,GAAGU,UAAH,CAAeV,GAAG+lB,oBAAlB,CAAwC8W,aAAxC,EACA78B,GAAGW,UAAH,CAAeX,GAAG+lB,oBAAlB,CAAwCtd,KAAxC,CAA+CzI,GAAGQ,WAAlD,EAEA+mB,QAAUuJ,eAAV,CAEArnC,WAAa,CACTl+B,SAAUy0C,GAAGmvB,iBAAH,CAAsB5H,OAAtB,CAA+B,UAA/B,CADD,CAETxhC,GAAIia,GAAGmvB,iBAAH,CAAsB5H,OAAtB,CAA+B,IAA/B,CAFK,CAAb,CAKArwB,SAAW,CACP+lC,SAAUj9B,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,UAAhC,CADH,CAEP2V,QAASl9B,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,SAAhC,CAFF,CAIPn5D,SAAU4xC,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,UAAhC,CAJH,CAKP5qD,OAAQqjC,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,QAAhC,CALD,CAMPnxD,MAAO4pC,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,OAAhC,CANA,CAQP75D,MAAOsyC,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,OAAhC,CARA,CASP1tB,IAAKmG,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,KAAhC,CATE,CAUP3tB,QAASoG,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,SAAhC,CAVF,CAYPzjB,gBAAiB9D,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,iBAAhC,CAZV,CAaPnmC,iBAAkB4e,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,kBAAhC,CAbX,CAeP4V,QAASn9B,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,SAAhC,CAfF,CAgBPtrB,WAAY+D,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,YAAhC,CAhBL,CAiBPrrB,QAAS8D,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,SAAhC,CAjBF,CAkBPprB,OAAQ6D,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,QAAhC,CAlBD,CAmBPnrB,SAAU4D,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,UAAhC,CAnBH,CAoBP6V,SAAUp9B,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,UAAhC,CApBH,CAsBP1Q,UAAW7W,GAAGktB,kBAAH,CAAuB3F,OAAvB,CAAgC,WAAhC,CAtBJ,CAAX,CAyBA,GAAIz8D,QAAS+G,SAASuzB,eAAT,CAA0B,8BAA1B,CAA0D,QAA1D,CAAb,CACAt6B,OAAOgC,KAAP,CAAe,CAAf,CACAhC,OAAOiC,MAAP,CAAgB,CAAhB,CAEA,GAAI7B,SAAUJ,OAAOC,UAAP,CAAmB,IAAnB,CAAd,CACAG,QAAQmyE,SAAR,CAAoB,OAApB,CACAnyE,QAAQoyE,QAAR,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,EAEAz2C,QAAU,GAAI41C,cAAJ,CAAmB3xE,MAAnB,CAAV,CAEH,CAED,KAAK8E,MAAL,CAAc,SAAW2tE,OAAX,CAAoB/zE,KAApB,CAA2BC,MAA3B,CAAoC,CAE9C,GAAK8zE,QAAQ3jE,MAAR,GAAmB,CAAxB,CAA4B,OAE5B;AAEA,GAAK2tD,UAAY31D,SAAjB,CAA6B,CAEzByyD,OAEH,CAEDvvD,MAAM0oE,UAAN,CAAkBjW,OAAlB,EAEAzyD,MAAM2oE,cAAN,GACA3oE,MAAM4oE,eAAN,CAAuBj0C,WAAWl+B,QAAlC,EACAuJ,MAAM4oE,eAAN,CAAuBj0C,WAAW1D,EAAlC,EACAjxB,MAAM6oE,uBAAN,GAEA7oE,MAAMsuC,OAAN,CAAepD,GAAG49B,SAAlB,EACA9oE,MAAMouC,MAAN,CAAclD,GAAG+6B,KAAjB,EAEA/6B,GAAGU,UAAH,CAAeV,GAAGgmB,YAAlB,CAAgC4W,YAAhC,EACA58B,GAAG69B,mBAAH,CAAwBp0C,WAAWl+B,QAAnC,CAA6C,CAA7C,CAAgDy0C,GAAGa,KAAnD,CAA0D,KAA1D,CAAiE,EAAI,CAArE,CAAwE,CAAxE,EACAb,GAAG69B,mBAAH,CAAwBp0C,WAAW1D,EAAnC,CAAuC,CAAvC,CAA0Cia,GAAGa,KAA7C,CAAoD,KAApD,CAA2D,EAAI,CAA/D,CAAkE,CAAlE,EAEAb,GAAGU,UAAH,CAAeV,GAAG+lB,oBAAlB,CAAwC8W,aAAxC,EAEA78B,GAAGkqB,gBAAH,CAAqBhzB,SAAS9V,gBAA9B,CAAgD,KAAhD,CAAuD33B,OAAO23B,gBAAP,CAAwB/P,QAA/E,EAEAvc,MAAMgpE,aAAN,CAAqB99B,GAAG+9B,QAAxB,EACA/9B,GAAGmpB,SAAH,CAAcjyB,SAAS2C,GAAvB,CAA4B,CAA5B,EAEA,GAAImkC,YAAa,CAAjB,CACA,GAAIC,cAAe,CAAnB,CACA,GAAIjiC,KAAMxyC,MAAMwyC,GAAhB,CAEA,GAAKA,GAAL,CAAW,CAEPgE,GAAGwpB,SAAH,CAActyB,SAASkF,QAAvB,CAAiCJ,IAAItuC,KAAJ,CAAUyxB,CAA3C,CAA8C6c,IAAItuC,KAAJ,CAAUo1B,CAAxD,CAA2DkZ,IAAItuC,KAAJ,CAAU+U,CAArE,EAEA,GAAKu5B,IAAIkiC,KAAT,CAAiB,CAEbl+B,GAAGgpB,SAAH,CAAc9xB,SAASgF,OAAvB,CAAgCF,IAAIrvC,IAApC,EACAqzC,GAAGgpB,SAAH,CAAc9xB,SAASiF,MAAvB,CAA+BH,IAAI5f,GAAnC,EAEA4jB,GAAGmpB,SAAH,CAAcjyB,SAASimC,OAAvB,CAAgC,CAAhC,EACAa,WAAa,CAAb,CACAC,aAAe,CAAf,CAEH,CATD,IASO,IAAKjiC,IAAI05B,SAAT,CAAqB,CAExB11B,GAAGgpB,SAAH,CAAc9xB,SAAS+E,UAAvB,CAAmCD,IAAImiC,OAAvC,EAEAn+B,GAAGmpB,SAAH,CAAcjyB,SAASimC,OAAvB,CAAgC,CAAhC,EACAa,WAAa,CAAb,CACAC,aAAe,CAAf,CAEH,CAEJ,CAvBD,IAuBO,CAEHj+B,GAAGmpB,SAAH,CAAcjyB,SAASimC,OAAvB,CAAgC,CAAhC,EACAa,WAAa,CAAb,CACAC,aAAe,CAAf,CAEH,CAGD;AAEA,IAAM,GAAIzgE,GAAI,CAAR,CAAW6H,EAAIk4D,QAAQ3jE,MAA7B,CAAqC4D,EAAI6H,CAAzC,CAA4C7H,GAA5C,CAAmD,CAE/C,GAAIoyB,QAAS2tC,QAAS//D,CAAT,CAAb,CAEAoyB,OAAOkU,eAAP,CAAuBrtB,gBAAvB,CAAyChtB,OAAO49C,kBAAhD,CAAoEzX,OAAOvO,WAA3E,EACAuO,OAAOlkC,CAAP,CAAW,CAAEkkC,OAAOkU,eAAP,CAAuBzyB,QAAvB,CAAiC,EAAjC,CAAb,CAEH,CAEDksD,QAAQ7vB,IAAR,CAAc8oB,iBAAd,EAEA;AAEA,GAAIpgE,OAAQ,EAAZ,CACA,GAAIuG,QAAS,EAAb,CAEA,IAAM,GAAIa,GAAI,CAAR,CAAW6H,EAAIk4D,QAAQ3jE,MAA7B,CAAqC4D,EAAI6H,CAAzC,CAA4C7H,GAA5C,CAAmD,CAE/C,GAAIoyB,QAAS2tC,QAAS//D,CAAT,CAAb,CACA,GAAIopC,UAAWhX,OAAOgX,QAAtB,CAEA,GAAKA,SAAS3C,OAAT,GAAqB,KAA1B,CAAkC,SAElCrU,OAAO0U,cAAP,CAAuB56C,QAAvB,CAAiCF,KAAjC,CAAwCC,MAAxC,CAAgDmI,SAAhD,CAA2Dg1C,QAA3D,CAAqEh1C,SAArE,EAEAouC,GAAGgpB,SAAH,CAAc9xB,SAAS2f,SAAvB,CAAkCjQ,SAASiQ,SAA3C,EACA7W,GAAGkqB,gBAAH,CAAqBhzB,SAAS4M,eAA9B,CAA+C,KAA/C,CAAsDlU,OAAOkU,eAAP,CAAuBzyB,QAA7E,EAEAue,OAAOvO,WAAP,CAAmBxF,SAAnB,CAA8BihD,cAA9B,CAA8CC,cAA9C,CAA8DC,WAA9D,EAEA5mE,MAAO,CAAP,EAAa4mE,YAAYxxE,CAAzB,CACA4K,MAAO,CAAP,EAAa4mE,YAAYvxE,CAAzB,CAEAkR,OAAQ,CAAR,EAAcizB,OAAOjzB,MAAP,CAAcnR,CAAd,CAAkB,GAAhC,CACAmR,OAAQ,CAAR,EAAcizB,OAAOjzB,MAAP,CAAclR,CAAd,CAAkB,GAAhC,CAEA,GAAI0xE,SAAU,CAAd,CAEA,GAAK3zE,MAAMwyC,GAAN,EAAa4K,SAAS5K,GAA3B,CAAiC,CAE7BmhC,QAAUc,YAAV,CAEH,CAED,GAAKD,aAAeb,OAApB,CAA8B,CAE1Bn9B,GAAGmpB,SAAH,CAAcjyB,SAASimC,OAAvB,CAAgCA,OAAhC,EACAa,WAAab,OAAb,CAEH,CAED,GAAKv2B,SAAS/M,GAAT,GAAiB,IAAtB,CAA6B,CAEzBmG,GAAGqpB,SAAH,CAAcnyB,SAAS+lC,QAAvB,CAAiCr2B,SAAS/M,GAAT,CAAa5kC,MAAb,CAAoBzJ,CAArD,CAAwDo7C,SAAS/M,GAAT,CAAa5kC,MAAb,CAAoBxJ,CAA5E,EACAu0C,GAAGqpB,SAAH,CAAcnyB,SAASgmC,OAAvB,CAAgCt2B,SAAS/M,GAAT,CAAax5B,MAAb,CAAoB7U,CAApD,CAAuDo7C,SAAS/M,GAAT,CAAax5B,MAAb,CAAoB5U,CAA3E,EAEH,CALD,IAKO,CAEHu0C,GAAGqpB,SAAH,CAAcnyB,SAAS+lC,QAAvB,CAAiC,CAAjC,CAAoC,CAApC,EACAj9B,GAAGqpB,SAAH,CAAcnyB,SAASgmC,OAAvB,CAAgC,CAAhC,CAAmC,CAAnC,EAEH,CAEDl9B,GAAGgpB,SAAH,CAAc9xB,SAAS0C,OAAvB,CAAgCgN,SAAShN,OAAzC,EACAoG,GAAGwpB,SAAH,CAActyB,SAASxpC,KAAvB,CAA8Bk5C,SAASl5C,KAAT,CAAeyxB,CAA7C,CAAgDynB,SAASl5C,KAAT,CAAeo1B,CAA/D,CAAkE8jB,SAASl5C,KAAT,CAAe+U,CAAjF,EAEAu9B,GAAGgpB,SAAH,CAAc9xB,SAAS9oC,QAAvB,CAAiCw4C,SAASx4C,QAA1C,EACA4xC,GAAGspB,UAAH,CAAepyB,SAASv6B,MAAxB,CAAgCA,MAAhC,EACAqjC,GAAGspB,UAAH,CAAepyB,SAAS9gC,KAAxB,CAA+BA,KAA/B,EAEAtB,MAAMspE,WAAN,CAAmBx3B,SAAS4O,QAA5B,CAAsC5O,SAASiP,aAA/C,CAA8DjP,SAAS+O,QAAvE,CAAiF/O,SAASgP,QAA1F,CAAoGhP,SAASoP,kBAA7G,CAAiIpP,SAASkP,aAA1I,CAAyJlP,SAASmP,aAAlK,CAAiLnP,SAASkQ,kBAA1L,EACAhiD,MAAMmrC,OAAN,CAAcrB,KAAd,CAAoBo8B,OAApB,CAA6Bp0B,SAASsP,SAAtC,EACAphD,MAAMmrC,OAAN,CAAcrB,KAAd,CAAoBy/B,OAApB,CAA6Bz3B,SAASuP,UAAtC,EACArhD,MAAMmrC,OAAN,CAAcvyC,KAAd,CAAoB2wE,OAApB,CAA6Bz3B,SAAS4P,UAAtC,EAEAvxB,SAASolC,YAAT,CAAuBzjB,SAAS/M,GAAT,EAAgBhT,OAAvC,CAAgD,CAAhD,EAEAmZ,GAAGomB,YAAH,CAAiBpmB,GAAG2mB,SAApB,CAA+B,CAA/B,CAAkC3mB,GAAGiB,cAArC,CAAqD,CAArD,EAEArR,OAAO2U,aAAP,CAAsB76C,QAAtB,CAAgCF,KAAhC,CAAuCC,MAAvC,CAA+CmI,SAA/C,CAA0Dg1C,QAA1D,CAAoEh1C,SAApE,EAEH,CAED;AAEAkD,MAAMouC,MAAN,CAAclD,GAAG49B,SAAjB,EAEA9oE,MAAMJ,KAAN,GAEH,CAhKD,CAkKA,QAASo8D,cAAT,EAAyB,CAErB,GAAIvJ,SAAUvnB,GAAG8wB,aAAH,EAAd,CAEA,GAAIhzB,cAAekC,GAAG2tB,YAAH,CAAiB3tB,GAAGmiB,aAApB,CAAnB,CACA,GAAIpkB,gBAAiBiC,GAAG2tB,YAAH,CAAiB3tB,GAAGqiB,eAApB,CAArB,CAEAriB,GAAG4tB,YAAH,CAAiB9vB,YAAjB,CAA+B,CAE3B,aAAe61B,aAAaxmB,SAA5B,CAAwC,SAFb,CAI3B,uBAAyB,gBAJE,CAM3B,+BAN2B,CAO3B,gCAP2B,CAQ3B,yBAR2B,CAS3B,sBAT2B,CAU3B,qBAV2B,CAW3B,wBAX2B,CAY3B,uBAZ2B,CAc3B,0BAd2B,CAe3B,oBAf2B,CAiB3B,mBAjB2B,CAkB3B,yBAlB2B,CAoB3B,eApB2B,CAsB3B,iCAtB2B,CAwB3B,wDAxB2B,CA0B3B,wBA1B2B,CA2B3B,iGA3B2B,CA4B3B,iGA5B2B,CA8B3B,mBA9B2B,CAgC3B,6DAhC2B,CAiC3B,oCAjC2B,CAmC3B,+CAnC2B,CAqC3B,6BArC2B,CAuC3B,GAvC2B,EAyC7BqgB,IAzC6B,CAyCvB,IAzCuB,CAA/B,EA2CAxtB,GAAG4tB,YAAH,CAAiB7vB,cAAjB,CAAiC,CAE7B,aAAe41B,aAAaxmB,SAA5B,CAAwC,SAFX,CAI7B,uBAAyB,gBAJI,CAM7B,qBAN6B,CAO7B,wBAP6B,CAQ7B,wBAR6B,CAU7B,sBAV6B,CAW7B,wBAX6B,CAY7B,2BAZ6B,CAa7B,wBAb6B,CAc7B,uBAd6B,CAe7B,0BAf6B,CAiB7B,mBAjB6B,CAkB7B,yBAlB6B,CAoB7B,eApB6B,CAsB7B,wCAtB6B,CAwB7B,mEAxB6B,CA0B7B,6CA1B6B,CA4B7B,uBA5B6B,CA8B7B,0BA9B6B,CAgC7B,yBAhC6B,CAkC7B,yDAlC6B,CAoC7B,YApC6B,CAsC7B,iCAtC6B,CAuC7B,gFAvC6B,CAwC7B,oDAxC6B,CA0C7B,KA1C6B,CA4C7B,oEA5C6B,CA8C7B,IA9C6B,CAgD7B,GAhD6B,EAkD/BqgB,IAlD+B,CAkDzB,IAlDyB,CAAjC,EAoDAxtB,GAAG6tB,aAAH,CAAkB/vB,YAAlB,EACAkC,GAAG6tB,aAAH,CAAkB9vB,cAAlB,EAEAiC,GAAGoyB,YAAH,CAAiB7K,OAAjB,CAA0BzpB,YAA1B,EACAkC,GAAGoyB,YAAH,CAAiB7K,OAAjB,CAA0BxpB,cAA1B,EAEAiC,GAAGsyB,WAAH,CAAgB/K,OAAhB,EAEA,MAAOA,QAAP,CAEH,CAED,QAASiP,kBAAT,CAA4BpzD,CAA5B,CAA+BX,CAA/B,CAAmC,CAE/B,GAAKW,EAAE+gC,WAAF,GAAkB1hC,EAAE0hC,WAAzB,CAAuC,CAEnC,MAAO/gC,GAAE+gC,WAAF,CAAgB1hC,EAAE0hC,WAAzB,CAEH,CAJD,IAIO,IAAK/gC,EAAE1X,CAAF,GAAQ+W,EAAE/W,CAAf,CAAmB,CAEtB,MAAO+W,GAAE/W,CAAF,CAAM0X,EAAE1X,CAAf,CAEH,CAJM,IAIA,CAEH,MAAO+W,GAAEzY,EAAF,CAAOoZ,EAAEpZ,EAAhB,CAEH,CAEJ,CAEJ,CAED;;OAIA,QAASs0E,WAAT,CAAqBt+B,EAArB,CAAyBuY,UAAzB,CAAqCgmB,KAArC,CAA6C,CAEzC,QAASC,YAAT,EAAuB,CAEnB,GAAIC,QAAS,KAAb,CAEA,GAAI/wE,OAAQ,GAAIs4B,QAAJ,EAAZ,CACA,GAAI04C,kBAAmB,IAAvB,CACA,GAAIC,mBAAoB,GAAI34C,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAtB,CAAxB,CAEA,MAAO,CAEHq4C,QAAS,iBAAWO,SAAX,CAAuB,CAE5B,GAAKF,mBAAqBE,SAArB,EAAkC,CAAEH,MAAzC,CAAkD,CAE9Cz+B,GAAG4+B,SAAH,CAAcA,SAAd,CAAyBA,SAAzB,CAAoCA,SAApC,CAA+CA,SAA/C,EACAF,iBAAmBE,SAAnB,CAEH,CAEJ,CAXE,CAaHC,UAAW,mBAAWC,IAAX,CAAkB,CAEzBL,OAASK,IAAT,CAEH,CAjBE,CAmBHre,SAAU,kBAAWthC,CAAX,CAAc2D,CAAd,CAAiBrgB,CAAjB,CAAoBW,CAApB,CAAuB0zC,kBAAvB,CAA4C,CAElD,GAAKA,qBAAuB,IAA5B,CAAmC,CAE/B33B,GAAK/b,CAAL,CAAQ0f,GAAK1f,CAAL,CAAQX,GAAKW,CAAL,CAEnB,CAED1V,MAAMrB,GAAN,CAAW8yB,CAAX,CAAc2D,CAAd,CAAiBrgB,CAAjB,CAAoBW,CAApB,EAEA,GAAKu7D,kBAAkBnsD,MAAlB,CAA0B9kB,KAA1B,IAAsC,KAA3C,CAAmD,CAE/CsyC,GAAGigB,UAAH,CAAe9gC,CAAf,CAAkB2D,CAAlB,CAAqBrgB,CAArB,CAAwBW,CAAxB,EACAu7D,kBAAkBlqE,IAAlB,CAAwB/G,KAAxB,EAEH,CAEJ,CApCE,CAsCHgH,MAAO,gBAAY,CAEf+pE,OAAS,KAAT,CAEAC,iBAAmB,IAAnB,CACAC,kBAAkBtyE,GAAlB,CAAuB,CAAE,CAAzB,CAA4B,CAA5B,CAA+B,CAA/B,CAAkC,CAAlC,EAAuC;AAE1C,CA7CE,CAAP,CAiDH,CAED,QAAS0yE,YAAT,EAAuB,CAEnB,GAAIN,QAAS,KAAb,CAEA,GAAIO,kBAAmB,IAAvB,CACA,GAAIC,kBAAmB,IAAvB,CACA,GAAIC,mBAAoB,IAAxB,CAEA,MAAO,CAEHlE,QAAS,iBAAW9kB,SAAX,CAAuB,CAE5B,GAAKA,SAAL,CAAiB,CAEbhT,OAAQlD,GAAGm/B,UAAX,EAEH,CAJD,IAIO,CAEH/7B,QAASpD,GAAGm/B,UAAZ,EAEH,CAEJ,CAdE,CAgBHd,QAAS,iBAAWe,SAAX,CAAuB,CAE5B,GAAKJ,mBAAqBI,SAArB,EAAkC,CAAEX,MAAzC,CAAkD,CAE9Cz+B,GAAGo/B,SAAH,CAAcA,SAAd,EACAJ,iBAAmBI,SAAnB,CAEH,CAEJ,CAzBE,CA2BHC,QAAS,iBAAWppB,SAAX,CAAuB,CAE5B,GAAKgpB,mBAAqBhpB,SAA1B,CAAsC,CAElC,GAAKA,SAAL,CAAiB,CAEb,OAASA,SAAT,EAEI,IAAKpuC,WAAL,CAEIm4B,GAAGiW,SAAH,CAAcjW,GAAGs/B,KAAjB,EACA,MAEJ,IAAKx3D,YAAL,CAEIk4B,GAAGiW,SAAH,CAAcjW,GAAGu/B,MAAjB,EACA,MAEJ,IAAKx3D,UAAL,CAEIi4B,GAAGiW,SAAH,CAAcjW,GAAGw/B,IAAjB,EACA,MAEJ,IAAKx3D,eAAL,CAEIg4B,GAAGiW,SAAH,CAAcjW,GAAGy/B,MAAjB,EACA,MAEJ,IAAKx3D,WAAL,CAEI+3B,GAAGiW,SAAH,CAAcjW,GAAG0/B,KAAjB,EACA,MAEJ,IAAKx3D,kBAAL,CAEI83B,GAAGiW,SAAH,CAAcjW,GAAG2/B,MAAjB,EACA,MAEJ,IAAKx3D,aAAL,CAEI63B,GAAGiW,SAAH,CAAcjW,GAAG4/B,OAAjB,EACA,MAEJ,IAAKx3D,cAAL,CAEI43B,GAAGiW,SAAH,CAAcjW,GAAG6/B,QAAjB,EACA,MAEJ,QAEI7/B,GAAGiW,SAAH,CAAcjW,GAAGy/B,MAAjB,EA5CR,CAgDH,CAlDD,IAkDO,CAEHz/B,GAAGiW,SAAH,CAAcjW,GAAGy/B,MAAjB,EAEH,CAEDR,iBAAmBhpB,SAAnB,CAEH,CAEJ,CA3FE,CA6FH4oB,UAAW,mBAAWC,IAAX,CAAkB,CAEzBL,OAASK,IAAT,CAEH,CAjGE,CAmGHre,SAAU,kBAAW7hB,KAAX,CAAmB,CAEzB,GAAKsgC,oBAAsBtgC,KAA3B,CAAmC,CAE/BoB,GAAG8/B,UAAH,CAAelhC,KAAf,EACAsgC,kBAAoBtgC,KAApB,CAEH,CAEJ,CA5GE,CA8GHlqC,MAAO,gBAAY,CAEf+pE,OAAS,KAAT,CAEAO,iBAAmB,IAAnB,CACAC,iBAAmB,IAAnB,CACAC,kBAAoB,IAApB,CAEH,CAtHE,CAAP,CA0HH,CAED,QAASa,cAAT,EAAyB,CAErB,GAAItB,QAAS,KAAb,CAEA,GAAIuB,oBAAqB,IAAzB,CACA,GAAIC,oBAAqB,IAAzB,CACA,GAAIC,mBAAoB,IAAxB,CACA,GAAIC,wBAAyB,IAA7B,CACA,GAAIC,oBAAqB,IAAzB,CACA,GAAIC,qBAAsB,IAA1B,CACA,GAAIC,qBAAsB,IAA1B,CACA,GAAIC,qBAAsB,IAA1B,CAEA,MAAO,CAEHvF,QAAS,iBAAWwF,WAAX,CAAyB,CAE9B,GAAKA,WAAL,CAAmB,CAEft9B,OAAQlD,GAAGygC,YAAX,EAEH,CAJD,IAIO,CAEHr9B,QAASpD,GAAGygC,YAAZ,EAEH,CAEJ,CAdE,CAgBHpC,QAAS,iBAAWqC,WAAX,CAAyB,CAE9B,GAAKV,qBAAuBU,WAAvB,EAAsC,CAAEjC,MAA7C,CAAsD,CAElDz+B,GAAG0gC,WAAH,CAAgBA,WAAhB,EACAV,mBAAqBU,WAArB,CAEH,CAEJ,CAzBE,CA2BHrB,QAAS,iBAAWsB,WAAX,CAAwBC,UAAxB,CAAoCF,WAApC,CAAkD,CAEvD,GAAKT,qBAAuBU,WAAvB,EACDT,oBAAuBU,UADtB,EAEDT,yBAA2BO,WAF/B,CAE6C,CAEzC1gC,GAAG2gC,WAAH,CAAgBA,WAAhB,CAA6BC,UAA7B,CAAyCF,WAAzC,EAEAT,mBAAqBU,WAArB,CACAT,kBAAoBU,UAApB,CACAT,uBAAyBO,WAAzB,CAEH,CAEJ,CAzCE,CA2CHG,MAAO,eAAWC,WAAX,CAAwBC,YAAxB,CAAsCC,YAAtC,CAAqD,CAExD,GAAKZ,qBAAwBU,WAAxB,EACDT,sBAAwBU,YADvB,EAEDT,sBAAwBU,YAF5B,CAE2C,CAEvChhC,GAAGihC,SAAH,CAAcH,WAAd,CAA2BC,YAA3B,CAAyCC,YAAzC,EAEAZ,mBAAqBU,WAArB,CACAT,oBAAsBU,YAAtB,CACAT,oBAAsBU,YAAtB,CAEH,CAEJ,CAzDE,CA2DHnC,UAAW,mBAAWC,IAAX,CAAkB,CAEzBL,OAASK,IAAT,CAEH,CA/DE,CAiEHre,SAAU,kBAAWygB,OAAX,CAAqB,CAE3B,GAAKX,sBAAwBW,OAA7B,CAAuC,CAEnClhC,GAAGmhC,YAAH,CAAiBD,OAAjB,EACAX,oBAAsBW,OAAtB,CAEH,CAEJ,CA1EE,CA4EHxsE,MAAO,gBAAY,CAEf+pE,OAAS,KAAT,CAEAuB,mBAAqB,IAArB,CACAC,mBAAqB,IAArB,CACAC,kBAAoB,IAApB,CACAC,uBAAyB,IAAzB,CACAC,mBAAqB,IAArB,CACAC,oBAAsB,IAAtB,CACAC,oBAAsB,IAAtB,CACAC,oBAAsB,IAAtB,CAEH,CAzFE,CAAP,CA6FH,CAED;AAEA,GAAIa,aAAc,GAAI5C,YAAJ,EAAlB,CACA,GAAI13C,aAAc,GAAIi4C,YAAJ,EAAlB,CACA,GAAIh4C,eAAgB,GAAIg5C,cAAJ,EAApB,CAEA,GAAIsB,qBAAsBrhC,GAAGnW,YAAH,CAAiBmW,GAAGkjB,kBAApB,CAA1B,CACA,GAAIoe,eAAgB,GAAI5/B,WAAJ,CAAgB2/B,mBAAhB,CAApB,CACA,GAAIE,mBAAoB,GAAI7/B,WAAJ,CAAgB2/B,mBAAhB,CAAxB,CACA,GAAIG,mBAAoB,GAAI9/B,WAAJ,CAAgB2/B,mBAAhB,CAAxB,CAEA,GAAI1N,cAAe,EAAnB,CAEA,GAAI8N,0BAA2B,IAA/B,CAEA,GAAIC,gBAAiB,IAArB,CAEA,GAAIC,iBAAkB,IAAtB,CACA,GAAIC,sBAAuB,IAA3B,CACA,GAAIC,iBAAkB,IAAtB,CACA,GAAIC,iBAAkB,IAAtB,CACA,GAAIC,2BAA4B,IAAhC,CACA,GAAIC,sBAAuB,IAA3B,CACA,GAAIC,sBAAuB,IAA3B,CACA,GAAIC,0BAA2B,KAA/B,CAEA,GAAIC,kBAAmB,IAAvB,CACA,GAAIC,iBAAkB,IAAtB,CAEA,GAAIC,kBAAmB,IAAvB,CAEA,GAAIC,4BAA6B,IAAjC,CACA,GAAIC,2BAA4B,IAAhC,CAEA,GAAI9f,aAAcziB,GAAGnW,YAAH,CAAiBmW,GAAGwiC,gCAApB,CAAlB,CAEA,GAAIC,oBAAqB,KAAzB,CACA,GAAI99C,SAAU,CAAd,CACA,GAAI+9C,WAAY1iC,GAAGnW,YAAH,CAAiBmW,GAAG2iC,OAApB,CAAhB,CAEA,GAAKD,UAAUjlE,OAAV,CAAmB,OAAnB,IAAiC,CAAE,CAAxC,CAA4C,CAExCknB,QAAU1jB,WAAY,kBAAkBo3B,IAAlB,CAAwBqqC,SAAxB,EAAqC,CAArC,CAAZ,CAAV,CACAD,mBAAuB99C,SAAW,GAAlC,CAEH,CALD,IAKO,IAAK+9C,UAAUjlE,OAAV,CAAmB,WAAnB,IAAqC,CAAE,CAA5C,CAAgD,CAEnDknB,QAAU1jB,WAAY,uBAAuBo3B,IAAvB,CAA6BqqC,SAA7B,EAA0C,CAA1C,CAAZ,CAAV,CACAD,mBAAuB99C,SAAW,GAAlC,CAEH,CAED,GAAIi+C,oBAAqB,IAAzB,CACA,GAAIC,sBAAuB,EAA3B,CAEA,GAAIC,gBAAiB,GAAI98C,QAAJ,EAArB,CACA,GAAI+8C,iBAAkB,GAAI/8C,QAAJ,EAAtB,CAEA,QAASg9C,cAAT,CAAwBzrE,IAAxB,CAA8BtK,MAA9B,CAAsC2rB,KAAtC,CAA8C,CAE1C,GAAI5oB,MAAO,GAAI0xC,WAAJ,CAAgB,CAAhB,CAAX,CAAgC;AAChC,GAAI7a,SAAUmZ,GAAGgjC,aAAH,EAAd,CAEAhjC,GAAGijC,WAAH,CAAgB1rE,IAAhB,CAAsBsvB,OAAtB,EACAmZ,GAAGkjC,aAAH,CAAkB3rE,IAAlB,CAAwByoC,GAAGmjC,kBAA3B,CAA+CnjC,GAAGojC,OAAlD,EACApjC,GAAGkjC,aAAH,CAAkB3rE,IAAlB,CAAwByoC,GAAGqjC,kBAA3B,CAA+CrjC,GAAGojC,OAAlD,EAEA,IAAM,GAAI5lE,GAAI,CAAd,CAAiBA,EAAIob,KAArB,CAA4Bpb,GAA5B,CAAmC,CAE/BwiC,GAAGsjC,UAAH,CAAer2E,OAASuQ,CAAxB,CAA2B,CAA3B,CAA8BwiC,GAAGujC,IAAjC,CAAuC,CAAvC,CAA0C,CAA1C,CAA6C,CAA7C,CAAgDvjC,GAAGujC,IAAnD,CAAyDvjC,GAAG2B,aAA5D,CAA2E3xC,IAA3E,EAEH,CAED,MAAO62B,QAAP,CAEH,CAED,GAAI28C,eAAgB,EAApB,CACAA,cAAexjC,GAAGyjC,UAAlB,EAAiCT,cAAehjC,GAAGyjC,UAAlB,CAA8BzjC,GAAGyjC,UAAjC,CAA6C,CAA7C,CAAjC,CACAD,cAAexjC,GAAG0jC,gBAAlB,EAAuCV,cAAehjC,GAAG0jC,gBAAlB,CAAoC1jC,GAAG2jC,2BAAvC,CAAoE,CAApE,CAAvC,CAEA;AAEAvC,YAAY3gB,QAAZ,CAAsB,CAAtB,CAAyB,CAAzB,CAA4B,CAA5B,CAA+B,CAA/B,EACA35B,YAAY25B,QAAZ,CAAsB,CAAtB,EACA15B,cAAc05B,QAAd,CAAwB,CAAxB,EAEAvd,OAAQlD,GAAGm/B,UAAX,EACAr4C,YAAYu4C,OAAZ,CAAqBr3D,cAArB,EAEA47D,aAAc,KAAd,EACAC,YAAar+D,YAAb,EACA09B,OAAQlD,GAAG49B,SAAX,EAEA16B,OAAQlD,GAAG+6B,KAAX,EACAqD,YAAa53D,cAAb,EAEA;AAEA,QAASi3D,eAAT,EAA0B,CAEtB,IAAM,GAAIjgE,GAAI,CAAR,CAAW6H,EAAIi8D,cAAc1nE,MAAnC,CAA2C4D,EAAI6H,CAA/C,CAAkD7H,GAAlD,CAAyD,CAErD8jE,cAAe9jE,CAAf,EAAqB,CAArB,CAEH,CAEJ,CAED,QAASkgE,gBAAT,CAA0B9qD,SAA1B,CAAsC,CAElCkxD,0BAA2BlxD,SAA3B,CAAsC,CAAtC,EAEH,CAED,QAASkxD,0BAAT,CAAoClxD,SAApC,CAA+CmxD,gBAA/C,CAAkE,CAE9DzC,cAAe1uD,SAAf,EAA6B,CAA7B,CAEA,GAAK2uD,kBAAmB3uD,SAAnB,IAAmC,CAAxC,CAA4C,CAExCotB,GAAGgkC,uBAAH,CAA4BpxD,SAA5B,EACA2uD,kBAAmB3uD,SAAnB,EAAiC,CAAjC,CAEH,CAED,GAAK4uD,kBAAmB5uD,SAAnB,IAAmCmxD,gBAAxC,CAA2D,CAEvD,GAAIriB,WAAYnJ,WAAW37C,GAAX,CAAgB,wBAAhB,CAAhB,CAEA8kD,UAAUuiB,wBAAV,CAAoCrxD,SAApC,CAA+CmxD,gBAA/C,EACAvC,kBAAmB5uD,SAAnB,EAAiCmxD,gBAAjC,CAEH,CAEJ,CAED,QAASpG,wBAAT,EAAmC,CAE/B,IAAM,GAAIngE,GAAI,CAAR,CAAW6H,EAAIk8D,kBAAkB3nE,MAAvC,CAA+C4D,IAAM6H,CAArD,CAAwD,EAAG7H,CAA3D,CAA+D,CAE3D,GAAK+jE,kBAAmB/jE,CAAnB,IAA2B8jE,cAAe9jE,CAAf,CAAhC,CAAqD,CAEjDwiC,GAAGkkC,wBAAH,CAA6B1mE,CAA7B,EACA+jE,kBAAmB/jE,CAAnB,EAAyB,CAAzB,CAEH,CAEJ,CAEJ,CAED,QAAS0lC,OAAT,CAAiBl5C,EAAjB,CAAsB,CAElB,GAAK2pE,aAAc3pE,EAAd,IAAuB,IAA5B,CAAmC,CAE/Bg2C,GAAGkD,MAAH,CAAWl5C,EAAX,EACA2pE,aAAc3pE,EAAd,EAAqB,IAArB,CAEH,CAEJ,CAED,QAASo5C,QAAT,CAAkBp5C,EAAlB,CAAuB,CAEnB,GAAK2pE,aAAc3pE,EAAd,IAAuB,KAA5B,CAAoC,CAEhCg2C,GAAGoD,OAAH,CAAYp5C,EAAZ,EACA2pE,aAAc3pE,EAAd,EAAqB,KAArB,CAEH,CAEJ,CAED,QAASm6E,4BAAT,EAAuC,CAEnC,GAAK1C,2BAA6B,IAAlC,CAAyC,CAErCA,yBAA2B,EAA3B,CAEA,GAAKlpB,WAAW37C,GAAX,CAAgB,gCAAhB,GACD27C,WAAW37C,GAAX,CAAgB,+BAAhB,CADC,EAED27C,WAAW37C,GAAX,CAAgB,+BAAhB,CAFC,EAGD27C,WAAW37C,GAAX,CAAgB,+BAAhB,CAHJ,CAGwD,CAEpD,GAAIwnE,SAAUpkC,GAAGnW,YAAH,CAAiBmW,GAAGqkC,0BAApB,CAAd,CAEA,IAAM,GAAI7mE,GAAI,CAAd,CAAiBA,EAAI4mE,QAAQxqE,MAA7B,CAAqC4D,GAArC,CAA4C,CAExCikE,yBAAyBpzE,IAAzB,CAA+B+1E,QAAS5mE,CAAT,CAA/B,EAEH,CAEJ,CAEJ,CAED,MAAOikE,yBAAP,CAEH,CAED,QAASjE,WAAT,CAAqBjW,OAArB,CAA+B,CAE3B,GAAKma,iBAAmBna,OAAxB,CAAkC,CAE9BvnB,GAAGw9B,UAAH,CAAejW,OAAf,EAEAma,eAAiBna,OAAjB,CAEA,MAAO,KAAP,CAEH,CAED,MAAO,MAAP,CAEH,CAED,QAAS6W,YAAT,CAAsB5oB,QAAtB,CAAgCK,aAAhC,CAA+CF,QAA/C,CAAyDC,QAAzD,CAAmEI,kBAAnE,CAAuFF,aAAvF,CAAsGC,aAAtG,CAAqHe,kBAArH,CAA0I,CAEtI,GAAKtB,WAAajvC,UAAlB,CAA+B,CAE3B28B,OAAQlD,GAAG+6B,KAAX,EAEH,CAJD,IAIO,CAEH33B,QAASpD,GAAG+6B,KAAZ,EAEH,CAED,GAAKvlB,WAAa5uC,cAAlB,CAAmC,CAE/B,GAAK4uC,WAAamsB,eAAb,EAAgC7qB,qBAAuBorB,wBAA5D,CAAuF,CAEnF,OAAS1sB,QAAT,EAEI,IAAK/uC,iBAAL,CAEI,GAAKqwC,kBAAL,CAA0B,CAEtB9W,GAAGskC,qBAAH,CAA0BtkC,GAAGukC,QAA7B,CAAuCvkC,GAAGukC,QAA1C,EACAvkC,GAAGwkC,iBAAH,CAAsBxkC,GAAGykC,GAAzB,CAA8BzkC,GAAGykC,GAAjC,CAAsCzkC,GAAGykC,GAAzC,CAA8CzkC,GAAGykC,GAAjD,EAEH,CALD,IAKO,CAEHzkC,GAAG6V,aAAH,CAAkB7V,GAAGukC,QAArB,EACAvkC,GAAG0kC,SAAH,CAAc1kC,GAAG2kC,SAAjB,CAA4B3kC,GAAGykC,GAA/B,EAEH,CACD,MAEJ,IAAK/9D,oBAAL,CAEI,GAAKowC,kBAAL,CAA0B,CAEtB9W,GAAGskC,qBAAH,CAA0BtkC,GAAGukC,QAA7B,CAAuCvkC,GAAGukC,QAA1C,EACAvkC,GAAGwkC,iBAAH,CAAsBxkC,GAAG4kC,IAAzB,CAA+B5kC,GAAG4kC,IAAlC,CAAwC5kC,GAAG6kC,mBAA3C,CAAgE7kC,GAAG8kC,mBAAnE,EAEH,CALD,IAKO,CAEH9kC,GAAG6V,aAAH,CAAkB7V,GAAGukC,QAArB,EACAvkC,GAAG0kC,SAAH,CAAc1kC,GAAG4kC,IAAjB,CAAuB5kC,GAAG6kC,mBAA1B,EAEH,CACD,MAEJ,IAAKl+D,iBAAL,CAEI,GAAKmwC,kBAAL,CAA0B,CAEtB9W,GAAGskC,qBAAH,CAA0BtkC,GAAGukC,QAA7B,CAAuCvkC,GAAGukC,QAA1C,EACAvkC,GAAGwkC,iBAAH,CAAsBxkC,GAAG4kC,IAAzB,CAA+B5kC,GAAG+kC,SAAlC,CAA6C/kC,GAAG4kC,IAAhD,CAAsD5kC,GAAG2kC,SAAzD,EAEH,CALD,IAKO,CAEH3kC,GAAG6V,aAAH,CAAkB7V,GAAGukC,QAArB,EACAvkC,GAAG0kC,SAAH,CAAc1kC,GAAG4kC,IAAjB,CAAuB5kC,GAAG+kC,SAA1B,EAEH,CACD,MAEJ,QAEI,GAAKjuB,kBAAL,CAA0B,CAEtB9W,GAAGskC,qBAAH,CAA0BtkC,GAAGukC,QAA7B,CAAuCvkC,GAAGukC,QAA1C,EACAvkC,GAAGwkC,iBAAH,CAAsBxkC,GAAGykC,GAAzB,CAA8BzkC,GAAG8kC,mBAAjC,CAAsD9kC,GAAGykC,GAAzD,CAA8DzkC,GAAG8kC,mBAAjE,EAEH,CALD,IAKO,CAEH9kC,GAAGskC,qBAAH,CAA0BtkC,GAAGukC,QAA7B,CAAuCvkC,GAAGukC,QAA1C,EACAvkC,GAAGwkC,iBAAH,CAAsBxkC,GAAG2kC,SAAzB,CAAoC3kC,GAAG8kC,mBAAvC,CAA4D9kC,GAAGykC,GAA/D,CAAoEzkC,GAAG8kC,mBAAvE,EAEH,CA3DT,CA+DH,CAEDlD,qBAAuB,IAAvB,CACAC,gBAAkB,IAAlB,CACAC,gBAAkB,IAAlB,CACAC,0BAA4B,IAA5B,CACAC,qBAAuB,IAAvB,CACAC,qBAAuB,IAAvB,CAEH,CA5ED,IA4EO,CAEHjsB,mBAAqBA,oBAAsBH,aAA3C,CACAC,cAAgBA,eAAiBH,QAAjC,CACAI,cAAgBA,eAAiBH,QAAjC,CAEA,GAAKC,gBAAkB+rB,oBAAlB,EAA0C5rB,qBAAuB+rB,yBAAtE,CAAkG,CAE9F/hC,GAAGskC,qBAAH,CAA0B/F,MAAMyG,OAAN,CAAenvB,aAAf,CAA1B,CAA0D0oB,MAAMyG,OAAN,CAAehvB,kBAAf,CAA1D,EAEA4rB,qBAAuB/rB,aAAvB,CACAksB,0BAA4B/rB,kBAA5B,CAEH,CAED,GAAKL,WAAaksB,eAAb,EAAgCjsB,WAAaksB,eAA7C,EAAgEhsB,gBAAkBksB,oBAAlF,EAA0GjsB,gBAAkBksB,oBAAjI,CAAwJ,CAEpJjiC,GAAGwkC,iBAAH,CAAsBjG,MAAMyG,OAAN,CAAervB,QAAf,CAAtB,CAAiD4oB,MAAMyG,OAAN,CAAepvB,QAAf,CAAjD,CAA4E2oB,MAAMyG,OAAN,CAAelvB,aAAf,CAA5E,CAA4GyoB,MAAMyG,OAAN,CAAejvB,aAAf,CAA5G,EAEA8rB,gBAAkBlsB,QAAlB,CACAmsB,gBAAkBlsB,QAAlB,CACAosB,qBAAuBlsB,aAAvB,CACAmsB,qBAAuBlsB,aAAvB,CAEH,CAEJ,CAED4rB,gBAAkBnsB,QAAlB,CACA0sB,yBAA2BprB,kBAA3B,CAEH,CAED,QAASmuB,YAAT,CAAsBr+B,QAAtB,CAAgCs+B,WAAhC,CAA8C,CAE1Ct+B,SAAS6O,IAAT,GAAkBvvC,UAAlB,CACMk9B,QAASpD,GAAG49B,SAAZ,CADN,CAEM16B,OAAQlD,GAAG49B,SAAX,CAFN,CAIA,GAAIpM,WAAc5qB,SAAS6O,IAAT,GAAkBxvC,QAApC,CACA,GAAKi/D,WAAL,CAAmB1T,UAAY,CAAEA,SAAd,CAEnBoS,aAAcpS,SAAd,EAEA5qB,SAAS8O,WAAT,GAAyB,IAAzB,CACM0oB,YAAax3B,SAAS4O,QAAtB,CAAgC5O,SAASiP,aAAzC,CAAwDjP,SAAS+O,QAAjE,CAA2E/O,SAASgP,QAApF,CAA8FhP,SAASoP,kBAAvG,CAA2HpP,SAASkP,aAApI,CAAmJlP,SAASmP,aAA5J,CAA2KnP,SAASkQ,kBAApL,CADN,CAEMsnB,YAAa73D,UAAb,CAFN,CAIAugB,YAAYu4C,OAAZ,CAAqBz4B,SAASqP,SAA9B,EACAnvB,YAAYk0C,OAAZ,CAAqBp0B,SAASsP,SAA9B,EACApvB,YAAYu3C,OAAZ,CAAqBz3B,SAASuP,UAA9B,EACAirB,YAAY/C,OAAZ,CAAqBz3B,SAAS4P,UAA9B,EAEA2uB,iBAAkBv+B,SAAS6P,aAA3B,CAA0C7P,SAAS8P,mBAAnD,CAAwE9P,SAAS+P,kBAAjF,EAEH,CAED;AAEA,QAASitB,aAAT,CAAuBpS,SAAvB,CAAmC,CAE/B,GAAK2Q,mBAAqB3Q,SAA1B,CAAsC,CAElC,GAAKA,SAAL,CAAiB,CAEbxxB,GAAGolC,SAAH,CAAcplC,GAAGqlC,EAAjB,EAEH,CAJD,IAIO,CAEHrlC,GAAGolC,SAAH,CAAcplC,GAAGslC,GAAjB,EAEH,CAEDnD,iBAAmB3Q,SAAnB,CAEH,CAEJ,CAED,QAASqS,YAAT,CAAsB0B,QAAtB,CAAiC,CAE7B,GAAKA,WAAahgE,YAAlB,CAAiC,CAE7B29B,OAAQlD,GAAG49B,SAAX,EAEA,GAAK2H,WAAanD,eAAlB,CAAoC,CAEhC,GAAKmD,WAAa//D,YAAlB,CAAiC,CAE7Bw6B,GAAGulC,QAAH,CAAavlC,GAAGwlC,IAAhB,EAEH,CAJD,IAIO,IAAKD,WAAa9/D,aAAlB,CAAkC,CAErCu6B,GAAGulC,QAAH,CAAavlC,GAAGylC,KAAhB,EAEH,CAJM,IAIA,CAEHzlC,GAAGulC,QAAH,CAAavlC,GAAG0lC,cAAhB,EAEH,CAEJ,CAEJ,CAtBD,IAsBO,CAEHtiC,QAASpD,GAAG49B,SAAZ,EAEH,CAEDwE,gBAAkBmD,QAAlB,CAEH,CAED,QAASI,aAAT,CAAuB74E,KAAvB,CAA+B,CAE3B,GAAKA,QAAUu1E,gBAAf,CAAkC,CAE9B,GAAKI,kBAAL,CAA0BziC,GAAG4lC,SAAH,CAAc94E,KAAd,EAE1Bu1E,iBAAmBv1E,KAAnB,CAEH,CAEJ,CAED,QAASq4E,iBAAT,CAA2B1uB,aAA3B,CAA0CovB,MAA1C,CAAkDla,KAAlD,CAA0D,CAEtD,GAAKlV,aAAL,CAAqB,CAEjBvT,OAAQlD,GAAG8lC,mBAAX,EAEA,GAAKxD,6BAA+BuD,MAA/B,EAAyCtD,4BAA8B5W,KAA5E,CAAoF,CAEhF3rB,GAAGyW,aAAH,CAAkBovB,MAAlB,CAA0Bla,KAA1B,EAEA2W,2BAA6BuD,MAA7B,CACAtD,0BAA4B5W,KAA5B,CAEH,CAEJ,CAbD,IAaO,CAEHvoB,QAASpD,GAAG8lC,mBAAZ,EAEH,CAEJ,CAED,QAAS7K,eAAT,CAAyBt0C,WAAzB,CAAuC,CAEnC,GAAKA,WAAL,CAAmB,CAEfuc,OAAQlD,GAAG+lC,YAAX,EAEH,CAJD,IAIO,CAEH3iC,QAASpD,GAAG+lC,YAAZ,EAEH,CAEJ,CAED;AAEA,QAASjI,cAAT,CAAwBkI,SAAxB,CAAoC,CAEhC,GAAKA,YAAcp0E,SAAnB,CAA+Bo0E,UAAYhmC,GAAG+9B,QAAH,CAActb,WAAd,CAA4B,CAAxC,CAE/B,GAAKmgB,qBAAuBoD,SAA5B,CAAwC,CAEpChmC,GAAG89B,aAAH,CAAkBkI,SAAlB,EACApD,mBAAqBoD,SAArB,CAEH,CAEJ,CAED,QAAS/C,YAAT,CAAsBgD,SAAtB,CAAiCC,YAAjC,CAAgD,CAE5C,GAAKtD,qBAAuB,IAA5B,CAAmC,CAE/B9E,gBAEH,CAED,GAAIqI,cAAetD,qBAAsBD,kBAAtB,CAAnB,CAEA,GAAKuD,eAAiBv0E,SAAtB,CAAkC,CAE9Bu0E,aAAe,CAAE5uE,KAAM3F,SAAR,CAAmBi1B,QAASj1B,SAA5B,CAAf,CACAixE,qBAAsBD,kBAAtB,EAA6CuD,YAA7C,CAEH,CAED,GAAKA,aAAa5uE,IAAb,GAAsB0uE,SAAtB,EAAmCE,aAAat/C,OAAb,GAAyBq/C,YAAjE,CAAgF,CAE5ElmC,GAAGijC,WAAH,CAAgBgD,SAAhB,CAA2BC,cAAgB1C,cAAeyC,SAAf,CAA3C,EAEAE,aAAa5uE,IAAb,CAAoB0uE,SAApB,CACAE,aAAat/C,OAAb,CAAuBq/C,YAAvB,CAEH,CAEJ,CAED,QAASE,qBAAT,EAAgC,CAE5B,GAAI,CAEApmC,GAAGomC,oBAAH,CAAwBC,KAAxB,CAA+BrmC,EAA/B,CAAmCr/B,SAAnC,EAEH,CAAC,MAAQuS,KAAR,CAAgB,CAEd/iB,QAAQ+iB,KAAR,CAAe,mBAAf,CAAoCA,KAApC,EAEH,CAEJ,CAED,QAASowD,WAAT,EAAsB,CAElB,GAAI,CAEAtjC,GAAGsjC,UAAH,CAAc+C,KAAd,CAAqBrmC,EAArB,CAAyBr/B,SAAzB,EAEH,CAAC,MAAQuS,KAAR,CAAgB,CAEd/iB,QAAQ+iB,KAAR,CAAe,mBAAf,CAAoCA,KAApC,EAEH,CAEJ,CAED;AAEA,QAASwT,QAAT,CAAkBA,OAAlB,CAA4B,CAExB,GAAKo8C,eAAetwD,MAAf,CAAuBkU,OAAvB,IAAqC,KAA1C,CAAkD,CAE9CsZ,GAAGtZ,OAAH,CAAYA,QAAQl7B,CAApB,CAAuBk7B,QAAQj7B,CAA/B,CAAkCi7B,QAAQh7B,CAA1C,CAA6Cg7B,QAAQ/V,CAArD,EACAmyD,eAAeruE,IAAf,CAAqBiyB,OAArB,EAEH,CAEJ,CAED,QAASE,SAAT,CAAmBA,QAAnB,CAA8B,CAE1B,GAAKm8C,gBAAgBvwD,MAAhB,CAAwBoU,QAAxB,IAAuC,KAA5C,CAAoD,CAEhDoZ,GAAGpZ,QAAH,CAAaA,SAASp7B,CAAtB,CAAyBo7B,SAASn7B,CAAlC,CAAqCm7B,SAASl7B,CAA9C,CAAiDk7B,SAASjW,CAA1D,EACAoyD,gBAAgBtuE,IAAhB,CAAsBmyB,QAAtB,EAEH,CAEJ,CAED;AAEA,QAASlyB,MAAT,EAAiB,CAEb,IAAM,GAAI8I,GAAI,CAAd,CAAiBA,EAAI+jE,kBAAkB3nE,MAAvC,CAA+C4D,GAA/C,CAAsD,CAElD,GAAK+jE,kBAAmB/jE,CAAnB,IAA2B,CAAhC,CAAoC,CAEhCwiC,GAAGkkC,wBAAH,CAA6B1mE,CAA7B,EACA+jE,kBAAmB/jE,CAAnB,EAAyB,CAAzB,CAEH,CAEJ,CAEDm2D,aAAe,EAAf,CAEA8N,yBAA2B,IAA3B,CAEAmB,mBAAqB,IAArB,CACAC,qBAAuB,EAAvB,CAEAnB,eAAiB,IAAjB,CAEAC,gBAAkB,IAAlB,CAEAQ,iBAAmB,IAAnB,CACAC,gBAAkB,IAAlB,CAEAhB,YAAY1sE,KAAZ,GACAoyB,YAAYpyB,KAAZ,GACAqyB,cAAcryB,KAAd,GAEH,CAED,MAAO,CAEHurC,QAAS,CACLvyC,MAAO0zE,WADF,CAELxiC,MAAO9X,WAFF,CAGLo6C,QAASn6C,aAHJ,CAFN,CAQH02C,eAAgBA,cARb,CASHC,gBAAiBA,eATd,CAUHoG,0BAA2BA,yBAVxB,CAWHnG,wBAAyBA,uBAXtB,CAYHz6B,OAAQA,MAZL,CAaHE,QAASA,OAbN,CAcH+gC,4BAA6BA,2BAd1B,CAgBH3G,WAAYA,UAhBT,CAkBHY,YAAaA,WAlBV,CAmBH6G,YAAaA,WAnBV,CAqBHrB,aAAcA,YArBX,CAsBHC,YAAaA,WAtBV,CAwBH8B,aAAcA,YAxBX,CAyBHR,iBAAkBA,gBAzBf,CA2BHlK,eAAgBA,cA3Bb,CA6BH6C,cAAeA,aA7BZ,CA8BHmF,YAAaA,WA9BV,CA+BHmD,qBAAsBA,oBA/BnB,CAgCH9C,WAAYA,UAhCT,CAkCH58C,QAASA,OAlCN,CAmCHE,SAAUA,QAnCP,CAqCHlyB,MAAOA,KArCJ,CAAP,CAyCH,CAED;;OAIA,QAAS4xE,cAAT,CAAwBzL,GAAxB,CAA6BtiB,UAA7B,CAAyCzjD,KAAzC,CAAgD2K,UAAhD,CAA4Dk0D,YAA5D,CAA0E4K,KAA1E,CAAiFld,IAAjF,CAAwF,CAEpF,GAAIklB,WAAc,MAAOC,uBAAP,GAAkC,WAAlC,EAAiD3L,cAAe2L,uBAAlF,CAA4G,mCAC5G,GAAIC,gBAAiB,EAArB,CACA,GAAIC,QAAJ,CAEA;AAEA,QAASC,eAAT,CAAyBljD,KAAzB,CAAgCmjD,OAAhC,CAA0C,CAEtC,GAAKnjD,MAAM32B,KAAN,CAAc85E,OAAd,EAAyBnjD,MAAM12B,MAAN,CAAe65E,OAA7C,CAAuD,CAEnD,GAAK,QAAUnjD,MAAf,CAAuB,CAEnBtzB,QAAQgK,IAAR,CAAc,yDAA2DspB,MAAM32B,KAAjE,CAAyE,GAAzE,CAA+E22B,MAAM12B,MAArF,CAA8F,IAA5G,EACA,OAEH,CAED;AACA;AAEA,GAAIqJ,OAAQwwE,QAAU13E,KAAK8G,GAAL,CAAUytB,MAAM32B,KAAhB,CAAuB22B,MAAM12B,MAA7B,CAAtB,CAEA,GAAIjC,QAAS+G,SAASuzB,eAAT,CAA0B,8BAA1B,CAA0D,QAA1D,CAAb,CACAt6B,OAAOgC,KAAP,CAAeoC,KAAKmT,KAAL,CAAYohB,MAAM32B,KAAN,CAAcsJ,KAA1B,CAAf,CACAtL,OAAOiC,MAAP,CAAgBmC,KAAKmT,KAAL,CAAYohB,MAAM12B,MAAN,CAAeqJ,KAA3B,CAAhB,CAEA,GAAIlL,SAAUJ,OAAOC,UAAP,CAAmB,IAAnB,CAAd,CACAG,QAAQq6B,SAAR,CAAmB9B,KAAnB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgCA,MAAM32B,KAAtC,CAA6C22B,MAAM12B,MAAnD,CAA2D,CAA3D,CAA8D,CAA9D,CAAiEjC,OAAOgC,KAAxE,CAA+EhC,OAAOiC,MAAtF,EAEAoD,QAAQgK,IAAR,CAAc,0CAA4CspB,MAAM32B,KAAlD,CAA0D,GAA1D,CAAgE22B,MAAM12B,MAAtE,CAA+E,gBAA/E,CAAkGjC,OAAOgC,KAAzG,CAAiH,GAAjH,CAAuHhC,OAAOiC,MAA5I,CAAoJ02B,KAApJ,EAEA,MAAO34B,OAAP,CAEH,CAED,MAAO24B,MAAP,CAEH,CAED,QAAS3T,aAAT,CAAuB2T,KAAvB,CAA+B,CAE3B,MAAO1V,OAAM+B,YAAN,CAAoB2T,MAAM32B,KAA1B,GAAqCihB,MAAM+B,YAAN,CAAoB2T,MAAM12B,MAA1B,CAA5C,CAEH,CAED,QAAS85E,eAAT,CAAyBpjD,KAAzB,CAAiC,CAE7B,GAAKA,gBAAiBqjD,iBAAjB,EAAqCrjD,gBAAiB0B,kBAAtD,EAA2E1B,gBAAiBsjD,YAAjG,CAA+G,CAE3G,GAAKL,UAAY90E,SAAjB,CAA6B80E,QAAU70E,SAASuzB,eAAT,CAA0B,8BAA1B,CAA0D,QAA1D,CAAV,CAE7BshD,QAAQ55E,KAAR,CAAgBihB,MAAMmC,eAAN,CAAuBuT,MAAM32B,KAA7B,CAAhB,CACA45E,QAAQ35E,MAAR,CAAiBghB,MAAMmC,eAAN,CAAuBuT,MAAM12B,MAA7B,CAAjB,CAEA,GAAI7B,SAAUw7E,QAAQ37E,UAAR,CAAoB,IAApB,CAAd,CACAG,QAAQq6B,SAAR,CAAmB9B,KAAnB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgCijD,QAAQ55E,KAAxC,CAA+C45E,QAAQ35E,MAAvD,EAEAoD,QAAQgK,IAAR,CAAc,mDAAqDspB,MAAM32B,KAA3D,CAAmE,GAAnE,CAAyE22B,MAAM12B,MAA/E,CAAwF,gBAAxF,CAA2G25E,QAAQ55E,KAAnH,CAA2H,GAA3H,CAAiI45E,QAAQ35E,MAAvJ,CAA+J02B,KAA/J,EAEA,MAAOijD,QAAP,CAEH,CAED,MAAOjjD,MAAP,CAEH,CAED,QAASujD,uBAAT,CAAiCngD,OAAjC,CAA2C,CAEvC,MAASA,SAAQlD,KAAR,GAAkBra,mBAAlB,EAAyCud,QAAQjD,KAAR,GAAkBta,mBAA7D,EACDud,QAAQ/C,SAAR,GAAsBta,aAAtB,EAAuCqd,QAAQ/C,SAAR,GAAsBna,YADnE,CAGH,CAED,QAASs9D,4BAAT,CAAsCpgD,OAAtC,CAA+C/W,YAA/C,CAA8D,CAE1D,MAAO+W,SAAQtC,eAAR,EAA2BzU,YAA3B,EACH+W,QAAQ/C,SAAR,GAAsBta,aADnB,EACoCqd,QAAQ/C,SAAR,GAAsBna,YADjE,CAGH,CAED,QAASu9D,eAAT,CAAyBj6E,MAAzB,CAAiC45B,OAAjC,CAA0C/5B,KAA1C,CAAiDC,MAAjD,CAA0D,CAEtD8tE,IAAIqM,cAAJ,CAAoBj6E,MAApB,EAEA,GAAIk6E,mBAAoB1nE,WAAW7C,GAAX,CAAgBiqB,OAAhB,CAAxB,CAEA;AACAsgD,kBAAkBC,aAAlB,CAAkCl4E,KAAKkB,GAAL,CAAUlB,KAAK8G,GAAL,CAAUlJ,KAAV,CAAiBC,MAAjB,CAAV,EAAwCmC,KAAKm4E,KAA/E,CAEH,CAED;AAEA,QAASC,eAAT,CAAyBllE,CAAzB,CAA6B,CAEzB,GAAKA,IAAMoH,aAAN,EAAuBpH,IAAMqH,0BAA7B,EAA2DrH,IAAMsH,yBAAtE,CAAkG,CAE9F,MAAOmxD,KAAIuI,OAAX,CAEH,CAED,MAAOvI,KAAI0M,MAAX,CAEH,CAED;AAEA,QAASC,iBAAT,CAA2BhtE,KAA3B,CAAmC,CAE/B,GAAIqsB,SAAUrsB,MAAMvN,MAApB,CAEA45B,QAAQ/vB,mBAAR,CAA6B,SAA7B,CAAwC0wE,gBAAxC,EAEAC,kBAAmB5gD,OAAnB,EAEA,GAAKA,QAAQ6gD,cAAb,CAA8B,CAE1B,MAAOjB,gBAAgB5/C,QAAQ78B,EAAxB,CAAP,CAEH,CAEDq3D,KAAKuE,MAAL,CAAY3gC,QAAZ,GAEH,CAED,QAAS0iD,sBAAT,CAAgCntE,KAAhC,CAAwC,CAEpC,GAAIotE,cAAeptE,MAAMvN,MAAzB,CAEA26E,aAAa9wE,mBAAb,CAAkC,SAAlC,CAA6C6wE,qBAA7C,EAEAE,uBAAwBD,YAAxB,EAEAvmB,KAAKuE,MAAL,CAAY3gC,QAAZ,GAEH,CAED;AAEA,QAASwiD,kBAAT,CAA4B5gD,OAA5B,CAAsC,CAElC,GAAIsgD,mBAAoB1nE,WAAW7C,GAAX,CAAgBiqB,OAAhB,CAAxB,CAEA,GAAKA,QAAQpD,KAAR,EAAiB0jD,kBAAkBW,yBAAxC,CAAoE,CAEhE;AAEAjN,IAAIkN,aAAJ,CAAmBZ,kBAAkBW,yBAArC,EAEH,CAND,IAMO,CAEH;AAEA,GAAKX,kBAAkBa,WAAlB,GAAkCp2E,SAAvC,CAAmD,OAEnDipE,IAAIkN,aAAJ,CAAmBZ,kBAAkBc,cAArC,EAEH,CAED;AACAxoE,WAAWlC,MAAX,CAAmBspB,OAAnB,EAEH,CAED,QAASghD,uBAAT,CAAiCD,YAAjC,CAAgD,CAE5C,GAAIM,wBAAyBzoE,WAAW7C,GAAX,CAAgBgrE,YAAhB,CAA7B,CACA,GAAIT,mBAAoB1nE,WAAW7C,GAAX,CAAgBgrE,aAAa/gD,OAA7B,CAAxB,CAEA,GAAK,CAAE+gD,YAAP,CAAsB,OAEtB,GAAKT,kBAAkBc,cAAlB,GAAqCr2E,SAA1C,CAAsD,CAElDipE,IAAIkN,aAAJ,CAAmBZ,kBAAkBc,cAArC,EAEH,CAED,GAAKL,aAAa5gD,YAAlB,CAAiC,CAE7B4gD,aAAa5gD,YAAb,CAA0BnwB,OAA1B,GAEH,CAED,GAAK+wE,aAAavgD,uBAAlB,CAA4C,CAExC,IAAM,GAAI7pB,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3Bq9D,IAAIsN,iBAAJ,CAAuBD,uBAAuBE,kBAAvB,CAA2C5qE,CAA3C,CAAvB,EACA,GAAK0qE,uBAAuBG,kBAA5B,CAAiDxN,IAAIyN,kBAAJ,CAAwBJ,uBAAuBG,kBAAvB,CAA2C7qE,CAA3C,CAAxB,EAEpD,CAEJ,CATD,IASO,CAEHq9D,IAAIsN,iBAAJ,CAAuBD,uBAAuBE,kBAA9C,EACA,GAAKF,uBAAuBG,kBAA5B,CAAiDxN,IAAIyN,kBAAJ,CAAwBJ,uBAAuBG,kBAA/C,EAEpD,CAED5oE,WAAWlC,MAAX,CAAmBqqE,aAAa/gD,OAAhC,EACApnB,WAAWlC,MAAX,CAAmBqqE,YAAnB,EAEH,CAED;AAIA,QAASvd,aAAT,CAAuBxjC,OAAvB,CAAgC0hD,IAAhC,CAAuC,CAEnC,GAAIpB,mBAAoB1nE,WAAW7C,GAAX,CAAgBiqB,OAAhB,CAAxB,CAEA,GAAKA,QAAQ6gD,cAAb,CAA8Bc,mBAAoB3hD,OAApB,EAE9B,GAAKA,QAAQlC,OAAR,CAAkB,CAAlB,EAAuBwiD,kBAAkBsB,SAAlB,GAAgC5hD,QAAQlC,OAApE,CAA8E,CAE1E,GAAIlB,OAAQoD,QAAQpD,KAApB,CAEA,GAAKA,QAAU7xB,SAAf,CAA2B,CAEvBzB,QAAQgK,IAAR,CAAc,uEAAd,CAAuF0sB,OAAvF,EAEH,CAJD,IAIO,IAAKpD,MAAMilD,QAAN,GAAmB,KAAxB,CAAgC,CAEnCv4E,QAAQgK,IAAR,CAAc,wEAAd,CAAwF0sB,OAAxF,EAEH,CAJM,IAIA,CAEH8hD,cAAexB,iBAAf,CAAkCtgD,OAAlC,CAA2C0hD,IAA3C,EACA,OAEH,CAEJ,CAEDzzE,MAAMgpE,aAAN,CAAqBjD,IAAIkD,QAAJ,CAAewK,IAApC,EACAzzE,MAAMmuE,WAAN,CAAmBpI,IAAI4I,UAAvB,CAAmC0D,kBAAkBc,cAArD,EAEH,CAED,QAAS1d,eAAT,CAAyB1jC,OAAzB,CAAkC0hD,IAAlC,CAAyC,CAErC,GAAIpB,mBAAoB1nE,WAAW7C,GAAX,CAAgBiqB,OAAhB,CAAxB,CAEA,GAAKA,QAAQpD,KAAR,CAAc7pB,MAAd,GAAyB,CAA9B,CAAkC,CAE9B,GAAKitB,QAAQlC,OAAR,CAAkB,CAAlB,EAAuBwiD,kBAAkBsB,SAAlB,GAAgC5hD,QAAQlC,OAApE,CAA8E,CAE1E,GAAK,CAAEwiD,kBAAkBW,yBAAzB,CAAqD,CAEjDjhD,QAAQh3B,gBAAR,CAA0B,SAA1B,CAAqC23E,gBAArC,EAEAL,kBAAkBW,yBAAlB,CAA8CjN,IAAImI,aAAJ,EAA9C,CAEA3hB,KAAKuE,MAAL,CAAY3gC,QAAZ,GAEH,CAEDnwB,MAAMgpE,aAAN,CAAqBjD,IAAIkD,QAAJ,CAAewK,IAApC,EACAzzE,MAAMmuE,WAAN,CAAmBpI,IAAI6I,gBAAvB,CAAyCyD,kBAAkBW,yBAA3D,EAEAjN,IAAI+N,WAAJ,CAAiB/N,IAAIgO,mBAArB,CAA0ChiD,QAAQpC,KAAlD,EAEA,GAAIqkD,cAAiBjiD,SAAWA,QAAQkiD,mBAAxC,CACA,GAAIxhD,eAAkBV,QAAQpD,KAAR,CAAe,CAAf,GAAsBoD,QAAQpD,KAAR,CAAe,CAAf,EAAmB8D,aAA/D,CAEA,GAAIyhD,WAAY,EAAhB,CAEA,IAAM,GAAIxrE,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAK,CAAEsrE,YAAF,EAAkB,CAAEvhD,aAAzB,CAAyC,CAErCyhD,UAAWxrE,CAAX,EAAiBmpE,eAAgB9/C,QAAQpD,KAAR,CAAejmB,CAAf,CAAhB,CAAoCm2D,aAAa5Q,cAAjD,CAAjB,CAEH,CAJD,IAIO,CAEHimB,UAAWxrE,CAAX,EAAiB+pB,cAAgBV,QAAQpD,KAAR,CAAejmB,CAAf,EAAmBimB,KAAnC,CAA2CoD,QAAQpD,KAAR,CAAejmB,CAAf,CAA5D,CAEH,CAEJ,CAED,GAAIimB,OAAQulD,UAAW,CAAX,CAAZ,CACIC,kBAAoBn5D,aAAc2T,KAAd,CADxB,CAEIylD,SAAW3K,MAAMyG,OAAN,CAAen+C,QAAQ9C,MAAvB,CAFf,CAGIolD,OAAS5K,MAAMyG,OAAN,CAAen+C,QAAQtvB,IAAvB,CAHb,CAKA6xE,qBAAsBvO,IAAI6I,gBAA1B,CAA4C78C,OAA5C,CAAqDoiD,iBAArD,EAEA,IAAM,GAAIzrE,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B,GAAK,CAAEsrE,YAAP,CAAsB,CAElB,GAAKvhD,aAAL,CAAqB,CAEjBzyB,MAAMwuE,UAAN,CAAkBzI,IAAI8I,2BAAJ,CAAkCnmE,CAApD,CAAuD,CAAvD,CAA0D0rE,QAA1D,CAAoEF,UAAWxrE,CAAX,EAAe1Q,KAAnF,CAA0Fk8E,UAAWxrE,CAAX,EAAezQ,MAAzG,CAAiH,CAAjH,CAAoHm8E,QAApH,CAA8HC,MAA9H,CAAsIH,UAAWxrE,CAAX,EAAexN,IAArJ,EAEH,CAJD,IAIO,CAEH8E,MAAMwuE,UAAN,CAAkBzI,IAAI8I,2BAAJ,CAAkCnmE,CAApD,CAAuD,CAAvD,CAA0D0rE,QAA1D,CAAoEA,QAApE,CAA8EC,MAA9E,CAAsFH,UAAWxrE,CAAX,CAAtF,EAEH,CAEJ,CAZD,IAYO,CAEH,GAAI6rE,OAAJ,CAAYjlD,QAAU4kD,UAAWxrE,CAAX,EAAe4mB,OAArC,CAEA,IAAM,GAAI0G,GAAI,CAAR,CAAW4e,GAAKtlB,QAAQxqB,MAA9B,CAAsCkxB,EAAI4e,EAA1C,CAA8C5e,GAA9C,CAAqD,CAEjDu+C,OAASjlD,QAAS0G,CAAT,CAAT,CAEA,GAAKjE,QAAQ9C,MAAR,GAAmBnZ,UAAnB,EAAiCic,QAAQ9C,MAAR,GAAmBpZ,SAAzD,CAAqE,CAEjE,GAAK7V,MAAMqvE,2BAAN,GAAoC1mE,OAApC,CAA6CyrE,QAA7C,EAA0D,CAAE,CAAjE,CAAqE,CAEjEp0E,MAAMsxE,oBAAN,CAA4BvL,IAAI8I,2BAAJ,CAAkCnmE,CAA9D,CAAiEstB,CAAjE,CAAoEo+C,QAApE,CAA8EG,OAAOv8E,KAArF,CAA4Fu8E,OAAOt8E,MAAnG,CAA2G,CAA3G,CAA8Gs8E,OAAOr5E,IAArH,EAEH,CAJD,IAIO,CAEHG,QAAQgK,IAAR,CAAc,iGAAd,EAEH,CAEJ,CAZD,IAYO,CAEHrF,MAAMwuE,UAAN,CAAkBzI,IAAI8I,2BAAJ,CAAkCnmE,CAApD,CAAuDstB,CAAvD,CAA0Do+C,QAA1D,CAAoEG,OAAOv8E,KAA3E,CAAkFu8E,OAAOt8E,MAAzF,CAAiG,CAAjG,CAAoGm8E,QAApG,CAA8GC,MAA9G,CAAsHE,OAAOr5E,IAA7H,EAEH,CAEJ,CAEJ,CAEJ,CAED,GAAK,CAAE84E,YAAP,CAAsB,CAElB3B,kBAAkBC,aAAlB,CAAkC,CAAlC,CAEH,CAJD,IAIO,CAEHD,kBAAkBC,aAAlB,CAAkChjD,QAAQxqB,MAAR,CAAiB,CAAnD,CAEH,CAED,GAAKqtE,4BAA6BpgD,OAA7B,CAAsCoiD,iBAAtC,CAAL,CAAiE,CAE7D;AACA/B,eAAgBrM,IAAI6I,gBAApB,CAAsC78C,OAAtC,CAA+CpD,MAAM32B,KAArD,CAA4D22B,MAAM12B,MAAlE,EAEH,CAEDo6E,kBAAkBsB,SAAlB,CAA8B5hD,QAAQlC,OAAtC,CAEA,GAAKkC,QAAQ91B,QAAb,CAAwB81B,QAAQ91B,QAAR,CAAkB81B,OAAlB,EAE3B,CA9GD,IA8GO,CAEH/xB,MAAMgpE,aAAN,CAAqBjD,IAAIkD,QAAJ,CAAewK,IAApC,EACAzzE,MAAMmuE,WAAN,CAAmBpI,IAAI6I,gBAAvB,CAAyCyD,kBAAkBW,yBAA3D,EAEH,CAEJ,CAEJ,CAED,QAASwB,sBAAT,CAAgCziD,OAAhC,CAAyC0hD,IAAzC,CAAgD,CAE5CzzE,MAAMgpE,aAAN,CAAqBjD,IAAIkD,QAAJ,CAAewK,IAApC,EACAzzE,MAAMmuE,WAAN,CAAmBpI,IAAI6I,gBAAvB,CAAyCjkE,WAAW7C,GAAX,CAAgBiqB,OAAhB,EAA0BohD,cAAnE,EAEH,CAED,QAASmB,qBAAT,CAA+BG,WAA/B,CAA4C1iD,OAA5C,CAAqDoiD,iBAArD,CAAyE,CAErE,GAAIvnB,UAAJ,CAEA,GAAKunB,iBAAL,CAAyB,CAErBpO,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAI2O,cAApC,CAAoDjL,MAAMyG,OAAN,CAAen+C,QAAQlD,KAAvB,CAApD,EACAk3C,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAI4O,cAApC,CAAoDlL,MAAMyG,OAAN,CAAen+C,QAAQjD,KAAvB,CAApD,EAEAi3C,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAIwI,kBAApC,CAAwD9E,MAAMyG,OAAN,CAAen+C,QAAQhD,SAAvB,CAAxD,EACAg3C,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAIsI,kBAApC,CAAwD5E,MAAMyG,OAAN,CAAen+C,QAAQ/C,SAAvB,CAAxD,EAEH,CARD,IAQO,CAEH+2C,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAI2O,cAApC,CAAoD3O,IAAI6O,aAAxD,EACA7O,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAI4O,cAApC,CAAoD5O,IAAI6O,aAAxD,EAEA,GAAK7iD,QAAQlD,KAAR,GAAkBra,mBAAlB,EAAyCud,QAAQjD,KAAR,GAAkBta,mBAAhE,CAAsF,CAElFnZ,QAAQgK,IAAR,CAAc,+HAAd,CAA+I0sB,OAA/I,EAEH,CAEDg0C,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAIwI,kBAApC,CAAwDiE,eAAgBzgD,QAAQhD,SAAxB,CAAxD,EACAg3C,IAAIqI,aAAJ,CAAmBqG,WAAnB,CAAgC1O,IAAIsI,kBAApC,CAAwDmE,eAAgBzgD,QAAQ/C,SAAxB,CAAxD,EAEA,GAAK+C,QAAQ/C,SAAR,GAAsBta,aAAtB,EAAuCqd,QAAQ/C,SAAR,GAAsBna,YAAlE,CAAiF,CAE7ExZ,QAAQgK,IAAR,CAAc,iIAAd,CAAiJ0sB,OAAjJ,EAEH,CAEJ,CAED66B,UAAYnJ,WAAW37C,GAAX,CAAgB,gCAAhB,CAAZ,CAEA,GAAK8kD,SAAL,CAAiB,CAEb,GAAK76B,QAAQtvB,IAAR,GAAiB6S,SAAjB,EAA8BmuC,WAAW37C,GAAX,CAAgB,0BAAhB,IAAiD,IAApF,CAA2F,OAC3F,GAAKiqB,QAAQtvB,IAAR,GAAiB8S,aAAjB,EAAkCkuC,WAAW37C,GAAX,CAAgB,+BAAhB,IAAsD,IAA7F,CAAoG,OAEpG,GAAKiqB,QAAQ7C,UAAR,CAAqB,CAArB,EAA0BvkB,WAAW7C,GAAX,CAAgBiqB,OAAhB,EAA0B8iD,mBAAzD,CAA+E,CAE3E9O,IAAI+O,aAAJ,CAAmBL,WAAnB,CAAgC7nB,UAAUmoB,0BAA1C,CAAsE36E,KAAK+G,GAAL,CAAU4wB,QAAQ7C,UAAlB,CAA8B2vC,aAAa5R,gBAAb,EAA9B,CAAtE,EACAtiD,WAAW7C,GAAX,CAAgBiqB,OAAhB,EAA0B8iD,mBAA1B,CAAgD9iD,QAAQ7C,UAAxD,CAEH,CAEJ,CAEJ,CAED,QAAS2kD,cAAT,CAAwBxB,iBAAxB,CAA2CtgD,OAA3C,CAAoD0hD,IAApD,CAA2D,CAEvD,GAAKpB,kBAAkBa,WAAlB,GAAkCp2E,SAAvC,CAAmD,CAE/Cu1E,kBAAkBa,WAAlB,CAAgC,IAAhC,CAEAnhD,QAAQh3B,gBAAR,CAA0B,SAA1B,CAAqC23E,gBAArC,EAEAL,kBAAkBc,cAAlB,CAAmCpN,IAAImI,aAAJ,EAAnC,CAEA3hB,KAAKuE,MAAL,CAAY3gC,QAAZ,GAEH,CAEDnwB,MAAMgpE,aAAN,CAAqBjD,IAAIkD,QAAJ,CAAewK,IAApC,EACAzzE,MAAMmuE,WAAN,CAAmBpI,IAAI4I,UAAvB,CAAmC0D,kBAAkBc,cAArD,EAEApN,IAAI+N,WAAJ,CAAiB/N,IAAIgO,mBAArB,CAA0ChiD,QAAQpC,KAAlD,EACAo2C,IAAI+N,WAAJ,CAAiB/N,IAAIiP,8BAArB,CAAqDjjD,QAAQrC,gBAA7D,EACAq2C,IAAI+N,WAAJ,CAAiB/N,IAAIkP,gBAArB,CAAuCljD,QAAQnC,eAA/C,EAEA,GAAIjB,OAAQkjD,eAAgB9/C,QAAQpD,KAAxB,CAA+BkwC,aAAa9Q,cAA5C,CAAZ,CAEA,GAAKmkB,uBAAwBngD,OAAxB,GAAqC/W,aAAc2T,KAAd,IAA0B,KAApE,CAA4E,CAExEA,MAAQojD,eAAgBpjD,KAAhB,CAAR,CAEH,CAED,GAAIwlD,mBAAoBn5D,aAAc2T,KAAd,CAAxB,CACIylD,SAAW3K,MAAMyG,OAAN,CAAen+C,QAAQ9C,MAAvB,CADf,CAEIolD,OAAS5K,MAAMyG,OAAN,CAAen+C,QAAQtvB,IAAvB,CAFb,CAIA6xE,qBAAsBvO,IAAI4I,UAA1B,CAAsC58C,OAAtC,CAA+CoiD,iBAA/C,EAEA,GAAII,OAAJ,CAAYjlD,QAAUyC,QAAQzC,OAA9B,CAEA,GAAKyC,QAAQmjD,cAAb,CAA8B,CAE1B;AAEA,GAAIC,gBAAiBpP,IAAIqP,eAAzB,CAEA,GAAKrjD,QAAQtvB,IAAR,GAAiB6S,SAAtB,CAAkC,CAE9B,GAAK,CAAEm8D,SAAP,CAAmB,KAAM,IAAI91D,MAAJ,CAAW,gDAAX,CAAN,CACnBw5D,eAAiBpP,IAAIsP,kBAArB,CAEH,CALD,IAKO,IAAK5D,SAAL,CAAiB,CAEpB;AACA0D,eAAiBpP,IAAIuP,iBAArB,CAEH,CAED,GAAKvjD,QAAQ9C,MAAR,GAAmB/Y,WAAnB,EAAkCi/D,iBAAmBpP,IAAIqP,eAA9D,CAAgF,CAE5E;AACA;AACA;AACA,GAAKrjD,QAAQtvB,IAAR,GAAiB0S,iBAAjB,EAAsC4c,QAAQtvB,IAAR,GAAiB4S,eAA5D,CAA8E,CAE1Eha,QAAQgK,IAAR,CAAc,6FAAd,EAEA0sB,QAAQtvB,IAAR,CAAe0S,iBAAf,CACAk/D,OAAS5K,MAAMyG,OAAN,CAAen+C,QAAQtvB,IAAvB,CAAT,CAEH,CAEJ,CAED;AACA;AACA,GAAKsvB,QAAQ9C,MAAR,GAAmB9Y,kBAAxB,CAA6C,CAEzCg/D,eAAiBpP,IAAIwP,aAArB,CAEA;AACA;AACA;AACA,GAAKxjD,QAAQtvB,IAAR,GAAiBkT,kBAAtB,CAA2C,CAEvCta,QAAQgK,IAAR,CAAc,kFAAd,EAEA0sB,QAAQtvB,IAAR,CAAekT,kBAAf,CACA0+D,OAAS5K,MAAMyG,OAAN,CAAen+C,QAAQtvB,IAAvB,CAAT,CAEH,CAEJ,CAEDzC,MAAMwuE,UAAN,CAAkBzI,IAAI4I,UAAtB,CAAkC,CAAlC,CAAqCwG,cAArC,CAAqDxmD,MAAM32B,KAA3D,CAAkE22B,MAAM12B,MAAxE,CAAgF,CAAhF,CAAmFm8E,QAAnF,CAA6FC,MAA7F,CAAqG,IAArG,EAEH,CAxDD,IAwDO,IAAKtiD,QAAQU,aAAb,CAA6B,CAEhC;AACA;AACA;AAEA,GAAKnD,QAAQxqB,MAAR,CAAiB,CAAjB,EAAsBqvE,iBAA3B,CAA+C,CAE3C,IAAM,GAAIzrE,GAAI,CAAR,CAAW6qB,GAAKjE,QAAQxqB,MAA9B,CAAsC4D,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjD6rE,OAASjlD,QAAS5mB,CAAT,CAAT,CACA1I,MAAMwuE,UAAN,CAAkBzI,IAAI4I,UAAtB,CAAkCjmE,CAAlC,CAAqC0rE,QAArC,CAA+CG,OAAOv8E,KAAtD,CAA6Du8E,OAAOt8E,MAApE,CAA4E,CAA5E,CAA+Em8E,QAA/E,CAAyFC,MAAzF,CAAiGE,OAAOr5E,IAAxG,EAEH,CAED62B,QAAQtC,eAAR,CAA0B,KAA1B,CACA4iD,kBAAkBC,aAAlB,CAAkChjD,QAAQxqB,MAAR,CAAiB,CAAnD,CAEH,CAZD,IAYO,CAEH9E,MAAMwuE,UAAN,CAAkBzI,IAAI4I,UAAtB,CAAkC,CAAlC,CAAqCyF,QAArC,CAA+CzlD,MAAM32B,KAArD,CAA4D22B,MAAM12B,MAAlE,CAA0E,CAA1E,CAA6Em8E,QAA7E,CAAuFC,MAAvF,CAA+F1lD,MAAMzzB,IAArG,EACAm3E,kBAAkBC,aAAlB,CAAkC,CAAlC,CAEH,CAEJ,CAzBM,IAyBA,IAAKvgD,QAAQkiD,mBAAb,CAAmC,CAEtC,IAAM,GAAIvrE,GAAI,CAAR,CAAW6qB,GAAKjE,QAAQxqB,MAA9B,CAAsC4D,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjD6rE,OAASjlD,QAAS5mB,CAAT,CAAT,CAEA,GAAKqpB,QAAQ9C,MAAR,GAAmBnZ,UAAnB,EAAiCic,QAAQ9C,MAAR,GAAmBpZ,SAAzD,CAAqE,CAEjE,GAAK7V,MAAMqvE,2BAAN,GAAoC1mE,OAApC,CAA6CyrE,QAA7C,EAA0D,CAAE,CAAjE,CAAqE,CAEjEp0E,MAAMsxE,oBAAN,CAA4BvL,IAAI4I,UAAhC,CAA4CjmE,CAA5C,CAA+C0rE,QAA/C,CAAyDG,OAAOv8E,KAAhE,CAAuEu8E,OAAOt8E,MAA9E,CAAsF,CAAtF,CAAyFs8E,OAAOr5E,IAAhG,EAEH,CAJD,IAIO,CAEHG,QAAQgK,IAAR,CAAc,gGAAd,EAEH,CAEJ,CAZD,IAYO,CAEHrF,MAAMwuE,UAAN,CAAkBzI,IAAI4I,UAAtB,CAAkCjmE,CAAlC,CAAqC0rE,QAArC,CAA+CG,OAAOv8E,KAAtD,CAA6Du8E,OAAOt8E,MAApE,CAA4E,CAA5E,CAA+Em8E,QAA/E,CAAyFC,MAAzF,CAAiGE,OAAOr5E,IAAxG,EAEH,CAEJ,CAEDm3E,kBAAkBC,aAAlB,CAAkChjD,QAAQxqB,MAAR,CAAiB,CAAnD,CAEH,CA5BM,IA4BA,CAEH;AAEA;AACA;AACA;AAEA,GAAKwqB,QAAQxqB,MAAR,CAAiB,CAAjB,EAAsBqvE,iBAA3B,CAA+C,CAE3C,IAAM,GAAIzrE,GAAI,CAAR,CAAW6qB,GAAKjE,QAAQxqB,MAA9B,CAAsC4D,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjD6rE,OAASjlD,QAAS5mB,CAAT,CAAT,CACA1I,MAAMwuE,UAAN,CAAkBzI,IAAI4I,UAAtB,CAAkCjmE,CAAlC,CAAqC0rE,QAArC,CAA+CA,QAA/C,CAAyDC,MAAzD,CAAiEE,MAAjE,EAEH,CAEDxiD,QAAQtC,eAAR,CAA0B,KAA1B,CACA4iD,kBAAkBC,aAAlB,CAAkChjD,QAAQxqB,MAAR,CAAiB,CAAnD,CAEH,CAZD,IAYO,CAEH9E,MAAMwuE,UAAN,CAAkBzI,IAAI4I,UAAtB,CAAkC,CAAlC,CAAqCyF,QAArC,CAA+CA,QAA/C,CAAyDC,MAAzD,CAAiE1lD,KAAjE,EACA0jD,kBAAkBC,aAAlB,CAAkC,CAAlC,CAEH,CAEJ,CAED,GAAKH,4BAA6BpgD,OAA7B,CAAsCoiD,iBAAtC,CAAL,CAAiE,CAE7D/B,eAAgBrM,IAAI4I,UAApB,CAAgC58C,OAAhC,CAAyCpD,MAAM32B,KAA/C,CAAsD22B,MAAM12B,MAA5D,EAEH,CAEDo6E,kBAAkBsB,SAAlB,CAA8B5hD,QAAQlC,OAAtC,CAEA,GAAKkC,QAAQ91B,QAAb,CAAwB81B,QAAQ91B,QAAR,CAAkB81B,OAAlB,EAE3B,CAED;AAEA;AACA,QAASyjD,wBAAT,CAAkCC,WAAlC,CAA+C3C,YAA/C,CAA6D4C,UAA7D,CAAyEC,aAAzE,CAAyF,CAErF,GAAIvB,UAAW3K,MAAMyG,OAAN,CAAe4C,aAAa/gD,OAAb,CAAqB9C,MAApC,CAAf,CACA,GAAIolD,QAAS5K,MAAMyG,OAAN,CAAe4C,aAAa/gD,OAAb,CAAqBtvB,IAApC,CAAb,CACAzC,MAAMwuE,UAAN,CAAkBmH,aAAlB,CAAiC,CAAjC,CAAoCvB,QAApC,CAA8CtB,aAAa96E,KAA3D,CAAkE86E,aAAa76E,MAA/E,CAAuF,CAAvF,CAA0Fm8E,QAA1F,CAAoGC,MAApG,CAA4G,IAA5G,EACAtO,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsCJ,WAAtC,EACA1P,IAAI+P,oBAAJ,CAA0B/P,IAAI8P,WAA9B,CAA2CH,UAA3C,CAAuDC,aAAvD,CAAsEhrE,WAAW7C,GAAX,CAAgBgrE,aAAa/gD,OAA7B,EAAuCohD,cAA7G,CAA6H,CAA7H,EACApN,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsC,IAAtC,EAEH,CAED;AACA,QAASE,yBAAT,CAAmCC,YAAnC,CAAiDlD,YAAjD,CAAgE,CAE5D/M,IAAIkQ,gBAAJ,CAAsBlQ,IAAImQ,YAA1B,CAAwCF,YAAxC,EAEA,GAAKlD,aAAa9gD,WAAb,EAA4B,CAAE8gD,aAAa7gD,aAAhD,CAAgE,CAE5D8zC,IAAIoQ,mBAAJ,CAAyBpQ,IAAImQ,YAA7B,CAA2CnQ,IAAIuP,iBAA/C,CAAkExC,aAAa96E,KAA/E,CAAsF86E,aAAa76E,MAAnG,EACA8tE,IAAIqQ,uBAAJ,CAA6BrQ,IAAI8P,WAAjC,CAA8C9P,IAAIsQ,gBAAlD,CAAoEtQ,IAAImQ,YAAxE,CAAsFF,YAAtF,EAEH,CALD,IAKO,IAAKlD,aAAa9gD,WAAb,EAA4B8gD,aAAa7gD,aAA9C,CAA8D,CAEjE8zC,IAAIoQ,mBAAJ,CAAyBpQ,IAAImQ,YAA7B,CAA2CnQ,IAAIwP,aAA/C,CAA8DzC,aAAa96E,KAA3E,CAAkF86E,aAAa76E,MAA/F,EACA8tE,IAAIqQ,uBAAJ,CAA6BrQ,IAAI8P,WAAjC,CAA8C9P,IAAIuQ,wBAAlD,CAA4EvQ,IAAImQ,YAAhF,CAA8FF,YAA9F,EAEH,CALM,IAKA,CAEH;AACAjQ,IAAIoQ,mBAAJ,CAAyBpQ,IAAImQ,YAA7B,CAA2CnQ,IAAIwQ,KAA/C,CAAsDzD,aAAa96E,KAAnE,CAA0E86E,aAAa76E,MAAvF,EAEH,CAED8tE,IAAIkQ,gBAAJ,CAAsBlQ,IAAImQ,YAA1B,CAAwC,IAAxC,EAEH,CAED;AACA,QAASM,kBAAT,CAA4Bf,WAA5B,CAAyC3C,YAAzC,CAAwD,CAEpD,GAAI2D,QAAW3D,cAAgBA,aAAavgD,uBAA5C,CACA,GAAKkkD,MAAL,CAAc,KAAM,IAAI96D,MAAJ,CAAW,yDAAX,CAAN,CAEdoqD,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsCJ,WAAtC,EAEA,GAAK,EAAI3C,aAAa5gD,YAAb,EAA6B4gD,aAAa5gD,YAAb,CAA0BgjD,cAA3D,CAAL,CAAmF,CAE/E,KAAM,IAAIv5D,MAAJ,CAAW,qEAAX,CAAN,CAEH,CAED;AACA,GAAK,CAAEhR,WAAW7C,GAAX,CAAgBgrE,aAAa5gD,YAA7B,EAA4CihD,cAA9C,EACDL,aAAa5gD,YAAb,CAA0BvD,KAA1B,CAAgC32B,KAAhC,GAA0C86E,aAAa96E,KADtD,EAED86E,aAAa5gD,YAAb,CAA0BvD,KAA1B,CAAgC12B,MAAhC,GAA2C66E,aAAa76E,MAF5D,CAEqE,CAEjE66E,aAAa5gD,YAAb,CAA0BvD,KAA1B,CAAgC32B,KAAhC,CAAwC86E,aAAa96E,KAArD,CACA86E,aAAa5gD,YAAb,CAA0BvD,KAA1B,CAAgC12B,MAAhC,CAAyC66E,aAAa76E,MAAtD,CACA66E,aAAa5gD,YAAb,CAA0BurB,WAA1B,CAAwC,IAAxC,CAEH,CAED8X,aAAcud,aAAa5gD,YAA3B,CAAyC,CAAzC,EAEA,GAAIwkD,mBAAoB/rE,WAAW7C,GAAX,CAAgBgrE,aAAa5gD,YAA7B,EAA4CihD,cAApE,CAEA,GAAKL,aAAa5gD,YAAb,CAA0BjD,MAA1B,GAAqC/Y,WAA1C,CAAwD,CAEpD6vD,IAAI+P,oBAAJ,CAA0B/P,IAAI8P,WAA9B,CAA2C9P,IAAIsQ,gBAA/C,CAAiEtQ,IAAI4I,UAArE,CAAiF+H,iBAAjF,CAAoG,CAApG,EAEH,CAJD,IAIO,IAAK5D,aAAa5gD,YAAb,CAA0BjD,MAA1B,GAAqC9Y,kBAA1C,CAA+D,CAElE4vD,IAAI+P,oBAAJ,CAA0B/P,IAAI8P,WAA9B,CAA2C9P,IAAIuQ,wBAA/C,CAAyEvQ,IAAI4I,UAA7E,CAAyF+H,iBAAzF,CAA4G,CAA5G,EAEH,CAJM,IAIA,CAEH,KAAM,IAAI/6D,MAAJ,CAAW,6BAAX,CAAN,CAEH,CAEJ,CAED;AACA,QAASg7D,uBAAT,CAAiC7D,YAAjC,CAAgD,CAE5C,GAAIM,wBAAyBzoE,WAAW7C,GAAX,CAAgBgrE,YAAhB,CAA7B,CAEA,GAAI2D,QAAW3D,aAAavgD,uBAAb,GAAyC,IAAxD,CAEA,GAAKugD,aAAa5gD,YAAlB,CAAiC,CAE7B,GAAKukD,MAAL,CAAc,KAAM,IAAI96D,MAAJ,CAAW,0DAAX,CAAN,CAEd66D,kBAAmBpD,uBAAuBE,kBAA1C,CAA8DR,YAA9D,EAEH,CAND,IAMO,CAEH,GAAK2D,MAAL,CAAc,CAEVrD,uBAAuBG,kBAAvB,CAA4C,EAA5C,CAEA,IAAM,GAAI7qE,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3Bq9D,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsCzC,uBAAuBE,kBAAvB,CAA2C5qE,CAA3C,CAAtC,EACA0qE,uBAAuBG,kBAAvB,CAA2C7qE,CAA3C,EAAiDq9D,IAAI6Q,kBAAJ,EAAjD,CACAb,yBAA0B3C,uBAAuBG,kBAAvB,CAA2C7qE,CAA3C,CAA1B,CAA0EoqE,YAA1E,EAEH,CAEJ,CAZD,IAYO,CAEH/M,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsCzC,uBAAuBE,kBAA7D,EACAF,uBAAuBG,kBAAvB,CAA4CxN,IAAI6Q,kBAAJ,EAA5C,CACAb,yBAA0B3C,uBAAuBG,kBAAjD,CAAqET,YAArE,EAEH,CAEJ,CAED/M,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsC,IAAtC,EAEH,CAED;AACA,QAASgB,kBAAT,CAA4B/D,YAA5B,CAA2C,CAEvC,GAAIM,wBAAyBzoE,WAAW7C,GAAX,CAAgBgrE,YAAhB,CAA7B,CACA,GAAIT,mBAAoB1nE,WAAW7C,GAAX,CAAgBgrE,aAAa/gD,OAA7B,CAAxB,CAEA+gD,aAAa/3E,gBAAb,CAA+B,SAA/B,CAA0C83E,qBAA1C,EAEAR,kBAAkBc,cAAlB,CAAmCpN,IAAImI,aAAJ,EAAnC,CAEA3hB,KAAKuE,MAAL,CAAY3gC,QAAZ,GAEA,GAAIsmD,QAAW3D,aAAavgD,uBAAb,GAAyC,IAAxD,CACA,GAAIukD,oBAAqB97D,aAAc83D,YAAd,CAAzB,CAEA;AAEA,GAAK2D,MAAL,CAAc,CAEVrD,uBAAuBE,kBAAvB,CAA4C,EAA5C,CAEA,IAAM,GAAI5qE,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B0qE,uBAAuBE,kBAAvB,CAA2C5qE,CAA3C,EAAiDq9D,IAAIgR,iBAAJ,EAAjD,CAEH,CAEJ,CAVD,IAUO,CAEH3D,uBAAuBE,kBAAvB,CAA4CvN,IAAIgR,iBAAJ,EAA5C,CAEH,CAED;AAEA,GAAKN,MAAL,CAAc,CAEVz2E,MAAMmuE,WAAN,CAAmBpI,IAAI6I,gBAAvB,CAAyCyD,kBAAkBc,cAA3D,EACAmB,qBAAsBvO,IAAI6I,gBAA1B,CAA4CkE,aAAa/gD,OAAzD,CAAkE+kD,kBAAlE,EAEA,IAAM,GAAIpuE,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B8sE,wBAAyBpC,uBAAuBE,kBAAvB,CAA2C5qE,CAA3C,CAAzB,CAAyEoqE,YAAzE,CAAuF/M,IAAIiR,iBAA3F,CAA8GjR,IAAI8I,2BAAJ,CAAkCnmE,CAAhJ,EAEH,CAED,GAAKypE,4BAA6BW,aAAa/gD,OAA1C,CAAmD+kD,kBAAnD,CAAL,CAA+E,CAE3E1E,eAAgBrM,IAAI6I,gBAApB,CAAsCkE,aAAa/gD,OAAnD,CAA4D+gD,aAAa96E,KAAzE,CAAgF86E,aAAa76E,MAA7F,EAEH,CAED+H,MAAMmuE,WAAN,CAAmBpI,IAAI6I,gBAAvB,CAAyC,IAAzC,EAEH,CAnBD,IAmBO,CAEH5uE,MAAMmuE,WAAN,CAAmBpI,IAAI4I,UAAvB,CAAmC0D,kBAAkBc,cAArD,EACAmB,qBAAsBvO,IAAI4I,UAA1B,CAAsCmE,aAAa/gD,OAAnD,CAA4D+kD,kBAA5D,EACAtB,wBAAyBpC,uBAAuBE,kBAAhD,CAAoER,YAApE,CAAkF/M,IAAIiR,iBAAtF,CAAyGjR,IAAI4I,UAA7G,EAEA,GAAKwD,4BAA6BW,aAAa/gD,OAA1C,CAAmD+kD,kBAAnD,CAAL,CAA+E,CAE3E1E,eAAgBrM,IAAI4I,UAApB,CAAgCmE,aAAa/gD,OAA7C,CAAsD+gD,aAAa96E,KAAnE,CAA0E86E,aAAa76E,MAAvF,EAEH,CAED+H,MAAMmuE,WAAN,CAAmBpI,IAAI4I,UAAvB,CAAmC,IAAnC,EAEH,CAED;AAEA,GAAKmE,aAAa9gD,WAAlB,CAAgC,CAE5B2kD,uBAAwB7D,YAAxB,EAEH,CAEJ,CAED,QAASmE,yBAAT,CAAmCnE,YAAnC,CAAkD,CAE9C,GAAI/gD,SAAU+gD,aAAa/gD,OAA3B,CACA,GAAI+kD,oBAAqB97D,aAAc83D,YAAd,CAAzB,CAEA,GAAKX,4BAA6BpgD,OAA7B,CAAsC+kD,kBAAtC,CAAL,CAAkE,CAE9D,GAAI3+E,QAAS26E,aAAavgD,uBAAb,CAAuCwzC,IAAI6I,gBAA3C,CAA8D7I,IAAI4I,UAA/E,CACA,GAAIyC,cAAezmE,WAAW7C,GAAX,CAAgBiqB,OAAhB,EAA0BohD,cAA7C,CAEAnzE,MAAMmuE,WAAN,CAAmBh2E,MAAnB,CAA2Bi5E,YAA3B,EACAgB,eAAgBj6E,MAAhB,CAAwB45B,OAAxB,CAAiC+gD,aAAa96E,KAA9C,CAAqD86E,aAAa76E,MAAlE,EACA+H,MAAMmuE,WAAN,CAAmBh2E,MAAnB,CAA2B,IAA3B,EAEH,CAEJ,CAED,QAASu7E,mBAAT,CAA6B3hD,OAA7B,CAAuC,CAEnC,GAAI78B,IAAK68B,QAAQ78B,EAAjB,CACA,GAAI41C,OAAQyhB,KAAKzxD,MAAL,CAAYgwC,KAAxB,CAEA;AAEA,GAAK6mC,eAAgBz8E,EAAhB,IAAyB41C,KAA9B,CAAsC,CAElC6mC,eAAgBz8E,EAAhB,EAAuB41C,KAAvB,CACA/Y,QAAQl3B,MAAR,GAEH,CAEJ,CAED,KAAK06D,YAAL,CAAoBA,YAApB,CACA,KAAKE,cAAL,CAAsBA,cAAtB,CACA,KAAK+e,qBAAL,CAA6BA,qBAA7B,CACA,KAAKqC,iBAAL,CAAyBA,iBAAzB,CACA,KAAKI,wBAAL,CAAgCA,wBAAhC,CAEH,CAED;;OAIA,QAASC,WAAT,CAAqBhsC,EAArB,CAAyBuY,UAAzB,CAAsC,CAElC,QAASysB,QAAT,CAAkBzoD,CAAlB,CAAsB,CAElB,GAAImlC,UAAJ,CAEA,GAAKnlC,IAAMlT,cAAX,CAA4B,MAAO22B,IAAGisC,MAAV,CAC5B,GAAK1vD,IAAMjT,mBAAX,CAAiC,MAAO02B,IAAG0pC,aAAV,CACjC,GAAKntD,IAAMhT,sBAAX,CAAoC,MAAOy2B,IAAGksC,eAAV,CAEpC,GAAK3vD,IAAM/S,aAAX,CAA2B,MAAOw2B,IAAGojC,OAAV,CAC3B,GAAK7mD,IAAM9S,0BAAX,CAAwC,MAAOu2B,IAAGmsC,sBAAV,CACxC,GAAK5vD,IAAM7S,yBAAX,CAAuC,MAAOs2B,IAAGosC,qBAAV,CAEvC,GAAK7vD,IAAM5S,YAAX,CAA0B,MAAOq2B,IAAGunC,MAAV,CAC1B,GAAKhrD,IAAM3S,yBAAX,CAAuC,MAAOo2B,IAAGqsC,qBAAV,CACvC,GAAK9vD,IAAM1S,wBAAX,CAAsC,MAAOm2B,IAAGssC,oBAAV,CAEtC,GAAK/vD,IAAMzS,gBAAX,CAA8B,MAAOk2B,IAAG2B,aAAV,CAC9B,GAAKplB,IAAMjS,qBAAX,CAAmC,MAAO01B,IAAGusC,sBAAV,CACnC,GAAKhwD,IAAMhS,qBAAX,CAAmC,MAAOy1B,IAAGwsC,sBAAV,CACnC,GAAKjwD,IAAM/R,oBAAX,CAAkC,MAAOw1B,IAAGysC,oBAAV,CAElC,GAAKlwD,IAAMxS,QAAX,CAAsB,MAAOi2B,IAAGyB,IAAV,CACtB,GAAKllB,IAAMvS,SAAX,CAAuB,MAAOg2B,IAAGmB,KAAV,CACvB,GAAK5kB,IAAMtS,iBAAX,CAA+B,MAAO+1B,IAAGiB,cAAV,CAC/B,GAAK1kB,IAAMrS,OAAX,CAAqB,MAAO81B,IAAGuB,GAAV,CACrB,GAAKhlB,IAAMpS,eAAX,CAA6B,MAAO61B,IAAGqB,YAAV,CAC7B,GAAK9kB,IAAMnS,SAAX,CAAuB,MAAO41B,IAAGa,KAAV,CAEvB,GAAKtkB,IAAMlS,aAAX,CAA2B,CAEvBq3C,UAAYnJ,WAAW37C,GAAX,CAAgB,wBAAhB,CAAZ,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,MAAOA,WAAUgrB,cAAjB,CAE7B,CAED,GAAKnwD,IAAM7R,WAAX,CAAyB,MAAOs1B,IAAG2sC,KAAV,CACzB,GAAKpwD,IAAM5R,SAAX,CAAuB,MAAOq1B,IAAG4sC,GAAV,CACvB,GAAKrwD,IAAM3R,UAAX,CAAwB,MAAOo1B,IAAGujC,IAAV,CACxB,GAAKhnD,IAAM1R,eAAX,CAA6B,MAAOm1B,IAAG6sC,SAAV,CAC7B,GAAKtwD,IAAMzR,oBAAX,CAAkC,MAAOk1B,IAAG8sC,eAAV,CAClC,GAAKvwD,IAAMvR,WAAX,CAAyB,MAAOg1B,IAAGkqC,eAAV,CACzB,GAAK3tD,IAAMtR,kBAAX,CAAgC,MAAO+0B,IAAGqqC,aAAV,CAEhC,GAAK9tD,IAAM1V,WAAX,CAAyB,MAAOm5B,IAAGukC,QAAV,CACzB,GAAKhoD,IAAMzV,gBAAX,CAA8B,MAAOk5B,IAAG+sC,aAAV,CAC9B,GAAKxwD,IAAMxV,uBAAX,CAAqC,MAAOi5B,IAAGgtC,qBAAV,CAErC,GAAKzwD,IAAMrV,UAAX,CAAwB,MAAO84B,IAAG4kC,IAAV,CACxB,GAAKroD,IAAMpV,SAAX,CAAuB,MAAO64B,IAAGykC,GAAV,CACvB,GAAKloD,IAAMnV,cAAX,CAA4B,MAAO44B,IAAG+kC,SAAV,CAC5B,GAAKxoD,IAAMlV,sBAAX,CAAoC,MAAO24B,IAAG6kC,mBAAV,CACpC,GAAKtoD,IAAMjV,cAAX,CAA4B,MAAO04B,IAAG2kC,SAAV,CAC5B,GAAKpoD,IAAMhV,sBAAX,CAAoC,MAAOy4B,IAAG8kC,mBAAV,CACpC,GAAKvoD,IAAM/U,cAAX,CAA4B,MAAOw4B,IAAGitC,SAAV,CAC5B,GAAK1wD,IAAM9U,sBAAX,CAAoC,MAAOu4B,IAAGktC,mBAAV,CAEpC,GAAK3wD,IAAM7U,cAAX,CAA4B,MAAOs4B,IAAGmtC,SAAV,CAC5B,GAAK5wD,IAAM5U,sBAAX,CAAoC,MAAOq4B,IAAGotC,mBAAV,CACpC,GAAK7wD,IAAM3U,sBAAX,CAAoC,MAAOo4B,IAAGqtC,kBAAV,CAEpC,GAAK9wD,IAAMrR,oBAAN,EAA8BqR,IAAMpR,qBAApC,EACDoR,IAAMnR,qBADL,EAC8BmR,IAAMlR,qBADzC,CACiE,CAE7Dq2C,UAAYnJ,WAAW37C,GAAX,CAAgB,+BAAhB,CAAZ,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,CAEtB,GAAKnlC,IAAMrR,oBAAX,CAAkC,MAAOw2C,WAAU4rB,4BAAjB,CAClC,GAAK/wD,IAAMpR,qBAAX,CAAmC,MAAOu2C,WAAU6rB,6BAAjB,CACnC,GAAKhxD,IAAMnR,qBAAX,CAAmC,MAAOs2C,WAAU8rB,6BAAjB,CACnC,GAAKjxD,IAAMlR,qBAAX,CAAmC,MAAOq2C,WAAU+rB,6BAAjB,CAEtC,CAEJ,CAED,GAAKlxD,IAAMjR,uBAAN,EAAiCiR,IAAMhR,uBAAvC,EACDgR,IAAM/Q,wBADL,EACiC+Q,IAAM9Q,wBAD5C,CACuE,CAEnEi2C,UAAYnJ,WAAW37C,GAAX,CAAgB,gCAAhB,CAAZ,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,CAEtB,GAAKnlC,IAAMjR,uBAAX,CAAqC,MAAOo2C,WAAUgsB,+BAAjB,CACrC,GAAKnxD,IAAMhR,uBAAX,CAAqC,MAAOm2C,WAAUisB,+BAAjB,CACrC,GAAKpxD,IAAM/Q,wBAAX,CAAsC,MAAOk2C,WAAUksB,gCAAjB,CACtC,GAAKrxD,IAAM9Q,wBAAX,CAAsC,MAAOi2C,WAAUmsB,gCAAjB,CAEzC,CAEJ,CAED,GAAKtxD,IAAM7Q,eAAX,CAA6B,CAEzBg2C,UAAYnJ,WAAW37C,GAAX,CAAgB,+BAAhB,CAAZ,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,MAAOA,WAAUosB,yBAAjB,CAE7B,CAED,GAAKvxD,IAAM5Q,oBAAN,EAA8B4Q,IAAM3Q,oBAApC,EAA4D2Q,IAAM1Q,oBAAlE,EACD0Q,IAAMzQ,oBADL,EAC6ByQ,IAAMxQ,oBADnC,EAC2DwQ,IAAMvQ,oBADjE,EAEDuQ,IAAMtQ,oBAFL,EAE6BsQ,IAAMrQ,oBAFnC,EAE2DqQ,IAAMpQ,qBAFjE,EAGDoQ,IAAMnQ,qBAHL,EAG8BmQ,IAAMlQ,qBAHpC,EAG6DkQ,IAAMjQ,sBAHnE,EAIDiQ,IAAMhQ,sBAJL,EAI+BgQ,IAAM/P,sBAJ1C,CAImE,CAE/Dk1C,UAAYnJ,WAAW37C,GAAX,CAAgB,+BAAhB,CAAZ,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,CAEtB,MAAOnlC,EAAP,CAEH,CAEJ,CAED,GAAKA,IAAMvV,WAAN,EAAqBuV,IAAMtV,WAAhC,CAA8C,CAE1Cy6C,UAAYnJ,WAAW37C,GAAX,CAAgB,kBAAhB,CAAZ,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,CAEtB,GAAKnlC,IAAMvV,WAAX,CAAyB,MAAO06C,WAAUqsB,OAAjB,CACzB,GAAKxxD,IAAMtV,WAAX,CAAyB,MAAOy6C,WAAUssB,OAAjB,CAE5B,CAEJ,CAED,GAAKzxD,IAAM9R,kBAAX,CAAgC,CAE5Bi3C,UAAYnJ,WAAW37C,GAAX,CAAgB,qBAAhB,CAAZ,CAEA,GAAK8kD,YAAc,IAAnB,CAA0B,MAAOA,WAAUusB,uBAAjB,CAE7B,CAED,MAAO,EAAP,CAEH,CAED,MAAO,CAAEjJ,QAASA,OAAX,CAAP,CAEH,CAED;;;;;OAOA,QAASt6E,kBAAT,CAA4BoP,GAA5B,CAAiCo0E,MAAjC,CAAyCvhF,IAAzC,CAA+CyvB,GAA/C,CAAqD,CAEjDgrB,OAAOrnC,IAAP,CAAa,IAAb,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAKuC,GAAL,CAAWA,MAAQlI,SAAR,CAAoBkI,GAApB,CAA0B,EAArC,CACA,KAAK7F,IAAL,CAAY,CAAZ,CAEA,KAAKtH,IAAL,CAAYA,OAASiF,SAAT,CAAqBjF,IAArB,CAA4B,GAAxC,CACA,KAAKyvB,GAAL,CAAWA,MAAQxqB,SAAR,CAAoBwqB,GAApB,CAA0B,IAArC,CACA,KAAK+xD,KAAL,CAAa,EAAb,CAEA,KAAKD,MAAL,CAAcA,SAAWt8E,SAAX,CAAuBs8E,MAAvB,CAAgC,CAA9C,CACA,KAAK3mC,IAAL,CAAY,IAAZ,CAEA,KAAK6mC,SAAL,CAAiB,EAAjB,CAAqB;AACrB,KAAKC,UAAL,CAAkB,CAAlB,CAAqB;AAErB,KAAK15E,sBAAL,GAEH,CAEDjK,kBAAkB2R,SAAlB,CAA8BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe6qC,OAAO/qC,SAAtB,CAAf,CAAkD,CAE5EI,YAAa/R,iBAF+D,CAI5EgP,oBAAqB,IAJuD,CAM5EjF,KAAM,cAAW0J,MAAX,CAAmB+oC,SAAnB,CAA+B,CAEjCE,OAAO/qC,SAAP,CAAiB5H,IAAjB,CAAsBsL,IAAtB,CAA4B,IAA5B,CAAkC5B,MAAlC,CAA0C+oC,SAA1C,EAEA,KAAKptC,GAAL,CAAWqE,OAAOrE,GAAlB,CACA,KAAK7F,IAAL,CAAYkK,OAAOlK,IAAnB,CAEA,KAAKtH,IAAL,CAAYwR,OAAOxR,IAAnB,CACA,KAAKyvB,GAAL,CAAWje,OAAOie,GAAlB,CACA,KAAK+xD,KAAL,CAAahwE,OAAOgwE,KAApB,CAEA,KAAKD,MAAL,CAAc/vE,OAAO+vE,MAArB,CACA,KAAK3mC,IAAL,CAAYppC,OAAOopC,IAAP,GAAgB,IAAhB,CAAuB,IAAvB,CAA8BjrC,OAAO4B,MAAP,CAAe,EAAf,CAAmBC,OAAOopC,IAA1B,CAA1C,CAEA,KAAK6mC,SAAL,CAAiBjwE,OAAOiwE,SAAxB,CACA,KAAKC,UAAL,CAAkBlwE,OAAOkwE,UAAzB,CAEA,MAAO,KAAP,CAEH,CAzB2E,CA2B5E;;;;;;;WAQAC,eAAgB,wBAAWC,WAAX,CAAyB,CAErC;AACA,GAAIC,cAAe,IAAM,KAAKC,aAAL,EAAN,CAA6BF,WAAhD,CAEA,KAAKz0E,GAAL,CAAWiU,MAAME,OAAN,CAAgB,CAAhB,CAAoB/e,KAAKw/E,IAAL,CAAWF,YAAX,CAA/B,CACA,KAAK75E,sBAAL,GAEH,CA3C2E,CA6C5E;;WAGAg6E,eAAgB,yBAAY,CAExB,GAAIH,cAAet/E,KAAK2K,GAAL,CAAUkU,MAAMC,OAAN,CAAgB,GAAhB,CAAsB,KAAKlU,GAArC,CAAnB,CAEA,MAAO,KAAM,KAAK20E,aAAL,EAAN,CAA6BD,YAApC,CAEH,CAtD2E,CAwD5EI,gBAAiB,0BAAY,CAEzB,MAAO7gE,OAAME,OAAN,CAAgB,CAAhB,CAAoB/e,KAAKw/E,IAAL,CACvBx/E,KAAK2K,GAAL,CAAUkU,MAAMC,OAAN,CAAgB,GAAhB,CAAsB,KAAKlU,GAArC,EAA6C,KAAK7F,IAD3B,CAA3B,CAGH,CA7D2E,CA+D5E46E,aAAc,uBAAY,CAEtB;AACA,MAAO,MAAKT,SAAL,CAAiBl/E,KAAK+G,GAAL,CAAU,KAAKi4E,MAAf,CAAuB,CAAvB,CAAxB,CAEH,CApE2E,CAsE5EO,cAAe,wBAAY,CAEvB;AACA,MAAO,MAAKL,SAAL,CAAiBl/E,KAAK8G,GAAL,CAAU,KAAKk4E,MAAf,CAAuB,CAAvB,CAAxB,CAEH,CA3E2E,CA6E5E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WAmCA1mC,cAAe,uBAAWC,SAAX,CAAsBC,UAAtB,CAAkCl8C,CAAlC,CAAqCC,CAArC,CAAwCqB,KAAxC,CAA+CC,MAA/C,CAAwD,CAEnE,KAAKmhF,MAAL,CAAczmC,UAAYC,UAA1B,CAEA,GAAK,KAAKH,IAAL,GAAc,IAAnB,CAA0B,CAEtB,KAAKA,IAAL,CAAY,CACRj8C,QAAS,IADD,CAERm8C,UAAW,CAFH,CAGRC,WAAY,CAHJ,CAIRC,QAAS,CAJD,CAKRC,QAAS,CALD,CAMR96C,MAAO,CANC,CAORC,OAAQ,CAPA,CAAZ,CAUH,CAED,KAAKw6C,IAAL,CAAUj8C,OAAV,CAAoB,IAApB,CACA,KAAKi8C,IAAL,CAAUE,SAAV,CAAsBA,SAAtB,CACA,KAAKF,IAAL,CAAUG,UAAV,CAAuBA,UAAvB,CACA,KAAKH,IAAL,CAAUI,OAAV,CAAoBn8C,CAApB,CACA,KAAK+7C,IAAL,CAAUK,OAAV,CAAoBn8C,CAApB,CACA,KAAK87C,IAAL,CAAUz6C,KAAV,CAAkBA,KAAlB,CACA,KAAKy6C,IAAL,CAAUx6C,MAAV,CAAmBA,MAAnB,CAEA,KAAK4H,sBAAL,GAEH,CA5I2E,CA8I5EkzC,gBAAiB,0BAAY,CAEzB,GAAK,KAAKN,IAAL,GAAc,IAAnB,CAA0B,CAEtB,KAAKA,IAAL,CAAUj8C,OAAV,CAAoB,KAApB,CAEH,CAED,KAAKqJ,sBAAL,GAEH,CAxJ2E,CA0J5EA,uBAAwB,iCAAY,CAEhC,GAAIhI,MAAO,KAAKA,IAAhB,CACIF,IAAME,KAAOuC,KAAK2K,GAAL,CACTkU,MAAMC,OAAN,CAAgB,GAAhB,CAAsB,KAAKlU,GADlB,CAAP,CACiC,KAAK7F,IAFhD,CAGIlH,OAAS,EAAIN,GAHjB,CAIIK,MAAQ,KAAKohF,MAAL,CAAcnhF,MAJ1B,CAKIR,KAAO,CAAE,GAAF,CAAQO,KALnB,CAMIy6C,KAAO,KAAKA,IANhB,CAQA,GAAK,KAAKA,IAAL,GAAc,IAAd,EAAsB,KAAKA,IAAL,CAAUj8C,OAArC,CAA+C,CAE3C,GAAIm8C,WAAYF,KAAKE,SAArB,CACIC,WAAaH,KAAKG,UADtB,CAGAn7C,MAAQg7C,KAAKI,OAAL,CAAe76C,KAAf,CAAuB26C,SAA/B,CACAh7C,KAAO86C,KAAKK,OAAL,CAAe76C,MAAf,CAAwB26C,UAA/B,CACA56C,OAASy6C,KAAKz6C,KAAL,CAAa26C,SAAtB,CACA16C,QAAUw6C,KAAKx6C,MAAL,CAAc26C,UAAxB,CAEH,CAED,GAAIonC,MAAO,KAAKT,UAAhB,CACA,GAAKS,OAAS,CAAd,CAAkBviF,MAAQI,KAAOmiF,IAAP,CAAc,KAAKD,YAAL,EAAtB,CAElB,KAAKztD,gBAAL,CAAsBjF,eAAtB,CAAuC5vB,IAAvC,CAA6CA,KAAOO,KAApD,CAA2DL,GAA3D,CAAgEA,IAAMM,MAAtE,CAA8EJ,IAA9E,CAAoF,KAAKyvB,GAAzF,EAEH,CArL2E,CAuL5E0I,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAI/0B,MAAOnB,SAASwN,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAsCglB,IAAtC,CAAX,CAEA/0B,KAAK0B,MAAL,CAAYoI,GAAZ,CAAkB,KAAKA,GAAvB,CACA9J,KAAK0B,MAAL,CAAYuC,IAAZ,CAAmB,KAAKA,IAAxB,CAEAjE,KAAK0B,MAAL,CAAY/E,IAAZ,CAAmB,KAAKA,IAAxB,CACAqD,KAAK0B,MAAL,CAAY0qB,GAAZ,CAAkB,KAAKA,GAAvB,CACApsB,KAAK0B,MAAL,CAAYy8E,KAAZ,CAAoB,KAAKA,KAAzB,CAEAn+E,KAAK0B,MAAL,CAAYw8E,MAAZ,CAAqB,KAAKA,MAA1B,CAEA,GAAK,KAAK3mC,IAAL,GAAc,IAAnB,CAA0Bv3C,KAAK0B,MAAL,CAAY61C,IAAZ,CAAmBjrC,OAAO4B,MAAP,CAAe,EAAf,CAAmB,KAAKqpC,IAAxB,CAAnB,CAE1Bv3C,KAAK0B,MAAL,CAAY08E,SAAZ,CAAwB,KAAKA,SAA7B,CACAp+E,KAAK0B,MAAL,CAAY28E,UAAZ,CAAyB,KAAKA,UAA9B,CAEA,MAAOr+E,KAAP,CAEH,CA3M2E,CAAlD,CAA9B,CA+MA;;OAIA,QAAS++E,YAAT,CAAsB5pE,KAAtB,CAA8B,CAE1Bza,kBAAkBqV,IAAlB,CAAwB,IAAxB,EAEA,KAAKivE,OAAL,CAAe7pE,OAAS,EAAxB,CAEH,CAED4pE,YAAY1yE,SAAZ,CAAwBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe7R,kBAAkB2R,SAAjC,CAAf,CAA6D,CAEjFI,YAAasyE,WAFoE,CAIjFE,cAAe,IAJkE,CAA7D,CAAxB,CAQA;;OAIA,QAASC,aAAT,CAAuBxlF,QAAvB,CAAkC,CAE9B,GAAI8K,OAAQ,IAAZ,CAEA,GAAI26E,QAAS,IAAb,CACA,GAAIC,WAAY,IAAhB,CAEA,GAAIC,YAAa,IAAjB,CAEA,GAAIC,gBAAiB,GAAIr8D,QAAJ,EAArB,CACA,GAAIs8D,uBAAwB,GAAIt8D,QAAJ,EAA5B,CAEA,GAAK,MAAO5b,OAAP,GAAkB,WAAlB,EAAiC,eAAiBA,OAAvD,CAAgE,CAE5D+3E,UAAY,GAAI/3E,QAAOm4E,WAAX,EAAZ,CACAn4E,OAAOxH,gBAAP,CAAyB,wBAAzB,CAAmD4/E,wBAAnD,CAA6E,KAA7E,EAEH,CAED,GAAIpoC,oBAAqB,GAAIp0B,QAAJ,EAAzB,CACA,GAAIy8D,gBAAiB,GAAIv6E,WAAJ,EAArB,CACA,GAAIw6E,cAAe,GAAI79E,QAAJ,EAAnB,CAEA,GAAI89E,SAAU,GAAIllF,kBAAJ,EAAd,CACAklF,QAAQC,MAAR,CAAiB,GAAI7pD,QAAJ,CAAa,GAAb,CAAkB,GAAlB,CAAuB,GAAvB,CAA4B,GAA5B,CAAjB,CACA4pD,QAAQtsC,MAAR,CAAeJ,MAAf,CAAuB,CAAvB,EAEA,GAAI4sC,SAAU,GAAIplF,kBAAJ,EAAd,CACAolF,QAAQD,MAAR,CAAiB,GAAI7pD,QAAJ,CAAa,GAAb,CAAkB,GAAlB,CAAuB,GAAvB,CAA4B,GAA5B,CAAjB,CACA8pD,QAAQxsC,MAAR,CAAeJ,MAAf,CAAuB,CAAvB,EAEA,GAAI6sC,UAAW,GAAIhB,YAAJ,CAAiB,CAAEa,OAAF,CAAWE,OAAX,CAAjB,CAAf,CACAC,SAASzsC,MAAT,CAAgBJ,MAAhB,CAAwB,CAAxB,EACA6sC,SAASzsC,MAAT,CAAgBJ,MAAhB,CAAwB,CAAxB,EAEA;AAEA,QAAS8sC,aAAT,EAAwB,CAEpB,MAAOb,UAAW,IAAX,EAAmBA,OAAOa,YAAP,GAAwB,IAAlD,CAEH,CAED,GAAIC,YAAJ,CAAiBC,iBAAjB,CAEA,QAAST,yBAAT,EAAoC,CAEhC,GAAKO,cAAL,CAAsB,CAElB,GAAIG,eAAgBhB,OAAOiB,gBAAP,CAAyB,MAAzB,CAApB,CACA,GAAIC,aAAcF,cAAcE,WAAhC,CACA,GAAIC,cAAeH,cAAcG,YAAjC,CAEAJ,kBAAoBxmF,SAAS6mF,aAAT,EAApB,CACAN,YAAcvmF,SAASq/B,OAAT,EAAd,CAEAr/B,SAAS8mF,oBAAT,CAA+BH,YAAc,CAA7C,CAAgDC,YAAhD,CAA8D,CAA9D,EAEAG,UAAUt/E,KAAV,GAEH,CAbD,IAaO,IAAKqD,MAAMlJ,OAAX,CAAqB,CAExB5B,SAAS8mF,oBAAT,CAA+BP,YAAYnjF,KAA3C,CAAkDmjF,YAAYljF,MAA9D,CAAsEmjF,iBAAtE,EAEAO,UAAU3wE,IAAV,GAEH,CAEJ,CAED;AAEA,KAAKxU,OAAL,CAAe,KAAf,CACA,KAAKolF,UAAL,CAAkB,GAAlB,CAEA,KAAKC,SAAL,CAAiB,UAAY,CAEzB,MAAOxB,OAAP,CAEH,CAJD,CAMA,KAAKyB,SAAL,CAAiB,SAAW9zE,KAAX,CAAmB,CAEhC,GAAKA,QAAUlL,SAAf,CAA2Bu9E,OAASryE,KAAT,CAE3B2zE,UAAU3wC,UAAV,CAAsBhjC,KAAtB,EAEH,CAND,CAQA,KAAK+zE,aAAL,CAAqB,SAAWn/E,MAAX,CAAoB,CAErC,GAAKA,SAAWE,SAAhB,CAA4By9E,WAAa39E,MAAb,CAE/B,CAJD,CAMA,KAAKo/E,SAAL,CAAiB,SAAWrnF,MAAX,CAAoB,CAEjC,GAAK0lF,SAAW,IAAhB,CAAuB,MAAO1lF,OAAP,CAEvB0lF,OAAO4B,SAAP,CAAmBtnF,OAAOkD,IAA1B,CACAwiF,OAAO6B,QAAP,CAAkBvnF,OAAO2yB,GAAzB,CAEA+yD,OAAO8B,YAAP,CAAqB7B,SAArB,EAEA;AAEA,GAAI8B,iBAAkB/B,OAAO+B,eAA7B,CAEA,GAAKA,eAAL,CAAuB,CAEnB5B,eAAe78D,SAAf,CAA0By+D,gBAAgBC,0BAA1C,EAEH,CAJD,IAIO,CAEH7B,eAAet1D,eAAf,CAAgC,CAAhC,CAAmCxlB,MAAMk8E,UAAzC,CAAqD,CAArD,EAEH,CAGD,GAAIU,MAAOhC,UAAUgC,IAArB,CACA,GAAIC,YAAahC,aAAe,IAAf,CAAsBA,UAAtB,CAAmC5lF,MAApD,CAEA;AACA4nF,WAAWr3E,MAAX,CAAkBvF,IAAlB,CAAwB66E,cAAxB,EACA+B,WAAWr3E,MAAX,CAAkB6hB,SAAlB,CAA6Bw1D,WAAW9lF,QAAxC,CAAkD8lF,WAAWz6E,UAA7D,CAAyEy6E,WAAWj7E,KAApF,EAEA,GAAKg7E,KAAKE,WAAL,GAAqB,IAA1B,CAAiC,CAE7B5B,eAAej9D,SAAf,CAA0B2+D,KAAKE,WAA/B,EACAD,WAAWz6E,UAAX,CAAsBoa,QAAtB,CAAgC0+D,cAAhC,EAEH,CAED,GAAK0B,KAAK7lF,QAAL,GAAkB,IAAvB,CAA8B,CAE1BmkF,eAAexzD,qBAAf,CAAsCozD,cAAtC,EACAK,aAAal9D,SAAb,CAAwB2+D,KAAK7lF,QAA7B,EACAokF,aAAah6E,eAAb,CAA8B+5E,cAA9B,EACA2B,WAAW9lF,QAAX,CAAoByB,GAApB,CAAyB2iF,YAAzB,EAEH,CAED0B,WAAW3nD,iBAAX,GAEA,GAAKylD,OAAOa,YAAP,GAAwB,KAA7B,CAAqC,MAAOvmF,OAAP,CAErC;AAEAmmF,QAAQjjF,IAAR,CAAelD,OAAOkD,IAAtB,CACAmjF,QAAQnjF,IAAR,CAAelD,OAAOkD,IAAtB,CAEAijF,QAAQxzD,GAAR,CAAc3yB,OAAO2yB,GAArB,CACA0zD,QAAQ1zD,GAAR,CAAc3yB,OAAO2yB,GAArB,CAEA2zD,SAAS1uD,WAAT,CAAqB5sB,IAArB,CAA2BhL,OAAO43B,WAAlC,EACA0uD,SAAS1oC,kBAAT,CAA4B5yC,IAA5B,CAAkChL,OAAO49C,kBAAzC,EAEAuoC,QAAQvoC,kBAAR,CAA2B50B,SAA3B,CAAsC28D,UAAUmC,cAAhD,EACAzB,QAAQzoC,kBAAR,CAA2B50B,SAA3B,CAAsC28D,UAAUoC,eAAhD,EAEA;AAEAjC,sBAAsBp2D,UAAtB,CAAkCm2D,cAAlC,EAEAM,QAAQvoC,kBAAR,CAA2Br2B,QAA3B,CAAqCu+D,qBAArC,EACAO,QAAQzoC,kBAAR,CAA2Br2B,QAA3B,CAAqCu+D,qBAArC,EAEA,GAAI/rC,QAAS6tC,WAAW7tC,MAAxB,CAEA,GAAKA,SAAW,IAAhB,CAAuB,CAEnB6D,mBAAmBluB,UAAnB,CAA+BqqB,OAAOniB,WAAtC,EAEAuuD,QAAQvoC,kBAAR,CAA2Br2B,QAA3B,CAAqCq2B,kBAArC,EACAyoC,QAAQzoC,kBAAR,CAA2Br2B,QAA3B,CAAqCq2B,kBAArC,EAEH,CAED;AAEAuoC,QAAQvuD,WAAR,CAAoBlI,UAApB,CAAgCy2D,QAAQvoC,kBAAxC,EACAyoC,QAAQzuD,WAAR,CAAoBlI,UAApB,CAAgC22D,QAAQzoC,kBAAxC,EAEAuoC,QAAQxuD,gBAAR,CAAyB3O,SAAzB,CAAoC28D,UAAUqC,oBAA9C,EACA3B,QAAQ1uD,gBAAR,CAAyB3O,SAAzB,CAAoC28D,UAAUsC,qBAA9C,EAEA;AACA;AAEA3B,SAAS3uD,gBAAT,CAA0B3sB,IAA1B,CAAgCm7E,QAAQxuD,gBAAxC,EAEA;AAEA,GAAIkiB,QAAS6rC,OAAOwC,SAAP,EAAb,CAEA,GAAKruC,OAAO1pC,MAAZ,CAAqB,CAEjB,GAAIg4E,OAAQtuC,OAAQ,CAAR,CAAZ,CAEA,GAAKsuC,MAAMC,UAAN,GAAqB,IAArB,EAA6BD,MAAMC,UAAN,CAAiBj4E,MAAjB,GAA4B,CAA9D,CAAkE,CAE9Dg2E,QAAQC,MAAR,CAAep9D,SAAf,CAA0Bm/D,MAAMC,UAAhC,EAEH,CAED,GAAKD,MAAME,WAAN,GAAsB,IAAtB,EAA8BF,MAAME,WAAN,CAAkBl4E,MAAlB,GAA6B,CAAhE,CAAoE,CAEhEk2E,QAAQD,MAAR,CAAep9D,SAAf,CAA0Bm/D,MAAME,WAAhC,EAEH,CAEJ,CAED,MAAO/B,SAAP,CAEH,CAxHD,CA0HA,KAAKgC,iBAAL,CAAyB,UAAY,CAEjC,MAAOzC,eAAP,CAEH,CAJD,CAMA,KAAKU,YAAL,CAAoBA,YAApB,CAEA;AAEA,GAAIS,WAAY,GAAIjxC,eAAJ,EAAhB,CAEA,KAAKK,gBAAL,CAAwB,SAAWh/B,QAAX,CAAsB,CAE1C4vE,UAAU5wC,gBAAV,CAA4Bh/B,QAA5B,EAEH,CAJD,CAMA,KAAKmxE,WAAL,CAAmB,UAAY,CAE3B,GAAKhC,cAAL,CAAsBb,OAAO6C,WAAP,GAEzB,CAJD,CAMA,KAAKn7E,OAAL,CAAe,UAAY,CAEvB,GAAK,MAAOQ,OAAP,GAAkB,WAAvB,CAAqC,CAEjCA,OAAOP,mBAAP,CAA4B,wBAA5B,CAAsD24E,wBAAtD,EAEH,CAEJ,CARD,CAUH,CAED;;OAIA,QAASwC,aAAT,CAAuBvoF,QAAvB,CAAkC,CAE9B,GAAIs2C,IAAKt2C,SAASwB,OAAlB,CAEA,GAAIikF,QAAS,IAAb,CACA,GAAI+C,SAAU,IAAd,CAEA,GAAIC,YAAa,IAAjB,CAEA,GAAIf,MAAO,IAAX,CAEA,QAASpB,aAAT,EAAwB,CAEpB,MAAOkC,WAAY,IAAZ,EAAoBC,aAAe,IAA1C,CAEH,CAED;AAEA,GAAIvC,SAAU,GAAIllF,kBAAJ,EAAd,CACAklF,QAAQtsC,MAAR,CAAeJ,MAAf,CAAuB,CAAvB,EACA0sC,QAAQhpD,QAAR,CAAmB,GAAIZ,QAAJ,EAAnB,CAEA,GAAI8pD,SAAU,GAAIplF,kBAAJ,EAAd,CACAolF,QAAQxsC,MAAR,CAAeJ,MAAf,CAAuB,CAAvB,EACA4sC,QAAQlpD,QAAR,CAAmB,GAAIZ,QAAJ,EAAnB,CAEA,GAAI+pD,UAAW,GAAIhB,YAAJ,CAAiB,CAAEa,OAAF,CAAWE,OAAX,CAAjB,CAAf,CACAC,SAASzsC,MAAT,CAAgBJ,MAAhB,CAAwB,CAAxB,EACA6sC,SAASzsC,MAAT,CAAgBJ,MAAhB,CAAwB,CAAxB,EAEA;AAEA,KAAK53C,OAAL,CAAe,KAAf,CAEA,KAAKqlF,SAAL,CAAiB,UAAY,CAEzB,MAAOxB,OAAP,CAEH,CAJD,CAMA,KAAKyB,SAAL,CAAiB,SAAW9zE,KAAX,CAAmB,CAEhC,GAAKA,QAAUlL,SAAf,CAA2Bu9E,OAASryE,KAAT,CAE3BkjC,GAAGoyC,qBAAH,CAA0Bt1E,KAA1B,EAEH,CAND,CAQA;AAEA,KAAKu1E,UAAL,CAAkB,SAAWv1E,KAAX,CAAkB2pB,OAAlB,CAA4B,CAE1CyrD,QAAUp1E,KAAV,CAEA,GAAKo1E,UAAY,IAAjB,CAAwB,CAEpBA,QAAQriF,gBAAR,CAA0B,KAA1B,CAAiC,UAAY,CAEzCnG,SAAS4oF,cAAT,CAAyB,IAAzB,EACA7B,UAAU3wE,IAAV,GAEH,CALD,EAOAoyE,QAAQK,SAAR,CAAoB,GAAIC,aAAJ,CAAkBN,OAAlB,CAA2BlyC,EAA3B,CAApB,CACAkyC,QAAQO,uBAAR,CAAiChsD,QAAQisD,oBAAzC,EAAgEC,IAAhE,CAAsE,SAAW71E,KAAX,CAAmB,CAErFq1E,WAAar1E,KAAb,CAEApT,SAAS4oF,cAAT,CAAyBJ,QAAQK,SAAR,CAAkBhI,WAA3C,EAEAkG,UAAU3wC,UAAV,CAAsBoyC,OAAtB,EACAzB,UAAUt/E,KAAV,GAEH,CATD,EAWH,CAEJ,CA3BD,CA6BA,QAASyhF,aAAT,CAAuBnpF,MAAvB,CAA+B+5C,MAA/B,CAAwC,CAEpC,GAAKA,SAAW,IAAhB,CAAuB,CAEnB/5C,OAAO43B,WAAP,CAAmB5sB,IAAnB,CAAyBhL,OAAOuQ,MAAhC,EAEH,CAJD,IAIO,CAEHvQ,OAAO43B,WAAP,CAAmB5K,gBAAnB,CAAqC+sB,OAAOniB,WAA5C,CAAyD53B,OAAOuQ,MAAhE,EAEH,CAEDvQ,OAAO49C,kBAAP,CAA0BluB,UAA1B,CAAsC1vB,OAAO43B,WAA7C,EAEH,CAED,KAAKyvD,SAAL,CAAiB,SAAWrnF,MAAX,CAAoB,CAEjC,GAAKumF,cAAL,CAAsB,CAElB,GAAIxsC,QAAS/5C,OAAO+5C,MAApB,CACA,GAAIwrC,SAAUe,SAASf,OAAvB,CAEA;AAEA4D,aAAc7C,QAAd,CAAwBvsC,MAAxB,EAEA,IAAM,GAAIhmC,GAAI,CAAd,CAAiBA,EAAIwxE,QAAQp1E,MAA7B,CAAqC4D,GAArC,CAA4C,CAExCo1E,aAAc5D,QAASxxE,CAAT,CAAd,CAA4BgmC,MAA5B,EAEH,CAED;AAEA/5C,OAAO43B,WAAP,CAAmB5sB,IAAnB,CAAyBs7E,SAAS1uD,WAAlC,EAEA,GAAIoiB,UAAWh6C,OAAOg6C,QAAtB,CAEA,IAAM,GAAIjmC,GAAI,CAAR,CAAW6H,EAAIo+B,SAAS7pC,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDimC,SAAUjmC,CAAV,EAAcksB,iBAAd,CAAiC,IAAjC,EAEH,CAED,MAAOqmD,SAAP,CAEH,CAED,MAAOtmF,OAAP,CAEH,CAnCD,CAqCA,KAAKumF,YAAL,CAAoBA,YAApB,CAEA;AAEA,GAAI6C,0BAA2B,IAA/B,CAEA,QAASlzC,iBAAT,CAA2BhiC,IAA3B,CAAiCiiC,KAAjC,CAAyC,CAErCwxC,KAAOxxC,MAAMkzC,aAAN,CAAqBX,UAArB,CAAP,CAEA,GAAIP,OAAQM,QAAQK,SAApB,CACA,GAAIQ,OAAQnzC,MAAMmzC,KAAlB,CAEA,IAAM,GAAIv1E,GAAI,CAAd,CAAiBA,EAAIu1E,MAAMn5E,MAA3B,CAAmC4D,GAAnC,CAA0C,CAEtC,GAAI+pC,MAAOwrC,MAAOv1E,CAAP,CAAX,CACA,GAAIopB,UAAWgrD,MAAMoB,WAAN,CAAmBzrC,IAAnB,CAAf,CACA,GAAI6d,YAAagsB,KAAK6B,aAAL,CAAoB1rC,IAApB,CAAjB,CAEA,GAAI99C,QAASsmF,SAASf,OAAT,CAAkBxxE,CAAlB,CAAb,CACA/T,OAAOuQ,MAAP,CAAcyY,SAAd,CAAyB2yC,UAAzB,EAAsCjsC,UAAtC,CAAkD1vB,OAAOuQ,MAAzD,EACAvQ,OAAO23B,gBAAP,CAAwB3O,SAAxB,CAAmC80B,KAAKnmB,gBAAxC,EACA33B,OAAOm9B,QAAP,CAAgBv6B,GAAhB,CAAqBu6B,SAASp7B,CAA9B,CAAiCo7B,SAASn7B,CAA1C,CAA6Cm7B,SAAS95B,KAAtD,CAA6D85B,SAAS75B,MAAtE,EAEA,GAAKyQ,IAAM,CAAX,CAAe,CAEXuyE,SAAS/1E,MAAT,CAAgBvF,IAAhB,CAAsBhL,OAAOuQ,MAA7B,EAEA;AACA;AAEA+1E,SAAS3uD,gBAAT,CAA0B3sB,IAA1B,CAAgChL,OAAO23B,gBAAvC,EAEH,CAEJ,CAED,GAAKyxD,wBAAL,CAAgCA,2BAEnC,CAED,GAAIpC,WAAY,GAAIjxC,eAAJ,EAAhB,CACAixC,UAAU5wC,gBAAV,CAA4BF,gBAA5B,EAEA,KAAKE,gBAAL,CAAwB,SAAWh/B,QAAX,CAAsB,CAE1CgyE,yBAA2BhyE,QAA3B,CAEH,CAJD,CAMA;AAEA,KAAKkxE,iBAAL,CAAyB,UAAY,CAEjC5hF,QAAQgK,IAAR,CAAc,8DAAd,EACA,MAAO,IAAI7Q,OAAM2pB,OAAV,EAAP,CAEH,CALD,CAOA,KAAK++D,WAAL,CAAmB,UAAY,CAAE,CAAjC,CAEH,CAED;;;;;;OAQA,QAAS/mF,cAAT,CAAwBy7C,UAAxB,CAAqC,CAEjCv2C,QAAQC,GAAR,CAAa,qBAAb,CAAoCkV,QAApC,EAEAohC,WAAaA,YAAc,EAA3B,CAEA,GAAIggC,SAAUhgC,WAAW57C,MAAX,GAAsB8G,SAAtB,CAAkC80C,WAAW57C,MAA7C,CAAsD+G,SAASuzB,eAAT,CAA0B,8BAA1B,CAA0D,QAA1D,CAApE,CACI8tD,SAAWxsC,WAAWx7C,OAAX,GAAuB0G,SAAvB,CAAmC80C,WAAWx7C,OAA9C,CAAwD,IADvE,CAGIioF,OAASzsC,WAAWr0B,KAAX,GAAqBzgB,SAArB,CAAiC80C,WAAWr0B,KAA5C,CAAoD,KAHjE,CAII+gE,OAAS1sC,WAAW9H,KAAX,GAAqBhtC,SAArB,CAAiC80C,WAAW9H,KAA5C,CAAoD,IAJjE,CAKIy0C,SAAW3sC,WAAWw6B,OAAX,GAAuBtvE,SAAvB,CAAmC80C,WAAWw6B,OAA9C,CAAwD,IALvE,CAMIoS,WAAa5sC,WAAW17C,SAAX,GAAyB4G,SAAzB,CAAqC80C,WAAW17C,SAAhD,CAA4D,KAN7E,CAOIuoF,oBAAsB7sC,WAAWoQ,kBAAX,GAAkCllD,SAAlC,CAA8C80C,WAAWoQ,kBAAzD,CAA8E,IAPxG,CAQI08B,uBAAyB9sC,WAAW+sC,qBAAX,GAAqC7hF,SAArC,CAAiD80C,WAAW+sC,qBAA5D,CAAoF,KARjH,CASIC,iBAAmBhtC,WAAWitC,eAAX,GAA+B/hF,SAA/B,CAA2C80C,WAAWitC,eAAtD,CAAwE,SAT/F,CAWA,GAAIC,mBAAoB,IAAxB,CACA,GAAIC,oBAAqB,IAAzB,CAEA;AAEA,KAAKliF,UAAL,CAAkB+0E,OAAlB,CACA,KAAKx7E,OAAL,CAAe,IAAf,CAEA;AAEA,KAAKw1D,SAAL,CAAiB,IAAjB,CACA,KAAKE,cAAL,CAAsB,IAAtB,CACA,KAAKC,cAAL,CAAsB,IAAtB,CACA,KAAKC,gBAAL,CAAwB,IAAxB,CAEA;AAEA,KAAKgzB,WAAL,CAAmB,IAAnB,CAEA;AAEA,KAAK19B,cAAL,CAAsB,EAAtB,CACA,KAAK2N,oBAAL,CAA4B,KAA5B,CAEA;AAEA,KAAKtrB,WAAL,CAAmB,GAAnB,CAAwB;AACxB,KAAK+8B,UAAL,CAAkB,KAAlB,CACA,KAAKD,WAAL,CAAmB,KAAnB,CAEA;AAEA,KAAK7D,uBAAL,CAA+B,KAA/B,CAEA;AAEA,KAAKnD,WAAL,CAAmB9lD,iBAAnB,CACA,KAAKsrE,mBAAL,CAA2B,GAA3B,CACA,KAAKC,qBAAL,CAA6B,GAA7B,CAEA;AAEA,KAAKre,eAAL,CAAuB,CAAvB,CACA,KAAKC,eAAL,CAAuB,CAAvB,CAEA;AAEA,GAAI3rE,OAAQ,IAAZ,CAEIgqF,eAAiB,KAFrB,CAII;AAEAC,aAAe,IANnB,CAQIC,qBAAuB,IAR3B,CASIC,oBAAsB,IAT1B,CAUIC,mBAAqB,CAAE,CAV3B,CAWIC,wBAA0B,EAX9B,CAaIC,eAAiB,IAbrB,CAcIC,oBAAsB,IAd1B,CAgBIC,iBAAmB,GAAIzuD,QAAJ,EAhBvB,CAiBI0uD,gBAAkB,GAAI1uD,QAAJ,EAjBtB,CAkBI2uD,oBAAsB,IAlB1B,CAoBI;AAEAC,kBAAoB,CAtBxB,CAwBI;AAEAC,OAASnO,QAAQ55E,KA1BrB,CA2BIgoF,QAAUpO,QAAQ35E,MA3BtB,CA6BIgoF,YAAc,CA7BlB,CA+BIC,UAAY,GAAIhvD,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB6uD,MAAnB,CAA2BC,OAA3B,CA/BhB,CAgCIG,SAAW,GAAIjvD,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB6uD,MAAnB,CAA2BC,OAA3B,CAhCf,CAiCII,aAAe,KAjCnB,CAmCI;AAEAzb,SAAW,GAAIvrC,QAAJ,EArCf,CAuCI;AAEAinD,UAAY,GAAIvxB,cAAJ,EAzChB,CA0CIwxB,iBAAmB,KA1CvB,CA2CIC,sBAAwB,KA3C5B,CA6CI;AAEA3b,kBAAoB,GAAIzmD,QAAJ,EA/CxB,CAiDIqiE,SAAW,GAAIxjF,QAAJ,EAjDf,CAmDA,QAASyjF,oBAAT,EAA+B,CAE3B,MAAOpB,wBAAyB,IAAzB,CAAgCY,WAAhC,CAA8C,CAArD,CAEH,CAED;AAEA,GAAIla,IAAJ,CAEA,GAAI,CAEA,GAAI2a,mBAAoB,CACpBnjE,MAAO8gE,MADa,CAEpBv0C,MAAOw0C,MAFa,CAGpBlS,QAASmS,QAHW,CAIpBroF,UAAWsoF,UAJS,CAKpBx8B,mBAAoBy8B,mBALA,CAMpBE,sBAAuBD,sBANH,CAOpBG,gBAAiBD,gBAPG,CAAxB,CAUA;AAEAhN,QAAQ72E,gBAAR,CAA0B,kBAA1B,CAA8C4lF,aAA9C,CAA6D,KAA7D,EACA/O,QAAQ72E,gBAAR,CAA0B,sBAA1B,CAAkD6lF,gBAAlD,CAAoE,KAApE,EAEA7a,IAAMqY,UAAYxM,QAAQ37E,UAAR,CAAoB,OAApB,CAA6ByqF,iBAA7B,CAAZ,EAAgE9O,QAAQ37E,UAAR,CAAoB,oBAApB,CAA0CyqF,iBAA1C,CAAtE,CAEA,GAAK3a,MAAQ,IAAb,CAAoB,CAEhB,GAAK6L,QAAQ37E,UAAR,CAAoB,OAApB,IAAkC,IAAvC,CAA8C,CAE1C,KAAM,IAAI0lB,MAAJ,CAAW,6DAAX,CAAN,CAEH,CAJD,IAIO,CAEH,KAAM,IAAIA,MAAJ,CAAW,+BAAX,CAAN,CAEH,CAEJ,CAED;AAEA,GAAKoqD,IAAI3Y,wBAAJ,GAAiCtwD,SAAtC,CAAkD,CAE9CipE,IAAI3Y,wBAAJ,CAA+B,UAAY,CAEvC,MAAO,CAAE,WAAY,CAAd,CAAiB,WAAY,CAA7B,CAAgC,YAAa,CAA7C,CAAP,CAEH,CAJD,CAMH,CAEJ,CAAC,MAAQhvC,KAAR,CAAgB,CAEd/iB,QAAQ+iB,KAAR,CAAe,wBAA0BA,MAAMyiE,OAA/C,EAEH,CAED,GAAIp9B,WAAJ,CAAgBob,YAAhB,CAA8B7+D,KAA9B,CAAqCusD,IAArC,CACA,GAAI5hD,WAAJ,CAAgBwlB,QAAhB,CAA0BwE,UAA1B,CAAsC0c,UAAtC,CAAkD6Z,OAAlD,CACA,GAAI41B,aAAJ,CAAkBC,WAAlB,CAA+B3c,YAA/B,CAEA,GAAI1Y,WAAJ,CAAgBs1B,YAAhB,CAA8BC,cAA9B,CAA8CC,qBAA9C,CACA,GAAIC,eAAJ,CAEA,GAAI1X,MAAJ,CAEA,QAAS2X,cAAT,EAAyB,CAErB39B,WAAa,GAAI+M,gBAAJ,CAAqBuV,GAArB,CAAb,CACAtiB,WAAW37C,GAAX,CAAgB,qBAAhB,EACA27C,WAAW37C,GAAX,CAAgB,mBAAhB,EACA27C,WAAW37C,GAAX,CAAgB,0BAAhB,EACA27C,WAAW37C,GAAX,CAAgB,wBAAhB,EACA27C,WAAW37C,GAAX,CAAgB,+BAAhB,EACA27C,WAAW37C,GAAX,CAAgB,0BAAhB,EACA27C,WAAW37C,GAAX,CAAgB,wBAAhB,EACA27C,WAAW37C,GAAX,CAAgB,wBAAhB,EAEA2hE,MAAQ,GAAIyN,WAAJ,CAAgBnR,GAAhB,CAAqBtiB,UAArB,CAAR,CAEAob,aAAe,GAAI9R,kBAAJ,CAAuBgZ,GAAvB,CAA4BtiB,UAA5B,CAAwC7R,UAAxC,CAAf,CAEA5xC,MAAQ,GAAIwpE,WAAJ,CAAgBzD,GAAhB,CAAqBtiB,UAArB,CAAiCgmB,KAAjC,CAAR,CACAzpE,MAAM4xB,OAAN,CAAeguD,gBAAgBjgF,IAAhB,CAAsBwgF,QAAtB,EAAiC97E,cAAjC,CAAiD47E,WAAjD,CAAf,EACAjgF,MAAM8xB,QAAN,CAAgB6tD,iBAAiBhgF,IAAjB,CAAuBugF,SAAvB,EAAmC77E,cAAnC,CAAmD47E,WAAnD,CAAhB,EAEA1zB,KAAO,GAAIiF,UAAJ,CAAeuU,GAAf,CAAP,CACAp7D,WAAa,GAAI82D,gBAAJ,EAAb,CACAtxC,SAAW,GAAIqhD,cAAJ,CAAmBzL,GAAnB,CAAwBtiB,UAAxB,CAAoCzjD,KAApC,CAA2C2K,UAA3C,CAAuDk0D,YAAvD,CAAqE4K,KAArE,CAA4Eld,IAA5E,CAAX,CACA53B,WAAa,GAAIsW,gBAAJ,CAAqB86B,GAArB,CAAb,CACA10B,WAAa,GAAIqf,gBAAJ,CAAqBqV,GAArB,CAA0BpxC,UAA1B,CAAsC43B,IAAtC,CAAb,CACArB,QAAU,GAAI4H,aAAJ,CAAkBzhB,UAAlB,CAA8Bkb,IAA9B,CAAV,CACAy0B,aAAe,GAAIzuB,kBAAJ,CAAuBwT,GAAvB,CAAf,CACA+a,aAAe,GAAIliB,cAAJ,CAAmBzpE,KAAnB,CAA0BsuD,UAA1B,CAAsCob,YAAtC,CAAf,CACAkiB,YAAc,GAAI9e,iBAAJ,EAAd,CACAmC,aAAe,GAAID,kBAAJ,EAAf,CAEAzY,WAAa,GAAIT,gBAAJ,CAAqB91D,KAArB,CAA4B6K,KAA5B,CAAmCkrD,OAAnC,CAA4CuzB,mBAA5C,CAAb,CAEAwC,eAAiB,GAAI30B,oBAAJ,CAAyByZ,GAAzB,CAA8BtiB,UAA9B,CAA0C8I,IAA1C,CAAjB,CACA20B,sBAAwB,GAAI7vB,2BAAJ,CAAgC0U,GAAhC,CAAqCtiB,UAArC,CAAiD8I,IAAjD,CAAxB,CAEA40B,eAAiB,GAAItZ,oBAAJ,CAAyB1yE,KAAzB,CAAgC4wE,GAAhC,CAAqC/lE,KAArC,CAA4CmwB,QAA5C,CAAsD0uC,YAAtD,CAAjB,CAEAtS,KAAK6F,QAAL,CAAgB0uB,aAAa1uB,QAA7B,CAEAj9D,MAAMiB,OAAN,CAAgB2vE,GAAhB,CACA5wE,MAAM0pE,YAAN,CAAqBA,YAArB,CACA1pE,MAAMsuD,UAAN,CAAmBA,UAAnB,CACAtuD,MAAMwV,UAAN,CAAmBA,UAAnB,CACAxV,MAAM4rF,WAAN,CAAoBA,WAApB,CACA5rF,MAAM6K,KAAN,CAAcA,KAAd,CACA7K,MAAMo3D,IAAN,CAAaA,IAAb,CAEH,CAED60B,gBAEA;AAEA,GAAIC,IAAO,MAAQC,UAAV,CAAwB,GAAInE,aAAJ,CAAkBhoF,KAAlB,CAAxB,CAAoD,GAAIilF,aAAJ,CAAkBjlF,KAAlB,CAA7D,CAEA,KAAKksF,EAAL,CAAUA,EAAV,CAEA;AAEA,GAAI9qF,WAAY,GAAIiuE,eAAJ,CAAoBrvE,KAApB,CAA2B+1D,OAA3B,CAAoC2T,aAAa9Q,cAAjD,CAAhB,CAEA,KAAKx3D,SAAL,CAAiBA,SAAjB,CAEA;AAEA,KAAKN,UAAL,CAAkB,UAAY,CAE1B,MAAO8vE,IAAP,CAEH,CAJD,CAMA,KAAKwb,oBAAL,CAA4B,UAAY,CAEpC,MAAOxb,KAAIwb,oBAAJ,EAAP,CAEH,CAJD,CAMA,KAAKC,gBAAL,CAAwB,UAAY,CAEhC,GAAI50B,WAAYnJ,WAAW37C,GAAX,CAAgB,oBAAhB,CAAhB,CACA,GAAK8kD,SAAL,CAAiBA,UAAU60B,WAAV,GAEpB,CALD,CAOA,KAAKC,mBAAL,CAA2B,UAAY,CAEnC,GAAI90B,WAAYnJ,WAAW37C,GAAX,CAAgB,oBAAhB,CAAhB,CACA,GAAK8kD,SAAL,CAAiBA,UAAU+0B,cAAV,GAEpB,CALD,CAOA,KAAKlG,aAAL,CAAqB,UAAY,CAE7B,MAAOwE,YAAP,CAEH,CAJD,CAMA,KAAK2B,aAAL,CAAqB,SAAW55E,KAAX,CAAmB,CAEpC,GAAKA,QAAUlL,SAAf,CAA2B,OAE3BmjF,YAAcj4E,KAAd,CAEA,KAAK1R,OAAL,CAAcypF,MAAd,CAAsBC,OAAtB,CAA+B,KAA/B,EAEH,CARD,CAUA,KAAK/rD,OAAL,CAAe,UAAY,CAEvB,MAAO,CACHj8B,MAAO+nF,MADJ,CAEH9nF,OAAQ+nF,OAFL,CAAP,CAKH,CAPD,CASA,KAAK1pF,OAAL,CAAe,SAAW0B,KAAX,CAAkBC,MAAlB,CAA0B4pF,WAA1B,CAAwC,CAEnD,GAAKR,GAAGnG,YAAH,EAAL,CAAyB,CAErB7/E,QAAQgK,IAAR,CAAc,wEAAd,EACA,OAEH,CAED06E,OAAS/nF,KAAT,CACAgoF,QAAU/nF,MAAV,CAEA25E,QAAQ55E,KAAR,CAAgBA,MAAQioF,WAAxB,CACArO,QAAQ35E,MAAR,CAAiBA,OAASgoF,WAA1B,CAEA,GAAK4B,cAAgB,KAArB,CAA6B,CAEzBjQ,QAAQxuC,KAAR,CAAcprC,KAAd,CAAsBA,MAAQ,IAA9B,CACA45E,QAAQxuC,KAAR,CAAcnrC,MAAd,CAAuBA,OAAS,IAAhC,CAEH,CAED,KAAK6pF,WAAL,CAAkB,CAAlB,CAAqB,CAArB,CAAwB9pF,KAAxB,CAA+BC,MAA/B,EAEH,CAxBD,CA0BA,KAAK8pF,oBAAL,CAA4B,UAAY,CAEpC,MAAO,CACH/pF,MAAO+nF,OAASE,WADb,CAEHhoF,OAAQ+nF,QAAUC,WAFf,CAAP,CAKH,CAPD,CASA,KAAKvE,oBAAL,CAA4B,SAAW1jF,KAAX,CAAkBC,MAAlB,CAA0B+pF,UAA1B,CAAuC,CAE/DjC,OAAS/nF,KAAT,CACAgoF,QAAU/nF,MAAV,CAEAgoF,YAAc+B,UAAd,CAEApQ,QAAQ55E,KAAR,CAAgBA,MAAQgqF,UAAxB,CACApQ,QAAQ35E,MAAR,CAAiBA,OAAS+pF,UAA1B,CAEA,KAAKF,WAAL,CAAkB,CAAlB,CAAqB,CAArB,CAAwB9pF,KAAxB,CAA+BC,MAA/B,EAEH,CAZD,CAcA,KAAKgqF,kBAAL,CAA0B,UAAY,CAElC,MAAOtC,iBAAP,CAEH,CAJD,CAMA,KAAKmC,WAAL,CAAmB,SAAWprF,CAAX,CAAcC,CAAd,CAAiBqB,KAAjB,CAAwBC,MAAxB,CAAiC,CAEhDioF,UAAU3oF,GAAV,CAAeb,CAAf,CAAkBspF,QAAUrpF,CAAV,CAAcsB,MAAhC,CAAwCD,KAAxC,CAA+CC,MAA/C,EACA+H,MAAM8xB,QAAN,CAAgB6tD,iBAAiBhgF,IAAjB,CAAuBugF,SAAvB,EAAmC77E,cAAnC,CAAmD47E,WAAnD,CAAhB,EAEH,CALD,CAOA,KAAKiC,UAAL,CAAkB,SAAWxrF,CAAX,CAAcC,CAAd,CAAiBqB,KAAjB,CAAwBC,MAAxB,CAAiC,CAE/CkoF,SAAS5oF,GAAT,CAAcb,CAAd,CAAiBspF,QAAUrpF,CAAV,CAAcsB,MAA/B,CAAuCD,KAAvC,CAA8CC,MAA9C,EACA+H,MAAM4xB,OAAN,CAAeguD,gBAAgBjgF,IAAhB,CAAsBwgF,QAAtB,EAAiC97E,cAAjC,CAAiD47E,WAAjD,CAAf,EAEH,CALD,CAOA,KAAK9Z,cAAL,CAAsB,SAAWgc,OAAX,CAAqB,CAEvCniF,MAAMmmE,cAAN,CAAsBia,aAAe+B,OAArC,EAEH,CAJD,CAMA;AAEA,KAAKh2B,aAAL,CAAqB,UAAY,CAE7B,MAAOT,YAAWS,aAAX,EAAP,CAEH,CAJD,CAMA,KAAK91D,aAAL,CAAqB,UAAY,CAE7Bq1D,WAAWr1D,aAAX,CAAyBk7E,KAAzB,CAAgC7lB,UAAhC,CAA4C7/C,SAA5C,EAEH,CAJD,CAMA,KAAKugD,aAAL,CAAqB,UAAY,CAE7B,MAAOV,YAAWU,aAAX,EAAP,CAEH,CAJD,CAMA,KAAKC,aAAL,CAAqB,UAAY,CAE7BX,WAAWW,aAAX,CAAyBklB,KAAzB,CAAgC7lB,UAAhC,CAA4C7/C,SAA5C,EAEH,CAJD,CAMA,KAAKggD,KAAL,CAAa,SAAWjzD,KAAX,CAAkBkxC,KAAlB,CAAyBsiC,OAAzB,CAAmC,CAE5C,GAAIgW,MAAO,CAAX,CAEA,GAAKxpF,QAAUkE,SAAV,EAAuBlE,KAA5B,CAAoCwpF,MAAQrc,IAAIsc,gBAAZ,CACpC,GAAKv4C,QAAUhtC,SAAV,EAAuBgtC,KAA5B,CAAoCs4C,MAAQrc,IAAIuc,gBAAZ,CACpC,GAAKlW,UAAYtvE,SAAZ,EAAyBsvE,OAA9B,CAAwCgW,MAAQrc,IAAIwc,kBAAZ,CAExCxc,IAAIla,KAAJ,CAAWu2B,IAAX,EAEH,CAVD,CAYA,KAAKj3B,UAAL,CAAkB,UAAY,CAE1B,KAAKU,KAAL,CAAY,IAAZ,CAAkB,KAAlB,CAAyB,KAAzB,EAEH,CAJD,CAMA,KAAKmf,UAAL,CAAkB,UAAY,CAE1B,KAAKnf,KAAL,CAAY,KAAZ,CAAmB,IAAnB,CAAyB,KAAzB,EAEH,CAJD,CAMA,KAAKwgB,YAAL,CAAoB,UAAY,CAE5B,KAAKxgB,KAAL,CAAY,KAAZ,CAAmB,KAAnB,CAA0B,IAA1B,EAEH,CAJD,CAMA,KAAK22B,WAAL,CAAmB,SAAW1P,YAAX,CAAyBl6E,KAAzB,CAAgCkxC,KAAhC,CAAuCsiC,OAAvC,CAAiD,CAEhE,KAAKzF,eAAL,CAAsBmM,YAAtB,EACA,KAAKjnB,KAAL,CAAYjzD,KAAZ,CAAmBkxC,KAAnB,CAA0BsiC,OAA1B,EAEH,CALD,CAOA;AAEA,KAAKrqE,OAAL,CAAe,UAAY,CAEvB6vE,QAAQ5vE,mBAAR,CAA6B,kBAA7B,CAAiD2+E,aAAjD,CAAgE,KAAhE,EACA/O,QAAQ5vE,mBAAR,CAA6B,sBAA7B,CAAqD4+E,gBAArD,CAAuE,KAAvE,EAEAG,YAAYh/E,OAAZ,GACAqiE,aAAariE,OAAb,GACA4I,WAAW5I,OAAX,GACAmpD,QAAQnpD,OAAR,GAEAs/E,GAAGt/E,OAAH,GAEA45E,UAAU3wE,IAAV,GAEH,CAdD,CAgBA;AAEA,QAAS21E,cAAT,CAAwBj7E,KAAxB,CAAgC,CAE5BA,MAAM0B,cAAN,GAEA/L,QAAQC,GAAR,CAAa,oCAAb,EAEA6jF,eAAiB,IAAjB,CAEH,CAED,QAASyB,iBAAT,EAA2B,WAAc,CAErCvlF,QAAQC,GAAR,CAAa,wCAAb,EAEA6jF,eAAiB,KAAjB,CAEAiC,gBAEH,CAED,QAASqB,kBAAT,CAA4B/8E,KAA5B,CAAoC,CAEhC,GAAIosC,UAAWpsC,MAAMvN,MAArB,CAEA25C,SAAS9vC,mBAAT,CAA8B,SAA9B,CAAyCygF,iBAAzC,EAEAC,mBAAoB5wC,QAApB,EAEH,CAED;AAEA,QAAS4wC,mBAAT,CAA6B5wC,QAA7B,CAAwC,CAEpC6wC,gCAAiC7wC,QAAjC,EAEAnnC,WAAWlC,MAAX,CAAmBqpC,QAAnB,EAEH,CAGD,QAAS6wC,gCAAT,CAA0C7wC,QAA1C,CAAqD,CAEjD,GAAIwvB,aAAc32D,WAAW7C,GAAX,CAAgBgqC,QAAhB,EAA2B2gB,OAA7C,CAEA3gB,SAAS2gB,OAAT,CAAmB31D,SAAnB,CAEA,GAAKwkE,cAAgBxkE,SAArB,CAAiC,CAE7BgkF,aAAavf,cAAb,CAA6BD,WAA7B,EAEH,CAEJ,CAED;AAEA,QAASshB,sBAAT,CAAgChmF,MAAhC,CAAwC61D,OAAxC,CAAiD3gB,QAAjD,CAA4D,CAExDl1C,OAAO9B,MAAP,CAAe,SAAW8B,MAAX,CAAoB,CAE/BzH,MAAM0tF,qBAAN,CAA6BjmF,MAA7B,CAAqC61D,OAArC,CAA8C3gB,QAA9C,EAEH,CAJD,EAMH,CAED,KAAK+wC,qBAAL,CAA6B,SAAWjmF,MAAX,CAAmB61D,OAAnB,CAA4B3gB,QAA5B,CAAuC,CAEhE9xC,MAAM2oE,cAAN,GAEA,GAAIx9B,SAAUxgC,WAAW7C,GAAX,CAAgBlL,MAAhB,CAAd,CAEA,GAAKA,OAAOkmF,YAAP,EAAuB,CAAE33C,QAAQ10C,QAAtC,CAAiD00C,QAAQ10C,QAAR,CAAmBsvE,IAAI16B,YAAJ,EAAnB,CACjD,GAAKzuC,OAAOmmF,UAAP,EAAqB,CAAE53C,QAAQ9d,MAApC,CAA6C8d,QAAQ9d,MAAR,CAAiB04C,IAAI16B,YAAJ,EAAjB,CAC7C,GAAKzuC,OAAOomF,MAAP,EAAiB,CAAE73C,QAAQla,EAAhC,CAAqCka,QAAQla,EAAR,CAAa80C,IAAI16B,YAAJ,EAAb,CACrC,GAAKzuC,OAAOqmF,SAAP,EAAoB,CAAE93C,QAAQvyC,KAAnC,CAA2CuyC,QAAQvyC,KAAR,CAAgBmtE,IAAI16B,YAAJ,EAAhB,CAE3C,GAAI63C,mBAAoBzwB,QAAQ+L,aAAR,EAAxB,CAEA,GAAK5hE,OAAOkmF,YAAZ,CAA2B,CAEvB/c,IAAIn6B,UAAJ,CAAgBm6B,IAAI7U,YAApB,CAAkC/lB,QAAQ10C,QAA1C,EACAsvE,IAAIl6B,UAAJ,CAAgBk6B,IAAI7U,YAApB,CAAkCt0D,OAAOumF,aAAzC,CAAwDpd,IAAIt6B,YAA5D,EAEAzrC,MAAM4oE,eAAN,CAAuBsa,kBAAkBzsF,QAAzC,EACAsvE,IAAIgD,mBAAJ,CAAyBma,kBAAkBzsF,QAA3C,CAAqD,CAArD,CAAwDsvE,IAAIh6B,KAA5D,CAAmE,KAAnE,CAA0E,CAA1E,CAA6E,CAA7E,EAEH,CAED,GAAKnvC,OAAOmmF,UAAZ,CAAyB,CAErBhd,IAAIn6B,UAAJ,CAAgBm6B,IAAI7U,YAApB,CAAkC/lB,QAAQ9d,MAA1C,EAEA,GAAK,CAAEykB,SAASsxC,mBAAX,EACD,CAAEtxC,SAASuxC,sBADV,EAED,CAAEvxC,SAASwxC,oBAFV,EAGDxxC,SAAS34C,WAAT,GAAyB,IAH7B,CAGoC,CAEhC,IAAM,GAAIuP,GAAI,CAAR,CAAW6H,EAAI3T,OAAOknB,KAAP,CAAe,CAApC,CAAuCpb,EAAI6H,CAA3C,CAA8C7H,GAAK,CAAnD,CAAuD,CAEnD,GAAI2H,OAAQzT,OAAO2mF,WAAnB,CAEA,GAAIC,IAAK,CAAEnzE,MAAO3H,EAAI,CAAX,EAAiB2H,MAAO3H,EAAI,CAAX,CAAjB,CAAkC2H,MAAO3H,EAAI,CAAX,CAApC,EAAuD,CAAhE,CACA,GAAI+6E,IAAK,CAAEpzE,MAAO3H,EAAI,CAAX,EAAiB2H,MAAO3H,EAAI,CAAX,CAAjB,CAAkC2H,MAAO3H,EAAI,CAAX,CAApC,EAAuD,CAAhE,CACA,GAAIg7E,IAAK,CAAErzE,MAAO3H,EAAI,CAAX,EAAiB2H,MAAO3H,EAAI,CAAX,CAAjB,CAAkC2H,MAAO3H,EAAI,CAAX,CAApC,EAAuD,CAAhE,CAEA2H,MAAO3H,EAAI,CAAX,EAAiB86E,EAAjB,CACAnzE,MAAO3H,EAAI,CAAX,EAAiB+6E,EAAjB,CACApzE,MAAO3H,EAAI,CAAX,EAAiBg7E,EAAjB,CAEArzE,MAAO3H,EAAI,CAAX,EAAiB86E,EAAjB,CACAnzE,MAAO3H,EAAI,CAAX,EAAiB+6E,EAAjB,CACApzE,MAAO3H,EAAI,CAAX,EAAiBg7E,EAAjB,CAEArzE,MAAO3H,EAAI,CAAX,EAAiB86E,EAAjB,CACAnzE,MAAO3H,EAAI,CAAX,EAAiB+6E,EAAjB,CACApzE,MAAO3H,EAAI,CAAX,EAAiBg7E,EAAjB,CAEH,CAEJ,CAED3d,IAAIl6B,UAAJ,CAAgBk6B,IAAI7U,YAApB,CAAkCt0D,OAAO2mF,WAAzC,CAAsDxd,IAAIt6B,YAA1D,EAEAzrC,MAAM4oE,eAAN,CAAuBsa,kBAAkB71D,MAAzC,EAEA04C,IAAIgD,mBAAJ,CAAyBma,kBAAkB71D,MAA3C,CAAmD,CAAnD,CAAsD04C,IAAIh6B,KAA1D,CAAiE,KAAjE,CAAwE,CAAxE,CAA2E,CAA3E,EAEH,CAED,GAAKnvC,OAAOomF,MAAP,EAAiBlxC,SAAS/M,GAA/B,CAAqC,CAEjCghC,IAAIn6B,UAAJ,CAAgBm6B,IAAI7U,YAApB,CAAkC/lB,QAAQla,EAA1C,EACA80C,IAAIl6B,UAAJ,CAAgBk6B,IAAI7U,YAApB,CAAkCt0D,OAAO+mF,OAAzC,CAAkD5d,IAAIt6B,YAAtD,EAEAzrC,MAAM4oE,eAAN,CAAuBsa,kBAAkBjyD,EAAzC,EAEA80C,IAAIgD,mBAAJ,CAAyBma,kBAAkBjyD,EAA3C,CAA+C,CAA/C,CAAkD80C,IAAIh6B,KAAtD,CAA6D,KAA7D,CAAoE,CAApE,CAAuE,CAAvE,EAEH,CAED,GAAKnvC,OAAOqmF,SAAP,EAAoBnxC,SAASyB,YAAT,GAA0BjiC,QAAnD,CAA8D,CAE1Dy0D,IAAIn6B,UAAJ,CAAgBm6B,IAAI7U,YAApB,CAAkC/lB,QAAQvyC,KAA1C,EACAmtE,IAAIl6B,UAAJ,CAAgBk6B,IAAI7U,YAApB,CAAkCt0D,OAAOgnF,UAAzC,CAAqD7d,IAAIt6B,YAAzD,EAEAzrC,MAAM4oE,eAAN,CAAuBsa,kBAAkBtqF,KAAzC,EAEAmtE,IAAIgD,mBAAJ,CAAyBma,kBAAkBtqF,KAA3C,CAAkD,CAAlD,CAAqDmtE,IAAIh6B,KAAzD,CAAgE,KAAhE,CAAuE,CAAvE,CAA0E,CAA1E,EAEH,CAED/rC,MAAM6oE,uBAAN,GAEA9C,IAAIrZ,UAAJ,CAAgBqZ,IAAIlU,SAApB,CAA+B,CAA/B,CAAkCj1D,OAAOknB,KAAzC,EAEAlnB,OAAOknB,KAAP,CAAe,CAAf,CAEH,CA5FD,CA8FA,KAAKooC,kBAAL,CAA0B,SAAWv3D,MAAX,CAAmBuyC,GAAnB,CAAwB3S,QAAxB,CAAkCud,QAAlC,CAA4Cl1C,MAA5C,CAAoD+4C,KAApD,CAA4D,CAElF,GAAIy6B,aAAgBxzE,OAAOm7C,MAAP,EAAiBn7C,OAAO2vB,WAAP,CAAmBrI,WAAnB,GAAmC,CAAxE,CAEAlkB,MAAMmwE,WAAN,CAAmBr+B,QAAnB,CAA6Bs+B,WAA7B,EAEA,GAAI3d,SAAUoxB,WAAYlvF,MAAZ,CAAoBuyC,GAApB,CAAyB4K,QAAzB,CAAmCl1C,MAAnC,CAAd,CACA,GAAIknF,iBAAkBvvD,SAASr/B,EAAT,CAAc,GAAd,CAAoBu9D,QAAQv9D,EAA5B,CAAiC,GAAjC,EAAyC48C,SAAS8Q,SAAT,GAAuB,IAAhE,CAAtB,CAEA,GAAImhC,eAAgB,KAApB,CAEA,GAAKD,kBAAoBtE,uBAAzB,CAAmD,CAE/CA,wBAA0BsE,eAA1B,CACAC,cAAgB,IAAhB,CAEH,CAED,GAAKnnF,OAAOosD,qBAAZ,CAAoC,CAEhCg4B,aAAanmF,MAAb,CAAqB+B,MAArB,CAA6B23B,QAA7B,CAAuCud,QAAvC,CAAiD2gB,OAAjD,EAEAsxB,cAAgB,IAAhB,CAEH,CAED;AAEA,GAAIl0E,OAAQ0kB,SAAS1kB,KAArB,CACA,GAAIpZ,UAAW89B,SAASI,UAAT,CAAoBl+B,QAAnC,CACA,GAAIutF,aAAc,CAAlB,CAEA,GAAKlyC,SAAS8Q,SAAT,GAAuB,IAA5B,CAAmC,CAE/B/yC,MAAQwhC,WAAW8f,qBAAX,CAAkC58B,QAAlC,CAAR,CACAyvD,YAAc,CAAd,CAEH,CAED,GAAIlmE,UAAJ,CACA,GAAIlpB,UAAWqsF,cAAf,CAEA,GAAKpxE,QAAU,IAAf,CAAsB,CAElBiO,UAAY6W,WAAW7sB,GAAX,CAAgB+H,KAAhB,CAAZ,CAEAjb,SAAWssF,qBAAX,CACAtsF,SAASsoD,QAAT,CAAmBp/B,SAAnB,EAEH,CAED,GAAKimE,aAAL,CAAqB,CAEjBE,sBAAuBnyC,QAAvB,CAAiC2gB,OAAjC,CAA0Cl+B,QAA1C,EAEA,GAAK1kB,QAAU,IAAf,CAAsB,CAElBk2D,IAAIn6B,UAAJ,CAAgBm6B,IAAI9U,oBAApB,CAA0CnzC,UAAU6tB,MAApD,EAEH,CAEJ,CAED;AAEA,GAAIu4C,WAAY/mF,QAAhB,CAEA,GAAK0S,QAAU,IAAf,CAAsB,CAElBq0E,UAAYr0E,MAAMiU,KAAlB,CAEH,CAJD,IAIO,IAAKrtB,WAAaqG,SAAlB,CAA8B,CAEjConF,UAAYztF,SAASqtB,KAArB,CAEH,CAED,GAAIqgE,YAAa5vD,SAASyoB,SAAT,CAAmB3gD,KAAnB,CAA2B2nF,WAA5C,CACA,GAAII,YAAa7vD,SAASyoB,SAAT,CAAmBl5B,KAAnB,CAA2BkgE,WAA5C,CAEA,GAAI5kC,YAAazJ,QAAU,IAAV,CAAiBA,MAAMt5C,KAAN,CAAc2nF,WAA/B,CAA6C,CAA9D,CACA,GAAI9jC,YAAavK,QAAU,IAAV,CAAiBA,MAAM7xB,KAAN,CAAckgE,WAA/B,CAA6C7mF,QAA9D,CAEA,GAAIknF,WAAYjqF,KAAK8G,GAAL,CAAUijF,UAAV,CAAsB/kC,UAAtB,CAAhB,CACA,GAAIklC,SAAUlqF,KAAK+G,GAAL,CAAU+iF,SAAV,CAAqBC,WAAaC,UAAlC,CAA8ChlC,WAAac,UAA3D,EAA0E,CAAxF,CAEA,GAAIqkC,WAAYnqF,KAAK8G,GAAL,CAAU,CAAV,CAAaojF,QAAUD,SAAV,CAAsB,CAAnC,CAAhB,CAEA,GAAKE,YAAc,CAAnB,CAAuB,OAEvB;AAEA,GAAK3nF,OAAOm7C,MAAZ,CAAqB,CAEjB,GAAKjG,SAAS8Q,SAAT,GAAuB,IAA5B,CAAmC,CAE/B5iD,MAAM6wE,YAAN,CAAoB/+B,SAAS+Q,kBAAT,CAA8B49B,qBAAlD,EACA7rF,SAAS63D,OAAT,CAAkBsZ,IAAI/T,KAAtB,EAEH,CALD,IAKO,CAEH,OAASp1D,OAAOisD,QAAhB,EAEI,IAAKzwC,kBAAL,CACIxjB,SAAS63D,OAAT,CAAkBsZ,IAAIlU,SAAtB,EACA,MAEJ,IAAKx5C,sBAAL,CACIzjB,SAAS63D,OAAT,CAAkBsZ,IAAIjU,cAAtB,EACA,MAEJ,IAAKx5C,oBAAL,CACI1jB,SAAS63D,OAAT,CAAkBsZ,IAAIhU,YAAtB,EACA,MAZR,CAgBH,CAGJ,CA5BD,IA4BO,IAAKn1D,OAAO+gD,MAAZ,CAAqB,CAExB,GAAImzB,WAAYh/B,SAAS4Q,SAAzB,CAEA,GAAKouB,YAAch0E,SAAnB,CAA+Bg0E,UAAY,CAAZ,CAAe;AAE9C9wE,MAAM6wE,YAAN,CAAoBC,UAAY2P,qBAAhC,EAEA,GAAK7jF,OAAO4nF,cAAZ,CAA6B,CAEzB5vF,SAAS63D,OAAT,CAAkBsZ,IAAI/T,KAAtB,EAEH,CAJD,IAIO,IAAKp1D,OAAO6nF,UAAZ,CAAyB,CAE5B7vF,SAAS63D,OAAT,CAAkBsZ,IAAI7T,SAAtB,EAEH,CAJM,IAIA,CAEHt9D,SAAS63D,OAAT,CAAkBsZ,IAAI9T,UAAtB,EAEH,CAEJ,CAtBM,IAsBA,IAAKr1D,OAAO8gD,QAAZ,CAAuB,CAE1B9oD,SAAS63D,OAAT,CAAkBsZ,IAAI5T,MAAtB,EAEH,CAED,GAAK59B,UAAYA,SAASmwD,yBAA1B,CAAsD,CAElD,GAAKnwD,SAASu4B,iBAAT,CAA6B,CAAlC,CAAsC,CAElCl4D,SAAS+3D,eAAT,CAA0Bp4B,QAA1B,CAAoC8vD,SAApC,CAA+CE,SAA/C,EAEH,CAEJ,CARD,IAQO,CAEH3vF,SAASkG,MAAT,CAAiBupF,SAAjB,CAA4BE,SAA5B,EAEH,CAEJ,CAlKD,CAoKA,QAASN,sBAAT,CAAgCnyC,QAAhC,CAA0C2gB,OAA1C,CAAmDl+B,QAAnD,CAA8D,CAE1D,GAAKA,UAAYA,SAASmwD,yBAA1B,CAAsD,CAElD,GAAKjhC,WAAW37C,GAAX,CAAgB,wBAAhB,IAA+C,IAApD,CAA2D,CAEvDzM,QAAQ+iB,KAAR,CAAe,gJAAf,EACA,OAEH,CAEJ,CAEDpe,MAAM2oE,cAAN,GAEA,GAAI3X,oBAAqBz8B,SAASI,UAAlC,CAEA,GAAIuuD,mBAAoBzwB,QAAQ+L,aAAR,EAAxB,CAEA,GAAImmB,gCAAiC7yC,SAASgS,sBAA9C,CAEA,IAAM,GAAI10B,KAAV,GAAkB8zD,kBAAlB,CAAsC,CAElC,GAAI0B,kBAAmB1B,kBAAmB9zD,IAAnB,CAAvB,CAEA,GAAKw1D,kBAAoB,CAAzB,CAA6B,CAEzB,GAAIC,mBAAoB7zB,mBAAoB5hC,IAApB,CAAxB,CAEA,GAAKy1D,oBAAsB/nF,SAA3B,CAAuC,CAEnC,GAAIy9C,YAAasqC,kBAAkBtqC,UAAnC,CACA,GAAI7mB,MAAOmxD,kBAAkBvqC,QAA7B,CAEA,GAAIx8B,WAAY6W,WAAW7sB,GAAX,CAAgB+8E,iBAAhB,CAAhB,CAEA;AAEA,GAAK/mE,YAAchhB,SAAnB,CAA+B,SAE/B,GAAI6uC,QAAS7tB,UAAU6tB,MAAvB,CACA,GAAIlpC,MAAOqb,UAAUrb,IAArB,CACA,GAAIqqC,iBAAkBhvB,UAAUgvB,eAAhC,CAEA,GAAK+3C,kBAAkBz3C,4BAAvB,CAAsD,CAElD,GAAIlyC,MAAO2pF,kBAAkB3pF,IAA7B,CACA,GAAI4pF,QAAS5pF,KAAK4pF,MAAlB,CACA,GAAI3kF,QAAS0kF,kBAAkB1kF,MAA/B,CAEA,GAAKjF,MAAQA,KAAK6pF,4BAAlB,CAAiD,CAE7C/kF,MAAMgvE,yBAAN,CAAiC4V,gBAAjC,CAAmD1pF,KAAK+zE,gBAAxD,EAEA,GAAK16C,SAASu4B,iBAAT,GAA+BhwD,SAApC,CAAgD,CAE5Cy3B,SAASu4B,iBAAT,CAA6B5xD,KAAK+zE,gBAAL,CAAwB/zE,KAAK4oB,KAA1D,CAEH,CAEJ,CAVD,IAUO,CAEH9jB,MAAM4oE,eAAN,CAAuBgc,gBAAvB,EAEH,CAED7e,IAAIn6B,UAAJ,CAAgBm6B,IAAI7U,YAApB,CAAkCvlB,MAAlC,EACAo6B,IAAIgD,mBAAJ,CAAyB6b,gBAAzB,CAA2ClxD,IAA3C,CAAiDjxB,IAAjD,CAAuD83C,UAAvD,CAAmEuqC,OAASh4C,eAA5E,CAA6F3sC,OAAS2sC,eAAtG,EAEH,CAzBD,IAyBO,CAEH,GAAK+3C,kBAAkBG,0BAAvB,CAAoD,CAEhDhlF,MAAMgvE,yBAAN,CAAiC4V,gBAAjC,CAAmDC,kBAAkB5V,gBAArE,EAEA,GAAK16C,SAASu4B,iBAAT,GAA+BhwD,SAApC,CAAgD,CAE5Cy3B,SAASu4B,iBAAT,CAA6B+3B,kBAAkB5V,gBAAlB,CAAqC4V,kBAAkB/gE,KAApF,CAEH,CAEJ,CAVD,IAUO,CAEH9jB,MAAM4oE,eAAN,CAAuBgc,gBAAvB,EAEH,CAED7e,IAAIn6B,UAAJ,CAAgBm6B,IAAI7U,YAApB,CAAkCvlB,MAAlC,EACAo6B,IAAIgD,mBAAJ,CAAyB6b,gBAAzB,CAA2ClxD,IAA3C,CAAiDjxB,IAAjD,CAAuD83C,UAAvD,CAAmE,CAAnE,CAAsE,CAAtE,EAEH,CAEJ,CA/DD,IA+DO,IAAKoqC,iCAAmC7nF,SAAxC,CAAoD,CAEvD,GAAIkL,OAAQ28E,+BAAgCv1D,IAAhC,CAAZ,CAEA,GAAKpnB,QAAUlL,SAAf,CAA2B,CAEvB,OAASkL,MAAMlD,MAAf,EAEI,IAAK,EAAL,CACIihE,IAAIkf,eAAJ,CAAqBL,gBAArB,CAAuC58E,KAAvC,EACA,MAEJ,IAAK,EAAL,CACI+9D,IAAImf,eAAJ,CAAqBN,gBAArB,CAAuC58E,KAAvC,EACA,MAEJ,IAAK,EAAL,CACI+9D,IAAIof,eAAJ,CAAqBP,gBAArB,CAAuC58E,KAAvC,EACA,MAEJ,QACI+9D,IAAIqf,eAAJ,CAAqBR,gBAArB,CAAuC58E,KAAvC,EAfR,CAmBH,CAEJ,CAEJ,CAEJ,CAEDhI,MAAM6oE,uBAAN,GAEH,CAED;AAEA,KAAKwc,OAAL,CAAe,SAAW3wF,KAAX,CAAkBC,MAAlB,CAA2B,CAEtCoqF,mBAAqB3a,aAAat8D,GAAb,CAAkBpT,KAAlB,CAAyBC,MAAzB,CAArB,CACAoqF,mBAAmBxvB,IAAnB,GAEA76D,MAAM2/B,QAAN,CAAgB,SAAWz3B,MAAX,CAAoB,CAEhC,GAAKA,OAAO0oF,OAAZ,CAAsB,CAElBvG,mBAAmBhb,SAAnB,CAA8BnnE,MAA9B,EAEA,GAAKA,OAAOtF,UAAZ,CAAyB,CAErBynF,mBAAmB/a,UAAnB,CAA+BpnE,MAA/B,EAEH,CAEJ,CAEJ,CAdD,EAgBAmiF,mBAAmB7a,WAAnB,CAAgCvvE,MAAhC,EAEAD,MAAM2/B,QAAN,CAAgB,SAAWz3B,MAAX,CAAoB,CAEhC,GAAKA,OAAOk1C,QAAZ,CAAuB,CAEnB,GAAKhnC,MAAM63B,OAAN,CAAe/lC,OAAOk1C,QAAtB,CAAL,CAAwC,CAEpC,IAAM,GAAIppC,GAAI,CAAd,CAAiBA,EAAI9L,OAAOk1C,QAAP,CAAgBhtC,MAArC,CAA6C4D,GAA7C,CAAoD,CAEhD68E,aAAc3oF,OAAOk1C,QAAP,CAAiBppC,CAAjB,CAAd,CAAoChU,MAAMwyC,GAA1C,CAA+CtqC,MAA/C,EAEH,CAEJ,CARD,IAQO,CAEH2oF,aAAc3oF,OAAOk1C,QAArB,CAA+Bp9C,MAAMwyC,GAArC,CAA0CtqC,MAA1C,EAEH,CAEJ,CAEJ,CApBD,EAsBH,CA7CD,CA+CA;AAEA,GAAImhF,0BAA2B,IAA/B,CAEA,QAASlzC,iBAAT,EAA4B,CAExB,GAAKw2C,GAAGnG,YAAH,EAAL,CAAyB,OACzB,GAAK6C,wBAAL,CAAgCA,2BAEnC,CAED,GAAIpC,WAAY,GAAIjxC,eAAJ,EAAhB,CACAixC,UAAU5wC,gBAAV,CAA4BF,gBAA5B,EACA8wC,UAAU3wC,UAAV,CAAsBzoC,MAAtB,EAEA,KAAKwoC,gBAAL,CAAwB,SAAWh/B,QAAX,CAAsB,CAE1CgyE,yBAA2BhyE,QAA3B,CACAs1E,GAAGt2C,gBAAH,CAAqBh/B,QAArB,EAEA4vE,UAAUt/E,KAAV,GAEH,CAPD,CASA;AAEA,KAAKvB,MAAL,CAAc,SAAWpG,KAAX,CAAkBC,MAAlB,CAA0Bm+E,YAA1B,CAAwCrnB,UAAxC,CAAqD,CAE/D,GAAK,EAAI92D,QAAUA,OAAO67C,QAArB,CAAL,CAAuC,CAEnCn1C,QAAQ+iB,KAAR,CAAe,wEAAf,EACA,OAEH,CAED,GAAK+gE,cAAL,CAAsB,OAEtB;AAEAK,wBAA0B,EAA1B,CACAD,mBAAqB,CAAE,CAAvB,CACAE,eAAiB,IAAjB,CAEA;AAEA,GAAK/qF,MAAMoxE,UAAN,GAAqB,IAA1B,CAAiCpxE,MAAMkgC,iBAAN,GAEjC;AAEA,GAAKjgC,OAAO+5C,MAAP,GAAkB,IAAvB,CAA8B/5C,OAAOigC,iBAAP,GAE9B,GAAKysD,GAAG7qF,OAAR,CAAkB,CAEd7B,OAAS0sF,GAAGrF,SAAH,CAAcrnF,MAAd,CAAT,CAEH,CAED;AAEAoqF,mBAAqB3a,aAAat8D,GAAb,CAAkBpT,KAAlB,CAAyBC,MAAzB,CAArB,CACAoqF,mBAAmBxvB,IAAnB,GAEA76D,MAAM86C,cAAN,CAAsBr6C,KAAtB,CAA6BT,KAA7B,CAAoCC,MAApC,CAA4Cm+E,YAA5C,EAEAlO,kBAAkBjjD,gBAAlB,CAAoChtB,OAAO23B,gBAA3C,CAA6D33B,OAAO49C,kBAApE,EACAoyB,SAASlrC,aAAT,CAAwBmrC,iBAAxB,EAEA2b,sBAAwB,KAAKtxB,oBAA7B,CACAqxB,iBAAmBD,UAAU9wB,IAAV,CAAgB,KAAKjO,cAArB,CAAqCi/B,qBAArC,CAA4D5rF,MAA5D,CAAnB,CAEAmqF,kBAAoBiC,YAAYj5E,GAAZ,CAAiBpT,KAAjB,CAAwBC,MAAxB,CAApB,CACAmqF,kBAAkBvvB,IAAlB,GAEAi2B,cAAe9wF,KAAf,CAAsBC,MAAtB,CAA8BQ,MAAM6pF,WAApC,EAEA,GAAK7pF,MAAM6pF,WAAN,GAAsB,IAA3B,CAAkC,CAE9BF,kBAAkBlmC,IAAlB,GAEH,CAED;AAEA,GAAK0nC,gBAAL,CAAwBD,UAAU3wB,YAAV,GAExB,GAAImU,cAAekb,mBAAmB/+E,KAAnB,CAAyB6jE,YAA5C,CAEAttE,UAAUuE,MAAV,CAAkB+oE,YAAlB,CAAgCnvE,KAAhC,CAAuCC,MAAvC,EAEAoqF,mBAAmB7a,WAAnB,CAAgCvvE,MAAhC,EAEA,GAAK2rF,gBAAL,CAAwBD,UAAU1wB,UAAV,GAExB;AAEA,GAAK,KAAKpD,IAAL,CAAU8F,SAAf,CAA2B,KAAK9F,IAAL,CAAU3sD,KAAV,GAE3B,GAAKkzE,eAAiBh2E,SAAtB,CAAkC,CAE9Bg2E,aAAe,IAAf,CAEH,CAED,KAAKnM,eAAL,CAAsBmM,YAAtB,EAEA;AAEApnB,WAAW5wD,MAAX,CAAmBgkF,iBAAnB,CAAsCpqF,KAAtC,CAA6CC,MAA7C,CAAqD82D,UAArD,EAEA;AAEA,GAAIg6B,eAAgB3G,kBAAkB/c,MAAtC,CACA,GAAI2jB,oBAAqB5G,kBAAkBl+B,WAA3C,CAEA,GAAKlsD,MAAMixF,gBAAX,CAA8B,CAE1B,GAAIA,kBAAmBjxF,MAAMixF,gBAA7B,CAEA,GAAKF,cAAc3gF,MAAnB,CAA4B8gF,cAAeH,aAAf,CAA8B/wF,KAA9B,CAAqCC,MAArC,CAA6CgxF,gBAA7C,EAC5B,GAAKD,mBAAmB5gF,MAAxB,CAAiC8gF,cAAeF,kBAAf,CAAmChxF,KAAnC,CAA0CC,MAA1C,CAAkDgxF,gBAAlD,EAEpC,CAPD,IAOO,CAEH;AAEA,GAAKF,cAAc3gF,MAAnB,CAA4B8gF,cAAeH,aAAf,CAA8B/wF,KAA9B,CAAqCC,MAArC,EAE5B;AAEA,GAAK+wF,mBAAmB5gF,MAAxB,CAAiC8gF,cAAeF,kBAAf,CAAmChxF,KAAnC,CAA0CC,MAA1C,EAEpC,CAED;AAEA,GAAImvE,cAAeib,mBAAmB/+E,KAAnB,CAAyB8jE,YAA5C,CAEAqd,eAAermF,MAAf,CAAuBgpE,YAAvB,CAAqCpvE,KAArC,CAA4CC,MAA5C,EAEA;AAEA,GAAKm+E,YAAL,CAAoB,CAEhB3iD,SAAS8mD,wBAAT,CAAmCnE,YAAnC,EAEH,CAED;AAEA9yE,MAAMmrC,OAAN,CAAcrB,KAAd,CAAoBo8B,OAApB,CAA6B,IAA7B,EACAlmE,MAAMmrC,OAAN,CAAcrB,KAAd,CAAoBy/B,OAApB,CAA6B,IAA7B,EACAvpE,MAAMmrC,OAAN,CAAcvyC,KAAd,CAAoB2wE,OAApB,CAA6B,IAA7B,EAEAvpE,MAAMqwE,gBAAN,CAAwB,KAAxB,EAEA37E,MAAM+6C,aAAN,CAAqBt6C,KAArB,CAA4BT,KAA5B,CAAmCC,MAAnC,EAEA,GAAK0sF,GAAG7qF,OAAR,CAAkB,CAEd6qF,GAAGnE,WAAH,GAEH,CAED;AAEA4B,kBAAoB,IAApB,CACAC,mBAAqB,IAArB,CAEH,CA9ID,CAgJA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAuDA,QAASyG,cAAT,CAAwB5oF,MAAxB,CAAgCjI,MAAhC,CAAwCqqF,WAAxC,CAAsD,CAElD,GAAKpiF,OAAOuyC,OAAP,GAAmB,KAAxB,CAAgC,OAEhC,GAAIA,SAAUvyC,OAAO4xC,MAAP,CAAcD,IAAd,CAAoB55C,OAAO65C,MAA3B,CAAd,CAEA,GAAKW,OAAL,CAAe,CAEX,GAAKvyC,OAAO0oF,OAAZ,CAAsB,CAElBvG,mBAAmBhb,SAAnB,CAA8BnnE,MAA9B,EAEA,GAAKA,OAAOtF,UAAZ,CAAyB,CAErBynF,mBAAmB/a,UAAnB,CAA+BpnE,MAA/B,EAEH,CAEJ,CAVD,IAUO,IAAKA,OAAOipF,QAAZ,CAAuB,CAE1B,GAAK,CAAEjpF,OAAOwyC,aAAT,EAA0Bu1B,SAAS9pC,gBAAT,CAA2Bj+B,MAA3B,CAA/B,CAAqE,CAEjEmiF,mBAAmB9a,UAAnB,CAA+BrnE,MAA/B,EAEH,CAEJ,CARM,IAQA,IAAKA,OAAOkpF,uBAAZ,CAAsC,CAEzC,GAAK9G,WAAL,CAAmB,CAEfwB,SAAS7yD,qBAAT,CAAgC/wB,OAAO2vB,WAAvC,EACKvI,YADL,CACmB4gD,iBADnB,EAGH,CAEDka,kBAAkBvlF,IAAlB,CAAwBqD,MAAxB,CAAgC,IAAhC,CAAsCA,OAAOk1C,QAA7C,CAAuD0uC,SAAS5pF,CAAhE,CAAmE,IAAnE,EAEH,CAXM,IAWA,IAAKgG,OAAOm7C,MAAP,EAAiBn7C,OAAO+gD,MAAxB,EAAkC/gD,OAAO8gD,QAA9C,CAAyD,CAE5D,GAAK9gD,OAAO0jE,aAAZ,CAA4B,CAExB1jE,OAAO+iE,QAAP,CAAgB9kE,MAAhB,GAEH,CAED,GAAK,CAAE+B,OAAOwyC,aAAT,EAA0Bu1B,SAASjqC,gBAAT,CAA2B99B,MAA3B,CAA/B,CAAqE,CAEjE,GAAKoiF,WAAL,CAAmB,CAEfwB,SAAS7yD,qBAAT,CAAgC/wB,OAAO2vB,WAAvC,EACKvI,YADL,CACmB4gD,iBADnB,EAGH,CAED,GAAIrwC,UAAW22B,QAAQrwD,MAAR,CAAgB+B,MAAhB,CAAf,CACA,GAAIk1C,UAAWl1C,OAAOk1C,QAAtB,CAEA,GAAKhnC,MAAM63B,OAAN,CAAemP,QAAf,CAAL,CAAiC,CAE7B,GAAI4D,QAASnhB,SAASmhB,MAAtB,CAEA,IAAM,GAAIhtC,GAAI,CAAR,CAAW6H,EAAImlC,OAAO5wC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAIitC,OAAQD,OAAQhtC,CAAR,CAAZ,CACA,GAAIg/D,eAAgB51B,SAAU6D,MAAMtC,aAAhB,CAApB,CAEA,GAAKq0B,eAAiBA,cAAcv4B,OAApC,CAA8C,CAE1C2vC,kBAAkBvlF,IAAlB,CAAwBqD,MAAxB,CAAgC23B,QAAhC,CAA0CmzC,aAA1C,CAAyD8Y,SAAS5pF,CAAlE,CAAqE++C,KAArE,EAEH,CAEJ,CAEJ,CAjBD,IAiBO,IAAK7D,SAAS3C,OAAd,CAAwB,CAE3B2vC,kBAAkBvlF,IAAlB,CAAwBqD,MAAxB,CAAgC23B,QAAhC,CAA0Cud,QAA1C,CAAoD0uC,SAAS5pF,CAA7D,CAAgE,IAAhE,EAEH,CAEJ,CAEJ,CAEJ,CAED,GAAI+3C,UAAW/xC,OAAO+xC,QAAtB,CAEA,IAAM,GAAIjmC,GAAI,CAAR,CAAW6H,EAAIo+B,SAAS7pC,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhD88E,cAAe72C,SAAUjmC,CAAV,CAAf,CAA8B/T,MAA9B,CAAsCqqF,WAAtC,EAEH,CAEJ,CAED,QAAS4G,cAAT,CAAwBp6B,UAAxB,CAAoC92D,KAApC,CAA2CC,MAA3C,CAAmDgxF,gBAAnD,CAAsE,CAElE,IAAM,GAAIj9E,GAAI,CAAR,CAAW6H,EAAIi7C,WAAW1mD,MAAhC,CAAwC4D,EAAI6H,CAA5C,CAA+C7H,GAA/C,CAAsD,CAElD,GAAIs5D,YAAaxW,WAAY9iD,CAAZ,CAAjB,CAEA,GAAI9L,QAASolE,WAAWplE,MAAxB,CACA,GAAI23B,UAAWytC,WAAWztC,QAA1B,CACA,GAAIud,UAAW6zC,mBAAqB7oF,SAArB,CAAiCklE,WAAWlwB,QAA5C,CAAuD6zC,gBAAtE,CACA,GAAIhwC,OAAQqsB,WAAWrsB,KAAvB,CAEA,GAAKhhD,OAAOwlF,aAAZ,CAA4B,CAExBuF,oBAAsB/qF,MAAtB,CAEA,GAAIulF,SAAUvlF,OAAOulF,OAArB,CAEA,IAAM,GAAIlkD,GAAI,CAAR,CAAW4e,GAAKslC,QAAQp1E,MAA9B,CAAsCkxB,EAAI4e,EAA1C,CAA8C5e,GAA9C,CAAqD,CAEjD,GAAI+vD,SAAU7L,QAASlkD,CAAT,CAAd,CAEA,GAAKp5B,OAAO4xC,MAAP,CAAcD,IAAd,CAAoBw3C,QAAQv3C,MAA5B,CAAL,CAA4C,CAExC,GAAK,YAAcu3C,QAAnB,CAA6B,CAAE;AAE3B/lF,MAAM8xB,QAAN,CAAgB6tD,iBAAiBhgF,IAAjB,CAAuBomF,QAAQj0D,QAA/B,CAAhB,EAEH,CAJD,IAIO,CAEH,GAAIipD,QAASgL,QAAQhL,MAArB,CAEA,GAAIrkF,GAAIqkF,OAAOrkF,CAAP,CAAWqpF,MAAnB,CACA,GAAIppF,GAAIokF,OAAOpkF,CAAP,CAAWqpF,OAAnB,CACA,GAAIhoF,OAAQ+iF,OAAOnkF,CAAP,CAAWmpF,MAAvB,CACA,GAAI9nF,QAAS8iF,OAAOl/D,CAAP,CAAWmkE,OAAxB,CAEAhgF,MAAM8xB,QAAN,CAAgB6tD,iBAAiBpoF,GAAjB,CAAsBb,CAAtB,CAAyBC,CAAzB,CAA4BqB,KAA5B,CAAmCC,MAAnC,EAA4CoM,cAA5C,CAA4D47E,WAA5D,CAAhB,EAEH,CAEDpZ,aAAcjqE,MAAd,CAAsBlI,KAAtB,CAA6BqxF,OAA7B,CAAsCxxD,QAAtC,CAAgDud,QAAhD,CAA0D6D,KAA1D,EAEH,CAEJ,CAEJ,CAnCD,IAmCO,CAEH+pC,oBAAsB,IAAtB,CAEA7Y,aAAcjqE,MAAd,CAAsBlI,KAAtB,CAA6BC,MAA7B,CAAqC4/B,QAArC,CAA+Cud,QAA/C,CAAyD6D,KAAzD,EAEH,CAEJ,CAEJ,CAED,QAASkxB,aAAT,CAAuBjqE,MAAvB,CAA+BlI,KAA/B,CAAsCC,MAAtC,CAA8C4/B,QAA9C,CAAwDud,QAAxD,CAAkE6D,KAAlE,CAA0E,CAEtE/4C,OAAO4yC,cAAP,CAAuBr6C,KAAvB,CAA8BT,KAA9B,CAAqCC,MAArC,CAA6C4/B,QAA7C,CAAuDud,QAAvD,CAAiE6D,KAAjE,EACAopC,mBAAqB3a,aAAat8D,GAAb,CAAkBpT,KAAlB,CAAyBgrF,qBAAuB/qF,MAAhD,CAArB,CAEAiI,OAAOoyC,eAAP,CAAuBrtB,gBAAvB,CAAyChtB,OAAO49C,kBAAhD,CAAoE31C,OAAO2vB,WAA3E,EACA3vB,OAAOs8B,YAAP,CAAoBjL,eAApB,CAAqCrxB,OAAOoyC,eAA5C,EAEA,GAAKpyC,OAAOkpF,uBAAZ,CAAsC,CAElC,GAAI1V,aAAgBxzE,OAAOm7C,MAAP,EAAiBn7C,OAAO2vB,WAAP,CAAmBrI,WAAnB,GAAmC,CAAxE,CAEAlkB,MAAMmwE,WAAN,CAAmBr+B,QAAnB,CAA6Bs+B,WAA7B,EAEA,GAAI3d,SAAUoxB,WAAYlvF,MAAZ,CAAoBD,MAAMwyC,GAA1B,CAA+B4K,QAA/B,CAAyCl1C,MAAzC,CAAd,CAEA4iF,wBAA0B,EAA1B,CAEAoD,sBAAuBhmF,MAAvB,CAA+B61D,OAA/B,CAAwC3gB,QAAxC,EAEH,CAZD,IAYO,CAEH38C,MAAM+2D,kBAAN,CAA0Bv3D,MAA1B,CAAkCD,MAAMwyC,GAAxC,CAA6C3S,QAA7C,CAAuDud,QAAvD,CAAiEl1C,MAAjE,CAAyE+4C,KAAzE,EAEH,CAED/4C,OAAO6yC,aAAP,CAAsBt6C,KAAtB,CAA6BT,KAA7B,CAAoCC,MAApC,CAA4C4/B,QAA5C,CAAsDud,QAAtD,CAAgE6D,KAAhE,EACAopC,mBAAqB3a,aAAat8D,GAAb,CAAkBpT,KAAlB,CAAyBgrF,qBAAuB/qF,MAAhD,CAArB,CAEH,CAED,QAAS4wF,aAAT,CAAuBzzC,QAAvB,CAAiC5K,GAAjC,CAAsCtqC,MAAtC,CAA+C,CAE3C,GAAIopF,oBAAqBr7E,WAAW7C,GAAX,CAAgBgqC,QAAhB,CAAzB,CAEA,GAAIvK,QAASw3C,mBAAmB/+E,KAAnB,CAAyBunC,MAAtC,CACA,GAAIs8B,cAAekb,mBAAmB/+E,KAAnB,CAAyB6jE,YAA5C,CAEA,GAAIjyB,YAAakvC,aAAa7gB,aAAb,CACbnuB,QADa,CACHvK,OAAOvnC,KADJ,CACW6jE,YADX,CACyB38B,GADzB,CAC8Bm5C,UAAUhxB,SADxC,CACmDgxB,UAAU/wB,eAD7D,CAC8E1yD,MAD9E,CAAjB,CAGA,GAAI2+D,MAAOulB,aAAa3f,cAAb,CAA6BrvB,QAA7B,CAAuCF,UAAvC,CAAX,CAEA,GAAI6gB,SAAUuzB,mBAAmBvzB,OAAjC,CACA,GAAIwzB,eAAgB,IAApB,CAEA,GAAKxzB,UAAY31D,SAAjB,CAA6B,CAEzB;AACAg1C,SAAS/2C,gBAAT,CAA2B,SAA3B,CAAsC0nF,iBAAtC,EAEH,CALD,IAKO,IAAKhwB,QAAQ8I,IAAR,GAAiBA,IAAtB,CAA6B,CAEhC;AACAonB,gCAAiC7wC,QAAjC,EAEH,CALM,IAKA,IAAKk0C,mBAAmBE,UAAnB,GAAkC3+C,OAAOvnC,KAAP,CAAa85C,IAApD,CAA2D,CAE9DnvC,WAAW9P,MAAX,CAAmBi3C,QAAnB,CAA6B,YAA7B,CAA2CvK,OAAOvnC,KAAP,CAAa85C,IAAxD,EACAmsC,cAAgB,KAAhB,CAEH,CALM,IAKA,IAAKr0C,WAAWyuB,QAAX,GAAwBvjE,SAA7B,CAAyC,CAE5C;AACA,OAEH,CALM,IAKA,CAEH;AACAmpF,cAAgB,KAAhB,CAEH,CAED,GAAKA,aAAL,CAAqB,CAEjB,GAAKr0C,WAAWyuB,QAAhB,CAA2B,CAEvB,GAAIzH,QAAS9vB,UAAW8I,WAAWyuB,QAAtB,CAAb,CAEA2lB,mBAAmBptB,MAAnB,CAA4B,CACxBxpC,KAAM0iB,SAASrvC,IADS,CAExB2/B,SAAUF,cAAc1oC,KAAd,CAAqBo/D,OAAOx2B,QAA5B,CAFc,CAGxB4G,aAAc4vB,OAAO5vB,YAHG,CAIxBC,eAAgB2vB,OAAO3vB,cAJC,CAA5B,CAOH,CAXD,IAWO,CAEH+8C,mBAAmBptB,MAAnB,CAA4B,CACxBxpC,KAAM0iB,SAASrvC,IADS,CAExB2/B,SAAU0P,SAAS1P,QAFK,CAGxB4G,aAAc8I,SAAS9I,YAHC,CAIxBC,eAAgB6I,SAAS7I,cAJD,CAA5B,CAOH,CAED6I,SAASqQ,eAAT,CAA0B6jC,mBAAmBptB,MAA7C,CAAqDzjE,KAArD,EAEAs9D,QAAUquB,aAAa1f,cAAb,CAA6BtvB,QAA7B,CAAuCk0C,mBAAmBptB,MAA1D,CAAkEhnB,UAAlE,CAA8E2pB,IAA9E,CAAV,CAEAyqB,mBAAmBvzB,OAAnB,CAA6BA,OAA7B,CACA3gB,SAAS2gB,OAAT,CAAmBA,OAAnB,CAEH,CAED,GAAIywB,mBAAoBzwB,QAAQ+L,aAAR,EAAxB,CAEA,GAAK1sB,SAAS+B,YAAd,CAA6B,CAEzB/B,SAASq0C,wBAAT,CAAoC,CAApC,CAEA,IAAM,GAAIz9E,GAAI,CAAd,CAAiBA,EAAIvT,MAAM0rE,eAA3B,CAA4Cn4D,GAA5C,CAAmD,CAE/C,GAAKw6E,kBAAmB,cAAgBx6E,CAAnC,GAA0C,CAA/C,CAAmD,CAE/CopC,SAASq0C,wBAAT,GAEH,CAEJ,CAEJ,CAED,GAAKr0C,SAASgC,YAAd,CAA6B,CAEzBhC,SAASs0C,wBAAT,CAAoC,CAApC,CAEA,IAAM,GAAI19E,GAAI,CAAd,CAAiBA,EAAIvT,MAAM2rE,eAA3B,CAA4Cp4D,GAA5C,CAAmD,CAE/C,GAAKw6E,kBAAmB,cAAgBx6E,CAAnC,GAA0C,CAA/C,CAAmD,CAE/CopC,SAASs0C,wBAAT,GAEH,CAEJ,CAEJ,CAED,GAAIhkD,UAAW4jD,mBAAmBptB,MAAnB,CAA0Bx2B,QAAzC,CAEA,GAAK,CAAE0P,SAASmS,gBAAX,EACD,CAAEnS,SAASqqB,mBADV,EAEDrqB,SAAS0R,QAAT,GAAsB,IAF1B,CAEiC,CAE7BwiC,mBAAmBlrB,iBAAnB,CAAuCulB,UAAUhxB,SAAjD,CACA22B,mBAAmB12B,eAAnB,CAAqC+wB,UAAU/wB,eAA/C,CACAltB,SAASkf,cAAT,CAA0B++B,UAAUjxB,OAApC,CAEH,CAED42B,mBAAmB9+C,GAAnB,CAAyBA,GAAzB,CAEA;AAEA8+C,mBAAmBE,UAAnB,CAAgC3+C,OAAOvnC,KAAP,CAAa85C,IAA7C,CAEA,GAAKhI,SAASvK,MAAd,CAAuB,CAEnB;AAEAnF,SAASoF,iBAAT,CAA2Bx/B,KAA3B,CAAmCu/B,OAAOvnC,KAAP,CAAayiE,OAAhD,CACArgC,SAASqF,iBAAT,CAA2Bz/B,KAA3B,CAAmCu/B,OAAOvnC,KAAP,CAAa+gE,WAAhD,CACA3+B,SAAS2F,UAAT,CAAoB//B,KAApB,CAA4Bu/B,OAAOvnC,KAAP,CAAaghE,IAAzC,CACA5+B,SAASyG,cAAT,CAAwB7gC,KAAxB,CAAgCu/B,OAAOvnC,KAAP,CAAaihE,QAA7C,CACA7+B,SAASiG,WAAT,CAAqBrgC,KAArB,CAA6Bu/B,OAAOvnC,KAAP,CAAak0B,KAA1C,CACAkO,SAASsG,gBAAT,CAA0B1gC,KAA1B,CAAkCu/B,OAAOvnC,KAAP,CAAakhE,IAA/C,CAEA9+B,SAASyF,oBAAT,CAA8B7/B,KAA9B,CAAsCu/B,OAAOvnC,KAAP,CAAa6nC,oBAAnD,CACAzF,SAAS0F,uBAAT,CAAiC9/B,KAAjC,CAAyCu/B,OAAOvnC,KAAP,CAAa8nC,uBAAtD,CACA1F,SAAS+F,aAAT,CAAuBngC,KAAvB,CAA+Bu/B,OAAOvnC,KAAP,CAAamoC,aAA5C,CACA/F,SAASgG,gBAAT,CAA0BpgC,KAA1B,CAAkCu/B,OAAOvnC,KAAP,CAAaooC,gBAA/C,CACAhG,SAASoG,cAAT,CAAwBxgC,KAAxB,CAAgCu/B,OAAOvnC,KAAP,CAAawoC,cAA7C,CACApG,SAASqG,iBAAT,CAA2BzgC,KAA3B,CAAmCu/B,OAAOvnC,KAAP,CAAayoC,iBAAhD,CACA;AAEH,CAED,GAAI49C,cAAeL,mBAAmBvzB,OAAnB,CAA2BG,WAA3B,EAAnB,CACI0zB,aACItuB,cAAcO,YAAd,CAA4B8tB,aAAajzB,GAAzC,CAA8ChxB,QAA9C,CAFR,CAIA4jD,mBAAmBM,YAAnB,CAAkCA,YAAlC,CAEH,CAED,QAASzC,WAAT,CAAqBlvF,MAArB,CAA6BuyC,GAA7B,CAAkC4K,QAAlC,CAA4Cl1C,MAA5C,CAAqD,CAEjDkjF,kBAAoB,CAApB,CAEA,GAAIkG,oBAAqBr7E,WAAW7C,GAAX,CAAgBgqC,QAAhB,CAAzB,CACA,GAAIvK,QAASw3C,mBAAmB/+E,KAAnB,CAAyBunC,MAAtC,CAEA,GAAK+4C,gBAAL,CAAwB,CAEpB,GAAKC,uBAAyB5rF,SAAW8qF,cAAzC,CAA0D,CAEtD,GAAI8G,UACA5xF,SAAW8qF,cAAX,EACA3tC,SAAS58C,EAAT,GAAgBqqF,kBAFpB,CAIA;AACA;AACA;AACAc,UAAUxwB,QAAV,CACI/d,SAASwP,cADb,CAC6BxP,SAASyP,gBADtC,CACwDzP,SAAS0P,WADjE,CAEI7sD,MAFJ,CAEYqxF,kBAFZ,CAEgCO,QAFhC,EAIH,CAEJ,CAED,GAAKz0C,SAAS2L,WAAT,GAAyB,KAA9B,CAAsC,CAElC,GAAKuoC,mBAAmBvzB,OAAnB,GAA+B31D,SAApC,CAAgD,CAE5Cg1C,SAAS2L,WAAT,CAAuB,IAAvB,CAEH,CAJD,IAIO,IAAK3L,SAAS5K,GAAT,EAAgB8+C,mBAAmB9+C,GAAnB,GAA2BA,GAAhD,CAAsD,CAEzD4K,SAAS2L,WAAT,CAAuB,IAAvB,CAEH,CAJM,IAIA,IAAK3L,SAASvK,MAAT,EAAmBy+C,mBAAmBE,UAAnB,GAAkC3+C,OAAOvnC,KAAP,CAAa85C,IAAvE,CAA8E,CAEjFhI,SAAS2L,WAAT,CAAuB,IAAvB,CAEH,CAJM,IAIA,IAAKuoC,mBAAmBlrB,iBAAnB,GAAyCh+D,SAAzC,GACNkpF,mBAAmBlrB,iBAAnB,GAAyCulB,UAAUhxB,SAAnD,EACE22B,mBAAmB12B,eAAnB,GAAuC+wB,UAAU/wB,eAF7C,CAAL,CAEsE,CAEzExd,SAAS2L,WAAT,CAAuB,IAAvB,CAEH,CAEJ,CAED,GAAK3L,SAAS2L,WAAd,CAA4B,CAExB8nC,aAAczzC,QAAd,CAAwB5K,GAAxB,CAA6BtqC,MAA7B,EACAk1C,SAAS2L,WAAT,CAAuB,KAAvB,CAEH,CAED,GAAI+oC,gBAAiB,KAArB,CACA,GAAIC,iBAAkB,KAAtB,CACA,GAAIC,eAAgB,KAApB,CAEA,GAAIj0B,SAAUuzB,mBAAmBvzB,OAAjC,CACIk0B,WAAal0B,QAAQG,WAAR,EADjB,CAEIg0B,WAAaZ,mBAAmBptB,MAAnB,CAA0Bx2B,QAF3C,CAIA,GAAKpiC,MAAM0oE,UAAN,CAAkBjW,QAAQA,OAA1B,CAAL,CAA2C,CAEvC+zB,eAAiB,IAAjB,CACAC,gBAAkB,IAAlB,CACAC,cAAgB,IAAhB,CAEH,CAED,GAAK50C,SAAS58C,EAAT,GAAgBqqF,kBAArB,CAA0C,CAEtCA,mBAAqBztC,SAAS58C,EAA9B,CAEAuxF,gBAAkB,IAAlB,CAEH,CAED,GAAKD,gBAAkB7xF,SAAW8qF,cAAlC,CAAmD,CAE/CkH,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,kBAA1B,CAA8CpxE,OAAO23B,gBAArD,EAEA,GAAKuyC,aAAanR,sBAAlB,CAA2C,CAEvCi5B,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,eAA1B,CACI,KAAQ3rE,KAAKkB,GAAL,CAAU3G,OAAO2yB,GAAP,CAAa,GAAvB,EAA+BltB,KAAK+gB,GAA5C,CADJ,EAGH,CAED;AAEA,GAAKskE,kBAAqBC,qBAAuB/qF,MAA5C,CAAL,CAA4D,CAExD8qF,eAAmBC,qBAAuB/qF,MAA1C,CAEA;AACA;AACA;AAEA8xF,gBAAkB,IAAlB,CAAyB;AACzBC,cAAgB,IAAhB,CAAuB;AAE1B,CAED;AACA;AAEA,GAAK50C,SAASmS,gBAAT,EACDnS,SAASsxC,mBADR,EAEDtxC,SAASuxC,sBAFR,EAGDvxC,SAASzM,MAHb,CAGsB,CAElB,GAAIwhD,SAAUF,WAAW5hD,GAAX,CAAe+hD,cAA7B,CAEA,GAAKD,UAAY/pF,SAAjB,CAA6B,CAEzB+pF,QAAQh0B,QAAR,CAAkBkT,GAAlB,CACIya,SAAS7yD,qBAAT,CAAgCh5B,OAAO43B,WAAvC,CADJ,EAGH,CAEJ,CAED,GAAKulB,SAASsxC,mBAAT,EACDtxC,SAASi1C,qBADR,EAEDj1C,SAASuR,mBAFR,EAGDvR,SAASuxC,sBAHR,EAIDvxC,SAASmS,gBAJR,EAKDnS,SAASkR,QALb,CAKwB,CAEpB2jC,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,YAA1B,CAAwCpxE,OAAO49C,kBAA/C,EAEH,CAEJ,CAED;AACA;AACA;AAEA,GAAKT,SAASkR,QAAd,CAAyB,CAErB2jC,WAAWtuB,WAAX,CAAwB0N,GAAxB,CAA6BnpE,MAA7B,CAAqC,YAArC,EACA+pF,WAAWtuB,WAAX,CAAwB0N,GAAxB,CAA6BnpE,MAA7B,CAAqC,mBAArC,EAEA,GAAI+iE,UAAW/iE,OAAO+iE,QAAtB,CAEA,GAAKA,QAAL,CAAgB,CAEZ,GAAIC,OAAQD,SAASC,KAArB,CAEA,GAAKf,aAAahQ,mBAAlB,CAAwC,CAEpC,GAAK8Q,SAASqnB,WAAT,GAAyBlqF,SAA9B,CAA0C,CAEtC;AACA;AACA;AACA;AACA;AACA;AAGA,GAAI42B,MAAOt5B,KAAK0M,IAAL,CAAW84D,MAAM96D,MAAN,CAAe,CAA1B,CAAX,CAA0C;AAC1C4uB,KAAOza,MAAMgC,cAAN,CAAsByY,IAAtB,CAAP,CACAA,KAAOt5B,KAAK8G,GAAL,CAAUwyB,IAAV,CAAgB,CAAhB,CAAP,CAEA,GAAIuzD,cAAe,GAAIj7C,aAAJ,CAAkBtY,KAAOA,IAAP,CAAc,CAAhC,CAAnB,CAAwD;AACxDuzD,aAAa1vF,GAAb,CAAkBooE,SAASsnB,YAA3B,EAA2C;AAE3C,GAAID,aAAc,GAAIx0D,YAAJ,CAAiBy0D,YAAjB,CAA+BvzD,IAA/B,CAAqCA,IAArC,CAA2C5d,UAA3C,CAAuDR,SAAvD,CAAlB,CACA0xE,YAAYvpC,WAAZ,CAA0B,IAA1B,CAEAkiB,SAASsnB,YAAT,CAAwBA,YAAxB,CACAtnB,SAASqnB,WAAT,CAAuBA,WAAvB,CACArnB,SAASunB,eAAT,CAA2BxzD,IAA3B,CAEH,CAEDizD,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,aAA1B,CAAyCpG,SAASqnB,WAAlD,EACAL,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,iBAA1B,CAA6CpG,SAASunB,eAAtD,EAEH,CA/BD,IA+BO,CAEHP,WAAWtuB,WAAX,CAAwB0N,GAAxB,CAA6BpG,QAA7B,CAAuC,cAAvC,EAEH,CAEJ,CAEJ,CAED,GAAK8mB,eAAL,CAAuB,CAEnBE,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,qBAA1B,CAAiD5wE,MAAM8pF,mBAAvD,EACA0H,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,uBAA1B,CAAmD5wE,MAAM+pF,qBAAzD,EAEA,GAAKptC,SAASvK,MAAd,CAAuB,CAEnB;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA4/C,8BAA+BP,UAA/B,CAA2CF,aAA3C,EAEH,CAED;AAEA,GAAKx/C,KAAO4K,SAAS5K,GAArB,CAA2B,CAEvBkgD,mBAAoBR,UAApB,CAAgC1/C,GAAhC,EAEH,CAED,GAAK4K,SAASuR,mBAAd,CAAoC,CAEhCgkC,sBAAuBT,UAAvB,CAAmC90C,QAAnC,EAEH,CAJD,IAIO,IAAKA,SAASi1C,qBAAd,CAAsC,CAEzCM,sBAAuBT,UAAvB,CAAmC90C,QAAnC,EACAw1C,uBAAwBV,UAAxB,CAAoC90C,QAApC,EAEH,CALM,IAKA,IAAKA,SAASsxC,mBAAd,CAAoC,CAEvCiE,sBAAuBT,UAAvB,CAAmC90C,QAAnC,EAEA,GAAKA,SAASy1C,kBAAd,CAAmC,CAE/BC,oBAAqBZ,UAArB,CAAiC90C,QAAjC,EAEH,CAJD,IAIO,CAEH21C,qBAAsBb,UAAtB,CAAkC90C,QAAlC,EAEH,CAEJ,CAdM,IAcA,IAAKA,SAASuxC,sBAAd,CAAuC,CAE1CgE,sBAAuBT,UAAvB,CAAmC90C,QAAnC,EAEA,GAAKA,SAAS41C,sBAAd,CAAuC,CAEnCC,wBAAyBf,UAAzB,CAAqC90C,QAArC,EAEH,CAJD,IAIO,CAEH81C,wBAAyBhB,UAAzB,CAAqC90C,QAArC,EAEH,CAEJ,CAdM,IAcA,IAAKA,SAASwyB,mBAAd,CAAoC,CAEvC+iB,sBAAuBT,UAAvB,CAAmC90C,QAAnC,EACA+1C,qBAAsBjB,UAAtB,CAAkC90C,QAAlC,EAEH,CALM,IAKA,IAAKA,SAASyyB,sBAAd,CAAuC,CAE1C8iB,sBAAuBT,UAAvB,CAAmC90C,QAAnC,EACAg2C,wBAAyBlB,UAAzB,CAAqC90C,QAArC,EAEH,CALM,IAKA,IAAKA,SAASwxC,oBAAd,CAAqC,CAExC+D,sBAAuBT,UAAvB,CAAmC90C,QAAnC,EACAi2C,sBAAuBnB,UAAvB,CAAmC90C,QAAnC,EAEH,CALM,IAKA,IAAKA,SAASk2C,mBAAd,CAAoC,CAEvCC,oBAAqBrB,UAArB,CAAiC90C,QAAjC,EAEA,GAAKA,SAASo2C,oBAAd,CAAqC,CAEjCC,oBAAqBvB,UAArB,CAAiC90C,QAAjC,EAEH,CAEJ,CAVM,IAUA,IAAKA,SAASs2C,gBAAd,CAAiC,CAEpCC,sBAAuBzB,UAAvB,CAAmC90C,QAAnC,EAEH,CAJM,IAIA,IAAKA,SAASw2C,gBAAd,CAAiC,CAEpC1B,WAAWhuF,KAAX,CAAiBoP,KAAjB,CAAyB8pC,SAASl5C,KAAlC,CACAguF,WAAW9hD,OAAX,CAAmB98B,KAAnB,CAA2B8pC,SAAShN,OAApC,CAEH,CAED;AACA;AAEA,GAAK8hD,WAAW2B,KAAX,GAAqBzrF,SAA1B,CAAsC8pF,WAAW2B,KAAX,CAAiBvgF,KAAjB,CAAyB48B,YAAY4jD,KAArC,CACtC,GAAK5B,WAAW6B,KAAX,GAAqB3rF,SAA1B,CAAsC8pF,WAAW6B,KAAX,CAAiBzgF,KAAjB,CAAyB48B,YAAY8jD,KAArC,CAEtC1wB,cAAcM,MAAd,CAAsByN,GAAtB,CAA2BigB,mBAAmBM,YAA9C,CAA4DM,UAA5D,CAAwEzxF,KAAxE,EAEH,CAED,GAAK28C,SAASmS,gBAAT,EAA6BnS,SAASkS,kBAAT,GAAgC,IAAlE,CAAyE,CAErEgU,cAAcM,MAAd,CAAsByN,GAAtB,CAA2BigB,mBAAmBM,YAA9C,CAA4DM,UAA5D,CAAwEzxF,KAAxE,EACA28C,SAASkS,kBAAT,CAA8B,KAA9B,CAEH,CAED;AAEA2iC,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,iBAA1B,CAA6CnpE,OAAOoyC,eAApD,EACA23C,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,cAA1B,CAA0CnpE,OAAOs8B,YAAjD,EACAytD,WAAW9zB,QAAX,CAAqBkT,GAArB,CAA0B,aAA1B,CAAyCnpE,OAAO2vB,WAAhD,EAEA,MAAOkmC,QAAP,CAEH,CAED;AAEA,QAAS40B,sBAAT,CAAgCjlD,QAAhC,CAA0C0P,QAA1C,CAAqD,CAEjD1P,SAAS0C,OAAT,CAAiB98B,KAAjB,CAAyB8pC,SAAShN,OAAlC,CAEA,GAAKgN,SAASl5C,KAAd,CAAsB,CAElBwpC,SAASyC,OAAT,CAAiB78B,KAAjB,CAAyB8pC,SAASl5C,KAAlC,CAEH,CAED,GAAKk5C,SAAS3I,QAAd,CAAyB,CAErB/G,SAAS+G,QAAT,CAAkBnhC,KAAlB,CAAwBrI,IAAxB,CAA8BmyC,SAAS3I,QAAvC,EAAkD9kC,cAAlD,CAAkEytC,SAAS0Q,iBAA3E,EAEH,CAED,GAAK1Q,SAAS/M,GAAd,CAAoB,CAEhB3C,SAAS2C,GAAT,CAAa/8B,KAAb,CAAqB8pC,SAAS/M,GAA9B,CAEH,CAED,GAAK+M,SAAS7M,QAAd,CAAyB,CAErB7C,SAAS6C,QAAT,CAAkBj9B,KAAlB,CAA0B8pC,SAAS7M,QAAnC,CAEH,CAED,GAAK6M,SAAS3M,WAAd,CAA4B,CAExB/C,SAAS+C,WAAT,CAAqBn9B,KAArB,CAA6B8pC,SAAS3M,WAAtC,CAEH,CAED,GAAK2M,SAASzM,MAAd,CAAuB,CAEnBjD,SAASiD,MAAT,CAAgBr9B,KAAhB,CAAwB8pC,SAASzM,MAAjC,CAEA;AACA;AACA;AACA;AACAjD,SAASkD,UAAT,CAAoBt9B,KAApB,CAA8B,EAAI8pC,SAASzM,MAAT,EAAmByM,SAASzM,MAAT,CAAgB4mB,aAAvC,CAAF,CAA6D,CAA7D,CAAiE,CAAE,CAA/F,CAEA7pB,SAASmD,YAAT,CAAsBv9B,KAAtB,CAA8B8pC,SAASvM,YAAvC,CACAnD,SAASoD,eAAT,CAAyBx9B,KAAzB,CAAiC8pC,SAAStM,eAA1C,CAEApD,SAASqD,WAAT,CAAqBz9B,KAArB,CAA6B2C,WAAW7C,GAAX,CAAgBgqC,SAASzM,MAAzB,EAAkCitC,aAA/D,CAEH,CAED,GAAKxgC,SAAShM,QAAd,CAAyB,CAErB1D,SAAS0D,QAAT,CAAkB99B,KAAlB,CAA0B8pC,SAAShM,QAAnC,CACA1D,SAAS2D,iBAAT,CAA2B/9B,KAA3B,CAAmC8pC,SAAS/L,iBAA5C,CAEH,CAED,GAAK+L,SAASnM,KAAd,CAAsB,CAElBvD,SAASuD,KAAT,CAAe39B,KAAf,CAAuB8pC,SAASnM,KAAhC,CACAvD,SAASwD,cAAT,CAAwB59B,KAAxB,CAAgC8pC,SAASlM,cAAzC,CAEH,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,GAAI+iD,WAAJ,CAEA,GAAK72C,SAAS/M,GAAd,CAAoB,CAEhB4jD,WAAa72C,SAAS/M,GAAtB,CAEH,CAJD,IAIO,IAAK+M,SAAS3M,WAAd,CAA4B,CAE/BwjD,WAAa72C,SAAS3M,WAAtB,CAEH,CAJM,IAIA,IAAK2M,SAASrL,eAAd,CAAgC,CAEnCkiD,WAAa72C,SAASrL,eAAtB,CAEH,CAJM,IAIA,IAAKqL,SAASxL,SAAd,CAA0B,CAE7BqiD,WAAa72C,SAASxL,SAAtB,CAEH,CAJM,IAIA,IAAKwL,SAAS3L,OAAd,CAAwB,CAE3BwiD,WAAa72C,SAAS3L,OAAtB,CAEH,CAJM,IAIA,IAAK2L,SAASjL,YAAd,CAA6B,CAEhC8hD,WAAa72C,SAASjL,YAAtB,CAEH,CAJM,IAIA,IAAKiL,SAAS/K,YAAd,CAA6B,CAEhC4hD,WAAa72C,SAAS/K,YAAtB,CAEH,CAJM,IAIA,IAAK+K,SAAS7M,QAAd,CAAyB,CAE5B0jD,WAAa72C,SAAS7M,QAAtB,CAEH,CAJM,IAIA,IAAK6M,SAAS7L,WAAd,CAA4B,CAE/B0iD,WAAa72C,SAAS7L,WAAtB,CAEH,CAED,GAAK0iD,aAAe7rF,SAApB,CAAgC,CAE5B;AACA,GAAK6rF,WAAWx2D,mBAAhB,CAAsC,CAElCw2D,WAAaA,WAAW52D,OAAxB,CAEH,CAED,GAAK42D,WAAWn5D,gBAAX,GAAgC,IAArC,CAA4C,CAExCm5D,WAAW54D,YAAX,GAEH,CAEDqS,SAAS4C,WAAT,CAAqBh9B,KAArB,CAA2BrI,IAA3B,CAAiCgpF,WAAWzjF,MAA5C,EAEH,CAEJ,CAED,QAAS+iF,oBAAT,CAA8B7lD,QAA9B,CAAwC0P,QAAxC,CAAmD,CAE/C1P,SAASyC,OAAT,CAAiB78B,KAAjB,CAAyB8pC,SAASl5C,KAAlC,CACAwpC,SAAS0C,OAAT,CAAiB98B,KAAjB,CAAyB8pC,SAAShN,OAAlC,CAEH,CAED,QAASqjD,oBAAT,CAA8B/lD,QAA9B,CAAwC0P,QAAxC,CAAmD,CAE/C1P,SAASwH,QAAT,CAAkB5hC,KAAlB,CAA0B8pC,SAASlI,QAAnC,CACAxH,SAASyH,SAAT,CAAmB7hC,KAAnB,CAA2B8pC,SAASlI,QAAT,CAAoBkI,SAAS6Q,OAAxD,CACAvgB,SAAS9gC,KAAT,CAAe0G,KAAf,CAAuB8pC,SAASxwC,KAAhC,CAEH,CAED,QAAS+mF,sBAAT,CAAgCjmD,QAAhC,CAA0C0P,QAA1C,CAAqD,CAEjD1P,SAASyC,OAAT,CAAiB78B,KAAjB,CAAyB8pC,SAASl5C,KAAlC,CACAwpC,SAAS0C,OAAT,CAAiB98B,KAAjB,CAAyB8pC,SAAShN,OAAlC,CACA1C,SAAS1O,IAAT,CAAc1rB,KAAd,CAAsB8pC,SAASpe,IAAT,CAAgBusD,WAAtC,CACA79C,SAAS9gC,KAAT,CAAe0G,KAAf,CAAuBg4E,QAAU,GAAjC,CAEA59C,SAAS2C,GAAT,CAAa/8B,KAAb,CAAqB8pC,SAAS/M,GAA9B,CAEA,GAAK+M,SAAS/M,GAAT,GAAiB,IAAtB,CAA6B,CAEzB,GAAK+M,SAAS/M,GAAT,CAAavV,gBAAb,GAAkC,IAAvC,CAA8C,CAE1CsiB,SAAS/M,GAAT,CAAahV,YAAb,GAEH,CAEDqS,SAAS4C,WAAT,CAAqBh9B,KAArB,CAA2BrI,IAA3B,CAAiCmyC,SAAS/M,GAAT,CAAa7/B,MAA9C,EAEH,CAEJ,CAED,QAASkiF,mBAAT,CAA6BhlD,QAA7B,CAAuC8E,GAAvC,CAA6C,CAEzC9E,SAASkF,QAAT,CAAkBt/B,KAAlB,CAA0Bk/B,IAAItuC,KAA9B,CAEA,GAAKsuC,IAAIkiC,KAAT,CAAiB,CAEbhnC,SAASgF,OAAT,CAAiBp/B,KAAjB,CAAyBk/B,IAAIrvC,IAA7B,CACAuqC,SAASiF,MAAT,CAAgBr/B,KAAhB,CAAwBk/B,IAAI5f,GAA5B,CAEH,CALD,IAKO,IAAK4f,IAAI05B,SAAT,CAAqB,CAExBx+B,SAAS+E,UAAT,CAAoBn/B,KAApB,CAA4Bk/B,IAAImiC,OAAhC,CAEH,CAEJ,CAED,QAASie,uBAAT,CAAiCllD,QAAjC,CAA2C0P,QAA3C,CAAsD,CAElD,GAAKA,SAAS7L,WAAd,CAA4B,CAExB7D,SAAS6D,WAAT,CAAqBj+B,KAArB,CAA6B8pC,SAAS7L,WAAtC,CAEH,CAEJ,CAED,QAASwhD,qBAAT,CAA+BrlD,QAA/B,CAAyC0P,QAAzC,CAAoD,CAEhD1P,SAASiH,QAAT,CAAkBrhC,KAAlB,CAA0B8pC,SAASzI,QAAnC,CACAjH,SAASkH,SAAT,CAAmBthC,KAAnB,CAA2B5N,KAAK8G,GAAL,CAAU4wC,SAASxI,SAAnB,CAA8B,IAA9B,CAA3B,CAAiE;AAEjE,GAAKwI,SAAS7L,WAAd,CAA4B,CAExB7D,SAAS6D,WAAT,CAAqBj+B,KAArB,CAA6B8pC,SAAS7L,WAAtC,CAEH,CAED,GAAK6L,SAAS3L,OAAd,CAAwB,CAEpB/D,SAAS+D,OAAT,CAAiBn+B,KAAjB,CAAyB8pC,SAAS3L,OAAlC,CACA/D,SAASgE,SAAT,CAAmBp+B,KAAnB,CAA2B8pC,SAAS1L,SAApC,CACA,GAAK0L,SAAS6O,IAAT,GAAkBxvC,QAAvB,CAAkCixB,SAASgE,SAAT,CAAmBp+B,KAAnB,EAA4B,CAAE,CAA9B,CAErC,CAED,GAAK8pC,SAASxL,SAAd,CAA0B,CAEtBlE,SAASkE,SAAT,CAAmBt+B,KAAnB,CAA2B8pC,SAASxL,SAApC,CACAlE,SAASmE,WAAT,CAAqBv+B,KAArB,CAA2BrI,IAA3B,CAAiCmyC,SAASvL,WAA1C,EACA,GAAKuL,SAAS6O,IAAT,GAAkBxvC,QAAvB,CAAkCixB,SAASmE,WAAT,CAAqBv+B,KAArB,CAA2B8U,MAA3B,GAErC,CAED,GAAKg1B,SAASrL,eAAd,CAAgC,CAE5BrE,SAASqE,eAAT,CAAyBz+B,KAAzB,CAAiC8pC,SAASrL,eAA1C,CACArE,SAASsE,iBAAT,CAA2B1+B,KAA3B,CAAmC8pC,SAASpL,iBAA5C,CACAtE,SAASuE,gBAAT,CAA0B3+B,KAA1B,CAAkC8pC,SAASnL,gBAA3C,CAEH,CAEJ,CAED,QAAS6gD,oBAAT,CAA8BplD,QAA9B,CAAwC0P,QAAxC,CAAmD,CAE/C21C,qBAAsBrlD,QAAtB,CAAgC0P,QAAhC,EAEA,GAAKA,SAAS7K,WAAd,CAA4B,CAExB7E,SAAS6E,WAAT,CAAqBj/B,KAArB,CAA6B8pC,SAAS7K,WAAtC,CAEH,CAEJ,CAED,QAAS2gD,wBAAT,CAAkCxlD,QAAlC,CAA4C0P,QAA5C,CAAuD,CAEnD1P,SAASoH,SAAT,CAAmBxhC,KAAnB,CAA2B8pC,SAAStI,SAApC,CACApH,SAASqH,SAAT,CAAmBzhC,KAAnB,CAA2B8pC,SAASrI,SAApC,CAEA,GAAKqI,SAASjL,YAAd,CAA6B,CAEzBzE,SAASyE,YAAT,CAAsB7+B,KAAtB,CAA8B8pC,SAASjL,YAAvC,CAEH,CAED,GAAKiL,SAAS/K,YAAd,CAA6B,CAEzB3E,SAAS2E,YAAT,CAAsB/+B,KAAtB,CAA8B8pC,SAAS/K,YAAvC,CAEH,CAED,GAAK+K,SAAS7L,WAAd,CAA4B,CAExB7D,SAAS6D,WAAT,CAAqBj+B,KAArB,CAA6B8pC,SAAS7L,WAAtC,CAEH,CAED,GAAK6L,SAAS3L,OAAd,CAAwB,CAEpB/D,SAAS+D,OAAT,CAAiBn+B,KAAjB,CAAyB8pC,SAAS3L,OAAlC,CACA/D,SAASgE,SAAT,CAAmBp+B,KAAnB,CAA2B8pC,SAAS1L,SAApC,CACA,GAAK0L,SAAS6O,IAAT,GAAkBxvC,QAAvB,CAAkCixB,SAASgE,SAAT,CAAmBp+B,KAAnB,EAA4B,CAAE,CAA9B,CAErC,CAED,GAAK8pC,SAASxL,SAAd,CAA0B,CAEtBlE,SAASkE,SAAT,CAAmBt+B,KAAnB,CAA2B8pC,SAASxL,SAApC,CACAlE,SAASmE,WAAT,CAAqBv+B,KAArB,CAA2BrI,IAA3B,CAAiCmyC,SAASvL,WAA1C,EACA,GAAKuL,SAAS6O,IAAT,GAAkBxvC,QAAvB,CAAkCixB,SAASmE,WAAT,CAAqBv+B,KAArB,CAA2B8U,MAA3B,GAErC,CAED,GAAKg1B,SAASrL,eAAd,CAAgC,CAE5BrE,SAASqE,eAAT,CAAyBz+B,KAAzB,CAAiC8pC,SAASrL,eAA1C,CACArE,SAASsE,iBAAT,CAA2B1+B,KAA3B,CAAmC8pC,SAASpL,iBAA5C,CACAtE,SAASuE,gBAAT,CAA0B3+B,KAA1B,CAAkC8pC,SAASnL,gBAA3C,CAEH,CAED,GAAKmL,SAASzM,MAAd,CAAuB,CAEnB;AACAjD,SAASsH,eAAT,CAAyB1hC,KAAzB,CAAiC8pC,SAASpI,eAA1C,CAEH,CAEJ,CAED,QAASi+C,wBAAT,CAAkCvlD,QAAlC,CAA4C0P,QAA5C,CAAuD,CAEnD1P,SAASoI,SAAT,CAAmBxiC,KAAnB,CAA2B8pC,SAAStH,SAApC,CACApI,SAASqI,kBAAT,CAA4BziC,KAA5B,CAAoC8pC,SAASrH,kBAA7C,CAEAm9C,wBAAyBxlD,QAAzB,CAAmC0P,QAAnC,EAEH,CAED,QAAS+1C,qBAAT,CAA+BzlD,QAA/B,CAAyC0P,QAAzC,CAAoD,CAEhD,GAAKA,SAASrL,eAAd,CAAgC,CAE5BrE,SAASqE,eAAT,CAAyBz+B,KAAzB,CAAiC8pC,SAASrL,eAA1C,CACArE,SAASsE,iBAAT,CAA2B1+B,KAA3B,CAAmC8pC,SAASpL,iBAA5C,CACAtE,SAASuE,gBAAT,CAA0B3+B,KAA1B,CAAkC8pC,SAASnL,gBAA3C,CAEH,CAEJ,CAED,QAASmhD,wBAAT,CAAkC1lD,QAAlC,CAA4C0P,QAA5C,CAAuD,CAEnD,GAAKA,SAASrL,eAAd,CAAgC,CAE5BrE,SAASqE,eAAT,CAAyBz+B,KAAzB,CAAiC8pC,SAASrL,eAA1C,CACArE,SAASsE,iBAAT,CAA2B1+B,KAA3B,CAAmC8pC,SAASpL,iBAA5C,CACAtE,SAASuE,gBAAT,CAA0B3+B,KAA1B,CAAkC8pC,SAASnL,gBAA3C,CAEH,CAEDvE,SAASgI,iBAAT,CAA2BpiC,KAA3B,CAAiCrI,IAAjC,CAAuCmyC,SAAS1H,iBAAhD,EACAhI,SAASiI,YAAT,CAAsBriC,KAAtB,CAA8B8pC,SAASzH,YAAvC,CACAjI,SAASkI,WAAT,CAAqBtiC,KAArB,CAA6B8pC,SAASxH,WAAtC,CAEH,CAED,QAASy9C,sBAAT,CAAgC3lD,QAAhC,CAA0C0P,QAA1C,CAAqD,CAEjD,GAAKA,SAAS3L,OAAd,CAAwB,CAEpB/D,SAAS+D,OAAT,CAAiBn+B,KAAjB,CAAyB8pC,SAAS3L,OAAlC,CACA/D,SAASgE,SAAT,CAAmBp+B,KAAnB,CAA2B8pC,SAAS1L,SAApC,CACA,GAAK0L,SAAS6O,IAAT,GAAkBxvC,QAAvB,CAAkCixB,SAASgE,SAAT,CAAmBp+B,KAAnB,EAA4B,CAAE,CAA9B,CAErC,CAED,GAAK8pC,SAASxL,SAAd,CAA0B,CAEtBlE,SAASkE,SAAT,CAAmBt+B,KAAnB,CAA2B8pC,SAASxL,SAApC,CACAlE,SAASmE,WAAT,CAAqBv+B,KAArB,CAA2BrI,IAA3B,CAAiCmyC,SAASvL,WAA1C,EACA,GAAKuL,SAAS6O,IAAT,GAAkBxvC,QAAvB,CAAkCixB,SAASmE,WAAT,CAAqBv+B,KAArB,CAA2B8U,MAA3B,GAErC,CAED,GAAKg1B,SAASrL,eAAd,CAAgC,CAE5BrE,SAASqE,eAAT,CAAyBz+B,KAAzB,CAAiC8pC,SAASrL,eAA1C,CACArE,SAASsE,iBAAT,CAA2B1+B,KAA3B,CAAmC8pC,SAASpL,iBAA5C,CACAtE,SAASuE,gBAAT,CAA0B3+B,KAA1B,CAAkC8pC,SAASnL,gBAA3C,CAEH,CAEJ,CAED;AAEA,QAASwgD,8BAAT,CAAwC/kD,QAAxC,CAAkDp6B,KAAlD,CAA0D,CAEtDo6B,SAASoF,iBAAT,CAA2BiW,WAA3B,CAAyCz1C,KAAzC,CAEAo6B,SAASqF,iBAAT,CAA2BgW,WAA3B,CAAyCz1C,KAAzC,CACAo6B,SAASiG,WAAT,CAAqBoV,WAArB,CAAmCz1C,KAAnC,CACAo6B,SAAS2F,UAAT,CAAoB0V,WAApB,CAAkCz1C,KAAlC,CACAo6B,SAASyG,cAAT,CAAwB4U,WAAxB,CAAsCz1C,KAAtC,CACAo6B,SAASsG,gBAAT,CAA0B+U,WAA1B,CAAwCz1C,KAAxC,CAEH,CAED;AAEA,QAASgsD,iBAAT,EAA4B,CAExB,GAAI40B,aAAc9I,iBAAlB,CAEA,GAAK8I,aAAe/pB,aAAalR,WAAjC,CAA+C,CAE3CtyD,QAAQgK,IAAR,CAAc,sCAAwCujF,WAAxC,CAAsD,8CAAtD,CAAuG/pB,aAAalR,WAAlI,EAEH,CAEDmyB,mBAAqB,CAArB,CAEA,MAAO8I,YAAP,CAEH,CAED,KAAK50B,gBAAL,CAAwBA,gBAAxB,CAEA;AACA,KAAKuB,YAAL,CAAsB,UAAY,CAE9B,GAAIszB,QAAS,KAAb,CAEA;AACA,MAAO,SAAStzB,aAAT,CAAuBxjC,OAAvB,CAAgC0hD,IAAhC,CAAuC,CAE1C,GAAK1hD,SAAWA,QAAQI,mBAAxB,CAA8C,CAE1C,GAAK,CAAE02D,MAAP,CAAgB,CAEZxtF,QAAQgK,IAAR,CAAc,8GAAd,EACAwjF,OAAS,IAAT,CAEH,CAED92D,QAAUA,QAAQA,OAAlB,CAEH,CAED5B,SAASolC,YAAT,CAAuBxjC,OAAvB,CAAgC0hD,IAAhC,EAEH,CAjBD,CAmBH,CAxBqB,EAAtB,CA0BA,KAAKqV,UAAL,CAAoB,UAAY,CAE5B,GAAID,QAAS,KAAb,CAEA,MAAO,SAASC,WAAT,CAAqB/2D,OAArB,CAA8B0hD,IAA9B,CAAqC,CAExC,GAAK,CAAEoV,MAAP,CAAgB,CAEZxtF,QAAQgK,IAAR,CAAc,2EAAd,EACAwjF,OAAS,IAAT,CAEH,CAED14D,SAASolC,YAAT,CAAuBxjC,OAAvB,CAAgC0hD,IAAhC,EAEH,CAXD,CAaH,CAjBmB,EAApB,CAmBA,KAAKhe,cAAL,CAAwB,UAAY,CAEhC,GAAIozB,QAAS,KAAb,CAEA,MAAO,SAASpzB,eAAT,CAAyB1jC,OAAzB,CAAkC0hD,IAAlC,CAAyC,CAE5C;AACA,GAAK1hD,SAAWA,QAAQQ,uBAAxB,CAAkD,CAE9C,GAAK,CAAEs2D,MAAP,CAAgB,CAEZxtF,QAAQgK,IAAR,CAAc,qHAAd,EACAwjF,OAAS,IAAT,CAEH,CAED92D,QAAUA,QAAQA,OAAlB,CAEH,CAED;AACA;AACA,GAAOA,SAAWA,QAAQk6B,aAArB,EACCnhD,MAAM63B,OAAN,CAAe5Q,QAAQpD,KAAvB,GAAkCoD,QAAQpD,KAAR,CAAc7pB,MAAd,GAAyB,CADjE,CACuE,CAEnE;AAEA;AACAqrB,SAASslC,cAAT,CAAyB1jC,OAAzB,CAAkC0hD,IAAlC,EAEH,CARD,IAQO,CAEH;AAEAtjD,SAASqkD,qBAAT,CAAgCziD,OAAhC,CAAyC0hD,IAAzC,EAEH,CAEJ,CAlCD,CAoCH,CAxCuB,EAAxB,CA0CA;AAEA,KAAK+J,cAAL,CAAsB,SAAWx1E,KAAX,CAAmB,CAErCo3E,aAAep3E,KAAf,CAEH,CAJD,CAMA,KAAKw4D,eAAL,CAAuB,UAAY,CAE/B,MAAO6e,qBAAP,CAEH,CAJD,CAMA,KAAK1Y,eAAL,CAAuB,SAAWmM,YAAX,CAA0B,CAE7CuM,qBAAuBvM,YAAvB,CAEA,GAAKA,cAAgBnoE,WAAW7C,GAAX,CAAgBgrE,YAAhB,EAA+BQ,kBAA/B,GAAsDx2E,SAA3E,CAAuF,CAEnFqzB,SAAS0mD,iBAAT,CAA4B/D,YAA5B,EAEH,CAED,GAAI2C,aAAc2J,YAAlB,CACA,GAAI3I,QAAS,KAAb,CAEA,GAAK3D,YAAL,CAAoB,CAEhB,GAAIQ,oBAAqB3oE,WAAW7C,GAAX,CAAgBgrE,YAAhB,EAA+BQ,kBAAxD,CAEA,GAAKR,aAAavgD,uBAAlB,CAA4C,CAExCkjD,YAAcnC,mBAAoBR,aAAazgD,cAAjC,CAAd,CACAokD,OAAS,IAAT,CAEH,CALD,IAKO,CAEHhB,YAAcnC,kBAAd,CAEH,CAEDqM,iBAAiBhgF,IAAjB,CAAuBmzE,aAAahhD,QAApC,EACA8tD,gBAAgBjgF,IAAhB,CAAsBmzE,aAAalhD,OAAnC,EACAiuD,oBAAsB/M,aAAajhD,WAAnC,CAEH,CAnBD,IAmBO,CAEH8tD,iBAAiBhgF,IAAjB,CAAuBugF,SAAvB,EAAmC77E,cAAnC,CAAmD47E,WAAnD,EACAL,gBAAgBjgF,IAAhB,CAAsBwgF,QAAtB,EAAiC97E,cAAjC,CAAiD47E,WAAjD,EACAJ,oBAAsBO,YAAtB,CAEH,CAED,GAAKd,sBAAwB7J,WAA7B,CAA2C,CAEvC1P,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsCJ,WAAtC,EACA6J,oBAAsB7J,WAAtB,CAEH,CAEDz1E,MAAM8xB,QAAN,CAAgB6tD,gBAAhB,EACA3/E,MAAM4xB,OAAN,CAAeguD,eAAf,EACA5/E,MAAMmmE,cAAN,CAAsB0Z,mBAAtB,EAEA,GAAKpJ,MAAL,CAAc,CAEV,GAAIpE,mBAAoB1nE,WAAW7C,GAAX,CAAgBgrE,aAAa/gD,OAA7B,CAAxB,CACAg0C,IAAI+P,oBAAJ,CAA0B/P,IAAI8P,WAA9B,CAA2C9P,IAAIiR,iBAA/C,CAAkEjR,IAAI8I,2BAAJ,CAAkCiE,aAAazgD,cAAjH,CAAiIggD,kBAAkBc,cAAnJ,CAAmKL,aAAaxgD,iBAAhL,EAEH,CAEJ,CA1DD,CA4DA,KAAKy2D,sBAAL,CAA8B,SAAWjW,YAAX,CAAyBp8E,CAAzB,CAA4BC,CAA5B,CAA+BqB,KAA/B,CAAsCC,MAAtC,CAA8C0zC,MAA9C,CAAuD,CAEjF,GAAK,EAAImnC,cAAgBA,aAAa3gD,mBAAjC,CAAL,CAA8D,CAE1D92B,QAAQ+iB,KAAR,CAAe,0FAAf,EACA,OAEH,CAED,GAAIq3D,aAAc9qE,WAAW7C,GAAX,CAAgBgrE,YAAhB,EAA+BQ,kBAAjD,CAEA,GAAKmC,WAAL,CAAmB,CAEf,GAAIuT,SAAU,KAAd,CAEA,GAAKvT,cAAgB6J,mBAArB,CAA2C,CAEvCvZ,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsCJ,WAAtC,EAEAuT,QAAU,IAAV,CAEH,CAED,GAAI,CAEA,GAAIj3D,SAAU+gD,aAAa/gD,OAA3B,CACA,GAAIk3D,eAAgBl3D,QAAQ9C,MAA5B,CACA,GAAIwlD,aAAc1iD,QAAQtvB,IAA1B,CAEA,GAAKwmF,gBAAkBnzE,UAAlB,EAAgC2zD,MAAMyG,OAAN,CAAe+Y,aAAf,IAAmCljB,IAAIhxC,YAAJ,CAAkBgxC,IAAImjB,gCAAtB,CAAxE,CAAmI,CAE/H7tF,QAAQ+iB,KAAR,CAAe,2GAAf,EACA,OAEH,CAED,GAAKq2D,cAAgBz/D,gBAAhB,EAAoCy0D,MAAMyG,OAAN,CAAeuE,WAAf,IAAiC1O,IAAIhxC,YAAJ,CAAkBgxC,IAAIojB,8BAAtB,CAArE,EAA+H;AAChI,EAAI1U,cAAgBn/D,SAAhB,GAA+BmuC,WAAW37C,GAAX,CAAgB,mBAAhB,GAAyC27C,WAAW37C,GAAX,CAAgB,0BAAhB,CAAxE,CAAJ,CADC,EAC+H;AAChI,EAAI2sE,cAAgBl/D,aAAhB,EAAiCkuC,WAAW37C,GAAX,CAAgB,6BAAhB,CAArC,CAFJ,CAE6F,CAEzFzM,QAAQ+iB,KAAR,CAAe,qHAAf,EACA,OAEH,CAED,GAAK2nD,IAAIqjB,sBAAJ,CAA4BrjB,IAAI8P,WAAhC,IAAkD9P,IAAIsjB,oBAA3D,CAAkF,CAE9E;AAEA,GAAO3yF,GAAK,CAAL,EAAUA,GAAOo8E,aAAa96E,KAAb,CAAqBA,KAAxC,EAAuDrB,GAAK,CAAL,EAAUA,GAAOm8E,aAAa76E,MAAb,CAAsBA,MAAnG,CAAgH,CAE5G8tE,IAAIujB,UAAJ,CAAgB5yF,CAAhB,CAAmBC,CAAnB,CAAsBqB,KAAtB,CAA6BC,MAA7B,CAAqCwxE,MAAMyG,OAAN,CAAe+Y,aAAf,CAArC,CAAqExf,MAAMyG,OAAN,CAAeuE,WAAf,CAArE,CAAmG9oC,MAAnG,EAEH,CAEJ,CAVD,IAUO,CAEHtwC,QAAQ+iB,KAAR,CAAe,4GAAf,EAEH,CAEJ,CAtCD,OAsCU,CAEN,GAAK4qE,OAAL,CAAe,CAEXjjB,IAAI6P,eAAJ,CAAqB7P,IAAI8P,WAAzB,CAAsCyJ,mBAAtC,EAEH,CAEJ,CAEJ,CAEJ,CAzED,CA2EA,KAAKiK,wBAAL,CAAgC,SAAW9yF,QAAX,CAAqBs7B,OAArB,CAA8By3D,KAA9B,CAAsC,CAElE,GAAIxxF,OAAQ+5B,QAAQpD,KAAR,CAAc32B,KAA1B,CACA,GAAIC,QAAS85B,QAAQpD,KAAR,CAAc12B,MAA3B,CACA,GAAIm8E,UAAW3K,MAAMyG,OAAN,CAAen+C,QAAQ9C,MAAvB,CAAf,CAEA,KAAKsmC,YAAL,CAAmBxjC,OAAnB,CAA4B,CAA5B,EAEAg0C,IAAI0jB,cAAJ,CAAoB1jB,IAAI4I,UAAxB,CAAoC6a,OAAS,CAA7C,CAAgDpV,QAAhD,CAA0D39E,SAASC,CAAnE,CAAsED,SAASE,CAA/E,CAAkFqB,KAAlF,CAAyFC,MAAzF,CAAiG,CAAjG,EAEH,CAVD,CAYA,KAAKyxF,oBAAL,CAA4B,SAAWjzF,QAAX,CAAqBkzF,UAArB,CAAiCC,UAAjC,CAA6CJ,KAA7C,CAAqD,CAE7E,GAAIxxF,OAAQ2xF,WAAWh7D,KAAX,CAAiB32B,KAA7B,CACA,GAAIC,QAAS0xF,WAAWh7D,KAAX,CAAiB12B,MAA9B,CACA,GAAIm8E,UAAW3K,MAAMyG,OAAN,CAAe0Z,WAAW36D,MAA1B,CAAf,CACA,GAAIolD,QAAS5K,MAAMyG,OAAN,CAAe0Z,WAAWnnF,IAA1B,CAAb,CAEA,KAAK8yD,YAAL,CAAmBq0B,UAAnB,CAA+B,CAA/B,EAEA,GAAKD,WAAWl3D,aAAhB,CAAgC,CAE5BszC,IAAI8jB,aAAJ,CAAmB9jB,IAAI4I,UAAvB,CAAmC6a,OAAS,CAA5C,CAA+C/yF,SAASC,CAAxD,CAA2DD,SAASE,CAApE,CAAuEqB,KAAvE,CAA8EC,MAA9E,CAAsFm8E,QAAtF,CAAgGC,MAAhG,CAAwGsV,WAAWh7D,KAAX,CAAiBzzB,IAAzH,EAEH,CAJD,IAIO,CAEH6qE,IAAI8jB,aAAJ,CAAmB9jB,IAAI4I,UAAvB,CAAmC6a,OAAS,CAA5C,CAA+C/yF,SAASC,CAAxD,CAA2DD,SAASE,CAApE,CAAuEy9E,QAAvE,CAAiFC,MAAjF,CAAyFsV,WAAWh7D,KAApG,EAEH,CAEJ,CAnBD,CAqBH,CAED;;;OAKA,QAASm7D,QAAT,CAAkBlxF,KAAlB,CAAyBywE,OAAzB,CAAmC,CAE/B,KAAKj6C,IAAL,CAAY,EAAZ,CAEA,KAAKx2B,KAAL,CAAa,GAAIiqC,MAAJ,CAAWjqC,KAAX,CAAb,CACA,KAAKywE,OAAL,CAAiBA,UAAYvsE,SAAd,CAA4BusE,OAA5B,CAAsC,OAArD,CAEH,CAEDygB,QAAQviF,SAAR,CAAkBq5D,SAAlB,CAA8B,IAA9B,CAEAkpB,QAAQviF,SAAR,CAAkB/N,KAAlB,CAA0B,UAAY,CAElC,MAAO,IAAIswF,QAAJ,CAAa,KAAKlxF,KAAlB,CAAyB,KAAKywE,OAA9B,CAAP,CAEH,CAJD,CAMAygB,QAAQviF,SAAR,CAAkByoB,MAAlB,CAA2B,UAAW,UAAa,CAE/C,MAAO,CACHvtB,KAAM,SADH,CAEH7J,MAAO,KAAKA,KAAL,CAAWorC,MAAX,EAFJ,CAGHqlC,QAAS,KAAKA,OAHX,CAAP,CAMH,CARD,CAUA;;;OAKA,QAAS0gB,IAAT,CAAcnxF,KAAd,CAAqBf,IAArB,CAA2ByvB,GAA3B,CAAiC,CAE7B,KAAK8H,IAAL,CAAY,EAAZ,CAEA,KAAKx2B,KAAL,CAAa,GAAIiqC,MAAJ,CAAWjqC,KAAX,CAAb,CAEA,KAAKf,IAAL,CAAcA,OAASiF,SAAX,CAAyBjF,IAAzB,CAAgC,CAA5C,CACA,KAAKyvB,GAAL,CAAaA,MAAQxqB,SAAV,CAAwBwqB,GAAxB,CAA8B,IAAzC,CAEH,CAEDyiE,IAAIxiF,SAAJ,CAAc6hE,KAAd,CAAsB,IAAtB,CAEA2gB,IAAIxiF,SAAJ,CAAc/N,KAAd,CAAsB,UAAY,CAE9B,MAAO,IAAIuwF,IAAJ,CAAS,KAAKnxF,KAAd,CAAqB,KAAKf,IAA1B,CAAgC,KAAKyvB,GAArC,CAAP,CAEH,CAJD,CAMAyiE,IAAIxiF,SAAJ,CAAcyoB,MAAd,CAAuB,UAAW,UAAa,CAE3C,MAAO,CACHvtB,KAAM,KADH,CAEH7J,MAAO,KAAKA,KAAL,CAAWorC,MAAX,EAFJ,CAGHnsC,KAAM,KAAKA,IAHR,CAIHyvB,IAAK,KAAKA,GAJP,CAAP,CAOH,CATD,CAWA;;OAIA,QAAS3xB,MAAT,EAAiB,CAEboE,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,OAAZ,CAEA,KAAKipD,UAAL,CAAkB,IAAlB,CACA,KAAKxkB,GAAL,CAAW,IAAX,CACA,KAAKy+C,gBAAL,CAAwB,IAAxB,CAEA,KAAK7f,UAAL,CAAkB,IAAlB,CAAwB;AAE3B,CAEDnwE,MAAM4R,SAAN,CAAkBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAElEI,YAAahS,KAFqD,CAIlEgK,KAAM,cAAW0J,MAAX,CAAmB+oC,SAAnB,CAA+B,CAEjCr4C,SAASwN,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,CAA4C+oC,SAA5C,EAEA,GAAK/oC,OAAOqiD,UAAP,GAAsB,IAA3B,CAAkC,KAAKA,UAAL,CAAkBriD,OAAOqiD,UAAP,CAAkBlyD,KAAlB,EAAlB,CAClC,GAAK6P,OAAO69B,GAAP,GAAe,IAApB,CAA2B,KAAKA,GAAL,CAAW79B,OAAO69B,GAAP,CAAW1tC,KAAX,EAAX,CAC3B,GAAK6P,OAAOs8E,gBAAP,GAA4B,IAAjC,CAAwC,KAAKA,gBAAL,CAAwBt8E,OAAOs8E,gBAAP,CAAwBnsF,KAAxB,EAAxB,CAExC,KAAKssE,UAAL,CAAkBz8D,OAAOy8D,UAAzB,CACA,KAAKt2C,gBAAL,CAAwBnmB,OAAOmmB,gBAA/B,CAEA,MAAO,KAAP,CAEH,CAjBiE,CAmBlEQ,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAI/0B,MAAOnB,SAASwN,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAsCglB,IAAtC,CAAX,CAEA,GAAK,KAAKy7B,UAAL,GAAoB,IAAzB,CAAgCxwD,KAAK0B,MAAL,CAAY8uD,UAAZ,CAAyB,KAAKA,UAAL,CAAgB17B,MAAhB,CAAwBC,IAAxB,CAAzB,CAChC,GAAK,KAAKiX,GAAL,GAAa,IAAlB,CAAyBhsC,KAAK0B,MAAL,CAAYsqC,GAAZ,CAAkB,KAAKA,GAAL,CAASlX,MAAT,EAAlB,CAEzB,MAAO90B,KAAP,CAEH,CA5BiE,CAApD,CAAlB,CAgCA;;;;;;;;;;;OAaA,QAAS8uF,eAAT,CAAyBp4C,UAAzB,CAAsC,CAElC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,gBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CACA,KAAKkC,GAAL,CAAW,IAAX,CAEA,KAAKzrC,QAAL,CAAgB,CAAhB,CAEA,KAAK4tC,GAAL,CAAW,KAAX,CACA,KAAKK,MAAL,CAAc,KAAd,CAEA,KAAK6a,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDo4C,eAAeziF,SAAf,CAA2BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA3B,CACAyiF,eAAeziF,SAAf,CAAyBI,WAAzB,CAAuCqiF,cAAvC,CACAA,eAAeziF,SAAf,CAAyB0iF,gBAAzB,CAA4C,IAA5C,CAEAD,eAAeziF,SAAf,CAAyB5H,IAAzB,CAAgC,SAAW0J,MAAX,CAAoB,CAEhDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EACA,KAAKmsC,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKzrC,QAAL,CAAgB+P,OAAO/P,QAAvB,CAEA,MAAO,KAAP,CAEH,CAXD,CAaA;;;OAKA,QAAS4wF,OAAT,CAAiBp4C,QAAjB,CAA4B,CAExB/3C,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,QAAZ,CAEA,KAAKqvC,QAAL,CAAkBA,WAAah1C,SAAf,CAA6Bg1C,QAA7B,CAAwC,GAAIk4C,eAAJ,EAAxD,CAEA,KAAKniF,MAAL,CAAc,GAAI1E,QAAJ,CAAa,GAAb,CAAkB,GAAlB,CAAd,CAEH,CAED+mF,OAAO3iF,SAAP,CAAmBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAEnEI,YAAauiF,MAFsD,CAInErE,SAAU,IAJyD,CAMnE50C,QAAW,UAAY,CAEnB,GAAIk5C,gBAAiB,GAAIntF,QAAJ,EAArB,CACA,GAAIotF,eAAgB,GAAIptF,QAAJ,EAApB,CACA,GAAIqtF,YAAa,GAAIrtF,QAAJ,EAAjB,CAEA,MAAO,SAASi0C,QAAT,CAAkBiZ,SAAlB,CAA6BG,UAA7B,CAA0C,CAE7C+/B,cAAcz8D,qBAAd,CAAqC,KAAKpB,WAA1C,EACA29B,UAAU9F,GAAV,CAAcG,mBAAd,CAAmC6lC,aAAnC,CAAkDD,cAAlD,EAEAE,WAAWz8D,kBAAX,CAA+B,KAAKrB,WAApC,EACA,GAAI+9D,aAAcD,WAAW3zF,CAAX,CAAe2zF,WAAW1zF,CAA1B,CAA8B,CAAhD,CAEA,GAAKyzF,cAAczoF,iBAAd,CAAiCwoF,cAAjC,EAAoDG,WAAzD,CAAuE,OAEvE,GAAIpmF,UAAWgmD,UAAU9F,GAAV,CAAcD,MAAd,CAAqB/mC,UAArB,CAAiC+sE,cAAjC,CAAf,CAEA,GAAKjmF,SAAWgmD,UAAUryD,IAArB,EAA6BqM,SAAWgmD,UAAU5iC,GAAvD,CAA6D,OAE7D+iC,WAAW9wD,IAAX,CAAiB,CAEb2K,SAAUA,QAFG,CAGbgwB,MAAOi2D,eAAe3wF,KAAf,EAHM,CAIbm7C,KAAM,IAJO,CAKb/3C,OAAQ,IALK,CAAjB,EASH,CAvBD,CAyBH,CA/BU,EANwD,CAuCnEpD,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAKmqC,QAA3B,EAAsCnyC,IAAtC,CAA4C,IAA5C,CAAP,CAEH,CA3CkE,CA6CnEA,KAAM,cAAW0J,MAAX,CAAoB,CAEtBtP,SAASwN,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,GAAKA,OAAOxB,MAAP,GAAkB/K,SAAvB,CAAmC,KAAK+K,MAAL,CAAYlI,IAAZ,CAAkB0J,OAAOxB,MAAzB,EAEnC,MAAO,KAAP,CAEH,CArDkE,CAApD,CAAnB,CA0DA;;;;OAMA,QAAS0iF,IAAT,EAAe,CAEXxwF,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,KAAZ,CAEA+E,OAAOI,gBAAP,CAAyB,IAAzB,CAA+B,CAC3B4iF,OAAQ,CACJz7C,WAAY,IADR,CAEJ/mC,MAAO,EAFH,CADmB,CAA/B,EAOH,CAEDuiF,IAAIhjF,SAAJ,CAAgBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAEhEI,YAAa4iF,GAFmD,CAIhE5qF,KAAM,cAAW0J,MAAX,CAAoB,CAEtBtP,SAASwN,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,CAA4C,KAA5C,EAEA,GAAImhF,QAASnhF,OAAOmhF,MAApB,CAEA,IAAM,GAAI9hF,GAAI,CAAR,CAAW6H,EAAIi6E,OAAO1lF,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAI8gF,OAAQgB,OAAQ9hF,CAAR,CAAZ,CAEA,KAAK+hF,QAAL,CAAejB,MAAM5sF,MAAN,CAAapD,KAAb,EAAf,CAAqCgwF,MAAMtlF,QAA3C,EAEH,CAED,MAAO,KAAP,CAEH,CApB+D,CAsBhEumF,SAAU,kBAAW7tF,MAAX,CAAmBsH,QAAnB,CAA8B,CAEpC,GAAKA,WAAapH,SAAlB,CAA8BoH,SAAW,CAAX,CAE9BA,SAAW9J,KAAK6iB,GAAL,CAAU/Y,QAAV,CAAX,CAEA,GAAIsmF,QAAS,KAAKA,MAAlB,CAEA,IAAM,GAAIj6E,GAAI,CAAd,CAAiBA,EAAIi6E,OAAO1lF,MAA5B,CAAoCyL,GAApC,CAA2C,CAEvC,GAAKrM,SAAWsmF,OAAQj6E,CAAR,EAAYrM,QAA5B,CAAuC,CAEnC,MAEH,CAEJ,CAEDsmF,OAAO5hF,MAAP,CAAe2H,CAAf,CAAkB,CAAlB,CAAqB,CAAErM,SAAUA,QAAZ,CAAsBtH,OAAQA,MAA9B,CAArB,EAEA,KAAK1E,GAAL,CAAU0E,MAAV,EAEH,CA5C+D,CA8ChE8tF,qBAAsB,8BAAWxmF,QAAX,CAAsB,CAExC,GAAIsmF,QAAS,KAAKA,MAAlB,CAEA,IAAM,GAAI9hF,GAAI,CAAR,CAAW6H,EAAIi6E,OAAO1lF,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAKxE,SAAWsmF,OAAQ9hF,CAAR,EAAYxE,QAA5B,CAAuC,CAEnC,MAEH,CAEJ,CAED,MAAOsmF,QAAQ9hF,EAAI,CAAZ,EAAgB9L,MAAvB,CAEH,CA9D+D,CAgEhEq0C,QAAW,UAAY,CAEnB,GAAI05C,gBAAiB,GAAI3tF,QAAJ,EAArB,CAEA,MAAO,SAASi0C,QAAT,CAAkBiZ,SAAlB,CAA6BG,UAA7B,CAA0C,CAE7CsgC,eAAeh9D,qBAAf,CAAsC,KAAKpB,WAA3C,EAEA,GAAIroB,UAAWgmD,UAAU9F,GAAV,CAAcD,MAAd,CAAqB/mC,UAArB,CAAiCutE,cAAjC,CAAf,CAEA,KAAKD,oBAAL,CAA2BxmF,QAA3B,EAAsC+sC,OAAtC,CAA+CiZ,SAA/C,CAA0DG,UAA1D,EAEH,CARD,CAUH,CAdU,EAhEqD,CAgFhExvD,OAAQ,UAAY,CAEhB,GAAI6T,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIygB,IAAK,GAAIzgB,QAAJ,EAAT,CAEA,MAAO,SAASnC,OAAT,CAAiBlG,MAAjB,CAA0B,CAE7B,GAAI61F,QAAS,KAAKA,MAAlB,CAEA,GAAKA,OAAO1lF,MAAP,CAAgB,CAArB,CAAyB,CAErB4J,GAAGif,qBAAH,CAA0Bh5B,OAAO43B,WAAjC,EACA9O,GAAGkQ,qBAAH,CAA0B,KAAKpB,WAA/B,EAEA,GAAIroB,UAAWwK,GAAG0O,UAAH,CAAeK,EAAf,CAAf,CAEA+sE,OAAQ,CAAR,EAAY5tF,MAAZ,CAAmBuyC,OAAnB,CAA6B,IAA7B,CAEA,IAAM,GAAIzmC,GAAI,CAAR,CAAW6H,EAAIi6E,OAAO1lF,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAKxE,UAAYsmF,OAAQ9hF,CAAR,EAAYxE,QAA7B,CAAwC,CAEpCsmF,OAAQ9hF,EAAI,CAAZ,EAAgB9L,MAAhB,CAAuBuyC,OAAvB,CAAiC,KAAjC,CACAq7C,OAAQ9hF,CAAR,EAAY9L,MAAZ,CAAmBuyC,OAAnB,CAA6B,IAA7B,CAEH,CALD,IAKO,CAEH,MAEH,CAEJ,CAED,KAAQzmC,EAAI6H,CAAZ,CAAe7H,GAAf,CAAsB,CAElB8hF,OAAQ9hF,CAAR,EAAY9L,MAAZ,CAAmBuyC,OAAnB,CAA6B,KAA7B,CAEH,CAEJ,CAEJ,CApCD,CAsCH,CA3CO,EAhFwD,CA6HhEnf,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAI/0B,MAAOnB,SAASwN,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAsCglB,IAAtC,CAAX,CAEA/0B,KAAK0B,MAAL,CAAY4tF,MAAZ,CAAqB,EAArB,CAEA,GAAIA,QAAS,KAAKA,MAAlB,CAEA,IAAM,GAAI9hF,GAAI,CAAR,CAAW6H,EAAIi6E,OAAO1lF,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAI8gF,OAAQgB,OAAQ9hF,CAAR,CAAZ,CAEAxN,KAAK0B,MAAL,CAAY4tF,MAAZ,CAAmBjxF,IAAnB,CAAyB,CACrBqD,OAAQ4sF,MAAM5sF,MAAN,CAAa8c,IADA,CAErBxV,SAAUslF,MAAMtlF,QAFK,CAAzB,EAKH,CAED,MAAOhJ,KAAP,CAEH,CAlJ+D,CAApD,CAAhB,CAsJA;;;;;OAOA,QAAS0vF,SAAT,CAAmBhrB,KAAnB,CAA0BirB,YAA1B,CAAyC,CAErC;AAEAjrB,MAAQA,OAAS,EAAjB,CAEA,KAAKA,KAAL,CAAaA,MAAMtvD,KAAN,CAAa,CAAb,CAAb,CACA,KAAK22E,YAAL,CAAoB,GAAIj7C,aAAJ,CAAkB,KAAK4zB,KAAL,CAAW96D,MAAX,CAAoB,EAAtC,CAApB,CAEA;AAEA,GAAK+lF,eAAiB/tF,SAAtB,CAAkC,CAE9B,KAAKguF,iBAAL,GAEH,CAJD,IAIO,CAEH,GAAK,KAAKlrB,KAAL,CAAW96D,MAAX,GAAsB+lF,aAAa/lF,MAAxC,CAAiD,CAE7C,KAAK+lF,YAAL,CAAoBA,aAAav6E,KAAb,CAAoB,CAApB,CAApB,CAEH,CAJD,IAIO,CAEHjV,QAAQgK,IAAR,CAAc,kDAAd,EAEA,KAAKwlF,YAAL,CAAoB,EAApB,CAEA,IAAM,GAAIniF,GAAI,CAAR,CAAW6qB,GAAK,KAAKqsC,KAAL,CAAW96D,MAAjC,CAAyC4D,EAAI6qB,EAA7C,CAAiD7qB,GAAjD,CAAwD,CAEpD,KAAKmiF,YAAL,CAAkBtxF,IAAlB,CAAwB,GAAI4kB,QAAJ,EAAxB,EAEH,CAEJ,CAEJ,CAEJ,CAED3W,OAAO4B,MAAP,CAAewhF,SAASrjF,SAAxB,CAAmC,CAE/BujF,kBAAmB,4BAAY,CAE3B,KAAKD,YAAL,CAAoB,EAApB,CAEA,IAAM,GAAIniF,GAAI,CAAR,CAAW6qB,GAAK,KAAKqsC,KAAL,CAAW96D,MAAjC,CAAyC4D,EAAI6qB,EAA7C,CAAiD7qB,GAAjD,CAAwD,CAEpD,GAAIjI,SAAU,GAAI0d,QAAJ,EAAd,CAEA,GAAK,KAAKyhD,KAAL,CAAYl3D,CAAZ,CAAL,CAAuB,CAEnBjI,QAAQ4jB,UAAR,CAAoB,KAAKu7C,KAAL,CAAYl3D,CAAZ,EAAgB6jB,WAApC,EAEH,CAED,KAAKs+D,YAAL,CAAkBtxF,IAAlB,CAAwBkH,OAAxB,EAEH,CAEJ,CApB8B,CAsB/B67E,KAAM,eAAY,CAEd,GAAIyO,KAAJ,CAAUriF,CAAV,CAAa6qB,EAAb,CAEA;AAEA,IAAM7qB,EAAI,CAAJ,CAAO6qB,GAAK,KAAKqsC,KAAL,CAAW96D,MAA7B,CAAqC4D,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhDqiF,KAAO,KAAKnrB,KAAL,CAAYl3D,CAAZ,CAAP,CAEA,GAAKqiF,IAAL,CAAY,CAERA,KAAKx+D,WAAL,CAAiBlI,UAAjB,CAA6B,KAAKwmE,YAAL,CAAmBniF,CAAnB,CAA7B,EAEH,CAEJ,CAED;AAEA,IAAMA,EAAI,CAAJ,CAAO6qB,GAAK,KAAKqsC,KAAL,CAAW96D,MAA7B,CAAqC4D,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhDqiF,KAAO,KAAKnrB,KAAL,CAAYl3D,CAAZ,CAAP,CAEA,GAAKqiF,IAAL,CAAY,CAER,GAAKA,KAAKr8C,MAAL,EAAeq8C,KAAKr8C,MAAL,CAAYs8C,MAAhC,CAAyC,CAErCD,KAAK7lF,MAAL,CAAYmf,UAAZ,CAAwB0mE,KAAKr8C,MAAL,CAAYniB,WAApC,EACAw+D,KAAK7lF,MAAL,CAAYgX,QAAZ,CAAsB6uE,KAAKx+D,WAA3B,EAEH,CALD,IAKO,CAEHw+D,KAAK7lF,MAAL,CAAYvF,IAAZ,CAAkBorF,KAAKx+D,WAAvB,EAEH,CAEDw+D,KAAK7lF,MAAL,CAAY6hB,SAAZ,CAAuBgkE,KAAKt0F,QAA5B,CAAsCs0F,KAAKjpF,UAA3C,CAAuDipF,KAAKzpF,KAA5D,EAEH,CAEJ,CAEJ,CAjE8B,CAmE/BzG,OAAU,UAAY,CAElB,GAAIowF,cAAe,GAAI9sE,QAAJ,EAAnB,CACA,GAAI+sE,gBAAiB,GAAI/sE,QAAJ,EAArB,CAEA,MAAO,SAAStjB,OAAT,EAAkB,CAErB,GAAI+kE,OAAQ,KAAKA,KAAjB,CACA,GAAIirB,cAAe,KAAKA,YAAxB,CACA,GAAI5D,cAAe,KAAKA,YAAxB,CACA,GAAID,aAAc,KAAKA,WAAvB,CAEA;AAEA,IAAM,GAAIt+E,GAAI,CAAR,CAAW6qB,GAAKqsC,MAAM96D,MAA5B,CAAoC4D,EAAI6qB,EAAxC,CAA4C7qB,GAA5C,CAAmD,CAE/C;AAEA,GAAIxD,QAAS06D,MAAOl3D,CAAP,EAAak3D,MAAOl3D,CAAP,EAAW6jB,WAAxB,CAAsC2+D,cAAnD,CAEAD,aAAatpE,gBAAb,CAA+Bzc,MAA/B,CAAuC2lF,aAAcniF,CAAd,CAAvC,EACAuiF,aAAartE,OAAb,CAAsBqpE,YAAtB,CAAoCv+E,EAAI,EAAxC,EAEH,CAED,GAAKs+E,cAAgBlqF,SAArB,CAAiC,CAE7BkqF,YAAYvpC,WAAZ,CAA0B,IAA1B,CAEH,CAEJ,CA1BD,CA4BH,CAjCO,EAnEuB,CAsG/BjkD,MAAO,gBAAY,CAEf,MAAO,IAAIoxF,SAAJ,CAAc,KAAKhrB,KAAnB,CAA0B,KAAKirB,YAA/B,CAAP,CAEH,CA1G8B,CA4G/BM,cAAe,uBAAW/7D,IAAX,CAAkB,CAE7B,IAAM,GAAI1mB,GAAI,CAAR,CAAW6qB,GAAK,KAAKqsC,KAAL,CAAW96D,MAAjC,CAAyC4D,EAAI6qB,EAA7C,CAAiD7qB,GAAjD,CAAwD,CAEpD,GAAIqiF,MAAO,KAAKnrB,KAAL,CAAYl3D,CAAZ,CAAX,CAEA,GAAKqiF,KAAK37D,IAAL,GAAcA,IAAnB,CAA0B,CAEtB,MAAO27D,KAAP,CAEH,CAEJ,CAED,MAAOjuF,UAAP,CAEH,CA5H8B,CAAnC,EAgIA;;;;OAMA,QAASsuF,KAAT,EAAgB,CAEZrxF,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,MAAZ,CAEH,CAED2oF,KAAK7jF,SAAL,CAAiBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAEjEI,YAAayjF,IAFoD,CAIjEJ,OAAQ,IAJyD,CAApD,CAAjB,CAQA;;;;OAMA,QAASK,YAAT,CAAsB92D,QAAtB,CAAgCud,QAAhC,CAA2C,CAEvCj5C,KAAKoS,IAAL,CAAW,IAAX,CAAiBspB,QAAjB,CAA2Bud,QAA3B,EAEA,KAAKrvC,IAAL,CAAY,aAAZ,CAEA,KAAK6oF,QAAL,CAAgB,UAAhB,CACA,KAAKC,UAAL,CAAkB,GAAIptE,QAAJ,EAAlB,CACA,KAAKqtE,iBAAL,CAAyB,GAAIrtE,QAAJ,EAAzB,CAEA,GAAIyhD,OAAQ,KAAK6rB,SAAL,EAAZ,CACA,GAAI9rB,UAAW,GAAIirB,SAAJ,CAAchrB,KAAd,CAAf,CAEA,KAAKz2D,IAAL,CAAWw2D,QAAX,CAAqB,KAAKpzC,WAA1B,EAEA,KAAKm/D,oBAAL,GAEH,CAEDL,YAAY9jF,SAAZ,CAAwBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe5O,KAAK0O,SAApB,CAAf,CAAgD,CAEpEI,YAAa0jF,WAFuD,CAIpE/qB,cAAe,IAJqD,CAMpEmrB,UAAW,oBAAY,CAEnB,GAAI7rB,OAAQ,EAAZ,CAAgBmrB,IAAhB,CAAsBY,KAAtB,CACA,GAAIjjF,EAAJ,CAAO6qB,EAAP,CAEA,GAAK,KAAKgB,QAAL,EAAiB,KAAKA,QAAL,CAAcqrC,KAAd,GAAwB9iE,SAA9C,CAA0D,CAEtD;AAEA,IAAM4L,EAAI,CAAJ,CAAO6qB,GAAK,KAAKgB,QAAL,CAAcqrC,KAAd,CAAoB96D,MAAtC,CAA8C4D,EAAI6qB,EAAlD,CAAsD7qB,GAAtD,CAA6D,CAEzDijF,MAAQ,KAAKp3D,QAAL,CAAcqrC,KAAd,CAAqBl3D,CAArB,CAAR,CAEA;AAEAqiF,KAAO,GAAIK,KAAJ,EAAP,CACAxrB,MAAMrmE,IAAN,CAAYwxF,IAAZ,EAEA;AAEAA,KAAK37D,IAAL,CAAYu8D,MAAMv8D,IAAlB,CACA27D,KAAKt0F,QAAL,CAAcknB,SAAd,CAAyBguE,MAAMC,GAA/B,EACAb,KAAKjpF,UAAL,CAAgB6b,SAAhB,CAA2BguE,MAAME,IAAjC,EACA,GAAKF,MAAMG,GAAN,GAAchvF,SAAnB,CAA+BiuF,KAAKzpF,KAAL,CAAWqc,SAAX,CAAsBguE,MAAMG,GAA5B,EAElC,CAED;AAEA,IAAMpjF,EAAI,CAAJ,CAAO6qB,GAAK,KAAKgB,QAAL,CAAcqrC,KAAd,CAAoB96D,MAAtC,CAA8C4D,EAAI6qB,EAAlD,CAAsD7qB,GAAtD,CAA6D,CAEzDijF,MAAQ,KAAKp3D,QAAL,CAAcqrC,KAAd,CAAqBl3D,CAArB,CAAR,CAEA,GAAOijF,MAAMj9C,MAAN,GAAiB,CAAE,CAArB,EAA8Bi9C,MAAMj9C,MAAN,GAAiB,IAA/C,EAA2DkxB,MAAO+rB,MAAMj9C,MAAb,IAA0B5xC,SAA1F,CAAwG,CAEpG;AAEA8iE,MAAO+rB,MAAMj9C,MAAb,EAAsBx2C,GAAtB,CAA2B0nE,MAAOl3D,CAAP,CAA3B,EAEH,CAND,IAMO,CAEH;AAEA,KAAKxQ,GAAL,CAAU0nE,MAAOl3D,CAAP,CAAV,EAEH,CAEJ,CAEJ,CAED;AACA;AAEA,KAAKksB,iBAAL,CAAwB,IAAxB,EAEA,MAAOgrC,MAAP,CAEH,CAhEmE,CAkEpEz2D,KAAM,cAAWw2D,QAAX,CAAqB4rB,UAArB,CAAkC,CAEpC,KAAK5rB,QAAL,CAAgBA,QAAhB,CAEA,GAAK4rB,aAAezuF,SAApB,CAAgC,CAE5B,KAAK83B,iBAAL,CAAwB,IAAxB,EAEA,KAAK+qC,QAAL,CAAcmrB,iBAAd,GAEAS,WAAa,KAAKh/D,WAAlB,CAEH,CAED,KAAKg/D,UAAL,CAAgB5rF,IAAhB,CAAsB4rF,UAAtB,EACA,KAAKC,iBAAL,CAAuBnnE,UAAvB,CAAmCknE,UAAnC,EAEH,CAnFmE,CAqFpEjP,KAAM,eAAY,CAEd,KAAK3c,QAAL,CAAc2c,IAAd,GAEH,CAzFmE,CA2FpEoP,qBAAsB,+BAAY,CAE9B,GAAIpqF,MAAJ,CAAWoH,CAAX,CAEA,GAAK,KAAK6rB,QAAL,EAAiB,KAAKA,QAAL,CAAcC,UAApC,CAAiD,CAE7C,IAAM9rB,EAAI,CAAV,CAAaA,EAAI,KAAK6rB,QAAL,CAAcwf,WAAd,CAA0BjvC,MAA3C,CAAmD4D,GAAnD,CAA0D,CAEtD,GAAIqjF,IAAK,KAAKx3D,QAAL,CAAcwf,WAAd,CAA2BrrC,CAA3B,CAAT,CAEApH,MAAQ,IAAMyqF,GAAG/uE,eAAH,EAAd,CAEA,GAAK1b,QAAUnE,QAAf,CAA0B,CAEtB4uF,GAAG1nF,cAAH,CAAmB/C,KAAnB,EAEH,CAJD,IAIO,CAEHyqF,GAAGx0F,GAAH,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,EAAsB;AAEzB,CAEJ,CAEJ,CApBD,IAoBO,IAAK,KAAKg9B,QAAL,EAAiB,KAAKA,QAAL,CAAcG,gBAApC,CAAuD,CAE1D,GAAIs3D,KAAM,GAAI96D,QAAJ,EAAV,CAEA,GAAI+6D,YAAa,KAAK13D,QAAL,CAAcI,UAAd,CAAyBs3D,UAA1C,CAEA,IAAMvjF,EAAI,CAAV,CAAaA,EAAIujF,WAAWnoE,KAA5B,CAAmCpb,GAAnC,CAA0C,CAEtCsjF,IAAIt1F,CAAJ,CAAQu1F,WAAWluE,IAAX,CAAiBrV,CAAjB,CAAR,CACAsjF,IAAIr1F,CAAJ,CAAQs1F,WAAWjuE,IAAX,CAAiBtV,CAAjB,CAAR,CACAsjF,IAAIp1F,CAAJ,CAAQq1F,WAAWloE,IAAX,CAAiBrb,CAAjB,CAAR,CACAsjF,IAAInwE,CAAJ,CAAQowE,WAAWx6D,IAAX,CAAiB/oB,CAAjB,CAAR,CAEApH,MAAQ,IAAM0qF,IAAIhvE,eAAJ,EAAd,CAEA,GAAK1b,QAAUnE,QAAf,CAA0B,CAEtB6uF,IAAI3nF,cAAJ,CAAoB/C,KAApB,EAEH,CAJD,IAIO,CAEH0qF,IAAIz0F,GAAJ,CAAS,CAAT,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAAuB;AAE1B,CAED00F,WAAW5wC,OAAX,CAAoB3yC,CAApB,CAAuBsjF,IAAIt1F,CAA3B,CAA8Bs1F,IAAIr1F,CAAlC,CAAqCq1F,IAAIp1F,CAAzC,CAA4Co1F,IAAInwE,CAAhD,EAEH,CAEJ,CAEJ,CAlJmE,CAoJpE+Y,kBAAmB,2BAAWwc,KAAX,CAAmB,CAElCv4C,KAAK0O,SAAL,CAAeqtB,iBAAf,CAAiC3pB,IAAjC,CAAuC,IAAvC,CAA6CmmC,KAA7C,EAEA,GAAK,KAAKk6C,QAAL,GAAkB,UAAvB,CAAoC,CAEhC,KAAKE,iBAAL,CAAuBnnE,UAAvB,CAAmC,KAAKkI,WAAxC,EAEH,CAJD,IAIO,IAAK,KAAK++D,QAAL,GAAkB,UAAvB,CAAoC,CAEvC,KAAKE,iBAAL,CAAuBnnE,UAAvB,CAAmC,KAAKknE,UAAxC,EAEH,CAJM,IAIA,CAEHlwF,QAAQgK,IAAR,CAAc,6CAA+C,KAAKimF,QAAlE,EAEH,CAEJ,CAtKmE,CAwKpE9xF,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAK4sB,QAA3B,CAAqC,KAAKud,QAA1C,EAAqDnyC,IAArD,CAA2D,IAA3D,CAAP,CAEH,CA5KmE,CAAhD,CAAxB,CAgLA;;;;;;;;;;;;OAcA,QAAS0/D,kBAAT,CAA4BztB,UAA5B,CAAyC,CAErC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CAEA,KAAK6f,SAAL,CAAiB,CAAjB,CACA,KAAKwpC,OAAL,CAAe,OAAf,CACA,KAAKC,QAAL,CAAgB,OAAhB,CAEA,KAAK5kD,MAAL,CAAc,KAAd,CAEA,KAAK6a,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDytB,kBAAkB93D,SAAlB,CAA8BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA9B,CACA83D,kBAAkB93D,SAAlB,CAA4BI,WAA5B,CAA0C03D,iBAA1C,CAEAA,kBAAkB93D,SAAlB,CAA4BygF,mBAA5B,CAAkD,IAAlD,CAEA3oB,kBAAkB93D,SAAlB,CAA4B5H,IAA5B,CAAmC,SAAW0J,MAAX,CAAoB,CAEnDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EAEA,KAAK8pD,SAAL,CAAiBr5C,OAAOq5C,SAAxB,CACA,KAAKwpC,OAAL,CAAe7iF,OAAO6iF,OAAtB,CACA,KAAKC,QAAL,CAAgB9iF,OAAO8iF,QAAvB,CAEA,MAAO,KAAP,CAEH,CAZD,CAcA;;OAIA,QAASC,KAAT,CAAe73D,QAAf,CAAyBud,QAAzB,CAAmC0a,IAAnC,CAA0C,CAEtC,GAAKA,OAAS,CAAd,CAAkB,CAEdnxD,QAAQgK,IAAR,CAAc,iGAAd,EACA,MAAO,IAAIgnF,aAAJ,CAAkB93D,QAAlB,CAA4Bud,QAA5B,CAAP,CAEH,CAED/3C,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,MAAZ,CAEA,KAAK8xB,QAAL,CAAgBA,WAAaz3B,SAAb,CAAyBy3B,QAAzB,CAAoC,GAAIuoB,eAAJ,EAApD,CACA,KAAKhL,QAAL,CAAgBA,WAAah1C,SAAb,CAAyBg1C,QAAzB,CAAoC,GAAIutB,kBAAJ,CAAuB,CAAEzmE,MAAOwB,KAAKmC,MAAL,GAAgB,QAAzB,CAAvB,CAApD,CAEH,CAED6vF,KAAK7kF,SAAL,CAAiBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAEjEI,YAAaykF,IAFoD,CAIjEzuC,OAAQ,IAJyD,CAMjE2uC,qBAAwB,UAAY,CAEhC,GAAIjwF,OAAQ,GAAIW,QAAJ,EAAZ,CACA,GAAImO,KAAM,GAAInO,QAAJ,EAAV,CAEA,MAAO,SAASsvF,qBAAT,EAAgC,CAEnC,GAAI/3D,UAAW,KAAKA,QAApB,CAEA,GAAKA,SAASG,gBAAd,CAAiC,CAE7B;AAEA,GAAKH,SAAS1kB,KAAT,GAAmB,IAAxB,CAA+B,CAE3B,GAAI08E,mBAAoBh4D,SAASI,UAAT,CAAoBl+B,QAA5C,CACA,GAAIw9C,eAAgB,CAAE,CAAF,CAApB,CAEA,IAAM,GAAIvrC,GAAI,CAAR,CAAW6H,EAAIg8E,kBAAkBzoE,KAAvC,CAA8Cpb,EAAI6H,CAAlD,CAAqD7H,GAArD,CAA4D,CAExDrM,MAAMwhB,mBAAN,CAA2B0uE,iBAA3B,CAA8C7jF,EAAI,CAAlD,EACAyC,IAAI0S,mBAAJ,CAAyB0uE,iBAAzB,CAA4C7jF,CAA5C,EAEAurC,cAAevrC,CAAf,EAAqBurC,cAAevrC,EAAI,CAAnB,CAArB,CACAurC,cAAevrC,CAAf,GAAsBrM,MAAM+gB,UAAN,CAAkBjS,GAAlB,CAAtB,CAEH,CAEDopB,SAAS4oB,YAAT,CAAuB,cAAvB,CAAuC,GAAIpB,uBAAJ,CAA4B9H,aAA5B,CAA2C,CAA3C,CAAvC,EAEH,CAjBD,IAiBO,CAEH54C,QAAQgK,IAAR,CAAc,+FAAd,EAEH,CAEJ,CA3BD,IA2BO,IAAKkvB,SAASC,UAAd,CAA2B,CAE9B,GAAIC,UAAWF,SAASE,QAAxB,CACA,GAAIwf,eAAgB1f,SAAS0f,aAA7B,CAEAA,cAAe,CAAf,EAAqB,CAArB,CAEA,IAAM,GAAIvrC,GAAI,CAAR,CAAW6H,EAAIkkB,SAAS3vB,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDurC,cAAevrC,CAAf,EAAqBurC,cAAevrC,EAAI,CAAnB,CAArB,CACAurC,cAAevrC,CAAf,GAAsB+rB,SAAU/rB,EAAI,CAAd,EAAkB0U,UAAlB,CAA8BqX,SAAU/rB,CAAV,CAA9B,CAAtB,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAjDD,CAmDH,CAxDuB,EANyC,CAgEjEuoC,QAAW,UAAY,CAEnB,GAAImY,eAAgB,GAAIjrC,QAAJ,EAApB,CACA,GAAIimC,KAAM,GAAIF,IAAJ,EAAV,CACA,GAAI/uB,QAAS,GAAIkB,OAAJ,EAAb,CAEA,MAAO,SAAS4a,QAAT,CAAkBiZ,SAAlB,CAA6BG,UAA7B,CAA0C,CAE7C,GAAIhS,WAAY6R,UAAUsiC,aAA1B,CACA,GAAIC,aAAcp0C,UAAYA,SAA9B,CAEA,GAAI9jB,UAAW,KAAKA,QAApB,CACA,GAAIhI,aAAc,KAAKA,WAAvB,CAEA;AAEA,GAAKgI,SAASoG,cAAT,GAA4B,IAAjC,CAAwCpG,SAASqG,qBAAT,GAExCzF,OAAOx1B,IAAP,CAAa40B,SAASoG,cAAtB,EACAxF,OAAOnR,YAAP,CAAqBuI,WAArB,EAEA,GAAK29B,UAAU9F,GAAV,CAAcnvB,gBAAd,CAAgCE,MAAhC,IAA6C,KAAlD,CAA0D,OAE1D;AAEAi0B,cAAc/kC,UAAd,CAA0BkI,WAA1B,EACA63B,IAAIzkD,IAAJ,CAAUuqD,UAAU9F,GAApB,EAA0BpgC,YAA1B,CAAwColC,aAAxC,EAEA,GAAIsjC,QAAS,GAAI1vF,QAAJ,EAAb,CACA,GAAI2vF,MAAO,GAAI3vF,QAAJ,EAAX,CACA,GAAI4vF,cAAe,GAAI5vF,QAAJ,EAAnB,CACA,GAAI6vF,UAAW,GAAI7vF,QAAJ,EAAf,CACA,GAAI8vF,MAAS,MAAQ,KAAKtI,cAAf,CAAkC,CAAlC,CAAsC,CAAjD,CAEA,GAAKjwD,SAASG,gBAAd,CAAiC,CAE7B,GAAI7kB,OAAQ0kB,SAAS1kB,KAArB,CACA,GAAI8kB,YAAaJ,SAASI,UAA1B,CACA,GAAIsgB,WAAYtgB,WAAWl+B,QAAX,CAAoB4Z,KAApC,CAEA,GAAKR,QAAU,IAAf,CAAsB,CAElB,GAAImlC,SAAUnlC,MAAMQ,KAApB,CAEA,IAAM,GAAI3H,GAAI,CAAR,CAAW6H,EAAIykC,QAAQlwC,MAAR,CAAiB,CAAtC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAKokF,IAArD,CAA4D,CAExD,GAAIx+E,GAAI0mC,QAAStsC,CAAT,CAAR,CACA,GAAIiF,GAAIqnC,QAAStsC,EAAI,CAAb,CAAR,CAEAgkF,OAAO/uE,SAAP,CAAkBs3B,SAAlB,CAA6B3mC,EAAI,CAAjC,EACAq+E,KAAKhvE,SAAL,CAAgBs3B,SAAhB,CAA2BtnC,EAAI,CAA/B,EAEA,GAAIo/E,QAAS3oC,IAAIM,mBAAJ,CAAyBgoC,MAAzB,CAAiCC,IAAjC,CAAuCE,QAAvC,CAAiDD,YAAjD,CAAb,CAEA,GAAKG,OAASN,WAAd,CAA4B,SAE5BI,SAAS7oE,YAAT,CAAuB,KAAKuI,WAA5B,EAA2C;AAE3C,GAAIroB,UAAWgmD,UAAU9F,GAAV,CAAcD,MAAd,CAAqB/mC,UAArB,CAAiCyvE,QAAjC,CAAf,CAEA,GAAK3oF,SAAWgmD,UAAUryD,IAArB,EAA6BqM,SAAWgmD,UAAU5iC,GAAvD,CAA6D,SAE7D+iC,WAAW9wD,IAAX,CAAiB,CAEb2K,SAAUA,QAFG,CAGb;AACA;AACAgwB,MAAO04D,aAAapzF,KAAb,GAAqBwqB,YAArB,CAAmC,KAAKuI,WAAxC,CALM,CAMb1c,MAAOnH,CANM,CAObisC,KAAM,IAPO,CAQb2V,UAAW,IARE,CASb1tD,OAAQ,IATK,CAAjB,EAaH,CAEJ,CArCD,IAqCO,CAEH,IAAM,GAAI8L,GAAI,CAAR,CAAW6H,EAAI0kC,UAAUnwC,MAAV,CAAmB,CAAnB,CAAuB,CAA5C,CAA+C4D,EAAI6H,CAAnD,CAAsD7H,GAAKokF,IAA3D,CAAkE,CAE9DJ,OAAO/uE,SAAP,CAAkBs3B,SAAlB,CAA6B,EAAIvsC,CAAjC,EACAikF,KAAKhvE,SAAL,CAAgBs3B,SAAhB,CAA2B,EAAIvsC,CAAJ,CAAQ,CAAnC,EAEA,GAAIqkF,QAAS3oC,IAAIM,mBAAJ,CAAyBgoC,MAAzB,CAAiCC,IAAjC,CAAuCE,QAAvC,CAAiDD,YAAjD,CAAb,CAEA,GAAKG,OAASN,WAAd,CAA4B,SAE5BI,SAAS7oE,YAAT,CAAuB,KAAKuI,WAA5B,EAA2C;AAE3C,GAAIroB,UAAWgmD,UAAU9F,GAAV,CAAcD,MAAd,CAAqB/mC,UAArB,CAAiCyvE,QAAjC,CAAf,CAEA,GAAK3oF,SAAWgmD,UAAUryD,IAArB,EAA6BqM,SAAWgmD,UAAU5iC,GAAvD,CAA6D,SAE7D+iC,WAAW9wD,IAAX,CAAiB,CAEb2K,SAAUA,QAFG,CAGb;AACA;AACAgwB,MAAO04D,aAAapzF,KAAb,GAAqBwqB,YAArB,CAAmC,KAAKuI,WAAxC,CALM,CAMb1c,MAAOnH,CANM,CAObisC,KAAM,IAPO,CAQb2V,UAAW,IARE,CASb1tD,OAAQ,IATK,CAAjB,EAaH,CAEJ,CAEJ,CA7ED,IA6EO,IAAK23B,SAASC,UAAd,CAA2B,CAE9B,GAAIC,UAAWF,SAASE,QAAxB,CACA,GAAIu4D,YAAav4D,SAAS3vB,MAA1B,CAEA,IAAM,GAAI4D,GAAI,CAAd,CAAiBA,EAAIskF,WAAa,CAAlC,CAAqCtkF,GAAKokF,IAA1C,CAAiD,CAE7C,GAAIC,QAAS3oC,IAAIM,mBAAJ,CAAyBjwB,SAAU/rB,CAAV,CAAzB,CAAwC+rB,SAAU/rB,EAAI,CAAd,CAAxC,CAA2DmkF,QAA3D,CAAqED,YAArE,CAAb,CAEA,GAAKG,OAASN,WAAd,CAA4B,SAE5BI,SAAS7oE,YAAT,CAAuB,KAAKuI,WAA5B,EAA2C;AAE3C,GAAIroB,UAAWgmD,UAAU9F,GAAV,CAAcD,MAAd,CAAqB/mC,UAArB,CAAiCyvE,QAAjC,CAAf,CAEA,GAAK3oF,SAAWgmD,UAAUryD,IAArB,EAA6BqM,SAAWgmD,UAAU5iC,GAAvD,CAA6D,SAE7D+iC,WAAW9wD,IAAX,CAAiB,CAEb2K,SAAUA,QAFG,CAGb;AACA;AACAgwB,MAAO04D,aAAapzF,KAAb,GAAqBwqB,YAArB,CAAmC,KAAKuI,WAAxC,CALM,CAMb1c,MAAOnH,CANM,CAObisC,KAAM,IAPO,CAQb2V,UAAW,IARE,CASb1tD,OAAQ,IATK,CAAjB,EAaH,CAEJ,CAEJ,CA3ID,CA6IH,CAnJU,EAhEsD,CAqNjEpD,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAK4sB,QAA3B,CAAqC,KAAKud,QAA1C,EAAqDnyC,IAArD,CAA2D,IAA3D,CAAP,CAEH,CAzNgE,CAApD,CAAjB,CA6NA;;OAIA,QAAS0sF,aAAT,CAAuB93D,QAAvB,CAAiCud,QAAjC,CAA4C,CAExCs6C,KAAKnhF,IAAL,CAAW,IAAX,CAAiBspB,QAAjB,CAA2Bud,QAA3B,EAEA,KAAKrvC,IAAL,CAAY,cAAZ,CAEH,CAED4pF,aAAa9kF,SAAb,CAAyBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe2kF,KAAK7kF,SAApB,CAAf,CAAgD,CAErEI,YAAa0kF,YAFwD,CAIrE7H,eAAgB,IAJqD,CAMrE8H,qBAAwB,UAAY,CAEhC,GAAIjwF,OAAQ,GAAIW,QAAJ,EAAZ,CACA,GAAImO,KAAM,GAAInO,QAAJ,EAAV,CAEA,MAAO,SAASsvF,qBAAT,EAAgC,CAEnC,GAAI/3D,UAAW,KAAKA,QAApB,CAEA,GAAKA,SAASG,gBAAd,CAAiC,CAE7B;AAEA,GAAKH,SAAS1kB,KAAT,GAAmB,IAAxB,CAA+B,CAE3B,GAAI08E,mBAAoBh4D,SAASI,UAAT,CAAoBl+B,QAA5C,CACA,GAAIw9C,eAAgB,EAApB,CAEA,IAAM,GAAIvrC,GAAI,CAAR,CAAW6H,EAAIg8E,kBAAkBzoE,KAAvC,CAA8Cpb,EAAI6H,CAAlD,CAAqD7H,GAAK,CAA1D,CAA8D,CAE1DrM,MAAMwhB,mBAAN,CAA2B0uE,iBAA3B,CAA8C7jF,CAA9C,EACAyC,IAAI0S,mBAAJ,CAAyB0uE,iBAAzB,CAA4C7jF,EAAI,CAAhD,EAEAurC,cAAevrC,CAAf,EAAuBA,IAAM,CAAR,CAAc,CAAd,CAAkBurC,cAAevrC,EAAI,CAAnB,CAAvC,CACAurC,cAAevrC,EAAI,CAAnB,EAAyBurC,cAAevrC,CAAf,EAAqBrM,MAAM+gB,UAAN,CAAkBjS,GAAlB,CAA9C,CAEH,CAEDopB,SAAS4oB,YAAT,CAAuB,cAAvB,CAAuC,GAAIpB,uBAAJ,CAA4B9H,aAA5B,CAA2C,CAA3C,CAAvC,EAEH,CAjBD,IAiBO,CAEH54C,QAAQgK,IAAR,CAAc,uGAAd,EAEH,CAEJ,CA3BD,IA2BO,IAAKkvB,SAASC,UAAd,CAA2B,CAE9B,GAAIC,UAAWF,SAASE,QAAxB,CACA,GAAIwf,eAAgB1f,SAAS0f,aAA7B,CAEA,IAAM,GAAIvrC,GAAI,CAAR,CAAW6H,EAAIkkB,SAAS3vB,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAAK,CAAlD,CAAsD,CAElDrM,MAAMsD,IAAN,CAAY80B,SAAU/rB,CAAV,CAAZ,EACAyC,IAAIxL,IAAJ,CAAU80B,SAAU/rB,EAAI,CAAd,CAAV,EAEAurC,cAAevrC,CAAf,EAAuBA,IAAM,CAAR,CAAc,CAAd,CAAkBurC,cAAevrC,EAAI,CAAnB,CAAvC,CACAurC,cAAevrC,EAAI,CAAnB,EAAyBurC,cAAevrC,CAAf,EAAqBrM,MAAM+gB,UAAN,CAAkBjS,GAAlB,CAA9C,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAlDD,CAoDH,CAzDuB,EAN6C,CAAhD,CAAzB,CAmEA;;OAIA,QAAS8hF,SAAT,CAAmB14D,QAAnB,CAA6Bud,QAA7B,CAAwC,CAEpCs6C,KAAKnhF,IAAL,CAAW,IAAX,CAAiBspB,QAAjB,CAA2Bud,QAA3B,EAEA,KAAKrvC,IAAL,CAAY,UAAZ,CAEH,CAEDwqF,SAAS1lF,SAAT,CAAqBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe2kF,KAAK7kF,SAApB,CAAf,CAAgD,CAEjEI,YAAaslF,QAFoD,CAIjExI,WAAY,IAJqD,CAAhD,CAArB,CAQA;;;;;;;;;;;;;;OAgBA,QAASllB,eAAT,CAAyB3tB,UAAzB,CAAsC,CAElC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,gBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CAEA,KAAKkC,GAAL,CAAW,IAAX,CAEA,KAAKrR,IAAL,CAAY,CAAZ,CACA,KAAK+uB,eAAL,CAAuB,IAAvB,CAEA,KAAK5O,YAAL,CAAoB,KAApB,CAEA,KAAKtM,MAAL,CAAc,KAAd,CAEA,KAAK6a,SAAL,CAAgBxQ,UAAhB,EAEH,CAED2tB,eAAeh4D,SAAf,CAA2BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA3B,CACAg4D,eAAeh4D,SAAf,CAAyBI,WAAzB,CAAuC43D,cAAvC,CAEAA,eAAeh4D,SAAf,CAAyB6gF,gBAAzB,CAA4C,IAA5C,CAEA7oB,eAAeh4D,SAAf,CAAyB5H,IAAzB,CAAgC,SAAW0J,MAAX,CAAoB,CAEhDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EAEA,KAAKmsC,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKrR,IAAL,CAAYrqB,OAAOqqB,IAAnB,CACA,KAAK+uB,eAAL,CAAuBp5C,OAAOo5C,eAA9B,CAEA,KAAK5O,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CAEA,MAAO,KAAP,CAEH,CAfD,CAiBA;;OAIA,QAASq5C,OAAT,CAAiB34D,QAAjB,CAA2Bud,QAA3B,CAAsC,CAElC/3C,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,QAAZ,CAEA,KAAK8xB,QAAL,CAAgBA,WAAaz3B,SAAb,CAAyBy3B,QAAzB,CAAoC,GAAIuoB,eAAJ,EAApD,CACA,KAAKhL,QAAL,CAAgBA,WAAah1C,SAAb,CAAyBg1C,QAAzB,CAAoC,GAAIytB,eAAJ,CAAoB,CAAE3mE,MAAOwB,KAAKmC,MAAL,GAAgB,QAAzB,CAApB,CAApD,CAEH,CAED2wF,OAAO3lF,SAAP,CAAmBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAEnEI,YAAaulF,MAFsD,CAInExvC,SAAU,IAJyD,CAMnEzM,QAAW,UAAY,CAEnB,GAAImY,eAAgB,GAAIjrC,QAAJ,EAApB,CACA,GAAIimC,KAAM,GAAIF,IAAJ,EAAV,CACA,GAAI/uB,QAAS,GAAIkB,OAAJ,EAAb,CAEA,MAAO,SAAS4a,QAAT,CAAkBiZ,SAAlB,CAA6BG,UAA7B,CAA0C,CAE7C,GAAIztD,QAAS,IAAb,CACA,GAAI23B,UAAW,KAAKA,QAApB,CACA,GAAIhI,aAAc,KAAKA,WAAvB,CACA,GAAI4gE,WAAYjjC,UAAUkjC,MAAV,CAAiBF,MAAjB,CAAwBC,SAAxC,CAEA;AAEA,GAAK54D,SAASoG,cAAT,GAA4B,IAAjC,CAAwCpG,SAASqG,qBAAT,GAExCzF,OAAOx1B,IAAP,CAAa40B,SAASoG,cAAtB,EACAxF,OAAOnR,YAAP,CAAqBuI,WAArB,EACA4I,OAAO9zB,MAAP,EAAiB8rF,SAAjB,CAEA,GAAKjjC,UAAU9F,GAAV,CAAcnvB,gBAAd,CAAgCE,MAAhC,IAA6C,KAAlD,CAA0D,OAE1D;AAEAi0B,cAAc/kC,UAAd,CAA0BkI,WAA1B,EACA63B,IAAIzkD,IAAJ,CAAUuqD,UAAU9F,GAApB,EAA0BpgC,YAA1B,CAAwColC,aAAxC,EAEA,GAAIikC,gBAAiBF,WAAc,CAAE,KAAK7rF,KAAL,CAAW5K,CAAX,CAAe,KAAK4K,KAAL,CAAW3K,CAA1B,CAA8B,KAAK2K,KAAL,CAAW1K,CAA3C,EAAiD,CAA/D,CAArB,CACA,GAAI02F,kBAAmBD,eAAiBA,cAAxC,CACA,GAAI52F,UAAW,GAAIuG,QAAJ,EAAf,CACA,GAAImtF,gBAAiB,GAAIntF,QAAJ,EAArB,CAEA,QAASuwF,UAAT,CAAoBr5D,KAApB,CAA2BrkB,KAA3B,CAAmC,CAE/B,GAAI29E,oBAAqBppC,IAAIK,iBAAJ,CAAuBvwB,KAAvB,CAAzB,CAEA,GAAKs5D,mBAAqBF,gBAA1B,CAA6C,CAEzClpC,IAAIG,mBAAJ,CAAyBrwB,KAAzB,CAAgCi2D,cAAhC,EACAA,eAAenmE,YAAf,CAA6BuI,WAA7B,EAEA,GAAIroB,UAAWgmD,UAAU9F,GAAV,CAAcD,MAAd,CAAqB/mC,UAArB,CAAiC+sE,cAAjC,CAAf,CAEA,GAAKjmF,SAAWgmD,UAAUryD,IAArB,EAA6BqM,SAAWgmD,UAAU5iC,GAAvD,CAA6D,OAE7D+iC,WAAW9wD,IAAX,CAAiB,CAEb2K,SAAUA,QAFG,CAGbupF,cAAerzF,KAAK0M,IAAL,CAAW0mF,kBAAX,CAHF,CAIbt5D,MAAOi2D,eAAe3wF,KAAf,EAJM,CAKbqW,MAAOA,KALM,CAMb8kC,KAAM,IANO,CAOb/3C,OAAQA,MAPK,CAAjB,EAWH,CAEJ,CAED,GAAK23B,SAASG,gBAAd,CAAiC,CAE7B,GAAI7kB,OAAQ0kB,SAAS1kB,KAArB,CACA,GAAI8kB,YAAaJ,SAASI,UAA1B,CACA,GAAIsgB,WAAYtgB,WAAWl+B,QAAX,CAAoB4Z,KAApC,CAEA,GAAKR,QAAU,IAAf,CAAsB,CAElB,GAAImlC,SAAUnlC,MAAMQ,KAApB,CAEA,IAAM,GAAI3H,GAAI,CAAR,CAAW6qB,GAAKyhB,QAAQlwC,MAA9B,CAAsC4D,EAAI6qB,EAA1C,CAA8C7qB,GAA9C,CAAqD,CAEjD,GAAI4F,GAAI0mC,QAAStsC,CAAT,CAAR,CAEAjS,SAASknB,SAAT,CAAoBs3B,SAApB,CAA+B3mC,EAAI,CAAnC,EAEAi/E,UAAW92F,QAAX,CAAqB6X,CAArB,EAEH,CAEJ,CAdD,IAcO,CAEH,IAAM,GAAI5F,GAAI,CAAR,CAAW6H,EAAI0kC,UAAUnwC,MAAV,CAAmB,CAAxC,CAA2C4D,EAAI6H,CAA/C,CAAkD7H,GAAlD,CAAyD,CAErDjS,SAASknB,SAAT,CAAoBs3B,SAApB,CAA+BvsC,EAAI,CAAnC,EAEA6kF,UAAW92F,QAAX,CAAqBiS,CAArB,EAEH,CAEJ,CAEJ,CAhCD,IAgCO,CAEH,GAAI+rB,UAAWF,SAASE,QAAxB,CAEA,IAAM,GAAI/rB,GAAI,CAAR,CAAW6H,EAAIkkB,SAAS3vB,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhD6kF,UAAW94D,SAAU/rB,CAAV,CAAX,CAA0BA,CAA1B,EAEH,CAEJ,CAEJ,CAnGD,CAqGH,CA3GU,EANwD,CAmHnElP,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,CAAsB,KAAK4sB,QAA3B,CAAqC,KAAKud,QAA1C,EAAqDnyC,IAArD,CAA2D,IAA3D,CAAP,CAEH,CAvHkE,CAApD,CAAnB,CA2HA;;OAIA,QAAS+tF,MAAT,EAAiB,CAEb3zF,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,OAAZ,CAEH,CAEDirF,MAAMnmF,SAAN,CAAkBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAElEI,YAAa+lF,KAFqD,CAIlEC,QAAS,IAJyD,CAApD,CAAlB,CAQA;;OAIA,QAASC,aAAT,CAAuBC,KAAvB,CAA8Bj/D,OAA9B,CAAuCC,KAAvC,CAA8CC,KAA9C,CAAqDC,SAArD,CAAgEC,SAAhE,CAA2EC,MAA3E,CAAmFxsB,IAAnF,CAAyFysB,UAAzF,CAAsG,CAElGR,QAAQzjB,IAAR,CAAc,IAAd,CAAoB4iF,KAApB,CAA2Bj/D,OAA3B,CAAoCC,KAApC,CAA2CC,KAA3C,CAAkDC,SAAlD,CAA6DC,SAA7D,CAAwEC,MAAxE,CAAgFxsB,IAAhF,CAAsFysB,UAAtF,EAEA,KAAKO,eAAL,CAAuB,KAAvB,CAEH,CAEDm+D,aAAarmF,SAAb,CAAyBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeinB,QAAQnnB,SAAvB,CAAf,CAAmD,CAExEI,YAAaimF,YAF2D,CAIxEhb,eAAgB,IAJwD,CAMxE/3E,OAAQ,iBAAY,CAEhB,GAAIgzF,OAAQ,KAAKl/D,KAAjB,CAEA,GAAKk/D,MAAMC,UAAN,EAAoBD,MAAME,iBAA/B,CAAmD,CAE/C,KAAKtwC,WAAL,CAAmB,IAAnB,CAEH,CAEJ,CAhBuE,CAAnD,CAAzB,CAoBA;;OAIA,QAASuwC,kBAAT,CAA4B1+D,OAA5B,CAAqCt3B,KAArC,CAA4CC,MAA5C,CAAoDg3B,MAApD,CAA4DxsB,IAA5D,CAAkEmsB,OAAlE,CAA2EC,KAA3E,CAAkFC,KAAlF,CAAyFC,SAAzF,CAAoGC,SAApG,CAA+GE,UAA/G,CAA2HC,QAA3H,CAAsI,CAElIT,QAAQzjB,IAAR,CAAc,IAAd,CAAoB,IAApB,CAA0B2jB,OAA1B,CAAmCC,KAAnC,CAA0CC,KAA1C,CAAiDC,SAAjD,CAA4DC,SAA5D,CAAuEC,MAAvE,CAA+ExsB,IAA/E,CAAqFysB,UAArF,CAAiGC,QAAjG,EAEA,KAAKR,KAAL,CAAa,CAAE32B,MAAOA,KAAT,CAAgBC,OAAQA,MAAxB,CAAb,CACA,KAAKq3B,OAAL,CAAeA,OAAf,CAEA;AACA;AAEA,KAAKK,KAAL,CAAa,KAAb,CAEA;AACA;AAEA,KAAKF,eAAL,CAAuB,KAAvB,CAEH,CAEDu+D,kBAAkBzmF,SAAlB,CAA8BC,OAAOC,MAAP,CAAeinB,QAAQnnB,SAAvB,CAA9B,CACAymF,kBAAkBzmF,SAAlB,CAA4BI,WAA5B,CAA0CqmF,iBAA1C,CAEAA,kBAAkBzmF,SAAlB,CAA4B0sE,mBAA5B,CAAkD,IAAlD,CAEA;;;OAKA,QAASga,aAAT,CAAuBj2F,KAAvB,CAA8BC,MAA9B,CAAsCwK,IAAtC,CAA4CmsB,OAA5C,CAAqDC,KAArD,CAA4DC,KAA5D,CAAmEC,SAAnE,CAA8EC,SAA9E,CAAyFE,UAAzF,CAAqGD,MAArG,CAA8G,CAE1GA,OAASA,SAAWnyB,SAAX,CAAuBmyB,MAAvB,CAAgC/Y,WAAzC,CAEA,GAAK+Y,SAAW/Y,WAAX,EAA0B+Y,SAAW9Y,kBAA1C,CAA+D,CAE3D,KAAM,IAAIwF,MAAJ,CAAW,kFAAX,CAAN,CAEH,CAED,GAAKlZ,OAAS3F,SAAT,EAAsBmyB,SAAW/Y,WAAtC,CAAoDzT,KAAO0S,iBAAP,CACpD,GAAK1S,OAAS3F,SAAT,EAAsBmyB,SAAW9Y,kBAAtC,CAA2D1T,KAAOkT,kBAAP,CAE3D+Y,QAAQzjB,IAAR,CAAc,IAAd,CAAoB,IAApB,CAA0B2jB,OAA1B,CAAmCC,KAAnC,CAA0CC,KAA1C,CAAiDC,SAAjD,CAA4DC,SAA5D,CAAuEC,MAAvE,CAA+ExsB,IAA/E,CAAqFysB,UAArF,EAEA,KAAKP,KAAL,CAAa,CAAE32B,MAAOA,KAAT,CAAgBC,OAAQA,MAAxB,CAAb,CAEA,KAAK82B,SAAL,CAAiBA,YAAcjyB,SAAd,CAA0BiyB,SAA1B,CAAsCra,aAAvD,CACA,KAAKsa,SAAL,CAAiBA,YAAclyB,SAAd,CAA0BkyB,SAA1B,CAAsCta,aAAvD,CAEA,KAAKib,KAAL,CAAa,KAAb,CACA,KAAKF,eAAL,CAAuB,KAAvB,CAEH,CAEDw+D,aAAa1mF,SAAb,CAAyBC,OAAOC,MAAP,CAAeinB,QAAQnnB,SAAvB,CAAzB,CACA0mF,aAAa1mF,SAAb,CAAuBI,WAAvB,CAAqCsmF,YAArC,CACAA,aAAa1mF,SAAb,CAAuB2tE,cAAvB,CAAwC,IAAxC,CAEA;;;OAKA,QAASgZ,kBAAT,CAA4B35D,QAA5B,CAAuC,CAEnCuoB,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA;AAEA,GAAIgyB,UAAW,EAAf,CAEA;AAEA,GAAI/rB,EAAJ,CAAOstB,CAAP,CAAUzlB,CAAV,CAAa49E,CAAb,CAAgBC,EAAhB,CACA,GAAIC,MAAO,CAAE,CAAF,CAAK,CAAL,CAAX,CAAqBC,MAAQ,EAA7B,CAAiChyE,CAAjC,CAAoCoqC,KAApC,CAA2CC,KAA3C,CACA,GAAIxU,IAAJ,CAAS9zC,KAAO,CAAE,GAAF,CAAO,GAAP,CAAY,GAAZ,CAAhB,CACA,GAAIq2C,OAAJ,CAEA;AAEA,GAAKngB,UAAYA,SAASC,UAA1B,CAAuC,CAEnC;AAEA,GAAImf,OAAQpf,SAASof,KAArB,CAEA,IAAMjrC,EAAI,CAAJ,CAAO6H,EAAIojC,MAAM7uC,MAAvB,CAA+B4D,EAAI6H,CAAnC,CAAsC7H,GAAtC,CAA6C,CAEzC,GAAIisC,MAAOhB,MAAOjrC,CAAP,CAAX,CAEA,IAAMstB,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvB0wB,MAAQ/R,KAAMt2C,KAAM23B,CAAN,CAAN,CAAR,CACA2wB,MAAQhS,KAAMt2C,KAAM,CAAE23B,EAAI,CAAN,EAAY,CAAlB,CAAN,CAAR,CACAq4D,KAAM,CAAN,EAAYj0F,KAAK+G,GAAL,CAAUulD,KAAV,CAAiBC,KAAjB,CAAZ,CAAsC;AACtC0nC,KAAM,CAAN,EAAYj0F,KAAK8G,GAAL,CAAUwlD,KAAV,CAAiBC,KAAjB,CAAZ,CAEAxU,IAAMk8C,KAAM,CAAN,EAAY,GAAZ,CAAkBA,KAAM,CAAN,CAAxB,CAEA,GAAKC,MAAOn8C,GAAP,IAAiBr1C,SAAtB,CAAkC,CAE9BwxF,MAAOn8C,GAAP,EAAe,CAAEyI,OAAQyzC,KAAM,CAAN,CAAV,CAAqBxzC,OAAQwzC,KAAM,CAAN,CAA7B,CAAf,CAEH,CAEJ,CAEJ,CAED;AAEA,IAAMl8C,GAAN,GAAam8C,MAAb,CAAqB,CAEjBhyE,EAAIgyE,MAAOn8C,GAAP,CAAJ,CAEAuC,OAASngB,SAASE,QAAT,CAAmBnY,EAAEs+B,MAArB,CAAT,CACAnmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA89C,OAASngB,SAASE,QAAT,CAAmBnY,EAAEu+B,MAArB,CAAT,CACApmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEH,CAEJ,CA3CD,IA2CO,IAAK29B,UAAYA,SAASG,gBAA1B,CAA6C,CAEhD,GAAIj+B,SAAJ,CAAcu+C,OAAd,CAAuBU,MAAvB,CACA,GAAIC,MAAJ,CAAWt5C,KAAX,CAAkBynB,KAAlB,CACA,GAAI82B,OAAJ,CAAYC,MAAZ,CAEAnG,OAAS,GAAI13C,QAAJ,EAAT,CAEA,GAAKu3B,SAAS1kB,KAAT,GAAmB,IAAxB,CAA+B,CAE3B;AAEApZ,SAAW89B,SAASI,UAAT,CAAoBl+B,QAA/B,CACAu+C,QAAUzgB,SAAS1kB,KAAnB,CACA6lC,OAASnhB,SAASmhB,MAAlB,CAEA,GAAKA,OAAO5wC,MAAP,GAAkB,CAAvB,CAA2B,CAEvB4wC,OAAS,CAAE,CAAEr5C,MAAO,CAAT,CAAYynB,MAAOkxB,QAAQlxB,KAA3B,CAAkCuvB,cAAe,CAAjD,CAAF,CAAT,CAEH,CAED;AAEA,IAAM86C,EAAI,CAAJ,CAAOC,GAAK14C,OAAO5wC,MAAzB,CAAiCqpF,EAAIC,EAArC,CAAyC,EAAGD,CAA5C,CAAgD,CAE5Cx4C,MAAQD,OAAQy4C,CAAR,CAAR,CAEA9xF,MAAQs5C,MAAMt5C,KAAd,CACAynB,MAAQ6xB,MAAM7xB,KAAd,CAEA,IAAMpb,EAAIrM,KAAJ,CAAWkU,EAAMlU,MAAQynB,KAA/B,CAAwCpb,EAAI6H,CAA5C,CAA+C7H,GAAK,CAApD,CAAwD,CAEpD,IAAMstB,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvB0wB,MAAQ1R,QAAQj3B,IAAR,CAAcrV,EAAIstB,CAAlB,CAAR,CACA2wB,MAAQ3R,QAAQj3B,IAAR,CAAcrV,EAAI,CAAEstB,EAAI,CAAN,EAAY,CAA9B,CAAR,CACAq4D,KAAM,CAAN,EAAYj0F,KAAK+G,GAAL,CAAUulD,KAAV,CAAiBC,KAAjB,CAAZ,CAAsC;AACtC0nC,KAAM,CAAN,EAAYj0F,KAAK8G,GAAL,CAAUwlD,KAAV,CAAiBC,KAAjB,CAAZ,CAEAxU,IAAMk8C,KAAM,CAAN,EAAY,GAAZ,CAAkBA,KAAM,CAAN,CAAxB,CAEA,GAAKC,MAAOn8C,GAAP,IAAiBr1C,SAAtB,CAAkC,CAE9BwxF,MAAOn8C,GAAP,EAAe,CAAEyI,OAAQyzC,KAAM,CAAN,CAAV,CAAqBxzC,OAAQwzC,KAAM,CAAN,CAA7B,CAAf,CAEH,CAEJ,CAEJ,CAEJ,CAED;AAEA,IAAMl8C,GAAN,GAAam8C,MAAb,CAAqB,CAEjBhyE,EAAIgyE,MAAOn8C,GAAP,CAAJ,CAEAuC,OAAO72B,mBAAP,CAA4BpnB,QAA5B,CAAsC6lB,EAAEs+B,MAAxC,EACAnmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA89C,OAAO72B,mBAAP,CAA4BpnB,QAA5B,CAAsC6lB,EAAEu+B,MAAxC,EACApmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEH,CAEJ,CA5DD,IA4DO,CAEH;AAEAH,SAAW89B,SAASI,UAAT,CAAoBl+B,QAA/B,CAEA,IAAMiS,EAAI,CAAJ,CAAO6H,EAAM9Z,SAASqtB,KAAT,CAAiB,CAApC,CAAyCpb,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnD,IAAMstB,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvB;AACA;AAEA4kB,OAAS,EAAIlyC,CAAJ,CAAQstB,CAAjB,CACA0e,OAAO72B,mBAAP,CAA4BpnB,QAA5B,CAAsCmkD,MAAtC,EACAnmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEAikD,OAAS,EAAInyC,CAAJ,CAAU,CAAEstB,EAAI,CAAN,EAAY,CAA/B,CACA0e,OAAO72B,mBAAP,CAA4BpnB,QAA5B,CAAsCokD,MAAtC,EACApmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEH,CAEJ,CAEJ,CAEJ,CAED;AAEA,KAAKumD,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EAEH,CAEDy5D,kBAAkB3mF,SAAlB,CAA8BC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAA9B,CACA2mF,kBAAkB3mF,SAAlB,CAA4BI,WAA5B,CAA0CumF,iBAA1C,CAEA;;;;;;OAQA;AAEA,QAASK,mBAAT,CAA6BC,IAA7B,CAAmCC,MAAnC,CAA2CC,MAA3C,CAAoD,CAEhDj7C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd48C,KAAMA,IADQ,CAEdC,OAAQA,MAFM,CAGdC,OAAQA,MAHM,CAAlB,CAMA,KAAK35C,kBAAL,CAAyB,GAAI45C,yBAAJ,CAA8BH,IAA9B,CAAoCC,MAApC,CAA4CC,MAA5C,CAAzB,EACA,KAAK12C,aAAL,GAEH,CAEDu2C,mBAAmBhnF,SAAnB,CAA+BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA/B,CACAgnF,mBAAmBhnF,SAAnB,CAA6BI,WAA7B,CAA2C4mF,kBAA3C,CAEA;AAEA,QAASI,yBAAT,CAAmCH,IAAnC,CAAyCC,MAAzC,CAAiDC,MAAjD,CAA0D,CAEtD5xC,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,0BAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd48C,KAAMA,IADQ,CAEdC,OAAQA,MAFM,CAGdC,OAAQA,MAHM,CAAlB,CAMA;AAEA,GAAI15C,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA,GAAIvzC,KAAM,OAAV,CAEA,GAAIyrB,QAAS,GAAIrwB,QAAJ,EAAb,CAEA,GAAIiR,IAAK,GAAIjR,QAAJ,EAAT,CAAwBkR,GAAK,GAAIlR,QAAJ,EAA7B,CACA,GAAI4xF,IAAK,GAAI5xF,QAAJ,EAAT,CAAwB6xF,GAAK,GAAI7xF,QAAJ,EAA7B,CAEA,GAAI0L,EAAJ,CAAOstB,CAAP,CAEA,GAAKw4D,KAAK1pF,MAAL,CAAc,CAAnB,CAAuB,CAEnBzJ,QAAQ+iB,KAAR,CAAe,kFAAf,EAEH,CAED;AAEA,GAAI0wE,YAAaL,OAAS,CAA1B,CAEA,IAAM/lF,EAAI,CAAV,CAAaA,GAAKgmF,MAAlB,CAA0BhmF,GAA1B,CAAiC,CAE7B,GAAIzE,GAAIyE,EAAIgmF,MAAZ,CAEA,IAAM14D,EAAI,CAAV,CAAaA,GAAKy4D,MAAlB,CAA0Bz4D,GAA1B,CAAiC,CAE7B,GAAIsM,GAAItM,EAAIy4D,MAAZ,CAEA;AAEAD,KAAMlsD,CAAN,CAASr+B,CAAT,CAAYgK,EAAZ,EACAwmB,SAASl7B,IAAT,CAAe0U,GAAGvX,CAAlB,CAAqBuX,GAAGtX,CAAxB,CAA2BsX,GAAGrX,CAA9B,EAEA;AAEA;AAEA,GAAK0rC,EAAI1gC,GAAJ,EAAW,CAAhB,CAAoB,CAEhB4sF,KAAMlsD,EAAI1gC,GAAV,CAAeqC,CAAf,CAAkBiK,EAAlB,EACA0gF,GAAG5oF,UAAH,CAAeiI,EAAf,CAAmBC,EAAnB,EAEH,CALD,IAKO,CAEHsgF,KAAMlsD,EAAI1gC,GAAV,CAAeqC,CAAf,CAAkBiK,EAAlB,EACA0gF,GAAG5oF,UAAH,CAAekI,EAAf,CAAmBD,EAAnB,EAEH,CAED,GAAKhK,EAAIrC,GAAJ,EAAW,CAAhB,CAAoB,CAEhB4sF,KAAMlsD,CAAN,CAASr+B,EAAIrC,GAAb,CAAkBsM,EAAlB,EACA2gF,GAAG7oF,UAAH,CAAeiI,EAAf,CAAmBC,EAAnB,EAEH,CALD,IAKO,CAEHsgF,KAAMlsD,CAAN,CAASr+B,EAAIrC,GAAb,CAAkBsM,EAAlB,EACA2gF,GAAG7oF,UAAH,CAAekI,EAAf,CAAmBD,EAAnB,EAEH,CAED;AAEAof,OAAO3L,YAAP,CAAqBktE,EAArB,CAAyBC,EAAzB,EAA8B3xE,SAA9B,GACAg4B,QAAQ37C,IAAR,CAAc8zB,OAAO32B,CAArB,CAAwB22B,OAAO12B,CAA/B,CAAkC02B,OAAOz2B,CAAzC,EAEA;AAEAu+C,IAAI57C,IAAJ,CAAU+oC,CAAV,CAAar+B,CAAb,EAEH,CAEJ,CAED;AAEA,IAAMyE,EAAI,CAAV,CAAaA,EAAIgmF,MAAjB,CAAyBhmF,GAAzB,CAAgC,CAE5B,IAAMstB,EAAI,CAAV,CAAaA,EAAIy4D,MAAjB,CAAyBz4D,GAAzB,CAAgC,CAE5B,GAAI1nB,GAAI5F,EAAIomF,UAAJ,CAAiB94D,CAAzB,CACA,GAAIroB,GAAIjF,EAAIomF,UAAJ,CAAiB94D,CAAjB,CAAqB,CAA7B,CACA,GAAI9X,GAAI,CAAExV,EAAI,CAAN,EAAYomF,UAAZ,CAAyB94D,CAAzB,CAA6B,CAArC,CACA,GAAI1V,GAAI,CAAE5X,EAAI,CAAN,EAAYomF,UAAZ,CAAyB94D,CAAjC,CAEA;AAEAgf,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEH,CAEJ,CAED;AAEA,KAAK48B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEH,CAEDw5C,yBAAyBpnF,SAAzB,CAAqCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAArC,CACAonF,yBAAyBpnF,SAAzB,CAAmCI,WAAnC,CAAiDgnF,wBAAjD,CAEA;;;;;OAOA;AAEA,QAASI,mBAAT,CAA6Bt6D,QAA7B,CAAuCugB,OAAvC,CAAgD3zC,MAAhD,CAAwD2tF,MAAxD,CAAiE,CAE7Dv7C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdnd,SAAUA,QADI,CAEdugB,QAASA,OAFK,CAGd3zC,OAAQA,MAHM,CAId2tF,OAAQA,MAJM,CAAlB,CAOA,KAAKj6C,kBAAL,CAAyB,GAAIk6C,yBAAJ,CAA8Bx6D,QAA9B,CAAwCugB,OAAxC,CAAiD3zC,MAAjD,CAAyD2tF,MAAzD,CAAzB,EACA,KAAKh3C,aAAL,GAEH,CAED+2C,mBAAmBxnF,SAAnB,CAA+BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA/B,CACAwnF,mBAAmBxnF,SAAnB,CAA6BI,WAA7B,CAA2ConF,kBAA3C,CAEA;AAEA,QAASE,yBAAT,CAAmCx6D,QAAnC,CAA6CugB,OAA7C,CAAsD3zC,MAAtD,CAA8D2tF,MAA9D,CAAuE,CAEnElyC,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,0BAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdnd,SAAUA,QADI,CAEdugB,QAASA,OAFK,CAGd3zC,OAAQA,MAHM,CAId2tF,OAAQA,MAJM,CAAlB,CAOA3tF,OAASA,QAAU,CAAnB,CACA2tF,OAASA,QAAU,CAAnB,CAEA;AAEA,GAAIlnB,cAAe,EAAnB,CACA,GAAIonB,UAAW,EAAf,CAEA;AAEAC,UAAWH,MAAX,EAEA;AAEAI,aAAc/tF,MAAd,EAEA;AAEAguF,cAEA;AAEA,KAAKlyC,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4B+rB,YAA5B,CAA0C,CAA1C,CAA/B,EACA,KAAK3qB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B+rB,aAAax3D,KAAb,EAA5B,CAAkD,CAAlD,CAA7B,EACA,KAAK6sC,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4BmzC,QAA5B,CAAsC,CAAtC,CAAzB,EAEA,GAAKF,SAAW,CAAhB,CAAoB,CAEhB,KAAK74C,oBAAL,GAA6B;AAEhC,CAJD,IAIO,CAEH,KAAKkI,gBAAL,GAAyB;AAE5B,CAED;AAEA,QAAS8wC,UAAT,CAAoBH,MAApB,CAA6B,CAEzB,GAAI1gF,GAAI,GAAItR,QAAJ,EAAR,CACA,GAAI2Q,GAAI,GAAI3Q,QAAJ,EAAR,CACA,GAAIkhB,GAAI,GAAIlhB,QAAJ,EAAR,CAEA;AAEA,IAAM,GAAI0L,GAAI,CAAd,CAAiBA,EAAIssC,QAAQlwC,MAA7B,CAAqC4D,GAAK,CAA1C,CAA8C,CAE1C;AAEA4mF,iBAAkBt6C,QAAStsC,EAAI,CAAb,CAAlB,CAAoC4F,CAApC,EACAghF,iBAAkBt6C,QAAStsC,EAAI,CAAb,CAAlB,CAAoCiF,CAApC,EACA2hF,iBAAkBt6C,QAAStsC,EAAI,CAAb,CAAlB,CAAoCwV,CAApC,EAEA;AAEAqxE,cAAejhF,CAAf,CAAkBX,CAAlB,CAAqBuQ,CAArB,CAAwB8wE,MAAxB,EAEH,CAEJ,CAED,QAASO,cAAT,CAAwBjhF,CAAxB,CAA2BX,CAA3B,CAA8BuQ,CAA9B,CAAiC8wE,MAAjC,CAA0C,CAEtC,GAAIQ,MAAOp1F,KAAKyJ,GAAL,CAAU,CAAV,CAAamrF,MAAb,CAAX,CAEA;AAEA,GAAI/qF,GAAI,EAAR,CAEA,GAAIyE,EAAJ,CAAOstB,CAAP,CAEA;AAEA,IAAMttB,EAAI,CAAV,CAAaA,GAAK8mF,IAAlB,CAAwB9mF,GAAxB,CAA+B,CAE3BzE,EAAGyE,CAAH,EAAS,EAAT,CAEA,GAAI+mF,IAAKnhF,EAAE9U,KAAF,GAAU2gB,IAAV,CAAgB+D,CAAhB,CAAmBxV,EAAI8mF,IAAvB,CAAT,CACA,GAAIE,IAAK/hF,EAAEnU,KAAF,GAAU2gB,IAAV,CAAgB+D,CAAhB,CAAmBxV,EAAI8mF,IAAvB,CAAT,CAEA,GAAIG,MAAOH,KAAO9mF,CAAlB,CAEA,IAAMstB,EAAI,CAAV,CAAaA,GAAK25D,IAAlB,CAAwB35D,GAAxB,CAA+B,CAE3B,GAAKA,IAAM,CAAN,EAAWttB,IAAM8mF,IAAtB,CAA6B,CAEzBvrF,EAAGyE,CAAH,EAAQstB,CAAR,EAAcy5D,EAAd,CAEH,CAJD,IAIO,CAEHxrF,EAAGyE,CAAH,EAAQstB,CAAR,EAAcy5D,GAAGj2F,KAAH,GAAW2gB,IAAX,CAAiBu1E,EAAjB,CAAqB15D,EAAI25D,IAAzB,CAAd,CAEH,CAEJ,CAEJ,CAED;AAEA,IAAMjnF,EAAI,CAAV,CAAaA,EAAI8mF,IAAjB,CAAuB9mF,GAAvB,CAA8B,CAE1B,IAAMstB,EAAI,CAAV,CAAaA,EAAI,GAAMw5D,KAAO9mF,CAAb,EAAmB,CAApC,CAAuCstB,GAAvC,CAA8C,CAE1C,GAAI1pB,GAAIlS,KAAKmT,KAAL,CAAYyoB,EAAI,CAAhB,CAAR,CAEA,GAAKA,EAAI,CAAJ,GAAU,CAAf,CAAmB,CAEf45D,WAAY3rF,EAAGyE,CAAH,EAAQ4D,EAAI,CAAZ,CAAZ,EACAsjF,WAAY3rF,EAAGyE,EAAI,CAAP,EAAY4D,CAAZ,CAAZ,EACAsjF,WAAY3rF,EAAGyE,CAAH,EAAQ4D,CAAR,CAAZ,EAEH,CAND,IAMO,CAEHsjF,WAAY3rF,EAAGyE,CAAH,EAAQ4D,EAAI,CAAZ,CAAZ,EACAsjF,WAAY3rF,EAAGyE,EAAI,CAAP,EAAY4D,EAAI,CAAhB,CAAZ,EACAsjF,WAAY3rF,EAAGyE,EAAI,CAAP,EAAY4D,CAAZ,CAAZ,EAEH,CAEJ,CAEJ,CAEJ,CAED,QAAS8iF,aAAT,CAAuB/tF,MAAvB,CAAgC,CAE5B,GAAIqzC,QAAS,GAAI13C,QAAJ,EAAb,CAEA;AAEA,IAAM,GAAI0L,GAAI,CAAd,CAAiBA,EAAIo/D,aAAahjE,MAAlC,CAA0C4D,GAAK,CAA/C,CAAmD,CAE/CgsC,OAAOh+C,CAAP,CAAWoxE,aAAcp/D,EAAI,CAAlB,CAAX,CACAgsC,OAAO/9C,CAAP,CAAWmxE,aAAcp/D,EAAI,CAAlB,CAAX,CACAgsC,OAAO99C,CAAP,CAAWkxE,aAAcp/D,EAAI,CAAlB,CAAX,CAEAgsC,OAAOx3B,SAAP,GAAmB7Y,cAAnB,CAAmChD,MAAnC,EAEAymE,aAAcp/D,EAAI,CAAlB,EAAwBgsC,OAAOh+C,CAA/B,CACAoxE,aAAcp/D,EAAI,CAAlB,EAAwBgsC,OAAO/9C,CAA/B,CACAmxE,aAAcp/D,EAAI,CAAlB,EAAwBgsC,OAAO99C,CAA/B,CAEH,CAEJ,CAED,QAASy4F,YAAT,EAAuB,CAEnB,GAAI36C,QAAS,GAAI13C,QAAJ,EAAb,CAEA,IAAM,GAAI0L,GAAI,CAAd,CAAiBA,EAAIo/D,aAAahjE,MAAlC,CAA0C4D,GAAK,CAA/C,CAAmD,CAE/CgsC,OAAOh+C,CAAP,CAAWoxE,aAAcp/D,EAAI,CAAlB,CAAX,CACAgsC,OAAO/9C,CAAP,CAAWmxE,aAAcp/D,EAAI,CAAlB,CAAX,CACAgsC,OAAO99C,CAAP,CAAWkxE,aAAcp/D,EAAI,CAAlB,CAAX,CAEA,GAAI45B,GAAIutD,QAASn7C,MAAT,EAAoB,CAApB,CAAwBt6C,KAAKC,EAA7B,CAAkC,GAA1C,CACA,GAAI4J,GAAI6rF,YAAap7C,MAAb,EAAwBt6C,KAAKC,EAA7B,CAAkC,GAA1C,CACA60F,SAAS31F,IAAT,CAAe+oC,CAAf,CAAkB,EAAIr+B,CAAtB,EAEH,CAED8rF,aAEAC,cAEH,CAED,QAASA,YAAT,EAAuB,CAEnB;AAEA,IAAM,GAAItnF,GAAI,CAAd,CAAiBA,EAAIwmF,SAASpqF,MAA9B,CAAsC4D,GAAK,CAA3C,CAA+C,CAE3C;AAEA,GAAI2f,IAAK6mE,SAAUxmF,EAAI,CAAd,CAAT,CACA,GAAI+f,IAAKymE,SAAUxmF,EAAI,CAAd,CAAT,CACA,GAAIsd,IAAKkpE,SAAUxmF,EAAI,CAAd,CAAT,CAEA,GAAIxH,KAAM9G,KAAK8G,GAAL,CAAUmnB,EAAV,CAAcI,EAAd,CAAkBzC,EAAlB,CAAV,CACA,GAAI7kB,KAAM/G,KAAK+G,GAAL,CAAUknB,EAAV,CAAcI,EAAd,CAAkBzC,EAAlB,CAAV,CAEA;AAEA,GAAK9kB,IAAM,GAAN,EAAaC,IAAM,GAAxB,CAA8B,CAE1B,GAAKknB,GAAK,GAAV,CAAgB6mE,SAAUxmF,EAAI,CAAd,GAAqB,CAArB,CAChB,GAAK+f,GAAK,GAAV,CAAgBymE,SAAUxmF,EAAI,CAAd,GAAqB,CAArB,CAChB,GAAKsd,GAAK,GAAV,CAAgBkpE,SAAUxmF,EAAI,CAAd,GAAqB,CAArB,CAEnB,CAEJ,CAEJ,CAED,QAASknF,WAAT,CAAqBl7C,MAArB,CAA8B,CAE1BozB,aAAavuE,IAAb,CAAmBm7C,OAAOh+C,CAA1B,CAA6Bg+C,OAAO/9C,CAApC,CAAuC+9C,OAAO99C,CAA9C,EAEH,CAED,QAAS04F,iBAAT,CAA2Bz/E,KAA3B,CAAkC6kC,MAAlC,CAA2C,CAEvC,GAAIowC,QAASj1E,MAAQ,CAArB,CAEA6kC,OAAOh+C,CAAP,CAAW+9B,SAAUqwD,OAAS,CAAnB,CAAX,CACApwC,OAAO/9C,CAAP,CAAW89B,SAAUqwD,OAAS,CAAnB,CAAX,CACApwC,OAAO99C,CAAP,CAAW69B,SAAUqwD,OAAS,CAAnB,CAAX,CAEH,CAED,QAASiL,WAAT,EAAsB,CAElB,GAAIzhF,GAAI,GAAItR,QAAJ,EAAR,CACA,GAAI2Q,GAAI,GAAI3Q,QAAJ,EAAR,CACA,GAAIkhB,GAAI,GAAIlhB,QAAJ,EAAR,CAEA,GAAIizF,UAAW,GAAIjzF,QAAJ,EAAf,CAEA,GAAIwsD,KAAM,GAAIrmD,QAAJ,EAAV,CACA,GAAIsmD,KAAM,GAAItmD,QAAJ,EAAV,CACA,GAAIumD,KAAM,GAAIvmD,QAAJ,EAAV,CAEA,IAAM,GAAIuF,GAAI,CAAR,CAAWstB,EAAI,CAArB,CAAwBttB,EAAIo/D,aAAahjE,MAAzC,CAAiD4D,GAAK,CAAL,CAAQstB,GAAK,CAA9D,CAAkE,CAE9D1nB,EAAE/W,GAAF,CAAOuwE,aAAcp/D,EAAI,CAAlB,CAAP,CAA8Bo/D,aAAcp/D,EAAI,CAAlB,CAA9B,CAAqDo/D,aAAcp/D,EAAI,CAAlB,CAArD,EACAiF,EAAEpW,GAAF,CAAOuwE,aAAcp/D,EAAI,CAAlB,CAAP,CAA8Bo/D,aAAcp/D,EAAI,CAAlB,CAA9B,CAAqDo/D,aAAcp/D,EAAI,CAAlB,CAArD,EACAwV,EAAE3mB,GAAF,CAAOuwE,aAAcp/D,EAAI,CAAlB,CAAP,CAA8Bo/D,aAAcp/D,EAAI,CAAlB,CAA9B,CAAqDo/D,aAAcp/D,EAAI,CAAlB,CAArD,EAEA8gD,IAAIjyD,GAAJ,CAAS23F,SAAUl5D,EAAI,CAAd,CAAT,CAA4Bk5D,SAAUl5D,EAAI,CAAd,CAA5B,EACAyzB,IAAIlyD,GAAJ,CAAS23F,SAAUl5D,EAAI,CAAd,CAAT,CAA4Bk5D,SAAUl5D,EAAI,CAAd,CAA5B,EACA0zB,IAAInyD,GAAJ,CAAS23F,SAAUl5D,EAAI,CAAd,CAAT,CAA4Bk5D,SAAUl5D,EAAI,CAAd,CAA5B,EAEAi6D,SAAStwF,IAAT,CAAe2O,CAAf,EAAmBpW,GAAnB,CAAwByV,CAAxB,EAA4BzV,GAA5B,CAAiCgmB,CAAjC,EAAqC9B,YAArC,CAAmD,CAAnD,EAEA,GAAI8zE,KAAML,QAASI,QAAT,CAAV,CAEAE,UAAW3mC,GAAX,CAAgBxzB,EAAI,CAApB,CAAuB1nB,CAAvB,CAA0B4hF,GAA1B,EACAC,UAAW1mC,GAAX,CAAgBzzB,EAAI,CAApB,CAAuBroB,CAAvB,CAA0BuiF,GAA1B,EACAC,UAAWzmC,GAAX,CAAgB1zB,EAAI,CAApB,CAAuB9X,CAAvB,CAA0BgyE,GAA1B,EAEH,CAEJ,CAED,QAASC,UAAT,CAAoBl/D,EAApB,CAAwB6zD,MAAxB,CAAgC99D,MAAhC,CAAwC6oE,OAAxC,CAAkD,CAE9C,GAAOA,QAAU,CAAZ,EAAqB5+D,GAAGv6B,CAAH,GAAS,CAAnC,CAAyC,CAErCw4F,SAAUpK,MAAV,EAAqB7zD,GAAGv6B,CAAH,CAAO,CAA5B,CAEH,CAED,GAAOswB,OAAOtwB,CAAP,GAAa,CAAf,EAAwBswB,OAAOpwB,CAAP,GAAa,CAA1C,CAAgD,CAE5Cs4F,SAAUpK,MAAV,EAAqB+K,QAAU,CAAV,CAAcz1F,KAAKC,EAAnB,CAAwB,GAA7C,CAEH,CAEJ,CAED;AAEA,QAASw1F,QAAT,CAAkB7oE,MAAlB,CAA2B,CAEvB,MAAO5sB,MAAK+iB,KAAL,CAAY6J,OAAOpwB,CAAnB,CAAsB,CAAEowB,OAAOtwB,CAA/B,CAAP,CAEH,CAGD;AAEA,QAASo5F,YAAT,CAAsB9oE,MAAtB,CAA+B,CAE3B,MAAO5sB,MAAK+iB,KAAL,CAAY,CAAE6J,OAAOrwB,CAArB,CAAwByD,KAAK0M,IAAL,CAAakgB,OAAOtwB,CAAP,CAAWswB,OAAOtwB,CAApB,CAA4BswB,OAAOpwB,CAAP,CAAWowB,OAAOpwB,CAAzD,CAAxB,CAAP,CAEH,CAEJ,CAEDq4F,yBAAyB1nF,SAAzB,CAAqCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAArC,CACA0nF,yBAAyB1nF,SAAzB,CAAmCI,WAAnC,CAAiDsnF,wBAAjD,CAEA;;;OAKA;AAEA,QAASmB,oBAAT,CAA8B/uF,MAA9B,CAAsC2tF,MAAtC,CAA+C,CAE3Cv7C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,qBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKA,KAAKj6C,kBAAL,CAAyB,GAAIs7C,0BAAJ,CAA+BhvF,MAA/B,CAAuC2tF,MAAvC,CAAzB,EACA,KAAKh3C,aAAL,GAEH,CAEDo4C,oBAAoB7oF,SAApB,CAAgCC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAAhC,CACA6oF,oBAAoB7oF,SAApB,CAA8BI,WAA9B,CAA4CyoF,mBAA5C,CAEA;AAEA,QAASC,0BAAT,CAAoChvF,MAApC,CAA4C2tF,MAA5C,CAAqD,CAEjD,GAAIv6D,UAAW,CACX,CADW,CACR,CADQ,CACL,CADK,CACD,CAAE,CADD,CACI,CAAE,CADN,CACS,CADT,CACa,CAAE,CADf,CACkB,CADlB,CACqB,CAAE,CADvB,CAC2B,CAD3B,CAC8B,CAAE,CADhC,CACmC,CAAE,CADrC,CAAf,CAIA,GAAIugB,SAAU,CACV,CADU,CACP,CADO,CACJ,CADI,CACA,CADA,CACG,CADH,CACM,CADN,CACS,CADT,CACY,CADZ,CACe,CADf,CACkB,CADlB,CACqB,CADrB,CACwB,CADxB,CAAd,CAIAi6C,yBAAyBhkF,IAAzB,CAA+B,IAA/B,CAAqCwpB,QAArC,CAA+CugB,OAA/C,CAAwD3zC,MAAxD,CAAgE2tF,MAAhE,EAEA,KAAKvsF,IAAL,CAAY,2BAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKH,CAEDqB,0BAA0B9oF,SAA1B,CAAsCC,OAAOC,MAAP,CAAewnF,yBAAyB1nF,SAAxC,CAAtC,CACA8oF,0BAA0B9oF,SAA1B,CAAoCI,WAApC,CAAkD0oF,yBAAlD,CAEA;;;OAKA;AAEA,QAASC,mBAAT,CAA6BjvF,MAA7B,CAAqC2tF,MAArC,CAA8C,CAE1Cv7C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKA,KAAKj6C,kBAAL,CAAyB,GAAIw7C,yBAAJ,CAA8BlvF,MAA9B,CAAsC2tF,MAAtC,CAAzB,EACA,KAAKh3C,aAAL,GAEH,CAEDs4C,mBAAmB/oF,SAAnB,CAA+BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA/B,CACA+oF,mBAAmB/oF,SAAnB,CAA6BI,WAA7B,CAA2C2oF,kBAA3C,CAEA;AAEA,QAASC,yBAAT,CAAmClvF,MAAnC,CAA2C2tF,MAA3C,CAAoD,CAEhD,GAAIv6D,UAAW,CACX,CADW,CACR,CADQ,CACL,CADK,CACD,CAAE,CADD,CACI,CADJ,CACO,CADP,CACU,CADV,CACa,CADb,CACgB,CADhB,CAEX,CAFW,CAER,CAAE,CAFM,CAEH,CAFG,CAEC,CAFD,CAEI,CAFJ,CAEO,CAFP,CAEU,CAFV,CAEa,CAFb,CAEgB,CAAE,CAFlB,CAAf,CAKA,GAAIugB,SAAU,CACV,CADU,CACP,CADO,CACJ,CADI,CACD,CADC,CACE,CADF,CACK,CADL,CACQ,CADR,CACW,CADX,CACc,CADd,CAEV,CAFU,CAEP,CAFO,CAEJ,CAFI,CAED,CAFC,CAEE,CAFF,CAEK,CAFL,CAEQ,CAFR,CAEW,CAFX,CAEc,CAFd,CAGV,CAHU,CAGP,CAHO,CAGJ,CAHI,CAGD,CAHC,CAGE,CAHF,CAGK,CAHL,CAAd,CAMAi6C,yBAAyBhkF,IAAzB,CAA+B,IAA/B,CAAqCwpB,QAArC,CAA+CugB,OAA/C,CAAwD3zC,MAAxD,CAAgE2tF,MAAhE,EAEA,KAAKvsF,IAAL,CAAY,0BAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKH,CAEDuB,yBAAyBhpF,SAAzB,CAAqCC,OAAOC,MAAP,CAAewnF,yBAAyB1nF,SAAxC,CAArC,CACAgpF,yBAAyBhpF,SAAzB,CAAmCI,WAAnC,CAAiD4oF,wBAAjD,CAEA;;;OAKA;AAEA,QAASC,oBAAT,CAA8BnvF,MAA9B,CAAsC2tF,MAAtC,CAA+C,CAE3Cv7C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,qBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKA,KAAKj6C,kBAAL,CAAyB,GAAI07C,0BAAJ,CAA+BpvF,MAA/B,CAAuC2tF,MAAvC,CAAzB,EACA,KAAKh3C,aAAL,GAEH,CAEDw4C,oBAAoBjpF,SAApB,CAAgCC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAAhC,CACAipF,oBAAoBjpF,SAApB,CAA8BI,WAA9B,CAA4C6oF,mBAA5C,CAEA;AAEA,QAASC,0BAAT,CAAoCpvF,MAApC,CAA4C2tF,MAA5C,CAAqD,CAEjD,GAAI7gF,GAAI,CAAE,EAAI/T,KAAK0M,IAAL,CAAW,CAAX,CAAN,EAAyB,CAAjC,CAEA,GAAI2tB,UAAW,CACX,CAAE,CADS,CACNtmB,CADM,CACH,CADG,CACC,CADD,CACIA,CADJ,CACO,CADP,CACW,CAAE,CADb,CACgB,CAAEA,CADlB,CACqB,CADrB,CACyB,CADzB,CAC4B,CAAEA,CAD9B,CACiC,CADjC,CAEX,CAFW,CAER,CAAE,CAFM,CAEHA,CAFG,CAEC,CAFD,CAEI,CAFJ,CAEOA,CAFP,CAEU,CAFV,CAEa,CAAE,CAFf,CAEkB,CAAEA,CAFpB,CAEwB,CAFxB,CAE2B,CAF3B,CAE8B,CAAEA,CAFhC,CAGXA,CAHW,CAGR,CAHQ,CAGL,CAAE,CAHG,CAGCA,CAHD,CAGI,CAHJ,CAGO,CAHP,CAGW,CAAEA,CAHb,CAGgB,CAHhB,CAGmB,CAAE,CAHrB,CAGyB,CAAEA,CAH3B,CAG8B,CAH9B,CAGiC,CAHjC,CAAf,CAMA,GAAI6mC,SAAU,CACV,CADU,CACP,EADO,CACH,CADG,CACC,CADD,CACI,CADJ,CACO,CADP,CACW,CADX,CACc,CADd,CACiB,CADjB,CACqB,CADrB,CACwB,CADxB,CAC2B,EAD3B,CACgC,CADhC,CACmC,EADnC,CACuC,EADvC,CAEV,CAFU,CAEP,CAFO,CAEJ,CAFI,CAEA,CAFA,CAEG,EAFH,CAEO,CAFP,CAEU,EAFV,CAEc,EAFd,CAEkB,CAFlB,CAEqB,EAFrB,CAEyB,CAFzB,CAE4B,CAF5B,CAE+B,CAF/B,CAEkC,CAFlC,CAEqC,CAFrC,CAGV,CAHU,CAGP,CAHO,CAGJ,CAHI,CAGA,CAHA,CAGG,CAHH,CAGM,CAHN,CAGS,CAHT,CAGY,CAHZ,CAGe,CAHf,CAGkB,CAHlB,CAGqB,CAHrB,CAGwB,CAHxB,CAG2B,CAH3B,CAG8B,CAH9B,CAGiC,CAHjC,CAIV,CAJU,CAIP,CAJO,CAIJ,CAJI,CAIA,CAJA,CAIG,CAJH,CAIM,EAJN,CAIU,CAJV,CAIa,CAJb,CAIgB,EAJhB,CAIoB,CAJpB,CAIuB,CAJvB,CAI0B,CAJ1B,CAI6B,CAJ7B,CAIgC,CAJhC,CAImC,CAJnC,CAAd,CAOAi6C,yBAAyBhkF,IAAzB,CAA+B,IAA/B,CAAqCwpB,QAArC,CAA+CugB,OAA/C,CAAwD3zC,MAAxD,CAAgE2tF,MAAhE,EAEA,KAAKvsF,IAAL,CAAY,2BAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKH,CAEDyB,0BAA0BlpF,SAA1B,CAAsCC,OAAOC,MAAP,CAAewnF,yBAAyB1nF,SAAxC,CAAtC,CACAkpF,0BAA0BlpF,SAA1B,CAAoCI,WAApC,CAAkD8oF,yBAAlD,CAEA;;;OAKA;AAEA,QAASC,qBAAT,CAA+BrvF,MAA/B,CAAuC2tF,MAAvC,CAAgD,CAE5Cv7C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,sBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKA,KAAKj6C,kBAAL,CAAyB,GAAI47C,2BAAJ,CAAgCtvF,MAAhC,CAAwC2tF,MAAxC,CAAzB,EACA,KAAKh3C,aAAL,GAEH,CAED04C,qBAAqBnpF,SAArB,CAAiCC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAAjC,CACAmpF,qBAAqBnpF,SAArB,CAA+BI,WAA/B,CAA6C+oF,oBAA7C,CAEA;AAEA,QAASC,2BAAT,CAAqCtvF,MAArC,CAA6C2tF,MAA7C,CAAsD,CAElD,GAAI7gF,GAAI,CAAE,EAAI/T,KAAK0M,IAAL,CAAW,CAAX,CAAN,EAAyB,CAAjC,CACA,GAAIujB,GAAI,EAAIlc,CAAZ,CAEA,GAAIsmB,UAAW,CAEX;AACA,CAAE,CAHS,CAGN,CAAE,CAHI,CAGD,CAAE,CAHD,CAGI,CAAE,CAHN,CAGS,CAAE,CAHX,CAGc,CAHd,CAIX,CAAE,CAJS,CAIN,CAJM,CAIH,CAAE,CAJC,CAIE,CAAE,CAJJ,CAIO,CAJP,CAIU,CAJV,CAKX,CALW,CAKR,CAAE,CALM,CAKH,CAAE,CALC,CAKE,CALF,CAKK,CAAE,CALP,CAKU,CALV,CAMX,CANW,CAMR,CANQ,CAML,CAAE,CANG,CAMA,CANA,CAMG,CANH,CAMM,CANN,CAQX;AACA,CATW,CASR,CAAEpK,CATM,CASH,CAAElc,CATC,CASE,CATF,CASK,CAAEkc,CATP,CASUlc,CATV,CAUX,CAVW,CAURkc,CAVQ,CAUL,CAAElc,CAVG,CAUA,CAVA,CAUGkc,CAVH,CAUMlc,CAVN,CAYX;AACA,CAAEkc,CAbS,CAaN,CAAElc,CAbI,CAaD,CAbC,CAaE,CAAEkc,CAbJ,CAaOlc,CAbP,CAaU,CAbV,CAcXkc,CAdW,CAcR,CAAElc,CAdM,CAcH,CAdG,CAcAkc,CAdA,CAcGlc,CAdH,CAcM,CAdN,CAgBX;AACA,CAAEA,CAjBS,CAiBN,CAjBM,CAiBH,CAAEkc,CAjBC,CAiBElc,CAjBF,CAiBK,CAjBL,CAiBQ,CAAEkc,CAjBV,CAkBX,CAAElc,CAlBS,CAkBN,CAlBM,CAkBHkc,CAlBG,CAkBAlc,CAlBA,CAkBG,CAlBH,CAkBMkc,CAlBN,CAAf,CAqBA,GAAI2qB,SAAU,CACV,CADU,CACP,EADO,CACH,CADG,CACC,CADD,CACI,CADJ,CACO,EADP,CACY,CADZ,CACe,EADf,CACmB,EADnB,CAEV,CAFU,CAEP,EAFO,CAEH,EAFG,CAEE,CAFF,CAEK,EAFL,CAES,CAFT,CAEa,CAFb,CAEgB,CAFhB,CAEmB,EAFnB,CAGV,EAHU,CAGN,CAHM,CAGH,CAHG,CAGC,EAHD,CAGK,CAHL,CAGQ,EAHR,CAGa,EAHb,CAGiB,EAHjB,CAGqB,CAHrB,CAIV,CAJU,CAIP,CAJO,CAIJ,EAJI,CAIC,CAJD,CAII,EAJJ,CAIQ,CAJR,CAIY,CAJZ,CAIe,CAJf,CAIkB,EAJlB,CAKV,CALU,CAKP,EALO,CAKH,CALG,CAKC,CALD,CAKI,CALJ,CAKO,EALP,CAKY,CALZ,CAKe,EALf,CAKmB,EALnB,CAMV,CANU,CAMP,EANO,CAMH,CANG,CAMC,CAND,CAMI,CANJ,CAMO,EANP,CAMY,CANZ,CAMe,EANf,CAMmB,EANnB,CAOV,CAPU,CAOP,EAPO,CAOH,EAPG,CAOE,CAPF,CAOK,EAPL,CAOS,CAPT,CAOa,CAPb,CAOgB,CAPhB,CAOmB,EAPnB,CAQV,EARU,CAQN,CARM,CAQH,CARG,CAQC,EARD,CAQK,CARL,CAQQ,EARR,CAQa,EARb,CAQiB,EARjB,CAQqB,CARrB,CASV,CATU,CASP,EATO,CASH,EATG,CASE,CATF,CASK,EATL,CASS,CATT,CASa,CATb,CASgB,CAThB,CASmB,CATnB,CAUV,EAVU,CAUN,CAVM,CAUH,CAVG,CAUC,EAVD,CAUK,CAVL,CAUQ,EAVR,CAUa,EAVb,CAUiB,EAVjB,CAUqB,CAVrB,CAWV,EAXU,CAWN,CAXM,CAWH,EAXG,CAWE,EAXF,CAWM,EAXN,CAWU,CAXV,CAWc,EAXd,CAWkB,CAXlB,CAWqB,EAXrB,CAYV,CAZU,CAYP,EAZO,CAYH,EAZG,CAYE,CAZF,CAYK,EAZL,CAYS,CAZT,CAYa,CAZb,CAYgB,CAZhB,CAYmB,CAZnB,CAAd,CAeAi6C,yBAAyBhkF,IAAzB,CAA+B,IAA/B,CAAqCwpB,QAArC,CAA+CugB,OAA/C,CAAwD3zC,MAAxD,CAAgE2tF,MAAhE,EAEA,KAAKvsF,IAAL,CAAY,4BAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd2tF,OAAQA,MAFM,CAAlB,CAKH,CAED2B,2BAA2BppF,SAA3B,CAAuCC,OAAOC,MAAP,CAAewnF,yBAAyB1nF,SAAxC,CAAvC,CACAopF,2BAA2BppF,SAA3B,CAAqCI,WAArC,CAAmDgpF,0BAAnD,CAEA;;;;;;;;OAUA;AAEA,QAASC,aAAT,CAAuBn5B,IAAvB,CAA6Bo5B,eAA7B,CAA8CxvF,MAA9C,CAAsDyvF,cAAtD,CAAsEC,MAAtE,CAA8EC,KAA9E,CAAsF,CAElFv9C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,cAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd6lB,KAAMA,IADQ,CAEdo5B,gBAAiBA,eAFH,CAGdxvF,OAAQA,MAHM,CAIdyvF,eAAgBA,cAJF,CAKdC,OAAQA,MALM,CAAlB,CAQA,GAAKC,QAAUl0F,SAAf,CAA2BzB,QAAQgK,IAAR,CAAc,6CAAd,EAE3B,GAAI4rF,gBAAiB,GAAIC,mBAAJ,CAAwBz5B,IAAxB,CAA8Bo5B,eAA9B,CAA+CxvF,MAA/C,CAAuDyvF,cAAvD,CAAuEC,MAAvE,CAArB,CAEA;AAEA,KAAKI,QAAL,CAAgBF,eAAeE,QAA/B,CACA,KAAKj8C,OAAL,CAAe+7C,eAAe/7C,OAA9B,CACA,KAAKk8C,SAAL,CAAiBH,eAAeG,SAAhC,CAEA;AAEA,KAAKr8C,kBAAL,CAAyBk8C,cAAzB,EACA,KAAKj5C,aAAL,GAEH,CAED44C,aAAarpF,SAAb,CAAyBC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAAzB,CACAqpF,aAAarpF,SAAb,CAAuBI,WAAvB,CAAqCipF,YAArC,CAEA;AAEA,QAASM,mBAAT,CAA6Bz5B,IAA7B,CAAmCo5B,eAAnC,CAAoDxvF,MAApD,CAA4DyvF,cAA5D,CAA4EC,MAA5E,CAAqF,CAEjFj0C,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd6lB,KAAMA,IADQ,CAEdo5B,gBAAiBA,eAFH,CAGdxvF,OAAQA,MAHM,CAIdyvF,eAAgBA,cAJF,CAKdC,OAAQA,MALM,CAAlB,CAQAF,gBAAkBA,iBAAmB,EAArC,CACAxvF,OAASA,QAAU,CAAnB,CACAyvF,eAAiBA,gBAAkB,CAAnC,CACAC,OAASA,QAAU,KAAnB,CAEA,GAAIM,QAAS55B,KAAK65B,mBAAL,CAA0BT,eAA1B,CAA2CE,MAA3C,CAAb,CAEA;AAEA,KAAKI,QAAL,CAAgBE,OAAOF,QAAvB,CACA,KAAKj8C,OAAL,CAAem8C,OAAOn8C,OAAtB,CACA,KAAKk8C,SAAL,CAAiBC,OAAOD,SAAxB,CAEA;AAEA,GAAI18C,QAAS,GAAI13C,QAAJ,EAAb,CACA,GAAIqwB,QAAS,GAAIrwB,QAAJ,EAAb,CACA,GAAIi0B,IAAK,GAAI9tB,QAAJ,EAAT,CACA,GAAIouF,GAAI,GAAIv0F,QAAJ,EAAR,CAEA,GAAI0L,EAAJ,CAAOstB,CAAP,CAEA;AAEA,GAAIvB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CACA,GAAIH,SAAU,EAAd,CAEA;AAEAw8C,qBAEA;AAEA,KAAKt0C,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEA;AAEA,QAASq8C,mBAAT,EAA8B,CAE1B,IAAM9oF,EAAI,CAAV,CAAaA,EAAImoF,eAAjB,CAAkCnoF,GAAlC,CAAyC,CAErC+oF,gBAAiB/oF,CAAjB,EAEH,CAED;AACA;AACA;AACA;AAEA+oF,gBAAmBV,SAAW,KAAb,CAAuBF,eAAvB,CAAyC,CAA1D,EAEA;AACA;AAEAxB,cAEA;AAEAqC,kBAEH,CAED,QAASD,gBAAT,CAA0B/oF,CAA1B,CAA8B,CAE1B;AAEA6oF,EAAI95B,KAAKk6B,UAAL,CAAiBjpF,EAAImoF,eAArB,CAAsCU,CAAtC,CAAJ,CAEA;AAEA,GAAIK,GAAIP,OAAOn8C,OAAP,CAAgBxsC,CAAhB,CAAR,CACA,GAAImpF,GAAIR,OAAOD,SAAP,CAAkB1oF,CAAlB,CAAR,CAEA;AAEA,IAAMstB,EAAI,CAAV,CAAaA,GAAK86D,cAAlB,CAAkC96D,GAAlC,CAAyC,CAErC,GAAI/xB,GAAI+xB,EAAI86D,cAAJ,CAAqB12F,KAAKC,EAA1B,CAA+B,CAAvC,CAEA,GAAIyS,KAAM1S,KAAK0S,GAAL,CAAU7I,CAAV,CAAV,CACA,GAAI4I,KAAM,CAAEzS,KAAKyS,GAAL,CAAU5I,CAAV,CAAZ,CAEA;AAEAopB,OAAO32B,CAAP,CAAamW,IAAM+kF,EAAEl7F,CAAR,CAAYoW,IAAM+kF,EAAEn7F,CAAjC,CACA22B,OAAO12B,CAAP,CAAakW,IAAM+kF,EAAEj7F,CAAR,CAAYmW,IAAM+kF,EAAEl7F,CAAjC,CACA02B,OAAOz2B,CAAP,CAAaiW,IAAM+kF,EAAEh7F,CAAR,CAAYkW,IAAM+kF,EAAEj7F,CAAjC,CACAy2B,OAAOnQ,SAAP,GAEAg4B,QAAQ37C,IAAR,CAAc8zB,OAAO32B,CAArB,CAAwB22B,OAAO12B,CAA/B,CAAkC02B,OAAOz2B,CAAzC,EAEA;AAEA89C,OAAOh+C,CAAP,CAAW66F,EAAE76F,CAAF,CAAM2K,OAASgsB,OAAO32B,CAAjC,CACAg+C,OAAO/9C,CAAP,CAAW46F,EAAE56F,CAAF,CAAM0K,OAASgsB,OAAO12B,CAAjC,CACA+9C,OAAO99C,CAAP,CAAW26F,EAAE36F,CAAF,CAAMyK,OAASgsB,OAAOz2B,CAAjC,CAEA69B,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEH,CAEJ,CAED,QAAS86F,gBAAT,EAA2B,CAEvB,IAAM17D,EAAI,CAAV,CAAaA,GAAK66D,eAAlB,CAAmC76D,GAAnC,CAA0C,CAEtC,IAAMttB,EAAI,CAAV,CAAaA,GAAKooF,cAAlB,CAAkCpoF,GAAlC,CAAyC,CAErC,GAAI4F,GAAI,CAAEwiF,eAAiB,CAAnB,GAA2B96D,EAAI,CAA/B,GAAuCttB,EAAI,CAA3C,CAAR,CACA,GAAIiF,GAAI,CAAEmjF,eAAiB,CAAnB,EAAyB96D,CAAzB,EAA+BttB,EAAI,CAAnC,CAAR,CACA,GAAIwV,GAAI,CAAE4yE,eAAiB,CAAnB,EAAyB96D,CAAzB,CAA6BttB,CAArC,CACA,GAAI4X,GAAI,CAAEwwE,eAAiB,CAAnB,GAA2B96D,EAAI,CAA/B,EAAqCttB,CAA7C,CAEA;AAEAssC,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEH,CAEJ,CAEJ,CAED,QAAS+uE,YAAT,EAAuB,CAEnB,IAAM3mF,EAAI,CAAV,CAAaA,GAAKmoF,eAAlB,CAAmCnoF,GAAnC,CAA0C,CAEtC,IAAMstB,EAAI,CAAV,CAAaA,GAAK86D,cAAlB,CAAkC96D,GAAlC,CAAyC,CAErC/E,GAAGv6B,CAAH,CAAOgS,EAAImoF,eAAX,CACA5/D,GAAGt6B,CAAH,CAAOq/B,EAAI86D,cAAX,CAEA37C,IAAI57C,IAAJ,CAAU03B,GAAGv6B,CAAb,CAAgBu6B,GAAGt6B,CAAnB,EAEH,CAEJ,CAEJ,CAEJ,CAEDu6F,mBAAmB3pF,SAAnB,CAA+BC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAA/B,CACA2pF,mBAAmB3pF,SAAnB,CAA6BI,WAA7B,CAA2CupF,kBAA3C,CAEA;;;;;OAOA;AAEA,QAASY,kBAAT,CAA4BzwF,MAA5B,CAAoC0wF,IAApC,CAA0ClB,eAA1C,CAA2DC,cAA3D,CAA2ErpE,CAA3E,CAA8ElG,CAA9E,CAAiFywE,WAAjF,CAA+F,CAE3Fv+C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd0wF,KAAMA,IAFQ,CAGdlB,gBAAiBA,eAHH,CAIdC,eAAgBA,cAJF,CAKdrpE,EAAGA,CALW,CAMdlG,EAAGA,CANW,CAAlB,CASA,GAAKywE,cAAgBl1F,SAArB,CAAiCzB,QAAQgK,IAAR,CAAc,0FAAd,EAEjC,KAAK0vC,kBAAL,CAAyB,GAAIk9C,wBAAJ,CAA6B5wF,MAA7B,CAAqC0wF,IAArC,CAA2ClB,eAA3C,CAA4DC,cAA5D,CAA4ErpE,CAA5E,CAA+ElG,CAA/E,CAAzB,EACA,KAAKy2B,aAAL,GAEH,CAED85C,kBAAkBvqF,SAAlB,CAA8BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA9B,CACAuqF,kBAAkBvqF,SAAlB,CAA4BI,WAA5B,CAA0CmqF,iBAA1C,CAEA;AAEA,QAASG,wBAAT,CAAkC5wF,MAAlC,CAA0C0wF,IAA1C,CAAgDlB,eAAhD,CAAiEC,cAAjE,CAAiFrpE,CAAjF,CAAoFlG,CAApF,CAAwF,CAEpFu7B,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,yBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd0wF,KAAMA,IAFQ,CAGdlB,gBAAiBA,eAHH,CAIdC,eAAgBA,cAJF,CAKdrpE,EAAGA,CALW,CAMdlG,EAAGA,CANW,CAAlB,CASAlgB,OAASA,QAAU,CAAnB,CACA0wF,KAAOA,MAAQ,GAAf,CACAlB,gBAAkBz2F,KAAKmT,KAAL,CAAYsjF,eAAZ,GAAiC,EAAnD,CACAC,eAAiB12F,KAAKmT,KAAL,CAAYujF,cAAZ,GAAgC,CAAjD,CACArpE,EAAIA,GAAK,CAAT,CACAlG,EAAIA,GAAK,CAAT,CAEA;AAEA,GAAIyzB,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,GAAIzsC,EAAJ,CAAOstB,CAAP,CAEA,GAAI0e,QAAS,GAAI13C,QAAJ,EAAb,CACA,GAAIqwB,QAAS,GAAIrwB,QAAJ,EAAb,CAEA,GAAIk1F,IAAK,GAAIl1F,QAAJ,EAAT,CACA,GAAIm1F,IAAK,GAAIn1F,QAAJ,EAAT,CAEA,GAAI60F,GAAI,GAAI70F,QAAJ,EAAR,CACA,GAAIo1F,GAAI,GAAIp1F,QAAJ,EAAR,CACA,GAAI40F,GAAI,GAAI50F,QAAJ,EAAR,CAEA;AAEA,IAAM0L,EAAI,CAAV,CAAaA,GAAKmoF,eAAlB,CAAmC,EAAGnoF,CAAtC,CAA0C,CAEtC;AAEA,GAAI45B,GAAI55B,EAAImoF,eAAJ,CAAsBppE,CAAtB,CAA0BrtB,KAAKC,EAA/B,CAAoC,CAA5C,CAEA;AACA;AAEAg4F,yBAA0B/vD,CAA1B,CAA6B7a,CAA7B,CAAgClG,CAAhC,CAAmClgB,MAAnC,CAA2C6wF,EAA3C,EACAG,yBAA0B/vD,EAAI,IAA9B,CAAoC7a,CAApC,CAAuClG,CAAvC,CAA0ClgB,MAA1C,CAAkD8wF,EAAlD,EAEA;AAEAC,EAAEpsF,UAAF,CAAcmsF,EAAd,CAAkBD,EAAlB,EACAN,EAAE91E,UAAF,CAAcq2E,EAAd,CAAkBD,EAAlB,EACAL,EAAEnwE,YAAF,CAAgB0wE,CAAhB,CAAmBR,CAAnB,EACAA,EAAElwE,YAAF,CAAgBmwE,CAAhB,CAAmBO,CAAnB,EAEA;AAEAP,EAAE30E,SAAF,GACA00E,EAAE10E,SAAF,GAEA,IAAM8Y,EAAI,CAAV,CAAaA,GAAK86D,cAAlB,CAAkC,EAAG96D,CAArC,CAAyC,CAErC;AACA;AAEA,GAAI/xB,GAAI+xB,EAAI86D,cAAJ,CAAqB12F,KAAKC,EAA1B,CAA+B,CAAvC,CACA,GAAIg0B,IAAK,CAAE0jE,IAAF,CAAS33F,KAAKyS,GAAL,CAAU5I,CAAV,CAAlB,CACA,GAAIqqB,IAAKyjE,KAAO33F,KAAK0S,GAAL,CAAU7I,CAAV,CAAhB,CAEA;AACA;AAEAywC,OAAOh+C,CAAP,CAAWw7F,GAAGx7F,CAAH,EAAS23B,GAAKujE,EAAEl7F,CAAP,CAAW43B,GAAKujE,EAAEn7F,CAA3B,CAAX,CACAg+C,OAAO/9C,CAAP,CAAWu7F,GAAGv7F,CAAH,EAAS03B,GAAKujE,EAAEj7F,CAAP,CAAW23B,GAAKujE,EAAEl7F,CAA3B,CAAX,CACA+9C,OAAO99C,CAAP,CAAWs7F,GAAGt7F,CAAH,EAASy3B,GAAKujE,EAAEh7F,CAAP,CAAW03B,GAAKujE,EAAEj7F,CAA3B,CAAX,CAEA69B,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAy2B,OAAOrnB,UAAP,CAAmB0uC,MAAnB,CAA2Bw9C,EAA3B,EAAgCh1E,SAAhC,GAEAg4B,QAAQ37C,IAAR,CAAc8zB,OAAO32B,CAArB,CAAwB22B,OAAO12B,CAA/B,CAAkC02B,OAAOz2B,CAAzC,EAEA;AAEAu+C,IAAI57C,IAAJ,CAAUmP,EAAImoF,eAAd,EACA17C,IAAI57C,IAAJ,CAAUy8B,EAAI86D,cAAd,EAEH,CAEJ,CAED;AAEA,IAAM96D,EAAI,CAAV,CAAaA,GAAK66D,eAAlB,CAAmC76D,GAAnC,CAA0C,CAEtC,IAAMttB,EAAI,CAAV,CAAaA,GAAKooF,cAAlB,CAAkCpoF,GAAlC,CAAyC,CAErC;AAEA,GAAI4F,GAAI,CAAEwiF,eAAiB,CAAnB,GAA2B96D,EAAI,CAA/B,GAAuCttB,EAAI,CAA3C,CAAR,CACA,GAAIiF,GAAI,CAAEmjF,eAAiB,CAAnB,EAAyB96D,CAAzB,EAA+BttB,EAAI,CAAnC,CAAR,CACA,GAAIwV,GAAI,CAAE4yE,eAAiB,CAAnB,EAAyB96D,CAAzB,CAA6BttB,CAArC,CACA,GAAI4X,GAAI,CAAEwwE,eAAiB,CAAnB,GAA2B96D,EAAI,CAA/B,EAAqCttB,CAA7C,CAEA;AAEAssC,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEH,CAEJ,CAED;AAEA,KAAK48B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEA;AAEA,QAASk9C,yBAAT,CAAmC/vD,CAAnC,CAAsC7a,CAAtC,CAAyClG,CAAzC,CAA4ClgB,MAA5C,CAAoD5K,QAApD,CAA+D,CAE3D,GAAI67F,IAAKl4F,KAAKyS,GAAL,CAAUy1B,CAAV,CAAT,CACA,GAAIiwD,IAAKn4F,KAAK0S,GAAL,CAAUw1B,CAAV,CAAT,CACA,GAAIkwD,SAAUjxE,EAAIkG,CAAJ,CAAQ6a,CAAtB,CACA,GAAImwD,IAAKr4F,KAAKyS,GAAL,CAAU2lF,OAAV,CAAT,CAEA/7F,SAASC,CAAT,CAAa2K,QAAW,EAAIoxF,EAAf,EAAsB,GAAtB,CAA4BH,EAAzC,CACA77F,SAASE,CAAT,CAAa0K,QAAW,EAAIoxF,EAAf,EAAsBF,EAAtB,CAA2B,GAAxC,CACA97F,SAASG,CAAT,CAAayK,OAASjH,KAAK0S,GAAL,CAAU0lF,OAAV,CAAT,CAA+B,GAA5C,CAEH,CAEJ,CAEDP,wBAAwB1qF,SAAxB,CAAoCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAApC,CACA0qF,wBAAwB1qF,SAAxB,CAAkCI,WAAlC,CAAgDsqF,uBAAhD,CAEA;;;;OAMA;AAEA,QAASS,cAAT,CAAwBrxF,MAAxB,CAAgC0wF,IAAhC,CAAsCjB,cAAtC,CAAsDD,eAAtD,CAAuE8B,GAAvE,CAA6E,CAEzEl/C,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,eAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd0wF,KAAMA,IAFQ,CAGdjB,eAAgBA,cAHF,CAIdD,gBAAiBA,eAJH,CAKd8B,IAAKA,GALS,CAAlB,CAQA,KAAK59C,kBAAL,CAAyB,GAAI69C,oBAAJ,CAAyBvxF,MAAzB,CAAiC0wF,IAAjC,CAAuCjB,cAAvC,CAAuDD,eAAvD,CAAwE8B,GAAxE,CAAzB,EACA,KAAK36C,aAAL,GAEH,CAED06C,cAAcnrF,SAAd,CAA0BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA1B,CACAmrF,cAAcnrF,SAAd,CAAwBI,WAAxB,CAAsC+qF,aAAtC,CAEA;AAEA,QAASE,oBAAT,CAA8BvxF,MAA9B,CAAsC0wF,IAAtC,CAA4CjB,cAA5C,CAA4DD,eAA5D,CAA6E8B,GAA7E,CAAmF,CAE/E71C,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,qBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd0wF,KAAMA,IAFQ,CAGdjB,eAAgBA,cAHF,CAIdD,gBAAiBA,eAJH,CAKd8B,IAAKA,GALS,CAAlB,CAQAtxF,OAASA,QAAU,CAAnB,CACA0wF,KAAOA,MAAQ,GAAf,CACAjB,eAAiB12F,KAAKmT,KAAL,CAAYujF,cAAZ,GAAgC,CAAjD,CACAD,gBAAkBz2F,KAAKmT,KAAL,CAAYsjF,eAAZ,GAAiC,CAAnD,CACA8B,IAAMA,KAAOv4F,KAAKC,EAAL,CAAU,CAAvB,CAEA;AAEA,GAAI26C,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,GAAIttC,QAAS,GAAI7K,QAAJ,EAAb,CACA,GAAI03C,QAAS,GAAI13C,QAAJ,EAAb,CACA,GAAIqwB,QAAS,GAAIrwB,QAAJ,EAAb,CAEA,GAAIg5B,EAAJ,CAAOttB,CAAP,CAEA;AAEA,IAAMstB,EAAI,CAAV,CAAaA,GAAK86D,cAAlB,CAAkC96D,GAAlC,CAAyC,CAErC,IAAMttB,EAAI,CAAV,CAAaA,GAAKmoF,eAAlB,CAAmCnoF,GAAnC,CAA0C,CAEtC,GAAI45B,GAAI55B,EAAImoF,eAAJ,CAAsB8B,GAA9B,CACA,GAAI1uF,GAAI+xB,EAAI86D,cAAJ,CAAqB12F,KAAKC,EAA1B,CAA+B,CAAvC,CAEA;AAEAq6C,OAAOh+C,CAAP,CAAW,CAAE2K,OAAS0wF,KAAO33F,KAAKyS,GAAL,CAAU5I,CAAV,CAAlB,EAAoC7J,KAAKyS,GAAL,CAAUy1B,CAAV,CAA/C,CACAoS,OAAO/9C,CAAP,CAAW,CAAE0K,OAAS0wF,KAAO33F,KAAKyS,GAAL,CAAU5I,CAAV,CAAlB,EAAoC7J,KAAK0S,GAAL,CAAUw1B,CAAV,CAA/C,CACAoS,OAAO99C,CAAP,CAAWm7F,KAAO33F,KAAK0S,GAAL,CAAU7I,CAAV,CAAlB,CAEAwwB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAiR,OAAOnR,CAAP,CAAW2K,OAASjH,KAAKyS,GAAL,CAAUy1B,CAAV,CAApB,CACAz6B,OAAOlR,CAAP,CAAW0K,OAASjH,KAAK0S,GAAL,CAAUw1B,CAAV,CAApB,CACAjV,OAAOrnB,UAAP,CAAmB0uC,MAAnB,CAA2B7sC,MAA3B,EAAoCqV,SAApC,GAEAg4B,QAAQ37C,IAAR,CAAc8zB,OAAO32B,CAArB,CAAwB22B,OAAO12B,CAA/B,CAAkC02B,OAAOz2B,CAAzC,EAEA;AAEAu+C,IAAI57C,IAAJ,CAAUmP,EAAImoF,eAAd,EACA17C,IAAI57C,IAAJ,CAAUy8B,EAAI86D,cAAd,EAEH,CAEJ,CAED;AAEA,IAAM96D,EAAI,CAAV,CAAaA,GAAK86D,cAAlB,CAAkC96D,GAAlC,CAAyC,CAErC,IAAMttB,EAAI,CAAV,CAAaA,GAAKmoF,eAAlB,CAAmCnoF,GAAnC,CAA0C,CAEtC;AAEA,GAAI4F,GAAI,CAAEuiF,gBAAkB,CAApB,EAA0B76D,CAA1B,CAA8BttB,CAA9B,CAAkC,CAA1C,CACA,GAAIiF,GAAI,CAAEkjF,gBAAkB,CAApB,GAA4B76D,EAAI,CAAhC,EAAsCttB,CAAtC,CAA0C,CAAlD,CACA,GAAIwV,GAAI,CAAE2yE,gBAAkB,CAApB,GAA4B76D,EAAI,CAAhC,EAAsCttB,CAA9C,CACA,GAAI4X,GAAI,CAAEuwE,gBAAkB,CAApB,EAA0B76D,CAA1B,CAA8BttB,CAAtC,CAEA;AAEAssC,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEH,CAEJ,CAED;AAEA,KAAK48B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEH,CAEDy9C,oBAAoBrrF,SAApB,CAAgCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAhC,CACAqrF,oBAAoBrrF,SAApB,CAA8BI,WAA9B,CAA4CirF,mBAA5C,CAEA;;;OAKA,GAAIC,QAAS,CAETC,YAAa,qBAAW53F,IAAX,CAAiB63F,WAAjB,CAA8BC,GAA9B,CAAoC,CAE7CA,IAAMA,KAAO,CAAb,CAEA,GAAIC,UAAWF,aAAeA,YAAYjuF,MAA1C,CACIouF,SAAWD,SAAWF,YAAa,CAAb,EAAmBC,GAA9B,CAAoC93F,KAAK4J,MADxD,CAEIquF,UAAYC,WAAYl4F,IAAZ,CAAkB,CAAlB,CAAqBg4F,QAArB,CAA+BF,GAA/B,CAAoC,IAApC,CAFhB,CAGIthC,UAAY,EAHhB,CAKA,GAAK,CAAEyhC,SAAP,CAAmB,MAAOzhC,UAAP,CAEnB,GAAI7+B,KAAJ,CAAUC,IAAV,CAAgBE,IAAhB,CAAsBC,IAAtB,CAA4Bv8B,CAA5B,CAA+BC,CAA/B,CAAkC08F,OAAlC,CAEA,GAAKJ,QAAL,CAAgBE,UAAYG,eAAgBp4F,IAAhB,CAAsB63F,WAAtB,CAAmCI,SAAnC,CAA8CH,GAA9C,CAAZ,CAEhB;AAEA,GAAK93F,KAAK4J,MAAL,CAAc,GAAKkuF,GAAxB,CAA8B,CAE1BngE,KAAOG,KAAO93B,KAAM,CAAN,CAAd,CACA43B,KAAOG,KAAO/3B,KAAM,CAAN,CAAd,CAEA,IAAM,GAAIwN,GAAIsqF,GAAd,CAAmBtqF,EAAIwqF,QAAvB,CAAiCxqF,GAAKsqF,GAAtC,CAA4C,CAExCt8F,EAAIwE,KAAMwN,CAAN,CAAJ,CACA/R,EAAIuE,KAAMwN,EAAI,CAAV,CAAJ,CACA,GAAKhS,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAChB,GAAKC,EAAIm8B,IAAT,CAAgBA,KAAOn8B,CAAP,CAChB,GAAKD,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAChB,GAAKC,EAAIs8B,IAAT,CAAgBA,KAAOt8B,CAAP,CAEnB,CAED;AAEA08F,QAAUj5F,KAAK8G,GAAL,CAAU8xB,KAAOH,IAAjB,CAAuBI,KAAOH,IAA9B,CAAV,CACAugE,QAAUA,UAAY,CAAZ,CAAgB,EAAIA,OAApB,CAA8B,CAAxC,CAEH,CAEDE,aAAcJ,SAAd,CAAyBzhC,SAAzB,CAAoCshC,GAApC,CAAyCngE,IAAzC,CAA+CC,IAA/C,CAAqDugE,OAArD,EAEA,MAAO3hC,UAAP,CAEH,CA9CQ,CAAb,CAkDA;AAEA,QAAS0hC,WAAT,CAAqBl4F,IAArB,CAA2BmB,KAA3B,CAAkC8O,GAAlC,CAAuC6nF,GAAvC,CAA4CQ,SAA5C,CAAwD,CAEpD,GAAI9qF,EAAJ,CAAO+qF,IAAP,CAEA,GAAKD,YAAgBE,WAAYx4F,IAAZ,CAAkBmB,KAAlB,CAAyB8O,GAAzB,CAA8B6nF,GAA9B,EAAsC,CAA3D,CAAiE,CAE7D,IAAMtqF,EAAIrM,KAAV,CAAiBqM,EAAIyC,GAArB,CAA0BzC,GAAKsqF,GAA/B,EAAqCS,KAAOE,WAAYjrF,CAAZ,CAAexN,KAAMwN,CAAN,CAAf,CAA0BxN,KAAMwN,EAAI,CAAV,CAA1B,CAAyC+qF,IAAzC,CAAP,CAArC,CAEH,CAJD,IAIO,CAEH,IAAM/qF,EAAIyC,IAAM6nF,GAAhB,CAAqBtqF,GAAKrM,KAA1B,CAAiCqM,GAAKsqF,GAAtC,EAA4CS,KAAOE,WAAYjrF,CAAZ,CAAexN,KAAMwN,CAAN,CAAf,CAA0BxN,KAAMwN,EAAI,CAAV,CAA1B,CAAyC+qF,IAAzC,CAAP,CAA5C,CAEH,CAED,GAAKA,MAAQ/1E,OAAQ+1E,IAAR,CAAcA,KAAK17B,IAAnB,CAAb,CAAyC,CAErC67B,WAAYH,IAAZ,EACAA,KAAOA,KAAK17B,IAAZ,CAEH,CAED,MAAO07B,KAAP,CAEH,CAED;AAEA,QAASI,aAAT,CAAuBx3F,KAAvB,CAA8B8O,GAA9B,CAAoC,CAEhC,GAAK,CAAE9O,KAAP,CAAe,MAAOA,MAAP,CACf,GAAK,CAAE8O,GAAP,CAAaA,IAAM9O,KAAN,CAEb,GAAIorB,GAAIprB,KAAR,CAAey3F,KAAf,CAEA,EAAG,CAECA,MAAQ,KAAR,CAEA,GAAK,CAAErsE,EAAEssE,OAAJ,GAAiBr2E,OAAQ+J,CAAR,CAAWA,EAAEswC,IAAb,GAAuBi8B,KAAMvsE,EAAEwsE,IAAR,CAAcxsE,CAAd,CAAiBA,EAAEswC,IAAnB,IAA8B,CAAtE,CAAL,CAAiF,CAE7E67B,WAAYnsE,CAAZ,EACAA,EAAItc,IAAMsc,EAAEwsE,IAAZ,CACA,GAAKxsE,IAAMA,EAAEswC,IAAb,CAAoB,MACpB+7B,MAAQ,IAAR,CAEH,CAPD,IAOO,CAEHrsE,EAAIA,EAAEswC,IAAN,CAEH,CAEJ,CAjBD,MAiBU+7B,OAASrsE,IAAMtc,GAjBzB,EAmBA,MAAOA,IAAP,CAEH,CAED;AAEA,QAASooF,aAAT,CAAuBW,GAAvB,CAA4BxiC,SAA5B,CAAuCshC,GAAvC,CAA4CngE,IAA5C,CAAkDC,IAAlD,CAAwDugE,OAAxD,CAAiEc,IAAjE,CAAwE,CAEpE,GAAK,CAAED,GAAP,CAAa,OAEb;AAEA,GAAK,CAAEC,IAAF,EAAUd,OAAf,CAAyBe,WAAYF,GAAZ,CAAiBrhE,IAAjB,CAAuBC,IAAvB,CAA6BugE,OAA7B,EAEzB,GAAIroF,MAAOkpF,GAAX,CAAgBD,IAAhB,CAAsBl8B,IAAtB,CAEA;AAEA,MAAQm8B,IAAID,IAAJ,GAAaC,IAAIn8B,IAAzB,CAAgC,CAE5Bk8B,KAAOC,IAAID,IAAX,CACAl8B,KAAOm8B,IAAIn8B,IAAX,CAEA,GAAKs7B,QAAUgB,YAAaH,GAAb,CAAkBrhE,IAAlB,CAAwBC,IAAxB,CAA8BugE,OAA9B,CAAV,CAAoDiB,MAAOJ,GAAP,CAAzD,CAAwE,CAEpE;AACAxiC,UAAUn4D,IAAV,CAAgB06F,KAAKvrF,CAAL,CAASsqF,GAAzB,EACAthC,UAAUn4D,IAAV,CAAgB26F,IAAIxrF,CAAJ,CAAQsqF,GAAxB,EACAthC,UAAUn4D,IAAV,CAAgBw+D,KAAKrvD,CAAL,CAASsqF,GAAzB,EAEAY,WAAYM,GAAZ,EAEA;AACAA,IAAMn8B,KAAKA,IAAX,CACA/sD,KAAO+sD,KAAKA,IAAZ,CAEA,SAEH,CAEDm8B,IAAMn8B,IAAN,CAEA;AAEA,GAAKm8B,MAAQlpF,IAAb,CAAoB,CAEhB;AAEA,GAAK,CAAEmpF,IAAP,CAAc,CAEVZ,aAAcM,aAAcK,GAAd,CAAd,CAAmCxiC,SAAnC,CAA8CshC,GAA9C,CAAmDngE,IAAnD,CAAyDC,IAAzD,CAA+DugE,OAA/D,CAAwE,CAAxE,EAEA;AAEH,CAND,IAMO,IAAKc,OAAS,CAAd,CAAkB,CAErBD,IAAMK,uBAAwBL,GAAxB,CAA6BxiC,SAA7B,CAAwCshC,GAAxC,CAAN,CACAO,aAAcW,GAAd,CAAmBxiC,SAAnB,CAA8BshC,GAA9B,CAAmCngE,IAAnC,CAAyCC,IAAzC,CAA+CugE,OAA/C,CAAwD,CAAxD,EAEA;AAEH,CAPM,IAOA,IAAKc,OAAS,CAAd,CAAkB,CAErBK,YAAaN,GAAb,CAAkBxiC,SAAlB,CAA6BshC,GAA7B,CAAkCngE,IAAlC,CAAwCC,IAAxC,CAA8CugE,OAA9C,EAEH,CAED,MAEH,CAEJ,CAEJ,CAED;AAEA,QAASiB,MAAT,CAAgBJ,GAAhB,CAAsB,CAElB,GAAI5lF,GAAI4lF,IAAID,IAAZ,CACItmF,EAAIumF,GADR,CAEIh2E,EAAIg2E,IAAIn8B,IAFZ,CAIA,GAAKi8B,KAAM1lF,CAAN,CAASX,CAAT,CAAYuQ,CAAZ,GAAmB,CAAxB,CAA4B,MAAO,MAAP,CAAc;AAE1C;AACA,GAAIuJ,GAAIysE,IAAIn8B,IAAJ,CAASA,IAAjB,CAEA,MAAQtwC,IAAMysE,IAAID,IAAlB,CAAyB,CAErB,GAAKQ,gBAAiBnmF,EAAE5X,CAAnB,CAAsB4X,EAAE3X,CAAxB,CAA2BgX,EAAEjX,CAA7B,CAAgCiX,EAAEhX,CAAlC,CAAqCunB,EAAExnB,CAAvC,CAA0CwnB,EAAEvnB,CAA5C,CAA+C8wB,EAAE/wB,CAAjD,CAAoD+wB,EAAE9wB,CAAtD,GAA6Dq9F,KAAMvsE,EAAEwsE,IAAR,CAAcxsE,CAAd,CAAiBA,EAAEswC,IAAnB,GAA6B,CAA/F,CAAmG,CAE/F,MAAO,MAAP,CAEH,CAEDtwC,EAAIA,EAAEswC,IAAN,CAEH,CAED,MAAO,KAAP,CAEH,CAED,QAASs8B,YAAT,CAAsBH,GAAtB,CAA2BrhE,IAA3B,CAAiCC,IAAjC,CAAuCugE,OAAvC,CAAiD,CAE7C,GAAI/kF,GAAI4lF,IAAID,IAAZ,CACItmF,EAAIumF,GADR,CAEIh2E,EAAIg2E,IAAIn8B,IAFZ,CAIA,GAAKi8B,KAAM1lF,CAAN,CAASX,CAAT,CAAYuQ,CAAZ,GAAmB,CAAxB,CAA4B,MAAO,MAAP,CAAc;AAE1C;AAEA,GAAIw2E,OAAQpmF,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAR,CAAc4X,EAAE5X,CAAF,CAAMwnB,EAAExnB,CAAR,CAAY4X,EAAE5X,CAAd,CAAkBwnB,EAAExnB,CAAlC,CAA0CiX,EAAEjX,CAAF,CAAMwnB,EAAExnB,CAAR,CAAYiX,EAAEjX,CAAd,CAAkBwnB,EAAExnB,CAA1E,CACIi+F,MAAQrmF,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAR,CAAc2X,EAAE3X,CAAF,CAAMunB,EAAEvnB,CAAR,CAAY2X,EAAE3X,CAAd,CAAkBunB,EAAEvnB,CAAlC,CAA0CgX,EAAEhX,CAAF,CAAMunB,EAAEvnB,CAAR,CAAYgX,EAAEhX,CAAd,CAAkBunB,EAAEvnB,CAD1E,CAEIi+F,MAAQtmF,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAR,CAAc4X,EAAE5X,CAAF,CAAMwnB,EAAExnB,CAAR,CAAY4X,EAAE5X,CAAd,CAAkBwnB,EAAExnB,CAAlC,CAA0CiX,EAAEjX,CAAF,CAAMwnB,EAAExnB,CAAR,CAAYiX,EAAEjX,CAAd,CAAkBwnB,EAAExnB,CAF1E,CAGIm+F,MAAQvmF,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAR,CAAc2X,EAAE3X,CAAF,CAAMunB,EAAEvnB,CAAR,CAAY2X,EAAE3X,CAAd,CAAkBunB,EAAEvnB,CAAlC,CAA0CgX,EAAEhX,CAAF,CAAMunB,EAAEvnB,CAAR,CAAYgX,EAAEhX,CAAd,CAAkBunB,EAAEvnB,CAH1E,CAKA;AAEA,GAAIo8B,MAAO+hE,OAAQJ,KAAR,CAAeC,KAAf,CAAsB9hE,IAAtB,CAA4BC,IAA5B,CAAkCugE,OAAlC,CAAX,CACIngE,KAAO4hE,OAAQF,KAAR,CAAeC,KAAf,CAAsBhiE,IAAtB,CAA4BC,IAA5B,CAAkCugE,OAAlC,CADX,CAGA;AAEA,GAAI5rE,GAAIysE,IAAIa,KAAZ,CAEA,MAAQttE,GAAKA,EAAE7wB,CAAF,EAAOs8B,IAApB,CAA2B,CAEvB,GAAKzL,IAAMysE,IAAID,IAAV,EAAkBxsE,IAAMysE,IAAIn8B,IAA5B,EACD08B,gBAAiBnmF,EAAE5X,CAAnB,CAAsB4X,EAAE3X,CAAxB,CAA2BgX,EAAEjX,CAA7B,CAAgCiX,EAAEhX,CAAlC,CAAqCunB,EAAExnB,CAAvC,CAA0CwnB,EAAEvnB,CAA5C,CAA+C8wB,EAAE/wB,CAAjD,CAAoD+wB,EAAE9wB,CAAtD,CADC,EAEDq9F,KAAMvsE,EAAEwsE,IAAR,CAAcxsE,CAAd,CAAiBA,EAAEswC,IAAnB,GAA6B,CAFjC,CAEqC,MAAO,MAAP,CACrCtwC,EAAIA,EAAEstE,KAAN,CAEH,CAED;AAEAttE,EAAIysE,IAAIc,KAAR,CAEA,MAAQvtE,GAAKA,EAAE7wB,CAAF,EAAOm8B,IAApB,CAA2B,CAEvB,GAAKtL,IAAMysE,IAAID,IAAV,EAAkBxsE,IAAMysE,IAAIn8B,IAA5B,EACD08B,gBAAiBnmF,EAAE5X,CAAnB,CAAsB4X,EAAE3X,CAAxB,CAA2BgX,EAAEjX,CAA7B,CAAgCiX,EAAEhX,CAAlC,CAAqCunB,EAAExnB,CAAvC,CAA0CwnB,EAAEvnB,CAA5C,CAA+C8wB,EAAE/wB,CAAjD,CAAoD+wB,EAAE9wB,CAAtD,CADC,EAEDq9F,KAAMvsE,EAAEwsE,IAAR,CAAcxsE,CAAd,CAAiBA,EAAEswC,IAAnB,GAA6B,CAFjC,CAEqC,MAAO,MAAP,CAErCtwC,EAAIA,EAAEutE,KAAN,CAEH,CAED,MAAO,KAAP,CAEH,CAED;AAEA,QAAST,uBAAT,CAAiCl4F,KAAjC,CAAwCq1D,SAAxC,CAAmDshC,GAAnD,CAAyD,CAErD,GAAIvrE,GAAIprB,KAAR,CAEA,EAAG,CAEC,GAAIiS,GAAImZ,EAAEwsE,IAAV,CAAgBtmF,EAAI8Z,EAAEswC,IAAF,CAAOA,IAA3B,CAEA,GAAK,CAAEr6C,OAAQpP,CAAR,CAAWX,CAAX,CAAF,EAAoB08C,WAAY/7C,CAAZ,CAAemZ,CAAf,CAAkBA,EAAEswC,IAApB,CAA0BpqD,CAA1B,CAApB,EAAqDsnF,cAAe3mF,CAAf,CAAkBX,CAAlB,CAArD,EAA8EsnF,cAAetnF,CAAf,CAAkBW,CAAlB,CAAnF,CAA2G,CAEvGojD,UAAUn4D,IAAV,CAAgB+U,EAAE5F,CAAF,CAAMsqF,GAAtB,EACAthC,UAAUn4D,IAAV,CAAgBkuB,EAAE/e,CAAF,CAAMsqF,GAAtB,EACAthC,UAAUn4D,IAAV,CAAgBoU,EAAEjF,CAAF,CAAMsqF,GAAtB,EAEA;AAEAY,WAAYnsE,CAAZ,EACAmsE,WAAYnsE,EAAEswC,IAAd,EAEAtwC,EAAIprB,MAAQsR,CAAZ,CAEH,CAED8Z,EAAIA,EAAEswC,IAAN,CAEH,CArBD,MAqBUtwC,IAAMprB,KArBhB,EAuBA,MAAOorB,EAAP,CAEH,CAED;AAEA,QAAS+sE,YAAT,CAAsBn4F,KAAtB,CAA6Bq1D,SAA7B,CAAwCshC,GAAxC,CAA6CngE,IAA7C,CAAmDC,IAAnD,CAAyDugE,OAAzD,CAAmE,CAE/D;AAEA,GAAI/kF,GAAIjS,KAAR,CAEA,EAAG,CAEC,GAAIsR,GAAIW,EAAEypD,IAAF,CAAOA,IAAf,CAEA,MAAQpqD,IAAMW,EAAE2lF,IAAhB,CAAuB,CAEnB,GAAK3lF,EAAE5F,CAAF,GAAQiF,EAAEjF,CAAV,EAAewsF,gBAAiB5mF,CAAjB,CAAoBX,CAApB,CAApB,CAA8C,CAE1C;AAEA,GAAIuQ,GAAIi3E,aAAc7mF,CAAd,CAAiBX,CAAjB,CAAR,CAEA;AAEAW,EAAIulF,aAAcvlF,CAAd,CAAiBA,EAAEypD,IAAnB,CAAJ,CACA75C,EAAI21E,aAAc31E,CAAd,CAAiBA,EAAE65C,IAAnB,CAAJ,CAEA;AAEAw7B,aAAcjlF,CAAd,CAAiBojD,SAAjB,CAA4BshC,GAA5B,CAAiCngE,IAAjC,CAAuCC,IAAvC,CAA6CugE,OAA7C,EACAE,aAAcr1E,CAAd,CAAiBwzC,SAAjB,CAA4BshC,GAA5B,CAAiCngE,IAAjC,CAAuCC,IAAvC,CAA6CugE,OAA7C,EACA,OAEH,CAED1lF,EAAIA,EAAEoqD,IAAN,CAEH,CAEDzpD,EAAIA,EAAEypD,IAAN,CAEH,CA/BD,MA+BUzpD,IAAMjS,KA/BhB,EAiCH,CAED;AAEA,QAASi3F,eAAT,CAAyBp4F,IAAzB,CAA+B63F,WAA/B,CAA4CI,SAA5C,CAAuDH,GAAvD,CAA6D,CAEzD,GAAIoC,OAAQ,EAAZ,CAAgB1sF,CAAhB,CAAmBqgB,GAAnB,CAAwB1sB,KAAxB,CAA+B8O,GAA/B,CAAoCg3D,IAApC,CAEA,IAAMz5D,EAAI,CAAJ,CAAOqgB,IAAMgqE,YAAYjuF,MAA/B,CAAuC4D,EAAIqgB,GAA3C,CAAgDrgB,GAAhD,CAAuD,CAEnDrM,MAAQ02F,YAAarqF,CAAb,EAAmBsqF,GAA3B,CACA7nF,IAAMzC,EAAIqgB,IAAM,CAAV,CAAcgqE,YAAarqF,EAAI,CAAjB,EAAuBsqF,GAArC,CAA2C93F,KAAK4J,MAAtD,CACAq9D,KAAOixB,WAAYl4F,IAAZ,CAAkBmB,KAAlB,CAAyB8O,GAAzB,CAA8B6nF,GAA9B,CAAmC,KAAnC,CAAP,CACA,GAAK7wB,OAASA,KAAKpK,IAAnB,CAA0BoK,KAAK4xB,OAAL,CAAe,IAAf,CAC1BqB,MAAM77F,IAAN,CAAY87F,YAAalzB,IAAb,CAAZ,EAEH,CAEDizB,MAAMx8C,IAAN,CAAY08C,QAAZ,EAEA;AAEA,IAAM5sF,EAAI,CAAV,CAAaA,EAAI0sF,MAAMtwF,MAAvB,CAA+B4D,GAA/B,CAAsC,CAElC6sF,cAAeH,MAAO1sF,CAAP,CAAf,CAA2ByqF,SAA3B,EACAA,UAAYU,aAAcV,SAAd,CAAyBA,UAAUp7B,IAAnC,CAAZ,CAEH,CAED,MAAOo7B,UAAP,CAEH,CAED,QAASmC,SAAT,CAAmBhnF,CAAnB,CAAsBX,CAAtB,CAA0B,CAEtB,MAAOW,GAAE5X,CAAF,CAAMiX,EAAEjX,CAAf,CAEH,CAED;AAEA,QAAS6+F,cAAT,CAAwBC,IAAxB,CAA8BrC,SAA9B,CAA0C,CAEtCA,UAAYsC,eAAgBD,IAAhB,CAAsBrC,SAAtB,CAAZ,CAEA,GAAKA,SAAL,CAAiB,CAEb,GAAIxlF,GAAIwnF,aAAchC,SAAd,CAAyBqC,IAAzB,CAAR,CAEA3B,aAAclmF,CAAd,CAAiBA,EAAEoqD,IAAnB,EAEH,CAEJ,CAED;AAEA,QAAS09B,eAAT,CAAyBD,IAAzB,CAA+BrC,SAA/B,CAA2C,CAEvC,GAAI1rE,GAAI0rE,SAAR,CACIuC,GAAKF,KAAK9+F,CADd,CAEIi/F,GAAKH,KAAK7+F,CAFd,CAGIk1B,GAAK,CAAE1uB,QAHX,CAIIkQ,CAJJ,CAMA;AACA;AAEA,EAAG,CAEC,GAAKsoF,IAAMluE,EAAE9wB,CAAR,EAAag/F,IAAMluE,EAAEswC,IAAF,CAAOphE,CAA1B,EAA+B8wB,EAAEswC,IAAF,CAAOphE,CAAP,GAAa8wB,EAAE9wB,CAAnD,CAAuD,CAEnD,GAAID,GAAI+wB,EAAE/wB,CAAF,CAAM,CAAEi/F,GAAKluE,EAAE9wB,CAAT,GAAiB8wB,EAAEswC,IAAF,CAAOrhE,CAAP,CAAW+wB,EAAE/wB,CAA9B,GAAsC+wB,EAAEswC,IAAF,CAAOphE,CAAP,CAAW8wB,EAAE9wB,CAAnD,CAAd,CAEA,GAAKD,GAAKg/F,EAAL,EAAWh/F,EAAIm1B,EAApB,CAAyB,CAErBA,GAAKn1B,CAAL,CAEA,GAAKA,IAAMg/F,EAAX,CAAgB,CAEZ,GAAKC,KAAOluE,EAAE9wB,CAAd,CAAkB,MAAO8wB,EAAP,CAClB,GAAKkuE,KAAOluE,EAAEswC,IAAF,CAAOphE,CAAnB,CAAuB,MAAO8wB,GAAEswC,IAAT,CAE1B,CAED1qD,EAAIoa,EAAE/wB,CAAF,CAAM+wB,EAAEswC,IAAF,CAAOrhE,CAAb,CAAiB+wB,CAAjB,CAAqBA,EAAEswC,IAA3B,CAEH,CAEJ,CAEDtwC,EAAIA,EAAEswC,IAAN,CAEH,CAzBD,MAyBUtwC,IAAM0rE,SAzBhB,EA2BA,GAAK,CAAE9lF,CAAP,CAAW,MAAO,KAAP,CAEX,GAAKqoF,KAAO7pE,EAAZ,CAAiB,MAAOxe,GAAE4mF,IAAT,CAAe;AAEhC;AACA;AACA;AAEA,GAAIjpF,MAAOqC,CAAX,CACIuoF,GAAKvoF,EAAE3W,CADX,CAEIm/F,GAAKxoF,EAAE1W,CAFX,CAGIm/F,OAAS34F,QAHb,CAII4H,GAJJ,CAMA0iB,EAAIpa,EAAE0qD,IAAN,CAEA,MAAQtwC,IAAMzc,IAAd,CAAqB,CAEjB,GAAK0qF,IAAMjuE,EAAE/wB,CAAR,EAAa+wB,EAAE/wB,CAAF,EAAOk/F,EAApB,EAA0BF,KAAOjuE,EAAE/wB,CAAnC,EACD+9F,gBAAiBkB,GAAKE,EAAL,CAAUH,EAAV,CAAe7pE,EAAhC,CAAoC8pE,EAApC,CAAwCC,EAAxC,CAA4CC,EAA5C,CAAgDF,GAAKE,EAAL,CAAUhqE,EAAV,CAAe6pE,EAA/D,CAAmEC,EAAnE,CAAuEluE,EAAE/wB,CAAzE,CAA4E+wB,EAAE9wB,CAA9E,CADJ,CACwF,CAEpFoO,IAAM3K,KAAK6iB,GAAL,CAAU04E,GAAKluE,EAAE9wB,CAAjB,GAAyB++F,GAAKjuE,EAAE/wB,CAAhC,CAAN,CAA2C;AAE3C,GAAK,CAAEqO,IAAM+wF,MAAN,EAAkB/wF,MAAQ+wF,MAAR,EAAkBruE,EAAE/wB,CAAF,CAAM2W,EAAE3W,CAA9C,GAAuDu+F,cAAextE,CAAf,CAAkB+tE,IAAlB,CAA5D,CAAuF,CAEnFnoF,EAAIoa,CAAJ,CACAquE,OAAS/wF,GAAT,CAEH,CAEJ,CAED0iB,EAAIA,EAAEswC,IAAN,CAEH,CAED,MAAO1qD,EAAP,CAEH,CAED;AAEA,QAAS+mF,WAAT,CAAqB/3F,KAArB,CAA4Bw2B,IAA5B,CAAkCC,IAAlC,CAAwCugE,OAAxC,CAAkD,CAE9C,GAAI5rE,GAAIprB,KAAR,CAEA,EAAG,CAEC,GAAKorB,EAAE7wB,CAAF,GAAQ,IAAb,CAAoB6wB,EAAE7wB,CAAF,CAAMk+F,OAAQrtE,EAAE/wB,CAAV,CAAa+wB,EAAE9wB,CAAf,CAAkBk8B,IAAlB,CAAwBC,IAAxB,CAA8BugE,OAA9B,CAAN,CACpB5rE,EAAEutE,KAAF,CAAUvtE,EAAEwsE,IAAZ,CACAxsE,EAAEstE,KAAF,CAAUttE,EAAEswC,IAAZ,CACAtwC,EAAIA,EAAEswC,IAAN,CAEH,CAPD,MAOUtwC,IAAMprB,KAPhB,EASAorB,EAAEutE,KAAF,CAAQD,KAAR,CAAgB,IAAhB,CACAttE,EAAEutE,KAAF,CAAU,IAAV,CAEAe,WAAYtuE,CAAZ,EAEH,CAED;AACA;AAEA,QAASsuE,WAAT,CAAqB5zB,IAArB,CAA4B,CAExB,GAAIz5D,EAAJ,CAAO+e,CAAP,CAAUlG,CAAV,CAAajF,CAAb,CAAgB05E,IAAhB,CAAsBC,SAAtB,CAAiCC,KAAjC,CAAwCC,KAAxC,CAA+CC,OAAS,CAAxD,CAEA,EAAG,CAEC3uE,EAAI06C,IAAJ,CACAA,KAAO,IAAP,CACA6zB,KAAO,IAAP,CACAC,UAAY,CAAZ,CAEA,MAAQxuE,CAAR,CAAY,CAERwuE,YACA10E,EAAIkG,CAAJ,CACAyuE,MAAQ,CAAR,CAEA,IAAMxtF,EAAI,CAAV,CAAaA,EAAI0tF,MAAjB,CAAyB1tF,GAAzB,CAAgC,CAE5BwtF,QACA30E,EAAIA,EAAEwzE,KAAN,CACA,GAAK,CAAExzE,CAAP,CAAW,MAEd,CAED40E,MAAQC,MAAR,CAEA,MAAQF,MAAQ,CAAR,EAAeC,MAAQ,CAAR,EAAa50E,CAApC,CAA0C,CAEtC,GAAK20E,QAAU,CAAV,GAAiBC,QAAU,CAAV,EAAe,CAAE50E,CAAjB,EAAsBkG,EAAE7wB,CAAF,EAAO2qB,EAAE3qB,CAAhD,CAAL,CAA2D,CAEvD0lB,EAAImL,CAAJ,CACAA,EAAIA,EAAEstE,KAAN,CACAmB,QAEH,CAND,IAMO,CAEH55E,EAAIiF,CAAJ,CACAA,EAAIA,EAAEwzE,KAAN,CACAoB,QAEH,CAED,GAAKH,IAAL,CAAYA,KAAKjB,KAAL,CAAaz4E,CAAb,CAAZ,IACK6lD,MAAO7lD,CAAP,CAELA,EAAE04E,KAAF,CAAUgB,IAAV,CACAA,KAAO15E,CAAP,CAEH,CAEDmL,EAAIlG,CAAJ,CAEH,CAEDy0E,KAAKjB,KAAL,CAAa,IAAb,CACAqB,QAAU,CAAV,CAEH,CAtDD,MAsDUH,UAAY,CAtDtB,EAwDA,MAAO9zB,KAAP,CAEH,CAED;AAEA,QAAS2yB,OAAT,CAAiBp+F,CAAjB,CAAoBC,CAApB,CAAuBk8B,IAAvB,CAA6BC,IAA7B,CAAmCugE,OAAnC,CAA6C,CAEzC;AAEA38F,EAAI,OAAUA,EAAIm8B,IAAd,EAAuBwgE,OAA3B,CACA18F,EAAI,OAAUA,EAAIm8B,IAAd,EAAuBugE,OAA3B,CAEA38F,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CACAA,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CACAA,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CACAA,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CAEAC,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CACAA,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CACAA,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CACAA,EAAI,CAAEA,EAAMA,GAAK,CAAb,EAAqB,UAAzB,CAEA,MAAOD,GAAMC,GAAK,CAAlB,CAEH,CAED;AAEA,QAAS0+F,YAAT,CAAsBh5F,KAAtB,CAA8B,CAE1B,GAAIorB,GAAIprB,KAAR,CAAeg6F,SAAWh6F,KAA1B,CAEA,EAAG,CAEC,GAAKorB,EAAE/wB,CAAF,CAAM2/F,SAAS3/F,CAApB,CAAwB2/F,SAAW5uE,CAAX,CACxBA,EAAIA,EAAEswC,IAAN,CAEH,CALD,MAKUtwC,IAAMprB,KALhB,EAOA,MAAOg6F,SAAP,CAEH,CAED;AAEA,QAAS5B,gBAAT,CAA0B9nE,EAA1B,CAA8BC,EAA9B,CAAkCE,EAAlC,CAAsCC,EAAtC,CAA0CsB,EAA1C,CAA8CC,EAA9C,CAAkDgoE,EAAlD,CAAsDC,EAAtD,CAA2D,CAEvD,MAAO,CAAEloE,GAAKioE,EAAP,GAAgB1pE,GAAK2pE,EAArB,EAA4B,CAAE5pE,GAAK2pE,EAAP,GAAgBhoE,GAAKioE,EAArB,CAA5B,EAAyD,CAAzD,EACH,CAAE5pE,GAAK2pE,EAAP,GAAgBvpE,GAAKwpE,EAArB,EAA4B,CAAEzpE,GAAKwpE,EAAP,GAAgB1pE,GAAK2pE,EAArB,CAA5B,EAAyD,CADtD,EAEH,CAAEzpE,GAAKwpE,EAAP,GAAgBhoE,GAAKioE,EAArB,EAA4B,CAAEloE,GAAKioE,EAAP,GAAgBvpE,GAAKwpE,EAArB,CAA5B,EAAyD,CAF7D,CAIH,CAED;AAEA,QAASrB,gBAAT,CAA0B5mF,CAA1B,CAA6BX,CAA7B,CAAiC,CAE7B,MAAOW,GAAEypD,IAAF,CAAOrvD,CAAP,GAAaiF,EAAEjF,CAAf,EAAoB4F,EAAE2lF,IAAF,CAAOvrF,CAAP,GAAaiF,EAAEjF,CAAnC,EAAwC,CAAE8tF,kBAAmBloF,CAAnB,CAAsBX,CAAtB,CAA1C,EACHsnF,cAAe3mF,CAAf,CAAkBX,CAAlB,CADG,EACsBsnF,cAAetnF,CAAf,CAAkBW,CAAlB,CADtB,EAC+CmoF,aAAcnoF,CAAd,CAAiBX,CAAjB,CADtD,CAGH,CAED;AAEA,QAASqmF,KAAT,CAAevsE,CAAf,CAAkBlG,CAAlB,CAAqB8I,CAArB,CAAyB,CAErB,MAAO,CAAE9I,EAAE5qB,CAAF,CAAM8wB,EAAE9wB,CAAV,GAAkB0zB,EAAE3zB,CAAF,CAAM6qB,EAAE7qB,CAA1B,EAAgC,CAAE6qB,EAAE7qB,CAAF,CAAM+wB,EAAE/wB,CAAV,GAAkB2zB,EAAE1zB,CAAF,CAAM4qB,EAAE5qB,CAA1B,CAAvC,CAEH,CAED;AAEA,QAAS+mB,OAAT,CAAiBxP,EAAjB,CAAqBK,EAArB,CAA0B,CAEtB,MAAOL,IAAGxX,CAAH,GAAS6X,GAAG7X,CAAZ,EAAiBwX,GAAGvX,CAAH,GAAS4X,GAAG5X,CAApC,CAEH,CAED;AAEA,QAAS0zD,WAAT,CAAqBn8C,EAArB,CAAyB8hC,EAAzB,CAA6BzhC,EAA7B,CAAiCmoF,EAAjC,CAAsC,CAElC,GAAOh5E,OAAQxP,EAAR,CAAY8hC,EAAZ,GAAoBtyB,OAAQnP,EAAR,CAAYmoF,EAAZ,CAAtB,EACCh5E,OAAQxP,EAAR,CAAYwoF,EAAZ,GAAoBh5E,OAAQnP,EAAR,CAAYyhC,EAAZ,CAD1B,CAC+C,MAAO,KAAP,CAE/C,MAAOgkD,MAAM9lF,EAAN,CAAU8hC,EAAV,CAAczhC,EAAd,EAAqB,CAArB,GAA2BylF,KAAM9lF,EAAN,CAAU8hC,EAAV,CAAc0mD,EAAd,EAAqB,CAAhD,EACH1C,KAAMzlF,EAAN,CAAUmoF,EAAV,CAAcxoF,EAAd,EAAqB,CAArB,GAA2B8lF,KAAMzlF,EAAN,CAAUmoF,EAAV,CAAc1mD,EAAd,EAAqB,CADpD,CAGH,CAED;AAEA,QAASwmD,kBAAT,CAA4BloF,CAA5B,CAA+BX,CAA/B,CAAmC,CAE/B,GAAI8Z,GAAInZ,CAAR,CAEA,EAAG,CAEC,GAAKmZ,EAAE/e,CAAF,GAAQ4F,EAAE5F,CAAV,EAAe+e,EAAEswC,IAAF,CAAOrvD,CAAP,GAAa4F,EAAE5F,CAA9B,EAAmC+e,EAAE/e,CAAF,GAAQiF,EAAEjF,CAA7C,EAAkD+e,EAAEswC,IAAF,CAAOrvD,CAAP,GAAaiF,EAAEjF,CAAjE,EACD2hD,WAAY5iC,CAAZ,CAAeA,EAAEswC,IAAjB,CAAuBzpD,CAAvB,CAA0BX,CAA1B,CADJ,CACoC,CAEhC,MAAO,KAAP,CAEH,CAED8Z,EAAIA,EAAEswC,IAAN,CAEH,CAXD,MAWUtwC,IAAMnZ,CAXhB,EAaA,MAAO,MAAP,CAEH,CAED;AAEA,QAAS2mF,cAAT,CAAwB3mF,CAAxB,CAA2BX,CAA3B,CAA+B,CAE3B,MAAOqmF,MAAM1lF,EAAE2lF,IAAR,CAAc3lF,CAAd,CAAiBA,EAAEypD,IAAnB,EAA4B,CAA5B,CACHi8B,KAAM1lF,CAAN,CAASX,CAAT,CAAYW,EAAEypD,IAAd,GAAwB,CAAxB,EAA6Bi8B,KAAM1lF,CAAN,CAASA,EAAE2lF,IAAX,CAAiBtmF,CAAjB,GAAwB,CADlD,CAEHqmF,KAAM1lF,CAAN,CAASX,CAAT,CAAYW,EAAE2lF,IAAd,EAAuB,CAAvB,EAA4BD,KAAM1lF,CAAN,CAASA,EAAEypD,IAAX,CAAiBpqD,CAAjB,EAAuB,CAFvD,CAIH,CAED;AAEA,QAAS8oF,aAAT,CAAuBnoF,CAAvB,CAA0BX,CAA1B,CAA8B,CAE1B,GAAI8Z,GAAInZ,CAAR,CACIqoF,OAAS,KADb,CAEIL,GAAK,CAAEhoF,EAAE5X,CAAF,CAAMiX,EAAEjX,CAAV,EAAgB,CAFzB,CAGI6/F,GAAK,CAAEjoF,EAAE3X,CAAF,CAAMgX,EAAEhX,CAAV,EAAgB,CAHzB,CAKA,EAAG,CAEC,GAAS8wB,EAAE9wB,CAAF,CAAM4/F,EAAR,GAAmB9uE,EAAEswC,IAAF,CAAOphE,CAAP,CAAW4/F,EAAhC,EAA0C9uE,EAAEswC,IAAF,CAAOphE,CAAP,GAAa8wB,EAAE9wB,CAAzD,EACC2/F,GAAK,CAAE7uE,EAAEswC,IAAF,CAAOrhE,CAAP,CAAW+wB,EAAE/wB,CAAf,GAAuB6/F,GAAK9uE,EAAE9wB,CAA9B,GAAsC8wB,EAAEswC,IAAF,CAAOphE,CAAP,CAAW8wB,EAAE9wB,CAAnD,EAAyD8wB,EAAE/wB,CADtE,CAC4E,CAExEigG,OAAS,CAAEA,MAAX,CAEH,CAEDlvE,EAAIA,EAAEswC,IAAN,CAEH,CAXD,MAWUtwC,IAAMnZ,CAXhB,EAaA,MAAOqoF,OAAP,CAEH,CAED;AACA;AAEA,QAASxB,aAAT,CAAuB7mF,CAAvB,CAA0BX,CAA1B,CAA8B,CAE1B,GAAIqM,IAAK,GAAI48E,KAAJ,CAAUtoF,EAAE5F,CAAZ,CAAe4F,EAAE5X,CAAjB,CAAoB4X,EAAE3X,CAAtB,CAAT,CACIujB,GAAK,GAAI08E,KAAJ,CAAUjpF,EAAEjF,CAAZ,CAAeiF,EAAEjX,CAAjB,CAAoBiX,EAAEhX,CAAtB,CADT,CAEIkgG,GAAKvoF,EAAEypD,IAFX,CAGI++B,GAAKnpF,EAAEsmF,IAHX,CAKA3lF,EAAEypD,IAAF,CAASpqD,CAAT,CACAA,EAAEsmF,IAAF,CAAS3lF,CAAT,CAEA0L,GAAG+9C,IAAH,CAAU8+B,EAAV,CACAA,GAAG5C,IAAH,CAAUj6E,EAAV,CAEAE,GAAG69C,IAAH,CAAU/9C,EAAV,CACAA,GAAGi6E,IAAH,CAAU/5E,EAAV,CAEA48E,GAAG/+B,IAAH,CAAU79C,EAAV,CACAA,GAAG+5E,IAAH,CAAU6C,EAAV,CAEA,MAAO58E,GAAP,CAEH,CAED;AAEA,QAASy5E,WAAT,CAAqBjrF,CAArB,CAAwBhS,CAAxB,CAA2BC,CAA3B,CAA8B88F,IAA9B,CAAqC,CAEjC,GAAIhsE,GAAI,GAAImvE,KAAJ,CAAUluF,CAAV,CAAahS,CAAb,CAAgBC,CAAhB,CAAR,CAEA,GAAK,CAAE88F,IAAP,CAAc,CAEVhsE,EAAEwsE,IAAF,CAASxsE,CAAT,CACAA,EAAEswC,IAAF,CAAStwC,CAAT,CAEH,CALD,IAKO,CAEHA,EAAEswC,IAAF,CAAS07B,KAAK17B,IAAd,CACAtwC,EAAEwsE,IAAF,CAASR,IAAT,CACAA,KAAK17B,IAAL,CAAUk8B,IAAV,CAAiBxsE,CAAjB,CACAgsE,KAAK17B,IAAL,CAAYtwC,CAAZ,CAEH,CAED,MAAOA,EAAP,CAEH,CAED,QAASmsE,WAAT,CAAqBnsE,CAArB,CAAyB,CAErBA,EAAEswC,IAAF,CAAOk8B,IAAP,CAAcxsE,EAAEwsE,IAAhB,CACAxsE,EAAEwsE,IAAF,CAAOl8B,IAAP,CAActwC,EAAEswC,IAAhB,CAEA,GAAKtwC,EAAEutE,KAAP,CAAevtE,EAAEutE,KAAF,CAAQD,KAAR,CAAgBttE,EAAEstE,KAAlB,CACf,GAAKttE,EAAEstE,KAAP,CAAettE,EAAEstE,KAAF,CAAQC,KAAR,CAAgBvtE,EAAEutE,KAAlB,CAElB,CAED,QAAS4B,KAAT,CAAeluF,CAAf,CAAkBhS,CAAlB,CAAqBC,CAArB,CAAyB,CAErB;AACA,KAAK+R,CAAL,CAASA,CAAT,CAEA;AACA,KAAKhS,CAAL,CAASA,CAAT,CACA,KAAKC,CAAL,CAASA,CAAT,CAEA;AACA,KAAKs9F,IAAL,CAAY,IAAZ,CACA,KAAKl8B,IAAL,CAAY,IAAZ,CAEA;AACA,KAAKnhE,CAAL,CAAS,IAAT,CAEA;AACA,KAAKo+F,KAAL,CAAa,IAAb,CACA,KAAKD,KAAL,CAAa,IAAb,CAEA;AACA,KAAKhB,OAAL,CAAe,KAAf,CAEH,CAED,QAASL,WAAT,CAAqBx4F,IAArB,CAA2BmB,KAA3B,CAAkC8O,GAAlC,CAAuC6nF,GAAvC,CAA6C,CAEzC,GAAI+D,KAAM,CAAV,CAEA,IAAM,GAAIruF,GAAIrM,KAAR,CAAe25B,EAAI7qB,IAAM6nF,GAA/B,CAAoCtqF,EAAIyC,GAAxC,CAA6CzC,GAAKsqF,GAAlD,CAAwD,CAEpD+D,KAAO,CAAE77F,KAAM86B,CAAN,EAAY96B,KAAMwN,CAAN,CAAd,GAA8BxN,KAAMwN,EAAI,CAAV,EAAgBxN,KAAM86B,EAAI,CAAV,CAA9C,CAAP,CACAA,EAAIttB,CAAJ,CAEH,CAED,MAAOquF,IAAP,CAEH,CAED;;OAIA,GAAIC,YAAa,CAEb;AAEAhD,KAAM,cAAWiD,OAAX,CAAqB,CAEvB,GAAIrpF,GAAIqpF,QAAQnyF,MAAhB,CACA,GAAIwJ,GAAI,GAAR,CAEA,IAAM,GAAImZ,GAAI7Z,EAAI,CAAZ,CAAe2T,EAAI,CAAzB,CAA4BA,EAAI3T,CAAhC,CAAmC6Z,EAAIlG,GAAvC,CAA8C,CAE1CjT,GAAK2oF,QAASxvE,CAAT,EAAa/wB,CAAb,CAAiBugG,QAAS11E,CAAT,EAAa5qB,CAA9B,CAAkCsgG,QAAS11E,CAAT,EAAa7qB,CAAb,CAAiBugG,QAASxvE,CAAT,EAAa9wB,CAArE,CAEH,CAED,MAAO2X,GAAI,GAAX,CAEH,CAjBY,CAmBb4oF,YAAa,qBAAWC,GAAX,CAAiB,CAE1B,MAAOH,YAAWhD,IAAX,CAAiBmD,GAAjB,EAAyB,CAAhC,CAEH,CAvBY,CAyBbC,iBAAkB,0BAAWH,OAAX,CAAoBI,KAApB,CAA4B,CAE1C,GAAI5iE,UAAW,EAAf,CAAmB;AACnB,GAAIs+D,aAAc,EAAlB,CAAsB;AACtB,GAAIp/C,OAAQ,EAAZ,CAAgB;AAEhB2jD,gBAAiBL,OAAjB,EACAM,WAAY9iE,QAAZ,CAAsBwiE,OAAtB,EAEA;AAEA,GAAIO,WAAYP,QAAQnyF,MAAxB,CAEAuyF,MAAMI,OAAN,CAAeH,eAAf,EAEA,IAAM,GAAI5uF,GAAI,CAAd,CAAiBA,EAAI2uF,MAAMvyF,MAA3B,CAAmC4D,GAAnC,CAA0C,CAEtCqqF,YAAYx5F,IAAZ,CAAkBi+F,SAAlB,EACAA,WAAaH,MAAO3uF,CAAP,EAAW5D,MAAxB,CACAyyF,WAAY9iE,QAAZ,CAAsB4iE,MAAO3uF,CAAP,CAAtB,EAEH,CAED;AAEA,GAAIgpD,WAAYmhC,OAAOC,WAAP,CAAoBr+D,QAApB,CAA8Bs+D,WAA9B,CAAhB,CAEA;AAEA,IAAM,GAAIrqF,GAAI,CAAd,CAAiBA,EAAIgpD,UAAU5sD,MAA/B,CAAuC4D,GAAK,CAA5C,CAAgD,CAE5CirC,MAAMp6C,IAAN,CAAYm4D,UAAUphD,KAAV,CAAiB5H,CAAjB,CAAoBA,EAAI,CAAxB,CAAZ,EAEH,CAED,MAAOirC,MAAP,CAEH,CA9DY,CAAjB,CAkEA,QAAS2jD,gBAAT,CAA0BjkE,MAA1B,CAAmC,CAE/B,GAAI9iB,GAAI8iB,OAAOvuB,MAAf,CAEA,GAAKyL,EAAI,CAAJ,EAAS8iB,OAAQ9iB,EAAI,CAAZ,EAAgBmN,MAAhB,CAAwB2V,OAAQ,CAAR,CAAxB,CAAd,CAAsD,CAElDA,OAAOmuC,GAAP,GAEH,CAEJ,CAED,QAAS+1B,WAAT,CAAqB9iE,QAArB,CAA+BwiE,OAA/B,CAAyC,CAErC,IAAM,GAAIvuF,GAAI,CAAd,CAAiBA,EAAIuuF,QAAQnyF,MAA7B,CAAqC4D,GAArC,CAA4C,CAExC+rB,SAASl7B,IAAT,CAAe09F,QAASvuF,CAAT,EAAahS,CAA5B,EACA+9B,SAASl7B,IAAT,CAAe09F,QAASvuF,CAAT,EAAa/R,CAA5B,EAEH,CAEJ,CAED;;;;;;;;;;;;;;;;;;;;;OAuBA;AAEA,QAAS+gG,gBAAT,CAA0BnmD,MAA1B,CAAkC5f,OAAlC,CAA4C,CAExC8hB,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,iBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdL,OAAQA,MADM,CAEd5f,QAASA,OAFK,CAAlB,CAKA,KAAKojB,kBAAL,CAAyB,GAAI4iD,sBAAJ,CAA2BpmD,MAA3B,CAAmC5f,OAAnC,CAAzB,EACA,KAAKqmB,aAAL,GAEH,CAED0/C,gBAAgBnwF,SAAhB,CAA4BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA5B,CACAmwF,gBAAgBnwF,SAAhB,CAA0BI,WAA1B,CAAwC+vF,eAAxC,CAEAA,gBAAgBnwF,SAAhB,CAA0ByoB,MAA1B,CAAmC,UAAY,CAE3C,GAAI90B,MAAOu4C,SAASlsC,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAX,CAEA,GAAIsmC,QAAS,KAAKK,UAAL,CAAgBL,MAA7B,CACA,GAAI5f,SAAU,KAAKigB,UAAL,CAAgBjgB,OAA9B,CAEA,MAAO3B,QAAQuhB,MAAR,CAAgB5f,OAAhB,CAAyBz2B,IAAzB,CAAP,CAEH,CATD,CAWA;AAEA,QAASy8F,sBAAT,CAAgCpmD,MAAhC,CAAwC5f,OAAxC,CAAkD,CAE9CmrB,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,uBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdL,OAAQA,MADM,CAEd5f,QAASA,OAFK,CAAlB,CAKA4f,OAASzmC,MAAM63B,OAAN,CAAe4O,MAAf,EAA0BA,MAA1B,CAAmC,CAAEA,MAAF,CAA5C,CAEA,GAAI7xC,OAAQ,IAAZ,CAEA,GAAIk4F,eAAgB,EAApB,CACA,GAAIjU,SAAU,EAAd,CAEA,IAAM,GAAIj7E,GAAI,CAAR,CAAW6H,EAAIghC,OAAOzsC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAImpC,OAAQN,OAAQ7oC,CAAR,CAAZ,CACAmvF,SAAUhmD,KAAV,EAEH,CAED;AAEA,KAAKsL,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4B67C,aAA5B,CAA2C,CAA3C,CAA/B,EACA,KAAKz6C,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B4nC,OAA5B,CAAqC,CAArC,CAAzB,EAEA,KAAKxtC,oBAAL,GAEA;AAEA,QAAS0hD,SAAT,CAAmBhmD,KAAnB,CAA2B,CAEvB,GAAIimD,aAAc,EAAlB,CAEA;AAEA,GAAIC,eAAgBpmE,QAAQomE,aAAR,GAA0Bj7F,SAA1B,CAAsC60B,QAAQomE,aAA9C,CAA8D,EAAlF,CACA,GAAIC,OAAQrmE,QAAQqmE,KAAR,GAAkBl7F,SAAlB,CAA8B60B,QAAQqmE,KAAtC,CAA8C,CAA1D,CACA,GAAIluD,OAAQnY,QAAQmY,KAAR,GAAkBhtC,SAAlB,CAA8B60B,QAAQmY,KAAtC,CAA8C,GAA1D,CAEA,GAAImuD,cAAetmE,QAAQsmE,YAAR,GAAyBn7F,SAAzB,CAAqC60B,QAAQsmE,YAA7C,CAA4D,IAA/E,CACA,GAAIC,gBAAiBvmE,QAAQumE,cAAR,GAA2Bp7F,SAA3B,CAAuC60B,QAAQumE,cAA/C,CAAgE,CAArF,CACA,GAAIC,WAAYxmE,QAAQwmE,SAAR,GAAsBr7F,SAAtB,CAAkC60B,QAAQwmE,SAA1C,CAAsDD,eAAiB,CAAvF,CACA,GAAIE,eAAgBzmE,QAAQymE,aAAR,GAA0Bt7F,SAA1B,CAAsC60B,QAAQymE,aAA9C,CAA8D,CAAlF,CAEA,GAAIC,aAAc1mE,QAAQ0mE,WAA1B,CAEA,GAAIC,OAAQ3mE,QAAQ4mE,WAAR,GAAwBz7F,SAAxB,CAAoC60B,QAAQ4mE,WAA5C,CAA0DC,gBAAtE,CAEA;AAEA,GAAK7mE,QAAQrmB,MAAR,GAAmBxO,SAAxB,CAAoC,CAEhCzB,QAAQgK,IAAR,CAAc,gEAAd,EACAykC,MAAQnY,QAAQrmB,MAAhB,CAEH,CAED;AAEA,GAAImtF,WAAJ,CAAgBC,cAAgB,KAAhC,CACA,GAAIC,WAAJ,CAAgBC,QAAhB,CAA0BvrE,MAA1B,CAAkCwrE,SAAlC,CAEA,GAAKR,WAAL,CAAmB,CAEfI,WAAaJ,YAAYS,eAAZ,CAA6Bd,KAA7B,CAAb,CAEAU,cAAgB,IAAhB,CACAT,aAAe,KAAf,CAAsB;AAEtB;AAEA;AAEAU,WAAaN,YAAY/G,mBAAZ,CAAiC0G,KAAjC,CAAwC,KAAxC,CAAb,CAEA;AAEAY,SAAW,GAAI57F,QAAJ,EAAX,CACAqwB,OAAS,GAAIrwB,QAAJ,EAAT,CACA67F,UAAY,GAAI77F,QAAJ,EAAZ,CAEH,CAED;AAEA,GAAK,CAAEi7F,YAAP,CAAsB,CAElBG,cAAgB,CAAhB,CACAF,eAAiB,CAAjB,CACAC,UAAY,CAAZ,CAEH,CAED;AAEA,GAAIY,MAAJ,CAAWvxE,CAAX,CAAcwxE,EAAd,CAAkB;AAElB,GAAIC,aAAcpnD,MAAMqnD,aAAN,CAAqBnB,aAArB,CAAlB,CAEA,GAAItjE,UAAWwkE,YAAYpnD,KAA3B,CACA,GAAIwlD,OAAQ4B,YAAY5B,KAAxB,CAEA,GAAI8B,SAAU,CAAEnC,WAAWE,WAAX,CAAwBziE,QAAxB,CAAhB,CAEA,GAAK0kE,OAAL,CAAe,CAEX1kE,SAAWA,SAAS0kE,OAAT,EAAX,CAEA;AAEA,IAAM3xE,EAAI,CAAJ,CAAOwxE,GAAK3B,MAAMvyF,MAAxB,CAAgC0iB,EAAIwxE,EAApC,CAAwCxxE,GAAxC,CAA+C,CAE3CuxE,MAAQ1B,MAAO7vE,CAAP,CAAR,CAEA,GAAKwvE,WAAWE,WAAX,CAAwB6B,KAAxB,CAAL,CAAuC,CAEnC1B,MAAO7vE,CAAP,EAAauxE,MAAMI,OAAN,EAAb,CAEH,CAEJ,CAEJ,CAGD,GAAIxlD,OAAQqjD,WAAWI,gBAAX,CAA6B3iE,QAA7B,CAAuC4iE,KAAvC,CAAZ,CAEA,cAEA,GAAIJ,SAAUxiE,QAAd,CAAwB;AAExB,IAAMjN,EAAI,CAAJ,CAAOwxE,GAAK3B,MAAMvyF,MAAxB,CAAgC0iB,EAAIwxE,EAApC,CAAwCxxE,GAAxC,CAA+C,CAE3CuxE,MAAQ1B,MAAO7vE,CAAP,CAAR,CAEAiN,SAAWA,SAAS1pB,MAAT,CAAiBguF,KAAjB,CAAX,CAEH,CAGD,QAASK,SAAT,CAAmBC,EAAnB,CAAuBrN,GAAvB,CAA4Bt4D,IAA5B,CAAmC,CAE/B,GAAK,CAAEs4D,GAAP,CAAa3wF,QAAQ+iB,KAAR,CAAe,2CAAf,EAEb,MAAO4tE,KAAIxyF,KAAJ,GAAY6K,cAAZ,CAA4BqvB,IAA5B,EAAmCx7B,GAAnC,CAAwCmhG,EAAxC,CAAP,CAEH,CAED,GAAI1rF,EAAJ,CAAO2rF,EAAP,CAAWnrF,CAAX,CAAcvX,CAAd,CACI2iG,IADJ,CACUC,KAAO/kE,SAAS3vB,MAD1B,CAEI6vC,IAFJ,CAEU8kD,KAAO9lD,MAAM7uC,MAFvB,CAKA;AAGA,QAAS40F,YAAT,CAAsBC,IAAtB,CAA4BC,MAA5B,CAAoCC,MAApC,CAA6C,CAEzC;AACA;AACA;AACA;AACA;AACA;AAEA,GAAIC,UAAJ,CAAeC,SAAf,CAA0BC,SAA1B,CAAqC;AAErC;AACA;AAEA,GAAIC,UAAWN,KAAKjjG,CAAL,CAASkjG,OAAOljG,CAA/B,CACIwjG,SAAWP,KAAKhjG,CAAL,CAASijG,OAAOjjG,CAD/B,CAEA,GAAIwjG,UAAWN,OAAOnjG,CAAP,CAAWijG,KAAKjjG,CAA/B,CACI0jG,SAAWP,OAAOljG,CAAP,CAAWgjG,KAAKhjG,CAD/B,CAGA,GAAI0jG,cAAiBJ,SAAWA,QAAX,CAAsBC,SAAWA,QAAtD,CAEA;AACA,GAAII,YAAeL,SAAWG,QAAX,CAAsBF,SAAWC,QAApD,CAEA,GAAK//F,KAAK6iB,GAAL,CAAUq9E,UAAV,EAAyBnrF,OAAOC,OAArC,CAA+C,CAE3C;AAEA;AAEA,GAAImrF,YAAangG,KAAK0M,IAAL,CAAWuzF,YAAX,CAAjB,CACA,GAAIG,YAAapgG,KAAK0M,IAAL,CAAWqzF,SAAWA,QAAX,CAAsBC,SAAWA,QAA5C,CAAjB,CAEA;AAEA,GAAIK,eAAkBb,OAAOljG,CAAP,CAAWwjG,SAAWK,UAA5C,CACA,GAAIG,eAAkBd,OAAOjjG,CAAP,CAAWsjG,SAAWM,UAA5C,CAEA,GAAII,eAAkBd,OAAOnjG,CAAP,CAAW0jG,SAAWI,UAA5C,CACA,GAAII,eAAkBf,OAAOljG,CAAP,CAAWwjG,SAAWK,UAA5C,CAEA;AAEA,GAAIK,IAAK,CAAE,CAAEF,cAAgBF,aAAlB,EAAoCL,QAApC,CACP,CAAEQ,cAAgBF,aAAlB,EAAoCP,QAD/B,GAEHF,SAAWG,QAAX,CAAsBF,SAAWC,QAF9B,CAAT,CAIA;AAEAL,UAAcW,cAAgBR,SAAWY,EAA3B,CAAgClB,KAAKjjG,CAAnD,CACAqjG,UAAcW,cAAgBR,SAAWW,EAA3B,CAAgClB,KAAKhjG,CAAnD,CAEA;AACA;AACA,GAAImkG,eAAkBhB,UAAYA,SAAZ,CAAwBC,UAAYA,SAA1D,CACA,GAAKe,eAAiB,CAAtB,CAA0B,CAEtB,MAAO,IAAI33F,QAAJ,CAAa22F,SAAb,CAAwBC,SAAxB,CAAP,CAEH,CAJD,IAIO,CAEHC,UAAY5/F,KAAK0M,IAAL,CAAWg0F,cAAgB,CAA3B,CAAZ,CAEH,CAEJ,CAzCD,IAyCO,CAEH;AAEA,GAAIC,cAAe,KAAnB,CAA0B;AAC1B,GAAKd,SAAW9qF,OAAOC,OAAvB,CAAiC,CAE7B,GAAK+qF,SAAWhrF,OAAOC,OAAvB,CAAiC,CAE7B2rF,aAAe,IAAf,CAEH,CAEJ,CARD,IAQO,CAEH,GAAKd,SAAW,CAAE9qF,OAAOC,OAAzB,CAAmC,CAE/B,GAAK+qF,SAAW,CAAEhrF,OAAOC,OAAzB,CAAmC,CAE/B2rF,aAAe,IAAf,CAEH,CAEJ,CARD,IAQO,CAEH,GAAK3gG,KAAKkV,IAAL,CAAW4qF,QAAX,IAA0B9/F,KAAKkV,IAAL,CAAW8qF,QAAX,CAA/B,CAAuD,CAEnDW,aAAe,IAAf,CAEH,CAEJ,CAEJ,CAED,GAAKA,YAAL,CAAoB,CAEhB;AACAjB,UAAY,CAAEI,QAAd,CACAH,UAAYE,QAAZ,CACAD,UAAY5/F,KAAK0M,IAAL,CAAWuzF,YAAX,CAAZ,CAEH,CAPD,IAOO,CAEH;AACAP,UAAYG,QAAZ,CACAF,UAAYG,QAAZ,CACAF,UAAY5/F,KAAK0M,IAAL,CAAWuzF,aAAe,CAA1B,CAAZ,CAEH,CAEJ,CAED,MAAO,IAAIl3F,QAAJ,CAAa22F,UAAYE,SAAzB,CAAoCD,UAAYC,SAAhD,CAAP,CAEH,CAGD,GAAIgB,kBAAmB,EAAvB,CAEA,IAAM,GAAItyF,GAAI,CAAR,CAAW6qB,GAAK0jE,QAAQnyF,MAAxB,CAAgCkxB,EAAIzC,GAAK,CAAzC,CAA4CjnB,EAAI5D,EAAI,CAA1D,CAA6DA,EAAI6qB,EAAjE,CAAqE7qB,IAAMstB,GAAN,CAAY1pB,GAAjF,CAAwF,CAEpF,GAAK0pB,IAAMzC,EAAX,CAAgByC,EAAI,CAAJ,CAChB,GAAK1pB,IAAMinB,EAAX,CAAgBjnB,EAAI,CAAJ,CAEhB;AACA;AAEA0uF,iBAAkBtyF,CAAlB,EAAwBgxF,YAAazC,QAASvuF,CAAT,CAAb,CAA2BuuF,QAASjhE,CAAT,CAA3B,CAAyCihE,QAAS3qF,CAAT,CAAzC,CAAxB,CAEH,CAED,GAAI2uF,gBAAiB,EAArB,CACIC,gBADJ,CACsBC,kBAAoBH,iBAAiBjwF,MAAjB,EAD1C,CAGA,IAAMyc,EAAI,CAAJ,CAAOwxE,GAAK3B,MAAMvyF,MAAxB,CAAgC0iB,EAAIwxE,EAApC,CAAwCxxE,GAAxC,CAA+C,CAE3CuxE,MAAQ1B,MAAO7vE,CAAP,CAAR,CAEA0zE,iBAAmB,EAAnB,CAEA,IAAMxyF,EAAI,CAAJ,CAAO6qB,GAAKwlE,MAAMj0F,MAAlB,CAA0BkxB,EAAIzC,GAAK,CAAnC,CAAsCjnB,EAAI5D,EAAI,CAApD,CAAuDA,EAAI6qB,EAA3D,CAA+D7qB,IAAMstB,GAAN,CAAY1pB,GAA3E,CAAkF,CAE9E,GAAK0pB,IAAMzC,EAAX,CAAgByC,EAAI,CAAJ,CAChB,GAAK1pB,IAAMinB,EAAX,CAAgBjnB,EAAI,CAAJ,CAEhB;AACA4uF,iBAAkBxyF,CAAlB,EAAwBgxF,YAAaX,MAAOrwF,CAAP,CAAb,CAAyBqwF,MAAO/iE,CAAP,CAAzB,CAAqC+iE,MAAOzsF,CAAP,CAArC,CAAxB,CAEH,CAED2uF,eAAe1hG,IAAf,CAAqB2hG,gBAArB,EACAC,kBAAoBA,kBAAkBpwF,MAAlB,CAA0BmwF,gBAA1B,CAApB,CAEH,CAGD;AAEA,IAAMvtF,EAAI,CAAV,CAAaA,EAAIyqF,aAAjB,CAAgCzqF,GAAhC,CAAuC,CAEnC;AAEAQ,EAAIR,EAAIyqF,aAAR,CACAxhG,EAAIshG,eAAiB99F,KAAKyS,GAAL,CAAUsB,EAAI/T,KAAKC,EAAT,CAAc,CAAxB,CAArB,CACAi/F,GAAKnB,UAAY/9F,KAAK0S,GAAL,CAAUqB,EAAI/T,KAAKC,EAAT,CAAc,CAAxB,CAAjB,CAEA;AAEA,IAAMqO,EAAI,CAAJ,CAAO6qB,GAAK0jE,QAAQnyF,MAA1B,CAAkC4D,EAAI6qB,EAAtC,CAA0C7qB,GAA1C,CAAiD,CAE7C6wF,KAAOH,SAAUnC,QAASvuF,CAAT,CAAV,CAAwBsyF,iBAAkBtyF,CAAlB,CAAxB,CAA+C4wF,EAA/C,CAAP,CAEAr1F,EAAGs1F,KAAK7iG,CAAR,CAAW6iG,KAAK5iG,CAAhB,CAAmB,CAAEC,CAArB,EAEH,CAED;AAEA,IAAM4wB,EAAI,CAAJ,CAAOwxE,GAAK3B,MAAMvyF,MAAxB,CAAgC0iB,EAAIwxE,EAApC,CAAwCxxE,GAAxC,CAA+C,CAE3CuxE,MAAQ1B,MAAO7vE,CAAP,CAAR,CACA0zE,iBAAmBD,eAAgBzzE,CAAhB,CAAnB,CAEA,IAAM9e,EAAI,CAAJ,CAAO6qB,GAAKwlE,MAAMj0F,MAAxB,CAAgC4D,EAAI6qB,EAApC,CAAwC7qB,GAAxC,CAA+C,CAE3C6wF,KAAOH,SAAUL,MAAOrwF,CAAP,CAAV,CAAsBwyF,iBAAkBxyF,CAAlB,CAAtB,CAA6C4wF,EAA7C,CAAP,CAEAr1F,EAAGs1F,KAAK7iG,CAAR,CAAW6iG,KAAK5iG,CAAhB,CAAmB,CAAEC,CAArB,EAEH,CAEJ,CAEJ,CAED0iG,GAAKnB,SAAL,CAEA;AAEA,IAAMzvF,EAAI,CAAV,CAAaA,EAAI8wF,IAAjB,CAAuB9wF,GAAvB,CAA8B,CAE1B6wF,KAAOtB,aAAemB,SAAU3kE,SAAU/rB,CAAV,CAAV,CAAyByyF,kBAAmBzyF,CAAnB,CAAzB,CAAiD4wF,EAAjD,CAAf,CAAuE7kE,SAAU/rB,CAAV,CAA9E,CAEA,GAAK,CAAEgwF,aAAP,CAAuB,CAEnBz0F,EAAGs1F,KAAK7iG,CAAR,CAAW6iG,KAAK5iG,CAAhB,CAAmB,CAAnB,EAEH,CAJD,IAIO,CAEH;AAEA02B,OAAO1tB,IAAP,CAAag5F,WAAWzjD,OAAX,CAAoB,CAApB,CAAb,EAAuC7wC,cAAvC,CAAuDk1F,KAAK7iG,CAA5D,EACAkiG,SAASj5F,IAAT,CAAeg5F,WAAWvH,SAAX,CAAsB,CAAtB,CAAf,EAA2C/sF,cAA3C,CAA2Dk1F,KAAK5iG,CAAhE,EAEAkiG,UAAUl5F,IAAV,CAAgB84F,WAAY,CAAZ,CAAhB,EAAkCvgG,GAAlC,CAAuCm1B,MAAvC,EAAgDn1B,GAAhD,CAAqD0gG,QAArD,EAEA30F,EAAG40F,UAAUniG,CAAb,CAAgBmiG,UAAUliG,CAA1B,CAA6BkiG,UAAUjiG,CAAvC,EAEH,CAEJ,CAED;AACA;AAEA,GAAIuW,EAAJ,CAEA,IAAMA,EAAI,CAAV,CAAaA,GAAK6qF,KAAlB,CAAyB7qF,GAAzB,CAAgC,CAE5B,IAAMzE,EAAI,CAAV,CAAaA,EAAI8wF,IAAjB,CAAuB9wF,GAAvB,CAA8B,CAE1B6wF,KAAOtB,aAAemB,SAAU3kE,SAAU/rB,CAAV,CAAV,CAAyByyF,kBAAmBzyF,CAAnB,CAAzB,CAAiD4wF,EAAjD,CAAf,CAAuE7kE,SAAU/rB,CAAV,CAA9E,CAEA,GAAK,CAAEgwF,aAAP,CAAuB,CAEnBz0F,EAAGs1F,KAAK7iG,CAAR,CAAW6iG,KAAK5iG,CAAhB,CAAmBmzC,MAAQkuD,KAAR,CAAgB7qF,CAAnC,EAEH,CAJD,IAIO,CAEH;AAEAkgB,OAAO1tB,IAAP,CAAag5F,WAAWzjD,OAAX,CAAoB/nC,CAApB,CAAb,EAAuC9I,cAAvC,CAAuDk1F,KAAK7iG,CAA5D,EACAkiG,SAASj5F,IAAT,CAAeg5F,WAAWvH,SAAX,CAAsBjkF,CAAtB,CAAf,EAA2C9I,cAA3C,CAA2Dk1F,KAAK5iG,CAAhE,EAEAkiG,UAAUl5F,IAAV,CAAgB84F,WAAYtrF,CAAZ,CAAhB,EAAkCjV,GAAlC,CAAuCm1B,MAAvC,EAAgDn1B,GAAhD,CAAqD0gG,QAArD,EAEA30F,EAAG40F,UAAUniG,CAAb,CAAgBmiG,UAAUliG,CAA1B,CAA6BkiG,UAAUjiG,CAAvC,EAEH,CAEJ,CAEJ,CAGD;AAEA;AACA,IAAM+W,EAAIyqF,cAAgB,CAA1B,CAA6BzqF,GAAK,CAAlC,CAAqCA,GAArC,CAA4C,CAExCQ,EAAIR,EAAIyqF,aAAR,CACAxhG,EAAIshG,eAAiB99F,KAAKyS,GAAL,CAAUsB,EAAI/T,KAAKC,EAAT,CAAc,CAAxB,CAArB,CACAi/F,GAAKnB,UAAY/9F,KAAK0S,GAAL,CAAUqB,EAAI/T,KAAKC,EAAT,CAAc,CAAxB,CAAjB,CAEA;AAEA,IAAMqO,EAAI,CAAJ,CAAO6qB,GAAK0jE,QAAQnyF,MAA1B,CAAkC4D,EAAI6qB,EAAtC,CAA0C7qB,GAA1C,CAAiD,CAE7C6wF,KAAOH,SAAUnC,QAASvuF,CAAT,CAAV,CAAwBsyF,iBAAkBtyF,CAAlB,CAAxB,CAA+C4wF,EAA/C,CAAP,CACAr1F,EAAGs1F,KAAK7iG,CAAR,CAAW6iG,KAAK5iG,CAAhB,CAAmBmzC,MAAQlzC,CAA3B,EAEH,CAED;AAEA,IAAM4wB,EAAI,CAAJ,CAAOwxE,GAAK3B,MAAMvyF,MAAxB,CAAgC0iB,EAAIwxE,EAApC,CAAwCxxE,GAAxC,CAA+C,CAE3CuxE,MAAQ1B,MAAO7vE,CAAP,CAAR,CACA0zE,iBAAmBD,eAAgBzzE,CAAhB,CAAnB,CAEA,IAAM9e,EAAI,CAAJ,CAAO6qB,GAAKwlE,MAAMj0F,MAAxB,CAAgC4D,EAAI6qB,EAApC,CAAwC7qB,GAAxC,CAA+C,CAE3C6wF,KAAOH,SAAUL,MAAOrwF,CAAP,CAAV,CAAsBwyF,iBAAkBxyF,CAAlB,CAAtB,CAA6C4wF,EAA7C,CAAP,CAEA,GAAK,CAAEZ,aAAP,CAAuB,CAEnBz0F,EAAGs1F,KAAK7iG,CAAR,CAAW6iG,KAAK5iG,CAAhB,CAAmBmzC,MAAQlzC,CAA3B,EAEH,CAJD,IAIO,CAEHqN,EAAGs1F,KAAK7iG,CAAR,CAAW6iG,KAAK5iG,CAAL,CAAS8hG,WAAYT,MAAQ,CAApB,EAAwBrhG,CAA5C,CAA+C8hG,WAAYT,MAAQ,CAApB,EAAwBthG,CAAxB,CAA4BE,CAA3E,EAEH,CAEJ,CAEJ,CAEJ,CAED,WAEA;AAEAwkG,gBAEA;AAEAC,iBAGA;AAEA,QAASD,cAAT,EAAyB,CAErB,GAAI/+F,OAAQu7F,cAAc9yF,MAAd,CAAuB,CAAnC,CAEA,GAAKmzF,YAAL,CAAoB,CAEhB,GAAInb,OAAQ,CAAZ,CAAe;AACf,GAAI38E,QAASq5F,KAAO1c,KAApB,CAEA;AAEA,IAAMp0E,EAAI,CAAV,CAAaA,EAAI+wF,IAAjB,CAAuB/wF,GAAvB,CAA8B,CAE1BisC,KAAOhB,MAAOjrC,CAAP,CAAP,CACA4yF,GAAI3mD,KAAM,CAAN,EAAYx0C,MAAhB,CAAwBw0C,KAAM,CAAN,EAAYx0C,MAApC,CAA4Cw0C,KAAM,CAAN,EAAYx0C,MAAxD,EAEH,CAED28E,MAAQkb,MAAQI,cAAgB,CAAhC,CACAj4F,OAASq5F,KAAO1c,KAAhB,CAEA;AAEA,IAAMp0E,EAAI,CAAV,CAAaA,EAAI+wF,IAAjB,CAAuB/wF,GAAvB,CAA8B,CAE1BisC,KAAOhB,MAAOjrC,CAAP,CAAP,CACA4yF,GAAI3mD,KAAM,CAAN,EAAYx0C,MAAhB,CAAwBw0C,KAAM,CAAN,EAAYx0C,MAApC,CAA4Cw0C,KAAM,CAAN,EAAYx0C,MAAxD,EAEH,CAEJ,CA1BD,IA0BO,CAEH;AAEA,IAAMuI,EAAI,CAAV,CAAaA,EAAI+wF,IAAjB,CAAuB/wF,GAAvB,CAA8B,CAE1BisC,KAAOhB,MAAOjrC,CAAP,CAAP,CACA4yF,GAAI3mD,KAAM,CAAN,CAAJ,CAAeA,KAAM,CAAN,CAAf,CAA0BA,KAAM,CAAN,CAA1B,EAEH,CAED;AAEA,IAAMjsC,EAAI,CAAV,CAAaA,EAAI+wF,IAAjB,CAAuB/wF,GAAvB,CAA8B,CAE1BisC,KAAOhB,MAAOjrC,CAAP,CAAP,CACA4yF,GAAI3mD,KAAM,CAAN,EAAY6kD,KAAOxB,KAAvB,CAA8BrjD,KAAM,CAAN,EAAY6kD,KAAOxB,KAAjD,CAAwDrjD,KAAM,CAAN,EAAY6kD,KAAOxB,KAA3E,EAEH,CAEJ,CAEDt4F,MAAM49C,QAAN,CAAgBjhD,KAAhB,CAAuBu7F,cAAc9yF,MAAd,CAAuB,CAAvB,CAA2BzI,KAAlD,CAAyD,CAAzD,EAEH,CAED;AAEA,QAASg/F,eAAT,EAA0B,CAEtB,GAAIh/F,OAAQu7F,cAAc9yF,MAAd,CAAuB,CAAnC,CACA,GAAIy2F,aAAc,CAAlB,CACAC,UAAWvE,OAAX,CAAoBsE,WAApB,EACAA,aAAetE,QAAQnyF,MAAvB,CAEA,IAAM0iB,EAAI,CAAJ,CAAOwxE,GAAK3B,MAAMvyF,MAAxB,CAAgC0iB,EAAIwxE,EAApC,CAAwCxxE,GAAxC,CAA+C,CAE3CuxE,MAAQ1B,MAAO7vE,CAAP,CAAR,CACAg0E,UAAWzC,KAAX,CAAkBwC,WAAlB,EAEA;AACAA,aAAexC,MAAMj0F,MAArB,CAEH,CAGDpF,MAAM49C,QAAN,CAAgBjhD,KAAhB,CAAuBu7F,cAAc9yF,MAAd,CAAuB,CAAvB,CAA2BzI,KAAlD,CAAyD,CAAzD,EAGH,CAED,QAASm/F,UAAT,CAAoBvE,OAApB,CAA6BsE,WAA7B,CAA2C,CAEvC,GAAIvlE,EAAJ,CAAO1pB,CAAP,CACA5D,EAAIuuF,QAAQnyF,MAAZ,CAEA,MAAQ,EAAG4D,CAAH,EAAQ,CAAhB,CAAoB,CAEhBstB,EAAIttB,CAAJ,CACA4D,EAAI5D,EAAI,CAAR,CACA,GAAK4D,EAAI,CAAT,CAAaA,EAAI2qF,QAAQnyF,MAAR,CAAiB,CAArB,CAEb;AAEA,GAAIqI,GAAI,CAAR,CACIsuF,GAAKzD,MAAQI,cAAgB,CADjC,CAGA,IAAMjrF,EAAI,CAAV,CAAaA,EAAIsuF,EAAjB,CAAqBtuF,GAArB,CAA4B,CAExB,GAAIuuF,OAAQlC,KAAOrsF,CAAnB,CACA,GAAIwuF,OAAQnC,MAASrsF,EAAI,CAAb,CAAZ,CAEA,GAAImB,GAAIitF,YAAcvlE,CAAd,CAAkB0lE,KAA1B,CACI/tF,EAAI4tF,YAAcjvF,CAAd,CAAkBovF,KAD1B,CAEIx9E,EAAIq9E,YAAcjvF,CAAd,CAAkBqvF,KAF1B,CAGIr7E,EAAIi7E,YAAcvlE,CAAd,CAAkB2lE,KAH1B,CAKAC,GAAIttF,CAAJ,CAAOX,CAAP,CAAUuQ,CAAV,CAAaoC,CAAb,EAEH,CAEJ,CAEJ,CAED,QAASrc,EAAT,CAAYvN,CAAZ,CAAeC,CAAf,CAAkBC,CAAlB,CAAsB,CAElBkhG,YAAYv+F,IAAZ,CAAkB7C,CAAlB,EACAohG,YAAYv+F,IAAZ,CAAkB5C,CAAlB,EACAmhG,YAAYv+F,IAAZ,CAAkB3C,CAAlB,EAEH,CAGD,QAAS0kG,GAAT,CAAahtF,CAAb,CAAgBX,CAAhB,CAAmBuQ,CAAnB,CAAuB,CAEnB29E,UAAWvtF,CAAX,EACAutF,UAAWluF,CAAX,EACAkuF,UAAW39E,CAAX,EAEA,GAAI49E,WAAYlE,cAAc9yF,MAAd,CAAuB,CAAvC,CACA,GAAIqwC,KAAMmjD,MAAMyD,aAAN,CAAqBr8F,KAArB,CAA4Bk4F,aAA5B,CAA2CkE,UAAY,CAAvD,CAA0DA,UAAY,CAAtE,CAAyEA,UAAY,CAArF,CAAV,CAEAE,MAAO7mD,IAAK,CAAL,CAAP,EACA6mD,MAAO7mD,IAAK,CAAL,CAAP,EACA6mD,MAAO7mD,IAAK,CAAL,CAAP,EAEH,CAED,QAASymD,GAAT,CAAattF,CAAb,CAAgBX,CAAhB,CAAmBuQ,CAAnB,CAAsBoC,CAAtB,CAA0B,CAEtBu7E,UAAWvtF,CAAX,EACAutF,UAAWluF,CAAX,EACAkuF,UAAWv7E,CAAX,EAEAu7E,UAAWluF,CAAX,EACAkuF,UAAW39E,CAAX,EACA29E,UAAWv7E,CAAX,EAGA,GAAIw7E,WAAYlE,cAAc9yF,MAAd,CAAuB,CAAvC,CACA,GAAIqwC,KAAMmjD,MAAM2D,kBAAN,CAA0Bv8F,KAA1B,CAAiCk4F,aAAjC,CAAgDkE,UAAY,CAA5D,CAA+DA,UAAY,CAA3E,CAA8EA,UAAY,CAA1F,CAA6FA,UAAY,CAAzG,CAAV,CAEAE,MAAO7mD,IAAK,CAAL,CAAP,EACA6mD,MAAO7mD,IAAK,CAAL,CAAP,EACA6mD,MAAO7mD,IAAK,CAAL,CAAP,EAEA6mD,MAAO7mD,IAAK,CAAL,CAAP,EACA6mD,MAAO7mD,IAAK,CAAL,CAAP,EACA6mD,MAAO7mD,IAAK,CAAL,CAAP,EAEH,CAED,QAAS0mD,UAAT,CAAoBhsF,KAApB,CAA4B,CAExB+nF,cAAcr+F,IAAd,CAAoBu+F,YAAajoF,MAAQ,CAAR,CAAY,CAAzB,CAApB,EACA+nF,cAAcr+F,IAAd,CAAoBu+F,YAAajoF,MAAQ,CAAR,CAAY,CAAzB,CAApB,EACA+nF,cAAcr+F,IAAd,CAAoBu+F,YAAajoF,MAAQ,CAAR,CAAY,CAAzB,CAApB,EAEH,CAGD,QAASmsF,MAAT,CAAgBE,OAAhB,CAA0B,CAEtBvY,QAAQpqF,IAAR,CAAc2iG,QAAQxlG,CAAtB,EACAitF,QAAQpqF,IAAR,CAAc2iG,QAAQvlG,CAAtB,EAEH,CAEJ,CAEJ,CAEDghG,sBAAsBpwF,SAAtB,CAAkCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAlC,CACAowF,sBAAsBpwF,SAAtB,CAAgCI,WAAhC,CAA8CgwF,qBAA9C,CAEAA,sBAAsBpwF,SAAtB,CAAgCyoB,MAAhC,CAAyC,UAAY,CAEjD,GAAI90B,MAAO4hD,eAAev1C,SAAf,CAAyByoB,MAAzB,CAAgC/kB,IAAhC,CAAsC,IAAtC,CAAX,CAEA,GAAIsmC,QAAS,KAAKK,UAAL,CAAgBL,MAA7B,CACA,GAAI5f,SAAU,KAAKigB,UAAL,CAAgBjgB,OAA9B,CAEA,MAAO3B,QAAQuhB,MAAR,CAAgB5f,OAAhB,CAAyBz2B,IAAzB,CAAP,CAEH,CATD,CAWA;AAEA,GAAIs9F,kBAAmB,CAEnBuD,cAAe,uBAAWxnE,QAAX,CAAqBE,QAArB,CAA+B0nE,MAA/B,CAAuCC,MAAvC,CAA+CC,MAA/C,CAAwD,CAEnE,GAAIC,KAAM7nE,SAAU0nE,OAAS,CAAnB,CAAV,CACA,GAAII,KAAM9nE,SAAU0nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIK,KAAM/nE,SAAU2nE,OAAS,CAAnB,CAAV,CACA,GAAIK,KAAMhoE,SAAU2nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIM,KAAMjoE,SAAU4nE,OAAS,CAAnB,CAAV,CACA,GAAIM,KAAMloE,SAAU4nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CAEA,MAAO,CACH,GAAIl5F,QAAJ,CAAam5F,GAAb,CAAkBC,GAAlB,CADG,CAEH,GAAIp5F,QAAJ,CAAaq5F,GAAb,CAAkBC,GAAlB,CAFG,CAGH,GAAIt5F,QAAJ,CAAau5F,GAAb,CAAkBC,GAAlB,CAHG,CAAP,CAMH,CAjBkB,CAmBnBV,mBAAoB,4BAAW1nE,QAAX,CAAqBE,QAArB,CAA+B0nE,MAA/B,CAAuCC,MAAvC,CAA+CC,MAA/C,CAAuDO,MAAvD,CAAgE,CAEhF,GAAIN,KAAM7nE,SAAU0nE,OAAS,CAAnB,CAAV,CACA,GAAII,KAAM9nE,SAAU0nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIU,KAAMpoE,SAAU0nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIK,KAAM/nE,SAAU2nE,OAAS,CAAnB,CAAV,CACA,GAAIK,KAAMhoE,SAAU2nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIU,KAAMroE,SAAU2nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIM,KAAMjoE,SAAU4nE,OAAS,CAAnB,CAAV,CACA,GAAIM,KAAMloE,SAAU4nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIU,KAAMtoE,SAAU4nE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIW,KAAMvoE,SAAUmoE,OAAS,CAAnB,CAAV,CACA,GAAIK,KAAMxoE,SAAUmoE,OAAS,CAAT,CAAa,CAAvB,CAAV,CACA,GAAIM,KAAMzoE,SAAUmoE,OAAS,CAAT,CAAa,CAAvB,CAAV,CAEA,GAAKxiG,KAAK6iB,GAAL,CAAUs/E,IAAME,GAAhB,EAAwB,IAA7B,CAAoC,CAEhC,MAAO,CACH,GAAIt5F,QAAJ,CAAam5F,GAAb,CAAkB,EAAIO,GAAtB,CADG,CAEH,GAAI15F,QAAJ,CAAaq5F,GAAb,CAAkB,EAAIM,GAAtB,CAFG,CAGH,GAAI35F,QAAJ,CAAau5F,GAAb,CAAkB,EAAIK,GAAtB,CAHG,CAIH,GAAI55F,QAAJ,CAAa65F,GAAb,CAAkB,EAAIE,GAAtB,CAJG,CAAP,CAOH,CATD,IASO,CAEH,MAAO,CACH,GAAI/5F,QAAJ,CAAao5F,GAAb,CAAkB,EAAIM,GAAtB,CADG,CAEH,GAAI15F,QAAJ,CAAas5F,GAAb,CAAkB,EAAIK,GAAtB,CAFG,CAGH,GAAI35F,QAAJ,CAAaw5F,GAAb,CAAkB,EAAII,GAAtB,CAHG,CAIH,GAAI55F,QAAJ,CAAa85F,GAAb,CAAkB,EAAIC,GAAtB,CAJG,CAAP,CAOH,CAEJ,CAtDkB,CAAvB,CAyDA,QAASltE,OAAT,CAAiBuhB,MAAjB,CAAyB5f,OAAzB,CAAkCz2B,IAAlC,CAAyC,CAErC;AAEAA,KAAKq2C,MAAL,CAAc,EAAd,CAEA,GAAKzmC,MAAM63B,OAAN,CAAe4O,MAAf,CAAL,CAA+B,CAE3B,IAAM,GAAI7oC,GAAI,CAAR,CAAW6H,EAAIghC,OAAOzsC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAImpC,OAAQN,OAAQ7oC,CAAR,CAAZ,CAEAxN,KAAKq2C,MAAL,CAAYh4C,IAAZ,CAAkBs4C,MAAMn4B,IAAxB,EAEH,CAEJ,CAVD,IAUO,CAEHxe,KAAKq2C,MAAL,CAAYh4C,IAAZ,CAAkBg4C,OAAO73B,IAAzB,EAEH,CAED;AAEA,GAAKiY,QAAQ0mE,WAAR,GAAwBv7F,SAA7B,CAAyC5B,KAAKy2B,OAAL,CAAa0mE,WAAb,CAA2B1mE,QAAQ0mE,WAAR,CAAoBroE,MAApB,EAA3B,CAEzC,MAAO90B,KAAP,CAEH,CAED;;;;;;;;;;;;;;;;;OAmBA;AAEA,QAASiiG,aAAT,CAAuBC,IAAvB,CAA6BxrD,UAA7B,CAA0C,CAEtC6B,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,cAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdwrD,KAAMA,IADQ,CAEdxrD,WAAYA,UAFE,CAAlB,CAKA,KAAKmD,kBAAL,CAAyB,GAAIsoD,mBAAJ,CAAwBD,IAAxB,CAA8BxrD,UAA9B,CAAzB,EACA,KAAKoG,aAAL,GAEH,CAEDmlD,aAAa51F,SAAb,CAAyBC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAAzB,CACA41F,aAAa51F,SAAb,CAAuBI,WAAvB,CAAqCw1F,YAArC,CAEA;AAEA,QAASE,mBAAT,CAA6BD,IAA7B,CAAmCxrD,UAAnC,CAAgD,CAE5CA,WAAaA,YAAc,EAA3B,CAEA,GAAI0rD,MAAO1rD,WAAW0rD,IAAtB,CAEA,GAAK,EAAIA,MAAQA,KAAKC,MAAjB,CAAL,CAAiC,CAE7BliG,QAAQ+iB,KAAR,CAAe,sEAAf,EACA,MAAO,IAAIq1B,SAAJ,EAAP,CAEH,CAED,GAAIlC,QAAS+rD,KAAKE,cAAL,CAAqBJ,IAArB,CAA2BxrD,WAAWle,IAAtC,CAA4Cke,WAAWmmD,aAAvD,CAAb,CAEA;AAEAnmD,WAAW9H,KAAX,CAAmB8H,WAAW35C,MAAX,GAAsB6E,SAAtB,CAAkC80C,WAAW35C,MAA7C,CAAsD,EAAzE,CAEA;AAEA,GAAK25C,WAAWsmD,cAAX,GAA8Bp7F,SAAnC,CAA+C80C,WAAWsmD,cAAX,CAA4B,EAA5B,CAC/C,GAAKtmD,WAAWumD,SAAX,GAAyBr7F,SAA9B,CAA0C80C,WAAWumD,SAAX,CAAuB,CAAvB,CAC1C,GAAKvmD,WAAWqmD,YAAX,GAA4Bn7F,SAAjC,CAA6C80C,WAAWqmD,YAAX,CAA0B,KAA1B,CAE7CN,sBAAsB1sF,IAAtB,CAA4B,IAA5B,CAAkCsmC,MAAlC,CAA0CK,UAA1C,EAEA,KAAKnvC,IAAL,CAAY,oBAAZ,CAEH,CAED46F,mBAAmB91F,SAAnB,CAA+BC,OAAOC,MAAP,CAAekwF,sBAAsBpwF,SAArC,CAA/B,CACA81F,mBAAmB91F,SAAnB,CAA6BI,WAA7B,CAA2C01F,kBAA3C,CAEA;;;;OAMA;AAEA,QAAS9iG,eAAT,CAAyB8G,MAAzB,CAAiC09C,aAAjC,CAAgDC,cAAhD,CAAgEy+C,QAAhE,CAA0EC,SAA1E,CAAqFC,UAArF,CAAiGC,WAAjG,CAA+G,CAE3GnqD,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,gBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd09C,cAAeA,aAFD,CAGdC,eAAgBA,cAHF,CAIdy+C,SAAUA,QAJI,CAKdC,UAAWA,SALG,CAMdC,WAAYA,UANE,CAOdC,YAAaA,WAPC,CAAlB,CAUA,KAAK7oD,kBAAL,CAAyB,GAAI8oD,qBAAJ,CAA0Bx8F,MAA1B,CAAkC09C,aAAlC,CAAiDC,cAAjD,CAAiEy+C,QAAjE,CAA2EC,SAA3E,CAAsFC,UAAtF,CAAkGC,WAAlG,CAAzB,EACA,KAAK5lD,aAAL,GAEH,CAEDz9C,eAAegN,SAAf,CAA2BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA3B,CACAhN,eAAegN,SAAf,CAAyBI,WAAzB,CAAuCpN,cAAvC,CAEA;AAEA,QAASsjG,qBAAT,CAA+Bx8F,MAA/B,CAAuC09C,aAAvC,CAAsDC,cAAtD,CAAsEy+C,QAAtE,CAAgFC,SAAhF,CAA2FC,UAA3F,CAAuGC,WAAvG,CAAqH,CAEjH9gD,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,sBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEd09C,cAAeA,aAFD,CAGdC,eAAgBA,cAHF,CAIdy+C,SAAUA,QAJI,CAKdC,UAAWA,SALG,CAMdC,WAAYA,UANE,CAOdC,YAAaA,WAPC,CAAlB,CAUAv8F,OAASA,QAAU,CAAnB,CAEA09C,cAAgB3kD,KAAK8G,GAAL,CAAU,CAAV,CAAa9G,KAAKmT,KAAL,CAAYwxC,aAAZ,GAA+B,CAA5C,CAAhB,CACAC,eAAiB5kD,KAAK8G,GAAL,CAAU,CAAV,CAAa9G,KAAKmT,KAAL,CAAYyxC,cAAZ,GAAgC,CAA7C,CAAjB,CAEAy+C,SAAWA,WAAa3gG,SAAb,CAAyB2gG,QAAzB,CAAoC,CAA/C,CACAC,UAAYA,YAAc5gG,SAAd,CAA0B4gG,SAA1B,CAAsCtjG,KAAKC,EAAL,CAAU,CAA5D,CAEAsjG,WAAaA,aAAe7gG,SAAf,CAA2B6gG,UAA3B,CAAwC,CAArD,CACAC,YAAcA,cAAgB9gG,SAAhB,CAA4B8gG,WAA5B,CAA0CxjG,KAAKC,EAA7D,CAEA,GAAIyjG,UAAWH,WAAaC,WAA5B,CAEA,GAAI3xE,GAAJ,CAAQC,EAAR,CAEA,GAAIrc,OAAQ,CAAZ,CACA,GAAIkuF,MAAO,EAAX,CAEA,GAAIrpD,QAAS,GAAI13C,QAAJ,EAAb,CACA,GAAIqwB,QAAS,GAAIrwB,QAAJ,EAAb,CAEA;AAEA,GAAIg4C,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,IAAMjpB,GAAK,CAAX,CAAcA,IAAM8yB,cAApB,CAAoC9yB,IAApC,CAA4C,CAExC,GAAI8xE,aAAc,EAAlB,CAEA,GAAI/5F,GAAIioB,GAAK8yB,cAAb,CAEA,IAAM/yB,GAAK,CAAX,CAAcA,IAAM8yB,aAApB,CAAmC9yB,IAAnC,CAA2C,CAEvC,GAAIqW,GAAIrW,GAAK8yB,aAAb,CAEA;AAEArK,OAAOh+C,CAAP,CAAW,CAAE2K,MAAF,CAAWjH,KAAKyS,GAAL,CAAU4wF,SAAWn7D,EAAIo7D,SAAzB,CAAX,CAAkDtjG,KAAK0S,GAAL,CAAU6wF,WAAa15F,EAAI25F,WAA3B,CAA7D,CACAlpD,OAAO/9C,CAAP,CAAW0K,OAASjH,KAAKyS,GAAL,CAAU8wF,WAAa15F,EAAI25F,WAA3B,CAApB,CACAlpD,OAAO99C,CAAP,CAAWyK,OAASjH,KAAK0S,GAAL,CAAU2wF,SAAWn7D,EAAIo7D,SAAzB,CAAT,CAAgDtjG,KAAK0S,GAAL,CAAU6wF,WAAa15F,EAAI25F,WAA3B,CAA3D,CAEAnpE,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAy2B,OAAO91B,GAAP,CAAYm9C,OAAOh+C,CAAnB,CAAsBg+C,OAAO/9C,CAA7B,CAAgC+9C,OAAO99C,CAAvC,EAA2CsmB,SAA3C,GACAg4B,QAAQ37C,IAAR,CAAc8zB,OAAO32B,CAArB,CAAwB22B,OAAO12B,CAA/B,CAAkC02B,OAAOz2B,CAAzC,EAEA;AAEAu+C,IAAI57C,IAAJ,CAAU+oC,CAAV,CAAa,EAAIr+B,CAAjB,EAEA+5F,YAAYzkG,IAAZ,CAAkBsW,OAAlB,EAEH,CAEDkuF,KAAKxkG,IAAL,CAAWykG,WAAX,EAEH,CAED;AAEA,IAAM9xE,GAAK,CAAX,CAAcA,GAAK8yB,cAAnB,CAAmC9yB,IAAnC,CAA2C,CAEvC,IAAMD,GAAK,CAAX,CAAcA,GAAK8yB,aAAnB,CAAkC9yB,IAAlC,CAA0C,CAEtC,GAAI3d,GAAIyvF,KAAM7xE,EAAN,EAAYD,GAAK,CAAjB,CAAR,CACA,GAAIte,GAAIowF,KAAM7xE,EAAN,EAAYD,EAAZ,CAAR,CACA,GAAI/N,GAAI6/E,KAAM7xE,GAAK,CAAX,EAAgBD,EAAhB,CAAR,CACA,GAAI3L,GAAIy9E,KAAM7xE,GAAK,CAAX,EAAgBD,GAAK,CAArB,CAAR,CAEA,GAAKC,KAAO,CAAP,EAAYyxE,WAAa,CAA9B,CAAkC3oD,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EAClC,GAAK4L,KAAO8yB,eAAiB,CAAxB,EAA6B8+C,SAAW1jG,KAAKC,EAAlD,CAAuD26C,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAE1D,CAEJ,CAED;AAEA,KAAK48B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEH,CAED0oD,qBAAqBt2F,SAArB,CAAiCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAjC,CACAs2F,qBAAqBt2F,SAArB,CAA+BI,WAA/B,CAA6Ck2F,oBAA7C,CAEA;;;OAKA;AAEA,QAASI,aAAT,CAAuBC,WAAvB,CAAoCC,WAApC,CAAiDC,aAAjD,CAAgEC,WAAhE,CAA6EV,UAA7E,CAAyFC,WAAzF,CAAuG,CAEnGnqD,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,cAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdssD,YAAaA,WADC,CAEdC,YAAaA,WAFC,CAGdC,cAAeA,aAHD,CAIdC,YAAaA,WAJC,CAKdV,WAAYA,UALE,CAMdC,YAAaA,WANC,CAAlB,CASA,KAAK7oD,kBAAL,CAAyB,GAAIupD,mBAAJ,CAAwBJ,WAAxB,CAAqCC,WAArC,CAAkDC,aAAlD,CAAiEC,WAAjE,CAA8EV,UAA9E,CAA0FC,WAA1F,CAAzB,EACA,KAAK5lD,aAAL,GAEH,CAEDimD,aAAa12F,SAAb,CAAyBC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAAzB,CACA02F,aAAa12F,SAAb,CAAuBI,WAAvB,CAAqCs2F,YAArC,CAEA;AAEA,QAASK,mBAAT,CAA6BJ,WAA7B,CAA0CC,WAA1C,CAAuDC,aAAvD,CAAsEC,WAAtE,CAAmFV,UAAnF,CAA+FC,WAA/F,CAA6G,CAEzG9gD,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdssD,YAAaA,WADC,CAEdC,YAAaA,WAFC,CAGdC,cAAeA,aAHD,CAIdC,YAAaA,WAJC,CAKdV,WAAYA,UALE,CAMdC,YAAaA,WANC,CAAlB,CASAM,YAAcA,aAAe,GAA7B,CACAC,YAAcA,aAAe,CAA7B,CAEAR,WAAaA,aAAe7gG,SAAf,CAA2B6gG,UAA3B,CAAwC,CAArD,CACAC,YAAcA,cAAgB9gG,SAAhB,CAA4B8gG,WAA5B,CAA0CxjG,KAAKC,EAAL,CAAU,CAAlE,CAEA+jG,cAAgBA,gBAAkBthG,SAAlB,CAA8B1C,KAAK8G,GAAL,CAAU,CAAV,CAAak9F,aAAb,CAA9B,CAA6D,CAA7E,CACAC,YAAcA,cAAgBvhG,SAAhB,CAA4B1C,KAAK8G,GAAL,CAAU,CAAV,CAAam9F,WAAb,CAA5B,CAAyD,CAAvE,CAEA;AAEA,GAAIrpD,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,GAAIopD,QAAJ,CACA,GAAIl9F,QAAS68F,WAAb,CACA,GAAIM,YAAe,CAAEL,YAAcD,WAAhB,EAAgCG,WAAnD,CACA,GAAI3pD,QAAS,GAAI13C,QAAJ,EAAb,CACA,GAAIi0B,IAAK,GAAI9tB,QAAJ,EAAT,CACA,GAAI6yB,EAAJ,CAAOttB,CAAP,CAEA;AAEA,IAAMstB,EAAI,CAAV,CAAaA,GAAKqoE,WAAlB,CAA+BroE,GAA/B,CAAsC,CAElC,IAAMttB,EAAI,CAAV,CAAaA,GAAK01F,aAAlB,CAAiC11F,GAAjC,CAAwC,CAEpC;AAEA61F,QAAUZ,WAAaj1F,EAAI01F,aAAJ,CAAoBR,WAA3C,CAEA;AAEAlpD,OAAOh+C,CAAP,CAAW2K,OAASjH,KAAKyS,GAAL,CAAU0xF,OAAV,CAApB,CACA7pD,OAAO/9C,CAAP,CAAW0K,OAASjH,KAAK0S,GAAL,CAAUyxF,OAAV,CAApB,CAEA9pE,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAs+C,QAAQ37C,IAAR,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,EAEA;AAEA03B,GAAGv6B,CAAH,CAAO,CAAEg+C,OAAOh+C,CAAP,CAAWynG,WAAX,CAAyB,CAA3B,EAAiC,CAAxC,CACAltE,GAAGt6B,CAAH,CAAO,CAAE+9C,OAAO/9C,CAAP,CAAWwnG,WAAX,CAAyB,CAA3B,EAAiC,CAAxC,CAEAhpD,IAAI57C,IAAJ,CAAU03B,GAAGv6B,CAAb,CAAgBu6B,GAAGt6B,CAAnB,EAEH,CAED;AAEA0K,QAAUm9F,UAAV,CAEH,CAED;AAEA,IAAMxoE,EAAI,CAAV,CAAaA,EAAIqoE,WAAjB,CAA8BroE,GAA9B,CAAqC,CAEjC,GAAIyoE,mBAAoBzoE,GAAMooE,cAAgB,CAAtB,CAAxB,CAEA,IAAM11F,EAAI,CAAV,CAAaA,EAAI01F,aAAjB,CAAgC11F,GAAhC,CAAuC,CAEnC61F,QAAU71F,EAAI+1F,iBAAd,CAEA,GAAInwF,GAAIiwF,OAAR,CACA,GAAI5wF,GAAI4wF,QAAUH,aAAV,CAA0B,CAAlC,CACA,GAAIlgF,GAAIqgF,QAAUH,aAAV,CAA0B,CAAlC,CACA,GAAI99E,GAAIi+E,QAAU,CAAlB,CAEA;AAEAvpD,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEH,CAEJ,CAED;AAEA,KAAK48B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEH,CAEDmpD,mBAAmB/2F,SAAnB,CAA+BC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAA/B,CACA+2F,mBAAmB/2F,SAAnB,CAA6BI,WAA7B,CAA2C22F,kBAA3C,CAEA;;;;;OAOA;AAEA,QAASI,cAAT,CAAwBrrE,MAAxB,CAAgCsrE,QAAhC,CAA0ClB,QAA1C,CAAoDC,SAApD,CAAgE,CAE5DjqD,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,eAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdve,OAAQA,MADM,CAEdsrE,SAAUA,QAFI,CAGdlB,SAAUA,QAHI,CAIdC,UAAWA,SAJG,CAAlB,CAOA,KAAK3oD,kBAAL,CAAyB,GAAI6pD,oBAAJ,CAAyBvrE,MAAzB,CAAiCsrE,QAAjC,CAA2ClB,QAA3C,CAAqDC,SAArD,CAAzB,EACA,KAAK1lD,aAAL,GAEH,CAED0mD,cAAcn3F,SAAd,CAA0BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA1B,CACAm3F,cAAcn3F,SAAd,CAAwBI,WAAxB,CAAsC+2F,aAAtC,CAEA;AAEA,QAASE,oBAAT,CAA8BvrE,MAA9B,CAAsCsrE,QAAtC,CAAgDlB,QAAhD,CAA0DC,SAA1D,CAAsE,CAElE5gD,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,qBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdve,OAAQA,MADM,CAEdsrE,SAAUA,QAFI,CAGdlB,SAAUA,QAHI,CAIdC,UAAWA,SAJG,CAAlB,CAOAiB,SAAWvkG,KAAKmT,KAAL,CAAYoxF,QAAZ,GAA0B,EAArC,CACAlB,SAAWA,UAAY,CAAvB,CACAC,UAAYA,WAAatjG,KAAKC,EAAL,CAAU,CAAnC,CAEA;AAEAqjG,UAAYzkF,MAAMW,KAAN,CAAa8jF,SAAb,CAAwB,CAAxB,CAA2BtjG,KAAKC,EAAL,CAAU,CAArC,CAAZ,CAGA;AAEA,GAAI26C,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAI0gB,KAAM,EAAV,CAEA;AAEA,GAAI0pD,KAAJ,CACA,GAAIC,iBAAkB,IAAMH,QAA5B,CACA,GAAIjqD,QAAS,GAAI13C,QAAJ,EAAb,CACA,GAAIi0B,IAAK,GAAI9tB,QAAJ,EAAT,CACA,GAAIuF,EAAJ,CAAOstB,CAAP,CAEA;AAEA,IAAMttB,EAAI,CAAV,CAAaA,GAAKi2F,QAAlB,CAA4Bj2F,GAA5B,CAAmC,CAE/B,GAAIpJ,KAAMm+F,SAAW/0F,EAAIo2F,eAAJ,CAAsBpB,SAA3C,CAEA,GAAI5wF,KAAM1S,KAAK0S,GAAL,CAAUxN,GAAV,CAAV,CACA,GAAIuN,KAAMzS,KAAKyS,GAAL,CAAUvN,GAAV,CAAV,CAEA,IAAM02B,EAAI,CAAV,CAAaA,GAAO3C,OAAOvuB,MAAP,CAAgB,CAApC,CAAyCkxB,GAAzC,CAAgD,CAE5C;AAEA0e,OAAOh+C,CAAP,CAAW28B,OAAQ2C,CAAR,EAAYt/B,CAAZ,CAAgBoW,GAA3B,CACA4nC,OAAO/9C,CAAP,CAAW08B,OAAQ2C,CAAR,EAAYr/B,CAAvB,CACA+9C,OAAO99C,CAAP,CAAWy8B,OAAQ2C,CAAR,EAAYt/B,CAAZ,CAAgBmW,GAA3B,CAEA4nB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAq6B,GAAGv6B,CAAH,CAAOgS,EAAIi2F,QAAX,CACA1tE,GAAGt6B,CAAH,CAAOq/B,GAAM3C,OAAOvuB,MAAP,CAAgB,CAAtB,CAAP,CAEAqwC,IAAI57C,IAAJ,CAAU03B,GAAGv6B,CAAb,CAAgBu6B,GAAGt6B,CAAnB,EAGH,CAEJ,CAED;AAEA,IAAM+R,EAAI,CAAV,CAAaA,EAAIi2F,QAAjB,CAA2Bj2F,GAA3B,CAAkC,CAE9B,IAAMstB,EAAI,CAAV,CAAaA,EAAM3C,OAAOvuB,MAAP,CAAgB,CAAnC,CAAwCkxB,GAAxC,CAA+C,CAE3C6oE,KAAO7oE,EAAIttB,EAAI2qB,OAAOvuB,MAAtB,CAEA,GAAIwJ,GAAIuwF,IAAR,CACA,GAAIlxF,GAAIkxF,KAAOxrE,OAAOvuB,MAAtB,CACA,GAAIoZ,GAAI2gF,KAAOxrE,OAAOvuB,MAAd,CAAuB,CAA/B,CACA,GAAIwb,GAAIu+E,KAAO,CAAf,CAEA;AAEA7pD,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEH,CAEJ,CAED;AAEA,KAAK48B,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEA;AAEA,KAAKgB,oBAAL,GAEA;AACA;AAEA,GAAKunD,YAActjG,KAAKC,EAAL,CAAU,CAA7B,CAAiC,CAE7B,GAAI66C,SAAU,KAAKvgB,UAAL,CAAgBtH,MAAhB,CAAuBhd,KAArC,CACA,GAAI0uF,IAAK,GAAI/hG,QAAJ,EAAT,CACA,GAAIgiG,IAAK,GAAIhiG,QAAJ,EAAT,CACA,GAAI4Q,GAAI,GAAI5Q,QAAJ,EAAR,CAEA;AAEA6hG,KAAOF,SAAWtrE,OAAOvuB,MAAlB,CAA2B,CAAlC,CAEA,IAAM4D,EAAI,CAAJ,CAAOstB,EAAI,CAAjB,CAAoBttB,EAAI2qB,OAAOvuB,MAA/B,CAAuC4D,IAAMstB,GAAK,CAAlD,CAAsD,CAElD;AAEA+oE,GAAGroG,CAAH,CAAOw+C,QAASlf,EAAI,CAAb,CAAP,CACA+oE,GAAGpoG,CAAH,CAAOu+C,QAASlf,EAAI,CAAb,CAAP,CACA+oE,GAAGnoG,CAAH,CAAOs+C,QAASlf,EAAI,CAAb,CAAP,CAEA;AAEAgpE,GAAGtoG,CAAH,CAAOw+C,QAAS2pD,KAAO7oE,CAAP,CAAW,CAApB,CAAP,CACAgpE,GAAGroG,CAAH,CAAOu+C,QAAS2pD,KAAO7oE,CAAP,CAAW,CAApB,CAAP,CACAgpE,GAAGpoG,CAAH,CAAOs+C,QAAS2pD,KAAO7oE,CAAP,CAAW,CAApB,CAAP,CAEA;AAEApoB,EAAEkO,UAAF,CAAcijF,EAAd,CAAkBC,EAAlB,EAAuB9hF,SAAvB,GAEA;AAEAg4B,QAASlf,EAAI,CAAb,EAAmBkf,QAAS2pD,KAAO7oE,CAAP,CAAW,CAApB,EAA0BpoB,EAAElX,CAA/C,CACAw+C,QAASlf,EAAI,CAAb,EAAmBkf,QAAS2pD,KAAO7oE,CAAP,CAAW,CAApB,EAA0BpoB,EAAEjX,CAA/C,CACAu+C,QAASlf,EAAI,CAAb,EAAmBkf,QAAS2pD,KAAO7oE,CAAP,CAAW,CAApB,EAA0BpoB,EAAEhX,CAA/C,CAEH,CAEJ,CAEJ,CAEDgoG,oBAAoBr3F,SAApB,CAAgCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAhC,CACAq3F,oBAAoBr3F,SAApB,CAA8BI,WAA9B,CAA4Ci3F,mBAA5C,CAEA;;;OAKA;AAEA,QAASK,cAAT,CAAwB1tD,MAAxB,CAAgCwmD,aAAhC,CAAgD,CAE5CtkD,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,eAAZ,CAEA,GAAK,OAAOs1F,cAAP,mCAAOA,aAAP,KAAyB,QAA9B,CAAyC,CAErC18F,QAAQgK,IAAR,CAAc,0DAAd,EAEA0yF,cAAgBA,cAAcA,aAA9B,CAEH,CAED,KAAKnmD,UAAL,CAAkB,CACdL,OAAQA,MADM,CAEdwmD,cAAeA,aAFD,CAAlB,CAKA,KAAKhjD,kBAAL,CAAyB,GAAImqD,oBAAJ,CAAyB3tD,MAAzB,CAAiCwmD,aAAjC,CAAzB,EACA,KAAK//C,aAAL,GAEH,CAEDinD,cAAc13F,SAAd,CAA0BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA1B,CACA03F,cAAc13F,SAAd,CAAwBI,WAAxB,CAAsCs3F,aAAtC,CAEAA,cAAc13F,SAAd,CAAwByoB,MAAxB,CAAiC,UAAY,CAEzC,GAAI90B,MAAOu4C,SAASlsC,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAX,CAEA,GAAIsmC,QAAS,KAAKK,UAAL,CAAgBL,MAA7B,CAEA,MAAO4tD,UAAU5tD,MAAV,CAAkBr2C,IAAlB,CAAP,CAEH,CARD,CAUA;AAEA,QAASgkG,oBAAT,CAA8B3tD,MAA9B,CAAsCwmD,aAAtC,CAAsD,CAElDj7C,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,qBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdL,OAAQA,MADM,CAEdwmD,cAAeA,aAFD,CAAlB,CAKAA,cAAgBA,eAAiB,EAAjC,CAEA;AAEA,GAAI/iD,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,GAAIiK,YAAa,CAAjB,CACA,GAAIc,YAAa,CAAjB,CAEA;AAEA,GAAKp1C,MAAM63B,OAAN,CAAe4O,MAAf,IAA4B,KAAjC,CAAyC,CAErCsmD,SAAUtmD,MAAV,EAEH,CAJD,IAIO,CAEH,IAAM,GAAI7oC,GAAI,CAAd,CAAiBA,EAAI6oC,OAAOzsC,MAA5B,CAAoC4D,GAApC,CAA2C,CAEvCmvF,SAAUtmD,OAAQ7oC,CAAR,CAAV,EAEA,KAAK40C,QAAL,CAAe8B,UAAf,CAA2Bc,UAA3B,CAAuCx3C,CAAvC,EAA4C;AAE5C02C,YAAcc,UAAd,CACAA,WAAa,CAAb,CAEH,CAEJ,CAED;AAEA,KAAKhD,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAGA;AAEA,QAAS0iD,SAAT,CAAmBhmD,KAAnB,CAA2B,CAEvB,GAAInpC,EAAJ,CAAO6H,CAAP,CAAU6uF,SAAV,CAEA,GAAIC,aAAc5qE,SAAS3vB,MAAT,CAAkB,CAApC,CACA,GAAIuuB,QAASwe,MAAMqnD,aAAN,CAAqBnB,aAArB,CAAb,CAEA,GAAIuH,eAAgBjsE,OAAOwe,KAA3B,CACA,GAAI0tD,YAAalsE,OAAOgkE,KAAxB,CAEA;AAEA,GAAKL,WAAWE,WAAX,CAAwBoI,aAAxB,IAA4C,KAAjD,CAAyD,CAErDA,cAAgBA,cAAcnG,OAAd,EAAhB,CAEA;AAEA,IAAMzwF,EAAI,CAAJ,CAAO6H,EAAIgvF,WAAWz6F,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C02F,UAAYG,WAAY72F,CAAZ,CAAZ,CAEA,GAAKsuF,WAAWE,WAAX,CAAwBkI,SAAxB,IAAwC,IAA7C,CAAoD,CAEhDG,WAAY72F,CAAZ,EAAkB02F,UAAUjG,OAAV,EAAlB,CAEH,CAEJ,CAEJ,CAED,GAAIxlD,OAAQqjD,WAAWI,gBAAX,CAA6BkI,aAA7B,CAA4CC,UAA5C,CAAZ,CAEA;AAEA,IAAM72F,EAAI,CAAJ,CAAO6H,EAAIgvF,WAAWz6F,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C02F,UAAYG,WAAY72F,CAAZ,CAAZ,CACA42F,cAAgBA,cAAcv0F,MAAd,CAAsBq0F,SAAtB,CAAhB,CAEH,CAED;AAEA,IAAM12F,EAAI,CAAJ,CAAO6H,EAAI+uF,cAAcx6F,MAA/B,CAAuC4D,EAAI6H,CAA3C,CAA8C7H,GAA9C,CAAqD,CAEjD,GAAIgsC,QAAS4qD,cAAe52F,CAAf,CAAb,CAEA+rB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC,CAAnC,EACAu+C,QAAQ37C,IAAR,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,EACA47C,IAAI57C,IAAJ,CAAUm7C,OAAOh+C,CAAjB,CAAoBg+C,OAAO/9C,CAA3B,EAAgC;AAEnC,CAED;AAEA,IAAM+R,EAAI,CAAJ,CAAO6H,EAAIojC,MAAM7uC,MAAvB,CAA+B4D,EAAI6H,CAAnC,CAAsC7H,GAAtC,CAA6C,CAEzC,GAAIisC,MAAOhB,MAAOjrC,CAAP,CAAX,CAEA,GAAI4F,GAAIqmC,KAAM,CAAN,EAAY0qD,WAApB,CACA,GAAI1xF,GAAIgnC,KAAM,CAAN,EAAY0qD,WAApB,CACA,GAAInhF,GAAIy2B,KAAM,CAAN,EAAY0qD,WAApB,CAEArqD,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoBuQ,CAApB,EACAgiC,YAAc,CAAd,CAEH,CAEJ,CAEJ,CAEDg/C,oBAAoB33F,SAApB,CAAgCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAhC,CACA23F,oBAAoB33F,SAApB,CAA8BI,WAA9B,CAA4Cu3F,mBAA5C,CAEAA,oBAAoB33F,SAApB,CAA8ByoB,MAA9B,CAAuC,UAAY,CAE/C,GAAI90B,MAAO4hD,eAAev1C,SAAf,CAAyByoB,MAAzB,CAAgC/kB,IAAhC,CAAsC,IAAtC,CAAX,CAEA,GAAIsmC,QAAS,KAAKK,UAAL,CAAgBL,MAA7B,CAEA,MAAO4tD,UAAU5tD,MAAV,CAAkBr2C,IAAlB,CAAP,CAEH,CARD,CAUA;AAEA,QAASikG,SAAT,CAAmB5tD,MAAnB,CAA2Br2C,IAA3B,CAAkC,CAE9BA,KAAKq2C,MAAL,CAAc,EAAd,CAEA,GAAKzmC,MAAM63B,OAAN,CAAe4O,MAAf,CAAL,CAA+B,CAE3B,IAAM,GAAI7oC,GAAI,CAAR,CAAW6H,EAAIghC,OAAOzsC,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAImpC,OAAQN,OAAQ7oC,CAAR,CAAZ,CAEAxN,KAAKq2C,MAAL,CAAYh4C,IAAZ,CAAkBs4C,MAAMn4B,IAAxB,EAEH,CAEJ,CAVD,IAUO,CAEHxe,KAAKq2C,MAAL,CAAYh4C,IAAZ,CAAkBg4C,OAAO73B,IAAzB,EAEH,CAED,MAAOxe,KAAP,CAEH,CAED;;;OAKA,QAASskG,cAAT,CAAwBjrE,QAAxB,CAAkCkrE,cAAlC,CAAmD,CAE/C3iD,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,eAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACd6tD,eAAgBA,cADF,CAAlB,CAIAA,eAAmBA,iBAAmB3iG,SAArB,CAAmC2iG,cAAnC,CAAoD,CAArE,CAEA;AAEA,GAAIhrE,UAAW,EAAf,CAEA;AAEA,GAAIirE,cAAetlG,KAAKyS,GAAL,CAAUoM,MAAMC,OAAN,CAAgBumF,cAA1B,CAAnB,CACA,GAAIpR,MAAO,CAAE,CAAF,CAAK,CAAL,CAAX,CAAqBC,MAAQ,EAA7B,CAAiC5nC,KAAjC,CAAwCC,KAAxC,CACA,GAAIxU,IAAJ,CAAS9zC,KAAO,CAAE,GAAF,CAAO,GAAP,CAAY,GAAZ,CAAhB,CAEA;AAEA,GAAIugD,UAAJ,CAEA,GAAKrqB,SAASG,gBAAd,CAAiC,CAE7BkqB,UAAY,GAAInL,SAAJ,EAAZ,CACAmL,UAAU7J,kBAAV,CAA8BxgB,QAA9B,EAEH,CALD,IAKO,CAEHqqB,UAAYrqB,SAAS/6B,KAAT,EAAZ,CAEH,CAEDolD,UAAU5G,aAAV,GACA4G,UAAUhJ,kBAAV,GAEA,GAAI+pD,gBAAiB/gD,UAAUnqB,QAA/B,CACA,GAAIkf,OAAQiL,UAAUjL,KAAtB,CAEA;AAEA,IAAM,GAAIjrC,GAAI,CAAR,CAAW6H,EAAIojC,MAAM7uC,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAA1C,CAAiD,CAE7C,GAAIisC,MAAOhB,MAAOjrC,CAAP,CAAX,CAEA,IAAM,GAAIstB,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3B0wB,MAAQ/R,KAAMt2C,KAAM23B,CAAN,CAAN,CAAR,CACA2wB,MAAQhS,KAAMt2C,KAAM,CAAE23B,EAAI,CAAN,EAAY,CAAlB,CAAN,CAAR,CACAq4D,KAAM,CAAN,EAAYj0F,KAAK+G,GAAL,CAAUulD,KAAV,CAAiBC,KAAjB,CAAZ,CACA0nC,KAAM,CAAN,EAAYj0F,KAAK8G,GAAL,CAAUwlD,KAAV,CAAiBC,KAAjB,CAAZ,CAEAxU,IAAMk8C,KAAM,CAAN,EAAY,GAAZ,CAAkBA,KAAM,CAAN,CAAxB,CAEA,GAAKC,MAAOn8C,GAAP,IAAiBr1C,SAAtB,CAAkC,CAE9BwxF,MAAOn8C,GAAP,EAAe,CAAEyI,OAAQyzC,KAAM,CAAN,CAAV,CAAqBxzC,OAAQwzC,KAAM,CAAN,CAA7B,CAAwCuR,MAAOl3F,CAA/C,CAAkDm3F,MAAO/iG,SAAzD,CAAf,CAEH,CAJD,IAIO,CAEHwxF,MAAOn8C,GAAP,EAAa0tD,KAAb,CAAqBn3F,CAArB,CAEH,CAEJ,CAEJ,CAED;AAEA,IAAMypC,GAAN,GAAam8C,MAAb,CAAqB,CAEjB,GAAIhyE,GAAIgyE,MAAOn8C,GAAP,CAAR,CAEA;AAEA,GAAK71B,EAAEujF,KAAF,GAAY/iG,SAAZ,EAAyB62C,MAAOr3B,EAAEsjF,KAAT,EAAiBvyE,MAAjB,CAAwBxrB,GAAxB,CAA6B8xC,MAAOr3B,EAAEujF,KAAT,EAAiBxyE,MAA9C,GAA0DqyE,YAAxF,CAAuG,CAEnG,GAAIhrD,QAASirD,eAAgBrjF,EAAEs+B,MAAlB,CAAb,CACAnmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA89C,OAASirD,eAAgBrjF,EAAEu+B,MAAlB,CAAT,CACApmB,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEH,CAEJ,CAED;AAEA,KAAKumD,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EAEH,CAED+qE,cAAcj4F,SAAd,CAA0BC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAA1B,CACAi4F,cAAcj4F,SAAd,CAAwBI,WAAxB,CAAsC63F,aAAtC,CAEA;;;OAKA;AAEA,QAASvlG,iBAAT,CAA2B6lG,SAA3B,CAAsCC,YAAtC,CAAoD9nG,MAApD,CAA4D64F,cAA5D,CAA4E9xC,cAA5E,CAA4FghD,SAA5F,CAAuGrC,UAAvG,CAAmHC,WAAnH,CAAiI,CAE7HnqD,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,kBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdkuD,UAAWA,SADG,CAEdC,aAAcA,YAFA,CAGd9nG,OAAQA,MAHM,CAId64F,eAAgBA,cAJF,CAKd9xC,eAAgBA,cALF,CAMdghD,UAAWA,SANG,CAOdrC,WAAYA,UAPE,CAQdC,YAAaA,WARC,CAAlB,CAWA,KAAK7oD,kBAAL,CAAyB,GAAIkrD,uBAAJ,CAA4BH,SAA5B,CAAuCC,YAAvC,CAAqD9nG,MAArD,CAA6D64F,cAA7D,CAA6E9xC,cAA7E,CAA6FghD,SAA7F,CAAwGrC,UAAxG,CAAoHC,WAApH,CAAzB,EACA,KAAK5lD,aAAL,GAEH,CAED/9C,iBAAiBsN,SAAjB,CAA6BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA7B,CACAtN,iBAAiBsN,SAAjB,CAA2BI,WAA3B,CAAyC1N,gBAAzC,CAEA;AAEA,QAASgmG,uBAAT,CAAiCH,SAAjC,CAA4CC,YAA5C,CAA0D9nG,MAA1D,CAAkE64F,cAAlE,CAAkF9xC,cAAlF,CAAkGghD,SAAlG,CAA6GrC,UAA7G,CAAyHC,WAAzH,CAAuI,CAEnI9gD,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,wBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdkuD,UAAWA,SADG,CAEdC,aAAcA,YAFA,CAGd9nG,OAAQA,MAHM,CAId64F,eAAgBA,cAJF,CAKd9xC,eAAgBA,cALF,CAMdghD,UAAWA,SANG,CAOdrC,WAAYA,UAPE,CAQdC,YAAaA,WARC,CAAlB,CAWA,GAAIl+F,OAAQ,IAAZ,CAEAogG,UAAYA,YAAchjG,SAAd,CAA0BgjG,SAA1B,CAAsC,CAAlD,CACAC,aAAeA,eAAiBjjG,SAAjB,CAA6BijG,YAA7B,CAA4C,CAA3D,CACA9nG,OAASA,QAAU,CAAnB,CAEA64F,eAAiB12F,KAAKmT,KAAL,CAAYujF,cAAZ,GAAgC,CAAjD,CACA9xC,eAAiB5kD,KAAKmT,KAAL,CAAYyxC,cAAZ,GAAgC,CAAjD,CAEAghD,UAAYA,YAAcljG,SAAd,CAA0BkjG,SAA1B,CAAsC,KAAlD,CACArC,WAAaA,aAAe7gG,SAAf,CAA2B6gG,UAA3B,CAAwC,GAArD,CACAC,YAAcA,cAAgB9gG,SAAhB,CAA4B8gG,WAA5B,CAA0CxjG,KAAKC,EAAL,CAAU,CAAlE,CAEA;AAEA,GAAI26C,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,GAAItlC,OAAQ,CAAZ,CACA,GAAIqwF,YAAa,EAAjB,CACA,GAAI39B,YAAatqE,OAAS,CAA1B,CACA,GAAImnD,YAAa,CAAjB,CAEA;AAEA+gD,gBAEA,GAAKH,YAAc,KAAnB,CAA2B,CAEvB,GAAKF,UAAY,CAAjB,CAAqBM,YAAa,IAAb,EACrB,GAAKL,aAAe,CAApB,CAAwBK,YAAa,KAAb,EAE3B,CAED;AAEA,KAAKljD,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEA,QAASgrD,cAAT,EAAyB,CAErB,GAAIzpG,EAAJ,CAAOC,CAAP,CACA,GAAI02B,QAAS,GAAIrwB,QAAJ,EAAb,CACA,GAAI03C,QAAS,GAAI13C,QAAJ,EAAb,CAEA,GAAIkjD,YAAa,CAAjB,CAEA;AACA,GAAImgD,OAAQ,CAAEN,aAAeD,SAAjB,EAA+B7nG,MAA3C,CAEA;AAEA,IAAMtB,EAAI,CAAV,CAAaA,GAAKqoD,cAAlB,CAAkCroD,GAAlC,CAAyC,CAErC,GAAI2pG,UAAW,EAAf,CAEA,GAAIr8F,GAAItN,EAAIqoD,cAAZ,CAEA;AAEA,GAAI39C,QAAS4C,GAAM87F,aAAeD,SAArB,EAAmCA,SAAhD,CAEA,IAAMppG,EAAI,CAAV,CAAaA,GAAKo6F,cAAlB,CAAkCp6F,GAAlC,CAAyC,CAErC,GAAI4rC,GAAI5rC,EAAIo6F,cAAZ,CAEA,GAAItxF,OAAQ8iC,EAAIs7D,WAAJ,CAAkBD,UAA9B,CAEA,GAAI4C,UAAWnmG,KAAK0S,GAAL,CAAUtN,KAAV,CAAf,CACA,GAAIghG,UAAWpmG,KAAKyS,GAAL,CAAUrN,KAAV,CAAf,CAEA;AAEAk1C,OAAOh+C,CAAP,CAAW2K,OAASk/F,QAApB,CACA7rD,OAAO/9C,CAAP,CAAW,CAAEsN,CAAF,CAAMhM,MAAN,CAAesqE,UAA1B,CACA7tB,OAAO99C,CAAP,CAAWyK,OAASm/F,QAApB,CACA/rE,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAy2B,OAAO91B,GAAP,CAAYgpG,QAAZ,CAAsBF,KAAtB,CAA6BG,QAA7B,EAAwCtjF,SAAxC,GACAg4B,QAAQ37C,IAAR,CAAc8zB,OAAO32B,CAArB,CAAwB22B,OAAO12B,CAA/B,CAAkC02B,OAAOz2B,CAAzC,EAEA;AAEAu+C,IAAI57C,IAAJ,CAAU+oC,CAAV,CAAa,EAAIr+B,CAAjB,EAEA;AAEAq8F,SAAS/mG,IAAT,CAAesW,OAAf,EAEH,CAED;AAEAqwF,WAAW3mG,IAAX,CAAiB+mG,QAAjB,EAEH,CAED;AAEA,IAAM5pG,EAAI,CAAV,CAAaA,EAAIo6F,cAAjB,CAAiCp6F,GAAjC,CAAwC,CAEpC,IAAMC,EAAI,CAAV,CAAaA,EAAIqoD,cAAjB,CAAiCroD,GAAjC,CAAwC,CAEpC;AAEA,GAAI2X,GAAI4xF,WAAYvpG,CAAZ,EAAiBD,CAAjB,CAAR,CACA,GAAIiX,GAAIuyF,WAAYvpG,EAAI,CAAhB,EAAqBD,CAArB,CAAR,CACA,GAAIwnB,GAAIgiF,WAAYvpG,EAAI,CAAhB,EAAqBD,EAAI,CAAzB,CAAR,CACA,GAAI4pB,GAAI4/E,WAAYvpG,CAAZ,EAAiBD,EAAI,CAArB,CAAR,CAEA;AAEAs+C,QAAQz7C,IAAR,CAAc+U,CAAd,CAAiBX,CAAjB,CAAoB2S,CAApB,EACA00B,QAAQz7C,IAAR,CAAcoU,CAAd,CAAiBuQ,CAAjB,CAAoBoC,CAApB,EAEA;AAEA4/B,YAAc,CAAd,CAEH,CAEJ,CAED;AAEAxgD,MAAM49C,QAAN,CAAgB8B,UAAhB,CAA4Bc,UAA5B,CAAwC,CAAxC,EAEA;AAEAd,YAAcc,UAAd,CAEH,CAED,QAASkgD,YAAT,CAAsBzoG,GAAtB,CAA4B,CAExB,GAAIjB,EAAJ,CAAO+pG,gBAAP,CAAyBC,cAAzB,CAEA,GAAIzvE,IAAK,GAAI9tB,QAAJ,EAAT,CACA,GAAIuxC,QAAS,GAAI13C,QAAJ,EAAb,CAEA,GAAIkjD,YAAa,CAAjB,CAEA,GAAI7+C,QAAW1J,MAAQ,IAAV,CAAmBmoG,SAAnB,CAA+BC,YAA5C,CACA,GAAIzwF,MAAS3X,MAAQ,IAAV,CAAmB,CAAnB,CAAuB,CAAE,CAApC,CAEA;AACA8oG,iBAAmB5wF,KAAnB,CAEA;AACA;AACA;AAEA,IAAMnZ,EAAI,CAAV,CAAaA,GAAKo6F,cAAlB,CAAkCp6F,GAAlC,CAAyC,CAErC;AAEA+9B,SAASl7B,IAAT,CAAe,CAAf,CAAkBgpE,WAAajzD,IAA/B,CAAqC,CAArC,EAEA;AAEA4lC,QAAQ37C,IAAR,CAAc,CAAd,CAAiB+V,IAAjB,CAAuB,CAAvB,EAEA;AAEA6lC,IAAI57C,IAAJ,CAAU,GAAV,CAAe,GAAf,EAEA;AAEAsW,QAEH,CAED;AAEA6wF,eAAiB7wF,KAAjB,CAEA;AAEA,IAAMnZ,EAAI,CAAV,CAAaA,GAAKo6F,cAAlB,CAAkCp6F,GAAlC,CAAyC,CAErC,GAAI4rC,GAAI5rC,EAAIo6F,cAAZ,CACA,GAAItxF,OAAQ8iC,EAAIs7D,WAAJ,CAAkBD,UAA9B,CAEA,GAAI6C,UAAWpmG,KAAKyS,GAAL,CAAUrN,KAAV,CAAf,CACA,GAAI+gG,UAAWnmG,KAAK0S,GAAL,CAAUtN,KAAV,CAAf,CAEA;AAEAk1C,OAAOh+C,CAAP,CAAW2K,OAASk/F,QAApB,CACA7rD,OAAO/9C,CAAP,CAAW4rE,WAAajzD,IAAxB,CACAolC,OAAO99C,CAAP,CAAWyK,OAASm/F,QAApB,CACA/rE,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAs+C,QAAQ37C,IAAR,CAAc,CAAd,CAAiB+V,IAAjB,CAAuB,CAAvB,EAEA;AAEA2hB,GAAGv6B,CAAH,CAAS8pG,SAAW,GAAb,CAAqB,GAA5B,CACAvvE,GAAGt6B,CAAH,CAAS4pG,SAAW,GAAX,CAAiBjxF,IAAnB,CAA4B,GAAnC,CACA6lC,IAAI57C,IAAJ,CAAU03B,GAAGv6B,CAAb,CAAgBu6B,GAAGt6B,CAAnB,EAEA;AAEAkZ,QAEH,CAED;AAEA,IAAMnZ,EAAI,CAAV,CAAaA,EAAIo6F,cAAjB,CAAiCp6F,GAAjC,CAAwC,CAEpC,GAAIwnB,GAAIuiF,iBAAmB/pG,CAA3B,CACA,GAAIgS,GAAIg4F,eAAiBhqG,CAAzB,CAEA,GAAKiB,MAAQ,IAAb,CAAoB,CAEhB;AAEAq9C,QAAQz7C,IAAR,CAAcmP,CAAd,CAAiBA,EAAI,CAArB,CAAwBwV,CAAxB,EAEH,CAND,IAMO,CAEH;AAEA82B,QAAQz7C,IAAR,CAAcmP,EAAI,CAAlB,CAAqBA,CAArB,CAAwBwV,CAAxB,EAEH,CAEDgiC,YAAc,CAAd,CAEH,CAED;AAEAxgD,MAAM49C,QAAN,CAAgB8B,UAAhB,CAA4Bc,UAA5B,CAAwCvoD,MAAQ,IAAR,CAAe,CAAf,CAAmB,CAA3D,EAEA;AAEAynD,YAAcc,UAAd,CAEH,CAEJ,CAED+/C,uBAAuB14F,SAAvB,CAAmCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAnC,CACA04F,uBAAuB14F,SAAvB,CAAiCI,WAAjC,CAA+Cs4F,sBAA/C,CAEA;;OAIA;AAEA,QAASU,aAAT,CAAuBt/F,MAAvB,CAA+BpJ,MAA/B,CAAuC64F,cAAvC,CAAuD9xC,cAAvD,CAAuEghD,SAAvE,CAAkFrC,UAAlF,CAA8FC,WAA9F,CAA4G,CAExG3jG,iBAAiBgR,IAAjB,CAAuB,IAAvB,CAA6B,CAA7B,CAAgC5J,MAAhC,CAAwCpJ,MAAxC,CAAgD64F,cAAhD,CAAgE9xC,cAAhE,CAAgFghD,SAAhF,CAA2FrC,UAA3F,CAAuGC,WAAvG,EAEA,KAAKn7F,IAAL,CAAY,cAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEdpJ,OAAQA,MAFM,CAGd64F,eAAgBA,cAHF,CAId9xC,eAAgBA,cAJF,CAKdghD,UAAWA,SALG,CAMdrC,WAAYA,UANE,CAOdC,YAAaA,WAPC,CAAlB,CAUH,CAED+C,aAAap5F,SAAb,CAAyBC,OAAOC,MAAP,CAAexN,iBAAiBsN,SAAhC,CAAzB,CACAo5F,aAAap5F,SAAb,CAAuBI,WAAvB,CAAqCg5F,YAArC,CAEA;AAEA,QAASC,mBAAT,CAA6Bv/F,MAA7B,CAAqCpJ,MAArC,CAA6C64F,cAA7C,CAA6D9xC,cAA7D,CAA6EghD,SAA7E,CAAwFrC,UAAxF,CAAoGC,WAApG,CAAkH,CAE9GqC,uBAAuBh1F,IAAvB,CAA6B,IAA7B,CAAmC,CAAnC,CAAsC5J,MAAtC,CAA8CpJ,MAA9C,CAAsD64F,cAAtD,CAAsE9xC,cAAtE,CAAsFghD,SAAtF,CAAiGrC,UAAjG,CAA6GC,WAA7G,EAEA,KAAKn7F,IAAL,CAAY,oBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEdpJ,OAAQA,MAFM,CAGd64F,eAAgBA,cAHF,CAId9xC,eAAgBA,cAJF,CAKdghD,UAAWA,SALG,CAMdrC,WAAYA,UANE,CAOdC,YAAaA,WAPC,CAAlB,CAUH,CAEDgD,mBAAmBr5F,SAAnB,CAA+BC,OAAOC,MAAP,CAAew4F,uBAAuB14F,SAAtC,CAA/B,CACAq5F,mBAAmBr5F,SAAnB,CAA6BI,WAA7B,CAA2Ci5F,kBAA3C,CAEA;;;;OAMA;AAEA,QAASC,eAAT,CAAyBx/F,MAAzB,CAAiCs9F,QAAjC,CAA2ChB,UAA3C,CAAuDC,WAAvD,CAAqE,CAEjEnqD,SAASxoC,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,gBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEds9F,SAAUA,QAFI,CAGdhB,WAAYA,UAHE,CAIdC,YAAaA,WAJC,CAAlB,CAOA,KAAK7oD,kBAAL,CAAyB,GAAI+rD,qBAAJ,CAA0Bz/F,MAA1B,CAAkCs9F,QAAlC,CAA4ChB,UAA5C,CAAwDC,WAAxD,CAAzB,EACA,KAAK5lD,aAAL,GAEH,CAED6oD,eAAet5F,SAAf,CAA2BC,OAAOC,MAAP,CAAegsC,SAASlsC,SAAxB,CAA3B,CACAs5F,eAAet5F,SAAf,CAAyBI,WAAzB,CAAuCk5F,cAAvC,CAEA;AAEA,QAASC,qBAAT,CAA+Bz/F,MAA/B,CAAuCs9F,QAAvC,CAAiDhB,UAAjD,CAA6DC,WAA7D,CAA2E,CAEvE9gD,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,sBAAZ,CAEA,KAAKmvC,UAAL,CAAkB,CACdvwC,OAAQA,MADM,CAEds9F,SAAUA,QAFI,CAGdhB,WAAYA,UAHE,CAIdC,YAAaA,WAJC,CAAlB,CAOAv8F,OAASA,QAAU,CAAnB,CACAs9F,SAAWA,WAAa7hG,SAAb,CAAyB1C,KAAK8G,GAAL,CAAU,CAAV,CAAay9F,QAAb,CAAzB,CAAmD,CAA9D,CAEAhB,WAAaA,aAAe7gG,SAAf,CAA2B6gG,UAA3B,CAAwC,CAArD,CACAC,YAAcA,cAAgB9gG,SAAhB,CAA4B8gG,WAA5B,CAA0CxjG,KAAKC,EAAL,CAAU,CAAlE,CAEA;AAEA,GAAI26C,SAAU,EAAd,CACA,GAAIvgB,UAAW,EAAf,CACA,GAAIygB,SAAU,EAAd,CACA,GAAIC,KAAM,EAAV,CAEA;AAEA,GAAIzsC,EAAJ,CAAOyE,CAAP,CACA,GAAIunC,QAAS,GAAI13C,QAAJ,EAAb,CACA,GAAIi0B,IAAK,GAAI9tB,QAAJ,EAAT,CAEA;AAEAsxB,SAASl7B,IAAT,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,EACA27C,QAAQ37C,IAAR,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,EACA47C,IAAI57C,IAAJ,CAAU,GAAV,CAAe,GAAf,EAEA,IAAM4T,EAAI,CAAJ,CAAOzE,EAAI,CAAjB,CAAoByE,GAAKwxF,QAAzB,CAAmCxxF,IAAMzE,GAAK,CAA9C,CAAkD,CAE9C,GAAI61F,SAAUZ,WAAaxwF,EAAIwxF,QAAJ,CAAef,WAA1C,CAEA;AAEAlpD,OAAOh+C,CAAP,CAAW2K,OAASjH,KAAKyS,GAAL,CAAU0xF,OAAV,CAApB,CACA7pD,OAAO/9C,CAAP,CAAW0K,OAASjH,KAAK0S,GAAL,CAAUyxF,OAAV,CAApB,CAEA9pE,SAASl7B,IAAT,CAAem7C,OAAOh+C,CAAtB,CAAyBg+C,OAAO/9C,CAAhC,CAAmC+9C,OAAO99C,CAA1C,EAEA;AAEAs+C,QAAQ37C,IAAR,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,EAEA;AAEA03B,GAAGv6B,CAAH,CAAO,CAAE+9B,SAAU/rB,CAAV,EAAgBrH,MAAhB,CAAyB,CAA3B,EAAiC,CAAxC,CACA4vB,GAAGt6B,CAAH,CAAO,CAAE89B,SAAU/rB,EAAI,CAAd,EAAoBrH,MAApB,CAA6B,CAA/B,EAAqC,CAA5C,CAEA8zC,IAAI57C,IAAJ,CAAU03B,GAAGv6B,CAAb,CAAgBu6B,GAAGt6B,CAAnB,EAEH,CAED;AAEA,IAAM+R,EAAI,CAAV,CAAaA,GAAKi2F,QAAlB,CAA4Bj2F,GAA5B,CAAmC,CAE/BssC,QAAQz7C,IAAR,CAAcmP,CAAd,CAAiBA,EAAI,CAArB,CAAwB,CAAxB,EAEH,CAED;AAEA,KAAKw0C,QAAL,CAAelI,OAAf,EACA,KAAKmI,YAAL,CAAmB,UAAnB,CAA+B,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAA/B,EACA,KAAK0oB,YAAL,CAAmB,QAAnB,CAA6B,GAAIpB,uBAAJ,CAA4B7G,OAA5B,CAAqC,CAArC,CAA7B,EACA,KAAKiI,YAAL,CAAmB,IAAnB,CAAyB,GAAIpB,uBAAJ,CAA4B5G,GAA5B,CAAiC,CAAjC,CAAzB,EAEH,CAED2rD,qBAAqBv5F,SAArB,CAAiCC,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAjC,CACAu5F,qBAAqBv5F,SAArB,CAA+BI,WAA/B,CAA6Cm5F,oBAA7C,CAIA,GAAIC,YAAa,aAAav5F,OAAOw5F,MAAP,CAAc,CACxC9S,kBAAmBA,iBADqB,CAExCK,mBAAoBA,kBAFoB,CAGxCI,yBAA0BA,wBAHc,CAIxCyB,oBAAqBA,mBAJmB,CAKxCC,0BAA2BA,yBALa,CAMxCC,mBAAoBA,kBANoB,CAOxCC,yBAA0BA,wBAPc,CAQxCC,oBAAqBA,mBARmB,CASxCC,0BAA2BA,yBATa,CAUxCC,qBAAsBA,oBAVkB,CAWxCC,2BAA4BA,0BAXY,CAYxC5B,mBAAoBA,kBAZoB,CAaxCE,yBAA0BA,wBAbc,CAcxC2B,aAAcA,YAd0B,CAexCM,mBAAoBA,kBAfoB,CAgBxCY,kBAAmBA,iBAhBqB,CAiBxCG,wBAAyBA,uBAjBe,CAkBxCS,cAAeA,aAlByB,CAmBxCE,oBAAqBA,mBAnBmB,CAoBxCuK,aAAcA,YApB0B,CAqBxCE,mBAAoBA,kBArBoB,CAsBxC9iG,eAAgBA,cAtBwB,CAuBxCsjG,qBAAsBA,oBAvBkB,CAwBxCI,aAAcA,YAxB0B,CAyBxCK,mBAAoBA,kBAzBoB,CA0BxCn+C,cAAeA,aA1ByB,CA2BxC1nD,oBAAqBA,mBA3BmB,CA4BxCimG,cAAeA,aA5ByB,CA6BxCE,oBAAqBA,mBA7BmB,CA8BxCK,cAAeA,aA9ByB,CA+BxCC,oBAAqBA,mBA/BmB,CAgCxCxH,gBAAiBA,eAhCuB,CAiCxCC,sBAAuBA,qBAjCiB,CAkCxC6H,cAAeA,aAlCyB,CAmCxCmB,aAAcA,YAnC0B,CAoCxCC,mBAAoBA,kBApCoB,CAqCxC3mG,iBAAkBA,gBArCsB,CAsCxCgmG,uBAAwBA,sBAtCgB,CAuCxCY,eAAgBA,cAvCwB,CAwCxCC,qBAAsBA,oBAxCkB,CAyCxC9nG,YAAaA,WAzC2B,CA0CxCkmD,kBAAmBA,iBA1CqB,CAAd,CAA9B,CA6CA;;;;;;OAQA,QAASsgB,eAAT,CAAyB5tB,UAAzB,CAAsC,CAElC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,gBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CACA,KAAK+d,WAAL,CAAmB,IAAnB,CAEA,KAAKwB,SAAL,CAAgBxQ,UAAhB,EAEH,CAED4tB,eAAej4D,SAAf,CAA2BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA3B,CACAi4D,eAAej4D,SAAf,CAAyBI,WAAzB,CAAuC63D,cAAvC,CAEAA,eAAej4D,SAAf,CAAyB+gF,gBAAzB,CAA4C,IAA5C,CAEA9oB,eAAej4D,SAAf,CAAyB5H,IAAzB,CAAgC,SAAW0J,MAAX,CAAoB,CAEhDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EAEA,MAAO,KAAP,CAEH,CARD,CAUA;;OAIA,QAASqoG,kBAAT,CAA4BrvD,UAA5B,CAAyC,CAErC0R,eAAer4C,IAAf,CAAqB,IAArB,CAA2B2mC,UAA3B,EAEA,KAAKnvC,IAAL,CAAY,mBAAZ,CAEH,CAEDw+F,kBAAkB15F,SAAlB,CAA8BC,OAAOC,MAAP,CAAe67C,eAAe/7C,SAA9B,CAA9B,CACA05F,kBAAkB15F,SAAlB,CAA4BI,WAA5B,CAA0Cs5F,iBAA1C,CAEAA,kBAAkB15F,SAAlB,CAA4B40D,mBAA5B,CAAkD,IAAlD,CAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAmDA,QAASgD,qBAAT,CAA+BvtB,UAA/B,CAA4C,CAExC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKs4C,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAK9gD,IAAL,CAAY,sBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CAAoC;AACpC,KAAK2G,SAAL,CAAiB,GAAjB,CACA,KAAKC,SAAL,CAAiB,GAAjB,CAEA,KAAK1E,GAAL,CAAW,IAAX,CAEA,KAAKe,QAAL,CAAgB,IAAhB,CACA,KAAKC,iBAAL,CAAyB,GAAzB,CAEA,KAAKJ,KAAL,CAAa,IAAb,CACA,KAAKC,cAAL,CAAsB,GAAtB,CAEA,KAAKuD,QAAL,CAAgB,GAAItG,MAAJ,CAAW,QAAX,CAAhB,CACA,KAAK2f,iBAAL,CAAyB,GAAzB,CACA,KAAKvc,WAAL,CAAmB,IAAnB,CAEA,KAAKE,OAAL,CAAe,IAAf,CACA,KAAKC,SAAL,CAAiB,CAAjB,CAEA,KAAKE,SAAL,CAAiB,IAAjB,CACA,KAAKC,WAAL,CAAmB,GAAIpjC,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAnB,CAEA,KAAKsjC,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKE,YAAL,CAAoB,IAApB,CAEA,KAAKE,YAAL,CAAoB,IAApB,CAEA,KAAK9B,QAAL,CAAgB,IAAhB,CAEA,KAAKI,MAAL,CAAc,IAAd,CACA,KAAKqE,eAAL,CAAuB,GAAvB,CAEA,KAAKlE,eAAL,CAAuB,IAAvB,CAEA,KAAKod,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKC,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAKnP,YAAL,CAAoB,KAApB,CACA,KAAKC,YAAL,CAAoB,KAApB,CAEA,KAAKsO,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDutB,qBAAqB53D,SAArB,CAAiCC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAAjC,CACA43D,qBAAqB53D,SAArB,CAA+BI,WAA/B,CAA6Cw3D,oBAA7C,CAEAA,qBAAqB53D,SAArB,CAA+B87E,sBAA/B,CAAwD,IAAxD,CAEAlkB,qBAAqB53D,SAArB,CAA+B5H,IAA/B,CAAsC,SAAW0J,MAAX,CAAoB,CAEtDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKk6C,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAK3qD,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EACA,KAAK4wC,SAAL,CAAiBngC,OAAOmgC,SAAxB,CACA,KAAKC,SAAL,CAAiBpgC,OAAOogC,SAAxB,CAEA,KAAK1E,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKe,QAAL,CAAgBz8B,OAAOy8B,QAAvB,CACA,KAAKC,iBAAL,CAAyB18B,OAAO08B,iBAAhC,CAEA,KAAKJ,KAAL,CAAat8B,OAAOs8B,KAApB,CACA,KAAKC,cAAL,CAAsBv8B,OAAOu8B,cAA7B,CAEA,KAAKuD,QAAL,CAAcxpC,IAAd,CAAoB0J,OAAO8/B,QAA3B,EACA,KAAKlD,WAAL,CAAmB58B,OAAO48B,WAA1B,CACA,KAAKuc,iBAAL,CAAyBn5C,OAAOm5C,iBAAhC,CAEA,KAAKrc,OAAL,CAAe98B,OAAO88B,OAAtB,CACA,KAAKC,SAAL,CAAiB/8B,OAAO+8B,SAAxB,CAEA,KAAKE,SAAL,CAAiBj9B,OAAOi9B,SAAxB,CACA,KAAKC,WAAL,CAAiB5mC,IAAjB,CAAuB0J,OAAOk9B,WAA9B,EAEA,KAAKE,eAAL,CAAuBp9B,OAAOo9B,eAA9B,CACA,KAAKC,iBAAL,CAAyBr9B,OAAOq9B,iBAAhC,CACA,KAAKC,gBAAL,CAAwBt9B,OAAOs9B,gBAA/B,CAEA,KAAKE,YAAL,CAAoBx9B,OAAOw9B,YAA3B,CAEA,KAAKE,YAAL,CAAoB19B,OAAO09B,YAA3B,CAEA,KAAK9B,QAAL,CAAgB57B,OAAO47B,QAAvB,CAEA,KAAKI,MAAL,CAAch8B,OAAOg8B,MAArB,CACA,KAAKqE,eAAL,CAAuBrgC,OAAOqgC,eAA9B,CAEA,KAAKlE,eAAL,CAAuBn8B,OAAOm8B,eAA9B,CAEA,KAAKod,SAAL,CAAiBv5C,OAAOu5C,SAAxB,CACA,KAAKC,kBAAL,CAA0Bx5C,OAAOw5C,kBAAjC,CACA,KAAKC,gBAAL,CAAwBz5C,OAAOy5C,gBAA/B,CACA,KAAKC,iBAAL,CAAyB15C,OAAO05C,iBAAhC,CAEA,KAAKC,QAAL,CAAgB35C,OAAO25C,QAAvB,CACA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CACA,KAAKC,YAAL,CAAoBzqC,OAAOyqC,YAA3B,CAEA,MAAO,KAAP,CAEH,CAtDD,CAwDA;;;;;;OAQA,QAASsrB,qBAAT,CAA+BxtB,UAA/B,CAA4C,CAExCutB,qBAAqBl0D,IAArB,CAA2B,IAA3B,EAEA,KAAKs4C,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAK9gD,IAAL,CAAY,sBAAZ,CAEA,KAAK8iC,YAAL,CAAoB,GAApB,CAAyB;AAEzB,KAAKiF,SAAL,CAAiB,GAAjB,CACA,KAAKC,kBAAL,CAA0B,GAA1B,CAEA,KAAK2X,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDwtB,qBAAqB73D,SAArB,CAAiCC,OAAOC,MAAP,CAAe03D,qBAAqB53D,SAApC,CAAjC,CACA63D,qBAAqB73D,SAArB,CAA+BI,WAA/B,CAA6Cy3D,oBAA7C,CAEAA,qBAAqB73D,SAArB,CAA+BmgF,sBAA/B,CAAwD,IAAxD,CAEAtoB,qBAAqB73D,SAArB,CAA+B5H,IAA/B,CAAsC,SAAW0J,MAAX,CAAoB,CAEtD81D,qBAAqB53D,SAArB,CAA+B5H,IAA/B,CAAoCsL,IAApC,CAA0C,IAA1C,CAAgD5B,MAAhD,EAEA,KAAKk6C,OAAL,CAAe,CAAE,WAAY,EAAd,CAAf,CAEA,KAAKhe,YAAL,CAAoBl8B,OAAOk8B,YAA3B,CAEA,KAAKiF,SAAL,CAAiBnhC,OAAOmhC,SAAxB,CACA,KAAKC,kBAAL,CAA0BphC,OAAOohC,kBAAjC,CAEA,MAAO,KAAP,CAEH,CAbD,CAeA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAkDA,QAASvxC,kBAAT,CAA4B04C,UAA5B,CAAyC,CAErC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CAAoC;AACpC,KAAKwG,QAAL,CAAgB,GAAIxG,MAAJ,CAAW,QAAX,CAAhB,CACA,KAAKyG,SAAL,CAAiB,EAAjB,CAEA,KAAKvE,GAAL,CAAW,IAAX,CAEA,KAAKe,QAAL,CAAgB,IAAhB,CACA,KAAKC,iBAAL,CAAyB,GAAzB,CAEA,KAAKJ,KAAL,CAAa,IAAb,CACA,KAAKC,cAAL,CAAsB,GAAtB,CAEA,KAAKuD,QAAL,CAAgB,GAAItG,MAAJ,CAAW,QAAX,CAAhB,CACA,KAAK2f,iBAAL,CAAyB,GAAzB,CACA,KAAKvc,WAAL,CAAmB,IAAnB,CAEA,KAAKE,OAAL,CAAe,IAAf,CACA,KAAKC,SAAL,CAAiB,CAAjB,CAEA,KAAKE,SAAL,CAAiB,IAAjB,CACA,KAAKC,WAAL,CAAmB,GAAIpjC,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAnB,CAEA,KAAKsjC,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKxB,WAAL,CAAmB,IAAnB,CAEA,KAAKF,QAAL,CAAgB,IAAhB,CAEA,KAAKI,MAAL,CAAc,IAAd,CACA,KAAK+d,OAAL,CAAe7vC,iBAAf,CACA,KAAKgyB,YAAL,CAAoB,CAApB,CACA,KAAKC,eAAL,CAAuB,IAAvB,CAEA,KAAKod,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKC,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAKnP,YAAL,CAAoB,KAApB,CACA,KAAKC,YAAL,CAAoB,KAApB,CAEA,KAAKsO,SAAL,CAAgBxQ,UAAhB,EAEH,CAED14C,kBAAkBqO,SAAlB,CAA8BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA9B,CACArO,kBAAkBqO,SAAlB,CAA4BI,WAA5B,CAA0CzO,iBAA1C,CAEAA,kBAAkBqO,SAAlB,CAA4B67E,mBAA5B,CAAkD,IAAlD,CAEAlqF,kBAAkBqO,SAAlB,CAA4B5H,IAA5B,CAAmC,SAAW0J,MAAX,CAAoB,CAEnDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EACA,KAAKywC,QAAL,CAAc1pC,IAAd,CAAoB0J,OAAOggC,QAA3B,EACA,KAAKC,SAAL,CAAiBjgC,OAAOigC,SAAxB,CAEA,KAAKvE,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKe,QAAL,CAAgBz8B,OAAOy8B,QAAvB,CACA,KAAKC,iBAAL,CAAyB18B,OAAO08B,iBAAhC,CAEA,KAAKJ,KAAL,CAAat8B,OAAOs8B,KAApB,CACA,KAAKC,cAAL,CAAsBv8B,OAAOu8B,cAA7B,CAEA,KAAKuD,QAAL,CAAcxpC,IAAd,CAAoB0J,OAAO8/B,QAA3B,EACA,KAAKlD,WAAL,CAAmB58B,OAAO48B,WAA1B,CACA,KAAKuc,iBAAL,CAAyBn5C,OAAOm5C,iBAAhC,CAEA,KAAKrc,OAAL,CAAe98B,OAAO88B,OAAtB,CACA,KAAKC,SAAL,CAAiB/8B,OAAO+8B,SAAxB,CAEA,KAAKE,SAAL,CAAiBj9B,OAAOi9B,SAAxB,CACA,KAAKC,WAAL,CAAiB5mC,IAAjB,CAAuB0J,OAAOk9B,WAA9B,EAEA,KAAKE,eAAL,CAAuBp9B,OAAOo9B,eAA9B,CACA,KAAKC,iBAAL,CAAyBr9B,OAAOq9B,iBAAhC,CACA,KAAKC,gBAAL,CAAwBt9B,OAAOs9B,gBAA/B,CAEA,KAAKxB,WAAL,CAAmB97B,OAAO87B,WAA1B,CAEA,KAAKF,QAAL,CAAgB57B,OAAO47B,QAAvB,CAEA,KAAKI,MAAL,CAAch8B,OAAOg8B,MAArB,CACA,KAAK+d,OAAL,CAAe/5C,OAAO+5C,OAAtB,CACA,KAAK7d,YAAL,CAAoBl8B,OAAOk8B,YAA3B,CACA,KAAKC,eAAL,CAAuBn8B,OAAOm8B,eAA9B,CAEA,KAAKod,SAAL,CAAiBv5C,OAAOu5C,SAAxB,CACA,KAAKC,kBAAL,CAA0Bx5C,OAAOw5C,kBAAjC,CACA,KAAKC,gBAAL,CAAwBz5C,OAAOy5C,gBAA/B,CACA,KAAKC,iBAAL,CAAyB15C,OAAO05C,iBAAhC,CAEA,KAAKC,QAAL,CAAgB35C,OAAO25C,QAAvB,CACA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CACA,KAAKC,YAAL,CAAoBzqC,OAAOyqC,YAA3B,CAEA,MAAO,KAAP,CAEH,CAlDD,CAoDA;;;;;;OAQA,QAASorB,iBAAT,CAA2BttB,UAA3B,CAAwC,CAEpC14C,kBAAkB+R,IAAlB,CAAwB,IAAxB,EAEA,KAAKs4C,OAAL,CAAe,CAAE,OAAQ,EAAV,CAAf,CAEA,KAAK9gD,IAAL,CAAY,kBAAZ,CAEA,KAAKwkC,WAAL,CAAmB,IAAnB,CAEA,KAAKmb,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDstB,iBAAiB33D,SAAjB,CAA6BC,OAAOC,MAAP,CAAevO,kBAAkBqO,SAAjC,CAA7B,CACA23D,iBAAiB33D,SAAjB,CAA2BI,WAA3B,CAAyCu3D,gBAAzC,CAEAA,iBAAiB33D,SAAjB,CAA2BggF,kBAA3B,CAAgD,IAAhD,CAEAroB,iBAAiB33D,SAAjB,CAA2B5H,IAA3B,CAAkC,SAAW0J,MAAX,CAAoB,CAElDnQ,kBAAkBqO,SAAlB,CAA4B5H,IAA5B,CAAiCsL,IAAjC,CAAuC,IAAvC,CAA6C5B,MAA7C,EAEA,KAAK49B,WAAL,CAAmB59B,OAAO49B,WAA1B,CAEA,MAAO,KAAP,CAEH,CARD,CAUA;;;;;;;;;;;;;;;;;;;;;;;;OA0BA,QAASg4B,mBAAT,CAA6BrtB,UAA7B,CAA0C,CAEtC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAK0jC,OAAL,CAAe,IAAf,CACA,KAAKC,SAAL,CAAiB,CAAjB,CAEA,KAAKE,SAAL,CAAiB,IAAjB,CACA,KAAKC,WAAL,CAAmB,GAAIpjC,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAnB,CAEA,KAAKsjC,eAAL,CAAuB,IAAvB,CACA,KAAKC,iBAAL,CAAyB,CAAzB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,KAAKic,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CAEA,KAAK3b,GAAL,CAAW,KAAX,CACA,KAAKK,MAAL,CAAc,KAAd,CAEA,KAAKyb,QAAL,CAAgB,KAAhB,CACA,KAAKnP,YAAL,CAAoB,KAApB,CACA,KAAKC,YAAL,CAAoB,KAApB,CAEA,KAAKsO,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDqtB,mBAAmB13D,SAAnB,CAA+BC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAA/B,CACA03D,mBAAmB13D,SAAnB,CAA6BI,WAA7B,CAA2Cs3D,kBAA3C,CAEAA,mBAAmB13D,SAAnB,CAA6B+7E,oBAA7B,CAAoD,IAApD,CAEArkB,mBAAmB13D,SAAnB,CAA6B5H,IAA7B,CAAoC,SAAW0J,MAAX,CAAoB,CAEpDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAK88B,OAAL,CAAe98B,OAAO88B,OAAtB,CACA,KAAKC,SAAL,CAAiB/8B,OAAO+8B,SAAxB,CAEA,KAAKE,SAAL,CAAiBj9B,OAAOi9B,SAAxB,CACA,KAAKC,WAAL,CAAiB5mC,IAAjB,CAAuB0J,OAAOk9B,WAA9B,EAEA,KAAKE,eAAL,CAAuBp9B,OAAOo9B,eAA9B,CACA,KAAKC,iBAAL,CAAyBr9B,OAAOq9B,iBAAhC,CACA,KAAKC,gBAAL,CAAwBt9B,OAAOs9B,gBAA/B,CAEA,KAAKic,SAAL,CAAiBv5C,OAAOu5C,SAAxB,CACA,KAAKC,kBAAL,CAA0Bx5C,OAAOw5C,kBAAjC,CAEA,KAAKG,QAAL,CAAgB35C,OAAO25C,QAAvB,CACA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CACA,KAAKC,YAAL,CAAoBzqC,OAAOyqC,YAA3B,CAEA,MAAO,KAAP,CAEH,CAvBD,CAyBA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OAsCA,QAASn7C,oBAAT,CAA8Bi5C,UAA9B,CAA2C,CAEvC6O,SAASx1C,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,qBAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAW,QAAX,CAAb,CAAoC;AAEpC,KAAKkC,GAAL,CAAW,IAAX,CAEA,KAAKe,QAAL,CAAgB,IAAhB,CACA,KAAKC,iBAAL,CAAyB,GAAzB,CAEA,KAAKJ,KAAL,CAAa,IAAb,CACA,KAAKC,cAAL,CAAsB,GAAtB,CAEA,KAAKuD,QAAL,CAAgB,GAAItG,MAAJ,CAAW,QAAX,CAAhB,CACA,KAAK2f,iBAAL,CAAyB,GAAzB,CACA,KAAKvc,WAAL,CAAmB,IAAnB,CAEA,KAAKd,WAAL,CAAmB,IAAnB,CAEA,KAAKF,QAAL,CAAgB,IAAhB,CAEA,KAAKI,MAAL,CAAc,IAAd,CACA,KAAK+d,OAAL,CAAe7vC,iBAAf,CACA,KAAKgyB,YAAL,CAAoB,CAApB,CACA,KAAKC,eAAL,CAAuB,IAAvB,CAEA,KAAKod,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,CAA1B,CACA,KAAKC,gBAAL,CAAwB,OAAxB,CACA,KAAKC,iBAAL,CAAyB,OAAzB,CAEA,KAAKC,QAAL,CAAgB,KAAhB,CACA,KAAKnP,YAAL,CAAoB,KAApB,CACA,KAAKC,YAAL,CAAoB,KAApB,CAEA,KAAKsO,SAAL,CAAgBxQ,UAAhB,EAEH,CAEDj5C,oBAAoB4O,SAApB,CAAgCC,OAAOC,MAAP,CAAeg5C,SAASl5C,SAAxB,CAAhC,CACA5O,oBAAoB4O,SAApB,CAA8BI,WAA9B,CAA4ChP,mBAA5C,CAEAA,oBAAoB4O,SAApB,CAA8Bw/E,qBAA9B,CAAsD,IAAtD,CAEApuF,oBAAoB4O,SAApB,CAA8B5H,IAA9B,CAAqC,SAAW0J,MAAX,CAAoB,CAErDo3C,SAASl5C,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EAEA,KAAKmsC,GAAL,CAAW17B,OAAO07B,GAAlB,CAEA,KAAKe,QAAL,CAAgBz8B,OAAOy8B,QAAvB,CACA,KAAKC,iBAAL,CAAyB18B,OAAO08B,iBAAhC,CAEA,KAAKJ,KAAL,CAAat8B,OAAOs8B,KAApB,CACA,KAAKC,cAAL,CAAsBv8B,OAAOu8B,cAA7B,CAEA,KAAKuD,QAAL,CAAcxpC,IAAd,CAAoB0J,OAAO8/B,QAA3B,EACA,KAAKlD,WAAL,CAAmB58B,OAAO48B,WAA1B,CACA,KAAKuc,iBAAL,CAAyBn5C,OAAOm5C,iBAAhC,CAEA,KAAKrd,WAAL,CAAmB97B,OAAO87B,WAA1B,CAEA,KAAKF,QAAL,CAAgB57B,OAAO47B,QAAvB,CAEA,KAAKI,MAAL,CAAch8B,OAAOg8B,MAArB,CACA,KAAK+d,OAAL,CAAe/5C,OAAO+5C,OAAtB,CACA,KAAK7d,YAAL,CAAoBl8B,OAAOk8B,YAA3B,CACA,KAAKC,eAAL,CAAuBn8B,OAAOm8B,eAA9B,CAEA,KAAKod,SAAL,CAAiBv5C,OAAOu5C,SAAxB,CACA,KAAKC,kBAAL,CAA0Bx5C,OAAOw5C,kBAAjC,CACA,KAAKC,gBAAL,CAAwBz5C,OAAOy5C,gBAA/B,CACA,KAAKC,iBAAL,CAAyB15C,OAAO05C,iBAAhC,CAEA,KAAKC,QAAL,CAAgB35C,OAAO25C,QAAvB,CACA,KAAKnP,YAAL,CAAoBxqC,OAAOwqC,YAA3B,CACA,KAAKC,YAAL,CAAoBzqC,OAAOyqC,YAA3B,CAEA,MAAO,KAAP,CAEH,CAtCD,CAwCA;;;;;;;;;;;;;OAeA,QAASwrB,mBAAT,CAA6B1tB,UAA7B,CAA0C,CAEtCytB,kBAAkBp0D,IAAlB,CAAwB,IAAxB,EAEA,KAAKxI,IAAL,CAAY,oBAAZ,CAEA,KAAKnB,KAAL,CAAa,CAAb,CACA,KAAKsoC,QAAL,CAAgB,CAAhB,CACA,KAAK+Y,OAAL,CAAe,CAAf,CAEA,KAAKP,SAAL,CAAgBxQ,UAAhB,EAEH,CAED0tB,mBAAmB/3D,SAAnB,CAA+BC,OAAOC,MAAP,CAAe43D,kBAAkB93D,SAAjC,CAA/B,CACA+3D,mBAAmB/3D,SAAnB,CAA6BI,WAA7B,CAA2C23D,kBAA3C,CAEAA,mBAAmB/3D,SAAnB,CAA6B2gF,oBAA7B,CAAoD,IAApD,CAEA5oB,mBAAmB/3D,SAAnB,CAA6B5H,IAA7B,CAAoC,SAAW0J,MAAX,CAAoB,CAEpDg2D,kBAAkB93D,SAAlB,CAA4B5H,IAA5B,CAAiCsL,IAAjC,CAAuC,IAAvC,CAA6C5B,MAA7C,EAEA,KAAK/H,KAAL,CAAa+H,OAAO/H,KAApB,CACA,KAAKsoC,QAAL,CAAgBvgC,OAAOugC,QAAvB,CACA,KAAK+Y,OAAL,CAAet5C,OAAOs5C,OAAtB,CAEA,MAAO,KAAP,CAEH,CAVD,CAcA,GAAIu+C,WAAY,aAAa15F,OAAOw5F,MAAP,CAAc,CACvCxhC,eAAgBA,cADuB,CAEvCwqB,eAAgBA,cAFuB,CAGvCiX,kBAAmBA,iBAHoB,CAIvC39C,eAAgBA,cAJuB,CAKvCic,eAAgBA,cALuB,CAMvCH,qBAAsBA,oBANiB,CAOvCD,qBAAsBA,oBAPiB,CAQvCjmE,kBAAmBA,iBARoB,CASvCgmE,iBAAkBA,gBATqB,CAUvCD,mBAAoBA,kBAVmB,CAWvCtmE,oBAAqBA,mBAXkB,CAYvComE,kBAAmBA,iBAZoB,CAavCC,qBAAsBA,oBAbiB,CAcvC7b,kBAAmBA,iBAdoB,CAevCmc,mBAAoBA,kBAfmB,CAgBvCD,kBAAmBA,iBAhBoB,CAiBvC5e,SAAUA,QAjB6B,CAAd,CAA7B,CAoBA;;OAIA,GAAI0gD,OAAQ,CAER3qG,QAAS,KAFD,CAIR4qG,MAAO,EAJC,CAMRlpG,IAAK,aAAWi6C,GAAX,CAAgBkvD,IAAhB,CAAuB,CAExB,GAAK,KAAK7qG,OAAL,GAAiB,KAAtB,CAA8B,OAE9B;AAEA,KAAK4qG,KAAL,CAAYjvD,GAAZ,EAAoBkvD,IAApB,CAEH,CAdO,CAgBRv5F,IAAK,aAAWqqC,GAAX,CAAiB,CAElB,GAAK,KAAK37C,OAAL,GAAiB,KAAtB,CAA8B,OAE9B;AAEA,MAAO,MAAK4qG,KAAL,CAAYjvD,GAAZ,CAAP,CAEH,CAxBO,CA0BR1pC,OAAQ,gBAAW0pC,GAAX,CAAiB,CAErB,MAAO,MAAKivD,KAAL,CAAYjvD,GAAZ,CAAP,CAEH,CA9BO,CAgCR0Z,MAAO,gBAAY,CAEf,KAAKu1C,KAAL,CAAa,EAAb,CAEH,CApCO,CAAZ,CAwCA;;OAIA,QAASE,eAAT,CAAyBC,MAAzB,CAAiCC,UAAjC,CAA6CC,OAA7C,CAAuD,CAEnD,GAAI/hG,OAAQ,IAAZ,CAEA,GAAIgiG,WAAY,KAAhB,CACA,GAAIC,aAAc,CAAlB,CACA,GAAIC,YAAa,CAAjB,CACA,GAAIC,aAAc/kG,SAAlB,CAEA,KAAKgP,OAAL,CAAehP,SAAf,CACA,KAAKykG,MAAL,CAAcA,MAAd,CACA,KAAKC,UAAL,CAAkBA,UAAlB,CACA,KAAKC,OAAL,CAAeA,OAAf,CAEA,KAAKK,SAAL,CAAiB,SAAW/wE,GAAX,CAAiB,CAE9B6wE,aAEA,GAAKF,YAAc,KAAnB,CAA2B,CAEvB,GAAKhiG,MAAMoM,OAAN,GAAkBhP,SAAvB,CAAmC,CAE/B4C,MAAMoM,OAAN,CAAeilB,GAAf,CAAoB4wE,WAApB,CAAiCC,UAAjC,EAEH,CAEJ,CAEDF,UAAY,IAAZ,CAEH,CAhBD,CAkBA,KAAKK,OAAL,CAAe,SAAWhxE,GAAX,CAAiB,CAE5B4wE,cAEA,GAAKjiG,MAAM8hG,UAAN,GAAqB1kG,SAA1B,CAAsC,CAElC4C,MAAM8hG,UAAN,CAAkBzwE,GAAlB,CAAuB4wE,WAAvB,CAAoCC,UAApC,EAEH,CAED,GAAKD,cAAgBC,UAArB,CAAkC,CAE9BF,UAAY,KAAZ,CAEA,GAAKhiG,MAAM6hG,MAAN,GAAiBzkG,SAAtB,CAAkC,CAE9B4C,MAAM6hG,MAAN,GAEH,CAEJ,CAEJ,CAtBD,CAwBA,KAAKS,SAAL,CAAiB,SAAWjxE,GAAX,CAAiB,CAE9B,GAAKrxB,MAAM+hG,OAAN,GAAkB3kG,SAAvB,CAAmC,CAE/B4C,MAAM+hG,OAAN,CAAe1wE,GAAf,EAEH,CAEJ,CARD,CAUA,KAAKkxE,UAAL,CAAkB,SAAWlxE,GAAX,CAAiB,CAE/B,GAAK8wE,WAAL,CAAmB,CAEf,MAAOA,aAAa9wE,GAAb,CAAP,CAEH,CAED,MAAOA,IAAP,CAEH,CAVD,CAYA,KAAKmxE,cAAL,CAAsB,SAAWC,SAAX,CAAuB,CAEzCN,YAAcM,SAAd,CACA,MAAO,KAAP,CAEH,CALD,CAOH,CAED,GAAIC,uBAAwB,GAAId,eAAJ,EAA5B,CAEA;;OAIA,GAAIe,SAAU,EAAd,CAEA,QAASC,WAAT,CAAqBC,OAArB,CAA+B,CAE3B,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEH,CAED56F,OAAO4B,MAAP,CAAek5F,WAAW/6F,SAA1B,CAAqC,CAEjCi7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAK1wE,MAAQj0B,SAAb,CAAyBi0B,IAAM,EAAN,CAEzB,GAAK,KAAK0mC,IAAL,GAAc36D,SAAnB,CAA+Bi0B,IAAM,KAAK0mC,IAAL,CAAY1mC,GAAlB,CAE/BA,IAAM,KAAKwxE,OAAL,CAAaN,UAAb,CAAyBlxE,GAAzB,CAAN,CAEA,GAAIrxB,OAAQ,IAAZ,CAEA,GAAI+iG,QAAStB,MAAMr5F,GAAN,CAAWipB,GAAX,CAAb,CAEA,GAAK0xE,SAAW3lG,SAAhB,CAA4B,CAExB4C,MAAM6iG,OAAN,CAAcT,SAAd,CAAyB/wE,GAAzB,EAEA2xE,WAAY,UAAY,CAEpB,GAAKnB,MAAL,CAAcA,OAAQkB,MAAR,EAEd/iG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAND,CAMG,CANH,EAQA,MAAO0xE,OAAP,CAEH,CAED;AAEA,GAAKJ,QAAStxE,GAAT,IAAmBj0B,SAAxB,CAAoC,CAEhCulG,QAAStxE,GAAT,EAAex3B,IAAf,CAAqB,CAEjBgoG,OAAQA,MAFS,CAGjBC,WAAYA,UAHK,CAIjBC,QAASA,OAJQ,CAArB,EAQA,OAEH,CAED;AACA,GAAIkB,cAAe,6BAAnB,CACA,GAAIC,oBAAqB7xE,IAAIrhB,KAAJ,CAAWizF,YAAX,CAAzB,CAEA;AACA,GAAKC,kBAAL,CAA0B,CAEtB,GAAIC,UAAWD,mBAAoB,CAApB,CAAf,CACA,GAAIE,UAAW,CAAC,CAAEF,mBAAoB,CAApB,CAAlB,CACA,GAAI1nG,MAAO0nG,mBAAoB,CAApB,CAAX,CAEA1nG,KAAOqH,OAAOwgG,kBAAP,CAA2B7nG,IAA3B,CAAP,CAEA,GAAK4nG,QAAL,CAAgB5nG,KAAOqH,OAAOygG,IAAP,CAAa9nG,IAAb,CAAP,CAEhB,GAAI,CAEA,GAAI+nG,SAAJ,CACA,GAAIC,cAAe,CAAE,KAAKA,YAAL,EAAqB,EAAvB,EAA4BC,WAA5B,EAAnB,CAEA,OAASD,YAAT,EAEI,IAAK,aAAL,CACA,IAAK,MAAL,CAEI,GAAIzwD,MAAO,GAAI7F,WAAJ,CAAgB1xC,KAAK4J,MAArB,CAAX,CAEA,IAAM,GAAI4D,GAAI,CAAd,CAAiBA,EAAIxN,KAAK4J,MAA1B,CAAkC4D,GAAlC,CAAyC,CAErC+pC,KAAM/pC,CAAN,EAAYxN,KAAKkoG,UAAL,CAAiB16F,CAAjB,CAAZ,CAEH,CAED,GAAKw6F,eAAiB,MAAtB,CAA+B,CAE3BD,SAAW,GAAII,KAAJ,CAAU,CAAE5wD,KAAK9G,MAAP,CAAV,CAA2B,CAAElpC,KAAMogG,QAAR,CAA3B,CAAX,CAEH,CAJD,IAIO,CAEHI,SAAWxwD,KAAK9G,MAAhB,CAEH,CAED,MAEJ,IAAK,UAAL,CAEI,GAAI23D,QAAS,GAAIC,UAAJ,EAAb,CACAN,SAAWK,OAAOE,eAAP,CAAwBtoG,IAAxB,CAA8B2nG,QAA9B,CAAX,CAEA,MAEJ,IAAK,MAAL,CAEII,SAAWzxD,KAAKa,KAAL,CAAYn3C,IAAZ,CAAX,CAEA,MAEJ,QAAS;AAEL+nG,SAAW/nG,IAAX,CAEA,MA1CR,CA8CA;AACAqH,OAAOmgG,UAAP,CAAmB,UAAY,CAE3B,GAAKnB,MAAL,CAAcA,OAAQ0B,QAAR,EAEdvjG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAND,CAMG,CANH,EAQH,CAAC,MAAQ3S,KAAR,CAAgB,CAEd;AACA7b,OAAOmgG,UAAP,CAAmB,UAAY,CAE3B,GAAKjB,OAAL,CAAeA,QAASrjF,KAAT,EAEf1e,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EACArxB,MAAM6iG,OAAN,CAAcP,SAAd,CAAyBjxE,GAAzB,EAEH,CAPD,CAOG,CAPH,EASH,CAEJ,CApFD,IAoFO,CAEH;AAEAsxE,QAAStxE,GAAT,EAAiB,EAAjB,CAEAsxE,QAAStxE,GAAT,EAAex3B,IAAf,CAAqB,CAEjBgoG,OAAQA,MAFS,CAGjBC,WAAYA,UAHK,CAIjBC,QAASA,OAJQ,CAArB,EAQA,GAAIgC,SAAU,GAAIC,eAAJ,EAAd,CAEAD,QAAQE,IAAR,CAAc,KAAd,CAAqB5yE,GAArB,CAA0B,IAA1B,EAEA0yE,QAAQ1oG,gBAAR,CAA0B,MAA1B,CAAkC,SAAW2K,KAAX,CAAmB,CAEjD,GAAIu9F,UAAW,KAAKA,QAApB,CAEA9B,MAAMjpG,GAAN,CAAW64B,GAAX,CAAgBkyE,QAAhB,EAEA,GAAIW,WAAYvB,QAAStxE,GAAT,CAAhB,CAEA,MAAOsxE,SAAStxE,GAAT,CAAP,CAEA,GAAK,KAAK8yE,MAAL,GAAgB,GAAhB,EAAuB,KAAKA,MAAL,GAAgB,CAA5C,CAAgD,CAE5C;AACA;AAEA,GAAK,KAAKA,MAAL,GAAgB,CAArB,CAAyBxoG,QAAQgK,IAAR,CAAc,2CAAd,EAEzB,IAAM,GAAIqD,GAAI,CAAR,CAAW6qB,GAAKqwE,UAAU9+F,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnD,GAAIqD,UAAW63F,UAAWl7F,CAAX,CAAf,CACA,GAAKqD,SAASw1F,MAAd,CAAuBx1F,SAASw1F,MAAT,CAAiB0B,QAAjB,EAE1B,CAEDvjG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAhBD,IAgBO,CAEH,IAAM,GAAIroB,GAAI,CAAR,CAAW6qB,GAAKqwE,UAAU9+F,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnD,GAAIqD,UAAW63F,UAAWl7F,CAAX,CAAf,CACA,GAAKqD,SAAS01F,OAAd,CAAwB11F,SAAS01F,OAAT,CAAkB/7F,KAAlB,EAE3B,CAEDhG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EACArxB,MAAM6iG,OAAN,CAAcP,SAAd,CAAyBjxE,GAAzB,EAEH,CAEJ,CAxCD,CAwCG,KAxCH,EA0CA0yE,QAAQ1oG,gBAAR,CAA0B,UAA1B,CAAsC,SAAW2K,KAAX,CAAmB,CAErD,GAAIk+F,WAAYvB,QAAStxE,GAAT,CAAhB,CAEA,IAAM,GAAIroB,GAAI,CAAR,CAAW6qB,GAAKqwE,UAAU9+F,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnD,GAAIqD,UAAW63F,UAAWl7F,CAAX,CAAf,CACA,GAAKqD,SAASy1F,UAAd,CAA2Bz1F,SAASy1F,UAAT,CAAqB97F,KAArB,EAE9B,CAEJ,CAXD,CAWG,KAXH,EAaA+9F,QAAQ1oG,gBAAR,CAA0B,OAA1B,CAAmC,SAAW2K,KAAX,CAAmB,CAElD,GAAIk+F,WAAYvB,QAAStxE,GAAT,CAAhB,CAEA,MAAOsxE,SAAStxE,GAAT,CAAP,CAEA,IAAM,GAAIroB,GAAI,CAAR,CAAW6qB,GAAKqwE,UAAU9+F,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnD,GAAIqD,UAAW63F,UAAWl7F,CAAX,CAAf,CACA,GAAKqD,SAAS01F,OAAd,CAAwB11F,SAAS01F,OAAT,CAAkB/7F,KAAlB,EAE3B,CAEDhG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EACArxB,MAAM6iG,OAAN,CAAcP,SAAd,CAAyBjxE,GAAzB,EAEH,CAhBD,CAgBG,KAhBH,EAkBA,GAAK,KAAKmyE,YAAL,GAAsBpmG,SAA3B,CAAuC2mG,QAAQP,YAAR,CAAuB,KAAKA,YAA5B,CACvC,GAAK,KAAKY,eAAL,GAAyBhnG,SAA9B,CAA0C2mG,QAAQK,eAAR,CAA0B,KAAKA,eAA/B,CAE1C,GAAKL,QAAQM,gBAAb,CAAgCN,QAAQM,gBAAR,CAA0B,KAAKlB,QAAL,GAAkB/lG,SAAlB,CAA8B,KAAK+lG,QAAnC,CAA8C,YAAxE,EAEhC,IAAM,GAAImB,OAAV,GAAoB,MAAKC,aAAzB,CAAyC,CAErCR,QAAQS,gBAAR,CAA0BF,MAA1B,CAAkC,KAAKC,aAAL,CAAoBD,MAApB,CAAlC,EAEH,CAEDP,QAAQU,IAAR,CAAc,IAAd,EAEH,CAEDzkG,MAAM6iG,OAAN,CAAcT,SAAd,CAAyB/wE,GAAzB,EAEA,MAAO0yE,QAAP,CAEH,CArPgC,CAuPjCW,QAAS,iBAAWp8F,KAAX,CAAmB,CAExB,KAAKyvD,IAAL,CAAYzvD,KAAZ,CACA,MAAO,KAAP,CAEH,CA5PgC,CA8PjCq8F,gBAAiB,yBAAWr8F,KAAX,CAAmB,CAEhC,KAAKk7F,YAAL,CAAoBl7F,KAApB,CACA,MAAO,KAAP,CAEH,CAnQgC,CAqQjCs8F,mBAAoB,4BAAWt8F,KAAX,CAAmB,CAEnC,KAAK87F,eAAL,CAAuB97F,KAAvB,CACA,MAAO,KAAP,CAEH,CA1QgC,CA4QjCu8F,YAAa,qBAAWv8F,KAAX,CAAmB,CAE5B,KAAK66F,QAAL,CAAgB76F,KAAhB,CACA,MAAO,KAAP,CAEH,CAjRgC,CAmRjCk8F,iBAAkB,0BAAWl8F,KAAX,CAAmB,CAEjC,KAAKi8F,aAAL,CAAqBj8F,KAArB,CACA,MAAO,KAAP,CAEH,CAxRgC,CAArC,EA4RA;;;;OAMA,QAASw8F,wBAAT,CAAkCjC,OAAlC,CAA4C,CAExC,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEA;AACA,KAAKqC,OAAL,CAAe,IAAf,CAEH,CAEDj9F,OAAO4B,MAAP,CAAeo7F,wBAAwBj9F,SAAvC,CAAkD,CAE9Ci7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAI/hG,OAAQ,IAAZ,CAEA,GAAIoxB,QAAS,EAAb,CAEA,GAAIiB,SAAU,GAAIi8D,kBAAJ,EAAd,CACAj8D,QAAQpD,KAAR,CAAgBmC,MAAhB,CAEA,GAAI4zE,QAAS,GAAIpC,WAAJ,CAAgB,KAAKC,OAArB,CAAb,CACAmC,OAAON,OAAP,CAAgB,KAAK3sC,IAArB,EACAitC,OAAOL,eAAP,CAAwB,aAAxB,EAEA,QAASM,YAAT,CAAsBj8F,CAAtB,CAA0B,CAEtBg8F,OAAOlC,IAAP,CAAazxE,IAAKroB,CAAL,CAAb,CAAuB,SAAWijC,MAAX,CAAoB,CAEvC,GAAIi5D,UAAWllG,MAAM+kG,OAAN,CAAe94D,MAAf,CAAuB,IAAvB,CAAf,CAEA7a,OAAQpoB,CAAR,EAAc,CACV1Q,MAAO4sG,SAAS5sG,KADN,CAEVC,OAAQ2sG,SAAS3sG,MAFP,CAGVg3B,OAAQ21E,SAAS31E,MAHP,CAIVK,QAASs1E,SAASt1E,OAJR,CAAd,CAOAu1E,QAAU,CAAV,CAEA,GAAKA,SAAW,CAAhB,CAAoB,CAEhB,GAAKD,SAASE,WAAT,GAAyB,CAA9B,CACI/yE,QAAQ/C,SAAR,CAAoBna,YAApB,CAEJkd,QAAQ9C,MAAR,CAAiB21E,SAAS31E,MAA1B,CACA8C,QAAQ0rB,WAAR,CAAsB,IAAtB,CAEA,GAAK8jD,MAAL,CAAcA,OAAQxvE,OAAR,EAEjB,CAEJ,CAzBD,CAyBGyvE,UAzBH,CAyBeC,OAzBf,EA2BH,CAED,GAAK32F,MAAM63B,OAAN,CAAe5R,GAAf,CAAL,CAA4B,CAExB,GAAI8zE,QAAS,CAAb,CAEA,IAAM,GAAIn8F,GAAI,CAAR,CAAW6qB,GAAKxC,IAAIjsB,MAA1B,CAAkC4D,EAAI6qB,EAAtC,CAA0C,EAAG7qB,CAA7C,CAAiD,CAE7Ci8F,YAAaj8F,CAAb,EAEH,CAEJ,CAVD,IAUO,CAEH;AAEAg8F,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAW4a,MAAX,CAAoB,CAElC,GAAIi5D,UAAWllG,MAAM+kG,OAAN,CAAe94D,MAAf,CAAuB,IAAvB,CAAf,CAEA,GAAKi5D,SAASG,SAAd,CAA0B,CAEtB,GAAIpxD,OAAQixD,SAASt1E,OAAT,CAAiBxqB,MAAjB,CAA0B8/F,SAASE,WAA/C,CAEA,IAAM,GAAIx3F,GAAI,CAAd,CAAiBA,EAAIqmC,KAArB,CAA4BrmC,GAA5B,CAAmC,CAE/BwjB,OAAQxjB,CAAR,EAAc,CAAEgiB,QAAS,EAAX,CAAd,CAEA,IAAM,GAAI5mB,GAAI,CAAd,CAAiBA,EAAIk8F,SAASE,WAA9B,CAA2Cp8F,GAA3C,CAAkD,CAE9CooB,OAAQxjB,CAAR,EAAYgiB,OAAZ,CAAoB/1B,IAApB,CAA0BqrG,SAASt1E,OAAT,CAAkBhiB,EAAIs3F,SAASE,WAAb,CAA2Bp8F,CAA7C,CAA1B,EACAooB,OAAQxjB,CAAR,EAAY2hB,MAAZ,CAAqB21E,SAAS31E,MAA9B,CACA6B,OAAQxjB,CAAR,EAAYtV,KAAZ,CAAoB4sG,SAAS5sG,KAA7B,CACA84B,OAAQxjB,CAAR,EAAYrV,MAAZ,CAAqB2sG,SAAS3sG,MAA9B,CAEH,CAEJ,CAEJ,CAnBD,IAmBO,CAEH85B,QAAQpD,KAAR,CAAc32B,KAAd,CAAsB4sG,SAAS5sG,KAA/B,CACA+5B,QAAQpD,KAAR,CAAc12B,MAAd,CAAuB2sG,SAAS3sG,MAAhC,CACA85B,QAAQzC,OAAR,CAAkBs1E,SAASt1E,OAA3B,CAEH,CAED,GAAKs1E,SAASE,WAAT,GAAyB,CAA9B,CAAkC,CAE9B/yE,QAAQ/C,SAAR,CAAoBna,YAApB,CAEH,CAEDkd,QAAQ9C,MAAR,CAAiB21E,SAAS31E,MAA1B,CACA8C,QAAQ0rB,WAAR,CAAsB,IAAtB,CAEA,GAAK8jD,MAAL,CAAcA,OAAQxvE,OAAR,EAEjB,CA1CD,CA0CGyvE,UA1CH,CA0CeC,OA1Cf,EA4CH,CAED,MAAO1vE,QAAP,CAEH,CA5G6C,CA8G9CqyE,QAAS,iBAAWp8F,KAAX,CAAmB,CAExB,KAAKyvD,IAAL,CAAYzvD,KAAZ,CACA,MAAO,KAAP,CAEH,CAnH6C,CAAlD,EAuHA;;;;OAMA,QAASg9F,kBAAT,CAA4BzC,OAA5B,CAAsC,CAElC,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEA;AACA,KAAKqC,OAAL,CAAe,IAAf,CAEH,CAEDj9F,OAAO4B,MAAP,CAAe47F,kBAAkBz9F,SAAjC,CAA4C,CAExCi7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAI/hG,OAAQ,IAAZ,CAEA,GAAIqyB,SAAU,GAAIS,YAAJ,EAAd,CAEA,GAAIkyE,QAAS,GAAIpC,WAAJ,CAAgB,KAAKC,OAArB,CAAb,CACAmC,OAAOL,eAAP,CAAwB,aAAxB,EAEAK,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAW4a,MAAX,CAAoB,CAElC,GAAIs5D,SAAUvlG,MAAM+kG,OAAN,CAAe94D,MAAf,CAAd,CAEA,GAAK,CAAEs5D,OAAP,CAAiB,OAEjB,GAAKnoG,YAAcmoG,QAAQt2E,KAA3B,CAAmC,CAE/BoD,QAAQpD,KAAR,CAAgBs2E,QAAQt2E,KAAxB,CAEH,CAJD,IAIO,IAAK7xB,YAAcmoG,QAAQ/pG,IAA3B,CAAkC,CAErC62B,QAAQpD,KAAR,CAAc32B,KAAd,CAAsBitG,QAAQjtG,KAA9B,CACA+5B,QAAQpD,KAAR,CAAc12B,MAAd,CAAuBgtG,QAAQhtG,MAA/B,CACA85B,QAAQpD,KAAR,CAAczzB,IAAd,CAAqB+pG,QAAQ/pG,IAA7B,CAEH,CAED62B,QAAQlD,KAAR,CAAgB/xB,YAAcmoG,QAAQp2E,KAAtB,CAA8Bo2E,QAAQp2E,KAAtC,CAA8Cra,mBAA9D,CACAud,QAAQjD,KAAR,CAAgBhyB,YAAcmoG,QAAQn2E,KAAtB,CAA8Bm2E,QAAQn2E,KAAtC,CAA8Cta,mBAA9D,CAEAud,QAAQhD,SAAR,CAAoBjyB,YAAcmoG,QAAQl2E,SAAtB,CAAkCk2E,QAAQl2E,SAA1C,CAAsDla,YAA1E,CACAkd,QAAQ/C,SAAR,CAAoBlyB,YAAcmoG,QAAQj2E,SAAtB,CAAkCi2E,QAAQj2E,SAA1C,CAAsDja,wBAA1E,CAEAgd,QAAQ7C,UAAR,CAAqBpyB,YAAcmoG,QAAQ/1E,UAAtB,CAAmC+1E,QAAQ/1E,UAA3C,CAAwD,CAA7E,CAEA,GAAKpyB,YAAcmoG,QAAQh2E,MAA3B,CAAoC,CAEhC8C,QAAQ9C,MAAR,CAAiBg2E,QAAQh2E,MAAzB,CAEH,CACD,GAAKnyB,YAAcmoG,QAAQxiG,IAA3B,CAAkC,CAE9BsvB,QAAQtvB,IAAR,CAAewiG,QAAQxiG,IAAvB,CAEH,CAED,GAAK3F,YAAcmoG,QAAQ31E,OAA3B,CAAqC,CAEjCyC,QAAQzC,OAAR,CAAkB21E,QAAQ31E,OAA1B,CAEH,CAED,GAAK,IAAM21E,QAAQH,WAAnB,CAAiC,CAE7B/yE,QAAQ/C,SAAR,CAAoBna,YAApB,CAEH,CAEDkd,QAAQ0rB,WAAR,CAAsB,IAAtB,CAEA,GAAK8jD,MAAL,CAAcA,OAAQxvE,OAAR,CAAiBkzE,OAAjB,EAEjB,CArDD,CAqDGzD,UArDH,CAqDeC,OArDf,EAwDA,MAAO1vE,QAAP,CAEH,CArEuC,CAA5C,EAyEA;;OAKA,QAASmzE,YAAT,CAAsB3C,OAAtB,CAAgC,CAE5B,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEH,CAED56F,OAAO4B,MAAP,CAAe87F,YAAY39F,SAA3B,CAAsC,CAElC49F,YAAa,WAFqB,CAIlC3C,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAK1wE,MAAQj0B,SAAb,CAAyBi0B,IAAM,EAAN,CAEzB,GAAK,KAAK0mC,IAAL,GAAc36D,SAAnB,CAA+Bi0B,IAAM,KAAK0mC,IAAL,CAAY1mC,GAAlB,CAE/BA,IAAM,KAAKwxE,OAAL,CAAaN,UAAb,CAAyBlxE,GAAzB,CAAN,CAEA,GAAIrxB,OAAQ,IAAZ,CAEA,GAAI+iG,QAAStB,MAAMr5F,GAAN,CAAWipB,GAAX,CAAb,CAEA,GAAK0xE,SAAW3lG,SAAhB,CAA4B,CAExB4C,MAAM6iG,OAAN,CAAcT,SAAd,CAAyB/wE,GAAzB,EAEA2xE,WAAY,UAAY,CAEpB,GAAKnB,MAAL,CAAcA,OAAQkB,MAAR,EAEd/iG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAND,CAMG,CANH,EAQA,MAAO0xE,OAAP,CAEH,CAED,GAAI9zE,OAAQ5xB,SAASuzB,eAAT,CAA0B,8BAA1B,CAA0D,KAA1D,CAAZ,CAEA,QAAS80E,YAAT,EAAuB,CAEnBz2E,MAAM3sB,mBAAN,CAA2B,MAA3B,CAAmCojG,WAAnC,CAAgD,KAAhD,EACAz2E,MAAM3sB,mBAAN,CAA2B,OAA3B,CAAoCqjG,YAApC,CAAkD,KAAlD,EAEAlE,MAAMjpG,GAAN,CAAW64B,GAAX,CAAgB,IAAhB,EAEA,GAAKwwE,MAAL,CAAcA,OAAQ,IAAR,EAEd7hG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAED,QAASs0E,aAAT,CAAuB3/F,KAAvB,CAA+B,CAE3BipB,MAAM3sB,mBAAN,CAA2B,MAA3B,CAAmCojG,WAAnC,CAAgD,KAAhD,EACAz2E,MAAM3sB,mBAAN,CAA2B,OAA3B,CAAoCqjG,YAApC,CAAkD,KAAlD,EAEA,GAAK5D,OAAL,CAAeA,QAAS/7F,KAAT,EAEfhG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EACArxB,MAAM6iG,OAAN,CAAcP,SAAd,CAAyBjxE,GAAzB,EAEH,CAEDpC,MAAM5zB,gBAAN,CAAwB,MAAxB,CAAgCqqG,WAAhC,CAA6C,KAA7C,EACAz2E,MAAM5zB,gBAAN,CAAwB,OAAxB,CAAiCsqG,YAAjC,CAA+C,KAA/C,EAEA,GAAKt0E,IAAIu0E,MAAJ,CAAY,CAAZ,CAAe,CAAf,IAAuB,OAA5B,CAAsC,CAElC,GAAK,KAAKH,WAAL,GAAqBroG,SAA1B,CAAsC6xB,MAAMw2E,WAAN,CAAoB,KAAKA,WAAzB,CAEzC,CAEDzlG,MAAM6iG,OAAN,CAAcT,SAAd,CAAyB/wE,GAAzB,EAEApC,MAAM42E,GAAN,CAAYx0E,GAAZ,CAEA,MAAOpC,MAAP,CAEH,CA1EiC,CA4ElC62E,eAAgB,wBAAWx9F,KAAX,CAAmB,CAE/B,KAAKm9F,WAAL,CAAmBn9F,KAAnB,CACA,MAAO,KAAP,CAEH,CAjFiC,CAmFlCo8F,QAAS,iBAAWp8F,KAAX,CAAmB,CAExB,KAAKyvD,IAAL,CAAYzvD,KAAZ,CACA,MAAO,KAAP,CAEH,CAxFiC,CAAtC,EA4FA;;OAKA,QAASy9F,kBAAT,CAA4BlD,OAA5B,CAAsC,CAElC,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEH,CAED56F,OAAO4B,MAAP,CAAeq8F,kBAAkBl+F,SAAjC,CAA4C,CAExC49F,YAAa,WAF2B,CAIxC3C,KAAM,cAAWkD,IAAX,CAAiBnE,MAAjB,CAAyBC,UAAzB,CAAqCC,OAArC,CAA+C,CAEjD,GAAI1vE,SAAU,GAAIihC,YAAJ,EAAd,CAEA,GAAI0xC,QAAS,GAAIQ,YAAJ,CAAiB,KAAK3C,OAAtB,CAAb,CACAmC,OAAOc,cAAP,CAAuB,KAAKL,WAA5B,EACAT,OAAON,OAAP,CAAgB,KAAK3sC,IAArB,EAEA,GAAIotC,QAAS,CAAb,CAEA,QAASF,YAAT,CAAsBj8F,CAAtB,CAA0B,CAEtBg8F,OAAOlC,IAAP,CAAakD,KAAMh9F,CAAN,CAAb,CAAwB,SAAWimB,KAAX,CAAmB,CAEvCoD,QAAQjB,MAAR,CAAgBpoB,CAAhB,EAAsBimB,KAAtB,CAEAk2E,SAEA,GAAKA,SAAW,CAAhB,CAAoB,CAEhB9yE,QAAQ0rB,WAAR,CAAsB,IAAtB,CAEA,GAAK8jD,MAAL,CAAcA,OAAQxvE,OAAR,EAEjB,CAEJ,CAdD,CAcGj1B,SAdH,CAcc2kG,OAdd,EAgBH,CAED,IAAM,GAAI/4F,GAAI,CAAd,CAAiBA,EAAIg9F,KAAK5gG,MAA1B,CAAkC,EAAG4D,CAArC,CAAyC,CAErCi8F,YAAaj8F,CAAb,EAEH,CAED,MAAOqpB,QAAP,CAEH,CA1CuC,CA4CxCyzE,eAAgB,wBAAWx9F,KAAX,CAAmB,CAE/B,KAAKm9F,WAAL,CAAmBn9F,KAAnB,CACA,MAAO,KAAP,CAEH,CAjDuC,CAmDxCo8F,QAAS,iBAAWp8F,KAAX,CAAmB,CAExB,KAAKyvD,IAAL,CAAYzvD,KAAZ,CACA,MAAO,KAAP,CAEH,CAxDuC,CAA5C,EA4DA;;OAKA,QAAS29F,cAAT,CAAwBpD,OAAxB,CAAkC,CAE9B,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEH,CAED56F,OAAO4B,MAAP,CAAeu8F,cAAcp+F,SAA7B,CAAwC,CAEpC49F,YAAa,WAFuB,CAIpC3C,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAI1vE,SAAU,GAAIrD,QAAJ,EAAd,CAEA,GAAIg2E,QAAS,GAAIQ,YAAJ,CAAiB,KAAK3C,OAAtB,CAAb,CACAmC,OAAOc,cAAP,CAAuB,KAAKL,WAA5B,EACAT,OAAON,OAAP,CAAgB,KAAK3sC,IAArB,EAEAitC,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAWpC,KAAX,CAAmB,CAEjCoD,QAAQpD,KAAR,CAAgBA,KAAhB,CAEA;AACA,GAAIi3E,QAAS70E,IAAI80E,MAAJ,CAAY,eAAZ,EAAgC,CAAhC,EAAqC90E,IAAI80E,MAAJ,CAAY,oBAAZ,IAAuC,CAAzF,CAEA9zE,QAAQ9C,MAAR,CAAiB22E,OAAS/vF,SAAT,CAAqBC,UAAtC,CACAic,QAAQ0rB,WAAR,CAAsB,IAAtB,CAEA,GAAK8jD,SAAWzkG,SAAhB,CAA4B,CAExBykG,OAAQxvE,OAAR,EAEH,CAEJ,CAhBD,CAgBGyvE,UAhBH,CAgBeC,OAhBf,EAkBA,MAAO1vE,QAAP,CAEH,CAhCmC,CAkCpCyzE,eAAgB,wBAAWx9F,KAAX,CAAmB,CAE/B,KAAKm9F,WAAL,CAAmBn9F,KAAnB,CACA,MAAO,KAAP,CAEH,CAvCmC,CAyCpCo8F,QAAS,iBAAWp8F,KAAX,CAAmB,CAExB,KAAKyvD,IAAL,CAAYzvD,KAAZ,CACA,MAAO,KAAP,CAEH,CA9CmC,CAAxC,EAkDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QA+BA;;oEAIA,QAAS89F,MAAT,EAAiB,CAEb,KAAKrjG,IAAL,CAAY,OAAZ,CAEA,KAAKsjG,kBAAL,CAA0B,GAA1B,CAEH,CAEDv+F,OAAO4B,MAAP,CAAe08F,MAAMv+F,SAArB,CAAgC,CAE5B;AACA;AAEAy+F,SAAU,mBAAW,uBAA0B,CAE3C3qG,QAAQgK,IAAR,CAAc,2CAAd,EACA,MAAO,KAAP,CAEH,CAV2B,CAY5B;AACA;AAEAssF,WAAY,oBAAWrvD,CAAX,CAAc2jE,cAAd,CAA+B,CAEvC,GAAI93F,GAAI,KAAK+3F,cAAL,CAAqB5jE,CAArB,CAAR,CACA,MAAO,MAAK0jE,QAAL,CAAe73F,CAAf,CAAkB83F,cAAlB,CAAP,CAEH,CApB2B,CAsB5B;AAEAE,UAAW,mBAAWC,SAAX,CAAuB,CAE9B,GAAKA,YAActpG,SAAnB,CAA+BspG,UAAY,CAAZ,CAE/B,GAAI/yE,QAAS,EAAb,CAEA,IAAM,GAAI/S,GAAI,CAAd,CAAiBA,GAAK8lF,SAAtB,CAAiC9lF,GAAjC,CAAwC,CAEpC+S,OAAO95B,IAAP,CAAa,KAAKysG,QAAL,CAAe1lF,EAAI8lF,SAAnB,CAAb,EAEH,CAED,MAAO/yE,OAAP,CAEH,CAtC2B,CAwC5B;AAEAylE,gBAAiB,yBAAWsN,SAAX,CAAuB,CAEpC,GAAKA,YAActpG,SAAnB,CAA+BspG,UAAY,CAAZ,CAE/B,GAAI/yE,QAAS,EAAb,CAEA,IAAM,GAAI/S,GAAI,CAAd,CAAiBA,GAAK8lF,SAAtB,CAAiC9lF,GAAjC,CAAwC,CAEpC+S,OAAO95B,IAAP,CAAa,KAAKo4F,UAAL,CAAiBrxE,EAAI8lF,SAArB,CAAb,EAEH,CAED,MAAO/yE,OAAP,CAEH,CAxD2B,CA0D5B;AAEAgzE,UAAW,oBAAY,CAEnB,GAAIC,SAAU,KAAKC,UAAL,EAAd,CACA,MAAOD,SAASA,QAAQxhG,MAAR,CAAiB,CAA1B,CAAP,CAEH,CAjE2B,CAmE5B;AAEAyhG,WAAY,oBAAWH,SAAX,CAAuB,CAE/B,GAAKA,YAActpG,SAAnB,CAA+BspG,UAAY,KAAKL,kBAAjB,CAE/B,GAAK,KAAKS,eAAL,EACC,KAAKA,eAAL,CAAqB1hG,MAArB,GAAgCshG,UAAY,CAD7C,EAED,CAAE,KAAK3oD,WAFX,CAEyB,CAErB,MAAO,MAAK+oD,eAAZ,CAEH,CAED,KAAK/oD,WAAL,CAAmB,KAAnB,CAEA,GAAIxL,OAAQ,EAAZ,CACA,GAAIw0D,QAAJ,CAAahT,KAAO,KAAKuS,QAAL,CAAe,CAAf,CAApB,CACA,GAAIv+E,EAAJ,CAAOsvE,IAAM,CAAb,CAEA9kD,MAAM14C,IAAN,CAAY,CAAZ,EAEA,IAAMkuB,EAAI,CAAV,CAAaA,GAAK2+E,SAAlB,CAA6B3+E,GAA7B,CAAoC,CAEhCg/E,QAAU,KAAKT,QAAL,CAAev+E,EAAI2+E,SAAnB,CAAV,CACArP,KAAO0P,QAAQrpF,UAAR,CAAoBq2E,IAApB,CAAP,CACAxhD,MAAM14C,IAAN,CAAYw9F,GAAZ,EACAtD,KAAOgT,OAAP,CAEH,CAED,KAAKD,eAAL,CAAuBv0D,KAAvB,CAEA,MAAOA,MAAP,CAAc;AAEjB,CAtG2B,CAwG5By0D,iBAAkB,2BAAY,CAE1B,KAAKjpD,WAAL,CAAmB,IAAnB,CACA,KAAK8oD,UAAL,GAEH,CA7G2B,CA+G5B;AAEAL,eAAgB,wBAAW5jE,CAAX,CAAcp+B,QAAd,CAAyB,CAErC,GAAIyiG,YAAa,KAAKJ,UAAL,EAAjB,CAEA,GAAI79F,GAAI,CAAR,CAAW6qB,GAAKozE,WAAW7hG,MAA3B,CAEA,GAAI8hG,gBAAJ,CAAqB;AAErB,GAAK1iG,QAAL,CAAgB,CAEZ0iG,gBAAkB1iG,QAAlB,CAEH,CAJD,IAIO,CAEH0iG,gBAAkBtkE,EAAIqkE,WAAYpzE,GAAK,CAAjB,CAAtB,CAEH,CAED;AAEA,GAAIhZ,KAAM,CAAV,CAAaC,KAAO+Y,GAAK,CAAzB,CAA4BszE,UAA5B,CAEA,MAAQtsF,KAAOC,IAAf,CAAsB,CAElB9R,EAAItO,KAAKmT,KAAL,CAAYgN,IAAM,CAAEC,KAAOD,GAAT,EAAiB,CAAnC,CAAJ,CAA4C;AAE5CssF,WAAaF,WAAYj+F,CAAZ,EAAkBk+F,eAA/B,CAEA,GAAKC,WAAa,CAAlB,CAAsB,CAElBtsF,IAAM7R,EAAI,CAAV,CAEH,CAJD,IAIO,IAAKm+F,WAAa,CAAlB,CAAsB,CAEzBrsF,KAAO9R,EAAI,CAAX,CAEH,CAJM,IAIA,CAEH8R,KAAO9R,CAAP,CACA,MAEA;AAEH,CAEJ,CAEDA,EAAI8R,IAAJ,CAEA,GAAKmsF,WAAYj+F,CAAZ,IAAoBk+F,eAAzB,CAA2C,CAEvC,MAAOl+F,IAAM6qB,GAAK,CAAX,CAAP,CAEH,CAED;AAEA,GAAIuzE,cAAeH,WAAYj+F,CAAZ,CAAnB,CACA,GAAIq+F,aAAcJ,WAAYj+F,EAAI,CAAhB,CAAlB,CAEA,GAAIs+F,eAAgBD,YAAcD,YAAlC,CAEA;AAEA,GAAIG,iBAAkB,CAAEL,gBAAkBE,YAApB,EAAqCE,aAA3D,CAEA;AAEA,GAAI74F,GAAI,CAAEzF,EAAIu+F,eAAN,GAA4B1zE,GAAK,CAAjC,CAAR,CAEA,MAAOplB,EAAP,CAEH,CAzL2B,CA2L5B;AACA;AACA;AACA;AAEA+4F,WAAY,oBAAW/4F,CAAX,CAAe,CAEvB,GAAIuqB,OAAQ,MAAZ,CACA,GAAIitB,IAAKx3C,EAAIuqB,KAAb,CACA,GAAI/pB,IAAKR,EAAIuqB,KAAb,CAEA;AAEA,GAAKitB,GAAK,CAAV,CAAcA,GAAK,CAAL,CACd,GAAKh3C,GAAK,CAAV,CAAcA,GAAK,CAAL,CAEd,GAAIw4F,KAAM,KAAKnB,QAAL,CAAergD,EAAf,CAAV,CACA,GAAIyhD,KAAM,KAAKpB,QAAL,CAAer3F,EAAf,CAAV,CAEA,GAAIq9E,KAAMob,IAAI5tG,KAAJ,GAAYoH,GAAZ,CAAiBumG,GAAjB,CAAV,CACA,MAAOnb,KAAI9uE,SAAJ,EAAP,CAEH,CAjN2B,CAmN5BmqF,aAAc,sBAAW/kE,CAAX,CAAe,CAEzB,GAAIn0B,GAAI,KAAK+3F,cAAL,CAAqB5jE,CAArB,CAAR,CACA,MAAO,MAAK4kE,UAAL,CAAiB/4F,CAAjB,CAAP,CAEH,CAxN2B,CA0N5BmjF,oBAAqB,6BAAWqN,QAAX,CAAqB5N,MAArB,CAA8B,CAE/C;AAEA,GAAI1jE,QAAS,GAAIrwB,QAAJ,EAAb,CAEA,GAAIm0F,UAAW,EAAf,CACA,GAAIj8C,SAAU,EAAd,CACA,GAAIk8C,WAAY,EAAhB,CAEA,GAAIpF,KAAM,GAAIhvF,QAAJ,EAAV,CACA,GAAIsqG,KAAM,GAAInpF,QAAJ,EAAV,CAEA,GAAIzV,EAAJ,CAAO45B,CAAP,CAAU9iC,KAAV,CAEA;AAEA,IAAMkJ,EAAI,CAAV,CAAaA,GAAKi2F,QAAlB,CAA4Bj2F,GAA5B,CAAmC,CAE/B45B,EAAI55B,EAAIi2F,QAAR,CAEAxN,SAAUzoF,CAAV,EAAgB,KAAK2+F,YAAL,CAAmB/kE,CAAnB,CAAhB,CACA6uD,SAAUzoF,CAAV,EAAcwU,SAAd,GAEH,CAED;AACA;AAEAg4B,QAAS,CAAT,EAAe,GAAIl4C,QAAJ,EAAf,CACAo0F,UAAW,CAAX,EAAiB,GAAIp0F,QAAJ,EAAjB,CACA,GAAImE,KAAMgO,OAAOo4F,SAAjB,CACA,GAAI/hF,IAAKprB,KAAK6iB,GAAL,CAAUk0E,SAAU,CAAV,EAAcz6F,CAAxB,CAAT,CACA,GAAI+uB,IAAKrrB,KAAK6iB,GAAL,CAAUk0E,SAAU,CAAV,EAAcx6F,CAAxB,CAAT,CACA,GAAI6wG,IAAKptG,KAAK6iB,GAAL,CAAUk0E,SAAU,CAAV,EAAcv6F,CAAxB,CAAT,CAEA,GAAK4uB,IAAMrkB,GAAX,CAAiB,CAEbA,IAAMqkB,EAAN,CACA6H,OAAO91B,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAEH,CAED,GAAKkuB,IAAMtkB,GAAX,CAAiB,CAEbA,IAAMskB,EAAN,CACA4H,OAAO91B,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAEH,CAED,GAAKiwG,IAAMrmG,GAAX,CAAiB,CAEbksB,OAAO91B,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAkB,CAAlB,EAEH,CAEDy0F,IAAItqE,YAAJ,CAAkByvE,SAAU,CAAV,CAAlB,CAAiC9jE,MAAjC,EAA0CnQ,SAA1C,GAEAg4B,QAAS,CAAT,EAAaxzB,YAAb,CAA2ByvE,SAAU,CAAV,CAA3B,CAA0CnF,GAA1C,EACAoF,UAAW,CAAX,EAAe1vE,YAAf,CAA6ByvE,SAAU,CAAV,CAA7B,CAA4Cj8C,QAAS,CAAT,CAA5C,EAGA;AAEA,IAAMxsC,EAAI,CAAV,CAAaA,GAAKi2F,QAAlB,CAA4Bj2F,GAA5B,CAAmC,CAE/BwsC,QAASxsC,CAAT,EAAewsC,QAASxsC,EAAI,CAAb,EAAiBlP,KAAjB,EAAf,CAEA43F,UAAW1oF,CAAX,EAAiB0oF,UAAW1oF,EAAI,CAAf,EAAmBlP,KAAnB,EAAjB,CAEAwyF,IAAItqE,YAAJ,CAAkByvE,SAAUzoF,EAAI,CAAd,CAAlB,CAAqCyoF,SAAUzoF,CAAV,CAArC,EAEA,GAAKsjF,IAAIlnF,MAAJ,GAAeqK,OAAOC,OAA3B,CAAqC,CAEjC48E,IAAI9uE,SAAJ,GAEA1d,MAAQpF,KAAKmzB,IAAL,CAAWtU,MAAMW,KAAN,CAAau3E,SAAUzoF,EAAI,CAAd,EAAkB7G,GAAlB,CAAuBsvF,SAAUzoF,CAAV,CAAvB,CAAb,CAAqD,CAAE,CAAvD,CAA0D,CAA1D,CAAX,CAAR,CAAoF;AAEpFwsC,QAASxsC,CAAT,EAAasb,YAAb,CAA2BsjF,IAAIhiF,gBAAJ,CAAsB0mE,GAAtB,CAA2BxsF,KAA3B,CAA3B,EAEH,CAED4xF,UAAW1oF,CAAX,EAAegZ,YAAf,CAA6ByvE,SAAUzoF,CAAV,CAA7B,CAA4CwsC,QAASxsC,CAAT,CAA5C,EAEH,CAED;AAEA,GAAKqoF,SAAW,IAAhB,CAAuB,CAEnBvxF,MAAQpF,KAAKmzB,IAAL,CAAWtU,MAAMW,KAAN,CAAas7B,QAAS,CAAT,EAAarzC,GAAb,CAAkBqzC,QAASypD,QAAT,CAAlB,CAAb,CAAsD,CAAE,CAAxD,CAA2D,CAA3D,CAAX,CAAR,CACAn/F,OAASm/F,QAAT,CAEA,GAAKxN,SAAU,CAAV,EAActvF,GAAd,CAAmBmqF,IAAItqE,YAAJ,CAAkBwzB,QAAS,CAAT,CAAlB,CAAgCA,QAASypD,QAAT,CAAhC,CAAnB,EAA6E,CAAlF,CAAsF,CAElFn/F,MAAQ,CAAEA,KAAV,CAEH,CAED,IAAMkJ,EAAI,CAAV,CAAaA,GAAKi2F,QAAlB,CAA4Bj2F,GAA5B,CAAmC,CAE/B;AACAwsC,QAASxsC,CAAT,EAAasb,YAAb,CAA2BsjF,IAAIhiF,gBAAJ,CAAsB6rE,SAAUzoF,CAAV,CAAtB,CAAqClJ,MAAQkJ,CAA7C,CAA3B,EACA0oF,UAAW1oF,CAAX,EAAegZ,YAAf,CAA6ByvE,SAAUzoF,CAAV,CAA7B,CAA4CwsC,QAASxsC,CAAT,CAA5C,EAEH,CAEJ,CAED,MAAO,CACHyoF,SAAUA,QADP,CAEHj8C,QAASA,OAFN,CAGHk8C,UAAWA,SAHR,CAAP,CAMH,CA7U2B,CA+U5B53F,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAnV2B,CAqV5BA,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAK08F,kBAAL,CAA0B18F,OAAO08F,kBAAjC,CAEA,MAAO,KAAP,CAEH,CA3V2B,CA6V5B/1E,OAAQ,iBAAY,CAEhB,GAAI90B,MAAO,CACPy1B,SAAU,CACNd,QAAS,GADH,CAENptB,KAAM,OAFA,CAGNmuB,UAAW,cAHL,CADH,CAAX,CAQA11B,KAAK6qG,kBAAL,CAA0B,KAAKA,kBAA/B,CACA7qG,KAAKuH,IAAL,CAAY,KAAKA,IAAjB,CAEA,MAAOvH,KAAP,CAEH,CA5W2B,CA8W5BusG,SAAU,kBAAWC,IAAX,CAAkB,CAExB,KAAK3B,kBAAL,CAA0B2B,KAAK3B,kBAA/B,CAEA,MAAO,KAAP,CAEH,CApX2B,CAAhC,EAwXA,QAAS4B,aAAT,CAAuBC,EAAvB,CAA2BC,EAA3B,CAA+BC,OAA/B,CAAwCC,OAAxC,CAAiDC,WAAjD,CAA8DC,SAA9D,CAAyEC,UAAzE,CAAqFC,SAArF,CAAiG,CAE7FrC,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,cAAZ,CAEA,KAAKmlG,EAAL,CAAUA,IAAM,CAAhB,CACA,KAAKC,EAAL,CAAUA,IAAM,CAAhB,CAEA,KAAKC,OAAL,CAAeA,SAAW,CAA1B,CACA,KAAKC,OAAL,CAAeA,SAAW,CAA1B,CAEA,KAAKC,WAAL,CAAmBA,aAAe,CAAlC,CACA,KAAKC,SAAL,CAAiBA,WAAa,EAAI7tG,KAAKC,EAAvC,CAEA,KAAK6tG,UAAL,CAAkBA,YAAc,KAAhC,CAEA,KAAKC,SAAL,CAAiBA,WAAa,CAA9B,CAEH,CAEDR,aAAapgG,SAAb,CAAyBC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAzB,CACAogG,aAAapgG,SAAb,CAAuBI,WAAvB,CAAqCggG,YAArC,CAEAA,aAAapgG,SAAb,CAAuB6gG,cAAvB,CAAwC,IAAxC,CAEAT,aAAapgG,SAAb,CAAuBy+F,QAAvB,CAAkC,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAE7D,GAAI/xE,OAAQ+xE,gBAAkB,GAAI9iG,QAAJ,EAA9B,CAEA,GAAIklG,OAAQjuG,KAAKC,EAAL,CAAU,CAAtB,CACA,GAAIiuG,YAAa,KAAKL,SAAL,CAAiB,KAAKD,WAAvC,CACA,GAAIO,YAAanuG,KAAK6iB,GAAL,CAAUqrF,UAAV,EAAyBn5F,OAAOC,OAAjD,CAEA;AACA,MAAQk5F,WAAa,CAArB,EAAyBA,YAAcD,KAAd,CAAzB,CACA,MAAQC,WAAaD,KAArB,EAA6BC,YAAcD,KAAd,CAA7B,CAEA,GAAKC,WAAan5F,OAAOC,OAAzB,CAAmC,CAE/B,GAAKm5F,UAAL,CAAkB,CAEdD,WAAa,CAAb,CAEH,CAJD,IAIO,CAEHA,WAAaD,KAAb,CAEH,CAEJ,CAED,GAAK,KAAKH,UAAL,GAAoB,IAApB,EAA4B,CAAEK,UAAnC,CAAgD,CAE5C,GAAKD,aAAeD,KAApB,CAA4B,CAExBC,WAAa,CAAED,KAAf,CAEH,CAJD,IAIO,CAEHC,WAAaA,WAAaD,KAA1B,CAEH,CAEJ,CAED,GAAIvkG,OAAQ,KAAKkkG,WAAL,CAAmB75F,EAAIm6F,UAAnC,CACA,GAAI5xG,GAAI,KAAKkxG,EAAL,CAAU,KAAKE,OAAL,CAAe1tG,KAAKyS,GAAL,CAAU/I,KAAV,CAAjC,CACA,GAAInN,GAAI,KAAKkxG,EAAL,CAAU,KAAKE,OAAL,CAAe3tG,KAAK0S,GAAL,CAAUhJ,KAAV,CAAjC,CAEA,GAAK,KAAKqkG,SAAL,GAAmB,CAAxB,CAA4B,CAExB,GAAIt7F,KAAMzS,KAAKyS,GAAL,CAAU,KAAKs7F,SAAf,CAAV,CACA,GAAIr7F,KAAM1S,KAAK0S,GAAL,CAAU,KAAKq7F,SAAf,CAAV,CAEA,GAAI3iF,IAAK9uB,EAAI,KAAKkxG,EAAlB,CACA,GAAIniF,IAAK9uB,EAAI,KAAKkxG,EAAlB,CAEA;AACAnxG,EAAI8uB,GAAK3Y,GAAL,CAAW4Y,GAAK3Y,GAAhB,CAAsB,KAAK86F,EAA/B,CACAjxG,EAAI6uB,GAAK1Y,GAAL,CAAW2Y,GAAK5Y,GAAhB,CAAsB,KAAKg7F,EAA/B,CAEH,CAED,MAAO3zE,OAAM38B,GAAN,CAAWb,CAAX,CAAcC,CAAd,CAAP,CAEH,CA5DD,CA8DAgxG,aAAapgG,SAAb,CAAuB5H,IAAvB,CAA8B,SAAW0J,MAAX,CAAoB,CAE9Cy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKu+F,EAAL,CAAUv+F,OAAOu+F,EAAjB,CACA,KAAKC,EAAL,CAAUx+F,OAAOw+F,EAAjB,CAEA,KAAKC,OAAL,CAAez+F,OAAOy+F,OAAtB,CACA,KAAKC,OAAL,CAAe1+F,OAAO0+F,OAAtB,CAEA,KAAKC,WAAL,CAAmB3+F,OAAO2+F,WAA1B,CACA,KAAKC,SAAL,CAAiB5+F,OAAO4+F,SAAxB,CAEA,KAAKC,UAAL,CAAkB7+F,OAAO6+F,UAAzB,CAEA,KAAKC,SAAL,CAAiB9+F,OAAO8+F,SAAxB,CAEA,MAAO,KAAP,CAEH,CAnBD,CAsBAR,aAAapgG,SAAb,CAAuByoB,MAAvB,CAAgC,UAAY,CAExC,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAK0sG,EAAL,CAAU,KAAKA,EAAf,CACA1sG,KAAK2sG,EAAL,CAAU,KAAKA,EAAf,CAEA3sG,KAAK4sG,OAAL,CAAe,KAAKA,OAApB,CACA5sG,KAAK6sG,OAAL,CAAe,KAAKA,OAApB,CAEA7sG,KAAK8sG,WAAL,CAAmB,KAAKA,WAAxB,CACA9sG,KAAK+sG,SAAL,CAAiB,KAAKA,SAAtB,CAEA/sG,KAAKgtG,UAAL,CAAkB,KAAKA,UAAvB,CAEAhtG,KAAKitG,SAAL,CAAiB,KAAKA,SAAtB,CAEA,MAAOjtG,KAAP,CAEH,CAnBD,CAqBAysG,aAAapgG,SAAb,CAAuBkgG,QAAvB,CAAkC,SAAWC,IAAX,CAAkB,CAEhD5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKE,EAAL,CAAUF,KAAKE,EAAf,CACA,KAAKC,EAAL,CAAUH,KAAKG,EAAf,CAEA,KAAKC,OAAL,CAAeJ,KAAKI,OAApB,CACA,KAAKC,OAAL,CAAeL,KAAKK,OAApB,CAEA,KAAKC,WAAL,CAAmBN,KAAKM,WAAxB,CACA,KAAKC,SAAL,CAAiBP,KAAKO,SAAtB,CAEA,KAAKC,UAAL,CAAkBR,KAAKQ,UAAvB,CAEA,KAAKC,SAAL,CAAiBT,KAAKS,SAAtB,CAEA,MAAO,KAAP,CAEH,CAnBD,CAqBA,QAASK,SAAT,CAAmBZ,EAAnB,CAAuBC,EAAvB,CAA2BY,OAA3B,CAAoCT,WAApC,CAAiDC,SAAjD,CAA4DC,UAA5D,CAAyE,CAErEP,aAAa18F,IAAb,CAAmB,IAAnB,CAAyB28F,EAAzB,CAA6BC,EAA7B,CAAiCY,OAAjC,CAA0CA,OAA1C,CAAmDT,WAAnD,CAAgEC,SAAhE,CAA2EC,UAA3E,EAEA,KAAKzlG,IAAL,CAAY,UAAZ,CAEH,CAED+lG,SAASjhG,SAAT,CAAqBC,OAAOC,MAAP,CAAekgG,aAAapgG,SAA5B,CAArB,CACAihG,SAASjhG,SAAT,CAAmBI,WAAnB,CAAiC6gG,QAAjC,CAEAA,SAASjhG,SAAT,CAAmBmhG,UAAnB,CAAgC,IAAhC,CAEA;;;;;;;;;OAYA;;;;;;;;GAUA,QAASC,UAAT,EAAqB,CAEjB,GAAIC,IAAK,CAAT,CAAYz/E,GAAK,CAAjB,CAAoBC,GAAK,CAAzB,CAA4BC,GAAK,CAAjC,CAEA;;;;;;;KAQA,QAASkmC,KAAT,CAAelnC,EAAf,CAAmBI,EAAnB,CAAuBi9B,EAAvB,CAA2BC,EAA3B,CAAgC,CAE5BijD,GAAKvgF,EAAL,CACAc,GAAKu8B,EAAL,CACAt8B,GAAK,CAAE,CAAF,CAAMf,EAAN,CAAW,EAAII,EAAf,CAAoB,EAAIi9B,EAAxB,CAA6BC,EAAlC,CACAt8B,GAAK,EAAIhB,EAAJ,CAAS,EAAII,EAAb,CAAkBi9B,EAAlB,CAAuBC,EAA5B,CAEH,CAED,MAAO,CAEHkjD,eAAgB,wBAAWxgF,EAAX,CAAeI,EAAf,CAAmBzC,EAAnB,CAAuB8iF,EAAvB,CAA2BC,OAA3B,CAAqC,CAEjDx5C,KAAM9mC,EAAN,CAAUzC,EAAV,CAAc+iF,SAAY/iF,GAAKqC,EAAjB,CAAd,CAAqC0gF,SAAYD,GAAKrgF,EAAjB,CAArC,EAEH,CANE,CAQHugF,yBAA0B,kCAAW3gF,EAAX,CAAeI,EAAf,CAAmBzC,EAAnB,CAAuB8iF,EAAvB,CAA2BG,GAA3B,CAAgCC,GAAhC,CAAqCC,GAArC,CAA2C,CAEjE;AACA,GAAIxjD,IAAK,CAAEl9B,GAAKJ,EAAP,EAAc4gF,GAAd,CAAoB,CAAEjjF,GAAKqC,EAAP,GAAgB4gF,IAAMC,GAAtB,CAApB,CAAkD,CAAEljF,GAAKyC,EAAP,EAAcygF,GAAzE,CACA,GAAIv6F,IAAK,CAAEqX,GAAKyC,EAAP,EAAcygF,GAAd,CAAoB,CAAEJ,GAAKrgF,EAAP,GAAgBygF,IAAMC,GAAtB,CAApB,CAAkD,CAAEL,GAAK9iF,EAAP,EAAcmjF,GAAzE,CAEA;AACAxjD,IAAMujD,GAAN,CACAv6F,IAAMu6F,GAAN,CAEA35C,KAAM9mC,EAAN,CAAUzC,EAAV,CAAc2/B,EAAd,CAAkBh3C,EAAlB,EAEH,CApBE,CAsBHy6F,KAAM,cAAWj7F,CAAX,CAAe,CAEjB,GAAIQ,IAAKR,EAAIA,CAAb,CACA,GAAIS,IAAKD,GAAKR,CAAd,CACA,MAAOy6F,IAAKz/E,GAAKhb,CAAV,CAAcib,GAAKza,EAAnB,CAAwB0a,GAAKza,EAApC,CAEH,CA5BE,CAAP,CAgCH,CAED;AAEA,GAAIvC,KAAM,GAAIrP,QAAJ,EAAV,CACA,GAAIs5F,IAAK,GAAIqS,UAAJ,EAAT,CAA0BpS,GAAK,GAAIoS,UAAJ,EAA/B,CAAgDU,GAAK,GAAIV,UAAJ,EAArD,CAEA,QAASW,iBAAT,CAA2Bj2E,MAA3B,CAAmC09D,MAAnC,CAA2CwY,SAA3C,CAAsDR,OAAtD,CAAgE,CAE5DjD,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,kBAAZ,CAEA,KAAK4wB,MAAL,CAAcA,QAAU,EAAxB,CACA,KAAK09D,MAAL,CAAcA,QAAU,KAAxB,CACA,KAAKwY,SAAL,CAAiBA,WAAa,aAA9B,CACA,KAAKR,OAAL,CAAeA,SAAW,GAA1B,CAEH,CAEDO,iBAAiB/hG,SAAjB,CAA6BC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAA7B,CACA+hG,iBAAiB/hG,SAAjB,CAA2BI,WAA3B,CAAyC2hG,gBAAzC,CAEAA,iBAAiB/hG,SAAjB,CAA2BiiG,kBAA3B,CAAgD,IAAhD,CAEAF,iBAAiB/hG,SAAjB,CAA2By+F,QAA3B,CAAsC,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAEjE,GAAI/xE,OAAQ+xE,gBAAkB,GAAIjpG,QAAJ,EAA9B,CAEA,GAAIq2B,QAAS,KAAKA,MAAlB,CACA,GAAI9iB,GAAI8iB,OAAOvuB,MAAf,CAEA,GAAI2iB,GAAI,CAAElX,GAAM,KAAKwgF,MAAL,CAAc,CAAd,CAAkB,CAAxB,CAAF,EAAkC5iF,CAA1C,CACA,GAAIs7F,UAAWrvG,KAAKmT,KAAL,CAAYka,CAAZ,CAAf,CACA,GAAIiiF,QAASjiF,EAAIgiF,QAAjB,CAEA,GAAK,KAAK1Y,MAAV,CAAmB,CAEf0Y,UAAYA,SAAW,CAAX,CAAe,CAAf,CAAmB,CAAErvG,KAAKmT,KAAL,CAAYnT,KAAK6iB,GAAL,CAAUwsF,QAAV,EAAuBl5F,CAAnC,EAAyC,CAA3C,EAAiDA,CAAhF,CAEH,CAJD,IAIO,IAAKm5F,SAAW,CAAX,EAAgBD,WAAal5F,EAAI,CAAtC,CAA0C,CAE7Ck5F,SAAWl5F,EAAI,CAAf,CACAm5F,OAAS,CAAT,CAEH,CAED,GAAIz7F,GAAJ,CAAQC,EAAR,CAAYK,EAAZ,CAAgBC,EAAhB,CAAoB;AAEpB,GAAK,KAAKuiF,MAAL,EAAe0Y,SAAW,CAA/B,CAAmC,CAE/Bx7F,GAAKolB,OAAQ,CAAEo2E,SAAW,CAAb,EAAmBl5F,CAA3B,CAAL,CAEH,CAJD,IAIO,CAEH;AACAlE,IAAIrG,UAAJ,CAAgBqtB,OAAQ,CAAR,CAAhB,CAA6BA,OAAQ,CAAR,CAA7B,EAA2Cn7B,GAA3C,CAAgDm7B,OAAQ,CAAR,CAAhD,EACAplB,GAAK5B,GAAL,CAEH,CAED6B,GAAKmlB,OAAQo2E,SAAWl5F,CAAnB,CAAL,CACAhC,GAAK8kB,OAAQ,CAAEo2E,SAAW,CAAb,EAAmBl5F,CAA3B,CAAL,CAEA,GAAK,KAAKwgF,MAAL,EAAe0Y,SAAW,CAAX,CAAel5F,CAAnC,CAAuC,CAEnC/B,GAAK6kB,OAAQ,CAAEo2E,SAAW,CAAb,EAAmBl5F,CAA3B,CAAL,CAEH,CAJD,IAIO,CAEH;AACAlE,IAAIrG,UAAJ,CAAgBqtB,OAAQ9iB,EAAI,CAAZ,CAAhB,CAAiC8iB,OAAQ9iB,EAAI,CAAZ,CAAjC,EAAmDrY,GAAnD,CAAwDm7B,OAAQ9iB,EAAI,CAAZ,CAAxD,EACA/B,GAAKnC,GAAL,CAEH,CAED,GAAK,KAAKk9F,SAAL,GAAmB,aAAnB,EAAoC,KAAKA,SAAL,GAAmB,SAA5D,CAAwE,CAEpE;AACA,GAAI1lG,KAAM,KAAK0lG,SAAL,GAAmB,SAAnB,CAA+B,GAA/B,CAAqC,IAA/C,CACA,GAAIN,KAAM7uG,KAAKyJ,GAAL,CAAUoK,GAAGtM,iBAAH,CAAsBuM,EAAtB,CAAV,CAAsCrK,GAAtC,CAAV,CACA,GAAIqlG,KAAM9uG,KAAKyJ,GAAL,CAAUqK,GAAGvM,iBAAH,CAAsB4M,EAAtB,CAAV,CAAsC1K,GAAtC,CAAV,CACA,GAAIslG,KAAM/uG,KAAKyJ,GAAL,CAAU0K,GAAG5M,iBAAH,CAAsB6M,EAAtB,CAAV,CAAsC3K,GAAtC,CAAV,CAEA;AACA,GAAKqlG,IAAM,IAAX,CAAkBA,IAAM,GAAN,CAClB,GAAKD,IAAM,IAAX,CAAkBA,IAAMC,GAAN,CAClB,GAAKC,IAAM,IAAX,CAAkBA,IAAMD,GAAN,CAElB5S,GAAG0S,wBAAH,CAA6B/6F,GAAGvX,CAAhC,CAAmCwX,GAAGxX,CAAtC,CAAyC6X,GAAG7X,CAA5C,CAA+C8X,GAAG9X,CAAlD,CAAqDuyG,GAArD,CAA0DC,GAA1D,CAA+DC,GAA/D,EACA5S,GAAGyS,wBAAH,CAA6B/6F,GAAGtX,CAAhC,CAAmCuX,GAAGvX,CAAtC,CAAyC4X,GAAG5X,CAA5C,CAA+C6X,GAAG7X,CAAlD,CAAqDsyG,GAArD,CAA0DC,GAA1D,CAA+DC,GAA/D,EACAE,GAAGL,wBAAH,CAA6B/6F,GAAGrX,CAAhC,CAAmCsX,GAAGtX,CAAtC,CAAyC2X,GAAG3X,CAA5C,CAA+C4X,GAAG5X,CAAlD,CAAqDqyG,GAArD,CAA0DC,GAA1D,CAA+DC,GAA/D,EAEH,CAjBD,IAiBO,IAAK,KAAKI,SAAL,GAAmB,YAAxB,CAAuC,CAE1CjT,GAAGuS,cAAH,CAAmB56F,GAAGvX,CAAtB,CAAyBwX,GAAGxX,CAA5B,CAA+B6X,GAAG7X,CAAlC,CAAqC8X,GAAG9X,CAAxC,CAA2C,KAAKqyG,OAAhD,EACAxS,GAAGsS,cAAH,CAAmB56F,GAAGtX,CAAtB,CAAyBuX,GAAGvX,CAA5B,CAA+B4X,GAAG5X,CAAlC,CAAqC6X,GAAG7X,CAAxC,CAA2C,KAAKoyG,OAAhD,EACAM,GAAGR,cAAH,CAAmB56F,GAAGrX,CAAtB,CAAyBsX,GAAGtX,CAA5B,CAA+B2X,GAAG3X,CAAlC,CAAqC4X,GAAG5X,CAAxC,CAA2C,KAAKmyG,OAAhD,EAEH,CAED70E,MAAM38B,GAAN,CACI++F,GAAG8S,IAAH,CAASM,MAAT,CADJ,CAEInT,GAAG6S,IAAH,CAASM,MAAT,CAFJ,CAGIL,GAAGD,IAAH,CAASM,MAAT,CAHJ,EAMA,MAAOx1E,MAAP,CAEH,CApFD,CAsFAo1E,iBAAiB/hG,SAAjB,CAA2B5H,IAA3B,CAAkC,SAAW0J,MAAX,CAAoB,CAElDy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKgqB,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI3qB,GAAI,CAAR,CAAW6H,EAAIlH,OAAOgqB,MAAP,CAAcvuB,MAAnC,CAA2C4D,EAAI6H,CAA/C,CAAkD7H,GAAlD,CAAyD,CAErD,GAAIwrB,OAAQ7qB,OAAOgqB,MAAP,CAAe3qB,CAAf,CAAZ,CAEA,KAAK2qB,MAAL,CAAY95B,IAAZ,CAAkB26B,MAAM16B,KAAN,EAAlB,EAEH,CAED,KAAKu3F,MAAL,CAAc1nF,OAAO0nF,MAArB,CACA,KAAKwY,SAAL,CAAiBlgG,OAAOkgG,SAAxB,CACA,KAAKR,OAAL,CAAe1/F,OAAO0/F,OAAtB,CAEA,MAAO,KAAP,CAEH,CApBD,CAsBAO,iBAAiB/hG,SAAjB,CAA2ByoB,MAA3B,CAAoC,UAAY,CAE5C,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKm4B,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI3qB,GAAI,CAAR,CAAW6H,EAAI,KAAK8iB,MAAL,CAAYvuB,MAAjC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnD,GAAIwrB,OAAQ,KAAKb,MAAL,CAAa3qB,CAAb,CAAZ,CACAxN,KAAKm4B,MAAL,CAAY95B,IAAZ,CAAkB26B,MAAMtW,OAAN,EAAlB,EAEH,CAED1iB,KAAK61F,MAAL,CAAc,KAAKA,MAAnB,CACA71F,KAAKquG,SAAL,CAAiB,KAAKA,SAAtB,CACAruG,KAAK6tG,OAAL,CAAe,KAAKA,OAApB,CAEA,MAAO7tG,KAAP,CAEH,CAnBD,CAqBAouG,iBAAiB/hG,SAAjB,CAA2BkgG,QAA3B,CAAsC,SAAWC,IAAX,CAAkB,CAEpD5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKr0E,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI3qB,GAAI,CAAR,CAAW6H,EAAIm3F,KAAKr0E,MAAL,CAAYvuB,MAAjC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnD,GAAIwrB,OAAQwzE,KAAKr0E,MAAL,CAAa3qB,CAAb,CAAZ,CACA,KAAK2qB,MAAL,CAAY95B,IAAZ,CAAkB,GAAIyD,QAAJ,GAAc2gB,SAAd,CAAyBuW,KAAzB,CAAlB,EAEH,CAED,KAAK68D,MAAL,CAAc2W,KAAK3W,MAAnB,CACA,KAAKwY,SAAL,CAAiB7B,KAAK6B,SAAtB,CACA,KAAKR,OAAL,CAAerB,KAAKqB,OAApB,CAEA,MAAO,KAAP,CAEH,CAnBD,CAqBA;;;;;OAOA,QAAS/6F,WAAT,CAAqBG,CAArB,CAAwBF,EAAxB,CAA4BC,EAA5B,CAAgCK,EAAhC,CAAoCC,EAApC,CAAyC,CAErC,GAAIC,IAAK,CAAEF,GAAKN,EAAP,EAAc,GAAvB,CACA,GAAIS,IAAK,CAAEF,GAAKN,EAAP,EAAc,GAAvB,CACA,GAAIS,IAAKR,EAAIA,CAAb,CACA,GAAIS,IAAKT,EAAIQ,EAAb,CACA,MAAO,CAAE,EAAIT,EAAJ,CAAS,EAAIK,EAAb,CAAkBE,EAAlB,CAAuBC,EAAzB,EAAgCE,EAAhC,CAAqC,CAAE,CAAE,CAAF,CAAMV,EAAN,CAAW,EAAIK,EAAf,CAAoB,EAAIE,EAAxB,CAA6BC,EAA/B,EAAsCC,EAA3E,CAAgFF,GAAKN,CAArF,CAAyFD,EAAhG,CAEH,CAED;AAEA,QAASy7F,kBAAT,CAA4Bx7F,CAA5B,CAA+BsZ,CAA/B,CAAmC,CAE/B,GAAInb,GAAI,EAAI6B,CAAZ,CACA,MAAO7B,GAAIA,CAAJ,CAAQmb,CAAf,CAEH,CAED,QAASmiF,kBAAT,CAA4Bz7F,CAA5B,CAA+BsZ,CAA/B,CAAmC,CAE/B,MAAO,IAAM,EAAItZ,CAAV,EAAgBA,CAAhB,CAAoBsZ,CAA3B,CAEH,CAED,QAASoiF,kBAAT,CAA4B17F,CAA5B,CAA+BsZ,CAA/B,CAAmC,CAE/B,MAAOtZ,GAAIA,CAAJ,CAAQsZ,CAAf,CAEH,CAED,QAASqiF,gBAAT,CAA0B37F,CAA1B,CAA6BF,EAA7B,CAAiCC,EAAjC,CAAqCK,EAArC,CAA0C,CAEtC,MAAOo7F,mBAAmBx7F,CAAnB,CAAsBF,EAAtB,EAA6B27F,kBAAmBz7F,CAAnB,CAAsBD,EAAtB,CAA7B,CACH27F,kBAAmB17F,CAAnB,CAAsBI,EAAtB,CADJ,CAGH,CAED;AAEA,QAASw7F,cAAT,CAAwB57F,CAAxB,CAA2BsZ,CAA3B,CAA+B,CAE3B,GAAInb,GAAI,EAAI6B,CAAZ,CACA,MAAO7B,GAAIA,CAAJ,CAAQA,CAAR,CAAYmb,CAAnB,CAEH,CAED,QAASuiF,cAAT,CAAwB77F,CAAxB,CAA2BsZ,CAA3B,CAA+B,CAE3B,GAAInb,GAAI,EAAI6B,CAAZ,CACA,MAAO,GAAI7B,CAAJ,CAAQA,CAAR,CAAY6B,CAAZ,CAAgBsZ,CAAvB,CAEH,CAED,QAASwiF,cAAT,CAAwB97F,CAAxB,CAA2BsZ,CAA3B,CAA+B,CAE3B,MAAO,IAAM,EAAItZ,CAAV,EAAgBA,CAAhB,CAAoBA,CAApB,CAAwBsZ,CAA/B,CAEH,CAED,QAASyiF,cAAT,CAAwB/7F,CAAxB,CAA2BsZ,CAA3B,CAA+B,CAE3B,MAAOtZ,GAAIA,CAAJ,CAAQA,CAAR,CAAYsZ,CAAnB,CAEH,CAED,QAAS0iF,YAAT,CAAsBh8F,CAAtB,CAAyBF,EAAzB,CAA6BC,EAA7B,CAAiCK,EAAjC,CAAqCC,EAArC,CAA0C,CAEtC,MAAOu7F,eAAe57F,CAAf,CAAkBF,EAAlB,EAAyB+7F,cAAe77F,CAAf,CAAkBD,EAAlB,CAAzB,CAAkD+7F,cAAe97F,CAAf,CAAkBI,EAAlB,CAAlD,CACH27F,cAAe/7F,CAAf,CAAkBK,EAAlB,CADJ,CAGH,CAED,QAAS47F,iBAAT,CAA2B37F,EAA3B,CAA+BC,EAA/B,CAAmC+O,EAAnC,CAAuC4sF,EAAvC,CAA4C,CAExCvE,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,kBAAZ,CAEA,KAAKgM,EAAL,CAAUA,IAAM,GAAItL,QAAJ,EAAhB,CACA,KAAKuL,EAAL,CAAUA,IAAM,GAAIvL,QAAJ,EAAhB,CACA,KAAKsa,EAAL,CAAUA,IAAM,GAAIta,QAAJ,EAAhB,CACA,KAAKknG,EAAL,CAAUA,IAAM,GAAIlnG,QAAJ,EAAhB,CAEH,CAEDinG,iBAAiB7iG,SAAjB,CAA6BC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAA7B,CACA6iG,iBAAiB7iG,SAAjB,CAA2BI,WAA3B,CAAyCyiG,gBAAzC,CAEAA,iBAAiB7iG,SAAjB,CAA2B+iG,kBAA3B,CAAgD,IAAhD,CAEAF,iBAAiB7iG,SAAjB,CAA2By+F,QAA3B,CAAsC,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAEjE,GAAI/xE,OAAQ+xE,gBAAkB,GAAI9iG,QAAJ,EAA9B,CAEA,GAAIsL,IAAK,KAAKA,EAAd,CAAkBC,GAAK,KAAKA,EAA5B,CAAgC+O,GAAK,KAAKA,EAA1C,CAA8C4sF,GAAK,KAAKA,EAAxD,CAEAn2E,MAAM38B,GAAN,CACI4yG,YAAah8F,CAAb,CAAgBM,GAAG/X,CAAnB,CAAsBgY,GAAGhY,CAAzB,CAA4B+mB,GAAG/mB,CAA/B,CAAkC2zG,GAAG3zG,CAArC,CADJ,CAEIyzG,YAAah8F,CAAb,CAAgBM,GAAG9X,CAAnB,CAAsB+X,GAAG/X,CAAzB,CAA4B8mB,GAAG9mB,CAA/B,CAAkC0zG,GAAG1zG,CAArC,CAFJ,EAKA,MAAOu9B,MAAP,CAEH,CAbD,CAeAk2E,iBAAiB7iG,SAAjB,CAA2B5H,IAA3B,CAAkC,SAAW0J,MAAX,CAAoB,CAElDy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKoF,EAAL,CAAQ9O,IAAR,CAAc0J,OAAOoF,EAArB,EACA,KAAKC,EAAL,CAAQ/O,IAAR,CAAc0J,OAAOqF,EAArB,EACA,KAAK+O,EAAL,CAAQ9d,IAAR,CAAc0J,OAAOoU,EAArB,EACA,KAAK4sF,EAAL,CAAQ1qG,IAAR,CAAc0J,OAAOghG,EAArB,EAEA,MAAO,KAAP,CAEH,CAXD,CAaAD,iBAAiB7iG,SAAjB,CAA2ByoB,MAA3B,CAAoC,UAAY,CAE5C,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKuT,EAAL,CAAU,KAAKA,EAAL,CAAQmP,OAAR,EAAV,CACA1iB,KAAKwT,EAAL,CAAU,KAAKA,EAAL,CAAQkP,OAAR,EAAV,CACA1iB,KAAKuiB,EAAL,CAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV,CACA1iB,KAAKmvG,EAAL,CAAU,KAAKA,EAAL,CAAQzsF,OAAR,EAAV,CAEA,MAAO1iB,KAAP,CAEH,CAXD,CAaAkvG,iBAAiB7iG,SAAjB,CAA2BkgG,QAA3B,CAAsC,SAAWC,IAAX,CAAkB,CAEpD5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKj5F,EAAL,CAAQkP,SAAR,CAAmB+pF,KAAKj5F,EAAxB,EACA,KAAKC,EAAL,CAAQiP,SAAR,CAAmB+pF,KAAKh5F,EAAxB,EACA,KAAK+O,EAAL,CAAQE,SAAR,CAAmB+pF,KAAKjqF,EAAxB,EACA,KAAK4sF,EAAL,CAAQ1sF,SAAR,CAAmB+pF,KAAK2C,EAAxB,EAEA,MAAO,KAAP,CAEH,CAXD,CAaA,QAASE,kBAAT,CAA4B97F,EAA5B,CAAgCC,EAAhC,CAAoC+O,EAApC,CAAwC4sF,EAAxC,CAA6C,CAEzCvE,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,mBAAZ,CAEA,KAAKgM,EAAL,CAAUA,IAAM,GAAIzR,QAAJ,EAAhB,CACA,KAAK0R,EAAL,CAAUA,IAAM,GAAI1R,QAAJ,EAAhB,CACA,KAAKygB,EAAL,CAAUA,IAAM,GAAIzgB,QAAJ,EAAhB,CACA,KAAKqtG,EAAL,CAAUA,IAAM,GAAIrtG,QAAJ,EAAhB,CAEH,CAEDutG,kBAAkBhjG,SAAlB,CAA8BC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAA9B,CACAgjG,kBAAkBhjG,SAAlB,CAA4BI,WAA5B,CAA0C4iG,iBAA1C,CAEAA,kBAAkBhjG,SAAlB,CAA4BijG,mBAA5B,CAAkD,IAAlD,CAEAD,kBAAkBhjG,SAAlB,CAA4By+F,QAA5B,CAAuC,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAElE,GAAI/xE,OAAQ+xE,gBAAkB,GAAIjpG,QAAJ,EAA9B,CAEA,GAAIyR,IAAK,KAAKA,EAAd,CAAkBC,GAAK,KAAKA,EAA5B,CAAgC+O,GAAK,KAAKA,EAA1C,CAA8C4sF,GAAK,KAAKA,EAAxD,CAEAn2E,MAAM38B,GAAN,CACI4yG,YAAah8F,CAAb,CAAgBM,GAAG/X,CAAnB,CAAsBgY,GAAGhY,CAAzB,CAA4B+mB,GAAG/mB,CAA/B,CAAkC2zG,GAAG3zG,CAArC,CADJ,CAEIyzG,YAAah8F,CAAb,CAAgBM,GAAG9X,CAAnB,CAAsB+X,GAAG/X,CAAzB,CAA4B8mB,GAAG9mB,CAA/B,CAAkC0zG,GAAG1zG,CAArC,CAFJ,CAGIwzG,YAAah8F,CAAb,CAAgBM,GAAG7X,CAAnB,CAAsB8X,GAAG9X,CAAzB,CAA4B6mB,GAAG7mB,CAA/B,CAAkCyzG,GAAGzzG,CAArC,CAHJ,EAMA,MAAOs9B,MAAP,CAEH,CAdD,CAgBAq2E,kBAAkBhjG,SAAlB,CAA4B5H,IAA5B,CAAmC,SAAW0J,MAAX,CAAoB,CAEnDy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKoF,EAAL,CAAQ9O,IAAR,CAAc0J,OAAOoF,EAArB,EACA,KAAKC,EAAL,CAAQ/O,IAAR,CAAc0J,OAAOqF,EAArB,EACA,KAAK+O,EAAL,CAAQ9d,IAAR,CAAc0J,OAAOoU,EAArB,EACA,KAAK4sF,EAAL,CAAQ1qG,IAAR,CAAc0J,OAAOghG,EAArB,EAEA,MAAO,KAAP,CAEH,CAXD,CAaAE,kBAAkBhjG,SAAlB,CAA4ByoB,MAA5B,CAAqC,UAAY,CAE7C,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKuT,EAAL,CAAU,KAAKA,EAAL,CAAQmP,OAAR,EAAV,CACA1iB,KAAKwT,EAAL,CAAU,KAAKA,EAAL,CAAQkP,OAAR,EAAV,CACA1iB,KAAKuiB,EAAL,CAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV,CACA1iB,KAAKmvG,EAAL,CAAU,KAAKA,EAAL,CAAQzsF,OAAR,EAAV,CAEA,MAAO1iB,KAAP,CAEH,CAXD,CAaAqvG,kBAAkBhjG,SAAlB,CAA4BkgG,QAA5B,CAAuC,SAAWC,IAAX,CAAkB,CAErD5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKj5F,EAAL,CAAQkP,SAAR,CAAmB+pF,KAAKj5F,EAAxB,EACA,KAAKC,EAAL,CAAQiP,SAAR,CAAmB+pF,KAAKh5F,EAAxB,EACA,KAAK+O,EAAL,CAAQE,SAAR,CAAmB+pF,KAAKjqF,EAAxB,EACA,KAAK4sF,EAAL,CAAQ1sF,SAAR,CAAmB+pF,KAAK2C,EAAxB,EAEA,MAAO,KAAP,CAEH,CAXD,CAaA,QAASI,UAAT,CAAoB/7F,EAApB,CAAwB+O,EAAxB,CAA6B,CAEzBqoF,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,WAAZ,CAEA,KAAKiM,EAAL,CAAUA,IAAM,GAAIvL,QAAJ,EAAhB,CACA,KAAKsa,EAAL,CAAUA,IAAM,GAAIta,QAAJ,EAAhB,CAEH,CAEDsnG,UAAUljG,SAAV,CAAsBC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAtB,CACAkjG,UAAUljG,SAAV,CAAoBI,WAApB,CAAkC8iG,SAAlC,CAEAA,UAAUljG,SAAV,CAAoBmjG,WAApB,CAAkC,IAAlC,CAEAD,UAAUljG,SAAV,CAAoBy+F,QAApB,CAA+B,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAE1D,GAAI/xE,OAAQ+xE,gBAAkB,GAAI9iG,QAAJ,EAA9B,CAEA,GAAKgL,IAAM,CAAX,CAAe,CAEX+lB,MAAMv0B,IAAN,CAAY,KAAK8d,EAAjB,EAEH,CAJD,IAIO,CAEHyW,MAAMv0B,IAAN,CAAY,KAAK8d,EAAjB,EAAsB7c,GAAtB,CAA2B,KAAK8N,EAAhC,EACAwlB,MAAM7vB,cAAN,CAAsB8J,CAAtB,EAA0BjW,GAA1B,CAA+B,KAAKwW,EAApC,EAEH,CAED,MAAOwlB,MAAP,CAEH,CAjBD,CAmBA;AAEAu2E,UAAUljG,SAAV,CAAoBoqF,UAApB,CAAiC,SAAWrvD,CAAX,CAAc2jE,cAAd,CAA+B,CAE5D,MAAO,MAAKD,QAAL,CAAe1jE,CAAf,CAAkB2jE,cAAlB,CAAP,CAEH,CAJD,CAMAwE,UAAUljG,SAAV,CAAoB2/F,UAApB,CAAiC,UAAW,OAAU,CAElD,GAAIyD,SAAU,KAAKltF,EAAL,CAAQjkB,KAAR,GAAgBoH,GAAhB,CAAqB,KAAK8N,EAA1B,CAAd,CAEA,MAAOi8F,SAAQztF,SAAR,EAAP,CAEH,CAND,CAQAutF,UAAUljG,SAAV,CAAoB5H,IAApB,CAA2B,SAAW0J,MAAX,CAAoB,CAE3Cy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKqF,EAAL,CAAQ/O,IAAR,CAAc0J,OAAOqF,EAArB,EACA,KAAK+O,EAAL,CAAQ9d,IAAR,CAAc0J,OAAOoU,EAArB,EAEA,MAAO,KAAP,CAEH,CATD,CAWAgtF,UAAUljG,SAAV,CAAoByoB,MAApB,CAA6B,UAAY,CAErC,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKwT,EAAL,CAAU,KAAKA,EAAL,CAAQkP,OAAR,EAAV,CACA1iB,KAAKuiB,EAAL,CAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV,CAEA,MAAO1iB,KAAP,CAEH,CATD,CAWAuvG,UAAUljG,SAAV,CAAoBkgG,QAApB,CAA+B,SAAWC,IAAX,CAAkB,CAE7C5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKh5F,EAAL,CAAQiP,SAAR,CAAmB+pF,KAAKh5F,EAAxB,EACA,KAAK+O,EAAL,CAAQE,SAAR,CAAmB+pF,KAAKjqF,EAAxB,EAEA,MAAO,KAAP,CAEH,CATD,CAWA,QAASmtF,WAAT,CAAqBl8F,EAArB,CAAyB+O,EAAzB,CAA8B,CAE1BqoF,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,YAAZ,CAEA,KAAKiM,EAAL,CAAUA,IAAM,GAAI1R,QAAJ,EAAhB,CACA,KAAKygB,EAAL,CAAUA,IAAM,GAAIzgB,QAAJ,EAAhB,CAEH,CAED4tG,WAAWrjG,SAAX,CAAuBC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAvB,CACAqjG,WAAWrjG,SAAX,CAAqBI,WAArB,CAAmCijG,UAAnC,CAEAA,WAAWrjG,SAAX,CAAqBsjG,YAArB,CAAoC,IAApC,CAEAD,WAAWrjG,SAAX,CAAqBy+F,QAArB,CAAgC,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAE3D,GAAI/xE,OAAQ+xE,gBAAkB,GAAIjpG,QAAJ,EAA9B,CAEA,GAAKmR,IAAM,CAAX,CAAe,CAEX+lB,MAAMv0B,IAAN,CAAY,KAAK8d,EAAjB,EAEH,CAJD,IAIO,CAEHyW,MAAMv0B,IAAN,CAAY,KAAK8d,EAAjB,EAAsB7c,GAAtB,CAA2B,KAAK8N,EAAhC,EACAwlB,MAAM7vB,cAAN,CAAsB8J,CAAtB,EAA0BjW,GAA1B,CAA+B,KAAKwW,EAApC,EAEH,CAED,MAAOwlB,MAAP,CAEH,CAjBD,CAmBA;AAEA02E,WAAWrjG,SAAX,CAAqBoqF,UAArB,CAAkC,SAAWrvD,CAAX,CAAc2jE,cAAd,CAA+B,CAE7D,MAAO,MAAKD,QAAL,CAAe1jE,CAAf,CAAkB2jE,cAAlB,CAAP,CAEH,CAJD,CAMA2E,WAAWrjG,SAAX,CAAqB5H,IAArB,CAA4B,SAAW0J,MAAX,CAAoB,CAE5Cy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKqF,EAAL,CAAQ/O,IAAR,CAAc0J,OAAOqF,EAArB,EACA,KAAK+O,EAAL,CAAQ9d,IAAR,CAAc0J,OAAOoU,EAArB,EAEA,MAAO,KAAP,CAEH,CATD,CAWAmtF,WAAWrjG,SAAX,CAAqByoB,MAArB,CAA8B,UAAY,CAEtC,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKwT,EAAL,CAAU,KAAKA,EAAL,CAAQkP,OAAR,EAAV,CACA1iB,KAAKuiB,EAAL,CAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV,CAEA,MAAO1iB,KAAP,CAEH,CATD,CAWA0vG,WAAWrjG,SAAX,CAAqBkgG,QAArB,CAAgC,SAAWC,IAAX,CAAkB,CAE9C5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKh5F,EAAL,CAAQiP,SAAR,CAAmB+pF,KAAKh5F,EAAxB,EACA,KAAK+O,EAAL,CAAQE,SAAR,CAAmB+pF,KAAKjqF,EAAxB,EAEA,MAAO,KAAP,CAEH,CATD,CAWA,QAASqtF,qBAAT,CAA+Br8F,EAA/B,CAAmCC,EAAnC,CAAuC+O,EAAvC,CAA4C,CAExCqoF,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,sBAAZ,CAEA,KAAKgM,EAAL,CAAUA,IAAM,GAAItL,QAAJ,EAAhB,CACA,KAAKuL,EAAL,CAAUA,IAAM,GAAIvL,QAAJ,EAAhB,CACA,KAAKsa,EAAL,CAAUA,IAAM,GAAIta,QAAJ,EAAhB,CAEH,CAED2nG,qBAAqBvjG,SAArB,CAAiCC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAjC,CACAujG,qBAAqBvjG,SAArB,CAA+BI,WAA/B,CAA6CmjG,oBAA7C,CAEAA,qBAAqBvjG,SAArB,CAA+BwjG,sBAA/B,CAAwD,IAAxD,CAEAD,qBAAqBvjG,SAArB,CAA+By+F,QAA/B,CAA0C,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAErE,GAAI/xE,OAAQ+xE,gBAAkB,GAAI9iG,QAAJ,EAA9B,CAEA,GAAIsL,IAAK,KAAKA,EAAd,CAAkBC,GAAK,KAAKA,EAA5B,CAAgC+O,GAAK,KAAKA,EAA1C,CAEAyW,MAAM38B,GAAN,CACIuyG,gBAAiB37F,CAAjB,CAAoBM,GAAG/X,CAAvB,CAA0BgY,GAAGhY,CAA7B,CAAgC+mB,GAAG/mB,CAAnC,CADJ,CAEIozG,gBAAiB37F,CAAjB,CAAoBM,GAAG9X,CAAvB,CAA0B+X,GAAG/X,CAA7B,CAAgC8mB,GAAG9mB,CAAnC,CAFJ,EAKA,MAAOu9B,MAAP,CAEH,CAbD,CAeA42E,qBAAqBvjG,SAArB,CAA+B5H,IAA/B,CAAsC,SAAW0J,MAAX,CAAoB,CAEtDy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKoF,EAAL,CAAQ9O,IAAR,CAAc0J,OAAOoF,EAArB,EACA,KAAKC,EAAL,CAAQ/O,IAAR,CAAc0J,OAAOqF,EAArB,EACA,KAAK+O,EAAL,CAAQ9d,IAAR,CAAc0J,OAAOoU,EAArB,EAEA,MAAO,KAAP,CAEH,CAVD,CAYAqtF,qBAAqBvjG,SAArB,CAA+ByoB,MAA/B,CAAwC,UAAY,CAEhD,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKuT,EAAL,CAAU,KAAKA,EAAL,CAAQmP,OAAR,EAAV,CACA1iB,KAAKwT,EAAL,CAAU,KAAKA,EAAL,CAAQkP,OAAR,EAAV,CACA1iB,KAAKuiB,EAAL,CAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV,CAEA,MAAO1iB,KAAP,CAEH,CAVD,CAYA4vG,qBAAqBvjG,SAArB,CAA+BkgG,QAA/B,CAA0C,SAAWC,IAAX,CAAkB,CAExD5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKj5F,EAAL,CAAQkP,SAAR,CAAmB+pF,KAAKj5F,EAAxB,EACA,KAAKC,EAAL,CAAQiP,SAAR,CAAmB+pF,KAAKh5F,EAAxB,EACA,KAAK+O,EAAL,CAAQE,SAAR,CAAmB+pF,KAAKjqF,EAAxB,EAEA,MAAO,KAAP,CAEH,CAVD,CAYA,QAASutF,sBAAT,CAAgCv8F,EAAhC,CAAoCC,EAApC,CAAwC+O,EAAxC,CAA6C,CAEzCqoF,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,uBAAZ,CAEA,KAAKgM,EAAL,CAAUA,IAAM,GAAIzR,QAAJ,EAAhB,CACA,KAAK0R,EAAL,CAAUA,IAAM,GAAI1R,QAAJ,EAAhB,CACA,KAAKygB,EAAL,CAAUA,IAAM,GAAIzgB,QAAJ,EAAhB,CAEH,CAEDguG,sBAAsBzjG,SAAtB,CAAkCC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAlC,CACAyjG,sBAAsBzjG,SAAtB,CAAgCI,WAAhC,CAA8CqjG,qBAA9C,CAEAA,sBAAsBzjG,SAAtB,CAAgC0jG,uBAAhC,CAA0D,IAA1D,CAEAD,sBAAsBzjG,SAAtB,CAAgCy+F,QAAhC,CAA2C,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAEtE,GAAI/xE,OAAQ+xE,gBAAkB,GAAIjpG,QAAJ,EAA9B,CAEA,GAAIyR,IAAK,KAAKA,EAAd,CAAkBC,GAAK,KAAKA,EAA5B,CAAgC+O,GAAK,KAAKA,EAA1C,CAEAyW,MAAM38B,GAAN,CACIuyG,gBAAiB37F,CAAjB,CAAoBM,GAAG/X,CAAvB,CAA0BgY,GAAGhY,CAA7B,CAAgC+mB,GAAG/mB,CAAnC,CADJ,CAEIozG,gBAAiB37F,CAAjB,CAAoBM,GAAG9X,CAAvB,CAA0B+X,GAAG/X,CAA7B,CAAgC8mB,GAAG9mB,CAAnC,CAFJ,CAGImzG,gBAAiB37F,CAAjB,CAAoBM,GAAG7X,CAAvB,CAA0B8X,GAAG9X,CAA7B,CAAgC6mB,GAAG7mB,CAAnC,CAHJ,EAMA,MAAOs9B,MAAP,CAEH,CAdD,CAgBA82E,sBAAsBzjG,SAAtB,CAAgC5H,IAAhC,CAAuC,SAAW0J,MAAX,CAAoB,CAEvDy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKoF,EAAL,CAAQ9O,IAAR,CAAc0J,OAAOoF,EAArB,EACA,KAAKC,EAAL,CAAQ/O,IAAR,CAAc0J,OAAOqF,EAArB,EACA,KAAK+O,EAAL,CAAQ9d,IAAR,CAAc0J,OAAOoU,EAArB,EAEA,MAAO,KAAP,CAEH,CAVD,CAYAutF,sBAAsBzjG,SAAtB,CAAgCyoB,MAAhC,CAAyC,UAAY,CAEjD,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKuT,EAAL,CAAU,KAAKA,EAAL,CAAQmP,OAAR,EAAV,CACA1iB,KAAKwT,EAAL,CAAU,KAAKA,EAAL,CAAQkP,OAAR,EAAV,CACA1iB,KAAKuiB,EAAL,CAAU,KAAKA,EAAL,CAAQG,OAAR,EAAV,CAEA,MAAO1iB,KAAP,CAEH,CAVD,CAYA8vG,sBAAsBzjG,SAAtB,CAAgCkgG,QAAhC,CAA2C,SAAWC,IAAX,CAAkB,CAEzD5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKj5F,EAAL,CAAQkP,SAAR,CAAmB+pF,KAAKj5F,EAAxB,EACA,KAAKC,EAAL,CAAQiP,SAAR,CAAmB+pF,KAAKh5F,EAAxB,EACA,KAAK+O,EAAL,CAAQE,SAAR,CAAmB+pF,KAAKjqF,EAAxB,EAEA,MAAO,KAAP,CAEH,CAVD,CAYA,QAASytF,YAAT,CAAsB73E,MAAO,sBAA7B,CAAsD,CAElDyyE,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,aAAZ,CAEA,KAAK4wB,MAAL,CAAcA,QAAU,EAAxB,CAEH,CAED63E,YAAY3jG,SAAZ,CAAwBC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAxB,CACA2jG,YAAY3jG,SAAZ,CAAsBI,WAAtB,CAAoCujG,WAApC,CAEAA,YAAY3jG,SAAZ,CAAsB4jG,aAAtB,CAAsC,IAAtC,CAEAD,YAAY3jG,SAAZ,CAAsBy+F,QAAtB,CAAiC,SAAW73F,CAAX,CAAc83F,cAAd,CAA+B,CAE5D,GAAI/xE,OAAQ+xE,gBAAkB,GAAI9iG,QAAJ,EAA9B,CAEA,GAAIkwB,QAAS,KAAKA,MAAlB,CACA,GAAI5L,GAAI,CAAE4L,OAAOvuB,MAAP,CAAgB,CAAlB,EAAwBqJ,CAAhC,CAEA,GAAIs7F,UAAWrvG,KAAKmT,KAAL,CAAYka,CAAZ,CAAf,CACA,GAAIiiF,QAASjiF,EAAIgiF,QAAjB,CAEA,GAAIx7F,IAAKolB,OAAQo2E,WAAa,CAAb,CAAiBA,QAAjB,CAA4BA,SAAW,CAA/C,CAAT,CACA,GAAIv7F,IAAKmlB,OAAQo2E,QAAR,CAAT,CACA,GAAIl7F,IAAK8kB,OAAQo2E,SAAWp2E,OAAOvuB,MAAP,CAAgB,CAA3B,CAA+BuuB,OAAOvuB,MAAP,CAAgB,CAA/C,CAAmD2kG,SAAW,CAAtE,CAAT,CACA,GAAIj7F,IAAK6kB,OAAQo2E,SAAWp2E,OAAOvuB,MAAP,CAAgB,CAA3B,CAA+BuuB,OAAOvuB,MAAP,CAAgB,CAA/C,CAAmD2kG,SAAW,CAAtE,CAAT,CAEAv1E,MAAM38B,GAAN,CACIyW,WAAY07F,MAAZ,CAAoBz7F,GAAGvX,CAAvB,CAA0BwX,GAAGxX,CAA7B,CAAgC6X,GAAG7X,CAAnC,CAAsC8X,GAAG9X,CAAzC,CADJ,CAEIsX,WAAY07F,MAAZ,CAAoBz7F,GAAGtX,CAAvB,CAA0BuX,GAAGvX,CAA7B,CAAgC4X,GAAG5X,CAAnC,CAAsC6X,GAAG7X,CAAzC,CAFJ,EAKA,MAAOu9B,MAAP,CAEH,CAtBD,CAwBAg3E,YAAY3jG,SAAZ,CAAsB5H,IAAtB,CAA6B,SAAW0J,MAAX,CAAoB,CAE7Cy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKgqB,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI3qB,GAAI,CAAR,CAAW6H,EAAIlH,OAAOgqB,MAAP,CAAcvuB,MAAnC,CAA2C4D,EAAI6H,CAA/C,CAAkD7H,GAAlD,CAAyD,CAErD,GAAIwrB,OAAQ7qB,OAAOgqB,MAAP,CAAe3qB,CAAf,CAAZ,CAEA,KAAK2qB,MAAL,CAAY95B,IAAZ,CAAkB26B,MAAM16B,KAAN,EAAlB,EAEH,CAED,MAAO,KAAP,CAEH,CAhBD,CAkBA0xG,YAAY3jG,SAAZ,CAAsByoB,MAAtB,CAA+B,UAAY,CAEvC,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKm4B,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI3qB,GAAI,CAAR,CAAW6H,EAAI,KAAK8iB,MAAL,CAAYvuB,MAAjC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnD,GAAIwrB,OAAQ,KAAKb,MAAL,CAAa3qB,CAAb,CAAZ,CACAxN,KAAKm4B,MAAL,CAAY95B,IAAZ,CAAkB26B,MAAMtW,OAAN,EAAlB,EAEH,CAED,MAAO1iB,KAAP,CAEH,CAfD,CAiBAgwG,YAAY3jG,SAAZ,CAAsBkgG,QAAtB,CAAiC,SAAWC,IAAX,CAAkB,CAE/C5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAKr0E,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI3qB,GAAI,CAAR,CAAW6H,EAAIm3F,KAAKr0E,MAAL,CAAYvuB,MAAjC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnD,GAAIwrB,OAAQwzE,KAAKr0E,MAAL,CAAa3qB,CAAb,CAAZ,CACA,KAAK2qB,MAAL,CAAY95B,IAAZ,CAAkB,GAAI4J,QAAJ,GAAcwa,SAAd,CAAyBuW,KAAzB,CAAlB,EAEH,CAED,MAAO,KAAP,CAEH,CAfD,CAmBA,GAAIk3E,QAAS,aAAa5jG,OAAOw5F,MAAP,CAAc,CACpCwH,SAAUA,QAD0B,CAEpCc,iBAAkBA,gBAFkB,CAGpCc,iBAAkBA,gBAHkB,CAIpCG,kBAAmBA,iBAJiB,CAKpC5C,aAAcA,YALsB,CAMpC8C,UAAWA,SANyB,CAOpCG,WAAYA,UAPwB,CAQpCE,qBAAsBA,oBARc,CASpCE,sBAAuBA,qBATa,CAUpCE,YAAaA,WAVuB,CAAd,CAA1B,CAaA;;;QAKA;;;oEAKA,QAASG,UAAT,EAAqB,CAEjBvF,MAAM76F,IAAN,CAAY,IAAZ,EAEA,KAAKxI,IAAL,CAAY,WAAZ,CAEA,KAAK6oG,MAAL,CAAc,EAAd,CACA,KAAKC,SAAL,CAAiB,KAAjB,CAAwB;AAE3B,CAEDF,UAAU9jG,SAAV,CAAsBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAf,CAAiD,CAEnEI,YAAa0jG,SAFsD,CAInEnzG,IAAK,aAAWszG,KAAX,CAAmB,CAEpB,KAAKF,MAAL,CAAY/xG,IAAZ,CAAkBiyG,KAAlB,EAEH,CARkE,CAUnEC,UAAW,oBAAY,CAEnB;AACA,GAAIC,YAAa,KAAKJ,MAAL,CAAa,CAAb,EAAiBtF,QAAjB,CAA2B,CAA3B,CAAjB,CACA,GAAI2F,UAAW,KAAKL,MAAL,CAAa,KAAKA,MAAL,CAAYxmG,MAAZ,CAAqB,CAAlC,EAAsCkhG,QAAtC,CAAgD,CAAhD,CAAf,CAEA,GAAK,CAAE0F,WAAWhuF,MAAX,CAAmBiuF,QAAnB,CAAP,CAAuC,CAEnC,KAAKL,MAAL,CAAY/xG,IAAZ,CAAkB,GAAIkxG,UAAJ,CAAekB,QAAf,CAAyBD,UAAzB,CAAlB,EAEH,CAEJ,CAtBkE,CAwBnE;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA1F,SAAU,kBAAW73F,CAAX,CAAe,CAErB,GAAImS,GAAInS,EAAI,KAAKk4F,SAAL,EAAZ,CACA,GAAIuF,cAAe,KAAKC,eAAL,EAAnB,CACA,GAAInjG,GAAI,CAAR,CAEA;AAEA,MAAQA,EAAIkjG,aAAa9mG,MAAzB,CAAkC,CAE9B,GAAK8mG,aAAcljG,CAAd,GAAqB4X,CAA1B,CAA8B,CAE1B,GAAIk4B,MAAOozD,aAAcljG,CAAd,EAAoB4X,CAA/B,CACA,GAAIkrF,OAAQ,KAAKF,MAAL,CAAa5iG,CAAb,CAAZ,CAEA,GAAIs+F,eAAgBwE,MAAMnF,SAAN,EAApB,CACA,GAAI/jE,GAAI0kE,gBAAkB,CAAlB,CAAsB,CAAtB,CAA0B,EAAIxuD,KAAOwuD,aAA7C,CAEA,MAAOwE,OAAM7Z,UAAN,CAAkBrvD,CAAlB,CAAP,CAEH,CAED55B,IAEH,CAED,MAAO,KAAP,CAEA;AAEH,CA/DkE,CAiEnE;AACA;AACA;AAEA29F,UAAW,oBAAY,CAEnB,GAAIyF,MAAO,KAAKD,eAAL,EAAX,CACA,MAAOC,MAAMA,KAAKhnG,MAAL,CAAc,CAApB,CAAP,CAEH,CA1EkE,CA4EnE;AACA4hG,iBAAkB,2BAAY,CAE1B,KAAKjpD,WAAL,CAAmB,IAAnB,CACA,KAAKsuD,YAAL,CAAoB,IAApB,CACA,KAAKF,eAAL,GAEH,CAnFkE,CAqFnE;AACA;AAEAA,gBAAiB,0BAAY,CAEzB;AAEA,GAAK,KAAKE,YAAL,EAAqB,KAAKA,YAAL,CAAkBjnG,MAAlB,GAA6B,KAAKwmG,MAAL,CAAYxmG,MAAnE,CAA4E,CAExE,MAAO,MAAKinG,YAAZ,CAEH,CAED;AACA;AAEA,GAAIzF,SAAU,EAAd,CAAkB0F,KAAO,CAAzB,CAEA,IAAM,GAAItjG,GAAI,CAAR,CAAW6H,EAAI,KAAK+6F,MAAL,CAAYxmG,MAAjC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnDsjG,MAAQ,KAAKV,MAAL,CAAa5iG,CAAb,EAAiB29F,SAAjB,EAAR,CACAC,QAAQ/sG,IAAR,CAAcyyG,IAAd,EAEH,CAED,KAAKD,YAAL,CAAoBzF,OAApB,CAEA,MAAOA,QAAP,CAEH,CAlHkE,CAoHnExN,gBAAiB,yBAAWsN,SAAX,CAAuB,CAEpC,GAAKA,YAActpG,SAAnB,CAA+BspG,UAAY,EAAZ,CAE/B,GAAI/yE,QAAS,EAAb,CAEA,IAAM,GAAI3qB,GAAI,CAAd,CAAiBA,GAAK09F,SAAtB,CAAiC19F,GAAjC,CAAwC,CAEpC2qB,OAAO95B,IAAP,CAAa,KAAKysG,QAAL,CAAet9F,EAAI09F,SAAnB,CAAb,EAEH,CAED,GAAK,KAAKmF,SAAV,CAAsB,CAElBl4E,OAAO95B,IAAP,CAAa85B,OAAQ,CAAR,CAAb,EAEH,CAED,MAAOA,OAAP,CAEH,CAxIkE,CA0InE8yE,UAAW,mBAAWC,SAAX,CAAuB,CAE9BA,UAAYA,WAAa,EAAzB,CAEA,GAAI/yE,QAAS,EAAb,CAAiBogE,IAAjB,CAEA,IAAM,GAAI/qF,GAAI,CAAR,CAAW4iG,OAAS,KAAKA,MAA/B,CAAuC5iG,EAAI4iG,OAAOxmG,MAAlD,CAA0D4D,GAA1D,CAAiE,CAE7D,GAAI8iG,OAAQF,OAAQ5iG,CAAR,CAAZ,CACA,GAAIujG,YAAeT,OAASA,MAAMpD,cAAjB,CAAoChC,UAAY,CAAhD,CACToF,OAASA,MAAMd,WAAjB,CAAiC,CAAjC,CACMc,OAASA,MAAML,aAAjB,CAAmC/E,UAAYoF,MAAMn4E,MAAN,CAAavuB,MAA5D,CACIshG,SAHd,CAKA,GAAIjP,KAAMqU,MAAMrF,SAAN,CAAiB8F,UAAjB,CAAV,CAEA,IAAM,GAAIj2E,GAAI,CAAd,CAAiBA,EAAImhE,IAAIryF,MAAzB,CAAiCkxB,GAAjC,CAAwC,CAEpC,GAAI9B,OAAQijE,IAAKnhE,CAAL,CAAZ,CAEA,GAAKy9D,MAAQA,KAAK/1E,MAAL,CAAawW,KAAb,CAAb,CAAoC,SAAU;AAE9Cb,OAAO95B,IAAP,CAAa26B,KAAb,EACAu/D,KAAOv/D,KAAP,CAEH,CAEJ,CAED,GAAK,KAAKq3E,SAAL,EAAkBl4E,OAAOvuB,MAAP,CAAgB,CAAlC,EAAuC,CAAEuuB,OAAQA,OAAOvuB,MAAP,CAAgB,CAAxB,EAA4B4Y,MAA5B,CAAoC2V,OAAQ,CAAR,CAApC,CAA9C,CAAkG,CAE9FA,OAAO95B,IAAP,CAAa85B,OAAQ,CAAR,CAAb,EAEH,CAED,MAAOA,OAAP,CAEH,CA/KkE,CAiLnE1zB,KAAM,cAAW0J,MAAX,CAAoB,CAEtBy8F,MAAMv+F,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKiiG,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI5iG,GAAI,CAAR,CAAW6H,EAAIlH,OAAOiiG,MAAP,CAAcxmG,MAAnC,CAA2C4D,EAAI6H,CAA/C,CAAkD7H,GAAlD,CAAyD,CAErD,GAAI8iG,OAAQniG,OAAOiiG,MAAP,CAAe5iG,CAAf,CAAZ,CAEA,KAAK4iG,MAAL,CAAY/xG,IAAZ,CAAkBiyG,MAAMhyG,KAAN,EAAlB,EAEH,CAED,KAAK+xG,SAAL,CAAiBliG,OAAOkiG,SAAxB,CAEA,MAAO,KAAP,CAEH,CAnMkE,CAqMnEv7E,OAAQ,iBAAY,CAEhB,GAAI90B,MAAO4qG,MAAMv+F,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAX,CAEA/P,KAAKqwG,SAAL,CAAiB,KAAKA,SAAtB,CACArwG,KAAKowG,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI5iG,GAAI,CAAR,CAAW6H,EAAI,KAAK+6F,MAAL,CAAYxmG,MAAjC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnD,GAAI8iG,OAAQ,KAAKF,MAAL,CAAa5iG,CAAb,CAAZ,CACAxN,KAAKowG,MAAL,CAAY/xG,IAAZ,CAAkBiyG,MAAMx7E,MAAN,EAAlB,EAEH,CAED,MAAO90B,KAAP,CAEH,CArNkE,CAuNnEusG,SAAU,kBAAWC,IAAX,CAAkB,CAExB5B,MAAMv+F,SAAN,CAAgBkgG,QAAhB,CAAyBx8F,IAAzB,CAA+B,IAA/B,CAAqCy8F,IAArC,EAEA,KAAK6D,SAAL,CAAiB7D,KAAK6D,SAAtB,CACA,KAAKD,MAAL,CAAc,EAAd,CAEA,IAAM,GAAI5iG,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK4D,MAAL,CAAYxmG,MAAjC,CAAyC4D,EAAI6H,CAA7C,CAAgD7H,GAAhD,CAAuD,CAEnD,GAAI8iG,OAAQ9D,KAAK4D,MAAL,CAAa5iG,CAAb,CAAZ,CACA,KAAK4iG,MAAL,CAAY/xG,IAAZ,CAAkB,GAAI6xG,QAAQI,MAAM/oG,IAAd,CAAJ,GAA2BglG,QAA3B,CAAqC+D,KAArC,CAAlB,EAEH,CAED,MAAO,KAAP,CAEH,CAvOkE,CAAjD,CAAtB,CA2OA;;;QAKA,QAASU,KAAT,CAAe74E,MAAf,CAAwB,CAEpBg4E,UAAUpgG,IAAV,CAAgB,IAAhB,EAEA,KAAKxI,IAAL,CAAY,MAAZ,CAEA,KAAK0pG,YAAL,CAAoB,GAAIhpG,QAAJ,EAApB,CAEA,GAAKkwB,MAAL,CAAc,CAEV,KAAKD,aAAL,CAAoBC,MAApB,EAEH,CAEJ,CAED64E,KAAK3kG,SAAL,CAAiBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe4jG,UAAU9jG,SAAzB,CAAf,CAAqD,CAElEI,YAAaukG,IAFqD,CAIlE94E,cAAe,uBAAWC,MAAX,CAAoB,CAE/B,KAAK+4E,MAAL,CAAa/4E,OAAQ,CAAR,EAAY38B,CAAzB,CAA4B28B,OAAQ,CAAR,EAAY18B,CAAxC,EAEA,IAAM,GAAI+R,GAAI,CAAR,CAAW6H,EAAI8iB,OAAOvuB,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,KAAK2jG,MAAL,CAAah5E,OAAQ3qB,CAAR,EAAYhS,CAAzB,CAA4B28B,OAAQ3qB,CAAR,EAAY/R,CAAxC,EAEH,CAEJ,CAdiE,CAgBlEy1G,OAAQ,gBAAW11G,CAAX,CAAcC,CAAd,CAAkB,CAEtB,KAAKw1G,YAAL,CAAkB50G,GAAlB,CAAuBb,CAAvB,CAA0BC,CAA1B,EAA+B;AAElC,CApBiE,CAsBlE01G,OAAQ,gBAAW31G,CAAX,CAAcC,CAAd,CAAkB,CAEtB,GAAI60G,OAAQ,GAAIf,UAAJ,CAAe,KAAK0B,YAAL,CAAkB3yG,KAAlB,EAAf,CAA0C,GAAI2J,QAAJ,CAAazM,CAAb,CAAgBC,CAAhB,CAA1C,CAAZ,CACA,KAAK20G,MAAL,CAAY/xG,IAAZ,CAAkBiyG,KAAlB,EAEA,KAAKW,YAAL,CAAkB50G,GAAlB,CAAuBb,CAAvB,CAA0BC,CAA1B,EAEH,CA7BiE,CA+BlE21G,iBAAkB,0BAAWC,IAAX,CAAiBC,IAAjB,CAAuB5E,EAAvB,CAA2BC,EAA3B,CAAgC,CAE9C,GAAI2D,OAAQ,GAAIV,qBAAJ,CACR,KAAKqB,YAAL,CAAkB3yG,KAAlB,EADQ,CAER,GAAI2J,QAAJ,CAAaopG,IAAb,CAAmBC,IAAnB,CAFQ,CAGR,GAAIrpG,QAAJ,CAAaykG,EAAb,CAAiBC,EAAjB,CAHQ,CAAZ,CAMA,KAAKyD,MAAL,CAAY/xG,IAAZ,CAAkBiyG,KAAlB,EAEA,KAAKW,YAAL,CAAkB50G,GAAlB,CAAuBqwG,EAAvB,CAA2BC,EAA3B,EAEH,CA3CiE,CA6ClE4E,cAAe,uBAAWC,KAAX,CAAkBC,KAAlB,CAAyBC,KAAzB,CAAgCC,KAAhC,CAAuCjF,EAAvC,CAA2CC,EAA3C,CAAgD,CAE3D,GAAI2D,OAAQ,GAAIpB,iBAAJ,CACR,KAAK+B,YAAL,CAAkB3yG,KAAlB,EADQ,CAER,GAAI2J,QAAJ,CAAaupG,KAAb,CAAoBC,KAApB,CAFQ,CAGR,GAAIxpG,QAAJ,CAAaypG,KAAb,CAAoBC,KAApB,CAHQ,CAIR,GAAI1pG,QAAJ,CAAaykG,EAAb,CAAiBC,EAAjB,CAJQ,CAAZ,CAOA,KAAKyD,MAAL,CAAY/xG,IAAZ,CAAkBiyG,KAAlB,EAEA,KAAKW,YAAL,CAAkB50G,GAAlB,CAAuBqwG,EAAvB,CAA2BC,EAA3B,EAEH,CA1DiE,CA4DlEiF,WAAY,oBAAW3V,GAAI,mBAAf,CAAqC,CAE7C,GAAI4V,MAAO,CAAE,KAAKZ,YAAL,CAAkB3yG,KAAlB,EAAF,EAA8BuR,MAA9B,CAAsCosF,GAAtC,CAAX,CAEA,GAAIqU,OAAQ,GAAIN,YAAJ,CAAiB6B,IAAjB,CAAZ,CACA,KAAKzB,MAAL,CAAY/xG,IAAZ,CAAkBiyG,KAAlB,EAEA,KAAKW,YAAL,CAAkBxsG,IAAlB,CAAwBw3F,IAAKA,IAAIryF,MAAJ,CAAa,CAAlB,CAAxB,EAEH,CArEiE,CAuElE6tF,IAAK,aAAWiV,EAAX,CAAeC,EAAf,CAAmBY,OAAnB,CAA4BT,WAA5B,CAAyCC,SAAzC,CAAoDC,UAApD,CAAiE,CAElE,GAAI7/E,IAAK,KAAK8jF,YAAL,CAAkBz1G,CAA3B,CACA,GAAI4xB,IAAK,KAAK6jF,YAAL,CAAkBx1G,CAA3B,CAEA,KAAKq2G,MAAL,CAAapF,GAAKv/E,EAAlB,CAAsBw/E,GAAKv/E,EAA3B,CAA+BmgF,OAA/B,CACIT,WADJ,CACiBC,SADjB,CAC4BC,UAD5B,EAGH,CA/EiE,CAiFlE8E,OAAQ,gBAAWpF,EAAX,CAAeC,EAAf,CAAmBY,OAAnB,CAA4BT,WAA5B,CAAyCC,SAAzC,CAAoDC,UAApD,CAAiE,CAErE,KAAK+E,UAAL,CAAiBrF,EAAjB,CAAqBC,EAArB,CAAyBY,OAAzB,CAAkCA,OAAlC,CAA2CT,WAA3C,CAAwDC,SAAxD,CAAmEC,UAAnE,EAEH,CArFiE,CAuFlEgF,QAAS,iBAAWtF,EAAX,CAAeC,EAAf,CAAmBC,OAAnB,CAA4BC,OAA5B,CAAqCC,WAArC,CAAkDC,SAAlD,CAA6DC,UAA7D,CAAyEC,SAAzE,CAAqF,CAE1F,GAAI9/E,IAAK,KAAK8jF,YAAL,CAAkBz1G,CAA3B,CACA,GAAI4xB,IAAK,KAAK6jF,YAAL,CAAkBx1G,CAA3B,CAEA,KAAKs2G,UAAL,CAAiBrF,GAAKv/E,EAAtB,CAA0Bw/E,GAAKv/E,EAA/B,CAAmCw/E,OAAnC,CAA4CC,OAA5C,CAAqDC,WAArD,CAAkEC,SAAlE,CAA6EC,UAA7E,CAAyFC,SAAzF,EAEH,CA9FiE,CAgGlE8E,WAAY,oBAAWrF,EAAX,CAAeC,EAAf,CAAmBC,OAAnB,CAA4BC,OAA5B,CAAqCC,WAArC,CAAkDC,SAAlD,CAA6DC,UAA7D,CAAyEC,SAAzE,CAAqF,CAE7F,GAAIqD,OAAQ,GAAI7D,aAAJ,CAAkBC,EAAlB,CAAsBC,EAAtB,CAA0BC,OAA1B,CAAmCC,OAAnC,CAA4CC,WAA5C,CAAyDC,SAAzD,CAAoEC,UAApE,CAAgFC,SAAhF,CAAZ,CAEA,GAAK,KAAKmD,MAAL,CAAYxmG,MAAZ,CAAqB,CAA1B,CAA8B,CAE1B;AACA,GAAIqoG,YAAa3B,MAAMxF,QAAN,CAAgB,CAAhB,CAAjB,CAEA,GAAK,CAAEmH,WAAWzvF,MAAX,CAAmB,KAAKyuF,YAAxB,CAAP,CAAgD,CAE5C,KAAKE,MAAL,CAAac,WAAWz2G,CAAxB,CAA2By2G,WAAWx2G,CAAtC,EAEH,CAEJ,CAED,KAAK20G,MAAL,CAAY/xG,IAAZ,CAAkBiyG,KAAlB,EAEA,GAAI4B,WAAY5B,MAAMxF,QAAN,CAAgB,CAAhB,CAAhB,CACA,KAAKmG,YAAL,CAAkBxsG,IAAlB,CAAwBytG,SAAxB,EAEH,CAtHiE,CAwHlEztG,KAAM,cAAW0J,MAAX,CAAoB,CAEtBgiG,UAAU9jG,SAAV,CAAoB5H,IAApB,CAAyBsL,IAAzB,CAA+B,IAA/B,CAAqC5B,MAArC,EAEA,KAAK8iG,YAAL,CAAkBxsG,IAAlB,CAAwB0J,OAAO8iG,YAA/B,EAEA,MAAO,KAAP,CAEH,CAhIiE,CAkIlEn8E,OAAQ,iBAAY,CAEhB,GAAI90B,MAAOmwG,UAAU9jG,SAAV,CAAoByoB,MAApB,CAA2B/kB,IAA3B,CAAiC,IAAjC,CAAX,CAEA/P,KAAKixG,YAAL,CAAoB,KAAKA,YAAL,CAAkBvuF,OAAlB,EAApB,CAEA,MAAO1iB,KAAP,CAEH,CA1IiE,CA4IlEusG,SAAU,kBAAWC,IAAX,CAAkB,CAExB2D,UAAU9jG,SAAV,CAAoBkgG,QAApB,CAA6Bx8F,IAA7B,CAAmC,IAAnC,CAAyCy8F,IAAzC,EAEA,KAAKyE,YAAL,CAAkBxuF,SAAlB,CAA6B+pF,KAAKyE,YAAlC,EAEA,MAAO,KAAP,CAEH,CApJiE,CAArD,CAAjB,CAwJA;;;QAKA;AACA;AACA;AACA;AACA;AAEA,QAASkB,MAAT,CAAgBh6E,MAAhB,CAAyB,CAErB64E,KAAKjhG,IAAL,CAAW,IAAX,CAAiBooB,MAAjB,EAEA,KAAK3Z,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA,KAAK3W,IAAL,CAAY,OAAZ,CAEA,KAAK40F,KAAL,CAAa,EAAb,CAEH,CAEDgW,MAAM9lG,SAAN,CAAkBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeykG,KAAK3kG,SAApB,CAAf,CAAgD,CAE9DI,YAAa0lG,KAFiD,CAI9DC,eAAgB,wBAAWlH,SAAX,CAAuB,CAEnC,GAAImH,UAAW,EAAf,CAEA,IAAM,GAAI7kG,GAAI,CAAR,CAAW6H,EAAI,KAAK8mF,KAAL,CAAWvyF,MAAhC,CAAwC4D,EAAI6H,CAA5C,CAA+C7H,GAA/C,CAAsD,CAElD6kG,SAAU7kG,CAAV,EAAgB,KAAK2uF,KAAL,CAAY3uF,CAAZ,EAAgBy9F,SAAhB,CAA2BC,SAA3B,CAAhB,CAEH,CAED,MAAOmH,SAAP,CAEH,CAhB6D,CAkB9D;AAEArU,cAAe,uBAAWkN,SAAX,CAAuB,CAElC,MAAO,CAEHv0D,MAAO,KAAKs0D,SAAL,CAAgBC,SAAhB,CAFJ,CAGH/O,MAAO,KAAKiW,cAAL,CAAqBlH,SAArB,CAHJ,CAAP,CAOH,CA7B6D,CA+B9DzmG,KAAM,cAAW0J,MAAX,CAAoB,CAEtB6iG,KAAK3kG,SAAL,CAAe5H,IAAf,CAAoBsL,IAApB,CAA0B,IAA1B,CAAgC5B,MAAhC,EAEA,KAAKguF,KAAL,CAAa,EAAb,CAEA,IAAM,GAAI3uF,GAAI,CAAR,CAAW6H,EAAIlH,OAAOguF,KAAP,CAAavyF,MAAlC,CAA0C4D,EAAI6H,CAA9C,CAAiD7H,GAAjD,CAAwD,CAEpD,GAAI8sF,MAAOnsF,OAAOguF,KAAP,CAAc3uF,CAAd,CAAX,CAEA,KAAK2uF,KAAL,CAAW99F,IAAX,CAAiBi8F,KAAKh8F,KAAL,EAAjB,EAEH,CAED,MAAO,KAAP,CAEH,CA/C6D,CAiD9Dw2B,OAAQ,iBAAY,CAEhB,GAAI90B,MAAOgxG,KAAK3kG,SAAL,CAAeyoB,MAAf,CAAsB/kB,IAAtB,CAA4B,IAA5B,CAAX,CAEA/P,KAAKwe,IAAL,CAAY,KAAKA,IAAjB,CACAxe,KAAKm8F,KAAL,CAAa,EAAb,CAEA,IAAM,GAAI3uF,GAAI,CAAR,CAAW6H,EAAI,KAAK8mF,KAAL,CAAWvyF,MAAhC,CAAwC4D,EAAI6H,CAA5C,CAA+C7H,GAA/C,CAAsD,CAElD,GAAI8sF,MAAO,KAAK6B,KAAL,CAAY3uF,CAAZ,CAAX,CACAxN,KAAKm8F,KAAL,CAAW99F,IAAX,CAAiBi8F,KAAKxlE,MAAL,EAAjB,EAEH,CAED,MAAO90B,KAAP,CAEH,CAjE6D,CAmE9DusG,SAAU,kBAAWC,IAAX,CAAkB,CAExBwE,KAAK3kG,SAAL,CAAekgG,QAAf,CAAwBx8F,IAAxB,CAA8B,IAA9B,CAAoCy8F,IAApC,EAEA,KAAKhuF,IAAL,CAAYguF,KAAKhuF,IAAjB,CACA,KAAK29E,KAAL,CAAa,EAAb,CAEA,IAAM,GAAI3uF,GAAI,CAAR,CAAW6H,EAAIm3F,KAAKrQ,KAAL,CAAWvyF,MAAhC,CAAwC4D,EAAI6H,CAA5C,CAA+C7H,GAA/C,CAAsD,CAElD,GAAI8sF,MAAOkS,KAAKrQ,KAAL,CAAY3uF,CAAZ,CAAX,CACA,KAAK2uF,KAAL,CAAW99F,IAAX,CAAiB,GAAI2yG,KAAJ,GAAWzE,QAAX,CAAqBjS,IAArB,CAAjB,EAEH,CAED,MAAO,KAAP,CAEH,CAnF6D,CAAhD,CAAlB,CAuFA;;;OAKA,QAASgY,MAAT,CAAgB50G,KAAhB,CAAuBsqE,SAAvB,CAAmC,CAE/BnpE,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,OAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,CAAWjqC,KAAX,CAAb,CACA,KAAKsqE,SAAL,CAAiBA,YAAcpmE,SAAd,CAA0BomE,SAA1B,CAAsC,CAAvD,CAEA,KAAKpqE,aAAL,CAAqBgE,SAArB,CAEH,CAED0wG,MAAMjmG,SAAN,CAAkBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAElEI,YAAa6lG,KAFqD,CAIlEloB,QAAS,IAJyD,CAMlE3lF,KAAM,cAAW0J,MAAX,CAAoB,CAEtBtP,SAASwN,SAAT,CAAmB5H,IAAnB,CAAwBsL,IAAxB,CAA8B,IAA9B,CAAoC5B,MAApC,EAEA,KAAKzQ,KAAL,CAAW+G,IAAX,CAAiB0J,OAAOzQ,KAAxB,EACA,KAAKsqE,SAAL,CAAiB75D,OAAO65D,SAAxB,CAEA,MAAO,KAAP,CAEH,CAfiE,CAiBlElzC,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAI/0B,MAAOnB,SAASwN,SAAT,CAAmByoB,MAAnB,CAA0B/kB,IAA1B,CAAgC,IAAhC,CAAsCglB,IAAtC,CAAX,CAEA/0B,KAAK0B,MAAL,CAAYhE,KAAZ,CAAoB,KAAKA,KAAL,CAAWorC,MAAX,EAApB,CACA9oC,KAAK0B,MAAL,CAAYsmE,SAAZ,CAAwB,KAAKA,SAA7B,CAEA,GAAK,KAAKt6B,WAAL,GAAqB9rC,SAA1B,CAAsC5B,KAAK0B,MAAL,CAAYgsC,WAAZ,CAA0B,KAAKA,WAAL,CAAiB5E,MAAjB,EAA1B,CAEtC,GAAK,KAAK9/B,QAAL,GAAkBpH,SAAvB,CAAmC5B,KAAK0B,MAAL,CAAYsH,QAAZ,CAAuB,KAAKA,QAA5B,CACnC,GAAK,KAAKJ,KAAL,GAAehH,SAApB,CAAgC5B,KAAK0B,MAAL,CAAYkH,KAAZ,CAAoB,KAAKA,KAAzB,CAChC,GAAK,KAAKokC,KAAL,GAAeprC,SAApB,CAAgC5B,KAAK0B,MAAL,CAAYsrC,KAAZ,CAAoB,KAAKA,KAAzB,CAChC,GAAK,KAAKq7B,QAAL,GAAkBzmE,SAAvB,CAAmC5B,KAAK0B,MAAL,CAAY2mE,QAAZ,CAAuB,KAAKA,QAA5B,CAEnC,GAAK,KAAK/rE,MAAL,GAAgBsF,SAArB,CAAiC5B,KAAK0B,MAAL,CAAYpF,MAAZ,CAAqB,KAAKA,MAAL,CAAYw4B,MAAZ,EAArB,CAEjC,MAAO90B,KAAP,CAEH,CAnCiE,CAApD,CAAlB,CAuCA;;OAIA,QAASuyG,gBAAT,CAA0B9kE,QAA1B,CAAoCC,WAApC,CAAiDs6B,SAAjD,CAA6D,CAEzDsqC,MAAMviG,IAAN,CAAY,IAAZ,CAAkB09B,QAAlB,CAA4Bu6B,SAA5B,EAEA,KAAKzgE,IAAL,CAAY,iBAAZ,CAEA,KAAKnL,UAAL,CAAkBwF,SAAlB,CAEA,KAAKrG,QAAL,CAAckJ,IAAd,CAAoB5F,SAAS60C,SAA7B,EACA,KAAK7e,YAAL,GAEA,KAAK6Y,WAAL,CAAmB,GAAI/F,MAAJ,CAAW+F,WAAX,CAAnB,CAEH,CAED6kE,gBAAgBlmG,SAAhB,CAA4BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe+lG,MAAMjmG,SAArB,CAAf,CAAiD,CAEzEI,YAAa8lG,eAF4D,CAIzE/pC,kBAAmB,IAJsD,CAMzE/jE,KAAM,cAAW0J,MAAX,CAAoB,CAEtBmkG,MAAMjmG,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKu/B,WAAL,CAAiBjpC,IAAjB,CAAuB0J,OAAOu/B,WAA9B,EAEA,MAAO,KAAP,CAEH,CAdwE,CAAjD,CAA5B,CAkBA;;OAIA,QAAS8kE,YAAT,CAAsB/4G,MAAtB,CAA+B,CAE3B,KAAKA,MAAL,CAAcA,MAAd,CAEA,KAAK0uE,IAAL,CAAY,CAAZ,CACA,KAAKhiE,MAAL,CAAc,CAAd,CAEA,KAAKtJ,OAAL,CAAe,GAAIoL,QAAJ,CAAa,GAAb,CAAkB,GAAlB,CAAf,CAEA,KAAK4hC,GAAL,CAAW,IAAX,CACA,KAAK7/B,MAAL,CAAc,GAAIiZ,QAAJ,EAAd,CAEH,CAED3W,OAAO4B,MAAP,CAAeskG,YAAYnmG,SAA3B,CAAsC,CAElC5H,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAK1U,MAAL,CAAc0U,OAAO1U,MAAP,CAAc6E,KAAd,EAAd,CAEA,KAAK6pE,IAAL,CAAYh6D,OAAOg6D,IAAnB,CACA,KAAKhiE,MAAL,CAAcgI,OAAOhI,MAArB,CAEA,KAAKtJ,OAAL,CAAa4H,IAAb,CAAmB0J,OAAOtR,OAA1B,EAEA,MAAO,KAAP,CAEH,CAbiC,CAelCyB,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAnBiC,CAqBlCqwB,OAAQ,iBAAY,CAEhB,GAAIpzB,QAAS,EAAb,CAEA,GAAK,KAAKymE,IAAL,GAAc,CAAnB,CAAuBzmE,OAAOymE,IAAP,CAAc,KAAKA,IAAnB,CACvB,GAAK,KAAKhiE,MAAL,GAAgB,CAArB,CAAyBzE,OAAOyE,MAAP,CAAgB,KAAKA,MAArB,CACzB,GAAK,KAAKtJ,OAAL,CAAarB,CAAb,GAAmB,GAAnB,EAA0B,KAAKqB,OAAL,CAAapB,CAAb,GAAmB,GAAlD,CAAwDiG,OAAO7E,OAAP,CAAiB,KAAKA,OAAL,CAAa6lB,OAAb,EAAjB,CAExDhhB,OAAOjI,MAAP,CAAgB,KAAKA,MAAL,CAAYq7B,MAAZ,CAAoB,KAApB,EAA4BpzB,MAA5C,CACA,MAAOA,QAAOjI,MAAP,CAAcuQ,MAArB,CAEA,MAAOtI,OAAP,CAEH,CAlCiC,CAAtC,EAsCA;;OAIA,QAAS+wG,gBAAT,EAA2B,CAEvBD,YAAYziG,IAAZ,CAAkB,IAAlB,CAAwB,GAAIrV,kBAAJ,CAAuB,EAAvB,CAA2B,CAA3B,CAA8B,GAA9B,CAAmC,GAAnC,CAAxB,EAEH,CAED+3G,gBAAgBpmG,SAAhB,CAA4BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeimG,YAAYnmG,SAA3B,CAAf,CAAuD,CAE/EI,YAAagmG,eAFkE,CAI/ElnC,kBAAmB,IAJ4D,CAM/E5rE,OAAQ,gBAAWwnE,KAAX,CAAmB,CAEvB,GAAI1tE,QAAS,KAAKA,MAAlB,CAEA,GAAIqQ,KAAMiU,MAAME,OAAN,CAAgB,CAAhB,CAAoBkpD,MAAMv+D,KAApC,CACA,GAAIs1E,QAAS,KAAKrhF,OAAL,CAAaC,KAAb,CAAqB,KAAKD,OAAL,CAAaE,MAA/C,CACA,GAAIqvB,KAAM+6C,MAAMn+D,QAAN,EAAkBvP,OAAO2yB,GAAnC,CAEA,GAAKtiB,MAAQrQ,OAAOqQ,GAAf,EAAsBo0E,SAAWzkF,OAAOykF,MAAxC,EAAkD9xD,MAAQ3yB,OAAO2yB,GAAtE,CAA4E,CAExE3yB,OAAOqQ,GAAP,CAAaA,GAAb,CACArQ,OAAOykF,MAAP,CAAgBA,MAAhB,CACAzkF,OAAO2yB,GAAP,CAAaA,GAAb,CACA3yB,OAAOkL,sBAAP,GAEH,CAEJ,CAvB8E,CAAvD,CAA5B,CA2BA;;OAIA,QAAS+tG,UAAT,CAAoBh1G,KAApB,CAA2BsqE,SAA3B,CAAsCh/D,QAAtC,CAAgDJ,KAAhD,CAAuDy/D,QAAvD,CAAiEr7B,KAAjE,CAAyE,CAErEslE,MAAMviG,IAAN,CAAY,IAAZ,CAAkBrS,KAAlB,CAAyBsqE,SAAzB,EAEA,KAAKzgE,IAAL,CAAY,WAAZ,CAEA,KAAKhM,QAAL,CAAckJ,IAAd,CAAoB5F,SAAS60C,SAA7B,EACA,KAAK7e,YAAL,GAEA,KAAK53B,MAAL,CAAc,GAAI4B,SAAJ,EAAd,CAEAyN,OAAOgI,cAAP,CAAuB,IAAvB,CAA6B,OAA7B,CAAsC,CAClC1H,IAAK,cAAY,CAEb;AACA;AACA,MAAO,MAAKo7D,SAAL,CAAiB9oE,KAAKC,EAA7B,CAEH,CAPiC,CAQlC9C,IAAK,aAAWs2G,KAAX,CAAmB,CAEpB;AACA;AACA,KAAK3qC,SAAL,CAAiB2qC,MAAQzzG,KAAKC,EAA9B,CAEH,CAdiC,CAAtC,EAiBA,KAAK6J,QAAL,CAAkBA,WAAapH,SAAf,CAA6BoH,QAA7B,CAAwC,CAAxD,CACA,KAAKJ,KAAL,CAAeA,QAAUhH,SAAZ,CAA0BgH,KAA1B,CAAkC1J,KAAKC,EAAL,CAAU,CAAzD,CACA,KAAKkpE,QAAL,CAAkBA,WAAazmE,SAAf,CAA6BymE,QAA7B,CAAwC,CAAxD,CACA,KAAKr7B,KAAL,CAAeA,QAAUprC,SAAZ,CAA0BorC,KAA1B,CAAkC,CAA/C,CAAkD;AAElD,KAAK1wC,MAAL,CAAc,GAAIm2G,gBAAJ,EAAd,CAEH,CAEDC,UAAUrmG,SAAV,CAAsBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe+lG,MAAMjmG,SAArB,CAAf,CAAiD,CAEnEI,YAAaimG,SAFsD,CAInEtqC,YAAa,IAJsD,CAMnE3jE,KAAM,cAAW0J,MAAX,CAAoB,CAEtBmkG,MAAMjmG,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKnF,QAAL,CAAgBmF,OAAOnF,QAAvB,CACA,KAAKJ,KAAL,CAAauF,OAAOvF,KAApB,CACA,KAAKy/D,QAAL,CAAgBl6D,OAAOk6D,QAAvB,CACA,KAAKr7B,KAAL,CAAa7+B,OAAO6+B,KAApB,CAEA,KAAK/vC,MAAL,CAAckR,OAAOlR,MAAP,CAAcqB,KAAd,EAAd,CAEA,KAAKhC,MAAL,CAAc6R,OAAO7R,MAAP,CAAcgC,KAAd,EAAd,CAEA,MAAO,KAAP,CAEH,CArBkE,CAAjD,CAAtB,CAyBA;;OAKA,QAASs0G,WAAT,CAAqBl1G,KAArB,CAA4BsqE,SAA5B,CAAuCh/D,QAAvC,CAAiDgkC,KAAjD,CAAyD,CAErDslE,MAAMviG,IAAN,CAAY,IAAZ,CAAkBrS,KAAlB,CAAyBsqE,SAAzB,EAEA,KAAKzgE,IAAL,CAAY,YAAZ,CAEA+E,OAAOgI,cAAP,CAAuB,IAAvB,CAA6B,OAA7B,CAAsC,CAClC1H,IAAK,cAAY,CAEb;AACA;AACA,MAAO,MAAKo7D,SAAL,CAAiB,CAAjB,CAAqB9oE,KAAKC,EAAjC,CAEH,CAPiC,CAQlC9C,IAAK,aAAWs2G,KAAX,CAAmB,CAEpB;AACA;AACA,KAAK3qC,SAAL,CAAiB2qC,OAAU,EAAIzzG,KAAKC,EAAnB,CAAjB,CAEH,CAdiC,CAAtC,EAiBA,KAAK6J,QAAL,CAAkBA,WAAapH,SAAf,CAA6BoH,QAA7B,CAAwC,CAAxD,CACA,KAAKgkC,KAAL,CAAeA,QAAUprC,SAAZ,CAA0BorC,KAA1B,CAAkC,CAA/C,CAAkD;AAElD,KAAK1wC,MAAL,CAAc,GAAIk2G,YAAJ,CAAiB,GAAI93G,kBAAJ,CAAuB,EAAvB,CAA2B,CAA3B,CAA8B,GAA9B,CAAmC,GAAnC,CAAjB,CAAd,CAEH,CAEDk4G,WAAWvmG,SAAX,CAAuBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe+lG,MAAMjmG,SAArB,CAAf,CAAiD,CAEpEI,YAAammG,UAFuD,CAIpErqC,aAAc,IAJsD,CAMpE9jE,KAAM,cAAW0J,MAAX,CAAoB,CAEtBmkG,MAAMjmG,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKnF,QAAL,CAAgBmF,OAAOnF,QAAvB,CACA,KAAKgkC,KAAL,CAAa7+B,OAAO6+B,KAApB,CAEA,KAAK1wC,MAAL,CAAc6R,OAAO7R,MAAP,CAAcgC,KAAd,EAAd,CAEA,MAAO,KAAP,CAEH,CAjBmE,CAAjD,CAAvB,CAqBA;;OAIA,QAASu0G,uBAAT,EAAmC,CAE/BL,YAAYziG,IAAZ,CAAkB,IAAlB,CAAwB,GAAIunC,mBAAJ,CAAwB,CAAE,CAA1B,CAA6B,CAA7B,CAAgC,CAAhC,CAAmC,CAAE,CAArC,CAAwC,GAAxC,CAA6C,GAA7C,CAAxB,EAEH,CAEDu7D,uBAAuBxmG,SAAvB,CAAmCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeimG,YAAYnmG,SAA3B,CAAf,CAAuD,CAEtFI,YAAaomG,sBAFyE,CAAvD,CAAnC,CAMA;;;OAKA,QAAS12G,iBAAT,CAA2BuB,KAA3B,CAAkCsqE,SAAlC,CAA8C,CAE1CsqC,MAAMviG,IAAN,CAAY,IAAZ,CAAkBrS,KAAlB,CAAyBsqE,SAAzB,EAEA,KAAKzgE,IAAL,CAAY,kBAAZ,CAEA,KAAKhM,QAAL,CAAckJ,IAAd,CAAoB5F,SAAS60C,SAA7B,EACA,KAAK7e,YAAL,GAEA,KAAK53B,MAAL,CAAc,GAAI4B,SAAJ,EAAd,CAEA,KAAKvC,MAAL,CAAc,GAAIu2G,uBAAJ,EAAd,CAEH,CAED12G,iBAAiBkQ,SAAjB,CAA6BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe+lG,MAAMjmG,SAArB,CAAf,CAAiD,CAE1EI,YAAatQ,gBAF6D,CAI1E+rE,mBAAoB,IAJsD,CAM1EzjE,KAAM,cAAW0J,MAAX,CAAoB,CAEtBmkG,MAAMjmG,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKlR,MAAL,CAAckR,OAAOlR,MAAP,CAAcqB,KAAd,EAAd,CAEA,KAAKhC,MAAL,CAAc6R,OAAO7R,MAAP,CAAcgC,KAAd,EAAd,CAEA,MAAO,KAAP,CAEH,CAhByE,CAAjD,CAA7B,CAoBA;;OAIA,QAASnB,aAAT,CAAuBO,KAAvB,CAA8BsqE,SAA9B,CAA0C,CAEtCsqC,MAAMviG,IAAN,CAAY,IAAZ,CAAkBrS,KAAlB,CAAyBsqE,SAAzB,EAEA,KAAKzgE,IAAL,CAAY,cAAZ,CAEA,KAAKnL,UAAL,CAAkBwF,SAAlB,CAEH,CAEDzE,aAAakP,SAAb,CAAyBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe+lG,MAAMjmG,SAArB,CAAf,CAAiD,CAEtEI,YAAatP,YAFyD,CAItE8qE,eAAgB,IAJsD,CAAjD,CAAzB,CAQA;;OAIA,QAAS6qC,cAAT,CAAwBp1G,KAAxB,CAA+BsqE,SAA/B,CAA0ClrE,KAA1C,CAAiDC,MAAjD,CAA0D,CAEtDu1G,MAAMviG,IAAN,CAAY,IAAZ,CAAkBrS,KAAlB,CAAyBsqE,SAAzB,EAEA,KAAKzgE,IAAL,CAAY,eAAZ,CAEA,KAAKzK,KAAL,CAAeA,QAAU8E,SAAZ,CAA0B9E,KAA1B,CAAkC,EAA/C,CACA,KAAKC,MAAL,CAAgBA,SAAW6E,SAAb,CAA2B7E,MAA3B,CAAoC,EAAlD,CAEH,CAED+1G,cAAczmG,SAAd,CAA0BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe+lG,MAAMjmG,SAArB,CAAf,CAAiD,CAEvEI,YAAaqmG,aAF0D,CAIvExqC,gBAAiB,IAJsD,CAMvE7jE,KAAM,cAAW0J,MAAX,CAAoB,CAEtBmkG,MAAMjmG,SAAN,CAAgB5H,IAAhB,CAAqBsL,IAArB,CAA2B,IAA3B,CAAiC5B,MAAjC,EAEA,KAAKrR,KAAL,CAAaqR,OAAOrR,KAApB,CACA,KAAKC,MAAL,CAAcoR,OAAOpR,MAArB,CAEA,MAAO,KAAP,CAEH,CAfsE,CAiBvE+3B,OAAQ,gBAAWC,IAAX,CAAkB,CAEtB,GAAI/0B,MAAOsyG,MAAMjmG,SAAN,CAAgByoB,MAAhB,CAAuB/kB,IAAvB,CAA6B,IAA7B,CAAmCglB,IAAnC,CAAX,CAEA/0B,KAAK0B,MAAL,CAAY5E,KAAZ,CAAoB,KAAKA,KAAzB,CACAkD,KAAK0B,MAAL,CAAY3E,MAAZ,CAAqB,KAAKA,MAA1B,CAEA,MAAOiD,KAAP,CAEH,CA1BsE,CAAjD,CAA1B,CA8BA;;;;;;;;OAUA,QAAS+yG,oBAAT,CAA8B7+E,IAA9B,CAAoC5jB,KAApC,CAA2C0mC,MAA3C,CAAmDvmC,aAAnD,CAAmE,CAE/DuiG,cAAcjjG,IAAd,CAAoB,IAApB,CAA0BmkB,IAA1B,CAAgC5jB,KAAhC,CAAuC0mC,MAAvC,CAA+CvmC,aAA/C,EAEH,CAEDsiG,oBAAoB1mG,SAApB,CAAgCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeymG,cAAc3mG,SAA7B,CAAf,CAAyD,CAErFI,YAAasmG,mBAFwE,CAIrFE,cAAe,QAJsE,CAKrFC,gBAAiBtjG,KALoE,CAOrFujG,qBAAsBv2F,mBAP+D,CASrFw2F,+BAAgCxxG,SATqD,CAWrFyxG,+BAAgCzxG,SAXqD,CAAzD,CAAhC,CAeA;;;;;;;;OAUA,QAAS0xG,qBAAT,CAA+Bp/E,IAA/B,CAAqC5jB,KAArC,CAA4C0mC,MAA5C,CAAqD,CAEjDg8D,cAAcjjG,IAAd,CAAoB,IAApB,CAA0BmkB,IAA1B,CAAgC5jB,KAAhC,CAAuC0mC,MAAvC,EAEH,CAEDs8D,qBAAqBjnG,SAArB,CAAiCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeymG,cAAc3mG,SAA7B,CAAf,CAAyD,CAEtFI,YAAa6mG,oBAFyE,CAItFL,cAAe,MAJuE,CAKtFC,gBAAiBtjG,KALqE,CAOtFujG,qBAAsBv2F,mBAPgE,CAStFw2F,+BAAgCxxG,SATsD,CAUtFyxG,+BAAgCzxG,SAEhC;AACA;AACA;AAdsF,CAAzD,CAAjC,CAkBA;;;;;;;;;;;;;;;;;;;;OAsBA,QAAS2xG,YAAT,CAAsBC,kBAAtB,CAA0CC,YAA1C,CAAwDC,UAAxD,CAAoEC,YAApE,CAAmF,CAE/E,KAAKH,kBAAL,CAA0BA,kBAA1B,CACA,KAAKI,YAAL,CAAoB,CAApB,CAEA,KAAKD,YAAL,CAAoBA,eAAiB/xG,SAAjB,CAChB+xG,YADgB,CACD,GAAIF,cAAahnG,WAAjB,CAA8BinG,UAA9B,CADnB,CAEA,KAAKD,YAAL,CAAoBA,YAApB,CACA,KAAKI,SAAL,CAAiBH,UAAjB,CAEH,CAEDpnG,OAAO4B,MAAP,CAAeqlG,YAAYlnG,SAA3B,CAAsC,CAElCynG,SAAU,kBAAW7gG,CAAX,CAAe,CAErB,GAAI8gG,IAAK,KAAKP,kBAAd,CACIpmD,GAAK,KAAKwmD,YADd,CAGInpD,GAAKspD,GAAI3mD,EAAJ,CAHT,CAII5C,GAAKupD,GAAI3mD,GAAK,CAAT,CAJT,CAMA4mD,kBAAmB,CAEfC,KAAM,CAEF,GAAIz3G,MAAJ,CAEA03G,YAAa,CAET;AACA;AACA;AACA;AACAC,aAAc,GAAK,EAAIlhG,EAAIw3C,EAAR,CAAL,CAAoB,CAE9B,IAAM,GAAI2pD,UAAWhnD,GAAK,CAA1B,GAAiC,CAE7B,GAAK3C,KAAO7oD,SAAZ,CAAwB,CAEpB,GAAKqR,EAAIu3C,EAAT,CAAc,KAAM2pD,aAAN,CAEd;AAEA/mD,GAAK2mD,GAAGnqG,MAAR,CACA,KAAKgqG,YAAL,CAAoBxmD,EAApB,CACA,MAAO,MAAKinD,SAAL,CAAgBjnD,GAAK,CAArB,CAAwBn6C,CAAxB,CAA2Bu3C,EAA3B,CAAP,CAEH,CAED,GAAK4C,KAAOgnD,QAAZ,CAAuB,MAAO;AAE9B5pD,GAAKC,EAAL,CACAA,GAAKspD,GAAI,EAAG3mD,EAAP,CAAL,CAEA,GAAKn6C,EAAIw3C,EAAT,CAAc,CAEV;AACA,KAAMwpD,KAAN,CAEH,CAEJ,CAED;AACAz3G,MAAQu3G,GAAGnqG,MAAX,CACA,KAAMsqG,YAAN,CAEH,CAED;AACA;AACA,GAAK,EAAIjhG,GAAKu3C,EAAT,CAAL,CAAqB,CAEjB;AAEA,GAAI8pD,UAAWP,GAAI,CAAJ,CAAf,CAEA,GAAK9gG,EAAIqhG,QAAT,CAAoB,CAEhBlnD,GAAK,CAAL,CAAQ;AACR5C,GAAK8pD,QAAL,CAEH,CAED;AAEA,IAAM,GAAIF,UAAWhnD,GAAK,CAA1B,GAAiC,CAE7B,GAAK5C,KAAO5oD,SAAZ,CAAwB,CAEpB;AAEA,KAAKgyG,YAAL,CAAoB,CAApB,CACA,MAAO,MAAKW,YAAL,CAAmB,CAAnB,CAAsBthG,CAAtB,CAAyBw3C,EAAzB,CAAP,CAEH,CAED,GAAK2C,KAAOgnD,QAAZ,CAAuB,MAAO;AAE9B3pD,GAAKD,EAAL,CACAA,GAAKupD,GAAI,EAAG3mD,EAAH,CAAQ,CAAZ,CAAL,CAEA,GAAKn6C,GAAKu3C,EAAV,CAAe,CAEX;AACA,KAAMypD,KAAN,CAEH,CAEJ,CAED;AACAz3G,MAAQ4wD,EAAR,CACAA,GAAK,CAAL,CACA,KAAM8mD,YAAN,CAEH,CAED;AAEA,KAAMF,kBAAN,CAEH,CAAC;AAEF;AAEA,MAAQ5mD,GAAK5wD,KAAb,CAAqB,CAEjB,GAAIg4G,KAAQpnD,GAAK5wD,KAAP,GAAmB,CAA7B,CAEA,GAAKyW,EAAI8gG,GAAIS,GAAJ,CAAT,CAAqB,CAEjBh4G,MAAQg4G,GAAR,CAEH,CAJD,IAIO,CAEHpnD,GAAKonD,IAAM,CAAX,CAEH,CAEJ,CAED/pD,GAAKspD,GAAI3mD,EAAJ,CAAL,CACA5C,GAAKupD,GAAI3mD,GAAK,CAAT,CAAL,CAEA;AAEA,GAAK5C,KAAO5oD,SAAZ,CAAwB,CAEpB,KAAKgyG,YAAL,CAAoB,CAApB,CACA,MAAO,MAAKW,YAAL,CAAmB,CAAnB,CAAsBthG,CAAtB,CAAyBw3C,EAAzB,CAAP,CAEH,CAED,GAAKA,KAAO7oD,SAAZ,CAAwB,CAEpBwrD,GAAK2mD,GAAGnqG,MAAR,CACA,KAAKgqG,YAAL,CAAoBxmD,EAApB,CACA,MAAO,MAAKinD,SAAL,CAAgBjnD,GAAK,CAArB,CAAwB5C,EAAxB,CAA4Bv3C,CAA5B,CAAP,CAEH,CAEJ,CAAC;AAEF,KAAK2gG,YAAL,CAAoBxmD,EAApB,CAEA,KAAKqnD,gBAAL,CAAuBrnD,EAAvB,CAA2B5C,EAA3B,CAA+BC,EAA/B,EAEH,CAAC;AAEF,MAAO,MAAKiqD,YAAL,CAAmBtnD,EAAnB,CAAuB5C,EAAvB,CAA2Bv3C,CAA3B,CAA8Bw3C,EAA9B,CAAP,CAEH,CAjKiC,CAmKlCkqD,SAAU,IAnKwB,CAmKlB;AAChB;AAEA;AAEAC,iBAAkB,EAxKgB,CA0KlCC,aAAc,uBAAY,CAEtB,MAAO,MAAKF,QAAL,EAAiB,KAAKC,gBAA7B,CAEH,CA9KiC,CAgLlCE,iBAAkB,0BAAWngG,KAAX,CAAmB,CAEjC;AAEA,GAAIm3D,QAAS,KAAK6nC,YAAlB,CACI38D,OAAS,KAAKy8D,YADlB,CAEI7pB,OAAS,KAAKiqB,SAFlB,CAGI5uG,OAAS0P,MAAQi1E,MAHrB,CAKA,IAAM,GAAIp8E,GAAI,CAAd,CAAiBA,IAAMo8E,MAAvB,CAA+B,EAAGp8E,CAAlC,CAAsC,CAElCs+D,OAAQt+D,CAAR,EAAcwpC,OAAQ/xC,OAASuI,CAAjB,CAAd,CAEH,CAED,MAAOs+D,OAAP,CAEH,CAjMiC,CAmMlC;AAEA4oC,aAAc,uBAAW,mBAAsB,CAE3C,KAAM,IAAIj0F,MAAJ,CAAW,yBAAX,CAAN,CACA;AAEH,CA1MiC,CA4MlCg0F,iBAAkB,2BAAW,gBAAmB,CAE5C;AAEH,CAhNiC,CAAtC,EAoNA;AACAnoG,OAAO4B,MAAP,CAAeqlG,YAAYlnG,SAA3B,CAAsC,CAElC;AACAkoG,aAAchB,YAAYlnG,SAAZ,CAAsByoG,gBAHF,CAKlC;AACAT,UAAWd,YAAYlnG,SAAZ,CAAsByoG,gBANC,CAAtC,EAUA;;;;OAMA,QAASC,4BAAT,CAAsCvB,kBAAtC,CAA0DC,YAA1D,CAAwEC,UAAxE,CAAoFC,YAApF,CAAmG,CAE/FJ,YAAYxjG,IAAZ,CAAkB,IAAlB,CAAwByjG,kBAAxB,CAA4CC,YAA5C,CAA0DC,UAA1D,CAAsEC,YAAtE,EAEH,CAEDoB,4BAA4B1oG,SAA5B,CAAwCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAegnG,YAAYlnG,SAA3B,CAAf,CAAuD,CAE3FI,YAAasoG,2BAF8E,CAI3FL,aAAc,sBAAWtnD,EAAX,CAAe5C,EAAf,CAAmBv3C,CAAnB,CAAsBw3C,EAAtB,CAA2B,CAErC,GAAIqhB,QAAS,KAAK6nC,YAAlB,CACI38D,OAAS,KAAKy8D,YADlB,CAEI7pB,OAAS,KAAKiqB,SAFlB,CAII5uG,OAASmoD,GAAKw8B,MAJlB,CAMIvnE,MAAQ,CAAEpP,EAAIu3C,EAAN,GAAeC,GAAKD,EAApB,CANZ,CAQA,IAAM,GAAIv6C,KAAMhL,OAAS2kF,MAAzB,CAAiC3kF,SAAWgL,GAA5C,CAAiDhL,QAAU,CAA3D,CAA+D,CAE3DE,WAAWynB,SAAX,CAAsBk/C,MAAtB,CAA8B,CAA9B,CAAiC90B,MAAjC,CAAyC/xC,OAAS2kF,MAAlD,CAA0D5yC,MAA1D,CAAkE/xC,MAAlE,CAA0Eod,KAA1E,EAEH,CAED,MAAOypD,OAAP,CAEH,CAtB0F,CAAvD,CAAxC,CA0BA;;;;;;;OASA,QAASkpC,wBAAT,CAAkC9gF,IAAlC,CAAwC5jB,KAAxC,CAA+C0mC,MAA/C,CAAuDvmC,aAAvD,CAAuE,CAEnEuiG,cAAcjjG,IAAd,CAAoB,IAApB,CAA0BmkB,IAA1B,CAAgC5jB,KAAhC,CAAuC0mC,MAAvC,CAA+CvmC,aAA/C,EAEH,CAEDukG,wBAAwB3oG,SAAxB,CAAoCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeymG,cAAc3mG,SAA7B,CAAf,CAAyD,CAEzFI,YAAauoG,uBAF4E,CAIzF/B,cAAe,YAJ0E,CAMzF;AAEAE,qBAAsBt2F,iBARmE,CAUzFu2F,+BAAgC,wCAAWtnC,MAAX,CAAoB,CAEhD,MAAO,IAAIipC,4BAAJ,CAAiC,KAAKzkG,KAAtC,CAA6C,KAAK0mC,MAAlD,CAA0D,KAAKi+D,YAAL,EAA1D,CAA+EnpC,MAA/E,CAAP,CAEH,CAdwF,CAgBzFunC,+BAAgCzxG,SAAU;AAhB+C,CAAzD,CAApC,CAoBA;;;;;;;;OAUA,QAASszG,mBAAT,CAA6BhhF,IAA7B,CAAmC5jB,KAAnC,CAA0C0mC,MAA1C,CAAkDvmC,aAAlD,CAAkE,CAE9DuiG,cAAcjjG,IAAd,CAAoB,IAApB,CAA0BmkB,IAA1B,CAAgC5jB,KAAhC,CAAuC0mC,MAAvC,CAA+CvmC,aAA/C,EAEH,CAEDykG,mBAAmB7oG,SAAnB,CAA+BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeymG,cAAc3mG,SAA7B,CAAf,CAAyD,CAEpFI,YAAayoG,kBAFuE,CAIpFjC,cAAe,OAEf;AAEA;AAEA;AACA;AAXoF,CAAzD,CAA/B,CAeA;;;;;;;OASA,QAASkC,oBAAT,CAA8BjhF,IAA9B,CAAoC5jB,KAApC,CAA2C0mC,MAA3C,CAAmDvmC,aAAnD,CAAmE,CAE/DuiG,cAAcjjG,IAAd,CAAoB,IAApB,CAA0BmkB,IAA1B,CAAgC5jB,KAAhC,CAAuC0mC,MAAvC,CAA+CvmC,aAA/C,EAEH,CAED0kG,oBAAoB9oG,SAApB,CAAgCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeymG,cAAc3mG,SAA7B,CAAf,CAAyD,CAErFI,YAAa0oG,mBAFwE,CAIrFlC,cAAe,QAEf;AAEA;AARqF,CAAzD,CAAhC,CAYA;;;;;;;;OAUA,QAASmC,iBAAT,CAA2B5B,kBAA3B,CAA+CC,YAA/C,CAA6DC,UAA7D,CAAyEC,YAAzE,CAAwF,CAEpFJ,YAAYxjG,IAAZ,CAAkB,IAAlB,CAAwByjG,kBAAxB,CAA4CC,YAA5C,CAA0DC,UAA1D,CAAsEC,YAAtE,EAEA,KAAK0B,WAAL,CAAmB,CAAE,CAArB,CACA,KAAKC,WAAL,CAAmB,CAAE,CAArB,CACA,KAAKC,WAAL,CAAmB,CAAE,CAArB,CACA,KAAKC,WAAL,CAAmB,CAAE,CAArB,CAEH,CAEDJ,iBAAiB/oG,SAAjB,CAA6BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAegnG,YAAYlnG,SAA3B,CAAf,CAAuD,CAEhFI,YAAa2oG,gBAFmE,CAIhFR,iBAAkB,CAEda,YAAa14F,mBAFC,CAGd24F,UAAW34F,mBAHG,CAJ8D,CAWhF03F,iBAAkB,0BAAWrnD,EAAX,CAAe5C,EAAf,CAAmBC,EAAnB,CAAwB,CAEtC,GAAIspD,IAAK,KAAKP,kBAAd,CACImC,MAAQvoD,GAAK,CADjB,CAEIwoD,MAAQxoD,GAAK,CAFjB,CAIIyoD,MAAQ9B,GAAI4B,KAAJ,CAJZ,CAKIG,MAAQ/B,GAAI6B,KAAJ,CALZ,CAOA,GAAKC,QAAUj0G,SAAf,CAA2B,CAEvB,OAAS,KAAKizG,YAAL,GAAoBY,WAA7B,EAEI,IAAKz4F,gBAAL,CAEI;AACA24F,MAAQvoD,EAAR,CACAyoD,MAAQ,EAAIrrD,EAAJ,CAASC,EAAjB,CAEA,MAEJ,IAAKxtC,iBAAL,CAEI;AACA04F,MAAQ5B,GAAGnqG,MAAH,CAAY,CAApB,CACAisG,MAAQrrD,GAAKupD,GAAI4B,KAAJ,CAAL,CAAmB5B,GAAI4B,MAAQ,CAAZ,CAA3B,CAEA,MAEJ,QAAS;AAEL;AACAA,MAAQvoD,EAAR,CACAyoD,MAAQprD,EAAR,CAtBR,CA0BH,CAED,GAAKqrD,QAAUl0G,SAAf,CAA2B,CAEvB,OAAS,KAAKizG,YAAL,GAAoBa,SAA7B,EAEI,IAAK14F,gBAAL,CAEI;AACA44F,MAAQxoD,EAAR,CACA0oD,MAAQ,EAAIrrD,EAAJ,CAASD,EAAjB,CAEA,MAEJ,IAAKvtC,iBAAL,CAEI;AACA24F,MAAQ,CAAR,CACAE,MAAQrrD,GAAKspD,GAAI,CAAJ,CAAL,CAAeA,GAAI,CAAJ,CAAvB,CAEA,MAEJ,QAAS;AAEL;AACA6B,MAAQxoD,GAAK,CAAb,CACA0oD,MAAQtrD,EAAR,CAtBR,CA0BH,CAED,GAAIurD,QAAS,CAAEtrD,GAAKD,EAAP,EAAc,GAA3B,CACIo/B,OAAS,KAAKiqB,SADlB,CAGA,KAAKwB,WAAL,CAAmBU,QAAWvrD,GAAKqrD,KAAhB,CAAnB,CACA,KAAKN,WAAL,CAAmBQ,QAAWD,MAAQrrD,EAAnB,CAAnB,CACA,KAAK6qD,WAAL,CAAmBK,MAAQ/rB,MAA3B,CACA,KAAK4rB,WAAL,CAAmBI,MAAQhsB,MAA3B,CAEH,CAxF+E,CA0FhF8qB,aAAc,sBAAWtnD,EAAX,CAAe5C,EAAf,CAAmBv3C,CAAnB,CAAsBw3C,EAAtB,CAA2B,CAErC,GAAIqhB,QAAS,KAAK6nC,YAAlB,CACI38D,OAAS,KAAKy8D,YADlB,CAEI7pB,OAAS,KAAKiqB,SAFlB,CAIImC,GAAK5oD,GAAKw8B,MAJd,CAIuBqsB,GAAKD,GAAKpsB,MAJjC,CAKIssB,GAAK,KAAKZ,WALd,CAK4Ba,GAAK,KAAKX,WALtC,CAMIY,GAAK,KAAKf,WANd,CAM2BgB,GAAK,KAAKd,WANrC,CAQIhpF,EAAI,CAAEtZ,EAAIu3C,EAAN,GAAeC,GAAKD,EAApB,CARR,CASIupD,GAAKxnF,EAAIA,CATb,CAUI+pF,IAAMvC,GAAKxnF,CAVf,CAYA;AAEA,GAAIgqF,IAAK,CAAEH,EAAF,CAAOE,GAAP,CAAa,EAAIF,EAAJ,CAASrC,EAAtB,CAA2BqC,GAAK7pF,CAAzC,CACA,GAAIy9B,IAAK,CAAE,EAAIosD,EAAN,EAAaE,GAAb,CAAmB,CAAE,CAAE,GAAF,CAAQ,EAAIF,EAAd,EAAqBrC,EAAxC,CAA6C,CAAE,CAAE,GAAF,CAAQqC,EAAV,EAAiB7pF,CAA9D,CAAkE,CAA3E,CACA,GAAI6B,IAAK,CAAE,CAAE,CAAF,CAAMioF,EAAR,EAAeC,GAAf,CAAqB,CAAE,IAAMD,EAAR,EAAetC,EAApC,CAAyC,IAAMxnF,CAAxD,CACA,GAAIiqF,IAAKH,GAAKC,GAAL,CAAWD,GAAKtC,EAAzB,CAEA;AAEA,IAAM,GAAIvmG,GAAI,CAAd,CAAiBA,IAAMo8E,MAAvB,CAA+B,EAAGp8E,CAAlC,CAAsC,CAElCs+D,OAAQt+D,CAAR,EACI+oG,GAAKv/D,OAAQk/D,GAAK1oG,CAAb,CAAL,CACAw8C,GAAKhT,OAAQi/D,GAAKzoG,CAAb,CADL,CAEA4gB,GAAK4oB,OAAQg/D,GAAKxoG,CAAb,CAFL,CAGAgpG,GAAKx/D,OAAQm/D,GAAK3oG,CAAb,CAJT,CAMH,CAED,MAAOs+D,OAAP,CAEH,CA7H+E,CAAvD,CAA7B,CAiIA;;OAIA,QAAS2qC,kBAAT,CAA4BjD,kBAA5B,CAAgDC,YAAhD,CAA8DC,UAA9D,CAA0EC,YAA1E,CAAyF,CAErFJ,YAAYxjG,IAAZ,CAAkB,IAAlB,CAAwByjG,kBAAxB,CAA4CC,YAA5C,CAA0DC,UAA1D,CAAsEC,YAAtE,EAEH,CAED8C,kBAAkBpqG,SAAlB,CAA8BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAegnG,YAAYlnG,SAA3B,CAAf,CAAuD,CAEjFI,YAAagqG,iBAFoE,CAIjF/B,aAAc,sBAAWtnD,EAAX,CAAe5C,EAAf,CAAmBv3C,CAAnB,CAAsBw3C,EAAtB,CAA2B,CAErC,GAAIqhB,QAAS,KAAK6nC,YAAlB,CACI38D,OAAS,KAAKy8D,YADlB,CAEI7pB,OAAS,KAAKiqB,SAFlB,CAII6C,QAAUtpD,GAAKw8B,MAJnB,CAKI+sB,QAAUD,QAAU9sB,MALxB,CAOIgtB,QAAU,CAAE3jG,EAAIu3C,EAAN,GAAeC,GAAKD,EAApB,CAPd,CAQIqsD,QAAU,EAAID,OARlB,CAUA,IAAM,GAAIppG,GAAI,CAAd,CAAiBA,IAAMo8E,MAAvB,CAA+B,EAAGp8E,CAAlC,CAAsC,CAElCs+D,OAAQt+D,CAAR,EACIwpC,OAAQ2/D,QAAUnpG,CAAlB,EAAwBqpG,OAAxB,CACA7/D,OAAQ0/D,QAAUlpG,CAAlB,EAAwBopG,OAF5B,CAIH,CAED,MAAO9qC,OAAP,CAEH,CA1BgF,CAAvD,CAA9B,CA8BA;;;;;;OAQA,QAASgrC,oBAAT,CAA8BtD,kBAA9B,CAAkDC,YAAlD,CAAgEC,UAAhE,CAA4EC,YAA5E,CAA2F,CAEvFJ,YAAYxjG,IAAZ,CAAkB,IAAlB,CAAwByjG,kBAAxB,CAA4CC,YAA5C,CAA0DC,UAA1D,CAAsEC,YAAtE,EAEH,CAEDmD,oBAAoBzqG,SAApB,CAAgCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAegnG,YAAYlnG,SAA3B,CAAf,CAAuD,CAEnFI,YAAaqqG,mBAFsE,CAInFpC,aAAc,sBAAWtnD,EAAG,gBAAd,CAAiC,CAE3C,MAAO,MAAK0nD,gBAAL,CAAuB1nD,GAAK,CAA5B,CAAP,CAEH,CARkF,CAAvD,CAAhC,CAYA;;;;OAMA,GAAI2pD,gBAAiB,CAEjB;AACAC,WAAY,oBAAW7hG,KAAX,CAAkB8hG,IAAlB,CAAwBv2G,EAAxB,CAA6B,CAErC,GAAKq2G,eAAeG,YAAf,CAA6B/hG,KAA7B,CAAL,CAA4C,CAExC;AACA;AACA,MAAO,IAAIA,OAAM1I,WAAV,CAAuB0I,MAAM88B,QAAN,CAAgBglE,IAAhB,CAAsBv2G,KAAOkB,SAAP,CAAmBlB,EAAnB,CAAwByU,MAAMvL,MAApD,CAAvB,CAAP,CAEH,CAED,MAAOuL,OAAMC,KAAN,CAAa6hG,IAAb,CAAmBv2G,EAAnB,CAAP,CAEH,CAfgB,CAiBjB;AACAy2G,aAAc,sBAAWhiG,KAAX,CAAkB5N,IAAlB,CAAwB6vG,UAAxB,CAAqC,CAE/C,GAAK,CAAEjiG,KAAF,EAAW;AACZ,CAAEiiG,UAAF,EAAgBjiG,MAAM1I,WAAN,GAAsBlF,IAD1C,CACiD,MAAO4N,MAAP,CAEjD,GAAK,MAAO5N,MAAKsqC,iBAAZ,GAAkC,QAAvC,CAAkD,CAE9C,MAAO,IAAItqC,KAAJ,CAAU4N,KAAV,CAAP,CAA0B;AAE7B,CAED,MAAOvF,OAAMvD,SAAN,CAAgB+I,KAAhB,CAAsBrF,IAAtB,CAA4BoF,KAA5B,CAAP,CAA4C;AAE/C,CA/BgB,CAiCjB+hG,aAAc,sBAAWx1G,MAAX,CAAoB,CAE9B,MAAO21G,aAAYC,MAAZ,CAAoB51G,MAApB,GACH,EAAIA,iBAAkB61G,SAAtB,CADJ,CAGH,CAtCgB,CAwCjB;AACAC,iBAAkB,0BAAWlnG,KAAX,CAAmB,CAEjC,QAASmnG,YAAT,CAAsBjqG,CAAtB,CAAyBstB,CAAzB,CAA6B,CAEzB,MAAOxqB,OAAO9C,CAAP,EAAa8C,MAAOwqB,CAAP,CAApB,CAEH,CAED,GAAIpoB,GAAIpC,MAAM1G,MAAd,CACA,GAAIkiE,QAAS,GAAIl8D,MAAJ,CAAW8C,CAAX,CAAb,CACA,IAAM,GAAIlF,GAAI,CAAd,CAAiBA,IAAMkF,CAAvB,CAA0B,EAAGlF,CAA7B,EAAiCs+D,OAAQt+D,CAAR,EAAcA,CAAd,CAAjC,CAEAs+D,OAAOpuB,IAAP,CAAa+5D,WAAb,EAEA,MAAO3rC,OAAP,CAEH,CAzDgB,CA2DjB;AACA4rC,YAAa,qBAAW1gE,MAAX,CAAmB4yC,MAAnB,CAA2BvkE,KAA3B,CAAmC,CAE5C,GAAIsyF,SAAU3gE,OAAOptC,MAArB,CACA,GAAIkiE,QAAS,GAAI90B,QAAOvqC,WAAX,CAAwBkrG,OAAxB,CAAb,CAEA,IAAM,GAAInqG,GAAI,CAAR,CAAWsf,UAAY,CAA7B,CAAgCA,YAAc6qF,OAA9C,CAAuD,EAAGnqG,CAA1D,CAA8D,CAE1D,GAAIoqG,WAAYvyF,MAAO7X,CAAP,EAAao8E,MAA7B,CAEA,IAAM,GAAI9uD,GAAI,CAAd,CAAiBA,IAAM8uD,MAAvB,CAA+B,EAAG9uD,CAAlC,CAAsC,CAElCgxC,OAAQh/C,WAAR,EAAyBkqB,OAAQ4gE,UAAY98E,CAApB,CAAzB,CAEH,CAEJ,CAED,MAAOgxC,OAAP,CAEH,CA/EgB,CAiFjB;AACA+rC,YAAa,qBAAWC,QAAX,CAAqBxnG,KAArB,CAA4B0mC,MAA5B,CAAoC+gE,iBAApC,CAAwD,CAEjE,GAAIvqG,GAAI,CAAR,CAAWypC,IAAM6gE,SAAU,CAAV,CAAjB,CAEA,MAAQ7gE,MAAQr1C,SAAR,EAAqBq1C,IAAK8gE,iBAAL,IAA6Bn2G,SAA1D,CAAsE,CAElEq1C,IAAM6gE,SAAUtqG,GAAV,CAAN,CAEH,CAED,GAAKypC,MAAQr1C,SAAb,CAAyB,OAAQ;AAEjC,GAAIkL,OAAQmqC,IAAK8gE,iBAAL,CAAZ,CACA,GAAKjrG,QAAUlL,SAAf,CAA2B,OAAQ;AAEnC,GAAKgO,MAAM63B,OAAN,CAAe36B,KAAf,CAAL,CAA8B,CAE1B,EAAG,CAECA,MAAQmqC,IAAK8gE,iBAAL,CAAR,CAEA,GAAKjrG,QAAUlL,SAAf,CAA2B,CAEvB0O,MAAMjS,IAAN,CAAY44C,IAAItpC,IAAhB,EACAqpC,OAAO34C,IAAP,CAAYg4E,KAAZ,CAAmBr/B,MAAnB,CAA2BlqC,KAA3B,EAAoC;AAEvC,CAEDmqC,IAAM6gE,SAAUtqG,GAAV,CAAN,CAEH,CAbD,MAaUypC,MAAQr1C,SAblB,EAeH,CAjBD,IAiBO,IAAKkL,MAAM4V,OAAN,GAAkB9gB,SAAvB,CAAmC,CAEtC;AAEA,EAAG,CAECkL,MAAQmqC,IAAK8gE,iBAAL,CAAR,CAEA,GAAKjrG,QAAUlL,SAAf,CAA2B,CAEvB0O,MAAMjS,IAAN,CAAY44C,IAAItpC,IAAhB,EACAb,MAAM4V,OAAN,CAAes0B,MAAf,CAAuBA,OAAOptC,MAA9B,EAEH,CAEDqtC,IAAM6gE,SAAUtqG,GAAV,CAAN,CAEH,CAbD,MAaUypC,MAAQr1C,SAblB,EAeH,CAnBM,IAmBA,CAEH;AAEA,EAAG,CAECkL,MAAQmqC,IAAK8gE,iBAAL,CAAR,CAEA,GAAKjrG,QAAUlL,SAAf,CAA2B,CAEvB0O,MAAMjS,IAAN,CAAY44C,IAAItpC,IAAhB,EACAqpC,OAAO34C,IAAP,CAAayO,KAAb,EAEH,CAEDmqC,IAAM6gE,SAAUtqG,GAAV,CAAN,CAEH,CAbD,MAaUypC,MAAQr1C,SAblB,EAeH,CAEJ,CA1JgB,CAArB,CA8JA;;;;;;;;OAUA,QAASoxG,cAAT,CAAwB9+E,IAAxB,CAA8B5jB,KAA9B,CAAqC0mC,MAArC,CAA6CvmC,aAA7C,CAA6D,CAEzD,GAAKyjB,OAAStyB,SAAd,CAA0B,KAAM,IAAI6e,MAAJ,CAAW,8CAAX,CAAN,CAC1B,GAAKnQ,QAAU1O,SAAV,EAAuB0O,MAAM1G,MAAN,GAAiB,CAA7C,CAAiD,KAAM,IAAI6W,MAAJ,CAAW,oDAAsDyT,IAAjE,CAAN,CAEjD,KAAKA,IAAL,CAAYA,IAAZ,CAEA,KAAK5jB,KAAL,CAAaymG,eAAeI,YAAf,CAA6B7mG,KAA7B,CAAoC,KAAK0nG,cAAzC,CAAb,CACA,KAAKhhE,MAAL,CAAc+/D,eAAeI,YAAf,CAA6BngE,MAA7B,CAAqC,KAAKk8D,eAA1C,CAAd,CAEA,KAAK+E,gBAAL,CAAuBxnG,eAAiB,KAAK0iG,oBAA7C,EAEA,KAAK+E,QAAL,GACA,KAAKC,QAAL,GAEH,CAED;AAEA7rG,OAAO4B,MAAP,CAAe8kG,aAAf,CAA8B,CAE1B;AACA;AAEA77D,MAAO,eAAWq1D,IAAX,CAAkB,CAErB,GAAKA,KAAKjlG,IAAL,GAAc3F,SAAnB,CAA+B,CAE3B,KAAM,IAAI6e,MAAJ,CAAW,0DAAX,CAAN,CAEH,CAED,GAAI23F,WAAYpF,cAAcqF,6BAAd,CAA6C7L,KAAKjlG,IAAlD,CAAhB,CAEA,GAAKilG,KAAKl8F,KAAL,GAAe1O,SAApB,CAAgC,CAE5B,GAAI0O,OAAQ,EAAZ,CAAgB0mC,OAAS,EAAzB,CAEA+/D,eAAec,WAAf,CAA4BrL,KAAKrpG,IAAjC,CAAuCmN,KAAvC,CAA8C0mC,MAA9C,CAAsD,OAAtD,EAEAw1D,KAAKl8F,KAAL,CAAaA,KAAb,CACAk8F,KAAKx1D,MAAL,CAAcA,MAAd,CAEH,CAED;AACA,GAAKohE,UAAUjhE,KAAV,GAAoBv1C,SAAzB,CAAqC,CAEjC,MAAOw2G,WAAUjhE,KAAV,CAAiBq1D,IAAjB,CAAP,CAEH,CAJD,IAIO,CAEH;AACA,MAAO,IAAI4L,UAAJ,CAAe5L,KAAKt4E,IAApB,CAA0Bs4E,KAAKl8F,KAA/B,CAAsCk8F,KAAKx1D,MAA3C,CAAmDw1D,KAAK/7F,aAAxD,CAAP,CAEH,CAEJ,CAtCyB,CAwC1BqkB,OAAQ,gBAAWwjF,KAAX,CAAmB,CAEvB,GAAIF,WAAYE,MAAM7rG,WAAtB,CAEA,GAAI+/F,KAAJ,CAEA;AACA,GAAK4L,UAAUtjF,MAAV,GAAqBlzB,SAA1B,CAAsC,CAElC4qG,KAAO4L,UAAUtjF,MAAV,CAAkBwjF,KAAlB,CAAP,CAEH,CAJD,IAIO,CAEH;AACA9L,KAAO,CAEH,OAAQ8L,MAAMpkF,IAFX,CAGH,QAAS6iF,eAAeI,YAAf,CAA6BmB,MAAMhoG,KAAnC,CAA0CV,KAA1C,CAHN,CAIH,SAAUmnG,eAAeI,YAAf,CAA6BmB,MAAMthE,MAAnC,CAA2CpnC,KAA3C,CAJP,CAAP,CAQA,GAAIa,eAAgB6nG,MAAMC,gBAAN,EAApB,CAEA,GAAK9nG,gBAAkB6nG,MAAMnF,oBAA7B,CAAoD,CAEhD3G,KAAK/7F,aAAL,CAAqBA,aAArB,CAEH,CAEJ,CAED+7F,KAAKjlG,IAAL,CAAY+wG,MAAMrF,aAAlB,CAAiC;AAEjC,MAAOzG,KAAP,CAEH,CA5EyB,CA8E1B6L,8BAA+B,uCAAWG,QAAX,CAAsB,CAEjD,OAASA,SAASvQ,WAAT,EAAT,EAEI,IAAK,QAAL,CACA,IAAK,QAAL,CACA,IAAK,OAAL,CACA,IAAK,QAAL,CACA,IAAK,SAAL,CAEI,MAAOkN,oBAAP,CAEJ,IAAK,QAAL,CACA,IAAK,SAAL,CACA,IAAK,SAAL,CACA,IAAK,SAAL,CAEI,MAAOsD,oBAAP,CAEJ,IAAK,OAAL,CAEI,MAAOvD,mBAAP,CAEJ,IAAK,YAAL,CAEI,MAAOF,wBAAP,CAEJ,IAAK,MAAL,CACA,IAAK,SAAL,CAEI,MAAO1B,qBAAP,CAEJ,IAAK,QAAL,CAEI,MAAOP,oBAAP,CAhCR,CAoCA,KAAM,IAAItyF,MAAJ,CAAW,8CAAgD+3F,QAA3D,CAAN,CAEH,CAtHyB,CAA9B,EA0HAlsG,OAAO4B,MAAP,CAAe8kG,cAAc3mG,SAA7B,CAAwC,CAEpCI,YAAaumG,aAFuB,CAIpCgF,eAAgBlnE,YAJoB,CAMpCoiE,gBAAiBpiE,YANmB,CAQpCqiE,qBAAsBt2F,iBARc,CAUpC67F,iCAAkC,0CAAW5sC,MAAX,CAAoB,CAElD,MAAO,IAAIgrC,oBAAJ,CAAyB,KAAKxmG,KAA9B,CAAqC,KAAK0mC,MAA1C,CAAkD,KAAKi+D,YAAL,EAAlD,CAAuEnpC,MAAvE,CAAP,CAEH,CAdmC,CAgBpCsnC,+BAAgC,wCAAWtnC,MAAX,CAAoB,CAEhD,MAAO,IAAI2qC,kBAAJ,CAAuB,KAAKnmG,KAA5B,CAAmC,KAAK0mC,MAAxC,CAAgD,KAAKi+D,YAAL,EAAhD,CAAqEnpC,MAArE,CAAP,CAEH,CApBmC,CAsBpCunC,+BAAgC,wCAAWvnC,MAAX,CAAoB,CAEhD,MAAO,IAAIspC,iBAAJ,CAAsB,KAAK9kG,KAA3B,CAAkC,KAAK0mC,MAAvC,CAA+C,KAAKi+D,YAAL,EAA/C,CAAoEnpC,MAApE,CAAP,CAEH,CA1BmC,CA4BpCmsC,iBAAkB,0BAAWxnG,aAAX,CAA2B,CAEzC,GAAIkoG,cAAJ,CAEA,OAASloG,aAAT,EAEI,IAAKmM,oBAAL,CAEI+7F,cAAgB,KAAKD,gCAArB,CAEA,MAEJ,IAAK77F,kBAAL,CAEI87F,cAAgB,KAAKvF,8BAArB,CAEA,MAEJ,IAAKt2F,kBAAL,CAEI67F,cAAgB,KAAKtF,8BAArB,CAEA,MAlBR,CAsBA,GAAKsF,gBAAkB/2G,SAAvB,CAAmC,CAE/B,GAAI+jF,SAAU,iCACV,KAAKstB,aADK,CACW,wBADX,CACsC,KAAK/+E,IADzD,CAGA,GAAK,KAAK0kF,iBAAL,GAA2Bh3G,SAAhC,CAA4C,CAExC;AACA,GAAK6O,gBAAkB,KAAK0iG,oBAA5B,CAAmD,CAE/C,KAAK8E,gBAAL,CAAuB,KAAK9E,oBAA5B,EAEH,CAJD,IAIO,CAEH,KAAM,IAAI1yF,MAAJ,CAAWklE,OAAX,CAAN,CAA4B;AAE/B,CAEJ,CAEDxlF,QAAQgK,IAAR,CAAc,sBAAd,CAAsCw7E,OAAtC,EACA,OAEH,CAED,KAAKizB,iBAAL,CAAyBD,aAAzB,CAEH,CAjFmC,CAmFpCJ,iBAAkB,2BAAY,CAE1B,OAAS,KAAKK,iBAAd,EAEI,IAAK,MAAKF,gCAAV,CAEI,MAAO97F,oBAAP,CAEJ,IAAK,MAAKw2F,8BAAV,CAEI,MAAOv2F,kBAAP,CAEJ,IAAK,MAAKw2F,8BAAV,CAEI,MAAOv2F,kBAAP,CAZR,CAgBH,CArGmC,CAuGpCm4F,aAAc,uBAAY,CAEtB,MAAO,MAAKj+D,MAAL,CAAYptC,MAAZ,CAAqB,KAAK0G,KAAL,CAAW1G,MAAvC,CAEH,CA3GmC,CA6GpC;AACAivG,MAAO,eAAWC,UAAX,CAAwB,CAE3B,GAAKA,aAAe,GAApB,CAA0B,CAEtB,GAAIxoG,OAAQ,KAAKA,KAAjB,CAEA,IAAM,GAAI9C,GAAI,CAAR,CAAWkF,EAAIpC,MAAM1G,MAA3B,CAAmC4D,IAAMkF,CAAzC,CAA4C,EAAGlF,CAA/C,CAAmD,CAE/C8C,MAAO9C,CAAP,GAAcsrG,UAAd,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CA9HmC,CAgIpC;AACA1yG,MAAO,eAAW2yG,SAAX,CAAuB,CAE1B,GAAKA,YAAc,GAAnB,CAAyB,CAErB,GAAIzoG,OAAQ,KAAKA,KAAjB,CAEA,IAAM,GAAI9C,GAAI,CAAR,CAAWkF,EAAIpC,MAAM1G,MAA3B,CAAmC4D,IAAMkF,CAAzC,CAA4C,EAAGlF,CAA/C,CAAmD,CAE/C8C,MAAO9C,CAAP,GAAcurG,SAAd,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAjJmC,CAmJpC;AACA;AACAt2C,KAAM,cAAWu2C,SAAX,CAAsBC,OAAtB,CAAgC,CAElC,GAAI3oG,OAAQ,KAAKA,KAAjB,CACI4oG,MAAQ5oG,MAAM1G,MADlB,CAEIqtG,KAAO,CAFX,CAGIv2G,GAAKw4G,MAAQ,CAHjB,CAKA,MAAQjC,OAASiC,KAAT,EAAkB5oG,MAAO2mG,IAAP,EAAgB+B,SAA1C,CAAsD,CAElD,EAAG/B,IAAH,CAEH,CAED,MAAQv2G,KAAO,CAAE,CAAT,EAAc4P,MAAO5P,EAAP,EAAcu4G,OAApC,CAA8C,CAE1C,EAAGv4G,EAAH,CAEH,CAED,EAAGA,EAAH,CAAO;AAEP,GAAKu2G,OAAS,CAAT,EAAcv2G,KAAOw4G,KAA1B,CAAkC,CAE9B;AACA,GAAKjC,MAAQv2G,EAAb,CAAkBA,GAAKxB,KAAK8G,GAAL,CAAUtF,EAAV,CAAc,CAAd,CAAL,CAAwBu2G,KAAOv2G,GAAK,CAApC,CAElB,GAAIkpF,QAAS,KAAKqrB,YAAL,EAAb,CACA,KAAK3kG,KAAL,CAAaymG,eAAeC,UAAf,CAA2B1mG,KAA3B,CAAkC2mG,IAAlC,CAAwCv2G,EAAxC,CAAb,CACA,KAAKs2C,MAAL,CAAc+/D,eAAeC,UAAf,CAA2B,KAAKhgE,MAAhC,CAAwCigE,KAAOrtB,MAA/C,CAAuDlpF,GAAKkpF,MAA5D,CAAd,CAEH,CAED,MAAO,KAAP,CAEH,CAvLmC,CAyLpC;AACAsuB,SAAU,mBAAY,CAElB,GAAIiB,OAAQ,IAAZ,CAEA,GAAItF,WAAY,KAAKoB,YAAL,EAAhB,CACA,GAAKpB,UAAY30G,KAAKmT,KAAL,CAAYwhG,SAAZ,CAAZ,GAAwC,CAA7C,CAAiD,CAE7C1zG,QAAQ+iB,KAAR,CAAe,mDAAf,CAAoE,IAApE,EACAi2F,MAAQ,KAAR,CAEH,CAED,GAAI7oG,OAAQ,KAAKA,KAAjB,CACI0mC,OAAS,KAAKA,MADlB,CAGIkiE,MAAQ5oG,MAAM1G,MAHlB,CAKA,GAAKsvG,QAAU,CAAf,CAAmB,CAEf/4G,QAAQ+iB,KAAR,CAAe,sCAAf,CAAuD,IAAvD,EACAi2F,MAAQ,KAAR,CAEH,CAED,GAAIC,UAAW,IAAf,CAEA,IAAM,GAAI5rG,GAAI,CAAd,CAAiBA,IAAM0rG,KAAvB,CAA8B1rG,GAA9B,CAAqC,CAEjC,GAAI6rG,UAAW/oG,MAAO9C,CAAP,CAAf,CAEA,GAAK,MAAO6rG,SAAP,GAAoB,QAApB,EAAgCt2D,MAAOs2D,QAAP,CAArC,CAAyD,CAErDl5G,QAAQ+iB,KAAR,CAAe,kDAAf,CAAmE,IAAnE,CAAyE1V,CAAzE,CAA4E6rG,QAA5E,EACAF,MAAQ,KAAR,CACA,MAEH,CAED,GAAKC,WAAa,IAAb,EAAqBA,SAAWC,QAArC,CAAgD,CAE5Cl5G,QAAQ+iB,KAAR,CAAe,yCAAf,CAA0D,IAA1D,CAAgE1V,CAAhE,CAAmE6rG,QAAnE,CAA6ED,QAA7E,EACAD,MAAQ,KAAR,CACA,MAEH,CAEDC,SAAWC,QAAX,CAEH,CAED,GAAKriE,SAAWp1C,SAAhB,CAA4B,CAExB,GAAKm1G,eAAeG,YAAf,CAA6BlgE,MAA7B,CAAL,CAA6C,CAEzC,IAAM,GAAIxpC,GAAI,CAAR,CAAWkF,EAAIskC,OAAOptC,MAA5B,CAAoC4D,IAAMkF,CAA1C,CAA6C,EAAGlF,CAAhD,CAAoD,CAEhD,GAAIV,OAAQkqC,OAAQxpC,CAAR,CAAZ,CAEA,GAAKu1C,MAAOj2C,KAAP,CAAL,CAAsB,CAElB3M,QAAQ+iB,KAAR,CAAe,mDAAf,CAAoE,IAApE,CAA0E1V,CAA1E,CAA6EV,KAA7E,EACAqsG,MAAQ,KAAR,CACA,MAEH,CAEJ,CAEJ,CAEJ,CAED,MAAOA,MAAP,CAEH,CApQmC,CAsQpC;AACA;AACAhB,SAAU,mBAAY,CAElB,GAAI7nG,OAAQ,KAAKA,KAAjB,CACI0mC,OAAS,KAAKA,MADlB,CAEI4yC,OAAS,KAAKqrB,YAAL,EAFb,CAIIqE,oBAAsB,KAAKf,gBAAL,KAA4Bz7F,iBAJtD,CAMIy8F,WAAa,CANjB,CAOI98C,UAAYnsD,MAAM1G,MAAN,CAAe,CAP/B,CASA,IAAM,GAAI4D,GAAI,CAAd,CAAiBA,EAAIivD,SAArB,CAAgC,EAAGjvD,CAAnC,CAAuC,CAEnC,GAAIgsG,MAAO,KAAX,CAEA,GAAI7rG,MAAO2C,MAAO9C,CAAP,CAAX,CACA,GAAIisG,UAAWnpG,MAAO9C,EAAI,CAAX,CAAf,CAEA;AAEA,GAAKG,OAAS8rG,QAAT,GAAuBjsG,IAAM,CAAN,EAAWG,OAASA,KAAM,CAAN,CAA3C,CAAL,CAA8D,CAE1D,GAAK,CAAE2rG,mBAAP,CAA6B,CAEzB;AAEA,GAAIr0G,QAASuI,EAAIo8E,MAAjB,CACI8vB,QAAUz0G,OAAS2kF,MADvB,CAEI+vB,QAAU10G,OAAS2kF,MAFvB,CAIA,IAAM,GAAI9uD,GAAI,CAAd,CAAiBA,IAAM8uD,MAAvB,CAA+B,EAAG9uD,CAAlC,CAAsC,CAElC,GAAIhuB,OAAQkqC,OAAQ/xC,OAAS61B,CAAjB,CAAZ,CAEA,GAAKhuB,QAAUkqC,OAAQ0iE,QAAU5+E,CAAlB,CAAV,EACDhuB,QAAUkqC,OAAQ2iE,QAAU7+E,CAAlB,CADd,CACsC,CAElC0+E,KAAO,IAAP,CACA,MAEH,CAEJ,CAEJ,CAtBD,IAsBO,CAEHA,KAAO,IAAP,CAEH,CAEJ,CAED;AAEA,GAAKA,IAAL,CAAY,CAER,GAAKhsG,IAAM+rG,UAAX,CAAwB,CAEpBjpG,MAAOipG,UAAP,EAAsBjpG,MAAO9C,CAAP,CAAtB,CAEA,GAAIosG,YAAapsG,EAAIo8E,MAArB,CACIiwB,YAAcN,WAAa3vB,MAD/B,CAGA,IAAM,GAAI9uD,GAAI,CAAd,CAAiBA,IAAM8uD,MAAvB,CAA+B,EAAG9uD,CAAlC,CAAsC,CAElCkc,OAAQ6iE,YAAc/+E,CAAtB,EAA4Bkc,OAAQ4iE,WAAa9+E,CAArB,CAA5B,CAEH,CAEJ,CAED,EAAGy+E,UAAH,CAEH,CAEJ,CAED;AAEA,GAAK98C,UAAY,CAAjB,CAAqB,CAEjBnsD,MAAOipG,UAAP,EAAsBjpG,MAAOmsD,SAAP,CAAtB,CAEA,IAAM,GAAIm9C,YAAan9C,UAAYmtB,MAA7B,CAAqCiwB,YAAcN,WAAa3vB,MAAhE,CAAwE9uD,EAAI,CAAlF,CAAqFA,IAAM8uD,MAA3F,CAAmG,EAAG9uD,CAAtG,CAA0G,CAEtGkc,OAAQ6iE,YAAc/+E,CAAtB,EAA4Bkc,OAAQ4iE,WAAa9+E,CAArB,CAA5B,CAEH,CAED,EAAGy+E,UAAH,CAEH,CAED,GAAKA,aAAejpG,MAAM1G,MAA1B,CAAmC,CAE/B,KAAK0G,KAAL,CAAaymG,eAAeC,UAAf,CAA2B1mG,KAA3B,CAAkC,CAAlC,CAAqCipG,UAArC,CAAb,CACA,KAAKviE,MAAL,CAAc+/D,eAAeC,UAAf,CAA2BhgE,MAA3B,CAAmC,CAAnC,CAAsCuiE,WAAa3vB,MAAnD,CAAd,CAEH,CAED,MAAO,KAAP,CAEH,CA9WmC,CAAxC,EAkXA;;;;;;;;OAUA,QAAS6uB,oBAAT,CAA8BvkF,IAA9B,CAAoC5jB,KAApC,CAA2C0mC,MAA3C,CAAmDvmC,aAAnD,CAAmE,CAE/DuiG,cAAcjjG,IAAd,CAAoB,IAApB,CAA0BmkB,IAA1B,CAAgC5jB,KAAhC,CAAuC0mC,MAAvC,CAA+CvmC,aAA/C,EAEH,CAEDgoG,oBAAoBpsG,SAApB,CAAgCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeymG,cAAc3mG,SAA7B,CAAf,CAAyD,CAErFI,YAAagsG,mBAFwE,CAIrFxF,cAAe,QAEf;AAEA;AARqF,CAAzD,CAAhC,CAYA;;;;;;OAQA,QAAS6G,cAAT,CAAwB5lF,IAAxB,CAA8BxkB,QAA9B,CAAwCqqG,MAAxC,CAAiD,CAE7C,KAAK7lF,IAAL,CAAYA,IAAZ,CACA,KAAK6lF,MAAL,CAAcA,MAAd,CACA,KAAKrqG,QAAL,CAAkBA,WAAa9N,SAAf,CAA6B8N,QAA7B,CAAwC,CAAE,CAA1D,CAEA,KAAK8O,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA;AACA,GAAK,KAAKxO,QAAL,CAAgB,CAArB,CAAyB,CAErB,KAAKsqG,aAAL,GAEH,CAED,KAAK7B,QAAL,GAEH,CAED7rG,OAAO4B,MAAP,CAAe4rG,aAAf,CAA8B,CAE1B3iE,MAAO,eAAWq1D,IAAX,CAAkB,CAErB,GAAIuN,QAAS,EAAb,CACIE,WAAazN,KAAKuN,MADtB,CAEIG,UAAY,KAAQ1N,KAAK2N,GAAL,EAAY,GAApB,CAFhB,CAIA,IAAM,GAAI3sG,GAAI,CAAR,CAAWkF,EAAIunG,WAAWrwG,MAAhC,CAAwC4D,IAAMkF,CAA9C,CAAiD,EAAGlF,CAApD,CAAwD,CAEpDusG,OAAO17G,IAAP,CAAa20G,cAAc77D,KAAd,CAAqB8iE,WAAYzsG,CAAZ,CAArB,EAAuCpH,KAAvC,CAA8C8zG,SAA9C,CAAb,EAEH,CAED,MAAO,IAAIJ,cAAJ,CAAmBtN,KAAKt4E,IAAxB,CAA8Bs4E,KAAK98F,QAAnC,CAA6CqqG,MAA7C,CAAP,CAEH,CAhByB,CAkB1BjlF,OAAQ,gBAAWslF,IAAX,CAAkB,CAEtB,GAAIL,QAAS,EAAb,CACIM,WAAaD,KAAKL,MADtB,CAGA,GAAIvN,MAAO,CAEP,OAAQ4N,KAAKlmF,IAFN,CAGP,WAAYkmF,KAAK1qG,QAHV,CAIP,SAAUqqG,MAJH,CAKP,OAAQK,KAAK57F,IALN,CAAX,CASA,IAAM,GAAIhR,GAAI,CAAR,CAAWkF,EAAI2nG,WAAWzwG,MAAhC,CAAwC4D,IAAMkF,CAA9C,CAAiD,EAAGlF,CAApD,CAAwD,CAEpDusG,OAAO17G,IAAP,CAAa20G,cAAcl+E,MAAd,CAAsBulF,WAAY7sG,CAAZ,CAAtB,CAAb,EAEH,CAED,MAAOg/F,KAAP,CAEH,CAxCyB,CA0C1B8N,8BAA+B,uCAAWpmF,IAAX,CAAiBqmF,mBAAjB,CAAsCJ,GAAtC,CAA2CK,MAA3C,CAAoD,CAE/E,GAAIC,iBAAkBF,oBAAoB3wG,MAA1C,CACA,GAAImwG,QAAS,EAAb,CAEA,IAAM,GAAIvsG,GAAI,CAAd,CAAiBA,EAAIitG,eAArB,CAAsCjtG,GAAtC,CAA6C,CAEzC,GAAI8C,OAAQ,EAAZ,CACA,GAAI0mC,QAAS,EAAb,CAEA1mC,MAAMjS,IAAN,CACI,CAAEmP,EAAIitG,eAAJ,CAAsB,CAAxB,EAA8BA,eADlC,CAEIjtG,CAFJ,CAGI,CAAEA,EAAI,CAAN,EAAYitG,eAHhB,EAKAzjE,OAAO34C,IAAP,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,EAEA,GAAIgnB,OAAQ0xF,eAAeS,gBAAf,CAAiClnG,KAAjC,CAAZ,CACAA,MAAQymG,eAAeW,WAAf,CAA4BpnG,KAA5B,CAAmC,CAAnC,CAAsC+U,KAAtC,CAAR,CACA2xB,OAAS+/D,eAAeW,WAAf,CAA4B1gE,MAA5B,CAAoC,CAApC,CAAuC3xB,KAAvC,CAAT,CAEA;AACA;AACA,GAAK,CAAEm1F,MAAF,EAAYlqG,MAAO,CAAP,IAAe,CAAhC,CAAoC,CAEhCA,MAAMjS,IAAN,CAAYo8G,eAAZ,EACAzjE,OAAO34C,IAAP,CAAa24C,OAAQ,CAAR,CAAb,EAEH,CAED+iE,OAAO17G,IAAP,CACI,GAAI82G,oBAAJ,CACI,0BAA4BoF,oBAAqB/sG,CAArB,EAAyB0mB,IAArD,CAA4D,GADhE,CAEI5jB,KAFJ,CAEW0mC,MAFX,EAGE5wC,KAHF,CAGS,IAAM+zG,GAHf,CADJ,EAMH,CAED,MAAO,IAAIL,cAAJ,CAAmB5lF,IAAnB,CAAyB,CAAE,CAA3B,CAA8B6lF,MAA9B,CAAP,CAEH,CAlFyB,CAoF1BW,WAAY,oBAAWC,iBAAX,CAA8BzmF,IAA9B,CAAqC,CAE7C,GAAI0mF,WAAYD,iBAAhB,CAEA,GAAK,CAAE/qG,MAAM63B,OAAN,CAAekzE,iBAAf,CAAP,CAA4C,CAExC,GAAI1nB,GAAI0nB,iBAAR,CACAC,UAAY3nB,EAAE55D,QAAF,EAAc45D,EAAE55D,QAAF,CAAWwhF,UAAzB,EAAuC5nB,EAAE4nB,UAArD,CAEH,CAED,IAAM,GAAIrtG,GAAI,CAAd,CAAiBA,EAAIotG,UAAUhxG,MAA/B,CAAuC4D,GAAvC,CAA8C,CAE1C,GAAKotG,UAAWptG,CAAX,EAAe0mB,IAAf,GAAwBA,IAA7B,CAAoC,CAEhC,MAAO0mF,WAAWptG,CAAX,CAAP,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CA3GyB,CA6G1BstG,oCAAqC,6CAAWniE,YAAX,CAAyBwhE,GAAzB,CAA8BK,MAA9B,CAAuC,CAExE,GAAIO,yBAA0B,EAA9B,CAEA;AACA;AACA,GAAIh7C,SAAU,oBAAd,CAEA;AACA;AACA,IAAM,GAAIvyD,GAAI,CAAR,CAAW6qB,GAAKsgB,aAAa/uC,MAAnC,CAA2C4D,EAAI6qB,EAA/C,CAAmD7qB,GAAnD,CAA0D,CAEtD,GAAIuxC,aAAcpG,aAAcnrC,CAAd,CAAlB,CACA,GAAIwtG,OAAQj8D,YAAY7qB,IAAZ,CAAiB1f,KAAjB,CAAwBurD,OAAxB,CAAZ,CAEA,GAAKi7C,OAASA,MAAMpxG,MAAN,CAAe,CAA7B,CAAiC,CAE7B,GAAIsqB,MAAO8mF,MAAO,CAAP,CAAX,CAEA,GAAIC,uBAAwBF,wBAAyB7mF,IAAzB,CAA5B,CACA,GAAK,CAAE+mF,qBAAP,CAA+B,CAE3BF,wBAAyB7mF,IAAzB,EAAkC+mF,sBAAwB,EAA1D,CAEH,CAEDA,sBAAsB58G,IAAtB,CAA4B0gD,WAA5B,EAEH,CAEJ,CAED,GAAIm8D,OAAQ,EAAZ,CAEA,IAAM,GAAIhnF,KAAV,GAAkB6mF,wBAAlB,CAA4C,CAExCG,MAAM78G,IAAN,CAAYy7G,cAAcQ,6BAAd,CAA6CpmF,IAA7C,CAAmD6mF,wBAAyB7mF,IAAzB,CAAnD,CAAoFimF,GAApF,CAAyFK,MAAzF,CAAZ,EAEH,CAED,MAAOU,MAAP,CAEH,CAvJyB,CAyJ1B;AACAC,eAAgB,wBAAW16B,SAAX,CAAsB/b,KAAtB,CAA8B,CAE1C,GAAK,CAAE+b,SAAP,CAAmB,CAEftgF,QAAQ+iB,KAAR,CAAe,uDAAf,EACA,MAAO,KAAP,CAEH,CAED,GAAIk4F,kBAAmB,QAAnBA,iBAAmB,CAAWhD,SAAX,CAAsBiD,SAAtB,CAAiCC,aAAjC,CAAgDC,YAAhD,CAA8DC,UAA9D,CAA2E,CAE9F;AACA,GAAKF,cAAc1xG,MAAd,GAAyB,CAA9B,CAAkC,CAE9B,GAAI0G,OAAQ,EAAZ,CACA,GAAI0mC,QAAS,EAAb,CAEA+/D,eAAec,WAAf,CAA4ByD,aAA5B,CAA2ChrG,KAA3C,CAAkD0mC,MAAlD,CAA0DukE,YAA1D,EAEA;AACA,GAAKjrG,MAAM1G,MAAN,GAAiB,CAAtB,CAA0B,CAEtB4xG,WAAWn9G,IAAX,CAAiB,GAAI+5G,UAAJ,CAAeiD,SAAf,CAA0B/qG,KAA1B,CAAiC0mC,MAAjC,CAAjB,EAEH,CAEJ,CAEJ,CAnBD,CAqBA,GAAI+iE,QAAS,EAAb,CAEA,GAAI0B,UAAWh7B,UAAUvsD,IAAV,EAAkB,SAAjC,CACA;AACA,GAAIxkB,UAAW+wE,UAAU72E,MAAV,EAAoB,CAAE,CAArC,CACA,GAAIuwG,KAAM15B,UAAU05B,GAAV,EAAiB,EAA3B,CAEA,GAAIuB,iBAAkBj7B,UAAUk7B,SAAV,EAAuB,EAA7C,CAEA,IAAM,GAAIrvF,GAAI,CAAd,CAAiBA,EAAIovF,gBAAgB9xG,MAArC,CAA6C0iB,GAA7C,CAAoD,CAEhD,GAAIgvF,eAAgBI,gBAAiBpvF,CAAjB,EAAqBnpB,IAAzC,CAEA;AACA,GAAK,CAAEm4G,aAAF,EAAmBA,cAAc1xG,MAAd,GAAyB,CAAjD,CAAqD,SAErD;AACA,GAAK0xG,cAAe,CAAf,EAAmB3iE,YAAxB,CAAuC,CAEnC;AACA,GAAIijE,kBAAmB,EAAvB,CAEA,IAAM,GAAIxqG,GAAI,CAAd,CAAiBA,EAAIkqG,cAAc1xG,MAAnC,CAA2CwH,GAA3C,CAAkD,CAE9C,GAAKkqG,cAAelqG,CAAf,EAAmBunC,YAAxB,CAAuC,CAEnC,IAAM,GAAIxmC,GAAI,CAAd,CAAiBA,EAAImpG,cAAelqG,CAAf,EAAmBunC,YAAnB,CAAgC/uC,MAArD,CAA6DuI,GAA7D,CAAoE,CAEhEypG,iBAAkBN,cAAelqG,CAAf,EAAmBunC,YAAnB,CAAiCxmC,CAAjC,CAAlB,EAA2D,CAAE,CAA7D,CAEH,CAEJ,CAEJ,CAED;AACA;AACA;AACA,IAAM,GAAI0pG,gBAAV,GAA6BD,iBAA7B,CAAgD,CAE5C,GAAItrG,OAAQ,EAAZ,CACA,GAAI0mC,QAAS,EAAb,CAEA,IAAM,GAAI7kC,GAAI,CAAd,CAAiBA,IAAMmpG,cAAelqG,CAAf,EAAmBunC,YAAnB,CAAgC/uC,MAAvD,CAA+D,EAAGuI,CAAlE,CAAsE,CAElE,GAAI2pG,cAAeR,cAAelqG,CAAf,CAAnB,CAEAd,MAAMjS,IAAN,CAAYy9G,aAAanuG,IAAzB,EACAqpC,OAAO34C,IAAP,CAAey9G,aAAa/8D,WAAb,GAA6B88D,eAA/B,CAAmD,CAAnD,CAAuD,CAApE,EAEH,CAED9B,OAAO17G,IAAP,CAAa,GAAI82G,oBAAJ,CAAyB,yBAA2B0G,eAA3B,CAA6C,GAAtE,CAA2EvrG,KAA3E,CAAkF0mC,MAAlF,CAAb,EAEH,CAEDtnC,SAAWksG,iBAAiBhyG,MAAjB,EAA4BuwG,KAAO,GAAnC,CAAX,CAEH,CA1CD,IA0CO,CAEH;AAEA,GAAI4B,UAAW,UAAYr3C,MAAOp4C,CAAP,EAAW4H,IAAvB,CAA8B,GAA7C,CAEAknF,iBACI3C,mBADJ,CACyBsD,SAAW,WADpC,CAEIT,aAFJ,CAEmB,KAFnB,CAE0BvB,MAF1B,EAIAqB,iBACIpG,uBADJ,CAC6B+G,SAAW,aADxC,CAEIT,aAFJ,CAEmB,KAFnB,CAE0BvB,MAF1B,EAIAqB,iBACI3C,mBADJ,CACyBsD,SAAW,QADpC,CAEIT,aAFJ,CAEmB,KAFnB,CAE0BvB,MAF1B,EAIH,CAEJ,CAED,GAAKA,OAAOnwG,MAAP,GAAkB,CAAvB,CAA2B,CAEvB,MAAO,KAAP,CAEH,CAED,GAAIwwG,MAAO,GAAIN,cAAJ,CAAmB2B,QAAnB,CAA6B/rG,QAA7B,CAAuCqqG,MAAvC,CAAX,CAEA,MAAOK,KAAP,CAEH,CAnRyB,CAA9B,EAuRA9tG,OAAO4B,MAAP,CAAe4rG,cAAcztG,SAA7B,CAAwC,CAEpC2tG,cAAe,wBAAY,CAEvB,GAAID,QAAS,KAAKA,MAAlB,CAA0BrqG,SAAW,CAArC,CAEA,IAAM,GAAIlC,GAAI,CAAR,CAAWkF,EAAIqnG,OAAOnwG,MAA5B,CAAoC4D,IAAMkF,CAA1C,CAA6C,EAAGlF,CAAhD,CAAoD,CAEhD,GAAI8qG,OAAQ,KAAKyB,MAAL,CAAavsG,CAAb,CAAZ,CAEAkC,SAAWxQ,KAAK8G,GAAL,CAAU0J,QAAV,CAAoB4oG,MAAMhoG,KAAN,CAAagoG,MAAMhoG,KAAN,CAAY1G,MAAZ,CAAqB,CAAlC,CAApB,CAAX,CAEH,CAED,KAAK8F,QAAL,CAAgBA,QAAhB,CAEH,CAhBmC,CAkBpC+yD,KAAM,eAAY,CAEd,IAAM,GAAIj1D,GAAI,CAAd,CAAiBA,EAAI,KAAKusG,MAAL,CAAYnwG,MAAjC,CAAyC4D,GAAzC,CAAgD,CAE5C,KAAKusG,MAAL,CAAavsG,CAAb,EAAiBi1D,IAAjB,CAAuB,CAAvB,CAA0B,KAAK/yD,QAA/B,EAEH,CAED,MAAO,KAAP,CAEH,CA5BmC,CA8BpCyoG,SAAU,mBAAY,CAElB,IAAM,GAAI3qG,GAAI,CAAd,CAAiBA,EAAI,KAAKusG,MAAL,CAAYnwG,MAAjC,CAAyC4D,GAAzC,CAAgD,CAE5C,KAAKusG,MAAL,CAAavsG,CAAb,EAAiB2qG,QAAjB,GAEH,CAED,MAAO,KAAP,CAEH,CAxCmC,CAAxC,EA4CA;;OAIA,QAAS6D,eAAT,CAAyB3U,OAAzB,CAAmC,CAE/B,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CACA,KAAKjyE,QAAL,CAAgB,EAAhB,CAEH,CAED3oB,OAAO4B,MAAP,CAAe8tG,eAAe3vG,SAA9B,CAAyC,CAErCi7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAI/hG,OAAQ,IAAZ,CAEA,GAAIglG,QAAS,GAAIpC,WAAJ,CAAgB5iG,MAAM6iG,OAAtB,CAAb,CACAmC,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAWqsE,IAAX,CAAkB,CAEhCmE,OAAQ7hG,MAAM2yC,KAAN,CAAab,KAAKa,KAAL,CAAY+qD,IAAZ,CAAb,CAAR,EAEH,CAJD,CAIGoE,UAJH,CAIeC,OAJf,EAMH,CAboC,CAerC0V,YAAa,qBAAWnvG,KAAX,CAAmB,CAE5B,KAAKmoB,QAAL,CAAgBnoB,KAAhB,CAEH,CAnBoC,CAqBrCqqC,MAAO,eAAWq1D,IAAX,CAAkB,CAErB,GAAIv3E,UAAW,KAAKA,QAApB,CAEA,QAASinF,WAAT,CAAqBhoF,IAArB,CAA4B,CAExB,GAAKe,SAAUf,IAAV,IAAqBtyB,SAA1B,CAAsC,CAElCzB,QAAQgK,IAAR,CAAc,yCAAd,CAAyD+pB,IAAzD,EAEH,CAED,MAAOe,UAAUf,IAAV,CAAP,CAEH,CAED,GAAI0iB,UAAW,GAAIovD,WAAWwG,KAAKjlG,IAAhB,CAAJ,EAAf,CAEA,GAAKilG,KAAKhuF,IAAL,GAAc5c,SAAnB,CAA+Bg1C,SAASp4B,IAAT,CAAgBguF,KAAKhuF,IAArB,CAC/B,GAAKguF,KAAKt4E,IAAL,GAActyB,SAAnB,CAA+Bg1C,SAAS1iB,IAAT,CAAgBs4E,KAAKt4E,IAArB,CAC/B,GAAKs4E,KAAK9uG,KAAL,GAAekE,SAApB,CAAgCg1C,SAASl5C,KAAT,CAAemqC,MAAf,CAAuB2kE,KAAK9uG,KAA5B,EAChC,GAAK8uG,KAAKl+D,SAAL,GAAmB1sC,SAAxB,CAAoCg1C,SAAStI,SAAT,CAAqBk+D,KAAKl+D,SAA1B,CACpC,GAAKk+D,KAAKj+D,SAAL,GAAmB3sC,SAAxB,CAAoCg1C,SAASrI,SAAT,CAAqBi+D,KAAKj+D,SAA1B,CACpC,GAAKi+D,KAAKv+D,QAAL,GAAkBrsC,SAAvB,CAAmCg1C,SAAS3I,QAAT,CAAkBpG,MAAlB,CAA0B2kE,KAAKv+D,QAA/B,EACnC,GAAKu+D,KAAKr+D,QAAL,GAAkBvsC,SAAvB,CAAmCg1C,SAASzI,QAAT,CAAkBtG,MAAlB,CAA0B2kE,KAAKr+D,QAA/B,EACnC,GAAKq+D,KAAKp+D,SAAL,GAAmBxsC,SAAxB,CAAoCg1C,SAASxI,SAAT,CAAqBo+D,KAAKp+D,SAA1B,CACpC,GAAKo+D,KAAKl9D,SAAL,GAAmB1tC,SAAxB,CAAoCg1C,SAAStH,SAAT,CAAqBk9D,KAAKl9D,SAA1B,CACpC,GAAKk9D,KAAKj9D,kBAAL,GAA4B3tC,SAAjC,CAA6Cg1C,SAASrH,kBAAT,CAA8Bi9D,KAAKj9D,kBAAnC,CAC7C,GAAKi9D,KAAKtlE,QAAL,GAAkBtlC,SAAvB,CAAmCg1C,SAAS1P,QAAT,CAAoBslE,KAAKtlE,QAAzB,CACnC,GAAKslE,KAAK1+D,YAAL,GAAsBlsC,SAA3B,CAAuCg1C,SAAS9I,YAAT,CAAwB0+D,KAAK1+D,YAA7B,CACvC,GAAK0+D,KAAKz+D,cAAL,GAAwBnsC,SAA7B,CAAyCg1C,SAAS7I,cAAT,CAA0By+D,KAAKz+D,cAA/B,CACzC,GAAKy+D,KAAKn0D,YAAL,GAAsBz2C,SAA3B,CAAuCg1C,SAASyB,YAAT,CAAwBm0D,KAAKn0D,YAA7B,CACvC,GAAKm0D,KAAKxgE,GAAL,GAAapqC,SAAlB,CAA8Bg1C,SAAS5K,GAAT,CAAewgE,KAAKxgE,GAApB,CAC9B,GAAKwgE,KAAKvuG,WAAL,GAAqB2D,SAA1B,CAAsCg1C,SAAS34C,WAAT,CAAuBuuG,KAAKvuG,WAA5B,CACtC,GAAKuuG,KAAKhnD,QAAL,GAAkB5jD,SAAvB,CAAmCg1C,SAAS4O,QAAT,CAAoBgnD,KAAKhnD,QAAzB,CACnC,GAAKgnD,KAAK/mD,IAAL,GAAc7jD,SAAnB,CAA+Bg1C,SAAS6O,IAAT,CAAgB+mD,KAAK/mD,IAArB,CAC/B,GAAK+mD,KAAK5iE,OAAL,GAAiBhoC,SAAtB,CAAkCg1C,SAAShN,OAAT,CAAmB4iE,KAAK5iE,OAAxB,CAClC,GAAK4iE,KAAK9mD,WAAL,GAAqB9jD,SAA1B,CAAsCg1C,SAAS8O,WAAT,CAAuB8mD,KAAK9mD,WAA5B,CACtC,GAAK8mD,KAAK3lD,SAAL,GAAmBjlD,SAAxB,CAAoCg1C,SAASiQ,SAAT,CAAqB2lD,KAAK3lD,SAA1B,CACpC,GAAK2lD,KAAKtmD,SAAL,GAAmBtkD,SAAxB,CAAoCg1C,SAASsP,SAAT,CAAqBsmD,KAAKtmD,SAA1B,CACpC,GAAKsmD,KAAKrmD,UAAL,GAAoBvkD,SAAzB,CAAqCg1C,SAASuP,UAAT,CAAsBqmD,KAAKrmD,UAA3B,CACrC,GAAKqmD,KAAKhmD,UAAL,GAAoB5kD,SAAzB,CAAqCg1C,SAAS4P,UAAT,CAAsBgmD,KAAKhmD,UAA3B,CACrC,GAAKgmD,KAAK9kD,SAAL,GAAmB9lD,SAAxB,CAAoCg1C,SAAS8Q,SAAT,CAAqB8kD,KAAK9kD,SAA1B,CACpC,GAAK8kD,KAAK7kD,kBAAL,GAA4B/lD,SAAjC,CAA6Cg1C,SAAS+Q,kBAAT,CAA8B6kD,KAAK7kD,kBAAnC,CAC7C,GAAK6kD,KAAK5kD,gBAAL,GAA0BhmD,SAA/B,CAA2Cg1C,SAASgR,gBAAT,CAA4B4kD,KAAK5kD,gBAAjC,CAC3C,GAAK4kD,KAAK3kD,iBAAL,GAA2BjmD,SAAhC,CAA4Cg1C,SAASiR,iBAAT,CAA6B2kD,KAAK3kD,iBAAlC,CAE5C,GAAK2kD,KAAKpuG,QAAL,GAAkBwD,SAAvB,CAAmCg1C,SAASx4C,QAAT,CAAoBouG,KAAKpuG,QAAzB,CAEnC,GAAKouG,KAAKhlD,SAAL,GAAmB,CAAxB,CAA4B5Q,SAAS4Q,SAAT,CAAqBglD,KAAKhlD,SAA1B,CAC5B,GAAKglD,KAAK99D,QAAL,GAAkB9sC,SAAvB,CAAmCg1C,SAASlI,QAAT,CAAoB89D,KAAK99D,QAAzB,CACnC,GAAK89D,KAAK/kD,OAAL,GAAiB7lD,SAAtB,CAAkCg1C,SAAS6Q,OAAT,CAAmB+kD,KAAK/kD,OAAxB,CAClC,GAAK+kD,KAAKpmG,KAAL,GAAexE,SAApB,CAAgCg1C,SAASxwC,KAAT,CAAiBomG,KAAKpmG,KAAtB,CAEhC,GAAKomG,KAAK/lD,aAAL,GAAuB7kD,SAA5B,CAAwCg1C,SAAS6P,aAAT,CAAyB+lD,KAAK/lD,aAA9B,CACxC,GAAK+lD,KAAK9lD,mBAAL,GAA6B9kD,SAAlC,CAA8Cg1C,SAAS8P,mBAAT,CAA+B8lD,KAAK9lD,mBAApC,CAC9C,GAAK8lD,KAAK7lD,kBAAL,GAA4B/kD,SAAjC,CAA6Cg1C,SAAS+P,kBAAT,CAA8B6lD,KAAK7lD,kBAAnC,CAE7C,GAAK6lD,KAAK1kD,QAAL,GAAkBlmD,SAAvB,CAAmCg1C,SAASkR,QAAT,CAAoB0kD,KAAK1kD,QAAzB,CACnC,GAAK0kD,KAAK7zD,YAAL,GAAsB/2C,SAA3B,CAAuCg1C,SAAS+B,YAAT,CAAwB6zD,KAAK7zD,YAA7B,CACvC,GAAK6zD,KAAK5lD,SAAL,GAAmBhlD,SAAxB,CAAoCg1C,SAASgQ,SAAT,CAAqB4lD,KAAK5lD,SAA1B,CAEpC,GAAK4lD,KAAKv4D,OAAL,GAAiBryC,SAAtB,CAAkCg1C,SAAS3C,OAAT,CAAmBu4D,KAAKv4D,OAAxB,CAClC,GAAKu4D,KAAKp4D,QAAL,GAAkBxyC,SAAvB,CAAmCg1C,SAASxC,QAAT,CAAoBo4D,KAAKp4D,QAAzB,CAEnC;AAEA,GAAKo4D,KAAK2P,OAAL,GAAiBv6G,SAAtB,CAAkCg1C,SAAS34C,WAAT,CAAuBuuG,KAAK2P,OAAL,GAAiB,CAAxC,CAA2C;AAE7E;AAEA,GAAK3P,KAAKh0E,IAAL,GAAc52B,SAAnB,CAA+Bg1C,SAASpe,IAAT,CAAgBg0E,KAAKh0E,IAArB,CAC/B,GAAKg0E,KAAKjlD,eAAL,GAAyB3lD,SAA9B,CAA0Cg1C,SAAS2Q,eAAT,CAA2BilD,KAAKjlD,eAAhC,CAE1C;AAEA,GAAKilD,KAAK3iE,GAAL,GAAajoC,SAAlB,CAA8Bg1C,SAAS/M,GAAT,CAAeqyE,WAAY1P,KAAK3iE,GAAjB,CAAf,CAE9B,GAAK2iE,KAAKziE,QAAL,GAAkBnoC,SAAvB,CAAmC,CAE/Bg1C,SAAS7M,QAAT,CAAoBmyE,WAAY1P,KAAKziE,QAAjB,CAApB,CACA6M,SAAS8O,WAAT,CAAuB,IAAvB,CAEH,CAED,GAAK8mD,KAAKvhE,OAAL,GAAiBrpC,SAAtB,CAAkCg1C,SAAS3L,OAAT,CAAmBixE,WAAY1P,KAAKvhE,OAAjB,CAAnB,CAClC,GAAKuhE,KAAKthE,SAAL,GAAmBtpC,SAAxB,CAAoCg1C,SAAS1L,SAAT,CAAqBshE,KAAKthE,SAA1B,CAEpC,GAAKshE,KAAKphE,SAAL,GAAmBxpC,SAAxB,CAAoCg1C,SAASxL,SAAT,CAAqB8wE,WAAY1P,KAAKphE,SAAjB,CAArB,CACpC,GAAKohE,KAAKnhE,WAAL,GAAqBzpC,SAA1B,CAAsC,CAElC,GAAIypC,aAAcmhE,KAAKnhE,WAAvB,CAEA,GAAKz7B,MAAM63B,OAAN,CAAe4D,WAAf,IAAiC,KAAtC,CAA8C,CAE1C;AAEAA,YAAc,CAAEA,WAAF,CAAeA,WAAf,CAAd,CAEH,CAEDuL,SAASvL,WAAT,CAAuB,GAAIpjC,QAAJ,GAAcwa,SAAd,CAAyB4oB,WAAzB,CAAvB,CAEH,CAED,GAAKmhE,KAAKjhE,eAAL,GAAyB3pC,SAA9B,CAA0Cg1C,SAASrL,eAAT,CAA2B2wE,WAAY1P,KAAKjhE,eAAjB,CAA3B,CAC1C,GAAKihE,KAAKhhE,iBAAL,GAA2B5pC,SAAhC,CAA4Cg1C,SAASpL,iBAAT,CAA6BghE,KAAKhhE,iBAAlC,CAC5C,GAAKghE,KAAK/gE,gBAAL,GAA0B7pC,SAA/B,CAA2Cg1C,SAASnL,gBAAT,CAA4B+gE,KAAK/gE,gBAAjC,CAE3C,GAAK+gE,KAAK7gE,YAAL,GAAsB/pC,SAA3B,CAAuCg1C,SAASjL,YAAT,CAAwBuwE,WAAY1P,KAAK7gE,YAAjB,CAAxB,CACvC,GAAK6gE,KAAK3gE,YAAL,GAAsBjqC,SAA3B,CAAuCg1C,SAAS/K,YAAT,CAAwBqwE,WAAY1P,KAAK3gE,YAAjB,CAAxB,CAEvC,GAAK2gE,KAAKzhE,WAAL,GAAqBnpC,SAA1B,CAAsCg1C,SAAS7L,WAAT,CAAuBmxE,WAAY1P,KAAKzhE,WAAjB,CAAvB,CACtC,GAAKyhE,KAAKllD,iBAAL,GAA2B1lD,SAAhC,CAA4Cg1C,SAAS0Q,iBAAT,CAA6BklD,KAAKllD,iBAAlC,CAE5C,GAAKklD,KAAKviE,WAAL,GAAqBroC,SAA1B,CAAsCg1C,SAAS3M,WAAT,CAAuBiyE,WAAY1P,KAAKviE,WAAjB,CAAvB,CAEtC,GAAKuiE,KAAKriE,MAAL,GAAgBvoC,SAArB,CAAiCg1C,SAASzM,MAAT,CAAkB+xE,WAAY1P,KAAKriE,MAAjB,CAAlB,CAEjC,GAAKqiE,KAAKniE,YAAL,GAAsBzoC,SAA3B,CAAuCg1C,SAASvM,YAAT,CAAwBmiE,KAAKniE,YAA7B,CAEvC,GAAKmiE,KAAK5hE,QAAL,GAAkBhpC,SAAvB,CAAmCg1C,SAAShM,QAAT,CAAoBsxE,WAAY1P,KAAK5hE,QAAjB,CAApB,CACnC,GAAK4hE,KAAK3hE,iBAAL,GAA2BjpC,SAAhC,CAA4Cg1C,SAAS/L,iBAAT,CAA6B2hE,KAAK3hE,iBAAlC,CAE5C,GAAK2hE,KAAK/hE,KAAL,GAAe7oC,SAApB,CAAgCg1C,SAASnM,KAAT,CAAiByxE,WAAY1P,KAAK/hE,KAAjB,CAAjB,CAChC,GAAK+hE,KAAK9hE,cAAL,GAAwB9oC,SAA7B,CAAyCg1C,SAASlM,cAAT,CAA0B8hE,KAAK9hE,cAA/B,CAEzC,GAAK8hE,KAAKzgE,WAAL,GAAqBnqC,SAA1B,CAAsCg1C,SAAS7K,WAAT,CAAuBmwE,WAAY1P,KAAKzgE,WAAjB,CAAvB,CAEtC,MAAO6K,SAAP,CAEH,CAxJoC,CAAzC,EA4JA;;OAIA,QAASwlE,qBAAT,CAA+B/U,OAA/B,CAAyC,CAErC,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEH,CAED56F,OAAO4B,MAAP,CAAekuG,qBAAqB/vG,SAApC,CAA+C,CAE3Ci7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAI/hG,OAAQ,IAAZ,CAEA,GAAIglG,QAAS,GAAIpC,WAAJ,CAAgB5iG,MAAM6iG,OAAtB,CAAb,CACAmC,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAWqsE,IAAX,CAAkB,CAEhCmE,OAAQ7hG,MAAM2yC,KAAN,CAAab,KAAKa,KAAL,CAAY+qD,IAAZ,CAAb,CAAR,EAEH,CAJD,CAIGoE,UAJH,CAIeC,OAJf,EAMH,CAb0C,CAe3CpvD,MAAO,eAAWq1D,IAAX,CAAkB,CAErB,GAAInzE,UAAW,GAAIuoB,eAAJ,EAAf,CAEA,GAAIjtC,OAAQ63F,KAAKxsG,IAAL,CAAU2U,KAAtB,CAEA,GAAKA,QAAU/S,SAAf,CAA2B,CAEvB,GAAIy6G,YAAa,GAAIC,cAAc3nG,MAAMpN,IAApB,CAAJ,CAAgCoN,MAAMQ,KAAtC,CAAjB,CACAkkB,SAAS2oB,QAAT,CAAmB,GAAI7C,gBAAJ,CAAqBk9D,UAArB,CAAiC,CAAjC,CAAnB,EAEH,CAED,GAAI5iF,YAAa+yE,KAAKxsG,IAAL,CAAUy5B,UAA3B,CAEA,IAAM,GAAIwd,IAAV,GAAiBxd,WAAjB,CAA8B,CAE1B,GAAI7W,WAAY6W,WAAYwd,GAAZ,CAAhB,CACA,GAAIolE,YAAa,GAAIC,cAAc15F,UAAUrb,IAAxB,CAAJ,CAAoCqb,UAAUzN,KAA9C,CAAjB,CAEAkkB,SAAS4oB,YAAT,CAAuBhL,GAAvB,CAA4B,GAAIkI,gBAAJ,CAAqBk9D,UAArB,CAAiCz5F,UAAUw8B,QAA3C,CAAqDx8B,UAAUy8B,UAA/D,CAA5B,EAEH,CAED,GAAI7E,QAASgyD,KAAKxsG,IAAL,CAAUw6C,MAAV,EAAoBgyD,KAAKxsG,IAAL,CAAUu8G,SAA9B,EAA2C/P,KAAKxsG,IAAL,CAAUw8G,OAAlE,CAEA,GAAKhiE,SAAW54C,SAAhB,CAA4B,CAExB,IAAM,GAAI4L,GAAI,CAAR,CAAWkF,EAAI8nC,OAAO5wC,MAA5B,CAAoC4D,IAAMkF,CAA1C,CAA6C,EAAGlF,CAAhD,CAAoD,CAEhD,GAAIitC,OAAQD,OAAQhtC,CAAR,CAAZ,CAEA6rB,SAAS+oB,QAAT,CAAmB3H,MAAMt5C,KAAzB,CAAgCs5C,MAAM7xB,KAAtC,CAA6C6xB,MAAMtC,aAAnD,EAEH,CAEJ,CAED,GAAI1Y,gBAAiB+sE,KAAKxsG,IAAL,CAAUy/B,cAA/B,CAEA,GAAKA,iBAAmB79B,SAAxB,CAAoC,CAEhC,GAAI+K,QAAS,GAAI7K,QAAJ,EAAb,CAEA,GAAK29B,eAAe9yB,MAAf,GAA0B/K,SAA/B,CAA2C,CAEvC+K,OAAO8V,SAAP,CAAkBgd,eAAe9yB,MAAjC,EAEH,CAED0sB,SAASoG,cAAT,CAA0B,GAAItE,OAAJ,CAAYxuB,MAAZ,CAAoB8yB,eAAet5B,MAAnC,CAA1B,CAEH,CAED,MAAOkzB,SAAP,CAEH,CAvE0C,CAA/C,EA2EA,GAAIijF,cAAe,CACf9qE,UAAWA,SADI,CAEfE,WAAYA,UAFG,CAGf;AACA8O,kBAAmB,MAAOA,kBAAP,GAA6B,WAA7B,CAA2CA,iBAA3C,CAA+D9O,UAJnE,CAKfR,WAAYA,UALG,CAMfF,YAAaA,WANE,CAOfM,WAAYA,UAPG,CAQfF,YAAaA,WARE,CASfN,aAAcA,YATC,CAUfC,aAAcA,YAVC,CAAnB,CAaA;;OAIA,QAAS0rE,OAAT,EAAkB,CAAE,CAEpBA,OAAOC,QAAP,CAAkB,CAEdC,SAAU,EAFI,CAId3/G,IAAK,aAAW4/G,KAAX,CAAkBpT,MAAlB,CAA2B,CAE5B,KAAKmT,QAAL,CAAct+G,IAAd,CAAoBu+G,KAApB,CAA2BpT,MAA3B,EAEH,CARa,CAUd58F,IAAK,aAAWu5F,IAAX,CAAkB,CAEnB,GAAIwW,UAAW,KAAKA,QAApB,CAEA,IAAM,GAAInvG,GAAI,CAAR,CAAW6H,EAAIsnG,SAAS/yG,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAAK,CAAlD,CAAsD,CAElD,GAAIovG,OAAQD,SAAUnvG,CAAV,CAAZ,CACA,GAAIg8F,QAASmT,SAAUnvG,EAAI,CAAd,CAAb,CAEA,GAAKovG,MAAMvpE,IAAN,CAAY8yD,IAAZ,CAAL,CAA0B,CAEtB,MAAOqD,OAAP,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CA7Ba,CAAlB,CAiCAl9F,OAAO4B,MAAP,CAAeuuG,OAAOpwG,SAAtB,CAAiC,CAE7B49F,YAAaroG,SAFgB,CAI7Bi7G,YAAa,sBAAY,CAAE,CAJE,CAM7BC,eAAgB,yBAAY,CAAE,CAND,CAQ7BC,eAAgB,yBAAY,CAAE,CARD,CAU7BC,cAAe,uBAAW5mE,SAAX,CAAsB6mE,WAAtB,CAAmChT,WAAnC,CAAiD,CAE5D,GAAI90F,OAAQ,EAAZ,CAEA,IAAM,GAAI3H,GAAI,CAAd,CAAiBA,EAAI4oC,UAAUxsC,MAA/B,CAAuC,EAAG4D,CAA1C,CAA8C,CAE1C2H,MAAO3H,CAAP,EAAa,KAAK0vG,cAAL,CAAqB9mE,UAAW5oC,CAAX,CAArB,CAAqCyvG,WAArC,CAAkDhT,WAAlD,CAAb,CAEH,CAED,MAAO90F,MAAP,CAEH,CAtB4B,CAwB7B+nG,eAAkB,UAAY,CAE1B,GAAIC,cAAe,CACf5mG,WAAYA,UADG,CAEfC,eAAgBA,cAFD,CAGfC,iBAAkBA,gBAHH,CAIfC,oBAAqBA,mBAJN,CAKfC,iBAAkBA,gBALH,CAMfC,eAAgBA,cAND,CAAnB,CASA,GAAIlZ,OAAQ,GAAIiqC,MAAJ,EAAZ,CACA,GAAIy1E,eAAgB,GAAI3S,cAAJ,EAApB,CACA,GAAI4S,gBAAiB,GAAIrB,eAAJ,EAArB,CAEA,MAAO,SAASkB,eAAT,CAAyB/qG,CAAzB,CAA4B8qG,WAA5B,CAAyChT,WAAzC,CAAuD,CAE1D;AAEA,GAAIh1E,UAAW,EAAf,CAEA,QAASw0E,YAAT,CAAsBltC,IAAtB,CAA4BlsD,MAA5B,CAAoCpL,MAApC,CAA4C0wB,IAA5C,CAAkD3B,UAAlD,CAA+D,CAE3D,GAAIspF,UAAWL,YAAc1gD,IAA7B,CACA,GAAIitC,QAASiT,OAAOC,QAAP,CAAgB9vG,GAAhB,CAAqB0wG,QAArB,CAAb,CAEA,GAAIzmF,QAAJ,CAEA,GAAK2yE,SAAW,IAAhB,CAAuB,CAEnB3yE,QAAU2yE,OAAOlC,IAAP,CAAagW,QAAb,CAAV,CAEH,CAJD,IAIO,CAEHF,cAAc9S,cAAd,CAA8BL,WAA9B,EACApzE,QAAUumF,cAAc9V,IAAd,CAAoBgW,QAApB,CAAV,CAEH,CAED,GAAKjtG,SAAWzO,SAAhB,CAA4B,CAExBi1B,QAAQxmB,MAAR,CAAeoS,SAAf,CAA0BpS,MAA1B,EAEA,GAAKA,OAAQ,CAAR,IAAgB,CAArB,CAAyBwmB,QAAQlD,KAAR,CAAgBta,cAAhB,CACzB,GAAKhJ,OAAQ,CAAR,IAAgB,CAArB,CAAyBwmB,QAAQjD,KAAR,CAAgBva,cAAhB,CAE5B,CAED,GAAKpU,SAAWrD,SAAhB,CAA4B,CAExBi1B,QAAQ5xB,MAAR,CAAewd,SAAf,CAA0Bxd,MAA1B,EAEH,CAED,GAAK0wB,OAAS/zB,SAAd,CAA0B,CAEtB,GAAK+zB,KAAM,CAAN,IAAc,QAAnB,CAA8BkB,QAAQlD,KAAR,CAAgBta,cAAhB,CAC9B,GAAKsc,KAAM,CAAN,IAAc,QAAnB,CAA8BkB,QAAQlD,KAAR,CAAgBpa,sBAAhB,CAE9B,GAAKoc,KAAM,CAAN,IAAc,QAAnB,CAA8BkB,QAAQjD,KAAR,CAAgBva,cAAhB,CAC9B,GAAKsc,KAAM,CAAN,IAAc,QAAnB,CAA8BkB,QAAQjD,KAAR,CAAgBra,sBAAhB,CAEjC,CAED,GAAKya,aAAepyB,SAApB,CAAgC,CAE5Bi1B,QAAQ7C,UAAR,CAAqBA,UAArB,CAEH,CAED,GAAIxV,MAAOT,MAAMG,YAAN,EAAX,CAEA+W,SAAUzW,IAAV,EAAmBqY,OAAnB,CAEA,MAAOrY,KAAP,CAEH,CAED;AAEA,GAAIguF,MAAO,CACPhuF,KAAMT,MAAMG,YAAN,EADC,CAEP3W,KAAM,qBAFC,CAAX,CAKA,IAAM,GAAI2sB,KAAV,GAAkB/hB,EAAlB,CAAsB,CAElB,GAAIrF,OAAQqF,EAAG+hB,IAAH,CAAZ,CAEA,OAASA,IAAT,EAEI,IAAK,UAAL,CACA,IAAK,UAAL,CACA,IAAK,gBAAL,CACA,IAAK,cAAL,CACI,MACJ,IAAK,SAAL,CACIs4E,KAAKt4E,IAAL,CAAYpnB,KAAZ,CACA,MACJ,IAAK,UAAL,CACI0/F,KAAKhnD,QAAL,CAAgB23D,aAAcrwG,KAAd,CAAhB,CACA,MACJ,IAAK,cAAL,CACA,IAAK,YAAL,CACI3M,QAAQgK,IAAR,CAAc,8BAAd,CAA8C+pB,IAA9C,CAAoD,yBAApD,EACA,MACJ,IAAK,cAAL,CACIs4E,KAAK9uG,KAAL,CAAaA,MAAM+kB,SAAN,CAAiB3V,KAAjB,EAAyBg8B,MAAzB,EAAb,CACA,MACJ,IAAK,eAAL,CACI0jE,KAAKr+D,QAAL,CAAgBzwC,MAAM+kB,SAAN,CAAiB3V,KAAjB,EAAyBg8B,MAAzB,EAAhB,CACA,MACJ,IAAK,eAAL,CACI0jE,KAAKv+D,QAAL,CAAgBvwC,MAAM+kB,SAAN,CAAiB3V,KAAjB,EAAyBg8B,MAAzB,EAAhB,CACA,MACJ,IAAK,cAAL,CACI0jE,KAAKp+D,SAAL,CAAiBthC,KAAjB,CACA,MACJ,IAAK,SAAL,CACI,GAAKA,MAAMm7F,WAAN,KAAwB,OAA7B,CAAuCuE,KAAKjlG,IAAL,CAAY,mBAAZ,CACvC,GAAKuF,MAAMm7F,WAAN,KAAwB,OAA7B,CAAuCuE,KAAKjlG,IAAL,CAAY,mBAAZ,CACvC,GAAKuF,MAAMm7F,WAAN,KAAwB,UAA7B,CAA0CuE,KAAKjlG,IAAL,CAAY,sBAAZ,CAC1C,MACJ,IAAK,YAAL,CACIilG,KAAK3iE,GAAL,CAAW4/D,YAAa38F,KAAb,CAAoBqF,EAAEorG,gBAAtB,CAAwCprG,EAAEqrG,gBAA1C,CAA4DrrG,EAAEsrG,cAA9D,CAA8EtrG,EAAEurG,oBAAhF,CAAX,CACA,MACJ,IAAK,kBAAL,CACA,IAAK,kBAAL,CACA,IAAK,gBAAL,CACA,IAAK,sBAAL,CACI,MACJ,IAAK,aAAL,CACIlR,KAAKzhE,WAAL,CAAmB0+D,YAAa38F,KAAb,CAAoBqF,EAAEwrG,iBAAtB,CAAyCxrG,EAAEyrG,iBAA3C,CAA8DzrG,EAAE0rG,eAAhE,CAAiF1rG,EAAE2rG,qBAAnF,CAAnB,CACA,MACJ,IAAK,mBAAL,CACA,IAAK,mBAAL,CACA,IAAK,iBAAL,CACA,IAAK,uBAAL,CACI,MACJ,IAAK,UAAL,CACItR,KAAK5hE,QAAL,CAAgB6+D,YAAa38F,KAAb,CAAoBqF,EAAE4rG,cAAtB,CAAsC5rG,EAAE6rG,cAAxC,CAAwD7rG,EAAE8rG,YAA1D,CAAwE9rG,EAAE+rG,kBAA1E,CAAhB,CACA,MACJ,IAAK,gBAAL,CACA,IAAK,gBAAL,CACA,IAAK,cAAL,CACA,IAAK,oBAAL,CACI,MACJ,IAAK,OAAL,CACI1R,KAAK/hE,KAAL,CAAag/D,YAAa38F,KAAb,CAAoBqF,EAAEgsG,WAAtB,CAAmChsG,EAAEisG,WAArC,CAAkDjsG,EAAEksG,SAApD,CAA+DlsG,EAAEmsG,eAAjE,CAAb,CACA,MACJ,IAAK,aAAL,CACA,IAAK,aAAL,CACA,IAAK,WAAL,CACA,IAAK,iBAAL,CACI,MACJ,IAAK,SAAL,CACI9R,KAAKvhE,OAAL,CAAew+D,YAAa38F,KAAb,CAAoBqF,EAAEosG,aAAtB,CAAqCpsG,EAAEqsG,aAAvC,CAAsDrsG,EAAEssG,WAAxD,CAAqEtsG,EAAEusG,iBAAvE,CAAf,CACA,MACJ,IAAK,cAAL,CACIlS,KAAKthE,SAAL,CAAiBp+B,KAAjB,CACA,MACJ,IAAK,eAAL,CACA,IAAK,eAAL,CACA,IAAK,aAAL,CACA,IAAK,mBAAL,CACI,MACJ,IAAK,WAAL,CACI0/F,KAAKphE,SAAL,CAAiBq+D,YAAa38F,KAAb,CAAoBqF,EAAEwsG,eAAtB,CAAuCxsG,EAAEysG,eAAzC,CAA0DzsG,EAAE0sG,aAA5D,CAA2E1sG,EAAE2sG,mBAA7E,CAAjB,CACA,MACJ,IAAK,iBAAL,CACItS,KAAKnhE,WAAL,CAAmBv+B,KAAnB,CACA,MACJ,IAAK,iBAAL,CACA,IAAK,iBAAL,CACA,IAAK,eAAL,CACA,IAAK,qBAAL,CACI,MACJ,IAAK,aAAL,CACI0/F,KAAKviE,WAAL,CAAmBw/D,YAAa38F,KAAb,CAAoBqF,EAAE4sG,iBAAtB,CAAyC5sG,EAAE6sG,iBAA3C,CAA8D7sG,EAAE8sG,eAAhE,CAAiF9sG,EAAE+sG,qBAAnF,CAAnB,CACA,MACJ,IAAK,mBAAL,CACA,IAAK,mBAAL,CACA,IAAK,iBAAL,CACA,IAAK,uBAAL,CACI,MACJ,IAAK,cAAL,CACI1S,KAAK3gE,YAAL,CAAoB49D,YAAa38F,KAAb,CAAoBqF,EAAEgtG,kBAAtB,CAA0ChtG,EAAEitG,kBAA5C,CAAgEjtG,EAAEktG,gBAAlE,CAAoFltG,EAAEmtG,sBAAtF,CAApB,CACA,MACJ,IAAK,oBAAL,CACA,IAAK,oBAAL,CACA,IAAK,kBAAL,CACA,IAAK,wBAAL,CACI,MACJ,IAAK,cAAL,CACI9S,KAAK7gE,YAAL,CAAoB89D,YAAa38F,KAAb,CAAoBqF,EAAEotG,kBAAtB,CAA0CptG,EAAEqtG,kBAA5C,CAAgErtG,EAAEstG,gBAAlE,CAAoFttG,EAAEutG,sBAAtF,CAApB,CACA,MACJ,IAAK,oBAAL,CACA,IAAK,oBAAL,CACA,IAAK,kBAAL,CACA,IAAK,wBAAL,CACI,MACJ,IAAK,UAAL,CACIlT,KAAKziE,QAAL,CAAgB0/D,YAAa38F,KAAb,CAAoBqF,EAAEwtG,cAAtB,CAAsCxtG,EAAEytG,cAAxC,CAAwDztG,EAAE0tG,YAA1D,CAAwE1tG,EAAE2tG,kBAA1E,CAAhB,CACA,MACJ,IAAK,gBAAL,CACA,IAAK,gBAAL,CACA,IAAK,cAAL,CACA,IAAK,oBAAL,CACI,MACJ,IAAK,WAAL,CACItT,KAAK/mD,IAAL,CAAYxvC,QAAZ,CACA,MACJ,IAAK,aAAL,CACIu2F,KAAK/mD,IAAL,CAAYvvC,UAAZ,CACA,MACJ,IAAK,cAAL,CACI/V,QAAQgK,IAAR,CAAc,uEAAd,EACAqiG,KAAK5iE,OAAL,CAAe98B,KAAf,CACA,MACJ,IAAK,WAAL,CACA,IAAK,YAAL,CACA,IAAK,YAAL,CACA,IAAK,SAAL,CACA,IAAK,cAAL,CACA,IAAK,aAAL,CACA,IAAK,SAAL,CACA,IAAK,WAAL,CACI0/F,KAAMt4E,IAAN,EAAepnB,KAAf,CACA,MACJ,IAAK,cAAL,CACI,GAAKA,QAAU,IAAf,CAAsB0/F,KAAKn0D,YAAL,CAAoB/hC,YAApB,CACtB,GAAKxJ,QAAU,MAAf,CAAwB0/F,KAAKn0D,YAAL,CAAoBhiC,UAApB,CACxB,MACJ,QACIlW,QAAQ+iB,KAAR,CAAe,0CAAf,CAA2DgR,IAA3D,CAAiEpnB,KAAjE,EACA,MAlJR,CAsJH,CAED,GAAK0/F,KAAKjlG,IAAL,GAAc,mBAAnB,CAAyC,MAAOilG,MAAKv+D,QAAZ,CACzC,GAAKu+D,KAAKjlG,IAAL,GAAc,mBAAnB,CAAyC,MAAOilG,MAAKr+D,QAAZ,CAEzC,GAAKq+D,KAAK5iE,OAAL,CAAe,CAApB,CAAwB4iE,KAAK9mD,WAAL,CAAmB,IAAnB,CAExB23D,eAAepB,WAAf,CAA4BhnF,QAA5B,EAEA,MAAOooF,gBAAelmE,KAAf,CAAsBq1D,IAAtB,CAAP,CAEH,CA3OD,CA6OH,CA5Pe,EAxBa,CAAjC,EAwRA;;OAIA,GAAIuT,aAAc,CAEdC,WAAY,oBAAW7qG,KAAX,CAAmB,CAE3B,GAAK,MAAO8qG,YAAP,GAAuB,WAA5B,CAA0C,CAEtC,MAAO,IAAIA,YAAJ,GAAkBC,MAAlB,CAA0B/qG,KAA1B,CAAP,CAEH,CAED;AACA;AAEA,GAAIlD,GAAI,EAAR,CAEA,IAAM,GAAIzE,GAAI,CAAR,CAAW6qB,GAAKljB,MAAMvL,MAA5B,CAAoC4D,EAAI6qB,EAAxC,CAA4C7qB,GAA5C,CAAmD,CAE/C;AACAyE,GAAKg8C,OAAOkyD,YAAP,CAAqBhrG,MAAO3H,CAAP,CAArB,CAAL,CAEH,CAED;AACA,MAAOq6F,oBAAoBuY,OAAQnuG,CAAR,CAApB,CAAP,CAEH,CAzBa,CA2BdouG,eAAgB,wBAAWxqF,GAAX,CAAiB,CAE7B,GAAIlhB,OAAQkhB,IAAIyqF,WAAJ,CAAiB,GAAjB,CAAZ,CAEA,GAAK3rG,QAAU,CAAE,CAAjB,CAAqB,MAAO,IAAP,CAErB,MAAOkhB,KAAIu0E,MAAJ,CAAY,CAAZ,CAAez1F,MAAQ,CAAvB,CAAP,CAEH,CAnCa,CAAlB,CAuCA;;;OAKA,QAAS4rG,WAAT,CAAqBlZ,OAArB,CAA+B,CAE3B,GAAK,MAAOA,QAAP,GAAmB,SAAxB,CAAoC,CAEhClnG,QAAQgK,IAAR,CAAc,2EAAd,EACAk9F,QAAUzlG,SAAV,CAEH,CAED,KAAKylG,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEA,KAAK0B,eAAL,CAAuB,KAAvB,CAEH,CAEDt8F,OAAO4B,MAAP,CAAeqyG,WAAWl0G,SAA1B,CAAqC,CAEjCi7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAI/hG,OAAQ,IAAZ,CAEA,GAAIy4G,aAAc,KAAKA,WAAL,EAAsB,MAAO,MAAKA,WAAZ,GAA4B,QAAlD,CAA+D,KAAKA,WAApE,CAAkF8C,YAAYM,cAAZ,CAA4BxqF,GAA5B,CAApG,CAEA,GAAI2zE,QAAS,GAAIpC,WAAJ,CAAgB,KAAKC,OAArB,CAAb,CACAmC,OAAOJ,kBAAP,CAA2B,KAAKR,eAAhC,EACAY,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAWqsE,IAAX,CAAkB,CAEhC,GAAIsK,MAAOl2D,KAAKa,KAAL,CAAY+qD,IAAZ,CAAX,CACA,GAAIzsE,UAAW+2E,KAAK/2E,QAApB,CAEA,GAAKA,WAAa7zB,SAAlB,CAA8B,CAE1B,GAAI2F,MAAOkuB,SAASluB,IAApB,CAEA,GAAKA,OAAS3F,SAAd,CAA0B,CAEtB,GAAK2F,KAAK0gG,WAAL,KAAuB,QAA5B,CAAuC,CAEnC9nG,QAAQ+iB,KAAR,CAAe,qBAAuB2S,GAAvB,CAA6B,oDAA5C,EACA,OAEH,CAEJ,CAEJ,CAED,GAAIn0B,QAAS8C,MAAM2yC,KAAN,CAAaq1D,IAAb,CAAmByQ,WAAnB,CAAb,CACA5W,OAAQ3kG,OAAO23B,QAAf,CAAyB33B,OAAO00C,SAAhC,EAEH,CAzBD,CAyBGkwD,UAzBH,CAyBeC,OAzBf,EA2BH,CArCgC,CAuCjCia,eAAgB,wBAAW1zG,KAAX,CAAmB,CAE/B,KAAKmwG,WAAL,CAAmBnwG,KAAnB,CAEH,CA3CgC,CA6CjCqqC,MAAS,UAAY,CAEjB,QAASspE,WAAT,CAAqBjU,IAArB,CAA2BnzE,QAA3B,CAAsC,CAElC,QAASqnF,SAAT,CAAmB5zG,KAAnB,CAA0BvR,QAA1B,CAAqC,CAEjC,MAAOuR,OAAU,GAAKvR,QAAtB,CAEH,CAED,GAAIiS,EAAJ,CAAOstB,CAAP,CAAU6lF,EAAV,CAEI17G,MAFJ,CAEY27G,OAFZ,CAIIC,UAJJ,CAIgBC,WAJhB,CAI6BC,OAJ7B,CAIsC5oE,aAJtC,CAMI5wC,IANJ,CAOIy5G,MAPJ,CAQIhjE,WARJ,CASIE,eATJ,CAUIC,aAVJ,CAUmBC,mBAVnB,CAWIC,YAXJ,CAWkBC,kBAXlB,CAaI9E,MAbJ,CAaYC,IAbZ,CAakBwnE,KAblB,CAayBC,KAbzB,CAagCn5E,GAbhC,CAaqC5V,MAbrC,CAeIgvF,OAfJ,CAeaprF,EAfb,CAeiBqR,CAfjB,CAeoBr+B,CAfpB,CAiBI0vC,MAAQ+zD,KAAK/zD,KAjBjB,CAkBIlf,SAAWizE,KAAKjzE,QAlBpB,CAmBIygB,QAAUwyD,KAAKxyD,OAnBnB,CAoBIxB,OAASg0D,KAAKh0D,MApBlB,CAsBIpyC,MAAQomG,KAAKpmG,KAtBjB,CAwBIg7G,UAAY,CAxBhB,CA2BA,GAAK5U,KAAKvyD,GAAL,GAAar4C,SAAlB,CAA8B,CAE1B;AAEA,IAAM4L,EAAI,CAAV,CAAaA,EAAIg/F,KAAKvyD,GAAL,CAASrwC,MAA1B,CAAkC4D,GAAlC,CAAyC,CAErC,GAAKg/F,KAAKvyD,GAAL,CAAUzsC,CAAV,EAAc5D,MAAnB,CAA4Bw3G,YAE/B,CAED,IAAM5zG,EAAI,CAAV,CAAaA,EAAI4zG,SAAjB,CAA4B5zG,GAA5B,CAAmC,CAE/B6rB,SAASqf,aAAT,CAAwBlrC,CAAxB,EAA8B,EAA9B,CAEH,CAEJ,CAEDvI,OAAS,CAAT,CACA27G,QAAUrnF,SAAS3vB,MAAnB,CAEA,MAAQ3E,OAAS27G,OAAjB,CAA2B,CAEvBpnE,OAAS,GAAI13C,QAAJ,EAAT,CAEA03C,OAAOh+C,CAAP,CAAW+9B,SAAUt0B,QAAV,EAAwBmB,KAAnC,CACAozC,OAAO/9C,CAAP,CAAW89B,SAAUt0B,QAAV,EAAwBmB,KAAnC,CACAozC,OAAO99C,CAAP,CAAW69B,SAAUt0B,QAAV,EAAwBmB,KAAnC,CAEAizB,SAASE,QAAT,CAAkBl7B,IAAlB,CAAwBm7C,MAAxB,EAEH,CAEDv0C,OAAS,CAAT,CACA27G,QAAUnoE,MAAM7uC,MAAhB,CAEA,MAAQ3E,OAAS27G,OAAjB,CAA2B,CAEvBr5G,KAAOkxC,MAAOxzC,QAAP,CAAP,CAEA+7G,OAASN,SAAUn5G,IAAV,CAAgB,CAAhB,CAAT,CACAy2C,YAAc0iE,SAAUn5G,IAAV,CAAgB,CAAhB,CAAd,CACA22C,gBAAkBwiE,SAAUn5G,IAAV,CAAgB,CAAhB,CAAlB,CACA42C,cAAgBuiE,SAAUn5G,IAAV,CAAgB,CAAhB,CAAhB,CACA62C,oBAAsBsiE,SAAUn5G,IAAV,CAAgB,CAAhB,CAAtB,CACA82C,aAAeqiE,SAAUn5G,IAAV,CAAgB,CAAhB,CAAf,CACA+2C,mBAAqBoiE,SAAUn5G,IAAV,CAAgB,CAAhB,CAArB,CAEA;AAEA,GAAKy5G,MAAL,CAAc,CAEVC,MAAQ,GAAI/oE,MAAJ,EAAR,CACA+oE,MAAM7tG,CAAN,CAAUqlC,MAAOxzC,MAAP,CAAV,CACAg8G,MAAMxuG,CAAN,CAAUgmC,MAAOxzC,OAAS,CAAhB,CAAV,CACAg8G,MAAMj+F,CAAN,CAAUy1B,MAAOxzC,OAAS,CAAhB,CAAV,CAEAi8G,MAAQ,GAAIhpE,MAAJ,EAAR,CACAgpE,MAAM9tG,CAAN,CAAUqlC,MAAOxzC,OAAS,CAAhB,CAAV,CACAi8G,MAAMzuG,CAAN,CAAUgmC,MAAOxzC,OAAS,CAAhB,CAAV,CACAi8G,MAAMl+F,CAAN,CAAUy1B,MAAOxzC,OAAS,CAAhB,CAAV,CAEAA,QAAU,CAAV,CAEA,GAAK+4C,WAAL,CAAmB,CAEf7F,cAAgBM,MAAOxzC,QAAP,CAAhB,CACAg8G,MAAM9oE,aAAN,CAAsBA,aAAtB,CACA+oE,MAAM/oE,aAAN,CAAsBA,aAAtB,CAEH,CAED;AAEAwoE,GAAKtnF,SAASof,KAAT,CAAe7uC,MAApB,CAEA,GAAKs0C,eAAL,CAAuB,CAEnB,IAAM1wC,EAAI,CAAV,CAAaA,EAAI4zG,SAAjB,CAA4B5zG,GAA5B,CAAmC,CAE/B2zG,QAAU3U,KAAKvyD,GAAL,CAAUzsC,CAAV,CAAV,CAEA6rB,SAASqf,aAAT,CAAwBlrC,CAAxB,EAA6BmzG,EAA7B,EAAoC,EAApC,CACAtnF,SAASqf,aAAT,CAAwBlrC,CAAxB,EAA6BmzG,GAAK,CAAlC,EAAwC,EAAxC,CAEA,IAAM7lF,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvBimF,QAAUtoE,MAAOxzC,QAAP,CAAV,CAEAmiC,EAAI+5E,QAASJ,QAAU,CAAnB,CAAJ,CACAh4G,EAAIo4G,QAASJ,QAAU,CAAV,CAAc,CAAvB,CAAJ,CAEAhrF,GAAK,GAAI9tB,QAAJ,CAAam/B,CAAb,CAAgBr+B,CAAhB,CAAL,CAEA,GAAK+xB,IAAM,CAAX,CAAezB,SAASqf,aAAT,CAAwBlrC,CAAxB,EAA6BmzG,EAA7B,EAAkCtiH,IAAlC,CAAwC03B,EAAxC,EACf,GAAK+E,IAAM,CAAX,CAAezB,SAASqf,aAAT,CAAwBlrC,CAAxB,EAA6BmzG,GAAK,CAAlC,EAAsCtiH,IAAtC,CAA4C03B,EAA5C,EAElB,CAEJ,CAEJ,CAED,GAAKooB,aAAL,CAAqB,CAEjB2iE,YAAcroE,MAAOxzC,QAAP,EAAqB,CAAnC,CAEAg8G,MAAM9uF,MAAN,CAAa91B,GAAb,CACI29C,QAAS8mE,aAAT,CADJ,CAEI9mE,QAAS8mE,aAAT,CAFJ,CAGI9mE,QAAS8mE,WAAT,CAHJ,EAMAI,MAAM/uF,MAAN,CAAa1tB,IAAb,CAAmBw8G,MAAM9uF,MAAzB,EAEH,CAED,GAAKisB,mBAAL,CAA2B,CAEvB,IAAM5wC,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvBszG,YAAcroE,MAAOxzC,QAAP,EAAqB,CAAnC,CAEAktB,OAAS,GAAIrwB,QAAJ,CACLk4C,QAAS8mE,aAAT,CADK,CAEL9mE,QAAS8mE,aAAT,CAFK,CAGL9mE,QAAS8mE,WAAT,CAHK,CAAT,CAOA,GAAKtzG,IAAM,CAAX,CAAeyzG,MAAM7oE,aAAN,CAAoB/5C,IAApB,CAA0B8zB,MAA1B,EACf,GAAK3kB,IAAM,CAAX,CAAe0zG,MAAM9oE,aAAN,CAAoB/5C,IAApB,CAA0B8zB,MAA1B,EAElB,CAEJ,CAGD,GAAKksB,YAAL,CAAoB,CAEhBwiE,WAAapoE,MAAOxzC,QAAP,CAAb,CACA8iC,IAAMyQ,OAAQqoE,UAAR,CAAN,CAEAI,MAAMvjH,KAAN,CAAYmqC,MAAZ,CAAoBE,GAApB,EACAm5E,MAAMxjH,KAAN,CAAYmqC,MAAZ,CAAoBE,GAApB,EAEH,CAGD,GAAKuW,kBAAL,CAA0B,CAEtB,IAAM9wC,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvBqzG,WAAapoE,MAAOxzC,QAAP,CAAb,CACA8iC,IAAMyQ,OAAQqoE,UAAR,CAAN,CAEA,GAAKrzG,IAAM,CAAX,CAAeyzG,MAAM5oE,YAAN,CAAmBh6C,IAAnB,CAAyB,GAAIspC,MAAJ,CAAWI,GAAX,CAAzB,EACf,GAAKv6B,IAAM,CAAX,CAAe0zG,MAAM7oE,YAAN,CAAmBh6C,IAAnB,CAAyB,GAAIspC,MAAJ,CAAWI,GAAX,CAAzB,EAElB,CAEJ,CAED1O,SAASof,KAAT,CAAep6C,IAAf,CAAqB4iH,KAArB,EACA5nF,SAASof,KAAT,CAAep6C,IAAf,CAAqB6iH,KAArB,EAEH,CApHD,IAoHO,CAEHznE,KAAO,GAAIvB,MAAJ,EAAP,CACAuB,KAAKrmC,CAAL,CAASqlC,MAAOxzC,QAAP,CAAT,CACAw0C,KAAKhnC,CAAL,CAASgmC,MAAOxzC,QAAP,CAAT,CACAw0C,KAAKz2B,CAAL,CAASy1B,MAAOxzC,QAAP,CAAT,CAEA,GAAK+4C,WAAL,CAAmB,CAEf7F,cAAgBM,MAAOxzC,QAAP,CAAhB,CACAw0C,KAAKtB,aAAL,CAAqBA,aAArB,CAEH,CAED;AAEAwoE,GAAKtnF,SAASof,KAAT,CAAe7uC,MAApB,CAEA,GAAKs0C,eAAL,CAAuB,CAEnB,IAAM1wC,EAAI,CAAV,CAAaA,EAAI4zG,SAAjB,CAA4B5zG,GAA5B,CAAmC,CAE/B2zG,QAAU3U,KAAKvyD,GAAL,CAAUzsC,CAAV,CAAV,CAEA6rB,SAASqf,aAAT,CAAwBlrC,CAAxB,EAA6BmzG,EAA7B,EAAoC,EAApC,CAEA,IAAM7lF,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvBimF,QAAUtoE,MAAOxzC,QAAP,CAAV,CAEAmiC,EAAI+5E,QAASJ,QAAU,CAAnB,CAAJ,CACAh4G,EAAIo4G,QAASJ,QAAU,CAAV,CAAc,CAAvB,CAAJ,CAEAhrF,GAAK,GAAI9tB,QAAJ,CAAam/B,CAAb,CAAgBr+B,CAAhB,CAAL,CAEAswB,SAASqf,aAAT,CAAwBlrC,CAAxB,EAA6BmzG,EAA7B,EAAkCtiH,IAAlC,CAAwC03B,EAAxC,EAEH,CAEJ,CAEJ,CAED,GAAKooB,aAAL,CAAqB,CAEjB2iE,YAAcroE,MAAOxzC,QAAP,EAAqB,CAAnC,CAEAw0C,KAAKtnB,MAAL,CAAY91B,GAAZ,CACI29C,QAAS8mE,aAAT,CADJ,CAEI9mE,QAAS8mE,aAAT,CAFJ,CAGI9mE,QAAS8mE,WAAT,CAHJ,EAMH,CAED,GAAK1iE,mBAAL,CAA2B,CAEvB,IAAM5wC,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvBszG,YAAcroE,MAAOxzC,QAAP,EAAqB,CAAnC,CAEAktB,OAAS,GAAIrwB,QAAJ,CACLk4C,QAAS8mE,aAAT,CADK,CAEL9mE,QAAS8mE,aAAT,CAFK,CAGL9mE,QAAS8mE,WAAT,CAHK,CAAT,CAMArnE,KAAKrB,aAAL,CAAmB/5C,IAAnB,CAAyB8zB,MAAzB,EAEH,CAEJ,CAGD,GAAKksB,YAAL,CAAoB,CAEhBwiE,WAAapoE,MAAOxzC,QAAP,CAAb,CACAw0C,KAAK/7C,KAAL,CAAWmqC,MAAX,CAAmB2Q,OAAQqoE,UAAR,CAAnB,EAEH,CAGD,GAAKviE,kBAAL,CAA0B,CAEtB,IAAM9wC,EAAI,CAAV,CAAaA,EAAI,CAAjB,CAAoBA,GAApB,CAA2B,CAEvBqzG,WAAapoE,MAAOxzC,QAAP,CAAb,CACAw0C,KAAKpB,YAAL,CAAkBh6C,IAAlB,CAAwB,GAAIspC,MAAJ,CAAW6Q,OAAQqoE,UAAR,CAAX,CAAxB,EAEH,CAEJ,CAEDxnF,SAASof,KAAT,CAAep6C,IAAf,CAAqBo7C,IAArB,EAEH,CAEJ,CAEJ,CAED,QAAS4nE,UAAT,CAAoB7U,IAApB,CAA0BnzE,QAA1B,CAAqC,CAEjC,GAAIioF,qBAAwB9U,KAAK8U,mBAAL,GAA6B1/G,SAA/B,CAA6C4qG,KAAK8U,mBAAlD,CAAwE,CAAlG,CAEA,GAAK9U,KAAK3zD,WAAV,CAAwB,CAEpB,IAAM,GAAIrrC,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK3zD,WAAL,CAAiBjvC,MAAtC,CAA8C4D,EAAI6H,CAAlD,CAAqD7H,GAAK8zG,mBAA1D,CAAgF,CAE5E,GAAI9lH,GAAIgxG,KAAK3zD,WAAL,CAAkBrrC,CAAlB,CAAR,CACA,GAAI/R,GAAM6lH,oBAAsB,CAAxB,CAA8B9U,KAAK3zD,WAAL,CAAkBrrC,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,GAAI9R,GAAM4lH,oBAAsB,CAAxB,CAA8B9U,KAAK3zD,WAAL,CAAkBrrC,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,GAAImT,GAAM2gG,oBAAsB,CAAxB,CAA8B9U,KAAK3zD,WAAL,CAAkBrrC,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CAEA6rB,SAASwf,WAAT,CAAqBx6C,IAArB,CAA2B,GAAI23B,QAAJ,CAAax6B,CAAb,CAAgBC,CAAhB,CAAmBC,CAAnB,CAAsBilB,CAAtB,CAA3B,EAEH,CAEJ,CAED,GAAK6rF,KAAK1zD,WAAV,CAAwB,CAEpB,IAAM,GAAItrC,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK1zD,WAAL,CAAiBlvC,MAAtC,CAA8C4D,EAAI6H,CAAlD,CAAqD7H,GAAK8zG,mBAA1D,CAAgF,CAE5E,GAAIluG,GAAIo5F,KAAK1zD,WAAL,CAAkBtrC,CAAlB,CAAR,CACA,GAAIiF,GAAM6uG,oBAAsB,CAAxB,CAA8B9U,KAAK1zD,WAAL,CAAkBtrC,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,GAAIwV,GAAMs+F,oBAAsB,CAAxB,CAA8B9U,KAAK1zD,WAAL,CAAkBtrC,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CACA,GAAI4X,GAAMk8F,oBAAsB,CAAxB,CAA8B9U,KAAK1zD,WAAL,CAAkBtrC,EAAI,CAAtB,CAA9B,CAA0D,CAAlE,CAEA6rB,SAASyf,WAAT,CAAqBz6C,IAArB,CAA2B,GAAI23B,QAAJ,CAAa5iB,CAAb,CAAgBX,CAAhB,CAAmBuQ,CAAnB,CAAsBoC,CAAtB,CAA3B,EAEH,CAEJ,CAEDiU,SAASqrC,KAAT,CAAiB8nC,KAAK9nC,KAAtB,CAEA,GAAKrrC,SAASqrC,KAAT,EAAkBrrC,SAASqrC,KAAT,CAAe96D,MAAf,CAAwB,CAA1C,GAAiDyvB,SAASwf,WAAT,CAAqBjvC,MAArB,GAAgCyvB,SAASyf,WAAT,CAAqBlvC,MAArD,EAA+DyvB,SAASyf,WAAT,CAAqBlvC,MAArB,GAAgCyvB,SAASE,QAAT,CAAkB3vB,MAAlK,CAAL,CAAkL,CAE9KzJ,QAAQgK,IAAR,CAAc,sCAAwCkvB,SAASE,QAAT,CAAkB3vB,MAA1D,CAAmE,kBAAnE,CACVyvB,SAASyf,WAAT,CAAqBlvC,MADX,CACoB,sBADpB,CAC6CyvB,SAASwf,WAAT,CAAqBjvC,MADlE,CAC2E,iBADzF,EAGH,CAEJ,CAED,QAAS23G,cAAT,CAAwB/U,IAAxB,CAA8BnzE,QAA9B,CAAyC,CAErC,GAAIjzB,OAAQomG,KAAKpmG,KAAjB,CAEA,GAAKomG,KAAK7zD,YAAL,GAAsB/2C,SAA3B,CAAuC,CAEnC,IAAM,GAAI4L,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK7zD,YAAL,CAAkB/uC,MAAvC,CAA+C4D,EAAI6H,CAAnD,CAAsD7H,GAAtD,CAA6D,CAEzD6rB,SAASsf,YAAT,CAAuBnrC,CAAvB,EAA6B,EAA7B,CACA6rB,SAASsf,YAAT,CAAuBnrC,CAAvB,EAA2B0mB,IAA3B,CAAkCs4E,KAAK7zD,YAAL,CAAmBnrC,CAAnB,EAAuB0mB,IAAzD,CACAmF,SAASsf,YAAT,CAAuBnrC,CAAvB,EAA2B+rB,QAA3B,CAAsC,EAAtC,CAEA,GAAIioF,aAAcnoF,SAASsf,YAAT,CAAuBnrC,CAAvB,EAA2B+rB,QAA7C,CACA,GAAIkoF,aAAcjV,KAAK7zD,YAAL,CAAmBnrC,CAAnB,EAAuB+rB,QAAzC,CAEA,IAAM,GAAIxwB,GAAI,CAAR,CAAWoyC,GAAKsmE,YAAY73G,MAAlC,CAA0Cb,EAAIoyC,EAA9C,CAAkDpyC,GAAK,CAAvD,CAA2D,CAEvD,GAAIywC,QAAS,GAAI13C,QAAJ,EAAb,CACA03C,OAAOh+C,CAAP,CAAWimH,YAAa14G,CAAb,EAAmB3C,KAA9B,CACAozC,OAAO/9C,CAAP,CAAWgmH,YAAa14G,EAAI,CAAjB,EAAuB3C,KAAlC,CACAozC,OAAO99C,CAAP,CAAW+lH,YAAa14G,EAAI,CAAjB,EAAuB3C,KAAlC,CAEAo7G,YAAYnjH,IAAZ,CAAkBm7C,MAAlB,EAEH,CAEJ,CAEJ,CAED,GAAKgzD,KAAKkV,WAAL,GAAqB9/G,SAArB,EAAkC4qG,KAAKkV,WAAL,CAAiB93G,MAAjB,CAA0B,CAAjE,CAAqE,CAEjEzJ,QAAQgK,IAAR,CAAc,iFAAd,EAEA,GAAIsuC,OAAQpf,SAASof,KAArB,CACA,GAAIipE,aAAclV,KAAKkV,WAAL,CAAkB,CAAlB,EAAsBlpE,MAAxC,CAEA,IAAM,GAAIhrC,GAAI,CAAR,CAAW6H,EAAIojC,MAAM7uC,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAA1C,CAAiD,CAE7CirC,MAAOjrC,CAAP,EAAW9P,KAAX,CAAiB+kB,SAAjB,CAA4Bi/F,WAA5B,CAAyCl0G,EAAI,CAA7C,EAEH,CAEJ,CAEJ,CAED,QAASm0G,gBAAT,CAA0BnV,IAA1B,CAAgCnzE,QAAhC,CAA2C,CAEvC,GAAIuoF,kBAAmB,EAAvB,CAEA;AACA,GAAI/G,YAAa,EAAjB,CAEA,GAAKrO,KAAK/rB,SAAL,GAAmB7+E,SAAxB,CAAoC,CAEhCi5G,WAAWx8G,IAAX,CAAiBmuG,KAAK/rB,SAAtB,EAEH,CAED,GAAK+rB,KAAKqO,UAAL,GAAoBj5G,SAAzB,CAAqC,CAEjC,GAAK4qG,KAAKqO,UAAL,CAAgBjxG,MAArB,CAA8B,CAE1BixG,WAAaA,WAAWhrG,MAAX,CAAmB28F,KAAKqO,UAAxB,CAAb,CAEH,CAJD,IAIO,CAEHA,WAAWx8G,IAAX,CAAiBmuG,KAAKqO,UAAtB,EAEH,CAEJ,CAED,IAAM,GAAIrtG,GAAI,CAAd,CAAiBA,EAAIqtG,WAAWjxG,MAAhC,CAAwC4D,GAAxC,CAA+C,CAE3C,GAAI4sG,MAAON,cAAcqB,cAAd,CAA8BN,WAAYrtG,CAAZ,CAA9B,CAA+C6rB,SAASqrC,KAAxD,CAAX,CACA,GAAK01C,IAAL,CAAYwH,iBAAiBvjH,IAAjB,CAAuB+7G,IAAvB,EAEf,CAED;AACA,GAAK/gF,SAASsf,YAAd,CAA6B,CAEzB;AACA,GAAIkpE,qBAAsB/H,cAAcgB,mCAAd,CAAmDzhF,SAASsf,YAA5D,CAA0E,EAA1E,CAA1B,CACAipE,iBAAmBA,iBAAiB/xG,MAAjB,CAAyBgyG,mBAAzB,CAAnB,CAEH,CAED,GAAKD,iBAAiBh4G,MAAjB,CAA0B,CAA/B,CAAmCyvB,SAASwhF,UAAT,CAAsB+G,gBAAtB,CAEtC,CAED,MAAO,SAASzqE,MAAT,CAAgBq1D,IAAhB,CAAsByQ,WAAtB,CAAoC,CAEvC,GAAKzQ,KAAKxsG,IAAL,GAAc4B,SAAnB,CAA+B,CAE3B;AACA4qG,KAAOA,KAAKxsG,IAAZ,CAEH,CAED,GAAKwsG,KAAKpmG,KAAL,GAAexE,SAApB,CAAgC,CAE5B4qG,KAAKpmG,KAAL,CAAa,IAAMomG,KAAKpmG,KAAxB,CAEH,CAJD,IAIO,CAEHomG,KAAKpmG,KAAL,CAAa,GAAb,CAEH,CAED,GAAIizB,UAAW,GAAIkf,SAAJ,EAAf,CAEAkoE,WAAYjU,IAAZ,CAAkBnzE,QAAlB,EACAgoF,UAAW7U,IAAX,CAAiBnzE,QAAjB,EACAkoF,cAAe/U,IAAf,CAAqBnzE,QAArB,EACAsoF,gBAAiBnV,IAAjB,CAAuBnzE,QAAvB,EAEAA,SAASqhB,kBAAT,GACArhB,SAASqG,qBAAT,GAEA,GAAK8sE,KAAKp2D,SAAL,GAAmBx0C,SAAnB,EAAgC4qG,KAAKp2D,SAAL,CAAexsC,MAAf,GAA0B,CAA/D,CAAmE,CAE/D,MAAO,CAAEyvB,SAAUA,QAAZ,CAAP,CAEH,CAJD,IAIO,CAEH,GAAI+c,WAAYqmE,OAAOpwG,SAAP,CAAiB2wG,aAAjB,CAAgCxQ,KAAKp2D,SAArC,CAAgD6mE,WAAhD,CAA6D,KAAKhT,WAAlE,CAAhB,CAEA,MAAO,CAAE5wE,SAAUA,QAAZ,CAAsB+c,UAAWA,SAAjC,CAAP,CAEH,CAEJ,CAzCD,CA2CH,CAteM,EA7C0B,CAArC,EAuhBA;;OAIA,QAAS0rE,aAAT,CAAuBza,OAAvB,CAAiC,CAE7B,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CACA,KAAK+V,WAAL,CAAmB,EAAnB,CAEH,CAED3wG,OAAO4B,MAAP,CAAe4zG,aAAaz1G,SAA5B,CAAuC,CAEnCi7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAK,KAAK0W,WAAL,GAAqB,EAA1B,CAA+B,CAE3B,KAAKA,WAAL,CAAmBpnF,IAAIksF,SAAJ,CAAe,CAAf,CAAkBlsF,IAAIyqF,WAAJ,CAAiB,GAAjB,EAAyB,CAA3C,CAAnB,CAEH,CAED,GAAI97G,OAAQ,IAAZ,CAEA,GAAIglG,QAAS,GAAIpC,WAAJ,CAAgB5iG,MAAM6iG,OAAtB,CAAb,CACAmC,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAWqsE,IAAX,CAAkB,CAEhC,GAAIsK,MAAO,IAAX,CAEA,GAAI,CAEAA,KAAOl2D,KAAKa,KAAL,CAAY+qD,IAAZ,CAAP,CAEH,CAAC,MAAQh/E,KAAR,CAAgB,CAEd,GAAKqjF,UAAY3kG,SAAjB,CAA6B2kG,QAASrjF,KAAT,EAE7B/iB,QAAQ+iB,KAAR,CAAe,oCAAsC2S,GAAtC,CAA4C,GAA3D,CAAgE3S,MAAMyiE,OAAtE,EAEA,OAEH,CAED,GAAIlwD,UAAW+2E,KAAK/2E,QAApB,CAEA,GAAKA,WAAa7zB,SAAb,EAA0B6zB,SAASluB,IAAT,GAAkB3F,SAA5C,EAAyD6zB,SAASluB,IAAT,CAAc0gG,WAAd,KAAgC,UAA9F,CAA2G,CAEvG9nG,QAAQ+iB,KAAR,CAAe,mCAAqC2S,GAArC,CAA2C,iCAA1D,EACA,OAEH,CAEDrxB,MAAM2yC,KAAN,CAAaq1D,IAAb,CAAmBnG,MAAnB,EAEH,CA7BD,CA6BGC,UA7BH,CA6BeC,OA7Bf,EA+BH,CA5CkC,CA8CnCia,eAAgB,wBAAW1zG,KAAX,CAAmB,CAE/B,KAAKmwG,WAAL,CAAmBnwG,KAAnB,CACA,MAAO,KAAP,CAEH,CAnDkC,CAqDnCw9F,eAAgB,wBAAWx9F,KAAX,CAAmB,CAE/B,KAAKm9F,WAAL,CAAmBn9F,KAAnB,CACA,MAAO,KAAP,CAEH,CA1DkC,CA4DnCqqC,MAAO,eAAWq1D,IAAX,CAAiBnG,MAAjB,CAA0B,CAE7B,GAAIhwD,QAAS,KAAK2rE,UAAL,CAAiBxV,KAAKn2D,MAAtB,CAAb,CACA,GAAIF,YAAa,KAAK8rE,eAAL,CAAsBzV,KAAKr2D,UAA3B,CAAuCE,MAAvC,CAAjB,CAEA,GAAIzgB,QAAS,KAAKssF,WAAL,CAAkB1V,KAAK52E,MAAvB,CAA+B,UAAY,CAEpD,GAAKywE,SAAWzkG,SAAhB,CAA4BykG,OAAQ3kG,MAAR,EAE/B,CAJY,CAAb,CAMA,GAAIuzB,UAAW,KAAKktF,aAAL,CAAoB3V,KAAKv3E,QAAzB,CAAmCW,MAAnC,CAAf,CACA,GAAIwgB,WAAY,KAAKgsE,cAAL,CAAqB5V,KAAKp2D,SAA1B,CAAqCnhB,QAArC,CAAhB,CAEA,GAAIvzB,QAAS,KAAK2gH,WAAL,CAAkB7V,KAAK9qG,MAAvB,CAA+By0C,UAA/B,CAA2CC,SAA3C,CAAb,CAEA,GAAKo2D,KAAKqO,UAAV,CAAuB,CAEnBn5G,OAAOm5G,UAAP,CAAoB,KAAK8G,eAAL,CAAsBnV,KAAKqO,UAA3B,CAApB,CAEH,CAED,GAAKrO,KAAK52E,MAAL,GAAgBh0B,SAAhB,EAA6B4qG,KAAK52E,MAAL,CAAYhsB,MAAZ,GAAuB,CAAzD,CAA6D,CAEzD,GAAKy8F,SAAWzkG,SAAhB,CAA4BykG,OAAQ3kG,MAAR,EAE/B,CAED,MAAOA,OAAP,CAEH,CA1FkC,CA4FnCsgH,WAAY,oBAAWxV,IAAX,CAAkB,CAE1B,GAAIn2D,QAAS,EAAb,CAEA,GAAKm2D,OAAS5qG,SAAd,CAA0B,CAEtB,IAAM,GAAI4L,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK5iG,MAA1B,CAAkC4D,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5C,GAAImpC,OAAQ,GAAIw7D,MAAJ,GAAY5F,QAAZ,CAAsBC,KAAMh/F,CAAN,CAAtB,CAAZ,CAEA6oC,OAAQM,MAAMn4B,IAAd,EAAuBm4B,KAAvB,CAEH,CAEJ,CAED,MAAON,OAAP,CAEH,CA9GkC,CAgHnC4rE,gBAAiB,yBAAWzV,IAAX,CAAiBn2D,MAAjB,CAA0B,CAEvC,GAAIF,YAAa,EAAjB,CAEA,GAAKq2D,OAAS5qG,SAAd,CAA0B,CAEtB,GAAI0gH,gBAAiB,GAAI/B,WAAJ,EAArB,CACA,GAAIgC,sBAAuB,GAAInG,qBAAJ,EAA3B,CAEA,IAAM,GAAI5uG,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK5iG,MAA1B,CAAkC4D,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5C,GAAI6rB,SAAJ,CACA,GAAIr5B,MAAOwsG,KAAMh/F,CAAN,CAAX,CAEA,OAASxN,KAAKuH,IAAd,EAEI,IAAK,eAAL,CACA,IAAK,qBAAL,CAEI8xB,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKlD,KADE,CAEPkD,KAAKjD,MAFE,CAGPiD,KAAK6jD,aAHE,CAIP7jD,KAAK8jD,cAJE,CAAX,CAOA,MAEJ,IAAK,aAAL,CACA,IAAK,mBAAL,CACA,IAAK,cAAL,CAAqB;AAEjBzqB,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKlD,KADE,CAEPkD,KAAKjD,MAFE,CAGPiD,KAAK4uC,KAHE,CAIP5uC,KAAK6jD,aAJE,CAKP7jD,KAAK8jD,cALE,CAMP9jD,KAAK+jD,aANE,CAAX,CASA,MAEJ,IAAK,gBAAL,CACA,IAAK,sBAAL,CAEI1qB,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKmG,MADE,CAEPnG,KAAKyjG,QAFE,CAGPzjG,KAAKyiG,UAHE,CAIPziG,KAAK0iG,WAJE,CAAX,CAOA,MAEJ,IAAK,kBAAL,CACA,IAAK,wBAAL,CAEIrpE,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAK4kG,SADE,CAEP5kG,KAAK6kG,YAFE,CAGP7kG,KAAKjD,MAHE,CAIPiD,KAAK41F,cAJE,CAKP51F,KAAK8jD,cALE,CAMP9jD,KAAK8kG,SANE,CAOP9kG,KAAKyiG,UAPE,CAQPziG,KAAK0iG,WARE,CAAX,CAWA,MAEJ,IAAK,cAAL,CACA,IAAK,oBAAL,CAEIrpE,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKmG,MADE,CAEPnG,KAAKjD,MAFE,CAGPiD,KAAK41F,cAHE,CAIP51F,KAAK8jD,cAJE,CAKP9jD,KAAK8kG,SALE,CAMP9kG,KAAKyiG,UANE,CAOPziG,KAAK0iG,WAPE,CAAX,CAUA,MAEJ,IAAK,gBAAL,CACA,IAAK,sBAAL,CAEIrpE,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKmG,MADE,CAEPnG,KAAK6jD,aAFE,CAGP7jD,KAAK8jD,cAHE,CAIP9jD,KAAKuiG,QAJE,CAKPviG,KAAKwiG,SALE,CAMPxiG,KAAKyiG,UANE,CAOPziG,KAAK0iG,WAPE,CAAX,CAUA,MAEJ,IAAK,sBAAL,CACA,IAAK,4BAAL,CACA,IAAK,qBAAL,CACA,IAAK,2BAAL,CACA,IAAK,oBAAL,CACA,IAAK,0BAAL,CACA,IAAK,qBAAL,CACA,IAAK,2BAAL,CAEIrpE,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKmG,MADE,CAEPnG,KAAK8zF,MAFE,CAAX,CAKA,MAEJ,IAAK,cAAL,CACA,IAAK,oBAAL,CAEIz6D,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKgjG,WADE,CAEPhjG,KAAKijG,WAFE,CAGPjjG,KAAKkjG,aAHE,CAIPljG,KAAKmjG,WAJE,CAKPnjG,KAAKyiG,UALE,CAMPziG,KAAK0iG,WANE,CAAX,CASA,MAEJ,IAAK,eAAL,CACA,IAAK,qBAAL,CAEIrpE,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKmG,MADE,CAEPnG,KAAK62F,IAFE,CAGP72F,KAAK41F,cAHE,CAIP51F,KAAK21F,eAJE,CAKP31F,KAAKy3F,GALE,CAAX,CAQA,MAEJ,IAAK,mBAAL,CACA,IAAK,yBAAL,CAEIp+D,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKmG,MADE,CAEPnG,KAAK62F,IAFE,CAGP72F,KAAK21F,eAHE,CAIP31F,KAAK41F,cAJE,CAKP51F,KAAKusB,CALE,CAMPvsB,KAAKqmB,CANE,CAAX,CASA,MAEJ,IAAK,eAAL,CACA,IAAK,qBAAL,CAEIgT,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKm4B,MADE,CAEPn4B,KAAKyjG,QAFE,CAGPzjG,KAAKuiG,QAHE,CAIPviG,KAAKwiG,SAJE,CAAX,CAOA,MAEJ,IAAK,oBAAL,CACA,IAAK,0BAAL,CAEInpE,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPvH,KAAKu5B,QADE,CAEPv5B,KAAK85C,OAFE,CAGP95C,KAAKmG,MAHE,CAIPnG,KAAKwiH,OAJE,CAAX,CAOA,MAEJ,IAAK,eAAL,CACA,IAAK,qBAAL,CAEI,GAAIC,gBAAiB,EAArB,CAEA,IAAM,GAAI3nF,GAAI,CAAR,CAAW4e,GAAK15C,KAAKq2C,MAAL,CAAYzsC,MAAlC,CAA0CkxB,EAAI4e,EAA9C,CAAkD5e,GAAlD,CAAyD,CAErD,GAAI6b,OAAQN,OAAQr2C,KAAKq2C,MAAL,CAAavb,CAAb,CAAR,CAAZ,CAEA2nF,eAAepkH,IAAf,CAAqBs4C,KAArB,EAEH,CAEDtd,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPk7G,cADO,CAEPziH,KAAK68F,aAFE,CAAX,CAKA,MAGJ,IAAK,iBAAL,CACA,IAAK,uBAAL,CAEI,GAAI4lB,gBAAiB,EAArB,CAEA,IAAM,GAAI3nF,GAAI,CAAR,CAAW4e,GAAK15C,KAAKq2C,MAAL,CAAYzsC,MAAlC,CAA0CkxB,EAAI4e,EAA9C,CAAkD5e,GAAlD,CAAyD,CAErD,GAAI6b,OAAQN,OAAQr2C,KAAKq2C,MAAL,CAAavb,CAAb,CAAR,CAAZ,CAEA2nF,eAAepkH,IAAf,CAAqBs4C,KAArB,EAEH,CAED,GAAIwmD,aAAcn9F,KAAKy2B,OAAL,CAAa0mE,WAA/B,CAEA,GAAKA,cAAgBv7F,SAArB,CAAiC,CAE7B5B,KAAKy2B,OAAL,CAAa0mE,WAAb,CAA2B,GAAI+S,QAAQ/S,YAAY51F,IAApB,CAAJ,GAAiCglG,QAAjC,CAA2CpP,WAA3C,CAA3B,CAEH,CAED9jE,SAAW,GAAIwsE,YAAY7lG,KAAKuH,IAAjB,CAAJ,CACPk7G,cADO,CAEPziH,KAAKy2B,OAFE,CAAX,CAKA,MAEJ,IAAK,gBAAL,CAEI4C,SAAWkpF,qBAAqBprE,KAArB,CAA4Bn3C,IAA5B,CAAX,CAEA,MAEJ,IAAK,UAAL,CAEIq5B,SAAWipF,eAAenrE,KAAf,CAAsBn3C,IAAtB,CAA4B,KAAKi9G,WAAjC,EAA+C5jF,QAA1D,CAEA,MAEJ,QAEIl5B,QAAQgK,IAAR,CAAc,kDAAoDnK,KAAKuH,IAAzD,CAAgE,GAA9E,EAEA,SAzOR,CA6OA8xB,SAAS7a,IAAT,CAAgBxe,KAAKwe,IAArB,CAEA,GAAKxe,KAAKk0B,IAAL,GAActyB,SAAnB,CAA+By3B,SAASnF,IAAT,CAAgBl0B,KAAKk0B,IAArB,CAC/B,GAAKmF,SAASG,gBAAT,GAA8B,IAA9B,EAAsCx5B,KAAKo0C,QAAL,GAAkBxyC,SAA7D,CAAyEy3B,SAAS+a,QAAT,CAAoBp0C,KAAKo0C,QAAzB,CAEzE+B,WAAYn2C,KAAKwe,IAAjB,EAA0B6a,QAA1B,CAEH,CAEJ,CAED,MAAO8c,WAAP,CAEH,CAxXkC,CA0XnCisE,eAAgB,wBAAW5V,IAAX,CAAiBv3E,QAAjB,CAA4B,CAExC,GAAImhB,WAAY,EAAhB,CAEA,GAAKo2D,OAAS5qG,SAAd,CAA0B,CAEtB,GAAI4nG,QAAS,GAAIwS,eAAJ,EAAb,CACAxS,OAAOyS,WAAP,CAAoBhnF,QAApB,EAEA,IAAM,GAAIznB,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK5iG,MAA1B,CAAkC4D,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5C,GAAIxN,MAAOwsG,KAAMh/F,CAAN,CAAX,CAEA,GAAKxN,KAAKuH,IAAL,GAAc,eAAnB,CAAqC,CAEjC;AAEA,GAAI4N,OAAQ,EAAZ,CAEA,IAAM,GAAI2lB,GAAI,CAAd,CAAiBA,EAAI96B,KAAKo2C,SAAL,CAAexsC,MAApC,CAA4CkxB,GAA5C,CAAmD,CAE/C3lB,MAAM9W,IAAN,CAAYmrG,OAAOryD,KAAP,CAAcn3C,KAAKo2C,SAAL,CAAgBtb,CAAhB,CAAd,CAAZ,EAEH,CAEDsb,UAAWp2C,KAAKwe,IAAhB,EAAyBrJ,KAAzB,CAEH,CAdD,IAcO,CAEHihC,UAAWp2C,KAAKwe,IAAhB,EAAyBgrF,OAAOryD,KAAP,CAAcn3C,IAAd,CAAzB,CAEH,CAEJ,CAEJ,CAED,MAAOo2C,UAAP,CAEH,CAjakC,CAmanCurE,gBAAiB,yBAAWnV,IAAX,CAAkB,CAE/B,GAAIqO,YAAa,EAAjB,CAEA,IAAM,GAAIrtG,GAAI,CAAd,CAAiBA,EAAIg/F,KAAK5iG,MAA1B,CAAkC4D,GAAlC,CAAyC,CAErC,GAAIxN,MAAOwsG,KAAMh/F,CAAN,CAAX,CAEA,GAAI4sG,MAAON,cAAc3iE,KAAd,CAAqBn3C,IAArB,CAAX,CAEA,GAAKA,KAAKwe,IAAL,GAAc5c,SAAnB,CAA+Bw4G,KAAK57F,IAAL,CAAYxe,KAAKwe,IAAjB,CAE/Bq8F,WAAWx8G,IAAX,CAAiB+7G,IAAjB,EAEH,CAED,MAAOS,WAAP,CAEH,CArbkC,CAubnCqH,YAAa,qBAAW1V,IAAX,CAAiBnG,MAAjB,CAA0B,CAEnC,GAAI7hG,OAAQ,IAAZ,CACA,GAAIoxB,QAAS,EAAb,CAEA,QAAS8sF,UAAT,CAAoB7sF,GAApB,CAA0B,CAEtBrxB,MAAM6iG,OAAN,CAAcT,SAAd,CAAyB/wE,GAAzB,EAEA,MAAO2zE,QAAOlC,IAAP,CAAazxE,GAAb,CAAkB,UAAY,CAEjCrxB,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAJM,CAIJj0B,SAJI,CAIO,UAAY,CAEtB4C,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EACArxB,MAAM6iG,OAAN,CAAcP,SAAd,CAAyBjxE,GAAzB,EAEH,CATM,CAAP,CAWH,CAED,GAAK22E,OAAS5qG,SAAT,EAAsB4qG,KAAK5iG,MAAL,CAAc,CAAzC,CAA6C,CAEzC,GAAIy9F,SAAU,GAAIjB,eAAJ,CAAoBC,MAApB,CAAd,CAEA,GAAImD,QAAS,GAAIQ,YAAJ,CAAiB3C,OAAjB,CAAb,CACAmC,OAAOc,cAAP,CAAuB,KAAKL,WAA5B,EAEA,IAAM,GAAIz8F,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK5iG,MAA1B,CAAkC4D,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5C,GAAIimB,OAAQ+4E,KAAMh/F,CAAN,CAAZ,CACA,GAAI+uD,MAAO,4BAA4BlpB,IAA5B,CAAkC5f,MAAMoC,GAAxC,EAAgDpC,MAAMoC,GAAtD,CAA4DrxB,MAAMy4G,WAAN,CAAoBxpF,MAAMoC,GAAjG,CAEAD,OAAQnC,MAAMjV,IAAd,EAAuBkkG,UAAWnmD,IAAX,CAAvB,CAEH,CAEJ,CAED,MAAO3mC,OAAP,CAEH,CAjekC,CAmenCusF,cAAe,uBAAW3V,IAAX,CAAiB52E,MAAjB,CAA0B,CAErC,QAAS+sF,cAAT,CAAwB71G,KAAxB,CAA+BvF,IAA/B,CAAsC,CAElC,GAAK,MAAOuF,MAAP,GAAiB,QAAtB,CAAiC,MAAOA,MAAP,CAEjC3M,QAAQgK,IAAR,CAAc,sEAAd,CAAsF2C,KAAtF,EAEA,MAAOvF,MAAMuF,KAAN,CAAP,CAEH,CAED,GAAImoB,UAAW,EAAf,CAEA,GAAKu3E,OAAS5qG,SAAd,CAA0B,CAEtB,IAAM,GAAI4L,GAAI,CAAR,CAAW6H,EAAIm3F,KAAK5iG,MAA1B,CAAkC4D,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5C,GAAIxN,MAAOwsG,KAAMh/F,CAAN,CAAX,CAEA,GAAKxN,KAAKyzB,KAAL,GAAe7xB,SAApB,CAAgC,CAE5BzB,QAAQgK,IAAR,CAAc,8CAAd,CAA8DnK,KAAKwe,IAAnE,EAEH,CAED,GAAKoX,OAAQ51B,KAAKyzB,KAAb,IAAyB7xB,SAA9B,CAA0C,CAEtCzB,QAAQgK,IAAR,CAAc,qCAAd,CAAqDnK,KAAKyzB,KAA1D,EAEH,CAED,GAAIoD,SAAU,GAAIrD,QAAJ,CAAaoC,OAAQ51B,KAAKyzB,KAAb,CAAb,CAAd,CACAoD,QAAQ0rB,WAAR,CAAsB,IAAtB,CAEA1rB,QAAQrY,IAAR,CAAexe,KAAKwe,IAApB,CAEA,GAAKxe,KAAKk0B,IAAL,GAActyB,SAAnB,CAA+Bi1B,QAAQ3C,IAAR,CAAel0B,KAAKk0B,IAApB,CAE/B,GAAKl0B,KAAK0zB,OAAL,GAAiB9xB,SAAtB,CAAkCi1B,QAAQnD,OAAR,CAAkBivF,cAAe3iH,KAAK0zB,OAApB,CAA6BkvF,eAA7B,CAAlB,CAElC,GAAK5iH,KAAKiF,MAAL,GAAgBrD,SAArB,CAAiCi1B,QAAQ5xB,MAAR,CAAewd,SAAf,CAA0BziB,KAAKiF,MAA/B,EACjC,GAAKjF,KAAKqQ,MAAL,GAAgBzO,SAArB,CAAiCi1B,QAAQxmB,MAAR,CAAeoS,SAAf,CAA0BziB,KAAKqQ,MAA/B,EACjC,GAAKrQ,KAAK2M,MAAL,GAAgB/K,SAArB,CAAiCi1B,QAAQlqB,MAAR,CAAe8V,SAAf,CAA0BziB,KAAK2M,MAA/B,EACjC,GAAK3M,KAAK5B,QAAL,GAAkBwD,SAAvB,CAAmCi1B,QAAQz4B,QAAR,CAAmB4B,KAAK5B,QAAxB,CAEnC,GAAK4B,KAAK21B,IAAL,GAAc/zB,SAAnB,CAA+B,CAE3Bi1B,QAAQlD,KAAR,CAAgBgvF,cAAe3iH,KAAK21B,IAAL,CAAW,CAAX,CAAf,CAA+BktF,gBAA/B,CAAhB,CACAhsF,QAAQjD,KAAR,CAAgB+uF,cAAe3iH,KAAK21B,IAAL,CAAW,CAAX,CAAf,CAA+BktF,gBAA/B,CAAhB,CAEH,CAED,GAAK7iH,KAAK+zB,MAAL,GAAgBnyB,SAArB,CAAiCi1B,QAAQ9C,MAAR,CAAiB/zB,KAAK+zB,MAAtB,CAEjC,GAAK/zB,KAAK8zB,SAAL,GAAmBlyB,SAAxB,CAAoCi1B,QAAQ/C,SAAR,CAAoB6uF,cAAe3iH,KAAK8zB,SAApB,CAA+BgvF,cAA/B,CAApB,CACpC,GAAK9iH,KAAK6zB,SAAL,GAAmBjyB,SAAxB,CAAoCi1B,QAAQhD,SAAR,CAAoB8uF,cAAe3iH,KAAK6zB,SAApB,CAA+BivF,cAA/B,CAApB,CACpC,GAAK9iH,KAAKg0B,UAAL,GAAoBpyB,SAAzB,CAAqCi1B,QAAQ7C,UAAR,CAAqBh0B,KAAKg0B,UAA1B,CAErC,GAAKh0B,KAAKy0B,KAAL,GAAe7yB,SAApB,CAAgCi1B,QAAQpC,KAAR,CAAgBz0B,KAAKy0B,KAArB,CAEhCQ,SAAUj1B,KAAKwe,IAAf,EAAwBqY,OAAxB,CAEH,CAEJ,CAED,MAAO5B,SAAP,CAEH,CAxiBkC,CA0iBnCotF,YAAa,qBAAWriH,IAAX,CAAiBm2C,UAAjB,CAA6BC,SAA7B,CAAyC,CAElD,GAAI10C,OAAJ,CAEA,QAASqhH,YAAT,CAAsB7uF,IAAtB,CAA6B,CAEzB,GAAKiiB,WAAYjiB,IAAZ,IAAuBtyB,SAA5B,CAAwC,CAEpCzB,QAAQgK,IAAR,CAAc,wCAAd,CAAwD+pB,IAAxD,EAEH,CAED,MAAOiiB,YAAYjiB,IAAZ,CAAP,CAEH,CAED,QAAS8uF,YAAT,CAAsB9uF,IAAtB,CAA6B,CAEzB,GAAKA,OAAStyB,SAAd,CAA0B,MAAOA,UAAP,CAE1B,GAAKgO,MAAM63B,OAAN,CAAevT,IAAf,CAAL,CAA6B,CAEzB,GAAI/e,OAAQ,EAAZ,CAEA,IAAM,GAAI3H,GAAI,CAAR,CAAW6H,EAAI6e,KAAKtqB,MAA1B,CAAkC4D,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5C,GAAIgR,MAAO0V,KAAM1mB,CAAN,CAAX,CAEA,GAAK4oC,UAAW53B,IAAX,IAAsB5c,SAA3B,CAAuC,CAEnCzB,QAAQgK,IAAR,CAAc,wCAAd,CAAwDqU,IAAxD,EAEH,CAEDrJ,MAAM9W,IAAN,CAAY+3C,UAAW53B,IAAX,CAAZ,EAEH,CAED,MAAOrJ,MAAP,CAEH,CAED,GAAKihC,UAAWliB,IAAX,IAAsBtyB,SAA3B,CAAuC,CAEnCzB,QAAQgK,IAAR,CAAc,wCAAd,CAAwD+pB,IAAxD,EAEH,CAED,MAAOkiB,WAAWliB,IAAX,CAAP,CAEH,CAED,OAASl0B,KAAKuH,IAAd,EAEI,IAAK,OAAL,CAEI7F,OAAS,GAAIjH,MAAJ,EAAT,CAEA,GAAKuF,KAAKwwD,UAAL,GAAoB5uD,SAAzB,CAAqC,CAEjC,GAAKqS,OAAOE,SAAP,CAAkBnU,KAAKwwD,UAAvB,CAAL,CAA2C,CAEvC9uD,OAAO8uD,UAAP,CAAoB,GAAI7oB,MAAJ,CAAW3nC,KAAKwwD,UAAhB,CAApB,CAEH,CAEJ,CAED,GAAKxwD,KAAKgsC,GAAL,GAAapqC,SAAlB,CAA8B,CAE1B,GAAK5B,KAAKgsC,GAAL,CAASzkC,IAAT,GAAkB,KAAvB,CAA+B,CAE3B7F,OAAOsqC,GAAP,CAAa,GAAI6iD,IAAJ,CAAS7uF,KAAKgsC,GAAL,CAAStuC,KAAlB,CAAyBsC,KAAKgsC,GAAL,CAASrvC,IAAlC,CAAwCqD,KAAKgsC,GAAL,CAAS5f,GAAjD,CAAb,CAEH,CAJD,IAIO,IAAKpsB,KAAKgsC,GAAL,CAASzkC,IAAT,GAAkB,SAAvB,CAAmC,CAEtC7F,OAAOsqC,GAAP,CAAa,GAAI4iD,QAAJ,CAAa5uF,KAAKgsC,GAAL,CAAStuC,KAAtB,CAA6BsC,KAAKgsC,GAAL,CAASmiC,OAAtC,CAAb,CAEH,CAEJ,CAED,MAEJ,IAAK,mBAAL,CAEIzsE,OAAS,GAAIhH,kBAAJ,CAAuBsF,KAAK8J,GAA5B,CAAiC9J,KAAKk+E,MAAtC,CAA8Cl+E,KAAKrD,IAAnD,CAAyDqD,KAAKosB,GAA9D,CAAT,CAEA,GAAKpsB,KAAKm+E,KAAL,GAAev8E,SAApB,CAAgCF,OAAOy8E,KAAP,CAAen+E,KAAKm+E,KAApB,CAChC,GAAKn+E,KAAKiE,IAAL,GAAcrC,SAAnB,CAA+BF,OAAOuC,IAAP,CAAcjE,KAAKiE,IAAnB,CAC/B,GAAKjE,KAAKo+E,SAAL,GAAmBx8E,SAAxB,CAAoCF,OAAO08E,SAAP,CAAmBp+E,KAAKo+E,SAAxB,CACpC,GAAKp+E,KAAKq+E,UAAL,GAAoBz8E,SAAzB,CAAqCF,OAAO28E,UAAP,CAAoBr+E,KAAKq+E,UAAzB,CACrC,GAAKr+E,KAAKu3C,IAAL,GAAc31C,SAAnB,CAA+BF,OAAO61C,IAAP,CAAcjrC,OAAO4B,MAAP,CAAe,EAAf,CAAmBlO,KAAKu3C,IAAxB,CAAd,CAE/B,MAEJ,IAAK,oBAAL,CAEI71C,OAAS,GAAI41C,mBAAJ,CAAwBt3C,KAAKzD,IAA7B,CAAmCyD,KAAKxD,KAAxC,CAA+CwD,KAAKvD,GAApD,CAAyDuD,KAAKtD,MAA9D,CAAsEsD,KAAKrD,IAA3E,CAAiFqD,KAAKosB,GAAtF,CAAT,CAEA,GAAKpsB,KAAKiE,IAAL,GAAcrC,SAAnB,CAA+BF,OAAOuC,IAAP,CAAcjE,KAAKiE,IAAnB,CAC/B,GAAKjE,KAAKu3C,IAAL,GAAc31C,SAAnB,CAA+BF,OAAO61C,IAAP,CAAcjrC,OAAO4B,MAAP,CAAe,EAAf,CAAmBlO,KAAKu3C,IAAxB,CAAd,CAE/B,MAEJ,IAAK,cAAL,CAEI71C,OAAS,GAAIvE,aAAJ,CAAkB6C,KAAKtC,KAAvB,CAA8BsC,KAAKgoE,SAAnC,CAAT,CAEA,MAEJ,IAAK,kBAAL,CAEItmE,OAAS,GAAIvF,iBAAJ,CAAsB6D,KAAKtC,KAA3B,CAAkCsC,KAAKgoE,SAAvC,CAAT,CAEA,MAEJ,IAAK,YAAL,CAEItmE,OAAS,GAAIkxG,WAAJ,CAAgB5yG,KAAKtC,KAArB,CAA4BsC,KAAKgoE,SAAjC,CAA4ChoE,KAAKgJ,QAAjD,CAA2DhJ,KAAKgtC,KAAhE,CAAT,CAEA,MAEJ,IAAK,eAAL,CAEItrC,OAAS,GAAIoxG,cAAJ,CAAmB9yG,KAAKtC,KAAxB,CAA+BsC,KAAKgoE,SAApC,CAA+ChoE,KAAKlD,KAApD,CAA2DkD,KAAKjD,MAAhE,CAAT,CAEA,MAEJ,IAAK,WAAL,CAEI2E,OAAS,GAAIgxG,UAAJ,CAAe1yG,KAAKtC,KAApB,CAA2BsC,KAAKgoE,SAAhC,CAA2ChoE,KAAKgJ,QAAhD,CAA0DhJ,KAAK4I,KAA/D,CAAsE5I,KAAKqoE,QAA3E,CAAqFroE,KAAKgtC,KAA1F,CAAT,CAEA,MAEJ,IAAK,iBAAL,CAEItrC,OAAS,GAAI6wG,gBAAJ,CAAqBvyG,KAAKtC,KAA1B,CAAiCsC,KAAK0tC,WAAtC,CAAmD1tC,KAAKgoE,SAAxD,CAAT,CAEA,MAEJ,IAAK,aAAL,CAEI7nE,QAAQgK,IAAR,CAAc,oEAAd,EAEJ,IAAK,MAAL,CAEI,GAAIkvB,UAAW0pF,YAAa/iH,KAAKq5B,QAAlB,CAAf,CACA,GAAIud,UAAWosE,YAAahjH,KAAK42C,QAAlB,CAAf,CAEA,GAAKvd,SAASqrC,KAAT,EAAkBrrC,SAASqrC,KAAT,CAAe96D,MAAf,CAAwB,CAA/C,CAAmD,CAE/ClI,OAAS,GAAIyuF,YAAJ,CAAiB92D,QAAjB,CAA2Bud,QAA3B,CAAT,CAEH,CAJD,IAIO,CAEHl1C,OAAS,GAAI/D,KAAJ,CAAU07B,QAAV,CAAoBud,QAApB,CAAT,CAEH,CAED,MAEJ,IAAK,KAAL,CAEIl1C,OAAS,GAAI2tF,IAAJ,EAAT,CAEA,MAEJ,IAAK,MAAL,CAEI3tF,OAAS,GAAIwvF,KAAJ,CAAU6xB,YAAa/iH,KAAKq5B,QAAlB,CAAV,CAAwC2pF,YAAahjH,KAAK42C,QAAlB,CAAxC,CAAsE52C,KAAKsxD,IAA3E,CAAT,CAEA,MAEJ,IAAK,UAAL,CAEI5vD,OAAS,GAAIqwF,SAAJ,CAAcgxB,YAAa/iH,KAAKq5B,QAAlB,CAAd,CAA4C2pF,YAAahjH,KAAK42C,QAAlB,CAA5C,CAAT,CAEA,MAEJ,IAAK,cAAL,CAEIl1C,OAAS,GAAIyvF,aAAJ,CAAkB4xB,YAAa/iH,KAAKq5B,QAAlB,CAAlB,CAAgD2pF,YAAahjH,KAAK42C,QAAlB,CAAhD,CAAT,CAEA,MAEJ,IAAK,YAAL,CACA,IAAK,QAAL,CAEIl1C,OAAS,GAAIswF,OAAJ,CAAY+wB,YAAa/iH,KAAKq5B,QAAlB,CAAZ,CAA0C2pF,YAAahjH,KAAK42C,QAAlB,CAA1C,CAAT,CAEA,MAEJ,IAAK,QAAL,CAEIl1C,OAAS,GAAIstF,OAAJ,CAAYg0B,YAAahjH,KAAK42C,QAAlB,CAAZ,CAAT,CAEA,MAEJ,IAAK,OAAL,CAEIl1C,OAAS,GAAI8wF,MAAJ,EAAT,CAEA,MAEJ,QAEI9wF,OAAS,GAAI7C,SAAJ,EAAT,CA3JR,CA+JA6C,OAAO8c,IAAP,CAAcxe,KAAKwe,IAAnB,CAEA,GAAKxe,KAAKk0B,IAAL,GAActyB,SAAnB,CAA+BF,OAAOwyB,IAAP,CAAcl0B,KAAKk0B,IAAnB,CAE/B,GAAKl0B,KAAKgK,MAAL,GAAgBpI,SAArB,CAAiC,CAE7BF,OAAOsI,MAAP,CAAcyY,SAAd,CAAyBziB,KAAKgK,MAA9B,EAEA,GAAKhK,KAAKs0B,gBAAL,GAA0B1yB,SAA/B,CAA2CF,OAAO4yB,gBAAP,CAA0Bt0B,KAAKs0B,gBAA/B,CAC3C,GAAK5yB,OAAO4yB,gBAAZ,CAA+B5yB,OAAOsI,MAAP,CAAc6hB,SAAd,CAAyBnqB,OAAOnG,QAAhC,CAA0CmG,OAAOkF,UAAjD,CAA6DlF,OAAO0E,KAApE,EAElC,CAPD,IAOO,CAEH,GAAKpG,KAAKzE,QAAL,GAAkBqG,SAAvB,CAAmCF,OAAOnG,QAAP,CAAgBknB,SAAhB,CAA2BziB,KAAKzE,QAAhC,EACnC,GAAKyE,KAAK5B,QAAL,GAAkBwD,SAAvB,CAAmCF,OAAOtD,QAAP,CAAgBqkB,SAAhB,CAA2BziB,KAAK5B,QAAhC,EACnC,GAAK4B,KAAK4G,UAAL,GAAoBhF,SAAzB,CAAqCF,OAAOkF,UAAP,CAAkB6b,SAAlB,CAA6BziB,KAAK4G,UAAlC,EACrC,GAAK5G,KAAKoG,KAAL,GAAexE,SAApB,CAAgCF,OAAO0E,KAAP,CAAaqc,SAAb,CAAwBziB,KAAKoG,KAA7B,EAEnC,CAED,GAAKpG,KAAK5D,UAAL,GAAoBwF,SAAzB,CAAqCF,OAAOtF,UAAP,CAAoB4D,KAAK5D,UAAzB,CACrC,GAAK4D,KAAKpC,aAAL,GAAuBgE,SAA5B,CAAwCF,OAAO9D,aAAP,CAAuBoC,KAAKpC,aAA5B,CAExC,GAAKoC,KAAK1D,MAAV,CAAmB,CAEf,GAAK0D,KAAK1D,MAAL,CAAY6rE,IAAZ,GAAqBvmE,SAA1B,CAAsCF,OAAOpF,MAAP,CAAc6rE,IAAd,CAAqBnoE,KAAK1D,MAAL,CAAY6rE,IAAjC,CACtC,GAAKnoE,KAAK1D,MAAL,CAAY6J,MAAZ,GAAuBvE,SAA5B,CAAwCF,OAAOpF,MAAP,CAAc6J,MAAd,CAAuBnG,KAAK1D,MAAL,CAAY6J,MAAnC,CACxC,GAAKnG,KAAK1D,MAAL,CAAYO,OAAZ,GAAwB+E,SAA7B,CAAyCF,OAAOpF,MAAP,CAAcO,OAAd,CAAsB4lB,SAAtB,CAAiCziB,KAAK1D,MAAL,CAAYO,OAA7C,EACzC,GAAKmD,KAAK1D,MAAL,CAAY7C,MAAZ,GAAuBmI,SAA5B,CAAwCF,OAAOpF,MAAP,CAAc7C,MAAd,CAAuB,KAAK4oH,WAAL,CAAkBriH,KAAK1D,MAAL,CAAY7C,MAA9B,CAAvB,CAE3C,CAED,GAAKuG,KAAKi0C,OAAL,GAAiBryC,SAAtB,CAAkCF,OAAOuyC,OAAP,CAAiBj0C,KAAKi0C,OAAtB,CAClC,GAAKj0C,KAAKk0C,aAAL,GAAuBtyC,SAA5B,CAAwCF,OAAOwyC,aAAP,CAAuBl0C,KAAKk0C,aAA5B,CACxC,GAAKl0C,KAAKm0C,WAAL,GAAqBvyC,SAA1B,CAAsCF,OAAOyyC,WAAP,CAAqBn0C,KAAKm0C,WAA1B,CACtC,GAAKn0C,KAAKo0C,QAAL,GAAkBxyC,SAAvB,CAAmCF,OAAO0yC,QAAP,CAAkBp0C,KAAKo0C,QAAvB,CAEnC,GAAKp0C,KAAKyzC,QAAL,GAAkB7xC,SAAvB,CAAmC,CAE/B,GAAI6xC,UAAWzzC,KAAKyzC,QAApB,CAEA,IAAM,GAAIjmC,GAAI,CAAd,CAAiBA,EAAIimC,SAAS7pC,MAA9B,CAAsC4D,GAAtC,CAA6C,CAEzC9L,OAAO1E,GAAP,CAAY,KAAKqlH,WAAL,CAAkB5uE,SAAUjmC,CAAV,CAAlB,CAAiC2oC,UAAjC,CAA6CC,SAA7C,CAAZ,EAEH,CAEJ,CAED,GAAKp2C,KAAKuH,IAAL,GAAc,KAAnB,CAA2B,CAEvB,GAAI+nF,QAAStvF,KAAKsvF,MAAlB,CAEA,IAAM,GAAIj6E,GAAI,CAAd,CAAiBA,EAAIi6E,OAAO1lF,MAA5B,CAAoCyL,GAApC,CAA2C,CAEvC,GAAIi5E,OAAQgB,OAAQj6E,CAAR,CAAZ,CACA,GAAIqgC,OAAQh0C,OAAO8zC,mBAAP,CAA4B,MAA5B,CAAoC84C,MAAM5sF,MAA1C,CAAZ,CAEA,GAAKg0C,QAAU9zC,SAAf,CAA2B,CAEvBF,OAAO6tF,QAAP,CAAiB75C,KAAjB,CAAwB44C,MAAMtlF,QAA9B,EAEH,CAEJ,CAEJ,CAED,MAAOtH,OAAP,CAEH,CAn0BkC,CAAvC,EAu0BA,GAAIkhH,iBAAkB,CAClB/pG,UAAWA,SADO,CAElBC,sBAAuBA,qBAFL,CAGlBC,sBAAuBA,qBAHL,CAIlBC,iCAAkCA,gCAJhB,CAKlBC,iCAAkCA,gCALhB,CAMlBC,2BAA4BA,0BANV,CAOlBC,wBAAyBA,uBAPP,CAQlBC,wBAAyBA,uBARP,CAAtB,CAWA,GAAIypG,kBAAmB,CACnBxpG,eAAgBA,cADG,CAEnBC,oBAAqBA,mBAFF,CAGnBC,uBAAwBA,sBAHL,CAAvB,CAMA,GAAIupG,gBAAiB,CACjBtpG,cAAeA,aADE,CAEjBC,2BAA4BA,0BAFX,CAGjBC,0BAA2BA,yBAHV,CAIjBC,aAAcA,YAJG,CAKjBC,0BAA2BA,yBALV,CAMjBC,yBAA0BA,wBANT,CAArB,CASA;;OAKA,QAASopG,kBAAT,CAA4B5b,OAA5B,CAAsC,CAElC,GAAK,MAAO6b,kBAAP,GAA6B,WAAlC,CAAgD,CAE5C/iH,QAAQgK,IAAR,CAAc,6DAAd,EAEH,CAED,GAAK,MAAOg5G,MAAP,GAAiB,WAAtB,CAAoC,CAEhChjH,QAAQgK,IAAR,CAAc,iDAAd,EAEH,CAED,KAAKk9F,OAAL,CAAeA,UAAYzlG,SAAZ,CAAwBylG,OAAxB,CAAkCH,qBAAjD,CACA,KAAKzwE,OAAL,CAAe70B,SAAf,CAEH,CAEDqhH,kBAAkB52G,SAAlB,CAA8B,CAE1BI,YAAaw2G,iBAFa,CAI1BG,WAAY,QAASA,WAAT,CAAqB3sF,OAArB,CAA+B,CAEvC,KAAKA,OAAL,CAAeA,OAAf,CAEA,MAAO,KAAP,CAEH,CAVyB,CAY1B6wE,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAK1wE,MAAQj0B,SAAb,CAAyBi0B,IAAM,EAAN,CAEzB,GAAK,KAAK0mC,IAAL,GAAc36D,SAAnB,CAA+Bi0B,IAAM,KAAK0mC,IAAL,CAAY1mC,GAAlB,CAE/BA,IAAM,KAAKwxE,OAAL,CAAaN,UAAb,CAAyBlxE,GAAzB,CAAN,CAEA,GAAIrxB,OAAQ,IAAZ,CAEA,GAAI+iG,QAAStB,MAAMr5F,GAAN,CAAWipB,GAAX,CAAb,CAEA,GAAK0xE,SAAW3lG,SAAhB,CAA4B,CAExB4C,MAAM6iG,OAAN,CAAcT,SAAd,CAAyB/wE,GAAzB,EAEA2xE,WAAY,UAAY,CAEpB,GAAKnB,MAAL,CAAcA,OAAQkB,MAAR,EAEd/iG,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAND,CAMG,CANH,EAQA,MAAO0xE,OAAP,CAEH,CAED4b,MAAOttF,GAAP,EAAa8sD,IAAb,CAAmB,SAAW0gC,GAAX,CAAiB,CAEhC,MAAOA,KAAIC,IAAJ,EAAP,CAEH,CAJD,EAII3gC,IAJJ,CAIU,SAAW2gC,IAAX,CAAkB,CAExB,MAAOJ,mBAAmBI,IAAnB,CAAyB9+G,MAAMiyB,OAA/B,CAAP,CAEH,CARD,EAQIksD,IARJ,CAQU,SAAW4gC,WAAX,CAAyB,CAE/Btd,MAAMjpG,GAAN,CAAW64B,GAAX,CAAgB0tF,WAAhB,EAEA,GAAKld,MAAL,CAAcA,OAAQkd,WAAR,EAEd/+G,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EAEH,CAhBD,EAgBI2tF,KAhBJ,CAgBW,SAAWpiG,CAAX,CAAe,CAEtB,GAAKmlF,OAAL,CAAeA,QAASnlF,CAAT,EAEf5c,MAAM6iG,OAAN,CAAcR,OAAd,CAAuBhxE,GAAvB,EACArxB,MAAM6iG,OAAN,CAAcP,SAAd,CAAyBjxE,GAAzB,EAEH,CAvBD,EAyBH,CAjEyB,CAmE1By0E,eAAgB,yBAAW,WAAc,CAErC,MAAO,KAAP,CAEH,CAvEyB,CAyE1BpB,QAAS,iBAAWp8F,KAAX,CAAmB,CAExB,KAAKyvD,IAAL,CAAYzvD,KAAZ,CACA,MAAO,KAAP,CAEH,CA9EyB,CAA9B,CAkFA;;;QAKA,QAAS22G,UAAT,EAAqB,CAEjB,KAAKl8G,IAAL,CAAY,WAAZ,CAEA,KAAK7J,KAAL,CAAa,GAAIiqC,MAAJ,EAAb,CAEA,KAAK+7E,QAAL,CAAgB,EAAhB,CACA,KAAKC,WAAL,CAAmB,IAAnB,CAEH,CAEDr3G,OAAO4B,MAAP,CAAeu1G,UAAUp3G,SAAzB,CAAoC,CAEhC6kG,OAAQ,gBAAW11G,CAAX,CAAcC,CAAd,CAAkB,CAEtB,KAAKkoH,WAAL,CAAmB,GAAI3S,KAAJ,EAAnB,CACA,KAAK0S,QAAL,CAAcrlH,IAAd,CAAoB,KAAKslH,WAAzB,EACA,KAAKA,WAAL,CAAiBzS,MAAjB,CAAyB11G,CAAzB,CAA4BC,CAA5B,EAEH,CAR+B,CAUhC01G,OAAQ,gBAAW31G,CAAX,CAAcC,CAAd,CAAkB,CAEtB,KAAKkoH,WAAL,CAAiBxS,MAAjB,CAAyB31G,CAAzB,CAA4BC,CAA5B,EAEH,CAd+B,CAgBhC21G,iBAAkB,0BAAWC,IAAX,CAAiBC,IAAjB,CAAuB5E,EAAvB,CAA2BC,EAA3B,CAAgC,CAE9C,KAAKgX,WAAL,CAAiBvS,gBAAjB,CAAmCC,IAAnC,CAAyCC,IAAzC,CAA+C5E,EAA/C,CAAmDC,EAAnD,EAEH,CApB+B,CAsBhC4E,cAAe,uBAAWC,KAAX,CAAkBC,KAAlB,CAAyBC,KAAzB,CAAgCC,KAAhC,CAAuCjF,EAAvC,CAA2CC,EAA3C,CAAgD,CAE3D,KAAKgX,WAAL,CAAiBpS,aAAjB,CAAgCC,KAAhC,CAAuCC,KAAvC,CAA8CC,KAA9C,CAAqDC,KAArD,CAA4DjF,EAA5D,CAAgEC,EAAhE,EAEH,CA1B+B,CA4BhCiF,WAAY,oBAAW3V,GAAX,CAAiB,CAEzB,KAAK0nB,WAAL,CAAiB/R,UAAjB,CAA6B3V,GAA7B,EAEH,CAhC+B,CAkChC2nB,SAAU,kBAAWC,KAAX,CAAkBC,OAAlB,CAA4B,CAElC,QAASC,gBAAT,CAA0BC,UAA1B,CAAuC,CAEnC,GAAI3tE,QAAS,EAAb,CAEA,IAAM,GAAI7oC,GAAI,CAAR,CAAW6H,EAAI2uG,WAAWp6G,MAAhC,CAAwC4D,EAAI6H,CAA5C,CAA+C7H,GAA/C,CAAsD,CAElD,GAAIy2G,SAAUD,WAAYx2G,CAAZ,CAAd,CAEA,GAAI02G,UAAW,GAAI/R,MAAJ,EAAf,CACA+R,SAAS9T,MAAT,CAAkB6T,QAAQ7T,MAA1B,CAEA/5D,OAAOh4C,IAAP,CAAa6lH,QAAb,EAEH,CAED,MAAO7tE,OAAP,CAEH,CAED,QAAS8tE,qBAAT,CAA+B1lB,IAA/B,CAAqC2lB,SAArC,CAAiD,CAE7C,GAAIC,SAAUD,UAAUx6G,MAAxB,CAEA;AACA;AACA;AACA;AACA,GAAI6xF,QAAS,KAAb,CACA,IAAM,GAAIlvE,GAAI83F,QAAU,CAAlB,CAAqBh+F,EAAI,CAA/B,CAAkCA,EAAIg+F,OAAtC,CAA+C93F,EAAIlG,GAAnD,CAA0D,CAEtD,GAAIi+F,WAAYF,UAAW73F,CAAX,CAAhB,CACA,GAAIg4F,YAAaH,UAAW/9F,CAAX,CAAjB,CAEA,GAAIm+F,QAASD,WAAW/oH,CAAX,CAAe8oH,UAAU9oH,CAAtC,CACA,GAAIipH,QAASF,WAAW9oH,CAAX,CAAe6oH,UAAU7oH,CAAtC,CAEA,GAAKyD,KAAK6iB,GAAL,CAAU0iG,MAAV,EAAqBxwG,OAAOC,OAAjC,CAA2C,CAEvC;AACA,GAAKuwG,OAAS,CAAd,CAAkB,CAEdH,UAAYF,UAAW/9F,CAAX,CAAZ,CAA4Bm+F,OAAS,CAAEA,MAAX,CAC5BD,WAAaH,UAAW73F,CAAX,CAAb,CAA6Bk4F,OAAS,CAAEA,MAAX,CAEhC,CACD,GAAOhmB,KAAKhjG,CAAL,CAAS6oH,UAAU7oH,CAArB,EAA8BgjG,KAAKhjG,CAAL,CAAS8oH,WAAW9oH,CAAvD,CAA+D,SAE/D,GAAKgjG,KAAKhjG,CAAL,GAAW6oH,UAAU7oH,CAA1B,CAA8B,CAE1B,GAAKgjG,KAAKjjG,CAAL,GAAW8oH,UAAU9oH,CAA1B,CAA+B,MAAO,KAAP,CAAc;AAC7C;AAEH,CALD,IAKO,CAEH,GAAIkpH,UAAWD,QAAWhmB,KAAKjjG,CAAL,CAAS8oH,UAAU9oH,CAA9B,EAAoCgpH,QAAW/lB,KAAKhjG,CAAL,CAAS6oH,UAAU7oH,CAA9B,CAAnD,CACA,GAAKipH,WAAa,CAAlB,CAAyB,MAAO,KAAP,CAAc;AACvC,GAAKA,SAAW,CAAhB,CAAwB,SACxBjpB,OAAS,CAAEA,MAAX,CAAoB;AAEvB,CAEJ,CAzBD,IAyBO,CAEH;AACA,GAAKgD,KAAKhjG,CAAL,GAAW6oH,UAAU7oH,CAA1B,CAAgC,SAAY;AAC5C;AACA,GAAS8oH,WAAW/oH,CAAX,EAAgBijG,KAAKjjG,CAAvB,EAAgCijG,KAAKjjG,CAAL,EAAU8oH,UAAU9oH,CAAtD,EACG8oH,UAAU9oH,CAAV,EAAeijG,KAAKjjG,CAAtB,EAA+BijG,KAAKjjG,CAAL,EAAU+oH,WAAW/oH,CAD1D,CACmE,MAAO,KAAP,CAAa;AAChF;AAEH,CAEJ,CAED,MAAOigG,OAAP,CAEH,CAED,GAAIO,aAAcF,WAAWE,WAA7B,CAEA,GAAI0nB,UAAW,KAAKA,QAApB,CACA,GAAKA,SAAS95G,MAAT,GAAoB,CAAzB,CAA6B,MAAO,EAAP,CAE7B,GAAKk6G,UAAY,IAAjB,CAAwB,MAAOC,iBAAiBL,QAAjB,CAAP,CAGxB,GAAIiB,MAAJ,CAAWV,OAAX,CAAoBC,QAApB,CAA8B7tE,OAAS,EAAvC,CAEA,GAAKqtE,SAAS95G,MAAT,GAAoB,CAAzB,CAA6B,CAEzBq6G,QAAUP,SAAU,CAAV,CAAV,CACAQ,SAAW,GAAI/R,MAAJ,EAAX,CACA+R,SAAS9T,MAAT,CAAkB6T,QAAQ7T,MAA1B,CACA/5D,OAAOh4C,IAAP,CAAa6lH,QAAb,EACA,MAAO7tE,OAAP,CAEH,CAED,GAAIuuE,YAAa,CAAE5oB,YAAa0nB,SAAU,CAAV,EAAczY,SAAd,EAAb,CAAnB,CACA2Z,WAAaf,MAAQ,CAAEe,UAAV,CAAuBA,UAApC,CAEA;AAEA,GAAIC,kBAAmB,EAAvB,CACA,GAAIC,WAAY,EAAhB,CACA,GAAIC,eAAgB,EAApB,CACA,GAAIC,SAAU,CAAd,CACA,GAAIC,UAAJ,CAEAH,UAAWE,OAAX,EAAuBpjH,SAAvB,CACAmjH,cAAeC,OAAf,EAA2B,EAA3B,CAEA,IAAM,GAAIx3G,GAAI,CAAR,CAAW6H,EAAIquG,SAAS95G,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDy2G,QAAUP,SAAUl2G,CAAV,CAAV,CACAy3G,UAAYhB,QAAQhZ,SAAR,EAAZ,CACA0Z,MAAQ3oB,YAAaipB,SAAb,CAAR,CACAN,MAAQd,MAAQ,CAAEc,KAAV,CAAkBA,KAA1B,CAEA,GAAKA,KAAL,CAAa,CAET,GAAO,CAAEC,UAAJ,EAAsBE,UAAWE,OAAX,CAA3B,CAAoDA,UAEpDF,UAAWE,OAAX,EAAuB,CAAE/yG,EAAG,GAAIkgG,MAAJ,EAAL,CAAkB5lF,EAAG04F,SAArB,CAAvB,CACAH,UAAWE,OAAX,EAAqB/yG,CAArB,CAAuBm+F,MAAvB,CAAgC6T,QAAQ7T,MAAxC,CAEA,GAAKwU,UAAL,CAAkBI,UAClBD,cAAeC,OAAf,EAA2B,EAA3B,CAEA;AAEH,CAZD,IAYO,CAEHD,cAAeC,OAAf,EAAyB3mH,IAAzB,CAA+B,CAAEiuB,EAAG23F,OAAL,CAAc13F,EAAG04F,UAAW,CAAX,CAAjB,CAA/B,EAEA;AAEH,CAEJ,CAED;AACA,GAAK,CAAEH,UAAW,CAAX,CAAP,CAAwB,MAAOf,iBAAiBL,QAAjB,CAAP,CAGxB,GAAKoB,UAAUl7G,MAAV,CAAmB,CAAxB,CAA4B,CAExB,GAAIs7G,WAAY,KAAhB,CACA,GAAIC,UAAW,EAAf,CAEA,IAAM,GAAIC,MAAO,CAAX,CAAcC,KAAOP,UAAUl7G,MAArC,CAA6Cw7G,KAAOC,IAApD,CAA0DD,MAA1D,CAAoE,CAEhEP,iBAAkBO,IAAlB,EAA2B,EAA3B,CAEH,CAED,IAAM,GAAIA,MAAO,CAAX,CAAcC,KAAOP,UAAUl7G,MAArC,CAA6Cw7G,KAAOC,IAApD,CAA0DD,MAA1D,CAAoE,CAEhE,GAAIE,KAAMP,cAAeK,IAAf,CAAV,CAEA,IAAM,GAAIG,MAAO,CAAjB,CAAoBA,KAAOD,IAAI17G,MAA/B,CAAuC27G,MAAvC,CAAiD,CAE7C,GAAIC,IAAKF,IAAKC,IAAL,CAAT,CACA,GAAIE,iBAAkB,IAAtB,CAEA,IAAM,GAAIC,OAAQ,CAAlB,CAAqBA,MAAQZ,UAAUl7G,MAAvC,CAA+C87G,OAA/C,CAA0D,CAEtD,GAAKvB,qBAAsBqB,GAAGj5F,CAAzB,CAA4Bu4F,UAAWY,KAAX,EAAmBn5F,CAA/C,CAAL,CAA0D,CAEtD,GAAK64F,OAASM,KAAd,CAAsBP,SAAS9mH,IAAT,CAAe,CAAEsnH,MAAOP,IAAT,CAAeQ,IAAKF,KAApB,CAA2BprB,KAAMirB,IAAjC,CAAf,EACtB,GAAKE,eAAL,CAAuB,CAEnBA,gBAAkB,KAAlB,CACAZ,iBAAkBa,KAAlB,EAA0BrnH,IAA1B,CAAgCmnH,EAAhC,EAEH,CALD,IAKO,CAEHN,UAAY,IAAZ,CAEH,CAEJ,CAEJ,CACD,GAAKO,eAAL,CAAuB,CAEnBZ,iBAAkBO,IAAlB,EAAyB/mH,IAAzB,CAA+BmnH,EAA/B,EAEH,CAEJ,CAEJ,CACD;AACA,GAAKL,SAASv7G,MAAT,CAAkB,CAAvB,CAA2B,CAEvB;AACA,GAAK,CAAEs7G,SAAP,CAAmBH,cAAgBF,gBAAhB,CAEtB,CAEJ,CAED,GAAIgB,SAAJ,CAEA,IAAM,GAAIr4G,GAAI,CAAR,CAAW6qB,GAAKysF,UAAUl7G,MAAhC,CAAwC4D,EAAI6qB,EAA5C,CAAgD7qB,GAAhD,CAAuD,CAEnD02G,SAAWY,UAAWt3G,CAAX,EAAeyE,CAA1B,CACAokC,OAAOh4C,IAAP,CAAa6lH,QAAb,EACA2B,SAAWd,cAAev3G,CAAf,CAAX,CAEA,IAAM,GAAIstB,GAAI,CAAR,CAAW4e,GAAKmsE,SAASj8G,MAA/B,CAAuCkxB,EAAI4e,EAA3C,CAA+C5e,GAA/C,CAAsD,CAElDopF,SAAS/nB,KAAT,CAAe99F,IAAf,CAAqBwnH,SAAU/qF,CAAV,EAAcxO,CAAnC,EAEH,CAEJ,CAED;AAEA,MAAO+pB,OAAP,CAEH,CAnQ+B,CAApC,EAuQA;;;OAMA,QAASyvE,KAAT,CAAe9lH,IAAf,CAAsB,CAElB,KAAKuH,IAAL,CAAY,MAAZ,CAEA,KAAKvH,IAAL,CAAYA,IAAZ,CAEH,CAEDsM,OAAO4B,MAAP,CAAe43G,KAAKz5G,SAApB,CAA+B,CAE3Bg2F,OAAQ,IAFmB,CAI3BC,eAAgB,wBAAWJ,IAAX,CAAiB1pE,IAAjB,CAAuB0yE,SAAvB,CAAmC,CAE/C,GAAK1yE,OAAS52B,SAAd,CAA0B42B,KAAO,GAAP,CAC1B,GAAK0yE,YAActpG,SAAnB,CAA+BspG,UAAY,CAAZ,CAE/B,GAAI70D,QAAS,EAAb,CACA,GAAI0vE,OAAQC,YAAa9jB,IAAb,CAAmB1pE,IAAnB,CAAyB0yE,SAAzB,CAAoC,KAAKlrG,IAAzC,CAAZ,CAEA,IAAM,GAAIusB,GAAI,CAAR,CAAW45C,GAAK4/C,MAAMn8G,MAA5B,CAAoC2iB,EAAI45C,EAAxC,CAA4C55C,GAA5C,CAAmD,CAE/C3c,MAAMvD,SAAN,CAAgBhO,IAAhB,CAAqBg4E,KAArB,CAA4BhgC,MAA5B,CAAoC0vE,MAAOx5F,CAAP,EAAWq3F,QAAX,EAApC,EAEH,CAED,MAAOvtE,OAAP,CAEH,CApB0B,CAA/B,EAwBA,QAAS2vE,YAAT,CAAsB9jB,IAAtB,CAA4B1pE,IAA5B,CAAkC0yE,SAAlC,CAA6ClrG,IAA7C,CAAoD,CAEhD,GAAIimH,OAAQr2G,MAAMqnG,IAAN,CAAarnG,MAAMqnG,IAAN,CAAY/U,IAAZ,CAAb,CAAkCj0C,OAAQi0C,IAAR,EAAe3kC,KAAf,CAAsB,EAAtB,CAA9C,CAA0E;AAC1E,GAAIn3D,OAAQoyB,KAAOx4B,KAAK+wG,UAAxB,CACA,GAAImV,aAAc,CAAElmH,KAAKg5C,WAAL,CAAiBmtE,IAAjB,CAAwBnmH,KAAKg5C,WAAL,CAAiBotE,IAAzC,CAAgDpmH,KAAKqmH,kBAAvD,EAA8EjgH,KAAhG,CAEA,GAAI2/G,OAAQ,EAAZ,CAEA,GAAIpuE,SAAU,CAAd,CAAiBC,QAAU,CAA3B,CAEA,IAAM,GAAIpqC,GAAI,CAAd,CAAiBA,EAAIy4G,MAAMr8G,MAA3B,CAAmC4D,GAAnC,CAA0C,CAEtC,GAAI84G,MAAOL,MAAOz4G,CAAP,CAAX,CAEA,GAAK84G,OAAS,IAAd,CAAqB,CAEjB3uE,QAAU,CAAV,CACAC,SAAWsuE,WAAX,CAEH,CALD,IAKO,CAEH,GAAIK,KAAMC,WAAYF,IAAZ,CAAkBpb,SAAlB,CAA6B9kG,KAA7B,CAAoCuxC,OAApC,CAA6CC,OAA7C,CAAsD53C,IAAtD,CAAV,CACA23C,SAAW4uE,IAAI5uE,OAAf,CACAouE,MAAM1nH,IAAN,CAAYkoH,IAAIhqD,IAAhB,EAEH,CAEJ,CAED,MAAOwpD,MAAP,CAEH,CAED,QAASS,WAAT,CAAqBF,IAArB,CAA2Bpb,SAA3B,CAAsC9kG,KAAtC,CAA6CuxC,OAA7C,CAAsDC,OAAtD,CAA+D53C,IAA/D,CAAsE,CAElE,GAAIymH,OAAQzmH,KAAK0mH,MAAL,CAAaJ,IAAb,GAAuBtmH,KAAK0mH,MAAL,CAAa,GAAb,CAAnC,CAEA,GAAK,CAAED,KAAP,CAAe,OAEf,GAAIlqD,MAAO,GAAIknD,UAAJ,EAAX,CAEA,GAAIjoH,EAAJ,CAAOC,CAAP,CAAUkrH,GAAV,CAAeC,GAAf,CAAoBC,IAApB,CAA0BC,IAA1B,CAAgCC,IAAhC,CAAsCC,IAAtC,CAEA,GAAKP,MAAMxzB,CAAX,CAAe,CAEX,GAAIg0B,SAAUR,MAAMS,cAAN,GAA0BT,MAAMS,cAAN,CAAuBT,MAAMxzB,CAAN,CAAQ11B,KAAR,CAAe,GAAf,CAAjD,CAAd,CAEA,IAAM,GAAI/vD,GAAI,CAAR,CAAW6H,EAAI4xG,QAAQr9G,MAA7B,CAAqC4D,EAAI6H,CAAzC,EAA8C,CAE1C,GAAI8xG,QAASF,QAASz5G,GAAT,CAAb,CAEA,OAAS25G,MAAT,EAEI,IAAK,GAAL,CAAU;AAEN3rH,EAAIyrH,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BuxC,OAA9B,CACAl8C,EAAIwrH,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BwxC,OAA9B,CAEA2kB,KAAK20C,MAAL,CAAa11G,CAAb,CAAgBC,CAAhB,EAEA,MAEJ,IAAK,GAAL,CAAU;AAEND,EAAIyrH,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BuxC,OAA9B,CACAl8C,EAAIwrH,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BwxC,OAA9B,CAEA2kB,KAAK40C,MAAL,CAAa31G,CAAb,CAAgBC,CAAhB,EAEA,MAEJ,IAAK,GAAL,CAAU;AAENkrH,IAAMM,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BuxC,OAAhC,CACAivE,IAAMK,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BwxC,OAAhC,CACAivE,KAAOI,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BuxC,OAAjC,CACAmvE,KAAOG,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BwxC,OAAjC,CAEA2kB,KAAK60C,gBAAL,CAAuByV,IAAvB,CAA6BC,IAA7B,CAAmCH,GAAnC,CAAwCC,GAAxC,EAEA,MAEJ,IAAK,GAAL,CAAU;AAEND,IAAMM,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BuxC,OAAhC,CACAivE,IAAMK,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BwxC,OAAhC,CACAivE,KAAOI,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BuxC,OAAjC,CACAmvE,KAAOG,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BwxC,OAAjC,CACAmvE,KAAOE,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BuxC,OAAjC,CACAqvE,KAAOC,QAASz5G,GAAT,EAAkBpH,KAAlB,CAA0BwxC,OAAjC,CAEA2kB,KAAKg1C,aAAL,CAAoBsV,IAApB,CAA0BC,IAA1B,CAAgCC,IAAhC,CAAsCC,IAAtC,CAA4CL,GAA5C,CAAiDC,GAAjD,EAEA,MA1CR,CA8CH,CAEJ,CAED,MAAO,CAAEjvE,QAAS8uE,MAAMW,EAAN,CAAWhhH,KAAtB,CAA6Bm2D,KAAMA,IAAnC,CAAP,CAEH,CAED;;OAIA,QAAS8qD,WAAT,CAAqBhgB,OAArB,CAA+B,CAE3B,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEH,CAED56F,OAAO4B,MAAP,CAAem5G,WAAWh7G,SAA1B,CAAqC,CAEjCi7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAI/hG,OAAQ,IAAZ,CAEA,GAAIglG,QAAS,GAAIpC,WAAJ,CAAgB,KAAKC,OAArB,CAAb,CACAmC,OAAON,OAAP,CAAgB,KAAK3sC,IAArB,EACAitC,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAWqsE,IAAX,CAAkB,CAEhC,GAAIsK,KAAJ,CAEA,GAAI,CAEAA,KAAOl2D,KAAKa,KAAL,CAAY+qD,IAAZ,CAAP,CAEH,CAAC,MAAQ9gF,CAAR,CAAY,CAEVjhB,QAAQgK,IAAR,CAAc,uFAAd,EACAqiG,KAAOl2D,KAAKa,KAAL,CAAY+qD,KAAK6f,SAAL,CAAgB,EAAhB,CAAoB7f,KAAKt4F,MAAL,CAAc,CAAlC,CAAZ,CAAP,CAEH,CAED,GAAIw4F,MAAO59F,MAAM2yC,KAAN,CAAaq1D,IAAb,CAAX,CAEA,GAAKnG,MAAL,CAAcA,OAAQjE,IAAR,EAEjB,CAnBD,CAmBGkE,UAnBH,CAmBeC,OAnBf,EAqBH,CA7BgC,CA+BjCpvD,MAAO,eAAWq1D,IAAX,CAAkB,CAErB,MAAO,IAAIsZ,KAAJ,CAAUtZ,IAAV,CAAP,CAEH,CAnCgC,CAqCjCtD,QAAS,iBAAWp8F,KAAX,CAAmB,CAExB,KAAKyvD,IAAL,CAAYzvD,KAAZ,CACA,MAAO,KAAP,CAEH,CA1CgC,CAArC,EA8CA;;OAIA,GAAI5R,QAAJ,CAEA,GAAIosH,cAAe,CAEfvsH,WAAY,qBAAY,CAEpB,GAAKG,UAAY0G,SAAjB,CAA6B,CAEzB1G,QAAU,IAAMmM,OAAOigH,YAAP,EAAuBjgH,OAAOkgH,kBAApC,GAAV,CAEH,CAED,MAAOrsH,QAAP,CAEH,CAZc,CAcf40C,WAAY,oBAAWhjC,KAAX,CAAmB,CAE3B5R,QAAU4R,KAAV,CAEH,CAlBc,CAAnB,CAsBA;;OAIA,QAAS06G,YAAT,CAAsBngB,OAAtB,CAAgC,CAE5B,KAAKA,OAAL,CAAiBA,UAAYzlG,SAAd,CAA4BylG,OAA5B,CAAsCH,qBAArD,CAEH,CAED56F,OAAO4B,MAAP,CAAes5G,YAAYn7G,SAA3B,CAAsC,CAElCi7F,KAAM,cAAWzxE,GAAX,CAAgBwwE,MAAhB,CAAwBC,UAAxB,CAAoCC,OAApC,CAA8C,CAEhD,GAAIiD,QAAS,GAAIpC,WAAJ,CAAgB,KAAKC,OAArB,CAAb,CACAmC,OAAOL,eAAP,CAAwB,aAAxB,EACAK,OAAOlC,IAAP,CAAazxE,GAAb,CAAkB,SAAW4a,MAAX,CAAoB,CAElC,GAAIv1C,SAAUosH,aAAavsH,UAAb,EAAd,CAEAG,QAAQusH,eAAR,CAAyBh3E,MAAzB,CAAiC,SAAWi3E,WAAX,CAAyB,CAEtDrhB,OAAQqhB,WAAR,EAEH,CAJD,EAMH,CAVD,CAUGphB,UAVH,CAUeC,OAVf,EAYH,CAlBiC,CAAtC,EAsBA;;OAIA,QAASohB,aAAT,EAAwB,CAEpB,KAAKpgH,IAAL,CAAY,cAAZ,CAEA,KAAK22E,MAAL,CAAc,CAAd,CAEA,KAAK0pC,MAAL,CAAc,KAAd,CAEA,KAAKhoC,OAAL,CAAe,GAAIllF,kBAAJ,EAAf,CACA,KAAKklF,OAAL,CAAatsC,MAAb,CAAoBJ,MAApB,CAA4B,CAA5B,EACA,KAAK0sC,OAAL,CAAatrD,gBAAb,CAAgC,KAAhC,CAEA,KAAKwrD,OAAL,CAAe,GAAIplF,kBAAJ,EAAf,CACA,KAAKolF,OAAL,CAAaxsC,MAAb,CAAoBJ,MAApB,CAA4B,CAA5B,EACA,KAAK4sC,OAAL,CAAaxrD,gBAAb,CAAgC,KAAhC,CAEH,CAEDhoB,OAAO4B,MAAP,CAAey5G,aAAat7G,SAA5B,CAAuC,CAEnC1M,OAAU,UAAY,CAElB,GAAIkoH,SAAJ,CAAc1pC,KAAd,CAAqBr0E,GAArB,CAA0Bo0E,MAA1B,CAAkCvhF,IAAlC,CAAwCyvB,GAAxC,CAA6CnoB,IAA7C,CAAmD2jH,MAAnD,CAEA,GAAIE,UAAW,GAAI7kG,QAAJ,EAAf,CACA,GAAI8kG,SAAU,GAAI9kG,QAAJ,EAAd,CAEA,MAAO,SAAStjB,OAAT,CAAiBlG,MAAjB,CAA0B,CAE7B,GAAI8oD,aAAcslE,WAAa,IAAb,EAAqB1pC,QAAU1kF,OAAO0kF,KAAtC,EAA+Cr0E,MAAQrQ,OAAOqQ,GAA9D,EACdo0E,SAAWzkF,OAAOykF,MAAP,CAAgB,KAAKA,MADlB,EAC4BvhF,OAASlD,OAAOkD,IAD5C,EAEdyvB,MAAQ3yB,OAAO2yB,GAFD,EAEQnoB,OAASxK,OAAOwK,IAFxB,EAEgC2jH,SAAW,KAAKA,MAFlE,CAIA,GAAKrlE,WAAL,CAAmB,CAEfslE,SAAW,IAAX,CACA1pC,MAAQ1kF,OAAO0kF,KAAf,CACAr0E,IAAMrQ,OAAOqQ,GAAb,CACAo0E,OAASzkF,OAAOykF,MAAP,CAAgB,KAAKA,MAA9B,CACAvhF,KAAOlD,OAAOkD,IAAd,CACAyvB,IAAM3yB,OAAO2yB,GAAb,CACAnoB,KAAOxK,OAAOwK,IAAd,CAEA;AACA;AAEA,GAAImtB,kBAAmB33B,OAAO23B,gBAAP,CAAwB9yB,KAAxB,EAAvB,CACAspH,OAAS,KAAKA,MAAL,CAAc,CAAvB,CACA,GAAII,oBAAqBJ,OAASjrH,IAAT,CAAgBwhF,KAAzC,CACA,GAAI8pC,MAAStrH,KAAOuC,KAAK2K,GAAL,CAAUkU,MAAMC,OAAN,CAAgBlU,GAAhB,CAAsB,GAAhC,CAAT,CAAmD7F,IAA9D,CACA,GAAIikH,KAAJ,CAAUC,IAAV,CAEA;AAEAJ,QAAQ1mG,QAAR,CAAkB,EAAlB,EAAyB,CAAEumG,MAA3B,CACAE,SAASzmG,QAAT,CAAmB,EAAnB,EAA0BumG,MAA1B,CAEA;AAEAM,KAAO,CAAED,IAAF,CAAS/pC,MAAT,CAAkB8pC,kBAAzB,CACAG,KAAOF,KAAO/pC,MAAP,CAAgB8pC,kBAAvB,CAEA52F,iBAAiB/P,QAAjB,CAA2B,CAA3B,EAAiC,EAAI1kB,IAAJ,EAAawrH,KAAOD,IAApB,CAAjC,CACA92F,iBAAiB/P,QAAjB,CAA2B,CAA3B,EAAiC,CAAE8mG,KAAOD,IAAT,GAAoBC,KAAOD,IAA3B,CAAjC,CAEA,KAAKtoC,OAAL,CAAaxuD,gBAAb,CAA8B3sB,IAA9B,CAAoC2sB,gBAApC,EAEA;AAEA82F,KAAO,CAAED,IAAF,CAAS/pC,MAAT,CAAkB8pC,kBAAzB,CACAG,KAAOF,KAAO/pC,MAAP,CAAgB8pC,kBAAvB,CAEA52F,iBAAiB/P,QAAjB,CAA2B,CAA3B,EAAiC,EAAI1kB,IAAJ,EAAawrH,KAAOD,IAApB,CAAjC,CACA92F,iBAAiB/P,QAAjB,CAA2B,CAA3B,EAAiC,CAAE8mG,KAAOD,IAAT,GAAoBC,KAAOD,IAA3B,CAAjC,CAEA,KAAKpoC,OAAL,CAAa1uD,gBAAb,CAA8B3sB,IAA9B,CAAoC2sB,gBAApC,EAEH,CAED,KAAKwuD,OAAL,CAAavuD,WAAb,CAAyB5sB,IAAzB,CAA+BhL,OAAO43B,WAAtC,EAAoDrQ,QAApD,CAA8D+mG,OAA9D,EACA,KAAKjoC,OAAL,CAAazuD,WAAb,CAAyB5sB,IAAzB,CAA+BhL,OAAO43B,WAAtC,EAAoDrQ,QAApD,CAA8D8mG,QAA9D,EAEH,CAvDD,CAyDH,CAhEO,EAF2B,CAAvC,EAsEA;;;;;OAOA,QAASM,WAAT,CAAqBzrH,IAArB,CAA2ByvB,GAA3B,CAAgCi8F,cAAhC,CAAiD,CAE7CxpH,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,YAAZ,CAEA,GAAIuC,KAAM,EAAV,CAAco0E,OAAS,CAAvB,CAEA,GAAIoqC,UAAW,GAAI5tH,kBAAJ,CAAuBoP,GAAvB,CAA4Bo0E,MAA5B,CAAoCvhF,IAApC,CAA0CyvB,GAA1C,CAAf,CACAk8F,SAASjjH,EAAT,CAAYhJ,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACAisH,SAAS/hH,MAAT,CAAiB,GAAIzE,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAjB,EACA,KAAK9E,GAAL,CAAUsrH,QAAV,EAEA,GAAIC,UAAW,GAAI7tH,kBAAJ,CAAuBoP,GAAvB,CAA4Bo0E,MAA5B,CAAoCvhF,IAApC,CAA0CyvB,GAA1C,CAAf,CACAm8F,SAASljH,EAAT,CAAYhJ,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACAksH,SAAShiH,MAAT,CAAiB,GAAIzE,QAAJ,CAAa,CAAE,CAAf,CAAkB,CAAlB,CAAqB,CAArB,CAAjB,EACA,KAAK9E,GAAL,CAAUurH,QAAV,EAEA,GAAIC,UAAW,GAAI9tH,kBAAJ,CAAuBoP,GAAvB,CAA4Bo0E,MAA5B,CAAoCvhF,IAApC,CAA0CyvB,GAA1C,CAAf,CACAo8F,SAASnjH,EAAT,CAAYhJ,GAAZ,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,EACAmsH,SAASjiH,MAAT,CAAiB,GAAIzE,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAjB,EACA,KAAK9E,GAAL,CAAUwrH,QAAV,EAEA,GAAIC,UAAW,GAAI/tH,kBAAJ,CAAuBoP,GAAvB,CAA4Bo0E,MAA5B,CAAoCvhF,IAApC,CAA0CyvB,GAA1C,CAAf,CACAq8F,SAASpjH,EAAT,CAAYhJ,GAAZ,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAE,CAAzB,EACAosH,SAASliH,MAAT,CAAiB,GAAIzE,QAAJ,CAAa,CAAb,CAAgB,CAAE,CAAlB,CAAqB,CAArB,CAAjB,EACA,KAAK9E,GAAL,CAAUyrH,QAAV,EAEA,GAAIC,UAAW,GAAIhuH,kBAAJ,CAAuBoP,GAAvB,CAA4Bo0E,MAA5B,CAAoCvhF,IAApC,CAA0CyvB,GAA1C,CAAf,CACAs8F,SAASrjH,EAAT,CAAYhJ,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACAqsH,SAASniH,MAAT,CAAiB,GAAIzE,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAjB,EACA,KAAK9E,GAAL,CAAU0rH,QAAV,EAEA,GAAIC,UAAW,GAAIjuH,kBAAJ,CAAuBoP,GAAvB,CAA4Bo0E,MAA5B,CAAoCvhF,IAApC,CAA0CyvB,GAA1C,CAAf,CACAu8F,SAAStjH,EAAT,CAAYhJ,GAAZ,CAAiB,CAAjB,CAAoB,CAAE,CAAtB,CAAyB,CAAzB,EACAssH,SAASpiH,MAAT,CAAiB,GAAIzE,QAAJ,CAAa,CAAb,CAAgB,CAAhB,CAAmB,CAAE,CAArB,CAAjB,EACA,KAAK9E,GAAL,CAAU2rH,QAAV,EAEA,GAAIlyF,SAAU,CAAE1C,OAAQpZ,SAAV,CAAqBkZ,UAAWla,YAAhC,CAA8Cma,UAAWna,YAAzD,CAAd,CAEA,KAAKi+D,YAAL,CAAoB,GAAI1gD,sBAAJ,CAA2BmxF,cAA3B,CAA2CA,cAA3C,CAA2D5xF,OAA3D,CAApB,CACA,KAAKmhD,YAAL,CAAkB/gD,OAAlB,CAA0B3C,IAA1B,CAAiC,YAAjC,CAEA,KAAKv0B,MAAL,CAAc,SAAWjG,QAAX,CAAqBF,KAArB,CAA6B,CAEvC,GAAK,KAAKg6C,MAAL,GAAgB,IAArB,CAA4B,KAAK9Z,iBAAL,GAE5B,GAAIk+C,cAAe,KAAKA,YAAxB,CACA,GAAIrjD,iBAAkBqjD,aAAa/gD,OAAb,CAAqBtC,eAA3C,CAEAqjD,aAAa/gD,OAAb,CAAqBtC,eAArB,CAAuC,KAAvC,CAEAqjD,aAAazgD,cAAb,CAA8B,CAA9B,CACAz9B,SAASkG,MAAT,CAAiBpG,KAAjB,CAAwB8uH,QAAxB,CAAkC1wC,YAAlC,EAEAA,aAAazgD,cAAb,CAA8B,CAA9B,CACAz9B,SAASkG,MAAT,CAAiBpG,KAAjB,CAAwB+uH,QAAxB,CAAkC3wC,YAAlC,EAEAA,aAAazgD,cAAb,CAA8B,CAA9B,CACAz9B,SAASkG,MAAT,CAAiBpG,KAAjB,CAAwBgvH,QAAxB,CAAkC5wC,YAAlC,EAEAA,aAAazgD,cAAb,CAA8B,CAA9B,CACAz9B,SAASkG,MAAT,CAAiBpG,KAAjB,CAAwBivH,QAAxB,CAAkC7wC,YAAlC,EAEAA,aAAazgD,cAAb,CAA8B,CAA9B,CACAz9B,SAASkG,MAAT,CAAiBpG,KAAjB,CAAwBkvH,QAAxB,CAAkC9wC,YAAlC,EAEAA,aAAa/gD,OAAb,CAAqBtC,eAArB,CAAuCA,eAAvC,CAEAqjD,aAAazgD,cAAb,CAA8B,CAA9B,CACAz9B,SAASkG,MAAT,CAAiBpG,KAAjB,CAAwBmvH,QAAxB,CAAkC/wC,YAAlC,EAEAl+E,SAAS+xE,eAAT,CAA0B,IAA1B,EAEH,CA/BD,CAiCA,KAAK9a,KAAL,CAAa,SAAWj3D,QAAX,CAAqBgE,KAArB,CAA4BkxC,KAA5B,CAAmCsiC,OAAnC,CAA6C,CAEtD,GAAI0G,cAAe,KAAKA,YAAxB,CAEA,IAAM,GAAIpqE,GAAI,CAAd,CAAiBA,EAAI,CAArB,CAAwBA,GAAxB,CAA+B,CAE3BoqE,aAAazgD,cAAb,CAA8B3pB,CAA9B,CACA9T,SAAS+xE,eAAT,CAA0BmM,YAA1B,EAEAl+E,SAASi3D,KAAT,CAAgBjzD,KAAhB,CAAuBkxC,KAAvB,CAA8BsiC,OAA9B,EAEH,CAEDx3E,SAAS+xE,eAAT,CAA0B,IAA1B,EAEH,CAfD,CAiBH,CAED28C,WAAW/7G,SAAX,CAAuBC,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAvB,CACA+7G,WAAW/7G,SAAX,CAAqBI,WAArB,CAAmC27G,UAAnC,CAEA;;OAIA,QAASQ,cAAT,EAAyB,CAErB/pH,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,eAAZ,CAEA,KAAKrM,OAAL,CAAeosH,aAAavsH,UAAb,EAAf,CAEA,KAAK8tH,IAAL,CAAY,KAAK3tH,OAAL,CAAa4tH,UAAb,EAAZ,CACA,KAAKD,IAAL,CAAUE,OAAV,CAAmB,KAAK7tH,OAAL,CAAa8tH,WAAhC,EAEA,KAAKnqD,MAAL,CAAc,IAAd,CAEH,CAED+pD,cAAcv8G,SAAd,CAA0BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAE1EI,YAAam8G,aAF6D,CAI1EK,SAAU,mBAAY,CAElB,MAAO,MAAKJ,IAAZ,CAEH,CARyE,CAU1EK,aAAc,uBAAa,CAEvB,GAAK,KAAKrqD,MAAL,GAAgB,IAArB,CAA4B,CAExB,KAAKgqD,IAAL,CAAUM,UAAV,CAAsB,KAAKtqD,MAA3B,EACA,KAAKA,MAAL,CAAYsqD,UAAZ,CAAwB,KAAKjuH,OAAL,CAAa8tH,WAArC,EACA,KAAKH,IAAL,CAAUE,OAAV,CAAmB,KAAK7tH,OAAL,CAAa8tH,WAAhC,EACA,KAAKnqD,MAAL,CAAc,IAAd,CAEH,CAEJ,CArByE,CAuB1EuqD,UAAW,oBAAY,CAEnB,MAAO,MAAKvqD,MAAZ,CAEH,CA3ByE,CA6B1EwqD,UAAW,mBAAWv8G,KAAX,CAAmB,CAE1B,GAAK,KAAK+xD,MAAL,GAAgB,IAArB,CAA4B,CAExB,KAAKgqD,IAAL,CAAUM,UAAV,CAAsB,KAAKtqD,MAA3B,EACA,KAAKA,MAAL,CAAYsqD,UAAZ,CAAwB,KAAKjuH,OAAL,CAAa8tH,WAArC,EAEH,CALD,IAKO,CAEH,KAAKH,IAAL,CAAUM,UAAV,CAAsB,KAAKjuH,OAAL,CAAa8tH,WAAnC,EAEH,CAED,KAAKnqD,MAAL,CAAc/xD,KAAd,CACA,KAAK+7G,IAAL,CAAUE,OAAV,CAAmB,KAAKlqD,MAAxB,EACA,KAAKA,MAAL,CAAYkqD,OAAZ,CAAqB,KAAK7tH,OAAL,CAAa8tH,WAAlC,EAEH,CA9CyE,CAgD1EM,gBAAiB,0BAAY,CAEzB,MAAO,MAAKT,IAAL,CAAUA,IAAV,CAAe/7G,KAAtB,CAEH,CApDyE,CAsD1Ey8G,gBAAiB,yBAAWz8G,KAAX,CAAmB,CAEhC,KAAK+7G,IAAL,CAAUA,IAAV,CAAeW,eAAf,CAAgC18G,KAAhC,CAAuC,KAAK5R,OAAL,CAAauuH,WAApD,CAAiE,IAAjE,EAEH,CA1DyE,CA4D1E/vF,kBAAqB,UAAY,CAE7B,GAAIn+B,UAAW,GAAIuG,QAAJ,EAAf,CACA,GAAI8E,YAAa,GAAIzB,WAAJ,EAAjB,CACA,GAAIiB,OAAQ,GAAItE,QAAJ,EAAZ,CAEA,GAAIw/E,aAAc,GAAIx/E,QAAJ,EAAlB,CAEA,MAAO,SAAS43B,kBAAT,CAA4Bwc,KAA5B,CAAoC,CAEvCr3C,SAASwN,SAAT,CAAmBqtB,iBAAnB,CAAqC3pB,IAArC,CAA2C,IAA3C,CAAiDmmC,KAAjD,EAEA,GAAIphC,UAAW,KAAK5Z,OAAL,CAAa4Z,QAA5B,CACA,GAAIzP,IAAK,KAAKA,EAAd,CAEA,KAAKgsB,WAAL,CAAiBxF,SAAjB,CAA4BtwB,QAA5B,CAAsCqL,UAAtC,CAAkDR,KAAlD,EAEAk7E,YAAYjlF,GAAZ,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAE,CAAzB,EAA6BsJ,eAA7B,CAA8CiB,UAA9C,EAEA,GAAKkO,SAAS40G,SAAd,CAA0B,CAEtB50G,SAAS40G,SAAT,CAAmBC,cAAnB,CAAmCpuH,SAASC,CAA5C,CAA+C,KAAKN,OAAL,CAAauuH,WAA5D,EACA30G,SAAS80G,SAAT,CAAmBD,cAAnB,CAAmCpuH,SAASE,CAA5C,CAA+C,KAAKP,OAAL,CAAauuH,WAA5D,EACA30G,SAAS+0G,SAAT,CAAmBF,cAAnB,CAAmCpuH,SAASG,CAA5C,CAA+C,KAAKR,OAAL,CAAauuH,WAA5D,EACA30G,SAASg1G,QAAT,CAAkBH,cAAlB,CAAkCroC,YAAY9lF,CAA9C,CAAiD,KAAKN,OAAL,CAAauuH,WAA9D,EACA30G,SAASi1G,QAAT,CAAkBJ,cAAlB,CAAkCroC,YAAY7lF,CAA9C,CAAiD,KAAKP,OAAL,CAAauuH,WAA9D,EACA30G,SAASk1G,QAAT,CAAkBL,cAAlB,CAAkCroC,YAAY5lF,CAA9C,CAAiD,KAAKR,OAAL,CAAauuH,WAA9D,EACA30G,SAASm1G,GAAT,CAAaN,cAAb,CAA6BtkH,GAAG7J,CAAhC,CAAmC,KAAKN,OAAL,CAAauuH,WAAhD,EACA30G,SAASo1G,GAAT,CAAaP,cAAb,CAA6BtkH,GAAG5J,CAAhC,CAAmC,KAAKP,OAAL,CAAauuH,WAAhD,EACA30G,SAASq1G,GAAT,CAAaR,cAAb,CAA6BtkH,GAAG3J,CAAhC,CAAmC,KAAKR,OAAL,CAAauuH,WAAhD,EAEH,CAZD,IAYO,CAEH30G,SAASoU,WAAT,CAAsB3tB,SAASC,CAA/B,CAAkCD,SAASE,CAA3C,CAA8CF,SAASG,CAAvD,EACAoZ,SAASs1G,cAAT,CAAyB9oC,YAAY9lF,CAArC,CAAwC8lF,YAAY7lF,CAApD,CAAuD6lF,YAAY5lF,CAAnE,CAAsE2J,GAAG7J,CAAzE,CAA4E6J,GAAG5J,CAA/E,CAAkF4J,GAAG3J,CAArF,EAEH,CAEJ,CA9BD,CAgCH,CAxCkB,EA5DuD,CAApD,CAA1B,CAwGA;;;OAKA,QAAS2uH,MAAT,CAAgBv1G,QAAhB,CAA2B,CAEvBjW,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKxI,IAAL,CAAY,OAAZ,CAEA,KAAKrM,OAAL,CAAe4Z,SAAS5Z,OAAxB,CAEA,KAAK2tH,IAAL,CAAY,KAAK3tH,OAAL,CAAa4tH,UAAb,EAAZ,CACA,KAAKD,IAAL,CAAUE,OAAV,CAAmBj0G,SAASm0G,QAAT,EAAnB,EAEA,KAAKqB,QAAL,CAAgB,KAAhB,CAEA,KAAK75E,MAAL,CAAc,IAAd,CACA,KAAKv0C,IAAL,CAAY,KAAZ,CACA,KAAK88G,SAAL,CAAiB,CAAjB,CACA,KAAK/zG,MAAL,CAAc,CAAd,CACA,KAAKslH,YAAL,CAAoB,CAApB,CACA,KAAKC,SAAL,CAAiB,KAAjB,CACA,KAAKC,kBAAL,CAA0B,IAA1B,CACA,KAAKC,UAAL,CAAkB,OAAlB,CAEA,KAAKC,OAAL,CAAe,EAAf,CAEH,CAEDN,MAAMh+G,SAAN,CAAkBC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAf,CAAoD,CAElEI,YAAa49G,KAFqD,CAIlEO,UAAW,oBAAY,CAEnB,MAAO,MAAK/B,IAAZ,CAEH,CARiE,CAUlEgC,cAAe,uBAAWC,SAAX,CAAuB,CAElC,KAAKL,kBAAL,CAA0B,KAA1B,CACA,KAAKC,UAAL,CAAkB,WAAlB,CACA,KAAKv8G,MAAL,CAAc28G,SAAd,CACA,KAAK/B,OAAL,GAEA,MAAO,KAAP,CAEH,CAnBiE,CAqBlEgC,sBAAuB,+BAAWC,YAAX,CAA0B,CAE7C,KAAKP,kBAAL,CAA0B,KAA1B,CACA,KAAKC,UAAL,CAAkB,WAAlB,CACA,KAAKv8G,MAAL,CAAc,KAAKjT,OAAL,CAAa+vH,wBAAb,CAAuCD,YAAvC,CAAd,CACA,KAAKjC,OAAL,GAEA,MAAO,KAAP,CAEH,CA9BiE,CAgClEmC,UAAW,mBAAWxD,WAAX,CAAyB,CAEhC,KAAKj3E,MAAL,CAAci3E,WAAd,CACA,KAAKgD,UAAL,CAAkB,QAAlB,CAEA,GAAK,KAAKJ,QAAV,CAAqB,KAAKa,IAAL,GAErB,MAAO,KAAP,CAEH,CAzCiE,CA2ClEA,KAAM,eAAY,CAEd,GAAK,KAAKX,SAAL,GAAmB,IAAxB,CAA+B,CAE3BrqH,QAAQgK,IAAR,CAAc,wCAAd,EACA,OAEH,CAED,GAAK,KAAKsgH,kBAAL,GAA4B,KAAjC,CAAyC,CAErCtqH,QAAQgK,IAAR,CAAc,kDAAd,EACA,OAEH,CAED,GAAIgE,QAAS,KAAKjT,OAAL,CAAakwH,kBAAb,EAAb,CAEAj9G,OAAOsiC,MAAP,CAAgB,KAAKA,MAArB,CACAtiC,OAAOjS,IAAP,CAAc,KAAKA,IAAnB,CACAiS,OAAOk9G,OAAP,CAAiB,KAAKC,OAAL,CAAar9G,IAAb,CAAmB,IAAnB,CAAjB,CACAE,OAAOo8G,YAAP,CAAoBZ,cAApB,CAAoC,KAAKY,YAAzC,CAAuD,KAAKvR,SAA5D,EACA,KAAKA,SAAL,CAAiB,KAAK99G,OAAL,CAAauuH,WAA9B,CACAt7G,OAAOhN,KAAP,CAAc,KAAK63G,SAAnB,CAA8B,KAAK/zG,MAAnC,EAEA,KAAKulH,SAAL,CAAiB,IAAjB,CAEA,KAAKr8G,MAAL,CAAcA,MAAd,CAEA,MAAO,MAAK46G,OAAL,EAAP,CAEH,CA1EiE,CA4ElEwC,MAAO,gBAAY,CAEf,GAAK,KAAKd,kBAAL,GAA4B,KAAjC,CAAyC,CAErCtqH,QAAQgK,IAAR,CAAc,kDAAd,EACA,OAEH,CAED,GAAK,KAAKqgH,SAAL,GAAmB,IAAxB,CAA+B,CAE3B,KAAKr8G,MAAL,CAAY2B,IAAZ,GACA,KAAK7K,MAAL,EAAe,CAAE,KAAK/J,OAAL,CAAauuH,WAAb,CAA2B,KAAKzQ,SAAlC,EAAgD,KAAKuR,YAApE,CACA,KAAKC,SAAL,CAAiB,KAAjB,CAEH,CAED,MAAO,KAAP,CAEH,CA/FiE,CAiGlE16G,KAAM,eAAY,CAEd,GAAK,KAAK26G,kBAAL,GAA4B,KAAjC,CAAyC,CAErCtqH,QAAQgK,IAAR,CAAc,kDAAd,EACA,OAEH,CAED,KAAKgE,MAAL,CAAY2B,IAAZ,GACA,KAAK7K,MAAL,CAAc,CAAd,CACA,KAAKulH,SAAL,CAAiB,KAAjB,CAEA,MAAO,KAAP,CAEH,CAhHiE,CAkHlEzB,QAAS,kBAAY,CAEjB,GAAK,KAAK4B,OAAL,CAAa/gH,MAAb,CAAsB,CAA3B,CAA+B,CAE3B,KAAKuE,MAAL,CAAY46G,OAAZ,CAAqB,KAAK4B,OAAL,CAAc,CAAd,CAArB,EAEA,IAAM,GAAIn9G,GAAI,CAAR,CAAW6H,EAAI,KAAKs1G,OAAL,CAAa/gH,MAAlC,CAA0C4D,EAAI6H,CAA9C,CAAiD7H,GAAjD,CAAwD,CAEpD,KAAKm9G,OAAL,CAAcn9G,EAAI,CAAlB,EAAsBu7G,OAAtB,CAA+B,KAAK4B,OAAL,CAAcn9G,CAAd,CAA/B,EAEH,CAED,KAAKm9G,OAAL,CAAc,KAAKA,OAAL,CAAa/gH,MAAb,CAAsB,CAApC,EAAwCm/G,OAAxC,CAAiD,KAAK6B,SAAL,EAAjD,EAEH,CAZD,IAYO,CAEH,KAAKz8G,MAAL,CAAY46G,OAAZ,CAAqB,KAAK6B,SAAL,EAArB,EAEH,CAED,MAAO,KAAP,CAEH,CAxIiE,CA0IlEzB,WAAY,qBAAY,CAEpB,GAAK,KAAKwB,OAAL,CAAa/gH,MAAb,CAAsB,CAA3B,CAA+B,CAE3B,KAAKuE,MAAL,CAAYg7G,UAAZ,CAAwB,KAAKwB,OAAL,CAAc,CAAd,CAAxB,EAEA,IAAM,GAAIn9G,GAAI,CAAR,CAAW6H,EAAI,KAAKs1G,OAAL,CAAa/gH,MAAlC,CAA0C4D,EAAI6H,CAA9C,CAAiD7H,GAAjD,CAAwD,CAEpD,KAAKm9G,OAAL,CAAcn9G,EAAI,CAAlB,EAAsB27G,UAAtB,CAAkC,KAAKwB,OAAL,CAAcn9G,CAAd,CAAlC,EAEH,CAED,KAAKm9G,OAAL,CAAc,KAAKA,OAAL,CAAa/gH,MAAb,CAAsB,CAApC,EAAwCu/G,UAAxC,CAAoD,KAAKyB,SAAL,EAApD,EAEH,CAZD,IAYO,CAEH,KAAKz8G,MAAL,CAAYg7G,UAAZ,CAAwB,KAAKyB,SAAL,EAAxB,EAEH,CAED,MAAO,KAAP,CAEH,CAhKiE,CAkKlEY,WAAY,qBAAY,CAEpB,MAAO,MAAKb,OAAZ,CAEH,CAtKiE,CAwKlEc,WAAY,oBAAW3+G,KAAX,CAAmB,CAE3B,GAAK,CAAEA,KAAP,CAAeA,MAAQ,EAAR,CAEf,GAAK,KAAK09G,SAAL,GAAmB,IAAxB,CAA+B,CAE3B,KAAKrB,UAAL,GACA,KAAKwB,OAAL,CAAe79G,KAAf,CACA,KAAKi8G,OAAL,GAEH,CAND,IAMO,CAEH,KAAK4B,OAAL,CAAe79G,KAAf,CAEH,CAED,MAAO,KAAP,CAEH,CA1LiE,CA4LlEs8G,UAAW,oBAAY,CAEnB,MAAO,MAAKoC,UAAL,GAAmB,CAAnB,CAAP,CAEH,CAhMiE,CAkMlEnC,UAAW,mBAAWxqD,MAAX,CAAoB,CAE3B,MAAO,MAAK4sD,UAAL,CAAiB5sD,OAAS,CAAEA,MAAF,CAAT,CAAsB,EAAvC,CAAP,CAEH,CAtMiE,CAwMlE6sD,gBAAiB,yBAAW5+G,KAAX,CAAmB,CAEhC,GAAK,KAAK29G,kBAAL,GAA4B,KAAjC,CAAyC,CAErCtqH,QAAQgK,IAAR,CAAc,kDAAd,EACA,OAEH,CAED,KAAKogH,YAAL,CAAoBz9G,KAApB,CAEA,GAAK,KAAK09G,SAAL,GAAmB,IAAxB,CAA+B,CAE3B,KAAKr8G,MAAL,CAAYo8G,YAAZ,CAAyBZ,cAAzB,CAAyC,KAAKY,YAA9C,CAA4D,KAAKrvH,OAAL,CAAauuH,WAAzE,EAEH,CAED,MAAO,KAAP,CAEH,CA3NiE,CA6NlEkC,gBAAiB,0BAAY,CAEzB,MAAO,MAAKpB,YAAZ,CAEH,CAjOiE,CAmOlEe,QAAS,kBAAY,CAEjB,KAAKd,SAAL,CAAiB,KAAjB,CAEH,CAvOiE,CAyOlEoB,QAAS,kBAAY,CAEjB,GAAK,KAAKnB,kBAAL,GAA4B,KAAjC,CAAyC,CAErCtqH,QAAQgK,IAAR,CAAc,kDAAd,EACA,MAAO,MAAP,CAEH,CAED,MAAO,MAAKjO,IAAZ,CAEH,CApPiE,CAsPlE2vH,QAAS,iBAAW/+G,KAAX,CAAmB,CAExB,GAAK,KAAK29G,kBAAL,GAA4B,KAAjC,CAAyC,CAErCtqH,QAAQgK,IAAR,CAAc,kDAAd,EACA,OAEH,CAED,KAAKjO,IAAL,CAAY4Q,KAAZ,CAEA,GAAK,KAAK09G,SAAL,GAAmB,IAAxB,CAA+B,CAE3B,KAAKr8G,MAAL,CAAYjS,IAAZ,CAAmB,KAAKA,IAAxB,CAEH,CAED,MAAO,KAAP,CAEH,CAzQiE,CA2QlE4vH,UAAW,oBAAY,CAEnB,MAAO,MAAKjD,IAAL,CAAUA,IAAV,CAAe/7G,KAAtB,CAEH,CA/QiE,CAiRlEi/G,UAAW,mBAAWj/G,KAAX,CAAmB,CAE1B,KAAK+7G,IAAL,CAAUA,IAAV,CAAeW,eAAf,CAAgC18G,KAAhC,CAAuC,KAAK5R,OAAL,CAAauuH,WAApD,CAAiE,IAAjE,EAEA,MAAO,KAAP,CAEH,CAvRiE,CAApD,CAAlB,CA2RA;;OAIA,QAASuC,gBAAT,CAA0Bl3G,QAA1B,CAAqC,CAEjCu1G,MAAMt6G,IAAN,CAAY,IAAZ,CAAkB+E,QAAlB,EAEA,KAAKm3G,MAAL,CAAc,KAAK/wH,OAAL,CAAagxH,YAAb,EAAd,CACA,KAAKD,MAAL,CAAYlD,OAAZ,CAAqB,KAAKF,IAA1B,EAEH,CAEDmD,gBAAgB3/G,SAAhB,CAA4BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe89G,MAAMh+G,SAArB,CAAf,CAAiD,CAEzEI,YAAau/G,eAF4D,CAIzEpB,UAAW,oBAAY,CAEnB,MAAO,MAAKqB,MAAZ,CAEH,CARwE,CAUzEE,eAAgB,yBAAY,CAExB,MAAO,MAAKF,MAAL,CAAYG,WAAnB,CAEH,CAdwE,CAgBzEC,eAAgB,wBAAWv/G,KAAX,CAAmB,CAE/B,KAAKm/G,MAAL,CAAYG,WAAZ,CAA0Bt/G,KAA1B,CAEH,CApBwE,CAsBzEw/G,iBAAkB,2BAAY,CAE1B,MAAO,MAAKL,MAAL,CAAYM,aAAnB,CAEH,CA1BwE,CA4BzEC,iBAAkB,0BAAW1/G,KAAX,CAAmB,CAEjC,KAAKm/G,MAAL,CAAYM,aAAZ,CAA4Bz/G,KAA5B,CAEH,CAhCwE,CAkCzE2/G,iBAAkB,2BAAY,CAE1B,MAAO,MAAKR,MAAL,CAAYS,aAAnB,CAEH,CAtCwE,CAwCzEC,iBAAkB,0BAAW7/G,KAAX,CAAmB,CAEjC,KAAKm/G,MAAL,CAAYS,aAAZ,CAA4B5/G,KAA5B,CAEH,CA5CwE,CA8CzE8/G,eAAgB,yBAAY,CAExB,MAAO,MAAKX,MAAL,CAAYjqH,WAAnB,CAEH,CAlDwE,CAoDzE6qH,eAAgB,wBAAW//G,KAAX,CAAmB,CAE/B,KAAKm/G,MAAL,CAAYjqH,WAAZ,CAA0B8K,KAA1B,CAEH,CAxDwE,CA0DzE4sB,kBAAqB,UAAY,CAE7B,GAAIn+B,UAAW,GAAIuG,QAAJ,EAAf,CAEA,MAAO,SAAS43B,kBAAT,CAA4Bwc,KAA5B,CAAoC,CAEvCr3C,SAASwN,SAAT,CAAmBqtB,iBAAnB,CAAqC3pB,IAArC,CAA2C,IAA3C,CAAiDmmC,KAAjD,EAEA36C,SAASk3B,qBAAT,CAAgC,KAAKpB,WAArC,EAEA,KAAK46F,MAAL,CAAY/iG,WAAZ,CAAyB3tB,SAASC,CAAlC,CAAqCD,SAASE,CAA9C,CAAiDF,SAASG,CAA1D,EAEH,CARD,CAUH,CAdkB,EA1DsD,CAAjD,CAA5B,CA6EA;;OAIA,QAASoxH,cAAT,CAAwBC,KAAxB,CAA+BC,OAA/B,CAAyC,CAErC,KAAKC,QAAL,CAAgBF,MAAM7xH,OAAN,CAAcgyH,cAAd,EAAhB,CACA,KAAKD,QAAL,CAAcD,OAAd,CAAwBA,UAAYprH,SAAZ,CAAwBorH,OAAxB,CAAkC,IAA1D,CAEA,KAAKhtH,IAAL,CAAY,GAAI0xC,WAAJ,CAAgB,KAAKu7E,QAAL,CAAcE,iBAA9B,CAAZ,CAEAJ,MAAMnC,SAAN,GAAkB7B,OAAlB,CAA2B,KAAKkE,QAAhC,EAEH,CAED3gH,OAAO4B,MAAP,CAAe4+G,cAAczgH,SAA7B,CAAwC,CAEpC+gH,iBAAkB,2BAAY,CAE1B,KAAKH,QAAL,CAAcI,oBAAd,CAAoC,KAAKrtH,IAAzC,EAEA,MAAO,MAAKA,IAAZ,CAEH,CARmC,CAUpCstH,oBAAqB,8BAAY,CAE7B,GAAIxgH,OAAQ,CAAZ,CAAe9M,KAAO,KAAKotH,gBAAL,EAAtB,CAEA,IAAM,GAAI5/G,GAAI,CAAd,CAAiBA,EAAIxN,KAAK4J,MAA1B,CAAkC4D,GAAlC,CAAyC,CAErCV,OAAS9M,KAAMwN,CAAN,CAAT,CAEH,CAED,MAAOV,OAAQ9M,KAAK4J,MAApB,CAEH,CAtBmC,CAAxC,EA0BA;;;;;;;;OAUA,QAAS2jH,cAAT,CAAwBC,OAAxB,CAAiChV,QAAjC,CAA2C3E,SAA3C,CAAuD,CAEnD,KAAK2Z,OAAL,CAAeA,OAAf,CACA,KAAK3Z,SAAL,CAAiBA,SAAjB,CAEA,GAAIzjE,YAAaW,YAAjB,CACI08E,WADJ,CAGA,OAASjV,QAAT,EAEI,IAAK,YAAL,CACIiV,YAAc,KAAKC,MAAnB,CACA,MAEJ,IAAK,QAAL,CACA,IAAK,MAAL,CACIt9E,WAAaxgC,KAAb,CACA69G,YAAc,KAAKE,OAAnB,CACA,MAEJ,QACIF,YAAc,KAAKG,KAAnB,CAbR,CAiBA,KAAKn9E,MAAL,CAAc,GAAIL,WAAJ,CAAgByjE,UAAY,CAA5B,CAAd,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,KAAKga,gBAAL,CAAwBJ,WAAxB,CAEA,KAAKK,gBAAL,CAAwB,CAAxB,CAEA,KAAKC,QAAL,CAAgB,CAAhB,CACA,KAAKC,cAAL,CAAsB,CAAtB,CAEH,CAED1hH,OAAO4B,MAAP,CAAeq/G,cAAclhH,SAA7B,CAAwC,CAEpC;AACA4hH,WAAY,oBAAWC,SAAX,CAAsB1f,MAAtB,CAA+B,CAEvC;AACA;AAEA,GAAI/9D,QAAS,KAAKA,MAAlB,CACIm5C,OAAS,KAAKiqB,SADlB,CAEI5uG,OAASipH,UAAYtkC,MAAZ,CAAqBA,MAFlC,CAIIukC,cAAgB,KAAKL,gBAJzB,CAMA,GAAKK,gBAAkB,CAAvB,CAA2B,CAEvB;AAEA,IAAM,GAAI3gH,GAAI,CAAd,CAAiBA,IAAMo8E,MAAvB,CAA+B,EAAGp8E,CAAlC,CAAsC,CAElCijC,OAAQxrC,OAASuI,CAAjB,EAAuBijC,OAAQjjC,CAAR,CAAvB,CAEH,CAED2gH,cAAgB3f,MAAhB,CAEH,CAZD,IAYO,CAEH;AAEA2f,eAAiB3f,MAAjB,CACA,GAAI4f,KAAM5f,OAAS2f,aAAnB,CACA,KAAKN,gBAAL,CAAuBp9E,MAAvB,CAA+BxrC,MAA/B,CAAuC,CAAvC,CAA0CmpH,GAA1C,CAA+CxkC,MAA/C,EAEH,CAED,KAAKkkC,gBAAL,CAAwBK,aAAxB,CAEH,CAtCmC,CAwCpC;AACA93C,MAAO,eAAW63C,SAAX,CAAuB,CAE1B,GAAItkC,QAAS,KAAKiqB,SAAlB,CACIpjE,OAAS,KAAKA,MADlB,CAEIxrC,OAASipH,UAAYtkC,MAAZ,CAAqBA,MAFlC,CAII4kB,OAAS,KAAKsf,gBAJlB,CAMIN,QAAU,KAAKA,OANnB,CAQA,KAAKM,gBAAL,CAAwB,CAAxB,CAEA,GAAKtf,OAAS,CAAd,CAAkB,CAEd;AAEA,GAAI6f,qBAAsBzkC,OAAS,CAAnC,CAEA,KAAKikC,gBAAL,CACIp9E,MADJ,CACYxrC,MADZ,CACoBopH,mBADpB,CACyC,EAAI7f,MAD7C,CACqD5kB,MADrD,EAGH,CAED,IAAM,GAAIp8E,GAAIo8E,MAAR,CAAgBxoE,EAAIwoE,OAASA,MAAnC,CAA2Cp8E,IAAM4T,CAAjD,CAAoD,EAAG5T,CAAvD,CAA2D,CAEvD,GAAKijC,OAAQjjC,CAAR,IAAgBijC,OAAQjjC,EAAIo8E,MAAZ,CAArB,CAA4C,CAExC;AAEA4jC,QAAQ71D,QAAR,CAAkBlnB,MAAlB,CAA0BxrC,MAA1B,EACA,MAEH,CAEJ,CAEJ,CA7EmC,CA+EpC;AACAqpH,kBAAmB,4BAAY,CAE3B,GAAId,SAAU,KAAKA,OAAnB,CAEA,GAAI/8E,QAAS,KAAKA,MAAlB,CACIm5C,OAAS,KAAKiqB,SADlB,CAGIwa,oBAAsBzkC,OAAS,CAHnC,CAKA4jC,QAAQe,QAAR,CAAkB99E,MAAlB,CAA0B49E,mBAA1B,EAEA;AACA,IAAM,GAAI7gH,GAAIo8E,MAAR,CAAgBxoE,EAAIitG,mBAA1B,CAA+C7gH,IAAM4T,CAArD,CAAwD,EAAG5T,CAA3D,CAA+D,CAE3DijC,OAAQjjC,CAAR,EAAcijC,OAAQ49E,oBAAwB7gH,EAAIo8E,MAApC,CAAd,CAEH,CAED,KAAKkkC,gBAAL,CAAwB,CAAxB,CAEH,CApGmC,CAsGpC;AACAU,qBAAsB,+BAAY,CAE9B,GAAIH,qBAAsB,KAAKxa,SAAL,CAAiB,CAA3C,CACA,KAAK2Z,OAAL,CAAa71D,QAAb,CAAuB,KAAKlnB,MAA5B,CAAoC49E,mBAApC,EAEH,CA5GmC,CA+GpC;AAEAV,QAAS,iBAAWl9E,MAAX,CAAmB3jB,SAAnB,CAA8B8qF,SAA9B,CAAyC3kG,CAAzC,CAA4C22E,MAA5C,CAAqD,CAE1D,GAAK32E,GAAK,GAAV,CAAgB,CAEZ,IAAM,GAAIzF,GAAI,CAAd,CAAiBA,IAAMo8E,MAAvB,CAA+B,EAAGp8E,CAAlC,CAAsC,CAElCijC,OAAQ3jB,UAAYtf,CAApB,EAA0BijC,OAAQmnE,UAAYpqG,CAApB,CAA1B,CAEH,CAEJ,CAEJ,CA7HmC,CA+HpCkgH,OAAQ,gBAAWj9E,MAAX,CAAmB3jB,SAAnB,CAA8B8qF,SAA9B,CAAyC3kG,CAAzC,CAA6C,CAEjD9N,WAAWynB,SAAX,CAAsB6jB,MAAtB,CAA8B3jB,SAA9B,CAAyC2jB,MAAzC,CAAiD3jB,SAAjD,CAA4D2jB,MAA5D,CAAoEmnE,SAApE,CAA+E3kG,CAA/E,EAEH,CAnImC,CAqIpC26G,MAAO,eAAWn9E,MAAX,CAAmB3jB,SAAnB,CAA8B8qF,SAA9B,CAAyC3kG,CAAzC,CAA4C22E,MAA5C,CAAqD,CAExD,GAAI33E,GAAI,EAAIgB,CAAZ,CAEA,IAAM,GAAIzF,GAAI,CAAd,CAAiBA,IAAMo8E,MAAvB,CAA+B,EAAGp8E,CAAlC,CAAsC,CAElC,GAAIstB,GAAIhO,UAAYtf,CAApB,CAEAijC,OAAQ3V,CAAR,EAAc2V,OAAQ3V,CAAR,EAAc7oB,CAAd,CAAkBw+B,OAAQmnE,UAAYpqG,CAApB,EAA0ByF,CAA1D,CAEH,CAEJ,CAjJmC,CAAxC,EAqJA;;;;;;;;OAUI;AACJ,GAAIw7G,mBAAoB,eAAxB,CAEA,QAASC,UAAT,CAAoBC,WAApB,CAAiCpyD,IAAjC,CAAuCqyD,kBAAvC,CAA4D,CAExD,GAAIC,YAAaD,oBAAsBE,gBAAgBC,cAAhB,CAAgCxyD,IAAhC,CAAvC,CAEA,KAAKyyD,YAAL,CAAoBL,WAApB,CACA,KAAKM,SAAL,CAAiBN,YAAYO,UAAZ,CAAwB3yD,IAAxB,CAA8BsyD,UAA9B,CAAjB,CAEH,CAEDviH,OAAO4B,MAAP,CAAewgH,UAAUriH,SAAzB,CAAoC,CAEhCkiH,SAAU,kBAAWp5G,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEjC,KAAKgJ,IAAL,GAAa;AAEb,GAAIkhH,iBAAkB,KAAKH,YAAL,CAAkBI,eAAxC,CACI5B,QAAU,KAAKyB,SAAL,CAAgBE,eAAhB,CADd,CAGA;AACA,GAAK3B,UAAY5rH,SAAjB,CAA6B4rH,QAAQe,QAAR,CAAkBp5G,KAAlB,CAAyBlQ,MAAzB,EAEhC,CAZ+B,CAchC0yD,SAAU,kBAAWxiD,KAAX,CAAkBlQ,MAAlB,CAA2B,CAEjC,GAAIoqH,UAAW,KAAKJ,SAApB,CAEA,IAAM,GAAIzhH,GAAI,KAAKwhH,YAAL,CAAkBI,eAA1B,CACI18G,EAAI28G,SAASzlH,MADvB,CAC+B4D,IAAMkF,CADrC,CACwC,EAAGlF,CAD3C,CAC+C,CAE3C6hH,SAAU7hH,CAAV,EAAcmqD,QAAd,CAAwBxiD,KAAxB,CAA+BlQ,MAA/B,EAEH,CAEJ,CAzB+B,CA2BhCgJ,KAAM,eAAY,CAEd,GAAIohH,UAAW,KAAKJ,SAApB,CAEA,IAAM,GAAIzhH,GAAI,KAAKwhH,YAAL,CAAkBI,eAA1B,CACI18G,EAAI28G,SAASzlH,MADvB,CAC+B4D,IAAMkF,CADrC,CACwC,EAAGlF,CAD3C,CAC+C,CAE3C6hH,SAAU7hH,CAAV,EAAcS,IAAd,GAEH,CAEJ,CAtC+B,CAwChCqhH,OAAQ,iBAAY,CAEhB,GAAID,UAAW,KAAKJ,SAApB,CAEA,IAAM,GAAIzhH,GAAI,KAAKwhH,YAAL,CAAkBI,eAA1B,CACI18G,EAAI28G,SAASzlH,MADvB,CAC+B4D,IAAMkF,CADrC,CACwC,EAAGlF,CAD3C,CAC+C,CAE3C6hH,SAAU7hH,CAAV,EAAc8hH,MAAd,GAEH,CAEJ,CAnD+B,CAApC,EAwDA,QAASR,gBAAT,CAA0BS,QAA1B,CAAoChzD,IAApC,CAA0CsyD,UAA1C,CAAuD,CAEnD,KAAKtyD,IAAL,CAAYA,IAAZ,CACA,KAAKsyD,UAAL,CAAkBA,YAAcC,gBAAgBC,cAAhB,CAAgCxyD,IAAhC,CAAhC,CAEA,KAAKnjC,IAAL,CAAY01F,gBAAgBU,QAAhB,CAA0BD,QAA1B,CAAoC,KAAKV,UAAL,CAAgBY,QAApD,GAAkEF,QAA9E,CAEA,KAAKA,QAAL,CAAgBA,QAAhB,CAEH,CAEDjjH,OAAO4B,MAAP,CAAe4gH,eAAf,CAAgC,CAE5BJ,UAAWA,SAFiB,CAI5BniH,OAAQ,gBAAWoH,IAAX,CAAiB4oD,IAAjB,CAAuBsyD,UAAvB,CAAoC,CAExC,GAAK,EAAIl7G,MAAQA,KAAK+7G,sBAAjB,CAAL,CAAiD,CAE7C,MAAO,IAAIZ,gBAAJ,CAAqBn7G,IAArB,CAA2B4oD,IAA3B,CAAiCsyD,UAAjC,CAAP,CAEH,CAJD,IAIO,CAEH,MAAO,IAAIC,iBAAgBJ,SAApB,CAA+B/6G,IAA/B,CAAqC4oD,IAArC,CAA2CsyD,UAA3C,CAAP,CAEH,CAEJ,CAhB2B,CAkB5B;;;;;;WAOAc,iBAAoB,UAAY,CAE5B,GAAIC,YAAa,GAAIC,OAAJ,CAAY,IAAMpB,iBAAN,CAA0B,GAAtC,CAA2C,GAA3C,CAAjB,CAEA,MAAO,SAASkB,iBAAT,CAA2Bz7F,IAA3B,CAAkC,CAErC,MAAOA,MAAKmrC,OAAL,CAAc,KAAd,CAAqB,GAArB,EAA2BA,OAA3B,CAAoCuwD,UAApC,CAAgD,EAAhD,CAAP,CAEH,CAJD,CAMH,CAVmB,EAzBQ,CAqC5Bb,eAAgB,UAAY,CAExB;AACA;AACA;AACA,GAAIe,UAAW,KAAOrB,iBAAP,CAA2B,GAA1C,CACA,GAAIsB,eAAgB,KAAOtB,kBAAkBpvD,OAAlB,CAA2B,KAA3B,CAAkC,EAAlC,CAAP,CAAgD,GAApE,CAEA;AACA;AACA,GAAI2wD,aAAc,kBAAkB7hH,MAAlB,CAAyBkxD,OAAzB,CAAkC,IAAlC,CAAwCywD,QAAxC,CAAlB,CAEA;AACA,GAAIG,QAAS,WAAW9hH,MAAX,CAAkBkxD,OAAlB,CAA2B,MAA3B,CAAmC0wD,aAAnC,CAAb,CAEA;AACA;AACA,GAAIG,UAAW,4BAA4B/hH,MAA5B,CAAmCkxD,OAAnC,CAA4C,IAA5C,CAAkDywD,QAAlD,CAAf,CAEA;AACA;AACA,GAAIK,YAAa,uBAAuBhiH,MAAvB,CAA8BkxD,OAA9B,CAAuC,IAAvC,CAA6CywD,QAA7C,CAAjB,CAEA,GAAIM,SAAU,GAAIP,OAAJ,CAAY,GACpB,GADoB,CAEpBG,WAFoB,CAGpBC,MAHoB,CAIpBC,QAJoB,CAKpBC,UALoB,CAMpB,GANQ,CAAd,CASA,GAAIE,sBAAuB,CAAE,UAAF,CAAc,WAAd,CAA2B,OAA3B,CAA3B,CAEA,MAAO,SAAStB,eAAT,CAAyB1T,SAAzB,CAAqC,CAExC,GAAIiV,SAAUF,QAAQ/nF,IAAR,CAAcgzE,SAAd,CAAd,CAEA,GAAK,CAAEiV,OAAP,CAAiB,CAEb,KAAM,IAAI7vG,MAAJ,CAAW,4CAA8C46F,SAAzD,CAAN,CAEH,CAED,GAAIkV,SAAU,CACV;AACAd,SAAUa,QAAS,CAAT,CAFA,CAGVE,WAAYF,QAAS,CAAT,CAHF,CAIVG,YAAaH,QAAS,CAAT,CAJH,CAKV/U,aAAc+U,QAAS,CAAT,CALJ,CAKkB;AAC5BI,cAAeJ,QAAS,CAAT,CANL,CAAd,CASA,GAAIK,SAAUJ,QAAQd,QAAR,EAAoBc,QAAQd,QAAR,CAAiBnP,WAAjB,CAA8B,GAA9B,CAAlC,CAEA,GAAKqQ,UAAY/uH,SAAZ,EAAyB+uH,UAAY,CAAE,CAA5C,CAAgD,CAE5C,GAAIH,YAAaD,QAAQd,QAAR,CAAiB1N,SAAjB,CAA4B4O,QAAU,CAAtC,CAAjB,CAEA;AACA;AACA;AACA;AACA,GAAKN,qBAAqB5iH,OAArB,CAA8B+iH,UAA9B,IAA+C,CAAE,CAAtD,CAA0D,CAEtDD,QAAQd,QAAR,CAAmBc,QAAQd,QAAR,CAAiB1N,SAAjB,CAA4B,CAA5B,CAA+B4O,OAA/B,CAAnB,CACAJ,QAAQC,UAAR,CAAqBA,UAArB,CAEH,CAEJ,CAED,GAAKD,QAAQhV,YAAR,GAAyB,IAAzB,EAAiCgV,QAAQhV,YAAR,CAAqB3xG,MAArB,GAAgC,CAAtE,CAA0E,CAEtE,KAAM,IAAI6W,MAAJ,CAAW,+DAAiE46F,SAA5E,CAAN,CAEH,CAED,MAAOkV,QAAP,CAEH,CA9CD,CAgDH,CAlFe,EArCY,CAyH5Bf,SAAU,kBAAW77G,IAAX,CAAiB87G,QAAjB,CAA4B,CAElC,GAAK,CAAEA,QAAF,EAAcA,WAAa,EAA3B,EAAiCA,WAAa,MAA9C,EAAwDA,WAAa,GAArE,EAA4EA,WAAa,CAAE,CAA3F,EAAgGA,WAAa97G,KAAKugB,IAAlH,EAA0Hu7F,WAAa97G,KAAK6K,IAAjJ,CAAwJ,CAEpJ,MAAO7K,KAAP,CAEH,CAED;AACA,GAAKA,KAAK8wD,QAAV,CAAqB,CAEjB,GAAIorB,MAAOl8E,KAAK8wD,QAAL,CAAcwrB,aAAd,CAA6Bw/B,QAA7B,CAAX,CAEA,GAAK5/B,OAASjuF,SAAd,CAA0B,CAEtB,MAAOiuF,KAAP,CAEH,CAEJ,CAED;AACA,GAAKl8E,KAAK8/B,QAAV,CAAqB,CAEjB,GAAIm9E,mBAAoB,QAApBA,kBAAoB,CAAWn9E,QAAX,CAAsB,CAE1C,IAAM,GAAIjmC,GAAI,CAAd,CAAiBA,EAAIimC,SAAS7pC,MAA9B,CAAsC4D,GAAtC,CAA6C,CAEzC,GAAIqjH,WAAYp9E,SAAUjmC,CAAV,CAAhB,CAEA,GAAKqjH,UAAU38F,IAAV,GAAmBu7F,QAAnB,EAA+BoB,UAAUryG,IAAV,GAAmBixG,QAAvD,CAAkE,CAE9D,MAAOoB,UAAP,CAEH,CAED,GAAI/kD,QAAS8kD,kBAAmBC,UAAUp9E,QAA7B,CAAb,CAEA,GAAKq4B,MAAL,CAAc,MAAOA,OAAP,CAEjB,CAED,MAAO,KAAP,CAEH,CApBD,CAsBA,GAAIglD,aAAcF,kBAAmBj9G,KAAK8/B,QAAxB,CAAlB,CAEA,GAAKq9E,WAAL,CAAmB,CAEf,MAAOA,YAAP,CAEH,CAEJ,CAED,MAAO,KAAP,CAEH,CAnL2B,CAAhC,EAuLAxkH,OAAO4B,MAAP,CAAe4gH,gBAAgBziH,SAA/B,CAA0C,CAAE;AAExC;AACA0kH,sBAAuB,gCAAY,CAAE,CAHC,CAItCC,sBAAuB,gCAAY,CAAE,CAJC,CAMtCC,YAAa,CACTC,OAAQ,CADC,CAETC,YAAa,CAFJ,CAGTC,aAAc,CAHL,CAITC,eAAgB,CAJP,CANyB,CAatCC,WAAY,CACR7vH,KAAM,CADE,CAER8vH,YAAa,CAFL,CAGRC,uBAAwB,CAHhB,CAb0B,CAmBtCC,oBAAqB,CAEjB,QAASC,gBAAT,CAA0BjhF,MAA1B,CAAkCxrC,MAAlC,CAA2C,CAEvCwrC,OAAQxrC,MAAR,EAAmB,KAAKm0B,IAAL,CAAW,KAAKmiF,YAAhB,CAAnB,CAEH,CANgB,CAQjB,QAASoW,eAAT,CAAyBlhF,MAAzB,CAAiCxrC,MAAjC,CAA0C,CAEtC,GAAIkJ,QAAS,KAAKyjH,gBAAlB,CAEA,IAAM,GAAIpkH,GAAI,CAAR,CAAWkF,EAAIvE,OAAOvE,MAA5B,CAAoC4D,IAAMkF,CAA1C,CAA6C,EAAGlF,CAAhD,CAAoD,CAEhDijC,OAAQxrC,QAAR,EAAsBkJ,OAAQX,CAAR,CAAtB,CAEH,CAEJ,CAlBgB,CAoBjB,QAASqkH,sBAAT,CAAgCphF,MAAhC,CAAwCxrC,MAAxC,CAAiD,CAE7CwrC,OAAQxrC,MAAR,EAAmB,KAAK2sH,gBAAL,CAAuB,KAAKlB,aAA5B,CAAnB,CAEH,CAxBgB,CA0BjB,QAASoB,iBAAT,CAA2BrhF,MAA3B,CAAmCxrC,MAAnC,CAA4C,CAExC,KAAK2sH,gBAAL,CAAsBlvG,OAAtB,CAA+B+tB,MAA/B,CAAuCxrC,MAAvC,EAEH,CA9BgB,CAnBiB,CAqDtC8sH,iCAAkC,CAE9B,CACI;AAEA,QAASC,gBAAT,CAA0BvhF,MAA1B,CAAkCxrC,MAAlC,CAA2C,CAEvC,KAAKgtH,YAAL,CAAmB,KAAK1W,YAAxB,EAAyC9qE,OAAQxrC,MAAR,CAAzC,CAEH,CAPL,CASI,QAASitH,+BAAT,CAAyCzhF,MAAzC,CAAiDxrC,MAAjD,CAA0D,CAEtD,KAAKgtH,YAAL,CAAmB,KAAK1W,YAAxB,EAAyC9qE,OAAQxrC,MAAR,CAAzC,CACA,KAAKgtH,YAAL,CAAkB1vE,WAAlB,CAAgC,IAAhC,CAEH,CAdL,CAgBI,QAAS4vE,0CAAT,CAAoD1hF,MAApD,CAA4DxrC,MAA5D,CAAqE,CAEjE,KAAKgtH,YAAL,CAAmB,KAAK1W,YAAxB,EAAyC9qE,OAAQxrC,MAAR,CAAzC,CACA,KAAKgtH,YAAL,CAAkBj+E,sBAAlB,CAA2C,IAA3C,CAEH,CArBL,CAF8B,CAyB3B,CAEC;AAEA,QAASo+E,eAAT,CAAyB3hF,MAAzB,CAAiCxrC,MAAjC,CAA0C,CAEtC,GAAIotH,MAAO,KAAKT,gBAAhB,CAEA,IAAM,GAAIpkH,GAAI,CAAR,CAAWkF,EAAI2/G,KAAKzoH,MAA1B,CAAkC4D,IAAMkF,CAAxC,CAA2C,EAAGlF,CAA9C,CAAkD,CAE9C6kH,KAAM7kH,CAAN,EAAYijC,OAAQxrC,QAAR,CAAZ,CAEH,CAEJ,CAdF,CAgBC,QAASqtH,8BAAT,CAAwC7hF,MAAxC,CAAgDxrC,MAAhD,CAAyD,CAErD,GAAIotH,MAAO,KAAKT,gBAAhB,CAEA,IAAM,GAAIpkH,GAAI,CAAR,CAAWkF,EAAI2/G,KAAKzoH,MAA1B,CAAkC4D,IAAMkF,CAAxC,CAA2C,EAAGlF,CAA9C,CAAkD,CAE9C6kH,KAAM7kH,CAAN,EAAYijC,OAAQxrC,QAAR,CAAZ,CAEH,CAED,KAAKgtH,YAAL,CAAkB1vE,WAAlB,CAAgC,IAAhC,CAEH,CA5BF,CA8BC,QAASgwE,yCAAT,CAAmD9hF,MAAnD,CAA2DxrC,MAA3D,CAAoE,CAEhE,GAAIotH,MAAO,KAAKT,gBAAhB,CAEA,IAAM,GAAIpkH,GAAI,CAAR,CAAWkF,EAAI2/G,KAAKzoH,MAA1B,CAAkC4D,IAAMkF,CAAxC,CAA2C,EAAGlF,CAA9C,CAAkD,CAE9C6kH,KAAM7kH,CAAN,EAAYijC,OAAQxrC,QAAR,CAAZ,CAEH,CAED,KAAKgtH,YAAL,CAAkBj+E,sBAAlB,CAA2C,IAA3C,CAEH,CA1CF,CAzB2B,CAqE3B,CAEC;AAEA,QAASw+E,sBAAT,CAAgC/hF,MAAhC,CAAwCxrC,MAAxC,CAAiD,CAE7C,KAAK2sH,gBAAL,CAAuB,KAAKlB,aAA5B,EAA8CjgF,OAAQxrC,MAAR,CAA9C,CAEH,CARF,CAUC,QAASwtH,qCAAT,CAA+ChiF,MAA/C,CAAuDxrC,MAAvD,CAAgE,CAE5D,KAAK2sH,gBAAL,CAAuB,KAAKlB,aAA5B,EAA8CjgF,OAAQxrC,MAAR,CAA9C,CACA,KAAKgtH,YAAL,CAAkB1vE,WAAlB,CAAgC,IAAhC,CAEH,CAfF,CAiBC,QAASmwE,gDAAT,CAA0DjiF,MAA1D,CAAkExrC,MAAlE,CAA2E,CAEvE,KAAK2sH,gBAAL,CAAuB,KAAKlB,aAA5B,EAA8CjgF,OAAQxrC,MAAR,CAA9C,CACA,KAAKgtH,YAAL,CAAkBj+E,sBAAlB,CAA2C,IAA3C,CAEH,CAtBF,CArE2B,CA6F3B,CAEC;AAEA,QAAS2+E,mBAAT,CAA6BliF,MAA7B,CAAqCxrC,MAArC,CAA8C,CAE1C,KAAK2sH,gBAAL,CAAsBnvG,SAAtB,CAAiCguB,MAAjC,CAAyCxrC,MAAzC,EAEH,CARF,CAUC,QAAS2tH,kCAAT,CAA4CniF,MAA5C,CAAoDxrC,MAApD,CAA6D,CAEzD,KAAK2sH,gBAAL,CAAsBnvG,SAAtB,CAAiCguB,MAAjC,CAAyCxrC,MAAzC,EACA,KAAKgtH,YAAL,CAAkB1vE,WAAlB,CAAgC,IAAhC,CAEH,CAfF,CAiBC,QAASswE,6CAAT,CAAuDpiF,MAAvD,CAA+DxrC,MAA/D,CAAwE,CAEpE,KAAK2sH,gBAAL,CAAsBnvG,SAAtB,CAAiCguB,MAAjC,CAAyCxrC,MAAzC,EACA,KAAKgtH,YAAL,CAAkBj+E,sBAAlB,CAA2C,IAA3C,CAEH,CAtBF,CA7F2B,CArDI,CA8KtCu6E,SAAU,QAASuE,iBAAT,CAA2BC,WAA3B,CAAwC9tH,MAAxC,CAAiD,CAEvD,KAAKgJ,IAAL,GACA,KAAKsgH,QAAL,CAAewE,WAAf,CAA4B9tH,MAA5B,EAEA;AACA;AACA;AACA;AACA;AAEH,CAzLqC,CA2LtC0yD,SAAU,QAASm7D,iBAAT,CAA2BE,WAA3B,CAAwC/tH,MAAxC,CAAiD,CAEvD,KAAKgJ,IAAL,GACA,KAAK0pD,QAAL,CAAeq7D,WAAf,CAA4B/tH,MAA5B,EAEH,CAhMqC,CAkMtC;AACAgJ,KAAM,eAAY,CAEd,GAAIgkH,cAAe,KAAK74F,IAAxB,CACIy1F,WAAa,KAAKA,UADtB,CAGI2B,WAAa3B,WAAW2B,UAH5B,CAIIjV,aAAesT,WAAWtT,YAJ9B,CAKImV,cAAgB7B,WAAW6B,aAL/B,CAOA,GAAK,CAAEuB,YAAP,CAAsB,CAElBA,aAAenD,gBAAgBU,QAAhB,CAA0B,KAAKD,QAA/B,CAAyCV,WAAWY,QAApD,GAAkE,KAAKF,QAAtF,CAEA,KAAKn2F,IAAL,CAAY64F,YAAZ,CAEH,CAED;AACA,KAAK1D,QAAL,CAAgB,KAAKwC,qBAArB,CACA,KAAKp5D,QAAL,CAAgB,KAAKq5D,qBAArB,CAEA;AACA,GAAK,CAAEiB,YAAP,CAAsB,CAElB9xH,QAAQ+iB,KAAR,CAAe,2DAA6D,KAAKq5C,IAAlE,CAAyE,wBAAxF,EACA,OAEH,CAED,GAAKi0D,UAAL,CAAkB,CAEd,GAAIC,aAAc5B,WAAW4B,WAA7B,CAEA;AACA,OAASD,UAAT,EAEI,IAAK,WAAL,CAEI,GAAK,CAAEyB,aAAar7E,QAApB,CAA+B,CAE3Bz2C,QAAQ+iB,KAAR,CAAe,mFAAf,CAAoG,IAApG,EACA,OAEH,CAED,GAAK,CAAE+uG,aAAar7E,QAAb,CAAsBR,SAA7B,CAAyC,CAErCj2C,QAAQ+iB,KAAR,CAAe,6GAAf,CAA8H,IAA9H,EACA,OAEH,CAED+uG,aAAeA,aAAar7E,QAAb,CAAsBR,SAArC,CAEA,MAEJ,IAAK,OAAL,CAEI,GAAK,CAAE67E,aAAaxtD,QAApB,CAA+B,CAE3BtkE,QAAQ+iB,KAAR,CAAe,gFAAf,CAAiG,IAAjG,EACA,OAEH,CAED;AACA;AAEA+uG,aAAeA,aAAaxtD,QAAb,CAAsBC,KAArC,CAEA;AACA,IAAM,GAAIl3D,GAAI,CAAd,CAAiBA,EAAIykH,aAAaroH,MAAlC,CAA0C4D,GAA1C,CAAiD,CAE7C,GAAKykH,aAAczkH,CAAd,EAAkB0mB,IAAlB,GAA2Bu8F,WAAhC,CAA8C,CAE1CA,YAAcjjH,CAAd,CACA,MAEH,CAEJ,CAED,MAEJ,QAEI,GAAKykH,aAAczB,UAAd,IAA+B5uH,SAApC,CAAgD,CAE5CzB,QAAQ+iB,KAAR,CAAe,sEAAf,CAAuF,IAAvF,EACA,OAEH,CAED+uG,aAAeA,aAAczB,UAAd,CAAf,CA3DR,CAgEA,GAAKC,cAAgB7uH,SAArB,CAAiC,CAE7B,GAAKqwH,aAAcxB,WAAd,IAAgC7uH,SAArC,CAAiD,CAE7CzB,QAAQ+iB,KAAR,CAAe,uFAAf,CAAwG,IAAxG,CAA8G+uG,YAA9G,EACA,OAEH,CAEDA,aAAeA,aAAcxB,WAAd,CAAf,CAEH,CAEJ,CAED;AACA,GAAIwC,cAAehB,aAAc1W,YAAd,CAAnB,CAEA,GAAK0X,eAAiBrxH,SAAtB,CAAkC,CAE9B,GAAI6tH,UAAWZ,WAAWY,QAA1B,CAEAtvH,QAAQ+iB,KAAR,CAAe,+DAAiEusG,QAAjE,CACX,GADW,CACLlU,YADK,CACU,wBADzB,CACmD0W,YADnD,EAEA,OAEH,CAED;AACA,GAAIiB,YAAa,KAAK5B,UAAL,CAAgB7vH,IAAjC,CAEA,GAAKwwH,aAAa1vE,WAAb,GAA6B3gD,SAAlC,CAA8C,CAAE;AAE5CsxH,WAAa,KAAK5B,UAAL,CAAgBC,WAA7B,CACA,KAAKU,YAAL,CAAoBA,YAApB,CAEH,CALD,IAKO,IAAKA,aAAaj+E,sBAAb,GAAwCpyC,SAA7C,CAAyD,CAAE;AAE9DsxH,WAAa,KAAK5B,UAAL,CAAgBE,sBAA7B,CACA,KAAKS,YAAL,CAAoBA,YAApB,CAEH,CAED;AACA,GAAIkB,aAAc,KAAKlC,WAAL,CAAiBC,MAAnC,CAEA,GAAKR,gBAAkB9uH,SAAvB,CAAmC,CAE/B;AAEA,GAAK25G,eAAiB,uBAAtB,CAAgD,CAE5C;AAEA;AACA,GAAK,CAAE0W,aAAa54F,QAApB,CAA+B,CAE3Bl5B,QAAQ+iB,KAAR,CAAe,qGAAf,CAAsH,IAAtH,EACA,OAEH,CAED,GAAK+uG,aAAa54F,QAAb,CAAsBG,gBAA3B,CAA8C,CAE1C,GAAK,CAAEy4F,aAAa54F,QAAb,CAAsBwoB,eAA7B,CAA+C,CAE3C1hD,QAAQ+iB,KAAR,CAAe,qHAAf,CAAsI,IAAtI,EACA,OAEH,CAED,IAAM,GAAI1V,GAAI,CAAd,CAAiBA,EAAI,KAAK4rB,IAAL,CAAUC,QAAV,CAAmBwoB,eAAnB,CAAmCtmD,QAAnC,CAA4CqO,MAAjE,CAAyE4D,GAAzE,CAAgF,CAE5E,GAAKykH,aAAa54F,QAAb,CAAsBwoB,eAAtB,CAAsCtmD,QAAtC,CAAgDiS,CAAhD,EAAoD0mB,IAApD,GAA6Dw8F,aAAlE,CAAkF,CAE9EA,cAAgBljH,CAAhB,CACA,MAEH,CAEJ,CAGJ,CArBD,IAqBO,CAEH,GAAK,CAAEykH,aAAa54F,QAAb,CAAsBsf,YAA7B,CAA4C,CAExCx4C,QAAQ+iB,KAAR,CAAe,kHAAf,CAAmI,IAAnI,EACA,OAEH,CAED,IAAM,GAAI1V,GAAI,CAAd,CAAiBA,EAAI,KAAK4rB,IAAL,CAAUC,QAAV,CAAmBsf,YAAnB,CAAgC/uC,MAArD,CAA6D4D,GAA7D,CAAoE,CAEhE,GAAKykH,aAAa54F,QAAb,CAAsBsf,YAAtB,CAAoCnrC,CAApC,EAAwC0mB,IAAxC,GAAiDw8F,aAAtD,CAAsE,CAElEA,cAAgBljH,CAAhB,CACA,MAEH,CAEJ,CAEJ,CAEJ,CAED2lH,YAAc,KAAKlC,WAAL,CAAiBG,YAA/B,CAEA,KAAKQ,gBAAL,CAAwBqB,YAAxB,CACA,KAAKvC,aAAL,CAAqBA,aAArB,CAEH,CAlED,IAkEO,IAAKuC,aAAaxwG,SAAb,GAA2B7gB,SAA3B,EAAwCqxH,aAAavwG,OAAb,GAAyB9gB,SAAtE,CAAkF,CAErF;AAEAuxH,YAAc,KAAKlC,WAAL,CAAiBI,cAA/B,CAEA,KAAKO,gBAAL,CAAwBqB,YAAxB,CAEH,CARM,IAQA,IAAKrjH,MAAM63B,OAAN,CAAewrF,YAAf,CAAL,CAAqC,CAExCE,YAAc,KAAKlC,WAAL,CAAiBE,WAA/B,CAEA,KAAKS,gBAAL,CAAwBqB,YAAxB,CAEH,CANM,IAMA,CAEH,KAAK1X,YAAL,CAAoBA,YAApB,CAEH,CAED;AACA,KAAKgT,QAAL,CAAgB,KAAKkD,mBAAL,CAA0B0B,WAA1B,CAAhB,CACA,KAAKx7D,QAAL,CAAgB,KAAKo6D,gCAAL,CAAuCoB,WAAvC,EAAsDD,UAAtD,CAAhB,CAEH,CA7aqC,CA+atC5D,OAAQ,iBAAY,CAEhB,KAAKl2F,IAAL,CAAY,IAAZ,CAEA;AACA;AACA,KAAKm1F,QAAL,CAAgB,KAAK6E,iBAArB,CACA,KAAKz7D,QAAL,CAAgB,KAAK07D,iBAArB,CAEH,CAxbqC,CAA1C,EA4bA;AACA/mH,OAAO4B,MAAP,CAAe4gH,gBAAgBziH,SAA/B,CAA0C,CAEtC;AACA+mH,kBAAmBtE,gBAAgBziH,SAAhB,CAA0BkiH,QAHP,CAItC8E,kBAAmBvE,gBAAgBziH,SAAhB,CAA0BsrD,QAJP,CAA1C,EAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;OA+BA,QAAS27D,qBAAT,EAAgC,CAE5B,KAAK90G,IAAL,CAAYT,MAAMG,YAAN,EAAZ,CAEA;AACA,KAAKsrD,QAAL,CAAgB55D,MAAMvD,SAAN,CAAgB+I,KAAhB,CAAsBrF,IAAtB,CAA4BY,SAA5B,CAAhB,CAEA,KAAKy+G,eAAL,CAAuB,CAAvB,CAA4B;AAC5B;AAEA,GAAIt1E,SAAU,EAAd,CACA,KAAKy5E,cAAL,CAAsBz5E,OAAtB,CAAgC;AAEhC,IAAM,GAAItsC,GAAI,CAAR,CAAWkF,EAAI/B,UAAU/G,MAA/B,CAAuC4D,IAAMkF,CAA7C,CAAgD,EAAGlF,CAAnD,CAAuD,CAEnDssC,QAASnpC,UAAWnD,CAAX,EAAegR,IAAxB,EAAiChR,CAAjC,CAEH,CAED,KAAKgmH,MAAL,CAAc,EAAd,CAAsB;AACtB,KAAKC,YAAL,CAAoB,EAApB,CAA2B;AAC3B,KAAKxE,SAAL,CAAiB,EAAjB,CAAyB;AACzB,KAAKyE,sBAAL,CAA8B,EAA9B,CAAmC;AAEnC,GAAIlvH,OAAQ,IAAZ,CAEA,KAAKmvH,KAAL,CAAa,CAET3jE,QAAS,CACL,GAAI4jE,MAAJ,EAAY,CAER,MAAOpvH,OAAMglE,QAAN,CAAe5/D,MAAtB,CAEH,CALI,CAML,GAAIiqH,MAAJ,EAAY,CAER,MAAO,MAAKD,KAAL,CAAapvH,MAAM4qH,eAA1B,CAEH,CAVI,CAFA,CAcT,GAAI0E,kBAAJ,EAAwB,CAEpB,MAAOtvH,OAAMyqH,SAAN,CAAgBrlH,MAAvB,CAEH,CAlBQ,CAAb,CAsBH,CAED0C,OAAO4B,MAAP,CAAeolH,qBAAqBjnH,SAApC,CAA+C,CAE3CqjH,uBAAwB,IAFmB,CAI3C1yH,IAAK,cAAY,CAEb,GAAIgzD,SAAU,KAAKwZ,QAAnB,CACIuqD,SAAW/jE,QAAQpmD,MADvB,CAEIoqH,eAAiB,KAAK5E,eAF1B,CAGI6E,cAAgB,KAAKV,cAHzB,CAIIxN,MAAQ,KAAKyN,MAJjB,CAKIU,YAAc,KAAKT,YALvB,CAMIpE,SAAW,KAAKJ,SANpB,CAOIkF,UAAY9E,SAASzlH,MAPzB,CAQIwqH,YAAcxyH,SARlB,CAUA,IAAM,GAAI4L,GAAI,CAAR,CAAWkF,EAAI/B,UAAU/G,MAA/B,CAAuC4D,IAAMkF,CAA7C,CAAgD,EAAGlF,CAAnD,CAAuD,CAEnD,GAAI9L,QAASiP,UAAWnD,CAAX,CAAb,CACIgR,KAAO9c,OAAO8c,IADlB,CAEI7J,MAAQs/G,cAAez1G,IAAf,CAFZ,CAIA,GAAK7J,QAAU/S,SAAf,CAA2B,CAEvB;AAEA+S,MAAQo/G,UAAR,CACAE,cAAez1G,IAAf,EAAwB7J,KAAxB,CACAq7C,QAAQ3xD,IAAR,CAAcqD,MAAd,EAEA;AAEA,IAAM,GAAIo5B,GAAI,CAAR,CAAW3oB,EAAIgiH,SAArB,CAAgCr5F,IAAM3oB,CAAtC,CAAyC,EAAG2oB,CAA5C,CAAgD,CAE5Cu0F,SAAUv0F,CAAV,EAAcz8B,IAAd,CAAoB,GAAIywH,gBAAJ,CAAqBptH,MAArB,CAA6BqkH,MAAOjrF,CAAP,CAA7B,CAAyCo5F,YAAap5F,CAAb,CAAzC,CAApB,EAEH,CAEJ,CAhBD,IAgBO,IAAKnmB,MAAQq/G,cAAb,CAA8B,CAEjCI,YAAcpkE,QAASr7C,KAAT,CAAd,CAEA;AAEA,GAAI0/G,kBAAmB,EAAGL,cAA1B,CACIM,iBAAmBtkE,QAASqkE,gBAAT,CADvB,CAGAJ,cAAeK,iBAAiB91G,IAAhC,EAAyC7J,KAAzC,CACAq7C,QAASr7C,KAAT,EAAmB2/G,gBAAnB,CAEAL,cAAez1G,IAAf,EAAwB61G,gBAAxB,CACArkE,QAASqkE,gBAAT,EAA8B3yH,MAA9B,CAEA;AAEA,IAAM,GAAIo5B,GAAI,CAAR,CAAW3oB,EAAIgiH,SAArB,CAAgCr5F,IAAM3oB,CAAtC,CAAyC,EAAG2oB,CAA5C,CAAgD,CAE5C,GAAIy5F,iBAAkBlF,SAAUv0F,CAAV,CAAtB,CACI05F,WAAaD,gBAAiBF,gBAAjB,CADjB,CAEI7G,QAAU+G,gBAAiB5/G,KAAjB,CAFd,CAIA4/G,gBAAiB5/G,KAAjB,EAA2B6/G,UAA3B,CAEA,GAAKhH,UAAY5rH,SAAjB,CAA6B,CAEzB;AACA;AACA;AAEA4rH,QAAU,GAAIsB,gBAAJ,CAAqBptH,MAArB,CAA6BqkH,MAAOjrF,CAAP,CAA7B,CAAyCo5F,YAAap5F,CAAb,CAAzC,CAAV,CAEH,CAEDy5F,gBAAiBF,gBAAjB,EAAsC7G,OAAtC,CAEH,CAEJ,CAvCM,IAuCA,IAAKx9D,QAASr7C,KAAT,IAAqBy/G,WAA1B,CAAwC,CAE3Cj0H,QAAQ+iB,KAAR,CAAe,oEACX,mFADJ,EAGH,CAAC;AAEL,CAAC;AAEF,KAAKksG,eAAL,CAAuB4E,cAAvB,CAEH,CAxF0C,CA0F3CzmH,OAAQ,iBAAY,CAEhB,GAAIyiD,SAAU,KAAKwZ,QAAnB,CACIwqD,eAAiB,KAAK5E,eAD1B,CAEI6E,cAAgB,KAAKV,cAFzB,CAGIlE,SAAW,KAAKJ,SAHpB,CAIIkF,UAAY9E,SAASzlH,MAJzB,CAMA,IAAM,GAAI4D,GAAI,CAAR,CAAWkF,EAAI/B,UAAU/G,MAA/B,CAAuC4D,IAAMkF,CAA7C,CAAgD,EAAGlF,CAAnD,CAAuD,CAEnD,GAAI9L,QAASiP,UAAWnD,CAAX,CAAb,CACIgR,KAAO9c,OAAO8c,IADlB,CAEI7J,MAAQs/G,cAAez1G,IAAf,CAFZ,CAIA,GAAK7J,QAAU/S,SAAV,EAAuB+S,OAASq/G,cAArC,CAAsD,CAElD;AAEA,GAAIS,iBAAkBT,gBAAtB,CACIU,kBAAoB1kE,QAASykE,eAAT,CADxB,CAGAR,cAAeS,kBAAkBl2G,IAAjC,EAA0C7J,KAA1C,CACAq7C,QAASr7C,KAAT,EAAmB+/G,iBAAnB,CAEAT,cAAez1G,IAAf,EAAwBi2G,eAAxB,CACAzkE,QAASykE,eAAT,EAA6B/yH,MAA7B,CAEA;AAEA,IAAM,GAAIo5B,GAAI,CAAR,CAAW3oB,EAAIgiH,SAArB,CAAgCr5F,IAAM3oB,CAAtC,CAAyC,EAAG2oB,CAA5C,CAAgD,CAE5C,GAAIy5F,iBAAkBlF,SAAUv0F,CAAV,CAAtB,CACI65F,YAAcJ,gBAAiBE,eAAjB,CADlB,CAEIjH,QAAU+G,gBAAiB5/G,KAAjB,CAFd,CAIA4/G,gBAAiB5/G,KAAjB,EAA2BggH,WAA3B,CACAJ,gBAAiBE,eAAjB,EAAqCjH,OAArC,CAEH,CAEJ,CAEJ,CAAC;AAEF,KAAK4B,eAAL,CAAuB4E,cAAvB,CAEH,CAxI0C,CA0I3C;AACAY,QAAS,kBAAY,CAEjB,GAAI5kE,SAAU,KAAKwZ,QAAnB,CACIuqD,SAAW/jE,QAAQpmD,MADvB,CAEIoqH,eAAiB,KAAK5E,eAF1B,CAGI6E,cAAgB,KAAKV,cAHzB,CAIIlE,SAAW,KAAKJ,SAJpB,CAKIkF,UAAY9E,SAASzlH,MALzB,CAOA,IAAM,GAAI4D,GAAI,CAAR,CAAWkF,EAAI/B,UAAU/G,MAA/B,CAAuC4D,IAAMkF,CAA7C,CAAgD,EAAGlF,CAAnD,CAAuD,CAEnD,GAAI9L,QAASiP,UAAWnD,CAAX,CAAb,CACIgR,KAAO9c,OAAO8c,IADlB,CAEI7J,MAAQs/G,cAAez1G,IAAf,CAFZ,CAIA,GAAK7J,QAAU/S,SAAf,CAA2B,CAEvB,MAAOqyH,eAAez1G,IAAf,CAAP,CAEA,GAAK7J,MAAQq/G,cAAb,CAA8B,CAE1B;AAEA,GAAIK,kBAAmB,EAAGL,cAA1B,CACIM,iBAAmBtkE,QAASqkE,gBAAT,CADvB,CAEI53D,UAAY,EAAGs3D,QAFnB,CAGIc,WAAa7kE,QAASyM,SAAT,CAHjB,CAKA;AACAw3D,cAAeK,iBAAiB91G,IAAhC,EAAyC7J,KAAzC,CACAq7C,QAASr7C,KAAT,EAAmB2/G,gBAAnB,CAEA;AACAL,cAAeY,WAAWr2G,IAA1B,EAAmC61G,gBAAnC,CACArkE,QAASqkE,gBAAT,EAA8BQ,UAA9B,CACA7kE,QAAQsW,GAAR,GAEA;AAEA,IAAM,GAAIxrC,GAAI,CAAR,CAAW3oB,EAAIgiH,SAArB,CAAgCr5F,IAAM3oB,CAAtC,CAAyC,EAAG2oB,CAA5C,CAAgD,CAE5C,GAAIy5F,iBAAkBlF,SAAUv0F,CAAV,CAAtB,CACI05F,WAAaD,gBAAiBF,gBAAjB,CADjB,CAEI97B,KAAOg8B,gBAAiB93D,SAAjB,CAFX,CAIA83D,gBAAiB5/G,KAAjB,EAA2B6/G,UAA3B,CACAD,gBAAiBF,gBAAjB,EAAsC97B,IAAtC,CACAg8B,gBAAgBjuD,GAAhB,GAEH,CAEJ,CAhCD,IAgCO,CAEH;AAEA,GAAI7J,WAAY,EAAGs3D,QAAnB,CACIc,WAAa7kE,QAASyM,SAAT,CADjB,CAGAw3D,cAAeY,WAAWr2G,IAA1B,EAAmC7J,KAAnC,CACAq7C,QAASr7C,KAAT,EAAmBkgH,UAAnB,CACA7kE,QAAQsW,GAAR,GAEA;AAEA,IAAM,GAAIxrC,GAAI,CAAR,CAAW3oB,EAAIgiH,SAArB,CAAgCr5F,IAAM3oB,CAAtC,CAAyC,EAAG2oB,CAA5C,CAAgD,CAE5C,GAAIy5F,iBAAkBlF,SAAUv0F,CAAV,CAAtB,CAEAy5F,gBAAiB5/G,KAAjB,EAA2B4/G,gBAAiB93D,SAAjB,CAA3B,CACA83D,gBAAgBjuD,GAAhB,GAEH,CAEJ,CAAC;AAEL,CAAC;AAEL,CAAC;AAEF,KAAK8oD,eAAL,CAAuB4E,cAAvB,CAEH,CA5N0C,CA8N3C;AAEA9E,WAAY,oBAAW3yD,IAAX,CAAiBsyD,UAAjB,CAA8B,CAEtC;AACA;AAEA,GAAIiG,eAAgB,KAAKpB,sBAAzB,CACI/+G,MAAQmgH,cAAev4D,IAAf,CADZ,CAEI8yD,SAAW,KAAKJ,SAFpB,CAIA,GAAKt6G,QAAU/S,SAAf,CAA2B,MAAOytH,UAAU16G,KAAV,CAAP,CAE3B,GAAIoxG,OAAQ,KAAKyN,MAAjB,CACIU,YAAc,KAAKT,YADvB,CAEIzjE,QAAU,KAAKwZ,QAFnB,CAGIuqD,SAAW/jE,QAAQpmD,MAHvB,CAIIoqH,eAAiB,KAAK5E,eAJ1B,CAKImF,gBAAkB,GAAI3kH,MAAJ,CAAWmkH,QAAX,CALtB,CAOAp/G,MAAQ06G,SAASzlH,MAAjB,CAEAkrH,cAAev4D,IAAf,EAAwB5nD,KAAxB,CAEAoxG,MAAM1nH,IAAN,CAAYk+D,IAAZ,EACA23D,YAAY71H,IAAZ,CAAkBwwH,UAAlB,EACAQ,SAAShxH,IAAT,CAAek2H,eAAf,EAEA,IAAM,GAAI/mH,GAAIwmH,cAAR,CAAwBthH,EAAIs9C,QAAQpmD,MAA1C,CAAkD4D,IAAMkF,CAAxD,CAA2D,EAAGlF,CAA9D,CAAkE,CAE9D,GAAI9L,QAASsuD,QAASxiD,CAAT,CAAb,CACA+mH,gBAAiB/mH,CAAjB,EAAuB,GAAIshH,gBAAJ,CAAqBptH,MAArB,CAA6B66D,IAA7B,CAAmCsyD,UAAnC,CAAvB,CAEH,CAED,MAAO0F,gBAAP,CAEH,CAnQ0C,CAqQ3CQ,aAAc,sBAAWx4D,IAAX,CAAkB,CAE5B;AACA;AAEA,GAAIu4D,eAAgB,KAAKpB,sBAAzB,CACI/+G,MAAQmgH,cAAev4D,IAAf,CADZ,CAGA,GAAK5nD,QAAU/S,SAAf,CAA2B,CAEvB,GAAImkH,OAAQ,KAAKyN,MAAjB,CACIU,YAAc,KAAKT,YADvB,CAEIpE,SAAW,KAAKJ,SAFpB,CAGI+F,kBAAoB3F,SAASzlH,MAAT,CAAkB,CAH1C,CAIIqrH,aAAe5F,SAAU2F,iBAAV,CAJnB,CAKIE,iBAAmB34D,KAAMy4D,iBAAN,CALvB,CAOAF,cAAeI,gBAAf,EAAoCvgH,KAApC,CAEA06G,SAAU16G,KAAV,EAAoBsgH,YAApB,CACA5F,SAAS/oD,GAAT,GAEA4tD,YAAav/G,KAAb,EAAuBu/G,YAAac,iBAAb,CAAvB,CACAd,YAAY5tD,GAAZ,GAEAy/C,MAAOpxG,KAAP,EAAiBoxG,MAAOiP,iBAAP,CAAjB,CACAjP,MAAMz/C,GAAN,GAEH,CAEJ,CAnS0C,CAA/C,EAuSA;;;;;;;;;OAWA,QAAS6uD,gBAAT,CAA0BC,KAA1B,CAAiChb,IAAjC,CAAuCib,SAAvC,CAAmD,CAE/C,KAAKC,MAAL,CAAcF,KAAd,CACA,KAAKG,KAAL,CAAanb,IAAb,CACA,KAAKob,UAAL,CAAkBH,WAAa,IAA/B,CAEA,GAAItb,QAASK,KAAKL,MAAlB,CACI0b,QAAU1b,OAAOnwG,MADrB,CAEI8rH,aAAe,GAAI9lH,MAAJ,CAAW6lH,OAAX,CAFnB,CAIA,GAAIE,qBAAsB,CACtBlgB,YAAa14F,mBADS,CAEtB24F,UAAW34F,mBAFW,CAA1B,CAKA,IAAM,GAAIvP,GAAI,CAAd,CAAiBA,IAAMioH,OAAvB,CAAgC,EAAGjoH,CAAnC,CAAuC,CAEnC,GAAIooH,aAAc7b,OAAQvsG,CAAR,EAAYorG,iBAAZ,CAA+B,IAA/B,CAAlB,CACA8c,aAAcloH,CAAd,EAAoBooH,WAApB,CACAA,YAAYjhB,QAAZ,CAAuBghB,mBAAvB,CAEH,CAED,KAAKE,oBAAL,CAA4BF,mBAA5B,CAEA,KAAKG,aAAL,CAAqBJ,YAArB,CAAmC;AAEnC;AACA,KAAKK,iBAAL,CAAyB,GAAInmH,MAAJ,CAAW6lH,OAAX,CAAzB,CAEA,KAAKO,WAAL,CAAmB,IAAnB,CAA2B;AAC3B,KAAKC,iBAAL,CAAyB,IAAzB,CAAgC;AAEhC,KAAKC,qBAAL,CAA6B,IAA7B,CACA,KAAKC,kBAAL,CAA0B,IAA1B,CAEA,KAAKj6H,IAAL,CAAYwgB,UAAZ,CACA,KAAK05G,UAAL,CAAkB,CAAE,CAApB,CAEA;AACA;AACA,KAAKrnH,UAAL,CAAkB,IAAlB,CAEA;AACA;AACA,KAAKpB,IAAL,CAAY,CAAZ,CAEA,KAAKorG,SAAL,CAAiB,CAAjB,CACA,KAAKsd,mBAAL,CAA2B,CAA3B,CAEA,KAAK7nB,MAAL,CAAc,CAAd,CACA,KAAK8nB,gBAAL,CAAwB,CAAxB,CAEA,KAAKC,WAAL,CAAmBt0H,QAAnB,CAA+B;AAE/B,KAAKu0H,MAAL,CAAc,KAAd,CAAwB;AACxB,KAAKl7H,OAAL,CAAe,IAAf,CAAwB;AAExB,KAAKm7H,iBAAL,CAA0B,KAA1B,CAAiC;AAEjC,KAAKC,gBAAL,CAAyB,IAAzB,CAAgC;AAChC,KAAKC,cAAL,CAAuB,IAAvB,CAA8B;AAEjC,CAEDrqH,OAAO4B,MAAP,CAAeinH,gBAAgB9oH,SAA/B,CAA0C,CAEtC;AAEA8+G,KAAM,eAAY,CAEd,KAAKmK,MAAL,CAAYsB,eAAZ,CAA6B,IAA7B,EAEA,MAAO,KAAP,CAEH,CAVqC,CAYtC9mH,KAAM,eAAY,CAEd,KAAKwlH,MAAL,CAAYuB,iBAAZ,CAA+B,IAA/B,EAEA,MAAO,MAAKnyH,KAAL,EAAP,CAEH,CAlBqC,CAoBtCA,MAAO,gBAAY,CAEf,KAAK8xH,MAAL,CAAc,KAAd,CACA,KAAKl7H,OAAL,CAAe,IAAf,CAEA,KAAKqS,IAAL,CAAY,CAAZ,CAAiB;AACjB,KAAKyoH,UAAL,CAAkB,CAAE,CAApB,CAAuB;AACvB,KAAKrnH,UAAL,CAAkB,IAAlB,CAAwB;AAExB,MAAO,MAAK+nH,UAAL,GAAkBC,WAAlB,EAAP,CAEH,CA/BqC,CAiCtCC,UAAW,oBAAY,CAEnB,MAAO,MAAK17H,OAAL,EAAgB,CAAE,KAAKk7H,MAAvB,EAAiC,KAAKzd,SAAL,GAAmB,CAApD,EACH,KAAKhqG,UAAL,GAAoB,IADjB,EACyB,KAAKumH,MAAL,CAAY2B,eAAZ,CAA6B,IAA7B,CADhC,CAGH,CAtCqC,CAwCtC;AACAC,YAAa,sBAAY,CAErB,MAAO,MAAK5B,MAAL,CAAY2B,eAAZ,CAA6B,IAA7B,CAAP,CAEH,CA7CqC,CA+CtCE,QAAS,iBAAWxpH,IAAX,CAAkB,CAEvB,KAAKoB,UAAL,CAAkBpB,IAAlB,CAEA,MAAO,KAAP,CAEH,CArDqC,CAuDtCk+G,QAAS,iBAAWv6D,IAAX,CAAiBilE,WAAjB,CAA+B,CAEpC,KAAKr6H,IAAL,CAAYo1D,IAAZ,CACA,KAAKilE,WAAL,CAAmBA,WAAnB,CAEA,MAAO,KAAP,CAEH,CA9DqC,CAgEtC;AAEA;AACA;AACA;AACAa,mBAAoB,4BAAW5oB,MAAX,CAAoB,CAEpC,KAAKA,MAAL,CAAcA,MAAd,CAEA;AACA,KAAK8nB,gBAAL,CAAwB,KAAKh7H,OAAL,CAAekzG,MAAf,CAAwB,CAAhD,CAEA,MAAO,MAAKsoB,UAAL,EAAP,CAEH,CA9EqC,CAgFtC;AACAO,mBAAoB,6BAAY,CAE5B,MAAO,MAAKf,gBAAZ,CAEH,CArFqC,CAuFtCgB,OAAQ,gBAAW5nH,QAAX,CAAsB,CAE1B,MAAO,MAAK6nH,eAAL,CAAsB7nH,QAAtB,CAAgC,CAAhC,CAAmC,CAAnC,CAAP,CAEH,CA3FqC,CA6FtC8nH,QAAS,iBAAW9nH,QAAX,CAAsB,CAE3B,MAAO,MAAK6nH,eAAL,CAAsB7nH,QAAtB,CAAgC,CAAhC,CAAmC,CAAnC,CAAP,CAEH,CAjGqC,CAmGtC+nH,cAAe,uBAAWC,aAAX,CAA0BhoH,QAA1B,CAAoCioH,IAApC,CAA2C,CAEtDD,cAAcF,OAAd,CAAuB9nH,QAAvB,EACA,KAAK4nH,MAAL,CAAa5nH,QAAb,EAEA,GAAKioH,IAAL,CAAY,CAER,GAAIC,gBAAiB,KAAKrC,KAAL,CAAW7lH,QAAhC,CACImoH,gBAAkBH,cAAcnC,KAAd,CAAoB7lH,QAD1C,CAGIooH,cAAgBD,gBAAkBD,cAHtC,CAIIG,cAAgBH,eAAiBC,eAJrC,CAMAH,cAAcC,IAAd,CAAoB,GAApB,CAAyBG,aAAzB,CAAwCpoH,QAAxC,EACA,KAAKioH,IAAL,CAAWI,aAAX,CAA0B,GAA1B,CAA+BroH,QAA/B,EAEH,CAED,MAAO,KAAP,CAEH,CAvHqC,CAyHtCsoH,YAAa,qBAAWC,YAAX,CAAyBvoH,QAAzB,CAAmCioH,IAAnC,CAA0C,CAEnD,MAAOM,cAAaR,aAAb,CAA4B,IAA5B,CAAkC/nH,QAAlC,CAA4CioH,IAA5C,CAAP,CAEH,CA7HqC,CA+HtCb,WAAY,qBAAY,CAEpB,GAAIoB,mBAAoB,KAAK/B,kBAA7B,CAEA,GAAK+B,oBAAsB,IAA3B,CAAkC,CAE9B,KAAK/B,kBAAL,CAA0B,IAA1B,CACA,KAAKb,MAAL,CAAY6C,2BAAZ,CAAyCD,iBAAzC,EAEH,CAED,MAAO,KAAP,CAEH,CA5IqC,CA8ItC;AAEA;AACA;AACA;AACAE,sBAAuB,+BAAWrf,SAAX,CAAuB,CAE1C,KAAKA,SAAL,CAAiBA,SAAjB,CACA,KAAKsd,mBAAL,CAA2B,KAAKG,MAAL,CAAc,CAAd,CAAkBzd,SAA7C,CAEA,MAAO,MAAKge,WAAL,EAAP,CAEH,CA1JqC,CA4JtC;AACAsB,sBAAuB,gCAAY,CAE/B,MAAO,MAAKhC,mBAAZ,CAEH,CAjKqC,CAmKtCiC,YAAa,qBAAW5oH,QAAX,CAAsB,CAE/B,KAAKqpG,SAAL,CAAiB,KAAKwc,KAAL,CAAW7lH,QAAX,CAAsBA,QAAvC,CAEA,MAAO,MAAKqnH,WAAL,EAAP,CAEH,CAzKqC,CA2KtCwB,SAAU,kBAAWpR,MAAX,CAAoB,CAE1B,KAAKx5G,IAAL,CAAYw5G,OAAOx5G,IAAnB,CACA,KAAKorG,SAAL,CAAiBoO,OAAOpO,SAAxB,CAEA,MAAO,MAAKge,WAAL,EAAP,CAEH,CAlLqC,CAoLtCyB,KAAM,cAAW9oH,QAAX,CAAsB,CAExB,MAAO,MAAKioH,IAAL,CAAW,KAAKtB,mBAAhB,CAAqC,CAArC,CAAwC3mH,QAAxC,CAAP,CAEH,CAxLqC,CA0LtCioH,KAAM,cAAWc,cAAX,CAA2BC,YAA3B,CAAyChpH,QAAzC,CAAoD,CAEtD,GAAI0lH,OAAQ,KAAKE,MAAjB,CAAyBznH,IAAMunH,MAAMznH,IAArC,CACIioH,YAAc,KAAKM,qBADvB,CAGInd,UAAY,KAAKA,SAHrB,CAKA,GAAK6c,cAAgB,IAArB,CAA4B,CAExBA,YAAcR,MAAMuD,uBAAN,EAAd,CACA,KAAKzC,qBAAL,CAA6BN,WAA7B,CAEH,CAED,GAAItlH,OAAQslH,YAAYpiB,kBAAxB,CACIx8D,OAAS4+E,YAAYniB,YADzB,CAGAnjG,MAAO,CAAP,EAAazC,GAAb,CACAyC,MAAO,CAAP,EAAazC,IAAM6B,QAAnB,CAEAsnC,OAAQ,CAAR,EAAcyhF,eAAiB1f,SAA/B,CACA/hE,OAAQ,CAAR,EAAc0hF,aAAe3f,SAA7B,CAEA,MAAO,KAAP,CAEH,CAnNqC,CAqNtCge,YAAa,sBAAY,CAErB,GAAI6B,sBAAuB,KAAK1C,qBAAhC,CAEA,GAAK0C,uBAAyB,IAA9B,CAAqC,CAEjC,KAAK1C,qBAAL,CAA6B,IAA7B,CACA,KAAKZ,MAAL,CAAY6C,2BAAZ,CAAyCS,oBAAzC,EAEH,CAED,MAAO,KAAP,CAEH,CAlOqC,CAoOtC;AAEAC,SAAU,mBAAY,CAElB,MAAO,MAAKvD,MAAZ,CAEH,CA1OqC,CA4OtCwD,QAAS,kBAAY,CAEjB,MAAO,MAAKvD,KAAZ,CAEH,CAhPqC,CAkPtCwD,QAAS,kBAAY,CAEjB,MAAO,MAAKvD,UAAL,EAAmB,KAAKF,MAAL,CAAY0D,KAAtC,CAEH,CAtPqC,CAwPtC;AAEAC,QAAS,iBAAWtrH,IAAX,CAAiBurH,SAAjB,CAA4BC,aAA5B,CAA2CjL,SAA3C,CAAuD,CAE5D;AAEA,GAAK,CAAE,KAAK5yH,OAAZ,CAAsB,CAElB;AAEA,KAAK89H,aAAL,CAAoBzrH,IAApB,EACA,OAEH,CAED,GAAIqrG,WAAY,KAAKjqG,UAArB,CAEA,GAAKiqG,YAAc,IAAnB,CAA0B,CAEtB;AAEA,GAAIqgB,aAAc,CAAE1rH,KAAOqrG,SAAT,EAAuBmgB,aAAzC,CACA,GAAKE,YAAc,CAAd,EAAmBF,gBAAkB,CAA1C,CAA8C,CAE1C,OAAQ;AAEX,CAED;AAEA,KAAKpqH,UAAL,CAAkB,IAAlB,CAAwB;AACxBmqH,UAAYC,cAAgBE,WAA5B,CAEH,CAED;AAEAH,WAAa,KAAKI,gBAAL,CAAuB3rH,IAAvB,CAAb,CACA,GAAI4rH,UAAW,KAAKC,WAAL,CAAkBN,SAAlB,CAAf,CAEA;AACA;AAEA,GAAI1qB,QAAS,KAAK4qB,aAAL,CAAoBzrH,IAApB,CAAb,CAEA,GAAK6gG,OAAS,CAAd,CAAkB,CAEd,GAAIknB,cAAe,KAAKI,aAAxB,CACA,GAAI2D,gBAAiB,KAAK1D,iBAA1B,CAEA,IAAM,GAAIj7F,GAAI,CAAR,CAAW3oB,EAAIujH,aAAa9rH,MAAlC,CAA0CkxB,IAAM3oB,CAAhD,CAAmD,EAAG2oB,CAAtD,CAA0D,CAEtD46F,aAAc56F,CAAd,EAAkBg5E,QAAlB,CAA4BylB,QAA5B,EACAE,eAAgB3+F,CAAhB,EAAoBmzF,UAApB,CAAgCC,SAAhC,CAA2C1f,MAA3C,EAEH,CAEJ,CAEJ,CAnTqC,CAqTtC4qB,cAAe,uBAAWzrH,IAAX,CAAkB,CAE7B,GAAI6gG,QAAS,CAAb,CAEA,GAAK,KAAKlzG,OAAV,CAAoB,CAEhBkzG,OAAS,KAAKA,MAAd,CACA,GAAIonB,aAAc,KAAKO,kBAAvB,CAEA,GAAKP,cAAgB,IAArB,CAA4B,CAExB,GAAI8D,kBAAmB9D,YAAY9hB,QAAZ,CAAsBnmG,IAAtB,EAA8B,CAA9B,CAAvB,CAEA6gG,QAAUkrB,gBAAV,CAEA,GAAK/rH,KAAOioH,YAAYpiB,kBAAZ,CAAgC,CAAhC,CAAZ,CAAkD,CAE9C,KAAKsjB,UAAL,GAEA,GAAK4C,mBAAqB,CAA1B,CAA8B,CAE1B;AACA,KAAKp+H,OAAL,CAAe,KAAf,CAEH,CAEJ,CAEJ,CAEJ,CAED,KAAKg7H,gBAAL,CAAwB9nB,MAAxB,CACA,MAAOA,OAAP,CAEH,CAxVqC,CA0VtC8qB,iBAAkB,0BAAW3rH,IAAX,CAAkB,CAEhC,GAAIorG,WAAY,CAAhB,CAEA,GAAK,CAAE,KAAKyd,MAAZ,CAAqB,CAEjBzd,UAAY,KAAKA,SAAjB,CAEA,GAAI6c,aAAc,KAAKM,qBAAvB,CAEA,GAAKN,cAAgB,IAArB,CAA4B,CAExB,GAAI8D,kBAAmB9D,YAAY9hB,QAAZ,CAAsBnmG,IAAtB,EAA8B,CAA9B,CAAvB,CAEAorG,WAAa2gB,gBAAb,CAEA,GAAK/rH,KAAOioH,YAAYpiB,kBAAZ,CAAgC,CAAhC,CAAZ,CAAkD,CAE9C,KAAKujB,WAAL,GAEA,GAAKhe,YAAc,CAAnB,CAAuB,CAEnB;AACA,KAAKyd,MAAL,CAAc,IAAd,CAEH,CALD,IAKO,CAEH;AACA,KAAKzd,SAAL,CAAiBA,SAAjB,CAEH,CAEJ,CAEJ,CAEJ,CAED,KAAKsd,mBAAL,CAA2Btd,SAA3B,CACA,MAAOA,UAAP,CAEH,CAnYqC,CAqYtCygB,YAAa,qBAAWN,SAAX,CAAuB,CAEhC,GAAIvrH,MAAO,KAAKA,IAAL,CAAYurH,SAAvB,CAEA,GAAKA,YAAc,CAAnB,CAAuB,MAAOvrH,KAAP,CAEvB,GAAI+B,UAAW,KAAK6lH,KAAL,CAAW7lH,QAA1B,CAEIxT,KAAO,KAAKA,IAFhB,CAGIy9H,UAAY,KAAKvD,UAHrB,CAKA,GAAKl6H,OAASugB,QAAd,CAAyB,CAErB,GAAKk9G,YAAc,CAAE,CAArB,CAAyB,CAErB;AAEA,KAAKvD,UAAL,CAAkB,CAAlB,CACA,KAAKwD,WAAL,CAAkB,IAAlB,CAAwB,IAAxB,CAA8B,KAA9B,EAEH,CAEDC,YAAa,CAET,GAAKlsH,MAAQ+B,QAAb,CAAwB,CAEpB/B,KAAO+B,QAAP,CAEH,CAJD,IAIO,IAAK/B,KAAO,CAAZ,CAAgB,CAEnBA,KAAO,CAAP,CAEH,CAJM,IAIA,MAAMksH,YAAN,CAEP,GAAK,KAAKpD,iBAAV,CAA8B,KAAKD,MAAL,CAAc,IAAd,CAA9B,IACK,MAAKl7H,OAAL,CAAe,KAAf,CAEL,KAAKg6H,MAAL,CAAY1wH,aAAZ,CAA2B,CACvB2C,KAAM,UADiB,CACL4/G,OAAQ,IADH,CAEvB5pF,UAAW27F,UAAY,CAAZ,CAAgB,CAAE,CAAlB,CAAsB,CAFV,CAA3B,EAKH,CAEJ,CAjCD,IAiCO,CAAE;AAEL,GAAIY,UAAa59H,OAASygB,YAA1B,CAEA,GAAKg9G,YAAc,CAAE,CAArB,CAAyB,CAErB;AAEA,GAAKT,WAAa,CAAlB,CAAsB,CAElBS,UAAY,CAAZ,CAEA,KAAKC,WAAL,CAAkB,IAAlB,CAAwB,KAAKrD,WAAL,GAAqB,CAA7C,CAAgDuD,QAAhD,EAEH,CAND,IAMO,CAEH;AACA;AACA;AAEA,KAAKF,WAAL,CAAkB,KAAKrD,WAAL,GAAqB,CAAvC,CAA0C,IAA1C,CAAgDuD,QAAhD,EAEH,CAEJ,CAED,GAAKnsH,MAAQ+B,QAAR,EAAoB/B,KAAO,CAAhC,CAAoC,CAEhC;AAEA,GAAIosH,WAAY76H,KAAKmT,KAAL,CAAY1E,KAAO+B,QAAnB,CAAhB,CAA+C;AAC/C/B,MAAQ+B,SAAWqqH,SAAnB,CAEAJ,WAAaz6H,KAAK6iB,GAAL,CAAUg4G,SAAV,CAAb,CAEA,GAAIC,SAAU,KAAKzD,WAAL,CAAmBoD,SAAjC,CAEA,GAAKK,SAAW,CAAhB,CAAoB,CAEhB;AAEA,GAAK,KAAKvD,iBAAV,CAA8B,KAAKD,MAAL,CAAc,IAAd,CAA9B,IACK,MAAKl7H,OAAL,CAAe,KAAf,CAELqS,KAAOurH,UAAY,CAAZ,CAAgBxpH,QAAhB,CAA2B,CAAlC,CAEA,KAAK4lH,MAAL,CAAY1wH,aAAZ,CAA2B,CACvB2C,KAAM,UADiB,CACL4/G,OAAQ,IADH,CAEvB5pF,UAAW27F,UAAY,CAAZ,CAAgB,CAAhB,CAAoB,CAAE,CAFV,CAA3B,EAKH,CAdD,IAcO,CAEH;AAEA,GAAKc,UAAY,CAAjB,CAAqB,CAEjB;AAEA,GAAIC,SAAUf,UAAY,CAA1B,CACA,KAAKU,WAAL,CAAkBK,OAAlB,CAA2B,CAAEA,OAA7B,CAAsCH,QAAtC,EAEH,CAPD,IAOO,CAEH,KAAKF,WAAL,CAAkB,KAAlB,CAAyB,KAAzB,CAAgCE,QAAhC,EAEH,CAED,KAAK1D,UAAL,CAAkBuD,SAAlB,CAEA,KAAKrE,MAAL,CAAY1wH,aAAZ,CAA2B,CACvB2C,KAAM,MADiB,CACT4/G,OAAQ,IADC,CACK4S,UAAWA,SADhB,CAA3B,EAIH,CAEJ,CAED,GAAKD,UAAY,CAAEH,UAAY,CAAd,IAAsB,CAAvC,CAA2C,CAEvC;AAEA,KAAKhsH,IAAL,CAAYA,IAAZ,CACA,MAAO+B,UAAW/B,IAAlB,CAEH,CAEJ,CAED,KAAKA,IAAL,CAAYA,IAAZ,CACA,MAAOA,KAAP,CAEH,CA7gBqC,CA+gBtCisH,YAAa,qBAAWK,OAAX,CAAoBC,KAApB,CAA2BJ,QAA3B,CAAsC,CAE/C,GAAInlB,UAAW,KAAKkhB,oBAApB,CAEA,GAAKiE,QAAL,CAAgB,CAEZnlB,SAASc,WAAT,CAAwBz4F,eAAxB,CACA23F,SAASe,SAAT,CAAsB14F,eAAtB,CAEH,CALD,IAKO,CAEH;AAEA,GAAKi9G,OAAL,CAAe,CAEXtlB,SAASc,WAAT,CAAuB,KAAKihB,gBAAL,CAAwB15G,eAAxB,CAA0CD,mBAAjE,CAEH,CAJD,IAIO,CAEH43F,SAASc,WAAT,CAAuBx4F,gBAAvB,CAEH,CAED,GAAKi9G,KAAL,CAAa,CAETvlB,SAASe,SAAT,CAAqB,KAAKihB,cAAL,CAAsB35G,eAAtB,CAAwCD,mBAA7D,CAEH,CAJD,IAIO,CAEH43F,SAASe,SAAT,CAAuBz4F,gBAAvB,CAEH,CAEJ,CAEJ,CAljBqC,CAojBtCs6G,gBAAiB,yBAAW7nH,QAAX,CAAqByqH,SAArB,CAAgCC,UAAhC,CAA6C,CAE1D,GAAIhF,OAAQ,KAAKE,MAAjB,CAAyBznH,IAAMunH,MAAMznH,IAArC,CACIioH,YAAc,KAAKO,kBADvB,CAGA,GAAKP,cAAgB,IAArB,CAA4B,CAExBA,YAAcR,MAAMuD,uBAAN,EAAd,CACA,KAAKxC,kBAAL,CAA0BP,WAA1B,CAEH,CAED,GAAItlH,OAAQslH,YAAYpiB,kBAAxB,CACIx8D,OAAS4+E,YAAYniB,YADzB,CAGAnjG,MAAO,CAAP,EAAazC,GAAb,CAAsBmpC,OAAQ,CAAR,EAAcmjF,SAAd,CACtB7pH,MAAO,CAAP,EAAazC,IAAM6B,QAAnB,CAA6BsnC,OAAQ,CAAR,EAAcojF,UAAd,CAE7B,MAAO,KAAP,CAEH,CAxkBqC,CAA1C,EA4kBA;;;;;;;;OAUA,QAASC,eAAT,CAAyB1mH,IAAzB,CAAgC,CAE5B,KAAKqlH,KAAL,CAAarlH,IAAb,CACA,KAAK2mH,kBAAL,GACA,KAAKC,UAAL,CAAkB,CAAlB,CAEA,KAAK5sH,IAAL,CAAY,CAAZ,CAEA,KAAKorG,SAAL,CAAiB,GAAjB,CAEH,CAEDshB,eAAehuH,SAAf,CAA2BC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeC,gBAAgBH,SAA/B,CAAf,CAA2D,CAElFI,YAAa4tH,cAFqE,CAIlFG,YAAa,qBAAWrT,MAAX,CAAmBsT,eAAnB,CAAqC,CAE9C,GAAI9mH,MAAOwzG,OAAOqO,UAAP,EAAqB,KAAKwD,KAArC,CACIjf,OAASoN,OAAOoO,KAAP,CAAaxb,MAD1B,CAEI0b,QAAU1b,OAAOnwG,MAFrB,CAGIylH,SAAWlI,OAAO4O,iBAHtB,CAIIL,aAAevO,OAAO2O,aAJ1B,CAKI4E,SAAW/mH,KAAK6K,IALpB,CAMIm8G,eAAiB,KAAKC,sBAN1B,CAOIC,eAAiBF,eAAgBD,QAAhB,CAPrB,CASA,GAAKG,iBAAmBj5H,SAAxB,CAAoC,CAEhCi5H,eAAiB,EAAjB,CACAF,eAAgBD,QAAhB,EAA6BG,cAA7B,CAEH,CAED,IAAM,GAAIrtH,GAAI,CAAd,CAAiBA,IAAMioH,OAAvB,CAAgC,EAAGjoH,CAAnC,CAAuC,CAEnC,GAAI8qG,OAAQyB,OAAQvsG,CAAR,CAAZ,CACI6tG,UAAY/C,MAAMpkF,IADtB,CAEIs5F,QAAUqN,eAAgBxf,SAAhB,CAFd,CAIA,GAAKmS,UAAY5rH,SAAjB,CAA6B,CAEzBytH,SAAU7hH,CAAV,EAAgBggH,OAAhB,CAEH,CAJD,IAIO,CAEHA,QAAU6B,SAAU7hH,CAAV,CAAV,CAEA,GAAKggH,UAAY5rH,SAAjB,CAA6B,CAEzB;AAEA,GAAK4rH,QAAQwI,WAAR,GAAwB,IAA7B,CAAoC,CAEhC,EAAGxI,QAAQQ,cAAX,CACA,KAAK8M,mBAAL,CAA0BtN,OAA1B,CAAmCkN,QAAnC,CAA6Crf,SAA7C,EAEH,CAED,SAEH,CAED,GAAI9+C,MAAOk+D,iBAAmBA,gBAC1B1E,iBAD0B,CACPvoH,CADO,EACHggH,OADG,CACKqB,UADnC,CAGArB,QAAU,GAAID,cAAJ,CACNuB,gBAAgBviH,MAAhB,CAAwBoH,IAAxB,CAA8B0nG,SAA9B,CAAyC9+C,IAAzC,CADM,CAEN+7C,MAAMrF,aAFA,CAEeqF,MAAMrD,YAAN,EAFf,CAAV,CAIA,EAAGuY,QAAQQ,cAAX,CACA,KAAK8M,mBAAL,CAA0BtN,OAA1B,CAAmCkN,QAAnC,CAA6Crf,SAA7C,EAEAgU,SAAU7hH,CAAV,EAAgBggH,OAAhB,CAEH,CAEDkI,aAAcloH,CAAd,EAAkBmmG,YAAlB,CAAiC6Z,QAAQ/8E,MAAzC,CAEH,CAEJ,CArEiF,CAuElFmmF,gBAAiB,yBAAWzP,MAAX,CAAoB,CAEjC,GAAK,CAAE,KAAK8P,eAAL,CAAsB9P,MAAtB,CAAP,CAAwC,CAEpC,GAAKA,OAAO6O,WAAP,GAAuB,IAA5B,CAAmC,CAE/B;AACA;AAEA,GAAI0E,UAAW,CAAEvT,OAAOqO,UAAP,EAAqB,KAAKwD,KAA5B,EAAoCx6G,IAAnD,CACIu8G,SAAW5T,OAAOoO,KAAP,CAAa/2G,IAD5B,CAEIw8G,eAAiB,KAAKC,cAAL,CAAqBF,QAArB,CAFrB,CAIA,KAAKP,WAAL,CAAkBrT,MAAlB,CACI6T,gBAAkBA,eAAeE,YAAf,CAA6B,CAA7B,CADtB,EAGA,KAAKC,kBAAL,CAAyBhU,MAAzB,CAAiC4T,QAAjC,CAA2CL,QAA3C,EAEH,CAED,GAAIrL,UAAWlI,OAAO4O,iBAAtB,CAEA;AACA,IAAM,GAAIvoH,GAAI,CAAR,CAAWkF,EAAI28G,SAASzlH,MAA9B,CAAsC4D,IAAMkF,CAA5C,CAA+C,EAAGlF,CAAlD,CAAsD,CAElD,GAAIggH,SAAU6B,SAAU7hH,CAAV,CAAd,CAEA,GAAKggH,QAAQO,QAAR,KAAwB,CAA7B,CAAiC,CAE7B,KAAKqN,YAAL,CAAmB5N,OAAnB,EACAA,QAAQc,iBAAR,GAEH,CAEJ,CAED,KAAK+M,WAAL,CAAkBlU,MAAlB,EAEH,CAEJ,CA/GiF,CAiHlF0P,kBAAmB,2BAAW1P,MAAX,CAAoB,CAEnC,GAAK,KAAK8P,eAAL,CAAsB9P,MAAtB,CAAL,CAAsC,CAElC,GAAIkI,UAAWlI,OAAO4O,iBAAtB,CAEA;AACA,IAAM,GAAIvoH,GAAI,CAAR,CAAWkF,EAAI28G,SAASzlH,MAA9B,CAAsC4D,IAAMkF,CAA5C,CAA+C,EAAGlF,CAAlD,CAAsD,CAElD,GAAIggH,SAAU6B,SAAU7hH,CAAV,CAAd,CAEA,GAAK,EAAGggH,QAAQO,QAAX,GAAwB,CAA7B,CAAiC,CAE7BP,QAAQgB,oBAAR,GACA,KAAK8M,gBAAL,CAAuB9N,OAAvB,EAEH,CAEJ,CAED,KAAK+N,eAAL,CAAsBpU,MAAtB,EAEH,CAEJ,CAzIiF,CA2IlF;AAEAmT,mBAAoB,6BAAY,CAE5B,KAAKkB,QAAL,CAAgB,EAAhB,CAAoB;AACpB,KAAKC,eAAL,CAAuB,CAAvB,CAEA,KAAKR,cAAL,CAAsB,EAAtB,CACA;AACA;AACA;AACA;AACA;AAGA,KAAKhM,SAAL,CAAiB,EAAjB,CAAqB;AACrB,KAAKyM,gBAAL,CAAwB,CAAxB,CAEA,KAAKd,sBAAL,CAA8B,EAA9B,CAAkC;AAGlC,KAAKe,oBAAL,CAA4B,EAA5B,CAAgC;AAChC,KAAKC,2BAAL,CAAmC,CAAnC,CAEA,GAAIp3H,OAAQ,IAAZ,CAEA,KAAKmvH,KAAL,CAAa,CAETkI,QAAS,CACL,GAAIjI,MAAJ,EAAY,CAER,MAAOpvH,OAAMg3H,QAAN,CAAe5xH,MAAtB,CAEH,CALI,CAML,GAAIiqH,MAAJ,EAAY,CAER,MAAOrvH,OAAMi3H,eAAb,CAEH,CAVI,CAFA,CAcTpM,SAAU,CACN,GAAIuE,MAAJ,EAAY,CAER,MAAOpvH,OAAMyqH,SAAN,CAAgBrlH,MAAvB,CAEH,CALK,CAMN,GAAIiqH,MAAJ,EAAY,CAER,MAAOrvH,OAAMk3H,gBAAb,CAEH,CAVK,CAdD,CA0BTI,oBAAqB,CACjB,GAAIlI,MAAJ,EAAY,CAER,MAAOpvH,OAAMm3H,oBAAN,CAA2B/xH,MAAlC,CAEH,CALgB,CAMjB,GAAIiqH,MAAJ,EAAY,CAER,MAAOrvH,OAAMo3H,2BAAb,CAEH,CAVgB,CA1BZ,CAAb,CAyCH,CA9MiF,CAgNlF;AAEA3E,gBAAiB,yBAAW9P,MAAX,CAAoB,CAEjC,GAAIxyG,OAAQwyG,OAAO6O,WAAnB,CACA,MAAOrhH,SAAU,IAAV,EAAkBA,MAAQ,KAAK8mH,eAAtC,CAEH,CAvNiF,CAyNlFN,mBAAoB,4BAAWhU,MAAX,CAAmB4T,QAAnB,CAA6BL,QAA7B,CAAwC,CAExD,GAAImB,SAAU,KAAKL,QAAnB,CACIO,cAAgB,KAAKd,cADzB,CAEID,eAAiBe,cAAehB,QAAf,CAFrB,CAIA,GAAKC,iBAAmBp5H,SAAxB,CAAoC,CAEhCo5H,eAAiB,CAEbE,aAAc,CAAE/T,MAAF,CAFD,CAGb6U,aAAc,EAHD,CAAjB,CAOA7U,OAAO8O,iBAAP,CAA2B,CAA3B,CAEA8F,cAAehB,QAAf,EAA4BC,cAA5B,CAEH,CAbD,IAaO,CAEH,GAAIE,cAAeF,eAAeE,YAAlC,CAEA/T,OAAO8O,iBAAP,CAA2BiF,aAAatxH,MAAxC,CACAsxH,aAAa78H,IAAb,CAAmB8oH,MAAnB,EAEH,CAEDA,OAAO6O,WAAP,CAAqB6F,QAAQjyH,MAA7B,CACAiyH,QAAQx9H,IAAR,CAAc8oH,MAAd,EAEA6T,eAAegB,YAAf,CAA6BtB,QAA7B,EAA0CvT,MAA1C,CAEH,CA1PiF,CA4PlF8U,sBAAuB,+BAAW9U,MAAX,CAAoB,CAEvC,GAAI0U,SAAU,KAAKL,QAAnB,CACIU,mBAAqBL,QAASA,QAAQjyH,MAAR,CAAiB,CAA1B,CADzB,CAEIuyH,WAAahV,OAAO6O,WAFxB,CAIAkG,mBAAmBlG,WAAnB,CAAiCmG,UAAjC,CACAN,QAASM,UAAT,EAAwBD,kBAAxB,CACAL,QAAQv1D,GAAR,GAEA6gD,OAAO6O,WAAP,CAAqB,IAArB,CAGA,GAAI+E,UAAW5T,OAAOoO,KAAP,CAAa/2G,IAA5B,CACIu9G,cAAgB,KAAKd,cADzB,CAEID,eAAiBe,cAAehB,QAAf,CAFrB,CAGIqB,oBAAsBpB,eAAeE,YAHzC,CAKImB,gBACID,oBAAqBA,oBAAoBxyH,MAApB,CAA6B,CAAlD,CANR,CAQI0yH,iBAAmBnV,OAAO8O,iBAR9B,CAUAoG,gBAAgBpG,iBAAhB,CAAoCqG,gBAApC,CACAF,oBAAqBE,gBAArB,EAA0CD,eAA1C,CACAD,oBAAoB91D,GAApB,GAEA6gD,OAAO8O,iBAAP,CAA2B,IAA3B,CAGA,GAAI+F,cAAehB,eAAegB,YAAlC,CACItB,SAAW,CAAEvT,OAAOqO,UAAP,EAAqB,KAAKwD,KAA5B,EAAoCx6G,IADnD,CAGA,MAAOw9G,cAActB,QAAd,CAAP,CAEA,GAAK0B,oBAAoBxyH,MAApB,GAA+B,CAApC,CAAwC,CAEpC,MAAOmyH,eAAehB,QAAf,CAAP,CAEH,CAED,KAAKwB,gCAAL,CAAuCpV,MAAvC,EAEH,CAvSiF,CAySlFoV,iCAAkC,0CAAWpV,MAAX,CAAoB,CAElD,GAAIkI,UAAWlI,OAAO4O,iBAAtB,CACA,IAAM,GAAIvoH,GAAI,CAAR,CAAWkF,EAAI28G,SAASzlH,MAA9B,CAAsC4D,IAAMkF,CAA5C,CAA+C,EAAGlF,CAAlD,CAAsD,CAElD,GAAIggH,SAAU6B,SAAU7hH,CAAV,CAAd,CAEA,GAAK,EAAGggH,QAAQQ,cAAX,GAA8B,CAAnC,CAAuC,CAEnC,KAAKwO,sBAAL,CAA6BhP,OAA7B,EAEH,CAEJ,CAEJ,CAxTiF,CA0TlF6N,YAAa,qBAAWlU,MAAX,CAAoB,CAE7B;AACA;AACA;AACA;AACA;AAEA,GAAI0U,SAAU,KAAKL,QAAnB,CACIiB,UAAYtV,OAAO6O,WADvB,CAGI0G,gBAAkB,KAAKjB,eAAL,EAHtB,CAKIkB,oBAAsBd,QAASa,eAAT,CAL1B,CAOAvV,OAAO6O,WAAP,CAAqB0G,eAArB,CACAb,QAASa,eAAT,EAA6BvV,MAA7B,CAEAwV,oBAAoB3G,WAApB,CAAkCyG,SAAlC,CACAZ,QAASY,SAAT,EAAuBE,mBAAvB,CAEH,CA/UiF,CAiVlFpB,gBAAiB,yBAAWpU,MAAX,CAAoB,CAEjC;AACA;AACA;AACA;AACA;AAEA,GAAI0U,SAAU,KAAKL,QAAnB,CACIiB,UAAYtV,OAAO6O,WADvB,CAGI4G,mBAAqB,EAAG,KAAKnB,eAHjC,CAKIoB,iBAAmBhB,QAASe,kBAAT,CALvB,CAOAzV,OAAO6O,WAAP,CAAqB4G,kBAArB,CACAf,QAASe,kBAAT,EAAgCzV,MAAhC,CAEA0V,iBAAiB7G,WAAjB,CAA+ByG,SAA/B,CACAZ,QAASY,SAAT,EAAuBI,gBAAvB,CAEH,CAtWiF,CAwWlF;AAEA/B,oBAAqB,6BAAWtN,OAAX,CAAoBkN,QAApB,CAA8Brf,SAA9B,CAA0C,CAE3D,GAAIsf,gBAAiB,KAAKC,sBAA1B,CACIkC,cAAgBnC,eAAgBD,QAAhB,CADpB,CAGIrL,SAAW,KAAKJ,SAHpB,CAKA,GAAK6N,gBAAkBl7H,SAAvB,CAAmC,CAE/Bk7H,cAAgB,EAAhB,CACAnC,eAAgBD,QAAhB,EAA6BoC,aAA7B,CAEH,CAEDA,cAAezhB,SAAf,EAA6BmS,OAA7B,CAEAA,QAAQwI,WAAR,CAAsB3G,SAASzlH,MAA/B,CACAylH,SAAShxH,IAAT,CAAemvH,OAAf,EAEH,CA7XiF,CA+XlFgP,uBAAwB,gCAAWhP,OAAX,CAAqB,CAEzC,GAAI6B,UAAW,KAAKJ,SAApB,CACI8N,YAAcvP,QAAQA,OAD1B,CAEIkN,SAAWqC,YAAYxN,QAAZ,CAAqB/wG,IAFpC,CAGI68F,UAAY0hB,YAAYxgE,IAH5B,CAIIo+D,eAAiB,KAAKC,sBAJ1B,CAKIkC,cAAgBnC,eAAgBD,QAAhB,CALpB,CAOIsC,oBAAsB3N,SAAUA,SAASzlH,MAAT,CAAkB,CAA5B,CAP1B,CAQIuyH,WAAa3O,QAAQwI,WARzB,CAUAgH,oBAAoBhH,WAApB,CAAkCmG,UAAlC,CACA9M,SAAU8M,UAAV,EAAyBa,mBAAzB,CACA3N,SAAS/oD,GAAT,GAEA,MAAOw2D,eAAezhB,SAAf,CAAP,CAEA4hB,iBAAkB,CAEd,IAAM,GAAIC,EAAV,GAAeJ,cAAf,EAA+B,KAAMG,iBAAN,CAA/B,CAAuD;AAEvD,MAAOtC,gBAAgBD,QAAhB,CAAP,CAEH,CAEJ,CAzZiF,CA2ZlFU,aAAc,sBAAW5N,OAAX,CAAqB,CAE/B,GAAI6B,UAAW,KAAKJ,SAApB,CACIwN,UAAYjP,QAAQwI,WADxB,CAGI0G,gBAAkB,KAAKhB,gBAAL,EAHtB,CAKIyB,qBAAuB9N,SAAUqN,eAAV,CAL3B,CAOAlP,QAAQwI,WAAR,CAAsB0G,eAAtB,CACArN,SAAUqN,eAAV,EAA8BlP,OAA9B,CAEA2P,qBAAqBnH,WAArB,CAAmCyG,SAAnC,CACApN,SAAUoN,SAAV,EAAwBU,oBAAxB,CAEH,CA1aiF,CA4alF7B,iBAAkB,0BAAW9N,OAAX,CAAqB,CAEnC,GAAI6B,UAAW,KAAKJ,SAApB,CACIwN,UAAYjP,QAAQwI,WADxB,CAGI4G,mBAAqB,EAAG,KAAKlB,gBAHjC,CAKI0B,kBAAoB/N,SAAUuN,kBAAV,CALxB,CAOApP,QAAQwI,WAAR,CAAsB4G,kBAAtB,CACAvN,SAAUuN,kBAAV,EAAiCpP,OAAjC,CAEA4P,kBAAkBpH,WAAlB,CAAgCyG,SAAhC,CACApN,SAAUoN,SAAV,EAAwBW,iBAAxB,CAEH,CA3biF,CA8blF;AAEAzE,wBAAyB,kCAAY,CAEjC,GAAIjD,cAAe,KAAKiG,oBAAxB,CACIe,gBAAkB,KAAKd,2BAAL,EADtB,CAEIhG,YAAcF,aAAcgH,eAAd,CAFlB,CAIA,GAAK9G,cAAgBh0H,SAArB,CAAiC,CAE7Bg0H,YAAc,GAAInf,kBAAJ,CACV,GAAI3lE,aAAJ,CAAkB,CAAlB,CADU,CACa,GAAIA,aAAJ,CAAkB,CAAlB,CADb,CAEV,CAFU,CAEP,KAAKusF,gCAFE,CAAd,CAIAzH,YAAY0H,YAAZ,CAA2BZ,eAA3B,CACAhH,aAAcgH,eAAd,EAAkC9G,WAAlC,CAEH,CAED,MAAOA,YAAP,CAEH,CAndiF,CAqdlFuC,4BAA6B,qCAAWvC,WAAX,CAAyB,CAElD,GAAIF,cAAe,KAAKiG,oBAAxB,CACIc,UAAY7G,YAAY0H,YAD5B,CAGIV,mBAAqB,EAAG,KAAKhB,2BAHjC,CAKI2B,sBAAwB7H,aAAckH,kBAAd,CAL5B,CAOAhH,YAAY0H,YAAZ,CAA2BV,kBAA3B,CACAlH,aAAckH,kBAAd,EAAqChH,WAArC,CAEA2H,sBAAsBD,YAAtB,CAAqCb,SAArC,CACA/G,aAAc+G,SAAd,EAA4Bc,qBAA5B,CAEH,CApeiF,CAselFF,iCAAkC,GAAIvsF,aAAJ,CAAkB,CAAlB,CAtegD,CAwelF;AACA;AACA;AACA0sF,WAAY,oBAAWpjB,IAAX,CAAiBqjB,YAAjB,CAAgC,CAExC,GAAI9pH,MAAO8pH,cAAgB,KAAKzE,KAAhC,CACI0B,SAAW/mH,KAAK6K,IADpB,CAGIk/G,WAAa,MAAOtjB,KAAP,GAAgB,QAAhB,CACTN,cAAcY,UAAd,CAA0B/mG,IAA1B,CAAgCymG,IAAhC,CADS,CACgCA,IAJjD,CAMI2gB,SAAW2C,aAAe,IAAf,CAAsBA,WAAWl/G,IAAjC,CAAwC47F,IANvD,CAQI4gB,eAAiB,KAAKC,cAAL,CAAqBF,QAArB,CARrB,CASIN,gBAAkB,IATtB,CAWA,GAAKO,iBAAmBp5H,SAAxB,CAAoC,CAEhC,GAAI+7H,gBACA3C,eAAegB,YAAf,CAA6BtB,QAA7B,CADJ,CAGA,GAAKiD,iBAAmB/7H,SAAxB,CAAoC,CAEhC,MAAO+7H,eAAP,CAEH,CAED;AACA;AACAlD,gBAAkBO,eAAeE,YAAf,CAA6B,CAA7B,CAAlB,CAEA;AACA,GAAKwC,aAAe,IAApB,CACIA,WAAajD,gBAAgBlF,KAA7B,CAEP,CAED;AACA,GAAKmI,aAAe,IAApB,CAA2B,MAAO,KAAP,CAE3B;AACA,GAAIE,WAAY,GAAIzI,gBAAJ,CAAqB,IAArB,CAA2BuI,UAA3B,CAAuCD,YAAvC,CAAhB,CAEA,KAAKjD,WAAL,CAAkBoD,SAAlB,CAA6BnD,eAA7B,EAEA;AACA,KAAKU,kBAAL,CAAyByC,SAAzB,CAAoC7C,QAApC,CAA8CL,QAA9C,EAEA,MAAOkD,UAAP,CAEH,CA1hBiF,CA4hBlF;AACAD,eAAgB,wBAAWvjB,IAAX,CAAiBqjB,YAAjB,CAAgC,CAE5C,GAAI9pH,MAAO8pH,cAAgB,KAAKzE,KAAhC,CACI0B,SAAW/mH,KAAK6K,IADpB,CAGIk/G,WAAa,MAAOtjB,KAAP,GAAgB,QAAhB,CACTN,cAAcY,UAAd,CAA0B/mG,IAA1B,CAAgCymG,IAAhC,CADS,CACgCA,IAJjD,CAMI2gB,SAAW2C,WAAaA,WAAWl/G,IAAxB,CAA+B47F,IAN9C,CAQI4gB,eAAiB,KAAKC,cAAL,CAAqBF,QAArB,CARrB,CAUA,GAAKC,iBAAmBp5H,SAAxB,CAAoC,CAEhC,MAAOo5H,gBAAegB,YAAf,CAA6BtB,QAA7B,GAA2C,IAAlD,CAEH,CAED,MAAO,KAAP,CAEH,CAjjBiF,CAmjBlF;AACAmD,cAAe,wBAAY,CAEvB,GAAIhC,SAAU,KAAKL,QAAnB,CACIsC,SAAW,KAAKrC,eADpB,CAEIpM,SAAW,KAAKJ,SAFpB,CAGIkF,UAAY,KAAKuH,gBAHrB,CAKA,KAAKD,eAAL,CAAuB,CAAvB,CACA,KAAKC,gBAAL,CAAwB,CAAxB,CAEA,IAAM,GAAIluH,GAAI,CAAd,CAAiBA,IAAMswH,QAAvB,CAAiC,EAAGtwH,CAApC,CAAwC,CAEpCquH,QAASruH,CAAT,EAAa9I,KAAb,GAEH,CAED,IAAM,GAAI8I,GAAI,CAAd,CAAiBA,IAAM2mH,SAAvB,CAAkC,EAAG3mH,CAArC,CAAyC,CAErC6hH,SAAU7hH,CAAV,EAAcugH,QAAd,CAAyB,CAAzB,CAEH,CAED,MAAO,KAAP,CAEH,CA5kBiF,CA8kBlF;AACApuH,OAAQ,gBAAWu5H,SAAX,CAAuB,CAE3BA,WAAa,KAAKngB,SAAlB,CAEA,GAAI8iB,SAAU,KAAKL,QAAnB,CACIsC,SAAW,KAAKrC,eADpB,CAGI9tH,KAAO,KAAKA,IAAL,EAAaurH,SAHxB,CAIIC,cAAgBj6H,KAAKkV,IAAL,CAAW8kH,SAAX,CAJpB,CAMIhL,UAAY,KAAKqM,UAAL,EAAmB,CANnC,CAQA;AAEA,IAAM,GAAI/sH,GAAI,CAAd,CAAiBA,IAAMswH,QAAvB,CAAiC,EAAGtwH,CAApC,CAAwC,CAEpC,GAAI25G,QAAS0U,QAASruH,CAAT,CAAb,CAEA25G,OAAO8R,OAAP,CAAgBtrH,IAAhB,CAAsBurH,SAAtB,CAAiCC,aAAjC,CAAgDjL,SAAhD,EAEH,CAED;AAEA,GAAImB,UAAW,KAAKJ,SAApB,CACIkF,UAAY,KAAKuH,gBADrB,CAGA,IAAM,GAAIluH,GAAI,CAAd,CAAiBA,IAAM2mH,SAAvB,CAAkC,EAAG3mH,CAArC,CAAyC,CAErC6hH,SAAU7hH,CAAV,EAAc6oE,KAAd,CAAqB63C,SAArB,EAEH,CAED,MAAO,KAAP,CAEH,CAlnBiF,CAonBlF;AACA6K,QAAS,kBAAY,CAEjB,MAAO,MAAKC,KAAZ,CAEH,CAznBiF,CA2nBlF;AACA+E,YAAa,qBAAW3jB,IAAX,CAAkB,CAE3B,GAAIyhB,SAAU,KAAKL,QAAnB,CACIT,SAAW3gB,KAAK57F,IADpB,CAEIu9G,cAAgB,KAAKd,cAFzB,CAGID,eAAiBe,cAAehB,QAAf,CAHrB,CAKA,GAAKC,iBAAmBp5H,SAAxB,CAAoC,CAEhC;AACA;AACA;AAEA,GAAIo8H,iBAAkBhD,eAAeE,YAArC,CAEA,IAAM,GAAI1tH,GAAI,CAAR,CAAWkF,EAAIsrH,gBAAgBp0H,MAArC,CAA6C4D,IAAMkF,CAAnD,CAAsD,EAAGlF,CAAzD,CAA6D,CAEzD,GAAI25G,QAAS6W,gBAAiBxwH,CAAjB,CAAb,CAEA,KAAKqpH,iBAAL,CAAwB1P,MAAxB,EAEA,GAAIgV,YAAahV,OAAO6O,WAAxB,CACIkG,mBAAqBL,QAASA,QAAQjyH,MAAR,CAAiB,CAA1B,CADzB,CAGAu9G,OAAO6O,WAAP,CAAqB,IAArB,CACA7O,OAAO8O,iBAAP,CAA2B,IAA3B,CAEAiG,mBAAmBlG,WAAnB,CAAiCmG,UAAjC,CACAN,QAASM,UAAT,EAAwBD,kBAAxB,CACAL,QAAQv1D,GAAR,GAEA,KAAKi2D,gCAAL,CAAuCpV,MAAvC,EAEH,CAED,MAAO4U,eAAehB,QAAf,CAAP,CAEH,CAEJ,CAnqBiF,CAqqBlF;AACAkD,YAAa,qBAAWtqH,IAAX,CAAkB,CAE3B,GAAI+mH,UAAW/mH,KAAK6K,IAApB,CACIu9G,cAAgB,KAAKd,cADzB,CAGA,IAAM,GAAIF,SAAV,GAAsBgB,cAAtB,CAAsC,CAElC,GAAIC,cAAeD,cAAehB,QAAf,EAA0BiB,YAA7C,CACI7U,OAAS6U,aAActB,QAAd,CADb,CAGA,GAAKvT,SAAWvlH,SAAhB,CAA4B,CAExB,KAAKi1H,iBAAL,CAAwB1P,MAAxB,EACA,KAAK8U,qBAAL,CAA4B9U,MAA5B,EAEH,CAEJ,CAED,GAAIwT,gBAAiB,KAAKC,sBAA1B,CACIkC,cAAgBnC,eAAgBD,QAAhB,CADpB,CAGA,GAAKoC,gBAAkBl7H,SAAvB,CAAmC,CAE/B,IAAM,GAAIy5G,UAAV,GAAuByhB,cAAvB,CAAuC,CAEnC,GAAItP,SAAUsP,cAAezhB,SAAf,CAAd,CACAmS,QAAQgB,oBAAR,GACA,KAAKgO,sBAAL,CAA6BhP,OAA7B,EAEH,CAEJ,CAEJ,CAxsBiF,CA0sBlF;AACA0Q,cAAe,uBAAW9jB,IAAX,CAAiBqjB,YAAjB,CAAgC,CAE3C,GAAItW,QAAS,KAAKwW,cAAL,CAAqBvjB,IAArB,CAA2BqjB,YAA3B,CAAb,CAEA,GAAKtW,SAAW,IAAhB,CAAuB,CAEnB,KAAK0P,iBAAL,CAAwB1P,MAAxB,EACA,KAAK8U,qBAAL,CAA4B9U,MAA5B,EAEH,CAEJ,CAttBiF,CAA3D,CAA3B,CA0tBA;;OAIA,QAASgX,QAAT,CAAkBrxH,KAAlB,CAA0B,CAEtB,GAAK,MAAOA,MAAP,GAAiB,QAAtB,CAAiC,CAE7B3M,QAAQgK,IAAR,CAAc,oDAAd,EACA2C,MAAQ6D,UAAW,CAAX,CAAR,CAEH,CAED,KAAK7D,KAAL,CAAaA,KAAb,CAEH,CAEDqxH,QAAQ9xH,SAAR,CAAkB/N,KAAlB,CAA0B,UAAY,CAElC,MAAO,IAAI6/H,QAAJ,CAAa,KAAKrxH,KAAL,CAAWxO,KAAX,GAAqBsD,SAArB,CAAiC,KAAKkL,KAAtC,CAA8C,KAAKA,KAAL,CAAWxO,KAAX,EAA3D,CAAP,CAEH,CAJD,CAMA;;OAIA,QAAS8/H,wBAAT,EAAmC,CAE/Bx8E,eAAe7xC,IAAf,CAAqB,IAArB,EAEA,KAAKxI,IAAL,CAAY,yBAAZ,CACA,KAAKqqD,iBAAL,CAAyBhwD,SAAzB,CAEH,CAEDw8H,wBAAwB/xH,SAAxB,CAAoCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAeq1C,eAAev1C,SAA9B,CAAf,CAA0D,CAE1FI,YAAa2xH,uBAF6E,CAI1F50C,0BAA2B,IAJ+D,CAM1F/kF,KAAM,cAAW0J,MAAX,CAAoB,CAEtByzC,eAAev1C,SAAf,CAAyB5H,IAAzB,CAA8BsL,IAA9B,CAAoC,IAApC,CAA0C5B,MAA1C,EAEA,KAAKyjD,iBAAL,CAAyBzjD,OAAOyjD,iBAAhC,CAEA,MAAO,KAAP,CAEH,CAdyF,CAgB1FtzD,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CApByF,CAA1D,CAApC,CAwBA;;OAIA,QAAS45H,2BAAT,CAAqCC,iBAArC,CAAwDl/E,QAAxD,CAAkEn6C,MAAlE,CAA0Eo6C,UAA1E,CAAuF,CAEnF,KAAKr/C,IAAL,CAAYs+H,iBAAZ,CACA,KAAKl/E,QAAL,CAAgBA,QAAhB,CACA,KAAKn6C,MAAL,CAAcA,MAAd,CAEA,KAAKo6C,UAAL,CAAkBA,aAAe,IAAjC,CAEH,CAED/yC,OAAOI,gBAAP,CAAyB2xH,2BAA2BhyH,SAApD,CAA+D,CAE3Duc,MAAO,CAEHhc,IAAK,cAAY,CAEb,MAAO,MAAK5M,IAAL,CAAU4oB,KAAjB,CAEH,CANE,CAFoD,CAY3DzT,MAAO,CAEHvI,IAAK,cAAY,CAEb,MAAO,MAAK5M,IAAL,CAAUmV,KAAjB,CAEH,CANE,CAZoD,CAA/D,EAwBA7I,OAAO4B,MAAP,CAAemwH,2BAA2BhyH,SAA1C,CAAqD,CAEjD6lC,6BAA8B,IAFmB,CAIjD5xB,KAAM,cAAW3L,KAAX,CAAkBnZ,CAAlB,CAAsB,CAExB,KAAKwE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAjD,EAA4DzJ,CAA5D,CAEA,MAAO,KAAP,CAEH,CAVgD,CAYjD+kB,KAAM,cAAW5L,KAAX,CAAkBlZ,CAAlB,CAAsB,CAExB,KAAKuE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAhC,CAAyC,CAA1D,EAAgExJ,CAAhE,CAEA,MAAO,KAAP,CAEH,CAlBgD,CAoBjD80B,KAAM,cAAW5b,KAAX,CAAkBjZ,CAAlB,CAAsB,CAExB,KAAKsE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAhC,CAAyC,CAA1D,EAAgEvJ,CAAhE,CAEA,MAAO,KAAP,CAEH,CA1BgD,CA4BjDw6B,KAAM,cAAWvhB,KAAX,CAAkBgM,CAAlB,CAAsB,CAExB,KAAK3gB,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAhC,CAAyC,CAA1D,EAAgE0b,CAAhE,CAEA,MAAO,KAAP,CAEH,CAlCgD,CAoCjDkC,KAAM,cAAWlO,KAAX,CAAmB,CAErB,MAAO,MAAK3U,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAjD,CAAP,CAEH,CAxCgD,CA0CjD6d,KAAM,cAAWnO,KAAX,CAAmB,CAErB,MAAO,MAAK3U,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAhC,CAAyC,CAA1D,CAAP,CAEH,CA9CgD,CAgDjD4jB,KAAM,cAAWlU,KAAX,CAAmB,CAErB,MAAO,MAAK3U,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAhC,CAAyC,CAA1D,CAAP,CAEH,CApDgD,CAsDjDsxB,KAAM,cAAW5hB,KAAX,CAAmB,CAErB,MAAO,MAAK3U,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAhC,CAAyC,CAA1D,CAAP,CAEH,CA1DgD,CA4DjDi7C,MAAO,eAAWvrC,KAAX,CAAkBnZ,CAAlB,CAAqBC,CAArB,CAAyB,CAE5BkZ,MAAQA,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAxC,CAEA,KAAKjF,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BnZ,CAA/B,CACA,KAAKwE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BlZ,CAA/B,CAEA,MAAO,KAAP,CAEH,CArEgD,CAuEjDstB,OAAQ,gBAAWpU,KAAX,CAAkBnZ,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA4B,CAEhCiZ,MAAQA,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAxC,CAEA,KAAKjF,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BnZ,CAA/B,CACA,KAAKwE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BlZ,CAA/B,CACA,KAAKuE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BjZ,CAA/B,CAEA,MAAO,KAAP,CAEH,CAjFgD,CAmFjDykD,QAAS,iBAAWxrC,KAAX,CAAkBnZ,CAAlB,CAAqBC,CAArB,CAAwBC,CAAxB,CAA2BilB,CAA3B,CAA+B,CAEpChM,MAAQA,MAAQ,KAAK3U,IAAL,CAAU4pF,MAAlB,CAA2B,KAAK3kF,MAAxC,CAEA,KAAKjF,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BnZ,CAA/B,CACA,KAAKwE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BlZ,CAA/B,CACA,KAAKuE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BjZ,CAA/B,CACA,KAAKsE,IAAL,CAAUmV,KAAV,CAAiBR,MAAQ,CAAzB,EAA+BgM,CAA/B,CAEA,MAAO,KAAP,CAEH,CA9FgD,CAArD,EAkGA;;OAIA,QAAS49G,kBAAT,CAA4BppH,KAA5B,CAAmCy0E,MAAnC,CAA4C,CAExC,KAAKz0E,KAAL,CAAaA,KAAb,CACA,KAAKy0E,MAAL,CAAcA,MAAd,CACA,KAAKhhE,KAAL,CAAazT,QAAUvT,SAAV,CAAsBuT,MAAMvL,MAAN,CAAeggF,MAArC,CAA8C,CAA3D,CAEA,KAAKt5C,OAAL,CAAe,KAAf,CACA,KAAKyB,WAAL,CAAmB,CAAE9sC,OAAQ,CAAV,CAAa2jB,MAAO,CAAE,CAAtB,CAAnB,CAEA,KAAK+L,OAAL,CAAe,CAAf,CAEH,CAEDroB,OAAOgI,cAAP,CAAuBiqH,kBAAkBlyH,SAAzC,CAAoD,aAApD,CAAmE,CAE/DhQ,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB,GAAKA,QAAU,IAAf,CAAsB,KAAK6nB,OAAL,GAEzB,CAN8D,CAAnE,EAUAroB,OAAO4B,MAAP,CAAeqwH,kBAAkBlyH,SAAjC,CAA4C,CAExCmyH,oBAAqB,IAFmB,CAIxC5tF,iBAAkB,2BAAY,CAAE,CAJQ,CAMxC2O,SAAU,kBAAWpqC,KAAX,CAAmB,CAEzB,GAAKvF,MAAM63B,OAAN,CAAetyB,KAAf,CAAL,CAA8B,CAE1B,KAAM,IAAIV,UAAJ,CAAe,uDAAf,CAAN,CAEH,CAED,KAAKmU,KAAL,CAAazT,QAAUvT,SAAV,CAAsBuT,MAAMvL,MAAN,CAAe,KAAKggF,MAA1C,CAAmD,CAAhE,CACA,KAAKz0E,KAAL,CAAaA,KAAb,CAEA,MAAO,KAAP,CAEH,CAnBuC,CAqBxCqqC,WAAY,oBAAW1yC,KAAX,CAAmB,CAE3B,KAAKwjC,OAAL,CAAexjC,KAAf,CAEA,MAAO,KAAP,CAEH,CA3BuC,CA6BxCrI,KAAM,cAAW0J,MAAX,CAAoB,CAEtB,KAAKgH,KAAL,CAAa,GAAIhH,QAAOgH,KAAP,CAAa1I,WAAjB,CAA8B0B,OAAOgH,KAArC,CAAb,CACA,KAAKyT,KAAL,CAAaza,OAAOya,KAApB,CACA,KAAKghE,MAAL,CAAcz7E,OAAOy7E,MAArB,CACA,KAAKt5C,OAAL,CAAeniC,OAAOmiC,OAAtB,CAEA,MAAO,KAAP,CAEH,CAtCuC,CAwCxCmP,OAAQ,gBAAWC,MAAX,CAAmB98B,SAAnB,CAA8B+8B,MAA9B,CAAuC,CAE3CD,QAAU,KAAKkqC,MAAf,CACAjqC,QAAU/8B,UAAUgnE,MAApB,CAEA,IAAM,GAAIp8E,GAAI,CAAR,CAAW6H,EAAI,KAAKu0E,MAA1B,CAAkCp8E,EAAI6H,CAAtC,CAAyC7H,GAAzC,CAAgD,CAE5C,KAAK2H,KAAL,CAAYuqC,OAASlyC,CAArB,EAA2BoV,UAAUzN,KAAV,CAAiBwqC,OAASnyC,CAA1B,CAA3B,CAEH,CAED,MAAO,KAAP,CAEH,CArDuC,CAuDxCnR,IAAK,aAAWyQ,KAAX,CAAkB7H,MAAlB,CAA2B,CAE5B,GAAKA,SAAWrD,SAAhB,CAA4BqD,OAAS,CAAT,CAE5B,KAAKkQ,KAAL,CAAW9Y,GAAX,CAAgByQ,KAAhB,CAAuB7H,MAAvB,EAEA,MAAO,KAAP,CAEH,CA/DuC,CAiExC3G,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CArEuC,CAuExC27C,SAAU,kBAAWvvC,QAAX,CAAsB,CAE5B,KAAK+/B,gBAAL,CAAwB//B,QAAxB,CAEA,MAAO,KAAP,CAEH,CA7EuC,CAA5C,EAiFA;;OAIA,QAAS4tH,2BAAT,CAAqCtpH,KAArC,CAA4Cy0E,MAA5C,CAAoD7V,gBAApD,CAAuE,CAEnEwqD,kBAAkBxuH,IAAlB,CAAwB,IAAxB,CAA8BoF,KAA9B,CAAqCy0E,MAArC,EAEA,KAAK7V,gBAAL,CAAwBA,kBAAoB,CAA5C,CAEH,CAED0qD,2BAA2BpyH,SAA3B,CAAuCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAegyH,kBAAkBlyH,SAAjC,CAAf,CAA6D,CAEhGI,YAAagyH,0BAFmF,CAIhG50C,6BAA8B,IAJkE,CAMhGplF,KAAM,cAAW0J,MAAX,CAAoB,CAEtBowH,kBAAkBlyH,SAAlB,CAA4B5H,IAA5B,CAAiCsL,IAAjC,CAAuC,IAAvC,CAA6C5B,MAA7C,EAEA,KAAK4lE,gBAAL,CAAwB5lE,OAAO4lE,gBAA/B,CAEA,MAAO,KAAP,CAEH,CAd+F,CAA7D,CAAvC,CAkBA;;OAIA,QAAS2qD,yBAAT,CAAmCvpH,KAAnC,CAA0CiqC,QAA1C,CAAoD20B,gBAApD,CAAuE,CAEnE50B,gBAAgBpvC,IAAhB,CAAsB,IAAtB,CAA4BoF,KAA5B,CAAmCiqC,QAAnC,EAEA,KAAK20B,gBAAL,CAAwBA,kBAAoB,CAA5C,CAEH,CAED2qD,yBAAyBryH,SAAzB,CAAqCC,OAAO4B,MAAP,CAAe5B,OAAOC,MAAP,CAAe4yC,gBAAgB9yC,SAA/B,CAAf,CAA2D,CAE5FI,YAAaiyH,wBAF+E,CAI5F50C,2BAA4B,IAJgE,CAM5FrlF,KAAM,cAAW0J,MAAX,CAAoB,CAEtBgxC,gBAAgB9yC,SAAhB,CAA0B5H,IAA1B,CAA+BsL,IAA/B,CAAqC,IAArC,CAA2C5B,MAA3C,EAEA,KAAK4lE,gBAAL,CAAwB5lE,OAAO4lE,gBAA/B,CAEA,MAAO,KAAP,CAEH,CAd2F,CAA3D,CAArC,CAkBA;;;;OAMA,QAAS4qD,UAAT,CAAoB11E,MAApB,CAA4B1rB,SAA5B,CAAuC5gC,IAAvC,CAA6CyvB,GAA7C,CAAmD,CAE/C,KAAK88B,GAAL,CAAW,GAAIF,IAAJ,CAASC,MAAT,CAAiB1rB,SAAjB,CAAX,CACA;AAEA,KAAK5gC,IAAL,CAAYA,MAAQ,CAApB,CACA,KAAKyvB,GAAL,CAAWA,KAAOnqB,QAAlB,CAEA,KAAKiwF,MAAL,CAAc,CACVv0F,KAAM,EADI,CAEVuzF,KAAM,EAFI,CAGV7B,IAAK,EAHK,CAIV2C,OAAQ,CAAEC,UAAW,CAAb,CAJE,CAKVjD,OAAQ,EALE,CAAd,CAQA1iF,OAAOI,gBAAP,CAAyB,KAAKwlF,MAA9B,CAAsC,CAClC0sC,WAAY,CACRhyH,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,uEAAd,EACA,MAAO,MAAK6nF,MAAZ,CAEH,CANO,CADsB,CAAtC,EAWH,CAED,QAAS6sC,QAAT,CAAkBzrH,CAAlB,CAAqBX,CAArB,CAAyB,CAErB,MAAOW,GAAEpK,QAAF,CAAayJ,EAAEzJ,QAAtB,CAEH,CAED,QAAS81H,iBAAT,CAA0Bp9H,MAA1B,CAAkCstD,SAAlC,CAA6CG,UAA7C,CAAyDjY,SAAzD,CAAqE,CAEjE,GAAKx1C,OAAOuyC,OAAP,GAAmB,KAAxB,CAAgC,OAEhCvyC,OAAOq0C,OAAP,CAAgBiZ,SAAhB,CAA2BG,UAA3B,EAEA,GAAKjY,YAAc,IAAnB,CAA0B,CAEtB,GAAIzD,UAAW/xC,OAAO+xC,QAAtB,CAEA,IAAM,GAAIjmC,GAAI,CAAR,CAAW6H,EAAIo+B,SAAS7pC,MAA9B,CAAsC4D,EAAI6H,CAA1C,CAA6C7H,GAA7C,CAAoD,CAEhDsxH,iBAAiBrrF,SAAUjmC,CAAV,CAAjB,CAAgCwhD,SAAhC,CAA2CG,UAA3C,CAAuD,IAAvD,EAEH,CAEJ,CAEJ,CAED7iD,OAAO4B,MAAP,CAAeywH,UAAUtyH,SAAzB,CAAoC,CAEhCilF,cAAe,CAFiB,CAIhCj1F,IAAK,aAAW4sD,MAAX,CAAmB1rB,SAAnB,CAA+B,CAEhC;AAEA,KAAK2rB,GAAL,CAAS7sD,GAAT,CAAc4sD,MAAd,CAAsB1rB,SAAtB,EAEH,CAV+B,CAYhCwhG,cAAe,uBAAWC,MAAX,CAAmBvlI,MAAnB,CAA4B,CAEvC,GAAOA,QAAUA,OAAOiQ,mBAAxB,CAAgD,CAE5C,KAAKw/C,GAAL,CAASD,MAAT,CAAgBx2B,qBAAhB,CAAuCh5B,OAAO43B,WAA9C,EACA,KAAK63B,GAAL,CAAS3rB,SAAT,CAAmBlhC,GAAnB,CAAwB2iI,OAAOxjI,CAA/B,CAAkCwjI,OAAOvjI,CAAzC,CAA4C,GAA5C,EAAkD61B,SAAlD,CAA6D73B,MAA7D,EAAsEiM,GAAtE,CAA2E,KAAKwjD,GAAL,CAASD,MAApF,EAA6FjnC,SAA7F,GAEH,CALD,IAKO,IAAOvoB,QAAUA,OAAOwQ,oBAAxB,CAAiD,CAEpD,KAAKi/C,GAAL,CAASD,MAAT,CAAgB5sD,GAAhB,CAAqB2iI,OAAOxjI,CAA5B,CAA+BwjI,OAAOvjI,CAAtC,CAAyC,CAAEhC,OAAOkD,IAAP,CAAclD,OAAO2yB,GAAvB,GAAiC3yB,OAAOkD,IAAP,CAAclD,OAAO2yB,GAAtD,CAAzC,EAAuGkF,SAAvG,CAAkH73B,MAAlH,EAA4H;AAC5H,KAAKyvD,GAAL,CAAS3rB,SAAT,CAAmBlhC,GAAnB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAAE,CAAhC,EAAoCk1B,kBAApC,CAAwD93B,OAAO43B,WAA/D,EAEH,CALM,IAKA,CAEHlxB,QAAQ+iB,KAAR,CAAe,2CAAf,EAEH,CAEJ,CA9B+B,CAgChC47G,gBAAiB,yBAAWp9H,MAAX,CAAmBw1C,SAAnB,CAA8B6zD,cAA9B,CAA+C,CAE5D,GAAI57C,YAAa47C,gBAAkB,EAAnC,CAEA+zB,iBAAiBp9H,MAAjB,CAAyB,IAAzB,CAA+BytD,UAA/B,CAA2CjY,SAA3C,EAEAiY,WAAWzR,IAAX,CAAiBmhF,OAAjB,EAEA,MAAO1vE,WAAP,CAEH,CA1C+B,CA4ChC8vE,iBAAkB,0BAAWjvE,OAAX,CAAoB9Y,SAApB,CAA+B6zD,cAA/B,CAAgD,CAE9D,GAAI57C,YAAa47C,gBAAkB,EAAnC,CAEA,GAAKn7F,MAAM63B,OAAN,CAAeuoB,OAAf,IAA6B,KAAlC,CAA0C,CAEtC7vD,QAAQgK,IAAR,CAAc,4DAAd,EACA,MAAOglD,WAAP,CAEH,CAED,IAAM,GAAI3hD,GAAI,CAAR,CAAW6H,EAAI26C,QAAQpmD,MAA7B,CAAqC4D,EAAI6H,CAAzC,CAA4C7H,GAA5C,CAAmD,CAE/CsxH,iBAAiB9uE,QAASxiD,CAAT,CAAjB,CAA+B,IAA/B,CAAqC2hD,UAArC,CAAiDjY,SAAjD,EAEH,CAEDiY,WAAWzR,IAAX,CAAiBmhF,OAAjB,EAEA,MAAO1vE,WAAP,CAEH,CAjE+B,CAApC,EAqEA;;OAIA,QAAS+vE,MAAT,CAAgBC,SAAhB,CAA4B,CAExB,KAAKA,SAAL,CAAmBA,YAAcv9H,SAAhB,CAA8Bu9H,SAA9B,CAA0C,IAA3D,CAEA,KAAKnmB,SAAL,CAAiB,CAAjB,CACA,KAAKomB,OAAL,CAAe,CAAf,CACA,KAAKC,WAAL,CAAmB,CAAnB,CAEA,KAAKC,OAAL,CAAe,KAAf,CAEH,CAEDhzH,OAAO4B,MAAP,CAAegxH,MAAM7yH,SAArB,CAAgC,CAE5BlL,MAAO,gBAAY,CAEf,KAAK63G,SAAL,CAAiB,CAAE,MAAOhrG,YAAP,GAAuB,WAAvB,CAAqC/N,IAArC,CAA4C+N,WAA9C,EAA4DH,GAA5D,EAAjB,CAAoF;AAEpF,KAAKuxH,OAAL,CAAe,KAAKpmB,SAApB,CACA,KAAKqmB,WAAL,CAAmB,CAAnB,CACA,KAAKC,OAAL,CAAe,IAAf,CAEH,CAV2B,CAY5BxvH,KAAM,eAAY,CAEd,KAAKyvH,cAAL,GACA,KAAKD,OAAL,CAAe,KAAf,CACA,KAAKH,SAAL,CAAiB,KAAjB,CAEH,CAlB2B,CAoB5BI,eAAgB,yBAAY,CAExB,KAAKC,QAAL,GACA,MAAO,MAAKH,WAAZ,CAEH,CAzB2B,CA2B5BG,SAAU,mBAAY,CAElB,GAAIliF,MAAO,CAAX,CAEA,GAAK,KAAK6hF,SAAL,EAAkB,CAAE,KAAKG,OAA9B,CAAwC,CAEpC,KAAKn+H,KAAL,GACA,MAAO,EAAP,CAEH,CAED,GAAK,KAAKm+H,OAAV,CAAoB,CAEhB,GAAIG,SAAU,CAAE,MAAOzxH,YAAP,GAAuB,WAAvB,CAAqC/N,IAArC,CAA4C+N,WAA9C,EAA4DH,GAA5D,EAAd,CAEAyvC,KAAO,CAAEmiF,QAAU,KAAKL,OAAjB,EAA6B,IAApC,CACA,KAAKA,OAAL,CAAeK,OAAf,CAEA,KAAKJ,WAAL,EAAoB/hF,IAApB,CAEH,CAED,MAAOA,KAAP,CAEH,CAnD2B,CAAhC,EAuDA;;;;;;;;OAUA,QAASv1C,UAAT,CAAoB5B,MAApB,CAA4B/B,GAA5B,CAAiCE,KAAjC,CAAyC,CAErC,KAAK6B,MAAL,CAAgBA,SAAWvE,SAAb,CAA2BuE,MAA3B,CAAoC,GAAlD,CACA,KAAK/B,GAAL,CAAaA,MAAQxC,SAAV,CAAwBwC,GAAxB,CAA8B,CAAzC,CAA4C;AAC5C,KAAKE,KAAL,CAAeA,QAAU1C,SAAZ,CAA0B0C,KAA1B,CAAkC,CAA/C,CAAkD;AAElD,MAAO,KAAP,CAEH,CAEDgI,OAAO4B,MAAP,CAAenG,UAAUsE,SAAzB,CAAoC,CAEhChQ,IAAK,aAAW8J,MAAX,CAAmB/B,GAAnB,CAAwBE,KAAxB,CAAgC,CAEjC,KAAK6B,MAAL,CAAcA,MAAd,CACA,KAAK/B,GAAL,CAAWA,GAAX,CACA,KAAKE,KAAL,CAAaA,KAAb,CAEA,MAAO,KAAP,CAEH,CAV+B,CAYhChG,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAhB+B,CAkBhCA,KAAM,cAAWi7H,KAAX,CAAmB,CAErB,KAAKv5H,MAAL,CAAcu5H,MAAMv5H,MAApB,CACA,KAAK/B,GAAL,CAAWs7H,MAAMt7H,GAAjB,CACA,KAAKE,KAAL,CAAao7H,MAAMp7H,KAAnB,CAEA,MAAO,KAAP,CAEH,CA1B+B,CA4BhC;AACA4B,SAAU,mBAAY,CAElB,GAAIQ,KAAM,QAAV,CACA,KAAKtC,GAAL,CAAWlF,KAAK8G,GAAL,CAAUU,GAAV,CAAexH,KAAK+G,GAAL,CAAU/G,KAAKC,EAAL,CAAUuH,GAApB,CAAyB,KAAKtC,GAA9B,CAAf,CAAX,CAEA,MAAO,KAAP,CAEH,CApC+B,CAsChCwB,eAAgB,wBAAW+5H,IAAX,CAAkB,CAE9B,KAAKx5H,MAAL,CAAcw5H,KAAK/1H,MAAL,EAAd,CAEA,GAAK,KAAKzD,MAAL,GAAgB,CAArB,CAAyB,CAErB,KAAK7B,KAAL,CAAa,CAAb,CACA,KAAKF,GAAL,CAAW,CAAX,CAEH,CALD,IAKO,CAEH,KAAKE,KAAL,CAAapF,KAAK+iB,KAAL,CAAY09G,KAAKnkI,CAAjB,CAAoBmkI,KAAKjkI,CAAzB,CAAb,CAA2C;AAC3C,KAAK0I,GAAL,CAAWlF,KAAKmzB,IAAL,CAAWtU,MAAMW,KAAN,CAAaihH,KAAKlkI,CAAL,CAAS,KAAK0K,MAA3B,CAAmC,CAAE,CAArC,CAAwC,CAAxC,CAAX,CAAX,CAAqE;AAExE,CAED,MAAO,KAAP,CAEH,CAxD+B,CAApC,EA4DA;;;;;OAOA,QAASy5H,YAAT,CAAsBz5H,MAAtB,CAA8B7B,KAA9B,CAAqC7I,CAArC,CAAyC,CAErC,KAAK0K,MAAL,CAAgBA,SAAWvE,SAAb,CAA2BuE,MAA3B,CAAoC,GAAlD,CAAuD;AACvD,KAAK7B,KAAL,CAAeA,QAAU1C,SAAZ,CAA0B0C,KAA1B,CAAkC,CAA/C,CAAkD;AAClD,KAAK7I,CAAL,CAAWA,IAAMmG,SAAR,CAAsBnG,CAAtB,CAA0B,CAAnC,CAAsC;AAEtC,MAAO,KAAP,CAEH,CAED6Q,OAAO4B,MAAP,CAAe0xH,YAAYvzH,SAA3B,CAAsC,CAElChQ,IAAK,aAAW8J,MAAX,CAAmB7B,KAAnB,CAA0B7I,CAA1B,CAA8B,CAE/B,KAAK0K,MAAL,CAAcA,MAAd,CACA,KAAK7B,KAAL,CAAaA,KAAb,CACA,KAAK7I,CAAL,CAASA,CAAT,CAEA,MAAO,KAAP,CAEH,CAViC,CAYlC6C,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CAhBiC,CAkBlCA,KAAM,cAAWi7H,KAAX,CAAmB,CAErB,KAAKv5H,MAAL,CAAcu5H,MAAMv5H,MAApB,CACA,KAAK7B,KAAL,CAAao7H,MAAMp7H,KAAnB,CACA,KAAK7I,CAAL,CAASikI,MAAMjkI,CAAf,CAEA,MAAO,KAAP,CAEH,CA1BiC,CA4BlCmK,eAAgB,wBAAW+5H,IAAX,CAAkB,CAE9B,KAAKx5H,MAAL,CAAcjH,KAAK0M,IAAL,CAAW+zH,KAAKnkI,CAAL,CAASmkI,KAAKnkI,CAAd,CAAkBmkI,KAAKjkI,CAAL,CAASikI,KAAKjkI,CAA3C,CAAd,CACA,KAAK4I,KAAL,CAAapF,KAAK+iB,KAAL,CAAY09G,KAAKnkI,CAAjB,CAAoBmkI,KAAKjkI,CAAzB,CAAb,CACA,KAAKD,CAAL,CAASkkI,KAAKlkI,CAAd,CAEA,MAAO,KAAP,CAEH,CApCiC,CAAtC,EAwCA;;OAIA,QAASokI,KAAT,CAAe55H,GAAf,CAAoBD,GAApB,CAA0B,CAEtB,KAAKC,GAAL,CAAaA,MAAQrE,SAAV,CAAwBqE,GAAxB,CAA8B,GAAIgC,QAAJ,CAAa,CAAEhG,QAAf,CAAyB,CAAEA,QAA3B,CAAzC,CACA,KAAK+D,GAAL,CAAaA,MAAQpE,SAAV,CAAwBoE,GAAxB,CAA8B,GAAIiC,QAAJ,CAAa,CAAEhG,QAAf,CAAyB,CAAEA,QAA3B,CAAzC,CAEH,CAEDqK,OAAO4B,MAAP,CAAe2xH,KAAKxzH,SAApB,CAA+B,CAE3BhQ,IAAK,aAAW4J,GAAX,CAAgBD,GAAhB,CAAsB,CAEvB,KAAKC,GAAL,CAASxB,IAAT,CAAewB,GAAf,EACA,KAAKD,GAAL,CAASvB,IAAT,CAAeuB,GAAf,EAEA,MAAO,KAAP,CAEH,CAT0B,CAW3BkyB,cAAe,uBAAWC,MAAX,CAAoB,CAE/B,KAAKC,SAAL,GAEA,IAAM,GAAI5qB,GAAI,CAAR,CAAW6qB,GAAKF,OAAOvuB,MAA7B,CAAqC4D,EAAI6qB,EAAzC,CAA6C7qB,GAA7C,CAAoD,CAEhD,KAAK8qB,aAAL,CAAoBH,OAAQ3qB,CAAR,CAApB,EAEH,CAED,MAAO,KAAP,CAEH,CAvB0B,CAyB3B+qB,qBAAsB,UAAY,CAE9B,GAAI/kB,IAAK,GAAIvL,QAAJ,EAAT,CAEA,MAAO,SAASswB,qBAAT,CAA+B5rB,MAA/B,CAAuC6rB,IAAvC,CAA8C,CAEjD,GAAIC,UAAWjlB,GAAG/O,IAAH,CAAS+zB,IAAT,EAAgBrvB,cAAhB,CAAgC,GAAhC,CAAf,CACA,KAAKlD,GAAL,CAASxB,IAAT,CAAekI,MAAf,EAAwBjH,GAAxB,CAA6B+yB,QAA7B,EACA,KAAKzyB,GAAL,CAASvB,IAAT,CAAekI,MAAf,EAAwB3P,GAAxB,CAA6By7B,QAA7B,EAEA,MAAO,KAAP,CAEH,CARD,CAUH,CAdqB,EAzBK,CAyC3Bn6B,MAAO,gBAAY,CAEf,MAAO,IAAI,MAAKmO,WAAT,GAAuBhI,IAAvB,CAA6B,IAA7B,CAAP,CAEH,CA7C0B,CA+C3BA,KAAM,cAAWm0B,GAAX,CAAiB,CAEnB,KAAK3yB,GAAL,CAASxB,IAAT,CAAem0B,IAAI3yB,GAAnB,EACA,KAAKD,GAAL,CAASvB,IAAT,CAAem0B,IAAI5yB,GAAnB,EAEA,MAAO,KAAP,CAEH,CAtD0B,CAwD3BoyB,UAAW,oBAAY,CAEnB,KAAKnyB,GAAL,CAASzK,CAAT,CAAa,KAAKyK,GAAL,CAASxK,CAAT,CAAa,CAAEwG,QAA5B,CACA,KAAK+D,GAAL,CAASxK,CAAT,CAAa,KAAKwK,GAAL,CAASvK,CAAT,CAAa,CAAEwG,QAA5B,CAEA,MAAO,KAAP,CAEH,CA/D0B,CAiE3B42B,QAAS,kBAAY,CAEjB;AAEA,MAAS,MAAK7yB,GAAL,CAASxK,CAAT,CAAa,KAAKyK,GAAL,CAASzK,CAAxB,EAAiC,KAAKwK,GAAL,CAASvK,CAAT,CAAa,KAAKwK,GAAL,CAASxK,CAA9D,CAEH,CAvE0B,CAyE3Bq9B,UAAW,mBAAW77B,MAAX,CAAoB,CAE3B,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,iDAAd,EACAlN,OAAS,GAAIgL,QAAJ,EAAT,CAEH,CAED,MAAO,MAAK4wB,OAAL,GAAiB57B,OAAOZ,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAjB,CAAsCY,OAAO2jB,UAAP,CAAmB,KAAK3a,GAAxB,CAA6B,KAAKD,GAAlC,EAAwCmD,cAAxC,CAAwD,GAAxD,CAA7C,CAEH,CApF0B,CAsF3B4vB,QAAS,iBAAW97B,MAAX,CAAoB,CAEzB,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,+CAAd,EACAlN,OAAS,GAAIgL,QAAJ,EAAT,CAEH,CAED,MAAO,MAAK4wB,OAAL,GAAiB57B,OAAOZ,GAAP,CAAY,CAAZ,CAAe,CAAf,CAAjB,CAAsCY,OAAO6N,UAAP,CAAmB,KAAK9E,GAAxB,CAA6B,KAAKC,GAAlC,CAA7C,CAEH,CAjG0B,CAmG3BqyB,cAAe,uBAAWU,KAAX,CAAmB,CAE9B,KAAK/yB,GAAL,CAASA,GAAT,CAAc+yB,KAAd,EACA,KAAKhzB,GAAL,CAASA,GAAT,CAAcgzB,KAAd,EAEA,MAAO,KAAP,CAEH,CA1G0B,CA4G3BC,eAAgB,wBAAWnN,MAAX,CAAoB,CAEhC,KAAK7lB,GAAL,CAASP,GAAT,CAAcomB,MAAd,EACA,KAAK9lB,GAAL,CAAShJ,GAAT,CAAc8uB,MAAd,EAEA,MAAO,KAAP,CAEH,CAnH0B,CAqH3BoN,eAAgB,wBAAW7Y,MAAX,CAAoB,CAEhC,KAAKpa,GAAL,CAAS4a,SAAT,CAAoB,CAAER,MAAtB,EACA,KAAKra,GAAL,CAAS6a,SAAT,CAAoBR,MAApB,EAEA,MAAO,KAAP,CAEH,CA5H0B,CA8H3BsZ,cAAe,uBAAWX,KAAX,CAAmB,CAE9B,MAAOA,OAAMx9B,CAAN,CAAU,KAAKyK,GAAL,CAASzK,CAAnB,EAAwBw9B,MAAMx9B,CAAN,CAAU,KAAKwK,GAAL,CAASxK,CAA3C,EACPw9B,MAAMv9B,CAAN,CAAU,KAAKwK,GAAL,CAASxK,CADZ,EACiBu9B,MAAMv9B,CAAN,CAAU,KAAKuK,GAAL,CAASvK,CADpC,CACwC,KADxC,CACgD,IADvD,CAGH,CAnI0B,CAqI3Bm+B,YAAa,qBAAWhB,GAAX,CAAiB,CAE1B,MAAO,MAAK3yB,GAAL,CAASzK,CAAT,EAAco9B,IAAI3yB,GAAJ,CAAQzK,CAAtB,EAA2Bo9B,IAAI5yB,GAAJ,CAAQxK,CAAR,EAAa,KAAKwK,GAAL,CAASxK,CAAjD,EACH,KAAKyK,GAAL,CAASxK,CAAT,EAAcm9B,IAAI3yB,GAAJ,CAAQxK,CADnB,EACwBm9B,IAAI5yB,GAAJ,CAAQvK,CAAR,EAAa,KAAKuK,GAAL,CAASvK,CADrD,CAGH,CA1I0B,CA4I3Bo+B,aAAc,sBAAWb,KAAX,CAAkB/7B,MAAlB,CAA2B,CAErC;AACA;AAEA,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,oDAAd,EACAlN,OAAS,GAAIgL,QAAJ,EAAT,CAEH,CAED,MAAOhL,QAAOZ,GAAP,CACH,CAAE28B,MAAMx9B,CAAN,CAAU,KAAKyK,GAAL,CAASzK,CAArB,GAA6B,KAAKwK,GAAL,CAASxK,CAAT,CAAa,KAAKyK,GAAL,CAASzK,CAAnD,CADG,CAEH,CAAEw9B,MAAMv9B,CAAN,CAAU,KAAKwK,GAAL,CAASxK,CAArB,GAA6B,KAAKuK,GAAL,CAASvK,CAAT,CAAa,KAAKwK,GAAL,CAASxK,CAAnD,CAFG,CAAP,CAKH,CA7J0B,CA+J3Bq+B,cAAe,uBAAWlB,GAAX,CAAiB,CAE5B;AAEA,MAAOA,KAAI5yB,GAAJ,CAAQxK,CAAR,CAAY,KAAKyK,GAAL,CAASzK,CAArB,EAA0Bo9B,IAAI3yB,GAAJ,CAAQzK,CAAR,CAAY,KAAKwK,GAAL,CAASxK,CAA/C,EACPo9B,IAAI5yB,GAAJ,CAAQvK,CAAR,CAAY,KAAKwK,GAAL,CAASxK,CADd,EACmBm9B,IAAI3yB,GAAJ,CAAQxK,CAAR,CAAY,KAAKuK,GAAL,CAASvK,CADxC,CAC4C,KAD5C,CACoD,IAD3D,CAGH,CAtK0B,CAwK3By+B,WAAY,oBAAWlB,KAAX,CAAkB/7B,MAAlB,CAA2B,CAEnC,GAAKA,SAAW2E,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,kDAAd,EACAlN,OAAS,GAAIgL,QAAJ,EAAT,CAEH,CAED,MAAOhL,QAAOwH,IAAP,CAAau0B,KAAb,EAAqBta,KAArB,CAA4B,KAAKzY,GAAjC,CAAsC,KAAKD,GAA3C,CAAP,CAEH,CAnL0B,CAqL3Bg1B,gBAAiB,UAAY,CAEzB,GAAIxnB,IAAK,GAAIvL,QAAJ,EAAT,CAEA,MAAO,SAAS+yB,gBAAT,CAA0BhC,KAA1B,CAAkC,CAErC,GAAIiC,cAAeznB,GAAG/O,IAAH,CAASu0B,KAAT,EAAiBta,KAAjB,CAAwB,KAAKzY,GAA7B,CAAkC,KAAKD,GAAvC,CAAnB,CACA,MAAOi1B,cAAav1B,GAAb,CAAkBszB,KAAlB,EAA0BpvB,MAA1B,EAAP,CAEH,CALD,CAOH,CAXgB,EArLU,CAkM3BwxB,UAAW,mBAAWxC,GAAX,CAAiB,CAExB,KAAK3yB,GAAL,CAASD,GAAT,CAAc4yB,IAAI3yB,GAAlB,EACA,KAAKD,GAAL,CAASC,GAAT,CAAc2yB,IAAI5yB,GAAlB,EAEA,MAAO,KAAP,CAEH,CAzM0B,CA2M3Bq1B,MAAO,eAAWzC,GAAX,CAAiB,CAEpB,KAAK3yB,GAAL,CAASA,GAAT,CAAc2yB,IAAI3yB,GAAlB,EACA,KAAKD,GAAL,CAASA,GAAT,CAAc4yB,IAAI5yB,GAAlB,EAEA,MAAO,KAAP,CAEH,CAlN0B,CAoN3BstB,UAAW,mBAAWruB,MAAX,CAAoB,CAE3B,KAAKgB,GAAL,CAASjJ,GAAT,CAAciI,MAAd,EACA,KAAKe,GAAL,CAAShJ,GAAT,CAAciI,MAAd,EAEA,MAAO,KAAP,CAEH,CA3N0B,CA6N3Bud,OAAQ,gBAAWoW,GAAX,CAAiB,CAErB,MAAOA,KAAI3yB,GAAJ,CAAQuc,MAAR,CAAgB,KAAKvc,GAArB,GAA8B2yB,IAAI5yB,GAAJ,CAAQwc,MAAR,CAAgB,KAAKxc,GAArB,CAArC,CAEH,CAjO0B,CAA/B,EAqOA;;OAIA,QAAS85H,sBAAT,CAAgClpF,QAAhC,CAA2C,CAEvC/3C,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAK6mC,QAAL,CAAgBA,QAAhB,CACA,KAAKh3C,MAAL,CAAc,UAAW,oBAAuB,CAAE,CAAlD,CAEH,CAEDkgI,sBAAsBzzH,SAAtB,CAAkCC,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAlC,CACAyzH,sBAAsBzzH,SAAtB,CAAgCI,WAAhC,CAA8CqzH,qBAA9C,CAEAA,sBAAsBzzH,SAAtB,CAAgCu+E,uBAAhC,CAA0D,IAA1D,CAEA;;;OAKA,QAASm1C,oBAAT,CAA8Br+H,MAA9B,CAAsC82B,IAAtC,CAA4CuP,GAA5C,CAAiDyf,SAAjD,CAA6D,CAEzD,KAAK9lD,MAAL,CAAcA,MAAd,CAEA,KAAK82B,IAAL,CAAcA,OAAS52B,SAAX,CAAyB42B,IAAzB,CAAgC,CAA5C,CAEA,GAAI96B,OAAUqqC,MAAQnmC,SAAV,CAAwBmmC,GAAxB,CAA8B,QAA1C,CAEA,GAAIjrC,OAAU0qD,YAAc5lD,SAAhB,CAA8B4lD,SAA9B,CAA0C,CAAtD,CAEA;AAEA,GAAIw4E,UAAW,CAAf,CAEA,GAAIC,aAAc,KAAKv+H,MAAL,CAAY23B,QAA9B,CAEA,GAAK4mG,aAAeA,YAAY3mG,UAAhC,CAA6C,CAEzC0mG,SAAWC,YAAYxnF,KAAZ,CAAkB7uC,MAAlB,CAA2B,CAAtC,CAEH,CAJD,IAIO,IAAKq2H,aAAeA,YAAYzmG,gBAAhC,CAAmD,CAEtDwmG,SAAWC,YAAYxmG,UAAZ,CAAuBtH,MAAvB,CAA8BvJ,KAAzC,CAEH,CAED;AAEA,GAAIyQ,UAAW,GAAIuoB,eAAJ,EAAf,CAEA,GAAI7H,WAAY,GAAI8G,uBAAJ,CAA4Bm/E,SAAW,CAAX,CAAe,CAA3C,CAA8C,CAA9C,CAAhB,CAEA3mG,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmClI,SAAnC,EAEAo3C,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmC,GAAI8qC,kBAAJ,CAAuB,CAAEzmE,MAAOA,KAAT,CAAgB8pD,UAAW1qD,KAA3B,CAAvB,CAAnC,EAEA;AAEA,KAAKw3B,gBAAL,CAAwB,KAAxB,CAEA,KAAK30B,MAAL,GAEH,CAEDogI,oBAAoB1zH,SAApB,CAAgCC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAAhC,CACA0zH,oBAAoB1zH,SAApB,CAA8BI,WAA9B,CAA4CszH,mBAA5C,CAEAA,oBAAoB1zH,SAApB,CAA8B1M,MAA9B,CAAyC,UAAY,CAEjD,GAAI6T,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIygB,IAAK,GAAIzgB,QAAJ,EAAT,CACA,GAAIk8B,cAAe,GAAIrL,QAAJ,EAAnB,CAEA,MAAO,SAAShzB,OAAT,EAAkB,CAErB,GAAIwD,MAAO,CAAE,GAAF,CAAO,GAAP,CAAY,GAAZ,CAAX,CAEA,KAAKzB,MAAL,CAAYg4B,iBAAZ,CAA+B,IAA/B,EAEAsE,aAAajL,eAAb,CAA8B,KAAKrxB,MAAL,CAAY2vB,WAA1C,EAEA,GAAIA,aAAc,KAAK3vB,MAAL,CAAY2vB,WAA9B,CAEA,GAAI91B,UAAW,KAAK89B,QAAL,CAAcI,UAAd,CAAyBl+B,QAAxC,CAEA;AAEA,GAAI0kI,aAAc,KAAKv+H,MAAL,CAAY23B,QAA9B,CAEA,GAAK4mG,aAAeA,YAAY3mG,UAAhC,CAA6C,CAEzC,GAAIC,UAAW0mG,YAAY1mG,QAA3B,CAEA,GAAIkf,OAAQwnF,YAAYxnF,KAAxB,CAEA,GAAI4E,KAAM,CAAV,CAEA,IAAM,GAAI7vC,GAAI,CAAR,CAAW6H,EAAIojC,MAAM7uC,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAA1C,CAAiD,CAE7C,GAAIisC,MAAOhB,MAAOjrC,CAAP,CAAX,CAEA,IAAM,GAAIstB,GAAI,CAAR,CAAW4e,GAAKD,KAAKrB,aAAL,CAAmBxuC,MAAzC,CAAiDkxB,EAAI4e,EAArD,CAAyD5e,GAAzD,CAAgE,CAE5D,GAAI0e,QAASjgB,SAAUkgB,KAAMt2C,KAAM23B,CAAN,CAAN,CAAV,CAAb,CAEA,GAAI3I,QAASsnB,KAAKrB,aAAL,CAAoBtd,CAApB,CAAb,CAEAtnB,GAAG/O,IAAH,CAAS+0C,MAAT,EAAkB1wB,YAAlB,CAAgCuI,WAAhC,EAEA9O,GAAG9d,IAAH,CAAS0tB,MAAT,EAAkBhR,YAAlB,CAAgC6c,YAAhC,EAA+Chc,SAA/C,GAA2D7Y,cAA3D,CAA2E,KAAKqvB,IAAhF,EAAuFx7B,GAAvF,CAA4FwW,EAA5F,EAEAjY,SAASwtB,MAAT,CAAiBs0B,GAAjB,CAAsB7pC,GAAGhY,CAAzB,CAA4BgY,GAAG/X,CAA/B,CAAkC+X,GAAG9X,CAArC,EAEA2hD,IAAMA,IAAM,CAAZ,CAEA9hD,SAASwtB,MAAT,CAAiBs0B,GAAjB,CAAsB96B,GAAG/mB,CAAzB,CAA4B+mB,GAAG9mB,CAA/B,CAAkC8mB,GAAG7mB,CAArC,EAEA2hD,IAAMA,IAAM,CAAZ,CAEH,CAEJ,CAEJ,CAlCD,IAkCO,IAAK4iF,aAAeA,YAAYzmG,gBAAhC,CAAmD,CAEtD,GAAI0mG,QAASD,YAAYxmG,UAAZ,CAAuBl+B,QAApC,CAEA,GAAI4kI,SAAUF,YAAYxmG,UAAZ,CAAuBtH,MAArC,CAEA,GAAIkrB,KAAM,CAAV,CAEA;AAEA,IAAM,GAAIviB,GAAI,CAAR,CAAW4e,GAAKwmF,OAAOt3G,KAA7B,CAAoCkS,EAAI4e,EAAxC,CAA4C5e,GAA5C,CAAmD,CAE/CtnB,GAAGnX,GAAH,CAAQ6jI,OAAOr9G,IAAP,CAAaiY,CAAb,CAAR,CAA0BolG,OAAOp9G,IAAP,CAAagY,CAAb,CAA1B,CAA4ColG,OAAOr3G,IAAP,CAAaiS,CAAb,CAA5C,EAA+DhS,YAA/D,CAA6EuI,WAA7E,EAEA9O,GAAGlmB,GAAH,CAAQ8jI,QAAQt9G,IAAR,CAAciY,CAAd,CAAR,CAA2BqlG,QAAQr9G,IAAR,CAAcgY,CAAd,CAA3B,CAA8CqlG,QAAQt3G,IAAR,CAAciS,CAAd,CAA9C,EAEAvY,GAAGpB,YAAH,CAAiB6c,YAAjB,EAAgChc,SAAhC,GAA4C7Y,cAA5C,CAA4D,KAAKqvB,IAAjE,EAAwEx7B,GAAxE,CAA6EwW,EAA7E,EAEAjY,SAASwtB,MAAT,CAAiBs0B,GAAjB,CAAsB7pC,GAAGhY,CAAzB,CAA4BgY,GAAG/X,CAA/B,CAAkC+X,GAAG9X,CAArC,EAEA2hD,IAAMA,IAAM,CAAZ,CAEA9hD,SAASwtB,MAAT,CAAiBs0B,GAAjB,CAAsB96B,GAAG/mB,CAAzB,CAA4B+mB,GAAG9mB,CAA/B,CAAkC8mB,GAAG7mB,CAArC,EAEA2hD,IAAMA,IAAM,CAAZ,CAEH,CAEJ,CAED9hD,SAASgnD,WAAT,CAAuB,IAAvB,CAEH,CAlFD,CAoFH,CA1FwC,EAAzC,CA4FA;;;;OAMA,QAAS69E,gBAAT,CAA0Bj5D,KAA1B,CAAiCzpE,KAAjC,CAAyC,CAErCmB,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKo3D,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAWztC,iBAAX,GAEA,KAAK1vB,MAAL,CAAcm9D,MAAM91C,WAApB,CACA,KAAKiD,gBAAL,CAAwB,KAAxB,CAEA,KAAK52B,KAAL,CAAaA,KAAb,CAEA,GAAI27B,UAAW,GAAIuoB,eAAJ,EAAf,CAEA,GAAI7H,WAAY,CACZ,CADY,CACT,CADS,CACN,CADM,CACF,CADE,CACC,CADD,CACI,CADJ,CAEZ,CAFY,CAET,CAFS,CAEN,CAFM,CAEF,CAFE,CAEC,CAFD,CAEI,CAFJ,CAGZ,CAHY,CAGT,CAHS,CAGN,CAHM,CAGH,CAAE,CAHC,CAGE,CAHF,CAGK,CAHL,CAIZ,CAJY,CAIT,CAJS,CAIN,CAJM,CAIF,CAJE,CAIC,CAJD,CAII,CAJJ,CAKZ,CALY,CAKT,CALS,CAKN,CALM,CAKF,CALE,CAKC,CAAE,CALH,CAKM,CALN,CAAhB,CAQA,IAAM,GAAIvsC,GAAI,CAAR,CAAWstB,EAAI,CAAf,CAAkBzlB,EAAI,EAA5B,CAAgC7H,EAAI6H,CAApC,CAAuC7H,IAAMstB,GAA7C,CAAoD,CAEhD,GAAI9nB,IAAOxF,EAAI6H,CAAN,CAAYnW,KAAKC,EAAjB,CAAsB,CAA/B,CACA,GAAIkU,IAAOynB,EAAIzlB,CAAN,CAAYnW,KAAKC,EAAjB,CAAsB,CAA/B,CAEA46C,UAAU17C,IAAV,CACIa,KAAKyS,GAAL,CAAUqB,EAAV,CADJ,CACoB9T,KAAK0S,GAAL,CAAUoB,EAAV,CADpB,CACoC,CADpC,CAEI9T,KAAKyS,GAAL,CAAU0B,EAAV,CAFJ,CAEoBnU,KAAK0S,GAAL,CAAUyB,EAAV,CAFpB,CAEoC,CAFpC,EAKH,CAEDgmB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4B9G,SAA5B,CAAuC,CAAvC,CAAnC,EAEA,GAAInD,UAAW,GAAIutB,kBAAJ,CAAuB,CAAEn4B,IAAK,KAAP,CAAvB,CAAf,CAEA,KAAKq0F,IAAL,CAAY,GAAIlvC,aAAJ,CAAkB93D,QAAlB,CAA4Bud,QAA5B,CAAZ,CACA,KAAK55C,GAAL,CAAU,KAAKqjI,IAAf,EAEA,KAAK1gI,MAAL,GAEH,CAEDygI,gBAAgB/zH,SAAhB,CAA4BC,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAA5B,CACA+zH,gBAAgB/zH,SAAhB,CAA0BI,WAA1B,CAAwC2zH,eAAxC,CAEAA,gBAAgB/zH,SAAhB,CAA0BxF,OAA1B,CAAoC,UAAY,CAE5C,KAAKw5H,IAAL,CAAUhnG,QAAV,CAAmBxyB,OAAnB,GACA,KAAKw5H,IAAL,CAAUzpF,QAAV,CAAmB/vC,OAAnB,GAEH,CALD,CAOAu5H,gBAAgB/zH,SAAhB,CAA0B1M,MAA1B,CAAmC,UAAY,CAE3C,GAAImsB,QAAS,GAAIhqB,QAAJ,EAAb,CACA,GAAIk/F,SAAU,GAAIl/F,QAAJ,EAAd,CAEA,MAAO,SAASnC,OAAT,EAAkB,CAErB,KAAKwnE,KAAL,CAAWztC,iBAAX,GAEA,GAAI4mG,YAAa,KAAKn5D,KAAL,CAAWn+D,QAAX,CAAsB,KAAKm+D,KAAL,CAAWn+D,QAAjC,CAA4C,IAA7D,CACA,GAAIu3H,WAAYD,WAAaphI,KAAK2K,GAAL,CAAU,KAAKs9D,KAAL,CAAWv+D,KAArB,CAA7B,CAEA,KAAKy3H,IAAL,CAAUj6H,KAAV,CAAgB/J,GAAhB,CAAqBkkI,SAArB,CAAgCA,SAAhC,CAA2CD,UAA3C,EAEAx0G,OAAO2G,qBAAP,CAA8B,KAAK00C,KAAL,CAAW91C,WAAzC,EACA2vE,QAAQvuE,qBAAR,CAA+B,KAAK00C,KAAL,CAAWlqE,MAAX,CAAkBo0B,WAAjD,EAEA,KAAKgvG,IAAL,CAAU95H,MAAV,CAAkBy6F,QAAQt7F,GAAR,CAAaomB,MAAb,CAAlB,EAEA,GAAK,KAAKpuB,KAAL,GAAekE,SAApB,CAAgC,CAE5B,KAAKy+H,IAAL,CAAUzpF,QAAV,CAAmBl5C,KAAnB,CAAyBrB,GAAzB,CAA8B,KAAKqB,KAAnC,EAEH,CAJD,IAIO,CAEH,KAAK2iI,IAAL,CAAUzpF,QAAV,CAAmBl5C,KAAnB,CAAyB+G,IAAzB,CAA+B,KAAK0iE,KAAL,CAAWzpE,KAA1C,EAEH,CAEJ,CAxBD,CA0BH,CA/BkC,EAAnC,CAiCA;;;;;;OAQA,QAAS8iI,YAAT,CAAsB9+H,MAAtB,CAA+B,CAE3B,GAAI++H,UAAW,EAAf,CAEA,GAAK/+H,QAAUA,OAAOouF,MAAtB,CAA+B,CAE3B2wC,SAASpiI,IAAT,CAAeqD,MAAf,EAEH,CAED,IAAM,GAAI8L,GAAI,CAAd,CAAiBA,EAAI9L,OAAO+xC,QAAP,CAAgB7pC,MAArC,CAA6C4D,GAA7C,CAAoD,CAEhDizH,SAASpiI,IAAT,CAAcg4E,KAAd,CAAqBoqD,QAArB,CAA+BD,YAAa9+H,OAAO+xC,QAAP,CAAiBjmC,CAAjB,CAAb,CAA/B,EAEH,CAED,MAAOizH,SAAP,CAEH,CAED,QAASC,eAAT,CAAyBh/H,MAAzB,CAAkC,CAE9B,GAAIgjE,OAAQ87D,YAAa9+H,MAAb,CAAZ,CAEA,GAAI23B,UAAW,GAAIuoB,eAAJ,EAAf,CAEA,GAAIroB,UAAW,EAAf,CACA,GAAIif,QAAS,EAAb,CAEA,GAAIhP,QAAS,GAAI7B,MAAJ,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAb,CACA,GAAI8B,QAAS,GAAI9B,MAAJ,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAb,CAEA,IAAM,GAAIn6B,GAAI,CAAd,CAAiBA,EAAIk3D,MAAM96D,MAA3B,CAAmC4D,GAAnC,CAA0C,CAEtC,GAAIqiF,MAAOnrB,MAAOl3D,CAAP,CAAX,CAEA,GAAKqiF,KAAKr8C,MAAL,EAAeq8C,KAAKr8C,MAAL,CAAYs8C,MAAhC,CAAyC,CAErCv2D,SAASl7B,IAAT,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,EACAk7B,SAASl7B,IAAT,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,EACAm6C,OAAOn6C,IAAP,CAAamrC,OAAOra,CAApB,CAAuBqa,OAAO1W,CAA9B,CAAiC0W,OAAO/2B,CAAxC,EACA+lC,OAAOn6C,IAAP,CAAaorC,OAAOta,CAApB,CAAuBsa,OAAO3W,CAA9B,CAAiC2W,OAAOh3B,CAAxC,EAEH,CAEJ,CAED4mB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAAnC,EACAF,SAAS4oB,YAAT,CAAuB,OAAvB,CAAgC,GAAIpB,uBAAJ,CAA4BrI,MAA5B,CAAoC,CAApC,CAAhC,EAEA,GAAI5B,UAAW,GAAIutB,kBAAJ,CAAuB,CAAE9rB,aAAc/hC,YAAhB,CAA8B4vC,UAAW,KAAzC,CAAgDC,WAAY,KAA5D,CAAmET,YAAa,IAAhF,CAAvB,CAAf,CAEAyrC,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmCud,QAAnC,EAEA,KAAKjjC,IAAL,CAAYjS,MAAZ,CACA,KAAKgjE,KAAL,CAAaA,KAAb,CAEA,KAAK16D,MAAL,CAActI,OAAO2vB,WAArB,CACA,KAAKiD,gBAAL,CAAwB,KAAxB,CAEH,CAEDosG,eAAer0H,SAAf,CAA2BC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAA3B,CACAq0H,eAAer0H,SAAf,CAAyBI,WAAzB,CAAuCi0H,cAAvC,CAEAA,eAAer0H,SAAf,CAAyBqtB,iBAAzB,CAA6C,UAAY,CAErD,GAAI5N,QAAS,GAAIhqB,QAAJ,EAAb,CAEA,GAAI6+H,YAAa,GAAI19G,QAAJ,EAAjB,CACA,GAAI29G,gBAAiB,GAAI39G,QAAJ,EAArB,CAEA,MAAO,SAASyW,kBAAT,CAA4Bwc,KAA5B,CAAoC,CAEvC,GAAIwuB,OAAQ,KAAKA,KAAjB,CAEA,GAAIrrC,UAAW,KAAKA,QAApB,CACA,GAAI99B,UAAW89B,SAAS6oB,YAAT,CAAuB,UAAvB,CAAf,CAEA0+E,eAAez3G,UAAf,CAA2B,KAAKxV,IAAL,CAAU0d,WAArC,EAEA,IAAM,GAAI7jB,GAAI,CAAR,CAAWstB,EAAI,CAArB,CAAwBttB,EAAIk3D,MAAM96D,MAAlC,CAA0C4D,GAA1C,CAAiD,CAE7C,GAAIqiF,MAAOnrB,MAAOl3D,CAAP,CAAX,CAEA,GAAKqiF,KAAKr8C,MAAL,EAAeq8C,KAAKr8C,MAAL,CAAYs8C,MAAhC,CAAyC,CAErC6wC,WAAWl6G,gBAAX,CAA6Bm6G,cAA7B,CAA6C/wC,KAAKx+D,WAAlD,EACAvF,OAAO2G,qBAAP,CAA8BkuG,UAA9B,EACAplI,SAASwtB,MAAT,CAAiB+R,CAAjB,CAAoBhP,OAAOtwB,CAA3B,CAA8BswB,OAAOrwB,CAArC,CAAwCqwB,OAAOpwB,CAA/C,EAEAilI,WAAWl6G,gBAAX,CAA6Bm6G,cAA7B,CAA6C/wC,KAAKr8C,MAAL,CAAYniB,WAAzD,EACAvF,OAAO2G,qBAAP,CAA8BkuG,UAA9B,EACAplI,SAASwtB,MAAT,CAAiB+R,EAAI,CAArB,CAAwBhP,OAAOtwB,CAA/B,CAAkCswB,OAAOrwB,CAAzC,CAA4CqwB,OAAOpwB,CAAnD,EAEAo/B,GAAK,CAAL,CAEH,CAEJ,CAEDzB,SAAS6oB,YAAT,CAAuB,UAAvB,EAAoCK,WAApC,CAAkD,IAAlD,CAEA1jD,SAASwN,SAAT,CAAmBqtB,iBAAnB,CAAqC3pB,IAArC,CAA2C,IAA3C,CAAiDmmC,KAAjD,EAEH,CAjCD,CAmCH,CA1C4C,EAA7C,CA4CA;;;OAKA,QAAS2qF,iBAAT,CAA2B15D,KAA3B,CAAkC25D,UAAlC,CAA8CpjI,KAA9C,CAAsD,CAElD,KAAKypE,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAWztC,iBAAX,GAEA,KAAKh8B,KAAL,CAAaA,KAAb,CAEA,GAAI27B,UAAW,GAAIspE,qBAAJ,CAA0Bm+B,UAA1B,CAAsC,CAAtC,CAAyC,CAAzC,CAAf,CACA,GAAIlqF,UAAW,GAAIqR,kBAAJ,CAAuB,CAAEP,UAAW,IAAb,CAAmB1b,IAAK,KAAxB,CAAvB,CAAf,CAEAruC,KAAKoS,IAAL,CAAW,IAAX,CAAiBspB,QAAjB,CAA2Bud,QAA3B,EAEA,KAAK5sC,MAAL,CAAc,KAAKm9D,KAAL,CAAW91C,WAAzB,CACA,KAAKiD,gBAAL,CAAwB,KAAxB,CAEA,KAAK30B,MAAL,GAGA;;;;;;;;;;;;;;;;;;;;IAsBH,CAEDkhI,iBAAiBx0H,SAAjB,CAA6BC,OAAOC,MAAP,CAAe5O,KAAK0O,SAApB,CAA7B,CACAw0H,iBAAiBx0H,SAAjB,CAA2BI,WAA3B,CAAyCo0H,gBAAzC,CAEAA,iBAAiBx0H,SAAjB,CAA2BxF,OAA3B,CAAqC,UAAY,CAE7C,KAAKwyB,QAAL,CAAcxyB,OAAd,GACA,KAAK+vC,QAAL,CAAc/vC,OAAd,GAEH,CALD,CAOAg6H,iBAAiBx0H,SAAjB,CAA2B1M,MAA3B,CAAoC,UAAY,CAE5C,GAAK,KAAKjC,KAAL,GAAekE,SAApB,CAAgC,CAE5B,KAAKg1C,QAAL,CAAcl5C,KAAd,CAAoBrB,GAApB,CAAyB,KAAKqB,KAA9B,EAEH,CAJD,IAIO,CAEH,KAAKk5C,QAAL,CAAcl5C,KAAd,CAAoB+G,IAApB,CAA0B,KAAK0iE,KAAL,CAAWzpE,KAArC,EAEH,CAED;;;;;;;;;;;;;IAeH,CA3BD,CA6BA;;;;OAMA,QAASqjI,oBAAT,CAA8B55D,KAA9B,CAAqCzpE,KAArC,CAA6C,CAEzCmB,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKo3D,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAWztC,iBAAX,GAEA,KAAK1vB,MAAL,CAAcm9D,MAAM91C,WAApB,CACA,KAAKiD,gBAAL,CAAwB,KAAxB,CAEA,KAAK52B,KAAL,CAAaA,KAAb,CAEA,GAAIk5C,UAAW,GAAIutB,kBAAJ,CAAuB,CAAEn4B,IAAK,KAAP,CAAvB,CAAf,CAEA,GAAI3S,UAAW,GAAIuoB,eAAJ,EAAf,CAEAvoB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAI9C,gBAAJ,CAAqB,GAAIrO,aAAJ,CAAkB,EAAI,CAAtB,CAArB,CAAgD,CAAhD,CAAnC,EAEA,KAAKxT,IAAL,CAAY,GAAI4zD,KAAJ,CAAU73D,QAAV,CAAoBud,QAApB,CAAZ,CACA,KAAK55C,GAAL,CAAU,KAAKsgC,IAAf,EAGA,KAAK39B,MAAL,GAEH,CAEDohI,oBAAoB10H,SAApB,CAAgCC,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAhC,CACA00H,oBAAoB10H,SAApB,CAA8BI,WAA9B,CAA4Cs0H,mBAA5C,CAEAA,oBAAoB10H,SAApB,CAA8BxF,OAA9B,CAAwC,UAAY,CAEhD,KAAK4sC,QAAL,CAAe,CAAf,EAAmBpa,QAAnB,CAA4BxyB,OAA5B,GACA,KAAK4sC,QAAL,CAAe,CAAf,EAAmBmD,QAAnB,CAA4B/vC,OAA5B,GAEH,CALD,CAOAk6H,oBAAoB10H,SAApB,CAA8B1M,MAA9B,CAAuC,UAAY,CAE/C;AAEA,GAAI66F,IAAK,KAAKrzB,KAAL,CAAWrqE,KAAX,CAAmB,GAA5B,CACA,GAAI29F,IAAK,KAAKtzB,KAAL,CAAWpqE,MAAX,CAAoB,GAA7B,CAEA,GAAIxB,UAAW,KAAK+hC,IAAL,CAAUjE,QAAV,CAAmBI,UAAnB,CAA8Bl+B,QAA7C,CACA,GAAI4Z,OAAQ5Z,SAAS4Z,KAArB,CAEA;AAEAA,MAAO,CAAP,EAAaqlF,EAAb,CAAiBrlF,MAAO,CAAP,EAAa,CAAEslF,EAAf,CAAmBtlF,MAAO,CAAP,EAAa,CAAb,CACpCA,MAAO,CAAP,EAAaqlF,EAAb,CAAiBrlF,MAAO,CAAP,EAAaslF,EAAb,CAAiBtlF,MAAO,CAAP,EAAa,CAAb,CAClCA,MAAO,CAAP,EAAa,CAAEqlF,EAAf,CAAmBrlF,MAAO,CAAP,EAAaslF,EAAb,CAAiBtlF,MAAO,CAAP,EAAa,CAAb,CACpCA,MAAO,CAAP,EAAa,CAAEqlF,EAAf,CAAmBrlF,MAAO,EAAP,EAAc,CAAEslF,EAAhB,CAAoBtlF,MAAO,EAAP,EAAc,CAAd,CACvCA,MAAO,EAAP,EAAcqlF,EAAd,CAAkBrlF,MAAO,EAAP,EAAc,CAAEslF,EAAhB,CAAoBtlF,MAAO,EAAP,EAAc,CAAd,CAEtC5Z,SAASgnD,WAAT,CAAuB,IAAvB,CAEA,GAAK,KAAK7kD,KAAL,GAAekE,SAApB,CAAgC,CAE5B,KAAK07B,IAAL,CAAUsZ,QAAV,CAAmBl5C,KAAnB,CAAyBrB,GAAzB,CAA8B,KAAKqB,KAAnC,EAEH,CAJD,IAIO,CAEH,KAAK4/B,IAAL,CAAUsZ,QAAV,CAAmBl5C,KAAnB,CAAyB+G,IAAzB,CAA+B,KAAK0iE,KAAL,CAAWzpE,KAA1C,EAEH,CAEJ,CA9BD,CAgCA;;;;OAMA,QAASsjI,sBAAT,CAAgC75D,KAAhC,CAAuC3uC,IAAvC,CAA6C96B,KAA7C,CAAqD,CAEjDmB,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKo3D,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAWztC,iBAAX,GAEA,KAAK1vB,MAAL,CAAcm9D,MAAM91C,WAApB,CACA,KAAKiD,gBAAL,CAAwB,KAAxB,CAEA,KAAK52B,KAAL,CAAaA,KAAb,CAEA,GAAI27B,UAAW,GAAIg8D,yBAAJ,CAA8B78D,IAA9B,CAAf,CACAa,SAAS4b,OAAT,CAAkB/1C,KAAKC,EAAL,CAAU,GAA5B,EAEA,KAAKy3C,QAAL,CAAgB,GAAIqR,kBAAJ,CAAuB,CAAEP,UAAW,IAAb,CAAmB1b,IAAK,KAAxB,CAAvB,CAAhB,CACA,GAAK,KAAKtuC,KAAL,GAAekE,SAApB,CAAgC,KAAKg1C,QAAL,CAAcyB,YAAd,CAA6B/hC,YAA7B,CAEhC,GAAI/a,UAAW89B,SAAS6oB,YAAT,CAAuB,UAAvB,CAAf,CACA,GAAI1J,QAAS,GAAI1H,aAAJ,CAAkBv1C,SAASqtB,KAAT,CAAiB,CAAnC,CAAb,CAEAyQ,SAAS4oB,YAAT,CAAuB,OAAvB,CAAgC,GAAI9C,gBAAJ,CAAqB3G,MAArB,CAA6B,CAA7B,CAAhC,EAEA,KAAKx7C,GAAL,CAAU,GAAIW,KAAJ,CAAU07B,QAAV,CAAoB,KAAKud,QAAzB,CAAV,EAEA,KAAKj3C,MAAL,GAEH,CAEDqhI,sBAAsB30H,SAAtB,CAAkCC,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAlC,CACA20H,sBAAsB30H,SAAtB,CAAgCI,WAAhC,CAA8Cu0H,qBAA9C,CAEAA,sBAAsB30H,SAAtB,CAAgCxF,OAAhC,CAA0C,UAAY,CAElD,KAAK4sC,QAAL,CAAe,CAAf,EAAmBpa,QAAnB,CAA4BxyB,OAA5B,GACA,KAAK4sC,QAAL,CAAe,CAAf,EAAmBmD,QAAnB,CAA4B/vC,OAA5B,GAEH,CALD,CAOAm6H,sBAAsB30H,SAAtB,CAAgC1M,MAAhC,CAAyC,UAAY,CAEjD,GAAImsB,QAAS,GAAIhqB,QAAJ,EAAb,CAEA,GAAI0nC,QAAS,GAAI7B,MAAJ,EAAb,CACA,GAAI8B,QAAS,GAAI9B,MAAJ,EAAb,CAEA,MAAO,SAAShoC,OAAT,EAAkB,CAErB,GAAIi9C,MAAO,KAAKnJ,QAAL,CAAe,CAAf,CAAX,CAEA,GAAK,KAAK/1C,KAAL,GAAekE,SAApB,CAAgC,CAE5B,KAAKg1C,QAAL,CAAcl5C,KAAd,CAAoBrB,GAApB,CAAyB,KAAKqB,KAA9B,EAEH,CAJD,IAIO,CAEH,GAAI86C,QAASoE,KAAKvjB,QAAL,CAAc6oB,YAAd,CAA4B,OAA5B,CAAb,CAEA1Y,OAAO/kC,IAAP,CAAa,KAAK0iE,KAAL,CAAWzpE,KAAxB,EACA+rC,OAAOhlC,IAAP,CAAa,KAAK0iE,KAAL,CAAWz5B,WAAxB,EAEA,IAAM,GAAIlgC,GAAI,CAAR,CAAW6H,EAAImjC,OAAO5vB,KAA5B,CAAmCpb,EAAI6H,CAAvC,CAA0C7H,GAA1C,CAAiD,CAE7C,GAAI9P,OAAU8P,EAAM6H,EAAI,CAAZ,CAAoBm0B,MAApB,CAA6BC,MAAzC,CAEA+O,OAAOzvB,MAAP,CAAevb,CAAf,CAAkB9P,MAAMyxB,CAAxB,CAA2BzxB,MAAMo1B,CAAjC,CAAoCp1B,MAAM+U,CAA1C,EAEH,CAED+lC,OAAO+J,WAAP,CAAqB,IAArB,CAEH,CAED3F,KAAKr2C,MAAL,CAAaulB,OAAO2G,qBAAP,CAA8B,KAAK00C,KAAL,CAAW91C,WAAzC,EAAuDzP,MAAvD,EAAb,EAEH,CA7BD,CA+BH,CAtCwC,EAAzC,CAwCA;;OAIA,QAASq/G,WAAT,CAAqBzoG,IAArB,CAA2B0yE,SAA3B,CAAsC1hE,MAAtC,CAA8CC,MAA9C,CAAuD,CAEnDjR,KAAOA,MAAQ,EAAf,CACA0yE,UAAYA,WAAa,EAAzB,CACA1hE,OAAS,GAAI7B,MAAJ,CAAW6B,SAAW5nC,SAAX,CAAuB4nC,MAAvB,CAAgC,QAA3C,CAAT,CACAC,OAAS,GAAI9B,MAAJ,CAAW8B,SAAW7nC,SAAX,CAAuB6nC,MAAvB,CAAgC,QAA3C,CAAT,CAEA,GAAI98B,QAASu+F,UAAY,CAAzB,CACA,GAAItZ,MAAOp5D,KAAO0yE,SAAlB,CACA,GAAIzyE,UAAWD,KAAO,CAAtB,CAEA,GAAIe,UAAW,EAAf,CAAmBif,OAAS,EAA5B,CAEA,IAAM,GAAIhrC,GAAI,CAAR,CAAWstB,EAAI,CAAf,CAAkB1pB,EAAI,CAAEqnB,QAA9B,CAAwCjrB,GAAK09F,SAA7C,CAAwD19F,IAAM4D,GAAKwgF,IAAnE,CAA0E,CAEtEr4D,SAASl7B,IAAT,CAAe,CAAEo6B,QAAjB,CAA2B,CAA3B,CAA8BrnB,CAA9B,CAAiCqnB,QAAjC,CAA2C,CAA3C,CAA8CrnB,CAA9C,EACAmoB,SAASl7B,IAAT,CAAe+S,CAAf,CAAkB,CAAlB,CAAqB,CAAEqnB,QAAvB,CAAiCrnB,CAAjC,CAAoC,CAApC,CAAuCqnB,QAAvC,EAEA,GAAI/6B,OAAQ8P,IAAMb,MAAN,CAAe68B,MAAf,CAAwBC,MAApC,CAEA/rC,MAAMglB,OAAN,CAAe81B,MAAf,CAAuB1d,CAAvB,EAA4BA,GAAK,CAAL,CAC5Bp9B,MAAMglB,OAAN,CAAe81B,MAAf,CAAuB1d,CAAvB,EAA4BA,GAAK,CAAL,CAC5Bp9B,MAAMglB,OAAN,CAAe81B,MAAf,CAAuB1d,CAAvB,EAA4BA,GAAK,CAAL,CAC5Bp9B,MAAMglB,OAAN,CAAe81B,MAAf,CAAuB1d,CAAvB,EAA4BA,GAAK,CAAL,CAE/B,CAED,GAAIzB,UAAW,GAAIuoB,eAAJ,EAAf,CACAvoB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAAnC,EACAF,SAAS4oB,YAAT,CAAuB,OAAvB,CAAgC,GAAIpB,uBAAJ,CAA4BrI,MAA5B,CAAoC,CAApC,CAAhC,EAEA,GAAI5B,UAAW,GAAIutB,kBAAJ,CAAuB,CAAE9rB,aAAc/hC,YAAhB,CAAvB,CAAf,CAEA66E,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmCud,QAAnC,EAEH,CAEDqqF,WAAW50H,SAAX,CAAuBC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAAvB,CACA40H,WAAW50H,SAAX,CAAqBI,WAArB,CAAmCw0H,UAAnC,CAEA;;;;OAMA,QAASC,gBAAT,CAA0B/6H,MAA1B,CAAkCg7H,OAAlC,CAA2CC,OAA3C,CAAoDl2B,SAApD,CAA+D1hE,MAA/D,CAAuEC,MAAvE,CAAgF,CAE5EtjC,OAASA,QAAU,EAAnB,CACAg7H,QAAUA,SAAW,EAArB,CACAC,QAAUA,SAAW,CAArB,CACAl2B,UAAYA,WAAa,EAAzB,CACA1hE,OAAS,GAAI7B,MAAJ,CAAW6B,SAAW5nC,SAAX,CAAuB4nC,MAAvB,CAAgC,QAA3C,CAAT,CACAC,OAAS,GAAI9B,MAAJ,CAAW8B,SAAW7nC,SAAX,CAAuB6nC,MAAvB,CAAgC,QAA3C,CAAT,CAEA,GAAIlQ,UAAW,EAAf,CACA,GAAIif,QAAS,EAAb,CAEA,GAAIh9C,EAAJ,CAAOE,CAAP,CACA,GAAIqN,EAAJ,CAAOyE,CAAP,CAAUstB,CAAV,CAAa3L,CAAb,CAAgBzxB,KAAhB,CAEA;AAEA,IAAM8P,EAAI,CAAV,CAAaA,GAAK2zH,OAAlB,CAA2B3zH,GAA3B,CAAkC,CAE9BzE,EAAMyE,EAAI2zH,OAAN,EAAoBjiI,KAAKC,EAAL,CAAU,CAA9B,CAAJ,CAEA3D,EAAI0D,KAAK0S,GAAL,CAAU7I,CAAV,EAAgB5C,MAApB,CACAzK,EAAIwD,KAAKyS,GAAL,CAAU5I,CAAV,EAAgB5C,MAApB,CAEAozB,SAASl7B,IAAT,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,EACAk7B,SAASl7B,IAAT,CAAe7C,CAAf,CAAkB,CAAlB,CAAqBE,CAArB,EAEAgC,MAAU8P,EAAI,CAAN,CAAYg8B,MAAZ,CAAqBC,MAA7B,CAEA+O,OAAOn6C,IAAP,CAAaX,MAAMyxB,CAAnB,CAAsBzxB,MAAMo1B,CAA5B,CAA+Bp1B,MAAM+U,CAArC,EACA+lC,OAAOn6C,IAAP,CAAaX,MAAMyxB,CAAnB,CAAsBzxB,MAAMo1B,CAA5B,CAA+Bp1B,MAAM+U,CAArC,EAEH,CAED;AAEA,IAAMjF,EAAI,CAAV,CAAaA,GAAK4zH,OAAlB,CAA2B5zH,GAA3B,CAAkC,CAE9B9P,MAAU8P,EAAI,CAAN,CAAYg8B,MAAZ,CAAqBC,MAA7B,CAEAta,EAAIhpB,OAAWA,OAASi7H,OAAT,CAAmB5zH,CAAlC,CAEA,IAAMstB,EAAI,CAAV,CAAaA,EAAIowE,SAAjB,CAA4BpwE,GAA5B,CAAmC,CAE/B;AAEA/xB,EAAM+xB,EAAIowE,SAAN,EAAsBhsG,KAAKC,EAAL,CAAU,CAAhC,CAAJ,CAEA3D,EAAI0D,KAAK0S,GAAL,CAAU7I,CAAV,EAAgBomB,CAApB,CACAzzB,EAAIwD,KAAKyS,GAAL,CAAU5I,CAAV,EAAgBomB,CAApB,CAEAoK,SAASl7B,IAAT,CAAe7C,CAAf,CAAkB,CAAlB,CAAqBE,CAArB,EACA88C,OAAOn6C,IAAP,CAAaX,MAAMyxB,CAAnB,CAAsBzxB,MAAMo1B,CAA5B,CAA+Bp1B,MAAM+U,CAArC,EAEA;AAEA1J,EAAM,CAAE+xB,EAAI,CAAN,EAAYowE,SAAd,EAA8BhsG,KAAKC,EAAL,CAAU,CAAxC,CAAJ,CAEA3D,EAAI0D,KAAK0S,GAAL,CAAU7I,CAAV,EAAgBomB,CAApB,CACAzzB,EAAIwD,KAAKyS,GAAL,CAAU5I,CAAV,EAAgBomB,CAApB,CAEAoK,SAASl7B,IAAT,CAAe7C,CAAf,CAAkB,CAAlB,CAAqBE,CAArB,EACA88C,OAAOn6C,IAAP,CAAaX,MAAMyxB,CAAnB,CAAsBzxB,MAAMo1B,CAA5B,CAA+Bp1B,MAAM+U,CAArC,EAEH,CAEJ,CAED,GAAI4mB,UAAW,GAAIuoB,eAAJ,EAAf,CACAvoB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAAnC,EACAF,SAAS4oB,YAAT,CAAuB,OAAvB,CAAgC,GAAIpB,uBAAJ,CAA4BrI,MAA5B,CAAoC,CAApC,CAAhC,EAEA,GAAI5B,UAAW,GAAIutB,kBAAJ,CAAuB,CAAE9rB,aAAc/hC,YAAhB,CAAvB,CAAf,CAEA66E,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmCud,QAAnC,EAEH,CAEDsqF,gBAAgB70H,SAAhB,CAA4BC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAA5B,CACA60H,gBAAgB70H,SAAhB,CAA0BI,WAA1B,CAAwCy0H,eAAxC,CAEA;;;OAKA,QAASG,kBAAT,CAA4B3/H,MAA5B,CAAoC82B,IAApC,CAA0CuP,GAA1C,CAA+Cyf,SAA/C,CAA2D,CAEvD;AAEA,KAAK9lD,MAAL,CAAcA,MAAd,CAEA,KAAK82B,IAAL,CAAcA,OAAS52B,SAAX,CAAyB42B,IAAzB,CAAgC,CAA5C,CAEA,GAAI96B,OAAUqqC,MAAQnmC,SAAV,CAAwBmmC,GAAxB,CAA8B,QAA1C,CAEA,GAAIjrC,OAAU0qD,YAAc5lD,SAAhB,CAA8B4lD,SAA9B,CAA0C,CAAtD,CAEA;AAEA,GAAIw4E,UAAW,CAAf,CAEA,GAAIC,aAAc,KAAKv+H,MAAL,CAAY23B,QAA9B,CAEA,GAAK4mG,aAAeA,YAAY3mG,UAAhC,CAA6C,CAEzC0mG,SAAWC,YAAYxnF,KAAZ,CAAkB7uC,MAA7B,CAEH,CAJD,IAIO,CAEHzJ,QAAQgK,IAAR,CAAc,oGAAd,EAEH,CAED;AAEA,GAAIkvB,UAAW,GAAIuoB,eAAJ,EAAf,CAEA,GAAI7H,WAAY,GAAI8G,uBAAJ,CAA4Bm/E,SAAW,CAAX,CAAe,CAA3C,CAA8C,CAA9C,CAAhB,CAEA3mG,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmClI,SAAnC,EAEAo3C,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmC,GAAI8qC,kBAAJ,CAAuB,CAAEzmE,MAAOA,KAAT,CAAgB8pD,UAAW1qD,KAA3B,CAAvB,CAAnC,EAEA;AAEA,KAAKw3B,gBAAL,CAAwB,KAAxB,CACA,KAAK30B,MAAL,GAEH,CAED0hI,kBAAkBh1H,SAAlB,CAA8BC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAA9B,CACAg1H,kBAAkBh1H,SAAlB,CAA4BI,WAA5B,CAA0C40H,iBAA1C,CAEAA,kBAAkBh1H,SAAlB,CAA4B1M,MAA5B,CAAuC,UAAY,CAE/C,GAAI6T,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIygB,IAAK,GAAIzgB,QAAJ,EAAT,CACA,GAAIk8B,cAAe,GAAIrL,QAAJ,EAAnB,CAEA,MAAO,SAAShzB,OAAT,EAAkB,CAErB,KAAK+B,MAAL,CAAYg4B,iBAAZ,CAA+B,IAA/B,EAEAsE,aAAajL,eAAb,CAA8B,KAAKrxB,MAAL,CAAY2vB,WAA1C,EAEA,GAAIA,aAAc,KAAK3vB,MAAL,CAAY2vB,WAA9B,CAEA,GAAI91B,UAAW,KAAK89B,QAAL,CAAcI,UAAd,CAAyBl+B,QAAxC,CAEA;AAEA,GAAI0kI,aAAc,KAAKv+H,MAAL,CAAY23B,QAA9B,CAEA,GAAIE,UAAW0mG,YAAY1mG,QAA3B,CAEA,GAAIkf,OAAQwnF,YAAYxnF,KAAxB,CAEA,GAAI4E,KAAM,CAAV,CAEA,IAAM,GAAI7vC,GAAI,CAAR,CAAW6H,EAAIojC,MAAM7uC,MAA3B,CAAmC4D,EAAI6H,CAAvC,CAA0C7H,GAA1C,CAAiD,CAE7C,GAAIisC,MAAOhB,MAAOjrC,CAAP,CAAX,CAEA,GAAI2kB,QAASsnB,KAAKtnB,MAAlB,CAEA3e,GAAG/O,IAAH,CAAS80B,SAAUkgB,KAAKrmC,CAAf,CAAT,EACKpW,GADL,CACUu8B,SAAUkgB,KAAKhnC,CAAf,CADV,EAEKzV,GAFL,CAEUu8B,SAAUkgB,KAAKz2B,CAAf,CAFV,EAGK9B,YAHL,CAGmB,CAHnB,EAIK4H,YAJL,CAImBuI,WAJnB,EAMA9O,GAAG9d,IAAH,CAAS0tB,MAAT,EAAkBhR,YAAlB,CAAgC6c,YAAhC,EAA+Chc,SAA/C,GAA2D7Y,cAA3D,CAA2E,KAAKqvB,IAAhF,EAAuFx7B,GAAvF,CAA4FwW,EAA5F,EAEAjY,SAASwtB,MAAT,CAAiBs0B,GAAjB,CAAsB7pC,GAAGhY,CAAzB,CAA4BgY,GAAG/X,CAA/B,CAAkC+X,GAAG9X,CAArC,EAEA2hD,IAAMA,IAAM,CAAZ,CAEA9hD,SAASwtB,MAAT,CAAiBs0B,GAAjB,CAAsB96B,GAAG/mB,CAAzB,CAA4B+mB,GAAG9mB,CAA/B,CAAkC8mB,GAAG7mB,CAArC,EAEA2hD,IAAMA,IAAM,CAAZ,CAEH,CAED9hD,SAASgnD,WAAT,CAAuB,IAAvB,CAEH,CA9CD,CAgDH,CAtDsC,EAAvC,CAwDA;;;;OAMA,QAAS++E,uBAAT,CAAiCn6D,KAAjC,CAAwC3uC,IAAxC,CAA8C96B,KAA9C,CAAsD,CAElDmB,SAASkR,IAAT,CAAe,IAAf,EAEA,KAAKo3D,KAAL,CAAaA,KAAb,CACA,KAAKA,KAAL,CAAWztC,iBAAX,GAEA,KAAK1vB,MAAL,CAAcm9D,MAAM91C,WAApB,CACA,KAAKiD,gBAAL,CAAwB,KAAxB,CAEA,KAAK52B,KAAL,CAAaA,KAAb,CAEA,GAAK86B,OAAS52B,SAAd,CAA0B42B,KAAO,CAAP,CAE1B,GAAIa,UAAW,GAAIuoB,eAAJ,EAAf,CACAvoB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4B,CAC3D,CAAEroB,IADyD,CACnDA,IADmD,CAC7C,CAD6C,CAE3DA,IAF2D,CAErDA,IAFqD,CAE/C,CAF+C,CAG3DA,IAH2D,CAGrD,CAAEA,IAHmD,CAG7C,CAH6C,CAI3D,CAAEA,IAJyD,CAInD,CAAEA,IAJiD,CAI3C,CAJ2C,CAK3D,CAAEA,IALyD,CAKnDA,IALmD,CAK7C,CAL6C,CAA5B,CAMhC,CANgC,CAAnC,EAQA,GAAIoe,UAAW,GAAIutB,kBAAJ,CAAuB,CAAEn4B,IAAK,KAAP,CAAvB,CAAf,CAEA,KAAKu1F,UAAL,CAAkB,GAAIrwC,KAAJ,CAAU73D,QAAV,CAAoBud,QAApB,CAAlB,CACA,KAAK55C,GAAL,CAAU,KAAKukI,UAAf,EAEAloG,SAAW,GAAIuoB,eAAJ,EAAX,CACAvoB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4B,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAA5B,CAAkD,CAAlD,CAAnC,EAEA,KAAK2gF,UAAL,CAAkB,GAAItwC,KAAJ,CAAU73D,QAAV,CAAoBud,QAApB,CAAlB,CACA,KAAK55C,GAAL,CAAU,KAAKwkI,UAAf,EAEA,KAAK7hI,MAAL,GAEH,CAED2hI,uBAAuBj1H,SAAvB,CAAmCC,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAnC,CACAi1H,uBAAuBj1H,SAAvB,CAAiCI,WAAjC,CAA+C60H,sBAA/C,CAEAA,uBAAuBj1H,SAAvB,CAAiCxF,OAAjC,CAA2C,UAAY,CAEnD,KAAK06H,UAAL,CAAgBloG,QAAhB,CAAyBxyB,OAAzB,GACA,KAAK06H,UAAL,CAAgB3qF,QAAhB,CAAyB/vC,OAAzB,GACA,KAAK26H,UAAL,CAAgBnoG,QAAhB,CAAyBxyB,OAAzB,GACA,KAAK26H,UAAL,CAAgB5qF,QAAhB,CAAyB/vC,OAAzB,GAEH,CAPD,CASAy6H,uBAAuBj1H,SAAvB,CAAiC1M,MAAjC,CAA0C,UAAY,CAElD,GAAI6T,IAAK,GAAI1R,QAAJ,EAAT,CACA,GAAIygB,IAAK,GAAIzgB,QAAJ,EAAT,CACA,GAAIqtG,IAAK,GAAIrtG,QAAJ,EAAT,CAEA,MAAO,SAASnC,OAAT,EAAkB,CAErB6T,GAAGif,qBAAH,CAA0B,KAAK00C,KAAL,CAAW91C,WAArC,EACA9O,GAAGkQ,qBAAH,CAA0B,KAAK00C,KAAL,CAAWlqE,MAAX,CAAkBo0B,WAA5C,EACA89E,GAAGrkG,UAAH,CAAeyX,EAAf,CAAmB/O,EAAnB,EAEA,KAAK+tH,UAAL,CAAgBh7H,MAAhB,CAAwB4oG,EAAxB,EAEA,GAAK,KAAKzxG,KAAL,GAAekE,SAApB,CAAgC,CAE5B,KAAK2/H,UAAL,CAAgB3qF,QAAhB,CAAyBl5C,KAAzB,CAA+BrB,GAA/B,CAAoC,KAAKqB,KAAzC,EACA,KAAK8jI,UAAL,CAAgB5qF,QAAhB,CAAyBl5C,KAAzB,CAA+BrB,GAA/B,CAAoC,KAAKqB,KAAzC,EAEH,CALD,IAKO,CAEH,KAAK6jI,UAAL,CAAgB3qF,QAAhB,CAAyBl5C,KAAzB,CAA+B+G,IAA/B,CAAqC,KAAK0iE,KAAL,CAAWzpE,KAAhD,EACA,KAAK8jI,UAAL,CAAgB5qF,QAAhB,CAAyBl5C,KAAzB,CAA+B+G,IAA/B,CAAqC,KAAK0iE,KAAL,CAAWzpE,KAAhD,EAEH,CAED,KAAK8jI,UAAL,CAAgBj7H,MAAhB,CAAwB4oG,EAAxB,EACA,KAAKqyB,UAAL,CAAgBp7H,KAAhB,CAAsB1K,CAAtB,CAA0ByzG,GAAGvlG,MAAH,EAA1B,CAEH,CAvBD,CAyBH,CA/ByC,EAA1C,CAiCA;;;;;;;;OAUA,QAASvM,aAAT,CAAuB5D,MAAvB,CAAgC,CAE5B,GAAI4/B,UAAW,GAAIuoB,eAAJ,EAAf,CACA,GAAIhL,UAAW,GAAIutB,kBAAJ,CAAuB,CAAEzmE,MAAO,QAAT,CAAmB26C,aAAchiC,UAAjC,CAAvB,CAAf,CAEA,GAAIkjB,UAAW,EAAf,CACA,GAAIif,QAAS,EAAb,CAEA,GAAIipF,UAAW,EAAf,CAEA;AAEA,GAAIC,cAAe,GAAI/5F,MAAJ,CAAW,QAAX,CAAnB,CACA,GAAIg6F,WAAY,GAAIh6F,MAAJ,CAAW,QAAX,CAAhB,CACA,GAAIi6F,SAAU,GAAIj6F,MAAJ,CAAW,QAAX,CAAd,CACA,GAAIk6F,aAAc,GAAIl6F,MAAJ,CAAW,QAAX,CAAlB,CACA,GAAIm6F,YAAa,GAAIn6F,MAAJ,CAAW,QAAX,CAAjB,CAEA;AAEAo6F,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EAEA;AAEAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EAEA;AAEAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EACAK,QAAS,IAAT,CAAe,IAAf,CAAqBL,YAArB,EAEA;AAEAK,QAAS,GAAT,CAAc,IAAd,CAAoBJ,SAApB,EACAI,QAAS,GAAT,CAAc,IAAd,CAAoBJ,SAApB,EACAI,QAAS,GAAT,CAAc,IAAd,CAAoBJ,SAApB,EACAI,QAAS,GAAT,CAAc,IAAd,CAAoBJ,SAApB,EAEA;AAEAI,QAAS,IAAT,CAAe,IAAf,CAAqBH,OAArB,EACAG,QAAS,IAAT,CAAe,IAAf,CAAqBH,OAArB,EACAG,QAAS,IAAT,CAAe,IAAf,CAAqBH,OAArB,EAEA;AAEAG,QAAS,GAAT,CAAc,GAAd,CAAmBF,WAAnB,EACAE,QAAS,GAAT,CAAc,GAAd,CAAmBD,UAAnB,EAEA;AAEAC,QAAS,KAAT,CAAgB,KAAhB,CAAuBD,UAAvB,EACAC,QAAS,KAAT,CAAgB,KAAhB,CAAuBD,UAAvB,EAEAC,QAAS,KAAT,CAAgB,KAAhB,CAAuBD,UAAvB,EACAC,QAAS,KAAT,CAAgB,KAAhB,CAAuBD,UAAvB,EAEA,QAASC,QAAT,CAAkB3uH,CAAlB,CAAqBX,CAArB,CAAwB/U,KAAxB,CAAgC,CAE5BskI,SAAU5uH,CAAV,CAAa1V,KAAb,EACAskI,SAAUvvH,CAAV,CAAa/U,KAAb,EAEH,CAED,QAASskI,SAAT,CAAmBhoI,EAAnB,CAAuB0D,KAAvB,CAA+B,CAE3B67B,SAASl7B,IAAT,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,EACAm6C,OAAOn6C,IAAP,CAAaX,MAAMyxB,CAAnB,CAAsBzxB,MAAMo1B,CAA5B,CAA+Bp1B,MAAM+U,CAArC,EAEA,GAAKgvH,SAAUznI,EAAV,IAAmB4H,SAAxB,CAAoC,CAEhC6/H,SAAUznI,EAAV,EAAiB,EAAjB,CAEH,CAEDynI,SAAUznI,EAAV,EAAeqE,IAAf,CAAuBk7B,SAAS3vB,MAAT,CAAkB,CAApB,CAA0B,CAA/C,EAEH,CAEDyvB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAAnC,EACAF,SAAS4oB,YAAT,CAAuB,OAAvB,CAAgC,GAAIpB,uBAAJ,CAA4BrI,MAA5B,CAAoC,CAApC,CAAhC,EAEA24C,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmCud,QAAnC,EAEA,KAAKn9C,MAAL,CAAcA,MAAd,CACA,GAAK,KAAKA,MAAL,CAAYkL,sBAAjB,CAA0C,KAAKlL,MAAL,CAAYkL,sBAAZ,GAE1C,KAAKqF,MAAL,CAAcvQ,OAAO43B,WAArB,CACA,KAAKiD,gBAAL,CAAwB,KAAxB,CAEA,KAAKmtG,QAAL,CAAgBA,QAAhB,CAEA,KAAK9hI,MAAL,GAEH,CAEDtC,aAAagP,SAAb,CAAyBC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAAzB,CACAhP,aAAagP,SAAb,CAAuBI,WAAvB,CAAqCpP,YAArC,CAEAA,aAAagP,SAAb,CAAuB1M,MAAvB,CAAgC,UAAY,CAExC,GAAI05B,SAAJ,CAAcooG,QAAd,CAEA,GAAI31G,QAAS,GAAIhqB,QAAJ,EAAb,CACA,GAAIrI,QAAS,GAAI29C,OAAJ,EAAb,CAEA,QAAS6qF,SAAT,CAAmBjpG,KAAnB,CAA0Bx9B,CAA1B,CAA6BC,CAA7B,CAAgCC,CAAhC,CAAoC,CAEhCowB,OAAOzvB,GAAP,CAAYb,CAAZ,CAAeC,CAAf,CAAkBC,CAAlB,EAAsB41B,SAAtB,CAAiC73B,MAAjC,EAEA,GAAI0+B,QAASspG,SAAUzoG,KAAV,CAAb,CAEA,GAAKb,SAAWv2B,SAAhB,CAA4B,CAExB,GAAIrG,UAAW89B,SAAS6oB,YAAT,CAAuB,UAAvB,CAAf,CAEA,IAAM,GAAI10C,GAAI,CAAR,CAAW6H,EAAI8iB,OAAOvuB,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9CjS,SAASwtB,MAAT,CAAiBoP,OAAQ3qB,CAAR,CAAjB,CAA8Bse,OAAOtwB,CAArC,CAAwCswB,OAAOrwB,CAA/C,CAAkDqwB,OAAOpwB,CAAzD,EAEH,CAEJ,CAEJ,CAED,MAAO,SAASiE,OAAT,EAAkB,CAErB05B,SAAW,KAAKA,QAAhB,CACAooG,SAAW,KAAKA,QAAhB,CAEA,GAAI9gH,GAAI,CAAR,CAAW2L,EAAI,CAAf,CAEA;AACA;AAEA7yB,OAAO23B,gBAAP,CAAwB3sB,IAAxB,CAA8B,KAAKhL,MAAL,CAAY23B,gBAA1C,EAEA;AAEA6wG,SAAU,GAAV,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAAE,CAAvB,EACAA,SAAU,GAAV,CAAe,CAAf,CAAkB,CAAlB,CAAqB,CAArB,EAEA;AAEAA,SAAU,IAAV,CAAgB,CAAEthH,CAAlB,CAAqB,CAAE2L,CAAvB,CAA0B,CAAE,CAA5B,EACA21G,SAAU,IAAV,CAAgBthH,CAAhB,CAAmB,CAAE2L,CAArB,CAAwB,CAAE,CAA1B,EACA21G,SAAU,IAAV,CAAgB,CAAEthH,CAAlB,CAAqB2L,CAArB,CAAwB,CAAE,CAA1B,EACA21G,SAAU,IAAV,CAAgBthH,CAAhB,CAAmB2L,CAAnB,CAAsB,CAAE,CAAxB,EAEA;AAEA21G,SAAU,IAAV,CAAgB,CAAEthH,CAAlB,CAAqB,CAAE2L,CAAvB,CAA0B,CAA1B,EACA21G,SAAU,IAAV,CAAgBthH,CAAhB,CAAmB,CAAE2L,CAArB,CAAwB,CAAxB,EACA21G,SAAU,IAAV,CAAgB,CAAEthH,CAAlB,CAAqB2L,CAArB,CAAwB,CAAxB,EACA21G,SAAU,IAAV,CAAgBthH,CAAhB,CAAmB2L,CAAnB,CAAsB,CAAtB,EAEA;AAEA21G,SAAU,IAAV,CAAgBthH,EAAI,GAApB,CAAyB2L,EAAI,GAA7B,CAAkC,CAAE,CAApC,EACA21G,SAAU,IAAV,CAAgB,CAAEthH,CAAF,CAAM,GAAtB,CAA2B2L,EAAI,GAA/B,CAAoC,CAAE,CAAtC,EACA21G,SAAU,IAAV,CAAgB,CAAhB,CAAmB31G,EAAI,CAAvB,CAA0B,CAAE,CAA5B,EAEA;AAEA21G,SAAU,KAAV,CAAiB,CAAEthH,CAAnB,CAAsB,CAAtB,CAAyB,CAAzB,EACAshH,SAAU,KAAV,CAAiBthH,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,EACAshH,SAAU,KAAV,CAAiB,CAAjB,CAAoB,CAAE31G,CAAtB,CAAyB,CAAzB,EACA21G,SAAU,KAAV,CAAiB,CAAjB,CAAoB31G,CAApB,CAAuB,CAAvB,EAEA21G,SAAU,KAAV,CAAiB,CAAEthH,CAAnB,CAAsB,CAAtB,CAAyB,CAAE,CAA3B,EACAshH,SAAU,KAAV,CAAiBthH,CAAjB,CAAoB,CAApB,CAAuB,CAAE,CAAzB,EACAshH,SAAU,KAAV,CAAiB,CAAjB,CAAoB,CAAE31G,CAAtB,CAAyB,CAAE,CAA3B,EACA21G,SAAU,KAAV,CAAiB,CAAjB,CAAoB31G,CAApB,CAAuB,CAAE,CAAzB,EAEA+M,SAAS6oB,YAAT,CAAuB,UAAvB,EAAoCK,WAApC,CAAkD,IAAlD,CAEH,CAnDD,CAqDH,CAhF+B,EAAhC,CAkFA;;;OAKA,QAAS2/E,UAAT,CAAoBxgI,MAApB,CAA4BhE,KAA5B,CAAoC,CAEhC,KAAKgE,MAAL,CAAcA,MAAd,CAEA,GAAKhE,QAAUkE,SAAf,CAA2BlE,MAAQ,QAAR,CAE3B,GAAIo8C,SAAU,GAAI9I,YAAJ,CAAiB,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgC,CAAhC,CAAmC,CAAnC,CAAsC,CAAtC,CAAyC,CAAzC,CAA4C,CAA5C,CAA+C,CAA/C,CAAkD,CAAlD,CAAqD,CAArD,CAAwD,CAAxD,CAA2D,CAA3D,CAA8D,CAA9D,CAAiE,CAAjE,CAAoE,CAApE,CAAuE,CAAvE,CAAjB,CAAd,CACA,GAAI+I,WAAY,GAAIjJ,aAAJ,CAAkB,EAAI,CAAtB,CAAhB,CAEA,GAAIzX,UAAW,GAAIuoB,eAAJ,EAAf,CACAvoB,SAAS2oB,QAAT,CAAmB,GAAI7C,gBAAJ,CAAqBrF,OAArB,CAA8B,CAA9B,CAAnB,EACAzgB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAI9C,gBAAJ,CAAqBpF,SAArB,CAAgC,CAAhC,CAAnC,EAEAo3C,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmC,GAAI8qC,kBAAJ,CAAuB,CAAEzmE,MAAOA,KAAT,CAAvB,CAAnC,EAEA,KAAK42B,gBAAL,CAAwB,KAAxB,CAEA,KAAK30B,MAAL,GAEH,CAEDuiI,UAAU71H,SAAV,CAAsBC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAAtB,CACA61H,UAAU71H,SAAV,CAAoBI,WAApB,CAAkCy1H,SAAlC,CAEAA,UAAU71H,SAAV,CAAoB1M,MAApB,CAA+B,UAAY,CAEvC,GAAIi5B,KAAM,GAAIpB,KAAJ,EAAV,CAEA,MAAO,SAAS73B,OAAT,CAAiB+B,MAAjB,CAA0B,CAE7B,GAAKA,SAAWE,SAAhB,CAA4B,CAExBzB,QAAQgK,IAAR,CAAc,qDAAd,EAEH,CAED,GAAK,KAAKzI,MAAL,GAAgBE,SAArB,CAAiC,CAE7Bg3B,IAAIF,aAAJ,CAAmB,KAAKh3B,MAAxB,EAEH,CAED,GAAKk3B,IAAIC,OAAJ,EAAL,CAAqB,OAErB,GAAI5yB,KAAM2yB,IAAI3yB,GAAd,CACA,GAAID,KAAM4yB,IAAI5yB,GAAd,CAEA;;;;;;;;;;;;;;KAgBA,GAAIzK,UAAW,KAAK89B,QAAL,CAAcI,UAAd,CAAyBl+B,QAAxC,CACA,GAAI4Z,OAAQ5Z,SAAS4Z,KAArB,CAEAA,MAAO,CAAP,EAAanP,IAAIxK,CAAjB,CAAoB2Z,MAAO,CAAP,EAAanP,IAAIvK,CAAjB,CAAoB0Z,MAAO,CAAP,EAAanP,IAAItK,CAAjB,CACxCyZ,MAAO,CAAP,EAAalP,IAAIzK,CAAjB,CAAoB2Z,MAAO,CAAP,EAAanP,IAAIvK,CAAjB,CAAoB0Z,MAAO,CAAP,EAAanP,IAAItK,CAAjB,CACxCyZ,MAAO,CAAP,EAAalP,IAAIzK,CAAjB,CAAoB2Z,MAAO,CAAP,EAAalP,IAAIxK,CAAjB,CAAoB0Z,MAAO,CAAP,EAAanP,IAAItK,CAAjB,CACxCyZ,MAAO,CAAP,EAAanP,IAAIxK,CAAjB,CAAoB2Z,MAAO,EAAP,EAAclP,IAAIxK,CAAlB,CAAqB0Z,MAAO,EAAP,EAAcnP,IAAItK,CAAlB,CACzCyZ,MAAO,EAAP,EAAcnP,IAAIxK,CAAlB,CAAqB2Z,MAAO,EAAP,EAAcnP,IAAIvK,CAAlB,CAAqB0Z,MAAO,EAAP,EAAclP,IAAIvK,CAAlB,CAC1CyZ,MAAO,EAAP,EAAclP,IAAIzK,CAAlB,CAAqB2Z,MAAO,EAAP,EAAcnP,IAAIvK,CAAlB,CAAqB0Z,MAAO,EAAP,EAAclP,IAAIvK,CAAlB,CAC1CyZ,MAAO,EAAP,EAAclP,IAAIzK,CAAlB,CAAqB2Z,MAAO,EAAP,EAAclP,IAAIxK,CAAlB,CAAqB0Z,MAAO,EAAP,EAAclP,IAAIvK,CAAlB,CAC1CyZ,MAAO,EAAP,EAAcnP,IAAIxK,CAAlB,CAAqB2Z,MAAO,EAAP,EAAclP,IAAIxK,CAAlB,CAAqB0Z,MAAO,EAAP,EAAclP,IAAIvK,CAAlB,CAE1CH,SAASgnD,WAAT,CAAuB,IAAvB,CAEA,KAAKlpB,QAAL,CAAcqG,qBAAd,GAEH,CAnDD,CAqDH,CAzD4B,EAA7B,CA2DAwiG,UAAU71H,SAAV,CAAoBqsB,aAApB,CAAoC,SAAWh3B,MAAX,CAAoB,CAEpD,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAK/B,MAAL,GAEA,MAAO,KAAP,CAEH,CAPD,CASA;;OAIA,QAASwiI,WAAT,CAAqBvpG,GAArB,CAA0BmP,GAA1B,CAAgC,CAE5B,KAAKxgC,IAAL,CAAY,YAAZ,CAEA,KAAKqxB,GAAL,CAAWA,GAAX,CAEA,GAAIl7B,OAAUqqC,MAAQnmC,SAAV,CAAwBmmC,GAAxB,CAA8B,QAA1C,CAEA,GAAI+R,SAAU,GAAI9I,YAAJ,CAAiB,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAAoB,CAApB,CAAuB,CAAvB,CAA0B,CAA1B,CAA6B,CAA7B,CAAgC,CAAhC,CAAmC,CAAnC,CAAsC,CAAtC,CAAyC,CAAzC,CAA4C,CAA5C,CAA+C,CAA/C,CAAkD,CAAlD,CAAqD,CAArD,CAAwD,CAAxD,CAA2D,CAA3D,CAA8D,CAA9D,CAAiE,CAAjE,CAAoE,CAApE,CAAuE,CAAvE,CAAjB,CAAd,CAEA,GAAI+I,WAAY,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAE,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAE,CAAxB,CAA2B,CAAE,CAA7B,CAAgC,CAAhC,CAAmC,CAAnC,CAAsC,CAAE,CAAxC,CAA2C,CAA3C,CAA8C,CAA9C,CAAiD,CAAjD,CAAoD,CAAE,CAAtD,CAAyD,CAAE,CAA3D,CAA8D,CAA9D,CAAiE,CAAE,CAAnE,CAAsE,CAAE,CAAxE,CAA2E,CAAE,CAA7E,CAAgF,CAAE,CAAlF,CAAqF,CAArF,CAAwF,CAAE,CAA1F,CAA6F,CAAE,CAA/F,CAAhB,CAEA,GAAI1gB,UAAW,GAAIuoB,eAAJ,EAAf,CAEAvoB,SAAS2oB,QAAT,CAAmB,GAAI7C,gBAAJ,CAAqBrF,OAArB,CAA8B,CAA9B,CAAnB,EAEAzgB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4B9G,SAA5B,CAAuC,CAAvC,CAAnC,EAEAo3C,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmC,GAAI8qC,kBAAJ,CAAuB,CAAEzmE,MAAOA,KAAT,CAAvB,CAAnC,EAEA,KAAK27B,QAAL,CAAcqG,qBAAd,GAEH,CAEDyiG,WAAW91H,SAAX,CAAuBC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAAvB,CACA81H,WAAW91H,SAAX,CAAqBI,WAArB,CAAmC01H,UAAnC,CAEAA,WAAW91H,SAAX,CAAqBqtB,iBAArB,CAAyC,SAAWwc,KAAX,CAAmB,CAExD,GAAItd,KAAM,KAAKA,GAAf,CAEA,GAAKA,IAAIC,OAAJ,EAAL,CAAqB,OAErBD,IAAIE,SAAJ,CAAe,KAAKv9B,QAApB,EAEAq9B,IAAIG,OAAJ,CAAa,KAAK3yB,KAAlB,EAEA,KAAKA,KAAL,CAAW+C,cAAX,CAA2B,GAA3B,EAEAtK,SAASwN,SAAT,CAAmBqtB,iBAAnB,CAAqC3pB,IAArC,CAA2C,IAA3C,CAAiDmmC,KAAjD,EAEH,CAdD,CAgBA;;OAIA,QAASksF,YAAT,CAAsBzoI,KAAtB,CAA6B6+B,IAA7B,CAAmCuP,GAAnC,CAAyC,CAErC,KAAKxgC,IAAL,CAAY,aAAZ,CAEA,KAAK5N,KAAL,CAAaA,KAAb,CAEA,KAAK6+B,IAAL,CAAcA,OAAS52B,SAAX,CAAyB,CAAzB,CAA6B42B,IAAzC,CAEA,GAAI96B,OAAUqqC,MAAQnmC,SAAV,CAAwBmmC,GAAxB,CAA8B,QAA1C,CAEA,GAAIgS,WAAY,CAAE,CAAF,CAAK,CAAE,CAAP,CAAU,CAAV,CAAa,CAAE,CAAf,CAAkB,CAAlB,CAAqB,CAArB,CAAwB,CAAE,CAA1B,CAA6B,CAAE,CAA/B,CAAkC,CAAlC,CAAqC,CAArC,CAAwC,CAAxC,CAA2C,CAA3C,CAA8C,CAAE,CAAhD,CAAmD,CAAnD,CAAsD,CAAtD,CAAyD,CAAE,CAA3D,CAA8D,CAAE,CAAhE,CAAmE,CAAnE,CAAsE,CAAtE,CAAyE,CAAE,CAA3E,CAA8E,CAA9E,CAAiF,CAAjF,CAAoF,CAApF,CAAuF,CAAvF,CAA0F,CAA1F,CAA6F,CAA7F,CAAgG,CAAhG,CAAmG,CAAnG,CAAsG,CAAtG,CAAyG,CAAzG,CAAhB,CAEA,GAAI1gB,UAAW,GAAIuoB,eAAJ,EAAf,CACAvoB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4B9G,SAA5B,CAAuC,CAAvC,CAAnC,EACA1gB,SAASqG,qBAAT,GAEAwxD,KAAKnhF,IAAL,CAAW,IAAX,CAAiBspB,QAAjB,CAA2B,GAAI8qC,kBAAJ,CAAuB,CAAEzmE,MAAOA,KAAT,CAAvB,CAA3B,EAEA;AAEA,GAAI2kI,YAAa,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAE,CAAb,CAAgB,CAAhB,CAAmB,CAAnB,CAAsB,CAAE,CAAxB,CAA2B,CAAE,CAA7B,CAAgC,CAAhC,CAAmC,CAAnC,CAAsC,CAAtC,CAAyC,CAAzC,CAA4C,CAAE,CAA9C,CAAiD,CAAE,CAAnD,CAAsD,CAAtD,CAAyD,CAAzD,CAA4D,CAAE,CAA9D,CAAiE,CAAjE,CAAjB,CAEA,GAAI3+E,WAAY,GAAI9B,eAAJ,EAAhB,CACA8B,UAAUzB,YAAV,CAAwB,UAAxB,CAAoC,GAAIpB,uBAAJ,CAA4BwhF,UAA5B,CAAwC,CAAxC,CAApC,EACA3+E,UAAUhkB,qBAAV,GAEA,KAAK1iC,GAAL,CAAU,GAAIW,KAAJ,CAAU+lD,SAAV,CAAqB,GAAIuE,kBAAJ,CAAuB,CAAEvqD,MAAOA,KAAT,CAAgBksC,QAAS,GAAzB,CAA8B8b,YAAa,IAA3C,CAAiDS,WAAY,KAA7D,CAAvB,CAArB,CAAV,EAEH,CAEDi8E,YAAY/1H,SAAZ,CAAwBC,OAAOC,MAAP,CAAe2kF,KAAK7kF,SAApB,CAAxB,CACA+1H,YAAY/1H,SAAZ,CAAsBI,WAAtB,CAAoC21H,WAApC,CAEAA,YAAY/1H,SAAZ,CAAsBqtB,iBAAtB,CAA0C,SAAWwc,KAAX,CAAmB,CAEzD,GAAI9vC,OAAQ,CAAE,KAAKzM,KAAL,CAAWygC,QAAzB,CAEA,GAAKl7B,KAAK6iB,GAAL,CAAU3b,KAAV,EAAoB,IAAzB,CAAgCA,MAAQ,IAAR,CAAc;AAE9C,KAAKA,KAAL,CAAW/J,GAAX,CAAgB,IAAM,KAAKm8B,IAA3B,CAAiC,IAAM,KAAKA,IAA5C,CAAkDpyB,KAAlD,EAEA,KAAKqtC,QAAL,CAAe,CAAf,EAAmBmD,QAAnB,CAA4B6O,IAA5B,CAAqCr/C,MAAQ,CAAV,CAAgB6P,QAAhB,CAA2BD,SAA9D,CAAyE;AAEzE,KAAKzP,MAAL,CAAa,KAAK5M,KAAL,CAAWw4B,MAAxB,EAEAtzB,SAASwN,SAAT,CAAmBqtB,iBAAnB,CAAqC3pB,IAArC,CAA2C,IAA3C,CAAiDmmC,KAAjD,EAEH,CAdD,CAgBA;;;;;;;;;;;;;;OAgBA,GAAIosF,aAAJ,CAAkBC,YAAlB,CAEA,QAASC,YAAT,CAAsB70G,GAAtB,CAA2Bs7B,MAA3B,CAAmCr/C,MAAnC,CAA2ClM,KAA3C,CAAkD+kI,UAAlD,CAA8DC,SAA9D,CAA0E,CAEtE;AAEA7jI,SAASkR,IAAT,CAAe,IAAf,EAEA,GAAKrS,QAAUkE,SAAf,CAA2BlE,MAAQ,QAAR,CAC3B,GAAKkM,SAAWhI,SAAhB,CAA4BgI,OAAS,CAAT,CAC5B,GAAK64H,aAAe7gI,SAApB,CAAgC6gI,WAAa,IAAM74H,MAAnB,CAChC,GAAK84H,YAAc9gI,SAAnB,CAA+B8gI,UAAY,IAAMD,UAAlB,CAE/B,GAAKH,eAAiB1gI,SAAtB,CAAkC,CAE9B0gI,aAAe,GAAI1gF,eAAJ,EAAf,CACA0gF,aAAargF,YAAb,CAA2B,UAA3B,CAAuC,GAAIpB,uBAAJ,CAA4B,CAAE,CAAF,CAAK,CAAL,CAAQ,CAAR,CAAW,CAAX,CAAc,CAAd,CAAiB,CAAjB,CAA5B,CAAkD,CAAlD,CAAvC,EAEA0hF,aAAe,GAAIx9B,uBAAJ,CAA4B,CAA5B,CAA+B,GAA/B,CAAoC,CAApC,CAAuC,CAAvC,CAA0C,CAA1C,CAAf,CACAw9B,aAAajvG,SAAb,CAAwB,CAAxB,CAA2B,CAAE,GAA7B,CAAkC,CAAlC,EAEH,CAED,KAAK/3B,QAAL,CAAckJ,IAAd,CAAoBwkD,MAApB,EAEA,KAAK3rB,IAAL,CAAY,GAAI4zD,KAAJ,CAAUoxC,YAAV,CAAwB,GAAIn+D,kBAAJ,CAAuB,CAAEzmE,MAAOA,KAAT,CAAvB,CAAxB,CAAZ,CACA,KAAK4/B,IAAL,CAAUhJ,gBAAV,CAA6B,KAA7B,CACA,KAAKt3B,GAAL,CAAU,KAAKsgC,IAAf,EAEA,KAAK+iG,IAAL,CAAY,GAAI1iI,KAAJ,CAAU4kI,YAAV,CAAwB,GAAIt6E,kBAAJ,CAAuB,CAAEvqD,MAAOA,KAAT,CAAvB,CAAxB,CAAZ,CACA,KAAK2iI,IAAL,CAAU/rG,gBAAV,CAA6B,KAA7B,CACA,KAAKt3B,GAAL,CAAU,KAAKqjI,IAAf,EAEA,KAAKsC,YAAL,CAAmBh1G,GAAnB,EACA,KAAKvL,SAAL,CAAgBxY,MAAhB,CAAwB64H,UAAxB,CAAoCC,SAApC,EAEH,CAEDF,YAAYn2H,SAAZ,CAAwBC,OAAOC,MAAP,CAAe1N,SAASwN,SAAxB,CAAxB,CACAm2H,YAAYn2H,SAAZ,CAAsBI,WAAtB,CAAoC+1H,WAApC,CAEAA,YAAYn2H,SAAZ,CAAsBs2H,YAAtB,CAAuC,UAAY,CAE/C,GAAIt4G,MAAO,GAAIvoB,QAAJ,EAAX,CACA,GAAI+d,QAAJ,CAEA,MAAO,SAAS8iH,aAAT,CAAuBh1G,GAAvB,CAA6B,CAEhC;AAEA,GAAKA,IAAIlyB,CAAJ,CAAQ,OAAb,CAAuB,CAEnB,KAAKmL,UAAL,CAAgBvK,GAAhB,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,EAEH,CAJD,IAIO,IAAKsxB,IAAIlyB,CAAJ,CAAQ,CAAE,OAAf,CAAyB,CAE5B,KAAKmL,UAAL,CAAgBvK,GAAhB,CAAqB,CAArB,CAAwB,CAAxB,CAA2B,CAA3B,CAA8B,CAA9B,EAEH,CAJM,IAIA,CAEHguB,KAAKhuB,GAAL,CAAUsxB,IAAIjyB,CAAd,CAAiB,CAAjB,CAAoB,CAAEiyB,IAAInyB,CAA1B,EAA8BwmB,SAA9B,GAEAnC,QAAU3gB,KAAKmzB,IAAL,CAAW1E,IAAIlyB,CAAf,CAAV,CAEA,KAAKmL,UAAL,CAAgB2nB,gBAAhB,CAAkClE,IAAlC,CAAwCxK,OAAxC,EAEH,CAEJ,CAtBD,CAwBH,CA7BsC,EAAvC,CA+BA2iH,YAAYn2H,SAAZ,CAAsB+V,SAAtB,CAAkC,SAAWxY,MAAX,CAAmB64H,UAAnB,CAA+BC,SAA/B,CAA2C,CAEzE,GAAKD,aAAe7gI,SAApB,CAAgC6gI,WAAa,IAAM74H,MAAnB,CAChC,GAAK84H,YAAc9gI,SAAnB,CAA+B8gI,UAAY,IAAMD,UAAlB,CAE/B,KAAKnlG,IAAL,CAAUl3B,KAAV,CAAgB/J,GAAhB,CAAqB,CAArB,CAAwB6C,KAAK8G,GAAL,CAAU,CAAV,CAAa4D,OAAS64H,UAAtB,CAAxB,CAA4D,CAA5D,EACA,KAAKnlG,IAAL,CAAUzI,YAAV,GAEA,KAAKwrG,IAAL,CAAUj6H,KAAV,CAAgB/J,GAAhB,CAAqBqmI,SAArB,CAAgCD,UAAhC,CAA4CC,SAA5C,EACA,KAAKrC,IAAL,CAAU9kI,QAAV,CAAmBE,CAAnB,CAAuBmO,MAAvB,CACA,KAAKy2H,IAAL,CAAUxrG,YAAV,GAEH,CAZD,CAcA2tG,YAAYn2H,SAAZ,CAAsBu2H,QAAtB,CAAiC,SAAWllI,KAAX,CAAmB,CAEhD,KAAK4/B,IAAL,CAAUsZ,QAAV,CAAmBl5C,KAAnB,CAAyB+G,IAAzB,CAA+B/G,KAA/B,EACA,KAAK2iI,IAAL,CAAUzpF,QAAV,CAAmBl5C,KAAnB,CAAyB+G,IAAzB,CAA+B/G,KAA/B,EAEH,CALD,CAOA;;;OAKA,QAASmlI,WAAT,CAAqBrqG,IAArB,CAA4B,CAExBA,KAAOA,MAAQ,CAAf,CAEA,GAAIe,UAAW,CACX,CADW,CACR,CADQ,CACL,CADK,CACFf,IADE,CACI,CADJ,CACO,CADP,CAEX,CAFW,CAER,CAFQ,CAEL,CAFK,CAEF,CAFE,CAECA,IAFD,CAEO,CAFP,CAGX,CAHW,CAGR,CAHQ,CAGL,CAHK,CAGF,CAHE,CAGC,CAHD,CAGIA,IAHJ,CAAf,CAMA,GAAIggB,QAAS,CACT,CADS,CACN,CADM,CACH,CADG,CACA,CADA,CACG,GADH,CACQ,CADR,CAET,CAFS,CAEN,CAFM,CAEH,CAFG,CAEA,GAFA,CAEK,CAFL,CAEQ,CAFR,CAGT,CAHS,CAGN,CAHM,CAGH,CAHG,CAGA,CAHA,CAGG,GAHH,CAGQ,CAHR,CAAb,CAMA,GAAInf,UAAW,GAAIuoB,eAAJ,EAAf,CACAvoB,SAAS4oB,YAAT,CAAuB,UAAvB,CAAmC,GAAIpB,uBAAJ,CAA4BtnB,QAA5B,CAAsC,CAAtC,CAAnC,EACAF,SAAS4oB,YAAT,CAAuB,OAAvB,CAAgC,GAAIpB,uBAAJ,CAA4BrI,MAA5B,CAAoC,CAApC,CAAhC,EAEA,GAAI5B,UAAW,GAAIutB,kBAAJ,CAAuB,CAAE9rB,aAAc/hC,YAAhB,CAAvB,CAAf,CAEA66E,aAAaphF,IAAb,CAAmB,IAAnB,CAAyBspB,QAAzB,CAAmCud,QAAnC,EAEH,CAEDisF,WAAWx2H,SAAX,CAAuBC,OAAOC,MAAP,CAAe4kF,aAAa9kF,SAA5B,CAAvB,CACAw2H,WAAWx2H,SAAX,CAAqBI,WAArB,CAAmCo2H,UAAnC,CAEA;;OAIA,QAASC,MAAT,CAAgB1vH,CAAhB,CAAmBX,CAAnB,CAAsBuQ,CAAtB,CAAyBoC,CAAzB,CAA4B+M,MAA5B,CAAoCz0B,KAApC,CAA2Cy6C,aAA3C,CAA2D,CAEvDh4C,QAAQgK,IAAR,CAAc,sEAAd,EACA,MAAO,IAAI+tC,MAAJ,CAAW9kC,CAAX,CAAcX,CAAd,CAAiBuQ,CAAjB,CAAoBmP,MAApB,CAA4Bz0B,KAA5B,CAAmCy6C,aAAnC,CAAP,CAEH,CAED,GAAI4qF,WAAY,CAAhB,CAEA,GAAIC,YAAa,CAAjB,CAEA,QAASC,iBAAT,CAA2B7sF,SAA3B,CAAuC,CAEnCj2C,QAAQgK,IAAR,CAAc,gEAAd,EACA,MAAOisC,UAAP,CAEH,CAED,QAAS8sF,cAAT,CAAwB9sF,SAAxB,CAAoC,CAEhC,GAAKA,YAAcx0C,SAAnB,CAA+Bw0C,UAAY,EAAZ,CAE/Bj2C,QAAQgK,IAAR,CAAc,6DAAd,EACAisC,UAAUoZ,eAAV,CAA4B,IAA5B,CACApZ,UAAUA,SAAV,CAAsBA,SAAtB,CACAA,UAAU93C,KAAV,CAAkB,UAAY,CAE1B,MAAO83C,WAAUhhC,KAAV,EAAP,CAEH,CAJD,CAKA,MAAOghC,UAAP,CAEH,CAED,QAASwoF,WAAT,CAAqBvlG,QAArB,CAA+Bud,QAA/B,CAA0C,CAEtCz2C,QAAQgK,IAAR,CAAc,oDAAd,EACA,MAAO,IAAI6nF,OAAJ,CAAY34D,QAAZ,CAAsBud,QAAtB,CAAP,CAEH,CAED,QAASusF,SAAT,CAAmBvsF,QAAnB,CAA8B,CAE1Bz2C,QAAQgK,IAAR,CAAc,kDAAd,EACA,MAAO,IAAI6kF,OAAJ,CAAYp4C,QAAZ,CAAP,CAEH,CAED,QAASwsF,eAAT,CAAyB/pG,QAAzB,CAAmCud,QAAnC,CAA8C,CAE1Cz2C,QAAQgK,IAAR,CAAc,wDAAd,EACA,MAAO,IAAI6nF,OAAJ,CAAY34D,QAAZ,CAAsBud,QAAtB,CAAP,CAEH,CAED,QAASysF,mBAAT,CAA6B3sF,UAA7B,CAA0C,CAEtCv2C,QAAQgK,IAAR,CAAc,oEAAd,EACA,MAAO,IAAIk6D,eAAJ,CAAoB3tB,UAApB,CAAP,CAEH,CAED,QAAS4sF,sBAAT,CAAgC5sF,UAAhC,CAA6C,CAEzCv2C,QAAQgK,IAAR,CAAc,uEAAd,EACA,MAAO,IAAIk6D,eAAJ,CAAoB3tB,UAApB,CAAP,CAEH,CAED,QAAS6sF,uBAAT,CAAiC7sF,UAAjC,CAA8C,CAE1Cv2C,QAAQgK,IAAR,CAAc,wEAAd,EACA,MAAO,IAAIk6D,eAAJ,CAAoB3tB,UAApB,CAAP,CAEH,CAED,QAAS8sF,OAAT,CAAiBhoI,CAAjB,CAAoBC,CAApB,CAAuBC,CAAvB,CAA2B,CAEvByE,QAAQgK,IAAR,CAAc,2DAAd,EACA,MAAO,IAAIrI,QAAJ,CAAatG,CAAb,CAAgBC,CAAhB,CAAmBC,CAAnB,CAAP,CAEH,CAED;AAEA,QAAS+nI,uBAAT,CAAiCtuH,KAAjC,CAAwCiqC,QAAxC,CAAmD,CAE/Cj/C,QAAQgK,IAAR,CAAc,4GAAd,EACA,MAAO,IAAIg1C,gBAAJ,CAAqBhqC,KAArB,CAA4BiqC,QAA5B,EAAuCI,UAAvC,CAAmD,IAAnD,CAAP,CAEH,CAED,QAASkkF,cAAT,CAAwBvuH,KAAxB,CAA+BiqC,QAA/B,CAA0C,CAEtCj/C,QAAQgK,IAAR,CAAc,oFAAd,EACA,MAAO,IAAIk2C,oBAAJ,CAAyBlrC,KAAzB,CAAgCiqC,QAAhC,CAAP,CAEH,CAED,QAASukF,eAAT,CAAyBxuH,KAAzB,CAAgCiqC,QAAhC,CAA2C,CAEvCj/C,QAAQgK,IAAR,CAAc,sFAAd,EACA,MAAO,IAAIm2C,qBAAJ,CAA0BnrC,KAA1B,CAAiCiqC,QAAjC,CAAP,CAEH,CAED,QAASwkF,sBAAT,CAAgCzuH,KAAhC,CAAuCiqC,QAAvC,CAAkD,CAE9Cj/C,QAAQgK,IAAR,CAAc,oGAAd,EACA,MAAO,IAAIo2C,4BAAJ,CAAiCprC,KAAjC,CAAwCiqC,QAAxC,CAAP,CAEH,CAED,QAASykF,eAAT,CAAyB1uH,KAAzB,CAAgCiqC,QAAhC,CAA2C,CAEvCj/C,QAAQgK,IAAR,CAAc,sFAAd,EACA,MAAO,IAAIs2C,qBAAJ,CAA0BtrC,KAA1B,CAAiCiqC,QAAjC,CAAP,CAEH,CAED,QAAS0kF,gBAAT,CAA0B3uH,KAA1B,CAAiCiqC,QAAjC,CAA4C,CAExCj/C,QAAQgK,IAAR,CAAc,wFAAd,EACA,MAAO,IAAIu2C,sBAAJ,CAA2BvrC,KAA3B,CAAkCiqC,QAAlC,CAAP,CAEH,CAED,QAAS2kF,eAAT,CAAyB5uH,KAAzB,CAAgCiqC,QAAhC,CAA2C,CAEvCj/C,QAAQgK,IAAR,CAAc,sFAAd,EACA,MAAO,IAAIw2C,qBAAJ,CAA0BxrC,KAA1B,CAAiCiqC,QAAjC,CAAP,CAEH,CAED,QAAS4kF,gBAAT,CAA0B7uH,KAA1B,CAAiCiqC,QAAjC,CAA4C,CAExCj/C,QAAQgK,IAAR,CAAc,wFAAd,EACA,MAAO,IAAIy2C,sBAAJ,CAA2BzrC,KAA3B,CAAkCiqC,QAAlC,CAAP,CAEH,CAED,QAAS6kF,iBAAT,CAA2B9uH,KAA3B,CAAkCiqC,QAAlC,CAA6C,CAEzCj/C,QAAQgK,IAAR,CAAc,0FAAd,EACA,MAAO,IAAI02C,uBAAJ,CAA4B1rC,KAA5B,CAAmCiqC,QAAnC,CAAP,CAEH,CAED,QAAS8kF,iBAAT,CAA2B/uH,KAA3B,CAAkCiqC,QAAlC,CAA6C,CAEzCj/C,QAAQgK,IAAR,CAAc,0FAAd,EACA,MAAO,IAAI22C,uBAAJ,CAA4B3rC,KAA5B,CAAmCiqC,QAAnC,CAAP,CAEH,CAED;AAEAwrD,MAAMr+F,MAAN,CAAe,SAAW43H,SAAX,CAAsBr5B,QAAtB,CAAiC,CAE5C3qG,QAAQC,GAAR,CAAa,0CAAb,EAEA+jI,UAAU93H,SAAV,CAAsBC,OAAOC,MAAP,CAAeq+F,MAAMv+F,SAArB,CAAtB,CACA83H,UAAU93H,SAAV,CAAoBI,WAApB,CAAkC03H,SAAlC,CACAA,UAAU93H,SAAV,CAAoBy+F,QAApB,CAA+BA,QAA/B,CAEA,MAAOq5B,UAAP,CAEH,CAVD,CAYA;AAEA73H,OAAO4B,MAAP,CAAeiiG,UAAU9jG,SAAzB,CAAoC,CAEhC+3H,qBAAsB,8BAAWl5B,SAAX,CAAuB,CAEzC/qG,QAAQgK,IAAR,CAAc,sHAAd,EAEA;AAEA,GAAI8xF,KAAM,KAAKgP,SAAL,CAAgBC,SAAhB,CAAV,CACA,MAAO,MAAKm5B,cAAL,CAAqBpoC,GAArB,CAAP,CAEH,CAX+B,CAahCqoC,2BAA4B,oCAAWp5B,SAAX,CAAuB,CAE/C/qG,QAAQgK,IAAR,CAAc,4HAAd,EAEA;AAEA,GAAI8xF,KAAM,KAAK2B,eAAL,CAAsBsN,SAAtB,CAAV,CACA,MAAO,MAAKm5B,cAAL,CAAqBpoC,GAArB,CAAP,CAEH,CAtB+B,CAwBhCooC,eAAgB,wBAAWlsG,MAAX,CAAoB,CAEhCh4B,QAAQgK,IAAR,CAAc,gHAAd,EAEA,GAAIkvB,UAAW,GAAIkf,SAAJ,EAAf,CAEA,IAAM,GAAI/qC,GAAI,CAAR,CAAW6H,EAAI8iB,OAAOvuB,MAA5B,CAAoC4D,EAAI6H,CAAxC,CAA2C7H,GAA3C,CAAkD,CAE9C,GAAIwrB,OAAQb,OAAQ3qB,CAAR,CAAZ,CACA6rB,SAASE,QAAT,CAAkBl7B,IAAlB,CAAwB,GAAIyD,QAAJ,CAAak3B,MAAMx9B,CAAnB,CAAsBw9B,MAAMv9B,CAA5B,CAA+Bu9B,MAAMt9B,CAAN,EAAW,CAA1C,CAAxB,EAEH,CAED,MAAO29B,SAAP,CAEH,CAvC+B,CAApC,EA2CA;AAEA/sB,OAAO4B,MAAP,CAAe8iG,KAAK3kG,SAApB,CAA+B,CAE3Bk4H,WAAY,oBAAWpsG,MAAX,CAAoB,CAE5Bh4B,QAAQgK,IAAR,CAAc,iEAAd,EACA,KAAK+tB,aAAL,CAAoBC,MAApB,EAEH,CAP0B,CAA/B,EAWA;AAEA,QAASqsG,mBAAT,CAA6BrsG,MAA7B,CAAsC,CAElCh4B,QAAQgK,IAAR,CAAc,mFAAd,EAEAikG,iBAAiBr+F,IAAjB,CAAuB,IAAvB,CAA6BooB,MAA7B,EACA,KAAK5wB,IAAL,CAAY,YAAZ,CACA,KAAKsuF,MAAL,CAAc,IAAd,CAEH,CAED2uC,mBAAmBn4H,SAAnB,CAA+BC,OAAOC,MAAP,CAAe6hG,iBAAiB/hG,SAAhC,CAA/B,CAEA;AAEA,QAASo4H,aAAT,CAAuBtsG,MAAvB,CAAgC,CAE5Bh4B,QAAQgK,IAAR,CAAc,6EAAd,EAEAikG,iBAAiBr+F,IAAjB,CAAuB,IAAvB,CAA6BooB,MAA7B,EACA,KAAK5wB,IAAL,CAAY,YAAZ,CAEH,CAEDk9H,aAAap4H,SAAb,CAAyBC,OAAOC,MAAP,CAAe6hG,iBAAiB/hG,SAAhC,CAAzB,CAEA;AAEA,QAASq4H,OAAT,CAAiBvsG,MAAjB,CAA0B,CAEtBh4B,QAAQgK,IAAR,CAAc,oEAAd,EAEAikG,iBAAiBr+F,IAAjB,CAAuB,IAAvB,CAA6BooB,MAA7B,EACA,KAAK5wB,IAAL,CAAY,YAAZ,CAEH,CAEDm9H,OAAOr4H,SAAP,CAAmBC,OAAOC,MAAP,CAAe6hG,iBAAiB/hG,SAAhC,CAAnB,CAEAC,OAAO4B,MAAP,CAAew2H,OAAOr4H,SAAtB,CAAiC,CAE7Bs4H,cAAe,wBAAW,OAAU,CAEhCxkI,QAAQ+iB,KAAR,CAAe,kDAAf,EAEH,CAN4B,CAO7B0hH,sBAAuB,gCAAW,oBAAuB,CAErDzkI,QAAQ+iB,KAAR,CAAe,0DAAf,EAEH,CAX4B,CAY7B2hH,yBAA0B,mCAAW,kBAAqB,CAEtD1kI,QAAQ+iB,KAAR,CAAe,6DAAf,EAEH,CAhB4B,CAAjC,EAoBA;AAEA,QAAS4hH,WAAT,CAAqBtsG,IAArB,CAA4B,CAExBr4B,QAAQgK,IAAR,CAAc,wDAAd,EACA,MAAO,IAAI04H,WAAJ,CAAgBrqG,IAAhB,CAAP,CAEH,CAED,QAASusG,kBAAT,CAA4BrjI,MAA5B,CAAoChE,KAApC,CAA4C,CAExCyC,QAAQgK,IAAR,CAAc,kFAAd,EACA,MAAO,IAAI+3H,UAAJ,CAAexgI,MAAf,CAAuBhE,KAAvB,CAAP,CAEH,CAED,QAASsnI,YAAT,CAAsBtjI,MAAtB,CAA8BqmC,GAA9B,CAAoC,CAEhC5nC,QAAQgK,IAAR,CAAc,sEAAd,EACA,MAAO,IAAIgnF,aAAJ,CAAkB,GAAImT,cAAJ,CAAmB5iG,OAAO23B,QAA1B,CAAlB,CAAwD,GAAI8qC,kBAAJ,CAAuB,CAAEzmE,MAAOqqC,MAAQnmC,SAAR,CAAoBmmC,GAApB,CAA0B,QAAnC,CAAvB,CAAxD,CAAP,CAEH,CAEDk5F,WAAW50H,SAAX,CAAqB44H,SAArB,CAAiC,UAAY,CAEzC9kI,QAAQ+iB,KAAR,CAAe,0FAAf,EAEH,CAJD,CAMAw9G,eAAer0H,SAAf,CAAyB1M,MAAzB,CAAkC,UAAY,CAE1CQ,QAAQ+iB,KAAR,CAAe,8DAAf,EAEH,CAJD,CAMA,QAASgiH,gBAAT,CAA0BxjI,MAA1B,CAAkCqmC,GAAlC,CAAwC,CAEpC5nC,QAAQgK,IAAR,CAAc,8EAAd,EACA,MAAO,IAAIgnF,aAAJ,CAAkB,GAAI6B,kBAAJ,CAAuBtxF,OAAO23B,QAA9B,CAAlB,CAA4D,GAAI8qC,kBAAJ,CAAuB,CAAEzmE,MAAOqqC,MAAQnmC,SAAR,CAAoBmmC,GAApB,CAA0B,QAAnC,CAAvB,CAA5D,CAAP,CAEH,CAED;AAEAz7B,OAAO4B,MAAP,CAAeuuG,OAAOpwG,SAAtB,CAAiC,CAE7Bg0G,eAAgB,wBAAWxqF,GAAX,CAAiB,CAE7B11B,QAAQgK,IAAR,CAAc,sGAAd,EACA,MAAO41G,aAAYM,cAAZ,CAA4BxqF,GAA5B,CAAP,CAEH,CAP4B,CAAjC,EAWA,QAASsvG,UAAT,CAAoB99B,OAApB,CAA8B,CAE1BlnG,QAAQgK,IAAR,CAAc,uDAAd,EACA,MAAO,IAAIi9F,WAAJ,CAAgBC,OAAhB,CAAP,CAEH,CAED,QAAS+9B,oBAAT,CAA8B/9B,OAA9B,CAAwC,CAEpClnG,QAAQgK,IAAR,CAAc,wEAAd,EACA,MAAO,IAAI2/F,kBAAJ,CAAuBzC,OAAvB,CAAP,CAEH,CAED;AAEA/6F,OAAO4B,MAAP,CAAe2xH,KAAKxzH,SAApB,CAA+B,CAE3BM,OAAQ,gBAAWo+F,cAAX,CAA4B,CAEhC5qG,QAAQgK,IAAR,CAAc,yDAAd,EACA,MAAO,MAAK2uB,SAAL,CAAgBiyE,cAAhB,CAAP,CAEH,CAP0B,CAQ3BruE,MAAO,gBAAY,CAEfv8B,QAAQgK,IAAR,CAAc,sDAAd,EACA,MAAO,MAAK0uB,OAAL,EAAP,CAEH,CAb0B,CAc3BwsG,kBAAmB,2BAAWzsG,GAAX,CAAiB,CAEhCz4B,QAAQgK,IAAR,CAAc,wEAAd,EACA,MAAO,MAAK2vB,aAAL,CAAoBlB,GAApB,CAAP,CAEH,CAnB0B,CAoB3BJ,KAAM,cAAWuyE,cAAX,CAA4B,CAE9B5qG,QAAQgK,IAAR,CAAc,qDAAd,EACA,MAAO,MAAK4uB,OAAL,CAAcgyE,cAAd,CAAP,CAEH,CAzB0B,CAA/B,EA4BAz+F,OAAO4B,MAAP,CAAespB,KAAKnrB,SAApB,CAA+B,CAE3BM,OAAQ,gBAAWo+F,cAAX,CAA4B,CAEhC5qG,QAAQgK,IAAR,CAAc,yDAAd,EACA,MAAO,MAAK2uB,SAAL,CAAgBiyE,cAAhB,CAAP,CAEH,CAP0B,CAQ3BruE,MAAO,gBAAY,CAEfv8B,QAAQgK,IAAR,CAAc,sDAAd,EACA,MAAO,MAAK0uB,OAAL,EAAP,CAEH,CAb0B,CAc3BwsG,kBAAmB,2BAAWzsG,GAAX,CAAiB,CAEhCz4B,QAAQgK,IAAR,CAAc,wEAAd,EACA,MAAO,MAAK2vB,aAAL,CAAoBlB,GAApB,CAAP,CAEH,CAnB0B,CAoB3B0sG,qBAAsB,8BAAWrrG,MAAX,CAAoB,CAEtC95B,QAAQgK,IAAR,CAAc,8EAAd,EACA,MAAO,MAAK4vB,gBAAL,CAAuBE,MAAvB,CAAP,CAEH,CAzB0B,CA0B3BzB,KAAM,cAAWuyE,cAAX,CAA4B,CAE9B5qG,QAAQgK,IAAR,CAAc,qDAAd,EACA,MAAO,MAAK4uB,OAAL,CAAcgyE,cAAd,CAAP,CAEH,CA/B0B,CAA/B,EAkCAh/C,MAAM1/C,SAAN,CAAgBM,MAAhB,CAAyB,SAAWo+F,cAAX,CAA4B,CAEjD5qG,QAAQgK,IAAR,CAAc,0DAAd,EACA,MAAO,MAAK2uB,SAAL,CAAgBiyE,cAAhB,CAAP,CAEH,CALD,CAOAz+F,OAAO4B,MAAP,CAAe6P,KAAf,CAAsB,CAElBwnH,SAAU,mBAAY,CAElBplI,QAAQgK,IAAR,CAAc,yEAAd,EACA,MAAOjL,MAAKmC,MAAL,EAAP,CAEH,CAPiB,CASlBmkI,kBAAmB,2BAAW14H,KAAX,CAAmB,CAElC3M,QAAQgK,IAAR,CAAc,0EAAd,EACA,MAAO4T,OAAMmC,eAAN,CAAuBpT,KAAvB,CAAP,CAEH,CAdiB,CAgBlB24H,eAAgB,wBAAW34H,KAAX,CAAmB,CAE/B3M,QAAQgK,IAAR,CAAc,sEAAd,EACA,MAAO4T,OAAMgC,cAAN,CAAsBjT,KAAtB,CAAP,CAEH,CArBiB,CAAtB,EAyBAR,OAAO4B,MAAP,CAAeykB,QAAQtmB,SAAvB,CAAkC,CAE9Bq5H,qBAAsB,8BAAWvwH,KAAX,CAAkBlQ,MAAlB,CAA2B,CAE7C9E,QAAQgK,IAAR,CAAc,qFAAd,EACA,MAAO,MAAKuY,OAAL,CAAcvN,KAAd,CAAqBlQ,MAArB,CAAP,CAEH,CAP6B,CAQ9B0gI,gBAAiB,yBAAW75G,MAAX,CAAoB,CAEjC3rB,QAAQgK,IAAR,CAAc,gGAAd,EACA,MAAO2hB,QAAO3K,YAAP,CAAqB,IAArB,CAAP,CAEH,CAb6B,CAc9BykH,qBAAsB,+BAAW,OAAU,CAEvCzlI,QAAQ+iB,KAAR,CAAe,0DAAf,EAEH,CAlB6B,CAmB9B2iH,cAAe,uBAAWp1F,MAAO,qBAAlB,CAA0C,CAErDtwC,QAAQgK,IAAR,CAAc,2GAAd,EACA,MAAO,MAAKwe,sBAAL,CAA6B8nB,MAA7B,CAAP,CAEH,CAxB6B,CAyB9Bq1F,oBAAqB,8BAAW,2BAA8B,CAE1D3lI,QAAQ+iB,KAAR,CAAe,yDAAf,EAEH,CA7B6B,CAAlC,EAiCA5W,OAAO4B,MAAP,CAAe+U,QAAQ5W,SAAvB,CAAkC,CAE9B05H,gBAAiB,yBAAW5zH,CAAX,CAAe,CAE5BhS,QAAQgK,IAAR,CAAc,wEAAd,EACA,MAAO,MAAKoa,YAAL,CAAmBpS,CAAnB,CAAP,CAEH,CAP6B,CAQ9BuzH,qBAAsB,8BAAWvwH,KAAX,CAAkBlQ,MAAlB,CAA2B,CAE7C9E,QAAQgK,IAAR,CAAc,qFAAd,EACA,MAAO,MAAKuY,OAAL,CAAcvN,KAAd,CAAqBlQ,MAArB,CAAP,CAEH,CAb6B,CAc9B+gI,YAAa,UAAY,CAErB,GAAIxyH,GAAJ,CAEA,MAAO,SAASwyH,YAAT,EAAuB,CAE1B,GAAKxyH,KAAO5R,SAAZ,CAAwB4R,GAAK,GAAI1R,QAAJ,EAAL,CACxB3B,QAAQgK,IAAR,CAAc,sGAAd,EACA,MAAOqJ,IAAGtK,mBAAH,CAAwB,IAAxB,CAA8B,CAA9B,CAAP,CAEH,CAND,CAQH,CAZY,EAdiB,CA2B9B0rC,0BAA2B,mCAAWvuB,CAAX,CAAe,CAEtClmB,QAAQgK,IAAR,CAAc,gGAAd,EACA,MAAO,MAAK+b,0BAAL,CAAiCG,CAAjC,CAAP,CAEH,CAhC6B,CAiC9B4/G,gBAAiB,0BAAY,CAEzB9lI,QAAQgK,IAAR,CAAc,qDAAd,EAEH,CArC6B,CAsC9Bw7H,gBAAiB,yBAAW75G,MAAX,CAAoB,CAEjC3rB,QAAQgK,IAAR,CAAc,gGAAd,EACA,MAAO2hB,QAAOhD,YAAP,CAAqB,IAArB,CAAP,CAEH,CA3C6B,CA4C9Bo9G,gBAAiB,yBAAWp6G,MAAX,CAAoB,CAEjC3rB,QAAQgK,IAAR,CAAc,gGAAd,EACA,MAAO2hB,QAAOhD,YAAP,CAAqB,IAArB,CAAP,CAEH,CAjD6B,CAkD9B88G,qBAAsB,+BAAW,OAAU,CAEvCzlI,QAAQ+iB,KAAR,CAAe,0DAAf,EAEH,CAtD6B,CAuD9BijH,WAAY,oBAAWp9H,CAAX,CAAe,CAEvB5I,QAAQgK,IAAR,CAAc,kGAAd,EACApB,EAAEwoB,kBAAF,CAAsB,IAAtB,EAEH,CA5D6B,CA6D9B60G,YAAa,qBAAWt6G,MAAX,CAAoB,CAE7B3rB,QAAQgK,IAAR,CAAc,4FAAd,EACA,MAAO2hB,QAAOhD,YAAP,CAAqB,IAArB,CAAP,CAEH,CAlE6B,CAmE9BwK,UAAW,oBAAY,CAEnBnzB,QAAQ+iB,KAAR,CAAe,+CAAf,EAEH,CAvE6B,CAwE9B8xB,QAAS,kBAAY,CAEjB70C,QAAQ+iB,KAAR,CAAe,6CAAf,EAEH,CA5E6B,CA6E9B+xB,QAAS,kBAAY,CAEjB90C,QAAQ+iB,KAAR,CAAe,6CAAf,EAEH,CAjF6B,CAkF9BgyB,QAAS,kBAAY,CAEjB/0C,QAAQ+iB,KAAR,CAAe,6CAAf,EAEH,CAtF6B,CAuF9BmjH,aAAc,uBAAY,CAEtBlmI,QAAQ+iB,KAAR,CAAe,kDAAf,EAEH,CA3F6B,CA4F9B2iH,cAAe,uBAAWp1F,MAAO,qBAAlB,CAA0C,CAErDtwC,QAAQgK,IAAR,CAAc,2GAAd,EACA,MAAO,MAAKwe,sBAAL,CAA6B8nB,MAA7B,CAAP,CAEH,CAjG6B,CAkG9Bq1F,oBAAqB,8BAAW,2BAA8B,CAE1D3lI,QAAQ+iB,KAAR,CAAe,yDAAf,EAEH,CAtG6B,CAuG9BojH,YAAa,qBAAW/pI,IAAX,CAAiBC,KAAjB,CAAwBE,MAAxB,CAAgCD,GAAhC,CAAqCE,IAArC,CAA2CyvB,GAA3C,CAAiD,CAE1DjsB,QAAQgK,IAAR,CAAc,sHAAd,EACA,MAAO,MAAKgiB,eAAL,CAAsB5vB,IAAtB,CAA4BC,KAA5B,CAAmCC,GAAnC,CAAwCC,MAAxC,CAAgDC,IAAhD,CAAsDyvB,GAAtD,CAAP,CAEH,CA5G6B,CAAlC,EAgHA0Q,MAAMzwB,SAAN,CAAgBk6H,kBAAhB,CAAqC,SAAWjpG,IAAX,CAAkB,CAEnDn9B,QAAQgK,IAAR,CAAc,2EAAd,EACA,MAAO,MAAKuzB,cAAL,CAAqBJ,IAArB,CAAP,CAEH,CALD,CAOAn4B,WAAWkH,SAAX,CAAqBs5H,eAArB,CAAuC,SAAW75G,MAAX,CAAoB,CAEvD3rB,QAAQgK,IAAR,CAAc,iHAAd,EACA,MAAO2hB,QAAOnmB,eAAP,CAAwB,IAAxB,CAAP,CAEH,CALD,CAOA2G,OAAO4B,MAAP,CAAe86C,IAAI38C,SAAnB,CAA8B,CAE1Bg5H,kBAAmB,2BAAWzsG,GAAX,CAAiB,CAEhCz4B,QAAQgK,IAAR,CAAc,uEAAd,EACA,MAAO,MAAK2vB,aAAL,CAAoBlB,GAApB,CAAP,CAEH,CAPyB,CAQ1B4tG,oBAAqB,6BAAW7sI,KAAX,CAAmB,CAEpCwG,QAAQgK,IAAR,CAAc,2EAAd,EACA,MAAO,MAAKgwB,eAAL,CAAsBxgC,KAAtB,CAAP,CAEH,CAbyB,CAc1B2rI,qBAAsB,8BAAWrrG,MAAX,CAAoB,CAEtC95B,QAAQgK,IAAR,CAAc,6EAAd,EACA,MAAO,MAAK4vB,gBAAL,CAAuBE,MAAvB,CAAP,CAEH,CAnByB,CAA9B,EAuBA3tB,OAAO4B,MAAP,CAAeq+C,SAASlgD,SAAxB,CAAmC,CAE/BysF,KAAM,eAAY,CAEd34F,QAAQgK,IAAR,CAAc,yDAAd,EACA,MAAO,MAAKmjD,OAAL,EAAP,CAEH,CAP8B,CAQ/Bm5E,mBAAoB,4BAAWztG,KAAX,CAAkB/7B,MAAlB,CAA2B,CAE3CkD,QAAQgK,IAAR,CAAc,4EAAd,EACA,MAAO,MAAKuiD,YAAL,CAAmB1zB,KAAnB,CAA0B/7B,MAA1B,CAAP,CAEH,CAb8B,CAc/BypI,SAAU,kBAAWzpI,MAAX,CAAoB,CAE1BkD,QAAQgK,IAAR,CAAc,iEAAd,EACA,MAAO,MAAKojD,WAAL,CAAkBtwD,MAAlB,CAAP,CAEH,CAnB8B,CAoB/Bk1B,OAAQ,gBAAWl1B,MAAX,CAAoB,CAExBkD,QAAQgK,IAAR,CAAc,6DAAd,EACA,MAAO,MAAKqiD,SAAL,CAAgBvvD,MAAhB,CAAP,CAEH,CAzB8B,CA0B/BtD,MAAO,eAAWsD,MAAX,CAAoB,CAEvBkD,QAAQgK,IAAR,CAAc,2DAAd,EACA,MAAO,MAAKqjD,QAAL,CAAevwD,MAAf,CAAP,CAEH,CA/B8B,CAAnC,EAmCAqP,OAAO4B,MAAP,CAAeq+C,QAAf,CAAyB,CAErBk6E,mBAAoB,4BAAWztG,KAAX,CAAkB5lB,CAAlB,CAAqBX,CAArB,CAAwBuQ,CAAxB,CAA2B/lB,MAA3B,CAAoC,CAEpDkD,QAAQgK,IAAR,CAAc,4EAAd,EACA,MAAOoiD,UAASG,YAAT,CAAuB1zB,KAAvB,CAA8B5lB,CAA9B,CAAiCX,CAAjC,CAAoCuQ,CAApC,CAAuC/lB,MAAvC,CAAP,CAEH,CAPoB,CAQrBk1B,OAAQ,gBAAW/e,CAAX,CAAcX,CAAd,CAAiBuQ,CAAjB,CAAoB/lB,MAApB,CAA6B,CAEjCkD,QAAQgK,IAAR,CAAc,6DAAd,EACA,MAAOoiD,UAASC,SAAT,CAAoBp5C,CAApB,CAAuBX,CAAvB,CAA0BuQ,CAA1B,CAA6B/lB,MAA7B,CAAP,CAEH,CAboB,CAAzB,EAiBAqP,OAAO4B,MAAP,CAAeikG,MAAM9lG,SAArB,CAAgC,CAE5Bs6H,iBAAkB,0BAAWz7B,SAAX,CAAuB,CAErC/qG,QAAQgK,IAAR,CAAc,kFAAd,EACA,MAAO,MAAK6zF,aAAL,CAAoBkN,SAApB,CAAP,CAEH,CAP2B,CAQ5B07B,QAAS,iBAAWnwG,OAAX,CAAqB,CAE1Bt2B,QAAQgK,IAAR,CAAc,0EAAd,EACA,MAAO,IAAIqyF,gBAAJ,CAAqB,IAArB,CAA2B/lE,OAA3B,CAAP,CAEH,CAb2B,CAc5BowG,aAAc,sBAAWpwG,OAAX,CAAqB,CAE/Bt2B,QAAQgK,IAAR,CAAc,6EAAd,EACA,MAAO,IAAI45F,cAAJ,CAAmB,IAAnB,CAAyBttE,OAAzB,CAAP,CAEH,CAnB2B,CAAhC,EAuBAnqB,OAAO4B,MAAP,CAAejG,QAAQoE,SAAvB,CAAkC,CAE9By6H,cAAe,uBAAWlkH,SAAX,CAAsBjO,KAAtB,CAA6B1P,MAA7B,CAAsC,CAEjD9E,QAAQgK,IAAR,CAAc,6EAAd,EACA,MAAO,MAAKwY,mBAAL,CAA0BC,SAA1B,CAAqCjO,KAArC,CAA4C1P,MAA5C,CAAP,CAEH,CAP6B,CAQ9B8hI,oBAAqB,6BAAWh+H,CAAX,CAAe,CAEhC5I,QAAQgK,IAAR,CAAc,mFAAd,EACA,MAAO,MAAKgY,mBAAL,CAA0BpZ,CAA1B,CAAP,CAEH,CAb6B,CAc9Bi+H,gBAAiB,0BAAY,CAEzB7mI,QAAQgK,IAAR,CAAc,2EAAd,EACA,MAAO,MAAK2X,eAAL,EAAP,CAEH,CAnB6B,CAAlC,EAuBAxV,OAAO4B,MAAP,CAAepM,QAAQuK,SAAvB,CAAkC,CAE9B46H,2BAA4B,qCAAY,CAEpC9mI,QAAQ+iB,KAAR,CAAe,2GAAf,EAEH,CAN6B,CAO9BgkH,uBAAwB,iCAAY,CAEhC/mI,QAAQ+iB,KAAR,CAAe,mGAAf,EAEH,CAX6B,CAY9BikH,sBAAuB,+BAAWh1H,CAAX,CAAe,CAElChS,QAAQgK,IAAR,CAAc,uFAAd,EACA,MAAO,MAAKsoB,qBAAL,CAA4BtgB,CAA5B,CAAP,CAEH,CAjB6B,CAkB9Bi1H,mBAAoB,4BAAWj1H,CAAX,CAAe,CAE/BhS,QAAQgK,IAAR,CAAc,iFAAd,EACA,MAAO,MAAKuoB,kBAAL,CAAyBvgB,CAAzB,CAAP,CAEH,CAvB6B,CAwB9Bk1H,oBAAqB,6BAAW1yH,KAAX,CAAkB3K,MAAlB,CAA2B,CAE5C7J,QAAQgK,IAAR,CAAc,mFAAd,EACA,MAAO,MAAKjB,mBAAL,CAA0Bc,MAA1B,CAAkC2K,KAAlC,CAAP,CAEH,CA7B6B,CA8B9B2yH,gBAAiB,yBAAWn1H,CAAX,CAAe,CAE5BhS,QAAQgK,IAAR,CAAc,qFAAd,EACA,MAAO,MAAK2e,YAAL,CAAmB3W,CAAnB,CAAP,CAEH,CAnC6B,CAoC9B20H,cAAe,uBAAWlkH,SAAX,CAAsBjO,KAAtB,CAA6B1P,MAA7B,CAAsC,CAEjD9E,QAAQgK,IAAR,CAAc,6EAAd,EACA,MAAO,MAAKwY,mBAAL,CAA0BC,SAA1B,CAAqCjO,KAArC,CAA4C1P,MAA5C,CAAP,CAEH,CAzC6B,CA0C9B8hI,oBAAqB,6BAAWh+H,CAAX,CAAe,CAEhC5I,QAAQgK,IAAR,CAAc,mFAAd,EACA,MAAO,MAAKgY,mBAAL,CAA0BpZ,CAA1B,CAAP,CAEH,CA/C6B,CAgD9Bi+H,gBAAiB,0BAAY,CAEzB7mI,QAAQgK,IAAR,CAAc,2EAAd,EACA,MAAO,MAAK2X,eAAL,EAAP,CAEH,CArD6B,CAAlC,EAyDAxV,OAAO4B,MAAP,CAAe8nB,QAAQ3pB,SAAvB,CAAkC,CAE9By6H,cAAe,uBAAWlkH,SAAX,CAAsBjO,KAAtB,CAA6B1P,MAA7B,CAAsC,CAEjD9E,QAAQgK,IAAR,CAAc,6EAAd,EACA,MAAO,MAAKwY,mBAAL,CAA0BC,SAA1B,CAAqCjO,KAArC,CAA4C1P,MAA5C,CAAP,CAEH,CAP6B,CAQ9B+hI,gBAAiB,0BAAY,CAEzB7mI,QAAQgK,IAAR,CAAc,2EAAd,EACA,MAAO,MAAK2X,eAAL,EAAP,CAEH,CAb6B,CAAlC,EAiBA;AAEAxV,OAAO4B,MAAP,CAAeqqC,SAASlsC,SAAxB,CAAmC,CAE/Bk7H,gBAAiB,0BAAY,CAEzBpnI,QAAQ+iB,KAAR,CAAe,sDAAf,EAEH,CAN8B,CAO/BkuE,qBAAsB,+BAAY,CAE9BjxF,QAAQ+iB,KAAR,CAAe,0GAAf,EAEH,CAX8B,CAAnC,EAeA5W,OAAO4B,MAAP,CAAerP,SAASwN,SAAxB,CAAmC,CAE/Bm7H,eAAgB,wBAAWtzG,IAAX,CAAkB,CAE9B/zB,QAAQgK,IAAR,CAAc,2EAAd,EACA,MAAO,MAAKsrC,eAAL,CAAsBvhB,IAAtB,CAAP,CAEH,CAP8B,CAQ/BuzG,YAAa,sBAAY,CAErBtnI,QAAQgK,IAAR,CAAc,2EAAd,EAEH,CAZ8B,CAa/BmpB,UAAW,mBAAWtqB,QAAX,CAAqBqhB,IAArB,CAA4B,CAEnClqB,QAAQgK,IAAR,CAAc,gGAAd,EACA,MAAO,MAAKgrC,eAAL,CAAsB9qB,IAAtB,CAA4BrhB,QAA5B,CAAP,CAEH,CAlB8B,CAmB/B0+H,iBAAkB,2BAAY,CAE1BvnI,QAAQ+iB,KAAR,CAAe,gHAAf,EAEH,CAvB8B,CAAnC,EA2BA5W,OAAOI,gBAAP,CAAyB7N,SAASwN,SAAlC,CAA6C,CAEzCs7H,WAAY,CACR/6H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,qDAAd,EACA,MAAO,MAAK/L,QAAL,CAAcinB,KAArB,CAEH,CANO,CAORhpB,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,qDAAd,EACA,KAAK/L,QAAL,CAAcinB,KAAd,CAAsBvY,KAAtB,CAEH,CAZO,CAF6B,CAgBzC86H,cAAe,CACXh7H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,+FAAd,EAEH,CALU,CAMX9N,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,+FAAd,EAEH,CAVU,CAhB0B,CAA7C,EA+BAmC,OAAOI,gBAAP,CAAyB2iF,IAAIhjF,SAA7B,CAAwC,CAEpC2jD,QAAS,CACLpjD,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,kDAAd,EACA,MAAO,MAAKmlF,MAAZ,CAEH,CANI,CAF2B,CAAxC,EAaAhjF,OAAOgI,cAAP,CAAuBo7E,SAASrjF,SAAhC,CAA2C,kBAA3C,CAA+D,CAE3DO,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,oDAAd,EAEH,CAN0D,CAO3D9N,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,oDAAd,EAEH,CAX0D,CAA/D,EAeAmC,OAAOgI,cAAP,CAAuBs2F,MAAMv+F,SAA7B,CAAwC,sBAAxC,CAAgE,CAE5DO,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,gEAAd,EACA,MAAO,MAAK0gG,kBAAZ,CAEH,CAP2D,CAQ5DxuG,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,gEAAd,EACA,KAAK0gG,kBAAL,CAA0B/9F,KAA1B,CAEH,CAb2D,CAAhE,EAiBA;AAEApS,kBAAkB2R,SAAlB,CAA4Bw7H,OAA5B,CAAsC,SAAWtpD,WAAX,CAAwBH,SAAxB,CAAoC,CAEtEj+E,QAAQgK,IAAR,CAAc,kDACV,8DADJ,EAGA,GAAKi0E,YAAcx8E,SAAnB,CAA+B,KAAKw8E,SAAL,CAAiBA,SAAjB,CAC/B,KAAKE,cAAL,CAAqBC,WAArB,EAEH,CARD,CAUA;AAEAjyE,OAAOI,gBAAP,CAAyB4lG,MAAMjmG,SAA/B,CAA0C,CACtCy7H,WAAY,CACRzrI,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,4CAAd,EAEH,CALO,CAD0B,CAQtC49H,gBAAiB,CACb1rI,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,0DAAd,EACA,KAAK7N,MAAL,CAAY7C,MAAZ,CAAmBqQ,GAAnB,CAAyBgD,KAAzB,CAEH,CANY,CARqB,CAgBtCk7H,iBAAkB,CACd3rI,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,4DAAd,EACA,KAAK7N,MAAL,CAAY7C,MAAZ,CAAmB8C,IAAnB,CAA0BuQ,KAA1B,CAEH,CANa,CAhBoB,CAwBtCm7H,kBAAmB,CACf5rI,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,8DAAd,EACA,KAAK7N,MAAL,CAAY7C,MAAZ,CAAmB+C,KAAnB,CAA2BsQ,KAA3B,CAEH,CANc,CAxBmB,CAgCtCo7H,gBAAiB,CACb7rI,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,0DAAd,EACA,KAAK7N,MAAL,CAAY7C,MAAZ,CAAmBgD,GAAnB,CAAyBqQ,KAAzB,CAEH,CANY,CAhCqB,CAwCtCq7H,mBAAoB,CAChB9rI,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,gEAAd,EACA,KAAK7N,MAAL,CAAY7C,MAAZ,CAAmBiD,MAAnB,CAA4BoQ,KAA5B,CAEH,CANe,CAxCkB,CAgDtCsgC,iBAAkB,CACd/wC,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,4DAAd,EACA,KAAK7N,MAAL,CAAY7C,MAAZ,CAAmBkD,IAAnB,CAA0BmQ,KAA1B,CAEH,CANa,CAhDoB,CAwDtCugC,gBAAiB,CACbhxC,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,0DAAd,EACA,KAAK7N,MAAL,CAAY7C,MAAZ,CAAmB2yB,GAAnB,CAAyBtf,KAAzB,CAEH,CANY,CAxDqB,CAgEtCs7H,oBAAqB,CACjB/rI,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,gHAAd,EAEH,CALgB,CAhEiB,CAuEtCqiC,WAAY,CACRnwC,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,+CAAd,EACA,KAAK7N,MAAL,CAAY6rE,IAAZ,CAAmBr7D,KAAnB,CAEH,CANO,CAvE0B,CA+EtCu7H,eAAgB,CACZhsI,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,gDAAd,EAEH,CALW,CA/EsB,CAsFtCm+H,eAAgB,CACZjsI,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,4DAAd,EACA,KAAK7N,MAAL,CAAYO,OAAZ,CAAoBC,KAApB,CAA4BgQ,KAA5B,CAEH,CANW,CAtFsB,CA8FtCy7H,gBAAiB,CACblsI,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,8DAAd,EACA,KAAK7N,MAAL,CAAYO,OAAZ,CAAoBE,MAApB,CAA6B+P,KAA7B,CAEH,CANY,CA9FqB,CAA1C,EAwGA;AAEAR,OAAOI,gBAAP,CAAyByyC,gBAAgB9yC,SAAzC,CAAoD,CAEhDzC,OAAQ,CACJgD,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,yEAAd,EACA,MAAO,MAAKgL,KAAL,CAAWvL,MAAlB,CAEH,CANG,CAFwC,CAUhD4+H,iBAAkB,2BAAW,aAAgB,CAEzCroI,QAAQ+iB,KAAR,CAAe,8DAAf,EAEH,CAd+C,CAApD,EAkBA5W,OAAO4B,MAAP,CAAe0zC,eAAev1C,SAA9B,CAAyC,CAErCo8H,SAAU,kBAAW9zH,KAAX,CAAmB,CAEzBxU,QAAQgK,IAAR,CAAc,oEAAd,EACA,KAAK63C,QAAL,CAAertC,KAAf,EAEH,CAPoC,CAQrC+zH,YAAa,qBAAWvnI,KAAX,CAAkBynB,KAAlB,CAAyBu7E,WAAzB,CAAuC,CAEhD,GAAKA,cAAgBviG,SAArB,CAAiC,CAE7BzB,QAAQgK,IAAR,CAAc,sEAAd,EAEH,CACDhK,QAAQgK,IAAR,CAAc,0DAAd,EACA,KAAKi4C,QAAL,CAAejhD,KAAf,CAAsBynB,KAAtB,EAEH,CAlBoC,CAmBrC+/G,eAAgB,yBAAY,CAExBxoI,QAAQgK,IAAR,CAAc,gEAAd,EACA,KAAKk4C,WAAL,GAEH,CAxBoC,CAyBrCklF,gBAAiB,0BAAY,CAEzBpnI,QAAQgK,IAAR,CAAc,4DAAd,EAEH,CA7BoC,CA8BrCy+H,eAAgB,yBAAY,CAExBzoI,QAAQgK,IAAR,CAAc,2DAAd,EAEH,CAlCoC,CAAzC,EAsCAmC,OAAOI,gBAAP,CAAyBk1C,eAAev1C,SAAxC,CAAmD,CAE/CkwG,UAAW,CACP3vG,IAAK,cAAY,CAEbzM,QAAQ+iB,KAAR,CAAe,+DAAf,EACA,MAAO,MAAKs3B,MAAZ,CAEH,CANM,CAFoC,CAU/CgiE,QAAS,CACL5vG,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,6DAAd,EACA,MAAO,MAAKqwC,MAAZ,CAEH,CANI,CAVsC,CAAnD,EAqBA;AAEAluC,OAAO4B,MAAP,CAAeuuF,sBAAsBpwF,SAArC,CAAgD,CAE5Cw8H,UAAW,oBAAY,CAEnB1oI,QAAQ+iB,KAAR,CAAe,6DAAf,EAEH,CAN2C,CAQ5C4lH,aAAc,uBAAY,CAEtB3oI,QAAQ+iB,KAAR,CAAe,gEAAf,EAEH,CAZ2C,CAc5Cy5E,SAAU,mBAAY,CAElBx8F,QAAQ+iB,KAAR,CAAe,4DAAf,EAEH,CAlB2C,CAAhD,EAsBA;AAEA5W,OAAOI,gBAAP,CAAyByxH,QAAQ9xH,SAAjC,CAA4C,CAExCikC,QAAS,CACLj0C,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,gFAAd,EAEH,CALI,CAF+B,CASxCpJ,SAAU,CACN+L,MAAO,gBAAY,CAEf3M,QAAQgK,IAAR,CAAc,mFAAd,EACA,MAAO,KAAP,CAEH,CANK,CAT8B,CAA5C,EAoBA;AAEAmC,OAAOI,gBAAP,CAAyB64C,SAASl5C,SAAlC,CAA6C,CAEzC08H,WAAY,CACRn8H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,+CAAd,EAEH,CALO,CAMR9N,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,+CAAd,EAEH,CAVO,CAF6B,CAczC6+H,QAAS,CACLp8H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,4CAAd,EACA,MAAO,IAAIw9B,MAAJ,EAAP,CAEH,CANI,CAdgC,CAuBzCw0E,QAAS,CACLvvG,IAAK,cAAY,CAEbzM,QAAQ+iB,KAAR,CAAe,SAAW,KAAK3b,IAAhB,CAAuB,oEAAtC,EAEH,CALI,CAMLlL,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,SAAW,KAAK5C,IAAhB,CAAuB,oEAArC,EACA,KAAKtJ,WAAL,CAAqB6O,QAAU5O,WAA/B,CAEH,CAXI,CAvBgC,CAA7C,EAuCAoO,OAAOI,gBAAP,CAAyB1O,kBAAkBqO,SAA3C,CAAsD,CAElD48H,MAAO,CACHr8H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,2FAAd,EACA,MAAO,MAAP,CAEH,CANE,CAOH9N,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,0FAAd,EAEH,CAXE,CAF2C,CAAtD,EAkBAmC,OAAOI,gBAAP,CAAyB07C,eAAe/7C,SAAxC,CAAmD,CAE/Cm8C,YAAa,CACT57C,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,+EAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgBC,WAAvB,CAEH,CANQ,CAOTnsD,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,gFAAd,EACA,KAAKo+C,UAAL,CAAgBC,WAAhB,CAA8B17C,KAA9B,CAEH,CAZQ,CAFkC,CAAnD,EAmBA;AAEAR,OAAO4B,MAAP,CAAejT,cAAcoR,SAA7B,CAAwC,CAEpC68H,QAAS,iBAAWr4H,QAAX,CAAsB,CAE3B1Q,QAAQgK,IAAR,CAAc,6DAAd,EACA,KAAK0lC,gBAAL,CAAuBh/B,QAAvB,EAEH,CAPmC,CASpCs4H,uBAAwB,iCAAY,CAEhChpI,QAAQgK,IAAR,CAAc,2EAAd,EACA,MAAO,MAAKm7D,eAAL,EAAP,CAEH,CAdmC,CAgBpCvT,iBAAkB,2BAAY,CAE1B5xD,QAAQgK,IAAR,CAAc,mFAAd,EACA,MAAO,MAAKw5D,YAAL,CAAkB5R,gBAAlB,EAAP,CAEH,CArBmC,CAuBpCq3E,aAAc,uBAAY,CAEtBjpI,QAAQgK,IAAR,CAAc,sEAAd,EACA,MAAO,MAAKw5D,YAAL,CAAkBxmB,SAAzB,CAEH,CA5BmC,CA8BpCksF,aAAc,uBAAY,CAEtBlpI,QAAQgK,IAAR,CAAc,6DAAd,EACA,MAAO,MAAKrF,KAAL,CAAWJ,KAAX,EAAP,CAEH,CAnCmC,CAqCpC4kI,sBAAuB,gCAAY,CAE/BnpI,QAAQgK,IAAR,CAAc,gGAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgB37C,GAAhB,CAAqB,mBAArB,CAAP,CAEH,CA1CmC,CA2CpC28H,0BAA2B,oCAAY,CAEnCppI,QAAQgK,IAAR,CAAc,yGAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgB37C,GAAhB,CAAqB,wBAArB,CAAP,CAEH,CAhDmC,CAiDpC48H,4BAA6B,sCAAY,CAErCrpI,QAAQgK,IAAR,CAAc,6GAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgB37C,GAAhB,CAAqB,0BAArB,CAAP,CAEH,CAtDmC,CAuDpC68H,8BAA+B,wCAAY,CAEvCtpI,QAAQgK,IAAR,CAAc,oHAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgB37C,GAAhB,CAAqB,+BAArB,CAAP,CAEH,CA5DmC,CA6DpC88H,+BAAgC,yCAAY,CAExCvpI,QAAQgK,IAAR,CAAc,sHAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgB37C,GAAhB,CAAqB,gCAArB,CAAP,CAEH,CAlEmC,CAmEpC+8H,oBAAqB,8BAAY,CAE7BxpI,QAAQgK,IAAR,CAAc,6FAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgB37C,GAAhB,CAAqB,kBAArB,CAAP,CAEH,CAxEmC,CAyEpCs0D,uBAAwB,iCAAY,CAEhC/gE,QAAQgK,IAAR,CAAc,qFAAd,EACA,MAAO,MAAKw5D,YAAL,CAAkBlQ,cAAzB,CAEH,CA9EmC,CA+EpCm2E,wBAAyB,kCAAY,CAEjCzpI,QAAQgK,IAAR,CAAc,uGAAd,EACA,MAAO,MAAKo+C,UAAL,CAAgB37C,GAAhB,CAAqB,wBAArB,CAAP,CAEH,CApFmC,CAqFpCi9H,kBAAmB,2BAAW5iD,OAAX,CAAqB,CAEpC9mF,QAAQgK,IAAR,CAAc,qEAAd,EACA,KAAK8gE,cAAL,CAAqBgc,OAArB,EAEH,CA1FmC,CA2FpCoD,aAAc,uBAAY,CAEtBlqF,QAAQgK,IAAR,CAAc,wDAAd,EAEH,CA/FmC,CAgGpC2/H,aAAc,uBAAY,CAEtB3pI,QAAQgK,IAAR,CAAc,wDAAd,EAEH,CApGmC,CAqGpC4/H,cAAe,wBAAY,CAEvB5pI,QAAQgK,IAAR,CAAc,yDAAd,EAEH,CAzGmC,CA0GpC6/H,gBAAiB,0BAAY,CAEzB7pI,QAAQgK,IAAR,CAAc,2DAAd,EAEH,CA9GmC,CA+GpC8/H,eAAgB,yBAAY,CAExB9pI,QAAQgK,IAAR,CAAc,0DAAd,EAEH,CAnHmC,CAAxC,EAuHAmC,OAAOI,gBAAP,CAAyBzR,cAAcoR,SAAvC,CAAkD,CAE9Co1D,iBAAkB,CACd70D,IAAK,cAAY,CAEb,MAAO,MAAKvR,SAAL,CAAeC,OAAtB,CAEH,CALa,CAMde,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,mEAAd,EACA,KAAK9O,SAAL,CAAeC,OAAf,CAAyBwR,KAAzB,CAEH,CAXa,CAF4B,CAe9CyzD,cAAe,CACX3zD,IAAK,cAAY,CAEb,MAAO,MAAKvR,SAAL,CAAekM,IAAtB,CAEH,CALU,CAMXlL,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,6DAAd,EACA,KAAK9O,SAAL,CAAekM,IAAf,CAAsBuF,KAAtB,CAEH,CAXU,CAf+B,CA4B9Co9H,kBAAmB,CACft9H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,4FAAd,EACA,MAAOvI,UAAP,CAEH,CANc,CAOfvF,IAAK,cAAW,WAAc,CAE1B8D,QAAQgK,IAAR,CAAc,4FAAd,EAEH,CAXc,CA5B2B,CAAlD,EA2CAmC,OAAOI,gBAAP,CAAyB48D,eAAej9D,SAAxC,CAAmD,CAE/CkpE,SAAU,CACN3oE,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,6FAAd,EACA,MAAOvI,UAAP,CAEH,CANK,CAONvF,IAAK,cAAW,cAAiB,CAE7B8D,QAAQgK,IAAR,CAAc,6FAAd,EAEH,CAXK,CAFqC,CAe/CggI,mBAAoB,CAChBv9H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,uGAAd,EACA,MAAOvI,UAAP,CAEH,CANe,CAOhBvF,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,uGAAd,EAEH,CAXe,CAf2B,CA4B/CigI,kBAAmB,CACfx9H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,sGAAd,EACA,MAAOvI,UAAP,CAEH,CANc,CAOfvF,IAAK,cAAY,CAEb8D,QAAQgK,IAAR,CAAc,sGAAd,EAEH,CAXc,CA5B4B,CAAnD,EA4CA;AAEAmC,OAAOI,gBAAP,CAAyB8pB,kBAAkBnqB,SAA3C,CAAsD,CAElDsnB,MAAO,CACH/mB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,wDAAd,EACA,MAAO,MAAK0sB,OAAL,CAAalD,KAApB,CAEH,CANE,CAOHt3B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,wDAAd,EACA,KAAK0sB,OAAL,CAAalD,KAAb,CAAqB7mB,KAArB,CAEH,CAZE,CAF2C,CAgBlD8mB,MAAO,CACHhnB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,wDAAd,EACA,MAAO,MAAK0sB,OAAL,CAAajD,KAApB,CAEH,CANE,CAOHv3B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,wDAAd,EACA,KAAK0sB,OAAL,CAAajD,KAAb,CAAqB9mB,KAArB,CAEH,CAZE,CAhB2C,CA8BlD+mB,UAAW,CACPjnB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,gEAAd,EACA,MAAO,MAAK0sB,OAAL,CAAahD,SAApB,CAEH,CANM,CAOPx3B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,gEAAd,EACA,KAAK0sB,OAAL,CAAahD,SAAb,CAAyB/mB,KAAzB,CAEH,CAZM,CA9BuC,CA4ClDgnB,UAAW,CACPlnB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,gEAAd,EACA,MAAO,MAAK0sB,OAAL,CAAa/C,SAApB,CAEH,CANM,CAOPz3B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,gEAAd,EACA,KAAK0sB,OAAL,CAAa/C,SAAb,CAAyBhnB,KAAzB,CAEH,CAZM,CA5CuC,CA0DlDknB,WAAY,CACRpnB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,kEAAd,EACA,MAAO,MAAK0sB,OAAL,CAAa7C,UAApB,CAEH,CANO,CAOR33B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,kEAAd,EACA,KAAK0sB,OAAL,CAAa7C,UAAb,CAA0BlnB,KAA1B,CAEH,CAZO,CA1DsC,CAwElD7H,OAAQ,CACJ2H,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,0DAAd,EACA,MAAO,MAAK0sB,OAAL,CAAa5xB,MAApB,CAEH,CANG,CAOJ5I,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,0DAAd,EACA,KAAK0sB,OAAL,CAAa5xB,MAAb,CAAsB6H,KAAtB,CAEH,CAZG,CAxE0C,CAsFlDuD,OAAQ,CACJzD,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,0DAAd,EACA,MAAO,MAAK0sB,OAAL,CAAaxmB,MAApB,CAEH,CANG,CAOJhU,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,0DAAd,EACA,KAAK0sB,OAAL,CAAaxmB,MAAb,CAAsBvD,KAAtB,CAEH,CAZG,CAtF0C,CAoGlDinB,OAAQ,CACJnnB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,0DAAd,EACA,MAAO,MAAK0sB,OAAL,CAAa9C,MAApB,CAEH,CANG,CAOJ13B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,0DAAd,EACA,KAAK0sB,OAAL,CAAa9C,MAAb,CAAsBjnB,KAAtB,CAEH,CAZG,CApG0C,CAkHlDvF,KAAM,CACFqF,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,sDAAd,EACA,MAAO,MAAK0sB,OAAL,CAAatvB,IAApB,CAEH,CANC,CAOFlL,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,sDAAd,EACA,KAAK0sB,OAAL,CAAatvB,IAAb,CAAoBuF,KAApB,CAEH,CAZC,CAlH4C,CAgIlDynB,gBAAiB,CACb3nB,IAAK,cAAY,CAEbzM,QAAQgK,IAAR,CAAc,4EAAd,EACA,MAAO,MAAK0sB,OAAL,CAAatC,eAApB,CAEH,CANY,CAObl4B,IAAK,aAAWyQ,KAAX,CAAmB,CAEpB3M,QAAQgK,IAAR,CAAc,4EAAd,EACA,KAAK0sB,OAAL,CAAatC,eAAb,CAA+BznB,KAA/B,CAEH,CAZY,CAhIiC,CAAtD,EAiJA;AAEAR,OAAOI,gBAAP,CAAyBwyE,aAAa7yE,SAAtC,CAAiD,CAE7Cg+H,SAAU,CACNhuI,IAAK,cAAW,WAAc,CAE1B8D,QAAQgK,IAAR,CAAc,iDAAd,EAEH,CALK,CAFmC,CAAjD,EAYA;AAEAkgH,MAAMh+G,SAAN,CAAgBi7F,IAAhB,CAAuB,SAAWnB,IAAX,CAAkB,CAErChmG,QAAQgK,IAAR,CAAc,wEAAd,EACA,GAAI3F,OAAQ,IAAZ,CACA,GAAI8lI,aAAc,GAAI9iB,YAAJ,EAAlB,CACA8iB,YAAYhjC,IAAZ,CAAkBnB,IAAlB,CAAwB,SAAW11D,MAAX,CAAoB,CAExCjsC,MAAM0mH,SAAN,CAAiBz6E,MAAjB,EAEH,CAJD,EAKA,MAAO,KAAP,CAEH,CAZD,CAcAq8E,cAAczgH,SAAd,CAAwBk+H,OAAxB,CAAkC,UAAY,CAE1CpqI,QAAQgK,IAAR,CAAc,6DAAd,EACA,MAAO,MAAKijH,gBAAL,EAAP,CAEH,CALD,CAOA;AAEAhF,WAAW/7G,SAAX,CAAqBm+H,aAArB,CAAqC,SAAW9wI,QAAX,CAAqBF,KAArB,CAA6B,CAE9D2G,QAAQgK,IAAR,CAAc,sDAAd,EACA,MAAO,MAAKxK,MAAL,CAAajG,QAAb,CAAuBF,KAAvB,CAAP,CAEH,CALD,CAOA;AAEA,GAAIixI,eAAgB,CAEhBxjG,MAAO,eAAWyjG,SAAX,CAAsBhnF,SAAtB,CAAiC7H,mBAAjC,CAAuD,CAE1D17C,QAAQgK,IAAR,CAAc,iIAAd,EACA,GAAIH,OAAJ,CAEA,GAAK05C,UAAU7G,MAAf,CAAwB,CAEpB6G,UAAUpvB,gBAAV,EAA8BovB,UAAU7uB,YAAV,EAA9B,CAEA7qB,OAAS05C,UAAU15C,MAAnB,CACA05C,UAAYA,UAAUrqB,QAAtB,CAEH,CAEDqxG,UAAUzjG,KAAV,CAAiByc,SAAjB,CAA4B15C,MAA5B,CAAoC6xC,mBAApC,EAEH,CAlBe,CAoBhBlvC,OAAQ,gBAAW0sB,QAAX,CAAsB,CAE1Bl5B,QAAQgK,IAAR,CAAc,2FAAd,EACA,MAAOkvB,UAAS1sB,MAAT,EAAP,CAEH,CAzBe,CAApB,CA6BA,GAAIg+H,YAAa,CAEb1gC,YAAaroG,SAFA,CAIb6nG,YAAa,qBAAW5zE,GAAX,CAAgBnC,OAAhB,CAAyB2yE,MAAzB,CAAiCE,OAAjC,CAA2C,CAEpDpmG,QAAQgK,IAAR,CAAc,sFAAd,EAEA,GAAIq/F,QAAS,GAAIiB,cAAJ,EAAb,CACAjB,OAAOc,cAAP,CAAuB,KAAKL,WAA5B,EAEA,GAAIpzE,SAAU2yE,OAAOlC,IAAP,CAAazxE,GAAb,CAAkBwwE,MAAlB,CAA0BzkG,SAA1B,CAAqC2kG,OAArC,CAAd,CAEA,GAAK7yE,OAAL,CAAemD,QAAQnD,OAAR,CAAkBA,OAAlB,CAEf,MAAOmD,QAAP,CAEH,CAjBY,CAmBb+zG,gBAAiB,yBAAWpgC,IAAX,CAAiB92E,OAAjB,CAA0B2yE,MAA1B,CAAkCE,OAAlC,CAA4C,CAEzDpmG,QAAQgK,IAAR,CAAc,8FAAd,EAEA,GAAIq/F,QAAS,GAAIe,kBAAJ,EAAb,CACAf,OAAOc,cAAP,CAAuB,KAAKL,WAA5B,EAEA,GAAIpzE,SAAU2yE,OAAOlC,IAAP,CAAakD,IAAb,CAAmBnE,MAAnB,CAA2BzkG,SAA3B,CAAsC2kG,OAAtC,CAAd,CAEA,GAAK7yE,OAAL,CAAemD,QAAQnD,OAAR,CAAkBA,OAAlB,CAEf,MAAOmD,QAAP,CAEH,CAhCY,CAkCbg0G,sBAAuB,gCAAY,CAE/B1qI,QAAQ+iB,KAAR,CAAe,uFAAf,EAEH,CAtCY,CAwCb4nH,0BAA2B,oCAAY,CAEnC3qI,QAAQ+iB,KAAR,CAAe,2FAAf,EAEH,CA5CY,CAAjB,CAgDA;AAEA,QAAS6nH,UAAT,EAAqB,CAEjB5qI,QAAQ+iB,KAAR,CAAe,wEAAf,EAEA,KAAK8nH,aAAL,CAAqB,SAAWl/G,MAAX,CAAmBryB,MAAnB,CAA4B,CAE7C0G,QAAQgK,IAAR,CAAc,4DAAd,EACA2hB,OAAOqF,OAAP,CAAgB13B,MAAhB,EAEH,CALD,CAOA,KAAKwxI,eAAL,CAAuB,SAAWn/G,MAAX,CAAmBryB,MAAnB,CAA4B,CAE/C0G,QAAQgK,IAAR,CAAc,gEAAd,EACA2hB,OAAOwF,SAAP,CAAkB73B,MAAlB,EAEH,CALD,CAOA,KAAKyxI,UAAL,CAAkB,UAAY,CAE1B/qI,QAAQ+iB,KAAR,CAAe,kEAAf,EAEH,CAJD,CAMH,CAED;AAEA,QAASioH,eAAT,EAA0B,CAEtBhrI,QAAQ+iB,KAAR,CAAe,iFAAf,EAEA,KAAKvhB,UAAL,CAAkBE,SAASuzB,eAAT,CAA0B,8BAA1B,CAA0D,QAA1D,CAAlB,CACA,KAAKu7B,KAAL,CAAa,UAAY,CAAE,CAA3B,CACA,KAAK/wD,MAAL,CAAc,UAAY,CAAE,CAA5B,CACA,KAAKzE,aAAL,CAAqB,UAAY,CAAE,CAAnC,CACA,KAAKC,OAAL,CAAe,UAAY,CAAE,CAA7B,CAEH,CAED;AAEA,GAAIgwI,YAAa,CAEbC,0BAA2B,oCAAW,yBAA4B,CAE9DlrI,QAAQ+iB,KAAR,CAAe,qEAAf,EAEH,CANY,CAQbooH,OAAQ,iBAAW,0BAA6B,CAE5CnrI,QAAQ+iB,KAAR,CAAe,qEAAf,EAEH,CAZY,CAcbqoH,OAAQ,iBAAW,0BAA6B,CAE5CprI,QAAQ+iB,KAAR,CAAe,qEAAf,EAEH,CAlBY,CAAjB,CAsBA;AAEA,QAASsoH,UAAT,EAAqB,CAEjBrrI,QAAQ+iB,KAAR,CAAe,qEAAf,EAEH,CAEDnP,QAAQmjB,qBAAR,CAAgCA,qBAAhC,CACAnjB,QAAQyiB,iBAAR,CAA4BA,iBAA5B,CACAziB,QAAQ9Y,aAAR,CAAwBA,aAAxB,CACA8Y,QAAQ65B,SAAR,CAAoBA,SAApB,CACA75B,QAAQ21B,WAAR,CAAsBA,WAAtB,CACA31B,QAAQizB,aAAR,CAAwBA,aAAxB,CACAjzB,QAAQgzB,WAAR,CAAsBA,WAAtB,CACAhzB,QAAQ66E,OAAR,CAAkBA,OAAlB,CACA76E,QAAQ86E,GAAR,CAAcA,GAAd,CACA96E,QAAQtZ,KAAR,CAAgBA,KAAhB,CACAsZ,QAAQi7E,MAAR,CAAiBA,MAAjB,CACAj7E,QAAQs7E,GAAR,CAAcA,GAAd,CACAt7E,QAAQo8E,WAAR,CAAsBA,WAAtB,CACAp8E,QAAQ27E,QAAR,CAAmBA,QAAnB,CACA37E,QAAQm8E,IAAR,CAAeA,IAAf,CACAn8E,QAAQpW,IAAR,CAAeA,IAAf,CACAoW,QAAQo9E,YAAR,CAAuBA,YAAvB,CACAp9E,QAAQg+E,QAAR,CAAmBA,QAAnB,CACAh+E,QAAQm9E,IAAR,CAAeA,IAAf,CACAn9E,QAAQi+E,MAAR,CAAiBA,MAAjB,CACAj+E,QAAQy+E,KAAR,CAAgBA,KAAhB,CACAz+E,QAAQ2+E,YAAR,CAAuBA,YAAvB,CACA3+E,QAAQujB,WAAR,CAAsBA,WAAtB,CACAvjB,QAAQ++E,iBAAR,CAA4BA,iBAA5B,CACA/+E,QAAQ+jD,WAAR,CAAsBA,WAAtB,CACA/jD,QAAQ04D,aAAR,CAAwBA,aAAxB,CACA14D,QAAQg/E,YAAR,CAAuBA,YAAvB,CACAh/E,QAAQyf,OAAR,CAAkBA,OAAlB,CACAzf,QAAQu1F,uBAAR,CAAkCA,uBAAlC,CACAv1F,QAAQ+1F,iBAAR,CAA4BA,iBAA5B,CACA/1F,QAAQw2F,iBAAR,CAA4BA,iBAA5B,CACAx2F,QAAQ02F,aAAR,CAAwBA,aAAxB,CACA12F,QAAQ+tG,YAAR,CAAuBA,YAAvB,CACA/tG,QAAQioG,cAAR,CAAyBA,cAAzB,CACAjoG,QAAQqoG,oBAAR,CAA+BA,oBAA/B,CACAroG,QAAQmzF,qBAAR,CAAgCA,qBAAhC,CACAnzF,QAAQqyF,cAAR,CAAyBA,cAAzB,CACAryF,QAAQwsG,UAAR,CAAqBA,UAArB,CACAxsG,QAAQi2F,WAAR,CAAsBA,WAAtB,CACAj2F,QAAQkvG,iBAAR,CAA4BA,iBAA5B,CACAlvG,QAAQszG,UAAR,CAAqBA,UAArB,CACAtzG,QAAQqzF,UAAR,CAAqBA,UAArB,CACArzF,QAAQ0oG,MAAR,CAAiBA,MAAjB,CACA1oG,QAAQgsG,WAAR,CAAsBA,WAAtB,CACAhsG,QAAQkyF,KAAR,CAAgBA,KAAhB,CACAlyF,QAAQyzG,WAAR,CAAsBA,WAAtB,CACAzzG,QAAQ0+F,eAAR,CAA0BA,eAA1B,CACA1+F,QAAQ2+F,SAAR,CAAoBA,SAApB,CACA3+F,QAAQ6+F,UAAR,CAAqBA,UAArB,CACA7+F,QAAQ++F,aAAR,CAAwBA,aAAxB,CACA/+F,QAAQw+F,eAAR,CAA0BA,eAA1B,CACAx+F,QAAQ8+F,sBAAR,CAAiCA,sBAAjC,CACA9+F,QAAQ5X,gBAAR,CAA2BA,gBAA3B,CACA4X,QAAQ5W,YAAR,CAAuBA,YAAvB,CACA4W,QAAQy+F,WAAR,CAAsBA,WAAtB,CACAz+F,QAAQu+F,KAAR,CAAgBA,KAAhB,CACAv+F,QAAQ4zG,YAAR,CAAuBA,YAAvB,CACA5zG,QAAQrZ,iBAAR,CAA4BA,iBAA5B,CACAqZ,QAAQujC,kBAAR,CAA6BA,kBAA7B,CACAvjC,QAAQq0G,UAAR,CAAqBA,UAArB,CACAr0G,QAAQgrE,WAAR,CAAsBA,WAAtB,CACAhrE,QAAQqjC,MAAR,CAAiBA,MAAjB,CACArjC,QAAQ60G,aAAR,CAAwBA,aAAxB,CACA70G,QAAQi4G,eAAR,CAA0BA,eAA1B,CACAj4G,QAAQuzG,YAAR,CAAuBA,YAAvB,CACAvzG,QAAQ+4G,aAAR,CAAwBA,aAAxB,CACA/4G,QAAQs2G,KAAR,CAAgBA,KAAhB,CACAt2G,QAAQ0kG,mBAAR,CAA8BA,mBAA9B,CACA1kG,QAAQg/F,mBAAR,CAA8BA,mBAA9B,CACAh/F,QAAQihG,uBAAR,CAAkCA,uBAAlC,CACAjhG,QAAQohG,mBAAR,CAA8BA,mBAA9B,CACAphG,QAAQmhG,kBAAR,CAA6BA,kBAA7B,CACAnhG,QAAQu/F,oBAAR,CAA+BA,oBAA/B,CACAv/F,QAAQw5G,aAAR,CAAwBA,aAAxB,CACAx5G,QAAQ+6G,eAAR,CAA0BA,eAA1B,CACA/6G,QAAQi/F,aAAR,CAAwBA,aAAxB,CACAj/F,QAAQgjG,cAAR,CAAyBA,cAAzB,CACAhjG,QAAQu/G,oBAAR,CAA+BA,oBAA/B,CACAv/G,QAAQsmH,cAAR,CAAyBA,cAAzB,CACAtmH,QAAQ+lG,aAAR,CAAwBA,aAAxB,CACA/lG,QAAQoqH,OAAR,CAAkBA,OAAlB,CACApqH,QAAQqqH,uBAAR,CAAkCA,uBAAlC,CACArqH,QAAQ6tC,cAAR,CAAyBA,cAAzB,CACA7tC,QAAQwkC,QAAR,CAAmBA,QAAnB,CACAxkC,QAAQsqH,0BAAR,CAAqCA,0BAArC,CACAtqH,QAAQ0qH,0BAAR,CAAqCA,0BAArC,CACA1qH,QAAQwqH,iBAAR,CAA4BA,iBAA5B,CACAxqH,QAAQ2qH,wBAAR,CAAmCA,wBAAnC,CACA3qH,QAAQmkC,KAAR,CAAgBA,KAAhB,CACAnkC,QAAQlV,QAAR,CAAmBA,QAAnB,CACAkV,QAAQ4qH,SAAR,CAAoBA,SAApB,CACA5qH,QAAQg/B,MAAR,CAAiBA,MAAjB,CACAh/B,QAAQvH,eAAR,CAA0BA,eAA1B,CACAuH,QAAQmrH,KAAR,CAAgBA,KAAhB,CACAnrH,QAAQghG,2BAAR,CAAsCA,2BAAtC,CACAhhG,QAAQ0iG,iBAAR,CAA4BA,iBAA5B,CACA1iG,QAAQ+iG,mBAAR,CAA8BA,mBAA9B,CACA/iG,QAAQqhG,gBAAR,CAA2BA,gBAA3B,CACArhG,QAAQw/F,WAAR,CAAsBA,WAAtB,CACAx/F,QAAQw4C,QAAR,CAAmBA,QAAnB,CACAx4C,QAAQ7U,IAAR,CAAe6e,KAAf,CACAhK,QAAQhM,SAAR,CAAoBA,SAApB,CACAgM,QAAQ6rH,WAAR,CAAsBA,WAAtB,CACA7rH,QAAQ+oB,KAAR,CAAgBA,KAAhB,CACA/oB,QAAQmqB,OAAR,CAAkBA,OAAlB,CACAnqB,QAAQonB,MAAR,CAAiBA,MAAjB,CACApnB,QAAQi1C,GAAR,CAAcA,GAAd,CACAj1C,QAAQkP,OAAR,CAAkBA,OAAlB,CACAlP,QAAQ4e,OAAR,CAAkBA,OAAlB,CACA5e,QAAQyjB,IAAR,CAAeA,IAAf,CACAzjB,QAAQ8rH,IAAR,CAAeA,IAAf,CACA9rH,QAAQg4C,KAAR,CAAgBA,KAAhB,CACAh4C,QAAQs+B,KAAR,CAAgBA,KAAhB,CACAt+B,QAAQiiB,OAAR,CAAkBA,OAAlB,CACAjiB,QAAQjS,OAAR,CAAkBA,OAAlB,CACAiS,QAAQ9L,OAAR,CAAkBA,OAAlB,CACA8L,QAAQ5O,UAAR,CAAqBA,UAArB,CACA4O,QAAQ4zB,KAAR,CAAgBA,KAAhB,CACA5zB,QAAQ+rH,qBAAR,CAAgCA,qBAAhC,CACA/rH,QAAQgsH,mBAAR,CAA8BA,mBAA9B,CACAhsH,QAAQqsH,eAAR,CAA0BA,eAA1B,CACArsH,QAAQ2sH,cAAR,CAAyBA,cAAzB,CACA3sH,QAAQ8sH,gBAAR,CAA2BA,gBAA3B,CACA9sH,QAAQgtH,mBAAR,CAA8BA,mBAA9B,CACAhtH,QAAQitH,qBAAR,CAAgCA,qBAAhC,CACAjtH,QAAQktH,UAAR,CAAqBA,UAArB,CACAltH,QAAQmtH,eAAR,CAA0BA,eAA1B,CACAntH,QAAQstH,iBAAR,CAA4BA,iBAA5B,CACAttH,QAAQutH,sBAAR,CAAiCA,sBAAjC,CACAvtH,QAAQ1W,YAAR,CAAuBA,YAAvB,CACA0W,QAAQmuH,SAAR,CAAoBA,SAApB,CACAnuH,QAAQouH,UAAR,CAAqBA,UAArB,CACApuH,QAAQquH,WAAR,CAAsBA,WAAtB,CACAruH,QAAQyuH,WAAR,CAAsBA,WAAtB,CACAzuH,QAAQ8uH,UAAR,CAAqBA,UAArB,CACA9uH,QAAQo+F,KAAR,CAAgBA,KAAhB,CACAp+F,QAAQi9F,IAAR,CAAeA,IAAf,CACAj9F,QAAQ0vG,SAAR,CAAoBA,SAApB,CACA1vG,QAAQ+xG,IAAR,CAAeA,IAAf,CACA/xG,QAAQo8F,SAAR,CAAoBA,SAApB,CACAp8F,QAAQ62F,KAAR,CAAgBA,KAAhB,CACA72F,QAAQ+nF,UAAR,CAAqBA,UAArB,CACA/nF,QAAQioE,UAAR,CAAqBA,UAArB,CACAjoE,QAAQi/E,iBAAR,CAA4BA,iBAA5B,CACAj/E,QAAQs/E,kBAAR,CAA6BA,kBAA7B,CACAt/E,QAAQ0/E,wBAAR,CAAmCA,wBAAnC,CACA1/E,QAAQmhF,mBAAR,CAA8BA,mBAA9B,CACAnhF,QAAQohF,yBAAR,CAAoCA,yBAApC,CACAphF,QAAQqhF,kBAAR,CAA6BA,kBAA7B,CACArhF,QAAQshF,wBAAR,CAAmCA,wBAAnC,CACAthF,QAAQuhF,mBAAR,CAA8BA,mBAA9B,CACAvhF,QAAQwhF,yBAAR,CAAoCA,yBAApC,CACAxhF,QAAQyhF,oBAAR,CAA+BA,oBAA/B,CACAzhF,QAAQ0hF,0BAAR,CAAqCA,0BAArC,CACA1hF,QAAQ8/E,kBAAR,CAA6BA,kBAA7B,CACA9/E,QAAQggF,wBAAR,CAAmCA,wBAAnC,CACAhgF,QAAQ2hF,YAAR,CAAuBA,YAAvB,CACA3hF,QAAQiiF,kBAAR,CAA6BA,kBAA7B,CACAjiF,QAAQ6iF,iBAAR,CAA4BA,iBAA5B,CACA7iF,QAAQgjF,uBAAR,CAAkCA,uBAAlC,CACAhjF,QAAQyjF,aAAR,CAAwBA,aAAxB,CACAzjF,QAAQ2jF,mBAAR,CAA8BA,mBAA9B,CACA3jF,QAAQkuF,YAAR,CAAuBA,YAAvB,CACAluF,QAAQouF,kBAAR,CAA6BA,kBAA7B,CACApuF,QAAQ1U,cAAR,CAAyBA,cAAzB,CACA0U,QAAQ4uF,oBAAR,CAA+BA,oBAA/B,CACA5uF,QAAQgvF,YAAR,CAAuBA,YAAvB,CACAhvF,QAAQqvF,kBAAR,CAA6BA,kBAA7B,CACArvF,QAAQkxC,aAAR,CAAwBA,aAAxB,CACAlxC,QAAQxW,mBAAR,CAA8BA,mBAA9B,CACAwW,QAAQyvF,aAAR,CAAwBA,aAAxB,CACAzvF,QAAQ2vF,mBAAR,CAA8BA,mBAA9B,CACA3vF,QAAQgwF,aAAR,CAAwBA,aAAxB,CACAhwF,QAAQiwF,mBAAR,CAA8BA,mBAA9B,CACAjwF,QAAQyoF,eAAR,CAA0BA,eAA1B,CACAzoF,QAAQ0oF,qBAAR,CAAgCA,qBAAhC,CACA1oF,QAAQuwF,aAAR,CAAwBA,aAAxB,CACAvwF,QAAQ0xF,YAAR,CAAuBA,YAAvB,CACA1xF,QAAQ2xF,kBAAR,CAA6BA,kBAA7B,CACA3xF,QAAQhV,gBAAR,CAA2BA,gBAA3B,CACAgV,QAAQgxF,sBAAR,CAAiCA,sBAAjC,CACAhxF,QAAQ4xF,cAAR,CAAyBA,cAAzB,CACA5xF,QAAQ6xF,oBAAR,CAA+BA,oBAA/B,CACA7xF,QAAQjW,WAAR,CAAsBA,WAAtB,CACAiW,QAAQiwC,iBAAR,CAA4BA,iBAA5B,CACAjwC,QAAQuwD,cAAR,CAAyBA,cAAzB,CACAvwD,QAAQ+6E,cAAR,CAAyBA,cAAzB,CACA/6E,QAAQgyF,iBAAR,CAA4BA,iBAA5B,CACAhyF,QAAQq0C,cAAR,CAAyBA,cAAzB,CACAr0C,QAAQswD,cAAR,CAAyBA,cAAzB,CACAtwD,QAAQmwD,oBAAR,CAA+BA,oBAA/B,CACAnwD,QAAQkwD,oBAAR,CAA+BA,oBAA/B,CACAlwD,QAAQ/V,iBAAR,CAA4BA,iBAA5B,CACA+V,QAAQiwD,gBAAR,CAA2BA,gBAA3B,CACAjwD,QAAQgwD,kBAAR,CAA6BA,kBAA7B,CACAhwD,QAAQtW,mBAAR,CAA8BA,mBAA9B,CACAsW,QAAQ8vD,iBAAR,CAA4BA,iBAA5B,CACA9vD,QAAQ+vD,oBAAR,CAA+BA,oBAA/B,CACA/vD,QAAQk0C,iBAAR,CAA4BA,iBAA5B,CACAl0C,QAAQqwD,kBAAR,CAA6BA,kBAA7B,CACArwD,QAAQowD,iBAAR,CAA4BA,iBAA5B,CACApwD,QAAQwxC,QAAR,CAAmBA,QAAnB,CACAxxC,QAAQ+sC,sBAAR,CAAiCA,sBAAjC,CACA/sC,QAAQ8sC,sBAAR,CAAiCA,sBAAjC,CACA9sC,QAAQ6sC,qBAAR,CAAgCA,qBAAhC,CACA7sC,QAAQ4sC,oBAAR,CAA+BA,oBAA/B,CACA5sC,QAAQ2sC,qBAAR,CAAgCA,qBAAhC,CACA3sC,QAAQ0sC,oBAAR,CAA+BA,oBAA/B,CACA1sC,QAAQwsC,2BAAR,CAAsCA,2BAAtC,CACAxsC,QAAQusC,oBAAR,CAA+BA,oBAA/B,CACAvsC,QAAQssC,mBAAR,CAA8BA,mBAA9B,CACAtsC,QAAQorC,eAAR,CAA0BA,eAA1B,CACAprC,QAAQu5F,QAAR,CAAmBA,QAAnB,CACAv5F,QAAQq6F,gBAAR,CAA2BA,gBAA3B,CACAr6F,QAAQm7F,gBAAR,CAA2BA,gBAA3B,CACAn7F,QAAQs7F,iBAAR,CAA4BA,iBAA5B,CACAt7F,QAAQ04F,YAAR,CAAuBA,YAAvB,CACA14F,QAAQw7F,SAAR,CAAoBA,SAApB,CACAx7F,QAAQ27F,UAAR,CAAqBA,UAArB,CACA37F,QAAQ67F,oBAAR,CAA+BA,oBAA/B,CACA77F,QAAQ+7F,qBAAR,CAAgCA,qBAAhC,CACA/7F,QAAQi8F,WAAR,CAAsBA,WAAtB,CACAj8F,QAAQuB,QAAR,CAAmBA,QAAnB,CACAvB,QAAQrQ,KAAR,CAAgBA,KAAhB,CACAqQ,QAAQwB,YAAR,CAAuBA,YAAvB,CACAxB,QAAQyB,YAAR,CAAuBA,YAAvB,CACAzB,QAAQ0B,aAAR,CAAwBA,aAAxB,CACA1B,QAAQ2B,iBAAR,CAA4BA,iBAA5B,CACA3B,QAAQ4B,oBAAR,CAA+BA,oBAA/B,CACA5B,QAAQ6B,qBAAR,CAAgCA,qBAAhC,CACA7B,QAAQ8B,cAAR,CAAyBA,cAAzB,CACA9B,QAAQ+B,YAAR,CAAuBA,YAAvB,CACA/B,QAAQgC,gBAAR,CAA2BA,gBAA3B,CACAhC,QAAQiC,SAAR,CAAoBA,SAApB,CACAjC,QAAQkC,QAAR,CAAmBA,QAAnB,CACAlC,QAAQmC,UAAR,CAAqBA,UAArB,CACAnC,QAAQ7V,WAAR,CAAsBA,WAAtB,CACA6V,QAAQoC,aAAR,CAAwBA,aAAxB,CACApC,QAAQqC,QAAR,CAAmBA,QAAnB,CACArC,QAAQsC,UAAR,CAAqBA,UAArB,CACAtC,QAAQuC,YAAR,CAAuBA,YAAvB,CACAvC,QAAQwC,UAAR,CAAqBA,UAArB,CACAxC,QAAQyC,cAAR,CAAyBA,cAAzB,CACAzC,QAAQ0C,gBAAR,CAA2BA,gBAA3B,CACA1C,QAAQ2C,mBAAR,CAA8BA,mBAA9B,CACA3C,QAAQ4C,gBAAR,CAA2BA,gBAA3B,CACA5C,QAAQ6C,cAAR,CAAyBA,cAAzB,CACA7C,QAAQ8C,WAAR,CAAsBA,WAAtB,CACA9C,QAAQ+C,gBAAR,CAA2BA,gBAA3B,CACA/C,QAAQgD,uBAAR,CAAkCA,uBAAlC,CACAhD,QAAQiD,WAAR,CAAsBA,WAAtB,CACAjD,QAAQkD,WAAR,CAAsBA,WAAtB,CACAlD,QAAQmD,UAAR,CAAqBA,UAArB,CACAnD,QAAQoD,SAAR,CAAoBA,SAApB,CACApD,QAAQqD,cAAR,CAAyBA,cAAzB,CACArD,QAAQsD,sBAAR,CAAiCA,sBAAjC,CACAtD,QAAQuD,cAAR,CAAyBA,cAAzB,CACAvD,QAAQwD,sBAAR,CAAiCA,sBAAjC,CACAxD,QAAQyD,cAAR,CAAyBA,cAAzB,CACAzD,QAAQ0D,sBAAR,CAAiCA,sBAAjC,CACA1D,QAAQ2D,cAAR,CAAyBA,cAAzB,CACA3D,QAAQ4D,sBAAR,CAAiCA,sBAAjC,CACA5D,QAAQ6D,sBAAR,CAAiCA,sBAAjC,CACA7D,QAAQ8D,UAAR,CAAqBA,UAArB,CACA9D,QAAQ+D,WAAR,CAAsBA,WAAtB,CACA/D,QAAQgE,SAAR,CAAoBA,SAApB,CACAhE,QAAQiE,cAAR,CAAyBA,cAAzB,CACAjE,QAAQkE,UAAR,CAAqBA,UAArB,CACAlE,QAAQmE,iBAAR,CAA4BA,iBAA5B,CACAnE,QAAQoE,YAAR,CAAuBA,YAAvB,CACApE,QAAQqE,aAAR,CAAwBA,aAAxB,CACArE,QAAQsE,iBAAR,CAA4BA,iBAA5B,CACAtE,QAAQuE,YAAR,CAAuBA,YAAvB,CACAvE,QAAQwE,YAAR,CAAuBA,YAAvB,CACAxE,QAAQyE,aAAR,CAAwBA,aAAxB,CACAzE,QAAQ0E,iBAAR,CAA4BA,iBAA5B,CACA1E,QAAQ2E,mBAAR,CAA8BA,mBAA9B,CACA3E,QAAQ4E,qBAAR,CAAgCA,qBAAhC,CACA5E,QAAQ6E,iBAAR,CAA4BA,iBAA5B,CACA7E,QAAQ8E,SAAR,CAAoBA,SAApB,CACA9E,QAAQ+E,qBAAR,CAAgCA,qBAAhC,CACA/E,QAAQgF,qBAAR,CAAgCA,qBAAhC,CACAhF,QAAQiF,gCAAR,CAA2CA,gCAA3C,CACAjF,QAAQkF,gCAAR,CAA2CA,gCAA3C,CACAlF,QAAQmF,0BAAR,CAAqCA,0BAArC,CACAnF,QAAQoF,uBAAR,CAAkCA,uBAAlC,CACApF,QAAQqF,uBAAR,CAAkCA,uBAAlC,CACArF,QAAQsF,cAAR,CAAyBA,cAAzB,CACAtF,QAAQuF,mBAAR,CAA8BA,mBAA9B,CACAvF,QAAQwF,sBAAR,CAAiCA,sBAAjC,CACAxF,QAAQyF,aAAR,CAAwBA,aAAxB,CACAzF,QAAQ0F,0BAAR,CAAqCA,0BAArC,CACA1F,QAAQ2F,yBAAR,CAAoCA,yBAApC,CACA3F,QAAQ4F,YAAR,CAAuBA,YAAvB,CACA5F,QAAQ6F,yBAAR,CAAoCA,yBAApC,CACA7F,QAAQ8F,wBAAR,CAAmCA,wBAAnC,CACA9F,QAAQ+F,gBAAR,CAA2BA,gBAA3B,CACA/F,QAAQgG,QAAR,CAAmBA,QAAnB,CACAhG,QAAQiG,SAAR,CAAoBA,SAApB,CACAjG,QAAQkG,iBAAR,CAA4BA,iBAA5B,CACAlG,QAAQmG,OAAR,CAAkBA,OAAlB,CACAnG,QAAQoG,eAAR,CAA0BA,eAA1B,CACApG,QAAQqG,SAAR,CAAoBA,SAApB,CACArG,QAAQsG,aAAR,CAAwBA,aAAxB,CACAtG,QAAQuG,qBAAR,CAAgCA,qBAAhC,CACAvG,QAAQwG,qBAAR,CAAgCA,qBAAhC,CACAxG,QAAQyG,oBAAR,CAA+BA,oBAA/B,CACAzG,QAAQ0G,kBAAR,CAA6BA,kBAA7B,CACA1G,QAAQ2G,WAAR,CAAsBA,WAAtB,CACA3G,QAAQ4G,SAAR,CAAoBA,SAApB,CACA5G,QAAQ6G,UAAR,CAAqBA,UAArB,CACA7G,QAAQ8G,eAAR,CAA0BA,eAA1B,CACA9G,QAAQ+G,oBAAR,CAA+BA,oBAA/B,CACA/G,QAAQgH,UAAR,CAAqBA,UAArB,CACAhH,QAAQiH,WAAR,CAAsBA,WAAtB,CACAjH,QAAQkH,kBAAR,CAA6BA,kBAA7B,CACAlH,QAAQmH,oBAAR,CAA+BA,oBAA/B,CACAnH,QAAQoH,qBAAR,CAAgCA,qBAAhC,CACApH,QAAQqH,qBAAR,CAAgCA,qBAAhC,CACArH,QAAQsH,qBAAR,CAAgCA,qBAAhC,CACAtH,QAAQuH,uBAAR,CAAkCA,uBAAlC,CACAvH,QAAQwH,uBAAR,CAAkCA,uBAAlC,CACAxH,QAAQyH,wBAAR,CAAmCA,wBAAnC,CACAzH,QAAQ0H,wBAAR,CAAmCA,wBAAnC,CACA1H,QAAQ2H,eAAR,CAA0BA,eAA1B,CACA3H,QAAQ4H,oBAAR,CAA+BA,oBAA/B,CACA5H,QAAQ6H,oBAAR,CAA+BA,oBAA/B,CACA7H,QAAQ8H,oBAAR,CAA+BA,oBAA/B,CACA9H,QAAQ+H,oBAAR,CAA+BA,oBAA/B,CACA/H,QAAQgI,oBAAR,CAA+BA,oBAA/B,CACAhI,QAAQiI,oBAAR,CAA+BA,oBAA/B,CACAjI,QAAQkI,oBAAR,CAA+BA,oBAA/B,CACAlI,QAAQmI,oBAAR,CAA+BA,oBAA/B,CACAnI,QAAQoI,qBAAR,CAAgCA,qBAAhC,CACApI,QAAQqI,qBAAR,CAAgCA,qBAAhC,CACArI,QAAQsI,qBAAR,CAAgCA,qBAAhC,CACAtI,QAAQuI,sBAAR,CAAiCA,sBAAjC,CACAvI,QAAQwI,sBAAR,CAAiCA,sBAAjC,CACAxI,QAAQyI,sBAAR,CAAiCA,sBAAjC,CACAzI,QAAQ0I,QAAR,CAAmBA,QAAnB,CACA1I,QAAQ2I,UAAR,CAAqBA,UAArB,CACA3I,QAAQ4I,YAAR,CAAuBA,YAAvB,CACA5I,QAAQ6I,mBAAR,CAA8BA,mBAA9B,CACA7I,QAAQ8I,iBAAR,CAA4BA,iBAA5B,CACA9I,QAAQ+I,iBAAR,CAA4BA,iBAA5B,CACA/I,QAAQgJ,mBAAR,CAA8BA,mBAA9B,CACAhJ,QAAQiJ,eAAR,CAA0BA,eAA1B,CACAjJ,QAAQkJ,gBAAR,CAA2BA,gBAA3B,CACAlJ,QAAQmJ,iBAAR,CAA4BA,iBAA5B,CACAnJ,QAAQoJ,qBAAR,CAAgCA,qBAAhC,CACApJ,QAAQqJ,mBAAR,CAA8BA,mBAA9B,CACArJ,QAAQsJ,cAAR,CAAyBA,cAAzB,CACAtJ,QAAQuJ,YAAR,CAAuBA,YAAvB,CACAvJ,QAAQwJ,aAAR,CAAwBA,aAAxB,CACAxJ,QAAQyJ,YAAR,CAAuBA,YAAvB,CACAzJ,QAAQ0J,cAAR,CAAyBA,cAAzB,CACA1J,QAAQ2J,aAAR,CAAwBA,aAAxB,CACA3J,QAAQ4J,cAAR,CAAyBA,cAAzB,CACA5J,QAAQ6J,YAAR,CAAuBA,YAAvB,CACA7J,QAAQ8J,iBAAR,CAA4BA,iBAA5B,CACA9J,QAAQ+J,gBAAR,CAA2BA,gBAA3B,CACA/J,QAAQ03H,YAAR,CAAuB3tI,WAAvB,CACAiW,QAAQ+uH,KAAR,CAAgBA,KAAhB,CACA/uH,QAAQgvH,SAAR,CAAoBA,SAApB,CACAhvH,QAAQivH,UAAR,CAAqBA,UAArB,CACAjvH,QAAQkvH,gBAAR,CAA2BA,gBAA3B,CACAlvH,QAAQmvH,aAAR,CAAwBA,aAAxB,CACAnvH,QAAQ6qH,UAAR,CAAqBA,UAArB,CACA7qH,QAAQovH,QAAR,CAAmBA,QAAnB,CACApvH,QAAQqvH,cAAR,CAAyBA,cAAzB,CACArvH,QAAQsvH,kBAAR,CAA6BA,kBAA7B,CACAtvH,QAAQuvH,qBAAR,CAAgCA,qBAAhC,CACAvvH,QAAQwvH,sBAAR,CAAiCA,sBAAjC,CACAxvH,QAAQyvH,MAAR,CAAiBA,MAAjB,CACAzvH,QAAQ0vH,sBAAR,CAAiCA,sBAAjC,CACA1vH,QAAQ2vH,aAAR,CAAwBA,aAAxB,CACA3vH,QAAQ4vH,cAAR,CAAyBA,cAAzB,CACA5vH,QAAQ6vH,qBAAR,CAAgCA,qBAAhC,CACA7vH,QAAQ8vH,cAAR,CAAyBA,cAAzB,CACA9vH,QAAQ+vH,eAAR,CAA0BA,eAA1B,CACA/vH,QAAQgwH,cAAR,CAAyBA,cAAzB,CACAhwH,QAAQiwH,eAAR,CAA0BA,eAA1B,CACAjwH,QAAQkwH,gBAAR,CAA2BA,gBAA3B,CACAlwH,QAAQmwH,gBAAR,CAA2BA,gBAA3B,CACAnwH,QAAQywH,kBAAR,CAA6BA,kBAA7B,CACAzwH,QAAQ0wH,YAAR,CAAuBA,YAAvB,CACA1wH,QAAQ2wH,MAAR,CAAiBA,MAAjB,CACA3wH,QAAQ+wH,UAAR,CAAqBA,UAArB,CACA/wH,QAAQgxH,iBAAR,CAA4BA,iBAA5B,CACAhxH,QAAQixH,WAAR,CAAsBA,WAAtB,CACAjxH,QAAQmxH,eAAR,CAA0BA,eAA1B,CACAnxH,QAAQoxH,SAAR,CAAoBA,SAApB,CACApxH,QAAQqxH,mBAAR,CAA8BA,mBAA9B,CACArxH,QAAQ02H,aAAR,CAAwBA,aAAxB,CACA12H,QAAQ42H,UAAR,CAAqBA,UAArB,CACA52H,QAAQg3H,SAAR,CAAoBA,SAApB,CACAh3H,QAAQo3H,cAAR,CAAyBA,cAAzB,CACAp3H,QAAQq3H,UAAR,CAAqBA,UAArB,CACAr3H,QAAQy3H,SAAR,CAAoBA,SAApB,CAEAl/H,OAAOgI,cAAP,CAAsBP,OAAtB,CAA+B,YAA/B,CAA6C,CAAEjH,MAAO,IAAT,CAA7C,EAEH,CA5z7CA,CAAD,C;;;;;;;;;;;;;;ACAA;;AACA;;AACA;;AAEA;;;;;;AAEA,IAAItS,kBAAJ,G;;;;;;;;;;;;;;ACNA;;;;;AAKA,IAAIkxI,UAAUrkI,OAAOqkI,MAArB;AACA,IAAIC,YAAY,CAAhB;;AAEA,IAAI,CAACD,OAAL,EAAa;AACXA,YAAS,SAASA,QAAT,CAAgBz0F,GAAhB,EAAqB;AAC5B,kBAAYA,GAAZ,SAAmB/3C,KAAKmT,KAAL,CAAWnT,KAAKmC,MAAL,KAAgB,GAA3B,CAAnB,SAAsD,EAAEsqI,SAAxD;AACD,GAFD;;AAIAD,UAAOE,QAAP,GAAkBF,QAAO,iBAAP,CAAlB;AACD;;AAEDrkI,OAAOqkI,MAAP,GAAgBA,OAAhB,C;;;;;;;;;;;;;;AChBA;;IAAYnyI,K;;;;AAEZ,IAAIsyI,UAAUtyI,MAAMkH,KAAN,CAAY4L,SAAZ,CAAsB3L,EAApC;AACAnH,MAAMkH,KAAN,CAAY4L,SAAZ,CAAsB3L,EAAtB,GAA2B,UAAUs+H,MAAV,EAAkBtvH,QAAlB,EAA4B;AACnDA,gBAAY,IAAZ;AACA,WAAOm8H,QAAQ97H,IAAR,CAAa,IAAb,EAAmBivH,MAAnB,EAA2BtvH,QAA3B,CAAP;AACH,CAHD,C;;;;;;;;;;;;;;;;ACHA,QAAS,CAAC,UAASo8H,OAAT,EAAkB;AAAE;AAC9B,SAD4B,CAClB;AACV,SAAU,IAAIC,mBAAmB,EAAvB;;AAEV,SAJ4B,CAIlB;AACV,SAAU,SAASC,mBAAT,CAA6BC,QAA7B,EAAuC;;AAEjD,UAFiD,CAEtC;AACX,UAAW,IAAGF,iBAAiBE,QAAjB,CAAH;AACX,WAAY,OAAOF,iBAAiBE,QAAjB,EAA2Bl4H,OAAlC;;AAEZ,UANiD,CAMtC;AACX,UAAW,IAAIC,SAAS+3H,iBAAiBE,QAAjB,IAA6B;AACrD,WAAYl4H,SAAS,EADgC;AAErD,WAAY/Z,IAAIiyI,QAFqC;AAGrD,WAAYtiC,QAAQ;AACpB;;AAEA,WANqD,CAM1C;AACX,WAPqD,EAA1C,CAOAmiC,QAAQG,QAAR,EAAkBl8H,IAAlB,CAAuBiE,OAAOD,OAA9B,EAAuCC,MAAvC,EAA+CA,OAAOD,OAAtD,EAA+Di4H,mBAA/D;;AAEX,UAhBiD,CAgBtC;AACX,UAAWh4H,OAAO21F,MAAP,GAAgB,IAAhB;;AAEX,UAnBiD,CAmBtC;AACX,UAAW,OAAO31F,OAAOD,OAAd;AACX;AAAW;;AAGX,SA7B4B,CA6BlB;AACV,SAAUi4H,oBAAoB75H,CAApB,GAAwB25H,OAAxB;;AAEV,SAhC4B,CAgClB;AACV,SAAUE,oBAAoBhpH,CAApB,GAAwB+oH,gBAAxB;;AAEV,SAnC4B,CAmClB;AACV,SAAUC,oBAAoBz/G,CAApB,GAAwB,EAAxB;;AAEV,SAtC4B,CAsClB;AACV,SAAU,OAAOy/G,oBAAoB,CAApB,CAAP;AACV;AAAU,CAxCD;AAyCT;AACA,QAAU;AACV;AACA,KAAO,UAASh4H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA,KAAIE,WAAWF,oBAAoB,CAApB,CAAf;;AAEA,KAAIG,UAAUC,wBAAwBF,QAAxB,CAAd;;AAEA,UAASE,uBAAT,CAAiCxyF,GAAjC,EAAsC;AAAE,MAAIA,OAAOA,IAAIyyF,UAAf,EAA2B;AAAE,UAAOzyF,GAAP;AAAY,GAAzC,MAA+C;AAAE,OAAI0yF,SAAS,EAAb,CAAiB,IAAI1yF,OAAO,IAAX,EAAiB;AAAE,SAAK,IAAI3C,GAAT,IAAgB2C,GAAhB,EAAqB;AAAE,SAAIttC,OAAOD,SAAP,CAAiBwI,cAAjB,CAAgC9E,IAAhC,CAAqC6pC,GAArC,EAA0C3C,GAA1C,CAAJ,EAAoDq1F,OAAOr1F,GAAP,IAAc2C,IAAI3C,GAAJ,CAAd;AAAwB;AAAE,IAACq1F,OAAOC,OAAP,GAAiB3yF,GAAjB,CAAsB,OAAO0yF,MAAP;AAAe;AAAE;;AAE1Q,KAAIz4H,SAAS24H,UAAb;;AAEA,UAASC,MAAT,GAAkB;AAChBN,UAAQtsI,gBAAR,GAA2BssI,QAAQrxI,MAAR,CAAe+E,gBAAf,GAAkC,UAAU0H,IAAV,EAAgBuN,QAAhB,EAA0B;AACrFq3H,WAAQtqI,QAAR,CAAiBhC,gBAAjB,CAAkC0H,IAAlC,EAAwCuN,QAAxC;AACD,GAFD;AAGAq3H,UAAQrlI,mBAAR,GAA8BqlI,QAAQrxI,MAAR,CAAegM,mBAAf,GAAqC,UAAUS,IAAV,EAAgBuN,QAAhB,EAA0B;AAC3Fq3H,WAAQtqI,QAAR,CAAiBiF,mBAAjB,CAAqCS,IAArC,EAA2CuN,QAA3C;AACD,GAFD;;AAIA,MAAI43H,wBAAwBnhH,GAAGohH,iBAAH,EAA5B;AAAA,MACIC,WAAWF,sBAAsBE,QADrC;;AAGA;;;AAGA,MAAI,OAAOC,oBAAP,KAAgC,WAAhC,IAA+CD,aAAa,UAAhE,EAA4E;AAC1E,QAAK,IAAI31F,GAAT,IAAgBk1F,OAAhB,EAAyB;AACvB,QAAIW,aAAaxgI,OAAOygI,wBAAP,CAAgCl5H,MAAhC,EAAwCojC,GAAxC,CAAjB;;AAEA,QAAI,CAAC61F,UAAD,IAAeA,WAAWE,YAAX,KAA4B,IAA/C,EAAqD;AACnD1gI,YAAOgI,cAAP,CAAsBjN,MAAtB,EAA8B4vC,GAA9B,EAAmC;AACjCnqC,aAAOq/H,QAAQl1F,GAAR;AAD0B,MAAnC;AAGD;AACF;;AAED,QAAK,IAAIg2F,IAAT,IAAiBd,QAAQtqI,QAAzB,EAAmC;AACjC,QAAIqrI,cAAc5gI,OAAOygI,wBAAP,CAAgCl5H,OAAOhS,QAAvC,EAAiDorI,IAAjD,CAAlB;;AAEA,QAAI,CAACC,WAAD,IAAgBA,YAAYF,YAAZ,KAA6B,IAAjD,EAAuD;AACrD1gI,YAAOgI,cAAP,CAAsBT,OAAOhS,QAA7B,EAAuCorI,IAAvC,EAA6C;AAC3CngI,aAAOq/H,QAAQtqI,QAAR,CAAiBorI,IAAjB;AADoC,MAA7C;AAGD;AACF;AACD5lI,UAAOmsC,MAAP,GAAgBnsC,MAAhB;AACD,GArBD,MAqBO;AACL,QAAK,IAAI8lI,KAAT,IAAkBhB,OAAlB,EAA2B;AACzBt4H,WAAOs5H,KAAP,IAAgBhB,QAAQgB,KAAR,CAAhB;AACD;AACDt5H,UAAOxM,MAAP,GAAgB8kI,OAAhB;AACA9kI,YAASwM,MAAT;AACAxM,UAAO5K,GAAP,GAAa4K,OAAOmsC,MAAP,GAAgBnsC,MAA7B;AACD;AACF;;AAED,KAAI,CAACmlI,WAAWY,mBAAhB,EAAqC;AACnCZ,aAAWY,mBAAX,GAAiC,IAAjC;AACAX;AACD;;AAEF;AAAO,CAhEG;AAiEV;AACA,KAAO,UAASz4H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;AAGAiH,SAAQs5H,oBAAR,GAA+Bt5H,QAAQ9X,qBAAR,GAAgC8X,QAAQu5H,aAAR,GAAwBv5H,QAAQw5H,YAAR,GAAuBx5H,QAAQy5H,WAAR,GAAsBz5H,QAAQyzF,UAAR,GAAqBzzF,QAAQjZ,MAAR,GAAiBiZ,QAAQ05H,QAAR,GAAmB15H,QAAQ25H,YAAR,GAAuB35H,QAAQ45H,WAAR,GAAsB55H,QAAQ65H,UAAR,GAAqB75H,QAAQs2G,KAAR,GAAgBt2G,QAAQ85H,KAAR,GAAgB95H,QAAQ+5H,SAAR,GAAoB/5H,QAAQy0F,cAAR,GAAyBz0F,QAAQqyE,SAAR,GAAoBryE,QAAQlS,QAAR,GAAmBD,SAAnX;;AAEA,KAAImsI,oBAAoB/B,oBAAoB,CAApB,CAAxB;;AAEA1/H,QAAOnJ,IAAP,CAAY4qI,iBAAZ,EAA+BxxC,OAA/B,CAAuC,UAAUtlD,GAAV,EAAe;AACpD,MAAIA,QAAQ,SAAR,IAAqBA,QAAQ,YAAjC,EAA+C;AAC/C3qC,SAAOgI,cAAP,CAAsBP,OAAtB,EAA+BkjC,GAA/B,EAAoC;AAClCpD,eAAY,IADsB;AAElCjnC,QAAK,SAASA,GAAT,GAAe;AAClB,WAAOmhI,kBAAkB92F,GAAlB,CAAP;AACD;AAJiC,GAApC;AAMD,EARD;;AAUA,KAAI+2F,eAAehC,oBAAoB,CAApB,CAAnB;;AAEA1/H,QAAOnJ,IAAP,CAAY6qI,YAAZ,EAA0BzxC,OAA1B,CAAkC,UAAUtlD,GAAV,EAAe;AAC/C,MAAIA,QAAQ,SAAR,IAAqBA,QAAQ,YAAjC,EAA+C;AAC/C3qC,SAAOgI,cAAP,CAAsBP,OAAtB,EAA+BkjC,GAA/B,EAAoC;AAClCpD,eAAY,IADsB;AAElCjnC,QAAK,SAASA,GAAT,GAAe;AAClB,WAAOohI,aAAa/2F,GAAb,CAAP;AACD;AAJiC,GAApC;AAMD,EARD;;AAUA,KAAIg3F,UAAUjC,oBAAoB,CAApB,CAAd;;AAEA,KAAIkC,WAAWC,uBAAuBF,OAAvB,CAAf;;AAEA,KAAIG,aAAapC,oBAAoB,EAApB,CAAjB;;AAEA,KAAIqC,aAAaF,uBAAuBC,UAAvB,CAAjB;;AAEA,KAAIE,cAActC,oBAAoB,EAApB,CAAlB;;AAEA,KAAIuC,cAAcJ,uBAAuBG,WAAvB,CAAlB;;AAEA,KAAIE,mBAAmBxC,oBAAoB,EAApB,CAAvB;;AAEA,KAAIyC,mBAAmBN,uBAAuBK,gBAAvB,CAAvB;;AAEA,KAAIE,cAAc1C,oBAAoB,EAApB,CAAlB;;AAEA,KAAI2C,cAAcR,uBAAuBO,WAAvB,CAAlB;;AAEA,KAAIE,UAAU5C,oBAAoB,EAApB,CAAd;;AAEA,KAAI6C,UAAUV,uBAAuBS,OAAvB,CAAd;;AAEA,KAAIE,UAAU9C,oBAAoB,EAApB,CAAd;;AAEA,KAAI+C,UAAUZ,uBAAuBW,OAAvB,CAAd;;AAEA,KAAIE,eAAehD,oBAAoB,EAApB,CAAnB;;AAEA,KAAIiD,eAAed,uBAAuBa,YAAvB,CAAnB;;AAEA,KAAIE,gBAAgBlD,oBAAoB,CAApB,CAApB;;AAEA,KAAImD,gBAAgBhB,uBAAuBe,aAAvB,CAApB;;AAEA,KAAIE,iBAAiBpD,oBAAoB,EAApB,CAArB;;AAEA,KAAIqD,iBAAiBlB,uBAAuBiB,cAAvB,CAArB;;AAEA,KAAIE,aAAatD,oBAAoB,EAApB,CAAjB;;AAEA,KAAIuD,aAAapB,uBAAuBmB,UAAvB,CAAjB;;AAEA,UAASnB,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F7lC,SAAQlS,QAAR,GAAmBwsI,WAAW9B,OAA9B;AACAx4H,SAAQqyE,SAAR,GAAoBmoD,YAAYhC,OAAhC;AACAx4H,SAAQy0F,cAAR,GAAyBimC,iBAAiBlC,OAA1C;AACAx4H,SAAQ+5H,SAAR,GAAoBa,YAAYpC,OAAhC;AACAx4H,SAAQ85H,KAAR,GAAgBgB,QAAQtC,OAAxB;AACAx4H,SAAQs2G,KAAR,GAAgB0kB,QAAQxC,OAAxB;AACAx4H,SAAQ65H,UAAR,GAAqBqB,aAAa1C,OAAlC;AACAx4H,SAAQ45H,WAAR,GAAsBwB,cAAc5C,OAApC;AACAx4H,SAAQ25H,YAAR,GAAuB2B,eAAe9C,OAAtC;AACAx4H,SAAQ05H,QAAR,GAAmB8B,WAAWhD,OAA9B;;AAGA;AACA,KAAIzxI,SAAS,IAAIozI,SAAS3B,OAAb,EAAb;;AAEAx4H,SAAQjZ,MAAR,GAAiBA,MAAjB;AACAiZ,SAAQyzF,UAAR,GAAqBA,UAArB;AACAzzF,SAAQy5H,WAAR,GAAsBA,WAAtB;AACAz5H,SAAQw5H,YAAR,GAAuBA,YAAvB;AACAx5H,SAAQu5H,aAAR,GAAwBA,aAAxB;AACAv5H,SAAQ9X,qBAAR,GAAgCA,qBAAhC;AACA8X,SAAQs5H,oBAAR,GAA+BA,oBAA/B;;AAED;AAAO,CAxKG;AAyKV;AACA,KAAO,UAASr5H,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAI4/H,wBAAwBnhH,GAAGohH,iBAAH,EAA5B;AAAA,KACI6C,cAAc9C,sBAAsB8C,WADxC;AAAA,KAEIC,eAAe/C,sBAAsB+C,YAFzC;AAAA,KAGIC,mBAAmBhD,sBAAsBgD,gBAH7C;;AAKA,KAAI/0I,aAAaoZ,QAAQpZ,UAAR,GAAqB60I,WAAtC;AACA,KAAI50I,cAAcmZ,QAAQnZ,WAAR,GAAsB60I,YAAxC;AACA17H,SAAQ27H,gBAAR,GAA2BA,gBAA3B;AACA,KAAIC,SAAS57H,QAAQ47H,MAAR,GAAiB;AAC5BC,cAAYj1I,UADgB;AAE5Bk1I,eAAaj1I;AAFe,EAA9B;AAIA,KAAIoT,cAAc+F,QAAQ/F,WAAR,GAAsB;AACtCH,OAAK,SAASA,GAAT,GAAe;AAClB,UAAO5N,KAAK4N,GAAL,KAAa,IAApB;AACD;AAHqC,EAAxC;AAKA,KAAIiiI,eAAe/7H,QAAQ+7H,YAAR,GAAuB,IAA1C;AACA,KAAIC,cAAch8H,QAAQg8H,WAAR,GAAsB,IAAxC;AACA,KAAIC,aAAaj8H,QAAQi8H,UAAR,GAAqB,IAAtC;;AAED;AAAO,CAvMG;AAwMV;AACA,KAAO,UAASh8H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;AAGAiH,SAAQohB,iBAAR,GAA4BphB,QAAQ+iE,gBAAR,GAA2Bl1E,SAAvD;;AAEA,KAAIutI,gBAAgBnD,oBAAoB,CAApB,CAApB;;AAEA,KAAIiE,gBAAgB9B,uBAAuBgB,aAAvB,CAApB;;AAEA,UAAShB,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASs2F,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,UAAS27H,0BAAT,CAAoCC,IAApC,EAA0CtgI,IAA1C,EAAgD;AAAE,MAAI,CAACsgI,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAuF,GAAC,OAAOvgI,SAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EsgI,IAAjF;AAAuF;;AAE9O,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIh8H,SAAJ,CAAc,qEAAoEg8H,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAqG,GAACD,SAASnkI,SAAT,GAAqBC,OAAOC,MAAP,CAAckkI,cAAcA,WAAWpkI,SAAvC,EAAkD,EAAEI,aAAa,EAAEK,OAAO0jI,QAAT,EAAmB38F,YAAY,KAA/B,EAAsC68F,UAAU,IAAhD,EAAsD1D,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIyD,UAAJ,EAAgBnkI,OAAOqkI,cAAP,GAAwBrkI,OAAOqkI,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAuG;;AAE5e,KAAI35D,mBAAmB/iE,QAAQ+iE,gBAAR,GAA2B,UAAU+5D,YAAV,EAAwB;AACxEN,YAAUz5D,gBAAV,EAA4B+5D,YAA5B;;AAEA,WAAS/5D,gBAAT,GAA4B;AAC1Bo5D,mBAAgB,IAAhB,EAAsBp5D,gBAAtB;;AAEA,UAAOs5D,2BAA2B,IAA3B,EAAiC,CAACt5D,iBAAiB85D,SAAjB,IAA8BtkI,OAAOwkI,cAAP,CAAsBh6D,gBAAtB,CAA/B,EAAwE/mE,IAAxE,CAA6E,IAA7E,EAAmF,KAAnF,CAAjC,CAAP;AACD;;AAED,SAAO+mE,gBAAP;AACD,EAViD,CAUhDm5D,cAAc1D,OAVkC,CAAlD;;AAYA,KAAIp3G,oBAAoBphB,QAAQohB,iBAAR,GAA4B,UAAU+5G,aAAV,EAAyB;AAC3EqB,YAAUp7G,iBAAV,EAA6B+5G,aAA7B;;AAEA,WAAS/5G,iBAAT,GAA6B;AAC3B+6G,mBAAgB,IAAhB,EAAsB/6G,iBAAtB;;AAEA,UAAOi7G,2BAA2B,IAA3B,EAAiC,CAACj7G,kBAAkBy7G,SAAlB,IAA+BtkI,OAAOwkI,cAAP,CAAsB37G,iBAAtB,CAAhC,EAA0EplB,IAA1E,CAA+E,IAA/E,EAAqF,QAArF,CAAjC,CAAP;AACD;;AAED,SAAOolB,iBAAP;AACD,EAVmD,CAUlD86G,cAAc1D,OAVoC,CAApD;;AAYD;AAAO,CAtPG;AAuPV;AACA,KAAO,UAASv4H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIikI,eAAe,YAAY;AAAE,WAASrkI,gBAAT,CAA0BzP,MAA1B,EAAkC+zI,KAAlC,EAAyC;AAAE,QAAK,IAAIxjI,IAAI,CAAb,EAAgBA,IAAIwjI,MAAMpnI,MAA1B,EAAkC4D,GAAlC,EAAuC;AAAE,QAAIs/H,aAAakE,MAAMxjI,CAAN,CAAjB,CAA2Bs/H,WAAWj5F,UAAX,GAAwBi5F,WAAWj5F,UAAX,IAAyB,KAAjD,CAAwDi5F,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAW4D,QAAX,GAAsB,IAAtB,CAA4BpkI,OAAOgI,cAAP,CAAsBrX,MAAtB,EAA8B6vI,WAAW71F,GAAzC,EAA8C61F,UAA9C;AAA2D;AAAE,GAAC,OAAO,UAAUqD,WAAV,EAAuBc,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBvkI,iBAAiByjI,YAAY9jI,SAA7B,EAAwC4kI,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBxkI,iBAAiByjI,WAAjB,EAA8Be,WAA9B,EAA4C,OAAOf,WAAP;AAAoB,GAA/M;AAAiN,EAA3hB,EAAnB;;AAEA,KAAIgB,YAAYnF,oBAAoB,CAApB,CAAhB;;AAEA,KAAIoF,YAAYjD,uBAAuBgD,SAAvB,CAAhB;;AAEA,KAAIE,QAAQrF,oBAAoB,CAApB,CAAZ;;AAEA,KAAI+B,oBAAoB/B,oBAAoB,CAApB,CAAxB;;AAEA,UAASmC,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASs2F,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,UAAS27H,0BAAT,CAAoCC,IAApC,EAA0CtgI,IAA1C,EAAgD;AAAE,MAAI,CAACsgI,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAuF,GAAC,OAAOvgI,SAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EsgI,IAAjF;AAAuF;;AAE9O,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIh8H,SAAJ,CAAc,qEAAoEg8H,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAqG,GAACD,SAASnkI,SAAT,GAAqBC,OAAOC,MAAP,CAAckkI,cAAcA,WAAWpkI,SAAvC,EAAkD,EAAEI,aAAa,EAAEK,OAAO0jI,QAAT,EAAmB38F,YAAY,KAA/B,EAAsC68F,UAAU,IAAhD,EAAsD1D,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIyD,UAAJ,EAAgBnkI,OAAOqkI,cAAP,GAAwBrkI,OAAOqkI,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAuG;;AAE5e,KAAI9C,cAAc,UAAU2D,QAAV,EAAoB;AACpCf,YAAU5C,WAAV,EAAuB2D,QAAvB;;AAEA,WAAS3D,WAAT,GAAuB;AACrB,OAAI4D,UAAU5gI,UAAU/G,MAAV,GAAmB,CAAnB,IAAwB+G,UAAU,CAAV,MAAiB/O,SAAzC,GAAqD+O,UAAU,CAAV,CAArD,GAAoE,EAAlF;;AAEAu/H,mBAAgB,IAAhB,EAAsBvC,WAAtB;;AAEA,OAAI1zI,QAAQm2I,2BAA2B,IAA3B,EAAiC,CAACzC,YAAYiD,SAAZ,IAAyBtkI,OAAOwkI,cAAP,CAAsBnD,WAAtB,CAA1B,EAA8D59H,IAA9D,CAAmE,IAAnE,CAAjC,CAAZ;;AAEA9V,SAAMu3I,SAAN,GAAkB,EAAlB;AACAv3I,SAAMw3I,QAAN,GAAiB,EAAjB;AACAx3I,SAAMiuC,KAAN,GAAc;AACZprC,WAAOixI,kBAAkBpzI,UAAlB,GAA+B,IAD1B;AAEZoC,YAAQgxI,kBAAkBnzI,WAAlB,GAAgC;AAF5B,IAAd;AAIAX,SAAMy3I,YAAN,GAAqBL,MAAMM,IAA3B;AACA13I,SAAM23I,SAAN,GAAkB,EAAlB;;AAEA33I,SAAMs3I,OAAN,GAAgBA,QAAQ9yH,WAAR,EAAhB;AACA,UAAOxkB,KAAP;AACD;;AAED82I,eAAapD,WAAb,EAA0B,CAAC;AACzB12F,QAAK,cADoB;AAEzBnqC,UAAO,SAAS+kI,YAAT,CAAsB39G,IAAtB,EAA4BpnB,KAA5B,EAAmC;AACxC,SAAKonB,IAAL,IAAapnB,KAAb;AACD;AAJwB,GAAD,EAKvB;AACDmqC,QAAK,cADJ;AAEDnqC,UAAO,SAASo1C,YAAT,CAAsBhuB,IAAtB,EAA4B;AACjC,WAAO,KAAKA,IAAL,CAAP;AACD;AAJA,GALuB,EAUvB;AACD+iB,QAAK,uBADJ;AAEDnqC,UAAO,SAASglI,qBAAT,GAAiC;AACtC,WAAO;AACLr1I,UAAK,CADA;AAELF,WAAM,CAFD;AAGLO,YAAOixI,kBAAkBpzI,UAHpB;AAILoC,aAAQgxI,kBAAkBnzI;AAJrB,KAAP;AAMD;AATA,GAVuB,EAoBvB;AACDq8C,QAAK,OADJ;AAEDnqC,UAAO,SAASqxE,KAAT,GAAiB,CAAE;AAFzB,GApBuB,EAuBvB;AACDlnC,QAAK,aADJ;AAEDrqC,QAAK,SAASA,GAAT,GAAe;AAClB,QAAI25G,MAAMh+E,SAAS,KAAKL,KAAL,CAAW6pG,QAApB,EAA8B,EAA9B,IAAoC,KAAKH,SAAL,CAAehoI,MAA7D;;AAEA,WAAOqK,OAAO8uC,KAAP,CAAawjE,GAAb,IAAoB,CAApB,GAAwBA,GAA/B;AACD;AANA,GAvBuB,EA8BvB;AACDtvE,QAAK,cADJ;AAEDrqC,QAAK,SAASA,GAAT,GAAe;AAClB,QAAI25G,MAAMh+E,SAAS,KAAKL,KAAL,CAAW6pG,QAApB,EAA8B,EAA9B,CAAV;;AAEA,WAAO99H,OAAO8uC,KAAP,CAAawjE,GAAb,IAAoB,CAApB,GAAwBA,GAA/B;AACD;AANA,GA9BuB,CAA1B;;AAuCA,SAAOonB,WAAP;AACD,EA/DiB,CA+DhByD,UAAU7E,OA/DM,CAAlB;;AAiEAx4H,SAAQw4H,OAAR,GAAkBoB,WAAlB;;AAED;AAAO,CArVG;AAsVV;AACA,KAAO,UAAS35H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIklI,SAAShG,oBAAoB,CAApB,CAAb;;AAEA,KAAIiG,SAAS9D,uBAAuB6D,MAAvB,CAAb;;AAEA,UAAS7D,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASs2F,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,UAAS27H,0BAAT,CAAoCC,IAApC,EAA0CtgI,IAA1C,EAAgD;AAAE,MAAI,CAACsgI,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAuF,GAAC,OAAOvgI,SAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EsgI,IAAjF;AAAuF;;AAE9O,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIh8H,SAAJ,CAAc,qEAAoEg8H,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAqG,GAACD,SAASnkI,SAAT,GAAqBC,OAAOC,MAAP,CAAckkI,cAAcA,WAAWpkI,SAAvC,EAAkD,EAAEI,aAAa,EAAEK,OAAO0jI,QAAT,EAAmB38F,YAAY,KAA/B,EAAsC68F,UAAU,IAAhD,EAAsD1D,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIyD,UAAJ,EAAgBnkI,OAAOqkI,cAAP,GAAwBrkI,OAAOqkI,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAuG;;AAE5e,KAAIyB,UAAU,UAAUC,KAAV,EAAiB;AAC7B5B,YAAU2B,OAAV,EAAmBC,KAAnB;;AAEA,WAASD,OAAT,GAAmB;AACjBhC,mBAAgB,IAAhB,EAAsBgC,OAAtB;;AAEA,OAAIj4I,QAAQm2I,2BAA2B,IAA3B,EAAiC,CAAC8B,QAAQtB,SAAR,IAAqBtkI,OAAOwkI,cAAP,CAAsBoB,OAAtB,CAAtB,EAAsDniI,IAAtD,CAA2D,IAA3D,CAAjC,CAAZ;;AAEA9V,SAAMu3I,SAAN,GAAkB,EAAlB;AACAv3I,SAAMw5C,QAAN,GAAiB,EAAjB;AACA,UAAOx5C,KAAP;AACD;;AAED,SAAOi4I,OAAP;AACD,EAda,CAcZD,OAAO1F,OAdK,CAAd;;AAgBAx4H,SAAQw4H,OAAR,GAAkB2F,OAAlB;;AAED;AAAO,CA7XG;AA8XV;AACA,KAAO,UAASl+H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIikI,eAAe,YAAY;AAAE,WAASrkI,gBAAT,CAA0BzP,MAA1B,EAAkC+zI,KAAlC,EAAyC;AAAE,QAAK,IAAIxjI,IAAI,CAAb,EAAgBA,IAAIwjI,MAAMpnI,MAA1B,EAAkC4D,GAAlC,EAAuC;AAAE,QAAIs/H,aAAakE,MAAMxjI,CAAN,CAAjB,CAA2Bs/H,WAAWj5F,UAAX,GAAwBi5F,WAAWj5F,UAAX,IAAyB,KAAjD,CAAwDi5F,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAW4D,QAAX,GAAsB,IAAtB,CAA4BpkI,OAAOgI,cAAP,CAAsBrX,MAAtB,EAA8B6vI,WAAW71F,GAAzC,EAA8C61F,UAA9C;AAA2D;AAAE,GAAC,OAAO,UAAUqD,WAAV,EAAuBc,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBvkI,iBAAiByjI,YAAY9jI,SAA7B,EAAwC4kI,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBxkI,iBAAiByjI,WAAjB,EAA8Be,WAA9B,EAA4C,OAAOf,WAAP;AAAoB,GAA/M;AAAiN,EAA3hB,EAAnB;;AAEA,KAAIiC,gBAAgBpG,oBAAoB,CAApB,CAApB;;AAEA,KAAIqG,gBAAgBlE,uBAAuBiE,aAAvB,CAApB;;AAEA,UAASjE,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASs2F,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,UAAS27H,0BAAT,CAAoCC,IAApC,EAA0CtgI,IAA1C,EAAgD;AAAE,MAAI,CAACsgI,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAuF,GAAC,OAAOvgI,SAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EsgI,IAAjF;AAAuF;;AAE9O,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIh8H,SAAJ,CAAc,qEAAoEg8H,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAqG,GAACD,SAASnkI,SAAT,GAAqBC,OAAOC,MAAP,CAAckkI,cAAcA,WAAWpkI,SAAvC,EAAkD,EAAEI,aAAa,EAAEK,OAAO0jI,QAAT,EAAmB38F,YAAY,KAA/B,EAAsC68F,UAAU,IAAhD,EAAsD1D,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIyD,UAAJ,EAAgBnkI,OAAOqkI,cAAP,GAAwBrkI,OAAOqkI,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAuG;;AAE5e,KAAI/0C,OAAO,UAAU42C,YAAV,EAAwB;AACjC/B,YAAU70C,IAAV,EAAgB42C,YAAhB;;AAEA,WAAS52C,IAAT,GAAgB;AACdw0C,mBAAgB,IAAhB,EAAsBx0C,IAAtB;;AAEA,OAAIzhG,QAAQm2I,2BAA2B,IAA3B,EAAiC,CAAC10C,KAAKk1C,SAAL,IAAkBtkI,OAAOwkI,cAAP,CAAsBp1C,IAAtB,CAAnB,EAAgD3rF,IAAhD,CAAqD,IAArD,CAAjC,CAAZ;;AAEA9V,SAAMs4I,UAAN,GAAmB,EAAnB;AACA,UAAOt4I,KAAP;AACD;;AAED82I,eAAar1C,IAAb,EAAmB,CAAC;AAClBzkD,QAAK,aADa;AAElBnqC,UAAO,SAAS0lI,WAAT,CAAqBp5G,IAArB,EAA2B;AAChC,QAAIA,gBAAgBsiE,IAApB,EAA0B;AACxB,UAAK62C,UAAL,CAAgBl0I,IAAhB,CAAqB+6B,IAArB;AACD,KAFD,MAEO;AACL,WAAM,IAAI3kB,SAAJ,CAAc,sFAAd,CAAN;AACD;AACF;AARiB,GAAD,EAShB;AACDwiC,QAAK,WADJ;AAEDnqC,UAAO,SAAS2lI,SAAT,GAAqB;AAC1B,QAAIC,WAAWpmI,OAAOC,MAAP,CAAc,IAAd,CAAf;;AAEAD,WAAO4B,MAAP,CAAcwkI,QAAd,EAAwB,IAAxB;AACA,WAAOA,QAAP;AACD;AAPA,GATgB,EAiBhB;AACDz7F,QAAK,aADJ;AAEDnqC,UAAO,SAAS6lI,WAAT,CAAqBv5G,IAArB,EAA2B;AAChC,QAAIzkB,QAAQ,KAAK49H,UAAL,CAAgBK,SAAhB,CAA0B,UAAUl9F,KAAV,EAAiB;AACrD,YAAOA,UAAUtc,IAAjB;AACD,KAFW,CAAZ;;AAIA,QAAIzkB,QAAQ,CAAC,CAAb,EAAgB;AACd,YAAO,KAAK49H,UAAL,CAAgB7kI,MAAhB,CAAuBiH,KAAvB,EAA8B,CAA9B,CAAP;AACD;AACD,WAAO,IAAP;AACD;AAXA,GAjBgB,CAAnB;;AA+BA,SAAO+mF,IAAP;AACD,EA5CU,CA4CT22C,cAAc9F,OA5CL,CAAX;;AA8CAx4H,SAAQw4H,OAAR,GAAkB7wC,IAAlB;;AAED;AAAO,CArcG;AAscV;AACA,KAAO,UAAS1nF,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIikI,eAAe,YAAY;AAAE,WAASrkI,gBAAT,CAA0BzP,MAA1B,EAAkC+zI,KAAlC,EAAyC;AAAE,QAAK,IAAIxjI,IAAI,CAAb,EAAgBA,IAAIwjI,MAAMpnI,MAA1B,EAAkC4D,GAAlC,EAAuC;AAAE,QAAIs/H,aAAakE,MAAMxjI,CAAN,CAAjB,CAA2Bs/H,WAAWj5F,UAAX,GAAwBi5F,WAAWj5F,UAAX,IAAyB,KAAjD,CAAwDi5F,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAW4D,QAAX,GAAsB,IAAtB,CAA4BpkI,OAAOgI,cAAP,CAAsBrX,MAAtB,EAA8B6vI,WAAW71F,GAAzC,EAA8C61F,UAA9C;AAA2D;AAAE,GAAC,OAAO,UAAUqD,WAAV,EAAuBc,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBvkI,iBAAiByjI,YAAY9jI,SAA7B,EAAwC4kI,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBxkI,iBAAiByjI,WAAjB,EAA8Be,WAA9B,EAA4C,OAAOf,WAAP;AAAoB,GAA/M;AAAiN,EAA3hB,EAAnB;;AAEA,UAASD,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,KAAIo+H,UAAU,IAAI3iG,OAAJ,EAAd;;AAEA,KAAI4iG,cAAc,YAAY;AAC5B,WAASA,WAAT,GAAuB;AACrB5C,mBAAgB,IAAhB,EAAsB4C,WAAtB;;AAEAD,WAAQx2I,GAAR,CAAY,IAAZ,EAAkB,EAAlB;AACD;;AAED00I,eAAa+B,WAAb,EAA0B,CAAC;AACzB77F,QAAK,kBADoB;AAEzBnqC,UAAO,SAASjN,gBAAT,CAA0B0H,IAA1B,EAAgCuN,QAAhC,EAA0C;AAC/C,QAAI2hB,UAAU9lB,UAAU/G,MAAV,GAAmB,CAAnB,IAAwB+G,UAAU,CAAV,MAAiB/O,SAAzC,GAAqD+O,UAAU,CAAV,CAArD,GAAoE,EAAlF;;AAEA,QAAIoiI,SAASF,QAAQjmI,GAAR,CAAY,IAAZ,CAAb;;AAEA,QAAI,CAACmmI,MAAL,EAAa;AACXA,cAAS,EAAT;AACAF,aAAQx2I,GAAR,CAAY,IAAZ,EAAkB02I,MAAlB;AACD;AACD,QAAI,CAACA,OAAOxrI,IAAP,CAAL,EAAmB;AACjBwrI,YAAOxrI,IAAP,IAAe,EAAf;AACD;AACDwrI,WAAOxrI,IAAP,EAAalJ,IAAb,CAAkByW,QAAlB;;AAEA,QAAI2hB,QAAQu8G,OAAZ,EAAqB;AACnB7yI,aAAQgK,IAAR,CAAa,mEAAb;AACD;AACD,QAAIssB,QAAQw8G,IAAZ,EAAkB;AAChB9yI,aAAQgK,IAAR,CAAa,gEAAb;AACD;AACD,QAAIssB,QAAQy8G,OAAZ,EAAqB;AACnB/yI,aAAQgK,IAAR,CAAa,mEAAb;AACD;AACF;AAzBwB,GAAD,EA0BvB;AACD8sC,QAAK,qBADJ;AAEDnqC,UAAO,SAAShG,mBAAT,CAA6BS,IAA7B,EAAmCuN,QAAnC,EAA6C;AAClD,QAAIE,YAAY69H,QAAQjmI,GAAR,CAAY,IAAZ,EAAkBrF,IAAlB,CAAhB;;AAEA,QAAIyN,aAAaA,UAAUpL,MAAV,GAAmB,CAApC,EAAuC;AACrC,UAAK,IAAI4D,IAAIwH,UAAUpL,MAAvB,EAA+B4D,GAA/B,EAAoCA,IAAI,CAAxC,EAA2C;AACzC,UAAIwH,UAAUxH,CAAV,MAAiBsH,QAArB,EAA+B;AAC7BE,iBAAUtH,MAAV,CAAiBF,CAAjB,EAAoB,CAApB;AACA;AACD;AACF;AACF;AACF;AAbA,GA1BuB,EAwCvB;AACDypC,QAAK,eADJ;AAEDnqC,UAAO,SAASlI,aAAT,GAAyB;AAC9B,QAAI4F,QAAQmG,UAAU/G,MAAV,GAAmB,CAAnB,IAAwB+G,UAAU,CAAV,MAAiB/O,SAAzC,GAAqD+O,UAAU,CAAV,CAArD,GAAoE,EAAhF;;AAEA,QAAIqE,YAAY69H,QAAQjmI,GAAR,CAAY,IAAZ,EAAkBpC,MAAMjD,IAAxB,CAAhB;;AAEA,QAAIyN,SAAJ,EAAe;AACb,UAAK,IAAIxH,IAAI,CAAb,EAAgBA,IAAIwH,UAAUpL,MAA9B,EAAsC4D,GAAtC,EAA2C;AACzCwH,gBAAUxH,CAAV,EAAahD,KAAb;AACD;AACF;AACF;AAZA,GAxCuB,CAA1B;;AAuDA,SAAOsoI,WAAP;AACD,EA/DiB,EAAlB;;AAiEA/+H,SAAQw4H,OAAR,GAAkBuG,WAAlB;;AAED;AAAO,CAxhBG;AAyhBV;AACA,KAAO,UAAS9+H,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;AAGAiH,SAAQ49H,IAAR,GAAeA,IAAf;AACA,UAASA,IAAT,GAAgB,CAAE;;AAEnB;AAAO,CApiBG;AAqiBV;AACA,KAAO,UAAS39H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;AAGAiH,SAAQw4H,OAAR,GAAkB4G,MAAlB;;AAEA,KAAInF,eAAehC,oBAAoB,CAApB,CAAnB;;AAEA,KAAI6E,eAAe7E,oBAAoB,CAApB,CAAnB;;AAEA,KAAIkD,gBAAgBf,uBAAuB0C,YAAvB,CAApB;;AAEA,KAAIuC,YAAYpH,oBAAoB,EAApB,CAAhB;;AAEA,KAAIoC,aAAaD,uBAAuBiF,SAAvB,CAAjB;;AAEA,UAASjF,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,KAAIy5F,6BAA6B,KAAjC;AACA,KAAIC,8BAA8B,KAAlC;AACA,KAAIC,iCAAiC,KAArC;;AAEA,UAASJ,MAAT,GAAkB;AAChB,MAAIr4I,SAASywB,GAAGioH,YAAH,EAAb;;AAEA14I,SAAOyM,IAAP,GAAc,QAAd;;AAEAzM,SAAO81I,SAAP,CAAiBA,SAAjB,GAA6B,IAAI1B,cAAc3C,OAAlB,CAA0B,QAA1B,CAA7B;;AAEA,MAAIkH,cAAc34I,OAAOC,UAAzB;;AAEAD,SAAOg3I,qBAAP,GAA+B,YAAY;AACzC,OAAIvrB,MAAM;AACR9pH,SAAK,CADG;AAERF,UAAM,CAFE;AAGRO,WAAOuK,OAAO1M,UAHN;AAIRoC,YAAQsK,OAAOzM;AAJP,IAAV;AAMA,UAAO2rH,GAAP;AACD,GARD;;AAUA,SAAOzrH,MAAP;AACD;;AAEF;AAAO,CArlBG;AAslBV;AACA,KAAO,UAASkZ,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIq/H,UAAUH,oBAAoB,CAApB,CAAd;;AAEA,KAAI3kI,SAAS+kI,wBAAwBD,OAAxB,CAAb;;AAEA,KAAI0E,eAAe7E,oBAAoB,CAApB,CAAnB;;AAEA,KAAIkD,gBAAgBf,uBAAuB0C,YAAvB,CAApB;;AAEA,KAAI6C,SAAS1H,oBAAoB,EAApB,CAAb;;AAEA,KAAI4C,UAAUT,uBAAuBuF,MAAvB,CAAd;;AAEA,KAAIC,SAAS3H,oBAAoB,EAApB,CAAb;;AAEA,KAAI8C,UAAUX,uBAAuBwF,MAAvB,CAAd;;AAEA,KAAI1F,UAAUjC,oBAAoB,CAApB,CAAd;;AAEA,KAAIkC,WAAWC,uBAAuBF,OAAvB,CAAf;;AAEAjC,qBAAoB,EAApB;;AAEA,UAASmC,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASwyF,uBAAT,CAAiCxyF,GAAjC,EAAsC;AAAE,MAAIA,OAAOA,IAAIyyF,UAAf,EAA2B;AAAE,UAAOzyF,GAAP;AAAY,GAAzC,MAA+C;AAAE,OAAI0yF,SAAS,EAAb,CAAiB,IAAI1yF,OAAO,IAAX,EAAiB;AAAE,SAAK,IAAI3C,GAAT,IAAgB2C,GAAhB,EAAqB;AAAE,SAAIttC,OAAOD,SAAP,CAAiBwI,cAAjB,CAAgC9E,IAAhC,CAAqC6pC,GAArC,EAA0C3C,GAA1C,CAAJ,EAAoDq1F,OAAOr1F,GAAP,IAAc2C,IAAI3C,GAAJ,CAAd;AAAwB;AAAE,IAACq1F,OAAOC,OAAP,GAAiB3yF,GAAjB,CAAsB,OAAO0yF,MAAP;AAAe;AAAE;;AAE1Q,KAAIyG,SAAS,EAAb;;AAEA,KAAIlxI,WAAW;AACb+wF,cAAY,UADC;AAEbghD,mBAAiB,SAFJ;AAGbC,mBAAiBxsI,MAHJ;AAIbysI,UAAQ,KAJK;AAKb5rG,SAAO,EALM;AAMbulG,YAAUpmI,OAAOomI,QANJ;AAObqC,gBAAc,IAPD;AAQbC,eAAa,IARA;AASbC,cAAY,IATC;;AAWb+D,QAAM,IAAI7E,cAAc3C,OAAlB,CAA0B,MAA1B,CAXO;AAYb9iI,QAAM,IAAIylI,cAAc3C,OAAlB,CAA0B,MAA1B,CAZO;;AAcbyH,iBAAe,SAASA,aAAT,CAAuBzC,OAAvB,EAAgC;AAC7C,OAAIA,YAAY,QAAhB,EAA0B;AACxB,WAAO,IAAIrD,SAAS3B,OAAb,EAAP;AACD,IAFD,MAEO,IAAIgF,YAAY,OAAhB,EAAyB;AAC9B,WAAO,IAAIzC,QAAQvC,OAAZ,EAAP;AACD,IAFM,MAEA,IAAIgF,YAAY,KAAhB,EAAuB;AAC5B,WAAO,IAAI3C,QAAQrC,OAAZ,EAAP;AACD;;AAED,UAAO,IAAI2C,cAAc3C,OAAlB,CAA0BgF,OAA1B,CAAP;AACD,GAxBY;AAyBb0C,kBAAgB,SAASA,cAAT,CAAwBj6I,EAAxB,EAA4B;AAC1C,OAAIA,OAAOqN,OAAOvM,MAAP,CAAcd,EAAzB,EAA6B;AAC3B,WAAOqN,OAAOvM,MAAd;AACD;AACD,UAAO,IAAP;AACD,GA9BY;AA+Bbo5I,wBAAsB,SAASA,oBAAT,CAA8B3C,OAA9B,EAAuC;AAC3D,OAAIA,YAAY,MAAhB,EAAwB;AACtB,WAAO,CAAC1vI,SAASkyI,IAAV,CAAP;AACD,IAFD,MAEO,IAAIxC,YAAY,MAAhB,EAAwB;AAC7B,WAAO,CAAC1vI,SAAS4H,IAAV,CAAP;AACD,IAFM,MAEA,IAAI8nI,YAAY,QAAhB,EAA0B;AAC/B,WAAO,CAAClqI,OAAOvM,MAAR,CAAP;AACD;AACD,UAAO,EAAP;AACD,GAxCY;AAyCbq5I,iBAAe,SAASA,aAAT,CAAuBC,KAAvB,EAA8B;AAC3C,OAAIA,UAAU,MAAd,EAAsB;AACpB,WAAOvyI,SAASkyI,IAAhB;AACD,IAFD,MAEO,IAAIK,UAAU,MAAd,EAAsB;AAC3B,WAAOvyI,SAAS4H,IAAhB;AACD,IAFM,MAEA,IAAI2qI,UAAU,QAAd,EAAwB;AAC7B,WAAO/sI,OAAOvM,MAAd;AACD,IAFM,MAEA,IAAIs5I,UAAU,MAAM/sI,OAAOvM,MAAP,CAAcd,EAAlC,EAAsC;AAC3C,WAAOqN,OAAOvM,MAAd;AACD;AACD,UAAO,IAAP;AACD,GApDY;AAqDbu5I,oBAAkB,SAASA,gBAAT,CAA0BD,KAA1B,EAAiC;AACjD,OAAIA,UAAU,MAAd,EAAsB;AACpB,WAAO,CAACvyI,SAASkyI,IAAV,CAAP;AACD,IAFD,MAEO,IAAIK,UAAU,MAAd,EAAsB;AAC3B,WAAO,CAACvyI,SAAS4H,IAAV,CAAP;AACD,IAFM,MAEA,IAAI2qI,UAAU,QAAd,EAAwB;AAC7B,WAAO,CAAC/sI,OAAOvM,MAAR,CAAP;AACD;AACD,UAAO,EAAP;AACD,GA9DY;AA+Db+E,oBAAkB,SAASA,gBAAT,CAA0B0H,IAA1B,EAAgCuN,QAAhC,EAA0C;AAC1D,OAAI,CAACi+H,OAAOxrI,IAAP,CAAL,EAAmB;AACjBwrI,WAAOxrI,IAAP,IAAe,EAAf;AACD;AACDwrI,UAAOxrI,IAAP,EAAalJ,IAAb,CAAkByW,QAAlB;AACD,GApEY;AAqEbhO,uBAAqB,SAASA,mBAAT,CAA6BS,IAA7B,EAAmCuN,QAAnC,EAA6C;AAChE,OAAIE,YAAY+9H,OAAOxrI,IAAP,CAAhB;;AAEA,OAAIyN,aAAaA,UAAUpL,MAAV,GAAmB,CAApC,EAAuC;AACrC,SAAK,IAAI4D,IAAIwH,UAAUpL,MAAvB,EAA+B4D,GAA/B,EAAoCA,IAAI,CAAxC,EAA2C;AACzC,SAAIwH,UAAUxH,CAAV,MAAiBsH,QAArB,EAA+B;AAC7BE,gBAAUtH,MAAV,CAAiBF,CAAjB,EAAoB,CAApB;AACA;AACD;AACF;AACF;AACF,GAhFY;AAiFb5I,iBAAe,SAASA,aAAT,CAAuB4F,KAAvB,EAA8B;AAC3C,OAAIwK,YAAY+9H,OAAOvoI,MAAMjD,IAAb,CAAhB;;AAEA,OAAIyN,SAAJ,EAAe;AACb,SAAK,IAAIxH,IAAI,CAAb,EAAgBA,IAAIwH,UAAUpL,MAA9B,EAAsC4D,GAAtC,EAA2C;AACzCwH,eAAUxH,CAAV,EAAahD,KAAb;AACD;AACF;AACF;AAzFY,EAAf;;AA4FAuJ,SAAQw4H,OAAR,GAAkB1qI,QAAlB;;AAED;AAAO,CAztBG;AA0tBV;AACA,KAAO,UAASmS,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;AAGAiH,SAAQw4H,OAAR,GAAkBsB,KAAlB;AACA,UAASA,KAAT,GAAiB;AACf,MAAIp6G,QAAQlI,GAAG+oH,WAAH,EAAZ;;AAEA,SAAO7gH,KAAP;AACD;;AAEF;AAAO,CAzuBG;AA0uBV;AACA,KAAO,UAASzf,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIikI,eAAe,YAAY;AAAE,WAASrkI,gBAAT,CAA0BzP,MAA1B,EAAkC+zI,KAAlC,EAAyC;AAAE,QAAK,IAAIxjI,IAAI,CAAb,EAAgBA,IAAIwjI,MAAMpnI,MAA1B,EAAkC4D,GAAlC,EAAuC;AAAE,QAAIs/H,aAAakE,MAAMxjI,CAAN,CAAjB,CAA2Bs/H,WAAWj5F,UAAX,GAAwBi5F,WAAWj5F,UAAX,IAAyB,KAAjD,CAAwDi5F,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAW4D,QAAX,GAAsB,IAAtB,CAA4BpkI,OAAOgI,cAAP,CAAsBrX,MAAtB,EAA8B6vI,WAAW71F,GAAzC,EAA8C61F,UAA9C;AAA2D;AAAE,GAAC,OAAO,UAAUqD,WAAV,EAAuBc,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBvkI,iBAAiByjI,YAAY9jI,SAA7B,EAAwC4kI,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBxkI,iBAAiByjI,WAAjB,EAA8Be,WAA9B,EAA4C,OAAOf,WAAP;AAAoB,GAA/M;AAAiN,EAA3hB,EAAnB;;AAEA,KAAIoE,qBAAqBvI,oBAAoB,EAApB,CAAzB;;AAEA,KAAIwI,qBAAqBrG,uBAAuBoG,kBAAvB,CAAzB;;AAEA,UAASpG,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASs2F,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,UAAS27H,0BAAT,CAAoCC,IAApC,EAA0CtgI,IAA1C,EAAgD;AAAE,MAAI,CAACsgI,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAuF,GAAC,OAAOvgI,SAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EsgI,IAAjF;AAAuF;;AAE9O,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIh8H,SAAJ,CAAc,qEAAoEg8H,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAqG,GAACD,SAASnkI,SAAT,GAAqBC,OAAOC,MAAP,CAAckkI,cAAcA,WAAWpkI,SAAvC,EAAkD,EAAEI,aAAa,EAAEK,OAAO0jI,QAAT,EAAmB38F,YAAY,KAA/B,EAAsC68F,UAAU,IAAhD,EAAsD1D,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIyD,UAAJ,EAAgBnkI,OAAOqkI,cAAP,GAAwBrkI,OAAOqkI,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAuG;;AAE5e,KAAIgE,eAAe,CAAnB;AACA,KAAIC,gBAAgB,CAApB;AACA,KAAI7hD,oBAAoB,CAAxB;AACA,KAAI8hD,mBAAmB,CAAvB;AACA,KAAIC,mBAAmB,CAAvB;;AAEA,KAAIC,qBAAqB,IAAI3kG,OAAJ,EAAzB;AACA,KAAI4kG,OAAO,IAAI5kG,OAAJ,EAAX;AACA,KAAI6kG,QAAQ,IAAI7kG,OAAJ,EAAZ;AACA,KAAI8kG,YAAY,IAAI9kG,OAAJ,EAAhB;;AAEA,KAAIm6E,QAAQ,UAAU4qB,iBAAV,EAA6B;AACvC1E,YAAUlmB,KAAV,EAAiB4qB,iBAAjB;;AAEA,WAAS5qB,KAAT,CAAex0F,GAAf,EAAoB;AAClBq6G,mBAAgB,IAAhB,EAAsB7lB,KAAtB;;AAEA,OAAIpwH,QAAQm2I,2BAA2B,IAA3B,EAAiC,CAAC/lB,MAAMumB,SAAN,IAAmBtkI,OAAOwkI,cAAP,CAAsBzmB,KAAtB,CAApB,EAAkDt6G,IAAlD,CAAuD,IAAvD,CAAjC,CAAZ;;AAEA9V,SAAMw6I,YAAN,GAAqBA,YAArB;AACAx6I,SAAMy6I,aAAN,GAAsBA,aAAtB;AACAz6I,SAAM44F,iBAAN,GAA0BA,iBAA1B;AACA54F,SAAM06I,gBAAN,GAAyBA,gBAAzB;AACA16I,SAAM26I,gBAAN,GAAyBA,gBAAzB;AACA36I,SAAM24F,UAAN,GAAmB6hD,YAAnB;;AAGAK,QAAKz4I,GAAL,CAASpC,KAAT,EAAgB,EAAhB;;AAEA,OAAIi7I,oBAAoB3pH,GAAG4pH,uBAAH,EAAxB;;AAEAN,sBAAmBx4I,GAAnB,CAAuBpC,KAAvB,EAA8Bi7I,iBAA9B;;AAEAA,qBAAkBE,SAAlB,CAA4B,YAAY;AACtCn7I,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,MAAR,EAApB;AACAtN,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,SAAR,EAApB;AACAtN,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,SAAR,EAApB;AACAtN,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,gBAAR,EAApB;AACAtN,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,gBAAR,EAApB;AACAtN,UAAM24F,UAAN,GAAmBC,iBAAnB;AACD,IAPD;AAQAqiD,qBAAkBG,MAAlB,CAAyB,YAAY;AACnCp7I,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,MAAR,EAApB;AACD,IAFD;AAGA2tI,qBAAkBI,OAAlB,CAA0B,YAAY;AACpCr7I,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,OAAR,EAApB;AACD,IAFD;AAGA2tI,qBAAkB5pB,OAAlB,CAA0B,YAAY;AACpCrxH,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,OAAR,EAApB;AACAtN,UAAM24F,UAAN,GAAmBgiD,gBAAnB;AACD,IAHD;AAIAM,qBAAkB3uC,OAAlB,CAA0B,YAAY;AACpCtsG,UAAM2K,aAAN,CAAoB,EAAE2C,MAAM,OAAR,EAApB;AACD,IAFD;;AAIA,OAAIsuB,GAAJ,EAAS;AACPg/G,uBAAmBjoI,GAAnB,CAAuB3S,KAAvB,EAA8BowG,GAA9B,GAAoCx0E,GAApC;AACD;AACD,UAAO57B,KAAP;AACD;;AAED82I,eAAa1mB,KAAb,EAAoB,CAAC;AACnBpzE,QAAK,MADc;AAEnBnqC,UAAO,SAASw6F,IAAT,GAAgB;AACrBnnG,YAAQgK,IAAR,CAAa,6CAAb;AACD;AAJkB,GAAD,EAKjB;AACD8sC,QAAK,MADJ;AAEDnqC,UAAO,SAASq+G,IAAT,GAAgB;AACrB0pB,uBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6Bu+G,IAA7B;AACD;AAJA,GALiB,EAUjB;AACDl0E,QAAK,OADJ;AAEDnqC,UAAO,SAASy+G,KAAT,GAAiB;AACtBspB,uBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B2+G,KAA7B;AACD;AAJA,GAViB,EAejB;AACDt0E,QAAK,aADJ;AAEDnqC,UAAO,SAASyoI,WAAT,GAAuB;AAC5B,QAAIC,YAAY7kI,UAAU/G,MAAV,GAAmB,CAAnB,IAAwB+G,UAAU,CAAV,MAAiB/O,SAAzC,GAAqD+O,UAAU,CAAV,CAArD,GAAoE,EAApF;;AAEA,QAAI,OAAO6kI,SAAP,KAAqB,QAAzB,EAAmC;AACjC,YAAO,EAAP;AACD;;AAED,QAAIA,UAAU/nI,OAAV,CAAkB,YAAlB,IAAkC,CAAC,CAAnC,IAAwC+nI,UAAU/nI,OAAV,CAAkB,WAAlB,CAA5C,EAA4E;AAC1E,YAAO,UAAP;AACD;AACD,WAAO,EAAP;AACD;AAbA,GAfiB,EA6BjB;AACDwpC,QAAK,WADJ;AAEDnqC,UAAO,SAAS2lI,SAAT,GAAqB;AAC1B,QAAIgD,WAAW,IAAIprB,KAAJ,EAAf;AACAorB,aAASv5I,IAAT,GAAgB24I,mBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B1Q,IAA7C;AACAu5I,aAASnrB,QAAT,GAAoBuqB,mBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B1Q,IAAjD;AACAu5I,aAASprC,GAAT,GAAe,KAAKA,GAApB;AACA,WAAOorC,QAAP;AACD;AARA,GA7BiB,EAsCjB;AACDx+F,QAAK,aADJ;AAEDrqC,QAAK,SAASA,GAAT,GAAe;AAClB,WAAOioI,mBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B68G,WAApC;AACD,IAJA;AAKDptH,QAAK,SAASA,GAAT,CAAayQ,KAAb,EAAoB;AACvB+nI,uBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6BqnG,IAA7B,CAAkCnnG,KAAlC;AACD;AAPA,GAtCiB,EA8CjB;AACDmqC,QAAK,KADJ;AAEDrqC,QAAK,SAASA,GAAT,GAAe;AAClB,WAAOkoI,KAAKloI,GAAL,CAAS,IAAT,CAAP;AACD,IAJA;AAKDvQ,QAAK,SAASA,GAAT,CAAayQ,KAAb,EAAoB;AACvBgoI,SAAKz4I,GAAL,CAAS,IAAT,EAAeyQ,KAAf;AACA+nI,uBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6By9F,GAA7B,GAAmCv9F,KAAnC;AACD;AARA,GA9CiB,EAuDjB;AACDmqC,QAAK,MADJ;AAEDrqC,QAAK,SAASA,GAAT,GAAe;AAClB,WAAOioI,mBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B1Q,IAApC;AACD,IAJA;AAKDG,QAAK,SAASA,GAAT,CAAayQ,KAAb,EAAoB;AACvB+nI,uBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B1Q,IAA7B,GAAoC4Q,KAApC;AACD;AAPA,GAvDiB,EA+DjB;AACDmqC,QAAK,UADJ;AAEDrqC,QAAK,SAASA,GAAT,GAAe;AAClB,WAAOioI,mBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B09G,QAApC;AACD,IAJA;AAKDjuH,QAAK,SAASA,GAAT,CAAayQ,KAAb,EAAoB;AACvB+nI,uBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B09G,QAA7B,GAAwCx9G,KAAxC;AACD;AAPA,GA/DiB,EAuEjB;AACDmqC,QAAK,QADJ;AAEDrqC,QAAK,SAASA,GAAT,GAAe;AAClB,WAAOioI,mBAAmBjoI,GAAnB,CAAuB,IAAvB,EAA6B4pH,MAApC;AACD;AAJA,GAvEiB,CAApB;;AA8EA,SAAOnM,KAAP;AACD,EAjIW,CAiIVmqB,mBAAmBjI,OAjIT,CAAZ;;AAmIAx4H,SAAQw4H,OAAR,GAAkBliB,KAAlB;;AAED;AAAO,CAj5BG;AAk5BV;AACA,KAAO,UAASr2G,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAI4oI,qBAAqB1J,oBAAoB,EAApB,CAAzB;;AAEA,KAAI2J,qBAAqBxH,uBAAuBuH,kBAAvB,CAAzB;;AAEA,UAASvH,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASs2F,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,UAAS27H,0BAAT,CAAoCC,IAApC,EAA0CtgI,IAA1C,EAAgD;AAAE,MAAI,CAACsgI,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAuF,GAAC,OAAOvgI,SAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EsgI,IAAjF;AAAuF;;AAE9O,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIh8H,SAAJ,CAAc,qEAAoEg8H,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAqG,GAACD,SAASnkI,SAAT,GAAqBC,OAAOC,MAAP,CAAckkI,cAAcA,WAAWpkI,SAAvC,EAAkD,EAAEI,aAAa,EAAEK,OAAO0jI,QAAT,EAAmB38F,YAAY,KAA/B,EAAsC68F,UAAU,IAAhD,EAAsD1D,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIyD,UAAJ,EAAgBnkI,OAAOqkI,cAAP,GAAwBrkI,OAAOqkI,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAuG;;AAE5e,KAAImF,mBAAmB,UAAUC,iBAAV,EAA6B;AAClDtF,YAAUqF,gBAAV,EAA4BC,iBAA5B;;AAEA,WAASD,gBAAT,GAA4B;AAC1B1F,mBAAgB,IAAhB,EAAsB0F,gBAAtB;;AAEA,UAAOxF,2BAA2B,IAA3B,EAAiC,CAACwF,iBAAiBhF,SAAjB,IAA8BtkI,OAAOwkI,cAAP,CAAsB8E,gBAAtB,CAA/B,EAAwE7lI,IAAxE,CAA6E,IAA7E,EAAmF,OAAnF,CAAjC,CAAP;AACD;;AAED,SAAO6lI,gBAAP;AACD,EAVsB,CAUrBD,mBAAmBpJ,OAVE,CAAvB;;AAYAx4H,SAAQw4H,OAAR,GAAkBqJ,gBAAlB;;AAED;AAAO,CAr7BG;AAs7BV;AACA,KAAO,UAAS5hI,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIikI,eAAe,YAAY;AAAE,WAASrkI,gBAAT,CAA0BzP,MAA1B,EAAkC+zI,KAAlC,EAAyC;AAAE,QAAK,IAAIxjI,IAAI,CAAb,EAAgBA,IAAIwjI,MAAMpnI,MAA1B,EAAkC4D,GAAlC,EAAuC;AAAE,QAAIs/H,aAAakE,MAAMxjI,CAAN,CAAjB,CAA2Bs/H,WAAWj5F,UAAX,GAAwBi5F,WAAWj5F,UAAX,IAAyB,KAAjD,CAAwDi5F,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAW4D,QAAX,GAAsB,IAAtB,CAA4BpkI,OAAOgI,cAAP,CAAsBrX,MAAtB,EAA8B6vI,WAAW71F,GAAzC,EAA8C61F,UAA9C;AAA2D;AAAE,GAAC,OAAO,UAAUqD,WAAV,EAAuBc,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBvkI,iBAAiByjI,YAAY9jI,SAA7B,EAAwC4kI,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBxkI,iBAAiByjI,WAAjB,EAA8Be,WAA9B,EAA4C,OAAOf,WAAP;AAAoB,GAA/M;AAAiN,EAA3hB,EAAnB;;AAEA,KAAIjB,gBAAgBlD,oBAAoB,CAApB,CAApB;;AAEA,KAAImD,gBAAgBhB,uBAAuBe,aAAvB,CAApB;;AAEA,UAASf,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASs2F,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,UAAS27H,0BAAT,CAAoCC,IAApC,EAA0CtgI,IAA1C,EAAgD;AAAE,MAAI,CAACsgI,IAAL,EAAW;AAAE,SAAM,IAAIC,cAAJ,CAAmB,2DAAnB,CAAN;AAAuF,GAAC,OAAOvgI,SAAS,QAAOA,IAAP,yCAAOA,IAAP,OAAgB,QAAhB,IAA4B,OAAOA,IAAP,KAAgB,UAArD,IAAmEA,IAAnE,GAA0EsgI,IAAjF;AAAuF;;AAE9O,UAASE,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;AAAE,MAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,eAAe,IAAvD,EAA6D;AAAE,SAAM,IAAIh8H,SAAJ,CAAc,qEAAoEg8H,UAApE,yCAAoEA,UAApE,EAAd,CAAN;AAAqG,GAACD,SAASnkI,SAAT,GAAqBC,OAAOC,MAAP,CAAckkI,cAAcA,WAAWpkI,SAAvC,EAAkD,EAAEI,aAAa,EAAEK,OAAO0jI,QAAT,EAAmB38F,YAAY,KAA/B,EAAsC68F,UAAU,IAAhD,EAAsD1D,cAAc,IAApE,EAAf,EAAlD,CAArB,CAAqK,IAAIyD,UAAJ,EAAgBnkI,OAAOqkI,cAAP,GAAwBrkI,OAAOqkI,cAAP,CAAsBH,QAAtB,EAAgCC,UAAhC,CAAxB,GAAsED,SAASI,SAAT,GAAqBH,UAA3F;AAAuG;;AAE5e,KAAIqF,mBAAmB,UAAUjF,YAAV,EAAwB;AAC7CN,YAAUuF,gBAAV,EAA4BjF,YAA5B;;AAEA,WAASiF,gBAAT,CAA0BvuI,IAA1B,EAAgC;AAC9B2oI,mBAAgB,IAAhB,EAAsB4F,gBAAtB;;AAEA,UAAO1F,2BAA2B,IAA3B,EAAiC,CAAC0F,iBAAiBlF,SAAjB,IAA8BtkI,OAAOwkI,cAAP,CAAsBgF,gBAAtB,CAA/B,EAAwE/lI,IAAxE,CAA6E,IAA7E,EAAmFxI,IAAnF,CAAjC,CAAP;AACD;;AAEDwpI,eAAa+E,gBAAb,EAA+B,CAAC;AAC9B7+F,QAAK,cADyB;AAE9BnqC,UAAO,SAASipI,YAAT,GAAwB,CAAE;AAFH,GAAD,EAG5B;AACD9+F,QAAK,eADJ;AAEDnqC,UAAO,SAASkpI,aAAT,GAAyB,CAAE;AAFjC,GAH4B,EAM5B;AACD/+F,QAAK,UADJ;AAEDnqC,UAAO,SAASmpI,QAAT,GAAoB,CAAE;AAF5B,GAN4B,EAS5B;AACDh/F,QAAK,MADJ;AAEDnqC,UAAO,SAASw6F,IAAT,GAAgB,CAAE;AAFxB,GAT4B,EAY5B;AACDrwD,QAAK,OADJ;AAEDnqC,UAAO,SAASy+G,KAAT,GAAiB,CAAE;AAFzB,GAZ4B,EAe5B;AACDt0E,QAAK,MADJ;AAEDnqC,UAAO,SAASq+G,IAAT,GAAgB,CAAE;AAFxB,GAf4B,CAA/B;;AAoBA,SAAO2qB,gBAAP;AACD,EA9BsB,CA8BrB3G,cAAc5C,OA9BO,CAAvB;;AAgCAx4H,SAAQw4H,OAAR,GAAkBuJ,gBAAlB;;AAED;AAAO,CA/+BG;AAg/BV;AACA,KAAO,UAAS9hI,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEAA,qBAAoB,EAApB;;AAED;AAAO,CAv/BG;AAw/BV;AACA,KAAO,UAASh4H,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA,KAAIG,UAAUH,oBAAoB,CAApB,CAAd;;AAEA,KAAI3kI,SAAS+kI,wBAAwBD,OAAxB,CAAb;;AAEA,KAAIiH,YAAYpH,oBAAoB,EAApB,CAAhB;;AAEA,KAAIoC,aAAaD,uBAAuBiF,SAAvB,CAAjB;;AAEA,KAAI/B,QAAQrF,oBAAoB,CAApB,CAAZ;;AAEA,UAASmC,sBAAT,CAAgCv0F,GAAhC,EAAqC;AAAE,SAAOA,OAAOA,IAAIyyF,UAAX,GAAwBzyF,GAAxB,GAA8B,EAAE2yF,SAAS3yF,GAAX,EAArC;AAAuD;;AAE9F,UAASwyF,uBAAT,CAAiCxyF,GAAjC,EAAsC;AAAE,MAAIA,OAAOA,IAAIyyF,UAAf,EAA2B;AAAE,UAAOzyF,GAAP;AAAY,GAAzC,MAA+C;AAAE,OAAI0yF,SAAS,EAAb,CAAiB,IAAI1yF,OAAO,IAAX,EAAiB;AAAE,SAAK,IAAI3C,GAAT,IAAgB2C,GAAhB,EAAqB;AAAE,SAAIttC,OAAOD,SAAP,CAAiBwI,cAAjB,CAAgC9E,IAAhC,CAAqC6pC,GAArC,EAA0C3C,GAA1C,CAAJ,EAAoDq1F,OAAOr1F,GAAP,IAAc2C,IAAI3C,GAAJ,CAAd;AAAwB;AAAE,IAACq1F,OAAOC,OAAP,GAAiB3yF,GAAjB,CAAsB,OAAO0yF,MAAP;AAAe;AAAE;;AAE1Q,UAAS4D,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,KAAIyhI,aAAa,SAASA,UAAT,CAAoB3uI,IAApB,EAA0B;AACzC2oI,kBAAgB,IAAhB,EAAsBgG,UAAtB;;AAEA,OAAKj5I,MAAL,GAAcoK,OAAOvM,MAArB;AACA,OAAKq7I,aAAL,GAAqB9uI,OAAOvM,MAA5B;AACA,OAAKwQ,OAAL,GAAe,EAAf;AACA,OAAK8qI,aAAL,GAAqB,EAArB;AACA,OAAKC,cAAL,GAAsB,EAAtB;AACA,OAAKnqI,cAAL,GAAsBmlI,MAAMM,IAA5B;AACA,OAAKvlI,eAAL,GAAuBilI,MAAMM,IAA7B;;AAEA,OAAKpqI,IAAL,GAAYA,IAAZ;AACD,EAZD;;AAcA,UAAS+uI,wBAAT,CAAkC/uI,IAAlC,EAAwC;AACtC,SAAO,UAAUiD,KAAV,EAAiB;AACtB,OAAI+rI,aAAa,IAAIL,UAAJ,CAAe3uI,IAAf,CAAjB;;AAEAgvI,cAAWjrI,OAAX,GAAqBd,MAAMc,OAA3B;AACAirI,cAAWH,aAAX,GAA2BxmI,MAAMvD,SAAN,CAAgB+I,KAAhB,CAAsBrF,IAAtB,CAA2BvF,MAAMc,OAAjC,CAA3B;AACAirI,cAAWF,cAAX,GAA4B7rI,MAAM6rI,cAAlC;AACAE,cAAWC,SAAX,GAAuBhsI,MAAMgsI,SAA7B;AACApI,cAAW7B,OAAX,CAAmB3nI,aAAnB,CAAiC2xI,UAAjC;AACD,GARD;AASD;;AAEDhrH,IAAGzrB,YAAH,CAAgBw2I,yBAAyB,YAAzB,CAAhB;AACA/qH,IAAGrkB,WAAH,CAAeovI,yBAAyB,WAAzB,CAAf;AACA/qH,IAAGxrB,UAAH,CAAcu2I,yBAAyB,UAAzB,CAAd;AACA/qH,IAAGkrH,aAAH,CAAiBH,yBAAyB,aAAzB,CAAjB;;AAED;AAAO,CA5iCG;AA6iCV;AACA,KAAO,UAAStiI,MAAT,EAAiBD,OAAjB,EAA0Bi4H,mBAA1B,EAA+C;;AAErD;;AAEA1/H,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIukI,QAAQrF,oBAAoB,CAApB,CAAZ;;AAEA;AACA,KAAIU,wBAAwBnhH,GAAGohH,iBAAH,EAA5B;AAAA,KACIC,WAAWF,sBAAsBE,QADrC;;AAGA,KAAIxmD,YAAY;AACdwmD,YAAUA,QADI;AAEd8J,YAAU,OAFI;AAGdC,cAAY,+HAHE;AAIdC,aAAW,4KAJG;AAKdC,UAAQ,IALM,EAKA;;AAEd;AACAC,eAAa;AACXC,uBAAoB1F,MAAMM,IADf;AAEXqF,kBAAe3F,MAAMM,IAFV;AAGXsF,eAAY5F,MAAMM;AAHP;AARC,EAAhB;;AAeA59H,SAAQw4H,OAAR,GAAkBnmD,SAAlB;;AAED;AAAO,CA7kCG;AA8kCV;AACA,KAAO,UAASpyE,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIikI,eAAe,YAAY;AAAE,WAASrkI,gBAAT,CAA0BzP,MAA1B,EAAkC+zI,KAAlC,EAAyC;AAAE,QAAK,IAAIxjI,IAAI,CAAb,EAAgBA,IAAIwjI,MAAMpnI,MAA1B,EAAkC4D,GAAlC,EAAuC;AAAE,QAAIs/H,aAAakE,MAAMxjI,CAAN,CAAjB,CAA2Bs/H,WAAWj5F,UAAX,GAAwBi5F,WAAWj5F,UAAX,IAAyB,KAAjD,CAAwDi5F,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAW4D,QAAX,GAAsB,IAAtB,CAA4BpkI,OAAOgI,cAAP,CAAsBrX,MAAtB,EAA8B6vI,WAAW71F,GAAzC,EAA8C61F,UAA9C;AAA2D;AAAE,GAAC,OAAO,UAAUqD,WAAV,EAAuBc,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBvkI,iBAAiByjI,YAAY9jI,SAA7B,EAAwC4kI,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBxkI,iBAAiByjI,WAAjB,EAA8Be,WAA9B,EAA4C,OAAOf,WAAP;AAAoB,GAA/M;AAAiN,EAA3hB,EAAnB;;AAEA,UAASD,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,KAAIyiI,OAAO,IAAIhnG,OAAJ,EAAX;AACA,KAAIinG,UAAU,IAAIjnG,OAAJ,EAAd;AACA,KAAIknG,iBAAiB,IAAIlnG,OAAJ,EAArB;AACA,KAAImnG,kBAAkB,IAAInnG,OAAJ,EAAtB;AACA,KAAIonG,eAAe,IAAIpnG,OAAJ,EAAnB;;AAEA,UAASqnG,aAAT,CAAuBhwI,IAAvB,EAA6B;AAC3B,MAAI,OAAO,KAAK,OAAOA,IAAZ,CAAP,KAA6B,UAAjC,EAA6C;AAC3C,QAAK,IAAIiwI,OAAO7mI,UAAU/G,MAArB,EAA6B6tI,OAAO7nI,MAAM4nI,OAAO,CAAP,GAAWA,OAAO,CAAlB,GAAsB,CAA5B,CAApC,EAAoEvK,OAAO,CAAhF,EAAmFA,OAAOuK,IAA1F,EAAgGvK,MAAhG,EAAwG;AACtGwK,SAAKxK,OAAO,CAAZ,IAAiBt8H,UAAUs8H,IAAV,CAAjB;AACD;;AAED,QAAK,OAAO1lI,IAAZ,EAAkB8uE,KAAlB,CAAwB,IAAxB,EAA8BohE,IAA9B;AACD;AACF;;AAED,UAASC,iBAAT,CAA2B9kD,UAA3B,EAAuC;AACrC,OAAKA,UAAL,GAAkBA,UAAlB;AACA2kD,gBAAcxnI,IAAd,CAAmB,IAAnB,EAAyB,kBAAzB;AACD;;AAED,KAAIy4F,iBAAiB,YAAY;AAC/B;AACA,WAASA,cAAT,GAA0B;AACxB0nC,mBAAgB,IAAhB,EAAsB1nC,cAAtB;;AAEA,QAAKmvC,OAAL,GAAe,IAAf;AACA,QAAKC,OAAL,GAAe,IAAf;AACA,QAAKC,MAAL,GAAc,IAAd;AACA,QAAKC,WAAL,GAAmB,IAAnB;AACA,QAAKC,UAAL,GAAkB,IAAlB;AACA,QAAKC,SAAL,GAAiB,IAAjB;AACA,QAAKC,SAAL,GAAiB,IAAjB;AACA,QAAKC,kBAAL,GAA0B,IAA1B;AACA,QAAKtlD,UAAL,GAAkB,CAAlB;AACA,QAAKmV,QAAL,GAAgB,IAAhB;AACA,QAAKowC,YAAL,GAAoB,IAApB;AACA,QAAKnwC,YAAL,GAAoB,EAApB;AACA,QAAKowC,WAAL,GAAmB,IAAnB;AACA,QAAKzvC,MAAL,GAAc,CAAd;AACA,QAAK0vC,UAAL,GAAkB,EAAlB;AACA,QAAKj7E,MAAL,GAAc,EAAd;AACA,QAAKwrC,eAAL,GAAuB,KAAvB;;AAEAwuC,kBAAe/6I,GAAf,CAAmB,IAAnB,EAAyB;AACvB,oBAAgB;AADO,IAAzB;AAGAg7I,mBAAgBh7I,GAAhB,CAAoB,IAApB,EAA0B,EAA1B;AACD;;AAED;;;;AAKA00I,eAAavoC,cAAb,EAA6B,CAAC;AAC5BvxD,QAAK,OADuB;AAE5BnqC,UAAO,SAASwrI,KAAT,GAAiB;AACtB,QAAIC,gBAAgBjB,aAAa1qI,GAAb,CAAiB,IAAjB,CAApB;;AAEA,QAAI2rI,aAAJ,EAAmB;AACjBA,mBAAcD,KAAd;AACD;AACF;AAR2B,GAAD,EAS1B;AACDrhG,QAAK,uBADJ;AAEDnqC,UAAO,SAAS0rI,qBAAT,GAAiC;AACtC,QAAIC,iBAAiBpB,gBAAgBzqI,GAAhB,CAAoB,IAApB,CAArB;;AAEA,WAAON,OAAOnJ,IAAP,CAAYs1I,cAAZ,EAA4B5uG,GAA5B,CAAgC,UAAUi/D,MAAV,EAAkB;AACvD,YAAOA,SAAS,IAAT,GAAgB2vC,eAAe3vC,MAAf,CAAvB;AACD,KAFM,EAEJtrC,IAFI,CAEC,IAFD,CAAP;AAGD;AARA,GAT0B,EAkB1B;AACDvmB,QAAK,mBADJ;AAEDnqC,UAAO,SAAS4rI,iBAAT,CAA2B5vC,MAA3B,EAAmC;AACxC,WAAOuuC,gBAAgBzqI,GAAhB,CAAoB,IAApB,EAA0Bk8F,MAA1B,CAAP;AACD;AAJA,GAlB0B,EAuB1B;AACD7xD,QAAK,MADJ;AAEDnqC,UAAO,SAAS27F,IAAT,CAAckwC,MAAd,EAAsB9iH,GAAtB,CAA0B,wCAA1B,EAAoE;AACzEshH,YAAQ96I,GAAR,CAAY,IAAZ,EAAkBs8I,MAAlB;AACAzB,SAAK76I,GAAL,CAAS,IAAT,EAAew5B,GAAf;AACA6hH,sBAAkB3nI,IAAlB,CAAuB,IAAvB,EAA6By4F,eAAeowC,MAA5C;AACD;AANA,GAvB0B,EA8B1B;AACD3hG,QAAK,kBADJ;AAEDnqC,UAAO,SAAS+7F,gBAAT,GAA4B,CAAE;AAFpC,GA9B0B,EAiCzB;AACD5xD,QAAK,kBADJ;AAEDnqC,UAAO,SAASjN,gBAAT,CAA0B0H,IAA1B,EAAgCuN,QAAhC,EAA0C;AAC/C,QAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAClC,SAAItK,QAAQ,EAAEvN,QAAQ,IAAV,EAAZ;AACA,SAAI47I,OAAO,IAAX;AACA,UAAK,OAAOtxI,IAAZ,IAAoB,YAAY;AAC9BuN,eAAS/E,IAAT,CAAc8oI,IAAd,EAAoBruI,KAApB;AACD,MAFD;AAGD;AACF;AAVA,GAjCyB,EA4CzB;AACFysC,QAAK,MADH;AAEFnqC,UAAO,SAASm8F,IAAT,GAAgB;AACrB,QAAIhvG,QAAQ,IAAZ;;AAEA,QAAI+F,OAAO2Q,UAAU/G,MAAV,GAAmB,CAAnB,IAAwB+G,UAAU,CAAV,MAAiB/O,SAAzC,GAAqD+O,UAAU,CAAV,CAArD,GAAoE,EAA/E;;AAEA,QAAI,KAAKiiF,UAAL,KAAoB4V,eAAeowC,MAAvC,EAA+C;AAC7C,WAAM,IAAIn4H,KAAJ,CAAU,kFAAV,CAAN;AACD,KAFD,MAEO;AACL8K,QAAGg9E,OAAH,CAAW;AACTvoG,YAAMA,IADG;AAET61B,WAAKqhH,KAAKtqI,GAAL,CAAS,IAAT,CAFI;AAGT+rI,cAAQxB,QAAQvqI,GAAR,CAAY,IAAZ,CAHC;AAITk8F,cAAQsuC,eAAexqI,GAAf,CAAmB,IAAnB,CAJC;AAKTo7F,oBAAc,KAAKA,YALV;AAMT8wC,eAAS,SAASA,OAAT,CAAiBC,IAAjB,EAAuB;AAC9B,WAAI/4I,OAAO+4I,KAAK/4I,IAAhB;AAAA,WACIg5I,aAAaD,KAAKC,UADtB;AAAA,WAEIlwC,SAASiwC,KAAKjwC,MAFlB;;AAIA,WAAI,OAAO9oG,IAAP,KAAgB,QAAhB,IAA4B,EAAEA,gBAAgBq3G,WAAlB,CAAhC,EAAgE;AAC9D,YAAI;AACFr3G,gBAAOs2C,KAAKC,SAAL,CAAev2C,IAAf,CAAP;AACD,SAFD,CAEE,OAAOohB,CAAP,EAAU;AACVphB,gBAAOA,IAAP;AACD;AACF;;AAED/F,aAAM0uG,MAAN,GAAeqwC,UAAf;AACA3B,uBAAgBh7I,GAAhB,CAAoBpC,KAApB,EAA2B6uG,MAA3B;AACAyuC,qBAAcxnI,IAAd,CAAmB9V,KAAnB,EAA0B,WAA1B;AACAy9I,yBAAkB3nI,IAAlB,CAAuB9V,KAAvB,EAA8BuuG,eAAeywC,gBAA7C;AACAvB,yBAAkB3nI,IAAlB,CAAuB9V,KAAvB,EAA8BuuG,eAAe0wC,OAA7C;;AAEAj/I,aAAM8tG,QAAN,GAAiB/nG,IAAjB;;AAEA,WAAIA,gBAAgBq3G,WAApB,EAAiC;AAC/Bp9G,cAAMk+I,YAAN,GAAqB,EAArB;AACA,YAAIgB,QAAQ,IAAIznG,UAAJ,CAAe1xC,IAAf,CAAZ;AACA,YAAI6tB,MAAMsrH,MAAMC,UAAhB;;AAEA,aAAK,IAAI5rI,IAAI,CAAb,EAAgBA,IAAIqgB,GAApB,EAAyBrgB,GAAzB,EAA8B;AAC5BvT,eAAMk+I,YAAN,IAAsBlqF,OAAOkyD,YAAP,CAAoBg5B,MAAM3rI,CAAN,CAApB,CAAtB;AACD;AACF,QARD,MAQO;AACLvT,cAAMk+I,YAAN,GAAqBn4I,IAArB;AACD;AACD03I,yBAAkB3nI,IAAlB,CAAuB9V,KAAvB,EAA8BuuG,eAAe6wC,IAA7C;AACA9B,qBAAcxnI,IAAd,CAAmB9V,KAAnB,EAA0B,MAA1B;AACAs9I,qBAAcxnI,IAAd,CAAmB9V,KAAnB,EAA0B,SAA1B;AACD,OAzCQ;AA0CTq/I,YAAM,SAASA,IAAT,CAAcC,KAAd,EAAqB;AACzB,WAAIC,SAASD,MAAMC,MAAnB;;AAEA;AACA,WAAIA,OAAO/rI,OAAP,CAAe,OAAf,MAA4B,CAAC,CAAjC,EAAoC;AAClC8pI,sBAAcxnI,IAAd,CAAmB9V,KAAnB,EAA0B,OAA1B;AACD,QAFD,MAEO;AACLs9I,sBAAcxnI,IAAd,CAAmB9V,KAAnB,EAA0B,OAA1B,EAAmCu/I,MAAnC;AACD;AACDjC,qBAAcxnI,IAAd,CAAmB9V,KAAnB,EAA0B,SAA1B;AACD;AApDQ,MAAX;AAsDD;AACF;AAjEC,GA5CyB,EA8G1B;AACDg9C,QAAK,kBADJ;AAEDnqC,UAAO,SAASk8F,gBAAT,CAA0BF,MAA1B,EAAkCh8F,KAAlC,EAAyC;AAC9C,QAAI2sI,WAAWrC,eAAexqI,GAAf,CAAmB,IAAnB,CAAf;;AAEA6sI,aAAS3wC,MAAT,IAAmBh8F,KAAnB;AACAsqI,mBAAe/6I,GAAf,CAAmB,IAAnB,EAAyBo9I,QAAzB;AACD;AAPA,GA9G0B,CAA7B;;AAwHA,SAAOjxC,cAAP;AACD,EA3JoB,EAArB;;AA6JAA,gBAAekxC,MAAf,GAAwB,CAAxB;AACAlxC,gBAAeowC,MAAf,GAAwB,CAAxB;AACApwC,gBAAeywC,gBAAf,GAAkC,CAAlC;AACAzwC,gBAAe0wC,OAAf,GAAyB,CAAzB;AACA1wC,gBAAe6wC,IAAf,GAAsB,CAAtB;AACAtlI,SAAQw4H,OAAR,GAAkB/jC,cAAlB;;AAED;AAAO,CApxCG;AAqxCV;AACA,KAAO,UAASx0F,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,KAAIikI,eAAe,YAAY;AAAE,WAASrkI,gBAAT,CAA0BzP,MAA1B,EAAkC+zI,KAAlC,EAAyC;AAAE,QAAK,IAAIxjI,IAAI,CAAb,EAAgBA,IAAIwjI,MAAMpnI,MAA1B,EAAkC4D,GAAlC,EAAuC;AAAE,QAAIs/H,aAAakE,MAAMxjI,CAAN,CAAjB,CAA2Bs/H,WAAWj5F,UAAX,GAAwBi5F,WAAWj5F,UAAX,IAAyB,KAAjD,CAAwDi5F,WAAWE,YAAX,GAA0B,IAA1B,CAAgC,IAAI,WAAWF,UAAf,EAA2BA,WAAW4D,QAAX,GAAsB,IAAtB,CAA4BpkI,OAAOgI,cAAP,CAAsBrX,MAAtB,EAA8B6vI,WAAW71F,GAAzC,EAA8C61F,UAA9C;AAA2D;AAAE,GAAC,OAAO,UAAUqD,WAAV,EAAuBc,UAAvB,EAAmCC,WAAnC,EAAgD;AAAE,OAAID,UAAJ,EAAgBvkI,iBAAiByjI,YAAY9jI,SAA7B,EAAwC4kI,UAAxC,EAAqD,IAAIC,WAAJ,EAAiBxkI,iBAAiByjI,WAAjB,EAA8Be,WAA9B,EAA4C,OAAOf,WAAP;AAAoB,GAA/M;AAAiN,EAA3hB,EAAnB;;AAEA,UAASD,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ,KAAIklI,cAAc,IAAIzpG,OAAJ,EAAlB;;AAEA,KAAI49F,YAAY,YAAY;AAC1B;AACA;AACA;AACA,WAASA,SAAT,CAAmBj4G,GAAnB,EAAwB;AACtB,OAAI57B,QAAQ,IAAZ;;AAEA,OAAI2/I,YAAYjpI,UAAU/G,MAAV,GAAmB,CAAnB,IAAwB+G,UAAU,CAAV,MAAiB/O,SAAzC,GAAqD+O,UAAU,CAAV,CAArD,GAAoE,EAApF;;AAEAu/H,mBAAgB,IAAhB,EAAsBpC,SAAtB;;AAEA,QAAK+L,UAAL,GAAkB,EAAlB;AACA,QAAKC,cAAL,GAAsB,CAAtB;AACA,QAAKvxF,UAAL,GAAkB,EAAlB;AACA,QAAKwxF,OAAL,GAAe,IAAf;AACA,QAAKnC,OAAL,GAAe,IAAf;AACA,QAAKoC,SAAL,GAAiB,IAAjB;AACA,QAAKC,MAAL,GAAc,IAAd;AACA,QAAKC,QAAL,GAAgB,EAAhB;AACA,QAAKtnD,UAAL,GAAkB,CAAlB;;AAEA,OAAI,OAAO/8D,GAAP,KAAe,QAAf,IAA2B,CAAC,yBAAyBwd,IAAzB,CAA8Bxd,GAA9B,CAAhC,EAAoE;AAClE,UAAM,IAAIphB,SAAJ,CAAc,kDAAkDohB,GAAlD,GAAwD,eAAtE,CAAN;AACD;;AAED,QAAKA,GAAL,GAAWA,GAAX;AACA,QAAK+8D,UAAL,GAAkBk7C,UAAUqM,UAA5B;;AAEA,OAAIC,aAAa7uH,GAAG8uH,aAAH,CAAiB;AAChCxkH,SAAKA,GAD2B;AAEhC+jH,eAAWhqI,MAAM63B,OAAN,CAAcmyG,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD;AAFlB,IAAjB,CAAjB;;AAKAD,eAAYt9I,GAAZ,CAAgB,IAAhB,EAAsB+9I,UAAtB;;AAEAA,cAAWE,OAAX,CAAmB,UAAUj3B,GAAV,EAAe;AAChCppH,UAAM24F,UAAN,GAAmBk7C,UAAUyM,MAA7B;AACA,QAAI,OAAOtgJ,MAAM8/I,OAAb,KAAyB,UAA7B,EAAyC;AACvC9/I,WAAM8/I,OAAN,CAAc12B,GAAd;AACD;AACF,IALD;;AAOA+2B,cAAWI,SAAX,CAAqB,UAAUn3B,GAAV,EAAe;AAClC,QAAI,OAAOppH,MAAM+/I,SAAb,KAA2B,UAA/B,EAA2C;AACzC//I,WAAM+/I,SAAN,CAAgB32B,GAAhB;AACD;AACF,IAJD;;AAMA+2B,cAAWK,MAAX,CAAkB,YAAY;AAC5BxgJ,UAAM24F,UAAN,GAAmBk7C,UAAU4M,IAA7B;AACA,QAAI,OAAOzgJ,MAAMggJ,MAAb,KAAwB,UAA5B,EAAwC;AACtChgJ,WAAMggJ,MAAN;AACD;AACF,IALD;;AAOAG,cAAW7zC,OAAX,CAAmB,UAAU8c,GAAV,EAAe;AAChC,QAAI,OAAOppH,MAAM29I,OAAb,KAAyB,UAA7B,EAAyC;AACvC39I,WAAM29I,OAAN,CAAc,IAAIn3H,KAAJ,CAAU4iG,IAAIm2B,MAAd,CAAd;AACD;AACF,IAJD;;AAMA,UAAO,IAAP;AACD,GA9DyB,CA8DxB;AACF;AACA;;AAEA;;;AAGAzI,eAAajD,SAAb,EAAwB,CAAC;AACvB72F,QAAK,OADkB;AAEvBnqC,UAAO,SAAS6tI,KAAT,CAAet6E,IAAf,EAAqBu6E,MAArB,EAA6B;AAClC,SAAKhoD,UAAL,GAAkBk7C,UAAU+M,OAA5B;AACA,QAAIT,aAAaT,YAAY/sI,GAAZ,CAAgB,IAAhB,CAAjB;;AAEAwtI,eAAWO,KAAX,CAAiB;AACft6E,WAAMA,IADS;AAEfu6E,aAAQA;AAFO,KAAjB;AAID;AAVsB,GAAD,EAWrB;AACD3jG,QAAK,MADJ;AAEDnqC,UAAO,SAASm8F,IAAT,CAAcjpG,IAAd,EAAoB;AACzB,QAAI,OAAOA,IAAP,KAAgB,QAAhB,IAA4B,EAAEA,gBAAgBq3G,WAAlB,CAAhC,EAAgE;AAC9D,WAAM,IAAI5iG,SAAJ,CAAc,sCAAsCzU,IAAtC,GAA6C,aAA3D,CAAN;AACD;;AAED,QAAIo6I,aAAaT,YAAY/sI,GAAZ,CAAgB,IAAhB,CAAjB;;AAEAwtI,eAAWnxC,IAAX,CAAgB;AACdjpG,WAAMA;AADQ,KAAhB;AAGD;AAZA,GAXqB,CAAxB;;AA0BA,SAAO8tI,SAAP;AACD,EAhGe,EAAhB;;AAkGAA,WAAUqM,UAAV,GAAuB,CAAvB;AACArM,WAAU4M,IAAV,GAAiB,CAAjB;AACA5M,WAAU+M,OAAV,GAAoB,CAApB;AACA/M,WAAUyM,MAAV,GAAmB,CAAnB;AACAxmI,SAAQw4H,OAAR,GAAkBuB,SAAlB;;AAED;AAAO,CA54CG;AA64CV;AACA,KAAO,UAAS95H,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;;AAIA,UAASojI,eAAT,CAAyBroB,QAAzB,EAAmCsoB,WAAnC,EAAgD;AAAE,MAAI,EAAEtoB,oBAAoBsoB,WAAtB,CAAJ,EAAwC;AAAE,SAAM,IAAI17H,SAAJ,CAAc,mCAAd,CAAN;AAA0D;AAAE;;AAExJ;;;AAGA,KAAIm5H,aAAa,SAASA,UAAT,GAAsB;AACrCsC,kBAAgB,IAAhB,EAAsBtC,UAAtB;AACD,EAFD;;AAIA75H,SAAQw4H,OAAR,GAAkBqB,UAAlB;;AAED;AAAO,CAj6CG;AAk6CV;AACA,KAAO,UAAS55H,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;AAGA,KAAI4gI,eAAe;AACjB,MAAI9jI,MAAJ,GAAa;AACX,OAAIkxI,wBAAwBvvH,GAAGwvH,kBAAH,EAA5B;AAAA,OACI53I,OAAO23I,sBAAsB33I,IADjC;;AAGA,UAAOA,KAAKyG,MAAZ;AACD,GANgB;;AAQjBqtC,OAAK,SAASA,GAAT,CAAavkC,CAAb,EAAgB;AACnB,OAAIsoI,yBAAyBzvH,GAAGwvH,kBAAH,EAA7B;AAAA,OACI53I,OAAO63I,uBAAuB73I,IADlC;;AAGA,UAAOA,KAAKuP,CAAL,CAAP;AACD,GAbgB;AAcjBuoI,WAAS,SAASA,OAAT,CAAiBhkG,GAAjB,EAAsB;AAC7B,UAAO1rB,GAAG2vH,cAAH,CAAkBjkG,GAAlB,CAAP;AACD,GAhBgB;AAiBjBkkG,WAAS,SAASA,OAAT,CAAiBlkG,GAAjB,EAAsBnqC,KAAtB,EAA6B;AACpC,UAAOye,GAAG6vH,cAAH,CAAkBnkG,GAAlB,EAAuBnqC,KAAvB,CAAP;AACD,GAnBgB;AAoBjBuuI,cAAY,SAASA,UAAT,CAAoBpkG,GAApB,EAAyB;AACnC1rB,MAAG+vH,iBAAH,CAAqBrkG,GAArB;AACD,GAtBgB;AAuBjB0Z,SAAO,SAASA,KAAT,GAAiB;AACtBplC,MAAGgwH,gBAAH;AACD;AAzBgB,EAAnB;;AA4BAxnI,SAAQw4H,OAAR,GAAkBmB,YAAlB;;AAED;AAAO,CAx8CG;AAy8CV;AACA,KAAO,UAAS15H,MAAT,EAAiBD,OAAjB,EAA0B;;AAEhC;;AAEAzH,QAAOgI,cAAP,CAAsBP,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CjH,SAAO;AADoC,EAA7C;AAGA,KAAI2gI,WAAW;AACb+N,QAAM,SADO;AAEbC,UAAQ,SAASA,MAAT,GAAkB,CAAE;AAFf,EAAf;;AAKA1nI,SAAQw4H,OAAR,GAAkBkB,QAAlB;;AAED;AAAO,CAx9CG;AAy9CV,QAngDS,E","file":"wx/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./wx/game.js\");\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import * as THREE from './libs/three.js';\r\nimport './libs/OrbitControls.js';\r\nimport * as TWEEN from './libs/Tween.js';\r\n// import './libs/RequestAnimationFrame.js';\r\n\r\nlet scene;\r\nlet camera;\r\nlet renderer;\r\nlet plane;\r\nlet shadowLight;\r\nlet jumper;\r\nlet cube;\r\nlet secondCube;\r\nlet id = 0;\r\nlet _this;\r\nlet isJumping;\r\nlet diffX;\r\nlet diffY;\r\nlet cubeContainer = [];\r\nlet touchStartTime;\r\nlet touchEndTime;\r\n\r\nexport default class JumpDemo {\r\n\r\n    constructor() {\r\n        scene = new THREE.Scene();\r\n        camera = new THREE.PerspectiveCamera(75, innerWidth / innerHeight, 0.1, 1000);\r\n        const ctx = canvas.getContext('webgl', { antialias: true });\r\n        renderer = new THREE.WebGLRenderer({ context: ctx, canvas: canvas });\r\n        renderer.setClearColor(\"#ffffff\");\r\n        renderer.setSize(innerWidth, innerHeight);\r\n        renderer.shadowMap.enabled = true;\r\n\r\n        camera.position.x = 0;\r\n        camera.position.y = -7;\r\n        camera.position.z = 5;\r\n\r\n        this.createPlane();\r\n        this.createBox();\r\n        this.createJumper();\r\n        this.createLights();\r\n\r\n        this.addListeners();\r\n\r\n        new THREE.OrbitControls(camera);\r\n        _this = this;\r\n        requestAnimationFrame(() => this.loop());\r\n\r\n    }\r\n\r\n    createLights() {\r\n        shadowLight = new THREE.DirectionalLight(\"#ffffff\", 1);\r\n        // let spotLightHelper = new THREE.SpotLightHelper(shadowLight, \"#aaaaaa\");\r\n        // scene.add(spotLightHelper);\r\n        shadowLight.castShadow = true;\r\n        shadowLight.position.set(200, 0, 200);\r\n        shadowLight.shadow.left = -100;\r\n        shadowLight.shadow.right = 100;\r\n        shadowLight.shadow.top = 100;\r\n        shadowLight.shadow.bottom = -100;\r\n        // shadowLight.shadow.near = 0.1;\r\n        // shadowLight.shadow.far = 1000;\r\n        shadowLight.shadow.camera.near = 0.1;\r\n        shadowLight.shadow.camera.fa = 100;\r\n        shadowLight.shadow.mapSize.width = 1024;\r\n        shadowLight.shadow.mapSize.height = 1024;\r\n        scene.add(shadowLight);\r\n\r\n        shadowLight.target = jumper;\r\n\r\n        let ambientLight = new THREE.AmbientLight(\"#ffffff\", 0.2);\r\n        scene.add(ambientLight);\r\n\r\n        let helper = new THREE.CameraHelper(shadowLight.shadow.camera);\r\n        scene.add(helper);\r\n    }\r\n\r\n    createPlane() {\r\n        let planeGeometry = new THREE.PlaneBufferGeometry(100, 100, 10, 10);\r\n        let planeMaterial = new THREE.MeshLambertMaterial({\r\n            color: \"#ffffff\"\r\n        });\r\n        plane = new THREE.Mesh(planeGeometry, planeMaterial);\r\n        plane.receiveShadow = true;\r\n        scene.add(plane);\r\n    }\r\n\r\n    createBox() {\r\n\r\n        //2cube\r\n        //1\r\n        let boxGeometry = new THREE.BoxGeometry(2, 2, 0.5, 4, 4, 2);\r\n        // let texture = new THREE.TextureLoader().load(\"res/record.png\");\r\n        let boxMaterial = new THREE.MeshPhongMaterial({\r\n            color: \"#ffffff\",\r\n            flatShading: THREE.FlatShading,\r\n            // map: texture\r\n        });\r\n        cube = new THREE.Mesh(boxGeometry, boxMaterial);\r\n        cube.translateZ(0.25);\r\n        cube.rotation.z = -40;\r\n        cube.castShadow = true;\r\n        cube.receiveShadow = true;\r\n        cubeContainer.push(cube);\r\n        scene.add(cube);\r\n        id++;\r\n\r\n        //2\r\n        secondCube = cube.clone();\r\n        secondCube.castShadow = true;\r\n        secondCube.receiveShadow = true;\r\n        secondCube.translateX(-3);\r\n        secondCube.translateY(0);\r\n        scene.add(secondCube);\r\n        cubeContainer.push(secondCube);\r\n        id++;\r\n\r\n\r\n        //2cube\r\n        let firstCubePos = cube.position;\r\n        let secondCubePos = secondCube.position;\r\n        diffX = secondCubePos.x - firstCubePos.x;\r\n        diffY = secondCubePos.y - firstCubePos.y;\r\n    }\r\n\r\n    CalculateJumpDiff() {\r\n        //2cube\r\n        let currentCubePos = cubeContainer[id - 2].position;\r\n        let nextCubePos = cubeContainer[id - 1].position;\r\n        diffX = nextCubePos.x - currentCubePos.x;\r\n        diffY = nextCubePos.y - currentCubePos.y;\r\n    }\r\n\r\n    createJumper() {\r\n\r\n        //--\r\n        jumper = new THREE.Object3D();\r\n\r\n        let cylinderGeometry = new THREE.CylinderGeometry(0.1, 0.2, 0.5);\r\n        let cylinderMaterial = new THREE.MeshPhongMaterial({ color: \"#00008B\" });\r\n        let cylinder = new THREE.Mesh(cylinderGeometry, cylinderMaterial);\r\n        cylinder.position.set(0, 0, 0.75);\r\n        cylinder.rotation.x = Math.PI / 2;\r\n        cylinder.castShadow = true;\r\n        jumper.add(cylinder);\r\n\r\n        let topSphereGeometry = new THREE.SphereGeometry(0.15);\r\n        let topSphereMaterial = new THREE.MeshPhongMaterial({ color: \"#00008B\" });\r\n        let topSphere = new THREE.Mesh(topSphereGeometry, topSphereMaterial);\r\n        topSphere.position.set(0, 0, 1.45);\r\n        topSphere.castShadow = true;\r\n        jumper.add(topSphere);\r\n\r\n        let middleSphereGeometry = new THREE.SphereGeometry(0.15);\r\n        let middleSphereMaterial = new THREE.MeshPhongMaterial({ color: \"#00008B\" });\r\n        let middleSphere = new THREE.Mesh(middleSphereGeometry, middleSphereMaterial);\r\n        middleSphere.position.set(0, 0, 1.1);\r\n        middleSphere.castShadow = true;\r\n        jumper.add(middleSphere);\r\n        jumper.castShadow = true;\r\n\r\n        scene.add(jumper);\r\n    }\r\n\r\n    loop() {\r\n        TWEEN.update();\r\n        renderer.render(scene, camera);\r\n        requestAnimationFrame(() => this.loop());\r\n    }\r\n\r\n    addListeners() {\r\n        canvas.addEventListener('touchstart', this.onTouchStart, false);\r\n        canvas.addEventListener('touchend', this.onTouchEnd, false);\r\n    }\r\n\r\n    onTouchStart(data) {\r\n        if (isJumping) {\r\n            return;\r\n        }\r\n        touchStartTime = new Date().getTime();\r\n    }\r\n\r\n    onTouchEnd(data) {\r\n        if (isJumping) {\r\n            return;\r\n        }\r\n        touchEndTime = new Date().getTime();\r\n\r\n        console.log(\"touch-time: \", touchEndTime - touchStartTime);\r\n\r\n\r\n\r\n        _this.CalculateJumpDiff();\r\n        //Tween.js \r\n        let startCoords = { x: jumper.position.x, y: jumper.position.y, z: 0 };\r\n        let finishCoords = { x: startCoords.x + diffX, y: startCoords.y + diffY, z: 2 };\r\n        let tween = new TWEEN.Tween(startCoords)\r\n            .to(finishCoords, 2000)\r\n            .easing(TWEEN.Easing.Sinusoidal.InOut)\r\n            .onUpdate(() => {\r\n                let z;\r\n                if (startCoords.z <= 1) {\r\n                    z = startCoords.z;\r\n                } else {\r\n                    z = 2 - startCoords.z;\r\n                }\r\n                // jumper.rotation.y = startCoords.z * Math.PI;\r\n                jumper.position.set(startCoords.x, startCoords.y, z * 2);\r\n            })\r\n            .onComplete(() => {\r\n                _this.addNewMesh();\r\n                _this.moveCamera();\r\n            });\r\n        isJumping = true;\r\n        tween.start();\r\n    }\r\n\r\n    addNewMesh() {\r\n        let newCube = cubeContainer[id - 1].clone();\r\n        newCube.castShadow = true;\r\n        newCube.receiveShadow = true;\r\n        if (Math.random() > 0.5) {\r\n            newCube.translateY(3);\r\n            //\r\n        } else {\r\n            //\r\n            newCube.translateX(-3);\r\n        }\r\n        scene.add(newCube);\r\n        cubeContainer.push(newCube);\r\n        id++;\r\n    }\r\n\r\n    moveCamera() {\r\n        this.CalculateJumpDiff();\r\n        let cameraStartCoords = { x: camera.position.x, y: camera.position.y, z: camera.position.z };\r\n        let cameraFinishCoords = { x: cameraStartCoords.x + diffX, y: cameraStartCoords.y + diffY, z: camera.position.z };\r\n        let tween = new TWEEN.Tween(cameraStartCoords)\r\n            .to(cameraFinishCoords, 1000)\r\n            .easing(TWEEN.Easing.Linear.None)\r\n            .onUpdate(() => {\r\n                camera.position.set(cameraStartCoords.x, cameraStartCoords.y, cameraStartCoords.z);\r\n            })\r\n            .onComplete(() => {\r\n                isJumping = false;\r\n            });\r\n        tween.start();\r\n    }\r\n\r\n}","import * as THREE from './three.js';\r\n\r\n/**\r\n * @author qiao / https://github.com/qiao\r\n * @author mrdoob / http://mrdoob.com\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author erich666 / http://erichaines.com\r\n */\r\n\r\n// This set of controls performs orbiting, dollying (zooming), and panning.\r\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\r\n//\r\n//    Orbit - left mouse / touch: one finger move\r\n//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\r\n//    Pan - right mouse, or arrow keys / touch: three finger swipe\r\n\r\nTHREE.OrbitControls = function (object, domElement) {\r\n\r\n  this.object = object;\r\n\r\n  this.domElement = (domElement !== undefined) ? domElement : document;\r\n\r\n  // Set to false to disable this control\r\n  this.enabled = true;\r\n\r\n  // \"target\" sets the location of focus, where the object orbits around\r\n  this.target = new THREE.Vector3();\r\n\r\n  // How far you can dolly in and out ( PerspectiveCamera only )\r\n  this.minDistance = 0;\r\n  this.maxDistance = Infinity;\r\n\r\n  // How far you can zoom in and out ( OrthographicCamera only )\r\n  this.minZoom = 0;\r\n  this.maxZoom = Infinity;\r\n\r\n  // How far you can orbit vertically, upper and lower limits.\r\n  // Range is 0 to Math.PI radians.\r\n  this.minPolarAngle = 0; // radians\r\n  this.maxPolarAngle = Math.PI; // radians\r\n\r\n  // How far you can orbit horizontally, upper and lower limits.\r\n  // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\r\n  this.minAzimuthAngle = - Infinity; // radians\r\n  this.maxAzimuthAngle = Infinity; // radians\r\n\r\n  // Set to true to enable damping (inertia)\r\n  // If damping is enabled, you must call controls.update() in your animation loop\r\n  this.enableDamping = false;\r\n  this.dampingFactor = 0.25;\r\n\r\n  // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\r\n  // Set to false to disable zooming\r\n  this.enableZoom = true;\r\n  this.zoomSpeed = 1.0;\r\n\r\n  // Set to false to disable rotating\r\n  this.enableRotate = true;\r\n  this.rotateSpeed = 1.0;\r\n\r\n  // Set to false to disable panning\r\n  this.enablePan = true;\r\n  this.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\r\n\r\n  // Set to true to automatically rotate around the target\r\n  // If auto-rotate is enabled, you must call controls.update() in your animation loop\r\n  this.autoRotate = false;\r\n  this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\r\n\r\n  // Set to false to disable use of the keys\r\n  this.enableKeys = true;\r\n\r\n  // The four arrow keys\r\n  this.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\r\n\r\n  // Mouse buttons\r\n  this.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\r\n\r\n  // for reset\r\n  this.target0 = this.target.clone();\r\n  this.position0 = this.object.position.clone();\r\n  this.zoom0 = this.object.zoom;\r\n\r\n  //\r\n  // public methods\r\n  //\r\n\r\n  this.getPolarAngle = function () {\r\n\r\n    return spherical.phi;\r\n\r\n  };\r\n\r\n  this.getAzimuthalAngle = function () {\r\n\r\n    return spherical.theta;\r\n\r\n  };\r\n\r\n  this.saveState = function () {\r\n\r\n    scope.target0.copy(scope.target);\r\n    scope.position0.copy(scope.object.position);\r\n    scope.zoom0 = scope.object.zoom;\r\n\r\n  };\r\n\r\n  this.reset = function () {\r\n\r\n    scope.target.copy(scope.target0);\r\n    scope.object.position.copy(scope.position0);\r\n    scope.object.zoom = scope.zoom0;\r\n\r\n    scope.object.updateProjectionMatrix();\r\n    scope.dispatchEvent(changeEvent);\r\n\r\n    scope.update();\r\n\r\n    state = STATE.NONE;\r\n\r\n  };\r\n\r\n  // this method is exposed, but perhaps it would be better if we can make it private...\r\n  this.update = function () {\r\n\r\n    var offset = new THREE.Vector3();\r\n\r\n    // so camera.up is the orbit axis\r\n    var quat = new THREE.Quaternion().setFromUnitVectors(object.up, new THREE.Vector3(0, 1, 0));\r\n    var quatInverse = quat.clone().inverse();\r\n\r\n    var lastPosition = new THREE.Vector3();\r\n    var lastQuaternion = new THREE.Quaternion();\r\n\r\n    return function update() {\r\n\r\n      var position = scope.object.position;\r\n\r\n      offset.copy(position).sub(scope.target);\r\n\r\n      // rotate offset to \"y-axis-is-up\" space\r\n      offset.applyQuaternion(quat);\r\n\r\n      // angle from z-axis around y-axis\r\n      spherical.setFromVector3(offset);\r\n\r\n      if (scope.autoRotate && state === STATE.NONE) {\r\n\r\n        rotateLeft(getAutoRotationAngle());\r\n\r\n      }\r\n\r\n      spherical.theta += sphericalDelta.theta;\r\n      spherical.phi += sphericalDelta.phi;\r\n\r\n      // restrict theta to be between desired limits\r\n      spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta));\r\n\r\n      // restrict phi to be between desired limits\r\n      spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\r\n\r\n      spherical.makeSafe();\r\n\r\n\r\n      spherical.radius *= scale;\r\n\r\n      // restrict radius to be between desired limits\r\n      spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius));\r\n\r\n      // move target to panned location\r\n      scope.target.add(panOffset);\r\n\r\n      offset.setFromSpherical(spherical);\r\n\r\n      // rotate offset back to \"camera-up-vector-is-up\" space\r\n      offset.applyQuaternion(quatInverse);\r\n\r\n      position.copy(scope.target).add(offset);\r\n\r\n      scope.object.lookAt(scope.target);\r\n\r\n      if (scope.enableDamping === true) {\r\n\r\n        sphericalDelta.theta *= (1 - scope.dampingFactor);\r\n        sphericalDelta.phi *= (1 - scope.dampingFactor);\r\n\r\n      } else {\r\n\r\n        sphericalDelta.set(0, 0, 0);\r\n\r\n      }\r\n\r\n      scale = 1;\r\n      panOffset.set(0, 0, 0);\r\n\r\n      // update condition is:\r\n      // min(camera displacement, camera rotation in radians)^2 > EPS\r\n      // using small-angle approximation cos(x/2) = 1 - x^2 / 8\r\n\r\n      if (zoomChanged ||\r\n        lastPosition.distanceToSquared(scope.object.position) > EPS ||\r\n        8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\r\n\r\n        scope.dispatchEvent(changeEvent);\r\n\r\n        lastPosition.copy(scope.object.position);\r\n        lastQuaternion.copy(scope.object.quaternion);\r\n        zoomChanged = false;\r\n\r\n        return true;\r\n\r\n      }\r\n\r\n      return false;\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  this.dispose = function () {\r\n\r\n    scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\r\n    scope.domElement.removeEventListener('mousedown', onMouseDown, false);\r\n    scope.domElement.removeEventListener('wheel', onMouseWheel, false);\r\n\r\n    scope.domElement.removeEventListener('touchstart', onTouchStart, false);\r\n    scope.domElement.removeEventListener('touchend', onTouchEnd, false);\r\n    scope.domElement.removeEventListener('touchmove', onTouchMove, false);\r\n\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n\r\n    window.removeEventListener('keydown', onKeyDown, false);\r\n\r\n    //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\r\n\r\n  };\r\n\r\n  //\r\n  // internals\r\n  //\r\n\r\n  var scope = this;\r\n\r\n  var changeEvent = { type: 'change' };\r\n  var startEvent = { type: 'start' };\r\n  var endEvent = { type: 'end' };\r\n\r\n  var STATE = { NONE: - 1, ROTATE: 0, DOLLY: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_DOLLY: 4, TOUCH_PAN: 5 };\r\n\r\n  var state = STATE.NONE;\r\n\r\n  var EPS = 0.000001;\r\n\r\n  // current position in spherical coordinates\r\n  var spherical = new THREE.Spherical();\r\n  var sphericalDelta = new THREE.Spherical();\r\n\r\n  var scale = 1;\r\n  var panOffset = new THREE.Vector3();\r\n  var zoomChanged = false;\r\n\r\n  var rotateStart = new THREE.Vector2();\r\n  var rotateEnd = new THREE.Vector2();\r\n  var rotateDelta = new THREE.Vector2();\r\n\r\n  var panStart = new THREE.Vector2();\r\n  var panEnd = new THREE.Vector2();\r\n  var panDelta = new THREE.Vector2();\r\n\r\n  var dollyStart = new THREE.Vector2();\r\n  var dollyEnd = new THREE.Vector2();\r\n  var dollyDelta = new THREE.Vector2();\r\n\r\n  function getAutoRotationAngle() {\r\n\r\n    return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\r\n\r\n  }\r\n\r\n  function getZoomScale() {\r\n\r\n    return Math.pow(0.95, scope.zoomSpeed);\r\n\r\n  }\r\n\r\n  function rotateLeft(angle) {\r\n\r\n    sphericalDelta.theta -= angle;\r\n\r\n  }\r\n\r\n  function rotateUp(angle) {\r\n\r\n    sphericalDelta.phi -= angle;\r\n\r\n  }\r\n\r\n  var panLeft = function () {\r\n\r\n    var v = new THREE.Vector3();\r\n\r\n    return function panLeft(distance, objectMatrix) {\r\n\r\n      v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\r\n      v.multiplyScalar(- distance);\r\n\r\n      panOffset.add(v);\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  var panUp = function () {\r\n\r\n    var v = new THREE.Vector3();\r\n\r\n    return function panUp(distance, objectMatrix) {\r\n\r\n      v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\r\n      v.multiplyScalar(distance);\r\n\r\n      panOffset.add(v);\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  // deltaX and deltaY are in pixels; right and down are positive\r\n  var pan = function () {\r\n\r\n    var offset = new THREE.Vector3();\r\n\r\n    return function pan(deltaX, deltaY) {\r\n\r\n      var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n      if (scope.object.isPerspectiveCamera) {\r\n\r\n        // perspective\r\n        var position = scope.object.position;\r\n        offset.copy(position).sub(scope.target);\r\n        var targetDistance = offset.length();\r\n\r\n        // half of the fov is center to top of screen\r\n        targetDistance *= Math.tan((scope.object.fov / 2) * Math.PI / 180.0);\r\n\r\n        // we actually don't use screenWidth, since perspective camera is fixed to screen height\r\n        panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\r\n        panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\r\n\r\n      } else if (scope.object.isOrthographicCamera) {\r\n\r\n        // orthographic\r\n        panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\r\n        panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\r\n\r\n      } else {\r\n\r\n        // camera neither orthographic nor perspective\r\n        console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\r\n        scope.enablePan = false;\r\n\r\n      }\r\n\r\n    };\r\n\r\n  }();\r\n\r\n  function dollyIn(dollyScale) {\r\n\r\n    if (scope.object.isPerspectiveCamera) {\r\n\r\n      scale /= dollyScale;\r\n\r\n    } else if (scope.object.isOrthographicCamera) {\r\n\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function dollyOut(dollyScale) {\r\n\r\n    if (scope.object.isPerspectiveCamera) {\r\n\r\n      scale *= dollyScale;\r\n\r\n    } else if (scope.object.isOrthographicCamera) {\r\n\r\n      scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\r\n      scope.object.updateProjectionMatrix();\r\n      zoomChanged = true;\r\n\r\n    } else {\r\n\r\n      console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\r\n      scope.enableZoom = false;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  //\r\n  // event callbacks - update the object state\r\n  //\r\n\r\n  function handleMouseDownRotate(event) {\r\n\r\n    //console.log( 'handleMouseDownRotate' );\r\n\r\n    rotateStart.set(event.clientX, event.clientY);\r\n\r\n  }\r\n\r\n  function handleMouseDownDolly(event) {\r\n\r\n    //console.log( 'handleMouseDownDolly' );\r\n\r\n    dollyStart.set(event.clientX, event.clientY);\r\n\r\n  }\r\n\r\n  function handleMouseDownPan(event) {\r\n\r\n    //console.log( 'handleMouseDownPan' );\r\n\r\n    panStart.set(event.clientX, event.clientY);\r\n\r\n  }\r\n\r\n  function handleMouseMoveRotate(event) {\r\n\r\n    //console.log( 'handleMouseMoveRotate' );\r\n\r\n    rotateEnd.set(event.clientX, event.clientY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    // rotating across whole screen goes 360 degrees around\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed);\r\n\r\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n    rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\r\n\r\n    rotateStart.copy(rotateEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMoveDolly(event) {\r\n\r\n    //console.log( 'handleMouseMoveDolly' );\r\n\r\n    dollyEnd.set(event.clientX, event.clientY);\r\n\r\n    dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n    if (dollyDelta.y > 0) {\r\n\r\n      dollyIn(getZoomScale());\r\n\r\n    } else if (dollyDelta.y < 0) {\r\n\r\n      dollyOut(getZoomScale());\r\n\r\n    }\r\n\r\n    dollyStart.copy(dollyEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseMovePan(event) {\r\n\r\n    //console.log( 'handleMouseMovePan' );\r\n\r\n    panEnd.set(event.clientX, event.clientY);\r\n\r\n    panDelta.subVectors(panEnd, panStart);\r\n\r\n    pan(panDelta.x, panDelta.y);\r\n\r\n    panStart.copy(panEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleMouseUp(event) {\r\n\r\n    // console.log( 'handleMouseUp' );\r\n\r\n  }\r\n\r\n  function handleMouseWheel(event) {\r\n\r\n    // console.log( 'handleMouseWheel' );\r\n\r\n    if (event.deltaY < 0) {\r\n\r\n      dollyOut(getZoomScale());\r\n\r\n    } else if (event.deltaY > 0) {\r\n\r\n      dollyIn(getZoomScale());\r\n\r\n    }\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleKeyDown(event) {\r\n\r\n    //console.log( 'handleKeyDown' );\r\n\r\n    switch (event.keyCode) {\r\n\r\n      case scope.keys.UP:\r\n        pan(0, scope.keyPanSpeed);\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.BOTTOM:\r\n        pan(0, - scope.keyPanSpeed);\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.LEFT:\r\n        pan(scope.keyPanSpeed, 0);\r\n        scope.update();\r\n        break;\r\n\r\n      case scope.keys.RIGHT:\r\n        pan(- scope.keyPanSpeed, 0);\r\n        scope.update();\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function handleTouchStartRotate(event) {\r\n\r\n    //console.log( 'handleTouchStartRotate' );\r\n\r\n    rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n  }\r\n\r\n  function handleTouchStartDolly(event) {\r\n\r\n    //console.log( 'handleTouchStartDolly' );\r\n\r\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\r\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n    var distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    dollyStart.set(0, distance);\r\n\r\n  }\r\n\r\n  function handleTouchStartPan(event) {\r\n\r\n    //console.log( 'handleTouchStartPan' );\r\n\r\n    panStart.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n  }\r\n\r\n  function handleTouchMoveRotate(event) {\r\n\r\n    //console.log( 'handleTouchMoveRotate' );\r\n\r\n    rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n    rotateDelta.subVectors(rotateEnd, rotateStart);\r\n\r\n    var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\r\n\r\n    // rotating across whole screen goes 360 degrees around\r\n    //rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\r\n    rotateLeft(2 * Math.PI * rotateDelta.x / window.innerWidth * scope.rotateSpeed);\r\n\r\n    // rotating up and down along whole screen attempts to go 360, but limited to 180\r\n    //rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\r\n    rotateUp(2 * Math.PI * rotateDelta.y / window.innerHeight * scope.rotateSpeed);\r\n\r\n    rotateStart.copy(rotateEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleTouchMoveDolly(event) {\r\n\r\n    //console.log( 'handleTouchMoveDolly' );\r\n\r\n    var dx = event.touches[0].pageX - event.touches[1].pageX;\r\n    var dy = event.touches[0].pageY - event.touches[1].pageY;\r\n\r\n    var distance = Math.sqrt(dx * dx + dy * dy);\r\n\r\n    dollyEnd.set(0, distance);\r\n\r\n    dollyDelta.subVectors(dollyEnd, dollyStart);\r\n\r\n    if (dollyDelta.y > 0) {\r\n\r\n      dollyOut(getZoomScale());\r\n\r\n    } else if (dollyDelta.y < 0) {\r\n\r\n      dollyIn(getZoomScale());\r\n\r\n    }\r\n\r\n    dollyStart.copy(dollyEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleTouchMovePan(event) {\r\n\r\n    //console.log( 'handleTouchMovePan' );\r\n\r\n    panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\r\n\r\n    panDelta.subVectors(panEnd, panStart);\r\n\r\n    pan(panDelta.x, panDelta.y);\r\n\r\n    panStart.copy(panEnd);\r\n\r\n    scope.update();\r\n\r\n  }\r\n\r\n  function handleTouchEnd(event) {\r\n\r\n    //console.log( 'handleTouchEnd' );\r\n\r\n  }\r\n\r\n  //\r\n  // event handlers - FSM: listen for events and reset state\r\n  //\r\n\r\n  function onMouseDown(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch (event.button) {\r\n\r\n      case scope.mouseButtons.ORBIT:\r\n\r\n        if (scope.enableRotate === false) return;\r\n\r\n        handleMouseDownRotate(event);\r\n\r\n        state = STATE.ROTATE;\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.ZOOM:\r\n\r\n        if (scope.enableZoom === false) return;\r\n\r\n        handleMouseDownDolly(event);\r\n\r\n        state = STATE.DOLLY;\r\n\r\n        break;\r\n\r\n      case scope.mouseButtons.PAN:\r\n\r\n        if (scope.enablePan === false) return;\r\n\r\n        handleMouseDownPan(event);\r\n\r\n        state = STATE.PAN;\r\n\r\n        break;\r\n\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n\r\n      document.addEventListener('mousemove', onMouseMove, false);\r\n      document.addEventListener('mouseup', onMouseUp, false);\r\n\r\n      scope.dispatchEvent(startEvent);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onMouseMove(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    event.preventDefault();\r\n\r\n    switch (state) {\r\n\r\n      case STATE.ROTATE:\r\n\r\n        if (scope.enableRotate === false) return;\r\n\r\n        handleMouseMoveRotate(event);\r\n\r\n        break;\r\n\r\n      case STATE.DOLLY:\r\n\r\n        if (scope.enableZoom === false) return;\r\n\r\n        handleMouseMoveDolly(event);\r\n\r\n        break;\r\n\r\n      case STATE.PAN:\r\n\r\n        if (scope.enablePan === false) return;\r\n\r\n        handleMouseMovePan(event);\r\n\r\n        break;\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onMouseUp(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    handleMouseUp(event);\r\n\r\n    document.removeEventListener('mousemove', onMouseMove, false);\r\n    document.removeEventListener('mouseup', onMouseUp, false);\r\n\r\n    scope.dispatchEvent(endEvent);\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onMouseWheel(event) {\r\n\r\n    if (scope.enabled === false || scope.enableZoom === false || (state !== STATE.NONE && state !== STATE.ROTATE)) return;\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    handleMouseWheel(event);\r\n\r\n    scope.dispatchEvent(startEvent); // not sure why these are here...\r\n    scope.dispatchEvent(endEvent);\r\n\r\n  }\r\n\r\n  function onKeyDown(event) {\r\n\r\n    if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\r\n\r\n    handleKeyDown(event);\r\n\r\n  }\r\n\r\n  function onTouchStart(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    switch (event.touches.length) {\r\n\r\n      case 1:\t// one-fingered touch: rotate\r\n\r\n        if (scope.enableRotate === false) return;\r\n\r\n        handleTouchStartRotate(event);\r\n\r\n        state = STATE.TOUCH_ROTATE;\r\n\r\n        break;\r\n\r\n      case 2:\t// two-fingered touch: dolly\r\n\r\n        if (scope.enableZoom === false) return;\r\n\r\n        handleTouchStartDolly(event);\r\n\r\n        state = STATE.TOUCH_DOLLY;\r\n\r\n        break;\r\n\r\n      case 3: // three-fingered touch: pan\r\n\r\n        if (scope.enablePan === false) return;\r\n\r\n        handleTouchStartPan(event);\r\n\r\n        state = STATE.TOUCH_PAN;\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n\r\n    if (state !== STATE.NONE) {\r\n\r\n      scope.dispatchEvent(startEvent);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  function onTouchMove(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n\r\n    switch (event.touches.length) {\r\n\r\n      case 1: // one-fingered touch: rotate\r\n\r\n        if (scope.enableRotate === false) return;\r\n        if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\r\n\r\n        handleTouchMoveRotate(event);\r\n\r\n        break;\r\n\r\n      case 2: // two-fingered touch: dolly\r\n\r\n        if (scope.enableZoom === false) return;\r\n        if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\r\n\r\n        handleTouchMoveDolly(event);\r\n\r\n        break;\r\n\r\n      case 3: // three-fingered touch: pan\r\n\r\n        if (scope.enablePan === false) return;\r\n        if (state !== STATE.TOUCH_PAN) return; // is this needed?...\r\n\r\n        handleTouchMovePan(event);\r\n\r\n        break;\r\n\r\n      default:\r\n\r\n        state = STATE.NONE;\r\n\r\n    }\r\n  }\r\n\r\n  function onTouchEnd(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    handleTouchEnd(event);\r\n\r\n    scope.dispatchEvent(endEvent);\r\n\r\n    state = STATE.NONE;\r\n\r\n  }\r\n\r\n  function onContextMenu(event) {\r\n\r\n    if (scope.enabled === false) return;\r\n\r\n    event.preventDefault();\r\n\r\n  }\r\n\r\n  //\r\n\r\n  scope.domElement.addEventListener('contextmenu', onContextMenu, false);\r\n\r\n  scope.domElement.addEventListener('mousedown', onMouseDown, false);\r\n  scope.domElement.addEventListener('wheel', onMouseWheel, false);\r\n\r\n  scope.domElement.addEventListener('touchstart', onTouchStart, false);\r\n  scope.domElement.addEventListener('touchend', onTouchEnd, false);\r\n  scope.domElement.addEventListener('touchmove', onTouchMove, false);\r\n\r\n  window.addEventListener('keydown', onKeyDown, false);\r\n\r\n  // force an update at start\r\n\r\n  this.update();\r\n\r\n};\r\n\r\nTHREE.OrbitControls.prototype = Object.create(THREE.EventDispatcher.prototype);\r\nTHREE.OrbitControls.prototype.constructor = THREE.OrbitControls;\r\n\r\nObject.defineProperties(THREE.OrbitControls.prototype, {\r\n\r\n  center: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .center has been renamed to .target');\r\n      return this.target;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  // backward compatibility\r\n\r\n  noZoom: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      return !this.enableZoom;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\r\n      this.enableZoom = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noRotate: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      return !this.enableRotate;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\r\n      this.enableRotate = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noPan: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      return !this.enablePan;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\r\n      this.enablePan = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  noKeys: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      return !this.enableKeys;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\r\n      this.enableKeys = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  staticMoving: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      return !this.enableDamping;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\r\n      this.enableDamping = !value;\r\n\r\n    }\r\n\r\n  },\r\n\r\n  dynamicDampingFactor: {\r\n\r\n    get: function () {\r\n\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      return this.dampingFactor;\r\n\r\n    },\r\n\r\n    set: function (value) {\r\n\r\n      console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\r\n      this.dampingFactor = value;\r\n\r\n    }\r\n\r\n  }\r\n\r\n});\r\n","/**\r\n * Tween.js - Licensed under the MIT license\r\n * https://github.com/tweenjs/tween.js\r\n * ----------------------------------------------\r\n *\r\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\r\n * Thank you all, you're awesome!\r\n */\r\n\r\nvar TWEEN = TWEEN || (function () {\r\n\r\n    var _tweens = [];\r\n\r\n    return {\r\n\r\n        getAll: function () {\r\n\r\n            return _tweens;\r\n\r\n        },\r\n\r\n        removeAll: function () {\r\n\r\n            _tweens = [];\r\n\r\n        },\r\n\r\n        add: function (tween) {\r\n\r\n            _tweens.push(tween);\r\n\r\n        },\r\n\r\n        remove: function (tween) {\r\n\r\n            var i = _tweens.indexOf(tween);\r\n\r\n            if (i !== -1) {\r\n                _tweens.splice(i, 1);\r\n            }\r\n\r\n        },\r\n\r\n        update: function (time, preserve) {\r\n\r\n            if (_tweens.length === 0) {\r\n                return false;\r\n            }\r\n\r\n            var i = 0;\r\n\r\n            time = time !== undefined ? time : TWEEN.now();\r\n\r\n            while (i < _tweens.length) {\r\n\r\n                if (_tweens[i].update(time) || preserve) {\r\n                    i++;\r\n                } else {\r\n                    _tweens.splice(i, 1);\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        }\r\n    };\r\n\r\n})();\r\n\r\n\r\n// Include a performance.now polyfill.\r\n// In node.js, use process.hrtime.\r\nif (typeof (window) === 'undefined' && typeof (process) !== 'undefined') {\r\n    TWEEN.now = function () {\r\n        var time = process.hrtime();\r\n\r\n        // Convert [seconds, nanoseconds] to milliseconds.\r\n        return time[0] * 1000 + time[1] / 1000000;\r\n    };\r\n}\r\n// In a browser, use window.performance.now if it is available.\r\nelse if (typeof (window) !== 'undefined' &&\r\n    window.performance !== undefined &&\r\n    window.performance.now !== undefined) {\r\n    // This must be bound, because directly assigning this function\r\n    // leads to an invocation exception in Chrome.\r\n    TWEEN.now = window.performance.now.bind(window.performance);\r\n}\r\n// Use Date.now if it is available.\r\nelse if (Date.now !== undefined) {\r\n    TWEEN.now = Date.now;\r\n}\r\n// Otherwise, use 'new Date().getTime()'.\r\nelse {\r\n    TWEEN.now = function () {\r\n        return new Date().getTime();\r\n    };\r\n}\r\n\r\n\r\nfunction assign(target, source) {\r\n    var keys = Object.keys(source);\r\n    var length = keys.length;\r\n\r\n    for (var i = 0; i < length; i += 1) {\r\n        target[keys[i]] = source[keys[i]];\r\n    }\r\n\r\n    return target;\r\n}\r\n\r\n\r\nTWEEN.Tween = function (object) {\r\n\r\n    this._object = object;\r\n    this._valuesStart = {};\r\n    this._valuesEnd = {};\r\n    this._valuesStartRepeat = {};\r\n    this._duration = 1000;\r\n    this._repeat = 0;\r\n    this._repeatDelayTime = undefined;\r\n    this._yoyo = false;\r\n    this._isPlaying = false;\r\n    this._reversed = false;\r\n    this._delayTime = 0;\r\n    this._startTime = null;\r\n    this._easingFunction = TWEEN.Easing.Linear.None;\r\n    this._interpolationFunction = TWEEN.Interpolation.Linear;\r\n    this._chainedTweens = [];\r\n    this._onStartCallback = null;\r\n    this._onStartCallbackFired = false;\r\n    this._onUpdateCallback = null;\r\n    this._onCompleteCallback = null;\r\n    this._onStopCallback = null;\r\n\r\n};\r\n\r\nTWEEN.Tween.prototype = assign(Object.create(Object.prototype), {\r\n    to: function to(properties, duration) {\r\n\r\n        this._valuesEnd = properties;\r\n\r\n        if (duration !== undefined) {\r\n            this._duration = duration;\r\n        }\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    start: function start(time) {\r\n\r\n        TWEEN.add(this);\r\n\r\n        this._isPlaying = true;\r\n\r\n        this._onStartCallbackFired = false;\r\n\r\n        this._startTime = time !== undefined ? time : TWEEN.now();\r\n        this._startTime += this._delayTime;\r\n\r\n        for (var property in this._valuesEnd) {\r\n\r\n            // Check if an Array was provided as property value\r\n            if (this._valuesEnd[property] instanceof Array) {\r\n\r\n                if (this._valuesEnd[property].length === 0) {\r\n                    continue;\r\n                }\r\n\r\n                // Create a local copy of the Array with the start value at the front\r\n                this._valuesEnd[property] = [this._object[property]].concat(this._valuesEnd[property]);\r\n\r\n            }\r\n\r\n            // If `to()` specifies a property that doesn't exist in the source object,\r\n            // we should not set that property in the object\r\n            if (this._object[property] === undefined) {\r\n                continue;\r\n            }\r\n\r\n            // Save the starting value.\r\n            this._valuesStart[property] = this._object[property];\r\n\r\n            if ((this._valuesStart[property] instanceof Array) === false) {\r\n                this._valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\r\n            }\r\n\r\n            this._valuesStartRepeat[property] = this._valuesStart[property] || 0;\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    },\r\n\r\n    stop: function stop() {\r\n\r\n        if (!this._isPlaying) {\r\n            return this;\r\n        }\r\n\r\n        TWEEN.remove(this);\r\n        this._isPlaying = false;\r\n\r\n        if (this._onStopCallback !== null) {\r\n            this._onStopCallback.call(this._object, this._object);\r\n        }\r\n\r\n        this.stopChainedTweens();\r\n        return this;\r\n\r\n    },\r\n\r\n    end: function end() {\r\n\r\n        this.update(this._startTime + this._duration);\r\n        return this;\r\n\r\n    },\r\n\r\n    stopChainedTweens: function stopChainedTweens() {\r\n\r\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\r\n            this._chainedTweens[i].stop();\r\n        }\r\n\r\n    },\r\n\r\n    delay: function delay(amount) {\r\n\r\n        this._delayTime = amount;\r\n        return this;\r\n\r\n    },\r\n\r\n    repeat: function repeat(times) {\r\n\r\n        this._repeat = times;\r\n        return this;\r\n\r\n    },\r\n\r\n    repeatDelay: function repeatDelay(amount) {\r\n\r\n        this._repeatDelayTime = amount;\r\n        return this;\r\n\r\n    },\r\n\r\n    yoyo: function yoyo(yoyo) {\r\n\r\n        this._yoyo = yoyo;\r\n        return this;\r\n\r\n    },\r\n\r\n    easing: function easing(easing) {\r\n\r\n        this._easingFunction = easing;\r\n        return this;\r\n\r\n    },\r\n\r\n    interpolation: function interpolation(interpolation) {\r\n\r\n        this._interpolationFunction = interpolation;\r\n        return this;\r\n\r\n    },\r\n\r\n    chain: function chain() {\r\n\r\n        this._chainedTweens = arguments;\r\n        return this;\r\n\r\n    },\r\n\r\n    onStart: function onStart(callback) {\r\n\r\n        this._onStartCallback = callback;\r\n        return this;\r\n\r\n    },\r\n\r\n    onUpdate: function onUpdate(callback) {\r\n\r\n        this._onUpdateCallback = callback;\r\n        return this;\r\n\r\n    },\r\n\r\n    onComplete: function onComplete(callback) {\r\n\r\n        this._onCompleteCallback = callback;\r\n        return this;\r\n\r\n    },\r\n\r\n    onStop: function onStop(callback) {\r\n\r\n        this._onStopCallback = callback;\r\n        return this;\r\n\r\n    },\r\n\r\n    update: function update(time) {\r\n\r\n        var property;\r\n        var elapsed;\r\n        var value;\r\n\r\n        if (time < this._startTime) {\r\n            return true;\r\n        }\r\n\r\n        if (this._onStartCallbackFired === false) {\r\n\r\n            if (this._onStartCallback !== null) {\r\n                this._onStartCallback.call(this._object, this._object);\r\n            }\r\n\r\n            this._onStartCallbackFired = true;\r\n        }\r\n\r\n        elapsed = (time - this._startTime) / this._duration;\r\n        elapsed = elapsed > 1 ? 1 : elapsed;\r\n\r\n        value = this._easingFunction(elapsed);\r\n\r\n        for (property in this._valuesEnd) {\r\n\r\n            // Don't update properties that do not exist in the source object\r\n            if (this._valuesStart[property] === undefined) {\r\n                continue;\r\n            }\r\n\r\n            var start = this._valuesStart[property] || 0;\r\n            var end = this._valuesEnd[property];\r\n\r\n            if (end instanceof Array) {\r\n\r\n                this._object[property] = this._interpolationFunction(end, value);\r\n\r\n            } else {\r\n\r\n                // Parses relative end values with start as base (e.g.: +10, -3)\r\n                if (typeof (end) === 'string') {\r\n\r\n                    if (end.charAt(0) === '+' || end.charAt(0) === '-') {\r\n                        end = start + parseFloat(end);\r\n                    } else {\r\n                        end = parseFloat(end);\r\n                    }\r\n                }\r\n\r\n                // Protect against non numeric properties.\r\n                if (typeof (end) === 'number') {\r\n                    this._object[property] = start + (end - start) * value;\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if (this._onUpdateCallback !== null) {\r\n            this._onUpdateCallback.call(this._object, value);\r\n        }\r\n\r\n        if (elapsed === 1) {\r\n\r\n            if (this._repeat > 0) {\r\n\r\n                if (isFinite(this._repeat)) {\r\n                    this._repeat--;\r\n                }\r\n\r\n                // Reassign starting values, restart by making startTime = now\r\n                for (property in this._valuesStartRepeat) {\r\n\r\n                    if (typeof (this._valuesEnd[property]) === 'string') {\r\n                        this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\r\n                    }\r\n\r\n                    if (this._yoyo) {\r\n                        var tmp = this._valuesStartRepeat[property];\r\n\r\n                        this._valuesStartRepeat[property] = this._valuesEnd[property];\r\n                        this._valuesEnd[property] = tmp;\r\n                    }\r\n\r\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\r\n\r\n                }\r\n\r\n                if (this._yoyo) {\r\n                    this._reversed = !this._reversed;\r\n                }\r\n\r\n                if (this._repeatDelayTime !== undefined) {\r\n                    this._startTime = time + this._repeatDelayTime;\r\n                } else {\r\n                    this._startTime = time + this._delayTime;\r\n                }\r\n\r\n                return true;\r\n\r\n            } else {\r\n\r\n                if (this._onCompleteCallback !== null) {\r\n\r\n                    this._onCompleteCallback.call(this._object, this._object);\r\n                }\r\n\r\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\r\n                    // Make the chained tweens start exactly at the time they should,\r\n                    // even if the `update()` method was called way past the duration of the tween\r\n                    this._chainedTweens[i].start(this._startTime + this._duration);\r\n                }\r\n\r\n                return false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n});\r\n\r\n\r\nTWEEN.Easing = {\r\n\r\n    Linear: {\r\n\r\n        None: function (k) {\r\n\r\n            return k;\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Quadratic: {\r\n\r\n        In: function (k) {\r\n\r\n            return k * k;\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            return k * (2 - k);\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k;\r\n            }\r\n\r\n            return - 0.5 * (--k * (k - 2) - 1);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Cubic: {\r\n\r\n        In: function (k) {\r\n\r\n            return k * k * k;\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            return --k * k * k + 1;\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k;\r\n            }\r\n\r\n            return 0.5 * ((k -= 2) * k * k + 2);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Quartic: {\r\n\r\n        In: function (k) {\r\n\r\n            return k * k * k * k;\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            return 1 - (--k * k * k * k);\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k;\r\n            }\r\n\r\n            return - 0.5 * ((k -= 2) * k * k * k - 2);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Quintic: {\r\n\r\n        In: function (k) {\r\n\r\n            return k * k * k * k * k;\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            return --k * k * k * k * k + 1;\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * k * k * k * k * k;\r\n            }\r\n\r\n            return 0.5 * ((k -= 2) * k * k * k * k + 2);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Sinusoidal: {\r\n\r\n        In: function (k) {\r\n\r\n            return 1 - Math.cos(k * Math.PI / 2);\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            return Math.sin(k * Math.PI / 2);\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            return 0.5 * (1 - Math.cos(Math.PI * k));\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Exponential: {\r\n\r\n        In: function (k) {\r\n\r\n            return k === 0 ? 0 : Math.pow(1024, k - 1);\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * Math.pow(1024, k - 1);\r\n            }\r\n\r\n            return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Circular: {\r\n\r\n        In: function (k) {\r\n\r\n            return 1 - Math.sqrt(1 - k * k);\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            return Math.sqrt(1 - (--k * k));\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if ((k *= 2) < 1) {\r\n                return - 0.5 * (Math.sqrt(1 - k * k) - 1);\r\n            }\r\n\r\n            return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Elastic: {\r\n\r\n        In: function (k) {\r\n\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n\r\n            return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n\r\n            return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1;\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if (k === 0) {\r\n                return 0;\r\n            }\r\n\r\n            if (k === 1) {\r\n                return 1;\r\n            }\r\n\r\n            k *= 2;\r\n\r\n            if (k < 1) {\r\n                return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI);\r\n            }\r\n\r\n            return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1;\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Back: {\r\n\r\n        In: function (k) {\r\n\r\n            var s = 1.70158;\r\n\r\n            return k * k * ((s + 1) * k - s);\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            var s = 1.70158;\r\n\r\n            return --k * k * ((s + 1) * k + s) + 1;\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            var s = 1.70158 * 1.525;\r\n\r\n            if ((k *= 2) < 1) {\r\n                return 0.5 * (k * k * ((s + 1) * k - s));\r\n            }\r\n\r\n            return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Bounce: {\r\n\r\n        In: function (k) {\r\n\r\n            return 1 - TWEEN.Easing.Bounce.Out(1 - k);\r\n\r\n        },\r\n\r\n        Out: function (k) {\r\n\r\n            if (k < (1 / 2.75)) {\r\n                return 7.5625 * k * k;\r\n            } else if (k < (2 / 2.75)) {\r\n                return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\r\n            } else if (k < (2.5 / 2.75)) {\r\n                return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\r\n            } else {\r\n                return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\r\n            }\r\n\r\n        },\r\n\r\n        InOut: function (k) {\r\n\r\n            if (k < 0.5) {\r\n                return TWEEN.Easing.Bounce.In(k * 2) * 0.5;\r\n            }\r\n\r\n            return TWEEN.Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5;\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\nTWEEN.Interpolation = {\r\n\r\n    Linear: function (v, k) {\r\n\r\n        var m = v.length - 1;\r\n        var f = m * k;\r\n        var i = Math.floor(f);\r\n        var fn = TWEEN.Interpolation.Utils.Linear;\r\n\r\n        if (k < 0) {\r\n            return fn(v[0], v[1], f);\r\n        }\r\n\r\n        if (k > 1) {\r\n            return fn(v[m], v[m - 1], m - f);\r\n        }\r\n\r\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\r\n\r\n    },\r\n\r\n    Bezier: function (v, k) {\r\n\r\n        var b = 0;\r\n        var n = v.length - 1;\r\n        var pw = Math.pow;\r\n        var bn = TWEEN.Interpolation.Utils.Bernstein;\r\n\r\n        for (var i = 0; i <= n; i++) {\r\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\r\n        }\r\n\r\n        return b;\r\n\r\n    },\r\n\r\n    CatmullRom: function (v, k) {\r\n\r\n        var m = v.length - 1;\r\n        var f = m * k;\r\n        var i = Math.floor(f);\r\n        var fn = TWEEN.Interpolation.Utils.CatmullRom;\r\n\r\n        if (v[0] === v[m]) {\r\n\r\n            if (k < 0) {\r\n                i = Math.floor(f = m * (1 + k));\r\n            }\r\n\r\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\r\n\r\n        } else {\r\n\r\n            if (k < 0) {\r\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\r\n            }\r\n\r\n            if (k > 1) {\r\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\r\n            }\r\n\r\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\r\n\r\n        }\r\n\r\n    },\r\n\r\n    Utils: {\r\n\r\n        Linear: function (p0, p1, t) {\r\n\r\n            return (p1 - p0) * t + p0;\r\n\r\n        },\r\n\r\n        Bernstein: function (n, i) {\r\n\r\n            var fc = TWEEN.Interpolation.Utils.Factorial;\r\n\r\n            return fc(n) / fc(i) / fc(n - i);\r\n\r\n        },\r\n\r\n        Factorial: (function () {\r\n\r\n            var a = [1];\r\n\r\n            return function (n) {\r\n\r\n                var s = 1;\r\n\r\n                if (a[n]) {\r\n                    return a[n];\r\n                }\r\n\r\n                for (var i = n; i > 1; i--) {\r\n                    s *= i;\r\n                }\r\n\r\n                a[n] = s;\r\n                return s;\r\n\r\n            };\r\n\r\n        })(),\r\n\r\n        CatmullRom: function (p0, p1, p2, p3, t) {\r\n\r\n            var v0 = (p2 - p0) * 0.5;\r\n            var v1 = (p3 - p1) * 0.5;\r\n            var t2 = t * t;\r\n            var t3 = t * t2;\r\n\r\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (- 3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\r\n\r\n        }\r\n\r\n    }\r\n\r\n};\r\n\r\n// UMD (Universal Module Definition)\r\n(function (root) {\r\n\r\n    if (typeof define === 'function' && define.amd) {\r\n\r\n        // AMD\r\n        define([], function () {\r\n            return TWEEN;\r\n        });\r\n\r\n    } else if (typeof module !== 'undefined' && typeof exports === 'object') {\r\n\r\n        // Node.js\r\n        module.exports = TWEEN;\r\n\r\n    } else if (root !== undefined) {\r\n\r\n        // Global variable\r\n        root.TWEEN = TWEEN;\r\n\r\n    }\r\n\r\n})(this);\r\n","(function (global, factory) {\r\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\r\n        typeof define === 'function' && define.amd ? define(['exports'], factory) :\r\n            (factory((global.THREE = {})));\r\n}(this, (function (exports) { 'use strict';\r\n\r\n    // Polyfills\r\n\r\n    if ( Number.EPSILON === undefined ) {\r\n\r\n        Number.EPSILON = Math.pow( 2, - 52 );\r\n\r\n    }\r\n\r\n    if ( Number.isInteger === undefined ) {\r\n\r\n        // Missing in IE\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\r\n\r\n        Number.isInteger = function ( value ) {\r\n\r\n            return typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    //\r\n\r\n    if ( Math.sign === undefined ) {\r\n\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n        Math.sign = function ( x ) {\r\n\r\n            return ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    if ( 'name' in Function.prototype === false ) {\r\n\r\n        // Missing in IE\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n        Object.defineProperty( Function.prototype, 'name', {\r\n\r\n            get: function () {\r\n\r\n                return this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\r\n\r\n            }\r\n\r\n        } );\r\n\r\n    }\r\n\r\n    if ( Object.assign === undefined ) {\r\n\r\n        // Missing in IE\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n        ( function () {\r\n\r\n            Object.assign = function ( target ) {\r\n\r\n                if ( target === undefined || target === null ) {\r\n\r\n                    throw new TypeError( 'Cannot convert undefined or null to object' );\r\n\r\n                }\r\n\r\n                var output = Object( target );\r\n\r\n                for ( var index = 1; index < arguments.length; index ++ ) {\r\n\r\n                    var source = arguments[ index ];\r\n\r\n                    if ( source !== undefined && source !== null ) {\r\n\r\n                        for ( var nextKey in source ) {\r\n\r\n                            if ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\r\n\r\n                                output[ nextKey ] = source[ nextKey ];\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return output;\r\n\r\n            };\r\n\r\n        } )();\r\n\r\n    }\r\n\r\n    /**\r\n     * https://github.com/mrdoob/eventdispatcher.js/\r\n     */\r\n\r\n    function EventDispatcher() {}\r\n\r\n    Object.assign( EventDispatcher.prototype, {\r\n\r\n        addEventListener: function ( type, listener ) {\r\n\r\n            if ( this._listeners === undefined ) this._listeners = {};\r\n\r\n            var listeners = this._listeners;\r\n\r\n            if ( listeners[ type ] === undefined ) {\r\n\r\n                listeners[ type ] = [];\r\n\r\n            }\r\n\r\n            if ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n                listeners[ type ].push( listener );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        hasEventListener: function ( type, listener ) {\r\n\r\n            if ( this._listeners === undefined ) return false;\r\n\r\n            var listeners = this._listeners;\r\n\r\n            return listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\r\n\r\n        },\r\n\r\n        removeEventListener: function ( type, listener ) {\r\n\r\n            if ( this._listeners === undefined ) return;\r\n\r\n            var listeners = this._listeners;\r\n            var listenerArray = listeners[ type ];\r\n\r\n            if ( listenerArray !== undefined ) {\r\n\r\n                var index = listenerArray.indexOf( listener );\r\n\r\n                if ( index !== - 1 ) {\r\n\r\n                    listenerArray.splice( index, 1 );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        dispatchEvent: function ( event ) {\r\n\r\n            if ( this._listeners === undefined ) return;\r\n\r\n            var listeners = this._listeners;\r\n            var listenerArray = listeners[ event.type ];\r\n\r\n            if ( listenerArray !== undefined ) {\r\n\r\n                event.target = this;\r\n\r\n                var array = listenerArray.slice( 0 );\r\n\r\n                for ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n                    array[ i ].call( this, event );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var REVISION = '93';\r\n    var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n    var CullFaceNone = 0;\r\n    var CullFaceBack = 1;\r\n    var CullFaceFront = 2;\r\n    var CullFaceFrontBack = 3;\r\n    var FrontFaceDirectionCW = 0;\r\n    var FrontFaceDirectionCCW = 1;\r\n    var BasicShadowMap = 0;\r\n    var PCFShadowMap = 1;\r\n    var PCFSoftShadowMap = 2;\r\n    var FrontSide = 0;\r\n    var BackSide = 1;\r\n    var DoubleSide = 2;\r\n    var FlatShading = 1;\r\n    var SmoothShading = 2;\r\n    var NoColors = 0;\r\n    var FaceColors = 1;\r\n    var VertexColors = 2;\r\n    var NoBlending = 0;\r\n    var NormalBlending = 1;\r\n    var AdditiveBlending = 2;\r\n    var SubtractiveBlending = 3;\r\n    var MultiplyBlending = 4;\r\n    var CustomBlending = 5;\r\n    var AddEquation = 100;\r\n    var SubtractEquation = 101;\r\n    var ReverseSubtractEquation = 102;\r\n    var MinEquation = 103;\r\n    var MaxEquation = 104;\r\n    var ZeroFactor = 200;\r\n    var OneFactor = 201;\r\n    var SrcColorFactor = 202;\r\n    var OneMinusSrcColorFactor = 203;\r\n    var SrcAlphaFactor = 204;\r\n    var OneMinusSrcAlphaFactor = 205;\r\n    var DstAlphaFactor = 206;\r\n    var OneMinusDstAlphaFactor = 207;\r\n    var DstColorFactor = 208;\r\n    var OneMinusDstColorFactor = 209;\r\n    var SrcAlphaSaturateFactor = 210;\r\n    var NeverDepth = 0;\r\n    var AlwaysDepth = 1;\r\n    var LessDepth = 2;\r\n    var LessEqualDepth = 3;\r\n    var EqualDepth = 4;\r\n    var GreaterEqualDepth = 5;\r\n    var GreaterDepth = 6;\r\n    var NotEqualDepth = 7;\r\n    var MultiplyOperation = 0;\r\n    var MixOperation = 1;\r\n    var AddOperation = 2;\r\n    var NoToneMapping = 0;\r\n    var LinearToneMapping = 1;\r\n    var ReinhardToneMapping = 2;\r\n    var Uncharted2ToneMapping = 3;\r\n    var CineonToneMapping = 4;\r\n    var UVMapping = 300;\r\n    var CubeReflectionMapping = 301;\r\n    var CubeRefractionMapping = 302;\r\n    var EquirectangularReflectionMapping = 303;\r\n    var EquirectangularRefractionMapping = 304;\r\n    var SphericalReflectionMapping = 305;\r\n    var CubeUVReflectionMapping = 306;\r\n    var CubeUVRefractionMapping = 307;\r\n    var RepeatWrapping = 1000;\r\n    var ClampToEdgeWrapping = 1001;\r\n    var MirroredRepeatWrapping = 1002;\r\n    var NearestFilter = 1003;\r\n    var NearestMipMapNearestFilter = 1004;\r\n    var NearestMipMapLinearFilter = 1005;\r\n    var LinearFilter = 1006;\r\n    var LinearMipMapNearestFilter = 1007;\r\n    var LinearMipMapLinearFilter = 1008;\r\n    var UnsignedByteType = 1009;\r\n    var ByteType = 1010;\r\n    var ShortType = 1011;\r\n    var UnsignedShortType = 1012;\r\n    var IntType = 1013;\r\n    var UnsignedIntType = 1014;\r\n    var FloatType = 1015;\r\n    var HalfFloatType = 1016;\r\n    var UnsignedShort4444Type = 1017;\r\n    var UnsignedShort5551Type = 1018;\r\n    var UnsignedShort565Type = 1019;\r\n    var UnsignedInt248Type = 1020;\r\n    var AlphaFormat = 1021;\r\n    var RGBFormat = 1022;\r\n    var RGBAFormat = 1023;\r\n    var LuminanceFormat = 1024;\r\n    var LuminanceAlphaFormat = 1025;\r\n    var RGBEFormat = RGBAFormat;\r\n    var DepthFormat = 1026;\r\n    var DepthStencilFormat = 1027;\r\n    var RGB_S3TC_DXT1_Format = 33776;\r\n    var RGBA_S3TC_DXT1_Format = 33777;\r\n    var RGBA_S3TC_DXT3_Format = 33778;\r\n    var RGBA_S3TC_DXT5_Format = 33779;\r\n    var RGB_PVRTC_4BPPV1_Format = 35840;\r\n    var RGB_PVRTC_2BPPV1_Format = 35841;\r\n    var RGBA_PVRTC_4BPPV1_Format = 35842;\r\n    var RGBA_PVRTC_2BPPV1_Format = 35843;\r\n    var RGB_ETC1_Format = 36196;\r\n    var RGBA_ASTC_4x4_Format = 37808;\r\n    var RGBA_ASTC_5x4_Format = 37809;\r\n    var RGBA_ASTC_5x5_Format = 37810;\r\n    var RGBA_ASTC_6x5_Format = 37811;\r\n    var RGBA_ASTC_6x6_Format = 37812;\r\n    var RGBA_ASTC_8x5_Format = 37813;\r\n    var RGBA_ASTC_8x6_Format = 37814;\r\n    var RGBA_ASTC_8x8_Format = 37815;\r\n    var RGBA_ASTC_10x5_Format = 37816;\r\n    var RGBA_ASTC_10x6_Format = 37817;\r\n    var RGBA_ASTC_10x8_Format = 37818;\r\n    var RGBA_ASTC_10x10_Format = 37819;\r\n    var RGBA_ASTC_12x10_Format = 37820;\r\n    var RGBA_ASTC_12x12_Format = 37821;\r\n    var LoopOnce = 2200;\r\n    var LoopRepeat = 2201;\r\n    var LoopPingPong = 2202;\r\n    var InterpolateDiscrete = 2300;\r\n    var InterpolateLinear = 2301;\r\n    var InterpolateSmooth = 2302;\r\n    var ZeroCurvatureEnding = 2400;\r\n    var ZeroSlopeEnding = 2401;\r\n    var WrapAroundEnding = 2402;\r\n    var TrianglesDrawMode = 0;\r\n    var TriangleStripDrawMode = 1;\r\n    var TriangleFanDrawMode = 2;\r\n    var LinearEncoding = 3000;\r\n    var sRGBEncoding = 3001;\r\n    var GammaEncoding = 3007;\r\n    var RGBEEncoding = 3002;\r\n    var LogLuvEncoding = 3003;\r\n    var RGBM7Encoding = 3004;\r\n    var RGBM16Encoding = 3005;\r\n    var RGBDEncoding = 3006;\r\n    var BasicDepthPacking = 3200;\r\n    var RGBADepthPacking = 3201;\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var _Math = {\r\n\r\n        DEG2RAD: Math.PI / 180,\r\n        RAD2DEG: 180 / Math.PI,\r\n\r\n        generateUUID: ( function () {\r\n\r\n            // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n\r\n            var lut = [];\r\n\r\n            for ( var i = 0; i < 256; i ++ ) {\r\n\r\n                lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\r\n\r\n            }\r\n\r\n            return function generateUUID() {\r\n\r\n                var d0 = Math.random() * 0xffffffff | 0;\r\n                var d1 = Math.random() * 0xffffffff | 0;\r\n                var d2 = Math.random() * 0xffffffff | 0;\r\n                var d3 = Math.random() * 0xffffffff | 0;\r\n                var uuid = lut[ d0 & 0xff ] + lut[ d0 >> 8 & 0xff ] + lut[ d0 >> 16 & 0xff ] + lut[ d0 >> 24 & 0xff ] + '-' +\r\n                    lut[ d1 & 0xff ] + lut[ d1 >> 8 & 0xff ] + '-' + lut[ d1 >> 16 & 0x0f | 0x40 ] + lut[ d1 >> 24 & 0xff ] + '-' +\r\n                    lut[ d2 & 0x3f | 0x80 ] + lut[ d2 >> 8 & 0xff ] + '-' + lut[ d2 >> 16 & 0xff ] + lut[ d2 >> 24 & 0xff ] +\r\n                    lut[ d3 & 0xff ] + lut[ d3 >> 8 & 0xff ] + lut[ d3 >> 16 & 0xff ] + lut[ d3 >> 24 & 0xff ];\r\n\r\n                // .toUpperCase() here flattens concatenated strings to save heap memory space.\r\n                return uuid.toUpperCase();\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        clamp: function ( value, min, max ) {\r\n\r\n            return Math.max( min, Math.min( max, value ) );\r\n\r\n        },\r\n\r\n        // compute euclidian modulo of m % n\r\n        // https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n        euclideanModulo: function ( n, m ) {\r\n\r\n            return ( ( n % m ) + m ) % m;\r\n\r\n        },\r\n\r\n        // Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n        mapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n            return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n        },\r\n\r\n        // https://en.wikipedia.org/wiki/Linear_interpolation\r\n\r\n        lerp: function ( x, y, t ) {\r\n\r\n            return ( 1 - t ) * x + t * y;\r\n\r\n        },\r\n\r\n        // http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n        smoothstep: function ( x, min, max ) {\r\n\r\n            if ( x <= min ) return 0;\r\n            if ( x >= max ) return 1;\r\n\r\n            x = ( x - min ) / ( max - min );\r\n\r\n            return x * x * ( 3 - 2 * x );\r\n\r\n        },\r\n\r\n        smootherstep: function ( x, min, max ) {\r\n\r\n            if ( x <= min ) return 0;\r\n            if ( x >= max ) return 1;\r\n\r\n            x = ( x - min ) / ( max - min );\r\n\r\n            return x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n        },\r\n\r\n        // Random integer from <low, high> interval\r\n\r\n        randInt: function ( low, high ) {\r\n\r\n            return low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n        },\r\n\r\n        // Random float from <low, high> interval\r\n\r\n        randFloat: function ( low, high ) {\r\n\r\n            return low + Math.random() * ( high - low );\r\n\r\n        },\r\n\r\n        // Random float from <-range/2, range/2> interval\r\n\r\n        randFloatSpread: function ( range ) {\r\n\r\n            return range * ( 0.5 - Math.random() );\r\n\r\n        },\r\n\r\n        degToRad: function ( degrees ) {\r\n\r\n            return degrees * _Math.DEG2RAD;\r\n\r\n        },\r\n\r\n        radToDeg: function ( radians ) {\r\n\r\n            return radians * _Math.RAD2DEG;\r\n\r\n        },\r\n\r\n        isPowerOfTwo: function ( value ) {\r\n\r\n            return ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n        },\r\n\r\n        ceilPowerOfTwo: function ( value ) {\r\n\r\n            return Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\r\n\r\n        },\r\n\r\n        floorPowerOfTwo: function ( value ) {\r\n\r\n            return Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author egraether / http://egraether.com/\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     */\r\n\r\n    function Vector2( x, y ) {\r\n\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n\r\n    }\r\n\r\n    Object.defineProperties( Vector2.prototype, {\r\n\r\n        \"width\": {\r\n\r\n            get: function () {\r\n\r\n                return this.x;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this.x = value;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        \"height\": {\r\n\r\n            get: function () {\r\n\r\n                return this.y;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this.y = value;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector2.prototype, {\r\n\r\n        isVector2: true,\r\n\r\n        set: function ( x, y ) {\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.x = scalar;\r\n            this.y = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setX: function ( x ) {\r\n\r\n            this.x = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( y ) {\r\n\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponent: function ( index, value ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: this.x = value; break;\r\n                case 1: this.y = value; break;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getComponent: function ( index ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: return this.x;\r\n                case 1: return this.y;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.x, this.y );\r\n\r\n        },\r\n\r\n        copy: function ( v ) {\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        add: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n                return this.addVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x += v.x;\r\n            this.y += v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.x += s;\r\n            this.y += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addVectors: function ( a, b ) {\r\n\r\n            this.x = a.x + b.x;\r\n            this.y = a.y + b.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScaledVector: function ( v, s ) {\r\n\r\n            this.x += v.x * s;\r\n            this.y += v.y * s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n                return this.subVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x -= v.x;\r\n            this.y -= v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subScalar: function ( s ) {\r\n\r\n            this.x -= s;\r\n            this.y -= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subVectors: function ( a, b ) {\r\n\r\n            this.x = a.x - b.x;\r\n            this.y = a.y - b.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( v ) {\r\n\r\n            this.x *= v.x;\r\n            this.y *= v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( scalar ) {\r\n\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divide: function ( v ) {\r\n\r\n            this.x /= v.x;\r\n            this.y /= v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divideScalar: function ( scalar ) {\r\n\r\n            return this.multiplyScalar( 1 / scalar );\r\n\r\n        },\r\n\r\n        applyMatrix3: function ( m ) {\r\n\r\n            var x = this.x, y = this.y;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\r\n            this.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        min: function ( v ) {\r\n\r\n            this.x = Math.min( this.x, v.x );\r\n            this.y = Math.min( this.y, v.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        max: function ( v ) {\r\n\r\n            this.x = Math.max( this.x, v.x );\r\n            this.y = Math.max( this.y, v.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clamp: function ( min, max ) {\r\n\r\n            // assumes min < max, componentwise\r\n\r\n            this.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n            this.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clampScalar: function () {\r\n\r\n            var min = new Vector2();\r\n            var max = new Vector2();\r\n\r\n            return function clampScalar( minVal, maxVal ) {\r\n\r\n                min.set( minVal, minVal );\r\n                max.set( maxVal, maxVal );\r\n\r\n                return this.clamp( min, max );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clampLength: function ( min, max ) {\r\n\r\n            var length = this.length();\r\n\r\n            return this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n        },\r\n\r\n        floor: function () {\r\n\r\n            this.x = Math.floor( this.x );\r\n            this.y = Math.floor( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        ceil: function () {\r\n\r\n            this.x = Math.ceil( this.x );\r\n            this.y = Math.ceil( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        round: function () {\r\n\r\n            this.x = Math.round( this.x );\r\n            this.y = Math.round( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        roundToZero: function () {\r\n\r\n            this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n            this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.x = - this.x;\r\n            this.y = - this.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this.x * v.x + this.y * v.y;\r\n\r\n        },\r\n\r\n        lengthSq: function () {\r\n\r\n            return this.x * this.x + this.y * this.y;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n        },\r\n\r\n        manhattanLength: function () {\r\n\r\n            return Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            return this.divideScalar( this.length() || 1 );\r\n\r\n        },\r\n\r\n        angle: function () {\r\n\r\n            // computes the angle in radians with respect to the positive x-axis\r\n\r\n            var angle = Math.atan2( this.y, this.x );\r\n\r\n            if ( angle < 0 ) angle += 2 * Math.PI;\r\n\r\n            return angle;\r\n\r\n        },\r\n\r\n        distanceTo: function ( v ) {\r\n\r\n            return Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n        },\r\n\r\n        distanceToSquared: function ( v ) {\r\n\r\n            var dx = this.x - v.x, dy = this.y - v.y;\r\n            return dx * dx + dy * dy;\r\n\r\n        },\r\n\r\n        manhattanDistanceTo: function ( v ) {\r\n\r\n            return Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\r\n\r\n        },\r\n\r\n        setLength: function ( length ) {\r\n\r\n            return this.normalize().multiplyScalar( length );\r\n\r\n        },\r\n\r\n        lerp: function ( v, alpha ) {\r\n\r\n            this.x += ( v.x - this.x ) * alpha;\r\n            this.y += ( v.y - this.y ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerpVectors: function ( v1, v2, alpha ) {\r\n\r\n            return this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n        },\r\n\r\n        equals: function ( v ) {\r\n\r\n            return ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.x = array[ offset ];\r\n            this.y = array[ offset + 1 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.x;\r\n            array[ offset + 1 ] = this.y;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        fromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n            if ( offset !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\r\n\r\n            }\r\n\r\n            this.x = attribute.getX( index );\r\n            this.y = attribute.getY( index );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotateAround: function ( center, angle ) {\r\n\r\n            var c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n            var x = this.x - center.x;\r\n            var y = this.y - center.y;\r\n\r\n            this.x = x * c - y * s + center.x;\r\n            this.y = x * s + y * c + center.y;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author supereggbert / http://www.paulbrunt.co.uk/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author jordi_ros / http://plattsoft.com\r\n     * @author D1plo1d / http://github.com/D1plo1d\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author timknip / http://www.floorplanner.com/\r\n     * @author bhouston / http://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Matrix4() {\r\n\r\n        this.elements = [\r\n\r\n            1, 0, 0, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1\r\n\r\n        ];\r\n\r\n        if ( arguments.length > 0 ) {\r\n\r\n            console.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Matrix4.prototype, {\r\n\r\n        isMatrix4: true,\r\n\r\n        set: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n            te[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n            te[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n            te[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        identity: function () {\r\n\r\n            this.set(\r\n\r\n                1, 0, 0, 0,\r\n                0, 1, 0, 0,\r\n                0, 0, 1, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new Matrix4().fromArray( this.elements );\r\n\r\n        },\r\n\r\n        copy: function ( m ) {\r\n\r\n            var te = this.elements;\r\n            var me = m.elements;\r\n\r\n            te[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\r\n            te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\r\n            te[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\r\n            te[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyPosition: function ( m ) {\r\n\r\n            var te = this.elements, me = m.elements;\r\n\r\n            te[ 12 ] = me[ 12 ];\r\n            te[ 13 ] = me[ 13 ];\r\n            te[ 14 ] = me[ 14 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        extractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n            xAxis.setFromMatrixColumn( this, 0 );\r\n            yAxis.setFromMatrixColumn( this, 1 );\r\n            zAxis.setFromMatrixColumn( this, 2 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n            this.set(\r\n                xAxis.x, yAxis.x, zAxis.x, 0,\r\n                xAxis.y, yAxis.y, zAxis.y, 0,\r\n                xAxis.z, yAxis.z, zAxis.z, 0,\r\n                0, 0, 0, 1\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        extractRotation: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function extractRotation( m ) {\r\n\r\n                // this method does not support reflection matrices\r\n\r\n                var te = this.elements;\r\n                var me = m.elements;\r\n\r\n                var scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\r\n                var scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\r\n                var scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n                te[ 0 ] = me[ 0 ] * scaleX;\r\n                te[ 1 ] = me[ 1 ] * scaleX;\r\n                te[ 2 ] = me[ 2 ] * scaleX;\r\n                te[ 3 ] = 0;\r\n\r\n                te[ 4 ] = me[ 4 ] * scaleY;\r\n                te[ 5 ] = me[ 5 ] * scaleY;\r\n                te[ 6 ] = me[ 6 ] * scaleY;\r\n                te[ 7 ] = 0;\r\n\r\n                te[ 8 ] = me[ 8 ] * scaleZ;\r\n                te[ 9 ] = me[ 9 ] * scaleZ;\r\n                te[ 10 ] = me[ 10 ] * scaleZ;\r\n                te[ 11 ] = 0;\r\n\r\n                te[ 12 ] = 0;\r\n                te[ 13 ] = 0;\r\n                te[ 14 ] = 0;\r\n                te[ 15 ] = 1;\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        makeRotationFromEuler: function ( euler ) {\r\n\r\n            if ( ! ( euler && euler.isEuler ) ) {\r\n\r\n                console.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n            }\r\n\r\n            var te = this.elements;\r\n\r\n            var x = euler.x, y = euler.y, z = euler.z;\r\n            var a = Math.cos( x ), b = Math.sin( x );\r\n            var c = Math.cos( y ), d = Math.sin( y );\r\n            var e = Math.cos( z ), f = Math.sin( z );\r\n\r\n            if ( euler.order === 'XYZ' ) {\r\n\r\n                var ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = - c * f;\r\n                te[ 8 ] = d;\r\n\r\n                te[ 1 ] = af + be * d;\r\n                te[ 5 ] = ae - bf * d;\r\n                te[ 9 ] = - b * c;\r\n\r\n                te[ 2 ] = bf - ae * d;\r\n                te[ 6 ] = be + af * d;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'YXZ' ) {\r\n\r\n                var ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n                te[ 0 ] = ce + df * b;\r\n                te[ 4 ] = de * b - cf;\r\n                te[ 8 ] = a * d;\r\n\r\n                te[ 1 ] = a * f;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = - b;\r\n\r\n                te[ 2 ] = cf * b - de;\r\n                te[ 6 ] = df + ce * b;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'ZXY' ) {\r\n\r\n                var ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n                te[ 0 ] = ce - df * b;\r\n                te[ 4 ] = - a * f;\r\n                te[ 8 ] = de + cf * b;\r\n\r\n                te[ 1 ] = cf + de * b;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = df - ce * b;\r\n\r\n                te[ 2 ] = - a * d;\r\n                te[ 6 ] = b;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'ZYX' ) {\r\n\r\n                var ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = be * d - af;\r\n                te[ 8 ] = ae * d + bf;\r\n\r\n                te[ 1 ] = c * f;\r\n                te[ 5 ] = bf * d + ae;\r\n                te[ 9 ] = af * d - be;\r\n\r\n                te[ 2 ] = - d;\r\n                te[ 6 ] = b * c;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'YZX' ) {\r\n\r\n                var ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = bd - ac * f;\r\n                te[ 8 ] = bc * f + ad;\r\n\r\n                te[ 1 ] = f;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = - b * e;\r\n\r\n                te[ 2 ] = - d * e;\r\n                te[ 6 ] = ad * f + bc;\r\n                te[ 10 ] = ac - bd * f;\r\n\r\n            } else if ( euler.order === 'XZY' ) {\r\n\r\n                var ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = - f;\r\n                te[ 8 ] = d * e;\r\n\r\n                te[ 1 ] = ac * f + bd;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = ad * f - bc;\r\n\r\n                te[ 2 ] = bc * f - ad;\r\n                te[ 6 ] = b * e;\r\n                te[ 10 ] = bd * f + ac;\r\n\r\n            }\r\n\r\n            // bottom row\r\n            te[ 3 ] = 0;\r\n            te[ 7 ] = 0;\r\n            te[ 11 ] = 0;\r\n\r\n            // last column\r\n            te[ 12 ] = 0;\r\n            te[ 13 ] = 0;\r\n            te[ 14 ] = 0;\r\n            te[ 15 ] = 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationFromQuaternion: function () {\r\n\r\n            var zero = new Vector3( 0, 0, 0 );\r\n            var one = new Vector3( 1, 1, 1 );\r\n\r\n            return function makeRotationFromQuaternion( q ) {\r\n\r\n                return this.compose( zero, q, one );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            var x = new Vector3();\r\n            var y = new Vector3();\r\n            var z = new Vector3();\r\n\r\n            return function lookAt( eye, target, up ) {\r\n\r\n                var te = this.elements;\r\n\r\n                z.subVectors( eye, target );\r\n\r\n                if ( z.lengthSq() === 0 ) {\r\n\r\n                    // eye and target are in the same position\r\n\r\n                    z.z = 1;\r\n\r\n                }\r\n\r\n                z.normalize();\r\n                x.crossVectors( up, z );\r\n\r\n                if ( x.lengthSq() === 0 ) {\r\n\r\n                    // up and z are parallel\r\n\r\n                    if ( Math.abs( up.z ) === 1 ) {\r\n\r\n                        z.x += 0.0001;\r\n\r\n                    } else {\r\n\r\n                        z.z += 0.0001;\r\n\r\n                    }\r\n\r\n                    z.normalize();\r\n                    x.crossVectors( up, z );\r\n\r\n                }\r\n\r\n                x.normalize();\r\n                y.crossVectors( z, x );\r\n\r\n                te[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n                te[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n                te[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        multiply: function ( m, n ) {\r\n\r\n            if ( n !== undefined ) {\r\n\r\n                console.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n                return this.multiplyMatrices( m, n );\r\n\r\n            }\r\n\r\n            return this.multiplyMatrices( this, m );\r\n\r\n        },\r\n\r\n        premultiply: function ( m ) {\r\n\r\n            return this.multiplyMatrices( m, this );\r\n\r\n        },\r\n\r\n        multiplyMatrices: function ( a, b ) {\r\n\r\n            var ae = a.elements;\r\n            var be = b.elements;\r\n            var te = this.elements;\r\n\r\n            var a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n            var a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n            var a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n            var a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n            var b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n            var b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n            var b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n            var b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n            te[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n            te[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n            te[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n            te[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n            te[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n            te[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n            te[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n            te[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n            te[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n            te[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n            te[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n            te[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n            te[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n            te[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n            te[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n            te[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( s ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n            te[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n            te[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n            te[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyToBufferAttribute: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function applyToBufferAttribute( attribute ) {\r\n\r\n                for ( var i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                    v1.x = attribute.getX( i );\r\n                    v1.y = attribute.getY( i );\r\n                    v1.z = attribute.getZ( i );\r\n\r\n                    v1.applyMatrix4( this );\r\n\r\n                    attribute.setXYZ( i, v1.x, v1.y, v1.z );\r\n\r\n                }\r\n\r\n                return attribute;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        determinant: function () {\r\n\r\n            var te = this.elements;\r\n\r\n            var n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n            var n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n            var n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n            var n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n            //TODO: make this more efficient\r\n            //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n            return (\r\n                n41 * (\r\n                    + n14 * n23 * n32\r\n                    - n13 * n24 * n32\r\n                    - n14 * n22 * n33\r\n                    + n12 * n24 * n33\r\n                    + n13 * n22 * n34\r\n                    - n12 * n23 * n34\r\n                ) +\r\n                n42 * (\r\n                    + n11 * n23 * n34\r\n                    - n11 * n24 * n33\r\n                    + n14 * n21 * n33\r\n                    - n13 * n21 * n34\r\n                    + n13 * n24 * n31\r\n                    - n14 * n23 * n31\r\n                ) +\r\n                n43 * (\r\n                    + n11 * n24 * n32\r\n                    - n11 * n22 * n34\r\n                    - n14 * n21 * n32\r\n                    + n12 * n21 * n34\r\n                    + n14 * n22 * n31\r\n                    - n12 * n24 * n31\r\n                ) +\r\n                n44 * (\r\n                    - n13 * n22 * n31\r\n                    - n11 * n23 * n32\r\n                    + n11 * n22 * n33\r\n                    + n13 * n21 * n32\r\n                    - n12 * n21 * n33\r\n                    + n12 * n23 * n31\r\n                )\r\n\r\n            );\r\n\r\n        },\r\n\r\n        transpose: function () {\r\n\r\n            var te = this.elements;\r\n            var tmp;\r\n\r\n            tmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n            tmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n            tmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n            tmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n            tmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n            tmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setPosition: function ( v ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 12 ] = v.x;\r\n            te[ 13 ] = v.y;\r\n            te[ 14 ] = v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getInverse: function ( m, throwOnDegenerate ) {\r\n\r\n            // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n            var te = this.elements,\r\n                me = m.elements,\r\n\r\n                n11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n                n12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n                n13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n                n14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n                t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n                t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n                t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n                t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n            var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n            if ( det === 0 ) {\r\n\r\n                var msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\r\n\r\n                if ( throwOnDegenerate === true ) {\r\n\r\n                    throw new Error( msg );\r\n\r\n                } else {\r\n\r\n                    console.warn( msg );\r\n\r\n                }\r\n\r\n                return this.identity();\r\n\r\n            }\r\n\r\n            var detInv = 1 / det;\r\n\r\n            te[ 0 ] = t11 * detInv;\r\n            te[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n            te[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n            te[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n            te[ 4 ] = t12 * detInv;\r\n            te[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n            te[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n            te[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n            te[ 8 ] = t13 * detInv;\r\n            te[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n            te[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n            te[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n            te[ 12 ] = t14 * detInv;\r\n            te[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n            te[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n            te[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        scale: function ( v ) {\r\n\r\n            var te = this.elements;\r\n            var x = v.x, y = v.y, z = v.z;\r\n\r\n            te[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n            te[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n            te[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n            te[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getMaxScaleOnAxis: function () {\r\n\r\n            var te = this.elements;\r\n\r\n            var scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n            var scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n            var scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n            return Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n        },\r\n\r\n        makeTranslation: function ( x, y, z ) {\r\n\r\n            this.set(\r\n\r\n                1, 0, 0, x,\r\n                0, 1, 0, y,\r\n                0, 0, 1, z,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationX: function ( theta ) {\r\n\r\n            var c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n            this.set(\r\n\r\n                1, 0, 0, 0,\r\n                0, c, - s, 0,\r\n                0, s, c, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationY: function ( theta ) {\r\n\r\n            var c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n            this.set(\r\n\r\n                c, 0, s, 0,\r\n                0, 1, 0, 0,\r\n                - s, 0, c, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationZ: function ( theta ) {\r\n\r\n            var c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n            this.set(\r\n\r\n                c, - s, 0, 0,\r\n                s, c, 0, 0,\r\n                0, 0, 1, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationAxis: function ( axis, angle ) {\r\n\r\n            // Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n            var c = Math.cos( angle );\r\n            var s = Math.sin( angle );\r\n            var t = 1 - c;\r\n            var x = axis.x, y = axis.y, z = axis.z;\r\n            var tx = t * x, ty = t * y;\r\n\r\n            this.set(\r\n\r\n                tx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n                tx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n                tx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeScale: function ( x, y, z ) {\r\n\r\n            this.set(\r\n\r\n                x, 0, 0, 0,\r\n                0, y, 0, 0,\r\n                0, 0, z, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeShear: function ( x, y, z ) {\r\n\r\n            this.set(\r\n\r\n                1, y, z, 0,\r\n                x, 1, z, 0,\r\n                x, y, 1, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        compose: function ( position, quaternion, scale ) {\r\n\r\n            var te = this.elements;\r\n\r\n            var x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\r\n            var x2 = x + x,\ty2 = y + y, z2 = z + z;\r\n            var xx = x * x2, xy = x * y2, xz = x * z2;\r\n            var yy = y * y2, yz = y * z2, zz = z * z2;\r\n            var wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n            var sx = scale.x, sy = scale.y, sz = scale.z;\r\n\r\n            te[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\r\n            te[ 1 ] = ( xy + wz ) * sx;\r\n            te[ 2 ] = ( xz - wy ) * sx;\r\n            te[ 3 ] = 0;\r\n\r\n            te[ 4 ] = ( xy - wz ) * sy;\r\n            te[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\r\n            te[ 6 ] = ( yz + wx ) * sy;\r\n            te[ 7 ] = 0;\r\n\r\n            te[ 8 ] = ( xz + wy ) * sz;\r\n            te[ 9 ] = ( yz - wx ) * sz;\r\n            te[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\r\n            te[ 11 ] = 0;\r\n\r\n            te[ 12 ] = position.x;\r\n            te[ 13 ] = position.y;\r\n            te[ 14 ] = position.z;\r\n            te[ 15 ] = 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        decompose: function () {\r\n\r\n            var vector = new Vector3();\r\n            var matrix = new Matrix4();\r\n\r\n            return function decompose( position, quaternion, scale ) {\r\n\r\n                var te = this.elements;\r\n\r\n                var sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n                var sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n                var sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n                // if determine is negative, we need to invert one scale\r\n                var det = this.determinant();\r\n                if ( det < 0 ) sx = - sx;\r\n\r\n                position.x = te[ 12 ];\r\n                position.y = te[ 13 ];\r\n                position.z = te[ 14 ];\r\n\r\n                // scale the rotation part\r\n                matrix.copy( this );\r\n\r\n                var invSX = 1 / sx;\r\n                var invSY = 1 / sy;\r\n                var invSZ = 1 / sz;\r\n\r\n                matrix.elements[ 0 ] *= invSX;\r\n                matrix.elements[ 1 ] *= invSX;\r\n                matrix.elements[ 2 ] *= invSX;\r\n\r\n                matrix.elements[ 4 ] *= invSY;\r\n                matrix.elements[ 5 ] *= invSY;\r\n                matrix.elements[ 6 ] *= invSY;\r\n\r\n                matrix.elements[ 8 ] *= invSZ;\r\n                matrix.elements[ 9 ] *= invSZ;\r\n                matrix.elements[ 10 ] *= invSZ;\r\n\r\n                quaternion.setFromRotationMatrix( matrix );\r\n\r\n                scale.x = sx;\r\n                scale.y = sy;\r\n                scale.z = sz;\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        makePerspective: function ( left, right, top, bottom, near, far ) {\r\n\r\n            if ( far === undefined ) {\r\n\r\n                console.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\r\n\r\n            }\r\n\r\n            var te = this.elements;\r\n            var x = 2 * near / ( right - left );\r\n            var y = 2 * near / ( top - bottom );\r\n\r\n            var a = ( right + left ) / ( right - left );\r\n            var b = ( top + bottom ) / ( top - bottom );\r\n            var c = - ( far + near ) / ( far - near );\r\n            var d = - 2 * far * near / ( far - near );\r\n\r\n            te[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n            te[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n            te[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n            te[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n            var te = this.elements;\r\n            var w = 1.0 / ( right - left );\r\n            var h = 1.0 / ( top - bottom );\r\n            var p = 1.0 / ( far - near );\r\n\r\n            var x = ( right + left ) * w;\r\n            var y = ( top + bottom ) * h;\r\n            var z = ( far + near ) * p;\r\n\r\n            te[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n            te[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n            te[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n            te[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( matrix ) {\r\n\r\n            var te = this.elements;\r\n            var me = matrix.elements;\r\n\r\n            for ( var i = 0; i < 16; i ++ ) {\r\n\r\n                if ( te[ i ] !== me[ i ] ) return false;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            for ( var i = 0; i < 16; i ++ ) {\r\n\r\n                this.elements[ i ] = array[ i + offset ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            var te = this.elements;\r\n\r\n            array[ offset ] = te[ 0 ];\r\n            array[ offset + 1 ] = te[ 1 ];\r\n            array[ offset + 2 ] = te[ 2 ];\r\n            array[ offset + 3 ] = te[ 3 ];\r\n\r\n            array[ offset + 4 ] = te[ 4 ];\r\n            array[ offset + 5 ] = te[ 5 ];\r\n            array[ offset + 6 ] = te[ 6 ];\r\n            array[ offset + 7 ] = te[ 7 ];\r\n\r\n            array[ offset + 8 ] = te[ 8 ];\r\n            array[ offset + 9 ] = te[ 9 ];\r\n            array[ offset + 10 ] = te[ 10 ];\r\n            array[ offset + 11 ] = te[ 11 ];\r\n\r\n            array[ offset + 12 ] = te[ 12 ];\r\n            array[ offset + 13 ] = te[ 13 ];\r\n            array[ offset + 14 ] = te[ 14 ];\r\n            array[ offset + 15 ] = te[ 15 ];\r\n\r\n            return array;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Quaternion( x, y, z, w ) {\r\n\r\n        this._x = x || 0;\r\n        this._y = y || 0;\r\n        this._z = z || 0;\r\n        this._w = ( w !== undefined ) ? w : 1;\r\n\r\n    }\r\n\r\n    Object.assign( Quaternion, {\r\n\r\n        slerp: function ( qa, qb, qm, t ) {\r\n\r\n            return qm.copy( qa ).slerp( qb, t );\r\n\r\n        },\r\n\r\n        slerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n            // fuzz-free, array-based Quaternion SLERP operation\r\n\r\n            var x0 = src0[ srcOffset0 + 0 ],\r\n                y0 = src0[ srcOffset0 + 1 ],\r\n                z0 = src0[ srcOffset0 + 2 ],\r\n                w0 = src0[ srcOffset0 + 3 ],\r\n\r\n                x1 = src1[ srcOffset1 + 0 ],\r\n                y1 = src1[ srcOffset1 + 1 ],\r\n                z1 = src1[ srcOffset1 + 2 ],\r\n                w1 = src1[ srcOffset1 + 3 ];\r\n\r\n            if ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n                var s = 1 - t,\r\n\r\n                    cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n                    dir = ( cos >= 0 ? 1 : - 1 ),\r\n                    sqrSin = 1 - cos * cos;\r\n\r\n                // Skip the Slerp for tiny steps to avoid numeric problems:\r\n                if ( sqrSin > Number.EPSILON ) {\r\n\r\n                    var sin = Math.sqrt( sqrSin ),\r\n                        len = Math.atan2( sin, cos * dir );\r\n\r\n                    s = Math.sin( s * len ) / sin;\r\n                    t = Math.sin( t * len ) / sin;\r\n\r\n                }\r\n\r\n                var tDir = t * dir;\r\n\r\n                x0 = x0 * s + x1 * tDir;\r\n                y0 = y0 * s + y1 * tDir;\r\n                z0 = z0 * s + z1 * tDir;\r\n                w0 = w0 * s + w1 * tDir;\r\n\r\n                // Normalize in case we just did a lerp:\r\n                if ( s === 1 - t ) {\r\n\r\n                    var f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n                    x0 *= f;\r\n                    y0 *= f;\r\n                    z0 *= f;\r\n                    w0 *= f;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            dst[ dstOffset ] = x0;\r\n            dst[ dstOffset + 1 ] = y0;\r\n            dst[ dstOffset + 2 ] = z0;\r\n            dst[ dstOffset + 3 ] = w0;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( Quaternion.prototype, {\r\n\r\n        x: {\r\n\r\n            get: function () {\r\n\r\n                return this._x;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._x = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        y: {\r\n\r\n            get: function () {\r\n\r\n                return this._y;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._y = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        z: {\r\n\r\n            get: function () {\r\n\r\n                return this._z;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._z = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        w: {\r\n\r\n            get: function () {\r\n\r\n                return this._w;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._w = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Quaternion.prototype, {\r\n\r\n        set: function ( x, y, z, w ) {\r\n\r\n            this._x = x;\r\n            this._y = y;\r\n            this._z = z;\r\n            this._w = w;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n        },\r\n\r\n        copy: function ( quaternion ) {\r\n\r\n            this._x = quaternion.x;\r\n            this._y = quaternion.y;\r\n            this._z = quaternion.z;\r\n            this._w = quaternion.w;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromEuler: function ( euler, update ) {\r\n\r\n            if ( ! ( euler && euler.isEuler ) ) {\r\n\r\n                throw new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n            }\r\n\r\n            var x = euler._x, y = euler._y, z = euler._z, order = euler.order;\r\n\r\n            // http://www.mathworks.com/matlabcentral/fileexchange/\r\n            // \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n            //\tcontent/SpinCalc.m\r\n\r\n            var cos = Math.cos;\r\n            var sin = Math.sin;\r\n\r\n            var c1 = cos( x / 2 );\r\n            var c2 = cos( y / 2 );\r\n            var c3 = cos( z / 2 );\r\n\r\n            var s1 = sin( x / 2 );\r\n            var s2 = sin( y / 2 );\r\n            var s3 = sin( z / 2 );\r\n\r\n            if ( order === 'XYZ' ) {\r\n\r\n                this._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n            } else if ( order === 'YXZ' ) {\r\n\r\n                this._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n            } else if ( order === 'ZXY' ) {\r\n\r\n                this._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n            } else if ( order === 'ZYX' ) {\r\n\r\n                this._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n            } else if ( order === 'YZX' ) {\r\n\r\n                this._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n            } else if ( order === 'XZY' ) {\r\n\r\n                this._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n            }\r\n\r\n            if ( update !== false ) this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromAxisAngle: function ( axis, angle ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n            // assumes axis is normalized\r\n\r\n            var halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n            this._x = axis.x * s;\r\n            this._y = axis.y * s;\r\n            this._z = axis.z * s;\r\n            this._w = Math.cos( halfAngle );\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromRotationMatrix: function ( m ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            var te = m.elements,\r\n\r\n                m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n                m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n                m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n                trace = m11 + m22 + m33,\r\n                s;\r\n\r\n            if ( trace > 0 ) {\r\n\r\n                s = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n                this._w = 0.25 / s;\r\n                this._x = ( m32 - m23 ) * s;\r\n                this._y = ( m13 - m31 ) * s;\r\n                this._z = ( m21 - m12 ) * s;\r\n\r\n            } else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n                s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n                this._w = ( m32 - m23 ) / s;\r\n                this._x = 0.25 * s;\r\n                this._y = ( m12 + m21 ) / s;\r\n                this._z = ( m13 + m31 ) / s;\r\n\r\n            } else if ( m22 > m33 ) {\r\n\r\n                s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n                this._w = ( m13 - m31 ) / s;\r\n                this._x = ( m12 + m21 ) / s;\r\n                this._y = 0.25 * s;\r\n                this._z = ( m23 + m32 ) / s;\r\n\r\n            } else {\r\n\r\n                s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n                this._w = ( m21 - m12 ) / s;\r\n                this._x = ( m13 + m31 ) / s;\r\n                this._y = ( m23 + m32 ) / s;\r\n                this._z = 0.25 * s;\r\n\r\n            }\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromUnitVectors: function () {\r\n\r\n            // assumes direction vectors vFrom and vTo are normalized\r\n\r\n            var v1 = new Vector3();\r\n            var r;\r\n\r\n            var EPS = 0.000001;\r\n\r\n            return function setFromUnitVectors( vFrom, vTo ) {\r\n\r\n                if ( v1 === undefined ) v1 = new Vector3();\r\n\r\n                r = vFrom.dot( vTo ) + 1;\r\n\r\n                if ( r < EPS ) {\r\n\r\n                    r = 0;\r\n\r\n                    if ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n                        v1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n                    } else {\r\n\r\n                        v1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    v1.crossVectors( vFrom, vTo );\r\n\r\n                }\r\n\r\n                this._x = v1.x;\r\n                this._y = v1.y;\r\n                this._z = v1.z;\r\n                this._w = r;\r\n\r\n                return this.normalize();\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        inverse: function () {\r\n\r\n            // quaternion is assumed to have unit length\r\n\r\n            return this.conjugate();\r\n\r\n        },\r\n\r\n        conjugate: function () {\r\n\r\n            this._x *= - 1;\r\n            this._y *= - 1;\r\n            this._z *= - 1;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n        },\r\n\r\n        lengthSq: function () {\r\n\r\n            return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            var l = this.length();\r\n\r\n            if ( l === 0 ) {\r\n\r\n                this._x = 0;\r\n                this._y = 0;\r\n                this._z = 0;\r\n                this._w = 1;\r\n\r\n            } else {\r\n\r\n                l = 1 / l;\r\n\r\n                this._x = this._x * l;\r\n                this._y = this._y * l;\r\n                this._z = this._z * l;\r\n                this._w = this._w * l;\r\n\r\n            }\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( q, p ) {\r\n\r\n            if ( p !== undefined ) {\r\n\r\n                console.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n                return this.multiplyQuaternions( q, p );\r\n\r\n            }\r\n\r\n            return this.multiplyQuaternions( this, q );\r\n\r\n        },\r\n\r\n        premultiply: function ( q ) {\r\n\r\n            return this.multiplyQuaternions( q, this );\r\n\r\n        },\r\n\r\n        multiplyQuaternions: function ( a, b ) {\r\n\r\n            // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n            var qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n            var qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n            this._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n            this._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n            this._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n            this._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        slerp: function ( qb, t ) {\r\n\r\n            if ( t === 0 ) return this;\r\n            if ( t === 1 ) return this.copy( qb );\r\n\r\n            var x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n            // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n            var cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n            if ( cosHalfTheta < 0 ) {\r\n\r\n                this._w = - qb._w;\r\n                this._x = - qb._x;\r\n                this._y = - qb._y;\r\n                this._z = - qb._z;\r\n\r\n                cosHalfTheta = - cosHalfTheta;\r\n\r\n            } else {\r\n\r\n                this.copy( qb );\r\n\r\n            }\r\n\r\n            if ( cosHalfTheta >= 1.0 ) {\r\n\r\n                this._w = w;\r\n                this._x = x;\r\n                this._y = y;\r\n                this._z = z;\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            var sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n            if ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n                this._w = 0.5 * ( w + this._w );\r\n                this._x = 0.5 * ( x + this._x );\r\n                this._y = 0.5 * ( y + this._y );\r\n                this._z = 0.5 * ( z + this._z );\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            var halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n            var ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n                ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n            this._w = ( w * ratioA + this._w * ratioB );\r\n            this._x = ( x * ratioA + this._x * ratioB );\r\n            this._y = ( y * ratioA + this._y * ratioB );\r\n            this._z = ( z * ratioA + this._z * ratioB );\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( quaternion ) {\r\n\r\n            return ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this._x = array[ offset ];\r\n            this._y = array[ offset + 1 ];\r\n            this._z = array[ offset + 2 ];\r\n            this._w = array[ offset + 3 ];\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this._x;\r\n            array[ offset + 1 ] = this._y;\r\n            array[ offset + 2 ] = this._z;\r\n            array[ offset + 3 ] = this._w;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        onChange: function ( callback ) {\r\n\r\n            this.onChangeCallback = callback;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        onChangeCallback: function () {}\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author kile / http://kile.stravaganza.org/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author egraether / http://egraether.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Vector3( x, y, z ) {\r\n\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.z = z || 0;\r\n\r\n    }\r\n\r\n    Object.assign( Vector3.prototype, {\r\n\r\n        isVector3: true,\r\n\r\n        set: function ( x, y, z ) {\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n            this.z = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.x = scalar;\r\n            this.y = scalar;\r\n            this.z = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setX: function ( x ) {\r\n\r\n            this.x = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( y ) {\r\n\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setZ: function ( z ) {\r\n\r\n            this.z = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponent: function ( index, value ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: this.x = value; break;\r\n                case 1: this.y = value; break;\r\n                case 2: this.z = value; break;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getComponent: function ( index ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: return this.x;\r\n                case 1: return this.y;\r\n                case 2: return this.z;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.x, this.y, this.z );\r\n\r\n        },\r\n\r\n        copy: function ( v ) {\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n            this.z = v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        add: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n                return this.addVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x += v.x;\r\n            this.y += v.y;\r\n            this.z += v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.x += s;\r\n            this.y += s;\r\n            this.z += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addVectors: function ( a, b ) {\r\n\r\n            this.x = a.x + b.x;\r\n            this.y = a.y + b.y;\r\n            this.z = a.z + b.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScaledVector: function ( v, s ) {\r\n\r\n            this.x += v.x * s;\r\n            this.y += v.y * s;\r\n            this.z += v.z * s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n                return this.subVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x -= v.x;\r\n            this.y -= v.y;\r\n            this.z -= v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subScalar: function ( s ) {\r\n\r\n            this.x -= s;\r\n            this.y -= s;\r\n            this.z -= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subVectors: function ( a, b ) {\r\n\r\n            this.x = a.x - b.x;\r\n            this.y = a.y - b.y;\r\n            this.z = a.z - b.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n                return this.multiplyVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x *= v.x;\r\n            this.y *= v.y;\r\n            this.z *= v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( scalar ) {\r\n\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n            this.z *= scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyVectors: function ( a, b ) {\r\n\r\n            this.x = a.x * b.x;\r\n            this.y = a.y * b.y;\r\n            this.z = a.z * b.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyEuler: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function applyEuler( euler ) {\r\n\r\n                if ( ! ( euler && euler.isEuler ) ) {\r\n\r\n                    console.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n                }\r\n\r\n                return this.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        applyAxisAngle: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function applyAxisAngle( axis, angle ) {\r\n\r\n                return this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        applyMatrix3: function ( m ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n            this.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n            this.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( m ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var e = m.elements;\r\n\r\n            var w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\r\n\r\n            this.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\r\n            this.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\r\n            this.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyQuaternion: function ( q ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n            // calculate quat * vector\r\n\r\n            var ix = qw * x + qy * z - qz * y;\r\n            var iy = qw * y + qz * x - qx * z;\r\n            var iz = qw * z + qx * y - qy * x;\r\n            var iw = - qx * x - qy * y - qz * z;\r\n\r\n            // calculate result * inverse quat\r\n\r\n            this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n            this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n            this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        project: function () {\r\n\r\n            var matrix = new Matrix4();\r\n\r\n            return function project( camera ) {\r\n\r\n                matrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n                return this.applyMatrix4( matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        unproject: function () {\r\n\r\n            var matrix = new Matrix4();\r\n\r\n            return function unproject( camera ) {\r\n\r\n                matrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n                return this.applyMatrix4( matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        transformDirection: function ( m ) {\r\n\r\n            // input: THREE.Matrix4 affine matrix\r\n            // vector interpreted as a direction\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\r\n            this.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\r\n            this.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n            return this.normalize();\r\n\r\n        },\r\n\r\n        divide: function ( v ) {\r\n\r\n            this.x /= v.x;\r\n            this.y /= v.y;\r\n            this.z /= v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divideScalar: function ( scalar ) {\r\n\r\n            return this.multiplyScalar( 1 / scalar );\r\n\r\n        },\r\n\r\n        min: function ( v ) {\r\n\r\n            this.x = Math.min( this.x, v.x );\r\n            this.y = Math.min( this.y, v.y );\r\n            this.z = Math.min( this.z, v.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        max: function ( v ) {\r\n\r\n            this.x = Math.max( this.x, v.x );\r\n            this.y = Math.max( this.y, v.y );\r\n            this.z = Math.max( this.z, v.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clamp: function ( min, max ) {\r\n\r\n            // assumes min < max, componentwise\r\n\r\n            this.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n            this.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n            this.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clampScalar: function () {\r\n\r\n            var min = new Vector3();\r\n            var max = new Vector3();\r\n\r\n            return function clampScalar( minVal, maxVal ) {\r\n\r\n                min.set( minVal, minVal, minVal );\r\n                max.set( maxVal, maxVal, maxVal );\r\n\r\n                return this.clamp( min, max );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clampLength: function ( min, max ) {\r\n\r\n            var length = this.length();\r\n\r\n            return this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n        },\r\n\r\n        floor: function () {\r\n\r\n            this.x = Math.floor( this.x );\r\n            this.y = Math.floor( this.y );\r\n            this.z = Math.floor( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        ceil: function () {\r\n\r\n            this.x = Math.ceil( this.x );\r\n            this.y = Math.ceil( this.y );\r\n            this.z = Math.ceil( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        round: function () {\r\n\r\n            this.x = Math.round( this.x );\r\n            this.y = Math.round( this.y );\r\n            this.z = Math.round( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        roundToZero: function () {\r\n\r\n            this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n            this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n            this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.x = - this.x;\r\n            this.y = - this.y;\r\n            this.z = - this.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n        },\r\n\r\n        // TODO lengthSquared?\r\n\r\n        lengthSq: function () {\r\n\r\n            return this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n        },\r\n\r\n        manhattanLength: function () {\r\n\r\n            return Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            return this.divideScalar( this.length() || 1 );\r\n\r\n        },\r\n\r\n        setLength: function ( length ) {\r\n\r\n            return this.normalize().multiplyScalar( length );\r\n\r\n        },\r\n\r\n        lerp: function ( v, alpha ) {\r\n\r\n            this.x += ( v.x - this.x ) * alpha;\r\n            this.y += ( v.y - this.y ) * alpha;\r\n            this.z += ( v.z - this.z ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerpVectors: function ( v1, v2, alpha ) {\r\n\r\n            return this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n        },\r\n\r\n        cross: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n                return this.crossVectors( v, w );\r\n\r\n            }\r\n\r\n            return this.crossVectors( this, v );\r\n\r\n        },\r\n\r\n        crossVectors: function ( a, b ) {\r\n\r\n            var ax = a.x, ay = a.y, az = a.z;\r\n            var bx = b.x, by = b.y, bz = b.z;\r\n\r\n            this.x = ay * bz - az * by;\r\n            this.y = az * bx - ax * bz;\r\n            this.z = ax * by - ay * bx;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        projectOnVector: function ( vector ) {\r\n\r\n            var scalar = vector.dot( this ) / vector.lengthSq();\r\n\r\n            return this.copy( vector ).multiplyScalar( scalar );\r\n\r\n        },\r\n\r\n        projectOnPlane: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function projectOnPlane( planeNormal ) {\r\n\r\n                v1.copy( this ).projectOnVector( planeNormal );\r\n\r\n                return this.sub( v1 );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        reflect: function () {\r\n\r\n            // reflect incident vector off plane orthogonal to normal\r\n            // normal is assumed to have unit length\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function reflect( normal ) {\r\n\r\n                return this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        angleTo: function ( v ) {\r\n\r\n            var theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\r\n\r\n            // clamp, to handle numerical problems\r\n\r\n            return Math.acos( _Math.clamp( theta, - 1, 1 ) );\r\n\r\n        },\r\n\r\n        distanceTo: function ( v ) {\r\n\r\n            return Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n        },\r\n\r\n        distanceToSquared: function ( v ) {\r\n\r\n            var dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n            return dx * dx + dy * dy + dz * dz;\r\n\r\n        },\r\n\r\n        manhattanDistanceTo: function ( v ) {\r\n\r\n            return Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\r\n\r\n        },\r\n\r\n        setFromSpherical: function ( s ) {\r\n\r\n            var sinPhiRadius = Math.sin( s.phi ) * s.radius;\r\n\r\n            this.x = sinPhiRadius * Math.sin( s.theta );\r\n            this.y = Math.cos( s.phi ) * s.radius;\r\n            this.z = sinPhiRadius * Math.cos( s.theta );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCylindrical: function ( c ) {\r\n\r\n            this.x = c.radius * Math.sin( c.theta );\r\n            this.y = c.y;\r\n            this.z = c.radius * Math.cos( c.theta );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrixPosition: function ( m ) {\r\n\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 12 ];\r\n            this.y = e[ 13 ];\r\n            this.z = e[ 14 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrixScale: function ( m ) {\r\n\r\n            var sx = this.setFromMatrixColumn( m, 0 ).length();\r\n            var sy = this.setFromMatrixColumn( m, 1 ).length();\r\n            var sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n            this.x = sx;\r\n            this.y = sy;\r\n            this.z = sz;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrixColumn: function ( m, index ) {\r\n\r\n            return this.fromArray( m.elements, index * 4 );\r\n\r\n        },\r\n\r\n        equals: function ( v ) {\r\n\r\n            return ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.x = array[ offset ];\r\n            this.y = array[ offset + 1 ];\r\n            this.z = array[ offset + 2 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.x;\r\n            array[ offset + 1 ] = this.y;\r\n            array[ offset + 2 ] = this.z;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        fromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n            if ( offset !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\r\n\r\n            }\r\n\r\n            this.x = attribute.getX( index );\r\n            this.y = attribute.getY( index );\r\n            this.z = attribute.getZ( index );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author bhouston / http://clara.io\r\n     * @author tschw\r\n     */\r\n\r\n    function Matrix3() {\r\n\r\n        this.elements = [\r\n\r\n            1, 0, 0,\r\n            0, 1, 0,\r\n            0, 0, 1\r\n\r\n        ];\r\n\r\n        if ( arguments.length > 0 ) {\r\n\r\n            console.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Matrix3.prototype, {\r\n\r\n        isMatrix3: true,\r\n\r\n        set: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n            te[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n            te[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        identity: function () {\r\n\r\n            this.set(\r\n\r\n                1, 0, 0,\r\n                0, 1, 0,\r\n                0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().fromArray( this.elements );\r\n\r\n        },\r\n\r\n        copy: function ( m ) {\r\n\r\n            var te = this.elements;\r\n            var me = m.elements;\r\n\r\n            te[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\r\n            te[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\r\n            te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrix4: function ( m ) {\r\n\r\n            var me = m.elements;\r\n\r\n            this.set(\r\n\r\n                me[ 0 ], me[ 4 ], me[ 8 ],\r\n                me[ 1 ], me[ 5 ], me[ 9 ],\r\n                me[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyToBufferAttribute: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function applyToBufferAttribute( attribute ) {\r\n\r\n                for ( var i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                    v1.x = attribute.getX( i );\r\n                    v1.y = attribute.getY( i );\r\n                    v1.z = attribute.getZ( i );\r\n\r\n                    v1.applyMatrix3( this );\r\n\r\n                    attribute.setXYZ( i, v1.x, v1.y, v1.z );\r\n\r\n                }\r\n\r\n                return attribute;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        multiply: function ( m ) {\r\n\r\n            return this.multiplyMatrices( this, m );\r\n\r\n        },\r\n\r\n        premultiply: function ( m ) {\r\n\r\n            return this.multiplyMatrices( m, this );\r\n\r\n        },\r\n\r\n        multiplyMatrices: function ( a, b ) {\r\n\r\n            var ae = a.elements;\r\n            var be = b.elements;\r\n            var te = this.elements;\r\n\r\n            var a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\r\n            var a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\r\n            var a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\r\n\r\n            var b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\r\n            var b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\r\n            var b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\r\n\r\n            te[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\r\n            te[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\r\n            te[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\r\n\r\n            te[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\r\n            te[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\r\n            te[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\r\n\r\n            te[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\r\n            te[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\r\n            te[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( s ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n            te[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n            te[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        determinant: function () {\r\n\r\n            var te = this.elements;\r\n\r\n            var a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n                d = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n                g = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n            return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n        },\r\n\r\n        getInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n            if ( matrix && matrix.isMatrix4 ) {\r\n\r\n                console.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\r\n\r\n            }\r\n\r\n            var me = matrix.elements,\r\n                te = this.elements,\r\n\r\n                n11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n                n12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n                n13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n                t11 = n33 * n22 - n32 * n23,\r\n                t12 = n32 * n13 - n33 * n12,\r\n                t13 = n23 * n12 - n22 * n13,\r\n\r\n                det = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n            if ( det === 0 ) {\r\n\r\n                var msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\r\n\r\n                if ( throwOnDegenerate === true ) {\r\n\r\n                    throw new Error( msg );\r\n\r\n                } else {\r\n\r\n                    console.warn( msg );\r\n\r\n                }\r\n\r\n                return this.identity();\r\n\r\n            }\r\n\r\n            var detInv = 1 / det;\r\n\r\n            te[ 0 ] = t11 * detInv;\r\n            te[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n            te[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n            te[ 3 ] = t12 * detInv;\r\n            te[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n            te[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n            te[ 6 ] = t13 * detInv;\r\n            te[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n            te[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        transpose: function () {\r\n\r\n            var tmp, m = this.elements;\r\n\r\n            tmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n            tmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n            tmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getNormalMatrix: function ( matrix4 ) {\r\n\r\n            return this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n        },\r\n\r\n        transposeIntoArray: function ( r ) {\r\n\r\n            var m = this.elements;\r\n\r\n            r[ 0 ] = m[ 0 ];\r\n            r[ 1 ] = m[ 3 ];\r\n            r[ 2 ] = m[ 6 ];\r\n            r[ 3 ] = m[ 1 ];\r\n            r[ 4 ] = m[ 4 ];\r\n            r[ 5 ] = m[ 7 ];\r\n            r[ 6 ] = m[ 2 ];\r\n            r[ 7 ] = m[ 5 ];\r\n            r[ 8 ] = m[ 8 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n            var c = Math.cos( rotation );\r\n            var s = Math.sin( rotation );\r\n\r\n            this.set(\r\n                sx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n                - sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n                0, 0, 1\r\n            );\r\n\r\n        },\r\n\r\n        scale: function ( sx, sy ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\r\n            te[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotate: function ( theta ) {\r\n\r\n            var c = Math.cos( theta );\r\n            var s = Math.sin( theta );\r\n\r\n            var te = this.elements;\r\n\r\n            var a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\r\n            var a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\r\n\r\n            te[ 0 ] = c * a11 + s * a21;\r\n            te[ 3 ] = c * a12 + s * a22;\r\n            te[ 6 ] = c * a13 + s * a23;\r\n\r\n            te[ 1 ] = - s * a11 + c * a21;\r\n            te[ 4 ] = - s * a12 + c * a22;\r\n            te[ 7 ] = - s * a13 + c * a23;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( tx, ty ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\r\n            te[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( matrix ) {\r\n\r\n            var te = this.elements;\r\n            var me = matrix.elements;\r\n\r\n            for ( var i = 0; i < 9; i ++ ) {\r\n\r\n                if ( te[ i ] !== me[ i ] ) return false;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            for ( var i = 0; i < 9; i ++ ) {\r\n\r\n                this.elements[ i ] = array[ i + offset ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            var te = this.elements;\r\n\r\n            array[ offset ] = te[ 0 ];\r\n            array[ offset + 1 ] = te[ 1 ];\r\n            array[ offset + 2 ] = te[ 2 ];\r\n\r\n            array[ offset + 3 ] = te[ 3 ];\r\n            array[ offset + 4 ] = te[ 4 ];\r\n            array[ offset + 5 ] = te[ 5 ];\r\n\r\n            array[ offset + 6 ] = te[ 6 ];\r\n            array[ offset + 7 ] = te[ 7 ];\r\n            array[ offset + 8 ] = te[ 8 ];\r\n\r\n            return array;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author szimek / https://github.com/szimek/\r\n     */\r\n\r\n    var textureId = 0;\r\n\r\n    function Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n        Object.defineProperty( this, 'id', { value: textureId ++ } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n\r\n        this.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\r\n        this.mipmaps = [];\r\n\r\n        this.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\r\n\r\n        this.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\r\n        this.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\r\n\r\n        this.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n        this.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\r\n\r\n        this.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n        this.format = format !== undefined ? format : RGBAFormat;\r\n        this.type = type !== undefined ? type : UnsignedByteType;\r\n\r\n        this.offset = new Vector2( 0, 0 );\r\n        this.repeat = new Vector2( 1, 1 );\r\n        this.center = new Vector2( 0, 0 );\r\n        this.rotation = 0;\r\n\r\n        this.matrixAutoUpdate = true;\r\n        this.matrix = new Matrix3();\r\n\r\n        this.generateMipmaps = true;\r\n        this.premultiplyAlpha = false;\r\n        this.flipY = true;\r\n        this.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n        // Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n        //\r\n        // Also changing the encoding after already used by a Material will not automatically make the Material\r\n        // update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n        this.encoding = encoding !== undefined ? encoding : LinearEncoding;\r\n\r\n        this.version = 0;\r\n        this.onUpdate = null;\r\n\r\n    }\r\n\r\n    Texture.DEFAULT_IMAGE = undefined;\r\n    Texture.DEFAULT_MAPPING = UVMapping;\r\n\r\n    Texture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Texture,\r\n\r\n        isTexture: true,\r\n\r\n        updateMatrix: function () {\r\n\r\n            this.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.name = source.name;\r\n\r\n            this.image = source.image;\r\n            this.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n            this.mapping = source.mapping;\r\n\r\n            this.wrapS = source.wrapS;\r\n            this.wrapT = source.wrapT;\r\n\r\n            this.magFilter = source.magFilter;\r\n            this.minFilter = source.minFilter;\r\n\r\n            this.anisotropy = source.anisotropy;\r\n\r\n            this.format = source.format;\r\n            this.type = source.type;\r\n\r\n            this.offset.copy( source.offset );\r\n            this.repeat.copy( source.repeat );\r\n            this.center.copy( source.center );\r\n            this.rotation = source.rotation;\r\n\r\n            this.matrixAutoUpdate = source.matrixAutoUpdate;\r\n            this.matrix.copy( source.matrix );\r\n\r\n            this.generateMipmaps = source.generateMipmaps;\r\n            this.premultiplyAlpha = source.premultiplyAlpha;\r\n            this.flipY = source.flipY;\r\n            this.unpackAlignment = source.unpackAlignment;\r\n            this.encoding = source.encoding;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n            if ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n                return meta.textures[ this.uuid ];\r\n\r\n            }\r\n\r\n            function getDataURL( image ) {\r\n\r\n                var canvas;\r\n\r\n                if ( image instanceof HTMLCanvasElement ) {\r\n\r\n                    canvas = image;\r\n\r\n                } else {\r\n\r\n                    canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n                    canvas.width = image.width;\r\n                    canvas.height = image.height;\r\n\r\n                    var context = canvas.getContext( '2d' );\r\n\r\n                    if ( image instanceof ImageData ) {\r\n\r\n                        context.putImageData( image, 0, 0 );\r\n\r\n                    } else {\r\n\r\n                        context.drawImage( image, 0, 0, image.width, image.height );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n                    return canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n                } else {\r\n\r\n                    return canvas.toDataURL( 'image/png' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var output = {\r\n\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Texture',\r\n                    generator: 'Texture.toJSON'\r\n                },\r\n\r\n                uuid: this.uuid,\r\n                name: this.name,\r\n\r\n                mapping: this.mapping,\r\n\r\n                repeat: [ this.repeat.x, this.repeat.y ],\r\n                offset: [ this.offset.x, this.offset.y ],\r\n                center: [ this.center.x, this.center.y ],\r\n                rotation: this.rotation,\r\n\r\n                wrap: [ this.wrapS, this.wrapT ],\r\n\r\n                format: this.format,\r\n                minFilter: this.minFilter,\r\n                magFilter: this.magFilter,\r\n                anisotropy: this.anisotropy,\r\n\r\n                flipY: this.flipY\r\n\r\n            };\r\n\r\n            if ( this.image !== undefined ) {\r\n\r\n                // TODO: Move to THREE.Image\r\n\r\n                var image = this.image;\r\n\r\n                if ( image.uuid === undefined ) {\r\n\r\n                    image.uuid = _Math.generateUUID(); // UGH\r\n\r\n                }\r\n\r\n                if ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\r\n\r\n                    meta.images[ image.uuid ] = {\r\n                        uuid: image.uuid,\r\n                        url: getDataURL( image )\r\n                    };\r\n\r\n                }\r\n\r\n                output.image = image.uuid;\r\n\r\n            }\r\n\r\n            if ( ! isRootObject ) {\r\n\r\n                meta.textures[ this.uuid ] = output;\r\n\r\n            }\r\n\r\n            return output;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        },\r\n\r\n        transformUv: function ( uv ) {\r\n\r\n            if ( this.mapping !== UVMapping ) return;\r\n\r\n            uv.applyMatrix3( this.matrix );\r\n\r\n            if ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n                switch ( this.wrapS ) {\r\n\r\n                    case RepeatWrapping:\r\n\r\n                        uv.x = uv.x - Math.floor( uv.x );\r\n                        break;\r\n\r\n                    case ClampToEdgeWrapping:\r\n\r\n                        uv.x = uv.x < 0 ? 0 : 1;\r\n                        break;\r\n\r\n                    case MirroredRepeatWrapping:\r\n\r\n                        if ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n                            uv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n                        } else {\r\n\r\n                            uv.x = uv.x - Math.floor( uv.x );\r\n\r\n                        }\r\n                        break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n                switch ( this.wrapT ) {\r\n\r\n                    case RepeatWrapping:\r\n\r\n                        uv.y = uv.y - Math.floor( uv.y );\r\n                        break;\r\n\r\n                    case ClampToEdgeWrapping:\r\n\r\n                        uv.y = uv.y < 0 ? 0 : 1;\r\n                        break;\r\n\r\n                    case MirroredRepeatWrapping:\r\n\r\n                        if ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n                            uv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n                        } else {\r\n\r\n                            uv.y = uv.y - Math.floor( uv.y );\r\n\r\n                        }\r\n                        break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.flipY ) {\r\n\r\n                uv.y = 1 - uv.y;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperty( Texture.prototype, \"needsUpdate\", {\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value === true ) this.version ++;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author supereggbert / http://www.paulbrunt.co.uk/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author egraether / http://egraether.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Vector4( x, y, z, w ) {\r\n\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.z = z || 0;\r\n        this.w = ( w !== undefined ) ? w : 1;\r\n\r\n    }\r\n\r\n    Object.assign( Vector4.prototype, {\r\n\r\n        isVector4: true,\r\n\r\n        set: function ( x, y, z, w ) {\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n            this.z = z;\r\n            this.w = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.x = scalar;\r\n            this.y = scalar;\r\n            this.z = scalar;\r\n            this.w = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setX: function ( x ) {\r\n\r\n            this.x = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( y ) {\r\n\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setZ: function ( z ) {\r\n\r\n            this.z = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setW: function ( w ) {\r\n\r\n            this.w = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponent: function ( index, value ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: this.x = value; break;\r\n                case 1: this.y = value; break;\r\n                case 2: this.z = value; break;\r\n                case 3: this.w = value; break;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getComponent: function ( index ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: return this.x;\r\n                case 1: return this.y;\r\n                case 2: return this.z;\r\n                case 3: return this.w;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n        },\r\n\r\n        copy: function ( v ) {\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n            this.z = v.z;\r\n            this.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        add: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n                return this.addVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x += v.x;\r\n            this.y += v.y;\r\n            this.z += v.z;\r\n            this.w += v.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.x += s;\r\n            this.y += s;\r\n            this.z += s;\r\n            this.w += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addVectors: function ( a, b ) {\r\n\r\n            this.x = a.x + b.x;\r\n            this.y = a.y + b.y;\r\n            this.z = a.z + b.z;\r\n            this.w = a.w + b.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScaledVector: function ( v, s ) {\r\n\r\n            this.x += v.x * s;\r\n            this.y += v.y * s;\r\n            this.z += v.z * s;\r\n            this.w += v.w * s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n                return this.subVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x -= v.x;\r\n            this.y -= v.y;\r\n            this.z -= v.z;\r\n            this.w -= v.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subScalar: function ( s ) {\r\n\r\n            this.x -= s;\r\n            this.y -= s;\r\n            this.z -= s;\r\n            this.w -= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subVectors: function ( a, b ) {\r\n\r\n            this.x = a.x - b.x;\r\n            this.y = a.y - b.y;\r\n            this.z = a.z - b.z;\r\n            this.w = a.w - b.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( scalar ) {\r\n\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n            this.z *= scalar;\r\n            this.w *= scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( m ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z, w = this.w;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n            this.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n            this.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n            this.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divideScalar: function ( scalar ) {\r\n\r\n            return this.multiplyScalar( 1 / scalar );\r\n\r\n        },\r\n\r\n        setAxisAngleFromQuaternion: function ( q ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n            // q is assumed to be normalized\r\n\r\n            this.w = 2 * Math.acos( q.w );\r\n\r\n            var s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n            if ( s < 0.0001 ) {\r\n\r\n                this.x = 1;\r\n                this.y = 0;\r\n                this.z = 0;\r\n\r\n            } else {\r\n\r\n                this.x = q.x / s;\r\n                this.y = q.y / s;\r\n                this.z = q.z / s;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            var angle, x, y, z,\t\t// variables for result\r\n                epsilon = 0.01,\t\t// margin to allow for rounding errors\r\n                epsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n                te = m.elements,\r\n\r\n                m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n                m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n                m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n            if ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n                ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n                ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n                // singularity found\r\n                // first check for identity matrix which must have +1 for all terms\r\n                // in leading diagonal and zero in other terms\r\n\r\n                if ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n                    ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n                    ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n                    ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n                    // this singularity is identity matrix so angle = 0\r\n\r\n                    this.set( 1, 0, 0, 0 );\r\n\r\n                    return this; // zero angle, arbitrary axis\r\n\r\n                }\r\n\r\n                // otherwise this singularity is angle = 180\r\n\r\n                angle = Math.PI;\r\n\r\n                var xx = ( m11 + 1 ) / 2;\r\n                var yy = ( m22 + 1 ) / 2;\r\n                var zz = ( m33 + 1 ) / 2;\r\n                var xy = ( m12 + m21 ) / 4;\r\n                var xz = ( m13 + m31 ) / 4;\r\n                var yz = ( m23 + m32 ) / 4;\r\n\r\n                if ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n                    // m11 is the largest diagonal term\r\n\r\n                    if ( xx < epsilon ) {\r\n\r\n                        x = 0;\r\n                        y = 0.707106781;\r\n                        z = 0.707106781;\r\n\r\n                    } else {\r\n\r\n                        x = Math.sqrt( xx );\r\n                        y = xy / x;\r\n                        z = xz / x;\r\n\r\n                    }\r\n\r\n                } else if ( yy > zz ) {\r\n\r\n                    // m22 is the largest diagonal term\r\n\r\n                    if ( yy < epsilon ) {\r\n\r\n                        x = 0.707106781;\r\n                        y = 0;\r\n                        z = 0.707106781;\r\n\r\n                    } else {\r\n\r\n                        y = Math.sqrt( yy );\r\n                        x = xy / y;\r\n                        z = yz / y;\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // m33 is the largest diagonal term so base result on this\r\n\r\n                    if ( zz < epsilon ) {\r\n\r\n                        x = 0.707106781;\r\n                        y = 0.707106781;\r\n                        z = 0;\r\n\r\n                    } else {\r\n\r\n                        z = Math.sqrt( zz );\r\n                        x = xz / z;\r\n                        y = yz / z;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.set( x, y, z, angle );\r\n\r\n                return this; // return 180 deg rotation\r\n\r\n            }\r\n\r\n            // as we have reached here there are no singularities so we can handle normally\r\n\r\n            var s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n                ( m13 - m31 ) * ( m13 - m31 ) +\r\n                ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n            if ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n            // prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n            // caught by singularity test above, but I've left it in just in case\r\n\r\n            this.x = ( m32 - m23 ) / s;\r\n            this.y = ( m13 - m31 ) / s;\r\n            this.z = ( m21 - m12 ) / s;\r\n            this.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        min: function ( v ) {\r\n\r\n            this.x = Math.min( this.x, v.x );\r\n            this.y = Math.min( this.y, v.y );\r\n            this.z = Math.min( this.z, v.z );\r\n            this.w = Math.min( this.w, v.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        max: function ( v ) {\r\n\r\n            this.x = Math.max( this.x, v.x );\r\n            this.y = Math.max( this.y, v.y );\r\n            this.z = Math.max( this.z, v.z );\r\n            this.w = Math.max( this.w, v.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clamp: function ( min, max ) {\r\n\r\n            // assumes min < max, componentwise\r\n\r\n            this.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n            this.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n            this.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n            this.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clampScalar: function () {\r\n\r\n            var min, max;\r\n\r\n            return function clampScalar( minVal, maxVal ) {\r\n\r\n                if ( min === undefined ) {\r\n\r\n                    min = new Vector4();\r\n                    max = new Vector4();\r\n\r\n                }\r\n\r\n                min.set( minVal, minVal, minVal, minVal );\r\n                max.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n                return this.clamp( min, max );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clampLength: function ( min, max ) {\r\n\r\n            var length = this.length();\r\n\r\n            return this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n        },\r\n\r\n        floor: function () {\r\n\r\n            this.x = Math.floor( this.x );\r\n            this.y = Math.floor( this.y );\r\n            this.z = Math.floor( this.z );\r\n            this.w = Math.floor( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        ceil: function () {\r\n\r\n            this.x = Math.ceil( this.x );\r\n            this.y = Math.ceil( this.y );\r\n            this.z = Math.ceil( this.z );\r\n            this.w = Math.ceil( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        round: function () {\r\n\r\n            this.x = Math.round( this.x );\r\n            this.y = Math.round( this.y );\r\n            this.z = Math.round( this.z );\r\n            this.w = Math.round( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        roundToZero: function () {\r\n\r\n            this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n            this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n            this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n            this.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.x = - this.x;\r\n            this.y = - this.y;\r\n            this.z = - this.z;\r\n            this.w = - this.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n        },\r\n\r\n        lengthSq: function () {\r\n\r\n            return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n        },\r\n\r\n        manhattanLength: function () {\r\n\r\n            return Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            return this.divideScalar( this.length() || 1 );\r\n\r\n        },\r\n\r\n        setLength: function ( length ) {\r\n\r\n            return this.normalize().multiplyScalar( length );\r\n\r\n        },\r\n\r\n        lerp: function ( v, alpha ) {\r\n\r\n            this.x += ( v.x - this.x ) * alpha;\r\n            this.y += ( v.y - this.y ) * alpha;\r\n            this.z += ( v.z - this.z ) * alpha;\r\n            this.w += ( v.w - this.w ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerpVectors: function ( v1, v2, alpha ) {\r\n\r\n            return this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n        },\r\n\r\n        equals: function ( v ) {\r\n\r\n            return ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.x = array[ offset ];\r\n            this.y = array[ offset + 1 ];\r\n            this.z = array[ offset + 2 ];\r\n            this.w = array[ offset + 3 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.x;\r\n            array[ offset + 1 ] = this.y;\r\n            array[ offset + 2 ] = this.z;\r\n            array[ offset + 3 ] = this.w;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        fromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n            if ( offset !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\r\n\r\n            }\r\n\r\n            this.x = attribute.getX( index );\r\n            this.y = attribute.getY( index );\r\n            this.z = attribute.getZ( index );\r\n            this.w = attribute.getW( index );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author szimek / https://github.com/szimek/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author Marius Kintel / https://github.com/kintel\r\n     */\r\n\r\n    /*\r\n\t In options, we can specify:\r\n\t * Texture parameters for an auto-generated target texture\r\n\t * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n\t*/\r\n    function WebGLRenderTarget( width, height, options ) {\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.scissor = new Vector4( 0, 0, width, height );\r\n        this.scissorTest = false;\r\n\r\n        this.viewport = new Vector4( 0, 0, width, height );\r\n\r\n        options = options || {};\r\n\r\n        if ( options.minFilter === undefined ) options.minFilter = LinearFilter;\r\n\r\n        this.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\r\n\r\n        this.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : true;\r\n\r\n        this.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n        this.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n        this.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\r\n\r\n    }\r\n\r\n    WebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: WebGLRenderTarget,\r\n\r\n        isWebGLRenderTarget: true,\r\n\r\n        setSize: function ( width, height ) {\r\n\r\n            if ( this.width !== width || this.height !== height ) {\r\n\r\n                this.width = width;\r\n                this.height = height;\r\n\r\n                this.dispose();\r\n\r\n            }\r\n\r\n            this.viewport.set( 0, 0, width, height );\r\n            this.scissor.set( 0, 0, width, height );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.width = source.width;\r\n            this.height = source.height;\r\n\r\n            this.viewport.copy( source.viewport );\r\n\r\n            this.texture = source.texture.clone();\r\n\r\n            this.depthBuffer = source.depthBuffer;\r\n            this.stencilBuffer = source.stencilBuffer;\r\n            this.depthTexture = source.depthTexture;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com\r\n     */\r\n\r\n    function WebGLRenderTargetCube( width, height, options ) {\r\n\r\n        WebGLRenderTarget.call( this, width, height, options );\r\n\r\n        this.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n        this.activeMipMapLevel = 0;\r\n\r\n    }\r\n\r\n    WebGLRenderTargetCube.prototype = Object.create( WebGLRenderTarget.prototype );\r\n    WebGLRenderTargetCube.prototype.constructor = WebGLRenderTargetCube;\r\n\r\n    WebGLRenderTargetCube.prototype.isWebGLRenderTargetCube = true;\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n        Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n        this.image = { data: data, width: width, height: height };\r\n\r\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n        this.generateMipmaps = false;\r\n        this.flipY = false;\r\n        this.unpackAlignment = 1;\r\n\r\n    }\r\n\r\n    DataTexture.prototype = Object.create( Texture.prototype );\r\n    DataTexture.prototype.constructor = DataTexture;\r\n\r\n    DataTexture.prototype.isDataTexture = true;\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Box3( min, max ) {\r\n\r\n        this.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\r\n        this.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n    }\r\n\r\n    Object.assign( Box3.prototype, {\r\n\r\n        isBox3: true,\r\n\r\n        set: function ( min, max ) {\r\n\r\n            this.min.copy( min );\r\n            this.max.copy( max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromArray: function ( array ) {\r\n\r\n            var minX = + Infinity;\r\n            var minY = + Infinity;\r\n            var minZ = + Infinity;\r\n\r\n            var maxX = - Infinity;\r\n            var maxY = - Infinity;\r\n            var maxZ = - Infinity;\r\n\r\n            for ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n                var x = array[ i ];\r\n                var y = array[ i + 1 ];\r\n                var z = array[ i + 2 ];\r\n\r\n                if ( x < minX ) minX = x;\r\n                if ( y < minY ) minY = y;\r\n                if ( z < minZ ) minZ = z;\r\n\r\n                if ( x > maxX ) maxX = x;\r\n                if ( y > maxY ) maxY = y;\r\n                if ( z > maxZ ) maxZ = z;\r\n\r\n            }\r\n\r\n            this.min.set( minX, minY, minZ );\r\n            this.max.set( maxX, maxY, maxZ );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromBufferAttribute: function ( attribute ) {\r\n\r\n            var minX = + Infinity;\r\n            var minY = + Infinity;\r\n            var minZ = + Infinity;\r\n\r\n            var maxX = - Infinity;\r\n            var maxY = - Infinity;\r\n            var maxZ = - Infinity;\r\n\r\n            for ( var i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                var x = attribute.getX( i );\r\n                var y = attribute.getY( i );\r\n                var z = attribute.getZ( i );\r\n\r\n                if ( x < minX ) minX = x;\r\n                if ( y < minY ) minY = y;\r\n                if ( z < minZ ) minZ = z;\r\n\r\n                if ( x > maxX ) maxX = x;\r\n                if ( y > maxY ) maxY = y;\r\n                if ( z > maxZ ) maxZ = z;\r\n\r\n            }\r\n\r\n            this.min.set( minX, minY, minZ );\r\n            this.max.set( maxX, maxY, maxZ );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.makeEmpty();\r\n\r\n            for ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n                this.expandByPoint( points[ i ] );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCenterAndSize: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function setFromCenterAndSize( center, size ) {\r\n\r\n                var halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n                this.min.copy( center ).sub( halfSize );\r\n                this.max.copy( center ).add( halfSize );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setFromObject: function ( object ) {\r\n\r\n            this.makeEmpty();\r\n\r\n            return this.expandByObject( object );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( box ) {\r\n\r\n            this.min.copy( box.min );\r\n            this.max.copy( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeEmpty: function () {\r\n\r\n            this.min.x = this.min.y = this.min.z = + Infinity;\r\n            this.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        isEmpty: function () {\r\n\r\n            // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n            return ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n        },\r\n\r\n        getCenter: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .getCenter() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n        },\r\n\r\n        getSize: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .getSize() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n        },\r\n\r\n        expandByPoint: function ( point ) {\r\n\r\n            this.min.min( point );\r\n            this.max.max( point );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByVector: function ( vector ) {\r\n\r\n            this.min.sub( vector );\r\n            this.max.add( vector );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByScalar: function ( scalar ) {\r\n\r\n            this.min.addScalar( - scalar );\r\n            this.max.addScalar( scalar );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByObject: function () {\r\n\r\n            // Computes the world-axis-aligned bounding box of an object (including its children),\r\n            // accounting for both the object's, and children's, world transforms\r\n\r\n            var scope, i, l;\r\n\r\n            var v1 = new Vector3();\r\n\r\n            function traverse( node ) {\r\n\r\n                var geometry = node.geometry;\r\n\r\n                if ( geometry !== undefined ) {\r\n\r\n                    if ( geometry.isGeometry ) {\r\n\r\n                        var vertices = geometry.vertices;\r\n\r\n                        for ( i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n                            v1.copy( vertices[ i ] );\r\n                            v1.applyMatrix4( node.matrixWorld );\r\n\r\n                            scope.expandByPoint( v1 );\r\n\r\n                        }\r\n\r\n                    } else if ( geometry.isBufferGeometry ) {\r\n\r\n                        var attribute = geometry.attributes.position;\r\n\r\n                        if ( attribute !== undefined ) {\r\n\r\n                            for ( i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                                v1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\r\n\r\n                                scope.expandByPoint( v1 );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return function expandByObject( object ) {\r\n\r\n                scope = this;\r\n\r\n                object.updateMatrixWorld( true );\r\n\r\n                object.traverse( traverse );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return point.x < this.min.x || point.x > this.max.x ||\r\n            point.y < this.min.y || point.y > this.max.y ||\r\n            point.z < this.min.z || point.z > this.max.z ? false : true;\r\n\r\n        },\r\n\r\n        containsBox: function ( box ) {\r\n\r\n            return this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n                this.min.y <= box.min.y && box.max.y <= this.max.y &&\r\n                this.min.z <= box.min.z && box.max.z <= this.max.z;\r\n\r\n        },\r\n\r\n        getParameter: function ( point, target ) {\r\n\r\n            // This can potentially have a divide by zero if the box\r\n            // has a size dimension of 0.\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .getParameter() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.set(\r\n                ( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n                ( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n                ( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n            );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            // using 6 splitting planes to rule out intersections.\r\n            return box.max.x < this.min.x || box.min.x > this.max.x ||\r\n            box.max.y < this.min.y || box.min.y > this.max.y ||\r\n            box.max.z < this.min.z || box.min.z > this.max.z ? false : true;\r\n\r\n        },\r\n\r\n        intersectsSphere: ( function () {\r\n\r\n            var closestPoint = new Vector3();\r\n\r\n            return function intersectsSphere( sphere ) {\r\n\r\n                // Find the point on the AABB closest to the sphere center.\r\n                this.clampPoint( sphere.center, closestPoint );\r\n\r\n                // If that point is inside the sphere, the AABB and sphere intersect.\r\n                return closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        intersectsPlane: function ( plane ) {\r\n\r\n            // We compute the minimum and maximum dot product values. If those values\r\n            // are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n            var min, max;\r\n\r\n            if ( plane.normal.x > 0 ) {\r\n\r\n                min = plane.normal.x * this.min.x;\r\n                max = plane.normal.x * this.max.x;\r\n\r\n            } else {\r\n\r\n                min = plane.normal.x * this.max.x;\r\n                max = plane.normal.x * this.min.x;\r\n\r\n            }\r\n\r\n            if ( plane.normal.y > 0 ) {\r\n\r\n                min += plane.normal.y * this.min.y;\r\n                max += plane.normal.y * this.max.y;\r\n\r\n            } else {\r\n\r\n                min += plane.normal.y * this.max.y;\r\n                max += plane.normal.y * this.min.y;\r\n\r\n            }\r\n\r\n            if ( plane.normal.z > 0 ) {\r\n\r\n                min += plane.normal.z * this.min.z;\r\n                max += plane.normal.z * this.max.z;\r\n\r\n            } else {\r\n\r\n                min += plane.normal.z * this.max.z;\r\n                max += plane.normal.z * this.min.z;\r\n\r\n            }\r\n\r\n            return ( min <= plane.constant && max >= plane.constant );\r\n\r\n        },\r\n\r\n        intersectsTriangle: ( function () {\r\n\r\n            // triangle centered vertices\r\n            var v0 = new Vector3();\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            // triangle edge vectors\r\n            var f0 = new Vector3();\r\n            var f1 = new Vector3();\r\n            var f2 = new Vector3();\r\n\r\n            var testAxis = new Vector3();\r\n\r\n            var center = new Vector3();\r\n            var extents = new Vector3();\r\n\r\n            var triangleNormal = new Vector3();\r\n\r\n            function satForAxes( axes ) {\r\n\r\n                var i, j;\r\n\r\n                for ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\r\n\r\n                    testAxis.fromArray( axes, i );\r\n                    // project the aabb onto the seperating axis\r\n                    var r = extents.x * Math.abs( testAxis.x ) + extents.y * Math.abs( testAxis.y ) + extents.z * Math.abs( testAxis.z );\r\n                    // project all 3 vertices of the triangle onto the seperating axis\r\n                    var p0 = v0.dot( testAxis );\r\n                    var p1 = v1.dot( testAxis );\r\n                    var p2 = v2.dot( testAxis );\r\n                    // actual test, basically see if either of the most extreme of the triangle points intersects r\r\n                    if ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\r\n\r\n                        // points of the projected triangle are outside the projected half-length of the aabb\r\n                        // the axis is seperating and we can exit\r\n                        return false;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            return function intersectsTriangle( triangle ) {\r\n\r\n                if ( this.isEmpty() ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                // compute box center and extents\r\n                this.getCenter( center );\r\n                extents.subVectors( this.max, center );\r\n\r\n                // translate triangle to aabb origin\r\n                v0.subVectors( triangle.a, center );\r\n                v1.subVectors( triangle.b, center );\r\n                v2.subVectors( triangle.c, center );\r\n\r\n                // compute edge vectors for triangle\r\n                f0.subVectors( v1, v0 );\r\n                f1.subVectors( v2, v1 );\r\n                f2.subVectors( v0, v2 );\r\n\r\n                // test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\r\n                // make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\r\n                // axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\r\n                var axes = [\r\n                    0, - f0.z, f0.y, 0, - f1.z, f1.y, 0, - f2.z, f2.y,\r\n                    f0.z, 0, - f0.x, f1.z, 0, - f1.x, f2.z, 0, - f2.x,\r\n                    - f0.y, f0.x, 0, - f1.y, f1.x, 0, - f2.y, f2.x, 0\r\n                ];\r\n                if ( ! satForAxes( axes ) ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                // test 3 face normals from the aabb\r\n                axes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\r\n                if ( ! satForAxes( axes ) ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                // finally testing the face normal of the triangle\r\n                // use already existing triangle edge vectors here\r\n                triangleNormal.crossVectors( f0, f1 );\r\n                axes = [ triangleNormal.x, triangleNormal.y, triangleNormal.z ];\r\n                return satForAxes( axes );\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        clampPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .clampPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( point ).clamp( this.min, this.max );\r\n\r\n        },\r\n\r\n        distanceToPoint: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function distanceToPoint( point ) {\r\n\r\n                var clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n                return clampedPoint.sub( point ).length();\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getBoundingSphere: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function getBoundingSphere( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Box3: .getBoundingSphere() target is now required' );\r\n                    target = new Sphere();\r\n\r\n                }\r\n\r\n                this.getCenter( target.center );\r\n\r\n                target.radius = this.getSize( v1 ).length() * 0.5;\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersect: function ( box ) {\r\n\r\n            this.min.max( box.min );\r\n            this.max.min( box.max );\r\n\r\n            // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\r\n            if ( this.isEmpty() ) this.makeEmpty();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        union: function ( box ) {\r\n\r\n            this.min.min( box.min );\r\n            this.max.max( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( matrix ) {\r\n\r\n            // transform of empty box is an empty box.\r\n            if ( this.isEmpty( ) ) return this;\r\n\r\n            var m = matrix.elements;\r\n\r\n            var xax = m[ 0 ] * this.min.x, xay = m[ 1 ] * this.min.x, xaz = m[ 2 ] * this.min.x;\r\n            var xbx = m[ 0 ] * this.max.x, xby = m[ 1 ] * this.max.x, xbz = m[ 2 ] * this.max.x;\r\n            var yax = m[ 4 ] * this.min.y, yay = m[ 5 ] * this.min.y, yaz = m[ 6 ] * this.min.y;\r\n            var ybx = m[ 4 ] * this.max.y, yby = m[ 5 ] * this.max.y, ybz = m[ 6 ] * this.max.y;\r\n            var zax = m[ 8 ] * this.min.z, zay = m[ 9 ] * this.min.z, zaz = m[ 10 ] * this.min.z;\r\n            var zbx = m[ 8 ] * this.max.z, zby = m[ 9 ] * this.max.z, zbz = m[ 10 ] * this.max.z;\r\n\r\n            this.min.x = Math.min( xax, xbx ) + Math.min( yax, ybx ) + Math.min( zax, zbx ) + m[ 12 ];\r\n            this.min.y = Math.min( xay, xby ) + Math.min( yay, yby ) + Math.min( zay, zby ) + m[ 13 ];\r\n            this.min.z = Math.min( xaz, xbz ) + Math.min( yaz, ybz ) + Math.min( zaz, zbz ) + m[ 14 ];\r\n            this.max.x = Math.max( xax, xbx ) + Math.max( yax, ybx ) + Math.max( zax, zbx ) + m[ 12 ];\r\n            this.max.y = Math.max( xay, xby ) + Math.max( yay, yby ) + Math.max( zay, zby ) + m[ 13 ];\r\n            this.max.z = Math.max( xaz, xbz ) + Math.max( yaz, ybz ) + Math.max( zaz, zbz ) + m[ 14 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.min.add( offset );\r\n            this.max.add( offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( box ) {\r\n\r\n            return box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Sphere( center, radius ) {\r\n\r\n        this.center = ( center !== undefined ) ? center : new Vector3();\r\n        this.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n    }\r\n\r\n    Object.assign( Sphere.prototype, {\r\n\r\n        set: function ( center, radius ) {\r\n\r\n            this.center.copy( center );\r\n            this.radius = radius;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function () {\r\n\r\n            var box = new Box3();\r\n\r\n            return function setFromPoints( points, optionalCenter ) {\r\n\r\n                var center = this.center;\r\n\r\n                if ( optionalCenter !== undefined ) {\r\n\r\n                    center.copy( optionalCenter );\r\n\r\n                } else {\r\n\r\n                    box.setFromPoints( points ).getCenter( center );\r\n\r\n                }\r\n\r\n                var maxRadiusSq = 0;\r\n\r\n                for ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n                    maxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n                }\r\n\r\n                this.radius = Math.sqrt( maxRadiusSq );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( sphere ) {\r\n\r\n            this.center.copy( sphere.center );\r\n            this.radius = sphere.radius;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        empty: function () {\r\n\r\n            return ( this.radius <= 0 );\r\n\r\n        },\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n        },\r\n\r\n        distanceToPoint: function ( point ) {\r\n\r\n            return ( point.distanceTo( this.center ) - this.radius );\r\n\r\n        },\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            var radiusSum = this.radius + sphere.radius;\r\n\r\n            return sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            return box.intersectsSphere( this );\r\n\r\n        },\r\n\r\n        intersectsPlane: function ( plane ) {\r\n\r\n            return Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\r\n\r\n        },\r\n\r\n        clampPoint: function ( point, target ) {\r\n\r\n            var deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Sphere: .clampPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            target.copy( point );\r\n\r\n            if ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n                target.sub( this.center ).normalize();\r\n                target.multiplyScalar( this.radius ).add( this.center );\r\n\r\n            }\r\n\r\n            return target;\r\n\r\n        },\r\n\r\n        getBoundingBox: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\r\n                target = new Box3();\r\n\r\n            }\r\n\r\n            target.set( this.center, this.center );\r\n            target.expandByScalar( this.radius );\r\n\r\n            return target;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( matrix ) {\r\n\r\n            this.center.applyMatrix4( matrix );\r\n            this.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.center.add( offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( sphere ) {\r\n\r\n            return sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Plane( normal, constant ) {\r\n\r\n        // normal is assumed to be normalized\r\n\r\n        this.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\r\n        this.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n    }\r\n\r\n    Object.assign( Plane.prototype, {\r\n\r\n        set: function ( normal, constant ) {\r\n\r\n            this.normal.copy( normal );\r\n            this.constant = constant;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponents: function ( x, y, z, w ) {\r\n\r\n            this.normal.set( x, y, z );\r\n            this.constant = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n            this.normal.copy( normal );\r\n            this.constant = - point.dot( this.normal );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCoplanarPoints: function () {\r\n\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            return function setFromCoplanarPoints( a, b, c ) {\r\n\r\n                var normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n                // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n                this.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( plane ) {\r\n\r\n            this.normal.copy( plane.normal );\r\n            this.constant = plane.constant;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            // Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n            var inverseNormalLength = 1.0 / this.normal.length();\r\n            this.normal.multiplyScalar( inverseNormalLength );\r\n            this.constant *= inverseNormalLength;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.constant *= - 1;\r\n            this.normal.negate();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        distanceToPoint: function ( point ) {\r\n\r\n            return this.normal.dot( point ) + this.constant;\r\n\r\n        },\r\n\r\n        distanceToSphere: function ( sphere ) {\r\n\r\n            return this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n        },\r\n\r\n        projectPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Plane: .projectPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\r\n\r\n        },\r\n\r\n        intersectLine: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function intersectLine( line, target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Plane: .intersectLine() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                var direction = line.delta( v1 );\r\n\r\n                var denominator = this.normal.dot( direction );\r\n\r\n                if ( denominator === 0 ) {\r\n\r\n                    // line is coplanar, return origin\r\n                    if ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n                        return target.copy( line.start );\r\n\r\n                    }\r\n\r\n                    // Unsure if this is the correct method to handle this case.\r\n                    return undefined;\r\n\r\n                }\r\n\r\n                var t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n                if ( t < 0 || t > 1 ) {\r\n\r\n                    return undefined;\r\n\r\n                }\r\n\r\n                return target.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsLine: function ( line ) {\r\n\r\n            // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n            var startSign = this.distanceToPoint( line.start );\r\n            var endSign = this.distanceToPoint( line.end );\r\n\r\n            return ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            return box.intersectsPlane( this );\r\n\r\n        },\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            return sphere.intersectsPlane( this );\r\n\r\n        },\r\n\r\n        coplanarPoint: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n        },\r\n\r\n        applyMatrix4: function () {\r\n\r\n            var v1 = new Vector3();\r\n            var m1 = new Matrix3();\r\n\r\n            return function applyMatrix4( matrix, optionalNormalMatrix ) {\r\n\r\n                var normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\r\n                var referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\r\n\r\n                var normal = this.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                this.constant = - referencePoint.dot( normal );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.constant -= offset.dot( this.normal );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( plane ) {\r\n\r\n            return plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Frustum( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n        this.planes = [\r\n\r\n            ( p0 !== undefined ) ? p0 : new Plane(),\r\n            ( p1 !== undefined ) ? p1 : new Plane(),\r\n            ( p2 !== undefined ) ? p2 : new Plane(),\r\n            ( p3 !== undefined ) ? p3 : new Plane(),\r\n            ( p4 !== undefined ) ? p4 : new Plane(),\r\n            ( p5 !== undefined ) ? p5 : new Plane()\r\n\r\n        ];\r\n\r\n    }\r\n\r\n    Object.assign( Frustum.prototype, {\r\n\r\n        set: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n            var planes = this.planes;\r\n\r\n            planes[ 0 ].copy( p0 );\r\n            planes[ 1 ].copy( p1 );\r\n            planes[ 2 ].copy( p2 );\r\n            planes[ 3 ].copy( p3 );\r\n            planes[ 4 ].copy( p4 );\r\n            planes[ 5 ].copy( p5 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( frustum ) {\r\n\r\n            var planes = this.planes;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                planes[ i ].copy( frustum.planes[ i ] );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrix: function ( m ) {\r\n\r\n            var planes = this.planes;\r\n            var me = m.elements;\r\n            var me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n            var me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n            var me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n            var me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n            planes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n            planes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n            planes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n            planes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n            planes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n            planes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        intersectsObject: function () {\r\n\r\n            var sphere = new Sphere();\r\n\r\n            return function intersectsObject( object ) {\r\n\r\n                var geometry = object.geometry;\r\n\r\n                if ( geometry.boundingSphere === null )\r\n                    geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere )\r\n                    .applyMatrix4( object.matrixWorld );\r\n\r\n                return this.intersectsSphere( sphere );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsSprite: function () {\r\n\r\n            var sphere = new Sphere();\r\n\r\n            return function intersectsSprite( sprite ) {\r\n\r\n                sphere.center.set( 0, 0, 0 );\r\n                sphere.radius = 0.7071067811865476;\r\n                sphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n                return this.intersectsSphere( sphere );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            var planes = this.planes;\r\n            var center = sphere.center;\r\n            var negRadius = - sphere.radius;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                var distance = planes[ i ].distanceToPoint( center );\r\n\r\n                if ( distance < negRadius ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n        intersectsBox: function () {\r\n\r\n            var p1 = new Vector3(),\r\n                p2 = new Vector3();\r\n\r\n            return function intersectsBox( box ) {\r\n\r\n                var planes = this.planes;\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    var plane = planes[ i ];\r\n\r\n                    p1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n                    p2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n                    p1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n                    p2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n                    p1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n                    p2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n                    var d1 = plane.distanceToPoint( p1 );\r\n                    var d2 = plane.distanceToPoint( p2 );\r\n\r\n                    // if both outside plane, no intersection\r\n\r\n                    if ( d1 < 0 && d2 < 0 ) {\r\n\r\n                        return false;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return true;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            var planes = this.planes;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                if ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\r\n\r\n    var alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\";\r\n\r\n    var alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\r\n\r\n    var aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\n    var begin_vertex = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n    var beginnormal_vertex = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n    var bsdfs = \"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\r\n\r\n    var bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\";\r\n\r\n    var clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";\r\n\r\n    var clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";\r\n\r\n    var clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";\r\n\r\n    var color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\n    var color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\";\r\n\r\n    var color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\n    var color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\n    var common = \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\n\";\r\n\r\n    var cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\r\n\r\n    var defaultnormal_vertex = \"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\";\r\n\r\n    var displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\";\r\n\r\n    var displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\r\n\r\n    var emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\r\n\r\n    var emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\";\r\n\r\n    var encodings_fragment = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\r\n\r\n    var encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\r\n\r\n    var envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var envmap_pars_fragment = \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var fog_vertex = \"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\";\r\n\r\n    var fog_pars_vertex = \"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\";\r\n\r\n    var fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\r\n\r\n    var fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var gradientmap_pars_fragment = \"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\r\n\r\n    var lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\r\n\r\n    var lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\n    var lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\r\n\r\n    var lights_pars_begin = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n\";\r\n\r\n    var lights_pars_maps = \"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\";\r\n\r\n    var lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\r\n\r\n    var lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";\r\n\r\n    var lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";\r\n\r\n    var lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\r\n\r\n    var lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n#endif\\n\";\r\n\r\n    var lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#ifndef STANDARD\\n\\t\\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\";\r\n\r\n    var logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\n    var logdepthbuf_pars_fragment = \"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\";\r\n\r\n    var logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\";\r\n\r\n    var map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n    var map_particle_fragment = \"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\r\n\r\n    var map_particle_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n    var metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\";\r\n\r\n    var metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\n    var morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\r\n\r\n    var morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\r\n\r\n    var morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var normal_fragment_maps = \"#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\r\n\r\n    var normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy *= normalScale;\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\";\r\n\r\n    var packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\r\n\r\n    var premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\r\n\r\n    var project_vertex = \"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n    var dithering_fragment = \"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\";\r\n\r\n    var dithering_pars_fragment = \"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\";\r\n\r\n    var roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\";\r\n\r\n    var roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\n    var shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\r\n\r\n    var shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\";\r\n\r\n    var skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\n    var skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\";\r\n\r\n    var skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\r\n\r\n    var specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\r\n\r\n    var specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\n    var tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\r\n\r\n    var tonemapping_pars_fragment = \"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\r\n\r\n    var uv_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\";\r\n\r\n    var uv_pars_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\n\";\r\n\r\n    var uv_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\r\n\r\n    var uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n    var uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n    var uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\";\r\n\r\n    var worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\";\r\n\r\n    var cube_frag = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\";\r\n\r\n    var cube_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\\n\";\r\n\r\n    var depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\";\r\n\r\n    var depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n    var distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\";\r\n\r\n    var distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\";\r\n\r\n    var equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\";\r\n\r\n    var equirect_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";\r\n\r\n    var linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\r\n\r\n    var meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\r\n\r\n    var meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshphysical_frag = \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\r\n\r\n    var meshphysical_vert = \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\";\r\n\r\n    var normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\";\r\n\r\n    var points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var shadow_vert = \"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var ShaderChunk = {\r\n        alphamap_fragment: alphamap_fragment,\r\n        alphamap_pars_fragment: alphamap_pars_fragment,\r\n        alphatest_fragment: alphatest_fragment,\r\n        aomap_fragment: aomap_fragment,\r\n        aomap_pars_fragment: aomap_pars_fragment,\r\n        begin_vertex: begin_vertex,\r\n        beginnormal_vertex: beginnormal_vertex,\r\n        bsdfs: bsdfs,\r\n        bumpmap_pars_fragment: bumpmap_pars_fragment,\r\n        clipping_planes_fragment: clipping_planes_fragment,\r\n        clipping_planes_pars_fragment: clipping_planes_pars_fragment,\r\n        clipping_planes_pars_vertex: clipping_planes_pars_vertex,\r\n        clipping_planes_vertex: clipping_planes_vertex,\r\n        color_fragment: color_fragment,\r\n        color_pars_fragment: color_pars_fragment,\r\n        color_pars_vertex: color_pars_vertex,\r\n        color_vertex: color_vertex,\r\n        common: common,\r\n        cube_uv_reflection_fragment: cube_uv_reflection_fragment,\r\n        defaultnormal_vertex: defaultnormal_vertex,\r\n        displacementmap_pars_vertex: displacementmap_pars_vertex,\r\n        displacementmap_vertex: displacementmap_vertex,\r\n        emissivemap_fragment: emissivemap_fragment,\r\n        emissivemap_pars_fragment: emissivemap_pars_fragment,\r\n        encodings_fragment: encodings_fragment,\r\n        encodings_pars_fragment: encodings_pars_fragment,\r\n        envmap_fragment: envmap_fragment,\r\n        envmap_pars_fragment: envmap_pars_fragment,\r\n        envmap_pars_vertex: envmap_pars_vertex,\r\n        envmap_vertex: envmap_vertex,\r\n        fog_vertex: fog_vertex,\r\n        fog_pars_vertex: fog_pars_vertex,\r\n        fog_fragment: fog_fragment,\r\n        fog_pars_fragment: fog_pars_fragment,\r\n        gradientmap_pars_fragment: gradientmap_pars_fragment,\r\n        lightmap_fragment: lightmap_fragment,\r\n        lightmap_pars_fragment: lightmap_pars_fragment,\r\n        lights_lambert_vertex: lights_lambert_vertex,\r\n        lights_pars_begin: lights_pars_begin,\r\n        lights_pars_maps: lights_pars_maps,\r\n        lights_phong_fragment: lights_phong_fragment,\r\n        lights_phong_pars_fragment: lights_phong_pars_fragment,\r\n        lights_physical_fragment: lights_physical_fragment,\r\n        lights_physical_pars_fragment: lights_physical_pars_fragment,\r\n        lights_fragment_begin: lights_fragment_begin,\r\n        lights_fragment_maps: lights_fragment_maps,\r\n        lights_fragment_end: lights_fragment_end,\r\n        logdepthbuf_fragment: logdepthbuf_fragment,\r\n        logdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\r\n        logdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\r\n        logdepthbuf_vertex: logdepthbuf_vertex,\r\n        map_fragment: map_fragment,\r\n        map_pars_fragment: map_pars_fragment,\r\n        map_particle_fragment: map_particle_fragment,\r\n        map_particle_pars_fragment: map_particle_pars_fragment,\r\n        metalnessmap_fragment: metalnessmap_fragment,\r\n        metalnessmap_pars_fragment: metalnessmap_pars_fragment,\r\n        morphnormal_vertex: morphnormal_vertex,\r\n        morphtarget_pars_vertex: morphtarget_pars_vertex,\r\n        morphtarget_vertex: morphtarget_vertex,\r\n        normal_fragment_begin: normal_fragment_begin,\r\n        normal_fragment_maps: normal_fragment_maps,\r\n        normalmap_pars_fragment: normalmap_pars_fragment,\r\n        packing: packing,\r\n        premultiplied_alpha_fragment: premultiplied_alpha_fragment,\r\n        project_vertex: project_vertex,\r\n        dithering_fragment: dithering_fragment,\r\n        dithering_pars_fragment: dithering_pars_fragment,\r\n        roughnessmap_fragment: roughnessmap_fragment,\r\n        roughnessmap_pars_fragment: roughnessmap_pars_fragment,\r\n        shadowmap_pars_fragment: shadowmap_pars_fragment,\r\n        shadowmap_pars_vertex: shadowmap_pars_vertex,\r\n        shadowmap_vertex: shadowmap_vertex,\r\n        shadowmask_pars_fragment: shadowmask_pars_fragment,\r\n        skinbase_vertex: skinbase_vertex,\r\n        skinning_pars_vertex: skinning_pars_vertex,\r\n        skinning_vertex: skinning_vertex,\r\n        skinnormal_vertex: skinnormal_vertex,\r\n        specularmap_fragment: specularmap_fragment,\r\n        specularmap_pars_fragment: specularmap_pars_fragment,\r\n        tonemapping_fragment: tonemapping_fragment,\r\n        tonemapping_pars_fragment: tonemapping_pars_fragment,\r\n        uv_pars_fragment: uv_pars_fragment,\r\n        uv_pars_vertex: uv_pars_vertex,\r\n        uv_vertex: uv_vertex,\r\n        uv2_pars_fragment: uv2_pars_fragment,\r\n        uv2_pars_vertex: uv2_pars_vertex,\r\n        uv2_vertex: uv2_vertex,\r\n        worldpos_vertex: worldpos_vertex,\r\n\r\n        cube_frag: cube_frag,\r\n        cube_vert: cube_vert,\r\n        depth_frag: depth_frag,\r\n        depth_vert: depth_vert,\r\n        distanceRGBA_frag: distanceRGBA_frag,\r\n        distanceRGBA_vert: distanceRGBA_vert,\r\n        equirect_frag: equirect_frag,\r\n        equirect_vert: equirect_vert,\r\n        linedashed_frag: linedashed_frag,\r\n        linedashed_vert: linedashed_vert,\r\n        meshbasic_frag: meshbasic_frag,\r\n        meshbasic_vert: meshbasic_vert,\r\n        meshlambert_frag: meshlambert_frag,\r\n        meshlambert_vert: meshlambert_vert,\r\n        meshphong_frag: meshphong_frag,\r\n        meshphong_vert: meshphong_vert,\r\n        meshphysical_frag: meshphysical_frag,\r\n        meshphysical_vert: meshphysical_vert,\r\n        normal_frag: normal_frag,\r\n        normal_vert: normal_vert,\r\n        points_frag: points_frag,\r\n        points_vert: points_vert,\r\n        shadow_frag: shadow_frag,\r\n        shadow_vert: shadow_vert\r\n    };\r\n\r\n    /**\r\n     * Uniform Utilities\r\n     */\r\n\r\n    var UniformsUtils = {\r\n\r\n        merge: function ( uniforms ) {\r\n\r\n            var merged = {};\r\n\r\n            for ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n                var tmp = this.clone( uniforms[ u ] );\r\n\r\n                for ( var p in tmp ) {\r\n\r\n                    merged[ p ] = tmp[ p ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return merged;\r\n\r\n        },\r\n\r\n        clone: function ( uniforms_src ) {\r\n\r\n            var uniforms_dst = {};\r\n\r\n            for ( var u in uniforms_src ) {\r\n\r\n                uniforms_dst[ u ] = {};\r\n\r\n                for ( var p in uniforms_src[ u ] ) {\r\n\r\n                    var parameter_src = uniforms_src[ u ][ p ];\r\n\r\n                    if ( parameter_src && ( parameter_src.isColor ||\r\n                        parameter_src.isMatrix3 || parameter_src.isMatrix4 ||\r\n                        parameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\r\n                        parameter_src.isTexture ) ) {\r\n\r\n                        uniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n                    } else if ( Array.isArray( parameter_src ) ) {\r\n\r\n                        uniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n                    } else {\r\n\r\n                        uniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return uniforms_dst;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n        'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n        'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n        'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n        'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n        'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n        'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n        'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n        'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n        'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n        'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n        'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n        'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n        'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n        'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n        'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n        'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n        'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n        'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n        'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n        'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n        'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n        'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n        'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n    function Color( r, g, b ) {\r\n\r\n        if ( g === undefined && b === undefined ) {\r\n\r\n            // r is THREE.Color, hex or string\r\n            return this.set( r );\r\n\r\n        }\r\n\r\n        return this.setRGB( r, g, b );\r\n\r\n    }\r\n\r\n    Object.assign( Color.prototype, {\r\n\r\n        isColor: true,\r\n\r\n        r: 1, g: 1, b: 1,\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value && value.isColor ) {\r\n\r\n                this.copy( value );\r\n\r\n            } else if ( typeof value === 'number' ) {\r\n\r\n                this.setHex( value );\r\n\r\n            } else if ( typeof value === 'string' ) {\r\n\r\n                this.setStyle( value );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.r = scalar;\r\n            this.g = scalar;\r\n            this.b = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setHex: function ( hex ) {\r\n\r\n            hex = Math.floor( hex );\r\n\r\n            this.r = ( hex >> 16 & 255 ) / 255;\r\n            this.g = ( hex >> 8 & 255 ) / 255;\r\n            this.b = ( hex & 255 ) / 255;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setRGB: function ( r, g, b ) {\r\n\r\n            this.r = r;\r\n            this.g = g;\r\n            this.b = b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setHSL: function () {\r\n\r\n            function hue2rgb( p, q, t ) {\r\n\r\n                if ( t < 0 ) t += 1;\r\n                if ( t > 1 ) t -= 1;\r\n                if ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n                if ( t < 1 / 2 ) return q;\r\n                if ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n                return p;\r\n\r\n            }\r\n\r\n            return function setHSL( h, s, l ) {\r\n\r\n                // h,s,l ranges are in 0.0 - 1.0\r\n                h = _Math.euclideanModulo( h, 1 );\r\n                s = _Math.clamp( s, 0, 1 );\r\n                l = _Math.clamp( l, 0, 1 );\r\n\r\n                if ( s === 0 ) {\r\n\r\n                    this.r = this.g = this.b = l;\r\n\r\n                } else {\r\n\r\n                    var p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n                    var q = ( 2 * l ) - p;\r\n\r\n                    this.r = hue2rgb( q, p, h + 1 / 3 );\r\n                    this.g = hue2rgb( q, p, h );\r\n                    this.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setStyle: function ( style ) {\r\n\r\n            function handleAlpha( string ) {\r\n\r\n                if ( string === undefined ) return;\r\n\r\n                if ( parseFloat( string ) < 1 ) {\r\n\r\n                    console.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            var m;\r\n\r\n            if ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n                // rgb / hsl\r\n\r\n                var color;\r\n                var name = m[ 1 ];\r\n                var components = m[ 2 ];\r\n\r\n                switch ( name ) {\r\n\r\n                    case 'rgb':\r\n                    case 'rgba':\r\n\r\n                        if ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n                            // rgb(255,0,0) rgba(255,0,0,0.5)\r\n                            this.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n                            this.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n                            this.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n                            handleAlpha( color[ 5 ] );\r\n\r\n                            return this;\r\n\r\n                        }\r\n\r\n                        if ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n                            // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n                            this.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n                            this.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n                            this.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n                            handleAlpha( color[ 5 ] );\r\n\r\n                            return this;\r\n\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'hsl':\r\n                    case 'hsla':\r\n\r\n                        if ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n                            // hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n                            var h = parseFloat( color[ 1 ] ) / 360;\r\n                            var s = parseInt( color[ 2 ], 10 ) / 100;\r\n                            var l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n                            handleAlpha( color[ 5 ] );\r\n\r\n                            return this.setHSL( h, s, l );\r\n\r\n                        }\r\n\r\n                        break;\r\n\r\n                }\r\n\r\n            } else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n                // hex color\r\n\r\n                var hex = m[ 1 ];\r\n                var size = hex.length;\r\n\r\n                if ( size === 3 ) {\r\n\r\n                    // #ff0\r\n                    this.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n                    this.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n                    this.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n                    return this;\r\n\r\n                } else if ( size === 6 ) {\r\n\r\n                    // #ff0000\r\n                    this.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n                    this.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n                    this.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n                    return this;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( style && style.length > 0 ) {\r\n\r\n                // color keywords\r\n                var hex = ColorKeywords[ style ];\r\n\r\n                if ( hex !== undefined ) {\r\n\r\n                    // red\r\n                    this.setHex( hex );\r\n\r\n                } else {\r\n\r\n                    // unknown color\r\n                    console.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.r, this.g, this.b );\r\n\r\n        },\r\n\r\n        copy: function ( color ) {\r\n\r\n            this.r = color.r;\r\n            this.g = color.g;\r\n            this.b = color.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n            if ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n            this.r = Math.pow( color.r, gammaFactor );\r\n            this.g = Math.pow( color.g, gammaFactor );\r\n            this.b = Math.pow( color.b, gammaFactor );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n            if ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n            var safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n            this.r = Math.pow( color.r, safeInverse );\r\n            this.g = Math.pow( color.g, safeInverse );\r\n            this.b = Math.pow( color.b, safeInverse );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        convertGammaToLinear: function ( gammaFactor ) {\r\n\r\n            this.copyGammaToLinear( this, gammaFactor );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        convertLinearToGamma: function ( gammaFactor ) {\r\n\r\n            this.copyLinearToGamma( this, gammaFactor );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getHex: function () {\r\n\r\n            return ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n        },\r\n\r\n        getHexString: function () {\r\n\r\n            return ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n        },\r\n\r\n        getHSL: function ( target ) {\r\n\r\n            // h,s,l ranges are in 0.0 - 1.0\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Color: .getHSL() target is now required' );\r\n                target = { h: 0, s: 0, l: 0 };\r\n\r\n            }\r\n\r\n            var r = this.r, g = this.g, b = this.b;\r\n\r\n            var max = Math.max( r, g, b );\r\n            var min = Math.min( r, g, b );\r\n\r\n            var hue, saturation;\r\n            var lightness = ( min + max ) / 2.0;\r\n\r\n            if ( min === max ) {\r\n\r\n                hue = 0;\r\n                saturation = 0;\r\n\r\n            } else {\r\n\r\n                var delta = max - min;\r\n\r\n                saturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n                switch ( max ) {\r\n\r\n                    case r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n                    case g: hue = ( b - r ) / delta + 2; break;\r\n                    case b: hue = ( r - g ) / delta + 4; break;\r\n\r\n                }\r\n\r\n                hue /= 6;\r\n\r\n            }\r\n\r\n            target.h = hue;\r\n            target.s = saturation;\r\n            target.l = lightness;\r\n\r\n            return target;\r\n\r\n        },\r\n\r\n        getStyle: function () {\r\n\r\n            return 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n        },\r\n\r\n        offsetHSL: function () {\r\n\r\n            var hsl = {};\r\n\r\n            return function ( h, s, l ) {\r\n\r\n                this.getHSL( hsl );\r\n\r\n                hsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n                this.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        add: function ( color ) {\r\n\r\n            this.r += color.r;\r\n            this.g += color.g;\r\n            this.b += color.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addColors: function ( color1, color2 ) {\r\n\r\n            this.r = color1.r + color2.r;\r\n            this.g = color1.g + color2.g;\r\n            this.b = color1.b + color2.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.r += s;\r\n            this.g += s;\r\n            this.b += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( color ) {\r\n\r\n            this.r = Math.max( 0, this.r - color.r );\r\n            this.g = Math.max( 0, this.g - color.g );\r\n            this.b = Math.max( 0, this.b - color.b );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( color ) {\r\n\r\n            this.r *= color.r;\r\n            this.g *= color.g;\r\n            this.b *= color.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( s ) {\r\n\r\n            this.r *= s;\r\n            this.g *= s;\r\n            this.b *= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerp: function ( color, alpha ) {\r\n\r\n            this.r += ( color.r - this.r ) * alpha;\r\n            this.g += ( color.g - this.g ) * alpha;\r\n            this.b += ( color.b - this.b ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( c ) {\r\n\r\n            return ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.r = array[ offset ];\r\n            this.g = array[ offset + 1 ];\r\n            this.b = array[ offset + 2 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.r;\r\n            array[ offset + 1 ] = this.g;\r\n            array[ offset + 2 ] = this.b;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            return this.getHex();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * Uniforms library for shared webgl shaders\r\n     */\r\n\r\n    var UniformsLib = {\r\n\r\n        common: {\r\n\r\n            diffuse: { value: new Color( 0xeeeeee ) },\r\n            opacity: { value: 1.0 },\r\n\r\n            map: { value: null },\r\n            uvTransform: { value: new Matrix3() },\r\n\r\n            alphaMap: { value: null },\r\n\r\n        },\r\n\r\n        specularmap: {\r\n\r\n            specularMap: { value: null },\r\n\r\n        },\r\n\r\n        envmap: {\r\n\r\n            envMap: { value: null },\r\n            flipEnvMap: { value: - 1 },\r\n            reflectivity: { value: 1.0 },\r\n            refractionRatio: { value: 0.98 },\r\n            maxMipLevel: { value: 0 }\r\n\r\n        },\r\n\r\n        aomap: {\r\n\r\n            aoMap: { value: null },\r\n            aoMapIntensity: { value: 1 }\r\n\r\n        },\r\n\r\n        lightmap: {\r\n\r\n            lightMap: { value: null },\r\n            lightMapIntensity: { value: 1 }\r\n\r\n        },\r\n\r\n        emissivemap: {\r\n\r\n            emissiveMap: { value: null }\r\n\r\n        },\r\n\r\n        bumpmap: {\r\n\r\n            bumpMap: { value: null },\r\n            bumpScale: { value: 1 }\r\n\r\n        },\r\n\r\n        normalmap: {\r\n\r\n            normalMap: { value: null },\r\n            normalScale: { value: new Vector2( 1, 1 ) }\r\n\r\n        },\r\n\r\n        displacementmap: {\r\n\r\n            displacementMap: { value: null },\r\n            displacementScale: { value: 1 },\r\n            displacementBias: { value: 0 }\r\n\r\n        },\r\n\r\n        roughnessmap: {\r\n\r\n            roughnessMap: { value: null }\r\n\r\n        },\r\n\r\n        metalnessmap: {\r\n\r\n            metalnessMap: { value: null }\r\n\r\n        },\r\n\r\n        gradientmap: {\r\n\r\n            gradientMap: { value: null }\r\n\r\n        },\r\n\r\n        fog: {\r\n\r\n            fogDensity: { value: 0.00025 },\r\n            fogNear: { value: 1 },\r\n            fogFar: { value: 2000 },\r\n            fogColor: { value: new Color( 0xffffff ) }\r\n\r\n        },\r\n\r\n        lights: {\r\n\r\n            ambientLightColor: { value: [] },\r\n\r\n            directionalLights: { value: [], properties: {\r\n                    direction: {},\r\n                    color: {},\r\n\r\n                    shadow: {},\r\n                    shadowBias: {},\r\n                    shadowRadius: {},\r\n                    shadowMapSize: {}\r\n                } },\r\n\r\n            directionalShadowMap: { value: [] },\r\n            directionalShadowMatrix: { value: [] },\r\n\r\n            spotLights: { value: [], properties: {\r\n                    color: {},\r\n                    position: {},\r\n                    direction: {},\r\n                    distance: {},\r\n                    coneCos: {},\r\n                    penumbraCos: {},\r\n                    decay: {},\r\n\r\n                    shadow: {},\r\n                    shadowBias: {},\r\n                    shadowRadius: {},\r\n                    shadowMapSize: {}\r\n                } },\r\n\r\n            spotShadowMap: { value: [] },\r\n            spotShadowMatrix: { value: [] },\r\n\r\n            pointLights: { value: [], properties: {\r\n                    color: {},\r\n                    position: {},\r\n                    decay: {},\r\n                    distance: {},\r\n\r\n                    shadow: {},\r\n                    shadowBias: {},\r\n                    shadowRadius: {},\r\n                    shadowMapSize: {},\r\n                    shadowCameraNear: {},\r\n                    shadowCameraFar: {}\r\n                } },\r\n\r\n            pointShadowMap: { value: [] },\r\n            pointShadowMatrix: { value: [] },\r\n\r\n            hemisphereLights: { value: [], properties: {\r\n                    direction: {},\r\n                    skyColor: {},\r\n                    groundColor: {}\r\n                } },\r\n\r\n            // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\r\n            rectAreaLights: { value: [], properties: {\r\n                    color: {},\r\n                    position: {},\r\n                    width: {},\r\n                    height: {}\r\n                } }\r\n\r\n        },\r\n\r\n        points: {\r\n\r\n            diffuse: { value: new Color( 0xeeeeee ) },\r\n            opacity: { value: 1.0 },\r\n            size: { value: 1.0 },\r\n            scale: { value: 1.0 },\r\n            map: { value: null },\r\n            uvTransform: { value: new Matrix3() }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     */\r\n\r\n    var ShaderLib = {\r\n\r\n        basic: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.specularmap,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.fog\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshbasic_vert,\r\n            fragmentShader: ShaderChunk.meshbasic_frag\r\n\r\n        },\r\n\r\n        lambert: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.specularmap,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.emissivemap,\r\n                UniformsLib.fog,\r\n                UniformsLib.lights,\r\n                {\r\n                    emissive: { value: new Color( 0x000000 ) }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshlambert_vert,\r\n            fragmentShader: ShaderChunk.meshlambert_frag\r\n\r\n        },\r\n\r\n        phong: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.specularmap,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.emissivemap,\r\n                UniformsLib.bumpmap,\r\n                UniformsLib.normalmap,\r\n                UniformsLib.displacementmap,\r\n                UniformsLib.gradientmap,\r\n                UniformsLib.fog,\r\n                UniformsLib.lights,\r\n                {\r\n                    emissive: { value: new Color( 0x000000 ) },\r\n                    specular: { value: new Color( 0x111111 ) },\r\n                    shininess: { value: 30 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshphong_vert,\r\n            fragmentShader: ShaderChunk.meshphong_frag\r\n\r\n        },\r\n\r\n        standard: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.emissivemap,\r\n                UniformsLib.bumpmap,\r\n                UniformsLib.normalmap,\r\n                UniformsLib.displacementmap,\r\n                UniformsLib.roughnessmap,\r\n                UniformsLib.metalnessmap,\r\n                UniformsLib.fog,\r\n                UniformsLib.lights,\r\n                {\r\n                    emissive: { value: new Color( 0x000000 ) },\r\n                    roughness: { value: 0.5 },\r\n                    metalness: { value: 0.5 },\r\n                    envMapIntensity: { value: 1 } // temporary\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshphysical_vert,\r\n            fragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n        },\r\n\r\n        points: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.points,\r\n                UniformsLib.fog\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.points_vert,\r\n            fragmentShader: ShaderChunk.points_frag\r\n\r\n        },\r\n\r\n        dashed: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.fog,\r\n                {\r\n                    scale: { value: 1 },\r\n                    dashSize: { value: 1 },\r\n                    totalSize: { value: 2 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.linedashed_vert,\r\n            fragmentShader: ShaderChunk.linedashed_frag\r\n\r\n        },\r\n\r\n        depth: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.displacementmap\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.depth_vert,\r\n            fragmentShader: ShaderChunk.depth_frag\r\n\r\n        },\r\n\r\n        normal: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.bumpmap,\r\n                UniformsLib.normalmap,\r\n                UniformsLib.displacementmap,\r\n                {\r\n                    opacity: { value: 1.0 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.normal_vert,\r\n            fragmentShader: ShaderChunk.normal_frag\r\n\r\n        },\r\n\r\n        /* -------------------------------------------------------------------------\r\n\t\t//\tCube map shader\r\n\t\t ------------------------------------------------------------------------- */\r\n\r\n        cube: {\r\n\r\n            uniforms: {\r\n                tCube: { value: null },\r\n                tFlip: { value: - 1 },\r\n                opacity: { value: 1.0 }\r\n            },\r\n\r\n            vertexShader: ShaderChunk.cube_vert,\r\n            fragmentShader: ShaderChunk.cube_frag\r\n\r\n        },\r\n\r\n        equirect: {\r\n\r\n            uniforms: {\r\n                tEquirect: { value: null },\r\n            },\r\n\r\n            vertexShader: ShaderChunk.equirect_vert,\r\n            fragmentShader: ShaderChunk.equirect_frag\r\n\r\n        },\r\n\r\n        distanceRGBA: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.displacementmap,\r\n                {\r\n                    referencePosition: { value: new Vector3() },\r\n                    nearDistance: { value: 1 },\r\n                    farDistance: { value: 1000 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.distanceRGBA_vert,\r\n            fragmentShader: ShaderChunk.distanceRGBA_frag\r\n\r\n        },\r\n\r\n        shadow: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.lights,\r\n                UniformsLib.fog,\r\n                {\r\n                    color: { value: new Color( 0x00000 ) },\r\n                    opacity: { value: 1.0 }\r\n                },\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.shadow_vert,\r\n            fragmentShader: ShaderChunk.shadow_frag\r\n\r\n        }\r\n\r\n    };\r\n\r\n    ShaderLib.physical = {\r\n\r\n        uniforms: UniformsUtils.merge( [\r\n            ShaderLib.standard.uniforms,\r\n            {\r\n                clearCoat: { value: 0 },\r\n                clearCoatRoughness: { value: 0 }\r\n            }\r\n        ] ),\r\n\r\n        vertexShader: ShaderChunk.meshphysical_vert,\r\n        fragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLAnimation() {\r\n\r\n        var context = null;\r\n        var isAnimating = false;\r\n        var animationLoop = null;\r\n\r\n        function onAnimationFrame( time, frame ) {\r\n\r\n            if ( isAnimating === false ) return;\r\n\r\n            animationLoop( time, frame );\r\n\r\n            context.requestAnimationFrame( onAnimationFrame );\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            start: function () {\r\n\r\n                if ( isAnimating === true ) return;\r\n                if ( animationLoop === null ) return;\r\n\r\n                context.requestAnimationFrame( onAnimationFrame );\r\n\r\n                isAnimating = true;\r\n\r\n            },\r\n\r\n            stop: function () {\r\n\r\n                isAnimating = false;\r\n\r\n            },\r\n\r\n            setAnimationLoop: function ( callback ) {\r\n\r\n                animationLoop = callback;\r\n\r\n            },\r\n\r\n            setContext: function ( value ) {\r\n\r\n                context = value;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLAttributes( gl ) {\r\n\r\n        var buffers = new WeakMap();\r\n\r\n        function createBuffer( attribute, bufferType ) {\r\n\r\n            var array = attribute.array;\r\n            var usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n            var buffer = gl.createBuffer();\r\n\r\n            gl.bindBuffer( bufferType, buffer );\r\n            gl.bufferData( bufferType, array, usage );\r\n\r\n            attribute.onUploadCallback();\r\n\r\n            var type = gl.FLOAT;\r\n\r\n            if ( array instanceof Float32Array ) {\r\n\r\n                type = gl.FLOAT;\r\n\r\n            } else if ( array instanceof Float64Array ) {\r\n\r\n                console.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\r\n\r\n            } else if ( array instanceof Uint16Array ) {\r\n\r\n                type = gl.UNSIGNED_SHORT;\r\n\r\n            } else if ( array instanceof Int16Array ) {\r\n\r\n                type = gl.SHORT;\r\n\r\n            } else if ( array instanceof Uint32Array ) {\r\n\r\n                type = gl.UNSIGNED_INT;\r\n\r\n            } else if ( array instanceof Int32Array ) {\r\n\r\n                type = gl.INT;\r\n\r\n            } else if ( array instanceof Int8Array ) {\r\n\r\n                type = gl.BYTE;\r\n\r\n            } else if ( array instanceof Uint8Array ) {\r\n\r\n                type = gl.UNSIGNED_BYTE;\r\n\r\n            }\r\n\r\n            return {\r\n                buffer: buffer,\r\n                type: type,\r\n                bytesPerElement: array.BYTES_PER_ELEMENT,\r\n                version: attribute.version\r\n            };\r\n\r\n        }\r\n\r\n        function updateBuffer( buffer, attribute, bufferType ) {\r\n\r\n            var array = attribute.array;\r\n            var updateRange = attribute.updateRange;\r\n\r\n            gl.bindBuffer( bufferType, buffer );\r\n\r\n            if ( attribute.dynamic === false ) {\r\n\r\n                gl.bufferData( bufferType, array, gl.STATIC_DRAW );\r\n\r\n            } else if ( updateRange.count === - 1 ) {\r\n\r\n                // Not using update ranges\r\n\r\n                gl.bufferSubData( bufferType, 0, array );\r\n\r\n            } else if ( updateRange.count === 0 ) {\r\n\r\n                console.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n            } else {\r\n\r\n                gl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n                    array.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\r\n\r\n                updateRange.count = - 1; // reset range\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function get( attribute ) {\r\n\r\n            if ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n            return buffers.get( attribute );\r\n\r\n        }\r\n\r\n        function remove( attribute ) {\r\n\r\n            if ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n            var data = buffers.get( attribute );\r\n\r\n            if ( data ) {\r\n\r\n                gl.deleteBuffer( data.buffer );\r\n\r\n                buffers.delete( attribute );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function update( attribute, bufferType ) {\r\n\r\n            if ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n            var data = buffers.get( attribute );\r\n\r\n            if ( data === undefined ) {\r\n\r\n                buffers.set( attribute, createBuffer( attribute, bufferType ) );\r\n\r\n            } else if ( data.version < attribute.version ) {\r\n\r\n                updateBuffer( data.buffer, attribute, bufferType );\r\n\r\n                data.version = attribute.version;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            get: get,\r\n            remove: remove,\r\n            update: update\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Euler( x, y, z, order ) {\r\n\r\n        this._x = x || 0;\r\n        this._y = y || 0;\r\n        this._z = z || 0;\r\n        this._order = order || Euler.DefaultOrder;\r\n\r\n    }\r\n\r\n    Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\n    Euler.DefaultOrder = 'XYZ';\r\n\r\n    Object.defineProperties( Euler.prototype, {\r\n\r\n        x: {\r\n\r\n            get: function () {\r\n\r\n                return this._x;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._x = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        y: {\r\n\r\n            get: function () {\r\n\r\n                return this._y;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._y = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        z: {\r\n\r\n            get: function () {\r\n\r\n                return this._z;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._z = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        order: {\r\n\r\n            get: function () {\r\n\r\n                return this._order;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._order = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Euler.prototype, {\r\n\r\n        isEuler: true,\r\n\r\n        set: function ( x, y, z, order ) {\r\n\r\n            this._x = x;\r\n            this._y = y;\r\n            this._z = z;\r\n            this._order = order || this._order;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n        },\r\n\r\n        copy: function ( euler ) {\r\n\r\n            this._x = euler._x;\r\n            this._y = euler._y;\r\n            this._z = euler._z;\r\n            this._order = euler._order;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromRotationMatrix: function ( m, order, update ) {\r\n\r\n            var clamp = _Math.clamp;\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            var te = m.elements;\r\n            var m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n            var m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n            var m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n            order = order || this._order;\r\n\r\n            if ( order === 'XYZ' ) {\r\n\r\n                this._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( - m23, m33 );\r\n                    this._z = Math.atan2( - m12, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = Math.atan2( m32, m22 );\r\n                    this._z = 0;\r\n\r\n                }\r\n\r\n            } else if ( order === 'YXZ' ) {\r\n\r\n                this._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n                    this._y = Math.atan2( m13, m33 );\r\n                    this._z = Math.atan2( m21, m22 );\r\n\r\n                } else {\r\n\r\n                    this._y = Math.atan2( - m31, m11 );\r\n                    this._z = 0;\r\n\r\n                }\r\n\r\n            } else if ( order === 'ZXY' ) {\r\n\r\n                this._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n                    this._y = Math.atan2( - m31, m33 );\r\n                    this._z = Math.atan2( - m12, m22 );\r\n\r\n                } else {\r\n\r\n                    this._y = 0;\r\n                    this._z = Math.atan2( m21, m11 );\r\n\r\n                }\r\n\r\n            } else if ( order === 'ZYX' ) {\r\n\r\n                this._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( m32, m33 );\r\n                    this._z = Math.atan2( m21, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = 0;\r\n                    this._z = Math.atan2( - m12, m22 );\r\n\r\n                }\r\n\r\n            } else if ( order === 'YZX' ) {\r\n\r\n                this._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( - m23, m22 );\r\n                    this._y = Math.atan2( - m31, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = 0;\r\n                    this._y = Math.atan2( m13, m33 );\r\n\r\n                }\r\n\r\n            } else if ( order === 'XZY' ) {\r\n\r\n                this._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( m32, m22 );\r\n                    this._y = Math.atan2( m13, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = Math.atan2( - m23, m33 );\r\n                    this._y = 0;\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                console.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n            }\r\n\r\n            this._order = order;\r\n\r\n            if ( update !== false ) this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromQuaternion: function () {\r\n\r\n            var matrix = new Matrix4();\r\n\r\n            return function setFromQuaternion( q, order, update ) {\r\n\r\n                matrix.makeRotationFromQuaternion( q );\r\n\r\n                return this.setFromRotationMatrix( matrix, order, update );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setFromVector3: function ( v, order ) {\r\n\r\n            return this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n        },\r\n\r\n        reorder: function () {\r\n\r\n            // WARNING: this discards revolution information -bhouston\r\n\r\n            var q = new Quaternion();\r\n\r\n            return function reorder( newOrder ) {\r\n\r\n                q.setFromEuler( this );\r\n\r\n                return this.setFromQuaternion( q, newOrder );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        equals: function ( euler ) {\r\n\r\n            return ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n        },\r\n\r\n        fromArray: function ( array ) {\r\n\r\n            this._x = array[ 0 ];\r\n            this._y = array[ 1 ];\r\n            this._z = array[ 2 ];\r\n            if ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this._x;\r\n            array[ offset + 1 ] = this._y;\r\n            array[ offset + 2 ] = this._z;\r\n            array[ offset + 3 ] = this._order;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        toVector3: function ( optionalResult ) {\r\n\r\n            if ( optionalResult ) {\r\n\r\n                return optionalResult.set( this._x, this._y, this._z );\r\n\r\n            } else {\r\n\r\n                return new Vector3( this._x, this._y, this._z );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        onChange: function ( callback ) {\r\n\r\n            this.onChangeCallback = callback;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        onChangeCallback: function () {}\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Layers() {\r\n\r\n        this.mask = 1 | 0;\r\n\r\n    }\r\n\r\n    Object.assign( Layers.prototype, {\r\n\r\n        set: function ( channel ) {\r\n\r\n            this.mask = 1 << channel | 0;\r\n\r\n        },\r\n\r\n        enable: function ( channel ) {\r\n\r\n            this.mask |= 1 << channel | 0;\r\n\r\n        },\r\n\r\n        toggle: function ( channel ) {\r\n\r\n            this.mask ^= 1 << channel | 0;\r\n\r\n        },\r\n\r\n        disable: function ( channel ) {\r\n\r\n            this.mask &= ~ ( 1 << channel | 0 );\r\n\r\n        },\r\n\r\n        test: function ( layers ) {\r\n\r\n            return ( this.mask & layers.mask ) !== 0;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author elephantatwork / www.elephantatwork.ch\r\n     */\r\n\r\n    var object3DId = 0;\r\n\r\n    function Object3D() {\r\n\r\n        Object.defineProperty( this, 'id', { value: object3DId ++ } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'Object3D';\r\n\r\n        this.parent = null;\r\n        this.children = [];\r\n\r\n        this.up = Object3D.DefaultUp.clone();\r\n\r\n        var position = new Vector3();\r\n        var rotation = new Euler();\r\n        var quaternion = new Quaternion();\r\n        var scale = new Vector3( 1, 1, 1 );\r\n\r\n        function onRotationChange() {\r\n\r\n            quaternion.setFromEuler( rotation, false );\r\n\r\n        }\r\n\r\n        function onQuaternionChange() {\r\n\r\n            rotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n        }\r\n\r\n        rotation.onChange( onRotationChange );\r\n        quaternion.onChange( onQuaternionChange );\r\n\r\n        Object.defineProperties( this, {\r\n            position: {\r\n                enumerable: true,\r\n                value: position\r\n            },\r\n            rotation: {\r\n                enumerable: true,\r\n                value: rotation\r\n            },\r\n            quaternion: {\r\n                enumerable: true,\r\n                value: quaternion\r\n            },\r\n            scale: {\r\n                enumerable: true,\r\n                value: scale\r\n            },\r\n            modelViewMatrix: {\r\n                value: new Matrix4()\r\n            },\r\n            normalMatrix: {\r\n                value: new Matrix3()\r\n            }\r\n        } );\r\n\r\n        this.matrix = new Matrix4();\r\n        this.matrixWorld = new Matrix4();\r\n\r\n        this.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\r\n        this.matrixWorldNeedsUpdate = false;\r\n\r\n        this.layers = new Layers();\r\n        this.visible = true;\r\n\r\n        this.castShadow = false;\r\n        this.receiveShadow = false;\r\n\r\n        this.frustumCulled = true;\r\n        this.renderOrder = 0;\r\n\r\n        this.userData = {};\r\n\r\n    }\r\n\r\n    Object3D.DefaultUp = new Vector3( 0, 1, 0 );\r\n    Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\n    Object3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Object3D,\r\n\r\n        isObject3D: true,\r\n\r\n        onBeforeRender: function () {},\r\n        onAfterRender: function () {},\r\n\r\n        applyMatrix: function ( matrix ) {\r\n\r\n            this.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n            this.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n        },\r\n\r\n        applyQuaternion: function ( q ) {\r\n\r\n            this.quaternion.premultiply( q );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n            // assumes axis is normalized\r\n\r\n            this.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n        },\r\n\r\n        setRotationFromEuler: function ( euler ) {\r\n\r\n            this.quaternion.setFromEuler( euler, true );\r\n\r\n        },\r\n\r\n        setRotationFromMatrix: function ( m ) {\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            this.quaternion.setFromRotationMatrix( m );\r\n\r\n        },\r\n\r\n        setRotationFromQuaternion: function ( q ) {\r\n\r\n            // assumes q is normalized\r\n\r\n            this.quaternion.copy( q );\r\n\r\n        },\r\n\r\n        rotateOnAxis: function () {\r\n\r\n            // rotate object on axis in object space\r\n            // axis is assumed to be normalized\r\n\r\n            var q1 = new Quaternion();\r\n\r\n            return function rotateOnAxis( axis, angle ) {\r\n\r\n                q1.setFromAxisAngle( axis, angle );\r\n\r\n                this.quaternion.multiply( q1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateOnWorldAxis: function () {\r\n\r\n            // rotate object on axis in world space\r\n            // axis is assumed to be normalized\r\n            // method assumes no rotated parent\r\n\r\n            var q1 = new Quaternion();\r\n\r\n            return function rotateOnWorldAxis( axis, angle ) {\r\n\r\n                q1.setFromAxisAngle( axis, angle );\r\n\r\n                this.quaternion.premultiply( q1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateX: function () {\r\n\r\n            var v1 = new Vector3( 1, 0, 0 );\r\n\r\n            return function rotateX( angle ) {\r\n\r\n                return this.rotateOnAxis( v1, angle );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateY: function () {\r\n\r\n            var v1 = new Vector3( 0, 1, 0 );\r\n\r\n            return function rotateY( angle ) {\r\n\r\n                return this.rotateOnAxis( v1, angle );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateZ: function () {\r\n\r\n            var v1 = new Vector3( 0, 0, 1 );\r\n\r\n            return function rotateZ( angle ) {\r\n\r\n                return this.rotateOnAxis( v1, angle );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateOnAxis: function () {\r\n\r\n            // translate object by distance along axis in object space\r\n            // axis is assumed to be normalized\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function translateOnAxis( axis, distance ) {\r\n\r\n                v1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n                this.position.add( v1.multiplyScalar( distance ) );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateX: function () {\r\n\r\n            var v1 = new Vector3( 1, 0, 0 );\r\n\r\n            return function translateX( distance ) {\r\n\r\n                return this.translateOnAxis( v1, distance );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateY: function () {\r\n\r\n            var v1 = new Vector3( 0, 1, 0 );\r\n\r\n            return function translateY( distance ) {\r\n\r\n                return this.translateOnAxis( v1, distance );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateZ: function () {\r\n\r\n            var v1 = new Vector3( 0, 0, 1 );\r\n\r\n            return function translateZ( distance ) {\r\n\r\n                return this.translateOnAxis( v1, distance );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        localToWorld: function ( vector ) {\r\n\r\n            return vector.applyMatrix4( this.matrixWorld );\r\n\r\n        },\r\n\r\n        worldToLocal: function () {\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function worldToLocal( vector ) {\r\n\r\n                return vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            // This method does not support objects with rotated and/or translated parent(s)\r\n\r\n            var m1 = new Matrix4();\r\n            var vector = new Vector3();\r\n\r\n            return function lookAt( x, y, z ) {\r\n\r\n                if ( x.isVector3 ) {\r\n\r\n                    vector.copy( x );\r\n\r\n                } else {\r\n\r\n                    vector.set( x, y, z );\r\n\r\n                }\r\n\r\n                if ( this.isCamera ) {\r\n\r\n                    m1.lookAt( this.position, vector, this.up );\r\n\r\n                } else {\r\n\r\n                    m1.lookAt( vector, this.position, this.up );\r\n\r\n                }\r\n\r\n                this.quaternion.setFromRotationMatrix( m1 );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        add: function ( object ) {\r\n\r\n            if ( arguments.length > 1 ) {\r\n\r\n                for ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n                    this.add( arguments[ i ] );\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            if ( object === this ) {\r\n\r\n                console.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n                return this;\r\n\r\n            }\r\n\r\n            if ( ( object && object.isObject3D ) ) {\r\n\r\n                if ( object.parent !== null ) {\r\n\r\n                    object.parent.remove( object );\r\n\r\n                }\r\n\r\n                object.parent = this;\r\n                object.dispatchEvent( { type: 'added' } );\r\n\r\n                this.children.push( object );\r\n\r\n            } else {\r\n\r\n                console.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        remove: function ( object ) {\r\n\r\n            if ( arguments.length > 1 ) {\r\n\r\n                for ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n                    this.remove( arguments[ i ] );\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            var index = this.children.indexOf( object );\r\n\r\n            if ( index !== - 1 ) {\r\n\r\n                object.parent = null;\r\n\r\n                object.dispatchEvent( { type: 'removed' } );\r\n\r\n                this.children.splice( index, 1 );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getObjectById: function ( id ) {\r\n\r\n            return this.getObjectByProperty( 'id', id );\r\n\r\n        },\r\n\r\n        getObjectByName: function ( name ) {\r\n\r\n            return this.getObjectByProperty( 'name', name );\r\n\r\n        },\r\n\r\n        getObjectByProperty: function ( name, value ) {\r\n\r\n            if ( this[ name ] === value ) return this;\r\n\r\n            for ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n                var child = this.children[ i ];\r\n                var object = child.getObjectByProperty( name, value );\r\n\r\n                if ( object !== undefined ) {\r\n\r\n                    return object;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return undefined;\r\n\r\n        },\r\n\r\n        getWorldPosition: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            this.updateMatrixWorld( true );\r\n\r\n            return target.setFromMatrixPosition( this.matrixWorld );\r\n\r\n        },\r\n\r\n        getWorldQuaternion: function () {\r\n\r\n            var position = new Vector3();\r\n            var scale = new Vector3();\r\n\r\n            return function getWorldQuaternion( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\r\n                    target = new Quaternion();\r\n\r\n                }\r\n\r\n                this.updateMatrixWorld( true );\r\n\r\n                this.matrixWorld.decompose( position, target, scale );\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getWorldScale: function () {\r\n\r\n            var position = new Vector3();\r\n            var quaternion = new Quaternion();\r\n\r\n            return function getWorldScale( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                this.updateMatrixWorld( true );\r\n\r\n                this.matrixWorld.decompose( position, quaternion, target );\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getWorldDirection: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function getWorldDirection( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                this.getWorldQuaternion( quaternion );\r\n\r\n                return target.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        raycast: function () {},\r\n\r\n        traverse: function ( callback ) {\r\n\r\n            callback( this );\r\n\r\n            var children = this.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                children[ i ].traverse( callback );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        traverseVisible: function ( callback ) {\r\n\r\n            if ( this.visible === false ) return;\r\n\r\n            callback( this );\r\n\r\n            var children = this.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                children[ i ].traverseVisible( callback );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        traverseAncestors: function ( callback ) {\r\n\r\n            var parent = this.parent;\r\n\r\n            if ( parent !== null ) {\r\n\r\n                callback( parent );\r\n\r\n                parent.traverseAncestors( callback );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        updateMatrix: function () {\r\n\r\n            this.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n            this.matrixWorldNeedsUpdate = true;\r\n\r\n        },\r\n\r\n        updateMatrixWorld: function ( force ) {\r\n\r\n            if ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n            if ( this.matrixWorldNeedsUpdate || force ) {\r\n\r\n                if ( this.parent === null ) {\r\n\r\n                    this.matrixWorld.copy( this.matrix );\r\n\r\n                } else {\r\n\r\n                    this.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n                }\r\n\r\n                this.matrixWorldNeedsUpdate = false;\r\n\r\n                force = true;\r\n\r\n            }\r\n\r\n            // update children\r\n\r\n            var children = this.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                children[ i ].updateMatrixWorld( force );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            // meta is a string when called from JSON.stringify\r\n            var isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n            var output = {};\r\n\r\n            // meta is a hash used to collect geometries, materials.\r\n            // not providing it implies that this is the root object\r\n            // being serialized.\r\n            if ( isRootObject ) {\r\n\r\n                // initialize meta obj\r\n                meta = {\r\n                    geometries: {},\r\n                    materials: {},\r\n                    textures: {},\r\n                    images: {},\r\n                    shapes: {}\r\n                };\r\n\r\n                output.metadata = {\r\n                    version: 4.5,\r\n                    type: 'Object',\r\n                    generator: 'Object3D.toJSON'\r\n                };\r\n\r\n            }\r\n\r\n            // standard Object3D serialization\r\n\r\n            var object = {};\r\n\r\n            object.uuid = this.uuid;\r\n            object.type = this.type;\r\n\r\n            if ( this.name !== '' ) object.name = this.name;\r\n            if ( this.castShadow === true ) object.castShadow = true;\r\n            if ( this.receiveShadow === true ) object.receiveShadow = true;\r\n            if ( this.visible === false ) object.visible = false;\r\n            if ( this.frustumCulled === false ) object.frustumCulled = false;\r\n            if ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\r\n            if ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\r\n            object.matrix = this.matrix.toArray();\r\n\r\n            if ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\r\n\r\n            //\r\n\r\n            function serialize( library, element ) {\r\n\r\n                if ( library[ element.uuid ] === undefined ) {\r\n\r\n                    library[ element.uuid ] = element.toJSON( meta );\r\n\r\n                }\r\n\r\n                return element.uuid;\r\n\r\n            }\r\n\r\n            if ( this.geometry !== undefined ) {\r\n\r\n                object.geometry = serialize( meta.geometries, this.geometry );\r\n\r\n                var parameters = this.geometry.parameters;\r\n\r\n                if ( parameters !== undefined && parameters.shapes !== undefined ) {\r\n\r\n                    var shapes = parameters.shapes;\r\n\r\n                    if ( Array.isArray( shapes ) ) {\r\n\r\n                        for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n                            var shape = shapes[ i ];\r\n\r\n                            serialize( meta.shapes, shape );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        serialize( meta.shapes, shapes );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.material !== undefined ) {\r\n\r\n                if ( Array.isArray( this.material ) ) {\r\n\r\n                    var uuids = [];\r\n\r\n                    for ( var i = 0, l = this.material.length; i < l; i ++ ) {\r\n\r\n                        uuids.push( serialize( meta.materials, this.material[ i ] ) );\r\n\r\n                    }\r\n\r\n                    object.material = uuids;\r\n\r\n                } else {\r\n\r\n                    object.material = serialize( meta.materials, this.material );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //\r\n\r\n            if ( this.children.length > 0 ) {\r\n\r\n                object.children = [];\r\n\r\n                for ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n                    object.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( isRootObject ) {\r\n\r\n                var geometries = extractFromCache( meta.geometries );\r\n                var materials = extractFromCache( meta.materials );\r\n                var textures = extractFromCache( meta.textures );\r\n                var images = extractFromCache( meta.images );\r\n                var shapes = extractFromCache( meta.shapes );\r\n\r\n                if ( geometries.length > 0 ) output.geometries = geometries;\r\n                if ( materials.length > 0 ) output.materials = materials;\r\n                if ( textures.length > 0 ) output.textures = textures;\r\n                if ( images.length > 0 ) output.images = images;\r\n                if ( shapes.length > 0 ) output.shapes = shapes;\r\n\r\n            }\r\n\r\n            output.object = object;\r\n\r\n            return output;\r\n\r\n            // extract data from the cache hash\r\n            // remove metadata on each item\r\n            // and return as array\r\n            function extractFromCache( cache ) {\r\n\r\n                var values = [];\r\n                for ( var key in cache ) {\r\n\r\n                    var data = cache[ key ];\r\n                    delete data.metadata;\r\n                    values.push( data );\r\n\r\n                }\r\n                return values;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function ( recursive ) {\r\n\r\n            return new this.constructor().copy( this, recursive );\r\n\r\n        },\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            if ( recursive === undefined ) recursive = true;\r\n\r\n            this.name = source.name;\r\n\r\n            this.up.copy( source.up );\r\n\r\n            this.position.copy( source.position );\r\n            this.quaternion.copy( source.quaternion );\r\n            this.scale.copy( source.scale );\r\n\r\n            this.matrix.copy( source.matrix );\r\n            this.matrixWorld.copy( source.matrixWorld );\r\n\r\n            this.matrixAutoUpdate = source.matrixAutoUpdate;\r\n            this.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n            this.layers.mask = source.layers.mask;\r\n            this.visible = source.visible;\r\n\r\n            this.castShadow = source.castShadow;\r\n            this.receiveShadow = source.receiveShadow;\r\n\r\n            this.frustumCulled = source.frustumCulled;\r\n            this.renderOrder = source.renderOrder;\r\n\r\n            this.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n            if ( recursive === true ) {\r\n\r\n                for ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n                    var child = source.children[ i ];\r\n                    this.add( child.clone() );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Camera() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Camera';\r\n\r\n        this.matrixWorldInverse = new Matrix4();\r\n        this.projectionMatrix = new Matrix4();\r\n\r\n    }\r\n\r\n    Camera.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Camera,\r\n\r\n        isCamera: true,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Object3D.prototype.copy.call( this, source, recursive );\r\n\r\n            this.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n            this.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getWorldDirection: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function getWorldDirection( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                this.getWorldQuaternion( quaternion );\r\n\r\n                return target.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        updateMatrixWorld: function ( force ) {\r\n\r\n            Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n            this.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author arose / http://github.com/arose\r\n     */\r\n\r\n    function OrthographicCamera( left, right, top, bottom, near, far ) {\r\n\r\n        Camera.call( this );\r\n\r\n        this.type = 'OrthographicCamera';\r\n\r\n        this.zoom = 1;\r\n        this.view = null;\r\n\r\n        this.left = left;\r\n        this.right = right;\r\n        this.top = top;\r\n        this.bottom = bottom;\r\n\r\n        this.near = ( near !== undefined ) ? near : 0.1;\r\n        this.far = ( far !== undefined ) ? far : 2000;\r\n\r\n        this.updateProjectionMatrix();\r\n\r\n    }\r\n\r\n    OrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n        constructor: OrthographicCamera,\r\n\r\n        isOrthographicCamera: true,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Camera.prototype.copy.call( this, source, recursive );\r\n\r\n            this.left = source.left;\r\n            this.right = source.right;\r\n            this.top = source.top;\r\n            this.bottom = source.bottom;\r\n            this.near = source.near;\r\n            this.far = source.far;\r\n\r\n            this.zoom = source.zoom;\r\n            this.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n            if ( this.view === null ) {\r\n\r\n                this.view = {\r\n                    enabled: true,\r\n                    fullWidth: 1,\r\n                    fullHeight: 1,\r\n                    offsetX: 0,\r\n                    offsetY: 0,\r\n                    width: 1,\r\n                    height: 1\r\n                };\r\n\r\n            }\r\n\r\n            this.view.enabled = true;\r\n            this.view.fullWidth = fullWidth;\r\n            this.view.fullHeight = fullHeight;\r\n            this.view.offsetX = x;\r\n            this.view.offsetY = y;\r\n            this.view.width = width;\r\n            this.view.height = height;\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        clearViewOffset: function () {\r\n\r\n            if ( this.view !== null ) {\r\n\r\n                this.view.enabled = false;\r\n\r\n            }\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        updateProjectionMatrix: function () {\r\n\r\n            var dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n            var dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n            var cx = ( this.right + this.left ) / 2;\r\n            var cy = ( this.top + this.bottom ) / 2;\r\n\r\n            var left = cx - dx;\r\n            var right = cx + dx;\r\n            var top = cy + dy;\r\n            var bottom = cy - dy;\r\n\r\n            if ( this.view !== null && this.view.enabled ) {\r\n\r\n                var zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\r\n                var zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\r\n                var scaleW = ( this.right - this.left ) / this.view.width;\r\n                var scaleH = ( this.top - this.bottom ) / this.view.height;\r\n\r\n                left += scaleW * ( this.view.offsetX / zoomW );\r\n                right = left + scaleW * ( this.view.width / zoomW );\r\n                top -= scaleH * ( this.view.offsetY / zoomH );\r\n                bottom = top - scaleH * ( this.view.height / zoomH );\r\n\r\n            }\r\n\r\n            this.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.zoom = this.zoom;\r\n            data.object.left = this.left;\r\n            data.object.right = this.right;\r\n            data.object.top = this.top;\r\n            data.object.bottom = this.bottom;\r\n            data.object.near = this.near;\r\n            data.object.far = this.far;\r\n\r\n            if ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Face3( a, b, c, normal, color, materialIndex ) {\r\n\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n\r\n        this.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\r\n        this.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n        this.color = ( color && color.isColor ) ? color : new Color();\r\n        this.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n        this.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n    }\r\n\r\n    Object.assign( Face3.prototype, {\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.a = source.a;\r\n            this.b = source.b;\r\n            this.c = source.c;\r\n\r\n            this.normal.copy( source.normal );\r\n            this.color.copy( source.color );\r\n\r\n            this.materialIndex = source.materialIndex;\r\n\r\n            for ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n                this.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n            }\r\n\r\n            for ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n                this.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author kile / http://kile.stravaganza.org/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    var geometryId = 0; // Geometry uses even numbers as Id\r\n\r\n    function Geometry() {\r\n\r\n        Object.defineProperty( this, 'id', { value: geometryId += 2 } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'Geometry';\r\n\r\n        this.vertices = [];\r\n        this.colors = [];\r\n        this.faces = [];\r\n        this.faceVertexUvs = [[]];\r\n\r\n        this.morphTargets = [];\r\n        this.morphNormals = [];\r\n\r\n        this.skinWeights = [];\r\n        this.skinIndices = [];\r\n\r\n        this.lineDistances = [];\r\n\r\n        this.boundingBox = null;\r\n        this.boundingSphere = null;\r\n\r\n        // update flags\r\n\r\n        this.elementsNeedUpdate = false;\r\n        this.verticesNeedUpdate = false;\r\n        this.uvsNeedUpdate = false;\r\n        this.normalsNeedUpdate = false;\r\n        this.colorsNeedUpdate = false;\r\n        this.lineDistancesNeedUpdate = false;\r\n        this.groupsNeedUpdate = false;\r\n\r\n    }\r\n\r\n    Geometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Geometry,\r\n\r\n        isGeometry: true,\r\n\r\n        applyMatrix: function ( matrix ) {\r\n\r\n            var normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n            for ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n                var vertex = this.vertices[ i ];\r\n                vertex.applyMatrix4( matrix );\r\n\r\n            }\r\n\r\n            for ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n                var face = this.faces[ i ];\r\n                face.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                for ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n                    face.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.boundingBox !== null ) {\r\n\r\n                this.computeBoundingBox();\r\n\r\n            }\r\n\r\n            if ( this.boundingSphere !== null ) {\r\n\r\n                this.computeBoundingSphere();\r\n\r\n            }\r\n\r\n            this.verticesNeedUpdate = true;\r\n            this.normalsNeedUpdate = true;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotateX: function () {\r\n\r\n            // rotate geometry around world x-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateX( angle ) {\r\n\r\n                m1.makeRotationX( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateY: function () {\r\n\r\n            // rotate geometry around world y-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateY( angle ) {\r\n\r\n                m1.makeRotationY( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateZ: function () {\r\n\r\n            // rotate geometry around world z-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateZ( angle ) {\r\n\r\n                m1.makeRotationZ( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translate: function () {\r\n\r\n            // translate geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function translate( x, y, z ) {\r\n\r\n                m1.makeTranslation( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        scale: function () {\r\n\r\n            // scale geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function scale( x, y, z ) {\r\n\r\n                m1.makeScale( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            var obj = new Object3D();\r\n\r\n            return function lookAt( vector ) {\r\n\r\n                obj.lookAt( vector );\r\n\r\n                obj.updateMatrix();\r\n\r\n                this.applyMatrix( obj.matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        fromBufferGeometry: function ( geometry ) {\r\n\r\n            var scope = this;\r\n\r\n            var indices = geometry.index !== null ? geometry.index.array : undefined;\r\n            var attributes = geometry.attributes;\r\n\r\n            var positions = attributes.position.array;\r\n            var normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n            var colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n            var uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n            var uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n            if ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n            var tempNormals = [];\r\n            var tempUVs = [];\r\n            var tempUVs2 = [];\r\n\r\n            for ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\r\n\r\n                scope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\r\n\r\n                if ( normals !== undefined ) {\r\n\r\n                    tempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n                }\r\n\r\n                if ( colors !== undefined ) {\r\n\r\n                    scope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n                }\r\n\r\n                if ( uvs !== undefined ) {\r\n\r\n                    tempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n                }\r\n\r\n                if ( uvs2 !== undefined ) {\r\n\r\n                    tempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function addFace( a, b, c, materialIndex ) {\r\n\r\n                var vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n                var vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n                var face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n                scope.faces.push( face );\r\n\r\n                if ( uvs !== undefined ) {\r\n\r\n                    scope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n                }\r\n\r\n                if ( uvs2 !== undefined ) {\r\n\r\n                    scope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var groups = geometry.groups;\r\n\r\n            if ( groups.length > 0 ) {\r\n\r\n                for ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n                    var group = groups[ i ];\r\n\r\n                    var start = group.start;\r\n                    var count = group.count;\r\n\r\n                    for ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n                        if ( indices !== undefined ) {\r\n\r\n                            addFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\r\n\r\n                        } else {\r\n\r\n                            addFace( j, j + 1, j + 2, group.materialIndex );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                if ( indices !== undefined ) {\r\n\r\n                    for ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n                        addFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    for ( var i = 0; i < positions.length / 3; i += 3 ) {\r\n\r\n                        addFace( i, i + 1, i + 2 );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.computeFaceNormals();\r\n\r\n            if ( geometry.boundingBox !== null ) {\r\n\r\n                this.boundingBox = geometry.boundingBox.clone();\r\n\r\n            }\r\n\r\n            if ( geometry.boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        center: function () {\r\n\r\n            var offset = new Vector3();\r\n\r\n            return function center() {\r\n\r\n                this.computeBoundingBox();\r\n\r\n                this.boundingBox.getCenter( offset ).negate();\r\n\r\n                this.translate( offset.x, offset.y, offset.z );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        normalize: function () {\r\n\r\n            this.computeBoundingSphere();\r\n\r\n            var center = this.boundingSphere.center;\r\n            var radius = this.boundingSphere.radius;\r\n\r\n            var s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n            var matrix = new Matrix4();\r\n            matrix.set(\r\n                s, 0, 0, - s * center.x,\r\n                0, s, 0, - s * center.y,\r\n                0, 0, s, - s * center.z,\r\n                0, 0, 0, 1\r\n            );\r\n\r\n            this.applyMatrix( matrix );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        computeFaceNormals: function () {\r\n\r\n            var cb = new Vector3(), ab = new Vector3();\r\n\r\n            for ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                var face = this.faces[ f ];\r\n\r\n                var vA = this.vertices[ face.a ];\r\n                var vB = this.vertices[ face.b ];\r\n                var vC = this.vertices[ face.c ];\r\n\r\n                cb.subVectors( vC, vB );\r\n                ab.subVectors( vA, vB );\r\n                cb.cross( ab );\r\n\r\n                cb.normalize();\r\n\r\n                face.normal.copy( cb );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeVertexNormals: function ( areaWeighted ) {\r\n\r\n            if ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n            var v, vl, f, fl, face, vertices;\r\n\r\n            vertices = new Array( this.vertices.length );\r\n\r\n            for ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n                vertices[ v ] = new Vector3();\r\n\r\n            }\r\n\r\n            if ( areaWeighted ) {\r\n\r\n                // vertex normals weighted by triangle areas\r\n                // http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n                var vA, vB, vC;\r\n                var cb = new Vector3(), ab = new Vector3();\r\n\r\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                    face = this.faces[ f ];\r\n\r\n                    vA = this.vertices[ face.a ];\r\n                    vB = this.vertices[ face.b ];\r\n                    vC = this.vertices[ face.c ];\r\n\r\n                    cb.subVectors( vC, vB );\r\n                    ab.subVectors( vA, vB );\r\n                    cb.cross( ab );\r\n\r\n                    vertices[ face.a ].add( cb );\r\n                    vertices[ face.b ].add( cb );\r\n                    vertices[ face.c ].add( cb );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                this.computeFaceNormals();\r\n\r\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                    face = this.faces[ f ];\r\n\r\n                    vertices[ face.a ].add( face.normal );\r\n                    vertices[ face.b ].add( face.normal );\r\n                    vertices[ face.c ].add( face.normal );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n                vertices[ v ].normalize();\r\n\r\n            }\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                var vertexNormals = face.vertexNormals;\r\n\r\n                if ( vertexNormals.length === 3 ) {\r\n\r\n                    vertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n                    vertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n                    vertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n                } else {\r\n\r\n                    vertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n                    vertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n                    vertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.faces.length > 0 ) {\r\n\r\n                this.normalsNeedUpdate = true;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeFlatVertexNormals: function () {\r\n\r\n            var f, fl, face;\r\n\r\n            this.computeFaceNormals();\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                var vertexNormals = face.vertexNormals;\r\n\r\n                if ( vertexNormals.length === 3 ) {\r\n\r\n                    vertexNormals[ 0 ].copy( face.normal );\r\n                    vertexNormals[ 1 ].copy( face.normal );\r\n                    vertexNormals[ 2 ].copy( face.normal );\r\n\r\n                } else {\r\n\r\n                    vertexNormals[ 0 ] = face.normal.clone();\r\n                    vertexNormals[ 1 ] = face.normal.clone();\r\n                    vertexNormals[ 2 ] = face.normal.clone();\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.faces.length > 0 ) {\r\n\r\n                this.normalsNeedUpdate = true;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeMorphNormals: function () {\r\n\r\n            var i, il, f, fl, face;\r\n\r\n            // save original normals\r\n            // - create temp variables on first access\r\n            //   otherwise just copy (for faster repeated calls)\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                if ( ! face.__originalFaceNormal ) {\r\n\r\n                    face.__originalFaceNormal = face.normal.clone();\r\n\r\n                } else {\r\n\r\n                    face.__originalFaceNormal.copy( face.normal );\r\n\r\n                }\r\n\r\n                if ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n                for ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n                    if ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n                        face.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n                    } else {\r\n\r\n                        face.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // use temp geometry to compute face and vertex normals for each morph\r\n\r\n            var tmpGeo = new Geometry();\r\n            tmpGeo.faces = this.faces;\r\n\r\n            for ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n                // create on first access\r\n\r\n                if ( ! this.morphNormals[ i ] ) {\r\n\r\n                    this.morphNormals[ i ] = {};\r\n                    this.morphNormals[ i ].faceNormals = [];\r\n                    this.morphNormals[ i ].vertexNormals = [];\r\n\r\n                    var dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n                    var dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n                    var faceNormal, vertexNormals;\r\n\r\n                    for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                        faceNormal = new Vector3();\r\n                        vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\r\n\r\n                        dstNormalsFace.push( faceNormal );\r\n                        dstNormalsVertex.push( vertexNormals );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                var morphNormals = this.morphNormals[ i ];\r\n\r\n                // set vertices to morph target\r\n\r\n                tmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n                // compute morph normals\r\n\r\n                tmpGeo.computeFaceNormals();\r\n                tmpGeo.computeVertexNormals();\r\n\r\n                // store morph normals\r\n\r\n                var faceNormal, vertexNormals;\r\n\r\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                    face = this.faces[ f ];\r\n\r\n                    faceNormal = morphNormals.faceNormals[ f ];\r\n                    vertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n                    faceNormal.copy( face.normal );\r\n\r\n                    vertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n                    vertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n                    vertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // restore original normals\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                face.normal = face.__originalFaceNormal;\r\n                face.vertexNormals = face.__originalVertexNormals;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeBoundingBox: function () {\r\n\r\n            if ( this.boundingBox === null ) {\r\n\r\n                this.boundingBox = new Box3();\r\n\r\n            }\r\n\r\n            this.boundingBox.setFromPoints( this.vertices );\r\n\r\n        },\r\n\r\n        computeBoundingSphere: function () {\r\n\r\n            if ( this.boundingSphere === null ) {\r\n\r\n                this.boundingSphere = new Sphere();\r\n\r\n            }\r\n\r\n            this.boundingSphere.setFromPoints( this.vertices );\r\n\r\n        },\r\n\r\n        merge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n            if ( ! ( geometry && geometry.isGeometry ) ) {\r\n\r\n                console.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n                return;\r\n\r\n            }\r\n\r\n            var normalMatrix,\r\n                vertexOffset = this.vertices.length,\r\n                vertices1 = this.vertices,\r\n                vertices2 = geometry.vertices,\r\n                faces1 = this.faces,\r\n                faces2 = geometry.faces,\r\n                uvs1 = this.faceVertexUvs[ 0 ],\r\n                uvs2 = geometry.faceVertexUvs[ 0 ],\r\n                colors1 = this.colors,\r\n                colors2 = geometry.colors;\r\n\r\n            if ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n            if ( matrix !== undefined ) {\r\n\r\n                normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n            }\r\n\r\n            // vertices\r\n\r\n            for ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n                var vertex = vertices2[ i ];\r\n\r\n                var vertexCopy = vertex.clone();\r\n\r\n                if ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n                vertices1.push( vertexCopy );\r\n\r\n            }\r\n\r\n            // colors\r\n\r\n            for ( var i = 0, il = colors2.length; i < il; i ++ ) {\r\n\r\n                colors1.push( colors2[ i ].clone() );\r\n\r\n            }\r\n\r\n            // faces\r\n\r\n            for ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n                var face = faces2[ i ], faceCopy, normal, color,\r\n                    faceVertexNormals = face.vertexNormals,\r\n                    faceVertexColors = face.vertexColors;\r\n\r\n                faceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n                faceCopy.normal.copy( face.normal );\r\n\r\n                if ( normalMatrix !== undefined ) {\r\n\r\n                    faceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                }\r\n\r\n                for ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n                    normal = faceVertexNormals[ j ].clone();\r\n\r\n                    if ( normalMatrix !== undefined ) {\r\n\r\n                        normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                    }\r\n\r\n                    faceCopy.vertexNormals.push( normal );\r\n\r\n                }\r\n\r\n                faceCopy.color.copy( face.color );\r\n\r\n                for ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n                    color = faceVertexColors[ j ];\r\n                    faceCopy.vertexColors.push( color.clone() );\r\n\r\n                }\r\n\r\n                faceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n                faces1.push( faceCopy );\r\n\r\n            }\r\n\r\n            // uvs\r\n\r\n            for ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n                var uv = uvs2[ i ], uvCopy = [];\r\n\r\n                if ( uv === undefined ) {\r\n\r\n                    continue;\r\n\r\n                }\r\n\r\n                for ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n                    uvCopy.push( uv[ j ].clone() );\r\n\r\n                }\r\n\r\n                uvs1.push( uvCopy );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        mergeMesh: function ( mesh ) {\r\n\r\n            if ( ! ( mesh && mesh.isMesh ) ) {\r\n\r\n                console.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\r\n\r\n            this.merge( mesh.geometry, mesh.matrix );\r\n\r\n        },\r\n\r\n        /*\r\n\t\t * Checks for duplicate vertices with hashmap.\r\n\t\t * Duplicated vertices are removed\r\n\t\t * and faces' vertices are updated.\r\n\t\t */\r\n\r\n        mergeVertices: function () {\r\n\r\n            var verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n            var unique = [], changes = [];\r\n\r\n            var v, key;\r\n            var precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n            var precision = Math.pow( 10, precisionPoints );\r\n            var i, il, face;\r\n            var indices, j, jl;\r\n\r\n            for ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n                v = this.vertices[ i ];\r\n                key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n                if ( verticesMap[ key ] === undefined ) {\r\n\r\n                    verticesMap[ key ] = i;\r\n                    unique.push( this.vertices[ i ] );\r\n                    changes[ i ] = unique.length - 1;\r\n\r\n                } else {\r\n\r\n                    //console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n                    changes[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            // if faces are completely degenerate after merging vertices, we\r\n            // have to remove them from the geometry.\r\n            var faceIndicesToRemove = [];\r\n\r\n            for ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n                face = this.faces[ i ];\r\n\r\n                face.a = changes[ face.a ];\r\n                face.b = changes[ face.b ];\r\n                face.c = changes[ face.c ];\r\n\r\n                indices = [ face.a, face.b, face.c ];\r\n\r\n                // if any duplicate vertices are found in a Face3\r\n                // we have to remove the face as nothing can be saved\r\n                for ( var n = 0; n < 3; n ++ ) {\r\n\r\n                    if ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n                        faceIndicesToRemove.push( i );\r\n                        break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n                var idx = faceIndicesToRemove[ i ];\r\n\r\n                this.faces.splice( idx, 1 );\r\n\r\n                for ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n                    this.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Use unique set of vertices\r\n\r\n            var diff = this.vertices.length - unique.length;\r\n            this.vertices = unique;\r\n            return diff;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.vertices = [];\r\n\r\n            for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                var point = points[ i ];\r\n                this.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sortFacesByMaterialIndex: function () {\r\n\r\n            var faces = this.faces;\r\n            var length = faces.length;\r\n\r\n            // tag faces\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                faces[ i ]._id = i;\r\n\r\n            }\r\n\r\n            // sort faces\r\n\r\n            function materialIndexSort( a, b ) {\r\n\r\n                return a.materialIndex - b.materialIndex;\r\n\r\n            }\r\n\r\n            faces.sort( materialIndexSort );\r\n\r\n            // sort uvs\r\n\r\n            var uvs1 = this.faceVertexUvs[ 0 ];\r\n            var uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n            var newUvs1, newUvs2;\r\n\r\n            if ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n            if ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                var id = faces[ i ]._id;\r\n\r\n                if ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n                if ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n            }\r\n\r\n            if ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n            if ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Geometry',\r\n                    generator: 'Geometry.toJSON'\r\n                }\r\n            };\r\n\r\n            // standard Geometry serialization\r\n\r\n            data.uuid = this.uuid;\r\n            data.type = this.type;\r\n            if ( this.name !== '' ) data.name = this.name;\r\n\r\n            if ( this.parameters !== undefined ) {\r\n\r\n                var parameters = this.parameters;\r\n\r\n                for ( var key in parameters ) {\r\n\r\n                    if ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n                }\r\n\r\n                return data;\r\n\r\n            }\r\n\r\n            var vertices = [];\r\n\r\n            for ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n                var vertex = this.vertices[ i ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n            var faces = [];\r\n            var normals = [];\r\n            var normalsHash = {};\r\n            var colors = [];\r\n            var colorsHash = {};\r\n            var uvs = [];\r\n            var uvsHash = {};\r\n\r\n            for ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n                var face = this.faces[ i ];\r\n\r\n                var hasMaterial = true;\r\n                var hasFaceUv = false; // deprecated\r\n                var hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n                var hasFaceNormal = face.normal.length() > 0;\r\n                var hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n                var hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n                var hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n                var faceType = 0;\r\n\r\n                faceType = setBit( faceType, 0, 0 ); // isQuad\r\n                faceType = setBit( faceType, 1, hasMaterial );\r\n                faceType = setBit( faceType, 2, hasFaceUv );\r\n                faceType = setBit( faceType, 3, hasFaceVertexUv );\r\n                faceType = setBit( faceType, 4, hasFaceNormal );\r\n                faceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n                faceType = setBit( faceType, 6, hasFaceColor );\r\n                faceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n                faces.push( faceType );\r\n                faces.push( face.a, face.b, face.c );\r\n                faces.push( face.materialIndex );\r\n\r\n                if ( hasFaceVertexUv ) {\r\n\r\n                    var faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n                    faces.push(\r\n                        getUvIndex( faceVertexUvs[ 0 ] ),\r\n                        getUvIndex( faceVertexUvs[ 1 ] ),\r\n                        getUvIndex( faceVertexUvs[ 2 ] )\r\n                    );\r\n\r\n                }\r\n\r\n                if ( hasFaceNormal ) {\r\n\r\n                    faces.push( getNormalIndex( face.normal ) );\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexNormal ) {\r\n\r\n                    var vertexNormals = face.vertexNormals;\r\n\r\n                    faces.push(\r\n                        getNormalIndex( vertexNormals[ 0 ] ),\r\n                        getNormalIndex( vertexNormals[ 1 ] ),\r\n                        getNormalIndex( vertexNormals[ 2 ] )\r\n                    );\r\n\r\n                }\r\n\r\n                if ( hasFaceColor ) {\r\n\r\n                    faces.push( getColorIndex( face.color ) );\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexColor ) {\r\n\r\n                    var vertexColors = face.vertexColors;\r\n\r\n                    faces.push(\r\n                        getColorIndex( vertexColors[ 0 ] ),\r\n                        getColorIndex( vertexColors[ 1 ] ),\r\n                        getColorIndex( vertexColors[ 2 ] )\r\n                    );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function setBit( value, position, enabled ) {\r\n\r\n                return enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n            }\r\n\r\n            function getNormalIndex( normal ) {\r\n\r\n                var hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n                if ( normalsHash[ hash ] !== undefined ) {\r\n\r\n                    return normalsHash[ hash ];\r\n\r\n                }\r\n\r\n                normalsHash[ hash ] = normals.length / 3;\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                return normalsHash[ hash ];\r\n\r\n            }\r\n\r\n            function getColorIndex( color ) {\r\n\r\n                var hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n                if ( colorsHash[ hash ] !== undefined ) {\r\n\r\n                    return colorsHash[ hash ];\r\n\r\n                }\r\n\r\n                colorsHash[ hash ] = colors.length;\r\n                colors.push( color.getHex() );\r\n\r\n                return colorsHash[ hash ];\r\n\r\n            }\r\n\r\n            function getUvIndex( uv ) {\r\n\r\n                var hash = uv.x.toString() + uv.y.toString();\r\n\r\n                if ( uvsHash[ hash ] !== undefined ) {\r\n\r\n                    return uvsHash[ hash ];\r\n\r\n                }\r\n\r\n                uvsHash[ hash ] = uvs.length / 2;\r\n                uvs.push( uv.x, uv.y );\r\n\r\n                return uvsHash[ hash ];\r\n\r\n            }\r\n\r\n            data.data = {};\r\n\r\n            data.data.vertices = vertices;\r\n            data.data.normals = normals;\r\n            if ( colors.length > 0 ) data.data.colors = colors;\r\n            if ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n            data.data.faces = faces;\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            /*\r\n\t\t\t // Handle primitives\r\n\r\n\t\t\t var parameters = this.parameters;\r\n\r\n\t\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t\t var values = [];\r\n\r\n\t\t\t for ( var key in parameters ) {\r\n\r\n\t\t\t values.push( parameters[ key ] );\r\n\r\n\t\t\t }\r\n\r\n\t\t\t var geometry = Object.create( this.constructor.prototype );\r\n\t\t\t this.constructor.apply( geometry, values );\r\n\t\t\t return geometry;\r\n\r\n\t\t\t }\r\n\r\n\t\t\t return new this.constructor().copy( this );\r\n\t\t\t */\r\n\r\n            return new Geometry().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            var i, il, j, jl, k, kl;\r\n\r\n            // reset\r\n\r\n            this.vertices = [];\r\n            this.colors = [];\r\n            this.faces = [];\r\n            this.faceVertexUvs = [[]];\r\n            this.morphTargets = [];\r\n            this.morphNormals = [];\r\n            this.skinWeights = [];\r\n            this.skinIndices = [];\r\n            this.lineDistances = [];\r\n            this.boundingBox = null;\r\n            this.boundingSphere = null;\r\n\r\n            // name\r\n\r\n            this.name = source.name;\r\n\r\n            // vertices\r\n\r\n            var vertices = source.vertices;\r\n\r\n            for ( i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n                this.vertices.push( vertices[ i ].clone() );\r\n\r\n            }\r\n\r\n            // colors\r\n\r\n            var colors = source.colors;\r\n\r\n            for ( i = 0, il = colors.length; i < il; i ++ ) {\r\n\r\n                this.colors.push( colors[ i ].clone() );\r\n\r\n            }\r\n\r\n            // faces\r\n\r\n            var faces = source.faces;\r\n\r\n            for ( i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n                this.faces.push( faces[ i ].clone() );\r\n\r\n            }\r\n\r\n            // face vertex uvs\r\n\r\n            for ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n                var faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n                if ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n                    this.faceVertexUvs[ i ] = [];\r\n\r\n                }\r\n\r\n                for ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n                    var uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n                    for ( k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n                        var uv = uvs[ k ];\r\n\r\n                        uvsCopy.push( uv.clone() );\r\n\r\n                    }\r\n\r\n                    this.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // morph targets\r\n\r\n            var morphTargets = source.morphTargets;\r\n\r\n            for ( i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n                var morphTarget = {};\r\n                morphTarget.name = morphTargets[ i ].name;\r\n\r\n                // vertices\r\n\r\n                if ( morphTargets[ i ].vertices !== undefined ) {\r\n\r\n                    morphTarget.vertices = [];\r\n\r\n                    for ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\r\n\r\n                        morphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // normals\r\n\r\n                if ( morphTargets[ i ].normals !== undefined ) {\r\n\r\n                    morphTarget.normals = [];\r\n\r\n                    for ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\r\n\r\n                        morphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.morphTargets.push( morphTarget );\r\n\r\n            }\r\n\r\n            // morph normals\r\n\r\n            var morphNormals = source.morphNormals;\r\n\r\n            for ( i = 0, il = morphNormals.length; i < il; i ++ ) {\r\n\r\n                var morphNormal = {};\r\n\r\n                // vertex normals\r\n\r\n                if ( morphNormals[ i ].vertexNormals !== undefined ) {\r\n\r\n                    morphNormal.vertexNormals = [];\r\n\r\n                    for ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\r\n\r\n                        var srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\r\n                        var destVertexNormal = {};\r\n\r\n                        destVertexNormal.a = srcVertexNormal.a.clone();\r\n                        destVertexNormal.b = srcVertexNormal.b.clone();\r\n                        destVertexNormal.c = srcVertexNormal.c.clone();\r\n\r\n                        morphNormal.vertexNormals.push( destVertexNormal );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // face normals\r\n\r\n                if ( morphNormals[ i ].faceNormals !== undefined ) {\r\n\r\n                    morphNormal.faceNormals = [];\r\n\r\n                    for ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\r\n\r\n                        morphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.morphNormals.push( morphNormal );\r\n\r\n            }\r\n\r\n            // skin weights\r\n\r\n            var skinWeights = source.skinWeights;\r\n\r\n            for ( i = 0, il = skinWeights.length; i < il; i ++ ) {\r\n\r\n                this.skinWeights.push( skinWeights[ i ].clone() );\r\n\r\n            }\r\n\r\n            // skin indices\r\n\r\n            var skinIndices = source.skinIndices;\r\n\r\n            for ( i = 0, il = skinIndices.length; i < il; i ++ ) {\r\n\r\n                this.skinIndices.push( skinIndices[ i ].clone() );\r\n\r\n            }\r\n\r\n            // line distances\r\n\r\n            var lineDistances = source.lineDistances;\r\n\r\n            for ( i = 0, il = lineDistances.length; i < il; i ++ ) {\r\n\r\n                this.lineDistances.push( lineDistances[ i ] );\r\n\r\n            }\r\n\r\n            // bounding box\r\n\r\n            var boundingBox = source.boundingBox;\r\n\r\n            if ( boundingBox !== null ) {\r\n\r\n                this.boundingBox = boundingBox.clone();\r\n\r\n            }\r\n\r\n            // bounding sphere\r\n\r\n            var boundingSphere = source.boundingSphere;\r\n\r\n            if ( boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = boundingSphere.clone();\r\n\r\n            }\r\n\r\n            // update flags\r\n\r\n            this.elementsNeedUpdate = source.elementsNeedUpdate;\r\n            this.verticesNeedUpdate = source.verticesNeedUpdate;\r\n            this.uvsNeedUpdate = source.uvsNeedUpdate;\r\n            this.normalsNeedUpdate = source.normalsNeedUpdate;\r\n            this.colorsNeedUpdate = source.colorsNeedUpdate;\r\n            this.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\r\n            this.groupsNeedUpdate = source.groupsNeedUpdate;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        if ( Array.isArray( array ) ) {\r\n\r\n            throw new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n        }\r\n\r\n        this.name = '';\r\n\r\n        this.array = array;\r\n        this.itemSize = itemSize;\r\n        this.count = array !== undefined ? array.length / itemSize : 0;\r\n        this.normalized = normalized === true;\r\n\r\n        this.dynamic = false;\r\n        this.updateRange = { offset: 0, count: - 1 };\r\n\r\n        this.version = 0;\r\n\r\n    }\r\n\r\n    Object.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value === true ) this.version ++;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( BufferAttribute.prototype, {\r\n\r\n        isBufferAttribute: true,\r\n\r\n        onUploadCallback: function () {},\r\n\r\n        setArray: function ( array ) {\r\n\r\n            if ( Array.isArray( array ) ) {\r\n\r\n                throw new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n            }\r\n\r\n            this.count = array !== undefined ? array.length / this.itemSize : 0;\r\n            this.array = array;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setDynamic: function ( value ) {\r\n\r\n            this.dynamic = value;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.name = source.name;\r\n            this.array = new source.array.constructor( source.array );\r\n            this.itemSize = source.itemSize;\r\n            this.count = source.count;\r\n            this.normalized = source.normalized;\r\n\r\n            this.dynamic = source.dynamic;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyAt: function ( index1, attribute, index2 ) {\r\n\r\n            index1 *= this.itemSize;\r\n            index2 *= attribute.itemSize;\r\n\r\n            for ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n                this.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyArray: function ( array ) {\r\n\r\n            this.array.set( array );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyColorsArray: function ( colors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n                var color = colors[ i ];\r\n\r\n                if ( color === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n                    color = new Color();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = color.r;\r\n                array[ offset ++ ] = color.g;\r\n                array[ offset ++ ] = color.b;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyVector2sArray: function ( vectors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n                var vector = vectors[ i ];\r\n\r\n                if ( vector === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n                    vector = new Vector2();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = vector.x;\r\n                array[ offset ++ ] = vector.y;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyVector3sArray: function ( vectors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n                var vector = vectors[ i ];\r\n\r\n                if ( vector === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n                    vector = new Vector3();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = vector.x;\r\n                array[ offset ++ ] = vector.y;\r\n                array[ offset ++ ] = vector.z;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyVector4sArray: function ( vectors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n                var vector = vectors[ i ];\r\n\r\n                if ( vector === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n                    vector = new Vector4();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = vector.x;\r\n                array[ offset ++ ] = vector.y;\r\n                array[ offset ++ ] = vector.z;\r\n                array[ offset ++ ] = vector.w;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        set: function ( value, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.array.set( value, offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getX: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize ];\r\n\r\n        },\r\n\r\n        setX: function ( index, x ) {\r\n\r\n            this.array[ index * this.itemSize ] = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getY: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize + 1 ];\r\n\r\n        },\r\n\r\n        setY: function ( index, y ) {\r\n\r\n            this.array[ index * this.itemSize + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getZ: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize + 2 ];\r\n\r\n        },\r\n\r\n        setZ: function ( index, z ) {\r\n\r\n            this.array[ index * this.itemSize + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getW: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize + 3 ];\r\n\r\n        },\r\n\r\n        setW: function ( index, w ) {\r\n\r\n            this.array[ index * this.itemSize + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXY: function ( index, x, y ) {\r\n\r\n            index *= this.itemSize;\r\n\r\n            this.array[ index + 0 ] = x;\r\n            this.array[ index + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZ: function ( index, x, y, z ) {\r\n\r\n            index *= this.itemSize;\r\n\r\n            this.array[ index + 0 ] = x;\r\n            this.array[ index + 1 ] = y;\r\n            this.array[ index + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZW: function ( index, x, y, z, w ) {\r\n\r\n            index *= this.itemSize;\r\n\r\n            this.array[ index + 0 ] = x;\r\n            this.array[ index + 1 ] = y;\r\n            this.array[ index + 2 ] = z;\r\n            this.array[ index + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        onUpload: function ( callback ) {\r\n\r\n            this.onUploadCallback = callback;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.array, this.itemSize ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    function Int8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Int8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Int8BufferAttribute.prototype.constructor = Int8BufferAttribute;\r\n\r\n\r\n    function Uint8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\r\n\r\n\r\n    function Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\r\n\r\n\r\n    function Int16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Int16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Int16BufferAttribute.prototype.constructor = Int16BufferAttribute;\r\n\r\n\r\n    function Uint16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\r\n\r\n\r\n    function Int32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Int32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Int32BufferAttribute.prototype.constructor = Int32BufferAttribute;\r\n\r\n\r\n    function Uint32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\r\n\r\n\r\n    function Float32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Float32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Float32BufferAttribute.prototype.constructor = Float32BufferAttribute;\r\n\r\n\r\n    function Float64BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Float64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Float64BufferAttribute.prototype.constructor = Float64BufferAttribute;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function DirectGeometry() {\r\n\r\n        this.vertices = [];\r\n        this.normals = [];\r\n        this.colors = [];\r\n        this.uvs = [];\r\n        this.uvs2 = [];\r\n\r\n        this.groups = [];\r\n\r\n        this.morphTargets = {};\r\n\r\n        this.skinWeights = [];\r\n        this.skinIndices = [];\r\n\r\n        // this.lineDistances = [];\r\n\r\n        this.boundingBox = null;\r\n        this.boundingSphere = null;\r\n\r\n        // update flags\r\n\r\n        this.verticesNeedUpdate = false;\r\n        this.normalsNeedUpdate = false;\r\n        this.colorsNeedUpdate = false;\r\n        this.uvsNeedUpdate = false;\r\n        this.groupsNeedUpdate = false;\r\n\r\n    }\r\n\r\n    Object.assign( DirectGeometry.prototype, {\r\n\r\n        computeGroups: function ( geometry ) {\r\n\r\n            var group;\r\n            var groups = [];\r\n            var materialIndex = undefined;\r\n\r\n            var faces = geometry.faces;\r\n\r\n            for ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                // materials\r\n\r\n                if ( face.materialIndex !== materialIndex ) {\r\n\r\n                    materialIndex = face.materialIndex;\r\n\r\n                    if ( group !== undefined ) {\r\n\r\n                        group.count = ( i * 3 ) - group.start;\r\n                        groups.push( group );\r\n\r\n                    }\r\n\r\n                    group = {\r\n                        start: i * 3,\r\n                        materialIndex: materialIndex\r\n                    };\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( group !== undefined ) {\r\n\r\n                group.count = ( i * 3 ) - group.start;\r\n                groups.push( group );\r\n\r\n            }\r\n\r\n            this.groups = groups;\r\n\r\n        },\r\n\r\n        fromGeometry: function ( geometry ) {\r\n\r\n            var faces = geometry.faces;\r\n            var vertices = geometry.vertices;\r\n            var faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n            var hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n            var hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n            // morphs\r\n\r\n            var morphTargets = geometry.morphTargets;\r\n            var morphTargetsLength = morphTargets.length;\r\n\r\n            var morphTargetsPosition;\r\n\r\n            if ( morphTargetsLength > 0 ) {\r\n\r\n                morphTargetsPosition = [];\r\n\r\n                for ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n                    morphTargetsPosition[ i ] = [];\r\n\r\n                }\r\n\r\n                this.morphTargets.position = morphTargetsPosition;\r\n\r\n            }\r\n\r\n            var morphNormals = geometry.morphNormals;\r\n            var morphNormalsLength = morphNormals.length;\r\n\r\n            var morphTargetsNormal;\r\n\r\n            if ( morphNormalsLength > 0 ) {\r\n\r\n                morphTargetsNormal = [];\r\n\r\n                for ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n                    morphTargetsNormal[ i ] = [];\r\n\r\n                }\r\n\r\n                this.morphTargets.normal = morphTargetsNormal;\r\n\r\n            }\r\n\r\n            // skins\r\n\r\n            var skinIndices = geometry.skinIndices;\r\n            var skinWeights = geometry.skinWeights;\r\n\r\n            var hasSkinIndices = skinIndices.length === vertices.length;\r\n            var hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n            //\r\n\r\n            if ( faces.length === 0 ) {\r\n\r\n                console.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                this.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n                var vertexNormals = face.vertexNormals;\r\n\r\n                if ( vertexNormals.length === 3 ) {\r\n\r\n                    this.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n                } else {\r\n\r\n                    var normal = face.normal;\r\n\r\n                    this.normals.push( normal, normal, normal );\r\n\r\n                }\r\n\r\n                var vertexColors = face.vertexColors;\r\n\r\n                if ( vertexColors.length === 3 ) {\r\n\r\n                    this.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n                } else {\r\n\r\n                    var color = face.color;\r\n\r\n                    this.colors.push( color, color, color );\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexUv === true ) {\r\n\r\n                    var vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n                    if ( vertexUvs !== undefined ) {\r\n\r\n                        this.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n                        this.uvs.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexUv2 === true ) {\r\n\r\n                    var vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n                    if ( vertexUvs !== undefined ) {\r\n\r\n                        this.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n                        this.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // morphs\r\n\r\n                for ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n                    var morphTarget = morphTargets[ j ].vertices;\r\n\r\n                    morphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n                }\r\n\r\n                for ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n                    var morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n                    morphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n                }\r\n\r\n                // skins\r\n\r\n                if ( hasSkinIndices ) {\r\n\r\n                    this.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n                }\r\n\r\n                if ( hasSkinWeights ) {\r\n\r\n                    this.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.computeGroups( geometry );\r\n\r\n            this.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n            this.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n            this.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n            this.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n            this.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function arrayMax( array ) {\r\n\r\n        if ( array.length === 0 ) return - Infinity;\r\n\r\n        var max = array[ 0 ];\r\n\r\n        for ( var i = 1, l = array.length; i < l; ++ i ) {\r\n\r\n            if ( array[ i ] > max ) max = array[ i ];\r\n\r\n        }\r\n\r\n        return max;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\r\n\r\n    function BufferGeometry() {\r\n\r\n        Object.defineProperty( this, 'id', { value: bufferGeometryId += 2 } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'BufferGeometry';\r\n\r\n        this.index = null;\r\n        this.attributes = {};\r\n\r\n        this.morphAttributes = {};\r\n\r\n        this.groups = [];\r\n\r\n        this.boundingBox = null;\r\n        this.boundingSphere = null;\r\n\r\n        this.drawRange = { start: 0, count: Infinity };\r\n\r\n        this.userData = {};\r\n\r\n    }\r\n\r\n    BufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: BufferGeometry,\r\n\r\n        isBufferGeometry: true,\r\n\r\n        getIndex: function () {\r\n\r\n            return this.index;\r\n\r\n        },\r\n\r\n        setIndex: function ( index ) {\r\n\r\n            if ( Array.isArray( index ) ) {\r\n\r\n                this.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\r\n\r\n            } else {\r\n\r\n                this.index = index;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        addAttribute: function ( name, attribute ) {\r\n\r\n            if ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n                return this.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n            }\r\n\r\n            if ( name === 'index' ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n                this.setIndex( attribute );\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            this.attributes[ name ] = attribute;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getAttribute: function ( name ) {\r\n\r\n            return this.attributes[ name ];\r\n\r\n        },\r\n\r\n        removeAttribute: function ( name ) {\r\n\r\n            delete this.attributes[ name ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addGroup: function ( start, count, materialIndex ) {\r\n\r\n            this.groups.push( {\r\n\r\n                start: start,\r\n                count: count,\r\n                materialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n            } );\r\n\r\n        },\r\n\r\n        clearGroups: function () {\r\n\r\n            this.groups = [];\r\n\r\n        },\r\n\r\n        setDrawRange: function ( start, count ) {\r\n\r\n            this.drawRange.start = start;\r\n            this.drawRange.count = count;\r\n\r\n        },\r\n\r\n        applyMatrix: function ( matrix ) {\r\n\r\n            var position = this.attributes.position;\r\n\r\n            if ( position !== undefined ) {\r\n\r\n                matrix.applyToBufferAttribute( position );\r\n                position.needsUpdate = true;\r\n\r\n            }\r\n\r\n            var normal = this.attributes.normal;\r\n\r\n            if ( normal !== undefined ) {\r\n\r\n                var normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n                normalMatrix.applyToBufferAttribute( normal );\r\n                normal.needsUpdate = true;\r\n\r\n            }\r\n\r\n            if ( this.boundingBox !== null ) {\r\n\r\n                this.computeBoundingBox();\r\n\r\n            }\r\n\r\n            if ( this.boundingSphere !== null ) {\r\n\r\n                this.computeBoundingSphere();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotateX: function () {\r\n\r\n            // rotate geometry around world x-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateX( angle ) {\r\n\r\n                m1.makeRotationX( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateY: function () {\r\n\r\n            // rotate geometry around world y-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateY( angle ) {\r\n\r\n                m1.makeRotationY( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateZ: function () {\r\n\r\n            // rotate geometry around world z-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateZ( angle ) {\r\n\r\n                m1.makeRotationZ( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translate: function () {\r\n\r\n            // translate geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function translate( x, y, z ) {\r\n\r\n                m1.makeTranslation( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        scale: function () {\r\n\r\n            // scale geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function scale( x, y, z ) {\r\n\r\n                m1.makeScale( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            var obj = new Object3D();\r\n\r\n            return function lookAt( vector ) {\r\n\r\n                obj.lookAt( vector );\r\n\r\n                obj.updateMatrix();\r\n\r\n                this.applyMatrix( obj.matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        center: function () {\r\n\r\n            var offset = new Vector3();\r\n\r\n            return function center() {\r\n\r\n                this.computeBoundingBox();\r\n\r\n                this.boundingBox.getCenter( offset ).negate();\r\n\r\n                this.translate( offset.x, offset.y, offset.z );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setFromObject: function ( object ) {\r\n\r\n            // console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n            var geometry = object.geometry;\r\n\r\n            if ( object.isPoints || object.isLine ) {\r\n\r\n                var positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\r\n                var colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\r\n\r\n                this.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n                this.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n                if ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n                    var lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\r\n\r\n                    this.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n                }\r\n\r\n                if ( geometry.boundingSphere !== null ) {\r\n\r\n                    this.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n                }\r\n\r\n                if ( geometry.boundingBox !== null ) {\r\n\r\n                    this.boundingBox = geometry.boundingBox.clone();\r\n\r\n                }\r\n\r\n            } else if ( object.isMesh ) {\r\n\r\n                if ( geometry && geometry.isGeometry ) {\r\n\r\n                    this.fromGeometry( geometry );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            var position = [];\r\n\r\n            for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                var point = points[ i ];\r\n                position.push( point.x, point.y, point.z || 0 );\r\n\r\n            }\r\n\r\n            this.addAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        updateFromObject: function ( object ) {\r\n\r\n            var geometry = object.geometry;\r\n\r\n            if ( object.isMesh ) {\r\n\r\n                var direct = geometry.__directGeometry;\r\n\r\n                if ( geometry.elementsNeedUpdate === true ) {\r\n\r\n                    direct = undefined;\r\n                    geometry.elementsNeedUpdate = false;\r\n\r\n                }\r\n\r\n                if ( direct === undefined ) {\r\n\r\n                    return this.fromGeometry( geometry );\r\n\r\n                }\r\n\r\n                direct.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n                direct.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n                direct.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n                direct.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n                direct.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n                geometry.verticesNeedUpdate = false;\r\n                geometry.normalsNeedUpdate = false;\r\n                geometry.colorsNeedUpdate = false;\r\n                geometry.uvsNeedUpdate = false;\r\n                geometry.groupsNeedUpdate = false;\r\n\r\n                geometry = direct;\r\n\r\n            }\r\n\r\n            var attribute;\r\n\r\n            if ( geometry.verticesNeedUpdate === true ) {\r\n\r\n                attribute = this.attributes.position;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyVector3sArray( geometry.vertices );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.verticesNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.normalsNeedUpdate === true ) {\r\n\r\n                attribute = this.attributes.normal;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyVector3sArray( geometry.normals );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.normalsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.colorsNeedUpdate === true ) {\r\n\r\n                attribute = this.attributes.color;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyColorsArray( geometry.colors );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.colorsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.uvsNeedUpdate ) {\r\n\r\n                attribute = this.attributes.uv;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyVector2sArray( geometry.uvs );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.uvsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n                attribute = this.attributes.lineDistance;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyArray( geometry.lineDistances );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.lineDistancesNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.groupsNeedUpdate ) {\r\n\r\n                geometry.computeGroups( object.geometry );\r\n                this.groups = geometry.groups;\r\n\r\n                geometry.groupsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        fromGeometry: function ( geometry ) {\r\n\r\n            geometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\r\n\r\n            return this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n        },\r\n\r\n        fromDirectGeometry: function ( geometry ) {\r\n\r\n            var positions = new Float32Array( geometry.vertices.length * 3 );\r\n            this.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n            if ( geometry.normals.length > 0 ) {\r\n\r\n                var normals = new Float32Array( geometry.normals.length * 3 );\r\n                this.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n            }\r\n\r\n            if ( geometry.colors.length > 0 ) {\r\n\r\n                var colors = new Float32Array( geometry.colors.length * 3 );\r\n                this.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n            }\r\n\r\n            if ( geometry.uvs.length > 0 ) {\r\n\r\n                var uvs = new Float32Array( geometry.uvs.length * 2 );\r\n                this.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n            }\r\n\r\n            if ( geometry.uvs2.length > 0 ) {\r\n\r\n                var uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n                this.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n            }\r\n\r\n            // groups\r\n\r\n            this.groups = geometry.groups;\r\n\r\n            // morphs\r\n\r\n            for ( var name in geometry.morphTargets ) {\r\n\r\n                var array = [];\r\n                var morphTargets = geometry.morphTargets[ name ];\r\n\r\n                for ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n                    var morphTarget = morphTargets[ i ];\r\n\r\n                    var attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\r\n\r\n                    array.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n                }\r\n\r\n                this.morphAttributes[ name ] = array;\r\n\r\n            }\r\n\r\n            // skinning\r\n\r\n            if ( geometry.skinIndices.length > 0 ) {\r\n\r\n                var skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\r\n                this.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n            }\r\n\r\n            if ( geometry.skinWeights.length > 0 ) {\r\n\r\n                var skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\r\n                this.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n            }\r\n\r\n            //\r\n\r\n            if ( geometry.boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n            }\r\n\r\n            if ( geometry.boundingBox !== null ) {\r\n\r\n                this.boundingBox = geometry.boundingBox.clone();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        computeBoundingBox: function () {\r\n\r\n            if ( this.boundingBox === null ) {\r\n\r\n                this.boundingBox = new Box3();\r\n\r\n            }\r\n\r\n            var position = this.attributes.position;\r\n\r\n            if ( position !== undefined ) {\r\n\r\n                this.boundingBox.setFromBufferAttribute( position );\r\n\r\n            } else {\r\n\r\n                this.boundingBox.makeEmpty();\r\n\r\n            }\r\n\r\n            if ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n                console.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeBoundingSphere: function () {\r\n\r\n            var box = new Box3();\r\n            var vector = new Vector3();\r\n\r\n            return function computeBoundingSphere() {\r\n\r\n                if ( this.boundingSphere === null ) {\r\n\r\n                    this.boundingSphere = new Sphere();\r\n\r\n                }\r\n\r\n                var position = this.attributes.position;\r\n\r\n                if ( position ) {\r\n\r\n                    var center = this.boundingSphere.center;\r\n\r\n                    box.setFromBufferAttribute( position );\r\n                    box.getCenter( center );\r\n\r\n                    // hoping to find a boundingSphere with a radius smaller than the\r\n                    // boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n                    var maxRadiusSq = 0;\r\n\r\n                    for ( var i = 0, il = position.count; i < il; i ++ ) {\r\n\r\n                        vector.x = position.getX( i );\r\n                        vector.y = position.getY( i );\r\n                        vector.z = position.getZ( i );\r\n                        maxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n                    }\r\n\r\n                    this.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n                    if ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n                        console.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        computeFaceNormals: function () {\r\n\r\n            // backwards compatibility\r\n\r\n        },\r\n\r\n        computeVertexNormals: function () {\r\n\r\n            var index = this.index;\r\n            var attributes = this.attributes;\r\n            var groups = this.groups;\r\n\r\n            if ( attributes.position ) {\r\n\r\n                var positions = attributes.position.array;\r\n\r\n                if ( attributes.normal === undefined ) {\r\n\r\n                    this.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n                } else {\r\n\r\n                    // reset existing normals to zero\r\n\r\n                    var array = attributes.normal.array;\r\n\r\n                    for ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n                        array[ i ] = 0;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                var normals = attributes.normal.array;\r\n\r\n                var vA, vB, vC;\r\n                var pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\r\n                var cb = new Vector3(), ab = new Vector3();\r\n\r\n                // indexed elements\r\n\r\n                if ( index ) {\r\n\r\n                    var indices = index.array;\r\n\r\n                    if ( groups.length === 0 ) {\r\n\r\n                        this.addGroup( 0, indices.length );\r\n\r\n                    }\r\n\r\n                    for ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n                        var group = groups[ j ];\r\n\r\n                        var start = group.start;\r\n                        var count = group.count;\r\n\r\n                        for ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n                            vA = indices[ i + 0 ] * 3;\r\n                            vB = indices[ i + 1 ] * 3;\r\n                            vC = indices[ i + 2 ] * 3;\r\n\r\n                            pA.fromArray( positions, vA );\r\n                            pB.fromArray( positions, vB );\r\n                            pC.fromArray( positions, vC );\r\n\r\n                            cb.subVectors( pC, pB );\r\n                            ab.subVectors( pA, pB );\r\n                            cb.cross( ab );\r\n\r\n                            normals[ vA ] += cb.x;\r\n                            normals[ vA + 1 ] += cb.y;\r\n                            normals[ vA + 2 ] += cb.z;\r\n\r\n                            normals[ vB ] += cb.x;\r\n                            normals[ vB + 1 ] += cb.y;\r\n                            normals[ vB + 2 ] += cb.z;\r\n\r\n                            normals[ vC ] += cb.x;\r\n                            normals[ vC + 1 ] += cb.y;\r\n                            normals[ vC + 2 ] += cb.z;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // non-indexed elements (unconnected triangle soup)\r\n\r\n                    for ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n                        pA.fromArray( positions, i );\r\n                        pB.fromArray( positions, i + 3 );\r\n                        pC.fromArray( positions, i + 6 );\r\n\r\n                        cb.subVectors( pC, pB );\r\n                        ab.subVectors( pA, pB );\r\n                        cb.cross( ab );\r\n\r\n                        normals[ i ] = cb.x;\r\n                        normals[ i + 1 ] = cb.y;\r\n                        normals[ i + 2 ] = cb.z;\r\n\r\n                        normals[ i + 3 ] = cb.x;\r\n                        normals[ i + 4 ] = cb.y;\r\n                        normals[ i + 5 ] = cb.z;\r\n\r\n                        normals[ i + 6 ] = cb.x;\r\n                        normals[ i + 7 ] = cb.y;\r\n                        normals[ i + 8 ] = cb.z;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.normalizeNormals();\r\n\r\n                attributes.normal.needsUpdate = true;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        merge: function ( geometry, offset ) {\r\n\r\n            if ( ! ( geometry && geometry.isBufferGeometry ) ) {\r\n\r\n                console.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( offset === undefined ) {\r\n\r\n                offset = 0;\r\n\r\n                console.warn(\r\n                    'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\r\n                    + 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\r\n                );\r\n\r\n            }\r\n\r\n            var attributes = this.attributes;\r\n\r\n            for ( var key in attributes ) {\r\n\r\n                if ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n                var attribute1 = attributes[ key ];\r\n                var attributeArray1 = attribute1.array;\r\n\r\n                var attribute2 = geometry.attributes[ key ];\r\n                var attributeArray2 = attribute2.array;\r\n\r\n                var attributeSize = attribute2.itemSize;\r\n\r\n                for ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n                    attributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        normalizeNormals: function () {\r\n\r\n            var vector = new Vector3();\r\n\r\n            return function normalizeNormals() {\r\n\r\n                var normals = this.attributes.normal;\r\n\r\n                for ( var i = 0, il = normals.count; i < il; i ++ ) {\r\n\r\n                    vector.x = normals.getX( i );\r\n                    vector.y = normals.getY( i );\r\n                    vector.z = normals.getZ( i );\r\n\r\n                    vector.normalize();\r\n\r\n                    normals.setXYZ( i, vector.x, vector.y, vector.z );\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        toNonIndexed: function () {\r\n\r\n            if ( this.index === null ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n                return this;\r\n\r\n            }\r\n\r\n            var geometry2 = new BufferGeometry();\r\n\r\n            var indices = this.index.array;\r\n            var attributes = this.attributes;\r\n\r\n            for ( var name in attributes ) {\r\n\r\n                var attribute = attributes[ name ];\r\n\r\n                var array = attribute.array;\r\n                var itemSize = attribute.itemSize;\r\n\r\n                var array2 = new array.constructor( indices.length * itemSize );\r\n\r\n                var index = 0, index2 = 0;\r\n\r\n                for ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n                    index = indices[ i ] * itemSize;\r\n\r\n                    for ( var j = 0; j < itemSize; j ++ ) {\r\n\r\n                        array2[ index2 ++ ] = array[ index ++ ];\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                geometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\r\n\r\n            }\r\n\r\n            var groups = this.groups;\r\n\r\n            for ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n                var group = groups[ i ];\r\n                geometry2.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n            }\r\n\r\n            return geometry2;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'BufferGeometry',\r\n                    generator: 'BufferGeometry.toJSON'\r\n                }\r\n            };\r\n\r\n            // standard BufferGeometry serialization\r\n\r\n            data.uuid = this.uuid;\r\n            data.type = this.type;\r\n            if ( this.name !== '' ) data.name = this.name;\r\n            if ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\r\n\r\n            if ( this.parameters !== undefined ) {\r\n\r\n                var parameters = this.parameters;\r\n\r\n                for ( var key in parameters ) {\r\n\r\n                    if ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n                }\r\n\r\n                return data;\r\n\r\n            }\r\n\r\n            data.data = { attributes: {} };\r\n\r\n            var index = this.index;\r\n\r\n            if ( index !== null ) {\r\n\r\n                var array = Array.prototype.slice.call( index.array );\r\n\r\n                data.data.index = {\r\n                    type: index.array.constructor.name,\r\n                    array: array\r\n                };\r\n\r\n            }\r\n\r\n            var attributes = this.attributes;\r\n\r\n            for ( var key in attributes ) {\r\n\r\n                var attribute = attributes[ key ];\r\n\r\n                var array = Array.prototype.slice.call( attribute.array );\r\n\r\n                data.data.attributes[ key ] = {\r\n                    itemSize: attribute.itemSize,\r\n                    type: attribute.array.constructor.name,\r\n                    array: array,\r\n                    normalized: attribute.normalized\r\n                };\r\n\r\n            }\r\n\r\n            var groups = this.groups;\r\n\r\n            if ( groups.length > 0 ) {\r\n\r\n                data.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n            }\r\n\r\n            var boundingSphere = this.boundingSphere;\r\n\r\n            if ( boundingSphere !== null ) {\r\n\r\n                data.data.boundingSphere = {\r\n                    center: boundingSphere.center.toArray(),\r\n                    radius: boundingSphere.radius\r\n                };\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            /*\r\n\t\t\t // Handle primitives\r\n\r\n\t\t\t var parameters = this.parameters;\r\n\r\n\t\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t\t var values = [];\r\n\r\n\t\t\t for ( var key in parameters ) {\r\n\r\n\t\t\t values.push( parameters[ key ] );\r\n\r\n\t\t\t }\r\n\r\n\t\t\t var geometry = Object.create( this.constructor.prototype );\r\n\t\t\t this.constructor.apply( geometry, values );\r\n\t\t\t return geometry;\r\n\r\n\t\t\t }\r\n\r\n\t\t\t return new this.constructor().copy( this );\r\n\t\t\t */\r\n\r\n            return new BufferGeometry().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            var name, i, l;\r\n\r\n            // reset\r\n\r\n            this.index = null;\r\n            this.attributes = {};\r\n            this.morphAttributes = {};\r\n            this.groups = [];\r\n            this.boundingBox = null;\r\n            this.boundingSphere = null;\r\n\r\n            // name\r\n\r\n            this.name = source.name;\r\n\r\n            // index\r\n\r\n            var index = source.index;\r\n\r\n            if ( index !== null ) {\r\n\r\n                this.setIndex( index.clone() );\r\n\r\n            }\r\n\r\n            // attributes\r\n\r\n            var attributes = source.attributes;\r\n\r\n            for ( name in attributes ) {\r\n\r\n                var attribute = attributes[ name ];\r\n                this.addAttribute( name, attribute.clone() );\r\n\r\n            }\r\n\r\n            // morph attributes\r\n\r\n            var morphAttributes = source.morphAttributes;\r\n\r\n            for ( name in morphAttributes ) {\r\n\r\n                var array = [];\r\n                var morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n                for ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\r\n\r\n                    array.push( morphAttribute[ i ].clone() );\r\n\r\n                }\r\n\r\n                this.morphAttributes[ name ] = array;\r\n\r\n            }\r\n\r\n            // groups\r\n\r\n            var groups = source.groups;\r\n\r\n            for ( i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n                var group = groups[ i ];\r\n                this.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n            }\r\n\r\n            // bounding box\r\n\r\n            var boundingBox = source.boundingBox;\r\n\r\n            if ( boundingBox !== null ) {\r\n\r\n                this.boundingBox = boundingBox.clone();\r\n\r\n            }\r\n\r\n            // bounding sphere\r\n\r\n            var boundingSphere = source.boundingSphere;\r\n\r\n            if ( boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = boundingSphere.clone();\r\n\r\n            }\r\n\r\n            // draw range\r\n\r\n            this.drawRange.start = source.drawRange.start;\r\n            this.drawRange.count = source.drawRange.count;\r\n\r\n            // user data\r\n\r\n            this.userData = source.userData;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // BoxGeometry\r\n\r\n    function BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'BoxGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            depth: depth,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            depthSegments: depthSegments\r\n        };\r\n\r\n        this.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    BoxGeometry.prototype = Object.create( Geometry.prototype );\r\n    BoxGeometry.prototype.constructor = BoxGeometry;\r\n\r\n    // BoxBufferGeometry\r\n\r\n    function BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'BoxBufferGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            depth: depth,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            depthSegments: depthSegments\r\n        };\r\n\r\n        var scope = this;\r\n\r\n        width = width || 1;\r\n        height = height || 1;\r\n        depth = depth || 1;\r\n\r\n        // segments\r\n\r\n        widthSegments = Math.floor( widthSegments ) || 1;\r\n        heightSegments = Math.floor( heightSegments ) || 1;\r\n        depthSegments = Math.floor( depthSegments ) || 1;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var numberOfVertices = 0;\r\n        var groupStart = 0;\r\n\r\n        // build each side of the box geometry\r\n\r\n        buildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\r\n        buildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\r\n        buildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\r\n        buildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\r\n        buildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\r\n        buildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        function buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n            var segmentWidth = width / gridX;\r\n            var segmentHeight = height / gridY;\r\n\r\n            var widthHalf = width / 2;\r\n            var heightHalf = height / 2;\r\n            var depthHalf = depth / 2;\r\n\r\n            var gridX1 = gridX + 1;\r\n            var gridY1 = gridY + 1;\r\n\r\n            var vertexCounter = 0;\r\n            var groupCount = 0;\r\n\r\n            var ix, iy;\r\n\r\n            var vector = new Vector3();\r\n\r\n            // generate vertices, normals and uvs\r\n\r\n            for ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n                var y = iy * segmentHeight - heightHalf;\r\n\r\n                for ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n                    var x = ix * segmentWidth - widthHalf;\r\n\r\n                    // set values to correct vector component\r\n\r\n                    vector[ u ] = x * udir;\r\n                    vector[ v ] = y * vdir;\r\n                    vector[ w ] = depthHalf;\r\n\r\n                    // now apply vector to vertex buffer\r\n\r\n                    vertices.push( vector.x, vector.y, vector.z );\r\n\r\n                    // set values to correct vector component\r\n\r\n                    vector[ u ] = 0;\r\n                    vector[ v ] = 0;\r\n                    vector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n                    // now apply vector to normal buffer\r\n\r\n                    normals.push( vector.x, vector.y, vector.z );\r\n\r\n                    // uvs\r\n\r\n                    uvs.push( ix / gridX );\r\n                    uvs.push( 1 - ( iy / gridY ) );\r\n\r\n                    // counters\r\n\r\n                    vertexCounter += 1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // indices\r\n\r\n            // 1. you need three indices to draw a single face\r\n            // 2. a single segment consists of two faces\r\n            // 3. so we need to generate six (2*3) indices per segment\r\n\r\n            for ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n                for ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n                    var a = numberOfVertices + ix + gridX1 * iy;\r\n                    var b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n                    var c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n                    var d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n                    // faces\r\n\r\n                    indices.push( a, b, d );\r\n                    indices.push( b, c, d );\r\n\r\n                    // increase counter\r\n\r\n                    groupCount += 6;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // add a group to the geometry. this will ensure multi material support\r\n\r\n            scope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n            // calculate new start value for groups\r\n\r\n            groupStart += groupCount;\r\n\r\n            // update total number of vertices\r\n\r\n            numberOfVertices += vertexCounter;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    BoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    BoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // PlaneGeometry\r\n\r\n    function PlaneGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'PlaneGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments\r\n        };\r\n\r\n        this.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    PlaneGeometry.prototype = Object.create( Geometry.prototype );\r\n    PlaneGeometry.prototype.constructor = PlaneGeometry;\r\n\r\n    // PlaneBufferGeometry\r\n\r\n    function PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'PlaneBufferGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments\r\n        };\r\n\r\n        width = width || 1;\r\n        height = height || 1;\r\n\r\n        var width_half = width / 2;\r\n        var height_half = height / 2;\r\n\r\n        var gridX = Math.floor( widthSegments ) || 1;\r\n        var gridY = Math.floor( heightSegments ) || 1;\r\n\r\n        var gridX1 = gridX + 1;\r\n        var gridY1 = gridY + 1;\r\n\r\n        var segment_width = width / gridX;\r\n        var segment_height = height / gridY;\r\n\r\n        var ix, iy;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n            var y = iy * segment_height - height_half;\r\n\r\n            for ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n                var x = ix * segment_width - width_half;\r\n\r\n                vertices.push( x, - y, 0 );\r\n\r\n                normals.push( 0, 0, 1 );\r\n\r\n                uvs.push( ix / gridX );\r\n                uvs.push( 1 - ( iy / gridY ) );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n            for ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n                var a = ix + gridX1 * iy;\r\n                var b = ix + gridX1 * ( iy + 1 );\r\n                var c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n                var d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    PlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    PlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    var materialId = 0;\r\n\r\n    function Material() {\r\n\r\n        Object.defineProperty( this, 'id', { value: materialId ++ } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'Material';\r\n\r\n        this.fog = true;\r\n        this.lights = true;\r\n\r\n        this.blending = NormalBlending;\r\n        this.side = FrontSide;\r\n        this.flatShading = false;\r\n        this.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\r\n\r\n        this.opacity = 1;\r\n        this.transparent = false;\r\n\r\n        this.blendSrc = SrcAlphaFactor;\r\n        this.blendDst = OneMinusSrcAlphaFactor;\r\n        this.blendEquation = AddEquation;\r\n        this.blendSrcAlpha = null;\r\n        this.blendDstAlpha = null;\r\n        this.blendEquationAlpha = null;\r\n\r\n        this.depthFunc = LessEqualDepth;\r\n        this.depthTest = true;\r\n        this.depthWrite = true;\r\n\r\n        this.clippingPlanes = null;\r\n        this.clipIntersection = false;\r\n        this.clipShadows = false;\r\n\r\n        this.shadowSide = null;\r\n\r\n        this.colorWrite = true;\r\n\r\n        this.precision = null; // override the renderer's default precision for this material\r\n\r\n        this.polygonOffset = false;\r\n        this.polygonOffsetFactor = 0;\r\n        this.polygonOffsetUnits = 0;\r\n\r\n        this.dithering = false;\r\n\r\n        this.alphaTest = 0;\r\n        this.premultipliedAlpha = false;\r\n\r\n        this.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n        this.visible = true;\r\n\r\n        this.userData = {};\r\n\r\n        this.needsUpdate = true;\r\n\r\n    }\r\n\r\n    Material.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Material,\r\n\r\n        isMaterial: true,\r\n\r\n        onBeforeCompile: function () {},\r\n\r\n        setValues: function ( values ) {\r\n\r\n            if ( values === undefined ) return;\r\n\r\n            for ( var key in values ) {\r\n\r\n                var newValue = values[ key ];\r\n\r\n                if ( newValue === undefined ) {\r\n\r\n                    console.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n                    continue;\r\n\r\n                }\r\n\r\n                // for backward compatability if shading is set in the constructor\r\n                if ( key === 'shading' ) {\r\n\r\n                    console.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n                    this.flatShading = ( newValue === FlatShading ) ? true : false;\r\n                    continue;\r\n\r\n                }\r\n\r\n                var currentValue = this[ key ];\r\n\r\n                if ( currentValue === undefined ) {\r\n\r\n                    console.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n                    continue;\r\n\r\n                }\r\n\r\n                if ( currentValue && currentValue.isColor ) {\r\n\r\n                    currentValue.set( newValue );\r\n\r\n                } else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\r\n\r\n                    currentValue.copy( newValue );\r\n\r\n                } else if ( key === 'overdraw' ) {\r\n\r\n                    // ensure overdraw is backwards-compatible with legacy boolean type\r\n                    this[ key ] = Number( newValue );\r\n\r\n                } else {\r\n\r\n                    this[ key ] = newValue;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var isRoot = ( meta === undefined || typeof meta === 'string' );\r\n\r\n            if ( isRoot ) {\r\n\r\n                meta = {\r\n                    textures: {},\r\n                    images: {}\r\n                };\r\n\r\n            }\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Material',\r\n                    generator: 'Material.toJSON'\r\n                }\r\n            };\r\n\r\n            // standard Material serialization\r\n            data.uuid = this.uuid;\r\n            data.type = this.type;\r\n\r\n            if ( this.name !== '' ) data.name = this.name;\r\n\r\n            if ( this.color && this.color.isColor ) data.color = this.color.getHex();\r\n\r\n            if ( this.roughness !== undefined ) data.roughness = this.roughness;\r\n            if ( this.metalness !== undefined ) data.metalness = this.metalness;\r\n\r\n            if ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\r\n            if ( this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\r\n\r\n            if ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\r\n            if ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n            if ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\r\n            if ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\r\n\r\n            if ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\r\n            if ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n            if ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\r\n            if ( this.aoMap && this.aoMap.isTexture ) {\r\n\r\n                data.aoMap = this.aoMap.toJSON( meta ).uuid;\r\n                data.aoMapIntensity = this.aoMapIntensity;\r\n\r\n            }\r\n\r\n            if ( this.bumpMap && this.bumpMap.isTexture ) {\r\n\r\n                data.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n                data.bumpScale = this.bumpScale;\r\n\r\n            }\r\n\r\n            if ( this.normalMap && this.normalMap.isTexture ) {\r\n\r\n                data.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n                data.normalScale = this.normalScale.toArray();\r\n\r\n            }\r\n\r\n            if ( this.displacementMap && this.displacementMap.isTexture ) {\r\n\r\n                data.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n                data.displacementScale = this.displacementScale;\r\n                data.displacementBias = this.displacementBias;\r\n\r\n            }\r\n\r\n            if ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n            if ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n            if ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n            if ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n            if ( this.envMap && this.envMap.isTexture ) {\r\n\r\n                data.envMap = this.envMap.toJSON( meta ).uuid;\r\n                data.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n            }\r\n\r\n            if ( this.gradientMap && this.gradientMap.isTexture ) {\r\n\r\n                data.gradientMap = this.gradientMap.toJSON( meta ).uuid;\r\n\r\n            }\r\n\r\n            if ( this.size !== undefined ) data.size = this.size;\r\n            if ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n            if ( this.blending !== NormalBlending ) data.blending = this.blending;\r\n            if ( this.flatShading === true ) data.flatShading = this.flatShading;\r\n            if ( this.side !== FrontSide ) data.side = this.side;\r\n            if ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\r\n\r\n            if ( this.opacity < 1 ) data.opacity = this.opacity;\r\n            if ( this.transparent === true ) data.transparent = this.transparent;\r\n\r\n            data.depthFunc = this.depthFunc;\r\n            data.depthTest = this.depthTest;\r\n            data.depthWrite = this.depthWrite;\r\n\r\n            // rotation (SpriteMaterial)\r\n            if ( this.rotation !== 0 ) data.rotation = this.rotation;\r\n\r\n            if ( this.linewidth !== 1 ) data.linewidth = this.linewidth;\r\n            if ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\r\n            if ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\r\n            if ( this.scale !== undefined ) data.scale = this.scale;\r\n\r\n            if ( this.dithering === true ) data.dithering = true;\r\n\r\n            if ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n            if ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\r\n            if ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n            if ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n            if ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\r\n            if ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n            if ( this.morphTargets === true ) data.morphTargets = true;\r\n            if ( this.skinning === true ) data.skinning = true;\r\n\r\n            if ( this.visible === false ) data.visible = false;\r\n            if ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\r\n            // TODO: Copied from Object3D.toJSON\r\n\r\n            function extractFromCache( cache ) {\r\n\r\n                var values = [];\r\n\r\n                for ( var key in cache ) {\r\n\r\n                    var data = cache[ key ];\r\n                    delete data.metadata;\r\n                    values.push( data );\r\n\r\n                }\r\n\r\n                return values;\r\n\r\n            }\r\n\r\n            if ( isRoot ) {\r\n\r\n                var textures = extractFromCache( meta.textures );\r\n                var images = extractFromCache( meta.images );\r\n\r\n                if ( textures.length > 0 ) data.textures = textures;\r\n                if ( images.length > 0 ) data.images = images;\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.name = source.name;\r\n\r\n            this.fog = source.fog;\r\n            this.lights = source.lights;\r\n\r\n            this.blending = source.blending;\r\n            this.side = source.side;\r\n            this.flatShading = source.flatShading;\r\n            this.vertexColors = source.vertexColors;\r\n\r\n            this.opacity = source.opacity;\r\n            this.transparent = source.transparent;\r\n\r\n            this.blendSrc = source.blendSrc;\r\n            this.blendDst = source.blendDst;\r\n            this.blendEquation = source.blendEquation;\r\n            this.blendSrcAlpha = source.blendSrcAlpha;\r\n            this.blendDstAlpha = source.blendDstAlpha;\r\n            this.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n            this.depthFunc = source.depthFunc;\r\n            this.depthTest = source.depthTest;\r\n            this.depthWrite = source.depthWrite;\r\n\r\n            this.colorWrite = source.colorWrite;\r\n\r\n            this.precision = source.precision;\r\n\r\n            this.polygonOffset = source.polygonOffset;\r\n            this.polygonOffsetFactor = source.polygonOffsetFactor;\r\n            this.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n            this.dithering = source.dithering;\r\n\r\n            this.alphaTest = source.alphaTest;\r\n            this.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n            this.overdraw = source.overdraw;\r\n\r\n            this.visible = source.visible;\r\n            this.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n            this.clipShadows = source.clipShadows;\r\n            this.clipIntersection = source.clipIntersection;\r\n\r\n            var srcPlanes = source.clippingPlanes,\r\n                dstPlanes = null;\r\n\r\n            if ( srcPlanes !== null ) {\r\n\r\n                var n = srcPlanes.length;\r\n                dstPlanes = new Array( n );\r\n\r\n                for ( var i = 0; i !== n; ++ i )\r\n                    dstPlanes[ i ] = srcPlanes[ i ].clone();\r\n\r\n            }\r\n\r\n            this.clippingPlanes = dstPlanes;\r\n\r\n            this.shadowSide = source.shadowSide;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshBasicMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshBasicMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // emissive\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.specularMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.combine = MultiplyOperation;\r\n        this.reflectivity = 1;\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshBasicMaterial.prototype = Object.create( Material.prototype );\r\n    MeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\r\n\r\n    MeshBasicMaterial.prototype.isMeshBasicMaterial = true;\r\n\r\n    MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.specularMap = source.specularMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.combine = source.combine;\r\n        this.reflectivity = source.reflectivity;\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  defines: { \"label\" : \"value\" },\r\n\t *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\r\n\t *\r\n\t *  fragmentShader: <string>,\r\n\t *  vertexShader: <string>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  lights: <bool>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function ShaderMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'ShaderMaterial';\r\n\r\n        this.defines = {};\r\n        this.uniforms = {};\r\n\r\n        this.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n        this.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n        this.linewidth = 1;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n\r\n        this.fog = false; // set to use scene fog\r\n        this.lights = false; // set to use scene lights\r\n        this.clipping = false; // set to use user-defined clipping planes\r\n\r\n        this.skinning = false; // set to use skinning attribute streams\r\n        this.morphTargets = false; // set to use morph targets\r\n        this.morphNormals = false; // set to use morph normals\r\n\r\n        this.extensions = {\r\n            derivatives: false, // set to use derivatives\r\n            fragDepth: false, // set to use fragment depth values\r\n            drawBuffers: false, // set to use draw buffers\r\n            shaderTextureLOD: false // set to use shader texture LOD\r\n        };\r\n\r\n        // When rendered geometry doesn't include these attributes but the material does,\r\n        // use these default values in WebGL. This avoids errors when buffer data is missing.\r\n        this.defaultAttributeValues = {\r\n            'color': [ 1, 1, 1 ],\r\n            'uv': [ 0, 0 ],\r\n            'uv2': [ 0, 0 ]\r\n        };\r\n\r\n        this.index0AttributeName = undefined;\r\n        this.uniformsNeedUpdate = false;\r\n\r\n        if ( parameters !== undefined ) {\r\n\r\n            if ( parameters.attributes !== undefined ) {\r\n\r\n                console.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n            }\r\n\r\n            this.setValues( parameters );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    ShaderMaterial.prototype = Object.create( Material.prototype );\r\n    ShaderMaterial.prototype.constructor = ShaderMaterial;\r\n\r\n    ShaderMaterial.prototype.isShaderMaterial = true;\r\n\r\n    ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.fragmentShader = source.fragmentShader;\r\n        this.vertexShader = source.vertexShader;\r\n\r\n        this.uniforms = UniformsUtils.clone( source.uniforms );\r\n\r\n        this.defines = Object.assign( {}, source.defines );\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n        this.lights = source.lights;\r\n        this.clipping = source.clipping;\r\n\r\n        this.skinning = source.skinning;\r\n\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        this.extensions = source.extensions;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n        var data = Material.prototype.toJSON.call( this, meta );\r\n\r\n        data.uniforms = this.uniforms;\r\n        data.vertexShader = this.vertexShader;\r\n        data.fragmentShader = this.fragmentShader;\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Ray( origin, direction ) {\r\n\r\n        this.origin = ( origin !== undefined ) ? origin : new Vector3();\r\n        this.direction = ( direction !== undefined ) ? direction : new Vector3();\r\n\r\n    }\r\n\r\n    Object.assign( Ray.prototype, {\r\n\r\n        set: function ( origin, direction ) {\r\n\r\n            this.origin.copy( origin );\r\n            this.direction.copy( direction );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( ray ) {\r\n\r\n            this.origin.copy( ray.origin );\r\n            this.direction.copy( ray.direction );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        at: function ( t, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Ray: .at() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n        },\r\n\r\n        lookAt: function ( v ) {\r\n\r\n            this.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        recast: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function recast( t ) {\r\n\r\n                this.origin.copy( this.at( t, v1 ) );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        closestPointToPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            target.subVectors( point, this.origin );\r\n\r\n            var directionDistance = target.dot( this.direction );\r\n\r\n            if ( directionDistance < 0 ) {\r\n\r\n                return target.copy( this.origin );\r\n\r\n            }\r\n\r\n            return target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n        },\r\n\r\n        distanceToPoint: function ( point ) {\r\n\r\n            return Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n        },\r\n\r\n        distanceSqToPoint: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function distanceSqToPoint( point ) {\r\n\r\n                var directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n                // point behind the ray\r\n\r\n                if ( directionDistance < 0 ) {\r\n\r\n                    return this.origin.distanceToSquared( point );\r\n\r\n                }\r\n\r\n                v1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n                return v1.distanceToSquared( point );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        distanceSqToSegment: function () {\r\n\r\n            var segCenter = new Vector3();\r\n            var segDir = new Vector3();\r\n            var diff = new Vector3();\r\n\r\n            return function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n                // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\r\n                // It returns the min distance between the ray and the segment\r\n                // defined by v0 and v1\r\n                // It can also set two optional targets :\r\n                // - The closest point on the ray\r\n                // - The closest point on the segment\r\n\r\n                segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n                segDir.copy( v1 ).sub( v0 ).normalize();\r\n                diff.copy( this.origin ).sub( segCenter );\r\n\r\n                var segExtent = v0.distanceTo( v1 ) * 0.5;\r\n                var a01 = - this.direction.dot( segDir );\r\n                var b0 = diff.dot( this.direction );\r\n                var b1 = - diff.dot( segDir );\r\n                var c = diff.lengthSq();\r\n                var det = Math.abs( 1 - a01 * a01 );\r\n                var s0, s1, sqrDist, extDet;\r\n\r\n                if ( det > 0 ) {\r\n\r\n                    // The ray and segment are not parallel.\r\n\r\n                    s0 = a01 * b1 - b0;\r\n                    s1 = a01 * b0 - b1;\r\n                    extDet = segExtent * det;\r\n\r\n                    if ( s0 >= 0 ) {\r\n\r\n                        if ( s1 >= - extDet ) {\r\n\r\n                            if ( s1 <= extDet ) {\r\n\r\n                                // region 0\r\n                                // Minimum at interior points of ray and segment.\r\n\r\n                                var invDet = 1 / det;\r\n                                s0 *= invDet;\r\n                                s1 *= invDet;\r\n                                sqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n                            } else {\r\n\r\n                                // region 1\r\n\r\n                                s1 = segExtent;\r\n                                s0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n                                sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            // region 5\r\n\r\n                            s1 = - segExtent;\r\n                            s0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n                            sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        if ( s1 <= - extDet ) {\r\n\r\n                            // region 4\r\n\r\n                            s0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n                            s1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n                            sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        } else if ( s1 <= extDet ) {\r\n\r\n                            // region 3\r\n\r\n                            s0 = 0;\r\n                            s1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n                            sqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        } else {\r\n\r\n                            // region 2\r\n\r\n                            s0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n                            s1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n                            sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Ray and segment are parallel.\r\n\r\n                    s1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n                    s0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n                    sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                }\r\n\r\n                if ( optionalPointOnRay ) {\r\n\r\n                    optionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n                }\r\n\r\n                if ( optionalPointOnSegment ) {\r\n\r\n                    optionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n                }\r\n\r\n                return sqrDist;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectSphere: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function intersectSphere( sphere, target ) {\r\n\r\n                v1.subVectors( sphere.center, this.origin );\r\n                var tca = v1.dot( this.direction );\r\n                var d2 = v1.dot( v1 ) - tca * tca;\r\n                var radius2 = sphere.radius * sphere.radius;\r\n\r\n                if ( d2 > radius2 ) return null;\r\n\r\n                var thc = Math.sqrt( radius2 - d2 );\r\n\r\n                // t0 = first intersect point - entrance on front of sphere\r\n                var t0 = tca - thc;\r\n\r\n                // t1 = second intersect point - exit point on back of sphere\r\n                var t1 = tca + thc;\r\n\r\n                // test to see if both t0 and t1 are behind the ray - if so, return null\r\n                if ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n                // test to see if t0 is behind the ray:\r\n                // if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n                // in order to always return an intersect point that is in front of the ray.\r\n                if ( t0 < 0 ) return this.at( t1, target );\r\n\r\n                // else t0 is in front of the ray, so return the first collision point scaled by t0\r\n                return this.at( t0, target );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            return this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n        },\r\n\r\n        distanceToPlane: function ( plane ) {\r\n\r\n            var denominator = plane.normal.dot( this.direction );\r\n\r\n            if ( denominator === 0 ) {\r\n\r\n                // line is coplanar, return origin\r\n                if ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n                    return 0;\r\n\r\n                }\r\n\r\n                // Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n            var t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n            // Return if the ray never intersects the plane\r\n\r\n            return t >= 0 ? t : null;\r\n\r\n        },\r\n\r\n        intersectPlane: function ( plane, target ) {\r\n\r\n            var t = this.distanceToPlane( plane );\r\n\r\n            if ( t === null ) {\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n            return this.at( t, target );\r\n\r\n        },\r\n\r\n        intersectsPlane: function ( plane ) {\r\n\r\n            // check if the ray lies on the plane first\r\n\r\n            var distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n            if ( distToPoint === 0 ) {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            var denominator = plane.normal.dot( this.direction );\r\n\r\n            if ( denominator * distToPoint < 0 ) {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            // ray origin is behind the plane (and is pointing behind it)\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n        intersectBox: function ( box, target ) {\r\n\r\n            var tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n            var invdirx = 1 / this.direction.x,\r\n                invdiry = 1 / this.direction.y,\r\n                invdirz = 1 / this.direction.z;\r\n\r\n            var origin = this.origin;\r\n\r\n            if ( invdirx >= 0 ) {\r\n\r\n                tmin = ( box.min.x - origin.x ) * invdirx;\r\n                tmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n            } else {\r\n\r\n                tmin = ( box.max.x - origin.x ) * invdirx;\r\n                tmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n            }\r\n\r\n            if ( invdiry >= 0 ) {\r\n\r\n                tymin = ( box.min.y - origin.y ) * invdiry;\r\n                tymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n            } else {\r\n\r\n                tymin = ( box.max.y - origin.y ) * invdiry;\r\n                tymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n            }\r\n\r\n            if ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n            // These lines also handle the case where tmin or tmax is NaN\r\n            // (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n            if ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n            if ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n            if ( invdirz >= 0 ) {\r\n\r\n                tzmin = ( box.min.z - origin.z ) * invdirz;\r\n                tzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n            } else {\r\n\r\n                tzmin = ( box.max.z - origin.z ) * invdirz;\r\n                tzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n            }\r\n\r\n            if ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n            if ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n            if ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n            //return point closest to the ray (positive side)\r\n\r\n            if ( tmax < 0 ) return null;\r\n\r\n            return this.at( tmin >= 0 ? tmin : tmax, target );\r\n\r\n        },\r\n\r\n        intersectsBox: ( function () {\r\n\r\n            var v = new Vector3();\r\n\r\n            return function intersectsBox( box ) {\r\n\r\n                return this.intersectBox( box, v ) !== null;\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        intersectTriangle: function () {\r\n\r\n            // Compute the offset origin, edges, and normal.\r\n            var diff = new Vector3();\r\n            var edge1 = new Vector3();\r\n            var edge2 = new Vector3();\r\n            var normal = new Vector3();\r\n\r\n            return function intersectTriangle( a, b, c, backfaceCulling, target ) {\r\n\r\n                // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\r\n\r\n                edge1.subVectors( b, a );\r\n                edge2.subVectors( c, a );\r\n                normal.crossVectors( edge1, edge2 );\r\n\r\n                // Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n                // E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n                //   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n                //   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n                //   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n                var DdN = this.direction.dot( normal );\r\n                var sign;\r\n\r\n                if ( DdN > 0 ) {\r\n\r\n                    if ( backfaceCulling ) return null;\r\n                    sign = 1;\r\n\r\n                } else if ( DdN < 0 ) {\r\n\r\n                    sign = - 1;\r\n                    DdN = - DdN;\r\n\r\n                } else {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                diff.subVectors( this.origin, a );\r\n                var DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n                // b1 < 0, no intersection\r\n                if ( DdQxE2 < 0 ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                var DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n                // b2 < 0, no intersection\r\n                if ( DdE1xQ < 0 ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                // b1+b2 > 1, no intersection\r\n                if ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                // Line intersects triangle, check if ray does.\r\n                var QdN = - sign * diff.dot( normal );\r\n\r\n                // t < 0, no intersection\r\n                if ( QdN < 0 ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                // Ray intersects triangle.\r\n                return this.at( QdN / DdN, target );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        applyMatrix4: function ( matrix4 ) {\r\n\r\n            this.origin.applyMatrix4( matrix4 );\r\n            this.direction.transformDirection( matrix4 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( ray ) {\r\n\r\n            return ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Line3( start, end ) {\r\n\r\n        this.start = ( start !== undefined ) ? start : new Vector3();\r\n        this.end = ( end !== undefined ) ? end : new Vector3();\r\n\r\n    }\r\n\r\n    Object.assign( Line3.prototype, {\r\n\r\n        set: function ( start, end ) {\r\n\r\n            this.start.copy( start );\r\n            this.end.copy( end );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( line ) {\r\n\r\n            this.start.copy( line.start );\r\n            this.end.copy( line.end );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getCenter: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .getCenter() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n        },\r\n\r\n        delta: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .delta() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.subVectors( this.end, this.start );\r\n\r\n        },\r\n\r\n        distanceSq: function () {\r\n\r\n            return this.start.distanceToSquared( this.end );\r\n\r\n        },\r\n\r\n        distance: function () {\r\n\r\n            return this.start.distanceTo( this.end );\r\n\r\n        },\r\n\r\n        at: function ( t, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .at() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n        },\r\n\r\n        closestPointToPointParameter: function () {\r\n\r\n            var startP = new Vector3();\r\n            var startEnd = new Vector3();\r\n\r\n            return function closestPointToPointParameter( point, clampToLine ) {\r\n\r\n                startP.subVectors( point, this.start );\r\n                startEnd.subVectors( this.end, this.start );\r\n\r\n                var startEnd2 = startEnd.dot( startEnd );\r\n                var startEnd_startP = startEnd.dot( startP );\r\n\r\n                var t = startEnd_startP / startEnd2;\r\n\r\n                if ( clampToLine ) {\r\n\r\n                    t = _Math.clamp( t, 0, 1 );\r\n\r\n                }\r\n\r\n                return t;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        closestPointToPoint: function ( point, clampToLine, target ) {\r\n\r\n            var t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( matrix ) {\r\n\r\n            this.start.applyMatrix4( matrix );\r\n            this.end.applyMatrix4( matrix );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( line ) {\r\n\r\n            return line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Triangle( a, b, c ) {\r\n\r\n        this.a = ( a !== undefined ) ? a : new Vector3();\r\n        this.b = ( b !== undefined ) ? b : new Vector3();\r\n        this.c = ( c !== undefined ) ? c : new Vector3();\r\n\r\n    }\r\n\r\n    Object.assign( Triangle, {\r\n\r\n        getNormal: function () {\r\n\r\n            var v0 = new Vector3();\r\n\r\n            return function getNormal( a, b, c, target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Triangle: .getNormal() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                target.subVectors( c, b );\r\n                v0.subVectors( a, b );\r\n                target.cross( v0 );\r\n\r\n                var targetLengthSq = target.lengthSq();\r\n                if ( targetLengthSq > 0 ) {\r\n\r\n                    return target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\r\n\r\n                }\r\n\r\n                return target.set( 0, 0, 0 );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        // static/instance method to calculate barycentric coordinates\r\n        // based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\n        getBarycoord: function () {\r\n\r\n            var v0 = new Vector3();\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            return function getBarycoord( point, a, b, c, target ) {\r\n\r\n                v0.subVectors( c, a );\r\n                v1.subVectors( b, a );\r\n                v2.subVectors( point, a );\r\n\r\n                var dot00 = v0.dot( v0 );\r\n                var dot01 = v0.dot( v1 );\r\n                var dot02 = v0.dot( v2 );\r\n                var dot11 = v1.dot( v1 );\r\n                var dot12 = v1.dot( v2 );\r\n\r\n                var denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                // collinear or singular triangle\r\n                if ( denom === 0 ) {\r\n\r\n                    // arbitrary location outside of triangle?\r\n                    // not sure if this is the best idea, maybe should be returning undefined\r\n                    return target.set( - 2, - 1, - 1 );\r\n\r\n                }\r\n\r\n                var invDenom = 1 / denom;\r\n                var u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n                var v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n                // barycentric coordinates must always sum to 1\r\n                return target.set( 1 - u - v, v, u );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        containsPoint: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function containsPoint( point, a, b, c ) {\r\n\r\n                Triangle.getBarycoord( point, a, b, c, v1 );\r\n\r\n                return ( v1.x >= 0 ) && ( v1.y >= 0 ) && ( ( v1.x + v1.y ) <= 1 );\r\n\r\n            };\r\n\r\n        }()\r\n\r\n    } );\r\n\r\n    Object.assign( Triangle.prototype, {\r\n\r\n        set: function ( a, b, c ) {\r\n\r\n            this.a.copy( a );\r\n            this.b.copy( b );\r\n            this.c.copy( c );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n            this.a.copy( points[ i0 ] );\r\n            this.b.copy( points[ i1 ] );\r\n            this.c.copy( points[ i2 ] );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( triangle ) {\r\n\r\n            this.a.copy( triangle.a );\r\n            this.b.copy( triangle.b );\r\n            this.c.copy( triangle.c );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getArea: function () {\r\n\r\n            var v0 = new Vector3();\r\n            var v1 = new Vector3();\r\n\r\n            return function getArea() {\r\n\r\n                v0.subVectors( this.c, this.b );\r\n                v1.subVectors( this.a, this.b );\r\n\r\n                return v0.cross( v1 ).length() * 0.5;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getMidpoint: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n        },\r\n\r\n        getNormal: function ( target ) {\r\n\r\n            return Triangle.getNormal( this.a, this.b, this.c, target );\r\n\r\n        },\r\n\r\n        getPlane: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Triangle: .getPlane() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n        },\r\n\r\n        getBarycoord: function ( point, target ) {\r\n\r\n            return Triangle.getBarycoord( point, this.a, this.b, this.c, target );\r\n\r\n        },\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            return box.intersectsTriangle( this );\r\n\r\n        },\r\n\r\n        closestPointToPoint: function () {\r\n\r\n            var plane = new Plane();\r\n            var edgeList = [ new Line3(), new Line3(), new Line3() ];\r\n            var projectedPoint = new Vector3();\r\n            var closestPoint = new Vector3();\r\n\r\n            return function closestPointToPoint( point, target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                var minDistance = Infinity;\r\n\r\n                // project the point onto the plane of the triangle\r\n\r\n                plane.setFromCoplanarPoints( this.a, this.b, this.c );\r\n                plane.projectPoint( point, projectedPoint );\r\n\r\n                // check if the projection lies within the triangle\r\n\r\n                if ( this.containsPoint( projectedPoint ) === true ) {\r\n\r\n                    // if so, this is the closest point\r\n\r\n                    target.copy( projectedPoint );\r\n\r\n                } else {\r\n\r\n                    // if not, the point falls outside the triangle. the target is the closest point to the triangle's edges or vertices\r\n\r\n                    edgeList[ 0 ].set( this.a, this.b );\r\n                    edgeList[ 1 ].set( this.b, this.c );\r\n                    edgeList[ 2 ].set( this.c, this.a );\r\n\r\n                    for ( var i = 0; i < edgeList.length; i ++ ) {\r\n\r\n                        edgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\r\n\r\n                        var distance = projectedPoint.distanceToSquared( closestPoint );\r\n\r\n                        if ( distance < minDistance ) {\r\n\r\n                            minDistance = distance;\r\n\r\n                            target.copy( closestPoint );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        equals: function ( triangle ) {\r\n\r\n            return triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author jonobr1 / http://jonobr1.com/\r\n     */\r\n\r\n    function Mesh( geometry, material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Mesh';\r\n\r\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n        this.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n        this.drawMode = TrianglesDrawMode;\r\n\r\n        this.updateMorphTargets();\r\n\r\n    }\r\n\r\n    Mesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Mesh,\r\n\r\n        isMesh: true,\r\n\r\n        setDrawMode: function ( value ) {\r\n\r\n            this.drawMode = value;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source );\r\n\r\n            this.drawMode = source.drawMode;\r\n\r\n            if ( source.morphTargetInfluences !== undefined ) {\r\n\r\n                this.morphTargetInfluences = source.morphTargetInfluences.slice();\r\n\r\n            }\r\n\r\n            if ( source.morphTargetDictionary !== undefined ) {\r\n\r\n                this.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        updateMorphTargets: function () {\r\n\r\n            var geometry = this.geometry;\r\n            var m, ml, name;\r\n\r\n            if ( geometry.isBufferGeometry ) {\r\n\r\n                var morphAttributes = geometry.morphAttributes;\r\n                var keys = Object.keys( morphAttributes );\r\n\r\n                if ( keys.length > 0 ) {\r\n\r\n                    var morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n                    if ( morphAttribute !== undefined ) {\r\n\r\n                        this.morphTargetInfluences = [];\r\n                        this.morphTargetDictionary = {};\r\n\r\n                        for ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n                            name = morphAttribute[ m ].name || String( m );\r\n\r\n                            this.morphTargetInfluences.push( 0 );\r\n                            this.morphTargetDictionary[ name ] = m;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                var morphTargets = geometry.morphTargets;\r\n\r\n                if ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n                    this.morphTargetInfluences = [];\r\n                    this.morphTargetDictionary = {};\r\n\r\n                    for ( m = 0, ml = morphTargets.length; m < ml; m ++ ) {\r\n\r\n                        name = morphTargets[ m ].name || String( m );\r\n\r\n                        this.morphTargetInfluences.push( 0 );\r\n                        this.morphTargetDictionary[ name ] = m;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        raycast: ( function () {\r\n\r\n            var inverseMatrix = new Matrix4();\r\n            var ray = new Ray();\r\n            var sphere = new Sphere();\r\n\r\n            var vA = new Vector3();\r\n            var vB = new Vector3();\r\n            var vC = new Vector3();\r\n\r\n            var tempA = new Vector3();\r\n            var tempB = new Vector3();\r\n            var tempC = new Vector3();\r\n\r\n            var uvA = new Vector2();\r\n            var uvB = new Vector2();\r\n            var uvC = new Vector2();\r\n\r\n            var barycoord = new Vector3();\r\n\r\n            var intersectionPoint = new Vector3();\r\n            var intersectionPointWorld = new Vector3();\r\n\r\n            function uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n                Triangle.getBarycoord( point, p1, p2, p3, barycoord );\r\n\r\n                uv1.multiplyScalar( barycoord.x );\r\n                uv2.multiplyScalar( barycoord.y );\r\n                uv3.multiplyScalar( barycoord.z );\r\n\r\n                uv1.add( uv2 ).add( uv3 );\r\n\r\n                return uv1.clone();\r\n\r\n            }\r\n\r\n            function checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n                var intersect;\r\n\r\n                if ( material.side === BackSide ) {\r\n\r\n                    intersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n                } else {\r\n\r\n                    intersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n                }\r\n\r\n                if ( intersect === null ) return null;\r\n\r\n                intersectionPointWorld.copy( point );\r\n                intersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n                var distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n                if ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n                return {\r\n                    distance: distance,\r\n                    point: intersectionPointWorld.clone(),\r\n                    object: object\r\n                };\r\n\r\n            }\r\n\r\n            function checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\r\n\r\n                vA.fromBufferAttribute( position, a );\r\n                vB.fromBufferAttribute( position, b );\r\n                vC.fromBufferAttribute( position, c );\r\n\r\n                var intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n                if ( intersection ) {\r\n\r\n                    if ( uv ) {\r\n\r\n                        uvA.fromBufferAttribute( uv, a );\r\n                        uvB.fromBufferAttribute( uv, b );\r\n                        uvC.fromBufferAttribute( uv, c );\r\n\r\n                        intersection.uv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\r\n                    }\r\n\r\n                    var face = new Face3( a, b, c );\r\n                    Triangle.getNormal( vA, vB, vC, face.normal );\r\n\r\n                    intersection.face = face;\r\n\r\n                }\r\n\r\n                return intersection;\r\n\r\n            }\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                var geometry = this.geometry;\r\n                var material = this.material;\r\n                var matrixWorld = this.matrixWorld;\r\n\r\n                if ( material === undefined ) return;\r\n\r\n                // Checking boundingSphere distance to ray\r\n\r\n                if ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere );\r\n                sphere.applyMatrix4( matrixWorld );\r\n\r\n                if ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n                //\r\n\r\n                inverseMatrix.getInverse( matrixWorld );\r\n                ray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n                // Check boundingBox before continuing\r\n\r\n                if ( geometry.boundingBox !== null ) {\r\n\r\n                    if ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n                }\r\n\r\n                var intersection;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    var a, b, c;\r\n                    var index = geometry.index;\r\n                    var position = geometry.attributes.position;\r\n                    var uv = geometry.attributes.uv;\r\n                    var i, l;\r\n\r\n                    if ( index !== null ) {\r\n\r\n                        // indexed buffer geometry\r\n\r\n                        for ( i = 0, l = index.count; i < l; i += 3 ) {\r\n\r\n                            a = index.getX( i );\r\n                            b = index.getX( i + 1 );\r\n                            c = index.getX( i + 2 );\r\n\r\n                            intersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\r\n\r\n                            if ( intersection ) {\r\n\r\n                                intersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\r\n                                intersects.push( intersection );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else if ( position !== undefined ) {\r\n\r\n                        // non-indexed buffer geometry\r\n\r\n                        for ( i = 0, l = position.count; i < l; i += 3 ) {\r\n\r\n                            a = i;\r\n                            b = i + 1;\r\n                            c = i + 2;\r\n\r\n                            intersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\r\n\r\n                            if ( intersection ) {\r\n\r\n                                intersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\r\n                                intersects.push( intersection );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var fvA, fvB, fvC;\r\n                    var isMultiMaterial = Array.isArray( material );\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var faces = geometry.faces;\r\n                    var uvs;\r\n\r\n                    var faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n                    if ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n                    for ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n                        var face = faces[ f ];\r\n                        var faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\r\n\r\n                        if ( faceMaterial === undefined ) continue;\r\n\r\n                        fvA = vertices[ face.a ];\r\n                        fvB = vertices[ face.b ];\r\n                        fvC = vertices[ face.c ];\r\n\r\n                        if ( faceMaterial.morphTargets === true ) {\r\n\r\n                            var morphTargets = geometry.morphTargets;\r\n                            var morphInfluences = this.morphTargetInfluences;\r\n\r\n                            vA.set( 0, 0, 0 );\r\n                            vB.set( 0, 0, 0 );\r\n                            vC.set( 0, 0, 0 );\r\n\r\n                            for ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n                                var influence = morphInfluences[ t ];\r\n\r\n                                if ( influence === 0 ) continue;\r\n\r\n                                var targets = morphTargets[ t ].vertices;\r\n\r\n                                vA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\r\n                                vB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\r\n                                vC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\r\n\r\n                            }\r\n\r\n                            vA.add( fvA );\r\n                            vB.add( fvB );\r\n                            vC.add( fvC );\r\n\r\n                            fvA = vA;\r\n                            fvB = vB;\r\n                            fvC = vC;\r\n\r\n                        }\r\n\r\n                        intersection = checkIntersection( this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\r\n\r\n                        if ( intersection ) {\r\n\r\n                            if ( uvs && uvs[ f ] ) {\r\n\r\n                                var uvs_f = uvs[ f ];\r\n                                uvA.copy( uvs_f[ 0 ] );\r\n                                uvB.copy( uvs_f[ 1 ] );\r\n                                uvC.copy( uvs_f[ 2 ] );\r\n\r\n                                intersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\r\n\r\n                            }\r\n\r\n                            intersection.face = face;\r\n                            intersection.faceIndex = f;\r\n                            intersects.push( intersection );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\r\n\r\n        var clearColor = new Color( 0x000000 );\r\n        var clearAlpha = 0;\r\n\r\n        var planeCamera, planeMesh;\r\n        var boxMesh;\r\n\r\n        function render( renderList, scene, camera, forceClear ) {\r\n\r\n            var background = scene.background;\r\n\r\n            if ( background === null ) {\r\n\r\n                setClear( clearColor, clearAlpha );\r\n\r\n            } else if ( background && background.isColor ) {\r\n\r\n                setClear( background, 1 );\r\n                forceClear = true;\r\n\r\n            }\r\n\r\n            if ( renderer.autoClear || forceClear ) {\r\n\r\n                renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\r\n\r\n            }\r\n\r\n            if ( background && background.isCubeTexture ) {\r\n\r\n                if ( boxMesh === undefined ) {\r\n\r\n                    boxMesh = new Mesh(\r\n                        new BoxBufferGeometry( 1, 1, 1 ),\r\n                        new ShaderMaterial( {\r\n                            uniforms: ShaderLib.cube.uniforms,\r\n                            vertexShader: ShaderLib.cube.vertexShader,\r\n                            fragmentShader: ShaderLib.cube.fragmentShader,\r\n                            side: BackSide,\r\n                            depthTest: true,\r\n                            depthWrite: false,\r\n                            fog: false\r\n                        } )\r\n                    );\r\n\r\n                    boxMesh.geometry.removeAttribute( 'normal' );\r\n                    boxMesh.geometry.removeAttribute( 'uv' );\r\n\r\n                    boxMesh.onBeforeRender = function ( renderer, scene, camera ) {\r\n\r\n                        this.matrixWorld.copyPosition( camera.matrixWorld );\r\n\r\n                    };\r\n\r\n                    objects.update( boxMesh );\r\n\r\n                }\r\n\r\n                boxMesh.material.uniforms.tCube.value = background;\r\n\r\n                renderList.push( boxMesh, boxMesh.geometry, boxMesh.material, 0, null );\r\n\r\n            } else if ( background && background.isTexture ) {\r\n\r\n                if ( planeCamera === undefined ) {\r\n\r\n                    planeCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\r\n                    planeMesh = new Mesh(\r\n                        new PlaneBufferGeometry( 2, 2 ),\r\n                        new MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\r\n                    );\r\n\r\n                    objects.update( planeMesh );\r\n\r\n                }\r\n\r\n                planeMesh.material.map = background;\r\n\r\n                // TODO Push this to renderList\r\n\r\n                renderer.renderBufferDirect( planeCamera, null, planeMesh.geometry, planeMesh.material, planeMesh, null );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setClear( color, alpha ) {\r\n\r\n            state.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            getClearColor: function () {\r\n\r\n                return clearColor;\r\n\r\n            },\r\n            setClearColor: function ( color, alpha ) {\r\n\r\n                clearColor.set( color );\r\n                clearAlpha = alpha !== undefined ? alpha : 1;\r\n                setClear( clearColor, clearAlpha );\r\n\r\n            },\r\n            getClearAlpha: function () {\r\n\r\n                return clearAlpha;\r\n\r\n            },\r\n            setClearAlpha: function ( alpha ) {\r\n\r\n                clearAlpha = alpha;\r\n                setClear( clearColor, clearAlpha );\r\n\r\n            },\r\n            render: render\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLBufferRenderer( gl, extensions, info ) {\r\n\r\n        var mode;\r\n\r\n        function setMode( value ) {\r\n\r\n            mode = value;\r\n\r\n        }\r\n\r\n        function render( start, count ) {\r\n\r\n            gl.drawArrays( mode, start, count );\r\n\r\n            info.update( count, mode );\r\n\r\n        }\r\n\r\n        function renderInstances( geometry, start, count ) {\r\n\r\n            var extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n            if ( extension === null ) {\r\n\r\n                console.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n                return;\r\n\r\n            }\r\n\r\n            extension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\r\n\r\n            info.update( count, mode, geometry.maxInstancedCount );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        this.setMode = setMode;\r\n        this.render = render;\r\n        this.renderInstances = renderInstances;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLCapabilities( gl, extensions, parameters ) {\r\n\r\n        var maxAnisotropy;\r\n\r\n        function getMaxAnisotropy() {\r\n\r\n            if ( maxAnisotropy !== undefined ) return maxAnisotropy;\r\n\r\n            var extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n            if ( extension !== null ) {\r\n\r\n                maxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n            } else {\r\n\r\n                maxAnisotropy = 0;\r\n\r\n            }\r\n\r\n            return maxAnisotropy;\r\n\r\n        }\r\n\r\n        function getMaxPrecision( precision ) {\r\n\r\n            if ( precision === 'highp' ) {\r\n\r\n                if ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n                    gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n                    return 'highp';\r\n\r\n                }\r\n\r\n                precision = 'mediump';\r\n\r\n            }\r\n\r\n            if ( precision === 'mediump' ) {\r\n\r\n                if ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n                    gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n                    return 'mediump';\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return 'lowp';\r\n\r\n        }\r\n\r\n        var precision = parameters.precision !== undefined ? parameters.precision : 'highp';\r\n        var maxPrecision = getMaxPrecision( precision );\r\n\r\n        if ( maxPrecision !== precision ) {\r\n\r\n            console.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\r\n            precision = maxPrecision;\r\n\r\n        }\r\n\r\n        var logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\r\n\r\n        var maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n        var maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n        var maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n        var maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n        var maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n        var maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n        var maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n        var maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n        var vertexTextures = maxVertexTextures > 0;\r\n        var floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n        var floatVertexTextures = vertexTextures && floatFragmentTextures;\r\n\r\n        return {\r\n\r\n            getMaxAnisotropy: getMaxAnisotropy,\r\n            getMaxPrecision: getMaxPrecision,\r\n\r\n            precision: precision,\r\n            logarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n            maxTextures: maxTextures,\r\n            maxVertexTextures: maxVertexTextures,\r\n            maxTextureSize: maxTextureSize,\r\n            maxCubemapSize: maxCubemapSize,\r\n\r\n            maxAttributes: maxAttributes,\r\n            maxVertexUniforms: maxVertexUniforms,\r\n            maxVaryings: maxVaryings,\r\n            maxFragmentUniforms: maxFragmentUniforms,\r\n\r\n            vertexTextures: vertexTextures,\r\n            floatFragmentTextures: floatFragmentTextures,\r\n            floatVertexTextures: floatVertexTextures\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author tschw\r\n     */\r\n\r\n    function WebGLClipping() {\r\n\r\n        var scope = this,\r\n\r\n            globalState = null,\r\n            numGlobalPlanes = 0,\r\n            localClippingEnabled = false,\r\n            renderingShadows = false,\r\n\r\n            plane = new Plane(),\r\n            viewNormalMatrix = new Matrix3(),\r\n\r\n            uniform = { value: null, needsUpdate: false };\r\n\r\n        this.uniform = uniform;\r\n        this.numPlanes = 0;\r\n        this.numIntersection = 0;\r\n\r\n        this.init = function ( planes, enableLocalClipping, camera ) {\r\n\r\n            var enabled =\r\n                planes.length !== 0 ||\r\n                enableLocalClipping ||\r\n                // enable state of previous frame - the clipping code has to\r\n                // run another frame in order to reset the state:\r\n                numGlobalPlanes !== 0 ||\r\n                localClippingEnabled;\r\n\r\n            localClippingEnabled = enableLocalClipping;\r\n\r\n            globalState = projectPlanes( planes, camera, 0 );\r\n            numGlobalPlanes = planes.length;\r\n\r\n            return enabled;\r\n\r\n        };\r\n\r\n        this.beginShadows = function () {\r\n\r\n            renderingShadows = true;\r\n            projectPlanes( null );\r\n\r\n        };\r\n\r\n        this.endShadows = function () {\r\n\r\n            renderingShadows = false;\r\n            resetGlobalState();\r\n\r\n        };\r\n\r\n        this.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\r\n\r\n            if ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\r\n\r\n                // there's no local clipping\r\n\r\n                if ( renderingShadows ) {\r\n\r\n                    // there's no global clipping\r\n\r\n                    projectPlanes( null );\r\n\r\n                } else {\r\n\r\n                    resetGlobalState();\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                var nGlobal = renderingShadows ? 0 : numGlobalPlanes,\r\n                    lGlobal = nGlobal * 4,\r\n\r\n                    dstArray = cache.clippingState || null;\r\n\r\n                uniform.value = dstArray; // ensure unique state\r\n\r\n                dstArray = projectPlanes( planes, camera, lGlobal, fromCache );\r\n\r\n                for ( var i = 0; i !== lGlobal; ++ i ) {\r\n\r\n                    dstArray[ i ] = globalState[ i ];\r\n\r\n                }\r\n\r\n                cache.clippingState = dstArray;\r\n                this.numIntersection = clipIntersection ? this.numPlanes : 0;\r\n                this.numPlanes += nGlobal;\r\n\r\n            }\r\n\r\n\r\n        };\r\n\r\n        function resetGlobalState() {\r\n\r\n            if ( uniform.value !== globalState ) {\r\n\r\n                uniform.value = globalState;\r\n                uniform.needsUpdate = numGlobalPlanes > 0;\r\n\r\n            }\r\n\r\n            scope.numPlanes = numGlobalPlanes;\r\n            scope.numIntersection = 0;\r\n\r\n        }\r\n\r\n        function projectPlanes( planes, camera, dstOffset, skipTransform ) {\r\n\r\n            var nPlanes = planes !== null ? planes.length : 0,\r\n                dstArray = null;\r\n\r\n            if ( nPlanes !== 0 ) {\r\n\r\n                dstArray = uniform.value;\r\n\r\n                if ( skipTransform !== true || dstArray === null ) {\r\n\r\n                    var flatSize = dstOffset + nPlanes * 4,\r\n                        viewMatrix = camera.matrixWorldInverse;\r\n\r\n                    viewNormalMatrix.getNormalMatrix( viewMatrix );\r\n\r\n                    if ( dstArray === null || dstArray.length < flatSize ) {\r\n\r\n                        dstArray = new Float32Array( flatSize );\r\n\r\n                    }\r\n\r\n                    for ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\r\n\r\n                        plane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\r\n\r\n                        plane.normal.toArray( dstArray, i4 );\r\n                        dstArray[ i4 + 3 ] = plane.constant;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                uniform.value = dstArray;\r\n                uniform.needsUpdate = true;\r\n\r\n            }\r\n\r\n            scope.numPlanes = nPlanes;\r\n\r\n            return dstArray;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLExtensions( gl ) {\r\n\r\n        var extensions = {};\r\n\r\n        return {\r\n\r\n            get: function ( name ) {\r\n\r\n                if ( extensions[ name ] !== undefined ) {\r\n\r\n                    return extensions[ name ];\r\n\r\n                }\r\n\r\n                var extension;\r\n\r\n                switch ( name ) {\r\n\r\n                    case 'WEBGL_depth_texture':\r\n                        extension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\r\n                        break;\r\n\r\n                    case 'EXT_texture_filter_anisotropic':\r\n                        extension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n                        break;\r\n\r\n                    case 'WEBGL_compressed_texture_s3tc':\r\n                        extension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n                        break;\r\n\r\n                    case 'WEBGL_compressed_texture_pvrtc':\r\n                        extension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n                        break;\r\n\r\n                    default:\r\n                        extension = gl.getExtension( name );\r\n\r\n                }\r\n\r\n                if ( extension === null ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n                }\r\n\r\n                extensions[ name ] = extension;\r\n\r\n                return extension;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLGeometries( gl, attributes, info ) {\r\n\r\n        var geometries = {};\r\n        var wireframeAttributes = {};\r\n\r\n        function onGeometryDispose( event ) {\r\n\r\n            var geometry = event.target;\r\n            var buffergeometry = geometries[ geometry.id ];\r\n\r\n            if ( buffergeometry.index !== null ) {\r\n\r\n                attributes.remove( buffergeometry.index );\r\n\r\n            }\r\n\r\n            for ( var name in buffergeometry.attributes ) {\r\n\r\n                attributes.remove( buffergeometry.attributes[ name ] );\r\n\r\n            }\r\n\r\n            geometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n            delete geometries[ geometry.id ];\r\n\r\n            // TODO Remove duplicate code\r\n\r\n            var attribute = wireframeAttributes[ geometry.id ];\r\n\r\n            if ( attribute ) {\r\n\r\n                attributes.remove( attribute );\r\n                delete wireframeAttributes[ geometry.id ];\r\n\r\n            }\r\n\r\n            attribute = wireframeAttributes[ buffergeometry.id ];\r\n\r\n            if ( attribute ) {\r\n\r\n                attributes.remove( attribute );\r\n                delete wireframeAttributes[ buffergeometry.id ];\r\n\r\n            }\r\n\r\n            //\r\n\r\n            info.memory.geometries --;\r\n\r\n        }\r\n\r\n        function get( object, geometry ) {\r\n\r\n            var buffergeometry = geometries[ geometry.id ];\r\n\r\n            if ( buffergeometry ) return buffergeometry;\r\n\r\n            geometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n            if ( geometry.isBufferGeometry ) {\r\n\r\n                buffergeometry = geometry;\r\n\r\n            } else if ( geometry.isGeometry ) {\r\n\r\n                if ( geometry._bufferGeometry === undefined ) {\r\n\r\n                    geometry._bufferGeometry = new BufferGeometry().setFromObject( object );\r\n\r\n                }\r\n\r\n                buffergeometry = geometry._bufferGeometry;\r\n\r\n            }\r\n\r\n            geometries[ geometry.id ] = buffergeometry;\r\n\r\n            info.memory.geometries ++;\r\n\r\n            return buffergeometry;\r\n\r\n        }\r\n\r\n        function update( geometry ) {\r\n\r\n            var index = geometry.index;\r\n            var geometryAttributes = geometry.attributes;\r\n\r\n            if ( index !== null ) {\r\n\r\n                attributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n            }\r\n\r\n            for ( var name in geometryAttributes ) {\r\n\r\n                attributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n            }\r\n\r\n            // morph targets\r\n\r\n            var morphAttributes = geometry.morphAttributes;\r\n\r\n            for ( var name in morphAttributes ) {\r\n\r\n                var array = morphAttributes[ name ];\r\n\r\n                for ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n                    attributes.update( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function getWireframeAttribute( geometry ) {\r\n\r\n            var attribute = wireframeAttributes[ geometry.id ];\r\n\r\n            if ( attribute ) return attribute;\r\n\r\n            var indices = [];\r\n\r\n            var geometryIndex = geometry.index;\r\n            var geometryAttributes = geometry.attributes;\r\n\r\n            // console.time( 'wireframe' );\r\n\r\n            if ( geometryIndex !== null ) {\r\n\r\n                var array = geometryIndex.array;\r\n\r\n                for ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n                    var a = array[ i + 0 ];\r\n                    var b = array[ i + 1 ];\r\n                    var c = array[ i + 2 ];\r\n\r\n                    indices.push( a, b, b, c, c, a );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                var array = geometryAttributes.position.array;\r\n\r\n                for ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n                    var a = i + 0;\r\n                    var b = i + 1;\r\n                    var c = i + 2;\r\n\r\n                    indices.push( a, b, b, c, c, a );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // console.timeEnd( 'wireframe' );\r\n\r\n            attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\r\n\r\n            attributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n            wireframeAttributes[ geometry.id ] = attribute;\r\n\r\n            return attribute;\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            get: get,\r\n            update: update,\r\n\r\n            getWireframeAttribute: getWireframeAttribute\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLIndexedBufferRenderer( gl, extensions, info ) {\r\n\r\n        var mode;\r\n\r\n        function setMode( value ) {\r\n\r\n            mode = value;\r\n\r\n        }\r\n\r\n        var type, bytesPerElement;\r\n\r\n        function setIndex( value ) {\r\n\r\n            type = value.type;\r\n            bytesPerElement = value.bytesPerElement;\r\n\r\n        }\r\n\r\n        function render( start, count ) {\r\n\r\n            gl.drawElements( mode, count, type, start * bytesPerElement );\r\n\r\n            info.update( count, mode );\r\n\r\n        }\r\n\r\n        function renderInstances( geometry, start, count ) {\r\n\r\n            var extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n            if ( extension === null ) {\r\n\r\n                console.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n                return;\r\n\r\n            }\r\n\r\n            extension.drawElementsInstancedANGLE( mode, count, type, start * bytesPerElement, geometry.maxInstancedCount );\r\n\r\n            info.update( count, mode, geometry.maxInstancedCount );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        this.setMode = setMode;\r\n        this.setIndex = setIndex;\r\n        this.render = render;\r\n        this.renderInstances = renderInstances;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function WebGLInfo( gl ) {\r\n\r\n        var memory = {\r\n            geometries: 0,\r\n            textures: 0\r\n        };\r\n\r\n        var render = {\r\n            frame: 0,\r\n            calls: 0,\r\n            triangles: 0,\r\n            points: 0,\r\n            lines: 0\r\n        };\r\n\r\n        function update( count, mode, instanceCount ) {\r\n\r\n            instanceCount = instanceCount || 1;\r\n\r\n            render.calls ++;\r\n\r\n            switch ( mode ) {\r\n\r\n                case gl.TRIANGLES:\r\n                    render.triangles += instanceCount * ( count / 3 );\r\n                    break;\r\n\r\n                case gl.TRIANGLE_STRIP:\r\n                case gl.TRIANGLE_FAN:\r\n                    render.triangles += instanceCount * ( count - 2 );\r\n                    break;\r\n\r\n                case gl.LINES:\r\n                    render.lines += instanceCount * ( count / 2 );\r\n                    break;\r\n\r\n                case gl.LINE_STRIP:\r\n                    render.lines += instanceCount * ( count - 1 );\r\n                    break;\r\n\r\n                case gl.LINE_LOOP:\r\n                    render.lines += instanceCount * count;\r\n                    break;\r\n\r\n                case gl.POINTS:\r\n                    render.points += instanceCount * count;\r\n                    break;\r\n\r\n                default:\r\n                    console.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function reset() {\r\n\r\n            render.frame ++;\r\n            render.calls = 0;\r\n            render.triangles = 0;\r\n            render.points = 0;\r\n            render.lines = 0;\r\n\r\n        }\r\n\r\n        return {\r\n            memory: memory,\r\n            render: render,\r\n            programs: null,\r\n            autoReset: true,\r\n            reset: reset,\r\n            update: update\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function absNumericalSort( a, b ) {\r\n\r\n        return Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\r\n\r\n    }\r\n\r\n    function WebGLMorphtargets( gl ) {\r\n\r\n        var influencesList = {};\r\n        var morphInfluences = new Float32Array( 8 );\r\n\r\n        function update( object, geometry, material, program ) {\r\n\r\n            var objectInfluences = object.morphTargetInfluences;\r\n\r\n            var length = objectInfluences.length;\r\n\r\n            var influences = influencesList[ geometry.id ];\r\n\r\n            if ( influences === undefined ) {\r\n\r\n                // initialise list\r\n\r\n                influences = [];\r\n\r\n                for ( var i = 0; i < length; i ++ ) {\r\n\r\n                    influences[ i ] = [ i, 0 ];\r\n\r\n                }\r\n\r\n                influencesList[ geometry.id ] = influences;\r\n\r\n            }\r\n\r\n            var morphTargets = material.morphTargets && geometry.morphAttributes.position;\r\n            var morphNormals = material.morphNormals && geometry.morphAttributes.normal;\r\n\r\n            // Remove current morphAttributes\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                var influence = influences[ i ];\r\n\r\n                if ( influence[ 1 ] !== 0 ) {\r\n\r\n                    if ( morphTargets ) geometry.removeAttribute( 'morphTarget' + i );\r\n                    if ( morphNormals ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Collect influences\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                var influence = influences[ i ];\r\n\r\n                influence[ 0 ] = i;\r\n                influence[ 1 ] = objectInfluences[ i ];\r\n\r\n            }\r\n\r\n            influences.sort( absNumericalSort );\r\n\r\n            // Add morphAttributes\r\n\r\n            for ( var i = 0; i < 8; i ++ ) {\r\n\r\n                var influence = influences[ i ];\r\n\r\n                if ( influence ) {\r\n\r\n                    var index = influence[ 0 ];\r\n                    var value = influence[ 1 ];\r\n\r\n                    if ( value ) {\r\n\r\n                        if ( morphTargets ) geometry.addAttribute( 'morphTarget' + i, morphTargets[ index ] );\r\n                        if ( morphNormals ) geometry.addAttribute( 'morphNormal' + i, morphNormals[ index ] );\r\n\r\n                        morphInfluences[ i ] = value;\r\n                        continue;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                morphInfluences[ i ] = 0;\r\n\r\n            }\r\n\r\n            program.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            update: update\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLObjects( geometries, info ) {\r\n\r\n        var updateList = {};\r\n\r\n        function update( object ) {\r\n\r\n            var frame = info.render.frame;\r\n\r\n            var geometry = object.geometry;\r\n            var buffergeometry = geometries.get( object, geometry );\r\n\r\n            // Update once per frame\r\n\r\n            if ( updateList[ buffergeometry.id ] !== frame ) {\r\n\r\n                if ( geometry.isGeometry ) {\r\n\r\n                    buffergeometry.updateFromObject( object );\r\n\r\n                }\r\n\r\n                geometries.update( buffergeometry );\r\n\r\n                updateList[ buffergeometry.id ] = frame;\r\n\r\n            }\r\n\r\n            return buffergeometry;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            updateList = {};\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            update: update,\r\n            dispose: dispose\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n        images = images !== undefined ? images : [];\r\n        mapping = mapping !== undefined ? mapping : CubeReflectionMapping;\r\n\r\n        Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n        this.flipY = false;\r\n\r\n    }\r\n\r\n    CubeTexture.prototype = Object.create( Texture.prototype );\r\n    CubeTexture.prototype.constructor = CubeTexture;\r\n\r\n    CubeTexture.prototype.isCubeTexture = true;\r\n\r\n    Object.defineProperty( CubeTexture.prototype, 'images', {\r\n\r\n        get: function () {\r\n\r\n            return this.image;\r\n\r\n        },\r\n\r\n        set: function ( value ) {\r\n\r\n            this.image = value;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author tschw\r\n     *\r\n     * Uniforms of a program.\r\n     * Those form a tree structure with a special top-level container for the root,\r\n     * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\r\n     *\r\n     *\r\n     * Properties of inner nodes including the top-level container:\r\n     *\r\n     * .seq - array of nested uniforms\r\n     * .map - nested uniforms by name\r\n     *\r\n     *\r\n     * Methods of all nodes except the top-level container:\r\n     *\r\n     * .setValue( gl, value, [renderer] )\r\n     *\r\n     * \t\tuploads a uniform value(s)\r\n     *  \tthe 'renderer' parameter is needed for sampler uniforms\r\n     *\r\n     *\r\n     * Static methods of the top-level container (renderer factorizations):\r\n     *\r\n     * .upload( gl, seq, values, renderer )\r\n     *\r\n     * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n     *\r\n     * .seqWithValue( seq, values ) : filteredSeq\r\n     *\r\n     * \t\tfilters 'seq' entries with corresponding entry in values\r\n     *\r\n     *\r\n     * Methods of the top-level container (renderer factorizations):\r\n     *\r\n     * .setValue( gl, name, value )\r\n     *\r\n     * \t\tsets uniform with  name 'name' to 'value'\r\n     *\r\n     * .set( gl, obj, prop )\r\n     *\r\n     * \t\tsets uniform from object and property with same name than uniform\r\n     *\r\n     * .setOptional( gl, obj, prop )\r\n     *\r\n     * \t\tlike .set for an optional property of the object\r\n     *\r\n     */\r\n\r\n    var emptyTexture = new Texture();\r\n    var emptyCubeTexture = new CubeTexture();\r\n\r\n    // --- Base for inner nodes (including the root) ---\r\n\r\n    function UniformContainer() {\r\n\r\n        this.seq = [];\r\n        this.map = {};\r\n\r\n    }\r\n\r\n    // --- Utilities ---\r\n\r\n    // Array Caches (provide typed arrays for temporary by size)\r\n\r\n    var arrayCacheF32 = [];\r\n    var arrayCacheI32 = [];\r\n\r\n    // Float32Array caches used for uploading Matrix uniforms\r\n\r\n    var mat4array = new Float32Array( 16 );\r\n    var mat3array = new Float32Array( 9 );\r\n    var mat2array = new Float32Array( 4 );\r\n\r\n    // Flattening for arrays of vectors and matrices\r\n\r\n    function flatten( array, nBlocks, blockSize ) {\r\n\r\n        var firstElem = array[ 0 ];\r\n\r\n        if ( firstElem <= 0 || firstElem > 0 ) return array;\r\n        // unoptimized: ! isNaN( firstElem )\r\n        // see http://jacksondunstan.com/articles/983\r\n\r\n        var n = nBlocks * blockSize,\r\n            r = arrayCacheF32[ n ];\r\n\r\n        if ( r === undefined ) {\r\n\r\n            r = new Float32Array( n );\r\n            arrayCacheF32[ n ] = r;\r\n\r\n        }\r\n\r\n        if ( nBlocks !== 0 ) {\r\n\r\n            firstElem.toArray( r, 0 );\r\n\r\n            for ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\r\n\r\n                offset += blockSize;\r\n                array[ i ].toArray( r, offset );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return r;\r\n\r\n    }\r\n\r\n    function arraysEqual( a, b ) {\r\n\r\n        if ( a.length !== b.length ) return false;\r\n\r\n        for ( var i = 0, l = a.length; i < l; i ++ ) {\r\n\r\n            if ( a[ i ] !== b[ i ] ) return false;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    function copyArray( a, b ) {\r\n\r\n        for ( var i = 0, l = b.length; i < l; i ++ ) {\r\n\r\n            a[ i ] = b[ i ];\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Texture unit allocation\r\n\r\n    function allocTexUnits( renderer, n ) {\r\n\r\n        var r = arrayCacheI32[ n ];\r\n\r\n        if ( r === undefined ) {\r\n\r\n            r = new Int32Array( n );\r\n            arrayCacheI32[ n ] = r;\r\n\r\n        }\r\n\r\n        for ( var i = 0; i !== n; ++ i )\r\n            r[ i ] = renderer.allocTextureUnit();\r\n\r\n        return r;\r\n\r\n    }\r\n\r\n    // --- Setters ---\r\n\r\n    // Note: Defining these methods externally, because they come in a bunch\r\n    // and this way their names minify.\r\n\r\n    // Single scalar\r\n\r\n    function setValue1f( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( cache[ 0 ] === v ) return;\r\n\r\n        gl.uniform1f( this.addr, v );\r\n\r\n        cache[ 0 ] = v;\r\n\r\n    }\r\n\r\n    function setValue1i( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( cache[ 0 ] === v ) return;\r\n\r\n        gl.uniform1i( this.addr, v );\r\n\r\n        cache[ 0 ] = v;\r\n\r\n    }\r\n\r\n    // Single float vector (from flat array or THREE.VectorN)\r\n\r\n    function setValue2fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( v.x !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\r\n\r\n                gl.uniform2f( this.addr, v.x, v.y );\r\n\r\n                cache[ 0 ] = v.x;\r\n                cache[ 1 ] = v.y;\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniform2fv( this.addr, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue3fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( v.x !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\r\n\r\n                gl.uniform3f( this.addr, v.x, v.y, v.z );\r\n\r\n                cache[ 0 ] = v.x;\r\n                cache[ 1 ] = v.y;\r\n                cache[ 2 ] = v.z;\r\n\r\n            }\r\n\r\n        } else if ( v.r !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\r\n\r\n                gl.uniform3f( this.addr, v.r, v.g, v.b );\r\n\r\n                cache[ 0 ] = v.r;\r\n                cache[ 1 ] = v.g;\r\n                cache[ 2 ] = v.b;\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniform3fv( this.addr, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue4fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( v.x !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\r\n\r\n                gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\r\n\r\n                cache[ 0 ] = v.x;\r\n                cache[ 1 ] = v.y;\r\n                cache[ 2 ] = v.z;\r\n                cache[ 3 ] = v.w;\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniform4fv( this.addr, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Single matrix (from flat array or MatrixN)\r\n\r\n    function setValue2fm( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var elements = v.elements;\r\n\r\n        if ( elements === undefined ) {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniformMatrix2fv( this.addr, false, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, elements ) ) return;\r\n\r\n            mat2array.set( elements );\r\n\r\n            gl.uniformMatrix2fv( this.addr, false, mat2array );\r\n\r\n            copyArray( cache, elements );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue3fm( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var elements = v.elements;\r\n\r\n        if ( elements === undefined ) {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniformMatrix3fv( this.addr, false, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, elements ) ) return;\r\n\r\n            mat3array.set( elements );\r\n\r\n            gl.uniformMatrix3fv( this.addr, false, mat3array );\r\n\r\n            copyArray( cache, elements );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue4fm( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var elements = v.elements;\r\n\r\n        if ( elements === undefined ) {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniformMatrix4fv( this.addr, false, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, elements ) ) return;\r\n\r\n            mat4array.set( elements );\r\n\r\n            gl.uniformMatrix4fv( this.addr, false, mat4array );\r\n\r\n            copyArray( cache, elements );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Single texture (2D / Cube)\r\n\r\n    function setValueT1( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var unit = renderer.allocTextureUnit();\r\n\r\n        if ( cache[ 0 ] !== unit ) {\r\n\r\n            gl.uniform1i( this.addr, unit );\r\n            cache[ 0 ] = unit;\r\n\r\n        }\r\n\r\n        renderer.setTexture2D( v || emptyTexture, unit );\r\n\r\n    }\r\n\r\n    function setValueT6( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var unit = renderer.allocTextureUnit();\r\n\r\n        if ( cache[ 0 ] !== unit ) {\r\n\r\n            gl.uniform1i( this.addr, unit );\r\n            cache[ 0 ] = unit;\r\n\r\n        }\r\n\r\n        renderer.setTextureCube( v || emptyCubeTexture, unit );\r\n\r\n    }\r\n\r\n    // Integer / Boolean vectors or arrays thereof (always flat arrays)\r\n\r\n    function setValue2iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform2iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    function setValue3iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform3iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    function setValue4iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform4iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    // Helper to pick the right setter for the singular case\r\n\r\n    function getSingularSetter( type ) {\r\n\r\n        switch ( type ) {\r\n\r\n            case 0x1406: return setValue1f; // FLOAT\r\n            case 0x8b50: return setValue2fv; // _VEC2\r\n            case 0x8b51: return setValue3fv; // _VEC3\r\n            case 0x8b52: return setValue4fv; // _VEC4\r\n\r\n            case 0x8b5a: return setValue2fm; // _MAT2\r\n            case 0x8b5b: return setValue3fm; // _MAT3\r\n            case 0x8b5c: return setValue4fm; // _MAT4\r\n\r\n            case 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\r\n            case 0x8b60: return setValueT6; // SAMPLER_CUBE\r\n\r\n            case 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\r\n            case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n            case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n            case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Array of scalars\r\n\r\n    function setValue1fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform1fv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n    function setValue1iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform1iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    // Array of vectors (flat or from THREE classes)\r\n\r\n    function setValueV2a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 2 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniform2fv( this.addr, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueV3a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 3 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniform3fv( this.addr, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueV4a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 4 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniform4fv( this.addr, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    // Array of matrices (flat or from THREE clases)\r\n\r\n    function setValueM2a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 4 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniformMatrix2fv( this.addr, false, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueM3a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 9 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniformMatrix3fv( this.addr, false, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueM4a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 16 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniformMatrix4fv( this.addr, false, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    // Array of textures (2D / Cube)\r\n\r\n    function setValueT1a( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var n = v.length;\r\n\r\n        var units = allocTexUnits( renderer, n );\r\n\r\n        if ( arraysEqual( cache, units ) === false ) {\r\n\r\n            gl.uniform1iv( this.addr, units );\r\n            copyArray( cache, units );\r\n\r\n        }\r\n\r\n        for ( var i = 0; i !== n; ++ i ) {\r\n\r\n            renderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValueT6a( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var n = v.length;\r\n\r\n        var units = allocTexUnits( renderer, n );\r\n\r\n        if ( arraysEqual( cache, units ) === false ) {\r\n\r\n            gl.uniform1iv( this.addr, units );\r\n            copyArray( cache, units );\r\n\r\n        }\r\n\r\n        for ( var i = 0; i !== n; ++ i ) {\r\n\r\n            renderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Helper to pick the right setter for a pure (bottom-level) array\r\n\r\n    function getPureArraySetter( type ) {\r\n\r\n        switch ( type ) {\r\n\r\n            case 0x1406: return setValue1fv; // FLOAT\r\n            case 0x8b50: return setValueV2a; // _VEC2\r\n            case 0x8b51: return setValueV3a; // _VEC3\r\n            case 0x8b52: return setValueV4a; // _VEC4\r\n\r\n            case 0x8b5a: return setValueM2a; // _MAT2\r\n            case 0x8b5b: return setValueM3a; // _MAT3\r\n            case 0x8b5c: return setValueM4a; // _MAT4\r\n\r\n            case 0x8b5e: return setValueT1a; // SAMPLER_2D\r\n            case 0x8b60: return setValueT6a; // SAMPLER_CUBE\r\n\r\n            case 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\r\n            case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n            case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n            case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // --- Uniform Classes ---\r\n\r\n    function SingleUniform( id, activeInfo, addr ) {\r\n\r\n        this.id = id;\r\n        this.addr = addr;\r\n        this.cache = [];\r\n        this.setValue = getSingularSetter( activeInfo.type );\r\n\r\n        // this.path = activeInfo.name; // DEBUG\r\n\r\n    }\r\n\r\n    function PureArrayUniform( id, activeInfo, addr ) {\r\n\r\n        this.id = id;\r\n        this.addr = addr;\r\n        this.cache = [];\r\n        this.size = activeInfo.size;\r\n        this.setValue = getPureArraySetter( activeInfo.type );\r\n\r\n        // this.path = activeInfo.name; // DEBUG\r\n\r\n    }\r\n\r\n    PureArrayUniform.prototype.updateCache = function ( data ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( data instanceof Float32Array && cache.length !== data.length ) {\r\n\r\n            this.cache = new Float32Array( data.length );\r\n\r\n        }\r\n\r\n        copyArray( cache, data );\r\n\r\n    };\r\n\r\n    function StructuredUniform( id ) {\r\n\r\n        this.id = id;\r\n\r\n        UniformContainer.call( this ); // mix-in\r\n\r\n    }\r\n\r\n    StructuredUniform.prototype.setValue = function ( gl, value ) {\r\n\r\n        // Note: Don't need an extra 'renderer' parameter, since samplers\r\n        // are not allowed in structured uniforms.\r\n\r\n        var seq = this.seq;\r\n\r\n        for ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n            var u = seq[ i ];\r\n            u.setValue( gl, value[ u.id ] );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // --- Top-level ---\r\n\r\n    // Parser - builds up the property tree from the path strings\r\n\r\n    var RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\r\n\r\n    // extracts\r\n    // \t- the identifier (member name or array index)\r\n    //  - followed by an optional right bracket (found when array index)\r\n    //  - followed by an optional left bracket or dot (type of subscript)\r\n    //\r\n    // Note: These portions can be read in a non-overlapping fashion and\r\n    // allow straightforward parsing of the hierarchy that WebGL encodes\r\n    // in the uniform names.\r\n\r\n    function addUniform( container, uniformObject ) {\r\n\r\n        container.seq.push( uniformObject );\r\n        container.map[ uniformObject.id ] = uniformObject;\r\n\r\n    }\r\n\r\n    function parseUniform( activeInfo, addr, container ) {\r\n\r\n        var path = activeInfo.name,\r\n            pathLength = path.length;\r\n\r\n        // reset RegExp object, because of the early exit of a previous run\r\n        RePathPart.lastIndex = 0;\r\n\r\n        while ( true ) {\r\n\r\n            var match = RePathPart.exec( path ),\r\n                matchEnd = RePathPart.lastIndex,\r\n\r\n                id = match[ 1 ],\r\n                idIsIndex = match[ 2 ] === ']',\r\n                subscript = match[ 3 ];\r\n\r\n            if ( idIsIndex ) id = id | 0; // convert to integer\r\n\r\n            if ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\r\n\r\n                // bare name or \"pure\" bottom-level array \"[0]\" suffix\r\n\r\n                addUniform( container, subscript === undefined ?\r\n                    new SingleUniform( id, activeInfo, addr ) :\r\n                    new PureArrayUniform( id, activeInfo, addr ) );\r\n\r\n                break;\r\n\r\n            } else {\r\n\r\n                // step into inner node / create it in case it doesn't exist\r\n\r\n                var map = container.map, next = map[ id ];\r\n\r\n                if ( next === undefined ) {\r\n\r\n                    next = new StructuredUniform( id );\r\n                    addUniform( container, next );\r\n\r\n                }\r\n\r\n                container = next;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Root Container\r\n\r\n    function WebGLUniforms( gl, program, renderer ) {\r\n\r\n        UniformContainer.call( this );\r\n\r\n        this.renderer = renderer;\r\n\r\n        var n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n        for ( var i = 0; i < n; ++ i ) {\r\n\r\n            var info = gl.getActiveUniform( program, i ),\r\n                addr = gl.getUniformLocation( program, info.name );\r\n\r\n            parseUniform( info, addr, this );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    WebGLUniforms.prototype.setValue = function ( gl, name, value ) {\r\n\r\n        var u = this.map[ name ];\r\n\r\n        if ( u !== undefined ) u.setValue( gl, value, this.renderer );\r\n\r\n    };\r\n\r\n    WebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\r\n\r\n        var v = object[ name ];\r\n\r\n        if ( v !== undefined ) this.setValue( gl, name, v );\r\n\r\n    };\r\n\r\n\r\n    // Static interface\r\n\r\n    WebGLUniforms.upload = function ( gl, seq, values, renderer ) {\r\n\r\n        for ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n            var u = seq[ i ],\r\n                v = values[ u.id ];\r\n\r\n            if ( v.needsUpdate !== false ) {\r\n\r\n                // note: always updating when .needsUpdate is undefined\r\n                u.setValue( gl, v.value, renderer );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    WebGLUniforms.seqWithValue = function ( seq, values ) {\r\n\r\n        var r = [];\r\n\r\n        for ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n            var u = seq[ i ];\r\n            if ( u.id in values ) r.push( u );\r\n\r\n        }\r\n\r\n        return r;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function addLineNumbers( string ) {\r\n\r\n        var lines = string.split( '\\n' );\r\n\r\n        for ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n            lines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n        }\r\n\r\n        return lines.join( '\\n' );\r\n\r\n    }\r\n\r\n    function WebGLShader( gl, type, string ) {\r\n\r\n        var shader = gl.createShader( type );\r\n\r\n        gl.shaderSource( shader, string );\r\n        gl.compileShader( shader );\r\n\r\n        if ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n            console.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n        }\r\n\r\n        if ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n            console.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n        }\r\n\r\n        // --enable-privileged-webgl-extension\r\n        // console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n        return shader;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var programIdCount = 0;\r\n\r\n    function getEncodingComponents( encoding ) {\r\n\r\n        switch ( encoding ) {\r\n\r\n            case LinearEncoding:\r\n                return [ 'Linear', '( value )' ];\r\n            case sRGBEncoding:\r\n                return [ 'sRGB', '( value )' ];\r\n            case RGBEEncoding:\r\n                return [ 'RGBE', '( value )' ];\r\n            case RGBM7Encoding:\r\n                return [ 'RGBM', '( value, 7.0 )' ];\r\n            case RGBM16Encoding:\r\n                return [ 'RGBM', '( value, 16.0 )' ];\r\n            case RGBDEncoding:\r\n                return [ 'RGBD', '( value, 256.0 )' ];\r\n            case GammaEncoding:\r\n                return [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\r\n            default:\r\n                throw new Error( 'unsupported encoding: ' + encoding );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n        var components = getEncodingComponents( encoding );\r\n        return 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\r\n\r\n    }\r\n\r\n    function getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n        var components = getEncodingComponents( encoding );\r\n        return 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\r\n\r\n    }\r\n\r\n    function getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n        var toneMappingName;\r\n\r\n        switch ( toneMapping ) {\r\n\r\n            case LinearToneMapping:\r\n                toneMappingName = 'Linear';\r\n                break;\r\n\r\n            case ReinhardToneMapping:\r\n                toneMappingName = 'Reinhard';\r\n                break;\r\n\r\n            case Uncharted2ToneMapping:\r\n                toneMappingName = 'Uncharted2';\r\n                break;\r\n\r\n            case CineonToneMapping:\r\n                toneMappingName = 'OptimizedCineon';\r\n                break;\r\n\r\n            default:\r\n                throw new Error( 'unsupported toneMapping: ' + toneMapping );\r\n\r\n        }\r\n\r\n        return 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\r\n\r\n    }\r\n\r\n    function generateExtensions( extensions, parameters, rendererExtensions ) {\r\n\r\n        extensions = extensions || {};\r\n\r\n        var chunks = [\r\n            ( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n            ( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n            ( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n            ( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\r\n        ];\r\n\r\n        return chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n    }\r\n\r\n    function generateDefines( defines ) {\r\n\r\n        var chunks = [];\r\n\r\n        for ( var name in defines ) {\r\n\r\n            var value = defines[ name ];\r\n\r\n            if ( value === false ) continue;\r\n\r\n            chunks.push( '#define ' + name + ' ' + value );\r\n\r\n        }\r\n\r\n        return chunks.join( '\\n' );\r\n\r\n    }\r\n\r\n    function fetchAttributeLocations( gl, program ) {\r\n\r\n        var attributes = {};\r\n\r\n        var n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n        for ( var i = 0; i < n; i ++ ) {\r\n\r\n            var info = gl.getActiveAttrib( program, i );\r\n            var name = info.name;\r\n\r\n            // console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\r\n\r\n            attributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n        }\r\n\r\n        return attributes;\r\n\r\n    }\r\n\r\n    function filterEmptyLine( string ) {\r\n\r\n        return string !== '';\r\n\r\n    }\r\n\r\n    function replaceLightNums( string, parameters ) {\r\n\r\n        return string\r\n            .replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n            .replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n            .replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\r\n            .replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n            .replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\r\n\r\n    }\r\n\r\n    function replaceClippingPlaneNums( string, parameters ) {\r\n\r\n        return string\r\n            .replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\r\n            .replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\r\n\r\n    }\r\n\r\n    function parseIncludes( string ) {\r\n\r\n        var pattern = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\r\n\r\n        function replace( match, include ) {\r\n\r\n            var replace = ShaderChunk[ include ];\r\n\r\n            if ( replace === undefined ) {\r\n\r\n                throw new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n            }\r\n\r\n            return parseIncludes( replace );\r\n\r\n        }\r\n\r\n        return string.replace( pattern, replace );\r\n\r\n    }\r\n\r\n    function unrollLoops( string ) {\r\n\r\n        var pattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\n\r\n        function replace( match, start, end, snippet ) {\r\n\r\n            var unroll = '';\r\n\r\n            for ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n                unroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\r\n\r\n            }\r\n\r\n            return unroll;\r\n\r\n        }\r\n\r\n        return string.replace( pattern, replace );\r\n\r\n    }\r\n\r\n    function WebGLProgram( renderer, extensions, code, material, shader, parameters ) {\r\n\r\n        var gl = renderer.context;\r\n\r\n        var defines = material.defines;\r\n\r\n        var vertexShader = shader.vertexShader;\r\n        var fragmentShader = shader.fragmentShader;\r\n\r\n        var shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n        if ( parameters.shadowMapType === PCFShadowMap ) {\r\n\r\n            shadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n        } else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\r\n\r\n            shadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n        }\r\n\r\n        var envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n        var envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n        var envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n        if ( parameters.envMap ) {\r\n\r\n            switch ( material.envMap.mapping ) {\r\n\r\n                case CubeReflectionMapping:\r\n                case CubeRefractionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n                    break;\r\n\r\n                case CubeUVReflectionMapping:\r\n                case CubeUVRefractionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n                    break;\r\n\r\n                case EquirectangularReflectionMapping:\r\n                case EquirectangularRefractionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n                    break;\r\n\r\n                case SphericalReflectionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n                    break;\r\n\r\n            }\r\n\r\n            switch ( material.envMap.mapping ) {\r\n\r\n                case CubeRefractionMapping:\r\n                case EquirectangularRefractionMapping:\r\n                    envMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n                    break;\r\n\r\n            }\r\n\r\n            switch ( material.combine ) {\r\n\r\n                case MultiplyOperation:\r\n                    envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n                    break;\r\n\r\n                case MixOperation:\r\n                    envMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n                    break;\r\n\r\n                case AddOperation:\r\n                    envMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n        // console.log( 'building new program ' );\r\n\r\n        //\r\n\r\n        var customExtensions = generateExtensions( material.extensions, parameters, extensions );\r\n\r\n        var customDefines = generateDefines( defines );\r\n\r\n        //\r\n\r\n        var program = gl.createProgram();\r\n\r\n        var prefixVertex, prefixFragment;\r\n\r\n        if ( material.isRawShaderMaterial ) {\r\n\r\n            prefixVertex = [\r\n\r\n                customDefines\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n            if ( prefixVertex.length > 0 ) {\r\n\r\n                prefixVertex += '\\n';\r\n\r\n            }\r\n\r\n            prefixFragment = [\r\n\r\n                customExtensions,\r\n                customDefines\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n            if ( prefixFragment.length > 0 ) {\r\n\r\n                prefixFragment += '\\n';\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            prefixVertex = [\r\n\r\n                'precision ' + parameters.precision + ' float;',\r\n                'precision ' + parameters.precision + ' int;',\r\n\r\n                '#define SHADER_NAME ' + shader.name,\r\n\r\n                customDefines,\r\n\r\n                parameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n                '#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n                '#define MAX_BONES ' + parameters.maxBones,\r\n                ( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n                ( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n                parameters.map ? '#define USE_MAP' : '',\r\n                parameters.envMap ? '#define USE_ENVMAP' : '',\r\n                parameters.envMap ? '#define ' + envMapModeDefine : '',\r\n                parameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n                parameters.aoMap ? '#define USE_AOMAP' : '',\r\n                parameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n                parameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n                parameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n                parameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n                parameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n                parameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n                parameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n                parameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n                parameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n                parameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n                parameters.skinning ? '#define USE_SKINNING' : '',\r\n                parameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n                parameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n                parameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n                parameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n                parameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n                parameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n                parameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n                parameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n                parameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n                parameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n                'uniform mat4 modelMatrix;',\r\n                'uniform mat4 modelViewMatrix;',\r\n                'uniform mat4 projectionMatrix;',\r\n                'uniform mat4 viewMatrix;',\r\n                'uniform mat3 normalMatrix;',\r\n                'uniform vec3 cameraPosition;',\r\n\r\n                'attribute vec3 position;',\r\n                'attribute vec3 normal;',\r\n                'attribute vec2 uv;',\r\n\r\n                '#ifdef USE_COLOR',\r\n\r\n                '\tattribute vec3 color;',\r\n\r\n                '#endif',\r\n\r\n                '#ifdef USE_MORPHTARGETS',\r\n\r\n                '\tattribute vec3 morphTarget0;',\r\n                '\tattribute vec3 morphTarget1;',\r\n                '\tattribute vec3 morphTarget2;',\r\n                '\tattribute vec3 morphTarget3;',\r\n\r\n                '\t#ifdef USE_MORPHNORMALS',\r\n\r\n                '\t\tattribute vec3 morphNormal0;',\r\n                '\t\tattribute vec3 morphNormal1;',\r\n                '\t\tattribute vec3 morphNormal2;',\r\n                '\t\tattribute vec3 morphNormal3;',\r\n\r\n                '\t#else',\r\n\r\n                '\t\tattribute vec3 morphTarget4;',\r\n                '\t\tattribute vec3 morphTarget5;',\r\n                '\t\tattribute vec3 morphTarget6;',\r\n                '\t\tattribute vec3 morphTarget7;',\r\n\r\n                '\t#endif',\r\n\r\n                '#endif',\r\n\r\n                '#ifdef USE_SKINNING',\r\n\r\n                '\tattribute vec4 skinIndex;',\r\n                '\tattribute vec4 skinWeight;',\r\n\r\n                '#endif',\r\n\r\n                '\\n'\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n            prefixFragment = [\r\n\r\n                customExtensions,\r\n\r\n                'precision ' + parameters.precision + ' float;',\r\n                'precision ' + parameters.precision + ' int;',\r\n\r\n                '#define SHADER_NAME ' + shader.name,\r\n\r\n                customDefines,\r\n\r\n                parameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\r\n\r\n                '#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n                ( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n                ( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n                parameters.map ? '#define USE_MAP' : '',\r\n                parameters.envMap ? '#define USE_ENVMAP' : '',\r\n                parameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n                parameters.envMap ? '#define ' + envMapModeDefine : '',\r\n                parameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n                parameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n                parameters.aoMap ? '#define USE_AOMAP' : '',\r\n                parameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n                parameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n                parameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n                parameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n                parameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n                parameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n                parameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n                parameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n                parameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\r\n\r\n                parameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n                parameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n                parameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n                parameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n                parameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n                parameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\r\n\r\n                parameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\r\n\r\n                parameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n                parameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n                parameters.envMap && extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n                'uniform mat4 viewMatrix;',\r\n                'uniform vec3 cameraPosition;',\r\n\r\n                ( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\r\n                ( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\r\n                ( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\r\n\r\n                parameters.dithering ? '#define DITHERING' : '',\r\n\r\n                ( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\r\n                parameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n                parameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n                parameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n                parameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\r\n\r\n                parameters.depthPacking ? '#define DEPTH_PACKING ' + material.depthPacking : '',\r\n\r\n                '\\n'\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n        }\r\n\r\n        vertexShader = parseIncludes( vertexShader );\r\n        vertexShader = replaceLightNums( vertexShader, parameters );\r\n        vertexShader = replaceClippingPlaneNums( vertexShader, parameters );\r\n\r\n        fragmentShader = parseIncludes( fragmentShader );\r\n        fragmentShader = replaceLightNums( fragmentShader, parameters );\r\n        fragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\r\n\r\n        vertexShader = unrollLoops( vertexShader );\r\n        fragmentShader = unrollLoops( fragmentShader );\r\n\r\n        var vertexGlsl = prefixVertex + vertexShader;\r\n        var fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n        // console.log( '*VERTEX*', vertexGlsl );\r\n        // console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n        var glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n        var glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n        gl.attachShader( program, glVertexShader );\r\n        gl.attachShader( program, glFragmentShader );\r\n\r\n        // Force a particular attribute to index 0.\r\n\r\n        if ( material.index0AttributeName !== undefined ) {\r\n\r\n            gl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n        } else if ( parameters.morphTargets === true ) {\r\n\r\n            // programs with morphTargets displace position out of attribute 0\r\n            gl.bindAttribLocation( program, 0, 'position' );\r\n\r\n        }\r\n\r\n        gl.linkProgram( program );\r\n\r\n        var programLog = gl.getProgramInfoLog( program ).trim();\r\n        var vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\r\n        var fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\r\n\r\n        var runnable = true;\r\n        var haveDiagnostics = true;\r\n\r\n        // console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\r\n        // console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\r\n\r\n        if ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n            runnable = false;\r\n\r\n            console.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n        } else if ( programLog !== '' ) {\r\n\r\n            console.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n        } else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n            haveDiagnostics = false;\r\n\r\n        }\r\n\r\n        if ( haveDiagnostics ) {\r\n\r\n            this.diagnostics = {\r\n\r\n                runnable: runnable,\r\n                material: material,\r\n\r\n                programLog: programLog,\r\n\r\n                vertexShader: {\r\n\r\n                    log: vertexLog,\r\n                    prefix: prefixVertex\r\n\r\n                },\r\n\r\n                fragmentShader: {\r\n\r\n                    log: fragmentLog,\r\n                    prefix: prefixFragment\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        // clean up\r\n\r\n        gl.deleteShader( glVertexShader );\r\n        gl.deleteShader( glFragmentShader );\r\n\r\n        // set up caching for uniform locations\r\n\r\n        var cachedUniforms;\r\n\r\n        this.getUniforms = function () {\r\n\r\n            if ( cachedUniforms === undefined ) {\r\n\r\n                cachedUniforms = new WebGLUniforms( gl, program, renderer );\r\n\r\n            }\r\n\r\n            return cachedUniforms;\r\n\r\n        };\r\n\r\n        // set up caching for attribute locations\r\n\r\n        var cachedAttributes;\r\n\r\n        this.getAttributes = function () {\r\n\r\n            if ( cachedAttributes === undefined ) {\r\n\r\n                cachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n            }\r\n\r\n            return cachedAttributes;\r\n\r\n        };\r\n\r\n        // free resource\r\n\r\n        this.destroy = function () {\r\n\r\n            gl.deleteProgram( program );\r\n            this.program = undefined;\r\n\r\n        };\r\n\r\n        // DEPRECATED\r\n\r\n        Object.defineProperties( this, {\r\n\r\n            uniforms: {\r\n                get: function () {\r\n\r\n                    console.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n                    return this.getUniforms();\r\n\r\n                }\r\n            },\r\n\r\n            attributes: {\r\n                get: function () {\r\n\r\n                    console.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n                    return this.getAttributes();\r\n\r\n                }\r\n            }\r\n\r\n        } );\r\n\r\n\r\n        //\r\n\r\n        this.name = shader.name;\r\n        this.id = programIdCount ++;\r\n        this.code = code;\r\n        this.usedTimes = 1;\r\n        this.program = program;\r\n        this.vertexShader = glVertexShader;\r\n        this.fragmentShader = glFragmentShader;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLPrograms( renderer, extensions, capabilities ) {\r\n\r\n        var programs = [];\r\n\r\n        var shaderIDs = {\r\n            MeshDepthMaterial: 'depth',\r\n            MeshDistanceMaterial: 'distanceRGBA',\r\n            MeshNormalMaterial: 'normal',\r\n            MeshBasicMaterial: 'basic',\r\n            MeshLambertMaterial: 'lambert',\r\n            MeshPhongMaterial: 'phong',\r\n            MeshToonMaterial: 'phong',\r\n            MeshStandardMaterial: 'physical',\r\n            MeshPhysicalMaterial: 'physical',\r\n            LineBasicMaterial: 'basic',\r\n            LineDashedMaterial: 'dashed',\r\n            PointsMaterial: 'points',\r\n            ShadowMaterial: 'shadow'\r\n        };\r\n\r\n        var parameterNames = [\r\n            \"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\r\n            \"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\r\n            \"roughnessMap\", \"metalnessMap\", \"gradientMap\",\r\n            \"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n            \"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n            \"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n            \"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n            \"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\r\n            \"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\r\n            \"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\"\r\n        ];\r\n\r\n\r\n        function allocateBones( object ) {\r\n\r\n            var skeleton = object.skeleton;\r\n            var bones = skeleton.bones;\r\n\r\n            if ( capabilities.floatVertexTextures ) {\r\n\r\n                return 1024;\r\n\r\n            } else {\r\n\r\n                // default for when object is not specified\r\n                // ( for example when prebuilding shader to be used with multiple objects )\r\n                //\r\n                //  - leave some extra space for other uniforms\r\n                //  - limit here is ANGLE's 254 max uniform vectors\r\n                //    (up to 54 should be safe)\r\n\r\n                var nVertexUniforms = capabilities.maxVertexUniforms;\r\n                var nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n                var maxBones = Math.min( nVertexMatrices, bones.length );\r\n\r\n                if ( maxBones < bones.length ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\r\n                    return 0;\r\n\r\n                }\r\n\r\n                return maxBones;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function getTextureEncodingFromMap( map, gammaOverrideLinear ) {\r\n\r\n            var encoding;\r\n\r\n            if ( ! map ) {\r\n\r\n                encoding = LinearEncoding;\r\n\r\n            } else if ( map.isTexture ) {\r\n\r\n                encoding = map.encoding;\r\n\r\n            } else if ( map.isWebGLRenderTarget ) {\r\n\r\n                console.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\r\n                encoding = map.texture.encoding;\r\n\r\n            }\r\n\r\n            // add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\r\n            if ( encoding === LinearEncoding && gammaOverrideLinear ) {\r\n\r\n                encoding = GammaEncoding;\r\n\r\n            }\r\n\r\n            return encoding;\r\n\r\n        }\r\n\r\n        this.getParameters = function ( material, lights, shadows, fog, nClipPlanes, nClipIntersection, object ) {\r\n\r\n            var shaderID = shaderIDs[ material.type ];\r\n\r\n            // heuristics to create shader parameters according to lights in the scene\r\n            // (not to blow over maxLights budget)\r\n\r\n            var maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\r\n            var precision = capabilities.precision;\r\n\r\n            if ( material.precision !== null ) {\r\n\r\n                precision = capabilities.getMaxPrecision( material.precision );\r\n\r\n                if ( precision !== material.precision ) {\r\n\r\n                    console.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var currentRenderTarget = renderer.getRenderTarget();\r\n\r\n            var parameters = {\r\n\r\n                shaderID: shaderID,\r\n\r\n                precision: precision,\r\n                supportsVertexTextures: capabilities.vertexTextures,\r\n                outputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\r\n                map: !! material.map,\r\n                mapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\r\n                envMap: !! material.envMap,\r\n                envMapMode: material.envMap && material.envMap.mapping,\r\n                envMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\r\n                envMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\r\n                lightMap: !! material.lightMap,\r\n                aoMap: !! material.aoMap,\r\n                emissiveMap: !! material.emissiveMap,\r\n                emissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\r\n                bumpMap: !! material.bumpMap,\r\n                normalMap: !! material.normalMap,\r\n                displacementMap: !! material.displacementMap,\r\n                roughnessMap: !! material.roughnessMap,\r\n                metalnessMap: !! material.metalnessMap,\r\n                specularMap: !! material.specularMap,\r\n                alphaMap: !! material.alphaMap,\r\n\r\n                gradientMap: !! material.gradientMap,\r\n\r\n                combine: material.combine,\r\n\r\n                vertexColors: material.vertexColors,\r\n\r\n                fog: !! fog,\r\n                useFog: material.fog,\r\n                fogExp: ( fog && fog.isFogExp2 ),\r\n\r\n                flatShading: material.flatShading,\r\n\r\n                sizeAttenuation: material.sizeAttenuation,\r\n                logarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n                skinning: material.skinning && maxBones > 0,\r\n                maxBones: maxBones,\r\n                useVertexTexture: capabilities.floatVertexTextures,\r\n\r\n                morphTargets: material.morphTargets,\r\n                morphNormals: material.morphNormals,\r\n                maxMorphTargets: renderer.maxMorphTargets,\r\n                maxMorphNormals: renderer.maxMorphNormals,\r\n\r\n                numDirLights: lights.directional.length,\r\n                numPointLights: lights.point.length,\r\n                numSpotLights: lights.spot.length,\r\n                numRectAreaLights: lights.rectArea.length,\r\n                numHemiLights: lights.hemi.length,\r\n\r\n                numClippingPlanes: nClipPlanes,\r\n                numClipIntersection: nClipIntersection,\r\n\r\n                dithering: material.dithering,\r\n\r\n                shadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && shadows.length > 0,\r\n                shadowMapType: renderer.shadowMap.type,\r\n\r\n                toneMapping: renderer.toneMapping,\r\n                physicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n                premultipliedAlpha: material.premultipliedAlpha,\r\n\r\n                alphaTest: material.alphaTest,\r\n                doubleSided: material.side === DoubleSide,\r\n                flipSided: material.side === BackSide,\r\n\r\n                depthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\r\n\r\n            };\r\n\r\n            return parameters;\r\n\r\n        };\r\n\r\n        this.getProgramCode = function ( material, parameters ) {\r\n\r\n            var array = [];\r\n\r\n            if ( parameters.shaderID ) {\r\n\r\n                array.push( parameters.shaderID );\r\n\r\n            } else {\r\n\r\n                array.push( material.fragmentShader );\r\n                array.push( material.vertexShader );\r\n\r\n            }\r\n\r\n            if ( material.defines !== undefined ) {\r\n\r\n                for ( var name in material.defines ) {\r\n\r\n                    array.push( name );\r\n                    array.push( material.defines[ name ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n                array.push( parameters[ parameterNames[ i ] ] );\r\n\r\n            }\r\n\r\n            array.push( material.onBeforeCompile.toString() );\r\n\r\n            array.push( renderer.gammaOutput );\r\n\r\n            return array.join();\r\n\r\n        };\r\n\r\n        this.acquireProgram = function ( material, shader, parameters, code ) {\r\n\r\n            var program;\r\n\r\n            // Check if code has been already compiled\r\n            for ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n                var programInfo = programs[ p ];\r\n\r\n                if ( programInfo.code === code ) {\r\n\r\n                    program = programInfo;\r\n                    ++ program.usedTimes;\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( program === undefined ) {\r\n\r\n                program = new WebGLProgram( renderer, extensions, code, material, shader, parameters );\r\n                programs.push( program );\r\n\r\n            }\r\n\r\n            return program;\r\n\r\n        };\r\n\r\n        this.releaseProgram = function ( program ) {\r\n\r\n            if ( -- program.usedTimes === 0 ) {\r\n\r\n                // Remove from unordered set\r\n                var i = programs.indexOf( program );\r\n                programs[ i ] = programs[ programs.length - 1 ];\r\n                programs.pop();\r\n\r\n                // Free WebGL resources\r\n                program.destroy();\r\n\r\n            }\r\n\r\n        };\r\n\r\n        // Exposed for resource monitoring & error feedback via renderer.info:\r\n        this.programs = programs;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author fordacious / fordacious.github.io\r\n     */\r\n\r\n    function WebGLProperties() {\r\n\r\n        var properties = new WeakMap();\r\n\r\n        function get( object ) {\r\n\r\n            var map = properties.get( object );\r\n\r\n            if ( map === undefined ) {\r\n\r\n                map = {};\r\n                properties.set( object, map );\r\n\r\n            }\r\n\r\n            return map;\r\n\r\n        }\r\n\r\n        function remove( object ) {\r\n\r\n            properties.delete( object );\r\n\r\n        }\r\n\r\n        function update( object, key, value ) {\r\n\r\n            properties.get( object )[ key ] = value;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            properties = new WeakMap();\r\n\r\n        }\r\n\r\n        return {\r\n            get: get,\r\n            remove: remove,\r\n            update: update,\r\n            dispose: dispose\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function painterSortStable( a, b ) {\r\n\r\n        if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n            return a.renderOrder - b.renderOrder;\r\n\r\n        } else if ( a.program && b.program && a.program !== b.program ) {\r\n\r\n            return a.program.id - b.program.id;\r\n\r\n        } else if ( a.material.id !== b.material.id ) {\r\n\r\n            return a.material.id - b.material.id;\r\n\r\n        } else if ( a.z !== b.z ) {\r\n\r\n            return a.z - b.z;\r\n\r\n        } else {\r\n\r\n            return a.id - b.id;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function reversePainterSortStable( a, b ) {\r\n\r\n        if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n            return a.renderOrder - b.renderOrder;\r\n\r\n        } if ( a.z !== b.z ) {\r\n\r\n            return b.z - a.z;\r\n\r\n        } else {\r\n\r\n            return a.id - b.id;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function WebGLRenderList() {\r\n\r\n        var renderItems = [];\r\n        var renderItemsIndex = 0;\r\n\r\n        var opaque = [];\r\n        var transparent = [];\r\n\r\n        function init() {\r\n\r\n            renderItemsIndex = 0;\r\n\r\n            opaque.length = 0;\r\n            transparent.length = 0;\r\n\r\n        }\r\n\r\n        function push( object, geometry, material, z, group ) {\r\n\r\n            var renderItem = renderItems[ renderItemsIndex ];\r\n\r\n            if ( renderItem === undefined ) {\r\n\r\n                renderItem = {\r\n                    id: object.id,\r\n                    object: object,\r\n                    geometry: geometry,\r\n                    material: material,\r\n                    program: material.program,\r\n                    renderOrder: object.renderOrder,\r\n                    z: z,\r\n                    group: group\r\n                };\r\n\r\n                renderItems[ renderItemsIndex ] = renderItem;\r\n\r\n            } else {\r\n\r\n                renderItem.id = object.id;\r\n                renderItem.object = object;\r\n                renderItem.geometry = geometry;\r\n                renderItem.material = material;\r\n                renderItem.program = material.program;\r\n                renderItem.renderOrder = object.renderOrder;\r\n                renderItem.z = z;\r\n                renderItem.group = group;\r\n\r\n            }\r\n\r\n            ( material.transparent === true ? transparent : opaque ).push( renderItem );\r\n\r\n            renderItemsIndex ++;\r\n\r\n        }\r\n\r\n        function sort() {\r\n\r\n            if ( opaque.length > 1 ) opaque.sort( painterSortStable );\r\n            if ( transparent.length > 1 ) transparent.sort( reversePainterSortStable );\r\n\r\n        }\r\n\r\n        return {\r\n            opaque: opaque,\r\n            transparent: transparent,\r\n\r\n            init: init,\r\n            push: push,\r\n\r\n            sort: sort\r\n        };\r\n\r\n    }\r\n\r\n    function WebGLRenderLists() {\r\n\r\n        var lists = {};\r\n\r\n        function get( scene, camera ) {\r\n\r\n            var hash = scene.id + ',' + camera.id;\r\n            var list = lists[ hash ];\r\n\r\n            if ( list === undefined ) {\r\n\r\n                // console.log( 'THREE.WebGLRenderLists:', hash );\r\n\r\n                list = new WebGLRenderList();\r\n                lists[ hash ] = list;\r\n\r\n            }\r\n\r\n            return list;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            lists = {};\r\n\r\n        }\r\n\r\n        return {\r\n            get: get,\r\n            dispose: dispose\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function UniformsCache() {\r\n\r\n        var lights = {};\r\n\r\n        return {\r\n\r\n            get: function ( light ) {\r\n\r\n                if ( lights[ light.id ] !== undefined ) {\r\n\r\n                    return lights[ light.id ];\r\n\r\n                }\r\n\r\n                var uniforms;\r\n\r\n                switch ( light.type ) {\r\n\r\n                    case 'DirectionalLight':\r\n                        uniforms = {\r\n                            direction: new Vector3(),\r\n                            color: new Color(),\r\n\r\n                            shadow: false,\r\n                            shadowBias: 0,\r\n                            shadowRadius: 1,\r\n                            shadowMapSize: new Vector2()\r\n                        };\r\n                        break;\r\n\r\n                    case 'SpotLight':\r\n                        uniforms = {\r\n                            position: new Vector3(),\r\n                            direction: new Vector3(),\r\n                            color: new Color(),\r\n                            distance: 0,\r\n                            coneCos: 0,\r\n                            penumbraCos: 0,\r\n                            decay: 0,\r\n\r\n                            shadow: false,\r\n                            shadowBias: 0,\r\n                            shadowRadius: 1,\r\n                            shadowMapSize: new Vector2()\r\n                        };\r\n                        break;\r\n\r\n                    case 'PointLight':\r\n                        uniforms = {\r\n                            position: new Vector3(),\r\n                            color: new Color(),\r\n                            distance: 0,\r\n                            decay: 0,\r\n\r\n                            shadow: false,\r\n                            shadowBias: 0,\r\n                            shadowRadius: 1,\r\n                            shadowMapSize: new Vector2(),\r\n                            shadowCameraNear: 1,\r\n                            shadowCameraFar: 1000\r\n                        };\r\n                        break;\r\n\r\n                    case 'HemisphereLight':\r\n                        uniforms = {\r\n                            direction: new Vector3(),\r\n                            skyColor: new Color(),\r\n                            groundColor: new Color()\r\n                        };\r\n                        break;\r\n\r\n                    case 'RectAreaLight':\r\n                        uniforms = {\r\n                            color: new Color(),\r\n                            position: new Vector3(),\r\n                            halfWidth: new Vector3(),\r\n                            halfHeight: new Vector3()\r\n                            // TODO (abelnation): set RectAreaLight shadow uniforms\r\n                        };\r\n                        break;\r\n\r\n                }\r\n\r\n                lights[ light.id ] = uniforms;\r\n\r\n                return uniforms;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    var count = 0;\r\n\r\n    function WebGLLights() {\r\n\r\n        var cache = new UniformsCache();\r\n\r\n        var state = {\r\n\r\n            id: count ++,\r\n\r\n            hash: '',\r\n\r\n            ambient: [ 0, 0, 0 ],\r\n            directional: [],\r\n            directionalShadowMap: [],\r\n            directionalShadowMatrix: [],\r\n            spot: [],\r\n            spotShadowMap: [],\r\n            spotShadowMatrix: [],\r\n            rectArea: [],\r\n            point: [],\r\n            pointShadowMap: [],\r\n            pointShadowMatrix: [],\r\n            hemi: []\r\n\r\n        };\r\n\r\n        var vector3 = new Vector3();\r\n        var matrix4 = new Matrix4();\r\n        var matrix42 = new Matrix4();\r\n\r\n        function setup( lights, shadows, camera ) {\r\n\r\n            var r = 0, g = 0, b = 0;\r\n\r\n            var directionalLength = 0;\r\n            var pointLength = 0;\r\n            var spotLength = 0;\r\n            var rectAreaLength = 0;\r\n            var hemiLength = 0;\r\n\r\n            var viewMatrix = camera.matrixWorldInverse;\r\n\r\n            for ( var i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n                var light = lights[ i ];\r\n\r\n                var color = light.color;\r\n                var intensity = light.intensity;\r\n                var distance = light.distance;\r\n\r\n                var shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\r\n\r\n                if ( light.isAmbientLight ) {\r\n\r\n                    r += color.r * intensity;\r\n                    g += color.g * intensity;\r\n                    b += color.b * intensity;\r\n\r\n                } else if ( light.isDirectionalLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n                    uniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n                    vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n                    uniforms.direction.sub( vector3 );\r\n                    uniforms.direction.transformDirection( viewMatrix );\r\n\r\n                    uniforms.shadow = light.castShadow;\r\n\r\n                    if ( light.castShadow ) {\r\n\r\n                        var shadow = light.shadow;\r\n\r\n                        uniforms.shadowBias = shadow.bias;\r\n                        uniforms.shadowRadius = shadow.radius;\r\n                        uniforms.shadowMapSize = shadow.mapSize;\r\n\r\n                    }\r\n\r\n                    state.directionalShadowMap[ directionalLength ] = shadowMap;\r\n                    state.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n                    state.directional[ directionalLength ] = uniforms;\r\n\r\n                    directionalLength ++;\r\n\r\n                } else if ( light.isSpotLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.position.applyMatrix4( viewMatrix );\r\n\r\n                    uniforms.color.copy( color ).multiplyScalar( intensity );\r\n                    uniforms.distance = distance;\r\n\r\n                    uniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n                    vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n                    uniforms.direction.sub( vector3 );\r\n                    uniforms.direction.transformDirection( viewMatrix );\r\n\r\n                    uniforms.coneCos = Math.cos( light.angle );\r\n                    uniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n                    uniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n                    uniforms.shadow = light.castShadow;\r\n\r\n                    if ( light.castShadow ) {\r\n\r\n                        var shadow = light.shadow;\r\n\r\n                        uniforms.shadowBias = shadow.bias;\r\n                        uniforms.shadowRadius = shadow.radius;\r\n                        uniforms.shadowMapSize = shadow.mapSize;\r\n\r\n                    }\r\n\r\n                    state.spotShadowMap[ spotLength ] = shadowMap;\r\n                    state.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n                    state.spot[ spotLength ] = uniforms;\r\n\r\n                    spotLength ++;\r\n\r\n                } else if ( light.isRectAreaLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    // (a) intensity is the total visible light emitted\r\n                    //uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\r\n\r\n                    // (b) intensity is the brightness of the light\r\n                    uniforms.color.copy( color ).multiplyScalar( intensity );\r\n\r\n                    uniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.position.applyMatrix4( viewMatrix );\r\n\r\n                    // extract local rotation of light to derive width/height half vectors\r\n                    matrix42.identity();\r\n                    matrix4.copy( light.matrixWorld );\r\n                    matrix4.premultiply( viewMatrix );\r\n                    matrix42.extractRotation( matrix4 );\r\n\r\n                    uniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\r\n                    uniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\r\n\r\n                    uniforms.halfWidth.applyMatrix4( matrix42 );\r\n                    uniforms.halfHeight.applyMatrix4( matrix42 );\r\n\r\n                    // TODO (abelnation): RectAreaLight distance?\r\n                    // uniforms.distance = distance;\r\n\r\n                    state.rectArea[ rectAreaLength ] = uniforms;\r\n\r\n                    rectAreaLength ++;\r\n\r\n                } else if ( light.isPointLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.position.applyMatrix4( viewMatrix );\r\n\r\n                    uniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n                    uniforms.distance = light.distance;\r\n                    uniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n                    uniforms.shadow = light.castShadow;\r\n\r\n                    if ( light.castShadow ) {\r\n\r\n                        var shadow = light.shadow;\r\n\r\n                        uniforms.shadowBias = shadow.bias;\r\n                        uniforms.shadowRadius = shadow.radius;\r\n                        uniforms.shadowMapSize = shadow.mapSize;\r\n                        uniforms.shadowCameraNear = shadow.camera.near;\r\n                        uniforms.shadowCameraFar = shadow.camera.far;\r\n\r\n                    }\r\n\r\n                    state.pointShadowMap[ pointLength ] = shadowMap;\r\n                    state.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\r\n                    state.point[ pointLength ] = uniforms;\r\n\r\n                    pointLength ++;\r\n\r\n                } else if ( light.isHemisphereLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.direction.transformDirection( viewMatrix );\r\n                    uniforms.direction.normalize();\r\n\r\n                    uniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n                    uniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n                    state.hemi[ hemiLength ] = uniforms;\r\n\r\n                    hemiLength ++;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.ambient[ 0 ] = r;\r\n            state.ambient[ 1 ] = g;\r\n            state.ambient[ 2 ] = b;\r\n\r\n            state.directional.length = directionalLength;\r\n            state.spot.length = spotLength;\r\n            state.rectArea.length = rectAreaLength;\r\n            state.point.length = pointLength;\r\n            state.hemi.length = hemiLength;\r\n\r\n            state.hash = state.id + ',' + directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + shadows.length;\r\n\r\n        }\r\n\r\n        return {\r\n            setup: setup,\r\n            state: state\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function WebGLRenderState() {\r\n\r\n        var lights = new WebGLLights();\r\n\r\n        var lightsArray = [];\r\n        var shadowsArray = [];\r\n        var spritesArray = [];\r\n\r\n        function init() {\r\n\r\n            lightsArray.length = 0;\r\n            shadowsArray.length = 0;\r\n            spritesArray.length = 0;\r\n\r\n        }\r\n\r\n        function pushLight( light ) {\r\n\r\n            lightsArray.push( light );\r\n\r\n        }\r\n\r\n        function pushShadow( shadowLight ) {\r\n\r\n            shadowsArray.push( shadowLight );\r\n\r\n        }\r\n\r\n        function pushSprite( shadowLight ) {\r\n\r\n            spritesArray.push( shadowLight );\r\n\r\n        }\r\n\r\n        function setupLights( camera ) {\r\n\r\n            lights.setup( lightsArray, shadowsArray, camera );\r\n\r\n        }\r\n\r\n        var state = {\r\n            lightsArray: lightsArray,\r\n            shadowsArray: shadowsArray,\r\n            spritesArray: spritesArray,\r\n\r\n            lights: lights\r\n        };\r\n\r\n        return {\r\n            init: init,\r\n            state: state,\r\n            setupLights: setupLights,\r\n\r\n            pushLight: pushLight,\r\n            pushShadow: pushShadow,\r\n            pushSprite: pushSprite\r\n        };\r\n\r\n    }\r\n\r\n    function WebGLRenderStates() {\r\n\r\n        var renderStates = {};\r\n\r\n        function get( scene, camera ) {\r\n\r\n            var hash = scene.id + ',' + camera.id;\r\n\r\n            var renderState = renderStates[ hash ];\r\n\r\n            if ( renderState === undefined ) {\r\n\r\n                renderState = new WebGLRenderState();\r\n                renderStates[ hash ] = renderState;\r\n\r\n            }\r\n\r\n            return renderState;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            renderStates = {};\r\n\r\n        }\r\n\r\n        return {\r\n            get: get,\r\n            dispose: dispose\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author bhouston / https://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t * }\r\n     */\r\n\r\n    function MeshDepthMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshDepthMaterial';\r\n\r\n        this.depthPacking = BasicDepthPacking;\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n\r\n        this.map = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshDepthMaterial.prototype = Object.create( Material.prototype );\r\n    MeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\r\n\r\n    MeshDepthMaterial.prototype.isMeshDepthMaterial = true;\r\n\r\n    MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.depthPacking = source.depthPacking;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        this.map = source.map;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *\r\n\t *  referencePosition: <float>,\r\n\t *  nearDistance: <float>,\r\n\t *  farDistance: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>\r\n\t *\r\n\t * }\r\n     */\r\n\r\n    function MeshDistanceMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshDistanceMaterial';\r\n\r\n        this.referencePosition = new Vector3();\r\n        this.nearDistance = 1;\r\n        this.farDistance = 1000;\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n\r\n        this.map = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshDistanceMaterial.prototype = Object.create( Material.prototype );\r\n    MeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\r\n\r\n    MeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\r\n\r\n    MeshDistanceMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.referencePosition.copy( source.referencePosition );\r\n        this.nearDistance = source.nearDistance;\r\n        this.farDistance = source.farDistance;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        this.map = source.map;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\r\n\r\n        var _frustum = new Frustum(),\r\n            _projScreenMatrix = new Matrix4(),\r\n\r\n            _shadowMapSize = new Vector2(),\r\n            _maxShadowMapSize = new Vector2( maxTextureSize, maxTextureSize ),\r\n\r\n            _lookTarget = new Vector3(),\r\n            _lightPositionWorld = new Vector3(),\r\n\r\n            _MorphingFlag = 1,\r\n            _SkinningFlag = 2,\r\n\r\n            _NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\r\n\r\n            _depthMaterials = new Array( _NumberOfMaterialVariants ),\r\n            _distanceMaterials = new Array( _NumberOfMaterialVariants ),\r\n\r\n            _materialCache = {};\r\n\r\n        var shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\r\n\r\n        var cubeDirections = [\r\n            new Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\r\n            new Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\r\n        ];\r\n\r\n        var cubeUps = [\r\n            new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\r\n            new Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\r\n        ];\r\n\r\n        var cube2DViewPorts = [\r\n            new Vector4(), new Vector4(), new Vector4(),\r\n            new Vector4(), new Vector4(), new Vector4()\r\n        ];\r\n\r\n        // init\r\n\r\n        for ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\r\n\r\n            var useMorphing = ( i & _MorphingFlag ) !== 0;\r\n            var useSkinning = ( i & _SkinningFlag ) !== 0;\r\n\r\n            var depthMaterial = new MeshDepthMaterial( {\r\n\r\n                depthPacking: RGBADepthPacking,\r\n\r\n                morphTargets: useMorphing,\r\n                skinning: useSkinning\r\n\r\n            } );\r\n\r\n            _depthMaterials[ i ] = depthMaterial;\r\n\r\n            //\r\n\r\n            var distanceMaterial = new MeshDistanceMaterial( {\r\n\r\n                morphTargets: useMorphing,\r\n                skinning: useSkinning\r\n\r\n            } );\r\n\r\n            _distanceMaterials[ i ] = distanceMaterial;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var scope = this;\r\n\r\n        this.enabled = false;\r\n\r\n        this.autoUpdate = true;\r\n        this.needsUpdate = false;\r\n\r\n        this.type = PCFShadowMap;\r\n\r\n        this.render = function ( lights, scene, camera ) {\r\n\r\n            if ( scope.enabled === false ) return;\r\n            if ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n            if ( lights.length === 0 ) return;\r\n\r\n            // TODO Clean up (needed in case of contextlost)\r\n            var _gl = _renderer.context;\r\n            var _state = _renderer.state;\r\n\r\n            // Set GL state for depth map.\r\n            _state.disable( _gl.BLEND );\r\n            _state.buffers.color.setClear( 1, 1, 1, 1 );\r\n            _state.buffers.depth.setTest( true );\r\n            _state.setScissorTest( false );\r\n\r\n            // render depth map\r\n\r\n            var faceCount;\r\n\r\n            for ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n                var light = lights[ i ];\r\n                var shadow = light.shadow;\r\n                var isPointLight = light && light.isPointLight;\r\n\r\n                if ( shadow === undefined ) {\r\n\r\n                    console.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\r\n                    continue;\r\n\r\n                }\r\n\r\n                var shadowCamera = shadow.camera;\r\n\r\n                _shadowMapSize.copy( shadow.mapSize );\r\n                _shadowMapSize.min( _maxShadowMapSize );\r\n\r\n                if ( isPointLight ) {\r\n\r\n                    var vpWidth = _shadowMapSize.x;\r\n                    var vpHeight = _shadowMapSize.y;\r\n\r\n                    // These viewports map a cube-map onto a 2D texture with the\r\n                    // following orientation:\r\n                    //\r\n                    //  xzXZ\r\n                    //   y Y\r\n                    //\r\n                    // X - Positive x direction\r\n                    // x - Negative x direction\r\n                    // Y - Positive y direction\r\n                    // y - Negative y direction\r\n                    // Z - Positive z direction\r\n                    // z - Negative z direction\r\n\r\n                    // positive X\r\n                    cube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\r\n                    // negative X\r\n                    cube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\r\n                    // positive Z\r\n                    cube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\r\n                    // negative Z\r\n                    cube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\r\n                    // positive Y\r\n                    cube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\r\n                    // negative Y\r\n                    cube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\r\n\r\n                    _shadowMapSize.x *= 4.0;\r\n                    _shadowMapSize.y *= 2.0;\r\n\r\n                }\r\n\r\n                if ( shadow.map === null ) {\r\n\r\n                    var pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\r\n\r\n                    shadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n                    shadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n                    shadowCamera.updateProjectionMatrix();\r\n\r\n                }\r\n\r\n                if ( shadow.isSpotLightShadow ) {\r\n\r\n                    shadow.update( light );\r\n\r\n                }\r\n\r\n                var shadowMap = shadow.map;\r\n                var shadowMatrix = shadow.matrix;\r\n\r\n                _lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n                shadowCamera.position.copy( _lightPositionWorld );\r\n\r\n                if ( isPointLight ) {\r\n\r\n                    faceCount = 6;\r\n\r\n                    // for point lights we set the shadow matrix to be a translation-only matrix\r\n                    // equal to inverse of the light's position\r\n\r\n                    shadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\r\n\r\n                } else {\r\n\r\n                    faceCount = 1;\r\n\r\n                    _lookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n                    shadowCamera.lookAt( _lookTarget );\r\n                    shadowCamera.updateMatrixWorld();\r\n\r\n                    // compute shadow matrix\r\n\r\n                    shadowMatrix.set(\r\n                        0.5, 0.0, 0.0, 0.5,\r\n                        0.0, 0.5, 0.0, 0.5,\r\n                        0.0, 0.0, 0.5, 0.5,\r\n                        0.0, 0.0, 0.0, 1.0\r\n                    );\r\n\r\n                    shadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n                    shadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n                }\r\n\r\n                _renderer.setRenderTarget( shadowMap );\r\n                _renderer.clear();\r\n\r\n                // render shadow map for each cube face (if omni-directional) or\r\n                // run a single pass if not\r\n\r\n                for ( var face = 0; face < faceCount; face ++ ) {\r\n\r\n                    if ( isPointLight ) {\r\n\r\n                        _lookTarget.copy( shadowCamera.position );\r\n                        _lookTarget.add( cubeDirections[ face ] );\r\n                        shadowCamera.up.copy( cubeUps[ face ] );\r\n                        shadowCamera.lookAt( _lookTarget );\r\n                        shadowCamera.updateMatrixWorld();\r\n\r\n                        var vpDimensions = cube2DViewPorts[ face ];\r\n                        _state.viewport( vpDimensions );\r\n\r\n                    }\r\n\r\n                    // update camera matrices and frustum\r\n\r\n                    _projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n                    _frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n                    // set object matrices & frustum culling\r\n\r\n                    renderObject( scene, camera, shadowCamera, isPointLight );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            scope.needsUpdate = false;\r\n\r\n        };\r\n\r\n        function getDepthMaterial( object, material, isPointLight, lightPositionWorld, shadowCameraNear, shadowCameraFar ) {\r\n\r\n            var geometry = object.geometry;\r\n\r\n            var result = null;\r\n\r\n            var materialVariants = _depthMaterials;\r\n            var customMaterial = object.customDepthMaterial;\r\n\r\n            if ( isPointLight ) {\r\n\r\n                materialVariants = _distanceMaterials;\r\n                customMaterial = object.customDistanceMaterial;\r\n\r\n            }\r\n\r\n            if ( ! customMaterial ) {\r\n\r\n                var useMorphing = false;\r\n\r\n                if ( material.morphTargets ) {\r\n\r\n                    if ( geometry && geometry.isBufferGeometry ) {\r\n\r\n                        useMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\r\n\r\n                    } else if ( geometry && geometry.isGeometry ) {\r\n\r\n                        useMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( object.isSkinnedMesh && material.skinning === false ) {\r\n\r\n                    console.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\r\n\r\n                }\r\n\r\n                var useSkinning = object.isSkinnedMesh && material.skinning;\r\n\r\n                var variantIndex = 0;\r\n\r\n                if ( useMorphing ) variantIndex |= _MorphingFlag;\r\n                if ( useSkinning ) variantIndex |= _SkinningFlag;\r\n\r\n                result = materialVariants[ variantIndex ];\r\n\r\n            } else {\r\n\r\n                result = customMaterial;\r\n\r\n            }\r\n\r\n            if ( _renderer.localClippingEnabled &&\r\n                material.clipShadows === true &&\r\n                material.clippingPlanes.length !== 0 ) {\r\n\r\n                // in this case we need a unique material instance reflecting the\r\n                // appropriate state\r\n\r\n                var keyA = result.uuid, keyB = material.uuid;\r\n\r\n                var materialsForVariant = _materialCache[ keyA ];\r\n\r\n                if ( materialsForVariant === undefined ) {\r\n\r\n                    materialsForVariant = {};\r\n                    _materialCache[ keyA ] = materialsForVariant;\r\n\r\n                }\r\n\r\n                var cachedMaterial = materialsForVariant[ keyB ];\r\n\r\n                if ( cachedMaterial === undefined ) {\r\n\r\n                    cachedMaterial = result.clone();\r\n                    materialsForVariant[ keyB ] = cachedMaterial;\r\n\r\n                }\r\n\r\n                result = cachedMaterial;\r\n\r\n            }\r\n\r\n            result.visible = material.visible;\r\n            result.wireframe = material.wireframe;\r\n\r\n            result.side = ( material.shadowSide != null ) ? material.shadowSide : shadowSide[ material.side ];\r\n\r\n            result.clipShadows = material.clipShadows;\r\n            result.clippingPlanes = material.clippingPlanes;\r\n            result.clipIntersection = material.clipIntersection;\r\n\r\n            result.wireframeLinewidth = material.wireframeLinewidth;\r\n            result.linewidth = material.linewidth;\r\n\r\n            if ( isPointLight && result.isMeshDistanceMaterial ) {\r\n\r\n                result.referencePosition.copy( lightPositionWorld );\r\n                result.nearDistance = shadowCameraNear;\r\n                result.farDistance = shadowCameraFar;\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        function renderObject( object, camera, shadowCamera, isPointLight ) {\r\n\r\n            if ( object.visible === false ) return;\r\n\r\n            var visible = object.layers.test( camera.layers );\r\n\r\n            if ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\r\n\r\n                if ( object.castShadow && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\r\n\r\n                    object.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\r\n                    var geometry = _objects.update( object );\r\n                    var material = object.material;\r\n\r\n                    if ( Array.isArray( material ) ) {\r\n\r\n                        var groups = geometry.groups;\r\n\r\n                        for ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n                            var group = groups[ k ];\r\n                            var groupMaterial = material[ group.materialIndex ];\r\n\r\n                            if ( groupMaterial && groupMaterial.visible ) {\r\n\r\n                                var depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\r\n                                _renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else if ( material.visible ) {\r\n\r\n                        var depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\r\n                        _renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var children = object.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                renderObject( children[ i ], camera, shadowCamera, isPointLight );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n        Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n        this.needsUpdate = true;\r\n\r\n    }\r\n\r\n    CanvasTexture.prototype = Object.create( Texture.prototype );\r\n    CanvasTexture.prototype.constructor = CanvasTexture;\r\n    CanvasTexture.prototype.isCanvasTexture = true;\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function WebGLSpriteRenderer( renderer, gl, state, textures, capabilities ) {\r\n\r\n        var vertexBuffer, elementBuffer;\r\n        var program, attributes, uniforms;\r\n\r\n        var texture;\r\n\r\n        // decompose matrixWorld\r\n\r\n        var spritePosition = new Vector3();\r\n        var spriteRotation = new Quaternion();\r\n        var spriteScale = new Vector3();\r\n\r\n        function init() {\r\n\r\n            var vertices = new Float32Array( [\r\n                - 0.5, - 0.5, 0, 0,\r\n                0.5, - 0.5, 1, 0,\r\n                0.5, 0.5, 1, 1,\r\n                - 0.5, 0.5, 0, 1\r\n            ] );\r\n\r\n            var faces = new Uint16Array( [\r\n                0, 1, 2,\r\n                0, 2, 3\r\n            ] );\r\n\r\n            vertexBuffer = gl.createBuffer();\r\n            elementBuffer = gl.createBuffer();\r\n\r\n            gl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n            gl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n            gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n            gl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n            program = createProgram();\r\n\r\n            attributes = {\r\n                position: gl.getAttribLocation( program, 'position' ),\r\n                uv: gl.getAttribLocation( program, 'uv' )\r\n            };\r\n\r\n            uniforms = {\r\n                uvOffset: gl.getUniformLocation( program, 'uvOffset' ),\r\n                uvScale: gl.getUniformLocation( program, 'uvScale' ),\r\n\r\n                rotation: gl.getUniformLocation( program, 'rotation' ),\r\n                center: gl.getUniformLocation( program, 'center' ),\r\n                scale: gl.getUniformLocation( program, 'scale' ),\r\n\r\n                color: gl.getUniformLocation( program, 'color' ),\r\n                map: gl.getUniformLocation( program, 'map' ),\r\n                opacity: gl.getUniformLocation( program, 'opacity' ),\r\n\r\n                modelViewMatrix: gl.getUniformLocation( program, 'modelViewMatrix' ),\r\n                projectionMatrix: gl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n                fogType: gl.getUniformLocation( program, 'fogType' ),\r\n                fogDensity: gl.getUniformLocation( program, 'fogDensity' ),\r\n                fogNear: gl.getUniformLocation( program, 'fogNear' ),\r\n                fogFar: gl.getUniformLocation( program, 'fogFar' ),\r\n                fogColor: gl.getUniformLocation( program, 'fogColor' ),\r\n                fogDepth: gl.getUniformLocation( program, 'fogDepth' ),\r\n\r\n                alphaTest: gl.getUniformLocation( program, 'alphaTest' )\r\n            };\r\n\r\n            var canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n            canvas.width = 8;\r\n            canvas.height = 8;\r\n\r\n            var context = canvas.getContext( '2d' );\r\n            context.fillStyle = 'white';\r\n            context.fillRect( 0, 0, 8, 8 );\r\n\r\n            texture = new CanvasTexture( canvas );\r\n\r\n        }\r\n\r\n        this.render = function ( sprites, scene, camera ) {\r\n\r\n            if ( sprites.length === 0 ) return;\r\n\r\n            // setup gl\r\n\r\n            if ( program === undefined ) {\r\n\r\n                init();\r\n\r\n            }\r\n\r\n            state.useProgram( program );\r\n\r\n            state.initAttributes();\r\n            state.enableAttribute( attributes.position );\r\n            state.enableAttribute( attributes.uv );\r\n            state.disableUnusedAttributes();\r\n\r\n            state.disable( gl.CULL_FACE );\r\n            state.enable( gl.BLEND );\r\n\r\n            gl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n            gl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n            gl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n            gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n            gl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n            state.activeTexture( gl.TEXTURE0 );\r\n            gl.uniform1i( uniforms.map, 0 );\r\n\r\n            var oldFogType = 0;\r\n            var sceneFogType = 0;\r\n            var fog = scene.fog;\r\n\r\n            if ( fog ) {\r\n\r\n                gl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n                if ( fog.isFog ) {\r\n\r\n                    gl.uniform1f( uniforms.fogNear, fog.near );\r\n                    gl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n                    gl.uniform1i( uniforms.fogType, 1 );\r\n                    oldFogType = 1;\r\n                    sceneFogType = 1;\r\n\r\n                } else if ( fog.isFogExp2 ) {\r\n\r\n                    gl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n                    gl.uniform1i( uniforms.fogType, 2 );\r\n                    oldFogType = 2;\r\n                    sceneFogType = 2;\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                gl.uniform1i( uniforms.fogType, 0 );\r\n                oldFogType = 0;\r\n                sceneFogType = 0;\r\n\r\n            }\r\n\r\n\r\n            // update positions and sort\r\n\r\n            for ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n                var sprite = sprites[ i ];\r\n\r\n                sprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n                sprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n            }\r\n\r\n            sprites.sort( painterSortStable );\r\n\r\n            // render all sprites\r\n\r\n            var scale = [];\r\n            var center = [];\r\n\r\n            for ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n                var sprite = sprites[ i ];\r\n                var material = sprite.material;\r\n\r\n                if ( material.visible === false ) continue;\r\n\r\n                sprite.onBeforeRender( renderer, scene, camera, undefined, material, undefined );\r\n\r\n                gl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n                gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n                sprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n                scale[ 0 ] = spriteScale.x;\r\n                scale[ 1 ] = spriteScale.y;\r\n\r\n                center[ 0 ] = sprite.center.x - 0.5;\r\n                center[ 1 ] = sprite.center.y - 0.5;\r\n\r\n                var fogType = 0;\r\n\r\n                if ( scene.fog && material.fog ) {\r\n\r\n                    fogType = sceneFogType;\r\n\r\n                }\r\n\r\n                if ( oldFogType !== fogType ) {\r\n\r\n                    gl.uniform1i( uniforms.fogType, fogType );\r\n                    oldFogType = fogType;\r\n\r\n                }\r\n\r\n                if ( material.map !== null ) {\r\n\r\n                    gl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n                    gl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n                } else {\r\n\r\n                    gl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n                    gl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n                }\r\n\r\n                gl.uniform1f( uniforms.opacity, material.opacity );\r\n                gl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n                gl.uniform1f( uniforms.rotation, material.rotation );\r\n                gl.uniform2fv( uniforms.center, center );\r\n                gl.uniform2fv( uniforms.scale, scale );\r\n\r\n                state.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n                state.buffers.depth.setTest( material.depthTest );\r\n                state.buffers.depth.setMask( material.depthWrite );\r\n                state.buffers.color.setMask( material.colorWrite );\r\n\r\n                textures.setTexture2D( material.map || texture, 0 );\r\n\r\n                gl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n                sprite.onAfterRender( renderer, scene, camera, undefined, material, undefined );\r\n\r\n            }\r\n\r\n            // restore gl\r\n\r\n            state.enable( gl.CULL_FACE );\r\n\r\n            state.reset();\r\n\r\n        };\r\n\r\n        function createProgram() {\r\n\r\n            var program = gl.createProgram();\r\n\r\n            var vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n            var fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n            gl.shaderSource( vertexShader, [\r\n\r\n                'precision ' + capabilities.precision + ' float;',\r\n\r\n                '#define SHADER_NAME ' + 'SpriteMaterial',\r\n\r\n                'uniform mat4 modelViewMatrix;',\r\n                'uniform mat4 projectionMatrix;',\r\n                'uniform float rotation;',\r\n                'uniform vec2 center;',\r\n                'uniform vec2 scale;',\r\n                'uniform vec2 uvOffset;',\r\n                'uniform vec2 uvScale;',\r\n\r\n                'attribute vec2 position;',\r\n                'attribute vec2 uv;',\r\n\r\n                'varying vec2 vUV;',\r\n                'varying float fogDepth;',\r\n\r\n                'void main() {',\r\n\r\n                '\tvUV = uvOffset + uv * uvScale;',\r\n\r\n                '\tvec2 alignedPosition = ( position - center ) * scale;',\r\n\r\n                '\tvec2 rotatedPosition;',\r\n                '\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n                '\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n                '\tvec4 mvPosition;',\r\n\r\n                '\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n                '\tmvPosition.xy += rotatedPosition;',\r\n\r\n                '\tgl_Position = projectionMatrix * mvPosition;',\r\n\r\n                '\tfogDepth = - mvPosition.z;',\r\n\r\n                '}'\r\n\r\n            ].join( '\\n' ) );\r\n\r\n            gl.shaderSource( fragmentShader, [\r\n\r\n                'precision ' + capabilities.precision + ' float;',\r\n\r\n                '#define SHADER_NAME ' + 'SpriteMaterial',\r\n\r\n                'uniform vec3 color;',\r\n                'uniform sampler2D map;',\r\n                'uniform float opacity;',\r\n\r\n                'uniform int fogType;',\r\n                'uniform vec3 fogColor;',\r\n                'uniform float fogDensity;',\r\n                'uniform float fogNear;',\r\n                'uniform float fogFar;',\r\n                'uniform float alphaTest;',\r\n\r\n                'varying vec2 vUV;',\r\n                'varying float fogDepth;',\r\n\r\n                'void main() {',\r\n\r\n                '\tvec4 texture = texture2D( map, vUV );',\r\n\r\n                '\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n                '\tif ( gl_FragColor.a < alphaTest ) discard;',\r\n\r\n                '\tif ( fogType > 0 ) {',\r\n\r\n                '\t\tfloat fogFactor = 0.0;',\r\n\r\n                '\t\tif ( fogType == 1 ) {',\r\n\r\n                '\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );',\r\n\r\n                '\t\t} else {',\r\n\r\n                '\t\t\tconst float LOG2 = 1.442695;',\r\n                '\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );',\r\n                '\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n                '\t\t}',\r\n\r\n                '\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );',\r\n\r\n                '\t}',\r\n\r\n                '}'\r\n\r\n            ].join( '\\n' ) );\r\n\r\n            gl.compileShader( vertexShader );\r\n            gl.compileShader( fragmentShader );\r\n\r\n            gl.attachShader( program, vertexShader );\r\n            gl.attachShader( program, fragmentShader );\r\n\r\n            gl.linkProgram( program );\r\n\r\n            return program;\r\n\r\n        }\r\n\r\n        function painterSortStable( a, b ) {\r\n\r\n            if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n                return a.renderOrder - b.renderOrder;\r\n\r\n            } else if ( a.z !== b.z ) {\r\n\r\n                return b.z - a.z;\r\n\r\n            } else {\r\n\r\n                return b.id - a.id;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLState( gl, extensions, utils ) {\r\n\r\n        function ColorBuffer() {\r\n\r\n            var locked = false;\r\n\r\n            var color = new Vector4();\r\n            var currentColorMask = null;\r\n            var currentColorClear = new Vector4( 0, 0, 0, 0 );\r\n\r\n            return {\r\n\r\n                setMask: function ( colorMask ) {\r\n\r\n                    if ( currentColorMask !== colorMask && ! locked ) {\r\n\r\n                        gl.colorMask( colorMask, colorMask, colorMask, colorMask );\r\n                        currentColorMask = colorMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setLocked: function ( lock ) {\r\n\r\n                    locked = lock;\r\n\r\n                },\r\n\r\n                setClear: function ( r, g, b, a, premultipliedAlpha ) {\r\n\r\n                    if ( premultipliedAlpha === true ) {\r\n\r\n                        r *= a; g *= a; b *= a;\r\n\r\n                    }\r\n\r\n                    color.set( r, g, b, a );\r\n\r\n                    if ( currentColorClear.equals( color ) === false ) {\r\n\r\n                        gl.clearColor( r, g, b, a );\r\n                        currentColorClear.copy( color );\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                reset: function () {\r\n\r\n                    locked = false;\r\n\r\n                    currentColorMask = null;\r\n                    currentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        function DepthBuffer() {\r\n\r\n            var locked = false;\r\n\r\n            var currentDepthMask = null;\r\n            var currentDepthFunc = null;\r\n            var currentDepthClear = null;\r\n\r\n            return {\r\n\r\n                setTest: function ( depthTest ) {\r\n\r\n                    if ( depthTest ) {\r\n\r\n                        enable( gl.DEPTH_TEST );\r\n\r\n                    } else {\r\n\r\n                        disable( gl.DEPTH_TEST );\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setMask: function ( depthMask ) {\r\n\r\n                    if ( currentDepthMask !== depthMask && ! locked ) {\r\n\r\n                        gl.depthMask( depthMask );\r\n                        currentDepthMask = depthMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setFunc: function ( depthFunc ) {\r\n\r\n                    if ( currentDepthFunc !== depthFunc ) {\r\n\r\n                        if ( depthFunc ) {\r\n\r\n                            switch ( depthFunc ) {\r\n\r\n                                case NeverDepth:\r\n\r\n                                    gl.depthFunc( gl.NEVER );\r\n                                    break;\r\n\r\n                                case AlwaysDepth:\r\n\r\n                                    gl.depthFunc( gl.ALWAYS );\r\n                                    break;\r\n\r\n                                case LessDepth:\r\n\r\n                                    gl.depthFunc( gl.LESS );\r\n                                    break;\r\n\r\n                                case LessEqualDepth:\r\n\r\n                                    gl.depthFunc( gl.LEQUAL );\r\n                                    break;\r\n\r\n                                case EqualDepth:\r\n\r\n                                    gl.depthFunc( gl.EQUAL );\r\n                                    break;\r\n\r\n                                case GreaterEqualDepth:\r\n\r\n                                    gl.depthFunc( gl.GEQUAL );\r\n                                    break;\r\n\r\n                                case GreaterDepth:\r\n\r\n                                    gl.depthFunc( gl.GREATER );\r\n                                    break;\r\n\r\n                                case NotEqualDepth:\r\n\r\n                                    gl.depthFunc( gl.NOTEQUAL );\r\n                                    break;\r\n\r\n                                default:\r\n\r\n                                    gl.depthFunc( gl.LEQUAL );\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            gl.depthFunc( gl.LEQUAL );\r\n\r\n                        }\r\n\r\n                        currentDepthFunc = depthFunc;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setLocked: function ( lock ) {\r\n\r\n                    locked = lock;\r\n\r\n                },\r\n\r\n                setClear: function ( depth ) {\r\n\r\n                    if ( currentDepthClear !== depth ) {\r\n\r\n                        gl.clearDepth( depth );\r\n                        currentDepthClear = depth;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                reset: function () {\r\n\r\n                    locked = false;\r\n\r\n                    currentDepthMask = null;\r\n                    currentDepthFunc = null;\r\n                    currentDepthClear = null;\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        function StencilBuffer() {\r\n\r\n            var locked = false;\r\n\r\n            var currentStencilMask = null;\r\n            var currentStencilFunc = null;\r\n            var currentStencilRef = null;\r\n            var currentStencilFuncMask = null;\r\n            var currentStencilFail = null;\r\n            var currentStencilZFail = null;\r\n            var currentStencilZPass = null;\r\n            var currentStencilClear = null;\r\n\r\n            return {\r\n\r\n                setTest: function ( stencilTest ) {\r\n\r\n                    if ( stencilTest ) {\r\n\r\n                        enable( gl.STENCIL_TEST );\r\n\r\n                    } else {\r\n\r\n                        disable( gl.STENCIL_TEST );\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setMask: function ( stencilMask ) {\r\n\r\n                    if ( currentStencilMask !== stencilMask && ! locked ) {\r\n\r\n                        gl.stencilMask( stencilMask );\r\n                        currentStencilMask = stencilMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setFunc: function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n                    if ( currentStencilFunc !== stencilFunc ||\r\n                        currentStencilRef \t!== stencilRef \t||\r\n                        currentStencilFuncMask !== stencilMask ) {\r\n\r\n                        gl.stencilFunc( stencilFunc, stencilRef, stencilMask );\r\n\r\n                        currentStencilFunc = stencilFunc;\r\n                        currentStencilRef = stencilRef;\r\n                        currentStencilFuncMask = stencilMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setOp: function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n                    if ( currentStencilFail\t !== stencilFail \t||\r\n                        currentStencilZFail !== stencilZFail ||\r\n                        currentStencilZPass !== stencilZPass ) {\r\n\r\n                        gl.stencilOp( stencilFail, stencilZFail, stencilZPass );\r\n\r\n                        currentStencilFail = stencilFail;\r\n                        currentStencilZFail = stencilZFail;\r\n                        currentStencilZPass = stencilZPass;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setLocked: function ( lock ) {\r\n\r\n                    locked = lock;\r\n\r\n                },\r\n\r\n                setClear: function ( stencil ) {\r\n\r\n                    if ( currentStencilClear !== stencil ) {\r\n\r\n                        gl.clearStencil( stencil );\r\n                        currentStencilClear = stencil;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                reset: function () {\r\n\r\n                    locked = false;\r\n\r\n                    currentStencilMask = null;\r\n                    currentStencilFunc = null;\r\n                    currentStencilRef = null;\r\n                    currentStencilFuncMask = null;\r\n                    currentStencilFail = null;\r\n                    currentStencilZFail = null;\r\n                    currentStencilZPass = null;\r\n                    currentStencilClear = null;\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var colorBuffer = new ColorBuffer();\r\n        var depthBuffer = new DepthBuffer();\r\n        var stencilBuffer = new StencilBuffer();\r\n\r\n        var maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n        var newAttributes = new Uint8Array( maxVertexAttributes );\r\n        var enabledAttributes = new Uint8Array( maxVertexAttributes );\r\n        var attributeDivisors = new Uint8Array( maxVertexAttributes );\r\n\r\n        var capabilities = {};\r\n\r\n        var compressedTextureFormats = null;\r\n\r\n        var currentProgram = null;\r\n\r\n        var currentBlending = null;\r\n        var currentBlendEquation = null;\r\n        var currentBlendSrc = null;\r\n        var currentBlendDst = null;\r\n        var currentBlendEquationAlpha = null;\r\n        var currentBlendSrcAlpha = null;\r\n        var currentBlendDstAlpha = null;\r\n        var currentPremultipledAlpha = false;\r\n\r\n        var currentFlipSided = null;\r\n        var currentCullFace = null;\r\n\r\n        var currentLineWidth = null;\r\n\r\n        var currentPolygonOffsetFactor = null;\r\n        var currentPolygonOffsetUnits = null;\r\n\r\n        var maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\r\n\r\n        var lineWidthAvailable = false;\r\n        var version = 0;\r\n        var glVersion = gl.getParameter( gl.VERSION );\r\n\r\n        if ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\r\n\r\n            version = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n            lineWidthAvailable = ( version >= 1.0 );\r\n\r\n        } else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\r\n\r\n            version = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n            lineWidthAvailable = ( version >= 2.0 );\r\n\r\n        }\r\n\r\n        var currentTextureSlot = null;\r\n        var currentBoundTextures = {};\r\n\r\n        var currentScissor = new Vector4();\r\n        var currentViewport = new Vector4();\r\n\r\n        function createTexture( type, target, count ) {\r\n\r\n            var data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\r\n            var texture = gl.createTexture();\r\n\r\n            gl.bindTexture( type, texture );\r\n            gl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n            gl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\r\n            for ( var i = 0; i < count; i ++ ) {\r\n\r\n                gl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\r\n\r\n            }\r\n\r\n            return texture;\r\n\r\n        }\r\n\r\n        var emptyTextures = {};\r\n        emptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\r\n        emptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\r\n\r\n        // init\r\n\r\n        colorBuffer.setClear( 0, 0, 0, 1 );\r\n        depthBuffer.setClear( 1 );\r\n        stencilBuffer.setClear( 0 );\r\n\r\n        enable( gl.DEPTH_TEST );\r\n        depthBuffer.setFunc( LessEqualDepth );\r\n\r\n        setFlipSided( false );\r\n        setCullFace( CullFaceBack );\r\n        enable( gl.CULL_FACE );\r\n\r\n        enable( gl.BLEND );\r\n        setBlending( NormalBlending );\r\n\r\n        //\r\n\r\n        function initAttributes() {\r\n\r\n            for ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n                newAttributes[ i ] = 0;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function enableAttribute( attribute ) {\r\n\r\n            enableAttributeAndDivisor( attribute, 0 );\r\n\r\n        }\r\n\r\n        function enableAttributeAndDivisor( attribute, meshPerAttribute ) {\r\n\r\n            newAttributes[ attribute ] = 1;\r\n\r\n            if ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n                gl.enableVertexAttribArray( attribute );\r\n                enabledAttributes[ attribute ] = 1;\r\n\r\n            }\r\n\r\n            if ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n                var extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n                extension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\r\n                attributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function disableUnusedAttributes() {\r\n\r\n            for ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\r\n\r\n                if ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n                    gl.disableVertexAttribArray( i );\r\n                    enabledAttributes[ i ] = 0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function enable( id ) {\r\n\r\n            if ( capabilities[ id ] !== true ) {\r\n\r\n                gl.enable( id );\r\n                capabilities[ id ] = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function disable( id ) {\r\n\r\n            if ( capabilities[ id ] !== false ) {\r\n\r\n                gl.disable( id );\r\n                capabilities[ id ] = false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function getCompressedTextureFormats() {\r\n\r\n            if ( compressedTextureFormats === null ) {\r\n\r\n                compressedTextureFormats = [];\r\n\r\n                if ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n                    extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\r\n                    extensions.get( 'WEBGL_compressed_texture_etc1' ) ||\r\n                    extensions.get( 'WEBGL_compressed_texture_astc' ) ) {\r\n\r\n                    var formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n                    for ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n                        compressedTextureFormats.push( formats[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return compressedTextureFormats;\r\n\r\n        }\r\n\r\n        function useProgram( program ) {\r\n\r\n            if ( currentProgram !== program ) {\r\n\r\n                gl.useProgram( program );\r\n\r\n                currentProgram = program;\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n        function setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n            if ( blending !== NoBlending ) {\r\n\r\n                enable( gl.BLEND );\r\n\r\n            } else {\r\n\r\n                disable( gl.BLEND );\r\n\r\n            }\r\n\r\n            if ( blending !== CustomBlending ) {\r\n\r\n                if ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n                    switch ( blending ) {\r\n\r\n                        case AdditiveBlending:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquation( gl.FUNC_ADD );\r\n                                gl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n                            }\r\n                            break;\r\n\r\n                        case SubtractiveBlending:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquation( gl.FUNC_ADD );\r\n                                gl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n                            }\r\n                            break;\r\n\r\n                        case MultiplyBlending:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquation( gl.FUNC_ADD );\r\n                                gl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n                            }\r\n                            break;\r\n\r\n                        default:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n                            }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                currentBlendEquation = null;\r\n                currentBlendSrc = null;\r\n                currentBlendDst = null;\r\n                currentBlendEquationAlpha = null;\r\n                currentBlendSrcAlpha = null;\r\n                currentBlendDstAlpha = null;\r\n\r\n            } else {\r\n\r\n                blendEquationAlpha = blendEquationAlpha || blendEquation;\r\n                blendSrcAlpha = blendSrcAlpha || blendSrc;\r\n                blendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n                if ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n                    gl.blendEquationSeparate( utils.convert( blendEquation ), utils.convert( blendEquationAlpha ) );\r\n\r\n                    currentBlendEquation = blendEquation;\r\n                    currentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n                }\r\n\r\n                if ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n                    gl.blendFuncSeparate( utils.convert( blendSrc ), utils.convert( blendDst ), utils.convert( blendSrcAlpha ), utils.convert( blendDstAlpha ) );\r\n\r\n                    currentBlendSrc = blendSrc;\r\n                    currentBlendDst = blendDst;\r\n                    currentBlendSrcAlpha = blendSrcAlpha;\r\n                    currentBlendDstAlpha = blendDstAlpha;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            currentBlending = blending;\r\n            currentPremultipledAlpha = premultipliedAlpha;\r\n\r\n        }\r\n\r\n        function setMaterial( material, frontFaceCW ) {\r\n\r\n            material.side === DoubleSide\r\n                ? disable( gl.CULL_FACE )\r\n                : enable( gl.CULL_FACE );\r\n\r\n            var flipSided = ( material.side === BackSide );\r\n            if ( frontFaceCW ) flipSided = ! flipSided;\r\n\r\n            setFlipSided( flipSided );\r\n\r\n            material.transparent === true\r\n                ? setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\r\n                : setBlending( NoBlending );\r\n\r\n            depthBuffer.setFunc( material.depthFunc );\r\n            depthBuffer.setTest( material.depthTest );\r\n            depthBuffer.setMask( material.depthWrite );\r\n            colorBuffer.setMask( material.colorWrite );\r\n\r\n            setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function setFlipSided( flipSided ) {\r\n\r\n            if ( currentFlipSided !== flipSided ) {\r\n\r\n                if ( flipSided ) {\r\n\r\n                    gl.frontFace( gl.CW );\r\n\r\n                } else {\r\n\r\n                    gl.frontFace( gl.CCW );\r\n\r\n                }\r\n\r\n                currentFlipSided = flipSided;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setCullFace( cullFace ) {\r\n\r\n            if ( cullFace !== CullFaceNone ) {\r\n\r\n                enable( gl.CULL_FACE );\r\n\r\n                if ( cullFace !== currentCullFace ) {\r\n\r\n                    if ( cullFace === CullFaceBack ) {\r\n\r\n                        gl.cullFace( gl.BACK );\r\n\r\n                    } else if ( cullFace === CullFaceFront ) {\r\n\r\n                        gl.cullFace( gl.FRONT );\r\n\r\n                    } else {\r\n\r\n                        gl.cullFace( gl.FRONT_AND_BACK );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                disable( gl.CULL_FACE );\r\n\r\n            }\r\n\r\n            currentCullFace = cullFace;\r\n\r\n        }\r\n\r\n        function setLineWidth( width ) {\r\n\r\n            if ( width !== currentLineWidth ) {\r\n\r\n                if ( lineWidthAvailable ) gl.lineWidth( width );\r\n\r\n                currentLineWidth = width;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setPolygonOffset( polygonOffset, factor, units ) {\r\n\r\n            if ( polygonOffset ) {\r\n\r\n                enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n                if ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\r\n\r\n                    gl.polygonOffset( factor, units );\r\n\r\n                    currentPolygonOffsetFactor = factor;\r\n                    currentPolygonOffsetUnits = units;\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setScissorTest( scissorTest ) {\r\n\r\n            if ( scissorTest ) {\r\n\r\n                enable( gl.SCISSOR_TEST );\r\n\r\n            } else {\r\n\r\n                disable( gl.SCISSOR_TEST );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // texture\r\n\r\n        function activeTexture( webglSlot ) {\r\n\r\n            if ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n            if ( currentTextureSlot !== webglSlot ) {\r\n\r\n                gl.activeTexture( webglSlot );\r\n                currentTextureSlot = webglSlot;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function bindTexture( webglType, webglTexture ) {\r\n\r\n            if ( currentTextureSlot === null ) {\r\n\r\n                activeTexture();\r\n\r\n            }\r\n\r\n            var boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n            if ( boundTexture === undefined ) {\r\n\r\n                boundTexture = { type: undefined, texture: undefined };\r\n                currentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n            }\r\n\r\n            if ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n                gl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\r\n\r\n                boundTexture.type = webglType;\r\n                boundTexture.texture = webglTexture;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function compressedTexImage2D() {\r\n\r\n            try {\r\n\r\n                gl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n            } catch ( error ) {\r\n\r\n                console.error( 'THREE.WebGLState:', error );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function texImage2D() {\r\n\r\n            try {\r\n\r\n                gl.texImage2D.apply( gl, arguments );\r\n\r\n            } catch ( error ) {\r\n\r\n                console.error( 'THREE.WebGLState:', error );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function scissor( scissor ) {\r\n\r\n            if ( currentScissor.equals( scissor ) === false ) {\r\n\r\n                gl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n                currentScissor.copy( scissor );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function viewport( viewport ) {\r\n\r\n            if ( currentViewport.equals( viewport ) === false ) {\r\n\r\n                gl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n                currentViewport.copy( viewport );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function reset() {\r\n\r\n            for ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n                if ( enabledAttributes[ i ] === 1 ) {\r\n\r\n                    gl.disableVertexAttribArray( i );\r\n                    enabledAttributes[ i ] = 0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            capabilities = {};\r\n\r\n            compressedTextureFormats = null;\r\n\r\n            currentTextureSlot = null;\r\n            currentBoundTextures = {};\r\n\r\n            currentProgram = null;\r\n\r\n            currentBlending = null;\r\n\r\n            currentFlipSided = null;\r\n            currentCullFace = null;\r\n\r\n            colorBuffer.reset();\r\n            depthBuffer.reset();\r\n            stencilBuffer.reset();\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            buffers: {\r\n                color: colorBuffer,\r\n                depth: depthBuffer,\r\n                stencil: stencilBuffer\r\n            },\r\n\r\n            initAttributes: initAttributes,\r\n            enableAttribute: enableAttribute,\r\n            enableAttributeAndDivisor: enableAttributeAndDivisor,\r\n            disableUnusedAttributes: disableUnusedAttributes,\r\n            enable: enable,\r\n            disable: disable,\r\n            getCompressedTextureFormats: getCompressedTextureFormats,\r\n\r\n            useProgram: useProgram,\r\n\r\n            setBlending: setBlending,\r\n            setMaterial: setMaterial,\r\n\r\n            setFlipSided: setFlipSided,\r\n            setCullFace: setCullFace,\r\n\r\n            setLineWidth: setLineWidth,\r\n            setPolygonOffset: setPolygonOffset,\r\n\r\n            setScissorTest: setScissorTest,\r\n\r\n            activeTexture: activeTexture,\r\n            bindTexture: bindTexture,\r\n            compressedTexImage2D: compressedTexImage2D,\r\n            texImage2D: texImage2D,\r\n\r\n            scissor: scissor,\r\n            viewport: viewport,\r\n\r\n            reset: reset\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\r\n\r\n        var _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext ); /* global WebGL2RenderingContext */\r\n        var _videoTextures = {};\r\n        var _canvas;\r\n\r\n        //\r\n\r\n        function clampToMaxSize( image, maxSize ) {\r\n\r\n            if ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n                if ( 'data' in image ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\r\n                    return;\r\n\r\n                }\r\n\r\n                // Warning: Scaling through the canvas will only work with images that use\r\n                // premultiplied alpha.\r\n\r\n                var scale = maxSize / Math.max( image.width, image.height );\r\n\r\n                var canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n                canvas.width = Math.floor( image.width * scale );\r\n                canvas.height = Math.floor( image.height * scale );\r\n\r\n                var context = canvas.getContext( '2d' );\r\n                context.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n                console.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n                return canvas;\r\n\r\n            }\r\n\r\n            return image;\r\n\r\n        }\r\n\r\n        function isPowerOfTwo( image ) {\r\n\r\n            return _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\r\n\r\n        }\r\n\r\n        function makePowerOfTwo( image ) {\r\n\r\n            if ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap ) {\r\n\r\n                if ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n                _canvas.width = _Math.floorPowerOfTwo( image.width );\r\n                _canvas.height = _Math.floorPowerOfTwo( image.height );\r\n\r\n                var context = _canvas.getContext( '2d' );\r\n                context.drawImage( image, 0, 0, _canvas.width, _canvas.height );\r\n\r\n                console.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + _canvas.width + 'x' + _canvas.height, image );\r\n\r\n                return _canvas;\r\n\r\n            }\r\n\r\n            return image;\r\n\r\n        }\r\n\r\n        function textureNeedsPowerOfTwo( texture ) {\r\n\r\n            return ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\r\n                ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\r\n\r\n        }\r\n\r\n        function textureNeedsGenerateMipmaps( texture, isPowerOfTwo ) {\r\n\r\n            return texture.generateMipmaps && isPowerOfTwo &&\r\n                texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\r\n\r\n        }\r\n\r\n        function generateMipmap( target, texture, width, height ) {\r\n\r\n            _gl.generateMipmap( target );\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            // Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\r\n            textureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\r\n\r\n        }\r\n\r\n        // Fallback filters for non-power-of-2 textures\r\n\r\n        function filterFallback( f ) {\r\n\r\n            if ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\r\n\r\n                return _gl.NEAREST;\r\n\r\n            }\r\n\r\n            return _gl.LINEAR;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function onTextureDispose( event ) {\r\n\r\n            var texture = event.target;\r\n\r\n            texture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n            deallocateTexture( texture );\r\n\r\n            if ( texture.isVideoTexture ) {\r\n\r\n                delete _videoTextures[ texture.id ];\r\n\r\n            }\r\n\r\n            info.memory.textures --;\r\n\r\n        }\r\n\r\n        function onRenderTargetDispose( event ) {\r\n\r\n            var renderTarget = event.target;\r\n\r\n            renderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n            deallocateRenderTarget( renderTarget );\r\n\r\n            info.memory.textures --;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function deallocateTexture( texture ) {\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            if ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n                // cube texture\r\n\r\n                _gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n            } else {\r\n\r\n                // 2D texture\r\n\r\n                if ( textureProperties.__webglInit === undefined ) return;\r\n\r\n                _gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n            }\r\n\r\n            // remove all webgl properties\r\n            properties.remove( texture );\r\n\r\n        }\r\n\r\n        function deallocateRenderTarget( renderTarget ) {\r\n\r\n            var renderTargetProperties = properties.get( renderTarget );\r\n            var textureProperties = properties.get( renderTarget.texture );\r\n\r\n            if ( ! renderTarget ) return;\r\n\r\n            if ( textureProperties.__webglTexture !== undefined ) {\r\n\r\n                _gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n            }\r\n\r\n            if ( renderTarget.depthTexture ) {\r\n\r\n                renderTarget.depthTexture.dispose();\r\n\r\n            }\r\n\r\n            if ( renderTarget.isWebGLRenderTargetCube ) {\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n                    if ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n                if ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\r\n            }\r\n\r\n            properties.remove( renderTarget.texture );\r\n            properties.remove( renderTarget );\r\n\r\n        }\r\n\r\n        //\r\n\r\n\r\n\r\n        function setTexture2D( texture, slot ) {\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            if ( texture.isVideoTexture ) updateVideoTexture( texture );\r\n\r\n            if ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n                var image = texture.image;\r\n\r\n                if ( image === undefined ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\r\n                } else if ( image.complete === false ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\r\n                } else {\r\n\r\n                    uploadTexture( textureProperties, texture, slot );\r\n                    return;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.activeTexture( _gl.TEXTURE0 + slot );\r\n            state.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n        }\r\n\r\n        function setTextureCube( texture, slot ) {\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            if ( texture.image.length === 6 ) {\r\n\r\n                if ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n                    if ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n                        texture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n                        textureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n                        info.memory.textures ++;\r\n\r\n                    }\r\n\r\n                    state.activeTexture( _gl.TEXTURE0 + slot );\r\n                    state.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n                    _gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n                    var isCompressed = ( texture && texture.isCompressedTexture );\r\n                    var isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\r\n\r\n                    var cubeImage = [];\r\n\r\n                    for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                        if ( ! isCompressed && ! isDataTexture ) {\r\n\r\n                            cubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n                        } else {\r\n\r\n                            cubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    var image = cubeImage[ 0 ],\r\n                        isPowerOfTwoImage = isPowerOfTwo( image ),\r\n                        glFormat = utils.convert( texture.format ),\r\n                        glType = utils.convert( texture.type );\r\n\r\n                    setTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\r\n\r\n                    for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                        if ( ! isCompressed ) {\r\n\r\n                            if ( isDataTexture ) {\r\n\r\n                                state.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n                            } else {\r\n\r\n                                state.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            var mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n                            for ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n                                mipmap = mipmaps[ j ];\r\n\r\n                                if ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n                                    if ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n                                        state.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n                                    } else {\r\n\r\n                                        console.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\r\n\r\n                                    }\r\n\r\n                                } else {\r\n\r\n                                    state.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if ( ! isCompressed ) {\r\n\r\n                        textureProperties.__maxMipLevel = 0;\r\n\r\n                    } else {\r\n\r\n                        textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n                    }\r\n\r\n                    if ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\r\n\r\n                        // We assume images for cube map have the same size.\r\n                        generateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\r\n\r\n                    }\r\n\r\n                    textureProperties.__version = texture.version;\r\n\r\n                    if ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n                } else {\r\n\r\n                    state.activeTexture( _gl.TEXTURE0 + slot );\r\n                    state.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setTextureCubeDynamic( texture, slot ) {\r\n\r\n            state.activeTexture( _gl.TEXTURE0 + slot );\r\n            state.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n        }\r\n\r\n        function setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\r\n\r\n            var extension;\r\n\r\n            if ( isPowerOfTwoImage ) {\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, utils.convert( texture.wrapS ) );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, utils.convert( texture.wrapT ) );\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, utils.convert( texture.magFilter ) );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, utils.convert( texture.minFilter ) );\r\n\r\n            } else {\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n                if ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\r\n\r\n                }\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n                if ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n            if ( extension ) {\r\n\r\n                if ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n                if ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n                if ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n                    _gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\r\n                    properties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function uploadTexture( textureProperties, texture, slot ) {\r\n\r\n            if ( textureProperties.__webglInit === undefined ) {\r\n\r\n                textureProperties.__webglInit = true;\r\n\r\n                texture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n                textureProperties.__webglTexture = _gl.createTexture();\r\n\r\n                info.memory.textures ++;\r\n\r\n            }\r\n\r\n            state.activeTexture( _gl.TEXTURE0 + slot );\r\n            state.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n            _gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n            _gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n            _gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n            var image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n            if ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\r\n\r\n                image = makePowerOfTwo( image );\r\n\r\n            }\r\n\r\n            var isPowerOfTwoImage = isPowerOfTwo( image ),\r\n                glFormat = utils.convert( texture.format ),\r\n                glType = utils.convert( texture.type );\r\n\r\n            setTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\r\n\r\n            var mipmap, mipmaps = texture.mipmaps;\r\n\r\n            if ( texture.isDepthTexture ) {\r\n\r\n                // populate depth texture with dummy data\r\n\r\n                var internalFormat = _gl.DEPTH_COMPONENT;\r\n\r\n                if ( texture.type === FloatType ) {\r\n\r\n                    if ( ! _isWebGL2 ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\r\n                    internalFormat = _gl.DEPTH_COMPONENT32F;\r\n\r\n                } else if ( _isWebGL2 ) {\r\n\r\n                    // WebGL 2.0 requires signed internalformat for glTexImage2D\r\n                    internalFormat = _gl.DEPTH_COMPONENT16;\r\n\r\n                }\r\n\r\n                if ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\r\n\r\n                    // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n                    // DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\r\n                    // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n                    if ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\r\n\r\n                        console.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\r\n\r\n                        texture.type = UnsignedShortType;\r\n                        glType = utils.convert( texture.type );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // Depth stencil textures need the DEPTH_STENCIL internal format\r\n                // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n                if ( texture.format === DepthStencilFormat ) {\r\n\r\n                    internalFormat = _gl.DEPTH_STENCIL;\r\n\r\n                    // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n                    // DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\r\n                    // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n                    if ( texture.type !== UnsignedInt248Type ) {\r\n\r\n                        console.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\r\n\r\n                        texture.type = UnsignedInt248Type;\r\n                        glType = utils.convert( texture.type );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                state.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\r\n\r\n            } else if ( texture.isDataTexture ) {\r\n\r\n                // use manually created mipmaps if available\r\n                // if there are no manual mipmaps\r\n                // set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n                if ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n                    for ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n                        mipmap = mipmaps[ i ];\r\n                        state.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n                    }\r\n\r\n                    texture.generateMipmaps = false;\r\n                    textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n                } else {\r\n\r\n                    state.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n                    textureProperties.__maxMipLevel = 0;\r\n\r\n                }\r\n\r\n            } else if ( texture.isCompressedTexture ) {\r\n\r\n                for ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n                    mipmap = mipmaps[ i ];\r\n\r\n                    if ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n                        if ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n                            state.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n                        } else {\r\n\r\n                            console.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        state.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n            } else {\r\n\r\n                // regular Texture (image, video, canvas)\r\n\r\n                // use manually created mipmaps if available\r\n                // if there are no manual mipmaps\r\n                // set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n                if ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n                    for ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n                        mipmap = mipmaps[ i ];\r\n                        state.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n                    }\r\n\r\n                    texture.generateMipmaps = false;\r\n                    textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n                } else {\r\n\r\n                    state.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\r\n                    textureProperties.__maxMipLevel = 0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\r\n\r\n                generateMipmap( _gl.TEXTURE_2D, texture, image.width, image.height );\r\n\r\n            }\r\n\r\n            textureProperties.__version = texture.version;\r\n\r\n            if ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n        }\r\n\r\n        // Render targets\r\n\r\n        // Setup storage for target texture and bind it to correct framebuffer\r\n        function setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n            var glFormat = utils.convert( renderTarget.texture.format );\r\n            var glType = utils.convert( renderTarget.texture.type );\r\n            state.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n            _gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n        }\r\n\r\n        // Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n        function setupRenderBufferStorage( renderbuffer, renderTarget ) {\r\n\r\n            _gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n            if ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n                _gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n                _gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n            } else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n                _gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n                _gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n            } else {\r\n\r\n                // FIXME: We don't support !depth !stencil\r\n                _gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n            }\r\n\r\n            _gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\r\n        }\r\n\r\n        // Setup resources for a Depth Texture for a FBO (needs an extension)\r\n        function setupDepthTexture( framebuffer, renderTarget ) {\r\n\r\n            var isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\r\n            if ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\r\n\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n            if ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\r\n\r\n                throw new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\r\n\r\n            }\r\n\r\n            // upload an empty depth texture with framebuffer size\r\n            if ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\r\n                renderTarget.depthTexture.image.width !== renderTarget.width ||\r\n                renderTarget.depthTexture.image.height !== renderTarget.height ) {\r\n\r\n                renderTarget.depthTexture.image.width = renderTarget.width;\r\n                renderTarget.depthTexture.image.height = renderTarget.height;\r\n                renderTarget.depthTexture.needsUpdate = true;\r\n\r\n            }\r\n\r\n            setTexture2D( renderTarget.depthTexture, 0 );\r\n\r\n            var webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\r\n\r\n            if ( renderTarget.depthTexture.format === DepthFormat ) {\r\n\r\n                _gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\r\n\r\n            } else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\r\n\r\n                _gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\r\n\r\n            } else {\r\n\r\n                throw new Error( 'Unknown depthTexture format' );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Setup GL resources for a non-texture depth buffer\r\n        function setupDepthRenderbuffer( renderTarget ) {\r\n\r\n            var renderTargetProperties = properties.get( renderTarget );\r\n\r\n            var isCube = ( renderTarget.isWebGLRenderTargetCube === true );\r\n\r\n            if ( renderTarget.depthTexture ) {\r\n\r\n                if ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\r\n\r\n                setupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\r\n\r\n            } else {\r\n\r\n                if ( isCube ) {\r\n\r\n                    renderTargetProperties.__webglDepthbuffer = [];\r\n\r\n                    for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                        _gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\r\n                        renderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n                        setupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    _gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\r\n                    renderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n                    setupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n        }\r\n\r\n        // Set up GL resources for the render target\r\n        function setupRenderTarget( renderTarget ) {\r\n\r\n            var renderTargetProperties = properties.get( renderTarget );\r\n            var textureProperties = properties.get( renderTarget.texture );\r\n\r\n            renderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n            textureProperties.__webglTexture = _gl.createTexture();\r\n\r\n            info.memory.textures ++;\r\n\r\n            var isCube = ( renderTarget.isWebGLRenderTargetCube === true );\r\n            var isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\r\n\r\n            // Setup framebuffer\r\n\r\n            if ( isCube ) {\r\n\r\n                renderTargetProperties.__webglFramebuffer = [];\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    renderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                renderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n            }\r\n\r\n            // Setup color buffer\r\n\r\n            if ( isCube ) {\r\n\r\n                state.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\r\n                setTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    setupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\r\n                }\r\n\r\n                if ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\r\n\r\n                    generateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n                }\r\n\r\n                state.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n            } else {\r\n\r\n                state.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n                setTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\r\n                setupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\r\n\r\n                if ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\r\n\r\n                    generateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n                }\r\n\r\n                state.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n            }\r\n\r\n            // Setup depth and stencil buffers\r\n\r\n            if ( renderTarget.depthBuffer ) {\r\n\r\n                setupDepthRenderbuffer( renderTarget );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function updateRenderTargetMipmap( renderTarget ) {\r\n\r\n            var texture = renderTarget.texture;\r\n            var isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\r\n\r\n            if ( textureNeedsGenerateMipmaps( texture, isTargetPowerOfTwo ) ) {\r\n\r\n                var target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\r\n                var webglTexture = properties.get( texture ).__webglTexture;\r\n\r\n                state.bindTexture( target, webglTexture );\r\n                generateMipmap( target, texture, renderTarget.width, renderTarget.height );\r\n                state.bindTexture( target, null );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function updateVideoTexture( texture ) {\r\n\r\n            var id = texture.id;\r\n            var frame = info.render.frame;\r\n\r\n            // Check the last frame we updated the VideoTexture\r\n\r\n            if ( _videoTextures[ id ] !== frame ) {\r\n\r\n                _videoTextures[ id ] = frame;\r\n                texture.update();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.setTexture2D = setTexture2D;\r\n        this.setTextureCube = setTextureCube;\r\n        this.setTextureCubeDynamic = setTextureCubeDynamic;\r\n        this.setupRenderTarget = setupRenderTarget;\r\n        this.updateRenderTargetMipmap = updateRenderTargetMipmap;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author thespite / http://www.twitter.com/thespite\r\n     */\r\n\r\n    function WebGLUtils( gl, extensions ) {\r\n\r\n        function convert( p ) {\r\n\r\n            var extension;\r\n\r\n            if ( p === RepeatWrapping ) return gl.REPEAT;\r\n            if ( p === ClampToEdgeWrapping ) return gl.CLAMP_TO_EDGE;\r\n            if ( p === MirroredRepeatWrapping ) return gl.MIRRORED_REPEAT;\r\n\r\n            if ( p === NearestFilter ) return gl.NEAREST;\r\n            if ( p === NearestMipMapNearestFilter ) return gl.NEAREST_MIPMAP_NEAREST;\r\n            if ( p === NearestMipMapLinearFilter ) return gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n            if ( p === LinearFilter ) return gl.LINEAR;\r\n            if ( p === LinearMipMapNearestFilter ) return gl.LINEAR_MIPMAP_NEAREST;\r\n            if ( p === LinearMipMapLinearFilter ) return gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n            if ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\r\n            if ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\r\n            if ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\r\n            if ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n            if ( p === ByteType ) return gl.BYTE;\r\n            if ( p === ShortType ) return gl.SHORT;\r\n            if ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\r\n            if ( p === IntType ) return gl.INT;\r\n            if ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\r\n            if ( p === FloatType ) return gl.FLOAT;\r\n\r\n            if ( p === HalfFloatType ) {\r\n\r\n                extension = extensions.get( 'OES_texture_half_float' );\r\n\r\n                if ( extension !== null ) return extension.HALF_FLOAT_OES;\r\n\r\n            }\r\n\r\n            if ( p === AlphaFormat ) return gl.ALPHA;\r\n            if ( p === RGBFormat ) return gl.RGB;\r\n            if ( p === RGBAFormat ) return gl.RGBA;\r\n            if ( p === LuminanceFormat ) return gl.LUMINANCE;\r\n            if ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\r\n            if ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\r\n            if ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\r\n\r\n            if ( p === AddEquation ) return gl.FUNC_ADD;\r\n            if ( p === SubtractEquation ) return gl.FUNC_SUBTRACT;\r\n            if ( p === ReverseSubtractEquation ) return gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n            if ( p === ZeroFactor ) return gl.ZERO;\r\n            if ( p === OneFactor ) return gl.ONE;\r\n            if ( p === SrcColorFactor ) return gl.SRC_COLOR;\r\n            if ( p === OneMinusSrcColorFactor ) return gl.ONE_MINUS_SRC_COLOR;\r\n            if ( p === SrcAlphaFactor ) return gl.SRC_ALPHA;\r\n            if ( p === OneMinusSrcAlphaFactor ) return gl.ONE_MINUS_SRC_ALPHA;\r\n            if ( p === DstAlphaFactor ) return gl.DST_ALPHA;\r\n            if ( p === OneMinusDstAlphaFactor ) return gl.ONE_MINUS_DST_ALPHA;\r\n\r\n            if ( p === DstColorFactor ) return gl.DST_COLOR;\r\n            if ( p === OneMinusDstColorFactor ) return gl.ONE_MINUS_DST_COLOR;\r\n            if ( p === SrcAlphaSaturateFactor ) return gl.SRC_ALPHA_SATURATE;\r\n\r\n            if ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\r\n                p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    if ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n                    if ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n                    if ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n                    if ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\r\n                p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    if ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n                    if ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n                    if ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n                    if ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === RGB_ETC1_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n                if ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n            }\r\n\r\n            if ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\r\n                p === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\r\n                p === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\r\n                p === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\r\n                p === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_astc' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    return p;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === MinEquation || p === MaxEquation ) {\r\n\r\n                extension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    if ( p === MinEquation ) return extension.MIN_EXT;\r\n                    if ( p === MaxEquation ) return extension.MAX_EXT;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === UnsignedInt248Type ) {\r\n\r\n                extension = extensions.get( 'WEBGL_depth_texture' );\r\n\r\n                if ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\r\n\r\n            }\r\n\r\n            return 0;\r\n\r\n        }\r\n\r\n        return { convert: convert };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author greggman / http://games.greggman.com/\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author tschw\r\n     */\r\n\r\n    function PerspectiveCamera( fov, aspect, near, far ) {\r\n\r\n        Camera.call( this );\r\n\r\n        this.type = 'PerspectiveCamera';\r\n\r\n        this.fov = fov !== undefined ? fov : 50;\r\n        this.zoom = 1;\r\n\r\n        this.near = near !== undefined ? near : 0.1;\r\n        this.far = far !== undefined ? far : 2000;\r\n        this.focus = 10;\r\n\r\n        this.aspect = aspect !== undefined ? aspect : 1;\r\n        this.view = null;\r\n\r\n        this.filmGauge = 35;\t// width of the film (default in millimeters)\r\n        this.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\r\n\r\n        this.updateProjectionMatrix();\r\n\r\n    }\r\n\r\n    PerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n        constructor: PerspectiveCamera,\r\n\r\n        isPerspectiveCamera: true,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Camera.prototype.copy.call( this, source, recursive );\r\n\r\n            this.fov = source.fov;\r\n            this.zoom = source.zoom;\r\n\r\n            this.near = source.near;\r\n            this.far = source.far;\r\n            this.focus = source.focus;\r\n\r\n            this.aspect = source.aspect;\r\n            this.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n            this.filmGauge = source.filmGauge;\r\n            this.filmOffset = source.filmOffset;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        /**\r\n         * Sets the FOV by focal length in respect to the current .filmGauge.\r\n         *\r\n         * The default film gauge is 35, so that the focal length can be specified for\r\n         * a 35mm (full frame) camera.\r\n         *\r\n         * Values for focal length and film gauge must have the same unit.\r\n         */\r\n        setFocalLength: function ( focalLength ) {\r\n\r\n            // see http://www.bobatkins.com/photography/technical/field_of_view.html\r\n            var vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\r\n\r\n            this.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        /**\r\n         * Calculates the focal length from the current .fov and .filmGauge.\r\n         */\r\n        getFocalLength: function () {\r\n\r\n            var vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\r\n\r\n            return 0.5 * this.getFilmHeight() / vExtentSlope;\r\n\r\n        },\r\n\r\n        getEffectiveFOV: function () {\r\n\r\n            return _Math.RAD2DEG * 2 * Math.atan(\r\n                Math.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\r\n\r\n        },\r\n\r\n        getFilmWidth: function () {\r\n\r\n            // film not completely covered in portrait format (aspect < 1)\r\n            return this.filmGauge * Math.min( this.aspect, 1 );\r\n\r\n        },\r\n\r\n        getFilmHeight: function () {\r\n\r\n            // film not completely covered in landscape format (aspect > 1)\r\n            return this.filmGauge / Math.max( this.aspect, 1 );\r\n\r\n        },\r\n\r\n        /**\r\n         * Sets an offset in a larger frustum. This is useful for multi-window or\r\n         * multi-monitor/multi-machine setups.\r\n         *\r\n         * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n         * the monitors are in grid like this\r\n         *\r\n         *   +---+---+---+\r\n         *   | A | B | C |\r\n         *   +---+---+---+\r\n         *   | D | E | F |\r\n         *   +---+---+---+\r\n         *\r\n         * then for each monitor you would call it like this\r\n         *\r\n         *   var w = 1920;\r\n         *   var h = 1080;\r\n         *   var fullWidth = w * 3;\r\n         *   var fullHeight = h * 2;\r\n         *\r\n         *   --A--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n         *   --B--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n         *   --C--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n         *   --D--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n         *   --E--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n         *   --F--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n         *\r\n         *   Note there is no reason monitors have to be the same size or in a grid.\r\n         */\r\n        setViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n            this.aspect = fullWidth / fullHeight;\r\n\r\n            if ( this.view === null ) {\r\n\r\n                this.view = {\r\n                    enabled: true,\r\n                    fullWidth: 1,\r\n                    fullHeight: 1,\r\n                    offsetX: 0,\r\n                    offsetY: 0,\r\n                    width: 1,\r\n                    height: 1\r\n                };\r\n\r\n            }\r\n\r\n            this.view.enabled = true;\r\n            this.view.fullWidth = fullWidth;\r\n            this.view.fullHeight = fullHeight;\r\n            this.view.offsetX = x;\r\n            this.view.offsetY = y;\r\n            this.view.width = width;\r\n            this.view.height = height;\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        clearViewOffset: function () {\r\n\r\n            if ( this.view !== null ) {\r\n\r\n                this.view.enabled = false;\r\n\r\n            }\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        updateProjectionMatrix: function () {\r\n\r\n            var near = this.near,\r\n                top = near * Math.tan(\r\n                    _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\r\n                height = 2 * top,\r\n                width = this.aspect * height,\r\n                left = - 0.5 * width,\r\n                view = this.view;\r\n\r\n            if ( this.view !== null && this.view.enabled ) {\r\n\r\n                var fullWidth = view.fullWidth,\r\n                    fullHeight = view.fullHeight;\r\n\r\n                left += view.offsetX * width / fullWidth;\r\n                top -= view.offsetY * height / fullHeight;\r\n                width *= view.width / fullWidth;\r\n                height *= view.height / fullHeight;\r\n\r\n            }\r\n\r\n            var skew = this.filmOffset;\r\n            if ( skew !== 0 ) left += near * skew / this.getFilmWidth();\r\n\r\n            this.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.fov = this.fov;\r\n            data.object.zoom = this.zoom;\r\n\r\n            data.object.near = this.near;\r\n            data.object.far = this.far;\r\n            data.object.focus = this.focus;\r\n\r\n            data.object.aspect = this.aspect;\r\n\r\n            if ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n            data.object.filmGauge = this.filmGauge;\r\n            data.object.filmOffset = this.filmOffset;\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function ArrayCamera( array ) {\r\n\r\n        PerspectiveCamera.call( this );\r\n\r\n        this.cameras = array || [];\r\n\r\n    }\r\n\r\n    ArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\r\n\r\n        constructor: ArrayCamera,\r\n\r\n        isArrayCamera: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebVRManager( renderer ) {\r\n\r\n        var scope = this;\r\n\r\n        var device = null;\r\n        var frameData = null;\r\n\r\n        var poseTarget = null;\r\n\r\n        var standingMatrix = new Matrix4();\r\n        var standingMatrixInverse = new Matrix4();\r\n\r\n        if ( typeof window !== 'undefined' && 'VRFrameData' in window ) {\r\n\r\n            frameData = new window.VRFrameData();\r\n            window.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\r\n\r\n        }\r\n\r\n        var matrixWorldInverse = new Matrix4();\r\n        var tempQuaternion = new Quaternion();\r\n        var tempPosition = new Vector3();\r\n\r\n        var cameraL = new PerspectiveCamera();\r\n        cameraL.bounds = new Vector4( 0.0, 0.0, 0.5, 1.0 );\r\n        cameraL.layers.enable( 1 );\r\n\r\n        var cameraR = new PerspectiveCamera();\r\n        cameraR.bounds = new Vector4( 0.5, 0.0, 0.5, 1.0 );\r\n        cameraR.layers.enable( 2 );\r\n\r\n        var cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\r\n        cameraVR.layers.enable( 1 );\r\n        cameraVR.layers.enable( 2 );\r\n\r\n        //\r\n\r\n        function isPresenting() {\r\n\r\n            return device !== null && device.isPresenting === true;\r\n\r\n        }\r\n\r\n        var currentSize, currentPixelRatio;\r\n\r\n        function onVRDisplayPresentChange() {\r\n\r\n            if ( isPresenting() ) {\r\n\r\n                var eyeParameters = device.getEyeParameters( 'left' );\r\n                var renderWidth = eyeParameters.renderWidth;\r\n                var renderHeight = eyeParameters.renderHeight;\r\n\r\n                currentPixelRatio = renderer.getPixelRatio();\r\n                currentSize = renderer.getSize();\r\n\r\n                renderer.setDrawingBufferSize( renderWidth * 2, renderHeight, 1 );\r\n\r\n                animation.start();\r\n\r\n            } else if ( scope.enabled ) {\r\n\r\n                renderer.setDrawingBufferSize( currentSize.width, currentSize.height, currentPixelRatio );\r\n\r\n                animation.stop();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        this.enabled = false;\r\n        this.userHeight = 1.6;\r\n\r\n        this.getDevice = function () {\r\n\r\n            return device;\r\n\r\n        };\r\n\r\n        this.setDevice = function ( value ) {\r\n\r\n            if ( value !== undefined ) device = value;\r\n\r\n            animation.setContext( value );\r\n\r\n        };\r\n\r\n        this.setPoseTarget = function ( object ) {\r\n\r\n            if ( object !== undefined ) poseTarget = object;\r\n\r\n        };\r\n\r\n        this.getCamera = function ( camera ) {\r\n\r\n            if ( device === null ) return camera;\r\n\r\n            device.depthNear = camera.near;\r\n            device.depthFar = camera.far;\r\n\r\n            device.getFrameData( frameData );\r\n\r\n            //\r\n\r\n            var stageParameters = device.stageParameters;\r\n\r\n            if ( stageParameters ) {\r\n\r\n                standingMatrix.fromArray( stageParameters.sittingToStandingTransform );\r\n\r\n            } else {\r\n\r\n                standingMatrix.makeTranslation( 0, scope.userHeight, 0 );\r\n\r\n            }\r\n\r\n\r\n            var pose = frameData.pose;\r\n            var poseObject = poseTarget !== null ? poseTarget : camera;\r\n\r\n            // We want to manipulate poseObject by its position and quaternion components since users may rely on them.\r\n            poseObject.matrix.copy( standingMatrix );\r\n            poseObject.matrix.decompose( poseObject.position, poseObject.quaternion, poseObject.scale );\r\n\r\n            if ( pose.orientation !== null ) {\r\n\r\n                tempQuaternion.fromArray( pose.orientation );\r\n                poseObject.quaternion.multiply( tempQuaternion );\r\n\r\n            }\r\n\r\n            if ( pose.position !== null ) {\r\n\r\n                tempQuaternion.setFromRotationMatrix( standingMatrix );\r\n                tempPosition.fromArray( pose.position );\r\n                tempPosition.applyQuaternion( tempQuaternion );\r\n                poseObject.position.add( tempPosition );\r\n\r\n            }\r\n\r\n            poseObject.updateMatrixWorld();\r\n\r\n            if ( device.isPresenting === false ) return camera;\r\n\r\n            //\r\n\r\n            cameraL.near = camera.near;\r\n            cameraR.near = camera.near;\r\n\r\n            cameraL.far = camera.far;\r\n            cameraR.far = camera.far;\r\n\r\n            cameraVR.matrixWorld.copy( camera.matrixWorld );\r\n            cameraVR.matrixWorldInverse.copy( camera.matrixWorldInverse );\r\n\r\n            cameraL.matrixWorldInverse.fromArray( frameData.leftViewMatrix );\r\n            cameraR.matrixWorldInverse.fromArray( frameData.rightViewMatrix );\r\n\r\n            // TODO (mrdoob) Double check this code\r\n\r\n            standingMatrixInverse.getInverse( standingMatrix );\r\n\r\n            cameraL.matrixWorldInverse.multiply( standingMatrixInverse );\r\n            cameraR.matrixWorldInverse.multiply( standingMatrixInverse );\r\n\r\n            var parent = poseObject.parent;\r\n\r\n            if ( parent !== null ) {\r\n\r\n                matrixWorldInverse.getInverse( parent.matrixWorld );\r\n\r\n                cameraL.matrixWorldInverse.multiply( matrixWorldInverse );\r\n                cameraR.matrixWorldInverse.multiply( matrixWorldInverse );\r\n\r\n            }\r\n\r\n            // envMap and Mirror needs camera.matrixWorld\r\n\r\n            cameraL.matrixWorld.getInverse( cameraL.matrixWorldInverse );\r\n            cameraR.matrixWorld.getInverse( cameraR.matrixWorldInverse );\r\n\r\n            cameraL.projectionMatrix.fromArray( frameData.leftProjectionMatrix );\r\n            cameraR.projectionMatrix.fromArray( frameData.rightProjectionMatrix );\r\n\r\n            // HACK (mrdoob)\r\n            // https://github.com/w3c/webvr/issues/203\r\n\r\n            cameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\r\n\r\n            //\r\n\r\n            var layers = device.getLayers();\r\n\r\n            if ( layers.length ) {\r\n\r\n                var layer = layers[ 0 ];\r\n\r\n                if ( layer.leftBounds !== null && layer.leftBounds.length === 4 ) {\r\n\r\n                    cameraL.bounds.fromArray( layer.leftBounds );\r\n\r\n                }\r\n\r\n                if ( layer.rightBounds !== null && layer.rightBounds.length === 4 ) {\r\n\r\n                    cameraR.bounds.fromArray( layer.rightBounds );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return cameraVR;\r\n\r\n        };\r\n\r\n        this.getStandingMatrix = function () {\r\n\r\n            return standingMatrix;\r\n\r\n        };\r\n\r\n        this.isPresenting = isPresenting;\r\n\r\n        // Animation Loop\r\n\r\n        var animation = new WebGLAnimation();\r\n\r\n        this.setAnimationLoop = function ( callback ) {\r\n\r\n            animation.setAnimationLoop( callback );\r\n\r\n        };\r\n\r\n        this.submitFrame = function () {\r\n\r\n            if ( isPresenting() ) device.submitFrame();\r\n\r\n        };\r\n\r\n        this.dispose = function () {\r\n\r\n            if ( typeof window !== 'undefined' ) {\r\n\r\n                window.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebXRManager( renderer ) {\r\n\r\n        var gl = renderer.context;\r\n\r\n        var device = null;\r\n        var session = null;\r\n\r\n        var frameOfRef = null;\r\n\r\n        var pose = null;\r\n\r\n        function isPresenting() {\r\n\r\n            return session !== null && frameOfRef !== null;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var cameraL = new PerspectiveCamera();\r\n        cameraL.layers.enable( 1 );\r\n        cameraL.viewport = new Vector4();\r\n\r\n        var cameraR = new PerspectiveCamera();\r\n        cameraR.layers.enable( 2 );\r\n        cameraR.viewport = new Vector4();\r\n\r\n        var cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\r\n        cameraVR.layers.enable( 1 );\r\n        cameraVR.layers.enable( 2 );\r\n\r\n        //\r\n\r\n        this.enabled = false;\r\n\r\n        this.getDevice = function () {\r\n\r\n            return device;\r\n\r\n        };\r\n\r\n        this.setDevice = function ( value ) {\r\n\r\n            if ( value !== undefined ) device = value;\r\n\r\n            gl.setCompatibleXRDevice( value );\r\n\r\n        };\r\n\r\n        //\r\n\r\n        this.setSession = function ( value, options ) {\r\n\r\n            session = value;\r\n\r\n            if ( session !== null ) {\r\n\r\n                session.addEventListener( 'end', function () {\r\n\r\n                    renderer.setFramebuffer( null );\r\n                    animation.stop();\r\n\r\n                } );\r\n\r\n                session.baseLayer = new XRWebGLLayer( session, gl );\r\n                session.requestFrameOfReference( options.frameOfReferenceType ).then( function ( value ) {\r\n\r\n                    frameOfRef = value;\r\n\r\n                    renderer.setFramebuffer( session.baseLayer.framebuffer );\r\n\r\n                    animation.setContext( session );\r\n                    animation.start();\r\n\r\n                } );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        function updateCamera( camera, parent ) {\r\n\r\n            if ( parent === null ) {\r\n\r\n                camera.matrixWorld.copy( camera.matrix );\r\n\r\n            } else {\r\n\r\n                camera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\r\n\r\n            }\r\n\r\n            camera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n        }\r\n\r\n        this.getCamera = function ( camera ) {\r\n\r\n            if ( isPresenting() ) {\r\n\r\n                var parent = camera.parent;\r\n                var cameras = cameraVR.cameras;\r\n\r\n                // apply camera.parent to cameraVR\r\n\r\n                updateCamera( cameraVR, parent );\r\n\r\n                for ( var i = 0; i < cameras.length; i ++ ) {\r\n\r\n                    updateCamera( cameras[ i ], parent );\r\n\r\n                }\r\n\r\n                // update camera and its children\r\n\r\n                camera.matrixWorld.copy( cameraVR.matrixWorld );\r\n\r\n                var children = camera.children;\r\n\r\n                for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                    children[ i ].updateMatrixWorld( true );\r\n\r\n                }\r\n\r\n                return cameraVR;\r\n\r\n            }\r\n\r\n            return camera;\r\n\r\n        };\r\n\r\n        this.isPresenting = isPresenting;\r\n\r\n        // Animation Loop\r\n\r\n        var onAnimationFrameCallback = null;\r\n\r\n        function onAnimationFrame( time, frame ) {\r\n\r\n            pose = frame.getDevicePose( frameOfRef );\r\n\r\n            var layer = session.baseLayer;\r\n            var views = frame.views;\r\n\r\n            for ( var i = 0; i < views.length; i ++ ) {\r\n\r\n                var view = views[ i ];\r\n                var viewport = layer.getViewport( view );\r\n                var viewMatrix = pose.getViewMatrix( view );\r\n\r\n                var camera = cameraVR.cameras[ i ];\r\n                camera.matrix.fromArray( viewMatrix ).getInverse( camera.matrix );\r\n                camera.projectionMatrix.fromArray( view.projectionMatrix );\r\n                camera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\r\n\r\n                if ( i === 0 ) {\r\n\r\n                    cameraVR.matrix.copy( camera.matrix );\r\n\r\n                    // HACK (mrdoob)\r\n                    // https://github.com/w3c/webvr/issues/203\r\n\r\n                    cameraVR.projectionMatrix.copy( camera.projectionMatrix );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( onAnimationFrameCallback ) onAnimationFrameCallback();\r\n\r\n        }\r\n\r\n        var animation = new WebGLAnimation();\r\n        animation.setAnimationLoop( onAnimationFrame );\r\n\r\n        this.setAnimationLoop = function ( callback ) {\r\n\r\n            onAnimationFrameCallback = callback;\r\n\r\n        };\r\n\r\n        // DEPRECATED\r\n\r\n        this.getStandingMatrix = function () {\r\n\r\n            console.warn( 'THREE.WebXRManager: getStandingMatrix() is no longer needed.' );\r\n            return new THREE.Matrix4();\r\n\r\n        };\r\n\r\n        this.submitFrame = function () {};\r\n\r\n    }\r\n\r\n    /**\r\n     * @author supereggbert / http://www.paulbrunt.co.uk/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author szimek / https://github.com/szimek/\r\n     * @author tschw\r\n     */\r\n\r\n    function WebGLRenderer( parameters ) {\r\n\r\n        console.log( 'THREE.WebGLRenderer', REVISION );\r\n\r\n        parameters = parameters || {};\r\n\r\n        var _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\r\n            _context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n            _alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n            _depth = parameters.depth !== undefined ? parameters.depth : true,\r\n            _stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n            _antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n            _premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n            _preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n            _powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default';\r\n\r\n        var currentRenderList = null;\r\n        var currentRenderState = null;\r\n\r\n        // public properties\r\n\r\n        this.domElement = _canvas;\r\n        this.context = null;\r\n\r\n        // clearing\r\n\r\n        this.autoClear = true;\r\n        this.autoClearColor = true;\r\n        this.autoClearDepth = true;\r\n        this.autoClearStencil = true;\r\n\r\n        // scene graph\r\n\r\n        this.sortObjects = true;\r\n\r\n        // user-defined clipping\r\n\r\n        this.clippingPlanes = [];\r\n        this.localClippingEnabled = false;\r\n\r\n        // physically based shading\r\n\r\n        this.gammaFactor = 2.0;\t// for backwards compatibility\r\n        this.gammaInput = false;\r\n        this.gammaOutput = false;\r\n\r\n        // physical lights\r\n\r\n        this.physicallyCorrectLights = false;\r\n\r\n        // tone mapping\r\n\r\n        this.toneMapping = LinearToneMapping;\r\n        this.toneMappingExposure = 1.0;\r\n        this.toneMappingWhitePoint = 1.0;\r\n\r\n        // morphs\r\n\r\n        this.maxMorphTargets = 8;\r\n        this.maxMorphNormals = 4;\r\n\r\n        // internal properties\r\n\r\n        var _this = this,\r\n\r\n            _isContextLost = false,\r\n\r\n            // internal state cache\r\n\r\n            _framebuffer = null,\r\n\r\n            _currentRenderTarget = null,\r\n            _currentFramebuffer = null,\r\n            _currentMaterialId = - 1,\r\n            _currentGeometryProgram = '',\r\n\r\n            _currentCamera = null,\r\n            _currentArrayCamera = null,\r\n\r\n            _currentViewport = new Vector4(),\r\n            _currentScissor = new Vector4(),\r\n            _currentScissorTest = null,\r\n\r\n            //\r\n\r\n            _usedTextureUnits = 0,\r\n\r\n            //\r\n\r\n            _width = _canvas.width,\r\n            _height = _canvas.height,\r\n\r\n            _pixelRatio = 1,\r\n\r\n            _viewport = new Vector4( 0, 0, _width, _height ),\r\n            _scissor = new Vector4( 0, 0, _width, _height ),\r\n            _scissorTest = false,\r\n\r\n            // frustum\r\n\r\n            _frustum = new Frustum(),\r\n\r\n            // clipping\r\n\r\n            _clipping = new WebGLClipping(),\r\n            _clippingEnabled = false,\r\n            _localClippingEnabled = false,\r\n\r\n            // camera matrices cache\r\n\r\n            _projScreenMatrix = new Matrix4(),\r\n\r\n            _vector3 = new Vector3();\r\n\r\n        function getTargetPixelRatio() {\r\n\r\n            return _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n        }\r\n\r\n        // initialize\r\n\r\n        var _gl;\r\n\r\n        try {\r\n\r\n            var contextAttributes = {\r\n                alpha: _alpha,\r\n                depth: _depth,\r\n                stencil: _stencil,\r\n                antialias: _antialias,\r\n                premultipliedAlpha: _premultipliedAlpha,\r\n                preserveDrawingBuffer: _preserveDrawingBuffer,\r\n                powerPreference: _powerPreference\r\n            };\r\n\r\n            // event listeners must be registered before WebGL context is created, see #12753\r\n\r\n            _canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n            _canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n            _gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\r\n\r\n            if ( _gl === null ) {\r\n\r\n                if ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n                    throw new Error( 'Error creating WebGL context with your selected attributes.' );\r\n\r\n                } else {\r\n\r\n                    throw new Error( 'Error creating WebGL context.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n            if ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n                _gl.getShaderPrecisionFormat = function () {\r\n\r\n                    return { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n                };\r\n\r\n            }\r\n\r\n        } catch ( error ) {\r\n\r\n            console.error( 'THREE.WebGLRenderer: ' + error.message );\r\n\r\n        }\r\n\r\n        var extensions, capabilities, state, info;\r\n        var properties, textures, attributes, geometries, objects;\r\n        var programCache, renderLists, renderStates;\r\n\r\n        var background, morphtargets, bufferRenderer, indexedBufferRenderer;\r\n        var spriteRenderer;\r\n\r\n        var utils;\r\n\r\n        function initGLContext() {\r\n\r\n            extensions = new WebGLExtensions( _gl );\r\n            extensions.get( 'WEBGL_depth_texture' );\r\n            extensions.get( 'OES_texture_float' );\r\n            extensions.get( 'OES_texture_float_linear' );\r\n            extensions.get( 'OES_texture_half_float' );\r\n            extensions.get( 'OES_texture_half_float_linear' );\r\n            extensions.get( 'OES_standard_derivatives' );\r\n            extensions.get( 'OES_element_index_uint' );\r\n            extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n            utils = new WebGLUtils( _gl, extensions );\r\n\r\n            capabilities = new WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n            state = new WebGLState( _gl, extensions, utils );\r\n            state.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n            state.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n            info = new WebGLInfo( _gl );\r\n            properties = new WebGLProperties();\r\n            textures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\r\n            attributes = new WebGLAttributes( _gl );\r\n            geometries = new WebGLGeometries( _gl, attributes, info );\r\n            objects = new WebGLObjects( geometries, info );\r\n            morphtargets = new WebGLMorphtargets( _gl );\r\n            programCache = new WebGLPrograms( _this, extensions, capabilities );\r\n            renderLists = new WebGLRenderLists();\r\n            renderStates = new WebGLRenderStates();\r\n\r\n            background = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\r\n\r\n            bufferRenderer = new WebGLBufferRenderer( _gl, extensions, info );\r\n            indexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info );\r\n\r\n            spriteRenderer = new WebGLSpriteRenderer( _this, _gl, state, textures, capabilities );\r\n\r\n            info.programs = programCache.programs;\r\n\r\n            _this.context = _gl;\r\n            _this.capabilities = capabilities;\r\n            _this.extensions = extensions;\r\n            _this.properties = properties;\r\n            _this.renderLists = renderLists;\r\n            _this.state = state;\r\n            _this.info = info;\r\n\r\n        }\r\n\r\n        initGLContext();\r\n\r\n        // vr\r\n\r\n        var vr = ( 'xr' in navigator ) ? new WebXRManager( _this ) : new WebVRManager( _this );\r\n\r\n        this.vr = vr;\r\n\r\n        // shadow map\r\n\r\n        var shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\r\n\r\n        this.shadowMap = shadowMap;\r\n\r\n        // API\r\n\r\n        this.getContext = function () {\r\n\r\n            return _gl;\r\n\r\n        };\r\n\r\n        this.getContextAttributes = function () {\r\n\r\n            return _gl.getContextAttributes();\r\n\r\n        };\r\n\r\n        this.forceContextLoss = function () {\r\n\r\n            var extension = extensions.get( 'WEBGL_lose_context' );\r\n            if ( extension ) extension.loseContext();\r\n\r\n        };\r\n\r\n        this.forceContextRestore = function () {\r\n\r\n            var extension = extensions.get( 'WEBGL_lose_context' );\r\n            if ( extension ) extension.restoreContext();\r\n\r\n        };\r\n\r\n        this.getPixelRatio = function () {\r\n\r\n            return _pixelRatio;\r\n\r\n        };\r\n\r\n        this.setPixelRatio = function ( value ) {\r\n\r\n            if ( value === undefined ) return;\r\n\r\n            _pixelRatio = value;\r\n\r\n            this.setSize( _width, _height, false );\r\n\r\n        };\r\n\r\n        this.getSize = function () {\r\n\r\n            return {\r\n                width: _width,\r\n                height: _height\r\n            };\r\n\r\n        };\r\n\r\n        this.setSize = function ( width, height, updateStyle ) {\r\n\r\n            if ( vr.isPresenting() ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\r\n                return;\r\n\r\n            }\r\n\r\n            _width = width;\r\n            _height = height;\r\n\r\n            _canvas.width = width * _pixelRatio;\r\n            _canvas.height = height * _pixelRatio;\r\n\r\n            if ( updateStyle !== false ) {\r\n\r\n                _canvas.style.width = width + 'px';\r\n                _canvas.style.height = height + 'px';\r\n\r\n            }\r\n\r\n            this.setViewport( 0, 0, width, height );\r\n\r\n        };\r\n\r\n        this.getDrawingBufferSize = function () {\r\n\r\n            return {\r\n                width: _width * _pixelRatio,\r\n                height: _height * _pixelRatio\r\n            };\r\n\r\n        };\r\n\r\n        this.setDrawingBufferSize = function ( width, height, pixelRatio ) {\r\n\r\n            _width = width;\r\n            _height = height;\r\n\r\n            _pixelRatio = pixelRatio;\r\n\r\n            _canvas.width = width * pixelRatio;\r\n            _canvas.height = height * pixelRatio;\r\n\r\n            this.setViewport( 0, 0, width, height );\r\n\r\n        };\r\n\r\n        this.getCurrentViewport = function () {\r\n\r\n            return _currentViewport;\r\n\r\n        };\r\n\r\n        this.setViewport = function ( x, y, width, height ) {\r\n\r\n            _viewport.set( x, _height - y - height, width, height );\r\n            state.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n        };\r\n\r\n        this.setScissor = function ( x, y, width, height ) {\r\n\r\n            _scissor.set( x, _height - y - height, width, height );\r\n            state.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n\r\n        };\r\n\r\n        this.setScissorTest = function ( boolean ) {\r\n\r\n            state.setScissorTest( _scissorTest = boolean );\r\n\r\n        };\r\n\r\n        // Clearing\r\n\r\n        this.getClearColor = function () {\r\n\r\n            return background.getClearColor();\r\n\r\n        };\r\n\r\n        this.setClearColor = function () {\r\n\r\n            background.setClearColor.apply( background, arguments );\r\n\r\n        };\r\n\r\n        this.getClearAlpha = function () {\r\n\r\n            return background.getClearAlpha();\r\n\r\n        };\r\n\r\n        this.setClearAlpha = function () {\r\n\r\n            background.setClearAlpha.apply( background, arguments );\r\n\r\n        };\r\n\r\n        this.clear = function ( color, depth, stencil ) {\r\n\r\n            var bits = 0;\r\n\r\n            if ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n            if ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n            if ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n            _gl.clear( bits );\r\n\r\n        };\r\n\r\n        this.clearColor = function () {\r\n\r\n            this.clear( true, false, false );\r\n\r\n        };\r\n\r\n        this.clearDepth = function () {\r\n\r\n            this.clear( false, true, false );\r\n\r\n        };\r\n\r\n        this.clearStencil = function () {\r\n\r\n            this.clear( false, false, true );\r\n\r\n        };\r\n\r\n        this.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n            this.setRenderTarget( renderTarget );\r\n            this.clear( color, depth, stencil );\r\n\r\n        };\r\n\r\n        //\r\n\r\n        this.dispose = function () {\r\n\r\n            _canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n            _canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n            renderLists.dispose();\r\n            renderStates.dispose();\r\n            properties.dispose();\r\n            objects.dispose();\r\n\r\n            vr.dispose();\r\n\r\n            animation.stop();\r\n\r\n        };\r\n\r\n        // Events\r\n\r\n        function onContextLost( event ) {\r\n\r\n            event.preventDefault();\r\n\r\n            console.log( 'THREE.WebGLRenderer: Context Lost.' );\r\n\r\n            _isContextLost = true;\r\n\r\n        }\r\n\r\n        function onContextRestore( /* event */ ) {\r\n\r\n            console.log( 'THREE.WebGLRenderer: Context Restored.' );\r\n\r\n            _isContextLost = false;\r\n\r\n            initGLContext();\r\n\r\n        }\r\n\r\n        function onMaterialDispose( event ) {\r\n\r\n            var material = event.target;\r\n\r\n            material.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n            deallocateMaterial( material );\r\n\r\n        }\r\n\r\n        // Buffer deallocation\r\n\r\n        function deallocateMaterial( material ) {\r\n\r\n            releaseMaterialProgramReference( material );\r\n\r\n            properties.remove( material );\r\n\r\n        }\r\n\r\n\r\n        function releaseMaterialProgramReference( material ) {\r\n\r\n            var programInfo = properties.get( material ).program;\r\n\r\n            material.program = undefined;\r\n\r\n            if ( programInfo !== undefined ) {\r\n\r\n                programCache.releaseProgram( programInfo );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Buffer rendering\r\n\r\n        function renderObjectImmediate( object, program, material ) {\r\n\r\n            object.render( function ( object ) {\r\n\r\n                _this.renderBufferImmediate( object, program, material );\r\n\r\n            } );\r\n\r\n        }\r\n\r\n        this.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n            state.initAttributes();\r\n\r\n            var buffers = properties.get( object );\r\n\r\n            if ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n            if ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n            if ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n            if ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n            var programAttributes = program.getAttributes();\r\n\r\n            if ( object.hasPositions ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.position );\r\n                _gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( object.hasNormals ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n                if ( ! material.isMeshPhongMaterial &&\r\n                    ! material.isMeshStandardMaterial &&\r\n                    ! material.isMeshNormalMaterial &&\r\n                    material.flatShading === true ) {\r\n\r\n                    for ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n                        var array = object.normalArray;\r\n\r\n                        var nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n                        var ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n                        var nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n                        array[ i + 0 ] = nx;\r\n                        array[ i + 1 ] = ny;\r\n                        array[ i + 2 ] = nz;\r\n\r\n                        array[ i + 3 ] = nx;\r\n                        array[ i + 4 ] = ny;\r\n                        array[ i + 5 ] = nz;\r\n\r\n                        array[ i + 6 ] = nx;\r\n                        array[ i + 7 ] = ny;\r\n                        array[ i + 8 ] = nz;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.normal );\r\n\r\n                _gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( object.hasUvs && material.map ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.uv );\r\n\r\n                _gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( object.hasColors && material.vertexColors !== NoColors ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.color );\r\n\r\n                _gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            state.disableUnusedAttributes();\r\n\r\n            _gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n            object.count = 0;\r\n\r\n        };\r\n\r\n        this.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\r\n\r\n            var frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\r\n\r\n            state.setMaterial( material, frontFaceCW );\r\n\r\n            var program = setProgram( camera, fog, material, object );\r\n            var geometryProgram = geometry.id + '_' + program.id + '_' + ( material.wireframe === true );\r\n\r\n            var updateBuffers = false;\r\n\r\n            if ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n                _currentGeometryProgram = geometryProgram;\r\n                updateBuffers = true;\r\n\r\n            }\r\n\r\n            if ( object.morphTargetInfluences ) {\r\n\r\n                morphtargets.update( object, geometry, material, program );\r\n\r\n                updateBuffers = true;\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var index = geometry.index;\r\n            var position = geometry.attributes.position;\r\n            var rangeFactor = 1;\r\n\r\n            if ( material.wireframe === true ) {\r\n\r\n                index = geometries.getWireframeAttribute( geometry );\r\n                rangeFactor = 2;\r\n\r\n            }\r\n\r\n            var attribute;\r\n            var renderer = bufferRenderer;\r\n\r\n            if ( index !== null ) {\r\n\r\n                attribute = attributes.get( index );\r\n\r\n                renderer = indexedBufferRenderer;\r\n                renderer.setIndex( attribute );\r\n\r\n            }\r\n\r\n            if ( updateBuffers ) {\r\n\r\n                setupVertexAttributes( material, program, geometry );\r\n\r\n                if ( index !== null ) {\r\n\r\n                    _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var dataCount = Infinity;\r\n\r\n            if ( index !== null ) {\r\n\r\n                dataCount = index.count;\r\n\r\n            } else if ( position !== undefined ) {\r\n\r\n                dataCount = position.count;\r\n\r\n            }\r\n\r\n            var rangeStart = geometry.drawRange.start * rangeFactor;\r\n            var rangeCount = geometry.drawRange.count * rangeFactor;\r\n\r\n            var groupStart = group !== null ? group.start * rangeFactor : 0;\r\n            var groupCount = group !== null ? group.count * rangeFactor : Infinity;\r\n\r\n            var drawStart = Math.max( rangeStart, groupStart );\r\n            var drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n            var drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n            if ( drawCount === 0 ) return;\r\n\r\n            //\r\n\r\n            if ( object.isMesh ) {\r\n\r\n                if ( material.wireframe === true ) {\r\n\r\n                    state.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n                    renderer.setMode( _gl.LINES );\r\n\r\n                } else {\r\n\r\n                    switch ( object.drawMode ) {\r\n\r\n                        case TrianglesDrawMode:\r\n                            renderer.setMode( _gl.TRIANGLES );\r\n                            break;\r\n\r\n                        case TriangleStripDrawMode:\r\n                            renderer.setMode( _gl.TRIANGLE_STRIP );\r\n                            break;\r\n\r\n                        case TriangleFanDrawMode:\r\n                            renderer.setMode( _gl.TRIANGLE_FAN );\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n\r\n            } else if ( object.isLine ) {\r\n\r\n                var lineWidth = material.linewidth;\r\n\r\n                if ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n                state.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n                if ( object.isLineSegments ) {\r\n\r\n                    renderer.setMode( _gl.LINES );\r\n\r\n                } else if ( object.isLineLoop ) {\r\n\r\n                    renderer.setMode( _gl.LINE_LOOP );\r\n\r\n                } else {\r\n\r\n                    renderer.setMode( _gl.LINE_STRIP );\r\n\r\n                }\r\n\r\n            } else if ( object.isPoints ) {\r\n\r\n                renderer.setMode( _gl.POINTS );\r\n\r\n            }\r\n\r\n            if ( geometry && geometry.isInstancedBufferGeometry ) {\r\n\r\n                if ( geometry.maxInstancedCount > 0 ) {\r\n\r\n                    renderer.renderInstances( geometry, drawStart, drawCount );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                renderer.render( drawStart, drawCount );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        function setupVertexAttributes( material, program, geometry ) {\r\n\r\n            if ( geometry && geometry.isInstancedBufferGeometry ) {\r\n\r\n                if ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) {\r\n\r\n                    console.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n                    return;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.initAttributes();\r\n\r\n            var geometryAttributes = geometry.attributes;\r\n\r\n            var programAttributes = program.getAttributes();\r\n\r\n            var materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n            for ( var name in programAttributes ) {\r\n\r\n                var programAttribute = programAttributes[ name ];\r\n\r\n                if ( programAttribute >= 0 ) {\r\n\r\n                    var geometryAttribute = geometryAttributes[ name ];\r\n\r\n                    if ( geometryAttribute !== undefined ) {\r\n\r\n                        var normalized = geometryAttribute.normalized;\r\n                        var size = geometryAttribute.itemSize;\r\n\r\n                        var attribute = attributes.get( geometryAttribute );\r\n\r\n                        // TODO Attribute may not be available on context restore\r\n\r\n                        if ( attribute === undefined ) continue;\r\n\r\n                        var buffer = attribute.buffer;\r\n                        var type = attribute.type;\r\n                        var bytesPerElement = attribute.bytesPerElement;\r\n\r\n                        if ( geometryAttribute.isInterleavedBufferAttribute ) {\r\n\r\n                            var data = geometryAttribute.data;\r\n                            var stride = data.stride;\r\n                            var offset = geometryAttribute.offset;\r\n\r\n                            if ( data && data.isInstancedInterleavedBuffer ) {\r\n\r\n                                state.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\r\n\r\n                                if ( geometry.maxInstancedCount === undefined ) {\r\n\r\n                                    geometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n                                }\r\n\r\n                            } else {\r\n\r\n                                state.enableAttribute( programAttribute );\r\n\r\n                            }\r\n\r\n                            _gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n                            _gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\r\n\r\n                        } else {\r\n\r\n                            if ( geometryAttribute.isInstancedBufferAttribute ) {\r\n\r\n                                state.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\r\n\r\n                                if ( geometry.maxInstancedCount === undefined ) {\r\n\r\n                                    geometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n                                }\r\n\r\n                            } else {\r\n\r\n                                state.enableAttribute( programAttribute );\r\n\r\n                            }\r\n\r\n                            _gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n                            _gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\r\n\r\n                        }\r\n\r\n                    } else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n                        var value = materialDefaultAttributeValues[ name ];\r\n\r\n                        if ( value !== undefined ) {\r\n\r\n                            switch ( value.length ) {\r\n\r\n                                case 2:\r\n                                    _gl.vertexAttrib2fv( programAttribute, value );\r\n                                    break;\r\n\r\n                                case 3:\r\n                                    _gl.vertexAttrib3fv( programAttribute, value );\r\n                                    break;\r\n\r\n                                case 4:\r\n                                    _gl.vertexAttrib4fv( programAttribute, value );\r\n                                    break;\r\n\r\n                                default:\r\n                                    _gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.disableUnusedAttributes();\r\n\r\n        }\r\n\r\n        // Compile\r\n\r\n        this.compile = function ( scene, camera ) {\r\n\r\n            currentRenderState = renderStates.get( scene, camera );\r\n            currentRenderState.init();\r\n\r\n            scene.traverse( function ( object ) {\r\n\r\n                if ( object.isLight ) {\r\n\r\n                    currentRenderState.pushLight( object );\r\n\r\n                    if ( object.castShadow ) {\r\n\r\n                        currentRenderState.pushShadow( object );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } );\r\n\r\n            currentRenderState.setupLights( camera );\r\n\r\n            scene.traverse( function ( object ) {\r\n\r\n                if ( object.material ) {\r\n\r\n                    if ( Array.isArray( object.material ) ) {\r\n\r\n                        for ( var i = 0; i < object.material.length; i ++ ) {\r\n\r\n                            initMaterial( object.material[ i ], scene.fog, object );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        initMaterial( object.material, scene.fog, object );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } );\r\n\r\n        };\r\n\r\n        // Animation Loop\r\n\r\n        var onAnimationFrameCallback = null;\r\n\r\n        function onAnimationFrame() {\r\n\r\n            if ( vr.isPresenting() ) return;\r\n            if ( onAnimationFrameCallback ) onAnimationFrameCallback();\r\n\r\n        }\r\n\r\n        var animation = new WebGLAnimation();\r\n        animation.setAnimationLoop( onAnimationFrame );\r\n        animation.setContext( window );\r\n\r\n        this.setAnimationLoop = function ( callback ) {\r\n\r\n            onAnimationFrameCallback = callback;\r\n            vr.setAnimationLoop( callback );\r\n\r\n            animation.start();\r\n\r\n        };\r\n\r\n        // Rendering\r\n\r\n        this.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n            if ( ! ( camera && camera.isCamera ) ) {\r\n\r\n                console.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( _isContextLost ) return;\r\n\r\n            // reset caching for this frame\r\n\r\n            _currentGeometryProgram = '';\r\n            _currentMaterialId = - 1;\r\n            _currentCamera = null;\r\n\r\n            // update scene graph\r\n\r\n            if ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n            // update camera matrices and frustum\r\n\r\n            if ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n            if ( vr.enabled ) {\r\n\r\n                camera = vr.getCamera( camera );\r\n\r\n            }\r\n\r\n            //\r\n\r\n            currentRenderState = renderStates.get( scene, camera );\r\n            currentRenderState.init();\r\n\r\n            scene.onBeforeRender( _this, scene, camera, renderTarget );\r\n\r\n            _projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n            _frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n            _localClippingEnabled = this.localClippingEnabled;\r\n            _clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\r\n\r\n            currentRenderList = renderLists.get( scene, camera );\r\n            currentRenderList.init();\r\n\r\n            projectObject( scene, camera, _this.sortObjects );\r\n\r\n            if ( _this.sortObjects === true ) {\r\n\r\n                currentRenderList.sort();\r\n\r\n            }\r\n\r\n            //\r\n\r\n            if ( _clippingEnabled ) _clipping.beginShadows();\r\n\r\n            var shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n            shadowMap.render( shadowsArray, scene, camera );\r\n\r\n            currentRenderState.setupLights( camera );\r\n\r\n            if ( _clippingEnabled ) _clipping.endShadows();\r\n\r\n            //\r\n\r\n            if ( this.info.autoReset ) this.info.reset();\r\n\r\n            if ( renderTarget === undefined ) {\r\n\r\n                renderTarget = null;\r\n\r\n            }\r\n\r\n            this.setRenderTarget( renderTarget );\r\n\r\n            //\r\n\r\n            background.render( currentRenderList, scene, camera, forceClear );\r\n\r\n            // render scene\r\n\r\n            var opaqueObjects = currentRenderList.opaque;\r\n            var transparentObjects = currentRenderList.transparent;\r\n\r\n            if ( scene.overrideMaterial ) {\r\n\r\n                var overrideMaterial = scene.overrideMaterial;\r\n\r\n                if ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\r\n                if ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\r\n\r\n            } else {\r\n\r\n                // opaque pass (front-to-back order)\r\n\r\n                if ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\r\n\r\n                // transparent pass (back-to-front order)\r\n\r\n                if ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\r\n\r\n            }\r\n\r\n            // custom renderers\r\n\r\n            var spritesArray = currentRenderState.state.spritesArray;\r\n\r\n            spriteRenderer.render( spritesArray, scene, camera );\r\n\r\n            // Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n            if ( renderTarget ) {\r\n\r\n                textures.updateRenderTargetMipmap( renderTarget );\r\n\r\n            }\r\n\r\n            // Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n            state.buffers.depth.setTest( true );\r\n            state.buffers.depth.setMask( true );\r\n            state.buffers.color.setMask( true );\r\n\r\n            state.setPolygonOffset( false );\r\n\r\n            scene.onAfterRender( _this, scene, camera );\r\n\r\n            if ( vr.enabled ) {\r\n\r\n                vr.submitFrame();\r\n\r\n            }\r\n\r\n            // _gl.finish();\r\n\r\n            currentRenderList = null;\r\n            currentRenderState = null;\r\n\r\n        };\r\n\r\n        /*\r\n\t\t// TODO Duplicated code (Frustum)\r\n\r\n\t\tvar _sphere = new Sphere();\r\n\r\n\t\tfunction isObjectViewable( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null )\r\n\t\t\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\t\t_sphere.copy( geometry.boundingSphere ).\r\n\t\t\tapplyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn isSphereViewable( _sphere );\r\n\r\n\t\t}\r\n\r\n\t\tfunction isSpriteViewable( sprite ) {\r\n\r\n\t\t\t_sphere.center.set( 0, 0, 0 );\r\n\t\t\t_sphere.radius = 0.7071067811865476;\r\n\t\t\t_sphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\t\treturn isSphereViewable( _sphere );\r\n\r\n\t\t}\r\n\r\n\t\tfunction isSphereViewable( sphere ) {\r\n\r\n\t\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\r\n\r\n\t\t\tvar numPlanes = _clipping.numPlanes;\r\n\r\n\t\t\tif ( numPlanes === 0 ) return true;\r\n\r\n\t\t\tvar planes = _this.clippingPlanes,\r\n\r\n\t\t\t\tcenter = sphere.center,\r\n\t\t\t\tnegRad = - sphere.radius,\r\n\t\t\t\ti = 0;\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\t// out when deeper than radius in the negative halfspace\r\n\t\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\r\n\r\n\t\t\t} while ( ++ i !== numPlanes );\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\t\t*/\r\n\r\n        function projectObject( object, camera, sortObjects ) {\r\n\r\n            if ( object.visible === false ) return;\r\n\r\n            var visible = object.layers.test( camera.layers );\r\n\r\n            if ( visible ) {\r\n\r\n                if ( object.isLight ) {\r\n\r\n                    currentRenderState.pushLight( object );\r\n\r\n                    if ( object.castShadow ) {\r\n\r\n                        currentRenderState.pushShadow( object );\r\n\r\n                    }\r\n\r\n                } else if ( object.isSprite ) {\r\n\r\n                    if ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\r\n\r\n                        currentRenderState.pushSprite( object );\r\n\r\n                    }\r\n\r\n                } else if ( object.isImmediateRenderObject ) {\r\n\r\n                    if ( sortObjects ) {\r\n\r\n                        _vector3.setFromMatrixPosition( object.matrixWorld )\r\n                            .applyMatrix4( _projScreenMatrix );\r\n\r\n                    }\r\n\r\n                    currentRenderList.push( object, null, object.material, _vector3.z, null );\r\n\r\n                } else if ( object.isMesh || object.isLine || object.isPoints ) {\r\n\r\n                    if ( object.isSkinnedMesh ) {\r\n\r\n                        object.skeleton.update();\r\n\r\n                    }\r\n\r\n                    if ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\r\n\r\n                        if ( sortObjects ) {\r\n\r\n                            _vector3.setFromMatrixPosition( object.matrixWorld )\r\n                                .applyMatrix4( _projScreenMatrix );\r\n\r\n                        }\r\n\r\n                        var geometry = objects.update( object );\r\n                        var material = object.material;\r\n\r\n                        if ( Array.isArray( material ) ) {\r\n\r\n                            var groups = geometry.groups;\r\n\r\n                            for ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n                                var group = groups[ i ];\r\n                                var groupMaterial = material[ group.materialIndex ];\r\n\r\n                                if ( groupMaterial && groupMaterial.visible ) {\r\n\r\n                                    currentRenderList.push( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        } else if ( material.visible ) {\r\n\r\n                            currentRenderList.push( object, geometry, material, _vector3.z, null );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var children = object.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                projectObject( children[ i ], camera, sortObjects );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function renderObjects( renderList, scene, camera, overrideMaterial ) {\r\n\r\n            for ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n                var renderItem = renderList[ i ];\r\n\r\n                var object = renderItem.object;\r\n                var geometry = renderItem.geometry;\r\n                var material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n                var group = renderItem.group;\r\n\r\n                if ( camera.isArrayCamera ) {\r\n\r\n                    _currentArrayCamera = camera;\r\n\r\n                    var cameras = camera.cameras;\r\n\r\n                    for ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\r\n\r\n                        var camera2 = cameras[ j ];\r\n\r\n                        if ( object.layers.test( camera2.layers ) ) {\r\n\r\n                            if ( 'viewport' in camera2 ) { // XR\r\n\r\n                                state.viewport( _currentViewport.copy( camera2.viewport ) );\r\n\r\n                            } else {\r\n\r\n                                var bounds = camera2.bounds;\r\n\r\n                                var x = bounds.x * _width;\r\n                                var y = bounds.y * _height;\r\n                                var width = bounds.z * _width;\r\n                                var height = bounds.w * _height;\r\n\r\n                                state.viewport( _currentViewport.set( x, y, width, height ).multiplyScalar( _pixelRatio ) );\r\n\r\n                            }\r\n\r\n                            renderObject( object, scene, camera2, geometry, material, group );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    _currentArrayCamera = null;\r\n\r\n                    renderObject( object, scene, camera, geometry, material, group );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function renderObject( object, scene, camera, geometry, material, group ) {\r\n\r\n            object.onBeforeRender( _this, scene, camera, geometry, material, group );\r\n            currentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n            object.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n            object.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n            if ( object.isImmediateRenderObject ) {\r\n\r\n                var frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\r\n\r\n                state.setMaterial( material, frontFaceCW );\r\n\r\n                var program = setProgram( camera, scene.fog, material, object );\r\n\r\n                _currentGeometryProgram = '';\r\n\r\n                renderObjectImmediate( object, program, material );\r\n\r\n            } else {\r\n\r\n                _this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\r\n\r\n            }\r\n\r\n            object.onAfterRender( _this, scene, camera, geometry, material, group );\r\n            currentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n        }\r\n\r\n        function initMaterial( material, fog, object ) {\r\n\r\n            var materialProperties = properties.get( material );\r\n\r\n            var lights = currentRenderState.state.lights;\r\n            var shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n            var parameters = programCache.getParameters(\r\n                material, lights.state, shadowsArray, fog, _clipping.numPlanes, _clipping.numIntersection, object );\r\n\r\n            var code = programCache.getProgramCode( material, parameters );\r\n\r\n            var program = materialProperties.program;\r\n            var programChange = true;\r\n\r\n            if ( program === undefined ) {\r\n\r\n                // new material\r\n                material.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n            } else if ( program.code !== code ) {\r\n\r\n                // changed glsl or parameters\r\n                releaseMaterialProgramReference( material );\r\n\r\n            } else if ( materialProperties.lightsHash !== lights.state.hash ) {\r\n\r\n                properties.update( material, 'lightsHash', lights.state.hash );\r\n                programChange = false;\r\n\r\n            } else if ( parameters.shaderID !== undefined ) {\r\n\r\n                // same glsl and uniform list\r\n                return;\r\n\r\n            } else {\r\n\r\n                // only rebuild uniform list\r\n                programChange = false;\r\n\r\n            }\r\n\r\n            if ( programChange ) {\r\n\r\n                if ( parameters.shaderID ) {\r\n\r\n                    var shader = ShaderLib[ parameters.shaderID ];\r\n\r\n                    materialProperties.shader = {\r\n                        name: material.type,\r\n                        uniforms: UniformsUtils.clone( shader.uniforms ),\r\n                        vertexShader: shader.vertexShader,\r\n                        fragmentShader: shader.fragmentShader\r\n                    };\r\n\r\n                } else {\r\n\r\n                    materialProperties.shader = {\r\n                        name: material.type,\r\n                        uniforms: material.uniforms,\r\n                        vertexShader: material.vertexShader,\r\n                        fragmentShader: material.fragmentShader\r\n                    };\r\n\r\n                }\r\n\r\n                material.onBeforeCompile( materialProperties.shader, _this );\r\n\r\n                program = programCache.acquireProgram( material, materialProperties.shader, parameters, code );\r\n\r\n                materialProperties.program = program;\r\n                material.program = program;\r\n\r\n            }\r\n\r\n            var programAttributes = program.getAttributes();\r\n\r\n            if ( material.morphTargets ) {\r\n\r\n                material.numSupportedMorphTargets = 0;\r\n\r\n                for ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n                    if ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n                        material.numSupportedMorphTargets ++;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( material.morphNormals ) {\r\n\r\n                material.numSupportedMorphNormals = 0;\r\n\r\n                for ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n                    if ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n                        material.numSupportedMorphNormals ++;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var uniforms = materialProperties.shader.uniforms;\r\n\r\n            if ( ! material.isShaderMaterial &&\r\n                ! material.isRawShaderMaterial ||\r\n                material.clipping === true ) {\r\n\r\n                materialProperties.numClippingPlanes = _clipping.numPlanes;\r\n                materialProperties.numIntersection = _clipping.numIntersection;\r\n                uniforms.clippingPlanes = _clipping.uniform;\r\n\r\n            }\r\n\r\n            materialProperties.fog = fog;\r\n\r\n            // store the light setup it was created for\r\n\r\n            materialProperties.lightsHash = lights.state.hash;\r\n\r\n            if ( material.lights ) {\r\n\r\n                // wire up the material to this renderer's lighting state\r\n\r\n                uniforms.ambientLightColor.value = lights.state.ambient;\r\n                uniforms.directionalLights.value = lights.state.directional;\r\n                uniforms.spotLights.value = lights.state.spot;\r\n                uniforms.rectAreaLights.value = lights.state.rectArea;\r\n                uniforms.pointLights.value = lights.state.point;\r\n                uniforms.hemisphereLights.value = lights.state.hemi;\r\n\r\n                uniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\r\n                uniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\r\n                uniforms.spotShadowMap.value = lights.state.spotShadowMap;\r\n                uniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\r\n                uniforms.pointShadowMap.value = lights.state.pointShadowMap;\r\n                uniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\r\n                // TODO (abelnation): add area lights shadow info to uniforms\r\n\r\n            }\r\n\r\n            var progUniforms = materialProperties.program.getUniforms(),\r\n                uniformsList =\r\n                    WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\r\n\r\n            materialProperties.uniformsList = uniformsList;\r\n\r\n        }\r\n\r\n        function setProgram( camera, fog, material, object ) {\r\n\r\n            _usedTextureUnits = 0;\r\n\r\n            var materialProperties = properties.get( material );\r\n            var lights = currentRenderState.state.lights;\r\n\r\n            if ( _clippingEnabled ) {\r\n\r\n                if ( _localClippingEnabled || camera !== _currentCamera ) {\r\n\r\n                    var useCache =\r\n                        camera === _currentCamera &&\r\n                        material.id === _currentMaterialId;\r\n\r\n                    // we might want to call this function with some ClippingGroup\r\n                    // object instead of the material, once it becomes feasible\r\n                    // (#8465, #8379)\r\n                    _clipping.setState(\r\n                        material.clippingPlanes, material.clipIntersection, material.clipShadows,\r\n                        camera, materialProperties, useCache );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( material.needsUpdate === false ) {\r\n\r\n                if ( materialProperties.program === undefined ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                } else if ( material.fog && materialProperties.fog !== fog ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                } else if ( material.lights && materialProperties.lightsHash !== lights.state.hash ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                } else if ( materialProperties.numClippingPlanes !== undefined &&\r\n                    ( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\r\n                        materialProperties.numIntersection !== _clipping.numIntersection ) ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( material.needsUpdate ) {\r\n\r\n                initMaterial( material, fog, object );\r\n                material.needsUpdate = false;\r\n\r\n            }\r\n\r\n            var refreshProgram = false;\r\n            var refreshMaterial = false;\r\n            var refreshLights = false;\r\n\r\n            var program = materialProperties.program,\r\n                p_uniforms = program.getUniforms(),\r\n                m_uniforms = materialProperties.shader.uniforms;\r\n\r\n            if ( state.useProgram( program.program ) ) {\r\n\r\n                refreshProgram = true;\r\n                refreshMaterial = true;\r\n                refreshLights = true;\r\n\r\n            }\r\n\r\n            if ( material.id !== _currentMaterialId ) {\r\n\r\n                _currentMaterialId = material.id;\r\n\r\n                refreshMaterial = true;\r\n\r\n            }\r\n\r\n            if ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n                p_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\r\n\r\n                if ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n                    p_uniforms.setValue( _gl, 'logDepthBufFC',\r\n                        2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n                }\r\n\r\n                // Avoid unneeded uniform updates per ArrayCamera's sub-camera\r\n\r\n                if ( _currentCamera !== ( _currentArrayCamera || camera ) ) {\r\n\r\n                    _currentCamera = ( _currentArrayCamera || camera );\r\n\r\n                    // lighting uniforms depend on the camera so enforce an update\r\n                    // now, in case this material supports lights - or later, when\r\n                    // the next material that does gets activated:\r\n\r\n                    refreshMaterial = true;\t\t// set to true on material change\r\n                    refreshLights = true;\t\t// remains set until update done\r\n\r\n                }\r\n\r\n                // load material specific uniforms\r\n                // (shader material also gets them for the sake of genericity)\r\n\r\n                if ( material.isShaderMaterial ||\r\n                    material.isMeshPhongMaterial ||\r\n                    material.isMeshStandardMaterial ||\r\n                    material.envMap ) {\r\n\r\n                    var uCamPos = p_uniforms.map.cameraPosition;\r\n\r\n                    if ( uCamPos !== undefined ) {\r\n\r\n                        uCamPos.setValue( _gl,\r\n                            _vector3.setFromMatrixPosition( camera.matrixWorld ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( material.isMeshPhongMaterial ||\r\n                    material.isMeshLambertMaterial ||\r\n                    material.isMeshBasicMaterial ||\r\n                    material.isMeshStandardMaterial ||\r\n                    material.isShaderMaterial ||\r\n                    material.skinning ) {\r\n\r\n                    p_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // skinning uniforms must be set even if material didn't change\r\n            // auto-setting of texture unit for bone texture must go before other textures\r\n            // not sure why, but otherwise weird things happen\r\n\r\n            if ( material.skinning ) {\r\n\r\n                p_uniforms.setOptional( _gl, object, 'bindMatrix' );\r\n                p_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\r\n\r\n                var skeleton = object.skeleton;\r\n\r\n                if ( skeleton ) {\r\n\r\n                    var bones = skeleton.bones;\r\n\r\n                    if ( capabilities.floatVertexTextures ) {\r\n\r\n                        if ( skeleton.boneTexture === undefined ) {\r\n\r\n                            // layout (1 matrix = 4 pixels)\r\n                            //      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n                            //  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n                            //       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n                            //       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n                            //       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\r\n                            var size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n                            size = _Math.ceilPowerOfTwo( size );\r\n                            size = Math.max( size, 4 );\r\n\r\n                            var boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\r\n                            boneMatrices.set( skeleton.boneMatrices ); // copy current values\r\n\r\n                            var boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\r\n                            boneTexture.needsUpdate = true;\r\n\r\n                            skeleton.boneMatrices = boneMatrices;\r\n                            skeleton.boneTexture = boneTexture;\r\n                            skeleton.boneTextureSize = size;\r\n\r\n                        }\r\n\r\n                        p_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture );\r\n                        p_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\r\n\r\n                    } else {\r\n\r\n                        p_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( refreshMaterial ) {\r\n\r\n                p_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\r\n                p_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\r\n\r\n                if ( material.lights ) {\r\n\r\n                    // the current material requires lighting info\r\n\r\n                    // note: all lighting uniforms are always set correctly\r\n                    // they simply reference the renderer's state for their\r\n                    // values\r\n                    //\r\n                    // use the current material's .needsUpdate flags to set\r\n                    // the GL state when required\r\n\r\n                    markUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n                }\r\n\r\n                // refresh uniforms common to several materials\r\n\r\n                if ( fog && material.fog ) {\r\n\r\n                    refreshUniformsFog( m_uniforms, fog );\r\n\r\n                }\r\n\r\n                if ( material.isMeshBasicMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshLambertMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsLambert( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshPhongMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n\r\n                    if ( material.isMeshToonMaterial ) {\r\n\r\n                        refreshUniformsToon( m_uniforms, material );\r\n\r\n                    } else {\r\n\r\n                        refreshUniformsPhong( m_uniforms, material );\r\n\r\n                    }\r\n\r\n                } else if ( material.isMeshStandardMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n\r\n                    if ( material.isMeshPhysicalMaterial ) {\r\n\r\n                        refreshUniformsPhysical( m_uniforms, material );\r\n\r\n                    } else {\r\n\r\n                        refreshUniformsStandard( m_uniforms, material );\r\n\r\n                    }\r\n\r\n                } else if ( material.isMeshDepthMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsDepth( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshDistanceMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsDistance( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshNormalMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsNormal( m_uniforms, material );\r\n\r\n                } else if ( material.isLineBasicMaterial ) {\r\n\r\n                    refreshUniformsLine( m_uniforms, material );\r\n\r\n                    if ( material.isLineDashedMaterial ) {\r\n\r\n                        refreshUniformsDash( m_uniforms, material );\r\n\r\n                    }\r\n\r\n                } else if ( material.isPointsMaterial ) {\r\n\r\n                    refreshUniformsPoints( m_uniforms, material );\r\n\r\n                } else if ( material.isShadowMaterial ) {\r\n\r\n                    m_uniforms.color.value = material.color;\r\n                    m_uniforms.opacity.value = material.opacity;\r\n\r\n                }\r\n\r\n                // RectAreaLight Texture\r\n                // TODO (mrdoob): Find a nicer implementation\r\n\r\n                if ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\r\n                if ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\r\n\r\n                WebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\r\n\r\n            }\r\n\r\n            if ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\r\n\r\n                WebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\r\n                material.uniformsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            // common matrices\r\n\r\n            p_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\r\n            p_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\r\n            p_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\r\n\r\n            return program;\r\n\r\n        }\r\n\r\n        // Uniforms (refresh uniforms objects)\r\n\r\n        function refreshUniformsCommon( uniforms, material ) {\r\n\r\n            uniforms.opacity.value = material.opacity;\r\n\r\n            if ( material.color ) {\r\n\r\n                uniforms.diffuse.value = material.color;\r\n\r\n            }\r\n\r\n            if ( material.emissive ) {\r\n\r\n                uniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n            }\r\n\r\n            if ( material.map ) {\r\n\r\n                uniforms.map.value = material.map;\r\n\r\n            }\r\n\r\n            if ( material.alphaMap ) {\r\n\r\n                uniforms.alphaMap.value = material.alphaMap;\r\n\r\n            }\r\n\r\n            if ( material.specularMap ) {\r\n\r\n                uniforms.specularMap.value = material.specularMap;\r\n\r\n            }\r\n\r\n            if ( material.envMap ) {\r\n\r\n                uniforms.envMap.value = material.envMap;\r\n\r\n                // don't flip CubeTexture envMaps, flip everything else:\r\n                //  WebGLRenderTargetCube will be flipped for backwards compatibility\r\n                //  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\r\n                // this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\r\n                uniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\r\n\r\n                uniforms.reflectivity.value = material.reflectivity;\r\n                uniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n                uniforms.maxMipLevel.value = properties.get( material.envMap ).__maxMipLevel;\r\n\r\n            }\r\n\r\n            if ( material.lightMap ) {\r\n\r\n                uniforms.lightMap.value = material.lightMap;\r\n                uniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n            }\r\n\r\n            if ( material.aoMap ) {\r\n\r\n                uniforms.aoMap.value = material.aoMap;\r\n                uniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n            }\r\n\r\n            // uv repeat and offset setting priorities\r\n            // 1. color map\r\n            // 2. specular map\r\n            // 3. normal map\r\n            // 4. bump map\r\n            // 5. alpha map\r\n            // 6. emissive map\r\n\r\n            var uvScaleMap;\r\n\r\n            if ( material.map ) {\r\n\r\n                uvScaleMap = material.map;\r\n\r\n            } else if ( material.specularMap ) {\r\n\r\n                uvScaleMap = material.specularMap;\r\n\r\n            } else if ( material.displacementMap ) {\r\n\r\n                uvScaleMap = material.displacementMap;\r\n\r\n            } else if ( material.normalMap ) {\r\n\r\n                uvScaleMap = material.normalMap;\r\n\r\n            } else if ( material.bumpMap ) {\r\n\r\n                uvScaleMap = material.bumpMap;\r\n\r\n            } else if ( material.roughnessMap ) {\r\n\r\n                uvScaleMap = material.roughnessMap;\r\n\r\n            } else if ( material.metalnessMap ) {\r\n\r\n                uvScaleMap = material.metalnessMap;\r\n\r\n            } else if ( material.alphaMap ) {\r\n\r\n                uvScaleMap = material.alphaMap;\r\n\r\n            } else if ( material.emissiveMap ) {\r\n\r\n                uvScaleMap = material.emissiveMap;\r\n\r\n            }\r\n\r\n            if ( uvScaleMap !== undefined ) {\r\n\r\n                // backwards compatibility\r\n                if ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n                    uvScaleMap = uvScaleMap.texture;\r\n\r\n                }\r\n\r\n                if ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n                    uvScaleMap.updateMatrix();\r\n\r\n                }\r\n\r\n                uniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsLine( uniforms, material ) {\r\n\r\n            uniforms.diffuse.value = material.color;\r\n            uniforms.opacity.value = material.opacity;\r\n\r\n        }\r\n\r\n        function refreshUniformsDash( uniforms, material ) {\r\n\r\n            uniforms.dashSize.value = material.dashSize;\r\n            uniforms.totalSize.value = material.dashSize + material.gapSize;\r\n            uniforms.scale.value = material.scale;\r\n\r\n        }\r\n\r\n        function refreshUniformsPoints( uniforms, material ) {\r\n\r\n            uniforms.diffuse.value = material.color;\r\n            uniforms.opacity.value = material.opacity;\r\n            uniforms.size.value = material.size * _pixelRatio;\r\n            uniforms.scale.value = _height * 0.5;\r\n\r\n            uniforms.map.value = material.map;\r\n\r\n            if ( material.map !== null ) {\r\n\r\n                if ( material.map.matrixAutoUpdate === true ) {\r\n\r\n                    material.map.updateMatrix();\r\n\r\n                }\r\n\r\n                uniforms.uvTransform.value.copy( material.map.matrix );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsFog( uniforms, fog ) {\r\n\r\n            uniforms.fogColor.value = fog.color;\r\n\r\n            if ( fog.isFog ) {\r\n\r\n                uniforms.fogNear.value = fog.near;\r\n                uniforms.fogFar.value = fog.far;\r\n\r\n            } else if ( fog.isFogExp2 ) {\r\n\r\n                uniforms.fogDensity.value = fog.density;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsLambert( uniforms, material ) {\r\n\r\n            if ( material.emissiveMap ) {\r\n\r\n                uniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsPhong( uniforms, material ) {\r\n\r\n            uniforms.specular.value = material.specular;\r\n            uniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n            if ( material.emissiveMap ) {\r\n\r\n                uniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n            }\r\n\r\n            if ( material.bumpMap ) {\r\n\r\n                uniforms.bumpMap.value = material.bumpMap;\r\n                uniforms.bumpScale.value = material.bumpScale;\r\n                if ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n            }\r\n\r\n            if ( material.normalMap ) {\r\n\r\n                uniforms.normalMap.value = material.normalMap;\r\n                uniforms.normalScale.value.copy( material.normalScale );\r\n                if ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n            }\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsToon( uniforms, material ) {\r\n\r\n            refreshUniformsPhong( uniforms, material );\r\n\r\n            if ( material.gradientMap ) {\r\n\r\n                uniforms.gradientMap.value = material.gradientMap;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsStandard( uniforms, material ) {\r\n\r\n            uniforms.roughness.value = material.roughness;\r\n            uniforms.metalness.value = material.metalness;\r\n\r\n            if ( material.roughnessMap ) {\r\n\r\n                uniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n            }\r\n\r\n            if ( material.metalnessMap ) {\r\n\r\n                uniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n            }\r\n\r\n            if ( material.emissiveMap ) {\r\n\r\n                uniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n            }\r\n\r\n            if ( material.bumpMap ) {\r\n\r\n                uniforms.bumpMap.value = material.bumpMap;\r\n                uniforms.bumpScale.value = material.bumpScale;\r\n                if ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n            }\r\n\r\n            if ( material.normalMap ) {\r\n\r\n                uniforms.normalMap.value = material.normalMap;\r\n                uniforms.normalScale.value.copy( material.normalScale );\r\n                if ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n            }\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n            if ( material.envMap ) {\r\n\r\n                //uniforms.envMap.value = material.envMap; // part of uniforms common\r\n                uniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsPhysical( uniforms, material ) {\r\n\r\n            uniforms.clearCoat.value = material.clearCoat;\r\n            uniforms.clearCoatRoughness.value = material.clearCoatRoughness;\r\n\r\n            refreshUniformsStandard( uniforms, material );\r\n\r\n        }\r\n\r\n        function refreshUniformsDepth( uniforms, material ) {\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsDistance( uniforms, material ) {\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n            uniforms.referencePosition.value.copy( material.referencePosition );\r\n            uniforms.nearDistance.value = material.nearDistance;\r\n            uniforms.farDistance.value = material.farDistance;\r\n\r\n        }\r\n\r\n        function refreshUniformsNormal( uniforms, material ) {\r\n\r\n            if ( material.bumpMap ) {\r\n\r\n                uniforms.bumpMap.value = material.bumpMap;\r\n                uniforms.bumpScale.value = material.bumpScale;\r\n                if ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n            }\r\n\r\n            if ( material.normalMap ) {\r\n\r\n                uniforms.normalMap.value = material.normalMap;\r\n                uniforms.normalScale.value.copy( material.normalScale );\r\n                if ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n            }\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n        function markUniformsLightsNeedsUpdate( uniforms, value ) {\r\n\r\n            uniforms.ambientLightColor.needsUpdate = value;\r\n\r\n            uniforms.directionalLights.needsUpdate = value;\r\n            uniforms.pointLights.needsUpdate = value;\r\n            uniforms.spotLights.needsUpdate = value;\r\n            uniforms.rectAreaLights.needsUpdate = value;\r\n            uniforms.hemisphereLights.needsUpdate = value;\r\n\r\n        }\r\n\r\n        // Textures\r\n\r\n        function allocTextureUnit() {\r\n\r\n            var textureUnit = _usedTextureUnits;\r\n\r\n            if ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n            }\r\n\r\n            _usedTextureUnits += 1;\r\n\r\n            return textureUnit;\r\n\r\n        }\r\n\r\n        this.allocTextureUnit = allocTextureUnit;\r\n\r\n        // this.setTexture2D = setTexture2D;\r\n        this.setTexture2D = ( function () {\r\n\r\n            var warned = false;\r\n\r\n            // backwards compatibility: peel texture.texture\r\n            return function setTexture2D( texture, slot ) {\r\n\r\n                if ( texture && texture.isWebGLRenderTarget ) {\r\n\r\n                    if ( ! warned ) {\r\n\r\n                        console.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\r\n                        warned = true;\r\n\r\n                    }\r\n\r\n                    texture = texture.texture;\r\n\r\n                }\r\n\r\n                textures.setTexture2D( texture, slot );\r\n\r\n            };\r\n\r\n        }() );\r\n\r\n        this.setTexture = ( function () {\r\n\r\n            var warned = false;\r\n\r\n            return function setTexture( texture, slot ) {\r\n\r\n                if ( ! warned ) {\r\n\r\n                    console.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\r\n                    warned = true;\r\n\r\n                }\r\n\r\n                textures.setTexture2D( texture, slot );\r\n\r\n            };\r\n\r\n        }() );\r\n\r\n        this.setTextureCube = ( function () {\r\n\r\n            var warned = false;\r\n\r\n            return function setTextureCube( texture, slot ) {\r\n\r\n                // backwards compatibility: peel texture.texture\r\n                if ( texture && texture.isWebGLRenderTargetCube ) {\r\n\r\n                    if ( ! warned ) {\r\n\r\n                        console.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\r\n                        warned = true;\r\n\r\n                    }\r\n\r\n                    texture = texture.texture;\r\n\r\n                }\r\n\r\n                // currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\r\n                // TODO: unify these code paths\r\n                if ( ( texture && texture.isCubeTexture ) ||\r\n                    ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n                    // CompressedTexture can have Array in image :/\r\n\r\n                    // this function alone should take care of cube textures\r\n                    textures.setTextureCube( texture, slot );\r\n\r\n                } else {\r\n\r\n                    // assumed: texture property of THREE.WebGLRenderTargetCube\r\n\r\n                    textures.setTextureCubeDynamic( texture, slot );\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() );\r\n\r\n        //\r\n\r\n        this.setFramebuffer = function ( value ) {\r\n\r\n            _framebuffer = value;\r\n\r\n        };\r\n\r\n        this.getRenderTarget = function () {\r\n\r\n            return _currentRenderTarget;\r\n\r\n        };\r\n\r\n        this.setRenderTarget = function ( renderTarget ) {\r\n\r\n            _currentRenderTarget = renderTarget;\r\n\r\n            if ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n                textures.setupRenderTarget( renderTarget );\r\n\r\n            }\r\n\r\n            var framebuffer = _framebuffer;\r\n            var isCube = false;\r\n\r\n            if ( renderTarget ) {\r\n\r\n                var __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n                if ( renderTarget.isWebGLRenderTargetCube ) {\r\n\r\n                    framebuffer = __webglFramebuffer[ renderTarget.activeCubeFace ];\r\n                    isCube = true;\r\n\r\n                } else {\r\n\r\n                    framebuffer = __webglFramebuffer;\r\n\r\n                }\r\n\r\n                _currentViewport.copy( renderTarget.viewport );\r\n                _currentScissor.copy( renderTarget.scissor );\r\n                _currentScissorTest = renderTarget.scissorTest;\r\n\r\n            } else {\r\n\r\n                _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\r\n                _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\r\n                _currentScissorTest = _scissorTest;\r\n\r\n            }\r\n\r\n            if ( _currentFramebuffer !== framebuffer ) {\r\n\r\n                _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n                _currentFramebuffer = framebuffer;\r\n\r\n            }\r\n\r\n            state.viewport( _currentViewport );\r\n            state.scissor( _currentScissor );\r\n            state.setScissorTest( _currentScissorTest );\r\n\r\n            if ( isCube ) {\r\n\r\n                var textureProperties = properties.get( renderTarget.texture );\r\n                _gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\r\n\r\n            if ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\r\n\r\n                console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n                return;\r\n\r\n            }\r\n\r\n            var framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n            if ( framebuffer ) {\r\n\r\n                var restore = false;\r\n\r\n                if ( framebuffer !== _currentFramebuffer ) {\r\n\r\n                    _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n                    restore = true;\r\n\r\n                }\r\n\r\n                try {\r\n\r\n                    var texture = renderTarget.texture;\r\n                    var textureFormat = texture.format;\r\n                    var textureType = texture.type;\r\n\r\n                    if ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\r\n\r\n                        console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    if ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\r\n                        ! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\r\n                        ! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\r\n\r\n                        console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    if ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n                        // the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\r\n\r\n                        if ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\r\n\r\n                            _gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n                    }\r\n\r\n                } finally {\r\n\r\n                    if ( restore ) {\r\n\r\n                        _gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.copyFramebufferToTexture = function ( position, texture, level ) {\r\n\r\n            var width = texture.image.width;\r\n            var height = texture.image.height;\r\n            var glFormat = utils.convert( texture.format );\r\n\r\n            this.setTexture2D( texture, 0 );\r\n\r\n            _gl.copyTexImage2D( _gl.TEXTURE_2D, level || 0, glFormat, position.x, position.y, width, height, 0 );\r\n\r\n        };\r\n\r\n        this.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\r\n\r\n            var width = srcTexture.image.width;\r\n            var height = srcTexture.image.height;\r\n            var glFormat = utils.convert( dstTexture.format );\r\n            var glType = utils.convert( dstTexture.type );\r\n\r\n            this.setTexture2D( dstTexture, 0 );\r\n\r\n            if ( srcTexture.isDataTexture ) {\r\n\r\n                _gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\r\n\r\n            } else {\r\n\r\n                _gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, glFormat, glType, srcTexture.image );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function FogExp2( color, density ) {\r\n\r\n        this.name = '';\r\n\r\n        this.color = new Color( color );\r\n        this.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n    }\r\n\r\n    FogExp2.prototype.isFogExp2 = true;\r\n\r\n    FogExp2.prototype.clone = function () {\r\n\r\n        return new FogExp2( this.color, this.density );\r\n\r\n    };\r\n\r\n    FogExp2.prototype.toJSON = function ( /* meta */ ) {\r\n\r\n        return {\r\n            type: 'FogExp2',\r\n            color: this.color.getHex(),\r\n            density: this.density\r\n        };\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Fog( color, near, far ) {\r\n\r\n        this.name = '';\r\n\r\n        this.color = new Color( color );\r\n\r\n        this.near = ( near !== undefined ) ? near : 1;\r\n        this.far = ( far !== undefined ) ? far : 1000;\r\n\r\n    }\r\n\r\n    Fog.prototype.isFog = true;\r\n\r\n    Fog.prototype.clone = function () {\r\n\r\n        return new Fog( this.color, this.near, this.far );\r\n\r\n    };\r\n\r\n    Fog.prototype.toJSON = function ( /* meta */ ) {\r\n\r\n        return {\r\n            type: 'Fog',\r\n            color: this.color.getHex(),\r\n            near: this.near,\r\n            far: this.far\r\n        };\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Scene() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Scene';\r\n\r\n        this.background = null;\r\n        this.fog = null;\r\n        this.overrideMaterial = null;\r\n\r\n        this.autoUpdate = true; // checked by the renderer\r\n\r\n    }\r\n\r\n    Scene.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Scene,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Object3D.prototype.copy.call( this, source, recursive );\r\n\r\n            if ( source.background !== null ) this.background = source.background.clone();\r\n            if ( source.fog !== null ) this.fog = source.fog.clone();\r\n            if ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n            this.autoUpdate = source.autoUpdate;\r\n            this.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            if ( this.background !== null ) data.object.background = this.background.toJSON( meta );\r\n            if ( this.fog !== null ) data.object.fog = this.fog.toJSON();\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *\tuvOffset: new THREE.Vector2(),\r\n\t *\tuvScale: new THREE.Vector2()\r\n\t * }\r\n     */\r\n\r\n    function SpriteMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'SpriteMaterial';\r\n\r\n        this.color = new Color( 0xffffff );\r\n        this.map = null;\r\n\r\n        this.rotation = 0;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    SpriteMaterial.prototype = Object.create( Material.prototype );\r\n    SpriteMaterial.prototype.constructor = SpriteMaterial;\r\n    SpriteMaterial.prototype.isSpriteMaterial = true;\r\n\r\n    SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n        this.map = source.map;\r\n\r\n        this.rotation = source.rotation;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Sprite( material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Sprite';\r\n\r\n        this.material = ( material !== undefined ) ? material : new SpriteMaterial();\r\n\r\n        this.center = new Vector2( 0.5, 0.5 );\r\n\r\n    }\r\n\r\n    Sprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Sprite,\r\n\r\n        isSprite: true,\r\n\r\n        raycast: ( function () {\r\n\r\n            var intersectPoint = new Vector3();\r\n            var worldPosition = new Vector3();\r\n            var worldScale = new Vector3();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                worldPosition.setFromMatrixPosition( this.matrixWorld );\r\n                raycaster.ray.closestPointToPoint( worldPosition, intersectPoint );\r\n\r\n                worldScale.setFromMatrixScale( this.matrixWorld );\r\n                var guessSizeSq = worldScale.x * worldScale.y / 4;\r\n\r\n                if ( worldPosition.distanceToSquared( intersectPoint ) > guessSizeSq ) return;\r\n\r\n                var distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n                if ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n                intersects.push( {\r\n\r\n                    distance: distance,\r\n                    point: intersectPoint.clone(),\r\n                    face: null,\r\n                    object: this\r\n\r\n                } );\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.material ).copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source );\r\n\r\n            if ( source.center !== undefined ) this.center.copy( source.center );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LOD() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'LOD';\r\n\r\n        Object.defineProperties( this, {\r\n            levels: {\r\n                enumerable: true,\r\n                value: []\r\n            }\r\n        } );\r\n\r\n    }\r\n\r\n    LOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: LOD,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source, false );\r\n\r\n            var levels = source.levels;\r\n\r\n            for ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n                var level = levels[ i ];\r\n\r\n                this.addLevel( level.object.clone(), level.distance );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addLevel: function ( object, distance ) {\r\n\r\n            if ( distance === undefined ) distance = 0;\r\n\r\n            distance = Math.abs( distance );\r\n\r\n            var levels = this.levels;\r\n\r\n            for ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n                if ( distance < levels[ l ].distance ) {\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            levels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n            this.add( object );\r\n\r\n        },\r\n\r\n        getObjectForDistance: function ( distance ) {\r\n\r\n            var levels = this.levels;\r\n\r\n            for ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n                if ( distance < levels[ i ].distance ) {\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return levels[ i - 1 ].object;\r\n\r\n        },\r\n\r\n        raycast: ( function () {\r\n\r\n            var matrixPosition = new Vector3();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                matrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n                var distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n                this.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        update: function () {\r\n\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            return function update( camera ) {\r\n\r\n                var levels = this.levels;\r\n\r\n                if ( levels.length > 1 ) {\r\n\r\n                    v1.setFromMatrixPosition( camera.matrixWorld );\r\n                    v2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n                    var distance = v1.distanceTo( v2 );\r\n\r\n                    levels[ 0 ].object.visible = true;\r\n\r\n                    for ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n                        if ( distance >= levels[ i ].distance ) {\r\n\r\n                            levels[ i - 1 ].object.visible = false;\r\n                            levels[ i ].object.visible = true;\r\n\r\n                        } else {\r\n\r\n                            break;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    for ( ; i < l; i ++ ) {\r\n\r\n                        levels[ i ].object.visible = false;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.levels = [];\r\n\r\n            var levels = this.levels;\r\n\r\n            for ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n                var level = levels[ i ];\r\n\r\n                data.object.levels.push( {\r\n                    object: level.object.uuid,\r\n                    distance: level.distance\r\n                } );\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author michael guerrero / http://realitymeltdown.com\r\n     * @author ikerr / http://verold.com\r\n     */\r\n\r\n    function Skeleton( bones, boneInverses ) {\r\n\r\n        // copy the bone array\r\n\r\n        bones = bones || [];\r\n\r\n        this.bones = bones.slice( 0 );\r\n        this.boneMatrices = new Float32Array( this.bones.length * 16 );\r\n\r\n        // use the supplied bone inverses or calculate the inverses\r\n\r\n        if ( boneInverses === undefined ) {\r\n\r\n            this.calculateInverses();\r\n\r\n        } else {\r\n\r\n            if ( this.bones.length === boneInverses.length ) {\r\n\r\n                this.boneInverses = boneInverses.slice( 0 );\r\n\r\n            } else {\r\n\r\n                console.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\r\n\r\n                this.boneInverses = [];\r\n\r\n                for ( var i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                    this.boneInverses.push( new Matrix4() );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Skeleton.prototype, {\r\n\r\n        calculateInverses: function () {\r\n\r\n            this.boneInverses = [];\r\n\r\n            for ( var i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                var inverse = new Matrix4();\r\n\r\n                if ( this.bones[ i ] ) {\r\n\r\n                    inverse.getInverse( this.bones[ i ].matrixWorld );\r\n\r\n                }\r\n\r\n                this.boneInverses.push( inverse );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        pose: function () {\r\n\r\n            var bone, i, il;\r\n\r\n            // recover the bind-time world matrices\r\n\r\n            for ( i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                bone = this.bones[ i ];\r\n\r\n                if ( bone ) {\r\n\r\n                    bone.matrixWorld.getInverse( this.boneInverses[ i ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // compute the local matrices, positions, rotations and scales\r\n\r\n            for ( i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                bone = this.bones[ i ];\r\n\r\n                if ( bone ) {\r\n\r\n                    if ( bone.parent && bone.parent.isBone ) {\r\n\r\n                        bone.matrix.getInverse( bone.parent.matrixWorld );\r\n                        bone.matrix.multiply( bone.matrixWorld );\r\n\r\n                    } else {\r\n\r\n                        bone.matrix.copy( bone.matrixWorld );\r\n\r\n                    }\r\n\r\n                    bone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        update: ( function () {\r\n\r\n            var offsetMatrix = new Matrix4();\r\n            var identityMatrix = new Matrix4();\r\n\r\n            return function update() {\r\n\r\n                var bones = this.bones;\r\n                var boneInverses = this.boneInverses;\r\n                var boneMatrices = this.boneMatrices;\r\n                var boneTexture = this.boneTexture;\r\n\r\n                // flatten bone matrices to array\r\n\r\n                for ( var i = 0, il = bones.length; i < il; i ++ ) {\r\n\r\n                    // compute the offset between the current and the original transform\r\n\r\n                    var matrix = bones[ i ] ? bones[ i ].matrixWorld : identityMatrix;\r\n\r\n                    offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\r\n                    offsetMatrix.toArray( boneMatrices, i * 16 );\r\n\r\n                }\r\n\r\n                if ( boneTexture !== undefined ) {\r\n\r\n                    boneTexture.needsUpdate = true;\r\n\r\n                }\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        clone: function () {\r\n\r\n            return new Skeleton( this.bones, this.boneInverses );\r\n\r\n        },\r\n\r\n        getBoneByName: function ( name ) {\r\n\r\n            for ( var i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                var bone = this.bones[ i ];\r\n\r\n                if ( bone.name === name ) {\r\n\r\n                    return bone;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return undefined;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author ikerr / http://verold.com\r\n     */\r\n\r\n    function Bone() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Bone';\r\n\r\n    }\r\n\r\n    Bone.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Bone,\r\n\r\n        isBone: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author ikerr / http://verold.com\r\n     */\r\n\r\n    function SkinnedMesh( geometry, material ) {\r\n\r\n        Mesh.call( this, geometry, material );\r\n\r\n        this.type = 'SkinnedMesh';\r\n\r\n        this.bindMode = 'attached';\r\n        this.bindMatrix = new Matrix4();\r\n        this.bindMatrixInverse = new Matrix4();\r\n\r\n        var bones = this.initBones();\r\n        var skeleton = new Skeleton( bones );\r\n\r\n        this.bind( skeleton, this.matrixWorld );\r\n\r\n        this.normalizeSkinWeights();\r\n\r\n    }\r\n\r\n    SkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n        constructor: SkinnedMesh,\r\n\r\n        isSkinnedMesh: true,\r\n\r\n        initBones: function () {\r\n\r\n            var bones = [], bone, gbone;\r\n            var i, il;\r\n\r\n            if ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n                // first, create array of 'Bone' objects from geometry data\r\n\r\n                for ( i = 0, il = this.geometry.bones.length; i < il; i ++ ) {\r\n\r\n                    gbone = this.geometry.bones[ i ];\r\n\r\n                    // create new 'Bone' object\r\n\r\n                    bone = new Bone();\r\n                    bones.push( bone );\r\n\r\n                    // apply values\r\n\r\n                    bone.name = gbone.name;\r\n                    bone.position.fromArray( gbone.pos );\r\n                    bone.quaternion.fromArray( gbone.rotq );\r\n                    if ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n                }\r\n\r\n                // second, create bone hierarchy\r\n\r\n                for ( i = 0, il = this.geometry.bones.length; i < il; i ++ ) {\r\n\r\n                    gbone = this.geometry.bones[ i ];\r\n\r\n                    if ( ( gbone.parent !== - 1 ) && ( gbone.parent !== null ) && ( bones[ gbone.parent ] !== undefined ) ) {\r\n\r\n                        // subsequent bones in the hierarchy\r\n\r\n                        bones[ gbone.parent ].add( bones[ i ] );\r\n\r\n                    } else {\r\n\r\n                        // topmost bone, immediate child of the skinned mesh\r\n\r\n                        this.add( bones[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // now the bones are part of the scene graph and children of the skinned mesh.\r\n            // let's update the corresponding matrices\r\n\r\n            this.updateMatrixWorld( true );\r\n\r\n            return bones;\r\n\r\n        },\r\n\r\n        bind: function ( skeleton, bindMatrix ) {\r\n\r\n            this.skeleton = skeleton;\r\n\r\n            if ( bindMatrix === undefined ) {\r\n\r\n                this.updateMatrixWorld( true );\r\n\r\n                this.skeleton.calculateInverses();\r\n\r\n                bindMatrix = this.matrixWorld;\r\n\r\n            }\r\n\r\n            this.bindMatrix.copy( bindMatrix );\r\n            this.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n        },\r\n\r\n        pose: function () {\r\n\r\n            this.skeleton.pose();\r\n\r\n        },\r\n\r\n        normalizeSkinWeights: function () {\r\n\r\n            var scale, i;\r\n\r\n            if ( this.geometry && this.geometry.isGeometry ) {\r\n\r\n                for ( i = 0; i < this.geometry.skinWeights.length; i ++ ) {\r\n\r\n                    var sw = this.geometry.skinWeights[ i ];\r\n\r\n                    scale = 1.0 / sw.manhattanLength();\r\n\r\n                    if ( scale !== Infinity ) {\r\n\r\n                        sw.multiplyScalar( scale );\r\n\r\n                    } else {\r\n\r\n                        sw.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( this.geometry && this.geometry.isBufferGeometry ) {\r\n\r\n                var vec = new Vector4();\r\n\r\n                var skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n                for ( i = 0; i < skinWeight.count; i ++ ) {\r\n\r\n                    vec.x = skinWeight.getX( i );\r\n                    vec.y = skinWeight.getY( i );\r\n                    vec.z = skinWeight.getZ( i );\r\n                    vec.w = skinWeight.getW( i );\r\n\r\n                    scale = 1.0 / vec.manhattanLength();\r\n\r\n                    if ( scale !== Infinity ) {\r\n\r\n                        vec.multiplyScalar( scale );\r\n\r\n                    } else {\r\n\r\n                        vec.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n                    }\r\n\r\n                    skinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        updateMatrixWorld: function ( force ) {\r\n\r\n            Mesh.prototype.updateMatrixWorld.call( this, force );\r\n\r\n            if ( this.bindMode === 'attached' ) {\r\n\r\n                this.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n            } else if ( this.bindMode === 'detached' ) {\r\n\r\n                this.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n            } else {\r\n\r\n                console.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *  linecap: \"round\",\r\n\t *  linejoin: \"round\"\r\n\t * }\r\n     */\r\n\r\n    function LineBasicMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'LineBasicMaterial';\r\n\r\n        this.color = new Color( 0xffffff );\r\n\r\n        this.linewidth = 1;\r\n        this.linecap = 'round';\r\n        this.linejoin = 'round';\r\n\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    LineBasicMaterial.prototype = Object.create( Material.prototype );\r\n    LineBasicMaterial.prototype.constructor = LineBasicMaterial;\r\n\r\n    LineBasicMaterial.prototype.isLineBasicMaterial = true;\r\n\r\n    LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.linewidth = source.linewidth;\r\n        this.linecap = source.linecap;\r\n        this.linejoin = source.linejoin;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Line( geometry, material, mode ) {\r\n\r\n        if ( mode === 1 ) {\r\n\r\n            console.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n            return new LineSegments( geometry, material );\r\n\r\n        }\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Line';\r\n\r\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n        this.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n    }\r\n\r\n    Line.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Line,\r\n\r\n        isLine: true,\r\n\r\n        computeLineDistances: ( function () {\r\n\r\n            var start = new Vector3();\r\n            var end = new Vector3();\r\n\r\n            return function computeLineDistances() {\r\n\r\n                var geometry = this.geometry;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    // we assume non-indexed geometry\r\n\r\n                    if ( geometry.index === null ) {\r\n\r\n                        var positionAttribute = geometry.attributes.position;\r\n                        var lineDistances = [ 0 ];\r\n\r\n                        for ( var i = 1, l = positionAttribute.count; i < l; i ++ ) {\r\n\r\n                            start.fromBufferAttribute( positionAttribute, i - 1 );\r\n                            end.fromBufferAttribute( positionAttribute, i );\r\n\r\n                            lineDistances[ i ] = lineDistances[ i - 1 ];\r\n                            lineDistances[ i ] += start.distanceTo( end );\r\n\r\n                        }\r\n\r\n                        geometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var lineDistances = geometry.lineDistances;\r\n\r\n                    lineDistances[ 0 ] = 0;\r\n\r\n                    for ( var i = 1, l = vertices.length; i < l; i ++ ) {\r\n\r\n                        lineDistances[ i ] = lineDistances[ i - 1 ];\r\n                        lineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        raycast: ( function () {\r\n\r\n            var inverseMatrix = new Matrix4();\r\n            var ray = new Ray();\r\n            var sphere = new Sphere();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                var precision = raycaster.linePrecision;\r\n                var precisionSq = precision * precision;\r\n\r\n                var geometry = this.geometry;\r\n                var matrixWorld = this.matrixWorld;\r\n\r\n                // Checking boundingSphere distance to ray\r\n\r\n                if ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere );\r\n                sphere.applyMatrix4( matrixWorld );\r\n\r\n                if ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n                //\r\n\r\n                inverseMatrix.getInverse( matrixWorld );\r\n                ray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n                var vStart = new Vector3();\r\n                var vEnd = new Vector3();\r\n                var interSegment = new Vector3();\r\n                var interRay = new Vector3();\r\n                var step = ( this && this.isLineSegments ) ? 2 : 1;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    var index = geometry.index;\r\n                    var attributes = geometry.attributes;\r\n                    var positions = attributes.position.array;\r\n\r\n                    if ( index !== null ) {\r\n\r\n                        var indices = index.array;\r\n\r\n                        for ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n                            var a = indices[ i ];\r\n                            var b = indices[ i + 1 ];\r\n\r\n                            vStart.fromArray( positions, a * 3 );\r\n                            vEnd.fromArray( positions, b * 3 );\r\n\r\n                            var distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n                            if ( distSq > precisionSq ) continue;\r\n\r\n                            interRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n                            var distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n                            if ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n                            intersects.push( {\r\n\r\n                                distance: distance,\r\n                                // What do we want? intersection point on the ray or on the segment??\r\n                                // point: raycaster.ray.at( distance ),\r\n                                point: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n                                index: i,\r\n                                face: null,\r\n                                faceIndex: null,\r\n                                object: this\r\n\r\n                            } );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        for ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n                            vStart.fromArray( positions, 3 * i );\r\n                            vEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n                            var distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n                            if ( distSq > precisionSq ) continue;\r\n\r\n                            interRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n                            var distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n                            if ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n                            intersects.push( {\r\n\r\n                                distance: distance,\r\n                                // What do we want? intersection point on the ray or on the segment??\r\n                                // point: raycaster.ray.at( distance ),\r\n                                point: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n                                index: i,\r\n                                face: null,\r\n                                faceIndex: null,\r\n                                object: this\r\n\r\n                            } );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var nbVertices = vertices.length;\r\n\r\n                    for ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n                        var distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n                        if ( distSq > precisionSq ) continue;\r\n\r\n                        interRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n                        var distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n                        if ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n                        intersects.push( {\r\n\r\n                            distance: distance,\r\n                            // What do we want? intersection point on the ray or on the segment??\r\n                            // point: raycaster.ray.at( distance ),\r\n                            point: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n                            index: i,\r\n                            face: null,\r\n                            faceIndex: null,\r\n                            object: this\r\n\r\n                        } );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LineSegments( geometry, material ) {\r\n\r\n        Line.call( this, geometry, material );\r\n\r\n        this.type = 'LineSegments';\r\n\r\n    }\r\n\r\n    LineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n        constructor: LineSegments,\r\n\r\n        isLineSegments: true,\r\n\r\n        computeLineDistances: ( function () {\r\n\r\n            var start = new Vector3();\r\n            var end = new Vector3();\r\n\r\n            return function computeLineDistances() {\r\n\r\n                var geometry = this.geometry;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    // we assume non-indexed geometry\r\n\r\n                    if ( geometry.index === null ) {\r\n\r\n                        var positionAttribute = geometry.attributes.position;\r\n                        var lineDistances = [];\r\n\r\n                        for ( var i = 0, l = positionAttribute.count; i < l; i += 2 ) {\r\n\r\n                            start.fromBufferAttribute( positionAttribute, i );\r\n                            end.fromBufferAttribute( positionAttribute, i + 1 );\r\n\r\n                            lineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n                            lineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\r\n\r\n                        }\r\n\r\n                        geometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var lineDistances = geometry.lineDistances;\r\n\r\n                    for ( var i = 0, l = vertices.length; i < l; i += 2 ) {\r\n\r\n                        start.copy( vertices[ i ] );\r\n                        end.copy( vertices[ i + 1 ] );\r\n\r\n                        lineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n                        lineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }() )\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mgreter / http://github.com/mgreter\r\n     */\r\n\r\n    function LineLoop( geometry, material ) {\r\n\r\n        Line.call( this, geometry, material );\r\n\r\n        this.type = 'LineLoop';\r\n\r\n    }\r\n\r\n    LineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n        constructor: LineLoop,\r\n\r\n        isLineLoop: true,\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  size: <float>,\r\n\t *  sizeAttenuation: <bool>\r\n\t *\r\n\t *  morphTargets: <bool>\r\n\t * }\r\n     */\r\n\r\n    function PointsMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'PointsMaterial';\r\n\r\n        this.color = new Color( 0xffffff );\r\n\r\n        this.map = null;\r\n\r\n        this.size = 1;\r\n        this.sizeAttenuation = true;\r\n\r\n        this.morphTargets = false;\r\n\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    PointsMaterial.prototype = Object.create( Material.prototype );\r\n    PointsMaterial.prototype.constructor = PointsMaterial;\r\n\r\n    PointsMaterial.prototype.isPointsMaterial = true;\r\n\r\n    PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.map = source.map;\r\n\r\n        this.size = source.size;\r\n        this.sizeAttenuation = source.sizeAttenuation;\r\n\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Points( geometry, material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Points';\r\n\r\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n        this.material = material !== undefined ? material : new PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n    }\r\n\r\n    Points.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Points,\r\n\r\n        isPoints: true,\r\n\r\n        raycast: ( function () {\r\n\r\n            var inverseMatrix = new Matrix4();\r\n            var ray = new Ray();\r\n            var sphere = new Sphere();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                var object = this;\r\n                var geometry = this.geometry;\r\n                var matrixWorld = this.matrixWorld;\r\n                var threshold = raycaster.params.Points.threshold;\r\n\r\n                // Checking boundingSphere distance to ray\r\n\r\n                if ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere );\r\n                sphere.applyMatrix4( matrixWorld );\r\n                sphere.radius += threshold;\r\n\r\n                if ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n                //\r\n\r\n                inverseMatrix.getInverse( matrixWorld );\r\n                ray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n                var localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n                var localThresholdSq = localThreshold * localThreshold;\r\n                var position = new Vector3();\r\n                var intersectPoint = new Vector3();\r\n\r\n                function testPoint( point, index ) {\r\n\r\n                    var rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n                    if ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n                        ray.closestPointToPoint( point, intersectPoint );\r\n                        intersectPoint.applyMatrix4( matrixWorld );\r\n\r\n                        var distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n                        if ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n                        intersects.push( {\r\n\r\n                            distance: distance,\r\n                            distanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n                            point: intersectPoint.clone(),\r\n                            index: index,\r\n                            face: null,\r\n                            object: object\r\n\r\n                        } );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    var index = geometry.index;\r\n                    var attributes = geometry.attributes;\r\n                    var positions = attributes.position.array;\r\n\r\n                    if ( index !== null ) {\r\n\r\n                        var indices = index.array;\r\n\r\n                        for ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n                            var a = indices[ i ];\r\n\r\n                            position.fromArray( positions, a * 3 );\r\n\r\n                            testPoint( position, a );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        for ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n                            position.fromArray( positions, i * 3 );\r\n\r\n                            testPoint( position, i );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    var vertices = geometry.vertices;\r\n\r\n                    for ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n                        testPoint( vertices[ i ], i );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Group() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Group';\r\n\r\n    }\r\n\r\n    Group.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Group,\r\n\r\n        isGroup: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n        Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n        this.generateMipmaps = false;\r\n\r\n    }\r\n\r\n    VideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\r\n\r\n        constructor: VideoTexture,\r\n\r\n        isVideoTexture: true,\r\n\r\n        update: function () {\r\n\r\n            var video = this.image;\r\n\r\n            if ( video.readyState >= video.HAVE_CURRENT_DATA ) {\r\n\r\n                this.needsUpdate = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n        Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n        this.image = { width: width, height: height };\r\n        this.mipmaps = mipmaps;\r\n\r\n        // no flipping for cube textures\r\n        // (also flipping doesn't work for compressed textures )\r\n\r\n        this.flipY = false;\r\n\r\n        // can't generate mipmaps for compressed textures\r\n        // mips must be embedded in DDS files\r\n\r\n        this.generateMipmaps = false;\r\n\r\n    }\r\n\r\n    CompressedTexture.prototype = Object.create( Texture.prototype );\r\n    CompressedTexture.prototype.constructor = CompressedTexture;\r\n\r\n    CompressedTexture.prototype.isCompressedTexture = true;\r\n\r\n    /**\r\n     * @author Matt DesLauriers / @mattdesl\r\n     * @author atix / arthursilber.de\r\n     */\r\n\r\n    function DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\r\n\r\n        format = format !== undefined ? format : DepthFormat;\r\n\r\n        if ( format !== DepthFormat && format !== DepthStencilFormat ) {\r\n\r\n            throw new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\r\n\r\n        }\r\n\r\n        if ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\r\n        if ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\r\n\r\n        Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n        this.image = { width: width, height: height };\r\n\r\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n        this.flipY = false;\r\n        this.generateMipmaps\t= false;\r\n\r\n    }\r\n\r\n    DepthTexture.prototype = Object.create( Texture.prototype );\r\n    DepthTexture.prototype.constructor = DepthTexture;\r\n    DepthTexture.prototype.isDepthTexture = true;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function WireframeGeometry( geometry ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'WireframeGeometry';\r\n\r\n        // buffer\r\n\r\n        var vertices = [];\r\n\r\n        // helper variables\r\n\r\n        var i, j, l, o, ol;\r\n        var edge = [ 0, 0 ], edges = {}, e, edge1, edge2;\r\n        var key, keys = [ 'a', 'b', 'c' ];\r\n        var vertex;\r\n\r\n        // different logic for Geometry and BufferGeometry\r\n\r\n        if ( geometry && geometry.isGeometry ) {\r\n\r\n            // create a data structure that contains all edges without duplicates\r\n\r\n            var faces = geometry.faces;\r\n\r\n            for ( i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                for ( j = 0; j < 3; j ++ ) {\r\n\r\n                    edge1 = face[ keys[ j ] ];\r\n                    edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n                    edge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n                    edge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n                    key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n                    if ( edges[ key ] === undefined ) {\r\n\r\n                        edges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // generate vertices\r\n\r\n            for ( key in edges ) {\r\n\r\n                e = edges[ key ];\r\n\r\n                vertex = geometry.vertices[ e.index1 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                vertex = geometry.vertices[ e.index2 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n        } else if ( geometry && geometry.isBufferGeometry ) {\r\n\r\n            var position, indices, groups;\r\n            var group, start, count;\r\n            var index1, index2;\r\n\r\n            vertex = new Vector3();\r\n\r\n            if ( geometry.index !== null ) {\r\n\r\n                // indexed BufferGeometry\r\n\r\n                position = geometry.attributes.position;\r\n                indices = geometry.index;\r\n                groups = geometry.groups;\r\n\r\n                if ( groups.length === 0 ) {\r\n\r\n                    groups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\r\n\r\n                }\r\n\r\n                // create a data structure that contains all eges without duplicates\r\n\r\n                for ( o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n                    group = groups[ o ];\r\n\r\n                    start = group.start;\r\n                    count = group.count;\r\n\r\n                    for ( i = start, l = ( start + count ); i < l; i += 3 ) {\r\n\r\n                        for ( j = 0; j < 3; j ++ ) {\r\n\r\n                            edge1 = indices.getX( i + j );\r\n                            edge2 = indices.getX( i + ( j + 1 ) % 3 );\r\n                            edge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n                            edge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n                            key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n                            if ( edges[ key ] === undefined ) {\r\n\r\n                                edges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // generate vertices\r\n\r\n                for ( key in edges ) {\r\n\r\n                    e = edges[ key ];\r\n\r\n                    vertex.fromBufferAttribute( position, e.index1 );\r\n                    vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                    vertex.fromBufferAttribute( position, e.index2 );\r\n                    vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                // non-indexed BufferGeometry\r\n\r\n                position = geometry.attributes.position;\r\n\r\n                for ( i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\r\n\r\n                    for ( j = 0; j < 3; j ++ ) {\r\n\r\n                        // three edges per triangle, an edge is represented as (index1, index2)\r\n                        // e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\r\n\r\n                        index1 = 3 * i + j;\r\n                        vertex.fromBufferAttribute( position, index1 );\r\n                        vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                        index2 = 3 * i + ( ( j + 1 ) % 3 );\r\n                        vertex.fromBufferAttribute( position, index2 );\r\n                        vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n    }\r\n\r\n    WireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    WireframeGeometry.prototype.constructor = WireframeGeometry;\r\n\r\n    /**\r\n     * @author zz85 / https://github.com/zz85\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     * Parametric Surfaces Geometry\r\n     * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n     */\r\n\r\n    // ParametricGeometry\r\n\r\n    function ParametricGeometry( func, slices, stacks ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'ParametricGeometry';\r\n\r\n        this.parameters = {\r\n            func: func,\r\n            slices: slices,\r\n            stacks: stacks\r\n        };\r\n\r\n        this.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    ParametricGeometry.prototype = Object.create( Geometry.prototype );\r\n    ParametricGeometry.prototype.constructor = ParametricGeometry;\r\n\r\n    // ParametricBufferGeometry\r\n\r\n    function ParametricBufferGeometry( func, slices, stacks ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'ParametricBufferGeometry';\r\n\r\n        this.parameters = {\r\n            func: func,\r\n            slices: slices,\r\n            stacks: stacks\r\n        };\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        var EPS = 0.00001;\r\n\r\n        var normal = new Vector3();\r\n\r\n        var p0 = new Vector3(), p1 = new Vector3();\r\n        var pu = new Vector3(), pv = new Vector3();\r\n\r\n        var i, j;\r\n\r\n        if ( func.length < 3 ) {\r\n\r\n            console.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\r\n\r\n        }\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        var sliceCount = slices + 1;\r\n\r\n        for ( i = 0; i <= stacks; i ++ ) {\r\n\r\n            var v = i / stacks;\r\n\r\n            for ( j = 0; j <= slices; j ++ ) {\r\n\r\n                var u = j / slices;\r\n\r\n                // vertex\r\n\r\n                func( u, v, p0 );\r\n                vertices.push( p0.x, p0.y, p0.z );\r\n\r\n                // normal\r\n\r\n                // approximate tangent vectors via finite differences\r\n\r\n                if ( u - EPS >= 0 ) {\r\n\r\n                    func( u - EPS, v, p1 );\r\n                    pu.subVectors( p0, p1 );\r\n\r\n                } else {\r\n\r\n                    func( u + EPS, v, p1 );\r\n                    pu.subVectors( p1, p0 );\r\n\r\n                }\r\n\r\n                if ( v - EPS >= 0 ) {\r\n\r\n                    func( u, v - EPS, p1 );\r\n                    pv.subVectors( p0, p1 );\r\n\r\n                } else {\r\n\r\n                    func( u, v + EPS, p1 );\r\n                    pv.subVectors( p1, p0 );\r\n\r\n                }\r\n\r\n                // cross product of tangent vectors returns surface normal\r\n\r\n                normal.crossVectors( pu, pv ).normalize();\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( u, v );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate indices\r\n\r\n        for ( i = 0; i < stacks; i ++ ) {\r\n\r\n            for ( j = 0; j < slices; j ++ ) {\r\n\r\n                var a = i * sliceCount + j;\r\n                var b = i * sliceCount + j + 1;\r\n                var c = ( i + 1 ) * sliceCount + j + 1;\r\n                var d = ( i + 1 ) * sliceCount + j;\r\n\r\n                // faces one and two\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    ParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    ParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\r\n\r\n    /**\r\n     * @author clockworkgeek / https://github.com/clockworkgeek\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // PolyhedronGeometry\r\n\r\n    function PolyhedronGeometry( vertices, indices, radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'PolyhedronGeometry';\r\n\r\n        this.parameters = {\r\n            vertices: vertices,\r\n            indices: indices,\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    PolyhedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    PolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\r\n\r\n    // PolyhedronBufferGeometry\r\n\r\n    function PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'PolyhedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            vertices: vertices,\r\n            indices: indices,\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        radius = radius || 1;\r\n        detail = detail || 0;\r\n\r\n        // default buffer data\r\n\r\n        var vertexBuffer = [];\r\n        var uvBuffer = [];\r\n\r\n        // the subdivision creates the vertex buffer data\r\n\r\n        subdivide( detail );\r\n\r\n        // all vertices should lie on a conceptual sphere with a given radius\r\n\r\n        appplyRadius( radius );\r\n\r\n        // finally, create the uv data\r\n\r\n        generateUVs();\r\n\r\n        // build non-indexed geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\r\n\r\n        if ( detail === 0 ) {\r\n\r\n            this.computeVertexNormals(); // flat normals\r\n\r\n        } else {\r\n\r\n            this.normalizeNormals(); // smooth normals\r\n\r\n        }\r\n\r\n        // helper functions\r\n\r\n        function subdivide( detail ) {\r\n\r\n            var a = new Vector3();\r\n            var b = new Vector3();\r\n            var c = new Vector3();\r\n\r\n            // iterate over all faces and apply a subdivison with the given detail value\r\n\r\n            for ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n                // get the vertices of the face\r\n\r\n                getVertexByIndex( indices[ i + 0 ], a );\r\n                getVertexByIndex( indices[ i + 1 ], b );\r\n                getVertexByIndex( indices[ i + 2 ], c );\r\n\r\n                // perform subdivision\r\n\r\n                subdivideFace( a, b, c, detail );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function subdivideFace( a, b, c, detail ) {\r\n\r\n            var cols = Math.pow( 2, detail );\r\n\r\n            // we use this multidimensional array as a data structure for creating the subdivision\r\n\r\n            var v = [];\r\n\r\n            var i, j;\r\n\r\n            // construct all of the vertices for this subdivision\r\n\r\n            for ( i = 0; i <= cols; i ++ ) {\r\n\r\n                v[ i ] = [];\r\n\r\n                var aj = a.clone().lerp( c, i / cols );\r\n                var bj = b.clone().lerp( c, i / cols );\r\n\r\n                var rows = cols - i;\r\n\r\n                for ( j = 0; j <= rows; j ++ ) {\r\n\r\n                    if ( j === 0 && i === cols ) {\r\n\r\n                        v[ i ][ j ] = aj;\r\n\r\n                    } else {\r\n\r\n                        v[ i ][ j ] = aj.clone().lerp( bj, j / rows );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // construct all of the faces\r\n\r\n            for ( i = 0; i < cols; i ++ ) {\r\n\r\n                for ( j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n                    var k = Math.floor( j / 2 );\r\n\r\n                    if ( j % 2 === 0 ) {\r\n\r\n                        pushVertex( v[ i ][ k + 1 ] );\r\n                        pushVertex( v[ i + 1 ][ k ] );\r\n                        pushVertex( v[ i ][ k ] );\r\n\r\n                    } else {\r\n\r\n                        pushVertex( v[ i ][ k + 1 ] );\r\n                        pushVertex( v[ i + 1 ][ k + 1 ] );\r\n                        pushVertex( v[ i + 1 ][ k ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function appplyRadius( radius ) {\r\n\r\n            var vertex = new Vector3();\r\n\r\n            // iterate over the entire buffer and apply the radius to each vertex\r\n\r\n            for ( var i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n                vertex.x = vertexBuffer[ i + 0 ];\r\n                vertex.y = vertexBuffer[ i + 1 ];\r\n                vertex.z = vertexBuffer[ i + 2 ];\r\n\r\n                vertex.normalize().multiplyScalar( radius );\r\n\r\n                vertexBuffer[ i + 0 ] = vertex.x;\r\n                vertexBuffer[ i + 1 ] = vertex.y;\r\n                vertexBuffer[ i + 2 ] = vertex.z;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function generateUVs() {\r\n\r\n            var vertex = new Vector3();\r\n\r\n            for ( var i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n                vertex.x = vertexBuffer[ i + 0 ];\r\n                vertex.y = vertexBuffer[ i + 1 ];\r\n                vertex.z = vertexBuffer[ i + 2 ];\r\n\r\n                var u = azimuth( vertex ) / 2 / Math.PI + 0.5;\r\n                var v = inclination( vertex ) / Math.PI + 0.5;\r\n                uvBuffer.push( u, 1 - v );\r\n\r\n            }\r\n\r\n            correctUVs();\r\n\r\n            correctSeam();\r\n\r\n        }\r\n\r\n        function correctSeam() {\r\n\r\n            // handle case when face straddles the seam, see #3269\r\n\r\n            for ( var i = 0; i < uvBuffer.length; i += 6 ) {\r\n\r\n                // uv data of a single face\r\n\r\n                var x0 = uvBuffer[ i + 0 ];\r\n                var x1 = uvBuffer[ i + 2 ];\r\n                var x2 = uvBuffer[ i + 4 ];\r\n\r\n                var max = Math.max( x0, x1, x2 );\r\n                var min = Math.min( x0, x1, x2 );\r\n\r\n                // 0.9 is somewhat arbitrary\r\n\r\n                if ( max > 0.9 && min < 0.1 ) {\r\n\r\n                    if ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\r\n                    if ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\r\n                    if ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function pushVertex( vertex ) {\r\n\r\n            vertexBuffer.push( vertex.x, vertex.y, vertex.z );\r\n\r\n        }\r\n\r\n        function getVertexByIndex( index, vertex ) {\r\n\r\n            var stride = index * 3;\r\n\r\n            vertex.x = vertices[ stride + 0 ];\r\n            vertex.y = vertices[ stride + 1 ];\r\n            vertex.z = vertices[ stride + 2 ];\r\n\r\n        }\r\n\r\n        function correctUVs() {\r\n\r\n            var a = new Vector3();\r\n            var b = new Vector3();\r\n            var c = new Vector3();\r\n\r\n            var centroid = new Vector3();\r\n\r\n            var uvA = new Vector2();\r\n            var uvB = new Vector2();\r\n            var uvC = new Vector2();\r\n\r\n            for ( var i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\r\n\r\n                a.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\r\n                b.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\r\n                c.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\r\n\r\n                uvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\r\n                uvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\r\n                uvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\r\n\r\n                centroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\r\n\r\n                var azi = azimuth( centroid );\r\n\r\n                correctUV( uvA, j + 0, a, azi );\r\n                correctUV( uvB, j + 2, b, azi );\r\n                correctUV( uvC, j + 4, c, azi );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function correctUV( uv, stride, vector, azimuth ) {\r\n\r\n            if ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\r\n\r\n                uvBuffer[ stride ] = uv.x - 1;\r\n\r\n            }\r\n\r\n            if ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\r\n\r\n                uvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n        function azimuth( vector ) {\r\n\r\n            return Math.atan2( vector.z, - vector.x );\r\n\r\n        }\r\n\r\n\r\n        // Angle above the XZ plane.\r\n\r\n        function inclination( vector ) {\r\n\r\n            return Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    PolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    PolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\r\n\r\n    /**\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // TetrahedronGeometry\r\n\r\n    function TetrahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TetrahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TetrahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    TetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\r\n\r\n    // TetrahedronBufferGeometry\r\n\r\n    function TetrahedronBufferGeometry( radius, detail ) {\r\n\r\n        var vertices = [\r\n            1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\r\n        ];\r\n\r\n        var indices = [\r\n            2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'TetrahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    TetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    TetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // OctahedronGeometry\r\n\r\n    function OctahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'OctahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    OctahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    OctahedronGeometry.prototype.constructor = OctahedronGeometry;\r\n\r\n    // OctahedronBufferGeometry\r\n\r\n    function OctahedronBufferGeometry( radius, detail ) {\r\n\r\n        var vertices = [\r\n            1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\r\n            0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\r\n        ];\r\n\r\n        var indices = [\r\n            0, 2, 4,\t0, 4, 3,\t0, 3, 5,\r\n            0, 5, 2,\t1, 2, 5,\t1, 5, 3,\r\n            1, 3, 4,\t1, 4, 2\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'OctahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    OctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    OctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // IcosahedronGeometry\r\n\r\n    function IcosahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'IcosahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    IcosahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    IcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\r\n\r\n    // IcosahedronBufferGeometry\r\n\r\n    function IcosahedronBufferGeometry( radius, detail ) {\r\n\r\n        var t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n        var vertices = [\r\n            - 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\r\n            0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\r\n            t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\r\n        ];\r\n\r\n        var indices = [\r\n            0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\r\n            1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\r\n            3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\r\n            4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'IcosahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    IcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    IcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author Abe Pazos / https://hamoid.com\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // DodecahedronGeometry\r\n\r\n    function DodecahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'DodecahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    DodecahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    DodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\r\n\r\n    // DodecahedronBufferGeometry\r\n\r\n    function DodecahedronBufferGeometry( radius, detail ) {\r\n\r\n        var t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n        var r = 1 / t;\r\n\r\n        var vertices = [\r\n\r\n            // (1, 1, 1)\r\n            - 1, - 1, - 1,\t- 1, - 1, 1,\r\n            - 1, 1, - 1, - 1, 1, 1,\r\n            1, - 1, - 1, 1, - 1, 1,\r\n            1, 1, - 1, 1, 1, 1,\r\n\r\n            // (0, 1/, )\r\n            0, - r, - t, 0, - r, t,\r\n            0, r, - t, 0, r, t,\r\n\r\n            // (1/, , 0)\r\n            - r, - t, 0, - r, t, 0,\r\n            r, - t, 0, r, t, 0,\r\n\r\n            // (, 0, 1/)\r\n            - t, 0, - r, t, 0, - r,\r\n            - t, 0, r, t, 0, r\r\n        ];\r\n\r\n        var indices = [\r\n            3, 11, 7, \t3, 7, 15, \t3, 15, 13,\r\n            7, 19, 17, \t7, 17, 6, \t7, 6, 15,\r\n            17, 4, 8, \t17, 8, 10, \t17, 10, 6,\r\n            8, 0, 16, \t8, 16, 2, \t8, 2, 10,\r\n            0, 12, 1, \t0, 1, 18, \t0, 18, 16,\r\n            6, 10, 2, \t6, 2, 13, \t6, 13, 15,\r\n            2, 16, 18, \t2, 18, 3, \t2, 3, 13,\r\n            18, 1, 9, \t18, 9, 11, \t18, 11, 3,\r\n            4, 14, 12, \t4, 12, 0, \t4, 0, 8,\r\n            11, 9, 5, \t11, 5, 19, \t11, 19, 7,\r\n            19, 5, 14, \t19, 14, 4, \t19, 4, 17,\r\n            1, 12, 14, \t1, 14, 5, \t1, 5, 9\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'DodecahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    DodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    DodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author oosmoxiecode / https://github.com/oosmoxiecode\r\n     * @author WestLangley / https://github.com/WestLangley\r\n     * @author zz85 / https://github.com/zz85\r\n     * @author miningold / https://github.com/miningold\r\n     * @author jonobr1 / https://github.com/jonobr1\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     */\r\n\r\n    // TubeGeometry\r\n\r\n    function TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TubeGeometry';\r\n\r\n        this.parameters = {\r\n            path: path,\r\n            tubularSegments: tubularSegments,\r\n            radius: radius,\r\n            radialSegments: radialSegments,\r\n            closed: closed\r\n        };\r\n\r\n        if ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\r\n\r\n        var bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\r\n\r\n        // expose internals\r\n\r\n        this.tangents = bufferGeometry.tangents;\r\n        this.normals = bufferGeometry.normals;\r\n        this.binormals = bufferGeometry.binormals;\r\n\r\n        // create geometry\r\n\r\n        this.fromBufferGeometry( bufferGeometry );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TubeGeometry.prototype = Object.create( Geometry.prototype );\r\n    TubeGeometry.prototype.constructor = TubeGeometry;\r\n\r\n    // TubeBufferGeometry\r\n\r\n    function TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'TubeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            path: path,\r\n            tubularSegments: tubularSegments,\r\n            radius: radius,\r\n            radialSegments: radialSegments,\r\n            closed: closed\r\n        };\r\n\r\n        tubularSegments = tubularSegments || 64;\r\n        radius = radius || 1;\r\n        radialSegments = radialSegments || 8;\r\n        closed = closed || false;\r\n\r\n        var frames = path.computeFrenetFrames( tubularSegments, closed );\r\n\r\n        // expose internals\r\n\r\n        this.tangents = frames.tangents;\r\n        this.normals = frames.normals;\r\n        this.binormals = frames.binormals;\r\n\r\n        // helper variables\r\n\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n        var uv = new Vector2();\r\n        var P = new Vector3();\r\n\r\n        var i, j;\r\n\r\n        // buffer\r\n\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n        var indices = [];\r\n\r\n        // create buffer data\r\n\r\n        generateBufferData();\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        // functions\r\n\r\n        function generateBufferData() {\r\n\r\n            for ( i = 0; i < tubularSegments; i ++ ) {\r\n\r\n                generateSegment( i );\r\n\r\n            }\r\n\r\n            // if the geometry is not closed, generate the last row of vertices and normals\r\n            // at the regular position on the given path\r\n            //\r\n            // if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\r\n\r\n            generateSegment( ( closed === false ) ? tubularSegments : 0 );\r\n\r\n            // uvs are generated in a separate function.\r\n            // this makes it easy compute correct values for closed geometries\r\n\r\n            generateUVs();\r\n\r\n            // finally create faces\r\n\r\n            generateIndices();\r\n\r\n        }\r\n\r\n        function generateSegment( i ) {\r\n\r\n            // we use getPointAt to sample evenly distributed points from the given path\r\n\r\n            P = path.getPointAt( i / tubularSegments, P );\r\n\r\n            // retrieve corresponding normal and binormal\r\n\r\n            var N = frames.normals[ i ];\r\n            var B = frames.binormals[ i ];\r\n\r\n            // generate normals and vertices for the current segment\r\n\r\n            for ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n                var v = j / radialSegments * Math.PI * 2;\r\n\r\n                var sin = Math.sin( v );\r\n                var cos = - Math.cos( v );\r\n\r\n                // normal\r\n\r\n                normal.x = ( cos * N.x + sin * B.x );\r\n                normal.y = ( cos * N.y + sin * B.y );\r\n                normal.z = ( cos * N.z + sin * B.z );\r\n                normal.normalize();\r\n\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // vertex\r\n\r\n                vertex.x = P.x + radius * normal.x;\r\n                vertex.y = P.y + radius * normal.y;\r\n                vertex.z = P.z + radius * normal.z;\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function generateIndices() {\r\n\r\n            for ( j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n                for ( i = 1; i <= radialSegments; i ++ ) {\r\n\r\n                    var a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n                    var b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n                    var c = ( radialSegments + 1 ) * j + i;\r\n                    var d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n                    // faces\r\n\r\n                    indices.push( a, b, d );\r\n                    indices.push( b, c, d );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function generateUVs() {\r\n\r\n            for ( i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n                for ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n                    uv.x = i / tubularSegments;\r\n                    uv.y = j / radialSegments;\r\n\r\n                    uvs.push( uv.x, uv.y );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    TubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    TubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\r\n\r\n    /**\r\n     * @author oosmoxiecode\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     * based on http://www.blackpawn.com/texts/pqtorus/\r\n     */\r\n\r\n    // TorusKnotGeometry\r\n\r\n    function TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TorusKnotGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            tubularSegments: tubularSegments,\r\n            radialSegments: radialSegments,\r\n            p: p,\r\n            q: q\r\n        };\r\n\r\n        if ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n        this.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TorusKnotGeometry.prototype = Object.create( Geometry.prototype );\r\n    TorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\r\n\r\n    // TorusKnotBufferGeometry\r\n\r\n    function TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'TorusKnotBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            tubularSegments: tubularSegments,\r\n            radialSegments: radialSegments,\r\n            p: p,\r\n            q: q\r\n        };\r\n\r\n        radius = radius || 1;\r\n        tube = tube || 0.4;\r\n        tubularSegments = Math.floor( tubularSegments ) || 64;\r\n        radialSegments = Math.floor( radialSegments ) || 8;\r\n        p = p || 2;\r\n        q = q || 3;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var i, j;\r\n\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n\r\n        var P1 = new Vector3();\r\n        var P2 = new Vector3();\r\n\r\n        var B = new Vector3();\r\n        var T = new Vector3();\r\n        var N = new Vector3();\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n            // the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n            var u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n            // now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n            // these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n            calculatePositionOnCurve( u, p, q, radius, P1 );\r\n            calculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n            // calculate orthonormal basis\r\n\r\n            T.subVectors( P2, P1 );\r\n            N.addVectors( P2, P1 );\r\n            B.crossVectors( T, N );\r\n            N.crossVectors( B, T );\r\n\r\n            // normalize B, N. T can be ignored, we don't use it\r\n\r\n            B.normalize();\r\n            N.normalize();\r\n\r\n            for ( j = 0; j <= radialSegments; ++ j ) {\r\n\r\n                // now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n                // because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n                var v = j / radialSegments * Math.PI * 2;\r\n                var cx = - tube * Math.cos( v );\r\n                var cy = tube * Math.sin( v );\r\n\r\n                // now calculate the final vertex position.\r\n                // first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n                vertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n                vertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n                vertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\r\n                normal.subVectors( vertex, P1 ).normalize();\r\n\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( i / tubularSegments );\r\n                uvs.push( j / radialSegments );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate indices\r\n\r\n        for ( j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n            for ( i = 1; i <= radialSegments; i ++ ) {\r\n\r\n                // indices\r\n\r\n                var a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n                var b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n                var c = ( radialSegments + 1 ) * j + i;\r\n                var d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        // this function calculates the current position on the torus curve\r\n\r\n        function calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n            var cu = Math.cos( u );\r\n            var su = Math.sin( u );\r\n            var quOverP = q / p * u;\r\n            var cs = Math.cos( quOverP );\r\n\r\n            position.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n            position.y = radius * ( 2 + cs ) * su * 0.5;\r\n            position.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    TorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    TorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\r\n\r\n    /**\r\n     * @author oosmoxiecode\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // TorusGeometry\r\n\r\n    function TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TorusGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            radialSegments: radialSegments,\r\n            tubularSegments: tubularSegments,\r\n            arc: arc\r\n        };\r\n\r\n        this.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TorusGeometry.prototype = Object.create( Geometry.prototype );\r\n    TorusGeometry.prototype.constructor = TorusGeometry;\r\n\r\n    // TorusBufferGeometry\r\n\r\n    function TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'TorusBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            radialSegments: radialSegments,\r\n            tubularSegments: tubularSegments,\r\n            arc: arc\r\n        };\r\n\r\n        radius = radius || 1;\r\n        tube = tube || 0.4;\r\n        radialSegments = Math.floor( radialSegments ) || 8;\r\n        tubularSegments = Math.floor( tubularSegments ) || 6;\r\n        arc = arc || Math.PI * 2;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var center = new Vector3();\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n\r\n        var j, i;\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n            for ( i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n                var u = i / tubularSegments * arc;\r\n                var v = j / radialSegments * Math.PI * 2;\r\n\r\n                // vertex\r\n\r\n                vertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n                vertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n                vertex.z = tube * Math.sin( v );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                center.x = radius * Math.cos( u );\r\n                center.y = radius * Math.sin( u );\r\n                normal.subVectors( vertex, center ).normalize();\r\n\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( i / tubularSegments );\r\n                uvs.push( j / radialSegments );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate indices\r\n\r\n        for ( j = 1; j <= radialSegments; j ++ ) {\r\n\r\n            for ( i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n                // indices\r\n\r\n                var a = ( tubularSegments + 1 ) * j + i - 1;\r\n                var b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n                var c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n                var d = ( tubularSegments + 1 ) * j + i;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    TorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    TorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     * Port from https://github.com/mapbox/earcut (v2.1.2)\r\n     */\r\n\r\n    var Earcut = {\r\n\r\n        triangulate: function ( data, holeIndices, dim ) {\r\n\r\n            dim = dim || 2;\r\n\r\n            var hasHoles = holeIndices && holeIndices.length,\r\n                outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\r\n                outerNode = linkedList( data, 0, outerLen, dim, true ),\r\n                triangles = [];\r\n\r\n            if ( ! outerNode ) return triangles;\r\n\r\n            var minX, minY, maxX, maxY, x, y, invSize;\r\n\r\n            if ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\r\n\r\n            // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\r\n\r\n            if ( data.length > 80 * dim ) {\r\n\r\n                minX = maxX = data[ 0 ];\r\n                minY = maxY = data[ 1 ];\r\n\r\n                for ( var i = dim; i < outerLen; i += dim ) {\r\n\r\n                    x = data[ i ];\r\n                    y = data[ i + 1 ];\r\n                    if ( x < minX ) minX = x;\r\n                    if ( y < minY ) minY = y;\r\n                    if ( x > maxX ) maxX = x;\r\n                    if ( y > maxY ) maxY = y;\r\n\r\n                }\r\n\r\n                // minX, minY and invSize are later used to transform coords into integers for z-order calculation\r\n\r\n                invSize = Math.max( maxX - minX, maxY - minY );\r\n                invSize = invSize !== 0 ? 1 / invSize : 0;\r\n\r\n            }\r\n\r\n            earcutLinked( outerNode, triangles, dim, minX, minY, invSize );\r\n\r\n            return triangles;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // create a circular doubly linked list from polygon points in the specified winding order\r\n\r\n    function linkedList( data, start, end, dim, clockwise ) {\r\n\r\n        var i, last;\r\n\r\n        if ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\r\n\r\n            for ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n        } else {\r\n\r\n            for ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n        }\r\n\r\n        if ( last && equals( last, last.next ) ) {\r\n\r\n            removeNode( last );\r\n            last = last.next;\r\n\r\n        }\r\n\r\n        return last;\r\n\r\n    }\r\n\r\n    // eliminate colinear or duplicate points\r\n\r\n    function filterPoints( start, end ) {\r\n\r\n        if ( ! start ) return start;\r\n        if ( ! end ) end = start;\r\n\r\n        var p = start, again;\r\n\r\n        do {\r\n\r\n            again = false;\r\n\r\n            if ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\r\n\r\n                removeNode( p );\r\n                p = end = p.prev;\r\n                if ( p === p.next ) break;\r\n                again = true;\r\n\r\n            } else {\r\n\r\n                p = p.next;\r\n\r\n            }\r\n\r\n        } while ( again || p !== end );\r\n\r\n        return end;\r\n\r\n    }\r\n\r\n    // main ear slicing loop which triangulates a polygon (given as a linked list)\r\n\r\n    function earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\r\n\r\n        if ( ! ear ) return;\r\n\r\n        // interlink polygon nodes in z-order\r\n\r\n        if ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\r\n\r\n        var stop = ear, prev, next;\r\n\r\n        // iterate through ears, slicing them one by one\r\n\r\n        while ( ear.prev !== ear.next ) {\r\n\r\n            prev = ear.prev;\r\n            next = ear.next;\r\n\r\n            if ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\r\n\r\n                // cut off the triangle\r\n                triangles.push( prev.i / dim );\r\n                triangles.push( ear.i / dim );\r\n                triangles.push( next.i / dim );\r\n\r\n                removeNode( ear );\r\n\r\n                // skipping the next vertice leads to less sliver triangles\r\n                ear = next.next;\r\n                stop = next.next;\r\n\r\n                continue;\r\n\r\n            }\r\n\r\n            ear = next;\r\n\r\n            // if we looped through the whole remaining polygon and can't find any more ears\r\n\r\n            if ( ear === stop ) {\r\n\r\n                // try filtering points and slicing again\r\n\r\n                if ( ! pass ) {\r\n\r\n                    earcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\r\n\r\n                    // if this didn't work, try curing all small self-intersections locally\r\n\r\n                } else if ( pass === 1 ) {\r\n\r\n                    ear = cureLocalIntersections( ear, triangles, dim );\r\n                    earcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\r\n\r\n                    // as a last resort, try splitting the remaining polygon into two\r\n\r\n                } else if ( pass === 2 ) {\r\n\r\n                    splitEarcut( ear, triangles, dim, minX, minY, invSize );\r\n\r\n                }\r\n\r\n                break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // check whether a polygon node forms a valid ear with adjacent nodes\r\n\r\n    function isEar( ear ) {\r\n\r\n        var a = ear.prev,\r\n            b = ear,\r\n            c = ear.next;\r\n\r\n        if ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n        // now make sure we don't have other points inside the potential ear\r\n        var p = ear.next.next;\r\n\r\n        while ( p !== ear.prev ) {\r\n\r\n            if ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) {\r\n\r\n                return false;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    function isEarHashed( ear, minX, minY, invSize ) {\r\n\r\n        var a = ear.prev,\r\n            b = ear,\r\n            c = ear.next;\r\n\r\n        if ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n        // triangle bbox; min & max are calculated like this for speed\r\n\r\n        var minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\r\n            minTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\r\n            maxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\r\n            maxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\r\n\r\n        // z-order range for the current triangle bbox;\r\n\r\n        var minZ = zOrder( minTX, minTY, minX, minY, invSize ),\r\n            maxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\r\n\r\n        // first look for points inside the triangle in increasing z-order\r\n\r\n        var p = ear.nextZ;\r\n\r\n        while ( p && p.z <= maxZ ) {\r\n\r\n            if ( p !== ear.prev && p !== ear.next &&\r\n                pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n                area( p.prev, p, p.next ) >= 0 ) return false;\r\n            p = p.nextZ;\r\n\r\n        }\r\n\r\n        // then look for points in decreasing z-order\r\n\r\n        p = ear.prevZ;\r\n\r\n        while ( p && p.z >= minZ ) {\r\n\r\n            if ( p !== ear.prev && p !== ear.next &&\r\n                pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n                area( p.prev, p, p.next ) >= 0 ) return false;\r\n\r\n            p = p.prevZ;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    // go through all polygon nodes and cure small local self-intersections\r\n\r\n    function cureLocalIntersections( start, triangles, dim ) {\r\n\r\n        var p = start;\r\n\r\n        do {\r\n\r\n            var a = p.prev, b = p.next.next;\r\n\r\n            if ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\r\n\r\n                triangles.push( a.i / dim );\r\n                triangles.push( p.i / dim );\r\n                triangles.push( b.i / dim );\r\n\r\n                // remove two nodes involved\r\n\r\n                removeNode( p );\r\n                removeNode( p.next );\r\n\r\n                p = start = b;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== start );\r\n\r\n        return p;\r\n\r\n    }\r\n\r\n    // try splitting polygon into two and triangulate them independently\r\n\r\n    function splitEarcut( start, triangles, dim, minX, minY, invSize ) {\r\n\r\n        // look for a valid diagonal that divides the polygon into two\r\n\r\n        var a = start;\r\n\r\n        do {\r\n\r\n            var b = a.next.next;\r\n\r\n            while ( b !== a.prev ) {\r\n\r\n                if ( a.i !== b.i && isValidDiagonal( a, b ) ) {\r\n\r\n                    // split the polygon in two by the diagonal\r\n\r\n                    var c = splitPolygon( a, b );\r\n\r\n                    // filter colinear points around the cuts\r\n\r\n                    a = filterPoints( a, a.next );\r\n                    c = filterPoints( c, c.next );\r\n\r\n                    // run earcut on each half\r\n\r\n                    earcutLinked( a, triangles, dim, minX, minY, invSize );\r\n                    earcutLinked( c, triangles, dim, minX, minY, invSize );\r\n                    return;\r\n\r\n                }\r\n\r\n                b = b.next;\r\n\r\n            }\r\n\r\n            a = a.next;\r\n\r\n        } while ( a !== start );\r\n\r\n    }\r\n\r\n    // link every hole into the outer loop, producing a single-ring polygon without holes\r\n\r\n    function eliminateHoles( data, holeIndices, outerNode, dim ) {\r\n\r\n        var queue = [], i, len, start, end, list;\r\n\r\n        for ( i = 0, len = holeIndices.length; i < len; i ++ ) {\r\n\r\n            start = holeIndices[ i ] * dim;\r\n            end = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\r\n            list = linkedList( data, start, end, dim, false );\r\n            if ( list === list.next ) list.steiner = true;\r\n            queue.push( getLeftmost( list ) );\r\n\r\n        }\r\n\r\n        queue.sort( compareX );\r\n\r\n        // process holes from left to right\r\n\r\n        for ( i = 0; i < queue.length; i ++ ) {\r\n\r\n            eliminateHole( queue[ i ], outerNode );\r\n            outerNode = filterPoints( outerNode, outerNode.next );\r\n\r\n        }\r\n\r\n        return outerNode;\r\n\r\n    }\r\n\r\n    function compareX( a, b ) {\r\n\r\n        return a.x - b.x;\r\n\r\n    }\r\n\r\n    // find a bridge between vertices that connects hole with an outer ring and and link it\r\n\r\n    function eliminateHole( hole, outerNode ) {\r\n\r\n        outerNode = findHoleBridge( hole, outerNode );\r\n\r\n        if ( outerNode ) {\r\n\r\n            var b = splitPolygon( outerNode, hole );\r\n\r\n            filterPoints( b, b.next );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // David Eberly's algorithm for finding a bridge between hole and outer polygon\r\n\r\n    function findHoleBridge( hole, outerNode ) {\r\n\r\n        var p = outerNode,\r\n            hx = hole.x,\r\n            hy = hole.y,\r\n            qx = - Infinity,\r\n            m;\r\n\r\n        // find a segment intersected by a ray from the hole's leftmost point to the left;\r\n        // segment's endpoint with lesser x will be potential connection point\r\n\r\n        do {\r\n\r\n            if ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\r\n\r\n                var x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\r\n\r\n                if ( x <= hx && x > qx ) {\r\n\r\n                    qx = x;\r\n\r\n                    if ( x === hx ) {\r\n\r\n                        if ( hy === p.y ) return p;\r\n                        if ( hy === p.next.y ) return p.next;\r\n\r\n                    }\r\n\r\n                    m = p.x < p.next.x ? p : p.next;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== outerNode );\r\n\r\n        if ( ! m ) return null;\r\n\r\n        if ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\r\n\r\n        // look for points inside the triangle of hole point, segment intersection and endpoint;\r\n        // if there are no points found, we have a valid connection;\r\n        // otherwise choose the point of the minimum angle with the ray as connection point\r\n\r\n        var stop = m,\r\n            mx = m.x,\r\n            my = m.y,\r\n            tanMin = Infinity,\r\n            tan;\r\n\r\n        p = m.next;\r\n\r\n        while ( p !== stop ) {\r\n\r\n            if ( hx >= p.x && p.x >= mx && hx !== p.x &&\r\n                pointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\r\n\r\n                tan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\r\n\r\n                if ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\r\n\r\n                    m = p;\r\n                    tanMin = tan;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        }\r\n\r\n        return m;\r\n\r\n    }\r\n\r\n    // interlink polygon nodes in z-order\r\n\r\n    function indexCurve( start, minX, minY, invSize ) {\r\n\r\n        var p = start;\r\n\r\n        do {\r\n\r\n            if ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\r\n            p.prevZ = p.prev;\r\n            p.nextZ = p.next;\r\n            p = p.next;\r\n\r\n        } while ( p !== start );\r\n\r\n        p.prevZ.nextZ = null;\r\n        p.prevZ = null;\r\n\r\n        sortLinked( p );\r\n\r\n    }\r\n\r\n    // Simon Tatham's linked list merge sort algorithm\r\n    // http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\r\n\r\n    function sortLinked( list ) {\r\n\r\n        var i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;\r\n\r\n        do {\r\n\r\n            p = list;\r\n            list = null;\r\n            tail = null;\r\n            numMerges = 0;\r\n\r\n            while ( p ) {\r\n\r\n                numMerges ++;\r\n                q = p;\r\n                pSize = 0;\r\n\r\n                for ( i = 0; i < inSize; i ++ ) {\r\n\r\n                    pSize ++;\r\n                    q = q.nextZ;\r\n                    if ( ! q ) break;\r\n\r\n                }\r\n\r\n                qSize = inSize;\r\n\r\n                while ( pSize > 0 || ( qSize > 0 && q ) ) {\r\n\r\n                    if ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\r\n\r\n                        e = p;\r\n                        p = p.nextZ;\r\n                        pSize --;\r\n\r\n                    } else {\r\n\r\n                        e = q;\r\n                        q = q.nextZ;\r\n                        qSize --;\r\n\r\n                    }\r\n\r\n                    if ( tail ) tail.nextZ = e;\r\n                    else list = e;\r\n\r\n                    e.prevZ = tail;\r\n                    tail = e;\r\n\r\n                }\r\n\r\n                p = q;\r\n\r\n            }\r\n\r\n            tail.nextZ = null;\r\n            inSize *= 2;\r\n\r\n        } while ( numMerges > 1 );\r\n\r\n        return list;\r\n\r\n    }\r\n\r\n    // z-order of a point given coords and inverse of the longer side of data bbox\r\n\r\n    function zOrder( x, y, minX, minY, invSize ) {\r\n\r\n        // coords are transformed into non-negative 15-bit integer range\r\n\r\n        x = 32767 * ( x - minX ) * invSize;\r\n        y = 32767 * ( y - minY ) * invSize;\r\n\r\n        x = ( x | ( x << 8 ) ) & 0x00FF00FF;\r\n        x = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\r\n        x = ( x | ( x << 2 ) ) & 0x33333333;\r\n        x = ( x | ( x << 1 ) ) & 0x55555555;\r\n\r\n        y = ( y | ( y << 8 ) ) & 0x00FF00FF;\r\n        y = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\r\n        y = ( y | ( y << 2 ) ) & 0x33333333;\r\n        y = ( y | ( y << 1 ) ) & 0x55555555;\r\n\r\n        return x | ( y << 1 );\r\n\r\n    }\r\n\r\n    // find the leftmost node of a polygon ring\r\n\r\n    function getLeftmost( start ) {\r\n\r\n        var p = start, leftmost = start;\r\n\r\n        do {\r\n\r\n            if ( p.x < leftmost.x ) leftmost = p;\r\n            p = p.next;\r\n\r\n        } while ( p !== start );\r\n\r\n        return leftmost;\r\n\r\n    }\r\n\r\n    // check if a point lies within a convex triangle\r\n\r\n    function pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\r\n\r\n        return ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\r\n            ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\r\n            ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\r\n\r\n    }\r\n\r\n    // check if a diagonal between two polygon nodes is valid (lies in polygon interior)\r\n\r\n    function isValidDiagonal( a, b ) {\r\n\r\n        return a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\r\n            locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\r\n\r\n    }\r\n\r\n    // signed area of a triangle\r\n\r\n    function area( p, q, r ) {\r\n\r\n        return ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\r\n\r\n    }\r\n\r\n    // check if two points are equal\r\n\r\n    function equals( p1, p2 ) {\r\n\r\n        return p1.x === p2.x && p1.y === p2.y;\r\n\r\n    }\r\n\r\n    // check if two segments intersect\r\n\r\n    function intersects( p1, q1, p2, q2 ) {\r\n\r\n        if ( ( equals( p1, q1 ) && equals( p2, q2 ) ) ||\r\n            ( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\r\n\r\n        return area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\r\n            area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\r\n\r\n    }\r\n\r\n    // check if a polygon diagonal intersects any polygon segments\r\n\r\n    function intersectsPolygon( a, b ) {\r\n\r\n        var p = a;\r\n\r\n        do {\r\n\r\n            if ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\r\n                intersects( p, p.next, a, b ) ) {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== a );\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    // check if a polygon diagonal is locally inside the polygon\r\n\r\n    function locallyInside( a, b ) {\r\n\r\n        return area( a.prev, a, a.next ) < 0 ?\r\n            area( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\r\n            area( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\r\n\r\n    }\r\n\r\n    // check if the middle point of a polygon diagonal is inside the polygon\r\n\r\n    function middleInside( a, b ) {\r\n\r\n        var p = a,\r\n            inside = false,\r\n            px = ( a.x + b.x ) / 2,\r\n            py = ( a.y + b.y ) / 2;\r\n\r\n        do {\r\n\r\n            if ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\r\n                ( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) ) {\r\n\r\n                inside = ! inside;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== a );\r\n\r\n        return inside;\r\n\r\n    }\r\n\r\n    // link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\r\n    // if one belongs to the outer ring and another to a hole, it merges it into a single ring\r\n\r\n    function splitPolygon( a, b ) {\r\n\r\n        var a2 = new Node( a.i, a.x, a.y ),\r\n            b2 = new Node( b.i, b.x, b.y ),\r\n            an = a.next,\r\n            bp = b.prev;\r\n\r\n        a.next = b;\r\n        b.prev = a;\r\n\r\n        a2.next = an;\r\n        an.prev = a2;\r\n\r\n        b2.next = a2;\r\n        a2.prev = b2;\r\n\r\n        bp.next = b2;\r\n        b2.prev = bp;\r\n\r\n        return b2;\r\n\r\n    }\r\n\r\n    // create a node and optionally link it with previous one (in a circular doubly linked list)\r\n\r\n    function insertNode( i, x, y, last ) {\r\n\r\n        var p = new Node( i, x, y );\r\n\r\n        if ( ! last ) {\r\n\r\n            p.prev = p;\r\n            p.next = p;\r\n\r\n        } else {\r\n\r\n            p.next = last.next;\r\n            p.prev = last;\r\n            last.next.prev = p;\r\n            last.next = p;\r\n\r\n        }\r\n\r\n        return p;\r\n\r\n    }\r\n\r\n    function removeNode( p ) {\r\n\r\n        p.next.prev = p.prev;\r\n        p.prev.next = p.next;\r\n\r\n        if ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\r\n        if ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\r\n\r\n    }\r\n\r\n    function Node( i, x, y ) {\r\n\r\n        // vertice index in coordinates array\r\n        this.i = i;\r\n\r\n        // vertex coordinates\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        // previous and next vertice nodes in a polygon ring\r\n        this.prev = null;\r\n        this.next = null;\r\n\r\n        // z-order curve value\r\n        this.z = null;\r\n\r\n        // previous and next nodes in z-order\r\n        this.prevZ = null;\r\n        this.nextZ = null;\r\n\r\n        // indicates whether this is a steiner point\r\n        this.steiner = false;\r\n\r\n    }\r\n\r\n    function signedArea( data, start, end, dim ) {\r\n\r\n        var sum = 0;\r\n\r\n        for ( var i = start, j = end - dim; i < end; i += dim ) {\r\n\r\n            sum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\r\n            j = i;\r\n\r\n        }\r\n\r\n        return sum;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     */\r\n\r\n    var ShapeUtils = {\r\n\r\n        // calculate area of the contour polygon\r\n\r\n        area: function ( contour ) {\r\n\r\n            var n = contour.length;\r\n            var a = 0.0;\r\n\r\n            for ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n                a += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n            }\r\n\r\n            return a * 0.5;\r\n\r\n        },\r\n\r\n        isClockWise: function ( pts ) {\r\n\r\n            return ShapeUtils.area( pts ) < 0;\r\n\r\n        },\r\n\r\n        triangulateShape: function ( contour, holes ) {\r\n\r\n            var vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\r\n            var holeIndices = []; // array of hole indices\r\n            var faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\r\n\r\n            removeDupEndPts( contour );\r\n            addContour( vertices, contour );\r\n\r\n            //\r\n\r\n            var holeIndex = contour.length;\r\n\r\n            holes.forEach( removeDupEndPts );\r\n\r\n            for ( var i = 0; i < holes.length; i ++ ) {\r\n\r\n                holeIndices.push( holeIndex );\r\n                holeIndex += holes[ i ].length;\r\n                addContour( vertices, holes[ i ] );\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var triangles = Earcut.triangulate( vertices, holeIndices );\r\n\r\n            //\r\n\r\n            for ( var i = 0; i < triangles.length; i += 3 ) {\r\n\r\n                faces.push( triangles.slice( i, i + 3 ) );\r\n\r\n            }\r\n\r\n            return faces;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    function removeDupEndPts( points ) {\r\n\r\n        var l = points.length;\r\n\r\n        if ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n            points.pop();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function addContour( vertices, contour ) {\r\n\r\n        for ( var i = 0; i < contour.length; i ++ ) {\r\n\r\n            vertices.push( contour[ i ].x );\r\n            vertices.push( contour[ i ].y );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     *\r\n     * Creates extruded geometry from a path shape.\r\n     *\r\n     * parameters = {\r\n\t *\r\n\t *  curveSegments: <int>, // number of points on the curves\r\n\t *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n\t *  depth: <float>, // Depth to extrude the shape\r\n\t *\r\n\t *  bevelEnabled: <bool>, // turn on bevel\r\n\t *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n\t *  bevelSize: <float>, // how far from shape outline is bevel\r\n\t *  bevelSegments: <int>, // number of bevel layers\r\n\t *\r\n\t *  extrudePath: <THREE.Curve> // curve to extrude shape along\r\n\t *\r\n\t *  UVGenerator: <Object> // object that provides UV generator functions\r\n\t *\r\n\t * }\r\n     */\r\n\r\n    // ExtrudeGeometry\r\n\r\n    function ExtrudeGeometry( shapes, options ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'ExtrudeGeometry';\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            options: options\r\n        };\r\n\r\n        this.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    ExtrudeGeometry.prototype = Object.create( Geometry.prototype );\r\n    ExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\r\n\r\n    ExtrudeGeometry.prototype.toJSON = function () {\r\n\r\n        var data = Geometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n        var options = this.parameters.options;\r\n\r\n        return toJSON( shapes, options, data );\r\n\r\n    };\r\n\r\n    // ExtrudeBufferGeometry\r\n\r\n    function ExtrudeBufferGeometry( shapes, options ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'ExtrudeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            options: options\r\n        };\r\n\r\n        shapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n        var scope = this;\r\n\r\n        var verticesArray = [];\r\n        var uvArray = [];\r\n\r\n        for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n            var shape = shapes[ i ];\r\n            addShape( shape );\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\r\n\r\n        this.computeVertexNormals();\r\n\r\n        // functions\r\n\r\n        function addShape( shape ) {\r\n\r\n            var placeholder = [];\r\n\r\n            // options\r\n\r\n            var curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n            var steps = options.steps !== undefined ? options.steps : 1;\r\n            var depth = options.depth !== undefined ? options.depth : 100;\r\n\r\n            var bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\r\n            var bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\r\n            var bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\r\n            var bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n            var extrudePath = options.extrudePath;\r\n\r\n            var uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\r\n\r\n            // deprecated options\r\n\r\n            if ( options.amount !== undefined ) {\r\n\r\n                console.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\r\n                depth = options.amount;\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var extrudePts, extrudeByPath = false;\r\n            var splineTube, binormal, normal, position2;\r\n\r\n            if ( extrudePath ) {\r\n\r\n                extrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n                extrudeByPath = true;\r\n                bevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n                // SETUP TNB variables\r\n\r\n                // TODO1 - have a .isClosed in spline?\r\n\r\n                splineTube = extrudePath.computeFrenetFrames( steps, false );\r\n\r\n                // console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n                binormal = new Vector3();\r\n                normal = new Vector3();\r\n                position2 = new Vector3();\r\n\r\n            }\r\n\r\n            // Safeguards if bevels are not enabled\r\n\r\n            if ( ! bevelEnabled ) {\r\n\r\n                bevelSegments = 0;\r\n                bevelThickness = 0;\r\n                bevelSize = 0;\r\n\r\n            }\r\n\r\n            // Variables initialization\r\n\r\n            var ahole, h, hl; // looping of holes\r\n\r\n            var shapePoints = shape.extractPoints( curveSegments );\r\n\r\n            var vertices = shapePoints.shape;\r\n            var holes = shapePoints.holes;\r\n\r\n            var reverse = ! ShapeUtils.isClockWise( vertices );\r\n\r\n            if ( reverse ) {\r\n\r\n                vertices = vertices.reverse();\r\n\r\n                // Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n\r\n                    if ( ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n                        holes[ h ] = ahole.reverse();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            var faces = ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n            /* Vertices */\r\n\r\n            var contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n            for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                ahole = holes[ h ];\r\n\r\n                vertices = vertices.concat( ahole );\r\n\r\n            }\r\n\r\n\r\n            function scalePt2( pt, vec, size ) {\r\n\r\n                if ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n                return vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n            }\r\n\r\n            var b, bs, t, z,\r\n                vert, vlen = vertices.length,\r\n                face, flen = faces.length;\r\n\r\n\r\n            // Find directions for point movement\r\n\r\n\r\n            function getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n                // computes for inPt the corresponding point inPt' on a new contour\r\n                //   shifted by 1 unit (length of normalized vector) to the left\r\n                // if we walk along contour clockwise, this new contour is outside the old one\r\n                //\r\n                // inPt' is the intersection of the two lines parallel to the two\r\n                //  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n                var v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\r\n\r\n                // good reading for geometry algorithms (here: line-line intersection)\r\n                // http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n                var v_prev_x = inPt.x - inPrev.x,\r\n                    v_prev_y = inPt.y - inPrev.y;\r\n                var v_next_x = inNext.x - inPt.x,\r\n                    v_next_y = inNext.y - inPt.y;\r\n\r\n                var v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n                // check for collinear edges\r\n                var collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n                if ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n                    // not collinear\r\n\r\n                    // length of vectors for normalizing\r\n\r\n                    var v_prev_len = Math.sqrt( v_prev_lensq );\r\n                    var v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n                    // shift adjacent points by unit vectors to the left\r\n\r\n                    var ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n                    var ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n                    var ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n                    var ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n                    // scaling factor for v_prev to intersection point\r\n\r\n                    var sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n                        ( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\r\n                        ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n                    // vector from inPt to intersection point\r\n\r\n                    v_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n                    v_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n                    // Don't normalize!, otherwise sharp corners become ugly\r\n                    //  but prevent crazy spikes\r\n                    var v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n                    if ( v_trans_lensq <= 2 ) {\r\n\r\n                        return new Vector2( v_trans_x, v_trans_y );\r\n\r\n                    } else {\r\n\r\n                        shrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // handle special case of collinear edges\r\n\r\n                    var direction_eq = false; // assumes: opposite\r\n                    if ( v_prev_x > Number.EPSILON ) {\r\n\r\n                        if ( v_next_x > Number.EPSILON ) {\r\n\r\n                            direction_eq = true;\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        if ( v_prev_x < - Number.EPSILON ) {\r\n\r\n                            if ( v_next_x < - Number.EPSILON ) {\r\n\r\n                                direction_eq = true;\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            if ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n                                direction_eq = true;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if ( direction_eq ) {\r\n\r\n                        // console.log(\"Warning: lines are a straight sequence\");\r\n                        v_trans_x = - v_prev_y;\r\n                        v_trans_y = v_prev_x;\r\n                        shrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n                    } else {\r\n\r\n                        // console.log(\"Warning: lines are a straight spike\");\r\n                        v_trans_x = v_prev_x;\r\n                        v_trans_y = v_prev_y;\r\n                        shrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n            }\r\n\r\n\r\n            var contourMovements = [];\r\n\r\n            for ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n                if ( j === il ) j = 0;\r\n                if ( k === il ) k = 0;\r\n\r\n                //  (j)---(i)---(k)\r\n                // console.log('i,j,k', i, j , k)\r\n\r\n                contourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n            }\r\n\r\n            var holesMovements = [],\r\n                oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n            for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                ahole = holes[ h ];\r\n\r\n                oneHoleMovements = [];\r\n\r\n                for ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n                    if ( j === il ) j = 0;\r\n                    if ( k === il ) k = 0;\r\n\r\n                    //  (j)---(i)---(k)\r\n                    oneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n                }\r\n\r\n                holesMovements.push( oneHoleMovements );\r\n                verticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n            }\r\n\r\n\r\n            // Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n            for ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n                //for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n                t = b / bevelSegments;\r\n                z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n                bs = bevelSize * Math.sin( t * Math.PI / 2 );\r\n\r\n                // contract shape\r\n\r\n                for ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n                    vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n                    v( vert.x, vert.y, - z );\r\n\r\n                }\r\n\r\n                // expand holes\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n                    oneHoleMovements = holesMovements[ h ];\r\n\r\n                    for ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n                        vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n                        v( vert.x, vert.y, - z );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            bs = bevelSize;\r\n\r\n            // Back facing vertices\r\n\r\n            for ( i = 0; i < vlen; i ++ ) {\r\n\r\n                vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n                if ( ! extrudeByPath ) {\r\n\r\n                    v( vert.x, vert.y, 0 );\r\n\r\n                } else {\r\n\r\n                    // v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n                    normal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n                    binormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n                    position2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n                    v( position2.x, position2.y, position2.z );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Add stepped vertices...\r\n            // Including front facing vertices\r\n\r\n            var s;\r\n\r\n            for ( s = 1; s <= steps; s ++ ) {\r\n\r\n                for ( i = 0; i < vlen; i ++ ) {\r\n\r\n                    vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n                    if ( ! extrudeByPath ) {\r\n\r\n                        v( vert.x, vert.y, depth / steps * s );\r\n\r\n                    } else {\r\n\r\n                        // v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n                        normal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n                        binormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n                        position2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n                        v( position2.x, position2.y, position2.z );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            // Add bevel segments planes\r\n\r\n            //for ( b = 1; b <= bevelSegments; b ++ ) {\r\n            for ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n                t = b / bevelSegments;\r\n                z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n                bs = bevelSize * Math.sin( t * Math.PI / 2 );\r\n\r\n                // contract shape\r\n\r\n                for ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n                    vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n                    v( vert.x, vert.y, depth + z );\r\n\r\n                }\r\n\r\n                // expand holes\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n                    oneHoleMovements = holesMovements[ h ];\r\n\r\n                    for ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n                        vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n                        if ( ! extrudeByPath ) {\r\n\r\n                            v( vert.x, vert.y, depth + z );\r\n\r\n                        } else {\r\n\r\n                            v( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            /* Faces */\r\n\r\n            // Top and bottom faces\r\n\r\n            buildLidFaces();\r\n\r\n            // Sides faces\r\n\r\n            buildSideFaces();\r\n\r\n\r\n            /////  Internal functions\r\n\r\n            function buildLidFaces() {\r\n\r\n                var start = verticesArray.length / 3;\r\n\r\n                if ( bevelEnabled ) {\r\n\r\n                    var layer = 0; // steps + 1\r\n                    var offset = vlen * layer;\r\n\r\n                    // Bottom faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n                    }\r\n\r\n                    layer = steps + bevelSegments * 2;\r\n                    offset = vlen * layer;\r\n\r\n                    // Top faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Bottom faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n                    }\r\n\r\n                    // Top faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                scope.addGroup( start, verticesArray.length / 3 - start, 0 );\r\n\r\n            }\r\n\r\n            // Create faces for the z-sides of the shape\r\n\r\n            function buildSideFaces() {\r\n\r\n                var start = verticesArray.length / 3;\r\n                var layeroffset = 0;\r\n                sidewalls( contour, layeroffset );\r\n                layeroffset += contour.length;\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n                    sidewalls( ahole, layeroffset );\r\n\r\n                    //, true\r\n                    layeroffset += ahole.length;\r\n\r\n                }\r\n\r\n\r\n                scope.addGroup( start, verticesArray.length / 3 - start, 1 );\r\n\r\n\r\n            }\r\n\r\n            function sidewalls( contour, layeroffset ) {\r\n\r\n                var j, k;\r\n                i = contour.length;\r\n\r\n                while ( -- i >= 0 ) {\r\n\r\n                    j = i;\r\n                    k = i - 1;\r\n                    if ( k < 0 ) k = contour.length - 1;\r\n\r\n                    //console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n                    var s = 0,\r\n                        sl = steps + bevelSegments * 2;\r\n\r\n                    for ( s = 0; s < sl; s ++ ) {\r\n\r\n                        var slen1 = vlen * s;\r\n                        var slen2 = vlen * ( s + 1 );\r\n\r\n                        var a = layeroffset + j + slen1,\r\n                            b = layeroffset + k + slen1,\r\n                            c = layeroffset + k + slen2,\r\n                            d = layeroffset + j + slen2;\r\n\r\n                        f4( a, b, c, d );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function v( x, y, z ) {\r\n\r\n                placeholder.push( x );\r\n                placeholder.push( y );\r\n                placeholder.push( z );\r\n\r\n            }\r\n\r\n\r\n            function f3( a, b, c ) {\r\n\r\n                addVertex( a );\r\n                addVertex( b );\r\n                addVertex( c );\r\n\r\n                var nextIndex = verticesArray.length / 3;\r\n                var uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n                addUV( uvs[ 0 ] );\r\n                addUV( uvs[ 1 ] );\r\n                addUV( uvs[ 2 ] );\r\n\r\n            }\r\n\r\n            function f4( a, b, c, d ) {\r\n\r\n                addVertex( a );\r\n                addVertex( b );\r\n                addVertex( d );\r\n\r\n                addVertex( b );\r\n                addVertex( c );\r\n                addVertex( d );\r\n\r\n\r\n                var nextIndex = verticesArray.length / 3;\r\n                var uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n                addUV( uvs[ 0 ] );\r\n                addUV( uvs[ 1 ] );\r\n                addUV( uvs[ 3 ] );\r\n\r\n                addUV( uvs[ 1 ] );\r\n                addUV( uvs[ 2 ] );\r\n                addUV( uvs[ 3 ] );\r\n\r\n            }\r\n\r\n            function addVertex( index ) {\r\n\r\n                verticesArray.push( placeholder[ index * 3 + 0 ] );\r\n                verticesArray.push( placeholder[ index * 3 + 1 ] );\r\n                verticesArray.push( placeholder[ index * 3 + 2 ] );\r\n\r\n            }\r\n\r\n\r\n            function addUV( vector2 ) {\r\n\r\n                uvArray.push( vector2.x );\r\n                uvArray.push( vector2.y );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    ExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    ExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\r\n\r\n    ExtrudeBufferGeometry.prototype.toJSON = function () {\r\n\r\n        var data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n        var options = this.parameters.options;\r\n\r\n        return toJSON( shapes, options, data );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    var WorldUVGenerator = {\r\n\r\n        generateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\r\n\r\n            var a_x = vertices[ indexA * 3 ];\r\n            var a_y = vertices[ indexA * 3 + 1 ];\r\n            var b_x = vertices[ indexB * 3 ];\r\n            var b_y = vertices[ indexB * 3 + 1 ];\r\n            var c_x = vertices[ indexC * 3 ];\r\n            var c_y = vertices[ indexC * 3 + 1 ];\r\n\r\n            return [\r\n                new Vector2( a_x, a_y ),\r\n                new Vector2( b_x, b_y ),\r\n                new Vector2( c_x, c_y )\r\n            ];\r\n\r\n        },\r\n\r\n        generateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\r\n\r\n            var a_x = vertices[ indexA * 3 ];\r\n            var a_y = vertices[ indexA * 3 + 1 ];\r\n            var a_z = vertices[ indexA * 3 + 2 ];\r\n            var b_x = vertices[ indexB * 3 ];\r\n            var b_y = vertices[ indexB * 3 + 1 ];\r\n            var b_z = vertices[ indexB * 3 + 2 ];\r\n            var c_x = vertices[ indexC * 3 ];\r\n            var c_y = vertices[ indexC * 3 + 1 ];\r\n            var c_z = vertices[ indexC * 3 + 2 ];\r\n            var d_x = vertices[ indexD * 3 ];\r\n            var d_y = vertices[ indexD * 3 + 1 ];\r\n            var d_z = vertices[ indexD * 3 + 2 ];\r\n\r\n            if ( Math.abs( a_y - b_y ) < 0.01 ) {\r\n\r\n                return [\r\n                    new Vector2( a_x, 1 - a_z ),\r\n                    new Vector2( b_x, 1 - b_z ),\r\n                    new Vector2( c_x, 1 - c_z ),\r\n                    new Vector2( d_x, 1 - d_z )\r\n                ];\r\n\r\n            } else {\r\n\r\n                return [\r\n                    new Vector2( a_y, 1 - a_z ),\r\n                    new Vector2( b_y, 1 - b_z ),\r\n                    new Vector2( c_y, 1 - c_z ),\r\n                    new Vector2( d_y, 1 - d_z )\r\n                ];\r\n\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    function toJSON( shapes, options, data ) {\r\n\r\n        //\r\n\r\n        data.shapes = [];\r\n\r\n        if ( Array.isArray( shapes ) ) {\r\n\r\n            for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n                var shape = shapes[ i ];\r\n\r\n                data.shapes.push( shape.uuid );\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            data.shapes.push( shapes.uuid );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        if ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\r\n\r\n        return data;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * Text = 3D Text\r\n     *\r\n     * parameters = {\r\n\t *  font: <THREE.Font>, // font\r\n\t *\r\n\t *  size: <float>, // size of the text\r\n\t *  height: <float>, // thickness to extrude text\r\n\t *  curveSegments: <int>, // number of points on the curves\r\n\t *\r\n\t *  bevelEnabled: <bool>, // turn on bevel\r\n\t *  bevelThickness: <float>, // how deep into text bevel goes\r\n\t *  bevelSize: <float> // how far from text outline is bevel\r\n\t * }\r\n     */\r\n\r\n    // TextGeometry\r\n\r\n    function TextGeometry( text, parameters ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TextGeometry';\r\n\r\n        this.parameters = {\r\n            text: text,\r\n            parameters: parameters\r\n        };\r\n\r\n        this.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TextGeometry.prototype = Object.create( Geometry.prototype );\r\n    TextGeometry.prototype.constructor = TextGeometry;\r\n\r\n    // TextBufferGeometry\r\n\r\n    function TextBufferGeometry( text, parameters ) {\r\n\r\n        parameters = parameters || {};\r\n\r\n        var font = parameters.font;\r\n\r\n        if ( ! ( font && font.isFont ) ) {\r\n\r\n            console.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n            return new Geometry();\r\n\r\n        }\r\n\r\n        var shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\r\n\r\n        // translate parameters to ExtrudeGeometry API\r\n\r\n        parameters.depth = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n        // defaults\r\n\r\n        if ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n        if ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n        if ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n        ExtrudeBufferGeometry.call( this, shapes, parameters );\r\n\r\n        this.type = 'TextBufferGeometry';\r\n\r\n    }\r\n\r\n    TextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\r\n    TextBufferGeometry.prototype.constructor = TextBufferGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // SphereGeometry\r\n\r\n    function SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'SphereGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    SphereGeometry.prototype = Object.create( Geometry.prototype );\r\n    SphereGeometry.prototype.constructor = SphereGeometry;\r\n\r\n    // SphereBufferGeometry\r\n\r\n    function SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'SphereBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        radius = radius || 1;\r\n\r\n        widthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n        heightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n        phiStart = phiStart !== undefined ? phiStart : 0;\r\n        phiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n        var thetaEnd = thetaStart + thetaLength;\r\n\r\n        var ix, iy;\r\n\r\n        var index = 0;\r\n        var grid = [];\r\n\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( iy = 0; iy <= heightSegments; iy ++ ) {\r\n\r\n            var verticesRow = [];\r\n\r\n            var v = iy / heightSegments;\r\n\r\n            for ( ix = 0; ix <= widthSegments; ix ++ ) {\r\n\r\n                var u = ix / widthSegments;\r\n\r\n                // vertex\r\n\r\n                vertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n                vertex.y = radius * Math.cos( thetaStart + v * thetaLength );\r\n                vertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                normal.set( vertex.x, vertex.y, vertex.z ).normalize();\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( u, 1 - v );\r\n\r\n                verticesRow.push( index ++ );\r\n\r\n            }\r\n\r\n            grid.push( verticesRow );\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( iy = 0; iy < heightSegments; iy ++ ) {\r\n\r\n            for ( ix = 0; ix < widthSegments; ix ++ ) {\r\n\r\n                var a = grid[ iy ][ ix + 1 ];\r\n                var b = grid[ iy ][ ix ];\r\n                var c = grid[ iy + 1 ][ ix ];\r\n                var d = grid[ iy + 1 ][ ix + 1 ];\r\n\r\n                if ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\r\n                if ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    SphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    SphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\r\n\r\n    /**\r\n     * @author Kaleb Murphy\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // RingGeometry\r\n\r\n    function RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'RingGeometry';\r\n\r\n        this.parameters = {\r\n            innerRadius: innerRadius,\r\n            outerRadius: outerRadius,\r\n            thetaSegments: thetaSegments,\r\n            phiSegments: phiSegments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    RingGeometry.prototype = Object.create( Geometry.prototype );\r\n    RingGeometry.prototype.constructor = RingGeometry;\r\n\r\n    // RingBufferGeometry\r\n\r\n    function RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'RingBufferGeometry';\r\n\r\n        this.parameters = {\r\n            innerRadius: innerRadius,\r\n            outerRadius: outerRadius,\r\n            thetaSegments: thetaSegments,\r\n            phiSegments: phiSegments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        innerRadius = innerRadius || 0.5;\r\n        outerRadius = outerRadius || 1;\r\n\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n        thetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n        phiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // some helper variables\r\n\r\n        var segment;\r\n        var radius = innerRadius;\r\n        var radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n        var vertex = new Vector3();\r\n        var uv = new Vector2();\r\n        var j, i;\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( j = 0; j <= phiSegments; j ++ ) {\r\n\r\n            for ( i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n                // values are generate from the inside of the ring to the outside\r\n\r\n                segment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n                // vertex\r\n\r\n                vertex.x = radius * Math.cos( segment );\r\n                vertex.y = radius * Math.sin( segment );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                normals.push( 0, 0, 1 );\r\n\r\n                // uv\r\n\r\n                uv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n                uv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\r\n                uvs.push( uv.x, uv.y );\r\n\r\n            }\r\n\r\n            // increase the radius for next row of vertices\r\n\r\n            radius += radiusStep;\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( j = 0; j < phiSegments; j ++ ) {\r\n\r\n            var thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n            for ( i = 0; i < thetaSegments; i ++ ) {\r\n\r\n                segment = i + thetaSegmentLevel;\r\n\r\n                var a = segment;\r\n                var b = segment + thetaSegments + 1;\r\n                var c = segment + thetaSegments + 2;\r\n                var d = segment + 1;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    RingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    RingBufferGeometry.prototype.constructor = RingBufferGeometry;\r\n\r\n    /**\r\n     * @author astrodud / http://astrodud.isgreat.org/\r\n     * @author zz85 / https://github.com/zz85\r\n     * @author bhouston / http://clara.io\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // LatheGeometry\r\n\r\n    function LatheGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'LatheGeometry';\r\n\r\n        this.parameters = {\r\n            points: points,\r\n            segments: segments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    LatheGeometry.prototype = Object.create( Geometry.prototype );\r\n    LatheGeometry.prototype.constructor = LatheGeometry;\r\n\r\n    // LatheBufferGeometry\r\n\r\n    function LatheBufferGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'LatheBufferGeometry';\r\n\r\n        this.parameters = {\r\n            points: points,\r\n            segments: segments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength\r\n        };\r\n\r\n        segments = Math.floor( segments ) || 12;\r\n        phiStart = phiStart || 0;\r\n        phiLength = phiLength || Math.PI * 2;\r\n\r\n        // clamp phiLength so it's in range of [ 0, 2PI ]\r\n\r\n        phiLength = _Math.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var base;\r\n        var inverseSegments = 1.0 / segments;\r\n        var vertex = new Vector3();\r\n        var uv = new Vector2();\r\n        var i, j;\r\n\r\n        // generate vertices and uvs\r\n\r\n        for ( i = 0; i <= segments; i ++ ) {\r\n\r\n            var phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n            var sin = Math.sin( phi );\r\n            var cos = Math.cos( phi );\r\n\r\n            for ( j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n                // vertex\r\n\r\n                vertex.x = points[ j ].x * sin;\r\n                vertex.y = points[ j ].y;\r\n                vertex.z = points[ j ].x * cos;\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // uv\r\n\r\n                uv.x = i / segments;\r\n                uv.y = j / ( points.length - 1 );\r\n\r\n                uvs.push( uv.x, uv.y );\r\n\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( i = 0; i < segments; i ++ ) {\r\n\r\n            for ( j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n                base = j + i * points.length;\r\n\r\n                var a = base;\r\n                var b = base + points.length;\r\n                var c = base + points.length + 1;\r\n                var d = base + 1;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        // generate normals\r\n\r\n        this.computeVertexNormals();\r\n\r\n        // if the geometry is closed, we need to average the normals along the seam.\r\n        // because the corresponding vertices are identical (but still have different UVs).\r\n\r\n        if ( phiLength === Math.PI * 2 ) {\r\n\r\n            var normals = this.attributes.normal.array;\r\n            var n1 = new Vector3();\r\n            var n2 = new Vector3();\r\n            var n = new Vector3();\r\n\r\n            // this is the buffer offset for the last line of vertices\r\n\r\n            base = segments * points.length * 3;\r\n\r\n            for ( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n                // select the normal of the vertex in the first line\r\n\r\n                n1.x = normals[ j + 0 ];\r\n                n1.y = normals[ j + 1 ];\r\n                n1.z = normals[ j + 2 ];\r\n\r\n                // select the normal of the vertex in the last line\r\n\r\n                n2.x = normals[ base + j + 0 ];\r\n                n2.y = normals[ base + j + 1 ];\r\n                n2.z = normals[ base + j + 2 ];\r\n\r\n                // average normals\r\n\r\n                n.addVectors( n1, n2 ).normalize();\r\n\r\n                // assign the new values to both normals\r\n\r\n                normals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n                normals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n                normals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    LatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    LatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\r\n\r\n    /**\r\n     * @author jonobr1 / http://jonobr1.com\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // ShapeGeometry\r\n\r\n    function ShapeGeometry( shapes, curveSegments ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'ShapeGeometry';\r\n\r\n        if ( typeof curveSegments === 'object' ) {\r\n\r\n            console.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\r\n\r\n            curveSegments = curveSegments.curveSegments;\r\n\r\n        }\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            curveSegments: curveSegments\r\n        };\r\n\r\n        this.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    ShapeGeometry.prototype = Object.create( Geometry.prototype );\r\n    ShapeGeometry.prototype.constructor = ShapeGeometry;\r\n\r\n    ShapeGeometry.prototype.toJSON = function () {\r\n\r\n        var data = Geometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n\r\n        return toJSON$1( shapes, data );\r\n\r\n    };\r\n\r\n    // ShapeBufferGeometry\r\n\r\n    function ShapeBufferGeometry( shapes, curveSegments ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'ShapeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            curveSegments: curveSegments\r\n        };\r\n\r\n        curveSegments = curveSegments || 12;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var groupStart = 0;\r\n        var groupCount = 0;\r\n\r\n        // allow single and array values for \"shapes\" parameter\r\n\r\n        if ( Array.isArray( shapes ) === false ) {\r\n\r\n            addShape( shapes );\r\n\r\n        } else {\r\n\r\n            for ( var i = 0; i < shapes.length; i ++ ) {\r\n\r\n                addShape( shapes[ i ] );\r\n\r\n                this.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\r\n\r\n                groupStart += groupCount;\r\n                groupCount = 0;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\r\n        // helper functions\r\n\r\n        function addShape( shape ) {\r\n\r\n            var i, l, shapeHole;\r\n\r\n            var indexOffset = vertices.length / 3;\r\n            var points = shape.extractPoints( curveSegments );\r\n\r\n            var shapeVertices = points.shape;\r\n            var shapeHoles = points.holes;\r\n\r\n            // check direction of vertices\r\n\r\n            if ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\r\n\r\n                shapeVertices = shapeVertices.reverse();\r\n\r\n                // also check if holes are in the opposite direction\r\n\r\n                for ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n                    shapeHole = shapeHoles[ i ];\r\n\r\n                    if ( ShapeUtils.isClockWise( shapeHole ) === true ) {\r\n\r\n                        shapeHoles[ i ] = shapeHole.reverse();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\r\n\r\n            // join vertices of inner and outer paths to a single array\r\n\r\n            for ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n                shapeHole = shapeHoles[ i ];\r\n                shapeVertices = shapeVertices.concat( shapeHole );\r\n\r\n            }\r\n\r\n            // vertices, normals, uvs\r\n\r\n            for ( i = 0, l = shapeVertices.length; i < l; i ++ ) {\r\n\r\n                var vertex = shapeVertices[ i ];\r\n\r\n                vertices.push( vertex.x, vertex.y, 0 );\r\n                normals.push( 0, 0, 1 );\r\n                uvs.push( vertex.x, vertex.y ); // world uvs\r\n\r\n            }\r\n\r\n            // incides\r\n\r\n            for ( i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                var a = face[ 0 ] + indexOffset;\r\n                var b = face[ 1 ] + indexOffset;\r\n                var c = face[ 2 ] + indexOffset;\r\n\r\n                indices.push( a, b, c );\r\n                groupCount += 3;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    ShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    ShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\r\n\r\n    ShapeBufferGeometry.prototype.toJSON = function () {\r\n\r\n        var data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n\r\n        return toJSON$1( shapes, data );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    function toJSON$1( shapes, data ) {\r\n\r\n        data.shapes = [];\r\n\r\n        if ( Array.isArray( shapes ) ) {\r\n\r\n            for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n                var shape = shapes[ i ];\r\n\r\n                data.shapes.push( shape.uuid );\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            data.shapes.push( shapes.uuid );\r\n\r\n        }\r\n\r\n        return data;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function EdgesGeometry( geometry, thresholdAngle ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'EdgesGeometry';\r\n\r\n        this.parameters = {\r\n            thresholdAngle: thresholdAngle\r\n        };\r\n\r\n        thresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n        // buffer\r\n\r\n        var vertices = [];\r\n\r\n        // helper variables\r\n\r\n        var thresholdDot = Math.cos( _Math.DEG2RAD * thresholdAngle );\r\n        var edge = [ 0, 0 ], edges = {}, edge1, edge2;\r\n        var key, keys = [ 'a', 'b', 'c' ];\r\n\r\n        // prepare source geometry\r\n\r\n        var geometry2;\r\n\r\n        if ( geometry.isBufferGeometry ) {\r\n\r\n            geometry2 = new Geometry();\r\n            geometry2.fromBufferGeometry( geometry );\r\n\r\n        } else {\r\n\r\n            geometry2 = geometry.clone();\r\n\r\n        }\r\n\r\n        geometry2.mergeVertices();\r\n        geometry2.computeFaceNormals();\r\n\r\n        var sourceVertices = geometry2.vertices;\r\n        var faces = geometry2.faces;\r\n\r\n        // now create a data structure where each entry represents an edge with its adjoining faces\r\n\r\n        for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n            var face = faces[ i ];\r\n\r\n            for ( var j = 0; j < 3; j ++ ) {\r\n\r\n                edge1 = face[ keys[ j ] ];\r\n                edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n                edge[ 0 ] = Math.min( edge1, edge2 );\r\n                edge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n                key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n                if ( edges[ key ] === undefined ) {\r\n\r\n                    edges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n                } else {\r\n\r\n                    edges[ key ].face2 = i;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate vertices\r\n\r\n        for ( key in edges ) {\r\n\r\n            var e = edges[ key ];\r\n\r\n            // an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\r\n\r\n            if ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\r\n\r\n                var vertex = sourceVertices[ e.index1 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                vertex = sourceVertices[ e.index2 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n    }\r\n\r\n    EdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    EdgesGeometry.prototype.constructor = EdgesGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // CylinderGeometry\r\n\r\n    function CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'CylinderGeometry';\r\n\r\n        this.parameters = {\r\n            radiusTop: radiusTop,\r\n            radiusBottom: radiusBottom,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    CylinderGeometry.prototype = Object.create( Geometry.prototype );\r\n    CylinderGeometry.prototype.constructor = CylinderGeometry;\r\n\r\n    // CylinderBufferGeometry\r\n\r\n    function CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'CylinderBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radiusTop: radiusTop,\r\n            radiusBottom: radiusBottom,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        var scope = this;\r\n\r\n        radiusTop = radiusTop !== undefined ? radiusTop : 1;\r\n        radiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\r\n        height = height || 1;\r\n\r\n        radialSegments = Math.floor( radialSegments ) || 8;\r\n        heightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n        openEnded = openEnded !== undefined ? openEnded : false;\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0.0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var index = 0;\r\n        var indexArray = [];\r\n        var halfHeight = height / 2;\r\n        var groupStart = 0;\r\n\r\n        // generate geometry\r\n\r\n        generateTorso();\r\n\r\n        if ( openEnded === false ) {\r\n\r\n            if ( radiusTop > 0 ) generateCap( true );\r\n            if ( radiusBottom > 0 ) generateCap( false );\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        function generateTorso() {\r\n\r\n            var x, y;\r\n            var normal = new Vector3();\r\n            var vertex = new Vector3();\r\n\r\n            var groupCount = 0;\r\n\r\n            // this will be used to calculate the normal\r\n            var slope = ( radiusBottom - radiusTop ) / height;\r\n\r\n            // generate vertices, normals and uvs\r\n\r\n            for ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n                var indexRow = [];\r\n\r\n                var v = y / heightSegments;\r\n\r\n                // calculate the radius of the current row\r\n\r\n                var radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n                for ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n                    var u = x / radialSegments;\r\n\r\n                    var theta = u * thetaLength + thetaStart;\r\n\r\n                    var sinTheta = Math.sin( theta );\r\n                    var cosTheta = Math.cos( theta );\r\n\r\n                    // vertex\r\n\r\n                    vertex.x = radius * sinTheta;\r\n                    vertex.y = - v * height + halfHeight;\r\n                    vertex.z = radius * cosTheta;\r\n                    vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                    // normal\r\n\r\n                    normal.set( sinTheta, slope, cosTheta ).normalize();\r\n                    normals.push( normal.x, normal.y, normal.z );\r\n\r\n                    // uv\r\n\r\n                    uvs.push( u, 1 - v );\r\n\r\n                    // save index of vertex in respective row\r\n\r\n                    indexRow.push( index ++ );\r\n\r\n                }\r\n\r\n                // now save vertices of the row in our index array\r\n\r\n                indexArray.push( indexRow );\r\n\r\n            }\r\n\r\n            // generate indices\r\n\r\n            for ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n                for ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n                    // we use the index array to access the correct indices\r\n\r\n                    var a = indexArray[ y ][ x ];\r\n                    var b = indexArray[ y + 1 ][ x ];\r\n                    var c = indexArray[ y + 1 ][ x + 1 ];\r\n                    var d = indexArray[ y ][ x + 1 ];\r\n\r\n                    // faces\r\n\r\n                    indices.push( a, b, d );\r\n                    indices.push( b, c, d );\r\n\r\n                    // update group counter\r\n\r\n                    groupCount += 6;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // add a group to the geometry. this will ensure multi material support\r\n\r\n            scope.addGroup( groupStart, groupCount, 0 );\r\n\r\n            // calculate new start value for groups\r\n\r\n            groupStart += groupCount;\r\n\r\n        }\r\n\r\n        function generateCap( top ) {\r\n\r\n            var x, centerIndexStart, centerIndexEnd;\r\n\r\n            var uv = new Vector2();\r\n            var vertex = new Vector3();\r\n\r\n            var groupCount = 0;\r\n\r\n            var radius = ( top === true ) ? radiusTop : radiusBottom;\r\n            var sign = ( top === true ) ? 1 : - 1;\r\n\r\n            // save the index of the first center vertex\r\n            centerIndexStart = index;\r\n\r\n            // first we generate the center vertex data of the cap.\r\n            // because the geometry needs one set of uvs per face,\r\n            // we must generate a center vertex per face/segment\r\n\r\n            for ( x = 1; x <= radialSegments; x ++ ) {\r\n\r\n                // vertex\r\n\r\n                vertices.push( 0, halfHeight * sign, 0 );\r\n\r\n                // normal\r\n\r\n                normals.push( 0, sign, 0 );\r\n\r\n                // uv\r\n\r\n                uvs.push( 0.5, 0.5 );\r\n\r\n                // increase index\r\n\r\n                index ++;\r\n\r\n            }\r\n\r\n            // save the index of the last center vertex\r\n\r\n            centerIndexEnd = index;\r\n\r\n            // now we generate the surrounding vertices, normals and uvs\r\n\r\n            for ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n                var u = x / radialSegments;\r\n                var theta = u * thetaLength + thetaStart;\r\n\r\n                var cosTheta = Math.cos( theta );\r\n                var sinTheta = Math.sin( theta );\r\n\r\n                // vertex\r\n\r\n                vertex.x = radius * sinTheta;\r\n                vertex.y = halfHeight * sign;\r\n                vertex.z = radius * cosTheta;\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                normals.push( 0, sign, 0 );\r\n\r\n                // uv\r\n\r\n                uv.x = ( cosTheta * 0.5 ) + 0.5;\r\n                uv.y = ( sinTheta * 0.5 * sign ) + 0.5;\r\n                uvs.push( uv.x, uv.y );\r\n\r\n                // increase index\r\n\r\n                index ++;\r\n\r\n            }\r\n\r\n            // generate indices\r\n\r\n            for ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n                var c = centerIndexStart + x;\r\n                var i = centerIndexEnd + x;\r\n\r\n                if ( top === true ) {\r\n\r\n                    // face top\r\n\r\n                    indices.push( i, i + 1, c );\r\n\r\n                } else {\r\n\r\n                    // face bottom\r\n\r\n                    indices.push( i + 1, i, c );\r\n\r\n                }\r\n\r\n                groupCount += 3;\r\n\r\n            }\r\n\r\n            // add a group to the geometry. this will ensure multi material support\r\n\r\n            scope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\r\n\r\n            // calculate new start value for groups\r\n\r\n            groupStart += groupCount;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    CylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    CylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\r\n\r\n    /**\r\n     * @author abelnation / http://github.com/abelnation\r\n     */\r\n\r\n    // ConeGeometry\r\n\r\n    function ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        CylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n        this.type = 'ConeGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n    }\r\n\r\n    ConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\r\n    ConeGeometry.prototype.constructor = ConeGeometry;\r\n\r\n    // ConeBufferGeometry\r\n\r\n    function ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        CylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n        this.type = 'ConeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n    }\r\n\r\n    ConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\r\n    ConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     * @author hughes\r\n     */\r\n\r\n    // CircleGeometry\r\n\r\n    function CircleGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'CircleGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            segments: segments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    CircleGeometry.prototype = Object.create( Geometry.prototype );\r\n    CircleGeometry.prototype.constructor = CircleGeometry;\r\n\r\n    // CircleBufferGeometry\r\n\r\n    function CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'CircleBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            segments: segments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        radius = radius || 1;\r\n        segments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var i, s;\r\n        var vertex = new Vector3();\r\n        var uv = new Vector2();\r\n\r\n        // center point\r\n\r\n        vertices.push( 0, 0, 0 );\r\n        normals.push( 0, 0, 1 );\r\n        uvs.push( 0.5, 0.5 );\r\n\r\n        for ( s = 0, i = 3; s <= segments; s ++, i += 3 ) {\r\n\r\n            var segment = thetaStart + s / segments * thetaLength;\r\n\r\n            // vertex\r\n\r\n            vertex.x = radius * Math.cos( segment );\r\n            vertex.y = radius * Math.sin( segment );\r\n\r\n            vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            // normal\r\n\r\n            normals.push( 0, 0, 1 );\r\n\r\n            // uvs\r\n\r\n            uv.x = ( vertices[ i ] / radius + 1 ) / 2;\r\n            uv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n            uvs.push( uv.x, uv.y );\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( i = 1; i <= segments; i ++ ) {\r\n\r\n            indices.push( i, i + 1, 0 );\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    CircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    CircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\r\n\r\n\r\n\r\n    var Geometries = /*#__PURE__*/Object.freeze({\r\n        WireframeGeometry: WireframeGeometry,\r\n        ParametricGeometry: ParametricGeometry,\r\n        ParametricBufferGeometry: ParametricBufferGeometry,\r\n        TetrahedronGeometry: TetrahedronGeometry,\r\n        TetrahedronBufferGeometry: TetrahedronBufferGeometry,\r\n        OctahedronGeometry: OctahedronGeometry,\r\n        OctahedronBufferGeometry: OctahedronBufferGeometry,\r\n        IcosahedronGeometry: IcosahedronGeometry,\r\n        IcosahedronBufferGeometry: IcosahedronBufferGeometry,\r\n        DodecahedronGeometry: DodecahedronGeometry,\r\n        DodecahedronBufferGeometry: DodecahedronBufferGeometry,\r\n        PolyhedronGeometry: PolyhedronGeometry,\r\n        PolyhedronBufferGeometry: PolyhedronBufferGeometry,\r\n        TubeGeometry: TubeGeometry,\r\n        TubeBufferGeometry: TubeBufferGeometry,\r\n        TorusKnotGeometry: TorusKnotGeometry,\r\n        TorusKnotBufferGeometry: TorusKnotBufferGeometry,\r\n        TorusGeometry: TorusGeometry,\r\n        TorusBufferGeometry: TorusBufferGeometry,\r\n        TextGeometry: TextGeometry,\r\n        TextBufferGeometry: TextBufferGeometry,\r\n        SphereGeometry: SphereGeometry,\r\n        SphereBufferGeometry: SphereBufferGeometry,\r\n        RingGeometry: RingGeometry,\r\n        RingBufferGeometry: RingBufferGeometry,\r\n        PlaneGeometry: PlaneGeometry,\r\n        PlaneBufferGeometry: PlaneBufferGeometry,\r\n        LatheGeometry: LatheGeometry,\r\n        LatheBufferGeometry: LatheBufferGeometry,\r\n        ShapeGeometry: ShapeGeometry,\r\n        ShapeBufferGeometry: ShapeBufferGeometry,\r\n        ExtrudeGeometry: ExtrudeGeometry,\r\n        ExtrudeBufferGeometry: ExtrudeBufferGeometry,\r\n        EdgesGeometry: EdgesGeometry,\r\n        ConeGeometry: ConeGeometry,\r\n        ConeBufferGeometry: ConeBufferGeometry,\r\n        CylinderGeometry: CylinderGeometry,\r\n        CylinderBufferGeometry: CylinderBufferGeometry,\r\n        CircleGeometry: CircleGeometry,\r\n        CircleBufferGeometry: CircleBufferGeometry,\r\n        BoxGeometry: BoxGeometry,\r\n        BoxBufferGeometry: BoxBufferGeometry\r\n    });\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <THREE.Color>\r\n\t * }\r\n     */\r\n\r\n    function ShadowMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'ShadowMaterial';\r\n\r\n        this.color = new Color( 0x000000 );\r\n        this.transparent = true;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    ShadowMaterial.prototype = Object.create( Material.prototype );\r\n    ShadowMaterial.prototype.constructor = ShadowMaterial;\r\n\r\n    ShadowMaterial.prototype.isShadowMaterial = true;\r\n\r\n    ShadowMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function RawShaderMaterial( parameters ) {\r\n\r\n        ShaderMaterial.call( this, parameters );\r\n\r\n        this.type = 'RawShaderMaterial';\r\n\r\n    }\r\n\r\n    RawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\r\n    RawShaderMaterial.prototype.constructor = RawShaderMaterial;\r\n\r\n    RawShaderMaterial.prototype.isRawShaderMaterial = true;\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  roughness: <float>,\r\n\t *  metalness: <float>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissive: <hex>,\r\n\t *  emissiveIntensity: <float>\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  roughnessMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  metalnessMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  envMapIntensity: <float>\r\n\t *\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshStandardMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.defines = { 'STANDARD': '' };\r\n\r\n        this.type = 'MeshStandardMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // diffuse\r\n        this.roughness = 0.5;\r\n        this.metalness = 0.5;\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.emissive = new Color( 0x000000 );\r\n        this.emissiveIntensity = 1.0;\r\n        this.emissiveMap = null;\r\n\r\n        this.bumpMap = null;\r\n        this.bumpScale = 1;\r\n\r\n        this.normalMap = null;\r\n        this.normalScale = new Vector2( 1, 1 );\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.roughnessMap = null;\r\n\r\n        this.metalnessMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.envMapIntensity = 1.0;\r\n\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshStandardMaterial.prototype = Object.create( Material.prototype );\r\n    MeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\r\n\r\n    MeshStandardMaterial.prototype.isMeshStandardMaterial = true;\r\n\r\n    MeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.defines = { 'STANDARD': '' };\r\n\r\n        this.color.copy( source.color );\r\n        this.roughness = source.roughness;\r\n        this.metalness = source.metalness;\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.emissive.copy( source.emissive );\r\n        this.emissiveMap = source.emissiveMap;\r\n        this.emissiveIntensity = source.emissiveIntensity;\r\n\r\n        this.bumpMap = source.bumpMap;\r\n        this.bumpScale = source.bumpScale;\r\n\r\n        this.normalMap = source.normalMap;\r\n        this.normalScale.copy( source.normalScale );\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.roughnessMap = source.roughnessMap;\r\n\r\n        this.metalnessMap = source.metalnessMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.envMapIntensity = source.envMapIntensity;\r\n\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *  reflectivity: <float>\r\n\t * }\r\n     */\r\n\r\n    function MeshPhysicalMaterial( parameters ) {\r\n\r\n        MeshStandardMaterial.call( this );\r\n\r\n        this.defines = { 'PHYSICAL': '' };\r\n\r\n        this.type = 'MeshPhysicalMaterial';\r\n\r\n        this.reflectivity = 0.5; // maps to F0 = 0.04\r\n\r\n        this.clearCoat = 0.0;\r\n        this.clearCoatRoughness = 0.0;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\r\n    MeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\r\n\r\n    MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\r\n\r\n    MeshPhysicalMaterial.prototype.copy = function ( source ) {\r\n\r\n        MeshStandardMaterial.prototype.copy.call( this, source );\r\n\r\n        this.defines = { 'PHYSICAL': '' };\r\n\r\n        this.reflectivity = source.reflectivity;\r\n\r\n        this.clearCoat = source.clearCoat;\r\n        this.clearCoatRoughness = source.clearCoatRoughness;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  specular: <hex>,\r\n\t *  shininess: <float>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissive: <hex>,\r\n\t *  emissiveIntensity: <float>\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshPhongMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshPhongMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // diffuse\r\n        this.specular = new Color( 0x111111 );\r\n        this.shininess = 30;\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.emissive = new Color( 0x000000 );\r\n        this.emissiveIntensity = 1.0;\r\n        this.emissiveMap = null;\r\n\r\n        this.bumpMap = null;\r\n        this.bumpScale = 1;\r\n\r\n        this.normalMap = null;\r\n        this.normalScale = new Vector2( 1, 1 );\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.specularMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.combine = MultiplyOperation;\r\n        this.reflectivity = 1;\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshPhongMaterial.prototype = Object.create( Material.prototype );\r\n    MeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\r\n\r\n    MeshPhongMaterial.prototype.isMeshPhongMaterial = true;\r\n\r\n    MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n        this.specular.copy( source.specular );\r\n        this.shininess = source.shininess;\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.emissive.copy( source.emissive );\r\n        this.emissiveMap = source.emissiveMap;\r\n        this.emissiveIntensity = source.emissiveIntensity;\r\n\r\n        this.bumpMap = source.bumpMap;\r\n        this.bumpScale = source.bumpScale;\r\n\r\n        this.normalMap = source.normalMap;\r\n        this.normalScale.copy( source.normalScale );\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.specularMap = source.specularMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.combine = source.combine;\r\n        this.reflectivity = source.reflectivity;\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author takahirox / http://github.com/takahirox\r\n     *\r\n     * parameters = {\r\n\t *  gradientMap: new THREE.Texture( <Image> )\r\n\t * }\r\n     */\r\n\r\n    function MeshToonMaterial( parameters ) {\r\n\r\n        MeshPhongMaterial.call( this );\r\n\r\n        this.defines = { 'TOON': '' };\r\n\r\n        this.type = 'MeshToonMaterial';\r\n\r\n        this.gradientMap = null;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshToonMaterial.prototype = Object.create( MeshPhongMaterial.prototype );\r\n    MeshToonMaterial.prototype.constructor = MeshToonMaterial;\r\n\r\n    MeshToonMaterial.prototype.isMeshToonMaterial = true;\r\n\r\n    MeshToonMaterial.prototype.copy = function ( source ) {\r\n\r\n        MeshPhongMaterial.prototype.copy.call( this, source );\r\n\r\n        this.gradientMap = source.gradientMap;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshNormalMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshNormalMaterial';\r\n\r\n        this.bumpMap = null;\r\n        this.bumpScale = 1;\r\n\r\n        this.normalMap = null;\r\n        this.normalScale = new Vector2( 1, 1 );\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshNormalMaterial.prototype = Object.create( Material.prototype );\r\n    MeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\r\n\r\n    MeshNormalMaterial.prototype.isMeshNormalMaterial = true;\r\n\r\n    MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.bumpMap = source.bumpMap;\r\n        this.bumpScale = source.bumpScale;\r\n\r\n        this.normalMap = source.normalMap;\r\n        this.normalScale.copy( source.normalScale );\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissive: <hex>,\r\n\t *  emissiveIntensity: <float>\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshLambertMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshLambertMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // diffuse\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.emissive = new Color( 0x000000 );\r\n        this.emissiveIntensity = 1.0;\r\n        this.emissiveMap = null;\r\n\r\n        this.specularMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.combine = MultiplyOperation;\r\n        this.reflectivity = 1;\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshLambertMaterial.prototype = Object.create( Material.prototype );\r\n    MeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\r\n\r\n    MeshLambertMaterial.prototype.isMeshLambertMaterial = true;\r\n\r\n    MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.emissive.copy( source.emissive );\r\n        this.emissiveMap = source.emissiveMap;\r\n        this.emissiveIntensity = source.emissiveIntensity;\r\n\r\n        this.specularMap = source.specularMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.combine = source.combine;\r\n        this.reflectivity = source.reflectivity;\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *\r\n\t *  scale: <float>,\r\n\t *  dashSize: <float>,\r\n\t *  gapSize: <float>\r\n\t * }\r\n     */\r\n\r\n    function LineDashedMaterial( parameters ) {\r\n\r\n        LineBasicMaterial.call( this );\r\n\r\n        this.type = 'LineDashedMaterial';\r\n\r\n        this.scale = 1;\r\n        this.dashSize = 3;\r\n        this.gapSize = 1;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    LineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\r\n    LineDashedMaterial.prototype.constructor = LineDashedMaterial;\r\n\r\n    LineDashedMaterial.prototype.isLineDashedMaterial = true;\r\n\r\n    LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n        LineBasicMaterial.prototype.copy.call( this, source );\r\n\r\n        this.scale = source.scale;\r\n        this.dashSize = source.dashSize;\r\n        this.gapSize = source.gapSize;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n\r\n\r\n    var Materials = /*#__PURE__*/Object.freeze({\r\n        ShadowMaterial: ShadowMaterial,\r\n        SpriteMaterial: SpriteMaterial,\r\n        RawShaderMaterial: RawShaderMaterial,\r\n        ShaderMaterial: ShaderMaterial,\r\n        PointsMaterial: PointsMaterial,\r\n        MeshPhysicalMaterial: MeshPhysicalMaterial,\r\n        MeshStandardMaterial: MeshStandardMaterial,\r\n        MeshPhongMaterial: MeshPhongMaterial,\r\n        MeshToonMaterial: MeshToonMaterial,\r\n        MeshNormalMaterial: MeshNormalMaterial,\r\n        MeshLambertMaterial: MeshLambertMaterial,\r\n        MeshDepthMaterial: MeshDepthMaterial,\r\n        MeshDistanceMaterial: MeshDistanceMaterial,\r\n        MeshBasicMaterial: MeshBasicMaterial,\r\n        LineDashedMaterial: LineDashedMaterial,\r\n        LineBasicMaterial: LineBasicMaterial,\r\n        Material: Material\r\n    });\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var Cache = {\r\n\r\n        enabled: false,\r\n\r\n        files: {},\r\n\r\n        add: function ( key, file ) {\r\n\r\n            if ( this.enabled === false ) return;\r\n\r\n            // console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n            this.files[ key ] = file;\r\n\r\n        },\r\n\r\n        get: function ( key ) {\r\n\r\n            if ( this.enabled === false ) return;\r\n\r\n            // console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n            return this.files[ key ];\r\n\r\n        },\r\n\r\n        remove: function ( key ) {\r\n\r\n            delete this.files[ key ];\r\n\r\n        },\r\n\r\n        clear: function () {\r\n\r\n            this.files = {};\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LoadingManager( onLoad, onProgress, onError ) {\r\n\r\n        var scope = this;\r\n\r\n        var isLoading = false;\r\n        var itemsLoaded = 0;\r\n        var itemsTotal = 0;\r\n        var urlModifier = undefined;\r\n\r\n        this.onStart = undefined;\r\n        this.onLoad = onLoad;\r\n        this.onProgress = onProgress;\r\n        this.onError = onError;\r\n\r\n        this.itemStart = function ( url ) {\r\n\r\n            itemsTotal ++;\r\n\r\n            if ( isLoading === false ) {\r\n\r\n                if ( scope.onStart !== undefined ) {\r\n\r\n                    scope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            isLoading = true;\r\n\r\n        };\r\n\r\n        this.itemEnd = function ( url ) {\r\n\r\n            itemsLoaded ++;\r\n\r\n            if ( scope.onProgress !== undefined ) {\r\n\r\n                scope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n            }\r\n\r\n            if ( itemsLoaded === itemsTotal ) {\r\n\r\n                isLoading = false;\r\n\r\n                if ( scope.onLoad !== undefined ) {\r\n\r\n                    scope.onLoad();\r\n\r\n                }\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.itemError = function ( url ) {\r\n\r\n            if ( scope.onError !== undefined ) {\r\n\r\n                scope.onError( url );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.resolveURL = function ( url ) {\r\n\r\n            if ( urlModifier ) {\r\n\r\n                return urlModifier( url );\r\n\r\n            }\r\n\r\n            return url;\r\n\r\n        };\r\n\r\n        this.setURLModifier = function ( transform ) {\r\n\r\n            urlModifier = transform;\r\n            return this;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    var DefaultLoadingManager = new LoadingManager();\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var loading = {};\r\n\r\n    function FileLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( FileLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( url === undefined ) url = '';\r\n\r\n            if ( this.path !== undefined ) url = this.path + url;\r\n\r\n            url = this.manager.resolveURL( url );\r\n\r\n            var scope = this;\r\n\r\n            var cached = Cache.get( url );\r\n\r\n            if ( cached !== undefined ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                setTimeout( function () {\r\n\r\n                    if ( onLoad ) onLoad( cached );\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, 0 );\r\n\r\n                return cached;\r\n\r\n            }\r\n\r\n            // Check if request is duplicate\r\n\r\n            if ( loading[ url ] !== undefined ) {\r\n\r\n                loading[ url ].push( {\r\n\r\n                    onLoad: onLoad,\r\n                    onProgress: onProgress,\r\n                    onError: onError\r\n\r\n                } );\r\n\r\n                return;\r\n\r\n            }\r\n\r\n            // Check for data: URI\r\n            var dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\r\n            var dataUriRegexResult = url.match( dataUriRegex );\r\n\r\n            // Safari can not handle Data URIs through XMLHttpRequest so process manually\r\n            if ( dataUriRegexResult ) {\r\n\r\n                var mimeType = dataUriRegexResult[ 1 ];\r\n                var isBase64 = !! dataUriRegexResult[ 2 ];\r\n                var data = dataUriRegexResult[ 3 ];\r\n\r\n                data = window.decodeURIComponent( data );\r\n\r\n                if ( isBase64 ) data = window.atob( data );\r\n\r\n                try {\r\n\r\n                    var response;\r\n                    var responseType = ( this.responseType || '' ).toLowerCase();\r\n\r\n                    switch ( responseType ) {\r\n\r\n                        case 'arraybuffer':\r\n                        case 'blob':\r\n\r\n                            var view = new Uint8Array( data.length );\r\n\r\n                            for ( var i = 0; i < data.length; i ++ ) {\r\n\r\n                                view[ i ] = data.charCodeAt( i );\r\n\r\n                            }\r\n\r\n                            if ( responseType === 'blob' ) {\r\n\r\n                                response = new Blob( [ view.buffer ], { type: mimeType } );\r\n\r\n                            } else {\r\n\r\n                                response = view.buffer;\r\n\r\n                            }\r\n\r\n                            break;\r\n\r\n                        case 'document':\r\n\r\n                            var parser = new DOMParser();\r\n                            response = parser.parseFromString( data, mimeType );\r\n\r\n                            break;\r\n\r\n                        case 'json':\r\n\r\n                            response = JSON.parse( data );\r\n\r\n                            break;\r\n\r\n                        default: // 'text' or other\r\n\r\n                            response = data;\r\n\r\n                            break;\r\n\r\n                    }\r\n\r\n                    // Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n                    window.setTimeout( function () {\r\n\r\n                        if ( onLoad ) onLoad( response );\r\n\r\n                        scope.manager.itemEnd( url );\r\n\r\n                    }, 0 );\r\n\r\n                } catch ( error ) {\r\n\r\n                    // Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n                    window.setTimeout( function () {\r\n\r\n                        if ( onError ) onError( error );\r\n\r\n                        scope.manager.itemEnd( url );\r\n                        scope.manager.itemError( url );\r\n\r\n                    }, 0 );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                // Initialise array for duplicate requests\r\n\r\n                loading[ url ] = [];\r\n\r\n                loading[ url ].push( {\r\n\r\n                    onLoad: onLoad,\r\n                    onProgress: onProgress,\r\n                    onError: onError\r\n\r\n                } );\r\n\r\n                var request = new XMLHttpRequest();\r\n\r\n                request.open( 'GET', url, true );\r\n\r\n                request.addEventListener( 'load', function ( event ) {\r\n\r\n                    var response = this.response;\r\n\r\n                    Cache.add( url, response );\r\n\r\n                    var callbacks = loading[ url ];\r\n\r\n                    delete loading[ url ];\r\n\r\n                    if ( this.status === 200 || this.status === 0 ) {\r\n\r\n                        // Some browsers return HTTP Status 0 when using non-http protocol\r\n                        // e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n                        if ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\r\n\r\n                        for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                            var callback = callbacks[ i ];\r\n                            if ( callback.onLoad ) callback.onLoad( response );\r\n\r\n                        }\r\n\r\n                        scope.manager.itemEnd( url );\r\n\r\n                    } else {\r\n\r\n                        for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                            var callback = callbacks[ i ];\r\n                            if ( callback.onError ) callback.onError( event );\r\n\r\n                        }\r\n\r\n                        scope.manager.itemEnd( url );\r\n                        scope.manager.itemError( url );\r\n\r\n                    }\r\n\r\n                }, false );\r\n\r\n                request.addEventListener( 'progress', function ( event ) {\r\n\r\n                    var callbacks = loading[ url ];\r\n\r\n                    for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                        var callback = callbacks[ i ];\r\n                        if ( callback.onProgress ) callback.onProgress( event );\r\n\r\n                    }\r\n\r\n                }, false );\r\n\r\n                request.addEventListener( 'error', function ( event ) {\r\n\r\n                    var callbacks = loading[ url ];\r\n\r\n                    delete loading[ url ];\r\n\r\n                    for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                        var callback = callbacks[ i ];\r\n                        if ( callback.onError ) callback.onError( event );\r\n\r\n                    }\r\n\r\n                    scope.manager.itemEnd( url );\r\n                    scope.manager.itemError( url );\r\n\r\n                }, false );\r\n\r\n                if ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n                if ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n                if ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\r\n\r\n                for ( var header in this.requestHeader ) {\r\n\r\n                    request.setRequestHeader( header, this.requestHeader[ header ] );\r\n\r\n                }\r\n\r\n                request.send( null );\r\n\r\n            }\r\n\r\n            scope.manager.itemStart( url );\r\n\r\n            return request;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setResponseType: function ( value ) {\r\n\r\n            this.responseType = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setWithCredentials: function ( value ) {\r\n\r\n            this.withCredentials = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setMimeType: function ( value ) {\r\n\r\n            this.mimeType = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setRequestHeader: function ( value ) {\r\n\r\n            this.requestHeader = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     *\r\n     * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n     */\r\n\r\n    function CompressedTextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n        // override in sub classes\r\n        this._parser = null;\r\n\r\n    }\r\n\r\n    Object.assign( CompressedTextureLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var images = [];\r\n\r\n            var texture = new CompressedTexture();\r\n            texture.image = images;\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setPath( this.path );\r\n            loader.setResponseType( 'arraybuffer' );\r\n\r\n            function loadTexture( i ) {\r\n\r\n                loader.load( url[ i ], function ( buffer ) {\r\n\r\n                    var texDatas = scope._parser( buffer, true );\r\n\r\n                    images[ i ] = {\r\n                        width: texDatas.width,\r\n                        height: texDatas.height,\r\n                        format: texDatas.format,\r\n                        mipmaps: texDatas.mipmaps\r\n                    };\r\n\r\n                    loaded += 1;\r\n\r\n                    if ( loaded === 6 ) {\r\n\r\n                        if ( texDatas.mipmapCount === 1 )\r\n                            texture.minFilter = LinearFilter;\r\n\r\n                        texture.format = texDatas.format;\r\n                        texture.needsUpdate = true;\r\n\r\n                        if ( onLoad ) onLoad( texture );\r\n\r\n                    }\r\n\r\n                }, onProgress, onError );\r\n\r\n            }\r\n\r\n            if ( Array.isArray( url ) ) {\r\n\r\n                var loaded = 0;\r\n\r\n                for ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n                    loadTexture( i );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                // compressed cubemap texture stored in a single DDS file\r\n\r\n                loader.load( url, function ( buffer ) {\r\n\r\n                    var texDatas = scope._parser( buffer, true );\r\n\r\n                    if ( texDatas.isCubemap ) {\r\n\r\n                        var faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n                        for ( var f = 0; f < faces; f ++ ) {\r\n\r\n                            images[ f ] = { mipmaps: [] };\r\n\r\n                            for ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n                                images[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n                                images[ f ].format = texDatas.format;\r\n                                images[ f ].width = texDatas.width;\r\n                                images[ f ].height = texDatas.height;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        texture.image.width = texDatas.width;\r\n                        texture.image.height = texDatas.height;\r\n                        texture.mipmaps = texDatas.mipmaps;\r\n\r\n                    }\r\n\r\n                    if ( texDatas.mipmapCount === 1 ) {\r\n\r\n                        texture.minFilter = LinearFilter;\r\n\r\n                    }\r\n\r\n                    texture.format = texDatas.format;\r\n                    texture.needsUpdate = true;\r\n\r\n                    if ( onLoad ) onLoad( texture );\r\n\r\n                }, onProgress, onError );\r\n\r\n            }\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author Nikos M. / https://github.com/foo123/\r\n     *\r\n     * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n     */\r\n\r\n    function DataTextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n        // override in sub classes\r\n        this._parser = null;\r\n\r\n    }\r\n\r\n    Object.assign( DataTextureLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var texture = new DataTexture();\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setResponseType( 'arraybuffer' );\r\n\r\n            loader.load( url, function ( buffer ) {\r\n\r\n                var texData = scope._parser( buffer );\r\n\r\n                if ( ! texData ) return;\r\n\r\n                if ( undefined !== texData.image ) {\r\n\r\n                    texture.image = texData.image;\r\n\r\n                } else if ( undefined !== texData.data ) {\r\n\r\n                    texture.image.width = texData.width;\r\n                    texture.image.height = texData.height;\r\n                    texture.image.data = texData.data;\r\n\r\n                }\r\n\r\n                texture.wrapS = undefined !== texData.wrapS ? texData.wrapS : ClampToEdgeWrapping;\r\n                texture.wrapT = undefined !== texData.wrapT ? texData.wrapT : ClampToEdgeWrapping;\r\n\r\n                texture.magFilter = undefined !== texData.magFilter ? texData.magFilter : LinearFilter;\r\n                texture.minFilter = undefined !== texData.minFilter ? texData.minFilter : LinearMipMapLinearFilter;\r\n\r\n                texture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n                if ( undefined !== texData.format ) {\r\n\r\n                    texture.format = texData.format;\r\n\r\n                }\r\n                if ( undefined !== texData.type ) {\r\n\r\n                    texture.type = texData.type;\r\n\r\n                }\r\n\r\n                if ( undefined !== texData.mipmaps ) {\r\n\r\n                    texture.mipmaps = texData.mipmaps;\r\n\r\n                }\r\n\r\n                if ( 1 === texData.mipmapCount ) {\r\n\r\n                    texture.minFilter = LinearFilter;\r\n\r\n                }\r\n\r\n                texture.needsUpdate = true;\r\n\r\n                if ( onLoad ) onLoad( texture, texData );\r\n\r\n            }, onProgress, onError );\r\n\r\n\r\n            return texture;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function ImageLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( ImageLoader.prototype, {\r\n\r\n        crossOrigin: 'Anonymous',\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( url === undefined ) url = '';\r\n\r\n            if ( this.path !== undefined ) url = this.path + url;\r\n\r\n            url = this.manager.resolveURL( url );\r\n\r\n            var scope = this;\r\n\r\n            var cached = Cache.get( url );\r\n\r\n            if ( cached !== undefined ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                setTimeout( function () {\r\n\r\n                    if ( onLoad ) onLoad( cached );\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, 0 );\r\n\r\n                return cached;\r\n\r\n            }\r\n\r\n            var image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\r\n\r\n            function onImageLoad() {\r\n\r\n                image.removeEventListener( 'load', onImageLoad, false );\r\n                image.removeEventListener( 'error', onImageError, false );\r\n\r\n                Cache.add( url, this );\r\n\r\n                if ( onLoad ) onLoad( this );\r\n\r\n                scope.manager.itemEnd( url );\r\n\r\n            }\r\n\r\n            function onImageError( event ) {\r\n\r\n                image.removeEventListener( 'load', onImageLoad, false );\r\n                image.removeEventListener( 'error', onImageError, false );\r\n\r\n                if ( onError ) onError( event );\r\n\r\n                scope.manager.itemEnd( url );\r\n                scope.manager.itemError( url );\r\n\r\n            }\r\n\r\n            image.addEventListener( 'load', onImageLoad, false );\r\n            image.addEventListener( 'error', onImageError, false );\r\n\r\n            if ( url.substr( 0, 5 ) !== 'data:' ) {\r\n\r\n                if ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n            }\r\n\r\n            scope.manager.itemStart( url );\r\n\r\n            image.src = url;\r\n\r\n            return image;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function CubeTextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( CubeTextureLoader.prototype, {\r\n\r\n        crossOrigin: 'Anonymous',\r\n\r\n        load: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n            var texture = new CubeTexture();\r\n\r\n            var loader = new ImageLoader( this.manager );\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n            loader.setPath( this.path );\r\n\r\n            var loaded = 0;\r\n\r\n            function loadTexture( i ) {\r\n\r\n                loader.load( urls[ i ], function ( image ) {\r\n\r\n                    texture.images[ i ] = image;\r\n\r\n                    loaded ++;\r\n\r\n                    if ( loaded === 6 ) {\r\n\r\n                        texture.needsUpdate = true;\r\n\r\n                        if ( onLoad ) onLoad( texture );\r\n\r\n                    }\r\n\r\n                }, undefined, onError );\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < urls.length; ++ i ) {\r\n\r\n                loadTexture( i );\r\n\r\n            }\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function TextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( TextureLoader.prototype, {\r\n\r\n        crossOrigin: 'Anonymous',\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var texture = new Texture();\r\n\r\n            var loader = new ImageLoader( this.manager );\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n            loader.setPath( this.path );\r\n\r\n            loader.load( url, function ( image ) {\r\n\r\n                texture.image = image;\r\n\r\n                // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\r\n                var isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\r\n\r\n                texture.format = isJPEG ? RGBFormat : RGBAFormat;\r\n                texture.needsUpdate = true;\r\n\r\n                if ( onLoad !== undefined ) {\r\n\r\n                    onLoad( texture );\r\n\r\n                }\r\n\r\n            }, onProgress, onError );\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * Extensible curve object\r\n     *\r\n     * Some common of curve methods:\r\n     * .getPoint( t, optionalTarget ), .getTangent( t )\r\n     * .getPointAt( u, optionalTarget ), .getTangentAt( u )\r\n     * .getPoints(), .getSpacedPoints()\r\n     * .getLength()\r\n     * .updateArcLengths()\r\n     *\r\n     * This following curves inherit from THREE.Curve:\r\n     *\r\n     * -- 2D curves --\r\n     * THREE.ArcCurve\r\n     * THREE.CubicBezierCurve\r\n     * THREE.EllipseCurve\r\n     * THREE.LineCurve\r\n     * THREE.QuadraticBezierCurve\r\n     * THREE.SplineCurve\r\n     *\r\n     * -- 3D curves --\r\n     * THREE.CatmullRomCurve3\r\n     * THREE.CubicBezierCurve3\r\n     * THREE.LineCurve3\r\n     * THREE.QuadraticBezierCurve3\r\n     *\r\n     * A series of curves can be represented as a THREE.CurvePath.\r\n     *\r\n     **/\r\n\r\n    /**************************************************************\r\n     *\tAbstract Curve base class\r\n     **************************************************************/\r\n\r\n    function Curve() {\r\n\r\n        this.type = 'Curve';\r\n\r\n        this.arcLengthDivisions = 200;\r\n\r\n    }\r\n\r\n    Object.assign( Curve.prototype, {\r\n\r\n        // Virtual base class method to overwrite and implement in subclasses\r\n        //\t- t [0 .. 1]\r\n\r\n        getPoint: function ( /* t, optionalTarget */ ) {\r\n\r\n            console.warn( 'THREE.Curve: .getPoint() not implemented.' );\r\n            return null;\r\n\r\n        },\r\n\r\n        // Get point at relative position in curve according to arc length\r\n        // - u [0 .. 1]\r\n\r\n        getPointAt: function ( u, optionalTarget ) {\r\n\r\n            var t = this.getUtoTmapping( u );\r\n            return this.getPoint( t, optionalTarget );\r\n\r\n        },\r\n\r\n        // Get sequence of points using getPoint( t )\r\n\r\n        getPoints: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = 5;\r\n\r\n            var points = [];\r\n\r\n            for ( var d = 0; d <= divisions; d ++ ) {\r\n\r\n                points.push( this.getPoint( d / divisions ) );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        // Get sequence of points using getPointAt( u )\r\n\r\n        getSpacedPoints: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = 5;\r\n\r\n            var points = [];\r\n\r\n            for ( var d = 0; d <= divisions; d ++ ) {\r\n\r\n                points.push( this.getPointAt( d / divisions ) );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        // Get total curve arc length\r\n\r\n        getLength: function () {\r\n\r\n            var lengths = this.getLengths();\r\n            return lengths[ lengths.length - 1 ];\r\n\r\n        },\r\n\r\n        // Get list of cumulative segment lengths\r\n\r\n        getLengths: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = this.arcLengthDivisions;\r\n\r\n            if ( this.cacheArcLengths &&\r\n                ( this.cacheArcLengths.length === divisions + 1 ) &&\r\n                ! this.needsUpdate ) {\r\n\r\n                return this.cacheArcLengths;\r\n\r\n            }\r\n\r\n            this.needsUpdate = false;\r\n\r\n            var cache = [];\r\n            var current, last = this.getPoint( 0 );\r\n            var p, sum = 0;\r\n\r\n            cache.push( 0 );\r\n\r\n            for ( p = 1; p <= divisions; p ++ ) {\r\n\r\n                current = this.getPoint( p / divisions );\r\n                sum += current.distanceTo( last );\r\n                cache.push( sum );\r\n                last = current;\r\n\r\n            }\r\n\r\n            this.cacheArcLengths = cache;\r\n\r\n            return cache; // { sums: cache, sum: sum }; Sum is in the last element.\r\n\r\n        },\r\n\r\n        updateArcLengths: function () {\r\n\r\n            this.needsUpdate = true;\r\n            this.getLengths();\r\n\r\n        },\r\n\r\n        // Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n        getUtoTmapping: function ( u, distance ) {\r\n\r\n            var arcLengths = this.getLengths();\r\n\r\n            var i = 0, il = arcLengths.length;\r\n\r\n            var targetArcLength; // The targeted u distance value to get\r\n\r\n            if ( distance ) {\r\n\r\n                targetArcLength = distance;\r\n\r\n            } else {\r\n\r\n                targetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n            }\r\n\r\n            // binary search for the index with largest value smaller than target u distance\r\n\r\n            var low = 0, high = il - 1, comparison;\r\n\r\n            while ( low <= high ) {\r\n\r\n                i = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n                comparison = arcLengths[ i ] - targetArcLength;\r\n\r\n                if ( comparison < 0 ) {\r\n\r\n                    low = i + 1;\r\n\r\n                } else if ( comparison > 0 ) {\r\n\r\n                    high = i - 1;\r\n\r\n                } else {\r\n\r\n                    high = i;\r\n                    break;\r\n\r\n                    // DONE\r\n\r\n                }\r\n\r\n            }\r\n\r\n            i = high;\r\n\r\n            if ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n                return i / ( il - 1 );\r\n\r\n            }\r\n\r\n            // we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n            var lengthBefore = arcLengths[ i ];\r\n            var lengthAfter = arcLengths[ i + 1 ];\r\n\r\n            var segmentLength = lengthAfter - lengthBefore;\r\n\r\n            // determine where we are between the 'before' and 'after' points\r\n\r\n            var segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n            // add that fractional amount to t\r\n\r\n            var t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n            return t;\r\n\r\n        },\r\n\r\n        // Returns a unit vector tangent at t\r\n        // In case any sub curve does not implement its tangent derivation,\r\n        // 2 points a small delta apart will be used to find its gradient\r\n        // which seems to give a reasonable approximation\r\n\r\n        getTangent: function ( t ) {\r\n\r\n            var delta = 0.0001;\r\n            var t1 = t - delta;\r\n            var t2 = t + delta;\r\n\r\n            // Capping in case of danger\r\n\r\n            if ( t1 < 0 ) t1 = 0;\r\n            if ( t2 > 1 ) t2 = 1;\r\n\r\n            var pt1 = this.getPoint( t1 );\r\n            var pt2 = this.getPoint( t2 );\r\n\r\n            var vec = pt2.clone().sub( pt1 );\r\n            return vec.normalize();\r\n\r\n        },\r\n\r\n        getTangentAt: function ( u ) {\r\n\r\n            var t = this.getUtoTmapping( u );\r\n            return this.getTangent( t );\r\n\r\n        },\r\n\r\n        computeFrenetFrames: function ( segments, closed ) {\r\n\r\n            // see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n\r\n            var normal = new Vector3();\r\n\r\n            var tangents = [];\r\n            var normals = [];\r\n            var binormals = [];\r\n\r\n            var vec = new Vector3();\r\n            var mat = new Matrix4();\r\n\r\n            var i, u, theta;\r\n\r\n            // compute the tangent vectors for each segment on the curve\r\n\r\n            for ( i = 0; i <= segments; i ++ ) {\r\n\r\n                u = i / segments;\r\n\r\n                tangents[ i ] = this.getTangentAt( u );\r\n                tangents[ i ].normalize();\r\n\r\n            }\r\n\r\n            // select an initial normal vector perpendicular to the first tangent vector,\r\n            // and in the direction of the minimum tangent xyz component\r\n\r\n            normals[ 0 ] = new Vector3();\r\n            binormals[ 0 ] = new Vector3();\r\n            var min = Number.MAX_VALUE;\r\n            var tx = Math.abs( tangents[ 0 ].x );\r\n            var ty = Math.abs( tangents[ 0 ].y );\r\n            var tz = Math.abs( tangents[ 0 ].z );\r\n\r\n            if ( tx <= min ) {\r\n\r\n                min = tx;\r\n                normal.set( 1, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( ty <= min ) {\r\n\r\n                min = ty;\r\n                normal.set( 0, 1, 0 );\r\n\r\n            }\r\n\r\n            if ( tz <= min ) {\r\n\r\n                normal.set( 0, 0, 1 );\r\n\r\n            }\r\n\r\n            vec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n            normals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n            binormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\r\n            // compute the slowly-varying normal and binormal vectors for each segment on the curve\r\n\r\n            for ( i = 1; i <= segments; i ++ ) {\r\n\r\n                normals[ i ] = normals[ i - 1 ].clone();\r\n\r\n                binormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n                vec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n                if ( vec.length() > Number.EPSILON ) {\r\n\r\n                    vec.normalize();\r\n\r\n                    theta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n                    normals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n                }\r\n\r\n                binormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n            }\r\n\r\n            // if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n            if ( closed === true ) {\r\n\r\n                theta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\r\n                theta /= segments;\r\n\r\n                if ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\r\n\r\n                    theta = - theta;\r\n\r\n                }\r\n\r\n                for ( i = 1; i <= segments; i ++ ) {\r\n\r\n                    // twist a little...\r\n                    normals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n                    binormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return {\r\n                tangents: tangents,\r\n                normals: normals,\r\n                binormals: binormals\r\n            };\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.arcLengthDivisions = source.arcLengthDivisions;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Curve',\r\n                    generator: 'Curve.toJSON'\r\n                }\r\n            };\r\n\r\n            data.arcLengthDivisions = this.arcLengthDivisions;\r\n            data.type = this.type;\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            this.arcLengthDivisions = json.arcLengthDivisions;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    function EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'EllipseCurve';\r\n\r\n        this.aX = aX || 0;\r\n        this.aY = aY || 0;\r\n\r\n        this.xRadius = xRadius || 1;\r\n        this.yRadius = yRadius || 1;\r\n\r\n        this.aStartAngle = aStartAngle || 0;\r\n        this.aEndAngle = aEndAngle || 2 * Math.PI;\r\n\r\n        this.aClockwise = aClockwise || false;\r\n\r\n        this.aRotation = aRotation || 0;\r\n\r\n    }\r\n\r\n    EllipseCurve.prototype = Object.create( Curve.prototype );\r\n    EllipseCurve.prototype.constructor = EllipseCurve;\r\n\r\n    EllipseCurve.prototype.isEllipseCurve = true;\r\n\r\n    EllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var twoPi = Math.PI * 2;\r\n        var deltaAngle = this.aEndAngle - this.aStartAngle;\r\n        var samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\r\n\r\n        // ensures that deltaAngle is 0 .. 2 PI\r\n        while ( deltaAngle < 0 ) deltaAngle += twoPi;\r\n        while ( deltaAngle > twoPi ) deltaAngle -= twoPi;\r\n\r\n        if ( deltaAngle < Number.EPSILON ) {\r\n\r\n            if ( samePoints ) {\r\n\r\n                deltaAngle = 0;\r\n\r\n            } else {\r\n\r\n                deltaAngle = twoPi;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if ( this.aClockwise === true && ! samePoints ) {\r\n\r\n            if ( deltaAngle === twoPi ) {\r\n\r\n                deltaAngle = - twoPi;\r\n\r\n            } else {\r\n\r\n                deltaAngle = deltaAngle - twoPi;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var angle = this.aStartAngle + t * deltaAngle;\r\n        var x = this.aX + this.xRadius * Math.cos( angle );\r\n        var y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n        if ( this.aRotation !== 0 ) {\r\n\r\n            var cos = Math.cos( this.aRotation );\r\n            var sin = Math.sin( this.aRotation );\r\n\r\n            var tx = x - this.aX;\r\n            var ty = y - this.aY;\r\n\r\n            // Rotate the point about the center of the ellipse.\r\n            x = tx * cos - ty * sin + this.aX;\r\n            y = tx * sin + ty * cos + this.aY;\r\n\r\n        }\r\n\r\n        return point.set( x, y );\r\n\r\n    };\r\n\r\n    EllipseCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.aX = source.aX;\r\n        this.aY = source.aY;\r\n\r\n        this.xRadius = source.xRadius;\r\n        this.yRadius = source.yRadius;\r\n\r\n        this.aStartAngle = source.aStartAngle;\r\n        this.aEndAngle = source.aEndAngle;\r\n\r\n        this.aClockwise = source.aClockwise;\r\n\r\n        this.aRotation = source.aRotation;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n\r\n    EllipseCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.aX = this.aX;\r\n        data.aY = this.aY;\r\n\r\n        data.xRadius = this.xRadius;\r\n        data.yRadius = this.yRadius;\r\n\r\n        data.aStartAngle = this.aStartAngle;\r\n        data.aEndAngle = this.aEndAngle;\r\n\r\n        data.aClockwise = this.aClockwise;\r\n\r\n        data.aRotation = this.aRotation;\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    EllipseCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.aX = json.aX;\r\n        this.aY = json.aY;\r\n\r\n        this.xRadius = json.xRadius;\r\n        this.yRadius = json.yRadius;\r\n\r\n        this.aStartAngle = json.aStartAngle;\r\n        this.aEndAngle = json.aEndAngle;\r\n\r\n        this.aClockwise = json.aClockwise;\r\n\r\n        this.aRotation = json.aRotation;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n        EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n        this.type = 'ArcCurve';\r\n\r\n    }\r\n\r\n    ArcCurve.prototype = Object.create( EllipseCurve.prototype );\r\n    ArcCurve.prototype.constructor = ArcCurve;\r\n\r\n    ArcCurve.prototype.isArcCurve = true;\r\n\r\n    /**\r\n     * @author zz85 https://github.com/zz85\r\n     *\r\n     * Centripetal CatmullRom Curve - which is useful for avoiding\r\n     * cusps and self-intersections in non-uniform catmull rom curves.\r\n     * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n     *\r\n     * curve.type accepts centripetal(default), chordal and catmullrom\r\n     * curve.tension is used for catmullrom which defaults to 0.5\r\n     */\r\n\r\n\r\n    /*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n    function CubicPoly() {\r\n\r\n        var c0 = 0, c1 = 0, c2 = 0, c3 = 0;\r\n\r\n        /*\r\n\t\t * Compute coefficients for a cubic polynomial\r\n\t\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t\t * such that\r\n\t\t *   p(0) = x0, p(1) = x1\r\n\t\t *  and\r\n\t\t *   p'(0) = t0, p'(1) = t1.\r\n\t\t */\r\n        function init( x0, x1, t0, t1 ) {\r\n\r\n            c0 = x0;\r\n            c1 = t0;\r\n            c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n            c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            initCatmullRom: function ( x0, x1, x2, x3, tension ) {\r\n\r\n                init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n            },\r\n\r\n            initNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n                // compute tangents when parameterized in [t1,t2]\r\n                var t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n                var t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n                // rescale tangents for parametrization in [0,1]\r\n                t1 *= dt1;\r\n                t2 *= dt1;\r\n\r\n                init( x1, x2, t1, t2 );\r\n\r\n            },\r\n\r\n            calc: function ( t ) {\r\n\r\n                var t2 = t * t;\r\n                var t3 = t2 * t;\r\n                return c0 + c1 * t + c2 * t2 + c3 * t3;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    //\r\n\r\n    var tmp = new Vector3();\r\n    var px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\r\n\r\n    function CatmullRomCurve3( points, closed, curveType, tension ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CatmullRomCurve3';\r\n\r\n        this.points = points || [];\r\n        this.closed = closed || false;\r\n        this.curveType = curveType || 'centripetal';\r\n        this.tension = tension || 0.5;\r\n\r\n    }\r\n\r\n    CatmullRomCurve3.prototype = Object.create( Curve.prototype );\r\n    CatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\r\n\r\n    CatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\r\n\r\n    CatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        var points = this.points;\r\n        var l = points.length;\r\n\r\n        var p = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n        var intPoint = Math.floor( p );\r\n        var weight = p - intPoint;\r\n\r\n        if ( this.closed ) {\r\n\r\n            intPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\r\n\r\n        } else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n            intPoint = l - 2;\r\n            weight = 1;\r\n\r\n        }\r\n\r\n        var p0, p1, p2, p3; // 4 points\r\n\r\n        if ( this.closed || intPoint > 0 ) {\r\n\r\n            p0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n        } else {\r\n\r\n            // extrapolate first point\r\n            tmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n            p0 = tmp;\r\n\r\n        }\r\n\r\n        p1 = points[ intPoint % l ];\r\n        p2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n        if ( this.closed || intPoint + 2 < l ) {\r\n\r\n            p3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n        } else {\r\n\r\n            // extrapolate last point\r\n            tmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n            p3 = tmp;\r\n\r\n        }\r\n\r\n        if ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\r\n\r\n            // init Centripetal / Chordal Catmull-Rom\r\n            var pow = this.curveType === 'chordal' ? 0.5 : 0.25;\r\n            var dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n            var dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n            var dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n            // safety check for repeated points\r\n            if ( dt1 < 1e-4 ) dt1 = 1.0;\r\n            if ( dt0 < 1e-4 ) dt0 = dt1;\r\n            if ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n            px.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n            py.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n            pz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n        } else if ( this.curveType === 'catmullrom' ) {\r\n\r\n            px.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\r\n            py.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\r\n            pz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\r\n\r\n        }\r\n\r\n        point.set(\r\n            px.calc( weight ),\r\n            py.calc( weight ),\r\n            pz.calc( weight )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    CatmullRomCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n            var point = source.points[ i ];\r\n\r\n            this.points.push( point.clone() );\r\n\r\n        }\r\n\r\n        this.closed = source.closed;\r\n        this.curveType = source.curveType;\r\n        this.tension = source.tension;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    CatmullRomCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.points = [];\r\n\r\n        for ( var i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n            var point = this.points[ i ];\r\n            data.points.push( point.toArray() );\r\n\r\n        }\r\n\r\n        data.closed = this.closed;\r\n        data.curveType = this.curveType;\r\n        data.tension = this.tension;\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    CatmullRomCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n            var point = json.points[ i ];\r\n            this.points.push( new Vector3().fromArray( point ) );\r\n\r\n        }\r\n\r\n        this.closed = json.closed;\r\n        this.curveType = json.curveType;\r\n        this.tension = json.tension;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     *\r\n     * Bezier Curves formulas obtained from\r\n     * http://en.wikipedia.org/wiki/Bzier_curve\r\n     */\r\n\r\n    function CatmullRom( t, p0, p1, p2, p3 ) {\r\n\r\n        var v0 = ( p2 - p0 ) * 0.5;\r\n        var v1 = ( p3 - p1 ) * 0.5;\r\n        var t2 = t * t;\r\n        var t3 = t * t2;\r\n        return ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function QuadraticBezierP0( t, p ) {\r\n\r\n        var k = 1 - t;\r\n        return k * k * p;\r\n\r\n    }\r\n\r\n    function QuadraticBezierP1( t, p ) {\r\n\r\n        return 2 * ( 1 - t ) * t * p;\r\n\r\n    }\r\n\r\n    function QuadraticBezierP2( t, p ) {\r\n\r\n        return t * t * p;\r\n\r\n    }\r\n\r\n    function QuadraticBezier( t, p0, p1, p2 ) {\r\n\r\n        return QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\r\n            QuadraticBezierP2( t, p2 );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function CubicBezierP0( t, p ) {\r\n\r\n        var k = 1 - t;\r\n        return k * k * k * p;\r\n\r\n    }\r\n\r\n    function CubicBezierP1( t, p ) {\r\n\r\n        var k = 1 - t;\r\n        return 3 * k * k * t * p;\r\n\r\n    }\r\n\r\n    function CubicBezierP2( t, p ) {\r\n\r\n        return 3 * ( 1 - t ) * t * t * p;\r\n\r\n    }\r\n\r\n    function CubicBezierP3( t, p ) {\r\n\r\n        return t * t * t * p;\r\n\r\n    }\r\n\r\n    function CubicBezier( t, p0, p1, p2, p3 ) {\r\n\r\n        return CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\r\n            CubicBezierP3( t, p3 );\r\n\r\n    }\r\n\r\n    function CubicBezierCurve( v0, v1, v2, v3 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CubicBezierCurve';\r\n\r\n        this.v0 = v0 || new Vector2();\r\n        this.v1 = v1 || new Vector2();\r\n        this.v2 = v2 || new Vector2();\r\n        this.v3 = v3 || new Vector2();\r\n\r\n    }\r\n\r\n    CubicBezierCurve.prototype = Object.create( Curve.prototype );\r\n    CubicBezierCurve.prototype.constructor = CubicBezierCurve;\r\n\r\n    CubicBezierCurve.prototype.isCubicBezierCurve = true;\r\n\r\n    CubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n        point.set(\r\n            CubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n            CubicBezier( t, v0.y, v1.y, v2.y, v3.y )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    CubicBezierCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n        this.v3.copy( source.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    CubicBezierCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n        data.v3 = this.v3.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    CubicBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n        this.v3.fromArray( json.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function CubicBezierCurve3( v0, v1, v2, v3 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CubicBezierCurve3';\r\n\r\n        this.v0 = v0 || new Vector3();\r\n        this.v1 = v1 || new Vector3();\r\n        this.v2 = v2 || new Vector3();\r\n        this.v3 = v3 || new Vector3();\r\n\r\n    }\r\n\r\n    CubicBezierCurve3.prototype = Object.create( Curve.prototype );\r\n    CubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\r\n\r\n    CubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\r\n\r\n    CubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n        point.set(\r\n            CubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n            CubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\r\n            CubicBezier( t, v0.z, v1.z, v2.z, v3.z )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    CubicBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n        this.v3.copy( source.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    CubicBezierCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n        data.v3 = this.v3.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    CubicBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n        this.v3.fromArray( json.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function LineCurve( v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'LineCurve';\r\n\r\n        this.v1 = v1 || new Vector2();\r\n        this.v2 = v2 || new Vector2();\r\n\r\n    }\r\n\r\n    LineCurve.prototype = Object.create( Curve.prototype );\r\n    LineCurve.prototype.constructor = LineCurve;\r\n\r\n    LineCurve.prototype.isLineCurve = true;\r\n\r\n    LineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        if ( t === 1 ) {\r\n\r\n            point.copy( this.v2 );\r\n\r\n        } else {\r\n\r\n            point.copy( this.v2 ).sub( this.v1 );\r\n            point.multiplyScalar( t ).add( this.v1 );\r\n\r\n        }\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    // Line curve is linear, so we can overwrite default getPointAt\r\n\r\n    LineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n        return this.getPoint( u, optionalTarget );\r\n\r\n    };\r\n\r\n    LineCurve.prototype.getTangent = function ( /* t */ ) {\r\n\r\n        var tangent = this.v2.clone().sub( this.v1 );\r\n\r\n        return tangent.normalize();\r\n\r\n    };\r\n\r\n    LineCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    LineCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    LineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function LineCurve3( v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'LineCurve3';\r\n\r\n        this.v1 = v1 || new Vector3();\r\n        this.v2 = v2 || new Vector3();\r\n\r\n    }\r\n\r\n    LineCurve3.prototype = Object.create( Curve.prototype );\r\n    LineCurve3.prototype.constructor = LineCurve3;\r\n\r\n    LineCurve3.prototype.isLineCurve3 = true;\r\n\r\n    LineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        if ( t === 1 ) {\r\n\r\n            point.copy( this.v2 );\r\n\r\n        } else {\r\n\r\n            point.copy( this.v2 ).sub( this.v1 );\r\n            point.multiplyScalar( t ).add( this.v1 );\r\n\r\n        }\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    // Line curve is linear, so we can overwrite default getPointAt\r\n\r\n    LineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n        return this.getPoint( u, optionalTarget );\r\n\r\n    };\r\n\r\n    LineCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    LineCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    LineCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function QuadraticBezierCurve( v0, v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'QuadraticBezierCurve';\r\n\r\n        this.v0 = v0 || new Vector2();\r\n        this.v1 = v1 || new Vector2();\r\n        this.v2 = v2 || new Vector2();\r\n\r\n    }\r\n\r\n    QuadraticBezierCurve.prototype = Object.create( Curve.prototype );\r\n    QuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\r\n\r\n    QuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\r\n\r\n    QuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n        point.set(\r\n            QuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n            QuadraticBezier( t, v0.y, v1.y, v2.y )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function QuadraticBezierCurve3( v0, v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'QuadraticBezierCurve3';\r\n\r\n        this.v0 = v0 || new Vector3();\r\n        this.v1 = v1 || new Vector3();\r\n        this.v2 = v2 || new Vector3();\r\n\r\n    }\r\n\r\n    QuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\r\n    QuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\r\n\r\n    QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\r\n\r\n    QuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n        point.set(\r\n            QuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n            QuadraticBezier( t, v0.y, v1.y, v2.y ),\r\n            QuadraticBezier( t, v0.z, v1.z, v2.z )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function SplineCurve( points /* array of Vector2 */ ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'SplineCurve';\r\n\r\n        this.points = points || [];\r\n\r\n    }\r\n\r\n    SplineCurve.prototype = Object.create( Curve.prototype );\r\n    SplineCurve.prototype.constructor = SplineCurve;\r\n\r\n    SplineCurve.prototype.isSplineCurve = true;\r\n\r\n    SplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var points = this.points;\r\n        var p = ( points.length - 1 ) * t;\r\n\r\n        var intPoint = Math.floor( p );\r\n        var weight = p - intPoint;\r\n\r\n        var p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n        var p1 = points[ intPoint ];\r\n        var p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n        var p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n        point.set(\r\n            CatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\r\n            CatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    SplineCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n            var point = source.points[ i ];\r\n\r\n            this.points.push( point.clone() );\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    SplineCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.points = [];\r\n\r\n        for ( var i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n            var point = this.points[ i ];\r\n            data.points.push( point.toArray() );\r\n\r\n        }\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    SplineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n            var point = json.points[ i ];\r\n            this.points.push( new Vector2().fromArray( point ) );\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n\r\n\r\n    var Curves = /*#__PURE__*/Object.freeze({\r\n        ArcCurve: ArcCurve,\r\n        CatmullRomCurve3: CatmullRomCurve3,\r\n        CubicBezierCurve: CubicBezierCurve,\r\n        CubicBezierCurve3: CubicBezierCurve3,\r\n        EllipseCurve: EllipseCurve,\r\n        LineCurve: LineCurve,\r\n        LineCurve3: LineCurve3,\r\n        QuadraticBezierCurve: QuadraticBezierCurve,\r\n        QuadraticBezierCurve3: QuadraticBezierCurve3,\r\n        SplineCurve: SplineCurve\r\n    });\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     *\r\n     **/\r\n\r\n    /**************************************************************\r\n     *\tCurved Path - a curve path is simply a array of connected\r\n     *  curves, but retains the api of a curve\r\n     **************************************************************/\r\n\r\n    function CurvePath() {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CurvePath';\r\n\r\n        this.curves = [];\r\n        this.autoClose = false; // Automatically closes the path\r\n\r\n    }\r\n\r\n    CurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\r\n\r\n        constructor: CurvePath,\r\n\r\n        add: function ( curve ) {\r\n\r\n            this.curves.push( curve );\r\n\r\n        },\r\n\r\n        closePath: function () {\r\n\r\n            // Add a line curve if start and end of lines are not connected\r\n            var startPoint = this.curves[ 0 ].getPoint( 0 );\r\n            var endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n            if ( ! startPoint.equals( endPoint ) ) {\r\n\r\n                this.curves.push( new LineCurve( endPoint, startPoint ) );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // To get accurate point with reference to\r\n        // entire path distance at time t,\r\n        // following has to be done:\r\n\r\n        // 1. Length of each sub path have to be known\r\n        // 2. Locate and identify type of curve\r\n        // 3. Get t for the curve\r\n        // 4. Return curve.getPointAt(t')\r\n\r\n        getPoint: function ( t ) {\r\n\r\n            var d = t * this.getLength();\r\n            var curveLengths = this.getCurveLengths();\r\n            var i = 0;\r\n\r\n            // To think about boundaries points.\r\n\r\n            while ( i < curveLengths.length ) {\r\n\r\n                if ( curveLengths[ i ] >= d ) {\r\n\r\n                    var diff = curveLengths[ i ] - d;\r\n                    var curve = this.curves[ i ];\r\n\r\n                    var segmentLength = curve.getLength();\r\n                    var u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\r\n\r\n                    return curve.getPointAt( u );\r\n\r\n                }\r\n\r\n                i ++;\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n            // loop where sum != 0, sum > d , sum+1 <d\r\n\r\n        },\r\n\r\n        // We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n        // THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n        // getPoint() depends on getLength\r\n\r\n        getLength: function () {\r\n\r\n            var lens = this.getCurveLengths();\r\n            return lens[ lens.length - 1 ];\r\n\r\n        },\r\n\r\n        // cacheLengths must be recalculated.\r\n        updateArcLengths: function () {\r\n\r\n            this.needsUpdate = true;\r\n            this.cacheLengths = null;\r\n            this.getCurveLengths();\r\n\r\n        },\r\n\r\n        // Compute lengths and cache them\r\n        // We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\n        getCurveLengths: function () {\r\n\r\n            // We use cache values if curves and cache array are same length\r\n\r\n            if ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n                return this.cacheLengths;\r\n\r\n            }\r\n\r\n            // Get length of sub-curve\r\n            // Push sums into cached array\r\n\r\n            var lengths = [], sums = 0;\r\n\r\n            for ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n                sums += this.curves[ i ].getLength();\r\n                lengths.push( sums );\r\n\r\n            }\r\n\r\n            this.cacheLengths = lengths;\r\n\r\n            return lengths;\r\n\r\n        },\r\n\r\n        getSpacedPoints: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = 40;\r\n\r\n            var points = [];\r\n\r\n            for ( var i = 0; i <= divisions; i ++ ) {\r\n\r\n                points.push( this.getPoint( i / divisions ) );\r\n\r\n            }\r\n\r\n            if ( this.autoClose ) {\r\n\r\n                points.push( points[ 0 ] );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        getPoints: function ( divisions ) {\r\n\r\n            divisions = divisions || 12;\r\n\r\n            var points = [], last;\r\n\r\n            for ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\r\n\r\n                var curve = curves[ i ];\r\n                var resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\r\n                    : ( curve && curve.isLineCurve ) ? 1\r\n                        : ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\r\n                            : divisions;\r\n\r\n                var pts = curve.getPoints( resolution );\r\n\r\n                for ( var j = 0; j < pts.length; j ++ ) {\r\n\r\n                    var point = pts[ j ];\r\n\r\n                    if ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\r\n\r\n                    points.push( point );\r\n                    last = point;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n                points.push( points[ 0 ] );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Curve.prototype.copy.call( this, source );\r\n\r\n            this.curves = [];\r\n\r\n            for ( var i = 0, l = source.curves.length; i < l; i ++ ) {\r\n\r\n                var curve = source.curves[ i ];\r\n\r\n                this.curves.push( curve.clone() );\r\n\r\n            }\r\n\r\n            this.autoClose = source.autoClose;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = Curve.prototype.toJSON.call( this );\r\n\r\n            data.autoClose = this.autoClose;\r\n            data.curves = [];\r\n\r\n            for ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n                var curve = this.curves[ i ];\r\n                data.curves.push( curve.toJSON() );\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            Curve.prototype.fromJSON.call( this, json );\r\n\r\n            this.autoClose = json.autoClose;\r\n            this.curves = [];\r\n\r\n            for ( var i = 0, l = json.curves.length; i < l; i ++ ) {\r\n\r\n                var curve = json.curves[ i ];\r\n                this.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * Creates free form 2d path using series of points, lines or curves.\r\n     **/\r\n\r\n    function Path( points ) {\r\n\r\n        CurvePath.call( this );\r\n\r\n        this.type = 'Path';\r\n\r\n        this.currentPoint = new Vector2();\r\n\r\n        if ( points ) {\r\n\r\n            this.setFromPoints( points );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Path.prototype = Object.assign( Object.create( CurvePath.prototype ), {\r\n\r\n        constructor: Path,\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.moveTo( points[ 0 ].x, points[ 0 ].y );\r\n\r\n            for ( var i = 1, l = points.length; i < l; i ++ ) {\r\n\r\n                this.lineTo( points[ i ].x, points[ i ].y );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        moveTo: function ( x, y ) {\r\n\r\n            this.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\r\n\r\n        },\r\n\r\n        lineTo: function ( x, y ) {\r\n\r\n            var curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.set( x, y );\r\n\r\n        },\r\n\r\n        quadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n            var curve = new QuadraticBezierCurve(\r\n                this.currentPoint.clone(),\r\n                new Vector2( aCPx, aCPy ),\r\n                new Vector2( aX, aY )\r\n            );\r\n\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.set( aX, aY );\r\n\r\n        },\r\n\r\n        bezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n            var curve = new CubicBezierCurve(\r\n                this.currentPoint.clone(),\r\n                new Vector2( aCP1x, aCP1y ),\r\n                new Vector2( aCP2x, aCP2y ),\r\n                new Vector2( aX, aY )\r\n            );\r\n\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.set( aX, aY );\r\n\r\n        },\r\n\r\n        splineThru: function ( pts /*Array of Vector*/ ) {\r\n\r\n            var npts = [ this.currentPoint.clone() ].concat( pts );\r\n\r\n            var curve = new SplineCurve( npts );\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.copy( pts[ pts.length - 1 ] );\r\n\r\n        },\r\n\r\n        arc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n            var x0 = this.currentPoint.x;\r\n            var y0 = this.currentPoint.y;\r\n\r\n            this.absarc( aX + x0, aY + y0, aRadius,\r\n                aStartAngle, aEndAngle, aClockwise );\r\n\r\n        },\r\n\r\n        absarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n            this.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n        },\r\n\r\n        ellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n            var x0 = this.currentPoint.x;\r\n            var y0 = this.currentPoint.y;\r\n\r\n            this.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n        },\r\n\r\n        absellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n            var curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n            if ( this.curves.length > 0 ) {\r\n\r\n                // if a previous curve is present, attempt to join\r\n                var firstPoint = curve.getPoint( 0 );\r\n\r\n                if ( ! firstPoint.equals( this.currentPoint ) ) {\r\n\r\n                    this.lineTo( firstPoint.x, firstPoint.y );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.curves.push( curve );\r\n\r\n            var lastPoint = curve.getPoint( 1 );\r\n            this.currentPoint.copy( lastPoint );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            CurvePath.prototype.copy.call( this, source );\r\n\r\n            this.currentPoint.copy( source.currentPoint );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = CurvePath.prototype.toJSON.call( this );\r\n\r\n            data.currentPoint = this.currentPoint.toArray();\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            CurvePath.prototype.fromJSON.call( this, json );\r\n\r\n            this.currentPoint.fromArray( json.currentPoint );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * Defines a 2d shape plane using paths.\r\n     **/\r\n\r\n    // STEP 1 Create a path.\r\n    // STEP 2 Turn path into shape.\r\n    // STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n    // STEP 3a - Extract points from each shape, turn to vertices\r\n    // STEP 3b - Triangulate each shape, add faces.\r\n\r\n    function Shape( points ) {\r\n\r\n        Path.call( this, points );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.type = 'Shape';\r\n\r\n        this.holes = [];\r\n\r\n    }\r\n\r\n    Shape.prototype = Object.assign( Object.create( Path.prototype ), {\r\n\r\n        constructor: Shape,\r\n\r\n        getPointsHoles: function ( divisions ) {\r\n\r\n            var holesPts = [];\r\n\r\n            for ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n                holesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n            }\r\n\r\n            return holesPts;\r\n\r\n        },\r\n\r\n        // get points of shape and holes (keypoints based on segments parameter)\r\n\r\n        extractPoints: function ( divisions ) {\r\n\r\n            return {\r\n\r\n                shape: this.getPoints( divisions ),\r\n                holes: this.getPointsHoles( divisions )\r\n\r\n            };\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Path.prototype.copy.call( this, source );\r\n\r\n            this.holes = [];\r\n\r\n            for ( var i = 0, l = source.holes.length; i < l; i ++ ) {\r\n\r\n                var hole = source.holes[ i ];\r\n\r\n                this.holes.push( hole.clone() );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = Path.prototype.toJSON.call( this );\r\n\r\n            data.uuid = this.uuid;\r\n            data.holes = [];\r\n\r\n            for ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n                var hole = this.holes[ i ];\r\n                data.holes.push( hole.toJSON() );\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            Path.prototype.fromJSON.call( this, json );\r\n\r\n            this.uuid = json.uuid;\r\n            this.holes = [];\r\n\r\n            for ( var i = 0, l = json.holes.length; i < l; i ++ ) {\r\n\r\n                var hole = json.holes[ i ];\r\n                this.holes.push( new Path().fromJSON( hole ) );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Light( color, intensity ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Light';\r\n\r\n        this.color = new Color( color );\r\n        this.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n        this.receiveShadow = undefined;\r\n\r\n    }\r\n\r\n    Light.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Light,\r\n\r\n        isLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source );\r\n\r\n            this.color.copy( source.color );\r\n            this.intensity = source.intensity;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.color = this.color.getHex();\r\n            data.object.intensity = this.intensity;\r\n\r\n            if ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n            if ( this.distance !== undefined ) data.object.distance = this.distance;\r\n            if ( this.angle !== undefined ) data.object.angle = this.angle;\r\n            if ( this.decay !== undefined ) data.object.decay = this.decay;\r\n            if ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n            if ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function HemisphereLight( skyColor, groundColor, intensity ) {\r\n\r\n        Light.call( this, skyColor, intensity );\r\n\r\n        this.type = 'HemisphereLight';\r\n\r\n        this.castShadow = undefined;\r\n\r\n        this.position.copy( Object3D.DefaultUp );\r\n        this.updateMatrix();\r\n\r\n        this.groundColor = new Color( groundColor );\r\n\r\n    }\r\n\r\n    HemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: HemisphereLight,\r\n\r\n        isHemisphereLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.groundColor.copy( source.groundColor );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LightShadow( camera ) {\r\n\r\n        this.camera = camera;\r\n\r\n        this.bias = 0;\r\n        this.radius = 1;\r\n\r\n        this.mapSize = new Vector2( 512, 512 );\r\n\r\n        this.map = null;\r\n        this.matrix = new Matrix4();\r\n\r\n    }\r\n\r\n    Object.assign( LightShadow.prototype, {\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.camera = source.camera.clone();\r\n\r\n            this.bias = source.bias;\r\n            this.radius = source.radius;\r\n\r\n            this.mapSize.copy( source.mapSize );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var object = {};\r\n\r\n            if ( this.bias !== 0 ) object.bias = this.bias;\r\n            if ( this.radius !== 1 ) object.radius = this.radius;\r\n            if ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\r\n\r\n            object.camera = this.camera.toJSON( false ).object;\r\n            delete object.camera.matrix;\r\n\r\n            return object;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function SpotLightShadow() {\r\n\r\n        LightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n    }\r\n\r\n    SpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n        constructor: SpotLightShadow,\r\n\r\n        isSpotLightShadow: true,\r\n\r\n        update: function ( light ) {\r\n\r\n            var camera = this.camera;\r\n\r\n            var fov = _Math.RAD2DEG * 2 * light.angle;\r\n            var aspect = this.mapSize.width / this.mapSize.height;\r\n            var far = light.distance || camera.far;\r\n\r\n            if ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\r\n\r\n                camera.fov = fov;\r\n                camera.aspect = aspect;\r\n                camera.far = far;\r\n                camera.updateProjectionMatrix();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function SpotLight( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'SpotLight';\r\n\r\n        this.position.copy( Object3D.DefaultUp );\r\n        this.updateMatrix();\r\n\r\n        this.target = new Object3D();\r\n\r\n        Object.defineProperty( this, 'power', {\r\n            get: function () {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                return this.intensity * Math.PI;\r\n\r\n            },\r\n            set: function ( power ) {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                this.intensity = power / Math.PI;\r\n\r\n            }\r\n        } );\r\n\r\n        this.distance = ( distance !== undefined ) ? distance : 0;\r\n        this.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n        this.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n        this.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n        this.shadow = new SpotLightShadow();\r\n\r\n    }\r\n\r\n    SpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: SpotLight,\r\n\r\n        isSpotLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.distance = source.distance;\r\n            this.angle = source.angle;\r\n            this.penumbra = source.penumbra;\r\n            this.decay = source.decay;\r\n\r\n            this.target = source.target.clone();\r\n\r\n            this.shadow = source.shadow.clone();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function PointLight( color, intensity, distance, decay ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'PointLight';\r\n\r\n        Object.defineProperty( this, 'power', {\r\n            get: function () {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                return this.intensity * 4 * Math.PI;\r\n\r\n            },\r\n            set: function ( power ) {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                this.intensity = power / ( 4 * Math.PI );\r\n\r\n            }\r\n        } );\r\n\r\n        this.distance = ( distance !== undefined ) ? distance : 0;\r\n        this.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n        this.shadow = new LightShadow( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n    }\r\n\r\n    PointLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: PointLight,\r\n\r\n        isPointLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.distance = source.distance;\r\n            this.decay = source.decay;\r\n\r\n            this.shadow = source.shadow.clone();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function DirectionalLightShadow( ) {\r\n\r\n        LightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n    }\r\n\r\n    DirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n        constructor: DirectionalLightShadow\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function DirectionalLight( color, intensity ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'DirectionalLight';\r\n\r\n        this.position.copy( Object3D.DefaultUp );\r\n        this.updateMatrix();\r\n\r\n        this.target = new Object3D();\r\n\r\n        this.shadow = new DirectionalLightShadow();\r\n\r\n    }\r\n\r\n    DirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: DirectionalLight,\r\n\r\n        isDirectionalLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.target = source.target.clone();\r\n\r\n            this.shadow = source.shadow.clone();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AmbientLight( color, intensity ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'AmbientLight';\r\n\r\n        this.castShadow = undefined;\r\n\r\n    }\r\n\r\n    AmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: AmbientLight,\r\n\r\n        isAmbientLight: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author abelnation / http://github.com/abelnation\r\n     */\r\n\r\n    function RectAreaLight( color, intensity, width, height ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'RectAreaLight';\r\n\r\n        this.width = ( width !== undefined ) ? width : 10;\r\n        this.height = ( height !== undefined ) ? height : 10;\r\n\r\n    }\r\n\r\n    RectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: RectAreaLight,\r\n\r\n        isRectAreaLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.width = source.width;\r\n            this.height = source.height;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Light.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.width = this.width;\r\n            data.object.height = this.height;\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track that interpolates Strings\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function StringKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    StringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: StringKeyframeTrack,\r\n\r\n        ValueTypeName: 'string',\r\n        ValueBufferType: Array,\r\n\r\n        DefaultInterpolation: InterpolateDiscrete,\r\n\r\n        InterpolantFactoryMethodLinear: undefined,\r\n\r\n        InterpolantFactoryMethodSmooth: undefined\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of Boolean keyframe values.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function BooleanKeyframeTrack( name, times, values ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values );\r\n\r\n    }\r\n\r\n    BooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: BooleanKeyframeTrack,\r\n\r\n        ValueTypeName: 'bool',\r\n        ValueBufferType: Array,\r\n\r\n        DefaultInterpolation: InterpolateDiscrete,\r\n\r\n        InterpolantFactoryMethodLinear: undefined,\r\n        InterpolantFactoryMethodSmooth: undefined\r\n\r\n        // Note: Actually this track could have a optimized / compressed\r\n        // representation of a single value and a custom interpolant that\r\n        // computes \"firstValue ^ isOdd( index )\".\r\n\r\n    } );\r\n\r\n    /**\r\n     * Abstract base class of interpolants over parametric samples.\r\n     *\r\n     * The parameter domain is one dimensional, typically the time or a path\r\n     * along a curve defined by the data.\r\n     *\r\n     * The sample values can have any dimensionality and derived classes may\r\n     * apply special interpretations to the data.\r\n     *\r\n     * This class provides the interval seek in a Template Method, deferring\r\n     * the actual interpolation to derived classes.\r\n     *\r\n     * Time complexity is O(1) for linear access crossing at most two points\r\n     * and O(log N) for random access, where N is the number of positions.\r\n     *\r\n     * References:\r\n     *\r\n     * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        this.parameterPositions = parameterPositions;\r\n        this._cachedIndex = 0;\r\n\r\n        this.resultBuffer = resultBuffer !== undefined ?\r\n            resultBuffer : new sampleValues.constructor( sampleSize );\r\n        this.sampleValues = sampleValues;\r\n        this.valueSize = sampleSize;\r\n\r\n    }\r\n\r\n    Object.assign( Interpolant.prototype, {\r\n\r\n        evaluate: function ( t ) {\r\n\r\n            var pp = this.parameterPositions,\r\n                i1 = this._cachedIndex,\r\n\r\n                t1 = pp[ i1 ],\r\n                t0 = pp[ i1 - 1 ];\r\n\r\n            validate_interval: {\r\n\r\n                seek: {\r\n\r\n                    var right;\r\n\r\n                    linear_scan: {\r\n\r\n                        //- See http://jsperf.com/comparison-to-undefined/3\r\n                        //- slower code:\r\n                        //-\r\n                        //- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n                        forward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n                            for ( var giveUpAt = i1 + 2; ; ) {\r\n\r\n                                if ( t1 === undefined ) {\r\n\r\n                                    if ( t < t0 ) break forward_scan;\r\n\r\n                                    // after end\r\n\r\n                                    i1 = pp.length;\r\n                                    this._cachedIndex = i1;\r\n                                    return this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n                                }\r\n\r\n                                if ( i1 === giveUpAt ) break; // this loop\r\n\r\n                                t0 = t1;\r\n                                t1 = pp[ ++ i1 ];\r\n\r\n                                if ( t < t1 ) {\r\n\r\n                                    // we have arrived at the sought interval\r\n                                    break seek;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                            // prepare binary search on the right side of the index\r\n                            right = pp.length;\r\n                            break linear_scan;\r\n\r\n                        }\r\n\r\n                        //- slower code:\r\n                        //-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n                        if ( ! ( t >= t0 ) ) {\r\n\r\n                            // looping?\r\n\r\n                            var t1global = pp[ 1 ];\r\n\r\n                            if ( t < t1global ) {\r\n\r\n                                i1 = 2; // + 1, using the scan for the details\r\n                                t0 = t1global;\r\n\r\n                            }\r\n\r\n                            // linear reverse scan\r\n\r\n                            for ( var giveUpAt = i1 - 2; ; ) {\r\n\r\n                                if ( t0 === undefined ) {\r\n\r\n                                    // before start\r\n\r\n                                    this._cachedIndex = 0;\r\n                                    return this.beforeStart_( 0, t, t1 );\r\n\r\n                                }\r\n\r\n                                if ( i1 === giveUpAt ) break; // this loop\r\n\r\n                                t1 = t0;\r\n                                t0 = pp[ -- i1 - 1 ];\r\n\r\n                                if ( t >= t0 ) {\r\n\r\n                                    // we have arrived at the sought interval\r\n                                    break seek;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                            // prepare binary search on the left side of the index\r\n                            right = i1;\r\n                            i1 = 0;\r\n                            break linear_scan;\r\n\r\n                        }\r\n\r\n                        // the interval is valid\r\n\r\n                        break validate_interval;\r\n\r\n                    } // linear scan\r\n\r\n                    // binary search\r\n\r\n                    while ( i1 < right ) {\r\n\r\n                        var mid = ( i1 + right ) >>> 1;\r\n\r\n                        if ( t < pp[ mid ] ) {\r\n\r\n                            right = mid;\r\n\r\n                        } else {\r\n\r\n                            i1 = mid + 1;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    t1 = pp[ i1 ];\r\n                    t0 = pp[ i1 - 1 ];\r\n\r\n                    // check boundary cases, again\r\n\r\n                    if ( t0 === undefined ) {\r\n\r\n                        this._cachedIndex = 0;\r\n                        return this.beforeStart_( 0, t, t1 );\r\n\r\n                    }\r\n\r\n                    if ( t1 === undefined ) {\r\n\r\n                        i1 = pp.length;\r\n                        this._cachedIndex = i1;\r\n                        return this.afterEnd_( i1 - 1, t0, t );\r\n\r\n                    }\r\n\r\n                } // seek\r\n\r\n                this._cachedIndex = i1;\r\n\r\n                this.intervalChanged_( i1, t0, t1 );\r\n\r\n            } // validate_interval\r\n\r\n            return this.interpolate_( i1, t0, t, t1 );\r\n\r\n        },\r\n\r\n        settings: null, // optional, subclass-specific settings structure\r\n        // Note: The indirection allows central control of many interpolants.\r\n\r\n        // --- Protected interface\r\n\r\n        DefaultSettings_: {},\r\n\r\n        getSettings_: function () {\r\n\r\n            return this.settings || this.DefaultSettings_;\r\n\r\n        },\r\n\r\n        copySampleValue_: function ( index ) {\r\n\r\n            // copies a sample value to the result buffer\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n                offset = index * stride;\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                result[ i ] = values[ offset + i ];\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        },\r\n\r\n        // Template methods for derived classes:\r\n\r\n        interpolate_: function ( /* i1, t0, t, t1 */ ) {\r\n\r\n            throw new Error( 'call to abstract method' );\r\n            // implementations shall return this.resultBuffer\r\n\r\n        },\r\n\r\n        intervalChanged_: function ( /* i1, t0, t1 */ ) {\r\n\r\n            // empty\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //!\\ DECLARE ALIAS AFTER assign prototype !\r\n    Object.assign( Interpolant.prototype, {\r\n\r\n        //( 0, t, t0 ), returns this.resultBuffer\r\n        beforeStart_: Interpolant.prototype.copySampleValue_,\r\n\r\n        //( N-1, tN-1, t ), returns this.resultBuffer\r\n        afterEnd_: Interpolant.prototype.copySampleValue_,\r\n\r\n    } );\r\n\r\n    /**\r\n     * Spherical linear unit quaternion interpolant.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n    }\r\n\r\n    QuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: QuaternionLinearInterpolant,\r\n\r\n        interpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n\r\n                offset = i1 * stride,\r\n\r\n                alpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n            for ( var end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n                Quaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of quaternion keyframe values.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function QuaternionKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    QuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: QuaternionKeyframeTrack,\r\n\r\n        ValueTypeName: 'quaternion',\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        DefaultInterpolation: InterpolateLinear,\r\n\r\n        InterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n            return new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        InterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of keyframe values that represent color.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function ColorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    ColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: ColorKeyframeTrack,\r\n\r\n        ValueTypeName: 'color'\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        // DefaultInterpolation is inherited\r\n\r\n        // Note: Very basic implementation and nothing special yet.\r\n        // However, this is the place for color space parameterization.\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of numeric keyframe values.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function NumberKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    NumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: NumberKeyframeTrack,\r\n\r\n        ValueTypeName: 'number'\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        // DefaultInterpolation is inherited\r\n\r\n    } );\r\n\r\n    /**\r\n     * Fast and simple cubic spline interpolant.\r\n     *\r\n     * It was derived from a Hermitian construction setting the first derivative\r\n     * at each sample position to the linear slope between neighboring positions\r\n     * over their parameter interval.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n        this._weightPrev = - 0;\r\n        this._offsetPrev = - 0;\r\n        this._weightNext = - 0;\r\n        this._offsetNext = - 0;\r\n\r\n    }\r\n\r\n    CubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: CubicInterpolant,\r\n\r\n        DefaultSettings_: {\r\n\r\n            endingStart: ZeroCurvatureEnding,\r\n            endingEnd: ZeroCurvatureEnding\r\n\r\n        },\r\n\r\n        intervalChanged_: function ( i1, t0, t1 ) {\r\n\r\n            var pp = this.parameterPositions,\r\n                iPrev = i1 - 2,\r\n                iNext = i1 + 1,\r\n\r\n                tPrev = pp[ iPrev ],\r\n                tNext = pp[ iNext ];\r\n\r\n            if ( tPrev === undefined ) {\r\n\r\n                switch ( this.getSettings_().endingStart ) {\r\n\r\n                    case ZeroSlopeEnding:\r\n\r\n                        // f'(t0) = 0\r\n                        iPrev = i1;\r\n                        tPrev = 2 * t0 - t1;\r\n\r\n                        break;\r\n\r\n                    case WrapAroundEnding:\r\n\r\n                        // use the other end of the curve\r\n                        iPrev = pp.length - 2;\r\n                        tPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n                        break;\r\n\r\n                    default: // ZeroCurvatureEnding\r\n\r\n                        // f''(t0) = 0 a.k.a. Natural Spline\r\n                        iPrev = i1;\r\n                        tPrev = t1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( tNext === undefined ) {\r\n\r\n                switch ( this.getSettings_().endingEnd ) {\r\n\r\n                    case ZeroSlopeEnding:\r\n\r\n                        // f'(tN) = 0\r\n                        iNext = i1;\r\n                        tNext = 2 * t1 - t0;\r\n\r\n                        break;\r\n\r\n                    case WrapAroundEnding:\r\n\r\n                        // use the other end of the curve\r\n                        iNext = 1;\r\n                        tNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n                        break;\r\n\r\n                    default: // ZeroCurvatureEnding\r\n\r\n                        // f''(tN) = 0, a.k.a. Natural Spline\r\n                        iNext = i1 - 1;\r\n                        tNext = t0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var halfDt = ( t1 - t0 ) * 0.5,\r\n                stride = this.valueSize;\r\n\r\n            this._weightPrev = halfDt / ( t0 - tPrev );\r\n            this._weightNext = halfDt / ( tNext - t1 );\r\n            this._offsetPrev = iPrev * stride;\r\n            this._offsetNext = iNext * stride;\r\n\r\n        },\r\n\r\n        interpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n\r\n                o1 = i1 * stride,\t\to0 = o1 - stride,\r\n                oP = this._offsetPrev, \toN = this._offsetNext,\r\n                wP = this._weightPrev,\twN = this._weightNext,\r\n\r\n                p = ( t - t0 ) / ( t1 - t0 ),\r\n                pp = p * p,\r\n                ppp = pp * p;\r\n\r\n            // evaluate polynomials\r\n\r\n            var sP = - wP * ppp + 2 * wP * pp - wP * p;\r\n            var s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\r\n            var s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\r\n            var sN = wN * ppp - wN * pp;\r\n\r\n            // combine data linearly\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                result[ i ] =\r\n                    sP * values[ oP + i ] +\r\n                    s0 * values[ o0 + i ] +\r\n                    s1 * values[ o1 + i ] +\r\n                    sN * values[ oN + i ];\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author tschw\r\n     */\r\n\r\n    function LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n    }\r\n\r\n    LinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: LinearInterpolant,\r\n\r\n        interpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n\r\n                offset1 = i1 * stride,\r\n                offset0 = offset1 - stride,\r\n\r\n                weight1 = ( t - t0 ) / ( t1 - t0 ),\r\n                weight0 = 1 - weight1;\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                result[ i ] =\r\n                    values[ offset0 + i ] * weight0 +\r\n                    values[ offset1 + i ] * weight1;\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Interpolant that evaluates to the sample value at the position preceeding\r\n     * the parameter.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n    }\r\n\r\n    DiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: DiscreteInterpolant,\r\n\r\n        interpolate_: function ( i1 /*, t0, t, t1 */ ) {\r\n\r\n            return this.copySampleValue_( i1 - 1 );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author tschw\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     */\r\n\r\n    var AnimationUtils = {\r\n\r\n        // same as Array.prototype.slice, but also works on typed arrays\r\n        arraySlice: function ( array, from, to ) {\r\n\r\n            if ( AnimationUtils.isTypedArray( array ) ) {\r\n\r\n                // in ios9 array.subarray(from, undefined) will return empty array\r\n                // but array.subarray(from) or array.subarray(from, len) is correct\r\n                return new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\r\n\r\n            }\r\n\r\n            return array.slice( from, to );\r\n\r\n        },\r\n\r\n        // converts an array to a specific type\r\n        convertArray: function ( array, type, forceClone ) {\r\n\r\n            if ( ! array || // let 'undefined' and 'null' pass\r\n                ! forceClone && array.constructor === type ) return array;\r\n\r\n            if ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n                return new type( array ); // create typed array\r\n\r\n            }\r\n\r\n            return Array.prototype.slice.call( array ); // create Array\r\n\r\n        },\r\n\r\n        isTypedArray: function ( object ) {\r\n\r\n            return ArrayBuffer.isView( object ) &&\r\n                ! ( object instanceof DataView );\r\n\r\n        },\r\n\r\n        // returns an array by which times and values can be sorted\r\n        getKeyframeOrder: function ( times ) {\r\n\r\n            function compareTime( i, j ) {\r\n\r\n                return times[ i ] - times[ j ];\r\n\r\n            }\r\n\r\n            var n = times.length;\r\n            var result = new Array( n );\r\n            for ( var i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n            result.sort( compareTime );\r\n\r\n            return result;\r\n\r\n        },\r\n\r\n        // uses the array previously returned by 'getKeyframeOrder' to sort data\r\n        sortedArray: function ( values, stride, order ) {\r\n\r\n            var nValues = values.length;\r\n            var result = new values.constructor( nValues );\r\n\r\n            for ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n                var srcOffset = order[ i ] * stride;\r\n\r\n                for ( var j = 0; j !== stride; ++ j ) {\r\n\r\n                    result[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        },\r\n\r\n        // function for parsing AOS keyframe formats\r\n        flattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n            var i = 1, key = jsonKeys[ 0 ];\r\n\r\n            while ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n                key = jsonKeys[ i ++ ];\r\n\r\n            }\r\n\r\n            if ( key === undefined ) return; // no data\r\n\r\n            var value = key[ valuePropertyName ];\r\n            if ( value === undefined ) return; // no data\r\n\r\n            if ( Array.isArray( value ) ) {\r\n\r\n                do {\r\n\r\n                    value = key[ valuePropertyName ];\r\n\r\n                    if ( value !== undefined ) {\r\n\r\n                        times.push( key.time );\r\n                        values.push.apply( values, value ); // push all elements\r\n\r\n                    }\r\n\r\n                    key = jsonKeys[ i ++ ];\r\n\r\n                } while ( key !== undefined );\r\n\r\n            } else if ( value.toArray !== undefined ) {\r\n\r\n                // ...assume THREE.Math-ish\r\n\r\n                do {\r\n\r\n                    value = key[ valuePropertyName ];\r\n\r\n                    if ( value !== undefined ) {\r\n\r\n                        times.push( key.time );\r\n                        value.toArray( values, values.length );\r\n\r\n                    }\r\n\r\n                    key = jsonKeys[ i ++ ];\r\n\r\n                } while ( key !== undefined );\r\n\r\n            } else {\r\n\r\n                // otherwise push as-is\r\n\r\n                do {\r\n\r\n                    value = key[ valuePropertyName ];\r\n\r\n                    if ( value !== undefined ) {\r\n\r\n                        times.push( key.time );\r\n                        values.push( value );\r\n\r\n                    }\r\n\r\n                    key = jsonKeys[ i ++ ];\r\n\r\n                } while ( key !== undefined );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     *\r\n     * A timed sequence of keyframes for a specific property.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function KeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        if ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\r\n        if ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\r\n\r\n        this.name = name;\r\n\r\n        this.times = AnimationUtils.convertArray( times, this.TimeBufferType );\r\n        this.values = AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n        this.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n        this.validate();\r\n        this.optimize();\r\n\r\n    }\r\n\r\n    // Static methods:\r\n\r\n    Object.assign( KeyframeTrack, {\r\n\r\n        // Serialization (in static context, because of constructor invocation\r\n        // and automatic invocation of .toJSON):\r\n\r\n        parse: function ( json ) {\r\n\r\n            if ( json.type === undefined ) {\r\n\r\n                throw new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\r\n\r\n            }\r\n\r\n            var trackType = KeyframeTrack._getTrackTypeForValueTypeName( json.type );\r\n\r\n            if ( json.times === undefined ) {\r\n\r\n                var times = [], values = [];\r\n\r\n                AnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n                json.times = times;\r\n                json.values = values;\r\n\r\n            }\r\n\r\n            // derived classes can define a static parse method\r\n            if ( trackType.parse !== undefined ) {\r\n\r\n                return trackType.parse( json );\r\n\r\n            } else {\r\n\r\n                // by default, we assume a constructor compatible with the base\r\n                return new trackType( json.name, json.times, json.values, json.interpolation );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        toJSON: function ( track ) {\r\n\r\n            var trackType = track.constructor;\r\n\r\n            var json;\r\n\r\n            // derived classes can define a static toJSON method\r\n            if ( trackType.toJSON !== undefined ) {\r\n\r\n                json = trackType.toJSON( track );\r\n\r\n            } else {\r\n\r\n                // by default, we assume the data can be serialized as-is\r\n                json = {\r\n\r\n                    'name': track.name,\r\n                    'times': AnimationUtils.convertArray( track.times, Array ),\r\n                    'values': AnimationUtils.convertArray( track.values, Array )\r\n\r\n                };\r\n\r\n                var interpolation = track.getInterpolation();\r\n\r\n                if ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n                    json.interpolation = interpolation;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            json.type = track.ValueTypeName; // mandatory\r\n\r\n            return json;\r\n\r\n        },\r\n\r\n        _getTrackTypeForValueTypeName: function ( typeName ) {\r\n\r\n            switch ( typeName.toLowerCase() ) {\r\n\r\n                case 'scalar':\r\n                case 'double':\r\n                case 'float':\r\n                case 'number':\r\n                case 'integer':\r\n\r\n                    return NumberKeyframeTrack;\r\n\r\n                case 'vector':\r\n                case 'vector2':\r\n                case 'vector3':\r\n                case 'vector4':\r\n\r\n                    return VectorKeyframeTrack;\r\n\r\n                case 'color':\r\n\r\n                    return ColorKeyframeTrack;\r\n\r\n                case 'quaternion':\r\n\r\n                    return QuaternionKeyframeTrack;\r\n\r\n                case 'bool':\r\n                case 'boolean':\r\n\r\n                    return BooleanKeyframeTrack;\r\n\r\n                case 'string':\r\n\r\n                    return StringKeyframeTrack;\r\n\r\n            }\r\n\r\n            throw new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( KeyframeTrack.prototype, {\r\n\r\n        constructor: KeyframeTrack,\r\n\r\n        TimeBufferType: Float32Array,\r\n\r\n        ValueBufferType: Float32Array,\r\n\r\n        DefaultInterpolation: InterpolateLinear,\r\n\r\n        InterpolantFactoryMethodDiscrete: function ( result ) {\r\n\r\n            return new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        InterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n            return new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        InterpolantFactoryMethodSmooth: function ( result ) {\r\n\r\n            return new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        setInterpolation: function ( interpolation ) {\r\n\r\n            var factoryMethod;\r\n\r\n            switch ( interpolation ) {\r\n\r\n                case InterpolateDiscrete:\r\n\r\n                    factoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n                    break;\r\n\r\n                case InterpolateLinear:\r\n\r\n                    factoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n                    break;\r\n\r\n                case InterpolateSmooth:\r\n\r\n                    factoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n            if ( factoryMethod === undefined ) {\r\n\r\n                var message = \"unsupported interpolation for \" +\r\n                    this.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n                if ( this.createInterpolant === undefined ) {\r\n\r\n                    // fall back to default, unless the default itself is messed up\r\n                    if ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n                        this.setInterpolation( this.DefaultInterpolation );\r\n\r\n                    } else {\r\n\r\n                        throw new Error( message ); // fatal, in this case\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                console.warn( 'THREE.KeyframeTrack:', message );\r\n                return;\r\n\r\n            }\r\n\r\n            this.createInterpolant = factoryMethod;\r\n\r\n        },\r\n\r\n        getInterpolation: function () {\r\n\r\n            switch ( this.createInterpolant ) {\r\n\r\n                case this.InterpolantFactoryMethodDiscrete:\r\n\r\n                    return InterpolateDiscrete;\r\n\r\n                case this.InterpolantFactoryMethodLinear:\r\n\r\n                    return InterpolateLinear;\r\n\r\n                case this.InterpolantFactoryMethodSmooth:\r\n\r\n                    return InterpolateSmooth;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        getValueSize: function () {\r\n\r\n            return this.values.length / this.times.length;\r\n\r\n        },\r\n\r\n        // move all keyframes either forwards or backwards in time\r\n        shift: function ( timeOffset ) {\r\n\r\n            if ( timeOffset !== 0.0 ) {\r\n\r\n                var times = this.times;\r\n\r\n                for ( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n                    times[ i ] += timeOffset;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n        scale: function ( timeScale ) {\r\n\r\n            if ( timeScale !== 1.0 ) {\r\n\r\n                var times = this.times;\r\n\r\n                for ( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n                    times[ i ] *= timeScale;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n        // IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n        trim: function ( startTime, endTime ) {\r\n\r\n            var times = this.times,\r\n                nKeys = times.length,\r\n                from = 0,\r\n                to = nKeys - 1;\r\n\r\n            while ( from !== nKeys && times[ from ] < startTime ) {\r\n\r\n                ++ from;\r\n\r\n            }\r\n\r\n            while ( to !== - 1 && times[ to ] > endTime ) {\r\n\r\n                -- to;\r\n\r\n            }\r\n\r\n            ++ to; // inclusive -> exclusive bound\r\n\r\n            if ( from !== 0 || to !== nKeys ) {\r\n\r\n                // empty tracks are forbidden, so keep at least one keyframe\r\n                if ( from >= to ) to = Math.max( to, 1 ), from = to - 1;\r\n\r\n                var stride = this.getValueSize();\r\n                this.times = AnimationUtils.arraySlice( times, from, to );\r\n                this.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n        validate: function () {\r\n\r\n            var valid = true;\r\n\r\n            var valueSize = this.getValueSize();\r\n            if ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n                console.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\r\n                valid = false;\r\n\r\n            }\r\n\r\n            var times = this.times,\r\n                values = this.values,\r\n\r\n                nKeys = times.length;\r\n\r\n            if ( nKeys === 0 ) {\r\n\r\n                console.error( 'THREE.KeyframeTrack: Track is empty.', this );\r\n                valid = false;\r\n\r\n            }\r\n\r\n            var prevTime = null;\r\n\r\n            for ( var i = 0; i !== nKeys; i ++ ) {\r\n\r\n                var currTime = times[ i ];\r\n\r\n                if ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n                    console.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\r\n                    valid = false;\r\n                    break;\r\n\r\n                }\r\n\r\n                if ( prevTime !== null && prevTime > currTime ) {\r\n\r\n                    console.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\r\n                    valid = false;\r\n                    break;\r\n\r\n                }\r\n\r\n                prevTime = currTime;\r\n\r\n            }\r\n\r\n            if ( values !== undefined ) {\r\n\r\n                if ( AnimationUtils.isTypedArray( values ) ) {\r\n\r\n                    for ( var i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n                        var value = values[ i ];\r\n\r\n                        if ( isNaN( value ) ) {\r\n\r\n                            console.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\r\n                            valid = false;\r\n                            break;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return valid;\r\n\r\n        },\r\n\r\n        // removes equivalent sequential keys as common in morph target sequences\r\n        // (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n        optimize: function () {\r\n\r\n            var times = this.times,\r\n                values = this.values,\r\n                stride = this.getValueSize(),\r\n\r\n                smoothInterpolation = this.getInterpolation() === InterpolateSmooth,\r\n\r\n                writeIndex = 1,\r\n                lastIndex = times.length - 1;\r\n\r\n            for ( var i = 1; i < lastIndex; ++ i ) {\r\n\r\n                var keep = false;\r\n\r\n                var time = times[ i ];\r\n                var timeNext = times[ i + 1 ];\r\n\r\n                // remove adjacent keyframes scheduled at the same time\r\n\r\n                if ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n                    if ( ! smoothInterpolation ) {\r\n\r\n                        // remove unnecessary keyframes same as their neighbors\r\n\r\n                        var offset = i * stride,\r\n                            offsetP = offset - stride,\r\n                            offsetN = offset + stride;\r\n\r\n                        for ( var j = 0; j !== stride; ++ j ) {\r\n\r\n                            var value = values[ offset + j ];\r\n\r\n                            if ( value !== values[ offsetP + j ] ||\r\n                                value !== values[ offsetN + j ] ) {\r\n\r\n                                keep = true;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        keep = true;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // in-place compaction\r\n\r\n                if ( keep ) {\r\n\r\n                    if ( i !== writeIndex ) {\r\n\r\n                        times[ writeIndex ] = times[ i ];\r\n\r\n                        var readOffset = i * stride,\r\n                            writeOffset = writeIndex * stride;\r\n\r\n                        for ( var j = 0; j !== stride; ++ j ) {\r\n\r\n                            values[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    ++ writeIndex;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // flush last keyframe (compaction looks ahead)\r\n\r\n            if ( lastIndex > 0 ) {\r\n\r\n                times[ writeIndex ] = times[ lastIndex ];\r\n\r\n                for ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\r\n\r\n                    values[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n                }\r\n\r\n                ++ writeIndex;\r\n\r\n            }\r\n\r\n            if ( writeIndex !== times.length ) {\r\n\r\n                this.times = AnimationUtils.arraySlice( times, 0, writeIndex );\r\n                this.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of vectored keyframe values.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function VectorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    VectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: VectorKeyframeTrack,\r\n\r\n        ValueTypeName: 'vector'\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        // DefaultInterpolation is inherited\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Reusable set of Tracks that represent an animation.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     */\r\n\r\n    function AnimationClip( name, duration, tracks ) {\r\n\r\n        this.name = name;\r\n        this.tracks = tracks;\r\n        this.duration = ( duration !== undefined ) ? duration : - 1;\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        // this means it should figure out its duration by scanning the tracks\r\n        if ( this.duration < 0 ) {\r\n\r\n            this.resetDuration();\r\n\r\n        }\r\n\r\n        this.optimize();\r\n\r\n    }\r\n\r\n    Object.assign( AnimationClip, {\r\n\r\n        parse: function ( json ) {\r\n\r\n            var tracks = [],\r\n                jsonTracks = json.tracks,\r\n                frameTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n            for ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n                tracks.push( KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n            }\r\n\r\n            return new AnimationClip( json.name, json.duration, tracks );\r\n\r\n        },\r\n\r\n        toJSON: function ( clip ) {\r\n\r\n            var tracks = [],\r\n                clipTracks = clip.tracks;\r\n\r\n            var json = {\r\n\r\n                'name': clip.name,\r\n                'duration': clip.duration,\r\n                'tracks': tracks,\r\n                'uuid': clip.uuid\r\n\r\n            };\r\n\r\n            for ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n                tracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n            }\r\n\r\n            return json;\r\n\r\n        },\r\n\r\n        CreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\r\n\r\n            var numMorphTargets = morphTargetSequence.length;\r\n            var tracks = [];\r\n\r\n            for ( var i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n                var times = [];\r\n                var values = [];\r\n\r\n                times.push(\r\n                    ( i + numMorphTargets - 1 ) % numMorphTargets,\r\n                    i,\r\n                    ( i + 1 ) % numMorphTargets );\r\n\r\n                values.push( 0, 1, 0 );\r\n\r\n                var order = AnimationUtils.getKeyframeOrder( times );\r\n                times = AnimationUtils.sortedArray( times, 1, order );\r\n                values = AnimationUtils.sortedArray( values, 1, order );\r\n\r\n                // if there is a key at the first frame, duplicate it as the\r\n                // last frame as well for perfect loop.\r\n                if ( ! noLoop && times[ 0 ] === 0 ) {\r\n\r\n                    times.push( numMorphTargets );\r\n                    values.push( values[ 0 ] );\r\n\r\n                }\r\n\r\n                tracks.push(\r\n                    new NumberKeyframeTrack(\r\n                        '.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n                        times, values\r\n                    ).scale( 1.0 / fps ) );\r\n\r\n            }\r\n\r\n            return new AnimationClip( name, - 1, tracks );\r\n\r\n        },\r\n\r\n        findByName: function ( objectOrClipArray, name ) {\r\n\r\n            var clipArray = objectOrClipArray;\r\n\r\n            if ( ! Array.isArray( objectOrClipArray ) ) {\r\n\r\n                var o = objectOrClipArray;\r\n                clipArray = o.geometry && o.geometry.animations || o.animations;\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < clipArray.length; i ++ ) {\r\n\r\n                if ( clipArray[ i ].name === name ) {\r\n\r\n                    return clipArray[ i ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        },\r\n\r\n        CreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\r\n\r\n            var animationToMorphTargets = {};\r\n\r\n            // tested with https://regex101.com/ on trick sequences\r\n            // such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n            var pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n            // sort morph target names into animation groups based\r\n            // patterns like Walk_001, Walk_002, Run_001, Run_002\r\n            for ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n                var morphTarget = morphTargets[ i ];\r\n                var parts = morphTarget.name.match( pattern );\r\n\r\n                if ( parts && parts.length > 1 ) {\r\n\r\n                    var name = parts[ 1 ];\r\n\r\n                    var animationMorphTargets = animationToMorphTargets[ name ];\r\n                    if ( ! animationMorphTargets ) {\r\n\r\n                        animationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n                    }\r\n\r\n                    animationMorphTargets.push( morphTarget );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var clips = [];\r\n\r\n            for ( var name in animationToMorphTargets ) {\r\n\r\n                clips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\r\n\r\n            }\r\n\r\n            return clips;\r\n\r\n        },\r\n\r\n        // parse the animation.hierarchy format\r\n        parseAnimation: function ( animation, bones ) {\r\n\r\n            if ( ! animation ) {\r\n\r\n                console.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\r\n                return null;\r\n\r\n            }\r\n\r\n            var addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n                // only return track if there are actually keys.\r\n                if ( animationKeys.length !== 0 ) {\r\n\r\n                    var times = [];\r\n                    var values = [];\r\n\r\n                    AnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\r\n\r\n                    // empty keys are filtered out, so check again\r\n                    if ( times.length !== 0 ) {\r\n\r\n                        destTracks.push( new trackType( trackName, times, values ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n            var tracks = [];\r\n\r\n            var clipName = animation.name || 'default';\r\n            // automatic length determination in AnimationClip.\r\n            var duration = animation.length || - 1;\r\n            var fps = animation.fps || 30;\r\n\r\n            var hierarchyTracks = animation.hierarchy || [];\r\n\r\n            for ( var h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n                var animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n                // skip empty tracks\r\n                if ( ! animationKeys || animationKeys.length === 0 ) continue;\r\n\r\n                // process morph targets\r\n                if ( animationKeys[ 0 ].morphTargets ) {\r\n\r\n                    // figure out all morph targets used in this track\r\n                    var morphTargetNames = {};\r\n\r\n                    for ( var k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n                        if ( animationKeys[ k ].morphTargets ) {\r\n\r\n                            for ( var m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\r\n\r\n                                morphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    // create a track for each morph target with all zero\r\n                    // morphTargetInfluences except for the keys in which\r\n                    // the morphTarget is named.\r\n                    for ( var morphTargetName in morphTargetNames ) {\r\n\r\n                        var times = [];\r\n                        var values = [];\r\n\r\n                        for ( var m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\r\n\r\n                            var animationKey = animationKeys[ k ];\r\n\r\n                            times.push( animationKey.time );\r\n                            values.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n                        }\r\n\r\n                        tracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n                    }\r\n\r\n                    duration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n                } else {\r\n\r\n                    // ...assume skeletal animation\r\n\r\n                    var boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n                    addNonemptyTrack(\r\n                        VectorKeyframeTrack, boneName + '.position',\r\n                        animationKeys, 'pos', tracks );\r\n\r\n                    addNonemptyTrack(\r\n                        QuaternionKeyframeTrack, boneName + '.quaternion',\r\n                        animationKeys, 'rot', tracks );\r\n\r\n                    addNonemptyTrack(\r\n                        VectorKeyframeTrack, boneName + '.scale',\r\n                        animationKeys, 'scl', tracks );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( tracks.length === 0 ) {\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n            var clip = new AnimationClip( clipName, duration, tracks );\r\n\r\n            return clip;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( AnimationClip.prototype, {\r\n\r\n        resetDuration: function () {\r\n\r\n            var tracks = this.tracks, duration = 0;\r\n\r\n            for ( var i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n                var track = this.tracks[ i ];\r\n\r\n                duration = Math.max( duration, track.times[ track.times.length - 1 ] );\r\n\r\n            }\r\n\r\n            this.duration = duration;\r\n\r\n        },\r\n\r\n        trim: function () {\r\n\r\n            for ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n                this.tracks[ i ].trim( 0, this.duration );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        optimize: function () {\r\n\r\n            for ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n                this.tracks[ i ].optimize();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function MaterialLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n        this.textures = {};\r\n\r\n    }\r\n\r\n    Object.assign( MaterialLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( scope.manager );\r\n            loader.load( url, function ( text ) {\r\n\r\n                onLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        setTextures: function ( value ) {\r\n\r\n            this.textures = value;\r\n\r\n        },\r\n\r\n        parse: function ( json ) {\r\n\r\n            var textures = this.textures;\r\n\r\n            function getTexture( name ) {\r\n\r\n                if ( textures[ name ] === undefined ) {\r\n\r\n                    console.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n                }\r\n\r\n                return textures[ name ];\r\n\r\n            }\r\n\r\n            var material = new Materials[ json.type ]();\r\n\r\n            if ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n            if ( json.name !== undefined ) material.name = json.name;\r\n            if ( json.color !== undefined ) material.color.setHex( json.color );\r\n            if ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n            if ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n            if ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n            if ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n            if ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n            if ( json.clearCoat !== undefined ) material.clearCoat = json.clearCoat;\r\n            if ( json.clearCoatRoughness !== undefined ) material.clearCoatRoughness = json.clearCoatRoughness;\r\n            if ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n            if ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n            if ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n            if ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n            if ( json.fog !== undefined ) material.fog = json.fog;\r\n            if ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\r\n            if ( json.blending !== undefined ) material.blending = json.blending;\r\n            if ( json.side !== undefined ) material.side = json.side;\r\n            if ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n            if ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n            if ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n            if ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n            if ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n            if ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n            if ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n            if ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n            if ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\r\n            if ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\r\n\r\n            if ( json.rotation !== undefined ) material.rotation = json.rotation;\r\n\r\n            if ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\r\n            if ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\r\n            if ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\r\n            if ( json.scale !== undefined ) material.scale = json.scale;\r\n\r\n            if ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\r\n            if ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\r\n            if ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\r\n\r\n            if ( json.skinning !== undefined ) material.skinning = json.skinning;\r\n            if ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\r\n            if ( json.dithering !== undefined ) material.dithering = json.dithering;\r\n\r\n            if ( json.visible !== undefined ) material.visible = json.visible;\r\n            if ( json.userData !== undefined ) material.userData = json.userData;\r\n\r\n            // Deprecated\r\n\r\n            if ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\r\n\r\n            // for PointsMaterial\r\n\r\n            if ( json.size !== undefined ) material.size = json.size;\r\n            if ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n            // maps\r\n\r\n            if ( json.map !== undefined ) material.map = getTexture( json.map );\r\n\r\n            if ( json.alphaMap !== undefined ) {\r\n\r\n                material.alphaMap = getTexture( json.alphaMap );\r\n                material.transparent = true;\r\n\r\n            }\r\n\r\n            if ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\r\n            if ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n            if ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\r\n            if ( json.normalScale !== undefined ) {\r\n\r\n                var normalScale = json.normalScale;\r\n\r\n                if ( Array.isArray( normalScale ) === false ) {\r\n\r\n                    // Blender exporter used to export a scalar. See #7459\r\n\r\n                    normalScale = [ normalScale, normalScale ];\r\n\r\n                }\r\n\r\n                material.normalScale = new Vector2().fromArray( normalScale );\r\n\r\n            }\r\n\r\n            if ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\r\n            if ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n            if ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n            if ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\r\n            if ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\r\n\r\n            if ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\r\n            if ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n            if ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\r\n\r\n            if ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\r\n\r\n            if ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\r\n\r\n            if ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\r\n            if ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n            if ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\r\n            if ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n            if ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\r\n\r\n            return material;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function BufferGeometryLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( BufferGeometryLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( scope.manager );\r\n            loader.load( url, function ( text ) {\r\n\r\n                onLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        parse: function ( json ) {\r\n\r\n            var geometry = new BufferGeometry();\r\n\r\n            var index = json.data.index;\r\n\r\n            if ( index !== undefined ) {\r\n\r\n                var typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n                geometry.setIndex( new BufferAttribute( typedArray, 1 ) );\r\n\r\n            }\r\n\r\n            var attributes = json.data.attributes;\r\n\r\n            for ( var key in attributes ) {\r\n\r\n                var attribute = attributes[ key ];\r\n                var typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\r\n                geometry.addAttribute( key, new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized ) );\r\n\r\n            }\r\n\r\n            var groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n            if ( groups !== undefined ) {\r\n\r\n                for ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n                    var group = groups[ i ];\r\n\r\n                    geometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var boundingSphere = json.data.boundingSphere;\r\n\r\n            if ( boundingSphere !== undefined ) {\r\n\r\n                var center = new Vector3();\r\n\r\n                if ( boundingSphere.center !== undefined ) {\r\n\r\n                    center.fromArray( boundingSphere.center );\r\n\r\n                }\r\n\r\n                geometry.boundingSphere = new Sphere( center, boundingSphere.radius );\r\n\r\n            }\r\n\r\n            return geometry;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var TYPED_ARRAYS = {\r\n        Int8Array: Int8Array,\r\n        Uint8Array: Uint8Array,\r\n        // Workaround for IE11 pre KB2929437. See #11440\r\n        Uint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\r\n        Int16Array: Int16Array,\r\n        Uint16Array: Uint16Array,\r\n        Int32Array: Int32Array,\r\n        Uint32Array: Uint32Array,\r\n        Float32Array: Float32Array,\r\n        Float64Array: Float64Array\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Loader() {}\r\n\r\n    Loader.Handlers = {\r\n\r\n        handlers: [],\r\n\r\n        add: function ( regex, loader ) {\r\n\r\n            this.handlers.push( regex, loader );\r\n\r\n        },\r\n\r\n        get: function ( file ) {\r\n\r\n            var handlers = this.handlers;\r\n\r\n            for ( var i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n                var regex = handlers[ i ];\r\n                var loader = handlers[ i + 1 ];\r\n\r\n                if ( regex.test( file ) ) {\r\n\r\n                    return loader;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Object.assign( Loader.prototype, {\r\n\r\n        crossOrigin: undefined,\r\n\r\n        onLoadStart: function () {},\r\n\r\n        onLoadProgress: function () {},\r\n\r\n        onLoadComplete: function () {},\r\n\r\n        initMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n            var array = [];\r\n\r\n            for ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n                array[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n            }\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        createMaterial: ( function () {\r\n\r\n            var BlendingMode = {\r\n                NoBlending: NoBlending,\r\n                NormalBlending: NormalBlending,\r\n                AdditiveBlending: AdditiveBlending,\r\n                SubtractiveBlending: SubtractiveBlending,\r\n                MultiplyBlending: MultiplyBlending,\r\n                CustomBlending: CustomBlending\r\n            };\r\n\r\n            var color = new Color();\r\n            var textureLoader = new TextureLoader();\r\n            var materialLoader = new MaterialLoader();\r\n\r\n            return function createMaterial( m, texturePath, crossOrigin ) {\r\n\r\n                // convert from old material format\r\n\r\n                var textures = {};\r\n\r\n                function loadTexture( path, repeat, offset, wrap, anisotropy ) {\r\n\r\n                    var fullPath = texturePath + path;\r\n                    var loader = Loader.Handlers.get( fullPath );\r\n\r\n                    var texture;\r\n\r\n                    if ( loader !== null ) {\r\n\r\n                        texture = loader.load( fullPath );\r\n\r\n                    } else {\r\n\r\n                        textureLoader.setCrossOrigin( crossOrigin );\r\n                        texture = textureLoader.load( fullPath );\r\n\r\n                    }\r\n\r\n                    if ( repeat !== undefined ) {\r\n\r\n                        texture.repeat.fromArray( repeat );\r\n\r\n                        if ( repeat[ 0 ] !== 1 ) texture.wrapS = RepeatWrapping;\r\n                        if ( repeat[ 1 ] !== 1 ) texture.wrapT = RepeatWrapping;\r\n\r\n                    }\r\n\r\n                    if ( offset !== undefined ) {\r\n\r\n                        texture.offset.fromArray( offset );\r\n\r\n                    }\r\n\r\n                    if ( wrap !== undefined ) {\r\n\r\n                        if ( wrap[ 0 ] === 'repeat' ) texture.wrapS = RepeatWrapping;\r\n                        if ( wrap[ 0 ] === 'mirror' ) texture.wrapS = MirroredRepeatWrapping;\r\n\r\n                        if ( wrap[ 1 ] === 'repeat' ) texture.wrapT = RepeatWrapping;\r\n                        if ( wrap[ 1 ] === 'mirror' ) texture.wrapT = MirroredRepeatWrapping;\r\n\r\n                    }\r\n\r\n                    if ( anisotropy !== undefined ) {\r\n\r\n                        texture.anisotropy = anisotropy;\r\n\r\n                    }\r\n\r\n                    var uuid = _Math.generateUUID();\r\n\r\n                    textures[ uuid ] = texture;\r\n\r\n                    return uuid;\r\n\r\n                }\r\n\r\n                //\r\n\r\n                var json = {\r\n                    uuid: _Math.generateUUID(),\r\n                    type: 'MeshLambertMaterial'\r\n                };\r\n\r\n                for ( var name in m ) {\r\n\r\n                    var value = m[ name ];\r\n\r\n                    switch ( name ) {\r\n\r\n                        case 'DbgColor':\r\n                        case 'DbgIndex':\r\n                        case 'opticalDensity':\r\n                        case 'illumination':\r\n                            break;\r\n                        case 'DbgName':\r\n                            json.name = value;\r\n                            break;\r\n                        case 'blending':\r\n                            json.blending = BlendingMode[ value ];\r\n                            break;\r\n                        case 'colorAmbient':\r\n                        case 'mapAmbient':\r\n                            console.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\r\n                            break;\r\n                        case 'colorDiffuse':\r\n                            json.color = color.fromArray( value ).getHex();\r\n                            break;\r\n                        case 'colorSpecular':\r\n                            json.specular = color.fromArray( value ).getHex();\r\n                            break;\r\n                        case 'colorEmissive':\r\n                            json.emissive = color.fromArray( value ).getHex();\r\n                            break;\r\n                        case 'specularCoef':\r\n                            json.shininess = value;\r\n                            break;\r\n                        case 'shading':\r\n                            if ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\r\n                            if ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\r\n                            if ( value.toLowerCase() === 'standard' ) json.type = 'MeshStandardMaterial';\r\n                            break;\r\n                        case 'mapDiffuse':\r\n                            json.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n                            break;\r\n                        case 'mapDiffuseRepeat':\r\n                        case 'mapDiffuseOffset':\r\n                        case 'mapDiffuseWrap':\r\n                        case 'mapDiffuseAnisotropy':\r\n                            break;\r\n                        case 'mapEmissive':\r\n                            json.emissiveMap = loadTexture( value, m.mapEmissiveRepeat, m.mapEmissiveOffset, m.mapEmissiveWrap, m.mapEmissiveAnisotropy );\r\n                            break;\r\n                        case 'mapEmissiveRepeat':\r\n                        case 'mapEmissiveOffset':\r\n                        case 'mapEmissiveWrap':\r\n                        case 'mapEmissiveAnisotropy':\r\n                            break;\r\n                        case 'mapLight':\r\n                            json.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n                            break;\r\n                        case 'mapLightRepeat':\r\n                        case 'mapLightOffset':\r\n                        case 'mapLightWrap':\r\n                        case 'mapLightAnisotropy':\r\n                            break;\r\n                        case 'mapAO':\r\n                            json.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n                            break;\r\n                        case 'mapAORepeat':\r\n                        case 'mapAOOffset':\r\n                        case 'mapAOWrap':\r\n                        case 'mapAOAnisotropy':\r\n                            break;\r\n                        case 'mapBump':\r\n                            json.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n                            break;\r\n                        case 'mapBumpScale':\r\n                            json.bumpScale = value;\r\n                            break;\r\n                        case 'mapBumpRepeat':\r\n                        case 'mapBumpOffset':\r\n                        case 'mapBumpWrap':\r\n                        case 'mapBumpAnisotropy':\r\n                            break;\r\n                        case 'mapNormal':\r\n                            json.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n                            break;\r\n                        case 'mapNormalFactor':\r\n                            json.normalScale = value;\r\n                            break;\r\n                        case 'mapNormalRepeat':\r\n                        case 'mapNormalOffset':\r\n                        case 'mapNormalWrap':\r\n                        case 'mapNormalAnisotropy':\r\n                            break;\r\n                        case 'mapSpecular':\r\n                            json.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n                            break;\r\n                        case 'mapSpecularRepeat':\r\n                        case 'mapSpecularOffset':\r\n                        case 'mapSpecularWrap':\r\n                        case 'mapSpecularAnisotropy':\r\n                            break;\r\n                        case 'mapMetalness':\r\n                            json.metalnessMap = loadTexture( value, m.mapMetalnessRepeat, m.mapMetalnessOffset, m.mapMetalnessWrap, m.mapMetalnessAnisotropy );\r\n                            break;\r\n                        case 'mapMetalnessRepeat':\r\n                        case 'mapMetalnessOffset':\r\n                        case 'mapMetalnessWrap':\r\n                        case 'mapMetalnessAnisotropy':\r\n                            break;\r\n                        case 'mapRoughness':\r\n                            json.roughnessMap = loadTexture( value, m.mapRoughnessRepeat, m.mapRoughnessOffset, m.mapRoughnessWrap, m.mapRoughnessAnisotropy );\r\n                            break;\r\n                        case 'mapRoughnessRepeat':\r\n                        case 'mapRoughnessOffset':\r\n                        case 'mapRoughnessWrap':\r\n                        case 'mapRoughnessAnisotropy':\r\n                            break;\r\n                        case 'mapAlpha':\r\n                            json.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n                            break;\r\n                        case 'mapAlphaRepeat':\r\n                        case 'mapAlphaOffset':\r\n                        case 'mapAlphaWrap':\r\n                        case 'mapAlphaAnisotropy':\r\n                            break;\r\n                        case 'flipSided':\r\n                            json.side = BackSide;\r\n                            break;\r\n                        case 'doubleSided':\r\n                            json.side = DoubleSide;\r\n                            break;\r\n                        case 'transparency':\r\n                            console.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\r\n                            json.opacity = value;\r\n                            break;\r\n                        case 'depthTest':\r\n                        case 'depthWrite':\r\n                        case 'colorWrite':\r\n                        case 'opacity':\r\n                        case 'reflectivity':\r\n                        case 'transparent':\r\n                        case 'visible':\r\n                        case 'wireframe':\r\n                            json[ name ] = value;\r\n                            break;\r\n                        case 'vertexColors':\r\n                            if ( value === true ) json.vertexColors = VertexColors;\r\n                            if ( value === 'face' ) json.vertexColors = FaceColors;\r\n                            break;\r\n                        default:\r\n                            console.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\r\n                if ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\r\n\r\n                if ( json.opacity < 1 ) json.transparent = true;\r\n\r\n                materialLoader.setTextures( textures );\r\n\r\n                return materialLoader.parse( json );\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author Don McCurdy / https://www.donmccurdy.com\r\n     */\r\n\r\n    var LoaderUtils = {\r\n\r\n        decodeText: function ( array ) {\r\n\r\n            if ( typeof TextDecoder !== 'undefined' ) {\r\n\r\n                return new TextDecoder().decode( array );\r\n\r\n            }\r\n\r\n            // Avoid the String.fromCharCode.apply(null, array) shortcut, which\r\n            // throws a \"maximum call stack size exceeded\" error for large arrays.\r\n\r\n            var s = '';\r\n\r\n            for ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n                // Implicitly assumes little-endian.\r\n                s += String.fromCharCode( array[ i ] );\r\n\r\n            }\r\n\r\n            // Merges multi-byte utf-8 characters.\r\n            return decodeURIComponent( escape( s ) );\r\n\r\n        },\r\n\r\n        extractUrlBase: function ( url ) {\r\n\r\n            var index = url.lastIndexOf( '/' );\r\n\r\n            if ( index === - 1 ) return './';\r\n\r\n            return url.substr( 0, index + 1 );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function JSONLoader( manager ) {\r\n\r\n        if ( typeof manager === 'boolean' ) {\r\n\r\n            console.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n            manager = undefined;\r\n\r\n        }\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n        this.withCredentials = false;\r\n\r\n    }\r\n\r\n    Object.assign( JSONLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var texturePath = this.texturePath && ( typeof this.texturePath === 'string' ) ? this.texturePath : LoaderUtils.extractUrlBase( url );\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setWithCredentials( this.withCredentials );\r\n            loader.load( url, function ( text ) {\r\n\r\n                var json = JSON.parse( text );\r\n                var metadata = json.metadata;\r\n\r\n                if ( metadata !== undefined ) {\r\n\r\n                    var type = metadata.type;\r\n\r\n                    if ( type !== undefined ) {\r\n\r\n                        if ( type.toLowerCase() === 'object' ) {\r\n\r\n                            console.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n                            return;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                var object = scope.parse( json, texturePath );\r\n                onLoad( object.geometry, object.materials );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        setTexturePath: function ( value ) {\r\n\r\n            this.texturePath = value;\r\n\r\n        },\r\n\r\n        parse: ( function () {\r\n\r\n            function parseModel( json, geometry ) {\r\n\r\n                function isBitSet( value, position ) {\r\n\r\n                    return value & ( 1 << position );\r\n\r\n                }\r\n\r\n                var i, j, fi,\r\n\r\n                    offset, zLength,\r\n\r\n                    colorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n                    type,\r\n                    isQuad,\r\n                    hasMaterial,\r\n                    hasFaceVertexUv,\r\n                    hasFaceNormal, hasFaceVertexNormal,\r\n                    hasFaceColor, hasFaceVertexColor,\r\n\r\n                    vertex, face, faceA, faceB, hex, normal,\r\n\r\n                    uvLayer, uv, u, v,\r\n\r\n                    faces = json.faces,\r\n                    vertices = json.vertices,\r\n                    normals = json.normals,\r\n                    colors = json.colors,\r\n\r\n                    scale = json.scale,\r\n\r\n                    nUvLayers = 0;\r\n\r\n\r\n                if ( json.uvs !== undefined ) {\r\n\r\n                    // disregard empty arrays\r\n\r\n                    for ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n                        if ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n                    }\r\n\r\n                    for ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n                        geometry.faceVertexUvs[ i ] = [];\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                offset = 0;\r\n                zLength = vertices.length;\r\n\r\n                while ( offset < zLength ) {\r\n\r\n                    vertex = new Vector3();\r\n\r\n                    vertex.x = vertices[ offset ++ ] * scale;\r\n                    vertex.y = vertices[ offset ++ ] * scale;\r\n                    vertex.z = vertices[ offset ++ ] * scale;\r\n\r\n                    geometry.vertices.push( vertex );\r\n\r\n                }\r\n\r\n                offset = 0;\r\n                zLength = faces.length;\r\n\r\n                while ( offset < zLength ) {\r\n\r\n                    type = faces[ offset ++ ];\r\n\r\n                    isQuad = isBitSet( type, 0 );\r\n                    hasMaterial = isBitSet( type, 1 );\r\n                    hasFaceVertexUv = isBitSet( type, 3 );\r\n                    hasFaceNormal = isBitSet( type, 4 );\r\n                    hasFaceVertexNormal = isBitSet( type, 5 );\r\n                    hasFaceColor = isBitSet( type, 6 );\r\n                    hasFaceVertexColor = isBitSet( type, 7 );\r\n\r\n                    // console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n                    if ( isQuad ) {\r\n\r\n                        faceA = new Face3();\r\n                        faceA.a = faces[ offset ];\r\n                        faceA.b = faces[ offset + 1 ];\r\n                        faceA.c = faces[ offset + 3 ];\r\n\r\n                        faceB = new Face3();\r\n                        faceB.a = faces[ offset + 1 ];\r\n                        faceB.b = faces[ offset + 2 ];\r\n                        faceB.c = faces[ offset + 3 ];\r\n\r\n                        offset += 4;\r\n\r\n                        if ( hasMaterial ) {\r\n\r\n                            materialIndex = faces[ offset ++ ];\r\n                            faceA.materialIndex = materialIndex;\r\n                            faceB.materialIndex = materialIndex;\r\n\r\n                        }\r\n\r\n                        // to get face <=> uv index correspondence\r\n\r\n                        fi = geometry.faces.length;\r\n\r\n                        if ( hasFaceVertexUv ) {\r\n\r\n                            for ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n                                uvLayer = json.uvs[ i ];\r\n\r\n                                geometry.faceVertexUvs[ i ][ fi ] = [];\r\n                                geometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n                                for ( j = 0; j < 4; j ++ ) {\r\n\r\n                                    uvIndex = faces[ offset ++ ];\r\n\r\n                                    u = uvLayer[ uvIndex * 2 ];\r\n                                    v = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n                                    uv = new Vector2( u, v );\r\n\r\n                                    if ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n                                    if ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        if ( hasFaceNormal ) {\r\n\r\n                            normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                            faceA.normal.set(\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ]\r\n                            );\r\n\r\n                            faceB.normal.copy( faceA.normal );\r\n\r\n                        }\r\n\r\n                        if ( hasFaceVertexNormal ) {\r\n\r\n                            for ( i = 0; i < 4; i ++ ) {\r\n\r\n                                normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                                normal = new Vector3(\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ]\r\n                                );\r\n\r\n\r\n                                if ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n                                if ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceColor ) {\r\n\r\n                            colorIndex = faces[ offset ++ ];\r\n                            hex = colors[ colorIndex ];\r\n\r\n                            faceA.color.setHex( hex );\r\n                            faceB.color.setHex( hex );\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceVertexColor ) {\r\n\r\n                            for ( i = 0; i < 4; i ++ ) {\r\n\r\n                                colorIndex = faces[ offset ++ ];\r\n                                hex = colors[ colorIndex ];\r\n\r\n                                if ( i !== 2 ) faceA.vertexColors.push( new Color( hex ) );\r\n                                if ( i !== 0 ) faceB.vertexColors.push( new Color( hex ) );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        geometry.faces.push( faceA );\r\n                        geometry.faces.push( faceB );\r\n\r\n                    } else {\r\n\r\n                        face = new Face3();\r\n                        face.a = faces[ offset ++ ];\r\n                        face.b = faces[ offset ++ ];\r\n                        face.c = faces[ offset ++ ];\r\n\r\n                        if ( hasMaterial ) {\r\n\r\n                            materialIndex = faces[ offset ++ ];\r\n                            face.materialIndex = materialIndex;\r\n\r\n                        }\r\n\r\n                        // to get face <=> uv index correspondence\r\n\r\n                        fi = geometry.faces.length;\r\n\r\n                        if ( hasFaceVertexUv ) {\r\n\r\n                            for ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n                                uvLayer = json.uvs[ i ];\r\n\r\n                                geometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n                                for ( j = 0; j < 3; j ++ ) {\r\n\r\n                                    uvIndex = faces[ offset ++ ];\r\n\r\n                                    u = uvLayer[ uvIndex * 2 ];\r\n                                    v = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n                                    uv = new Vector2( u, v );\r\n\r\n                                    geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        if ( hasFaceNormal ) {\r\n\r\n                            normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                            face.normal.set(\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ]\r\n                            );\r\n\r\n                        }\r\n\r\n                        if ( hasFaceVertexNormal ) {\r\n\r\n                            for ( i = 0; i < 3; i ++ ) {\r\n\r\n                                normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                                normal = new Vector3(\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ]\r\n                                );\r\n\r\n                                face.vertexNormals.push( normal );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceColor ) {\r\n\r\n                            colorIndex = faces[ offset ++ ];\r\n                            face.color.setHex( colors[ colorIndex ] );\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceVertexColor ) {\r\n\r\n                            for ( i = 0; i < 3; i ++ ) {\r\n\r\n                                colorIndex = faces[ offset ++ ];\r\n                                face.vertexColors.push( new Color( colors[ colorIndex ] ) );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        geometry.faces.push( face );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function parseSkin( json, geometry ) {\r\n\r\n                var influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n                if ( json.skinWeights ) {\r\n\r\n                    for ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n                        var x = json.skinWeights[ i ];\r\n                        var y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n                        var z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n                        var w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n                        geometry.skinWeights.push( new Vector4( x, y, z, w ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( json.skinIndices ) {\r\n\r\n                    for ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n                        var a = json.skinIndices[ i ];\r\n                        var b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n                        var c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n                        var d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n                        geometry.skinIndices.push( new Vector4( a, b, c, d ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                geometry.bones = json.bones;\r\n\r\n                if ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n                    console.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n                        geometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function parseMorphing( json, geometry ) {\r\n\r\n                var scale = json.scale;\r\n\r\n                if ( json.morphTargets !== undefined ) {\r\n\r\n                    for ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n                        geometry.morphTargets[ i ] = {};\r\n                        geometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n                        geometry.morphTargets[ i ].vertices = [];\r\n\r\n                        var dstVertices = geometry.morphTargets[ i ].vertices;\r\n                        var srcVertices = json.morphTargets[ i ].vertices;\r\n\r\n                        for ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n                            var vertex = new Vector3();\r\n                            vertex.x = srcVertices[ v ] * scale;\r\n                            vertex.y = srcVertices[ v + 1 ] * scale;\r\n                            vertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n                            dstVertices.push( vertex );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\r\n\r\n                    console.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\r\n\r\n                    var faces = geometry.faces;\r\n                    var morphColors = json.morphColors[ 0 ].colors;\r\n\r\n                    for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                        faces[ i ].color.fromArray( morphColors, i * 3 );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function parseAnimations( json, geometry ) {\r\n\r\n                var outputAnimations = [];\r\n\r\n                // parse old style Bone/Hierarchy animations\r\n                var animations = [];\r\n\r\n                if ( json.animation !== undefined ) {\r\n\r\n                    animations.push( json.animation );\r\n\r\n                }\r\n\r\n                if ( json.animations !== undefined ) {\r\n\r\n                    if ( json.animations.length ) {\r\n\r\n                        animations = animations.concat( json.animations );\r\n\r\n                    } else {\r\n\r\n                        animations.push( json.animations );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                for ( var i = 0; i < animations.length; i ++ ) {\r\n\r\n                    var clip = AnimationClip.parseAnimation( animations[ i ], geometry.bones );\r\n                    if ( clip ) outputAnimations.push( clip );\r\n\r\n                }\r\n\r\n                // parse implicit morph animations\r\n                if ( geometry.morphTargets ) {\r\n\r\n                    // TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\r\n                    var morphAnimationClips = AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\r\n                    outputAnimations = outputAnimations.concat( morphAnimationClips );\r\n\r\n                }\r\n\r\n                if ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\r\n\r\n            }\r\n\r\n            return function parse( json, texturePath ) {\r\n\r\n                if ( json.data !== undefined ) {\r\n\r\n                    // Geometry 4.0 spec\r\n                    json = json.data;\r\n\r\n                }\r\n\r\n                if ( json.scale !== undefined ) {\r\n\r\n                    json.scale = 1.0 / json.scale;\r\n\r\n                } else {\r\n\r\n                    json.scale = 1.0;\r\n\r\n                }\r\n\r\n                var geometry = new Geometry();\r\n\r\n                parseModel( json, geometry );\r\n                parseSkin( json, geometry );\r\n                parseMorphing( json, geometry );\r\n                parseAnimations( json, geometry );\r\n\r\n                geometry.computeFaceNormals();\r\n                geometry.computeBoundingSphere();\r\n\r\n                if ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n                    return { geometry: geometry };\r\n\r\n                } else {\r\n\r\n                    var materials = Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n                    return { geometry: geometry, materials: materials };\r\n\r\n                }\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function ObjectLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n        this.texturePath = '';\r\n\r\n    }\r\n\r\n    Object.assign( ObjectLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( this.texturePath === '' ) {\r\n\r\n                this.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n            }\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( scope.manager );\r\n            loader.load( url, function ( text ) {\r\n\r\n                var json = null;\r\n\r\n                try {\r\n\r\n                    json = JSON.parse( text );\r\n\r\n                } catch ( error ) {\r\n\r\n                    if ( onError !== undefined ) onError( error );\r\n\r\n                    console.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\r\n\r\n                    return;\r\n\r\n                }\r\n\r\n                var metadata = json.metadata;\r\n\r\n                if ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\r\n\r\n                    console.error( 'THREE.ObjectLoader: Can\\'t load ' + url + '. Use THREE.JSONLoader instead.' );\r\n                    return;\r\n\r\n                }\r\n\r\n                scope.parse( json, onLoad );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        setTexturePath: function ( value ) {\r\n\r\n            this.texturePath = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        parse: function ( json, onLoad ) {\r\n\r\n            var shapes = this.parseShape( json.shapes );\r\n            var geometries = this.parseGeometries( json.geometries, shapes );\r\n\r\n            var images = this.parseImages( json.images, function () {\r\n\r\n                if ( onLoad !== undefined ) onLoad( object );\r\n\r\n            } );\r\n\r\n            var textures = this.parseTextures( json.textures, images );\r\n            var materials = this.parseMaterials( json.materials, textures );\r\n\r\n            var object = this.parseObject( json.object, geometries, materials );\r\n\r\n            if ( json.animations ) {\r\n\r\n                object.animations = this.parseAnimations( json.animations );\r\n\r\n            }\r\n\r\n            if ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n                if ( onLoad !== undefined ) onLoad( object );\r\n\r\n            }\r\n\r\n            return object;\r\n\r\n        },\r\n\r\n        parseShape: function ( json ) {\r\n\r\n            var shapes = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var shape = new Shape().fromJSON( json[ i ] );\r\n\r\n                    shapes[ shape.uuid ] = shape;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return shapes;\r\n\r\n        },\r\n\r\n        parseGeometries: function ( json, shapes ) {\r\n\r\n            var geometries = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                var geometryLoader = new JSONLoader();\r\n                var bufferGeometryLoader = new BufferGeometryLoader();\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var geometry;\r\n                    var data = json[ i ];\r\n\r\n                    switch ( data.type ) {\r\n\r\n                        case 'PlaneGeometry':\r\n                        case 'PlaneBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.width,\r\n                                data.height,\r\n                                data.widthSegments,\r\n                                data.heightSegments\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'BoxGeometry':\r\n                        case 'BoxBufferGeometry':\r\n                        case 'CubeGeometry': // backwards compatible\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.width,\r\n                                data.height,\r\n                                data.depth,\r\n                                data.widthSegments,\r\n                                data.heightSegments,\r\n                                data.depthSegments\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'CircleGeometry':\r\n                        case 'CircleBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.segments,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'CylinderGeometry':\r\n                        case 'CylinderBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radiusTop,\r\n                                data.radiusBottom,\r\n                                data.height,\r\n                                data.radialSegments,\r\n                                data.heightSegments,\r\n                                data.openEnded,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'ConeGeometry':\r\n                        case 'ConeBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.height,\r\n                                data.radialSegments,\r\n                                data.heightSegments,\r\n                                data.openEnded,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'SphereGeometry':\r\n                        case 'SphereBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.widthSegments,\r\n                                data.heightSegments,\r\n                                data.phiStart,\r\n                                data.phiLength,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'DodecahedronGeometry':\r\n                        case 'DodecahedronBufferGeometry':\r\n                        case 'IcosahedronGeometry':\r\n                        case 'IcosahedronBufferGeometry':\r\n                        case 'OctahedronGeometry':\r\n                        case 'OctahedronBufferGeometry':\r\n                        case 'TetrahedronGeometry':\r\n                        case 'TetrahedronBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.detail\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'RingGeometry':\r\n                        case 'RingBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.innerRadius,\r\n                                data.outerRadius,\r\n                                data.thetaSegments,\r\n                                data.phiSegments,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'TorusGeometry':\r\n                        case 'TorusBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.tube,\r\n                                data.radialSegments,\r\n                                data.tubularSegments,\r\n                                data.arc\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'TorusKnotGeometry':\r\n                        case 'TorusKnotBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.tube,\r\n                                data.tubularSegments,\r\n                                data.radialSegments,\r\n                                data.p,\r\n                                data.q\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'LatheGeometry':\r\n                        case 'LatheBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.points,\r\n                                data.segments,\r\n                                data.phiStart,\r\n                                data.phiLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'PolyhedronGeometry':\r\n                        case 'PolyhedronBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.vertices,\r\n                                data.indices,\r\n                                data.radius,\r\n                                data.details\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'ShapeGeometry':\r\n                        case 'ShapeBufferGeometry':\r\n\r\n                            var geometryShapes = [];\r\n\r\n                            for ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n                                var shape = shapes[ data.shapes[ j ] ];\r\n\r\n                                geometryShapes.push( shape );\r\n\r\n                            }\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                geometryShapes,\r\n                                data.curveSegments\r\n                            );\r\n\r\n                            break;\r\n\r\n\r\n                        case 'ExtrudeGeometry':\r\n                        case 'ExtrudeBufferGeometry':\r\n\r\n                            var geometryShapes = [];\r\n\r\n                            for ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n                                var shape = shapes[ data.shapes[ j ] ];\r\n\r\n                                geometryShapes.push( shape );\r\n\r\n                            }\r\n\r\n                            var extrudePath = data.options.extrudePath;\r\n\r\n                            if ( extrudePath !== undefined ) {\r\n\r\n                                data.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\r\n\r\n                            }\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                geometryShapes,\r\n                                data.options\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'BufferGeometry':\r\n\r\n                            geometry = bufferGeometryLoader.parse( data );\r\n\r\n                            break;\r\n\r\n                        case 'Geometry':\r\n\r\n                            geometry = geometryLoader.parse( data, this.texturePath ).geometry;\r\n\r\n                            break;\r\n\r\n                        default:\r\n\r\n                            console.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n                            continue;\r\n\r\n                    }\r\n\r\n                    geometry.uuid = data.uuid;\r\n\r\n                    if ( data.name !== undefined ) geometry.name = data.name;\r\n                    if ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\r\n\r\n                    geometries[ data.uuid ] = geometry;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return geometries;\r\n\r\n        },\r\n\r\n        parseMaterials: function ( json, textures ) {\r\n\r\n            var materials = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                var loader = new MaterialLoader();\r\n                loader.setTextures( textures );\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var data = json[ i ];\r\n\r\n                    if ( data.type === 'MultiMaterial' ) {\r\n\r\n                        // Deprecated\r\n\r\n                        var array = [];\r\n\r\n                        for ( var j = 0; j < data.materials.length; j ++ ) {\r\n\r\n                            array.push( loader.parse( data.materials[ j ] ) );\r\n\r\n                        }\r\n\r\n                        materials[ data.uuid ] = array;\r\n\r\n                    } else {\r\n\r\n                        materials[ data.uuid ] = loader.parse( data );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return materials;\r\n\r\n        },\r\n\r\n        parseAnimations: function ( json ) {\r\n\r\n            var animations = [];\r\n\r\n            for ( var i = 0; i < json.length; i ++ ) {\r\n\r\n                var data = json[ i ];\r\n\r\n                var clip = AnimationClip.parse( data );\r\n\r\n                if ( data.uuid !== undefined ) clip.uuid = data.uuid;\r\n\r\n                animations.push( clip );\r\n\r\n            }\r\n\r\n            return animations;\r\n\r\n        },\r\n\r\n        parseImages: function ( json, onLoad ) {\r\n\r\n            var scope = this;\r\n            var images = {};\r\n\r\n            function loadImage( url ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                return loader.load( url, function () {\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, undefined, function () {\r\n\r\n                    scope.manager.itemEnd( url );\r\n                    scope.manager.itemError( url );\r\n\r\n                } );\r\n\r\n            }\r\n\r\n            if ( json !== undefined && json.length > 0 ) {\r\n\r\n                var manager = new LoadingManager( onLoad );\r\n\r\n                var loader = new ImageLoader( manager );\r\n                loader.setCrossOrigin( this.crossOrigin );\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var image = json[ i ];\r\n                    var path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n                    images[ image.uuid ] = loadImage( path );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return images;\r\n\r\n        },\r\n\r\n        parseTextures: function ( json, images ) {\r\n\r\n            function parseConstant( value, type ) {\r\n\r\n                if ( typeof value === 'number' ) return value;\r\n\r\n                console.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n                return type[ value ];\r\n\r\n            }\r\n\r\n            var textures = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var data = json[ i ];\r\n\r\n                    if ( data.image === undefined ) {\r\n\r\n                        console.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n                    }\r\n\r\n                    if ( images[ data.image ] === undefined ) {\r\n\r\n                        console.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n                    }\r\n\r\n                    var texture = new Texture( images[ data.image ] );\r\n                    texture.needsUpdate = true;\r\n\r\n                    texture.uuid = data.uuid;\r\n\r\n                    if ( data.name !== undefined ) texture.name = data.name;\r\n\r\n                    if ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\r\n\r\n                    if ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\r\n                    if ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\r\n                    if ( data.center !== undefined ) texture.center.fromArray( data.center );\r\n                    if ( data.rotation !== undefined ) texture.rotation = data.rotation;\r\n\r\n                    if ( data.wrap !== undefined ) {\r\n\r\n                        texture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\r\n                        texture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\r\n\r\n                    }\r\n\r\n                    if ( data.format !== undefined ) texture.format = data.format;\r\n\r\n                    if ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\r\n                    if ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\r\n                    if ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\r\n                    if ( data.flipY !== undefined ) texture.flipY = data.flipY;\r\n\r\n                    textures[ data.uuid ] = texture;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return textures;\r\n\r\n        },\r\n\r\n        parseObject: function ( data, geometries, materials ) {\r\n\r\n            var object;\r\n\r\n            function getGeometry( name ) {\r\n\r\n                if ( geometries[ name ] === undefined ) {\r\n\r\n                    console.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n                }\r\n\r\n                return geometries[ name ];\r\n\r\n            }\r\n\r\n            function getMaterial( name ) {\r\n\r\n                if ( name === undefined ) return undefined;\r\n\r\n                if ( Array.isArray( name ) ) {\r\n\r\n                    var array = [];\r\n\r\n                    for ( var i = 0, l = name.length; i < l; i ++ ) {\r\n\r\n                        var uuid = name[ i ];\r\n\r\n                        if ( materials[ uuid ] === undefined ) {\r\n\r\n                            console.warn( 'THREE.ObjectLoader: Undefined material', uuid );\r\n\r\n                        }\r\n\r\n                        array.push( materials[ uuid ] );\r\n\r\n                    }\r\n\r\n                    return array;\r\n\r\n                }\r\n\r\n                if ( materials[ name ] === undefined ) {\r\n\r\n                    console.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n                }\r\n\r\n                return materials[ name ];\r\n\r\n            }\r\n\r\n            switch ( data.type ) {\r\n\r\n                case 'Scene':\r\n\r\n                    object = new Scene();\r\n\r\n                    if ( data.background !== undefined ) {\r\n\r\n                        if ( Number.isInteger( data.background ) ) {\r\n\r\n                            object.background = new Color( data.background );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if ( data.fog !== undefined ) {\r\n\r\n                        if ( data.fog.type === 'Fog' ) {\r\n\r\n                            object.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\r\n\r\n                        } else if ( data.fog.type === 'FogExp2' ) {\r\n\r\n                            object.fog = new FogExp2( data.fog.color, data.fog.density );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    break;\r\n\r\n                case 'PerspectiveCamera':\r\n\r\n                    object = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n                    if ( data.focus !== undefined ) object.focus = data.focus;\r\n                    if ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n                    if ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\r\n                    if ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\r\n                    if ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n                    break;\r\n\r\n                case 'OrthographicCamera':\r\n\r\n                    object = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n                    if ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n                    if ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n                    break;\r\n\r\n                case 'AmbientLight':\r\n\r\n                    object = new AmbientLight( data.color, data.intensity );\r\n\r\n                    break;\r\n\r\n                case 'DirectionalLight':\r\n\r\n                    object = new DirectionalLight( data.color, data.intensity );\r\n\r\n                    break;\r\n\r\n                case 'PointLight':\r\n\r\n                    object = new PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n                    break;\r\n\r\n                case 'RectAreaLight':\r\n\r\n                    object = new RectAreaLight( data.color, data.intensity, data.width, data.height );\r\n\r\n                    break;\r\n\r\n                case 'SpotLight':\r\n\r\n                    object = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n                    break;\r\n\r\n                case 'HemisphereLight':\r\n\r\n                    object = new HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n                    break;\r\n\r\n                case 'SkinnedMesh':\r\n\r\n                    console.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\r\n\r\n                case 'Mesh':\r\n\r\n                    var geometry = getGeometry( data.geometry );\r\n                    var material = getMaterial( data.material );\r\n\r\n                    if ( geometry.bones && geometry.bones.length > 0 ) {\r\n\r\n                        object = new SkinnedMesh( geometry, material );\r\n\r\n                    } else {\r\n\r\n                        object = new Mesh( geometry, material );\r\n\r\n                    }\r\n\r\n                    break;\r\n\r\n                case 'LOD':\r\n\r\n                    object = new LOD();\r\n\r\n                    break;\r\n\r\n                case 'Line':\r\n\r\n                    object = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n                    break;\r\n\r\n                case 'LineLoop':\r\n\r\n                    object = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'LineSegments':\r\n\r\n                    object = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'PointCloud':\r\n                case 'Points':\r\n\r\n                    object = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'Sprite':\r\n\r\n                    object = new Sprite( getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'Group':\r\n\r\n                    object = new Group();\r\n\r\n                    break;\r\n\r\n                default:\r\n\r\n                    object = new Object3D();\r\n\r\n            }\r\n\r\n            object.uuid = data.uuid;\r\n\r\n            if ( data.name !== undefined ) object.name = data.name;\r\n\r\n            if ( data.matrix !== undefined ) {\r\n\r\n                object.matrix.fromArray( data.matrix );\r\n\r\n                if ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\r\n                if ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n            } else {\r\n\r\n                if ( data.position !== undefined ) object.position.fromArray( data.position );\r\n                if ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n                if ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\r\n                if ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n            }\r\n\r\n            if ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n            if ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n            if ( data.shadow ) {\r\n\r\n                if ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\r\n                if ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\r\n                if ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\r\n                if ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\r\n\r\n            }\r\n\r\n            if ( data.visible !== undefined ) object.visible = data.visible;\r\n            if ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\r\n            if ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\r\n            if ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n            if ( data.children !== undefined ) {\r\n\r\n                var children = data.children;\r\n\r\n                for ( var i = 0; i < children.length; i ++ ) {\r\n\r\n                    object.add( this.parseObject( children[ i ], geometries, materials ) );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( data.type === 'LOD' ) {\r\n\r\n                var levels = data.levels;\r\n\r\n                for ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n                    var level = levels[ l ];\r\n                    var child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n                    if ( child !== undefined ) {\r\n\r\n                        object.addLevel( child, level.distance );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return object;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var TEXTURE_MAPPING = {\r\n        UVMapping: UVMapping,\r\n        CubeReflectionMapping: CubeReflectionMapping,\r\n        CubeRefractionMapping: CubeRefractionMapping,\r\n        EquirectangularReflectionMapping: EquirectangularReflectionMapping,\r\n        EquirectangularRefractionMapping: EquirectangularRefractionMapping,\r\n        SphericalReflectionMapping: SphericalReflectionMapping,\r\n        CubeUVReflectionMapping: CubeUVReflectionMapping,\r\n        CubeUVRefractionMapping: CubeUVRefractionMapping\r\n    };\r\n\r\n    var TEXTURE_WRAPPING = {\r\n        RepeatWrapping: RepeatWrapping,\r\n        ClampToEdgeWrapping: ClampToEdgeWrapping,\r\n        MirroredRepeatWrapping: MirroredRepeatWrapping\r\n    };\r\n\r\n    var TEXTURE_FILTER = {\r\n        NearestFilter: NearestFilter,\r\n        NearestMipMapNearestFilter: NearestMipMapNearestFilter,\r\n        NearestMipMapLinearFilter: NearestMipMapLinearFilter,\r\n        LinearFilter: LinearFilter,\r\n        LinearMipMapNearestFilter: LinearMipMapNearestFilter,\r\n        LinearMipMapLinearFilter: LinearMipMapLinearFilter\r\n    };\r\n\r\n    /**\r\n     * @author thespite / http://clicktorelease.com/\r\n     */\r\n\r\n\r\n    function ImageBitmapLoader( manager ) {\r\n\r\n        if ( typeof createImageBitmap === 'undefined' ) {\r\n\r\n            console.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\r\n\r\n        }\r\n\r\n        if ( typeof fetch === 'undefined' ) {\r\n\r\n            console.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\r\n\r\n        }\r\n\r\n        this.manager = manager !== undefined ? manager : DefaultLoadingManager;\r\n        this.options = undefined;\r\n\r\n    }\r\n\r\n    ImageBitmapLoader.prototype = {\r\n\r\n        constructor: ImageBitmapLoader,\r\n\r\n        setOptions: function setOptions( options ) {\r\n\r\n            this.options = options;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( url === undefined ) url = '';\r\n\r\n            if ( this.path !== undefined ) url = this.path + url;\r\n\r\n            url = this.manager.resolveURL( url );\r\n\r\n            var scope = this;\r\n\r\n            var cached = Cache.get( url );\r\n\r\n            if ( cached !== undefined ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                setTimeout( function () {\r\n\r\n                    if ( onLoad ) onLoad( cached );\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, 0 );\r\n\r\n                return cached;\r\n\r\n            }\r\n\r\n            fetch( url ).then( function ( res ) {\r\n\r\n                return res.blob();\r\n\r\n            } ).then( function ( blob ) {\r\n\r\n                return createImageBitmap( blob, scope.options );\r\n\r\n            } ).then( function ( imageBitmap ) {\r\n\r\n                Cache.add( url, imageBitmap );\r\n\r\n                if ( onLoad ) onLoad( imageBitmap );\r\n\r\n                scope.manager.itemEnd( url );\r\n\r\n            } ).catch( function ( e ) {\r\n\r\n                if ( onError ) onError( e );\r\n\r\n                scope.manager.itemEnd( url );\r\n                scope.manager.itemError( url );\r\n\r\n            } );\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( /* value */ ) {\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\r\n     **/\r\n\r\n    function ShapePath() {\r\n\r\n        this.type = 'ShapePath';\r\n\r\n        this.color = new Color();\r\n\r\n        this.subPaths = [];\r\n        this.currentPath = null;\r\n\r\n    }\r\n\r\n    Object.assign( ShapePath.prototype, {\r\n\r\n        moveTo: function ( x, y ) {\r\n\r\n            this.currentPath = new Path();\r\n            this.subPaths.push( this.currentPath );\r\n            this.currentPath.moveTo( x, y );\r\n\r\n        },\r\n\r\n        lineTo: function ( x, y ) {\r\n\r\n            this.currentPath.lineTo( x, y );\r\n\r\n        },\r\n\r\n        quadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n            this.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\r\n\r\n        },\r\n\r\n        bezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n            this.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\r\n\r\n        },\r\n\r\n        splineThru: function ( pts ) {\r\n\r\n            this.currentPath.splineThru( pts );\r\n\r\n        },\r\n\r\n        toShapes: function ( isCCW, noHoles ) {\r\n\r\n            function toShapesNoHoles( inSubpaths ) {\r\n\r\n                var shapes = [];\r\n\r\n                for ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n                    var tmpPath = inSubpaths[ i ];\r\n\r\n                    var tmpShape = new Shape();\r\n                    tmpShape.curves = tmpPath.curves;\r\n\r\n                    shapes.push( tmpShape );\r\n\r\n                }\r\n\r\n                return shapes;\r\n\r\n            }\r\n\r\n            function isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n                var polyLen = inPolygon.length;\r\n\r\n                // inPt on polygon contour => immediate success    or\r\n                // toggling of inside/outside at every single! intersection point of an edge\r\n                //  with the horizontal line through inPt, left of inPt\r\n                //  not counting lowerY endpoints of edges and whole edges on that line\r\n                var inside = false;\r\n                for ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n                    var edgeLowPt = inPolygon[ p ];\r\n                    var edgeHighPt = inPolygon[ q ];\r\n\r\n                    var edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n                    var edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n                    if ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n                        // not parallel\r\n                        if ( edgeDy < 0 ) {\r\n\r\n                            edgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\r\n                            edgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n                        }\r\n                        if ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n                        if ( inPt.y === edgeLowPt.y ) {\r\n\r\n                            if ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n                            // continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n                        } else {\r\n\r\n                            var perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n                            if ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n                            if ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n                            inside = ! inside;\t\t// true intersection left of inPt\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        // parallel or collinear\r\n                        if ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n                        // edge lies on the same horizontal line as inPt\r\n                        if ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n                            ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n                        // continue;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return\tinside;\r\n\r\n            }\r\n\r\n            var isClockWise = ShapeUtils.isClockWise;\r\n\r\n            var subPaths = this.subPaths;\r\n            if ( subPaths.length === 0 ) return [];\r\n\r\n            if ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n            var solid, tmpPath, tmpShape, shapes = [];\r\n\r\n            if ( subPaths.length === 1 ) {\r\n\r\n                tmpPath = subPaths[ 0 ];\r\n                tmpShape = new Shape();\r\n                tmpShape.curves = tmpPath.curves;\r\n                shapes.push( tmpShape );\r\n                return shapes;\r\n\r\n            }\r\n\r\n            var holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n            holesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n            // console.log(\"Holes first\", holesFirst);\r\n\r\n            var betterShapeHoles = [];\r\n            var newShapes = [];\r\n            var newShapeHoles = [];\r\n            var mainIdx = 0;\r\n            var tmpPoints;\r\n\r\n            newShapes[ mainIdx ] = undefined;\r\n            newShapeHoles[ mainIdx ] = [];\r\n\r\n            for ( var i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n                tmpPath = subPaths[ i ];\r\n                tmpPoints = tmpPath.getPoints();\r\n                solid = isClockWise( tmpPoints );\r\n                solid = isCCW ? ! solid : solid;\r\n\r\n                if ( solid ) {\r\n\r\n                    if ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n                    newShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\r\n                    newShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n                    if ( holesFirst )\tmainIdx ++;\r\n                    newShapeHoles[ mainIdx ] = [];\r\n\r\n                    //console.log('cw', i);\r\n\r\n                } else {\r\n\r\n                    newShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n                    //console.log('ccw', i);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // only Holes? -> probably all Shapes with wrong orientation\r\n            if ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n            if ( newShapes.length > 1 ) {\r\n\r\n                var ambiguous = false;\r\n                var toChange = [];\r\n\r\n                for ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n                    betterShapeHoles[ sIdx ] = [];\r\n\r\n                }\r\n\r\n                for ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n                    var sho = newShapeHoles[ sIdx ];\r\n\r\n                    for ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n                        var ho = sho[ hIdx ];\r\n                        var hole_unassigned = true;\r\n\r\n                        for ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n                            if ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n                                if ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n                                if ( hole_unassigned ) {\r\n\r\n                                    hole_unassigned = false;\r\n                                    betterShapeHoles[ s2Idx ].push( ho );\r\n\r\n                                } else {\r\n\r\n                                    ambiguous = true;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n                        if ( hole_unassigned ) {\r\n\r\n                            betterShapeHoles[ sIdx ].push( ho );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n                // console.log(\"ambiguous: \", ambiguous);\r\n                if ( toChange.length > 0 ) {\r\n\r\n                    // console.log(\"to change: \", toChange);\r\n                    if ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var tmpHoles;\r\n\r\n            for ( var i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n                tmpShape = newShapes[ i ].s;\r\n                shapes.push( tmpShape );\r\n                tmpHoles = newShapeHoles[ i ];\r\n\r\n                for ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n                    tmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //console.log(\"shape\", shapes);\r\n\r\n            return shapes;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function Font( data ) {\r\n\r\n        this.type = 'Font';\r\n\r\n        this.data = data;\r\n\r\n    }\r\n\r\n    Object.assign( Font.prototype, {\r\n\r\n        isFont: true,\r\n\r\n        generateShapes: function ( text, size, divisions ) {\r\n\r\n            if ( size === undefined ) size = 100;\r\n            if ( divisions === undefined ) divisions = 4;\r\n\r\n            var shapes = [];\r\n            var paths = createPaths( text, size, divisions, this.data );\r\n\r\n            for ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n                Array.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n            }\r\n\r\n            return shapes;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    function createPaths( text, size, divisions, data ) {\r\n\r\n        var chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // see #13988\r\n        var scale = size / data.resolution;\r\n        var line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\r\n\r\n        var paths = [];\r\n\r\n        var offsetX = 0, offsetY = 0;\r\n\r\n        for ( var i = 0; i < chars.length; i ++ ) {\r\n\r\n            var char = chars[ i ];\r\n\r\n            if ( char === '\\n' ) {\r\n\r\n                offsetX = 0;\r\n                offsetY -= line_height;\r\n\r\n            } else {\r\n\r\n                var ret = createPath( char, divisions, scale, offsetX, offsetY, data );\r\n                offsetX += ret.offsetX;\r\n                paths.push( ret.path );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return paths;\r\n\r\n    }\r\n\r\n    function createPath( char, divisions, scale, offsetX, offsetY, data ) {\r\n\r\n        var glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\r\n\r\n        if ( ! glyph ) return;\r\n\r\n        var path = new ShapePath();\r\n\r\n        var x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\r\n\r\n        if ( glyph.o ) {\r\n\r\n            var outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n            for ( var i = 0, l = outline.length; i < l; ) {\r\n\r\n                var action = outline[ i ++ ];\r\n\r\n                switch ( action ) {\r\n\r\n                    case 'm': // moveTo\r\n\r\n                        x = outline[ i ++ ] * scale + offsetX;\r\n                        y = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.moveTo( x, y );\r\n\r\n                        break;\r\n\r\n                    case 'l': // lineTo\r\n\r\n                        x = outline[ i ++ ] * scale + offsetX;\r\n                        y = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.lineTo( x, y );\r\n\r\n                        break;\r\n\r\n                    case 'q': // quadraticCurveTo\r\n\r\n                        cpx = outline[ i ++ ] * scale + offsetX;\r\n                        cpy = outline[ i ++ ] * scale + offsetY;\r\n                        cpx1 = outline[ i ++ ] * scale + offsetX;\r\n                        cpy1 = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n                        break;\r\n\r\n                    case 'b': // bezierCurveTo\r\n\r\n                        cpx = outline[ i ++ ] * scale + offsetX;\r\n                        cpy = outline[ i ++ ] * scale + offsetY;\r\n                        cpx1 = outline[ i ++ ] * scale + offsetX;\r\n                        cpy1 = outline[ i ++ ] * scale + offsetY;\r\n                        cpx2 = outline[ i ++ ] * scale + offsetX;\r\n                        cpy2 = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n                        break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return { offsetX: glyph.ha * scale, path: path };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function FontLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( FontLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setPath( this.path );\r\n            loader.load( url, function ( text ) {\r\n\r\n                var json;\r\n\r\n                try {\r\n\r\n                    json = JSON.parse( text );\r\n\r\n                } catch ( e ) {\r\n\r\n                    console.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\r\n                    json = JSON.parse( text.substring( 65, text.length - 2 ) );\r\n\r\n                }\r\n\r\n                var font = scope.parse( json );\r\n\r\n                if ( onLoad ) onLoad( font );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        parse: function ( json ) {\r\n\r\n            return new Font( json );\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var context;\r\n\r\n    var AudioContext = {\r\n\r\n        getContext: function () {\r\n\r\n            if ( context === undefined ) {\r\n\r\n                context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n            }\r\n\r\n            return context;\r\n\r\n        },\r\n\r\n        setContext: function ( value ) {\r\n\r\n            context = value;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n     */\r\n\r\n    function AudioLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( AudioLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setResponseType( 'arraybuffer' );\r\n            loader.load( url, function ( buffer ) {\r\n\r\n                var context = AudioContext.getContext();\r\n\r\n                context.decodeAudioData( buffer, function ( audioBuffer ) {\r\n\r\n                    onLoad( audioBuffer );\r\n\r\n                } );\r\n\r\n            }, onProgress, onError );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function StereoCamera() {\r\n\r\n        this.type = 'StereoCamera';\r\n\r\n        this.aspect = 1;\r\n\r\n        this.eyeSep = 0.064;\r\n\r\n        this.cameraL = new PerspectiveCamera();\r\n        this.cameraL.layers.enable( 1 );\r\n        this.cameraL.matrixAutoUpdate = false;\r\n\r\n        this.cameraR = new PerspectiveCamera();\r\n        this.cameraR.layers.enable( 2 );\r\n        this.cameraR.matrixAutoUpdate = false;\r\n\r\n    }\r\n\r\n    Object.assign( StereoCamera.prototype, {\r\n\r\n        update: ( function () {\r\n\r\n            var instance, focus, fov, aspect, near, far, zoom, eyeSep;\r\n\r\n            var eyeRight = new Matrix4();\r\n            var eyeLeft = new Matrix4();\r\n\r\n            return function update( camera ) {\r\n\r\n                var needsUpdate = instance !== this || focus !== camera.focus || fov !== camera.fov ||\r\n                    aspect !== camera.aspect * this.aspect || near !== camera.near ||\r\n                    far !== camera.far || zoom !== camera.zoom || eyeSep !== this.eyeSep;\r\n\r\n                if ( needsUpdate ) {\r\n\r\n                    instance = this;\r\n                    focus = camera.focus;\r\n                    fov = camera.fov;\r\n                    aspect = camera.aspect * this.aspect;\r\n                    near = camera.near;\r\n                    far = camera.far;\r\n                    zoom = camera.zoom;\r\n\r\n                    // Off-axis stereoscopic effect based on\r\n                    // http://paulbourke.net/stereographics/stereorender/\r\n\r\n                    var projectionMatrix = camera.projectionMatrix.clone();\r\n                    eyeSep = this.eyeSep / 2;\r\n                    var eyeSepOnProjection = eyeSep * near / focus;\r\n                    var ymax = ( near * Math.tan( _Math.DEG2RAD * fov * 0.5 ) ) / zoom;\r\n                    var xmin, xmax;\r\n\r\n                    // translate xOffset\r\n\r\n                    eyeLeft.elements[ 12 ] = - eyeSep;\r\n                    eyeRight.elements[ 12 ] = eyeSep;\r\n\r\n                    // for left eye\r\n\r\n                    xmin = - ymax * aspect + eyeSepOnProjection;\r\n                    xmax = ymax * aspect + eyeSepOnProjection;\r\n\r\n                    projectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n                    projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n                    this.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n                    // for right eye\r\n\r\n                    xmin = - ymax * aspect - eyeSepOnProjection;\r\n                    xmax = ymax * aspect - eyeSepOnProjection;\r\n\r\n                    projectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n                    projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n                    this.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n                }\r\n\r\n                this.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\r\n                this.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * Camera for rendering cube maps\r\n     *\t- renders scene into axis-aligned cube\r\n     *\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function CubeCamera( near, far, cubeResolution ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'CubeCamera';\r\n\r\n        var fov = 90, aspect = 1;\r\n\r\n        var cameraPX = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraPX.up.set( 0, - 1, 0 );\r\n        cameraPX.lookAt( new Vector3( 1, 0, 0 ) );\r\n        this.add( cameraPX );\r\n\r\n        var cameraNX = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraNX.up.set( 0, - 1, 0 );\r\n        cameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\r\n        this.add( cameraNX );\r\n\r\n        var cameraPY = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraPY.up.set( 0, 0, 1 );\r\n        cameraPY.lookAt( new Vector3( 0, 1, 0 ) );\r\n        this.add( cameraPY );\r\n\r\n        var cameraNY = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraNY.up.set( 0, 0, - 1 );\r\n        cameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\r\n        this.add( cameraNY );\r\n\r\n        var cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraPZ.up.set( 0, - 1, 0 );\r\n        cameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\r\n        this.add( cameraPZ );\r\n\r\n        var cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraNZ.up.set( 0, - 1, 0 );\r\n        cameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\r\n        this.add( cameraNZ );\r\n\r\n        var options = { format: RGBFormat, magFilter: LinearFilter, minFilter: LinearFilter };\r\n\r\n        this.renderTarget = new WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\r\n        this.renderTarget.texture.name = \"CubeCamera\";\r\n\r\n        this.update = function ( renderer, scene ) {\r\n\r\n            if ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n            var renderTarget = this.renderTarget;\r\n            var generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n            renderTarget.texture.generateMipmaps = false;\r\n\r\n            renderTarget.activeCubeFace = 0;\r\n            renderer.render( scene, cameraPX, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 1;\r\n            renderer.render( scene, cameraNX, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 2;\r\n            renderer.render( scene, cameraPY, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 3;\r\n            renderer.render( scene, cameraNY, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 4;\r\n            renderer.render( scene, cameraPZ, renderTarget );\r\n\r\n            renderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n            renderTarget.activeCubeFace = 5;\r\n            renderer.render( scene, cameraNZ, renderTarget );\r\n\r\n            renderer.setRenderTarget( null );\r\n\r\n        };\r\n\r\n        this.clear = function ( renderer, color, depth, stencil ) {\r\n\r\n            var renderTarget = this.renderTarget;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                renderTarget.activeCubeFace = i;\r\n                renderer.setRenderTarget( renderTarget );\r\n\r\n                renderer.clear( color, depth, stencil );\r\n\r\n            }\r\n\r\n            renderer.setRenderTarget( null );\r\n\r\n        };\r\n\r\n    }\r\n\r\n    CubeCamera.prototype = Object.create( Object3D.prototype );\r\n    CubeCamera.prototype.constructor = CubeCamera;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AudioListener() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'AudioListener';\r\n\r\n        this.context = AudioContext.getContext();\r\n\r\n        this.gain = this.context.createGain();\r\n        this.gain.connect( this.context.destination );\r\n\r\n        this.filter = null;\r\n\r\n    }\r\n\r\n    AudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: AudioListener,\r\n\r\n        getInput: function () {\r\n\r\n            return this.gain;\r\n\r\n        },\r\n\r\n        removeFilter: function ( ) {\r\n\r\n            if ( this.filter !== null ) {\r\n\r\n                this.gain.disconnect( this.filter );\r\n                this.filter.disconnect( this.context.destination );\r\n                this.gain.connect( this.context.destination );\r\n                this.filter = null;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        getFilter: function () {\r\n\r\n            return this.filter;\r\n\r\n        },\r\n\r\n        setFilter: function ( value ) {\r\n\r\n            if ( this.filter !== null ) {\r\n\r\n                this.gain.disconnect( this.filter );\r\n                this.filter.disconnect( this.context.destination );\r\n\r\n            } else {\r\n\r\n                this.gain.disconnect( this.context.destination );\r\n\r\n            }\r\n\r\n            this.filter = value;\r\n            this.gain.connect( this.filter );\r\n            this.filter.connect( this.context.destination );\r\n\r\n        },\r\n\r\n        getMasterVolume: function () {\r\n\r\n            return this.gain.gain.value;\r\n\r\n        },\r\n\r\n        setMasterVolume: function ( value ) {\r\n\r\n            this.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n        },\r\n\r\n        updateMatrixWorld: ( function () {\r\n\r\n            var position = new Vector3();\r\n            var quaternion = new Quaternion();\r\n            var scale = new Vector3();\r\n\r\n            var orientation = new Vector3();\r\n\r\n            return function updateMatrixWorld( force ) {\r\n\r\n                Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n                var listener = this.context.listener;\r\n                var up = this.up;\r\n\r\n                this.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n                orientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n                if ( listener.positionX ) {\r\n\r\n                    listener.positionX.setValueAtTime( position.x, this.context.currentTime );\r\n                    listener.positionY.setValueAtTime( position.y, this.context.currentTime );\r\n                    listener.positionZ.setValueAtTime( position.z, this.context.currentTime );\r\n                    listener.forwardX.setValueAtTime( orientation.x, this.context.currentTime );\r\n                    listener.forwardY.setValueAtTime( orientation.y, this.context.currentTime );\r\n                    listener.forwardZ.setValueAtTime( orientation.z, this.context.currentTime );\r\n                    listener.upX.setValueAtTime( up.x, this.context.currentTime );\r\n                    listener.upY.setValueAtTime( up.y, this.context.currentTime );\r\n                    listener.upZ.setValueAtTime( up.z, this.context.currentTime );\r\n\r\n                } else {\r\n\r\n                    listener.setPosition( position.x, position.y, position.z );\r\n                    listener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n                }\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n     */\r\n\r\n    function Audio( listener ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Audio';\r\n\r\n        this.context = listener.context;\r\n\r\n        this.gain = this.context.createGain();\r\n        this.gain.connect( listener.getInput() );\r\n\r\n        this.autoplay = false;\r\n\r\n        this.buffer = null;\r\n        this.loop = false;\r\n        this.startTime = 0;\r\n        this.offset = 0;\r\n        this.playbackRate = 1;\r\n        this.isPlaying = false;\r\n        this.hasPlaybackControl = true;\r\n        this.sourceType = 'empty';\r\n\r\n        this.filters = [];\r\n\r\n    }\r\n\r\n    Audio.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Audio,\r\n\r\n        getOutput: function () {\r\n\r\n            return this.gain;\r\n\r\n        },\r\n\r\n        setNodeSource: function ( audioNode ) {\r\n\r\n            this.hasPlaybackControl = false;\r\n            this.sourceType = 'audioNode';\r\n            this.source = audioNode;\r\n            this.connect();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setMediaElementSource: function ( mediaElement ) {\r\n\r\n            this.hasPlaybackControl = false;\r\n            this.sourceType = 'mediaNode';\r\n            this.source = this.context.createMediaElementSource( mediaElement );\r\n            this.connect();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setBuffer: function ( audioBuffer ) {\r\n\r\n            this.buffer = audioBuffer;\r\n            this.sourceType = 'buffer';\r\n\r\n            if ( this.autoplay ) this.play();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        play: function () {\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                console.warn( 'THREE.Audio: Audio is already playing.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            var source = this.context.createBufferSource();\r\n\r\n            source.buffer = this.buffer;\r\n            source.loop = this.loop;\r\n            source.onended = this.onEnded.bind( this );\r\n            source.playbackRate.setValueAtTime( this.playbackRate, this.startTime );\r\n            this.startTime = this.context.currentTime;\r\n            source.start( this.startTime, this.offset );\r\n\r\n            this.isPlaying = true;\r\n\r\n            this.source = source;\r\n\r\n            return this.connect();\r\n\r\n        },\r\n\r\n        pause: function () {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.source.stop();\r\n                this.offset += ( this.context.currentTime - this.startTime ) * this.playbackRate;\r\n                this.isPlaying = false;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        stop: function () {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            this.source.stop();\r\n            this.offset = 0;\r\n            this.isPlaying = false;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        connect: function () {\r\n\r\n            if ( this.filters.length > 0 ) {\r\n\r\n                this.source.connect( this.filters[ 0 ] );\r\n\r\n                for ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n                    this.filters[ i - 1 ].connect( this.filters[ i ] );\r\n\r\n                }\r\n\r\n                this.filters[ this.filters.length - 1 ].connect( this.getOutput() );\r\n\r\n            } else {\r\n\r\n                this.source.connect( this.getOutput() );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        disconnect: function () {\r\n\r\n            if ( this.filters.length > 0 ) {\r\n\r\n                this.source.disconnect( this.filters[ 0 ] );\r\n\r\n                for ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n                    this.filters[ i - 1 ].disconnect( this.filters[ i ] );\r\n\r\n                }\r\n\r\n                this.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\r\n\r\n            } else {\r\n\r\n                this.source.disconnect( this.getOutput() );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getFilters: function () {\r\n\r\n            return this.filters;\r\n\r\n        },\r\n\r\n        setFilters: function ( value ) {\r\n\r\n            if ( ! value ) value = [];\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.disconnect();\r\n                this.filters = value;\r\n                this.connect();\r\n\r\n            } else {\r\n\r\n                this.filters = value;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getFilter: function () {\r\n\r\n            return this.getFilters()[ 0 ];\r\n\r\n        },\r\n\r\n        setFilter: function ( filter ) {\r\n\r\n            return this.setFilters( filter ? [ filter ] : [] );\r\n\r\n        },\r\n\r\n        setPlaybackRate: function ( value ) {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            this.playbackRate = value;\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.source.playbackRate.setValueAtTime( this.playbackRate, this.context.currentTime );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getPlaybackRate: function () {\r\n\r\n            return this.playbackRate;\r\n\r\n        },\r\n\r\n        onEnded: function () {\r\n\r\n            this.isPlaying = false;\r\n\r\n        },\r\n\r\n        getLoop: function () {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return false;\r\n\r\n            }\r\n\r\n            return this.loop;\r\n\r\n        },\r\n\r\n        setLoop: function ( value ) {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            this.loop = value;\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.source.loop = this.loop;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getVolume: function () {\r\n\r\n            return this.gain.gain.value;\r\n\r\n        },\r\n\r\n        setVolume: function ( value ) {\r\n\r\n            this.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function PositionalAudio( listener ) {\r\n\r\n        Audio.call( this, listener );\r\n\r\n        this.panner = this.context.createPanner();\r\n        this.panner.connect( this.gain );\r\n\r\n    }\r\n\r\n    PositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\r\n\r\n        constructor: PositionalAudio,\r\n\r\n        getOutput: function () {\r\n\r\n            return this.panner;\r\n\r\n        },\r\n\r\n        getRefDistance: function () {\r\n\r\n            return this.panner.refDistance;\r\n\r\n        },\r\n\r\n        setRefDistance: function ( value ) {\r\n\r\n            this.panner.refDistance = value;\r\n\r\n        },\r\n\r\n        getRolloffFactor: function () {\r\n\r\n            return this.panner.rolloffFactor;\r\n\r\n        },\r\n\r\n        setRolloffFactor: function ( value ) {\r\n\r\n            this.panner.rolloffFactor = value;\r\n\r\n        },\r\n\r\n        getDistanceModel: function () {\r\n\r\n            return this.panner.distanceModel;\r\n\r\n        },\r\n\r\n        setDistanceModel: function ( value ) {\r\n\r\n            this.panner.distanceModel = value;\r\n\r\n        },\r\n\r\n        getMaxDistance: function () {\r\n\r\n            return this.panner.maxDistance;\r\n\r\n        },\r\n\r\n        setMaxDistance: function ( value ) {\r\n\r\n            this.panner.maxDistance = value;\r\n\r\n        },\r\n\r\n        updateMatrixWorld: ( function () {\r\n\r\n            var position = new Vector3();\r\n\r\n            return function updateMatrixWorld( force ) {\r\n\r\n                Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n                position.setFromMatrixPosition( this.matrixWorld );\r\n\r\n                this.panner.setPosition( position.x, position.y, position.z );\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AudioAnalyser( audio, fftSize ) {\r\n\r\n        this.analyser = audio.context.createAnalyser();\r\n        this.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n        this.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n        audio.getOutput().connect( this.analyser );\r\n\r\n    }\r\n\r\n    Object.assign( AudioAnalyser.prototype, {\r\n\r\n        getFrequencyData: function () {\r\n\r\n            this.analyser.getByteFrequencyData( this.data );\r\n\r\n            return this.data;\r\n\r\n        },\r\n\r\n        getAverageFrequency: function () {\r\n\r\n            var value = 0, data = this.getFrequencyData();\r\n\r\n            for ( var i = 0; i < data.length; i ++ ) {\r\n\r\n                value += data[ i ];\r\n\r\n            }\r\n\r\n            return value / data.length;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Buffered scene graph property that allows weighted accumulation.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function PropertyMixer( binding, typeName, valueSize ) {\r\n\r\n        this.binding = binding;\r\n        this.valueSize = valueSize;\r\n\r\n        var bufferType = Float64Array,\r\n            mixFunction;\r\n\r\n        switch ( typeName ) {\r\n\r\n            case 'quaternion':\r\n                mixFunction = this._slerp;\r\n                break;\r\n\r\n            case 'string':\r\n            case 'bool':\r\n                bufferType = Array;\r\n                mixFunction = this._select;\r\n                break;\r\n\r\n            default:\r\n                mixFunction = this._lerp;\r\n\r\n        }\r\n\r\n        this.buffer = new bufferType( valueSize * 4 );\r\n        // layout: [ incoming | accu0 | accu1 | orig ]\r\n        //\r\n        // interpolators can use .buffer as their .result\r\n        // the data then goes to 'incoming'\r\n        //\r\n        // 'accu0' and 'accu1' are used frame-interleaved for\r\n        // the cumulative result and are compared to detect\r\n        // changes\r\n        //\r\n        // 'orig' stores the original state of the property\r\n\r\n        this._mixBufferRegion = mixFunction;\r\n\r\n        this.cumulativeWeight = 0;\r\n\r\n        this.useCount = 0;\r\n        this.referenceCount = 0;\r\n\r\n    }\r\n\r\n    Object.assign( PropertyMixer.prototype, {\r\n\r\n        // accumulate data in the 'incoming' region into 'accu<i>'\r\n        accumulate: function ( accuIndex, weight ) {\r\n\r\n            // note: happily accumulating nothing when weight = 0, the caller knows\r\n            // the weight and shouldn't have made the call in the first place\r\n\r\n            var buffer = this.buffer,\r\n                stride = this.valueSize,\r\n                offset = accuIndex * stride + stride,\r\n\r\n                currentWeight = this.cumulativeWeight;\r\n\r\n            if ( currentWeight === 0 ) {\r\n\r\n                // accuN := incoming * weight\r\n\r\n                for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                    buffer[ offset + i ] = buffer[ i ];\r\n\r\n                }\r\n\r\n                currentWeight = weight;\r\n\r\n            } else {\r\n\r\n                // accuN := accuN + incoming * weight\r\n\r\n                currentWeight += weight;\r\n                var mix = weight / currentWeight;\r\n                this._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n            }\r\n\r\n            this.cumulativeWeight = currentWeight;\r\n\r\n        },\r\n\r\n        // apply the state of 'accu<i>' to the binding when accus differ\r\n        apply: function ( accuIndex ) {\r\n\r\n            var stride = this.valueSize,\r\n                buffer = this.buffer,\r\n                offset = accuIndex * stride + stride,\r\n\r\n                weight = this.cumulativeWeight,\r\n\r\n                binding = this.binding;\r\n\r\n            this.cumulativeWeight = 0;\r\n\r\n            if ( weight < 1 ) {\r\n\r\n                // accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n                var originalValueOffset = stride * 3;\r\n\r\n                this._mixBufferRegion(\r\n                    buffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n            }\r\n\r\n            for ( var i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n                if ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n                    // value has changed -> update scene graph\r\n\r\n                    binding.setValue( buffer, offset );\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // remember the state of the bound property and copy it to both accus\r\n        saveOriginalState: function () {\r\n\r\n            var binding = this.binding;\r\n\r\n            var buffer = this.buffer,\r\n                stride = this.valueSize,\r\n\r\n                originalValueOffset = stride * 3;\r\n\r\n            binding.getValue( buffer, originalValueOffset );\r\n\r\n            // accu[0..1] := orig -- initially detect changes against the original\r\n            for ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n                buffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n            }\r\n\r\n            this.cumulativeWeight = 0;\r\n\r\n        },\r\n\r\n        // apply the state previously taken via 'saveOriginalState' to the binding\r\n        restoreOriginalState: function () {\r\n\r\n            var originalValueOffset = this.valueSize * 3;\r\n            this.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n        },\r\n\r\n\r\n        // mix functions\r\n\r\n        _select: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n            if ( t >= 0.5 ) {\r\n\r\n                for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                    buffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _slerp: function ( buffer, dstOffset, srcOffset, t ) {\r\n\r\n            Quaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\r\n\r\n        },\r\n\r\n        _lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n            var s = 1 - t;\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                var j = dstOffset + i;\r\n\r\n                buffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A reference to a real property in the scene graph.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n        // Characters [].:/ are reserved for track binding syntax.\r\n    var RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\r\n\r\n    function Composite( targetGroup, path, optionalParsedPath ) {\r\n\r\n        var parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n        this._targetGroup = targetGroup;\r\n        this._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n    }\r\n\r\n    Object.assign( Composite.prototype, {\r\n\r\n        getValue: function ( array, offset ) {\r\n\r\n            this.bind(); // bind all binding\r\n\r\n            var firstValidIndex = this._targetGroup.nCachedObjects_,\r\n                binding = this._bindings[ firstValidIndex ];\r\n\r\n            // and only call .getValue on the first\r\n            if ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n        },\r\n\r\n        setValue: function ( array, offset ) {\r\n\r\n            var bindings = this._bindings;\r\n\r\n            for ( var i = this._targetGroup.nCachedObjects_,\r\n                      n = bindings.length; i !== n; ++ i ) {\r\n\r\n                bindings[ i ].setValue( array, offset );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        bind: function () {\r\n\r\n            var bindings = this._bindings;\r\n\r\n            for ( var i = this._targetGroup.nCachedObjects_,\r\n                      n = bindings.length; i !== n; ++ i ) {\r\n\r\n                bindings[ i ].bind();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        unbind: function () {\r\n\r\n            var bindings = this._bindings;\r\n\r\n            for ( var i = this._targetGroup.nCachedObjects_,\r\n                      n = bindings.length; i !== n; ++ i ) {\r\n\r\n                bindings[ i ].unbind();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n\r\n    function PropertyBinding( rootNode, path, parsedPath ) {\r\n\r\n        this.path = path;\r\n        this.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n        this.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n        this.rootNode = rootNode;\r\n\r\n    }\r\n\r\n    Object.assign( PropertyBinding, {\r\n\r\n        Composite: Composite,\r\n\r\n        create: function ( root, path, parsedPath ) {\r\n\r\n            if ( ! ( root && root.isAnimationObjectGroup ) ) {\r\n\r\n                return new PropertyBinding( root, path, parsedPath );\r\n\r\n            } else {\r\n\r\n                return new PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Replaces spaces with underscores and removes unsupported characters from\r\n         * node names, to ensure compatibility with parseTrackName().\r\n         *\r\n         * @param  {string} name Node name to be sanitized.\r\n         * @return {string}\r\n         */\r\n        sanitizeNodeName: ( function () {\r\n\r\n            var reservedRe = new RegExp( '[' + RESERVED_CHARS_RE + ']', 'g' );\r\n\r\n            return function sanitizeNodeName( name ) {\r\n\r\n                return name.replace( /\\s/g, '_' ).replace( reservedRe, '' );\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        parseTrackName: function () {\r\n\r\n            // Attempts to allow node names from any language. ES5's `\\w` regexp matches\r\n            // only latin characters, and the unicode \\p{L} is not yet supported. So\r\n            // instead, we exclude reserved characters and match everything else.\r\n            var wordChar = '[^' + RESERVED_CHARS_RE + ']';\r\n            var wordCharOrDot = '[^' + RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\r\n\r\n            // Parent directories, delimited by '/' or ':'. Currently unused, but must\r\n            // be matched to parse the rest of the track name.\r\n            var directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', wordChar );\r\n\r\n            // Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\r\n            var nodeRe = /(WCOD+)?/.source.replace( 'WCOD', wordCharOrDot );\r\n\r\n            // Object on target node, and accessor. May not contain reserved\r\n            // characters. Accessor may contain any character except closing bracket.\r\n            var objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', wordChar );\r\n\r\n            // Property and accessor. May not contain reserved characters. Accessor may\r\n            // contain any non-bracket characters.\r\n            var propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', wordChar );\r\n\r\n            var trackRe = new RegExp( ''\r\n                + '^'\r\n                + directoryRe\r\n                + nodeRe\r\n                + objectRe\r\n                + propertyRe\r\n                + '$'\r\n            );\r\n\r\n            var supportedObjectNames = [ 'material', 'materials', 'bones' ];\r\n\r\n            return function parseTrackName( trackName ) {\r\n\r\n                var matches = trackRe.exec( trackName );\r\n\r\n                if ( ! matches ) {\r\n\r\n                    throw new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\r\n\r\n                }\r\n\r\n                var results = {\r\n                    // directoryName: matches[ 1 ], // (tschw) currently unused\r\n                    nodeName: matches[ 2 ],\r\n                    objectName: matches[ 3 ],\r\n                    objectIndex: matches[ 4 ],\r\n                    propertyName: matches[ 5 ], // required\r\n                    propertyIndex: matches[ 6 ]\r\n                };\r\n\r\n                var lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\r\n\r\n                if ( lastDot !== undefined && lastDot !== - 1 ) {\r\n\r\n                    var objectName = results.nodeName.substring( lastDot + 1 );\r\n\r\n                    // Object names must be checked against a whitelist. Otherwise, there\r\n                    // is no way to parse 'foo.bar.baz': 'baz' must be a property, but\r\n                    // 'bar' could be the objectName, or part of a nodeName (which can\r\n                    // include '.' characters).\r\n                    if ( supportedObjectNames.indexOf( objectName ) !== - 1 ) {\r\n\r\n                        results.nodeName = results.nodeName.substring( 0, lastDot );\r\n                        results.objectName = objectName;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\r\n                    throw new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\r\n\r\n                }\r\n\r\n                return results;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        findNode: function ( root, nodeName ) {\r\n\r\n            if ( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n                return root;\r\n\r\n            }\r\n\r\n            // search into skeleton bones.\r\n            if ( root.skeleton ) {\r\n\r\n                var bone = root.skeleton.getBoneByName( nodeName );\r\n\r\n                if ( bone !== undefined ) {\r\n\r\n                    return bone;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // search into node subtree.\r\n            if ( root.children ) {\r\n\r\n                var searchNodeSubtree = function ( children ) {\r\n\r\n                    for ( var i = 0; i < children.length; i ++ ) {\r\n\r\n                        var childNode = children[ i ];\r\n\r\n                        if ( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n                            return childNode;\r\n\r\n                        }\r\n\r\n                        var result = searchNodeSubtree( childNode.children );\r\n\r\n                        if ( result ) return result;\r\n\r\n                    }\r\n\r\n                    return null;\r\n\r\n                };\r\n\r\n                var subTreeNode = searchNodeSubtree( root.children );\r\n\r\n                if ( subTreeNode ) {\r\n\r\n                    return subTreeNode;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( PropertyBinding.prototype, { // prototype, continued\r\n\r\n        // these are used to \"bind\" a nonexistent property\r\n        _getValue_unavailable: function () {},\r\n        _setValue_unavailable: function () {},\r\n\r\n        BindingType: {\r\n            Direct: 0,\r\n            EntireArray: 1,\r\n            ArrayElement: 2,\r\n            HasFromToArray: 3\r\n        },\r\n\r\n        Versioning: {\r\n            None: 0,\r\n            NeedsUpdate: 1,\r\n            MatrixWorldNeedsUpdate: 2\r\n        },\r\n\r\n        GetterByBindingType: [\r\n\r\n            function getValue_direct( buffer, offset ) {\r\n\r\n                buffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n            },\r\n\r\n            function getValue_array( buffer, offset ) {\r\n\r\n                var source = this.resolvedProperty;\r\n\r\n                for ( var i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n                    buffer[ offset ++ ] = source[ i ];\r\n\r\n                }\r\n\r\n            },\r\n\r\n            function getValue_arrayElement( buffer, offset ) {\r\n\r\n                buffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n            },\r\n\r\n            function getValue_toArray( buffer, offset ) {\r\n\r\n                this.resolvedProperty.toArray( buffer, offset );\r\n\r\n            }\r\n\r\n        ],\r\n\r\n        SetterByBindingTypeAndVersioning: [\r\n\r\n            [\r\n                // Direct\r\n\r\n                function setValue_direct( buffer, offset ) {\r\n\r\n                    this.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\r\n                },\r\n\r\n                function setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.targetObject[ this.propertyName ] = buffer[ offset ];\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.targetObject[ this.propertyName ] = buffer[ offset ];\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ], [\r\n\r\n                // EntireArray\r\n\r\n                function setValue_array( buffer, offset ) {\r\n\r\n                    var dest = this.resolvedProperty;\r\n\r\n                    for ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n                        dest[ i ] = buffer[ offset ++ ];\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                function setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    var dest = this.resolvedProperty;\r\n\r\n                    for ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n                        dest[ i ] = buffer[ offset ++ ];\r\n\r\n                    }\r\n\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    var dest = this.resolvedProperty;\r\n\r\n                    for ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n                        dest[ i ] = buffer[ offset ++ ];\r\n\r\n                    }\r\n\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ], [\r\n\r\n                // ArrayElement\r\n\r\n                function setValue_arrayElement( buffer, offset ) {\r\n\r\n                    this.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n                },\r\n\r\n                function setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ], [\r\n\r\n                // HasToFromArray\r\n\r\n                function setValue_fromArray( buffer, offset ) {\r\n\r\n                    this.resolvedProperty.fromArray( buffer, offset );\r\n\r\n                },\r\n\r\n                function setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty.fromArray( buffer, offset );\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty.fromArray( buffer, offset );\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ]\r\n\r\n        ],\r\n\r\n        getValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n            this.bind();\r\n            this.getValue( targetArray, offset );\r\n\r\n            // Note: This class uses a State pattern on a per-method basis:\r\n            // 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n            // prototype version of these methods with one that represents\r\n            // the bound state. When the property is not found, the methods\r\n            // become no-ops.\r\n\r\n        },\r\n\r\n        setValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n            this.bind();\r\n            this.setValue( sourceArray, offset );\r\n\r\n        },\r\n\r\n        // create getter / setter pair for a property in the scene graph\r\n        bind: function () {\r\n\r\n            var targetObject = this.node,\r\n                parsedPath = this.parsedPath,\r\n\r\n                objectName = parsedPath.objectName,\r\n                propertyName = parsedPath.propertyName,\r\n                propertyIndex = parsedPath.propertyIndex;\r\n\r\n            if ( ! targetObject ) {\r\n\r\n                targetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n                this.node = targetObject;\r\n\r\n            }\r\n\r\n            // set fail state so we can just 'return' on error\r\n            this.getValue = this._getValue_unavailable;\r\n            this.setValue = this._setValue_unavailable;\r\n\r\n            // ensure there is a value node\r\n            if ( ! targetObject ) {\r\n\r\n                console.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( objectName ) {\r\n\r\n                var objectIndex = parsedPath.objectIndex;\r\n\r\n                // special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n                switch ( objectName ) {\r\n\r\n                    case 'materials':\r\n\r\n                        if ( ! targetObject.material ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        if ( ! targetObject.material.materials ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        targetObject = targetObject.material.materials;\r\n\r\n                        break;\r\n\r\n                    case 'bones':\r\n\r\n                        if ( ! targetObject.skeleton ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        // potential future optimization: skip this if propertyIndex is already an integer\r\n                        // and convert the integer string to a true integer.\r\n\r\n                        targetObject = targetObject.skeleton.bones;\r\n\r\n                        // support resolving morphTarget names into indices.\r\n                        for ( var i = 0; i < targetObject.length; i ++ ) {\r\n\r\n                            if ( targetObject[ i ].name === objectIndex ) {\r\n\r\n                                objectIndex = i;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        break;\r\n\r\n                    default:\r\n\r\n                        if ( targetObject[ objectName ] === undefined ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        targetObject = targetObject[ objectName ];\r\n\r\n                }\r\n\r\n\r\n                if ( objectIndex !== undefined ) {\r\n\r\n                    if ( targetObject[ objectIndex ] === undefined ) {\r\n\r\n                        console.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    targetObject = targetObject[ objectIndex ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // resolve property\r\n            var nodeProperty = targetObject[ propertyName ];\r\n\r\n            if ( nodeProperty === undefined ) {\r\n\r\n                var nodeName = parsedPath.nodeName;\r\n\r\n                console.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\r\n                    '.' + propertyName + ' but it wasn\\'t found.', targetObject );\r\n                return;\r\n\r\n            }\r\n\r\n            // determine versioning scheme\r\n            var versioning = this.Versioning.None;\r\n\r\n            if ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n                versioning = this.Versioning.NeedsUpdate;\r\n                this.targetObject = targetObject;\r\n\r\n            } else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n                versioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n                this.targetObject = targetObject;\r\n\r\n            }\r\n\r\n            // determine how the property gets bound\r\n            var bindingType = this.BindingType.Direct;\r\n\r\n            if ( propertyIndex !== undefined ) {\r\n\r\n                // access a sub element of the property array (only primitives are supported right now)\r\n\r\n                if ( propertyName === \"morphTargetInfluences\" ) {\r\n\r\n                    // potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n                    // support resolving morphTarget names into indices.\r\n                    if ( ! targetObject.geometry ) {\r\n\r\n                        console.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    if ( targetObject.geometry.isBufferGeometry ) {\r\n\r\n                        if ( ! targetObject.geometry.morphAttributes ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        for ( var i = 0; i < this.node.geometry.morphAttributes.position.length; i ++ ) {\r\n\r\n                            if ( targetObject.geometry.morphAttributes.position[ i ].name === propertyIndex ) {\r\n\r\n                                propertyIndex = i;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n\r\n                    } else {\r\n\r\n                        if ( ! targetObject.geometry.morphTargets ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        for ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\r\n\r\n                            if ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\r\n\r\n                                propertyIndex = i;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                bindingType = this.BindingType.ArrayElement;\r\n\r\n                this.resolvedProperty = nodeProperty;\r\n                this.propertyIndex = propertyIndex;\r\n\r\n            } else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\r\n                // must use copy for Object3D.Euler/Quaternion\r\n\r\n                bindingType = this.BindingType.HasFromToArray;\r\n\r\n                this.resolvedProperty = nodeProperty;\r\n\r\n            } else if ( Array.isArray( nodeProperty ) ) {\r\n\r\n                bindingType = this.BindingType.EntireArray;\r\n\r\n                this.resolvedProperty = nodeProperty;\r\n\r\n            } else {\r\n\r\n                this.propertyName = propertyName;\r\n\r\n            }\r\n\r\n            // select getter / setter\r\n            this.getValue = this.GetterByBindingType[ bindingType ];\r\n            this.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n        },\r\n\r\n        unbind: function () {\r\n\r\n            this.node = null;\r\n\r\n            // back to the prototype version of getValue / setValue\r\n            // note: avoiding to mutate the shape of 'this' via 'delete'\r\n            this.getValue = this._getValue_unbound;\r\n            this.setValue = this._setValue_unbound;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //!\\ DECLARE ALIAS AFTER assign prototype !\r\n    Object.assign( PropertyBinding.prototype, {\r\n\r\n        // initial state of these methods that calls 'bind'\r\n        _getValue_unbound: PropertyBinding.prototype.getValue,\r\n        _setValue_unbound: PropertyBinding.prototype.setValue,\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A group of objects that receives a shared animation state.\r\n     *\r\n     * Usage:\r\n     *\r\n     * \t-\tAdd objects you would otherwise pass as 'root' to the\r\n     * \t\tconstructor or the .clipAction method of AnimationMixer.\r\n     *\r\n     * \t-\tInstead pass this object as 'root'.\r\n     *\r\n     * \t-\tYou can also add and remove objects later when the mixer\r\n     * \t\tis running.\r\n     *\r\n     * Note:\r\n     *\r\n     *  \tObjects of this class appear as one object to the mixer,\r\n     *  \tso cache control of the individual objects must be done\r\n     *  \ton the group.\r\n     *\r\n     * Limitation:\r\n     *\r\n     * \t- \tThe animated properties must be compatible among the\r\n     * \t\tall objects in the group.\r\n     *\r\n     *  -\tA single property can either be controlled through a\r\n     *  \ttarget group or directly, but not both.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function AnimationObjectGroup() {\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        // cached objects followed by the active ones\r\n        this._objects = Array.prototype.slice.call( arguments );\r\n\r\n        this.nCachedObjects_ = 0;\t\t\t// threshold\r\n        // note: read by PropertyBinding.Composite\r\n\r\n        var indices = {};\r\n        this._indicesByUUID = indices;\t\t// for bookkeeping\r\n\r\n        for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n            indices[ arguments[ i ].uuid ] = i;\r\n\r\n        }\r\n\r\n        this._paths = [];\t\t\t\t\t// inside: string\r\n        this._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\r\n        this._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\r\n        this._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\r\n\r\n        var scope = this;\r\n\r\n        this.stats = {\r\n\r\n            objects: {\r\n                get total() {\r\n\r\n                    return scope._objects.length;\r\n\r\n                },\r\n                get inUse() {\r\n\r\n                    return this.total - scope.nCachedObjects_;\r\n\r\n                }\r\n            },\r\n            get bindingsPerObject() {\r\n\r\n                return scope._bindings.length;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    Object.assign( AnimationObjectGroup.prototype, {\r\n\r\n        isAnimationObjectGroup: true,\r\n\r\n        add: function () {\r\n\r\n            var objects = this._objects,\r\n                nObjects = objects.length,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                indicesByUUID = this._indicesByUUID,\r\n                paths = this._paths,\r\n                parsedPaths = this._parsedPaths,\r\n                bindings = this._bindings,\r\n                nBindings = bindings.length,\r\n                knownObject = undefined;\r\n\r\n            for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n                var object = arguments[ i ],\r\n                    uuid = object.uuid,\r\n                    index = indicesByUUID[ uuid ];\r\n\r\n                if ( index === undefined ) {\r\n\r\n                    // unknown object -> add it to the ACTIVE region\r\n\r\n                    index = nObjects ++;\r\n                    indicesByUUID[ uuid ] = index;\r\n                    objects.push( object );\r\n\r\n                    // accounting is done, now do the same for all bindings\r\n\r\n                    for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                        bindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n                    }\r\n\r\n                } else if ( index < nCachedObjects ) {\r\n\r\n                    knownObject = objects[ index ];\r\n\r\n                    // move existing object to the ACTIVE region\r\n\r\n                    var firstActiveIndex = -- nCachedObjects,\r\n                        lastCachedObject = objects[ firstActiveIndex ];\r\n\r\n                    indicesByUUID[ lastCachedObject.uuid ] = index;\r\n                    objects[ index ] = lastCachedObject;\r\n\r\n                    indicesByUUID[ uuid ] = firstActiveIndex;\r\n                    objects[ firstActiveIndex ] = object;\r\n\r\n                    // accounting is done, now do the same for all bindings\r\n\r\n                    for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                        var bindingsForPath = bindings[ j ],\r\n                            lastCached = bindingsForPath[ firstActiveIndex ],\r\n                            binding = bindingsForPath[ index ];\r\n\r\n                        bindingsForPath[ index ] = lastCached;\r\n\r\n                        if ( binding === undefined ) {\r\n\r\n                            // since we do not bother to create new bindings\r\n                            // for objects that are cached, the binding may\r\n                            // or may not exist\r\n\r\n                            binding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\r\n\r\n                        }\r\n\r\n                        bindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n                    }\r\n\r\n                } else if ( objects[ index ] !== knownObject ) {\r\n\r\n                    console.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\r\n                        'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\r\n\r\n                } // else the object is already where we want it to be\r\n\r\n            } // for arguments\r\n\r\n            this.nCachedObjects_ = nCachedObjects;\r\n\r\n        },\r\n\r\n        remove: function () {\r\n\r\n            var objects = this._objects,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                indicesByUUID = this._indicesByUUID,\r\n                bindings = this._bindings,\r\n                nBindings = bindings.length;\r\n\r\n            for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n                var object = arguments[ i ],\r\n                    uuid = object.uuid,\r\n                    index = indicesByUUID[ uuid ];\r\n\r\n                if ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n                    // move existing object into the CACHED region\r\n\r\n                    var lastCachedIndex = nCachedObjects ++,\r\n                        firstActiveObject = objects[ lastCachedIndex ];\r\n\r\n                    indicesByUUID[ firstActiveObject.uuid ] = index;\r\n                    objects[ index ] = firstActiveObject;\r\n\r\n                    indicesByUUID[ uuid ] = lastCachedIndex;\r\n                    objects[ lastCachedIndex ] = object;\r\n\r\n                    // accounting is done, now do the same for all bindings\r\n\r\n                    for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                        var bindingsForPath = bindings[ j ],\r\n                            firstActive = bindingsForPath[ lastCachedIndex ],\r\n                            binding = bindingsForPath[ index ];\r\n\r\n                        bindingsForPath[ index ] = firstActive;\r\n                        bindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } // for arguments\r\n\r\n            this.nCachedObjects_ = nCachedObjects;\r\n\r\n        },\r\n\r\n        // remove & forget\r\n        uncache: function () {\r\n\r\n            var objects = this._objects,\r\n                nObjects = objects.length,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                indicesByUUID = this._indicesByUUID,\r\n                bindings = this._bindings,\r\n                nBindings = bindings.length;\r\n\r\n            for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n                var object = arguments[ i ],\r\n                    uuid = object.uuid,\r\n                    index = indicesByUUID[ uuid ];\r\n\r\n                if ( index !== undefined ) {\r\n\r\n                    delete indicesByUUID[ uuid ];\r\n\r\n                    if ( index < nCachedObjects ) {\r\n\r\n                        // object is cached, shrink the CACHED region\r\n\r\n                        var firstActiveIndex = -- nCachedObjects,\r\n                            lastCachedObject = objects[ firstActiveIndex ],\r\n                            lastIndex = -- nObjects,\r\n                            lastObject = objects[ lastIndex ];\r\n\r\n                        // last cached object takes this object's place\r\n                        indicesByUUID[ lastCachedObject.uuid ] = index;\r\n                        objects[ index ] = lastCachedObject;\r\n\r\n                        // last object goes to the activated slot and pop\r\n                        indicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n                        objects[ firstActiveIndex ] = lastObject;\r\n                        objects.pop();\r\n\r\n                        // accounting is done, now do the same for all bindings\r\n\r\n                        for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                            var bindingsForPath = bindings[ j ],\r\n                                lastCached = bindingsForPath[ firstActiveIndex ],\r\n                                last = bindingsForPath[ lastIndex ];\r\n\r\n                            bindingsForPath[ index ] = lastCached;\r\n                            bindingsForPath[ firstActiveIndex ] = last;\r\n                            bindingsForPath.pop();\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        // object is active, just swap with the last and pop\r\n\r\n                        var lastIndex = -- nObjects,\r\n                            lastObject = objects[ lastIndex ];\r\n\r\n                        indicesByUUID[ lastObject.uuid ] = index;\r\n                        objects[ index ] = lastObject;\r\n                        objects.pop();\r\n\r\n                        // accounting is done, now do the same for all bindings\r\n\r\n                        for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                            var bindingsForPath = bindings[ j ];\r\n\r\n                            bindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n                            bindingsForPath.pop();\r\n\r\n                        }\r\n\r\n                    } // cached or active\r\n\r\n                } // if object is known\r\n\r\n            } // for arguments\r\n\r\n            this.nCachedObjects_ = nCachedObjects;\r\n\r\n        },\r\n\r\n        // Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n        subscribe_: function ( path, parsedPath ) {\r\n\r\n            // returns an array of bindings for the given path that is changed\r\n            // according to the contained objects in the group\r\n\r\n            var indicesByPath = this._bindingsIndicesByPath,\r\n                index = indicesByPath[ path ],\r\n                bindings = this._bindings;\r\n\r\n            if ( index !== undefined ) return bindings[ index ];\r\n\r\n            var paths = this._paths,\r\n                parsedPaths = this._parsedPaths,\r\n                objects = this._objects,\r\n                nObjects = objects.length,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                bindingsForPath = new Array( nObjects );\r\n\r\n            index = bindings.length;\r\n\r\n            indicesByPath[ path ] = index;\r\n\r\n            paths.push( path );\r\n            parsedPaths.push( parsedPath );\r\n            bindings.push( bindingsForPath );\r\n\r\n            for ( var i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\r\n\r\n                var object = objects[ i ];\r\n                bindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\r\n\r\n            }\r\n\r\n            return bindingsForPath;\r\n\r\n        },\r\n\r\n        unsubscribe_: function ( path ) {\r\n\r\n            // tells the group to forget about a property path and no longer\r\n            // update the array previously obtained with 'subscribe_'\r\n\r\n            var indicesByPath = this._bindingsIndicesByPath,\r\n                index = indicesByPath[ path ];\r\n\r\n            if ( index !== undefined ) {\r\n\r\n                var paths = this._paths,\r\n                    parsedPaths = this._parsedPaths,\r\n                    bindings = this._bindings,\r\n                    lastBindingsIndex = bindings.length - 1,\r\n                    lastBindings = bindings[ lastBindingsIndex ],\r\n                    lastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n                indicesByPath[ lastBindingsPath ] = index;\r\n\r\n                bindings[ index ] = lastBindings;\r\n                bindings.pop();\r\n\r\n                parsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n                parsedPaths.pop();\r\n\r\n                paths[ index ] = paths[ lastBindingsIndex ];\r\n                paths.pop();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Action provided by AnimationMixer for scheduling clip playback on specific\r\n     * objects.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     *\r\n     */\r\n\r\n    function AnimationAction( mixer, clip, localRoot ) {\r\n\r\n        this._mixer = mixer;\r\n        this._clip = clip;\r\n        this._localRoot = localRoot || null;\r\n\r\n        var tracks = clip.tracks,\r\n            nTracks = tracks.length,\r\n            interpolants = new Array( nTracks );\r\n\r\n        var interpolantSettings = {\r\n            endingStart: ZeroCurvatureEnding,\r\n            endingEnd: ZeroCurvatureEnding\r\n        };\r\n\r\n        for ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n            var interpolant = tracks[ i ].createInterpolant( null );\r\n            interpolants[ i ] = interpolant;\r\n            interpolant.settings = interpolantSettings;\r\n\r\n        }\r\n\r\n        this._interpolantSettings = interpolantSettings;\r\n\r\n        this._interpolants = interpolants;\t// bound by the mixer\r\n\r\n        // inside: PropertyMixer (managed by the mixer)\r\n        this._propertyBindings = new Array( nTracks );\r\n\r\n        this._cacheIndex = null;\t\t\t// for the memory manager\r\n        this._byClipCacheIndex = null;\t\t// for the memory manager\r\n\r\n        this._timeScaleInterpolant = null;\r\n        this._weightInterpolant = null;\r\n\r\n        this.loop = LoopRepeat;\r\n        this._loopCount = - 1;\r\n\r\n        // global mixer time when the action is to be started\r\n        // it's set back to 'null' upon start of the action\r\n        this._startTime = null;\r\n\r\n        // scaled local time of the action\r\n        // gets clamped or wrapped to 0..clip.duration according to loop\r\n        this.time = 0;\r\n\r\n        this.timeScale = 1;\r\n        this._effectiveTimeScale = 1;\r\n\r\n        this.weight = 1;\r\n        this._effectiveWeight = 1;\r\n\r\n        this.repetitions = Infinity; \t\t// no. of repetitions when looping\r\n\r\n        this.paused = false;\t\t\t\t// true -> zero effective time scale\r\n        this.enabled = true;\t\t\t\t// false -> zero effective weight\r\n\r\n        this.clampWhenFinished \t= false;\t// keep feeding the last frame?\r\n\r\n        this.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\r\n        this.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\r\n\r\n    }\r\n\r\n    Object.assign( AnimationAction.prototype, {\r\n\r\n        // State & Scheduling\r\n\r\n        play: function () {\r\n\r\n            this._mixer._activateAction( this );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        stop: function () {\r\n\r\n            this._mixer._deactivateAction( this );\r\n\r\n            return this.reset();\r\n\r\n        },\r\n\r\n        reset: function () {\r\n\r\n            this.paused = false;\r\n            this.enabled = true;\r\n\r\n            this.time = 0;\t\t\t// restart clip\r\n            this._loopCount = - 1;\t// forget previous loops\r\n            this._startTime = null;\t// forget scheduling\r\n\r\n            return this.stopFading().stopWarping();\r\n\r\n        },\r\n\r\n        isRunning: function () {\r\n\r\n            return this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n                this._startTime === null && this._mixer._isActiveAction( this );\r\n\r\n        },\r\n\r\n        // return true when play has been called\r\n        isScheduled: function () {\r\n\r\n            return this._mixer._isActiveAction( this );\r\n\r\n        },\r\n\r\n        startAt: function ( time ) {\r\n\r\n            this._startTime = time;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setLoop: function ( mode, repetitions ) {\r\n\r\n            this.loop = mode;\r\n            this.repetitions = repetitions;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // Weight\r\n\r\n        // set the weight stopping any scheduled fading\r\n        // although .enabled = false yields an effective weight of zero, this\r\n        // method does *not* change .enabled, because it would be confusing\r\n        setEffectiveWeight: function ( weight ) {\r\n\r\n            this.weight = weight;\r\n\r\n            // note: same logic as when updated at runtime\r\n            this._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n            return this.stopFading();\r\n\r\n        },\r\n\r\n        // return the weight considering fading and .enabled\r\n        getEffectiveWeight: function () {\r\n\r\n            return this._effectiveWeight;\r\n\r\n        },\r\n\r\n        fadeIn: function ( duration ) {\r\n\r\n            return this._scheduleFading( duration, 0, 1 );\r\n\r\n        },\r\n\r\n        fadeOut: function ( duration ) {\r\n\r\n            return this._scheduleFading( duration, 1, 0 );\r\n\r\n        },\r\n\r\n        crossFadeFrom: function ( fadeOutAction, duration, warp ) {\r\n\r\n            fadeOutAction.fadeOut( duration );\r\n            this.fadeIn( duration );\r\n\r\n            if ( warp ) {\r\n\r\n                var fadeInDuration = this._clip.duration,\r\n                    fadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n                    startEndRatio = fadeOutDuration / fadeInDuration,\r\n                    endStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n                fadeOutAction.warp( 1.0, startEndRatio, duration );\r\n                this.warp( endStartRatio, 1.0, duration );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        crossFadeTo: function ( fadeInAction, duration, warp ) {\r\n\r\n            return fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n        },\r\n\r\n        stopFading: function () {\r\n\r\n            var weightInterpolant = this._weightInterpolant;\r\n\r\n            if ( weightInterpolant !== null ) {\r\n\r\n                this._weightInterpolant = null;\r\n                this._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // Time Scale Control\r\n\r\n        // set the time scale stopping any scheduled warping\r\n        // although .paused = true yields an effective time scale of zero, this\r\n        // method does *not* change .paused, because it would be confusing\r\n        setEffectiveTimeScale: function ( timeScale ) {\r\n\r\n            this.timeScale = timeScale;\r\n            this._effectiveTimeScale = this.paused ? 0 : timeScale;\r\n\r\n            return this.stopWarping();\r\n\r\n        },\r\n\r\n        // return the time scale considering warping and .paused\r\n        getEffectiveTimeScale: function () {\r\n\r\n            return this._effectiveTimeScale;\r\n\r\n        },\r\n\r\n        setDuration: function ( duration ) {\r\n\r\n            this.timeScale = this._clip.duration / duration;\r\n\r\n            return this.stopWarping();\r\n\r\n        },\r\n\r\n        syncWith: function ( action ) {\r\n\r\n            this.time = action.time;\r\n            this.timeScale = action.timeScale;\r\n\r\n            return this.stopWarping();\r\n\r\n        },\r\n\r\n        halt: function ( duration ) {\r\n\r\n            return this.warp( this._effectiveTimeScale, 0, duration );\r\n\r\n        },\r\n\r\n        warp: function ( startTimeScale, endTimeScale, duration ) {\r\n\r\n            var mixer = this._mixer, now = mixer.time,\r\n                interpolant = this._timeScaleInterpolant,\r\n\r\n                timeScale = this.timeScale;\r\n\r\n            if ( interpolant === null ) {\r\n\r\n                interpolant = mixer._lendControlInterpolant();\r\n                this._timeScaleInterpolant = interpolant;\r\n\r\n            }\r\n\r\n            var times = interpolant.parameterPositions,\r\n                values = interpolant.sampleValues;\r\n\r\n            times[ 0 ] = now;\r\n            times[ 1 ] = now + duration;\r\n\r\n            values[ 0 ] = startTimeScale / timeScale;\r\n            values[ 1 ] = endTimeScale / timeScale;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        stopWarping: function () {\r\n\r\n            var timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n            if ( timeScaleInterpolant !== null ) {\r\n\r\n                this._timeScaleInterpolant = null;\r\n                this._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // Object Accessors\r\n\r\n        getMixer: function () {\r\n\r\n            return this._mixer;\r\n\r\n        },\r\n\r\n        getClip: function () {\r\n\r\n            return this._clip;\r\n\r\n        },\r\n\r\n        getRoot: function () {\r\n\r\n            return this._localRoot || this._mixer._root;\r\n\r\n        },\r\n\r\n        // Interna\r\n\r\n        _update: function ( time, deltaTime, timeDirection, accuIndex ) {\r\n\r\n            // called by the mixer\r\n\r\n            if ( ! this.enabled ) {\r\n\r\n                // call ._updateWeight() to update ._effectiveWeight\r\n\r\n                this._updateWeight( time );\r\n                return;\r\n\r\n            }\r\n\r\n            var startTime = this._startTime;\r\n\r\n            if ( startTime !== null ) {\r\n\r\n                // check for scheduled start of action\r\n\r\n                var timeRunning = ( time - startTime ) * timeDirection;\r\n                if ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n                    return; // yet to come / don't decide when delta = 0\r\n\r\n                }\r\n\r\n                // start\r\n\r\n                this._startTime = null; // unschedule\r\n                deltaTime = timeDirection * timeRunning;\r\n\r\n            }\r\n\r\n            // apply time scale and advance time\r\n\r\n            deltaTime *= this._updateTimeScale( time );\r\n            var clipTime = this._updateTime( deltaTime );\r\n\r\n            // note: _updateTime may disable the action resulting in\r\n            // an effective weight of 0\r\n\r\n            var weight = this._updateWeight( time );\r\n\r\n            if ( weight > 0 ) {\r\n\r\n                var interpolants = this._interpolants;\r\n                var propertyMixers = this._propertyBindings;\r\n\r\n                for ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n                    interpolants[ j ].evaluate( clipTime );\r\n                    propertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _updateWeight: function ( time ) {\r\n\r\n            var weight = 0;\r\n\r\n            if ( this.enabled ) {\r\n\r\n                weight = this.weight;\r\n                var interpolant = this._weightInterpolant;\r\n\r\n                if ( interpolant !== null ) {\r\n\r\n                    var interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n                    weight *= interpolantValue;\r\n\r\n                    if ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n                        this.stopFading();\r\n\r\n                        if ( interpolantValue === 0 ) {\r\n\r\n                            // faded out, disable\r\n                            this.enabled = false;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this._effectiveWeight = weight;\r\n            return weight;\r\n\r\n        },\r\n\r\n        _updateTimeScale: function ( time ) {\r\n\r\n            var timeScale = 0;\r\n\r\n            if ( ! this.paused ) {\r\n\r\n                timeScale = this.timeScale;\r\n\r\n                var interpolant = this._timeScaleInterpolant;\r\n\r\n                if ( interpolant !== null ) {\r\n\r\n                    var interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n                    timeScale *= interpolantValue;\r\n\r\n                    if ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n                        this.stopWarping();\r\n\r\n                        if ( timeScale === 0 ) {\r\n\r\n                            // motion has halted, pause\r\n                            this.paused = true;\r\n\r\n                        } else {\r\n\r\n                            // warp done - apply final time scale\r\n                            this.timeScale = timeScale;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this._effectiveTimeScale = timeScale;\r\n            return timeScale;\r\n\r\n        },\r\n\r\n        _updateTime: function ( deltaTime ) {\r\n\r\n            var time = this.time + deltaTime;\r\n\r\n            if ( deltaTime === 0 ) return time;\r\n\r\n            var duration = this._clip.duration,\r\n\r\n                loop = this.loop,\r\n                loopCount = this._loopCount;\r\n\r\n            if ( loop === LoopOnce ) {\r\n\r\n                if ( loopCount === - 1 ) {\r\n\r\n                    // just started\r\n\r\n                    this._loopCount = 0;\r\n                    this._setEndings( true, true, false );\r\n\r\n                }\r\n\r\n                handle_stop: {\r\n\r\n                    if ( time >= duration ) {\r\n\r\n                        time = duration;\r\n\r\n                    } else if ( time < 0 ) {\r\n\r\n                        time = 0;\r\n\r\n                    } else break handle_stop;\r\n\r\n                    if ( this.clampWhenFinished ) this.paused = true;\r\n                    else this.enabled = false;\r\n\r\n                    this._mixer.dispatchEvent( {\r\n                        type: 'finished', action: this,\r\n                        direction: deltaTime < 0 ? - 1 : 1\r\n                    } );\r\n\r\n                }\r\n\r\n            } else { // repetitive Repeat or PingPong\r\n\r\n                var pingPong = ( loop === LoopPingPong );\r\n\r\n                if ( loopCount === - 1 ) {\r\n\r\n                    // just started\r\n\r\n                    if ( deltaTime >= 0 ) {\r\n\r\n                        loopCount = 0;\r\n\r\n                        this._setEndings( true, this.repetitions === 0, pingPong );\r\n\r\n                    } else {\r\n\r\n                        // when looping in reverse direction, the initial\r\n                        // transition through zero counts as a repetition,\r\n                        // so leave loopCount at -1\r\n\r\n                        this._setEndings( this.repetitions === 0, true, pingPong );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( time >= duration || time < 0 ) {\r\n\r\n                    // wrap around\r\n\r\n                    var loopDelta = Math.floor( time / duration ); // signed\r\n                    time -= duration * loopDelta;\r\n\r\n                    loopCount += Math.abs( loopDelta );\r\n\r\n                    var pending = this.repetitions - loopCount;\r\n\r\n                    if ( pending <= 0 ) {\r\n\r\n                        // have to stop (switch state, clamp time, fire event)\r\n\r\n                        if ( this.clampWhenFinished ) this.paused = true;\r\n                        else this.enabled = false;\r\n\r\n                        time = deltaTime > 0 ? duration : 0;\r\n\r\n                        this._mixer.dispatchEvent( {\r\n                            type: 'finished', action: this,\r\n                            direction: deltaTime > 0 ? 1 : - 1\r\n                        } );\r\n\r\n                    } else {\r\n\r\n                        // keep running\r\n\r\n                        if ( pending === 1 ) {\r\n\r\n                            // entering the last round\r\n\r\n                            var atStart = deltaTime < 0;\r\n                            this._setEndings( atStart, ! atStart, pingPong );\r\n\r\n                        } else {\r\n\r\n                            this._setEndings( false, false, pingPong );\r\n\r\n                        }\r\n\r\n                        this._loopCount = loopCount;\r\n\r\n                        this._mixer.dispatchEvent( {\r\n                            type: 'loop', action: this, loopDelta: loopDelta\r\n                        } );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( pingPong && ( loopCount & 1 ) === 1 ) {\r\n\r\n                    // invert time for the \"pong round\"\r\n\r\n                    this.time = time;\r\n                    return duration - time;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.time = time;\r\n            return time;\r\n\r\n        },\r\n\r\n        _setEndings: function ( atStart, atEnd, pingPong ) {\r\n\r\n            var settings = this._interpolantSettings;\r\n\r\n            if ( pingPong ) {\r\n\r\n                settings.endingStart \t= ZeroSlopeEnding;\r\n                settings.endingEnd\t\t= ZeroSlopeEnding;\r\n\r\n            } else {\r\n\r\n                // assuming for LoopOnce atStart == atEnd == true\r\n\r\n                if ( atStart ) {\r\n\r\n                    settings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n                } else {\r\n\r\n                    settings.endingStart = WrapAroundEnding;\r\n\r\n                }\r\n\r\n                if ( atEnd ) {\r\n\r\n                    settings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n                } else {\r\n\r\n                    settings.endingEnd \t = WrapAroundEnding;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _scheduleFading: function ( duration, weightNow, weightThen ) {\r\n\r\n            var mixer = this._mixer, now = mixer.time,\r\n                interpolant = this._weightInterpolant;\r\n\r\n            if ( interpolant === null ) {\r\n\r\n                interpolant = mixer._lendControlInterpolant();\r\n                this._weightInterpolant = interpolant;\r\n\r\n            }\r\n\r\n            var times = interpolant.parameterPositions,\r\n                values = interpolant.sampleValues;\r\n\r\n            times[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\r\n            times[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Player for AnimationClips.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function AnimationMixer( root ) {\r\n\r\n        this._root = root;\r\n        this._initMemoryManager();\r\n        this._accuIndex = 0;\r\n\r\n        this.time = 0;\r\n\r\n        this.timeScale = 1.0;\r\n\r\n    }\r\n\r\n    AnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: AnimationMixer,\r\n\r\n        _bindAction: function ( action, prototypeAction ) {\r\n\r\n            var root = action._localRoot || this._root,\r\n                tracks = action._clip.tracks,\r\n                nTracks = tracks.length,\r\n                bindings = action._propertyBindings,\r\n                interpolants = action._interpolants,\r\n                rootUuid = root.uuid,\r\n                bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n            if ( bindingsByName === undefined ) {\r\n\r\n                bindingsByName = {};\r\n                bindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n            }\r\n\r\n            for ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n                var track = tracks[ i ],\r\n                    trackName = track.name,\r\n                    binding = bindingsByName[ trackName ];\r\n\r\n                if ( binding !== undefined ) {\r\n\r\n                    bindings[ i ] = binding;\r\n\r\n                } else {\r\n\r\n                    binding = bindings[ i ];\r\n\r\n                    if ( binding !== undefined ) {\r\n\r\n                        // existing binding, make sure the cache knows\r\n\r\n                        if ( binding._cacheIndex === null ) {\r\n\r\n                            ++ binding.referenceCount;\r\n                            this._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n                        }\r\n\r\n                        continue;\r\n\r\n                    }\r\n\r\n                    var path = prototypeAction && prototypeAction.\r\n                        _propertyBindings[ i ].binding.parsedPath;\r\n\r\n                    binding = new PropertyMixer(\r\n                        PropertyBinding.create( root, trackName, path ),\r\n                        track.ValueTypeName, track.getValueSize() );\r\n\r\n                    ++ binding.referenceCount;\r\n                    this._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n                    bindings[ i ] = binding;\r\n\r\n                }\r\n\r\n                interpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _activateAction: function ( action ) {\r\n\r\n            if ( ! this._isActiveAction( action ) ) {\r\n\r\n                if ( action._cacheIndex === null ) {\r\n\r\n                    // this action has been forgotten by the cache, but the user\r\n                    // appears to be still using it -> rebind\r\n\r\n                    var rootUuid = ( action._localRoot || this._root ).uuid,\r\n                        clipUuid = action._clip.uuid,\r\n                        actionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n                    this._bindAction( action,\r\n                        actionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n                    this._addInactiveAction( action, clipUuid, rootUuid );\r\n\r\n                }\r\n\r\n                var bindings = action._propertyBindings;\r\n\r\n                // increment reference counts / sort out state\r\n                for ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n                    var binding = bindings[ i ];\r\n\r\n                    if ( binding.useCount ++ === 0 ) {\r\n\r\n                        this._lendBinding( binding );\r\n                        binding.saveOriginalState();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this._lendAction( action );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _deactivateAction: function ( action ) {\r\n\r\n            if ( this._isActiveAction( action ) ) {\r\n\r\n                var bindings = action._propertyBindings;\r\n\r\n                // decrement reference counts / sort out state\r\n                for ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n                    var binding = bindings[ i ];\r\n\r\n                    if ( -- binding.useCount === 0 ) {\r\n\r\n                        binding.restoreOriginalState();\r\n                        this._takeBackBinding( binding );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this._takeBackAction( action );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // Memory manager\r\n\r\n        _initMemoryManager: function () {\r\n\r\n            this._actions = []; // 'nActiveActions' followed by inactive ones\r\n            this._nActiveActions = 0;\r\n\r\n            this._actionsByClip = {};\r\n            // inside:\r\n            // {\r\n            // \t\tknownActions: Array< AnimationAction >\t- used as prototypes\r\n            // \t\tactionByRoot: AnimationAction\t\t\t- lookup\r\n            // }\r\n\r\n\r\n            this._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n            this._nActiveBindings = 0;\r\n\r\n            this._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n            this._controlInterpolants = []; // same game as above\r\n            this._nActiveControlInterpolants = 0;\r\n\r\n            var scope = this;\r\n\r\n            this.stats = {\r\n\r\n                actions: {\r\n                    get total() {\r\n\r\n                        return scope._actions.length;\r\n\r\n                    },\r\n                    get inUse() {\r\n\r\n                        return scope._nActiveActions;\r\n\r\n                    }\r\n                },\r\n                bindings: {\r\n                    get total() {\r\n\r\n                        return scope._bindings.length;\r\n\r\n                    },\r\n                    get inUse() {\r\n\r\n                        return scope._nActiveBindings;\r\n\r\n                    }\r\n                },\r\n                controlInterpolants: {\r\n                    get total() {\r\n\r\n                        return scope._controlInterpolants.length;\r\n\r\n                    },\r\n                    get inUse() {\r\n\r\n                        return scope._nActiveControlInterpolants;\r\n\r\n                    }\r\n                }\r\n\r\n            };\r\n\r\n        },\r\n\r\n        // Memory management for AnimationAction objects\r\n\r\n        _isActiveAction: function ( action ) {\r\n\r\n            var index = action._cacheIndex;\r\n            return index !== null && index < this._nActiveActions;\r\n\r\n        },\r\n\r\n        _addInactiveAction: function ( action, clipUuid, rootUuid ) {\r\n\r\n            var actions = this._actions,\r\n                actionsByClip = this._actionsByClip,\r\n                actionsForClip = actionsByClip[ clipUuid ];\r\n\r\n            if ( actionsForClip === undefined ) {\r\n\r\n                actionsForClip = {\r\n\r\n                    knownActions: [ action ],\r\n                    actionByRoot: {}\r\n\r\n                };\r\n\r\n                action._byClipCacheIndex = 0;\r\n\r\n                actionsByClip[ clipUuid ] = actionsForClip;\r\n\r\n            } else {\r\n\r\n                var knownActions = actionsForClip.knownActions;\r\n\r\n                action._byClipCacheIndex = knownActions.length;\r\n                knownActions.push( action );\r\n\r\n            }\r\n\r\n            action._cacheIndex = actions.length;\r\n            actions.push( action );\r\n\r\n            actionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n        },\r\n\r\n        _removeInactiveAction: function ( action ) {\r\n\r\n            var actions = this._actions,\r\n                lastInactiveAction = actions[ actions.length - 1 ],\r\n                cacheIndex = action._cacheIndex;\r\n\r\n            lastInactiveAction._cacheIndex = cacheIndex;\r\n            actions[ cacheIndex ] = lastInactiveAction;\r\n            actions.pop();\r\n\r\n            action._cacheIndex = null;\r\n\r\n\r\n            var clipUuid = action._clip.uuid,\r\n                actionsByClip = this._actionsByClip,\r\n                actionsForClip = actionsByClip[ clipUuid ],\r\n                knownActionsForClip = actionsForClip.knownActions,\r\n\r\n                lastKnownAction =\r\n                    knownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n                byClipCacheIndex = action._byClipCacheIndex;\r\n\r\n            lastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n            knownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n            knownActionsForClip.pop();\r\n\r\n            action._byClipCacheIndex = null;\r\n\r\n\r\n            var actionByRoot = actionsForClip.actionByRoot,\r\n                rootUuid = ( action._localRoot || this._root ).uuid;\r\n\r\n            delete actionByRoot[ rootUuid ];\r\n\r\n            if ( knownActionsForClip.length === 0 ) {\r\n\r\n                delete actionsByClip[ clipUuid ];\r\n\r\n            }\r\n\r\n            this._removeInactiveBindingsForAction( action );\r\n\r\n        },\r\n\r\n        _removeInactiveBindingsForAction: function ( action ) {\r\n\r\n            var bindings = action._propertyBindings;\r\n            for ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n                var binding = bindings[ i ];\r\n\r\n                if ( -- binding.referenceCount === 0 ) {\r\n\r\n                    this._removeInactiveBinding( binding );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _lendAction: function ( action ) {\r\n\r\n            // [ active actions |  inactive actions  ]\r\n            // [  active actions >| inactive actions ]\r\n            //                 s        a\r\n            //                  <-swap->\r\n            //                 a        s\r\n\r\n            var actions = this._actions,\r\n                prevIndex = action._cacheIndex,\r\n\r\n                lastActiveIndex = this._nActiveActions ++,\r\n\r\n                firstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n            action._cacheIndex = lastActiveIndex;\r\n            actions[ lastActiveIndex ] = action;\r\n\r\n            firstInactiveAction._cacheIndex = prevIndex;\r\n            actions[ prevIndex ] = firstInactiveAction;\r\n\r\n        },\r\n\r\n        _takeBackAction: function ( action ) {\r\n\r\n            // [  active actions  | inactive actions ]\r\n            // [ active actions |< inactive actions  ]\r\n            //        a        s\r\n            //         <-swap->\r\n            //        s        a\r\n\r\n            var actions = this._actions,\r\n                prevIndex = action._cacheIndex,\r\n\r\n                firstInactiveIndex = -- this._nActiveActions,\r\n\r\n                lastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n            action._cacheIndex = firstInactiveIndex;\r\n            actions[ firstInactiveIndex ] = action;\r\n\r\n            lastActiveAction._cacheIndex = prevIndex;\r\n            actions[ prevIndex ] = lastActiveAction;\r\n\r\n        },\r\n\r\n        // Memory management for PropertyMixer objects\r\n\r\n        _addInactiveBinding: function ( binding, rootUuid, trackName ) {\r\n\r\n            var bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n                bindings = this._bindings;\r\n\r\n            if ( bindingByName === undefined ) {\r\n\r\n                bindingByName = {};\r\n                bindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n            }\r\n\r\n            bindingByName[ trackName ] = binding;\r\n\r\n            binding._cacheIndex = bindings.length;\r\n            bindings.push( binding );\r\n\r\n        },\r\n\r\n        _removeInactiveBinding: function ( binding ) {\r\n\r\n            var bindings = this._bindings,\r\n                propBinding = binding.binding,\r\n                rootUuid = propBinding.rootNode.uuid,\r\n                trackName = propBinding.path,\r\n                bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n                lastInactiveBinding = bindings[ bindings.length - 1 ],\r\n                cacheIndex = binding._cacheIndex;\r\n\r\n            lastInactiveBinding._cacheIndex = cacheIndex;\r\n            bindings[ cacheIndex ] = lastInactiveBinding;\r\n            bindings.pop();\r\n\r\n            delete bindingByName[ trackName ];\r\n\r\n            remove_empty_map: {\r\n\r\n                for ( var _ in bindingByName ) break remove_empty_map; // eslint-disable-line no-unused-vars\r\n\r\n                delete bindingsByRoot[ rootUuid ];\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _lendBinding: function ( binding ) {\r\n\r\n            var bindings = this._bindings,\r\n                prevIndex = binding._cacheIndex,\r\n\r\n                lastActiveIndex = this._nActiveBindings ++,\r\n\r\n                firstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n            binding._cacheIndex = lastActiveIndex;\r\n            bindings[ lastActiveIndex ] = binding;\r\n\r\n            firstInactiveBinding._cacheIndex = prevIndex;\r\n            bindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n        },\r\n\r\n        _takeBackBinding: function ( binding ) {\r\n\r\n            var bindings = this._bindings,\r\n                prevIndex = binding._cacheIndex,\r\n\r\n                firstInactiveIndex = -- this._nActiveBindings,\r\n\r\n                lastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n            binding._cacheIndex = firstInactiveIndex;\r\n            bindings[ firstInactiveIndex ] = binding;\r\n\r\n            lastActiveBinding._cacheIndex = prevIndex;\r\n            bindings[ prevIndex ] = lastActiveBinding;\r\n\r\n        },\r\n\r\n\r\n        // Memory management of Interpolants for weight and time scale\r\n\r\n        _lendControlInterpolant: function () {\r\n\r\n            var interpolants = this._controlInterpolants,\r\n                lastActiveIndex = this._nActiveControlInterpolants ++,\r\n                interpolant = interpolants[ lastActiveIndex ];\r\n\r\n            if ( interpolant === undefined ) {\r\n\r\n                interpolant = new LinearInterpolant(\r\n                    new Float32Array( 2 ), new Float32Array( 2 ),\r\n                    1, this._controlInterpolantsResultBuffer );\r\n\r\n                interpolant.__cacheIndex = lastActiveIndex;\r\n                interpolants[ lastActiveIndex ] = interpolant;\r\n\r\n            }\r\n\r\n            return interpolant;\r\n\r\n        },\r\n\r\n        _takeBackControlInterpolant: function ( interpolant ) {\r\n\r\n            var interpolants = this._controlInterpolants,\r\n                prevIndex = interpolant.__cacheIndex,\r\n\r\n                firstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n                lastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n            interpolant.__cacheIndex = firstInactiveIndex;\r\n            interpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n            lastActiveInterpolant.__cacheIndex = prevIndex;\r\n            interpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n        },\r\n\r\n        _controlInterpolantsResultBuffer: new Float32Array( 1 ),\r\n\r\n        // return an action for a clip optionally using a custom root target\r\n        // object (this method allocates a lot of dynamic memory in case a\r\n        // previously unknown clip/root combination is specified)\r\n        clipAction: function ( clip, optionalRoot ) {\r\n\r\n            var root = optionalRoot || this._root,\r\n                rootUuid = root.uuid,\r\n\r\n                clipObject = typeof clip === 'string' ?\r\n                    AnimationClip.findByName( root, clip ) : clip,\r\n\r\n                clipUuid = clipObject !== null ? clipObject.uuid : clip,\r\n\r\n                actionsForClip = this._actionsByClip[ clipUuid ],\r\n                prototypeAction = null;\r\n\r\n            if ( actionsForClip !== undefined ) {\r\n\r\n                var existingAction =\r\n                    actionsForClip.actionByRoot[ rootUuid ];\r\n\r\n                if ( existingAction !== undefined ) {\r\n\r\n                    return existingAction;\r\n\r\n                }\r\n\r\n                // we know the clip, so we don't have to parse all\r\n                // the bindings again but can just copy\r\n                prototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n                // also, take the clip from the prototype action\r\n                if ( clipObject === null )\r\n                    clipObject = prototypeAction._clip;\r\n\r\n            }\r\n\r\n            // clip must be known when specified via string\r\n            if ( clipObject === null ) return null;\r\n\r\n            // allocate all resources required to run it\r\n            var newAction = new AnimationAction( this, clipObject, optionalRoot );\r\n\r\n            this._bindAction( newAction, prototypeAction );\r\n\r\n            // and make the action known to the memory manager\r\n            this._addInactiveAction( newAction, clipUuid, rootUuid );\r\n\r\n            return newAction;\r\n\r\n        },\r\n\r\n        // get an existing action\r\n        existingAction: function ( clip, optionalRoot ) {\r\n\r\n            var root = optionalRoot || this._root,\r\n                rootUuid = root.uuid,\r\n\r\n                clipObject = typeof clip === 'string' ?\r\n                    AnimationClip.findByName( root, clip ) : clip,\r\n\r\n                clipUuid = clipObject ? clipObject.uuid : clip,\r\n\r\n                actionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n            if ( actionsForClip !== undefined ) {\r\n\r\n                return actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        },\r\n\r\n        // deactivates all previously scheduled actions\r\n        stopAllAction: function () {\r\n\r\n            var actions = this._actions,\r\n                nActions = this._nActiveActions,\r\n                bindings = this._bindings,\r\n                nBindings = this._nActiveBindings;\r\n\r\n            this._nActiveActions = 0;\r\n            this._nActiveBindings = 0;\r\n\r\n            for ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n                actions[ i ].reset();\r\n\r\n            }\r\n\r\n            for ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n                bindings[ i ].useCount = 0;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // advance the time and update apply the animation\r\n        update: function ( deltaTime ) {\r\n\r\n            deltaTime *= this.timeScale;\r\n\r\n            var actions = this._actions,\r\n                nActions = this._nActiveActions,\r\n\r\n                time = this.time += deltaTime,\r\n                timeDirection = Math.sign( deltaTime ),\r\n\r\n                accuIndex = this._accuIndex ^= 1;\r\n\r\n            // run active actions\r\n\r\n            for ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n                var action = actions[ i ];\r\n\r\n                action._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n            }\r\n\r\n            // update scene graph\r\n\r\n            var bindings = this._bindings,\r\n                nBindings = this._nActiveBindings;\r\n\r\n            for ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n                bindings[ i ].apply( accuIndex );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // return this mixer's root target object\r\n        getRoot: function () {\r\n\r\n            return this._root;\r\n\r\n        },\r\n\r\n        // free all resources specific to a particular clip\r\n        uncacheClip: function ( clip ) {\r\n\r\n            var actions = this._actions,\r\n                clipUuid = clip.uuid,\r\n                actionsByClip = this._actionsByClip,\r\n                actionsForClip = actionsByClip[ clipUuid ];\r\n\r\n            if ( actionsForClip !== undefined ) {\r\n\r\n                // note: just calling _removeInactiveAction would mess up the\r\n                // iteration state and also require updating the state we can\r\n                // just throw away\r\n\r\n                var actionsToRemove = actionsForClip.knownActions;\r\n\r\n                for ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n                    var action = actionsToRemove[ i ];\r\n\r\n                    this._deactivateAction( action );\r\n\r\n                    var cacheIndex = action._cacheIndex,\r\n                        lastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n                    action._cacheIndex = null;\r\n                    action._byClipCacheIndex = null;\r\n\r\n                    lastInactiveAction._cacheIndex = cacheIndex;\r\n                    actions[ cacheIndex ] = lastInactiveAction;\r\n                    actions.pop();\r\n\r\n                    this._removeInactiveBindingsForAction( action );\r\n\r\n                }\r\n\r\n                delete actionsByClip[ clipUuid ];\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // free all resources specific to a particular root target object\r\n        uncacheRoot: function ( root ) {\r\n\r\n            var rootUuid = root.uuid,\r\n                actionsByClip = this._actionsByClip;\r\n\r\n            for ( var clipUuid in actionsByClip ) {\r\n\r\n                var actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\r\n                    action = actionByRoot[ rootUuid ];\r\n\r\n                if ( action !== undefined ) {\r\n\r\n                    this._deactivateAction( action );\r\n                    this._removeInactiveAction( action );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n            if ( bindingByName !== undefined ) {\r\n\r\n                for ( var trackName in bindingByName ) {\r\n\r\n                    var binding = bindingByName[ trackName ];\r\n                    binding.restoreOriginalState();\r\n                    this._removeInactiveBinding( binding );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // remove a targeted clip from the cache\r\n        uncacheAction: function ( clip, optionalRoot ) {\r\n\r\n            var action = this.existingAction( clip, optionalRoot );\r\n\r\n            if ( action !== null ) {\r\n\r\n                this._deactivateAction( action );\r\n                this._removeInactiveAction( action );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Uniform( value ) {\r\n\r\n        if ( typeof value === 'string' ) {\r\n\r\n            console.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\r\n            value = arguments[ 1 ];\r\n\r\n        }\r\n\r\n        this.value = value;\r\n\r\n    }\r\n\r\n    Uniform.prototype.clone = function () {\r\n\r\n        return new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InstancedBufferGeometry() {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'InstancedBufferGeometry';\r\n        this.maxInstancedCount = undefined;\r\n\r\n    }\r\n\r\n    InstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\r\n\r\n        constructor: InstancedBufferGeometry,\r\n\r\n        isInstancedBufferGeometry: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            BufferGeometry.prototype.copy.call( this, source );\r\n\r\n            this.maxInstancedCount = source.maxInstancedCount;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\r\n\r\n        this.data = interleavedBuffer;\r\n        this.itemSize = itemSize;\r\n        this.offset = offset;\r\n\r\n        this.normalized = normalized === true;\r\n\r\n    }\r\n\r\n    Object.defineProperties( InterleavedBufferAttribute.prototype, {\r\n\r\n        count: {\r\n\r\n            get: function () {\r\n\r\n                return this.data.count;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        array: {\r\n\r\n            get: function () {\r\n\r\n                return this.data.array;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( InterleavedBufferAttribute.prototype, {\r\n\r\n        isInterleavedBufferAttribute: true,\r\n\r\n        setX: function ( index, x ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( index, y ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setZ: function ( index, z ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setW: function ( index, w ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getX: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n        },\r\n\r\n        getY: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n        },\r\n\r\n        getZ: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n        },\r\n\r\n        getW: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n        },\r\n\r\n        setXY: function ( index, x, y ) {\r\n\r\n            index = index * this.data.stride + this.offset;\r\n\r\n            this.data.array[ index + 0 ] = x;\r\n            this.data.array[ index + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZ: function ( index, x, y, z ) {\r\n\r\n            index = index * this.data.stride + this.offset;\r\n\r\n            this.data.array[ index + 0 ] = x;\r\n            this.data.array[ index + 1 ] = y;\r\n            this.data.array[ index + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZW: function ( index, x, y, z, w ) {\r\n\r\n            index = index * this.data.stride + this.offset;\r\n\r\n            this.data.array[ index + 0 ] = x;\r\n            this.data.array[ index + 1 ] = y;\r\n            this.data.array[ index + 2 ] = z;\r\n            this.data.array[ index + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InterleavedBuffer( array, stride ) {\r\n\r\n        this.array = array;\r\n        this.stride = stride;\r\n        this.count = array !== undefined ? array.length / stride : 0;\r\n\r\n        this.dynamic = false;\r\n        this.updateRange = { offset: 0, count: - 1 };\r\n\r\n        this.version = 0;\r\n\r\n    }\r\n\r\n    Object.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value === true ) this.version ++;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( InterleavedBuffer.prototype, {\r\n\r\n        isInterleavedBuffer: true,\r\n\r\n        onUploadCallback: function () {},\r\n\r\n        setArray: function ( array ) {\r\n\r\n            if ( Array.isArray( array ) ) {\r\n\r\n                throw new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n            }\r\n\r\n            this.count = array !== undefined ? array.length / this.stride : 0;\r\n            this.array = array;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setDynamic: function ( value ) {\r\n\r\n            this.dynamic = value;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.array = new source.array.constructor( source.array );\r\n            this.count = source.count;\r\n            this.stride = source.stride;\r\n            this.dynamic = source.dynamic;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyAt: function ( index1, attribute, index2 ) {\r\n\r\n            index1 *= this.stride;\r\n            index2 *= attribute.stride;\r\n\r\n            for ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n                this.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        set: function ( value, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.array.set( value, offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        onUpload: function ( callback ) {\r\n\r\n            this.onUploadCallback = callback;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\r\n\r\n        InterleavedBuffer.call( this, array, stride );\r\n\r\n        this.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n    }\r\n\r\n    InstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\r\n\r\n        constructor: InstancedInterleavedBuffer,\r\n\r\n        isInstancedInterleavedBuffer: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n            this.meshPerAttribute = source.meshPerAttribute;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InstancedBufferAttribute( array, itemSize, meshPerAttribute ) {\r\n\r\n        BufferAttribute.call( this, array, itemSize );\r\n\r\n        this.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n    }\r\n\r\n    InstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\r\n\r\n        constructor: InstancedBufferAttribute,\r\n\r\n        isInstancedBufferAttribute: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            BufferAttribute.prototype.copy.call( this, source );\r\n\r\n            this.meshPerAttribute = source.meshPerAttribute;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author bhouston / http://clara.io/\r\n     * @author stephomi / http://stephaneginier.com/\r\n     */\r\n\r\n    function Raycaster( origin, direction, near, far ) {\r\n\r\n        this.ray = new Ray( origin, direction );\r\n        // direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n        this.near = near || 0;\r\n        this.far = far || Infinity;\r\n\r\n        this.params = {\r\n            Mesh: {},\r\n            Line: {},\r\n            LOD: {},\r\n            Points: { threshold: 1 },\r\n            Sprite: {}\r\n        };\r\n\r\n        Object.defineProperties( this.params, {\r\n            PointCloud: {\r\n                get: function () {\r\n\r\n                    console.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n                    return this.Points;\r\n\r\n                }\r\n            }\r\n        } );\r\n\r\n    }\r\n\r\n    function ascSort( a, b ) {\r\n\r\n        return a.distance - b.distance;\r\n\r\n    }\r\n\r\n    function intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n        if ( object.visible === false ) return;\r\n\r\n        object.raycast( raycaster, intersects );\r\n\r\n        if ( recursive === true ) {\r\n\r\n            var children = object.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                intersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Raycaster.prototype, {\r\n\r\n        linePrecision: 1,\r\n\r\n        set: function ( origin, direction ) {\r\n\r\n            // direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n            this.ray.set( origin, direction );\r\n\r\n        },\r\n\r\n        setFromCamera: function ( coords, camera ) {\r\n\r\n            if ( ( camera && camera.isPerspectiveCamera ) ) {\r\n\r\n                this.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n                this.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n            } else if ( ( camera && camera.isOrthographicCamera ) ) {\r\n\r\n                this.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\r\n                this.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n            } else {\r\n\r\n                console.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        intersectObject: function ( object, recursive, optionalTarget ) {\r\n\r\n            var intersects = optionalTarget || [];\r\n\r\n            intersectObject( object, this, intersects, recursive );\r\n\r\n            intersects.sort( ascSort );\r\n\r\n            return intersects;\r\n\r\n        },\r\n\r\n        intersectObjects: function ( objects, recursive, optionalTarget ) {\r\n\r\n            var intersects = optionalTarget || [];\r\n\r\n            if ( Array.isArray( objects ) === false ) {\r\n\r\n                console.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n                return intersects;\r\n\r\n            }\r\n\r\n            for ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n                intersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n            }\r\n\r\n            intersects.sort( ascSort );\r\n\r\n            return intersects;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Clock( autoStart ) {\r\n\r\n        this.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n        this.startTime = 0;\r\n        this.oldTime = 0;\r\n        this.elapsedTime = 0;\r\n\r\n        this.running = false;\r\n\r\n    }\r\n\r\n    Object.assign( Clock.prototype, {\r\n\r\n        start: function () {\r\n\r\n            this.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\r\n\r\n            this.oldTime = this.startTime;\r\n            this.elapsedTime = 0;\r\n            this.running = true;\r\n\r\n        },\r\n\r\n        stop: function () {\r\n\r\n            this.getElapsedTime();\r\n            this.running = false;\r\n            this.autoStart = false;\r\n\r\n        },\r\n\r\n        getElapsedTime: function () {\r\n\r\n            this.getDelta();\r\n            return this.elapsedTime;\r\n\r\n        },\r\n\r\n        getDelta: function () {\r\n\r\n            var diff = 0;\r\n\r\n            if ( this.autoStart && ! this.running ) {\r\n\r\n                this.start();\r\n                return 0;\r\n\r\n            }\r\n\r\n            if ( this.running ) {\r\n\r\n                var newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\r\n\r\n                diff = ( newTime - this.oldTime ) / 1000;\r\n                this.oldTime = newTime;\r\n\r\n                this.elapsedTime += diff;\r\n\r\n            }\r\n\r\n            return diff;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n     *\r\n     * The poles (phi) are at the positive and negative y axis.\r\n     * The equator starts at positive z.\r\n     */\r\n\r\n    function Spherical( radius, phi, theta ) {\r\n\r\n        this.radius = ( radius !== undefined ) ? radius : 1.0;\r\n        this.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\r\n        this.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Object.assign( Spherical.prototype, {\r\n\r\n        set: function ( radius, phi, theta ) {\r\n\r\n            this.radius = radius;\r\n            this.phi = phi;\r\n            this.theta = theta;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( other ) {\r\n\r\n            this.radius = other.radius;\r\n            this.phi = other.phi;\r\n            this.theta = other.theta;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // restrict phi to be betwee EPS and PI-EPS\r\n        makeSafe: function () {\r\n\r\n            var EPS = 0.000001;\r\n            this.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromVector3: function ( vec3 ) {\r\n\r\n            this.radius = vec3.length();\r\n\r\n            if ( this.radius === 0 ) {\r\n\r\n                this.theta = 0;\r\n                this.phi = 0;\r\n\r\n            } else {\r\n\r\n                this.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\r\n                this.phi = Math.acos( _Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\r\n     *\r\n     */\r\n\r\n    function Cylindrical( radius, theta, y ) {\r\n\r\n        this.radius = ( radius !== undefined ) ? radius : 1.0; // distance from the origin to a point in the x-z plane\r\n        this.theta = ( theta !== undefined ) ? theta : 0; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\r\n        this.y = ( y !== undefined ) ? y : 0; // height above the x-z plane\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Object.assign( Cylindrical.prototype, {\r\n\r\n        set: function ( radius, theta, y ) {\r\n\r\n            this.radius = radius;\r\n            this.theta = theta;\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( other ) {\r\n\r\n            this.radius = other.radius;\r\n            this.theta = other.theta;\r\n            this.y = other.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromVector3: function ( vec3 ) {\r\n\r\n            this.radius = Math.sqrt( vec3.x * vec3.x + vec3.z * vec3.z );\r\n            this.theta = Math.atan2( vec3.x, vec3.z );\r\n            this.y = vec3.y;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Box2( min, max ) {\r\n\r\n        this.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\r\n        this.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\r\n\r\n    }\r\n\r\n    Object.assign( Box2.prototype, {\r\n\r\n        set: function ( min, max ) {\r\n\r\n            this.min.copy( min );\r\n            this.max.copy( max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.makeEmpty();\r\n\r\n            for ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n                this.expandByPoint( points[ i ] );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCenterAndSize: function () {\r\n\r\n            var v1 = new Vector2();\r\n\r\n            return function setFromCenterAndSize( center, size ) {\r\n\r\n                var halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n                this.min.copy( center ).sub( halfSize );\r\n                this.max.copy( center ).add( halfSize );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( box ) {\r\n\r\n            this.min.copy( box.min );\r\n            this.max.copy( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeEmpty: function () {\r\n\r\n            this.min.x = this.min.y = + Infinity;\r\n            this.max.x = this.max.y = - Infinity;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        isEmpty: function () {\r\n\r\n            // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n            return ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n        },\r\n\r\n        getCenter: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .getCenter() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n        },\r\n\r\n        getSize: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .getSize() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n        },\r\n\r\n        expandByPoint: function ( point ) {\r\n\r\n            this.min.min( point );\r\n            this.max.max( point );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByVector: function ( vector ) {\r\n\r\n            this.min.sub( vector );\r\n            this.max.add( vector );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByScalar: function ( scalar ) {\r\n\r\n            this.min.addScalar( - scalar );\r\n            this.max.addScalar( scalar );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return point.x < this.min.x || point.x > this.max.x ||\r\n            point.y < this.min.y || point.y > this.max.y ? false : true;\r\n\r\n        },\r\n\r\n        containsBox: function ( box ) {\r\n\r\n            return this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n                this.min.y <= box.min.y && box.max.y <= this.max.y;\r\n\r\n        },\r\n\r\n        getParameter: function ( point, target ) {\r\n\r\n            // This can potentially have a divide by zero if the box\r\n            // has a size dimension of 0.\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .getParameter() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return target.set(\r\n                ( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n                ( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n            );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            // using 4 splitting planes to rule out intersections\r\n\r\n            return box.max.x < this.min.x || box.min.x > this.max.x ||\r\n            box.max.y < this.min.y || box.min.y > this.max.y ? false : true;\r\n\r\n        },\r\n\r\n        clampPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .clampPoint() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return target.copy( point ).clamp( this.min, this.max );\r\n\r\n        },\r\n\r\n        distanceToPoint: function () {\r\n\r\n            var v1 = new Vector2();\r\n\r\n            return function distanceToPoint( point ) {\r\n\r\n                var clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n                return clampedPoint.sub( point ).length();\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersect: function ( box ) {\r\n\r\n            this.min.max( box.min );\r\n            this.max.min( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        union: function ( box ) {\r\n\r\n            this.min.min( box.min );\r\n            this.max.max( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.min.add( offset );\r\n            this.max.add( offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( box ) {\r\n\r\n            return box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function ImmediateRenderObject( material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.material = material;\r\n        this.render = function ( /* renderCallback */ ) {};\r\n\r\n    }\r\n\r\n    ImmediateRenderObject.prototype = Object.create( Object3D.prototype );\r\n    ImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\r\n\r\n    ImmediateRenderObject.prototype.isImmediateRenderObject = true;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function VertexNormalsHelper( object, size, hex, linewidth ) {\r\n\r\n        this.object = object;\r\n\r\n        this.size = ( size !== undefined ) ? size : 1;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n        var width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n        //\r\n\r\n        var nNormals = 0;\r\n\r\n        var objGeometry = this.object.geometry;\r\n\r\n        if ( objGeometry && objGeometry.isGeometry ) {\r\n\r\n            nNormals = objGeometry.faces.length * 3;\r\n\r\n        } else if ( objGeometry && objGeometry.isBufferGeometry ) {\r\n\r\n            nNormals = objGeometry.attributes.normal.count;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\r\n\r\n        geometry.addAttribute( 'position', positions );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n        //\r\n\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    VertexNormalsHelper.prototype = Object.create( LineSegments.prototype );\r\n    VertexNormalsHelper.prototype.constructor = VertexNormalsHelper;\r\n\r\n    VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n        var v1 = new Vector3();\r\n        var v2 = new Vector3();\r\n        var normalMatrix = new Matrix3();\r\n\r\n        return function update() {\r\n\r\n            var keys = [ 'a', 'b', 'c' ];\r\n\r\n            this.object.updateMatrixWorld( true );\r\n\r\n            normalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n            var matrixWorld = this.object.matrixWorld;\r\n\r\n            var position = this.geometry.attributes.position;\r\n\r\n            //\r\n\r\n            var objGeometry = this.object.geometry;\r\n\r\n            if ( objGeometry && objGeometry.isGeometry ) {\r\n\r\n                var vertices = objGeometry.vertices;\r\n\r\n                var faces = objGeometry.faces;\r\n\r\n                var idx = 0;\r\n\r\n                for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                    var face = faces[ i ];\r\n\r\n                    for ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n                        var vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n                        var normal = face.vertexNormals[ j ];\r\n\r\n                        v1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n                        v2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n                        position.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n                        idx = idx + 1;\r\n\r\n                        position.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n                        idx = idx + 1;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( objGeometry && objGeometry.isBufferGeometry ) {\r\n\r\n                var objPos = objGeometry.attributes.position;\r\n\r\n                var objNorm = objGeometry.attributes.normal;\r\n\r\n                var idx = 0;\r\n\r\n                // for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n                for ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n                    v1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n                    v2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n                    v2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n                    position.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n                    idx = idx + 1;\r\n\r\n                    position.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n                    idx = idx + 1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            position.needsUpdate = true;\r\n\r\n        };\r\n\r\n    }() );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function SpotLightHelper( light, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var positions = [\r\n            0, 0, 0, \t0, 0, 1,\r\n            0, 0, 0, \t1, 0, 1,\r\n            0, 0, 0,\t- 1, 0, 1,\r\n            0, 0, 0, \t0, 1, 1,\r\n            0, 0, 0, \t0, - 1, 1\r\n        ];\r\n\r\n        for ( var i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\r\n\r\n            var p1 = ( i / l ) * Math.PI * 2;\r\n            var p2 = ( j / l ) * Math.PI * 2;\r\n\r\n            positions.push(\r\n                Math.cos( p1 ), Math.sin( p1 ), 1,\r\n                Math.cos( p2 ), Math.sin( p2 ), 1\r\n            );\r\n\r\n        }\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { fog: false } );\r\n\r\n        this.cone = new LineSegments( geometry, material );\r\n        this.add( this.cone );\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    SpotLightHelper.prototype = Object.create( Object3D.prototype );\r\n    SpotLightHelper.prototype.constructor = SpotLightHelper;\r\n\r\n    SpotLightHelper.prototype.dispose = function () {\r\n\r\n        this.cone.geometry.dispose();\r\n        this.cone.material.dispose();\r\n\r\n    };\r\n\r\n    SpotLightHelper.prototype.update = function () {\r\n\r\n        var vector = new Vector3();\r\n        var vector2 = new Vector3();\r\n\r\n        return function update() {\r\n\r\n            this.light.updateMatrixWorld();\r\n\r\n            var coneLength = this.light.distance ? this.light.distance : 1000;\r\n            var coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n            this.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n            vector.setFromMatrixPosition( this.light.matrixWorld );\r\n            vector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n            this.cone.lookAt( vector2.sub( vector ) );\r\n\r\n            if ( this.color !== undefined ) {\r\n\r\n                this.cone.material.color.set( this.color );\r\n\r\n            } else {\r\n\r\n                this.cone.material.color.copy( this.light.color );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author Sean Griffin / http://twitter.com/sgrif\r\n     * @author Michael Guerrero / http://realitymeltdown.com\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author ikerr / http://verold.com\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function getBoneList( object ) {\r\n\r\n        var boneList = [];\r\n\r\n        if ( object && object.isBone ) {\r\n\r\n            boneList.push( object );\r\n\r\n        }\r\n\r\n        for ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n            boneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\r\n\r\n        }\r\n\r\n        return boneList;\r\n\r\n    }\r\n\r\n    function SkeletonHelper( object ) {\r\n\r\n        var bones = getBoneList( object );\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var vertices = [];\r\n        var colors = [];\r\n\r\n        var color1 = new Color( 0, 0, 1 );\r\n        var color2 = new Color( 0, 1, 0 );\r\n\r\n        for ( var i = 0; i < bones.length; i ++ ) {\r\n\r\n            var bone = bones[ i ];\r\n\r\n            if ( bone.parent && bone.parent.isBone ) {\r\n\r\n                vertices.push( 0, 0, 0 );\r\n                vertices.push( 0, 0, 0 );\r\n                colors.push( color1.r, color1.g, color1.b );\r\n                colors.push( color2.r, color2.g, color2.b );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n        this.root = object;\r\n        this.bones = bones;\r\n\r\n        this.matrix = object.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n    }\r\n\r\n    SkeletonHelper.prototype = Object.create( LineSegments.prototype );\r\n    SkeletonHelper.prototype.constructor = SkeletonHelper;\r\n\r\n    SkeletonHelper.prototype.updateMatrixWorld = function () {\r\n\r\n        var vector = new Vector3();\r\n\r\n        var boneMatrix = new Matrix4();\r\n        var matrixWorldInv = new Matrix4();\r\n\r\n        return function updateMatrixWorld( force ) {\r\n\r\n            var bones = this.bones;\r\n\r\n            var geometry = this.geometry;\r\n            var position = geometry.getAttribute( 'position' );\r\n\r\n            matrixWorldInv.getInverse( this.root.matrixWorld );\r\n\r\n            for ( var i = 0, j = 0; i < bones.length; i ++ ) {\r\n\r\n                var bone = bones[ i ];\r\n\r\n                if ( bone.parent && bone.parent.isBone ) {\r\n\r\n                    boneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n                    vector.setFromMatrixPosition( boneMatrix );\r\n                    position.setXYZ( j, vector.x, vector.y, vector.z );\r\n\r\n                    boneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n                    vector.setFromMatrixPosition( boneMatrix );\r\n                    position.setXYZ( j + 1, vector.x, vector.y, vector.z );\r\n\r\n                    j += 2;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            geometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n            Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function PointLightHelper( light, sphereSize, color ) {\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.color = color;\r\n\r\n        var geometry = new SphereBufferGeometry( sphereSize, 4, 2 );\r\n        var material = new MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n        Mesh.call( this, geometry, material );\r\n\r\n        this.matrix = this.light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.update();\r\n\r\n\r\n        /*\r\n\t\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\t\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\t\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\t\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\t\tvar d = light.distance;\r\n\r\n\t\tif ( d === 0.0 ) {\r\n\r\n\t\t\tthis.lightDistance.visible = false;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t\t}\r\n\r\n\t\tthis.add( this.lightDistance );\r\n\t\t*/\r\n\r\n    }\r\n\r\n    PointLightHelper.prototype = Object.create( Mesh.prototype );\r\n    PointLightHelper.prototype.constructor = PointLightHelper;\r\n\r\n    PointLightHelper.prototype.dispose = function () {\r\n\r\n        this.geometry.dispose();\r\n        this.material.dispose();\r\n\r\n    };\r\n\r\n    PointLightHelper.prototype.update = function () {\r\n\r\n        if ( this.color !== undefined ) {\r\n\r\n            this.material.color.set( this.color );\r\n\r\n        } else {\r\n\r\n            this.material.color.copy( this.light.color );\r\n\r\n        }\r\n\r\n        /*\r\n\t\tvar d = this.light.distance;\r\n\r\n\t\tif ( d === 0.0 ) {\r\n\r\n\t\t\tthis.lightDistance.visible = false;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.lightDistance.visible = true;\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t\t}\r\n\t\t*/\r\n\r\n    };\r\n\r\n    /**\r\n     * @author abelnation / http://github.com/abelnation\r\n     * @author Mugen87 / http://github.com/Mugen87\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function RectAreaLightHelper( light, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        var material = new LineBasicMaterial( { fog: false } );\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        geometry.addAttribute( 'position', new BufferAttribute( new Float32Array( 5 * 3 ), 3 ) );\r\n\r\n        this.line = new Line( geometry, material );\r\n        this.add( this.line );\r\n\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    RectAreaLightHelper.prototype = Object.create( Object3D.prototype );\r\n    RectAreaLightHelper.prototype.constructor = RectAreaLightHelper;\r\n\r\n    RectAreaLightHelper.prototype.dispose = function () {\r\n\r\n        this.children[ 0 ].geometry.dispose();\r\n        this.children[ 0 ].material.dispose();\r\n\r\n    };\r\n\r\n    RectAreaLightHelper.prototype.update = function () {\r\n\r\n        // calculate new dimensions of the helper\r\n\r\n        var hx = this.light.width * 0.5;\r\n        var hy = this.light.height * 0.5;\r\n\r\n        var position = this.line.geometry.attributes.position;\r\n        var array = position.array;\r\n\r\n        // update vertices\r\n\r\n        array[ 0 ] = hx; array[ 1 ] = - hy; array[ 2 ] = 0;\r\n        array[ 3 ] = hx; array[ 4 ] = hy; array[ 5 ] = 0;\r\n        array[ 6 ] = - hx; array[ 7 ] = hy; array[ 8 ] = 0;\r\n        array[ 9 ] = - hx; array[ 10 ] = - hy; array[ 11 ] = 0;\r\n        array[ 12 ] = hx; array[ 13 ] = - hy; array[ 14 ] = 0;\r\n\r\n        position.needsUpdate = true;\r\n\r\n        if ( this.color !== undefined ) {\r\n\r\n            this.line.material.color.set( this.color );\r\n\r\n        } else {\r\n\r\n            this.line.material.color.copy( this.light.color );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function HemisphereLightHelper( light, size, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        var geometry = new OctahedronBufferGeometry( size );\r\n        geometry.rotateY( Math.PI * 0.5 );\r\n\r\n        this.material = new MeshBasicMaterial( { wireframe: true, fog: false } );\r\n        if ( this.color === undefined ) this.material.vertexColors = VertexColors;\r\n\r\n        var position = geometry.getAttribute( 'position' );\r\n        var colors = new Float32Array( position.count * 3 );\r\n\r\n        geometry.addAttribute( 'color', new BufferAttribute( colors, 3 ) );\r\n\r\n        this.add( new Mesh( geometry, this.material ) );\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    HemisphereLightHelper.prototype = Object.create( Object3D.prototype );\r\n    HemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\r\n\r\n    HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n        this.children[ 0 ].geometry.dispose();\r\n        this.children[ 0 ].material.dispose();\r\n\r\n    };\r\n\r\n    HemisphereLightHelper.prototype.update = function () {\r\n\r\n        var vector = new Vector3();\r\n\r\n        var color1 = new Color();\r\n        var color2 = new Color();\r\n\r\n        return function update() {\r\n\r\n            var mesh = this.children[ 0 ];\r\n\r\n            if ( this.color !== undefined ) {\r\n\r\n                this.material.color.set( this.color );\r\n\r\n            } else {\r\n\r\n                var colors = mesh.geometry.getAttribute( 'color' );\r\n\r\n                color1.copy( this.light.color );\r\n                color2.copy( this.light.groundColor );\r\n\r\n                for ( var i = 0, l = colors.count; i < l; i ++ ) {\r\n\r\n                    var color = ( i < ( l / 2 ) ) ? color1 : color2;\r\n\r\n                    colors.setXYZ( i, color.r, color.g, color.b );\r\n\r\n                }\r\n\r\n                colors.needsUpdate = true;\r\n\r\n            }\r\n\r\n            mesh.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function GridHelper( size, divisions, color1, color2 ) {\r\n\r\n        size = size || 10;\r\n        divisions = divisions || 10;\r\n        color1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n        color2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n        var center = divisions / 2;\r\n        var step = size / divisions;\r\n        var halfSize = size / 2;\r\n\r\n        var vertices = [], colors = [];\r\n\r\n        for ( var i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\r\n\r\n            vertices.push( - halfSize, 0, k, halfSize, 0, k );\r\n            vertices.push( k, 0, - halfSize, k, 0, halfSize );\r\n\r\n            var color = i === center ? color1 : color2;\r\n\r\n            color.toArray( colors, j ); j += 3;\r\n            color.toArray( colors, j ); j += 3;\r\n            color.toArray( colors, j ); j += 3;\r\n            color.toArray( colors, j ); j += 3;\r\n\r\n        }\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n    }\r\n\r\n    GridHelper.prototype = Object.create( LineSegments.prototype );\r\n    GridHelper.prototype.constructor = GridHelper;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / http://github.com/Mugen87\r\n     * @author Hectate / http://www.github.com/Hectate\r\n     */\r\n\r\n    function PolarGridHelper( radius, radials, circles, divisions, color1, color2 ) {\r\n\r\n        radius = radius || 10;\r\n        radials = radials || 16;\r\n        circles = circles || 8;\r\n        divisions = divisions || 64;\r\n        color1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n        color2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n        var vertices = [];\r\n        var colors = [];\r\n\r\n        var x, z;\r\n        var v, i, j, r, color;\r\n\r\n        // create the radials\r\n\r\n        for ( i = 0; i <= radials; i ++ ) {\r\n\r\n            v = ( i / radials ) * ( Math.PI * 2 );\r\n\r\n            x = Math.sin( v ) * radius;\r\n            z = Math.cos( v ) * radius;\r\n\r\n            vertices.push( 0, 0, 0 );\r\n            vertices.push( x, 0, z );\r\n\r\n            color = ( i & 1 ) ? color1 : color2;\r\n\r\n            colors.push( color.r, color.g, color.b );\r\n            colors.push( color.r, color.g, color.b );\r\n\r\n        }\r\n\r\n        // create the circles\r\n\r\n        for ( i = 0; i <= circles; i ++ ) {\r\n\r\n            color = ( i & 1 ) ? color1 : color2;\r\n\r\n            r = radius - ( radius / circles * i );\r\n\r\n            for ( j = 0; j < divisions; j ++ ) {\r\n\r\n                // first vertex\r\n\r\n                v = ( j / divisions ) * ( Math.PI * 2 );\r\n\r\n                x = Math.sin( v ) * r;\r\n                z = Math.cos( v ) * r;\r\n\r\n                vertices.push( x, 0, z );\r\n                colors.push( color.r, color.g, color.b );\r\n\r\n                // second vertex\r\n\r\n                v = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\r\n\r\n                x = Math.sin( v ) * r;\r\n                z = Math.cos( v ) * r;\r\n\r\n                vertices.push( x, 0, z );\r\n                colors.push( color.r, color.g, color.b );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n    }\r\n\r\n    PolarGridHelper.prototype = Object.create( LineSegments.prototype );\r\n    PolarGridHelper.prototype.constructor = PolarGridHelper;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function FaceNormalsHelper( object, size, hex, linewidth ) {\r\n\r\n        // FaceNormalsHelper only supports THREE.Geometry\r\n\r\n        this.object = object;\r\n\r\n        this.size = ( size !== undefined ) ? size : 1;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n        var width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n        //\r\n\r\n        var nNormals = 0;\r\n\r\n        var objGeometry = this.object.geometry;\r\n\r\n        if ( objGeometry && objGeometry.isGeometry ) {\r\n\r\n            nNormals = objGeometry.faces.length;\r\n\r\n        } else {\r\n\r\n            console.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\r\n\r\n        geometry.addAttribute( 'position', positions );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n        //\r\n\r\n        this.matrixAutoUpdate = false;\r\n        this.update();\r\n\r\n    }\r\n\r\n    FaceNormalsHelper.prototype = Object.create( LineSegments.prototype );\r\n    FaceNormalsHelper.prototype.constructor = FaceNormalsHelper;\r\n\r\n    FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n        var v1 = new Vector3();\r\n        var v2 = new Vector3();\r\n        var normalMatrix = new Matrix3();\r\n\r\n        return function update() {\r\n\r\n            this.object.updateMatrixWorld( true );\r\n\r\n            normalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n            var matrixWorld = this.object.matrixWorld;\r\n\r\n            var position = this.geometry.attributes.position;\r\n\r\n            //\r\n\r\n            var objGeometry = this.object.geometry;\r\n\r\n            var vertices = objGeometry.vertices;\r\n\r\n            var faces = objGeometry.faces;\r\n\r\n            var idx = 0;\r\n\r\n            for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                var normal = face.normal;\r\n\r\n                v1.copy( vertices[ face.a ] )\r\n                    .add( vertices[ face.b ] )\r\n                    .add( vertices[ face.c ] )\r\n                    .divideScalar( 3 )\r\n                    .applyMatrix4( matrixWorld );\r\n\r\n                v2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n                position.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n                idx = idx + 1;\r\n\r\n                position.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n                idx = idx + 1;\r\n\r\n            }\r\n\r\n            position.needsUpdate = true;\r\n\r\n        };\r\n\r\n    }() );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function DirectionalLightHelper( light, size, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        if ( size === undefined ) size = 1;\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( [\r\n            - size, size, 0,\r\n            size, size, 0,\r\n            size, - size, 0,\r\n            - size, - size, 0,\r\n            - size, size, 0\r\n        ], 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { fog: false } );\r\n\r\n        this.lightPlane = new Line( geometry, material );\r\n        this.add( this.lightPlane );\r\n\r\n        geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\r\n\r\n        this.targetLine = new Line( geometry, material );\r\n        this.add( this.targetLine );\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    DirectionalLightHelper.prototype = Object.create( Object3D.prototype );\r\n    DirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\r\n\r\n    DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n        this.lightPlane.geometry.dispose();\r\n        this.lightPlane.material.dispose();\r\n        this.targetLine.geometry.dispose();\r\n        this.targetLine.material.dispose();\r\n\r\n    };\r\n\r\n    DirectionalLightHelper.prototype.update = function () {\r\n\r\n        var v1 = new Vector3();\r\n        var v2 = new Vector3();\r\n        var v3 = new Vector3();\r\n\r\n        return function update() {\r\n\r\n            v1.setFromMatrixPosition( this.light.matrixWorld );\r\n            v2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n            v3.subVectors( v2, v1 );\r\n\r\n            this.lightPlane.lookAt( v3 );\r\n\r\n            if ( this.color !== undefined ) {\r\n\r\n                this.lightPlane.material.color.set( this.color );\r\n                this.targetLine.material.color.set( this.color );\r\n\r\n            } else {\r\n\r\n                this.lightPlane.material.color.copy( this.light.color );\r\n                this.targetLine.material.color.copy( this.light.color );\r\n\r\n            }\r\n\r\n            this.targetLine.lookAt( v3 );\r\n            this.targetLine.scale.z = v3.length();\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     *\t- shows frustum, line of sight and up of the camera\r\n     *\t- suitable for fast updates\r\n     * \t- based on frustum visualization in lightgl.js shadowmap example\r\n     *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n     */\r\n\r\n    function CameraHelper( camera ) {\r\n\r\n        var geometry = new BufferGeometry();\r\n        var material = new LineBasicMaterial( { color: 0xffffff, vertexColors: FaceColors } );\r\n\r\n        var vertices = [];\r\n        var colors = [];\r\n\r\n        var pointMap = {};\r\n\r\n        // colors\r\n\r\n        var colorFrustum = new Color( 0xffaa00 );\r\n        var colorCone = new Color( 0xff0000 );\r\n        var colorUp = new Color( 0x00aaff );\r\n        var colorTarget = new Color( 0xffffff );\r\n        var colorCross = new Color( 0x333333 );\r\n\r\n        // near\r\n\r\n        addLine( 'n1', 'n2', colorFrustum );\r\n        addLine( 'n2', 'n4', colorFrustum );\r\n        addLine( 'n4', 'n3', colorFrustum );\r\n        addLine( 'n3', 'n1', colorFrustum );\r\n\r\n        // far\r\n\r\n        addLine( 'f1', 'f2', colorFrustum );\r\n        addLine( 'f2', 'f4', colorFrustum );\r\n        addLine( 'f4', 'f3', colorFrustum );\r\n        addLine( 'f3', 'f1', colorFrustum );\r\n\r\n        // sides\r\n\r\n        addLine( 'n1', 'f1', colorFrustum );\r\n        addLine( 'n2', 'f2', colorFrustum );\r\n        addLine( 'n3', 'f3', colorFrustum );\r\n        addLine( 'n4', 'f4', colorFrustum );\r\n\r\n        // cone\r\n\r\n        addLine( 'p', 'n1', colorCone );\r\n        addLine( 'p', 'n2', colorCone );\r\n        addLine( 'p', 'n3', colorCone );\r\n        addLine( 'p', 'n4', colorCone );\r\n\r\n        // up\r\n\r\n        addLine( 'u1', 'u2', colorUp );\r\n        addLine( 'u2', 'u3', colorUp );\r\n        addLine( 'u3', 'u1', colorUp );\r\n\r\n        // target\r\n\r\n        addLine( 'c', 't', colorTarget );\r\n        addLine( 'p', 'c', colorCross );\r\n\r\n        // cross\r\n\r\n        addLine( 'cn1', 'cn2', colorCross );\r\n        addLine( 'cn3', 'cn4', colorCross );\r\n\r\n        addLine( 'cf1', 'cf2', colorCross );\r\n        addLine( 'cf3', 'cf4', colorCross );\r\n\r\n        function addLine( a, b, color ) {\r\n\r\n            addPoint( a, color );\r\n            addPoint( b, color );\r\n\r\n        }\r\n\r\n        function addPoint( id, color ) {\r\n\r\n            vertices.push( 0, 0, 0 );\r\n            colors.push( color.r, color.g, color.b );\r\n\r\n            if ( pointMap[ id ] === undefined ) {\r\n\r\n                pointMap[ id ] = [];\r\n\r\n            }\r\n\r\n            pointMap[ id ].push( ( vertices.length / 3 ) - 1 );\r\n\r\n        }\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n        this.camera = camera;\r\n        if ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\r\n\r\n        this.matrix = camera.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.pointMap = pointMap;\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    CameraHelper.prototype = Object.create( LineSegments.prototype );\r\n    CameraHelper.prototype.constructor = CameraHelper;\r\n\r\n    CameraHelper.prototype.update = function () {\r\n\r\n        var geometry, pointMap;\r\n\r\n        var vector = new Vector3();\r\n        var camera = new Camera();\r\n\r\n        function setPoint( point, x, y, z ) {\r\n\r\n            vector.set( x, y, z ).unproject( camera );\r\n\r\n            var points = pointMap[ point ];\r\n\r\n            if ( points !== undefined ) {\r\n\r\n                var position = geometry.getAttribute( 'position' );\r\n\r\n                for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                    position.setXYZ( points[ i ], vector.x, vector.y, vector.z );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return function update() {\r\n\r\n            geometry = this.geometry;\r\n            pointMap = this.pointMap;\r\n\r\n            var w = 1, h = 1;\r\n\r\n            // we need just camera projection matrix\r\n            // world matrix must be identity\r\n\r\n            camera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n            // center / target\r\n\r\n            setPoint( 'c', 0, 0, - 1 );\r\n            setPoint( 't', 0, 0, 1 );\r\n\r\n            // near\r\n\r\n            setPoint( 'n1', - w, - h, - 1 );\r\n            setPoint( 'n2', w, - h, - 1 );\r\n            setPoint( 'n3', - w, h, - 1 );\r\n            setPoint( 'n4', w, h, - 1 );\r\n\r\n            // far\r\n\r\n            setPoint( 'f1', - w, - h, 1 );\r\n            setPoint( 'f2', w, - h, 1 );\r\n            setPoint( 'f3', - w, h, 1 );\r\n            setPoint( 'f4', w, h, 1 );\r\n\r\n            // up\r\n\r\n            setPoint( 'u1', w * 0.7, h * 1.1, - 1 );\r\n            setPoint( 'u2', - w * 0.7, h * 1.1, - 1 );\r\n            setPoint( 'u3', 0, h * 2, - 1 );\r\n\r\n            // cross\r\n\r\n            setPoint( 'cf1', - w, 0, 1 );\r\n            setPoint( 'cf2', w, 0, 1 );\r\n            setPoint( 'cf3', 0, - h, 1 );\r\n            setPoint( 'cf4', 0, h, 1 );\r\n\r\n            setPoint( 'cn1', - w, 0, - 1 );\r\n            setPoint( 'cn2', w, 0, - 1 );\r\n            setPoint( 'cn3', 0, - h, - 1 );\r\n            setPoint( 'cn4', 0, h, - 1 );\r\n\r\n            geometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / http://github.com/Mugen87\r\n     */\r\n\r\n    function BoxHelper( object, color ) {\r\n\r\n        this.object = object;\r\n\r\n        if ( color === undefined ) color = 0xffff00;\r\n\r\n        var indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n        var positions = new Float32Array( 8 * 3 );\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n        geometry.addAttribute( 'position', new BufferAttribute( positions, 3 ) );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color } ) );\r\n\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    BoxHelper.prototype = Object.create( LineSegments.prototype );\r\n    BoxHelper.prototype.constructor = BoxHelper;\r\n\r\n    BoxHelper.prototype.update = ( function () {\r\n\r\n        var box = new Box3();\r\n\r\n        return function update( object ) {\r\n\r\n            if ( object !== undefined ) {\r\n\r\n                console.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\r\n\r\n            }\r\n\r\n            if ( this.object !== undefined ) {\r\n\r\n                box.setFromObject( this.object );\r\n\r\n            }\r\n\r\n            if ( box.isEmpty() ) return;\r\n\r\n            var min = box.min;\r\n            var max = box.max;\r\n\r\n            /*\r\n\t\t\t  5____4\r\n\t\t\t1/___0/|\r\n\t\t\t| 6__|_7\r\n\t\t\t2/___3/\r\n\r\n\t\t\t0: max.x, max.y, max.z\r\n\t\t\t1: min.x, max.y, max.z\r\n\t\t\t2: min.x, min.y, max.z\r\n\t\t\t3: max.x, min.y, max.z\r\n\t\t\t4: max.x, max.y, min.z\r\n\t\t\t5: min.x, max.y, min.z\r\n\t\t\t6: min.x, min.y, min.z\r\n\t\t\t7: max.x, min.y, min.z\r\n\t\t\t*/\r\n\r\n            var position = this.geometry.attributes.position;\r\n            var array = position.array;\r\n\r\n            array[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\r\n            array[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\r\n            array[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\r\n            array[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n            array[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n            array[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n            array[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n            array[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n            position.needsUpdate = true;\r\n\r\n            this.geometry.computeBoundingSphere();\r\n\r\n        };\r\n\r\n    } )();\r\n\r\n    BoxHelper.prototype.setFromObject = function ( object ) {\r\n\r\n        this.object = object;\r\n        this.update();\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Box3Helper( box, hex ) {\r\n\r\n        this.type = 'Box3Helper';\r\n\r\n        this.box = box;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n        var indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\r\n        var positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        geometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color } ) );\r\n\r\n        this.geometry.computeBoundingSphere();\r\n\r\n    }\r\n\r\n    Box3Helper.prototype = Object.create( LineSegments.prototype );\r\n    Box3Helper.prototype.constructor = Box3Helper;\r\n\r\n    Box3Helper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n        var box = this.box;\r\n\r\n        if ( box.isEmpty() ) return;\r\n\r\n        box.getCenter( this.position );\r\n\r\n        box.getSize( this.scale );\r\n\r\n        this.scale.multiplyScalar( 0.5 );\r\n\r\n        Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function PlaneHelper( plane, size, hex ) {\r\n\r\n        this.type = 'PlaneHelper';\r\n\r\n        this.plane = plane;\r\n\r\n        this.size = ( size === undefined ) ? 1 : size;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n        var positions = [ 1, - 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0 ];\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n        geometry.computeBoundingSphere();\r\n\r\n        Line.call( this, geometry, new LineBasicMaterial( { color: color } ) );\r\n\r\n        //\r\n\r\n        var positions2 = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, - 1, 1, 1, - 1, 1 ];\r\n\r\n        var geometry2 = new BufferGeometry();\r\n        geometry2.addAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\r\n        geometry2.computeBoundingSphere();\r\n\r\n        this.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false } ) ) );\r\n\r\n    }\r\n\r\n    PlaneHelper.prototype = Object.create( Line.prototype );\r\n    PlaneHelper.prototype.constructor = PlaneHelper;\r\n\r\n    PlaneHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n        var scale = - this.plane.constant;\r\n\r\n        if ( Math.abs( scale ) < 1e-8 ) scale = 1e-8; // sign does not matter\r\n\r\n        this.scale.set( 0.5 * this.size, 0.5 * this.size, scale );\r\n\r\n        this.children[ 0 ].material.side = ( scale < 0 ) ? BackSide : FrontSide; // renderer flips side when determinant < 0; flipping not wanted here\r\n\r\n        this.lookAt( this.plane.normal );\r\n\r\n        Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author zz85 / http://github.com/zz85\r\n     * @author bhouston / http://clara.io\r\n     *\r\n     * Creates an arrow for visualizing directions\r\n     *\r\n     * Parameters:\r\n     *  dir - Vector3\r\n     *  origin - Vector3\r\n     *  length - Number\r\n     *  color - color in hex value\r\n     *  headLength - Number\r\n     *  headWidth - Number\r\n     */\r\n\r\n    var lineGeometry, coneGeometry;\r\n\r\n    function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n        // dir is assumed to be normalized\r\n\r\n        Object3D.call( this );\r\n\r\n        if ( color === undefined ) color = 0xffff00;\r\n        if ( length === undefined ) length = 1;\r\n        if ( headLength === undefined ) headLength = 0.2 * length;\r\n        if ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n        if ( lineGeometry === undefined ) {\r\n\r\n            lineGeometry = new BufferGeometry();\r\n            lineGeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\r\n\r\n            coneGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\r\n            coneGeometry.translate( 0, - 0.5, 0 );\r\n\r\n        }\r\n\r\n        this.position.copy( origin );\r\n\r\n        this.line = new Line( lineGeometry, new LineBasicMaterial( { color: color } ) );\r\n        this.line.matrixAutoUpdate = false;\r\n        this.add( this.line );\r\n\r\n        this.cone = new Mesh( coneGeometry, new MeshBasicMaterial( { color: color } ) );\r\n        this.cone.matrixAutoUpdate = false;\r\n        this.add( this.cone );\r\n\r\n        this.setDirection( dir );\r\n        this.setLength( length, headLength, headWidth );\r\n\r\n    }\r\n\r\n    ArrowHelper.prototype = Object.create( Object3D.prototype );\r\n    ArrowHelper.prototype.constructor = ArrowHelper;\r\n\r\n    ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n        var axis = new Vector3();\r\n        var radians;\r\n\r\n        return function setDirection( dir ) {\r\n\r\n            // dir is assumed to be normalized\r\n\r\n            if ( dir.y > 0.99999 ) {\r\n\r\n                this.quaternion.set( 0, 0, 0, 1 );\r\n\r\n            } else if ( dir.y < - 0.99999 ) {\r\n\r\n                this.quaternion.set( 1, 0, 0, 0 );\r\n\r\n            } else {\r\n\r\n                axis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n                radians = Math.acos( dir.y );\r\n\r\n                this.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }() );\r\n\r\n    ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n        if ( headLength === undefined ) headLength = 0.2 * length;\r\n        if ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n        this.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\r\n        this.line.updateMatrix();\r\n\r\n        this.cone.scale.set( headWidth, headLength, headWidth );\r\n        this.cone.position.y = length;\r\n        this.cone.updateMatrix();\r\n\r\n    };\r\n\r\n    ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n        this.line.material.color.copy( color );\r\n        this.cone.material.color.copy( color );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author sroucheray / http://sroucheray.org/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AxesHelper( size ) {\r\n\r\n        size = size || 1;\r\n\r\n        var vertices = [\r\n            0, 0, 0,\tsize, 0, 0,\r\n            0, 0, 0,\t0, size, 0,\r\n            0, 0, 0,\t0, 0, size\r\n        ];\r\n\r\n        var colors = [\r\n            1, 0, 0,\t1, 0.6, 0,\r\n            0, 1, 0,\t0.6, 1, 0,\r\n            0, 0, 1,\t0, 0.6, 1\r\n        ];\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n    }\r\n\r\n    AxesHelper.prototype = Object.create( LineSegments.prototype );\r\n    AxesHelper.prototype.constructor = AxesHelper;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Face4( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n        console.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n        return new Face3( a, b, c, normal, color, materialIndex );\r\n\r\n    }\r\n\r\n    var LineStrip = 0;\r\n\r\n    var LinePieces = 1;\r\n\r\n    function MeshFaceMaterial( materials ) {\r\n\r\n        console.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\r\n        return materials;\r\n\r\n    }\r\n\r\n    function MultiMaterial( materials ) {\r\n\r\n        if ( materials === undefined ) materials = [];\r\n\r\n        console.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\r\n        materials.isMultiMaterial = true;\r\n        materials.materials = materials;\r\n        materials.clone = function () {\r\n\r\n            return materials.slice();\r\n\r\n        };\r\n        return materials;\r\n\r\n    }\r\n\r\n    function PointCloud( geometry, material ) {\r\n\r\n        console.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n        return new Points( geometry, material );\r\n\r\n    }\r\n\r\n    function Particle( material ) {\r\n\r\n        console.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\r\n        return new Sprite( material );\r\n\r\n    }\r\n\r\n    function ParticleSystem( geometry, material ) {\r\n\r\n        console.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n        return new Points( geometry, material );\r\n\r\n    }\r\n\r\n    function PointCloudMaterial( parameters ) {\r\n\r\n        console.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n        return new PointsMaterial( parameters );\r\n\r\n    }\r\n\r\n    function ParticleBasicMaterial( parameters ) {\r\n\r\n        console.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n        return new PointsMaterial( parameters );\r\n\r\n    }\r\n\r\n    function ParticleSystemMaterial( parameters ) {\r\n\r\n        console.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n        return new PointsMaterial( parameters );\r\n\r\n    }\r\n\r\n    function Vertex( x, y, z ) {\r\n\r\n        console.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n        return new Vector3( x, y, z );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function DynamicBufferAttribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n        return new BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n    }\r\n\r\n    function Int8Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\r\n        return new Int8BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint8Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\r\n        return new Uint8BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint8ClampedAttribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\r\n        return new Uint8ClampedBufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Int16Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\r\n        return new Int16BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint16Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\r\n        return new Uint16BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Int32Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\r\n        return new Int32BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint32Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\r\n        return new Uint32BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Float32Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\r\n        return new Float32BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Float64Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\r\n        return new Float64BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    Curve.create = function ( construct, getPoint ) {\r\n\r\n        console.log( 'THREE.Curve.create() has been deprecated' );\r\n\r\n        construct.prototype = Object.create( Curve.prototype );\r\n        construct.prototype.constructor = construct;\r\n        construct.prototype.getPoint = getPoint;\r\n\r\n        return construct;\r\n\r\n    };\r\n\r\n    //\r\n\r\n    Object.assign( CurvePath.prototype, {\r\n\r\n        createPointsGeometry: function ( divisions ) {\r\n\r\n            console.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n            // generate geometry from path points (for Line or Points objects)\r\n\r\n            var pts = this.getPoints( divisions );\r\n            return this.createGeometry( pts );\r\n\r\n        },\r\n\r\n        createSpacedPointsGeometry: function ( divisions ) {\r\n\r\n            console.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n            // generate geometry from equidistant sampling along the path\r\n\r\n            var pts = this.getSpacedPoints( divisions );\r\n            return this.createGeometry( pts );\r\n\r\n        },\r\n\r\n        createGeometry: function ( points ) {\r\n\r\n            console.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n            var geometry = new Geometry();\r\n\r\n            for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                var point = points[ i ];\r\n                geometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n            }\r\n\r\n            return geometry;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( Path.prototype, {\r\n\r\n        fromPoints: function ( points ) {\r\n\r\n            console.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\r\n            this.setFromPoints( points );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    function ClosedSplineCurve3( points ) {\r\n\r\n        console.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n        CatmullRomCurve3.call( this, points );\r\n        this.type = 'catmullrom';\r\n        this.closed = true;\r\n\r\n    }\r\n\r\n    ClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n    //\r\n\r\n    function SplineCurve3( points ) {\r\n\r\n        console.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n        CatmullRomCurve3.call( this, points );\r\n        this.type = 'catmullrom';\r\n\r\n    }\r\n\r\n    SplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n    //\r\n\r\n    function Spline( points ) {\r\n\r\n        console.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n        CatmullRomCurve3.call( this, points );\r\n        this.type = 'catmullrom';\r\n\r\n    }\r\n\r\n    Spline.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n    Object.assign( Spline.prototype, {\r\n\r\n        initFromArray: function ( /* a */ ) {\r\n\r\n            console.error( 'THREE.Spline: .initFromArray() has been removed.' );\r\n\r\n        },\r\n        getControlPointsArray: function ( /* optionalTarget */ ) {\r\n\r\n            console.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\r\n\r\n        },\r\n        reparametrizeByArcLength: function ( /* samplingCoef */ ) {\r\n\r\n            console.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    function AxisHelper( size ) {\r\n\r\n        console.warn( 'THREE.AxisHelper has been renamed to THREE.AxesHelper.' );\r\n        return new AxesHelper( size );\r\n\r\n    }\r\n\r\n    function BoundingBoxHelper( object, color ) {\r\n\r\n        console.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\r\n        return new BoxHelper( object, color );\r\n\r\n    }\r\n\r\n    function EdgesHelper( object, hex ) {\r\n\r\n        console.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\r\n        return new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n    }\r\n\r\n    GridHelper.prototype.setColors = function () {\r\n\r\n        console.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\r\n\r\n    };\r\n\r\n    SkeletonHelper.prototype.update = function () {\r\n\r\n        console.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\r\n\r\n    };\r\n\r\n    function WireframeHelper( object, hex ) {\r\n\r\n        console.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\r\n        return new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    Object.assign( Loader.prototype, {\r\n\r\n        extractUrlBase: function ( url ) {\r\n\r\n            console.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\r\n            return LoaderUtils.extractUrlBase( url );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    function XHRLoader( manager ) {\r\n\r\n        console.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\r\n        return new FileLoader( manager );\r\n\r\n    }\r\n\r\n    function BinaryTextureLoader( manager ) {\r\n\r\n        console.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\r\n        return new DataTextureLoader( manager );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    Object.assign( Box2.prototype, {\r\n\r\n        center: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\r\n            return this.getCenter( optionalTarget );\r\n\r\n        },\r\n        empty: function () {\r\n\r\n            console.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n            return this.isEmpty();\r\n\r\n        },\r\n        isIntersectionBox: function ( box ) {\r\n\r\n            console.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n            return this.intersectsBox( box );\r\n\r\n        },\r\n        size: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\r\n            return this.getSize( optionalTarget );\r\n\r\n        }\r\n    } );\r\n\r\n    Object.assign( Box3.prototype, {\r\n\r\n        center: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\r\n            return this.getCenter( optionalTarget );\r\n\r\n        },\r\n        empty: function () {\r\n\r\n            console.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n            return this.isEmpty();\r\n\r\n        },\r\n        isIntersectionBox: function ( box ) {\r\n\r\n            console.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n            return this.intersectsBox( box );\r\n\r\n        },\r\n        isIntersectionSphere: function ( sphere ) {\r\n\r\n            console.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n            return this.intersectsSphere( sphere );\r\n\r\n        },\r\n        size: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\r\n            return this.getSize( optionalTarget );\r\n\r\n        }\r\n    } );\r\n\r\n    Line3.prototype.center = function ( optionalTarget ) {\r\n\r\n        console.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\r\n        return this.getCenter( optionalTarget );\r\n\r\n    };\r\n\r\n    Object.assign( _Math, {\r\n\r\n        random16: function () {\r\n\r\n            console.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\r\n            return Math.random();\r\n\r\n        },\r\n\r\n        nearestPowerOfTwo: function ( value ) {\r\n\r\n            console.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\r\n            return _Math.floorPowerOfTwo( value );\r\n\r\n        },\r\n\r\n        nextPowerOfTwo: function ( value ) {\r\n\r\n            console.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\r\n            return _Math.ceilPowerOfTwo( value );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Matrix3.prototype, {\r\n\r\n        flattenToArrayOffset: function ( array, offset ) {\r\n\r\n            console.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n            return this.toArray( array, offset );\r\n\r\n        },\r\n        multiplyVector3: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n            return vector.applyMatrix3( this );\r\n\r\n        },\r\n        multiplyVector3Array: function ( /* a */ ) {\r\n\r\n            console.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\r\n\r\n        },\r\n        applyToBuffer: function ( buffer /*, offset, length */ ) {\r\n\r\n            console.warn( 'THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\r\n            return this.applyToBufferAttribute( buffer );\r\n\r\n        },\r\n        applyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n            console.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Matrix4.prototype, {\r\n\r\n        extractPosition: function ( m ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n            return this.copyPosition( m );\r\n\r\n        },\r\n        flattenToArrayOffset: function ( array, offset ) {\r\n\r\n            console.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n            return this.toArray( array, offset );\r\n\r\n        },\r\n        getPosition: function () {\r\n\r\n            var v1;\r\n\r\n            return function getPosition() {\r\n\r\n                if ( v1 === undefined ) v1 = new Vector3();\r\n                console.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n                return v1.setFromMatrixColumn( this, 3 );\r\n\r\n            };\r\n\r\n        }(),\r\n        setRotationFromQuaternion: function ( q ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n            return this.makeRotationFromQuaternion( q );\r\n\r\n        },\r\n        multiplyToArray: function () {\r\n\r\n            console.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\r\n\r\n        },\r\n        multiplyVector3: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n            return vector.applyMatrix4( this );\r\n\r\n        },\r\n        multiplyVector4: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n            return vector.applyMatrix4( this );\r\n\r\n        },\r\n        multiplyVector3Array: function ( /* a */ ) {\r\n\r\n            console.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\r\n\r\n        },\r\n        rotateAxis: function ( v ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n            v.transformDirection( this );\r\n\r\n        },\r\n        crossVector: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n            return vector.applyMatrix4( this );\r\n\r\n        },\r\n        translate: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n        },\r\n        rotateX: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n        },\r\n        rotateY: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n        },\r\n        rotateZ: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n        },\r\n        rotateByAxis: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n        },\r\n        applyToBuffer: function ( buffer /*, offset, length */ ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\r\n            return this.applyToBufferAttribute( buffer );\r\n\r\n        },\r\n        applyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n            console.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\r\n\r\n        },\r\n        makeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\r\n            return this.makePerspective( left, right, top, bottom, near, far );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Plane.prototype.isIntersectionLine = function ( line ) {\r\n\r\n        console.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n        return this.intersectsLine( line );\r\n\r\n    };\r\n\r\n    Quaternion.prototype.multiplyVector3 = function ( vector ) {\r\n\r\n        console.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n        return vector.applyQuaternion( this );\r\n\r\n    };\r\n\r\n    Object.assign( Ray.prototype, {\r\n\r\n        isIntersectionBox: function ( box ) {\r\n\r\n            console.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n            return this.intersectsBox( box );\r\n\r\n        },\r\n        isIntersectionPlane: function ( plane ) {\r\n\r\n            console.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n            return this.intersectsPlane( plane );\r\n\r\n        },\r\n        isIntersectionSphere: function ( sphere ) {\r\n\r\n            console.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n            return this.intersectsSphere( sphere );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Triangle.prototype, {\r\n\r\n        area: function () {\r\n\r\n            console.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\r\n            return this.getArea();\r\n\r\n        },\r\n        barycoordFromPoint: function ( point, target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n            return this.getBarycoord( point, target );\r\n\r\n        },\r\n        midpoint: function ( target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\r\n            return this.getMidpoint( target );\r\n\r\n        },\r\n        normal: function ( target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n            return this.getNormal( target );\r\n\r\n        },\r\n        plane: function ( target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\r\n            return this.getPlane( target );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Triangle, {\r\n\r\n        barycoordFromPoint: function ( point, a, b, c, target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n            return Triangle.getBarycoord( point, a, b, c, target );\r\n\r\n        },\r\n        normal: function ( a, b, c, target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n            return Triangle.getNormal( a, b, c, target );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Shape.prototype, {\r\n\r\n        extractAllPoints: function ( divisions ) {\r\n\r\n            console.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\r\n            return this.extractPoints( divisions );\r\n\r\n        },\r\n        extrude: function ( options ) {\r\n\r\n            console.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\r\n            return new ExtrudeGeometry( this, options );\r\n\r\n        },\r\n        makeGeometry: function ( options ) {\r\n\r\n            console.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\r\n            return new ShapeGeometry( this, options );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector2.prototype, {\r\n\r\n        fromAttribute: function ( attribute, index, offset ) {\r\n\r\n            console.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n            return this.fromBufferAttribute( attribute, index, offset );\r\n\r\n        },\r\n        distanceToManhattan: function ( v ) {\r\n\r\n            console.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n            return this.manhattanDistanceTo( v );\r\n\r\n        },\r\n        lengthManhattan: function () {\r\n\r\n            console.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n            return this.manhattanLength();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector3.prototype, {\r\n\r\n        setEulerFromRotationMatrix: function () {\r\n\r\n            console.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n        },\r\n        setEulerFromQuaternion: function () {\r\n\r\n            console.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n        },\r\n        getPositionFromMatrix: function ( m ) {\r\n\r\n            console.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n            return this.setFromMatrixPosition( m );\r\n\r\n        },\r\n        getScaleFromMatrix: function ( m ) {\r\n\r\n            console.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n            return this.setFromMatrixScale( m );\r\n\r\n        },\r\n        getColumnFromMatrix: function ( index, matrix ) {\r\n\r\n            console.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n            return this.setFromMatrixColumn( matrix, index );\r\n\r\n        },\r\n        applyProjection: function ( m ) {\r\n\r\n            console.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\r\n            return this.applyMatrix4( m );\r\n\r\n        },\r\n        fromAttribute: function ( attribute, index, offset ) {\r\n\r\n            console.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n            return this.fromBufferAttribute( attribute, index, offset );\r\n\r\n        },\r\n        distanceToManhattan: function ( v ) {\r\n\r\n            console.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n            return this.manhattanDistanceTo( v );\r\n\r\n        },\r\n        lengthManhattan: function () {\r\n\r\n            console.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n            return this.manhattanLength();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector4.prototype, {\r\n\r\n        fromAttribute: function ( attribute, index, offset ) {\r\n\r\n            console.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n            return this.fromBufferAttribute( attribute, index, offset );\r\n\r\n        },\r\n        lengthManhattan: function () {\r\n\r\n            console.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n            return this.manhattanLength();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( Geometry.prototype, {\r\n\r\n        computeTangents: function () {\r\n\r\n            console.error( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n        },\r\n        computeLineDistances: function () {\r\n\r\n            console.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Object3D.prototype, {\r\n\r\n        getChildByName: function ( name ) {\r\n\r\n            console.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n            return this.getObjectByName( name );\r\n\r\n        },\r\n        renderDepth: function () {\r\n\r\n            console.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\r\n        },\r\n        translate: function ( distance, axis ) {\r\n\r\n            console.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n            return this.translateOnAxis( axis, distance );\r\n\r\n        },\r\n        getWorldRotation: function () {\r\n\r\n            console.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( Object3D.prototype, {\r\n\r\n        eulerOrder: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n                return this.rotation.order;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n                this.rotation.order = value;\r\n\r\n            }\r\n        },\r\n        useQuaternion: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( LOD.prototype, {\r\n\r\n        objects: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n                return this.levels;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperty( Skeleton.prototype, 'useVertexTexture', {\r\n\r\n        get: function () {\r\n\r\n            console.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n        },\r\n        set: function () {\r\n\r\n            console.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperty( Curve.prototype, '__arcLengthDivisions', {\r\n\r\n        get: function () {\r\n\r\n            console.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n            return this.arcLengthDivisions;\r\n\r\n        },\r\n        set: function ( value ) {\r\n\r\n            console.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n            this.arcLengthDivisions = value;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    PerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\r\n\r\n        console.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\r\n            \"Use .setFocalLength and .filmGauge for a photographic setup.\" );\r\n\r\n        if ( filmGauge !== undefined ) this.filmGauge = filmGauge;\r\n        this.setFocalLength( focalLength );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    Object.defineProperties( Light.prototype, {\r\n        onlyShadow: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\r\n            }\r\n        },\r\n        shadowCameraFov: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n                this.shadow.camera.fov = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraLeft: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n                this.shadow.camera.left = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraRight: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n                this.shadow.camera.right = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraTop: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n                this.shadow.camera.top = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraBottom: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n                this.shadow.camera.bottom = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraNear: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n                this.shadow.camera.near = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraFar: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n                this.shadow.camera.far = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraVisible: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\r\n            }\r\n        },\r\n        shadowBias: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n                this.shadow.bias = value;\r\n\r\n            }\r\n        },\r\n        shadowDarkness: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\r\n            }\r\n        },\r\n        shadowMapWidth: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n                this.shadow.mapSize.width = value;\r\n\r\n            }\r\n        },\r\n        shadowMapHeight: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n                this.shadow.mapSize.height = value;\r\n\r\n            }\r\n        }\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( BufferAttribute.prototype, {\r\n\r\n        length: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\r\n                return this.array.length;\r\n\r\n            }\r\n        },\r\n        copyIndicesArray: function ( /* indices */ ) {\r\n\r\n            console.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( BufferGeometry.prototype, {\r\n\r\n        addIndex: function ( index ) {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n            this.setIndex( index );\r\n\r\n        },\r\n        addDrawCall: function ( start, count, indexOffset ) {\r\n\r\n            if ( indexOffset !== undefined ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\r\n            }\r\n            console.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n            this.addGroup( start, count );\r\n\r\n        },\r\n        clearDrawCalls: function () {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n            this.clearGroups();\r\n\r\n        },\r\n        computeTangents: function () {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\r\n        },\r\n        computeOffsets: function () {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( BufferGeometry.prototype, {\r\n\r\n        drawcalls: {\r\n            get: function () {\r\n\r\n                console.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n                return this.groups;\r\n\r\n            }\r\n        },\r\n        offsets: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n                return this.groups;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( ExtrudeBufferGeometry.prototype, {\r\n\r\n        getArrays: function () {\r\n\r\n            console.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\r\n\r\n        },\r\n\r\n        addShapeList: function () {\r\n\r\n            console.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\r\n\r\n        },\r\n\r\n        addShape: function () {\r\n\r\n            console.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( Uniform.prototype, {\r\n\r\n        dynamic: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\r\n\r\n            }\r\n        },\r\n        onUpdate: {\r\n            value: function () {\r\n\r\n                console.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\r\n                return this;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( Material.prototype, {\r\n\r\n        wrapAround: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n            }\r\n        },\r\n        wrapRGB: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Material: .wrapRGB has been removed.' );\r\n                return new Color();\r\n\r\n            }\r\n        },\r\n\r\n        shading: {\r\n            get: function () {\r\n\r\n                console.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n                this.flatShading = ( value === FlatShading );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( MeshPhongMaterial.prototype, {\r\n\r\n        metal: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n                return false;\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( ShaderMaterial.prototype, {\r\n\r\n        derivatives: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n                return this.extensions.derivatives;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n                this.extensions.derivatives = value;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( WebGLRenderer.prototype, {\r\n\r\n        animate: function ( callback ) {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\r\n            this.setAnimationLoop( callback );\r\n\r\n        },\r\n\r\n        getCurrentRenderTarget: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\r\n            return this.getRenderTarget();\r\n\r\n        },\r\n\r\n        getMaxAnisotropy: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\r\n            return this.capabilities.getMaxAnisotropy();\r\n\r\n        },\r\n\r\n        getPrecision: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\r\n            return this.capabilities.precision;\r\n\r\n        },\r\n\r\n        resetGLState: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\r\n            return this.state.reset();\r\n\r\n        },\r\n\r\n        supportsFloatTextures: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n            return this.extensions.get( 'OES_texture_float' );\r\n\r\n        },\r\n        supportsHalfFloatTextures: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n            return this.extensions.get( 'OES_texture_half_float' );\r\n\r\n        },\r\n        supportsStandardDerivatives: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n            return this.extensions.get( 'OES_standard_derivatives' );\r\n\r\n        },\r\n        supportsCompressedTextureS3TC: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n            return this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n        },\r\n        supportsCompressedTexturePVRTC: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n            return this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n        },\r\n        supportsBlendMinMax: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n            return this.extensions.get( 'EXT_blend_minmax' );\r\n\r\n        },\r\n        supportsVertexTextures: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\r\n            return this.capabilities.vertexTextures;\r\n\r\n        },\r\n        supportsInstancedArrays: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n            return this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n        },\r\n        enableScissorTest: function ( boolean ) {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n            this.setScissorTest( boolean );\r\n\r\n        },\r\n        initMaterial: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n        },\r\n        addPrePlugin: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n        },\r\n        addPostPlugin: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n        },\r\n        updateShadowMap: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n        },\r\n        setFaceCulling: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( WebGLRenderer.prototype, {\r\n\r\n        shadowMapEnabled: {\r\n            get: function () {\r\n\r\n                return this.shadowMap.enabled;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n                this.shadowMap.enabled = value;\r\n\r\n            }\r\n        },\r\n        shadowMapType: {\r\n            get: function () {\r\n\r\n                return this.shadowMap.type;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n                this.shadowMap.type = value;\r\n\r\n            }\r\n        },\r\n        shadowMapCullFace: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function ( /* value */ ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        }\r\n    } );\r\n\r\n    Object.defineProperties( WebGLShadowMap.prototype, {\r\n\r\n        cullFace: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function ( /* cullFace */ ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        },\r\n        renderReverseSided: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        },\r\n        renderSingleSided: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( WebGLRenderTarget.prototype, {\r\n\r\n        wrapS: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n                return this.texture.wrapS;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n                this.texture.wrapS = value;\r\n\r\n            }\r\n        },\r\n        wrapT: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n                return this.texture.wrapT;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n                this.texture.wrapT = value;\r\n\r\n            }\r\n        },\r\n        magFilter: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n                return this.texture.magFilter;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n                this.texture.magFilter = value;\r\n\r\n            }\r\n        },\r\n        minFilter: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n                return this.texture.minFilter;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n                this.texture.minFilter = value;\r\n\r\n            }\r\n        },\r\n        anisotropy: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n                return this.texture.anisotropy;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n                this.texture.anisotropy = value;\r\n\r\n            }\r\n        },\r\n        offset: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n                return this.texture.offset;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n                this.texture.offset = value;\r\n\r\n            }\r\n        },\r\n        repeat: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n                return this.texture.repeat;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n                this.texture.repeat = value;\r\n\r\n            }\r\n        },\r\n        format: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n                return this.texture.format;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n                this.texture.format = value;\r\n\r\n            }\r\n        },\r\n        type: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n                return this.texture.type;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n                this.texture.type = value;\r\n\r\n            }\r\n        },\r\n        generateMipmaps: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n                return this.texture.generateMipmaps;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n                this.texture.generateMipmaps = value;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( WebVRManager.prototype, {\r\n\r\n        standing: {\r\n            set: function ( /* value */ ) {\r\n\r\n                console.warn( 'THREE.WebVRManager: .standing has been removed.' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Audio.prototype.load = function ( file ) {\r\n\r\n        console.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\r\n        var scope = this;\r\n        var audioLoader = new AudioLoader();\r\n        audioLoader.load( file, function ( buffer ) {\r\n\r\n            scope.setBuffer( buffer );\r\n\r\n        } );\r\n        return this;\r\n\r\n    };\r\n\r\n    AudioAnalyser.prototype.getData = function () {\r\n\r\n        console.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\r\n        return this.getFrequencyData();\r\n\r\n    };\r\n\r\n    //\r\n\r\n    CubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\r\n\r\n        console.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\r\n        return this.update( renderer, scene );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    var GeometryUtils = {\r\n\r\n        merge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n            console.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n            var matrix;\r\n\r\n            if ( geometry2.isMesh ) {\r\n\r\n                geometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n                matrix = geometry2.matrix;\r\n                geometry2 = geometry2.geometry;\r\n\r\n            }\r\n\r\n            geometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n        },\r\n\r\n        center: function ( geometry ) {\r\n\r\n            console.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n            return geometry.center();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    var ImageUtils = {\r\n\r\n        crossOrigin: undefined,\r\n\r\n        loadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n            console.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n            var loader = new TextureLoader();\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n\r\n            var texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n            if ( mapping ) texture.mapping = mapping;\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        loadTextureCube: function ( urls, mapping, onLoad, onError ) {\r\n\r\n            console.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n            var loader = new CubeTextureLoader();\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n\r\n            var texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n            if ( mapping ) texture.mapping = mapping;\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        loadCompressedTexture: function () {\r\n\r\n            console.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n        },\r\n\r\n        loadCompressedTextureCube: function () {\r\n\r\n            console.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    //\r\n\r\n    function Projector() {\r\n\r\n        console.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n        this.projectVector = function ( vector, camera ) {\r\n\r\n            console.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n            vector.project( camera );\r\n\r\n        };\r\n\r\n        this.unprojectVector = function ( vector, camera ) {\r\n\r\n            console.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n            vector.unproject( camera );\r\n\r\n        };\r\n\r\n        this.pickingRay = function () {\r\n\r\n            console.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n        };\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function CanvasRenderer() {\r\n\r\n        console.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n        this.domElement = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n        this.clear = function () {};\r\n        this.render = function () {};\r\n        this.setClearColor = function () {};\r\n        this.setSize = function () {};\r\n\r\n    }\r\n\r\n    //\r\n\r\n    var SceneUtils = {\r\n\r\n        createMultiMaterialObject: function ( /* geometry, materials */ ) {\r\n\r\n            console.error( 'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js' );\r\n\r\n        },\r\n\r\n        detach: function ( /* child, parent, scene */ ) {\r\n\r\n            console.error( 'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js' );\r\n\r\n        },\r\n\r\n        attach: function ( /* child, scene, parent */ ) {\r\n\r\n            console.error( 'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js' );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    //\r\n\r\n    function LensFlare() {\r\n\r\n        console.error( 'THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js' );\r\n\r\n    }\r\n\r\n    exports.WebGLRenderTargetCube = WebGLRenderTargetCube;\r\n    exports.WebGLRenderTarget = WebGLRenderTarget;\r\n    exports.WebGLRenderer = WebGLRenderer;\r\n    exports.ShaderLib = ShaderLib;\r\n    exports.UniformsLib = UniformsLib;\r\n    exports.UniformsUtils = UniformsUtils;\r\n    exports.ShaderChunk = ShaderChunk;\r\n    exports.FogExp2 = FogExp2;\r\n    exports.Fog = Fog;\r\n    exports.Scene = Scene;\r\n    exports.Sprite = Sprite;\r\n    exports.LOD = LOD;\r\n    exports.SkinnedMesh = SkinnedMesh;\r\n    exports.Skeleton = Skeleton;\r\n    exports.Bone = Bone;\r\n    exports.Mesh = Mesh;\r\n    exports.LineSegments = LineSegments;\r\n    exports.LineLoop = LineLoop;\r\n    exports.Line = Line;\r\n    exports.Points = Points;\r\n    exports.Group = Group;\r\n    exports.VideoTexture = VideoTexture;\r\n    exports.DataTexture = DataTexture;\r\n    exports.CompressedTexture = CompressedTexture;\r\n    exports.CubeTexture = CubeTexture;\r\n    exports.CanvasTexture = CanvasTexture;\r\n    exports.DepthTexture = DepthTexture;\r\n    exports.Texture = Texture;\r\n    exports.CompressedTextureLoader = CompressedTextureLoader;\r\n    exports.DataTextureLoader = DataTextureLoader;\r\n    exports.CubeTextureLoader = CubeTextureLoader;\r\n    exports.TextureLoader = TextureLoader;\r\n    exports.ObjectLoader = ObjectLoader;\r\n    exports.MaterialLoader = MaterialLoader;\r\n    exports.BufferGeometryLoader = BufferGeometryLoader;\r\n    exports.DefaultLoadingManager = DefaultLoadingManager;\r\n    exports.LoadingManager = LoadingManager;\r\n    exports.JSONLoader = JSONLoader;\r\n    exports.ImageLoader = ImageLoader;\r\n    exports.ImageBitmapLoader = ImageBitmapLoader;\r\n    exports.FontLoader = FontLoader;\r\n    exports.FileLoader = FileLoader;\r\n    exports.Loader = Loader;\r\n    exports.LoaderUtils = LoaderUtils;\r\n    exports.Cache = Cache;\r\n    exports.AudioLoader = AudioLoader;\r\n    exports.SpotLightShadow = SpotLightShadow;\r\n    exports.SpotLight = SpotLight;\r\n    exports.PointLight = PointLight;\r\n    exports.RectAreaLight = RectAreaLight;\r\n    exports.HemisphereLight = HemisphereLight;\r\n    exports.DirectionalLightShadow = DirectionalLightShadow;\r\n    exports.DirectionalLight = DirectionalLight;\r\n    exports.AmbientLight = AmbientLight;\r\n    exports.LightShadow = LightShadow;\r\n    exports.Light = Light;\r\n    exports.StereoCamera = StereoCamera;\r\n    exports.PerspectiveCamera = PerspectiveCamera;\r\n    exports.OrthographicCamera = OrthographicCamera;\r\n    exports.CubeCamera = CubeCamera;\r\n    exports.ArrayCamera = ArrayCamera;\r\n    exports.Camera = Camera;\r\n    exports.AudioListener = AudioListener;\r\n    exports.PositionalAudio = PositionalAudio;\r\n    exports.AudioContext = AudioContext;\r\n    exports.AudioAnalyser = AudioAnalyser;\r\n    exports.Audio = Audio;\r\n    exports.VectorKeyframeTrack = VectorKeyframeTrack;\r\n    exports.StringKeyframeTrack = StringKeyframeTrack;\r\n    exports.QuaternionKeyframeTrack = QuaternionKeyframeTrack;\r\n    exports.NumberKeyframeTrack = NumberKeyframeTrack;\r\n    exports.ColorKeyframeTrack = ColorKeyframeTrack;\r\n    exports.BooleanKeyframeTrack = BooleanKeyframeTrack;\r\n    exports.PropertyMixer = PropertyMixer;\r\n    exports.PropertyBinding = PropertyBinding;\r\n    exports.KeyframeTrack = KeyframeTrack;\r\n    exports.AnimationUtils = AnimationUtils;\r\n    exports.AnimationObjectGroup = AnimationObjectGroup;\r\n    exports.AnimationMixer = AnimationMixer;\r\n    exports.AnimationClip = AnimationClip;\r\n    exports.Uniform = Uniform;\r\n    exports.InstancedBufferGeometry = InstancedBufferGeometry;\r\n    exports.BufferGeometry = BufferGeometry;\r\n    exports.Geometry = Geometry;\r\n    exports.InterleavedBufferAttribute = InterleavedBufferAttribute;\r\n    exports.InstancedInterleavedBuffer = InstancedInterleavedBuffer;\r\n    exports.InterleavedBuffer = InterleavedBuffer;\r\n    exports.InstancedBufferAttribute = InstancedBufferAttribute;\r\n    exports.Face3 = Face3;\r\n    exports.Object3D = Object3D;\r\n    exports.Raycaster = Raycaster;\r\n    exports.Layers = Layers;\r\n    exports.EventDispatcher = EventDispatcher;\r\n    exports.Clock = Clock;\r\n    exports.QuaternionLinearInterpolant = QuaternionLinearInterpolant;\r\n    exports.LinearInterpolant = LinearInterpolant;\r\n    exports.DiscreteInterpolant = DiscreteInterpolant;\r\n    exports.CubicInterpolant = CubicInterpolant;\r\n    exports.Interpolant = Interpolant;\r\n    exports.Triangle = Triangle;\r\n    exports.Math = _Math;\r\n    exports.Spherical = Spherical;\r\n    exports.Cylindrical = Cylindrical;\r\n    exports.Plane = Plane;\r\n    exports.Frustum = Frustum;\r\n    exports.Sphere = Sphere;\r\n    exports.Ray = Ray;\r\n    exports.Matrix4 = Matrix4;\r\n    exports.Matrix3 = Matrix3;\r\n    exports.Box3 = Box3;\r\n    exports.Box2 = Box2;\r\n    exports.Line3 = Line3;\r\n    exports.Euler = Euler;\r\n    exports.Vector4 = Vector4;\r\n    exports.Vector3 = Vector3;\r\n    exports.Vector2 = Vector2;\r\n    exports.Quaternion = Quaternion;\r\n    exports.Color = Color;\r\n    exports.ImmediateRenderObject = ImmediateRenderObject;\r\n    exports.VertexNormalsHelper = VertexNormalsHelper;\r\n    exports.SpotLightHelper = SpotLightHelper;\r\n    exports.SkeletonHelper = SkeletonHelper;\r\n    exports.PointLightHelper = PointLightHelper;\r\n    exports.RectAreaLightHelper = RectAreaLightHelper;\r\n    exports.HemisphereLightHelper = HemisphereLightHelper;\r\n    exports.GridHelper = GridHelper;\r\n    exports.PolarGridHelper = PolarGridHelper;\r\n    exports.FaceNormalsHelper = FaceNormalsHelper;\r\n    exports.DirectionalLightHelper = DirectionalLightHelper;\r\n    exports.CameraHelper = CameraHelper;\r\n    exports.BoxHelper = BoxHelper;\r\n    exports.Box3Helper = Box3Helper;\r\n    exports.PlaneHelper = PlaneHelper;\r\n    exports.ArrowHelper = ArrowHelper;\r\n    exports.AxesHelper = AxesHelper;\r\n    exports.Shape = Shape;\r\n    exports.Path = Path;\r\n    exports.ShapePath = ShapePath;\r\n    exports.Font = Font;\r\n    exports.CurvePath = CurvePath;\r\n    exports.Curve = Curve;\r\n    exports.ShapeUtils = ShapeUtils;\r\n    exports.WebGLUtils = WebGLUtils;\r\n    exports.WireframeGeometry = WireframeGeometry;\r\n    exports.ParametricGeometry = ParametricGeometry;\r\n    exports.ParametricBufferGeometry = ParametricBufferGeometry;\r\n    exports.TetrahedronGeometry = TetrahedronGeometry;\r\n    exports.TetrahedronBufferGeometry = TetrahedronBufferGeometry;\r\n    exports.OctahedronGeometry = OctahedronGeometry;\r\n    exports.OctahedronBufferGeometry = OctahedronBufferGeometry;\r\n    exports.IcosahedronGeometry = IcosahedronGeometry;\r\n    exports.IcosahedronBufferGeometry = IcosahedronBufferGeometry;\r\n    exports.DodecahedronGeometry = DodecahedronGeometry;\r\n    exports.DodecahedronBufferGeometry = DodecahedronBufferGeometry;\r\n    exports.PolyhedronGeometry = PolyhedronGeometry;\r\n    exports.PolyhedronBufferGeometry = PolyhedronBufferGeometry;\r\n    exports.TubeGeometry = TubeGeometry;\r\n    exports.TubeBufferGeometry = TubeBufferGeometry;\r\n    exports.TorusKnotGeometry = TorusKnotGeometry;\r\n    exports.TorusKnotBufferGeometry = TorusKnotBufferGeometry;\r\n    exports.TorusGeometry = TorusGeometry;\r\n    exports.TorusBufferGeometry = TorusBufferGeometry;\r\n    exports.TextGeometry = TextGeometry;\r\n    exports.TextBufferGeometry = TextBufferGeometry;\r\n    exports.SphereGeometry = SphereGeometry;\r\n    exports.SphereBufferGeometry = SphereBufferGeometry;\r\n    exports.RingGeometry = RingGeometry;\r\n    exports.RingBufferGeometry = RingBufferGeometry;\r\n    exports.PlaneGeometry = PlaneGeometry;\r\n    exports.PlaneBufferGeometry = PlaneBufferGeometry;\r\n    exports.LatheGeometry = LatheGeometry;\r\n    exports.LatheBufferGeometry = LatheBufferGeometry;\r\n    exports.ShapeGeometry = ShapeGeometry;\r\n    exports.ShapeBufferGeometry = ShapeBufferGeometry;\r\n    exports.ExtrudeGeometry = ExtrudeGeometry;\r\n    exports.ExtrudeBufferGeometry = ExtrudeBufferGeometry;\r\n    exports.EdgesGeometry = EdgesGeometry;\r\n    exports.ConeGeometry = ConeGeometry;\r\n    exports.ConeBufferGeometry = ConeBufferGeometry;\r\n    exports.CylinderGeometry = CylinderGeometry;\r\n    exports.CylinderBufferGeometry = CylinderBufferGeometry;\r\n    exports.CircleGeometry = CircleGeometry;\r\n    exports.CircleBufferGeometry = CircleBufferGeometry;\r\n    exports.BoxGeometry = BoxGeometry;\r\n    exports.BoxBufferGeometry = BoxBufferGeometry;\r\n    exports.ShadowMaterial = ShadowMaterial;\r\n    exports.SpriteMaterial = SpriteMaterial;\r\n    exports.RawShaderMaterial = RawShaderMaterial;\r\n    exports.ShaderMaterial = ShaderMaterial;\r\n    exports.PointsMaterial = PointsMaterial;\r\n    exports.MeshPhysicalMaterial = MeshPhysicalMaterial;\r\n    exports.MeshStandardMaterial = MeshStandardMaterial;\r\n    exports.MeshPhongMaterial = MeshPhongMaterial;\r\n    exports.MeshToonMaterial = MeshToonMaterial;\r\n    exports.MeshNormalMaterial = MeshNormalMaterial;\r\n    exports.MeshLambertMaterial = MeshLambertMaterial;\r\n    exports.MeshDepthMaterial = MeshDepthMaterial;\r\n    exports.MeshDistanceMaterial = MeshDistanceMaterial;\r\n    exports.MeshBasicMaterial = MeshBasicMaterial;\r\n    exports.LineDashedMaterial = LineDashedMaterial;\r\n    exports.LineBasicMaterial = LineBasicMaterial;\r\n    exports.Material = Material;\r\n    exports.Float64BufferAttribute = Float64BufferAttribute;\r\n    exports.Float32BufferAttribute = Float32BufferAttribute;\r\n    exports.Uint32BufferAttribute = Uint32BufferAttribute;\r\n    exports.Int32BufferAttribute = Int32BufferAttribute;\r\n    exports.Uint16BufferAttribute = Uint16BufferAttribute;\r\n    exports.Int16BufferAttribute = Int16BufferAttribute;\r\n    exports.Uint8ClampedBufferAttribute = Uint8ClampedBufferAttribute;\r\n    exports.Uint8BufferAttribute = Uint8BufferAttribute;\r\n    exports.Int8BufferAttribute = Int8BufferAttribute;\r\n    exports.BufferAttribute = BufferAttribute;\r\n    exports.ArcCurve = ArcCurve;\r\n    exports.CatmullRomCurve3 = CatmullRomCurve3;\r\n    exports.CubicBezierCurve = CubicBezierCurve;\r\n    exports.CubicBezierCurve3 = CubicBezierCurve3;\r\n    exports.EllipseCurve = EllipseCurve;\r\n    exports.LineCurve = LineCurve;\r\n    exports.LineCurve3 = LineCurve3;\r\n    exports.QuadraticBezierCurve = QuadraticBezierCurve;\r\n    exports.QuadraticBezierCurve3 = QuadraticBezierCurve3;\r\n    exports.SplineCurve = SplineCurve;\r\n    exports.REVISION = REVISION;\r\n    exports.MOUSE = MOUSE;\r\n    exports.CullFaceNone = CullFaceNone;\r\n    exports.CullFaceBack = CullFaceBack;\r\n    exports.CullFaceFront = CullFaceFront;\r\n    exports.CullFaceFrontBack = CullFaceFrontBack;\r\n    exports.FrontFaceDirectionCW = FrontFaceDirectionCW;\r\n    exports.FrontFaceDirectionCCW = FrontFaceDirectionCCW;\r\n    exports.BasicShadowMap = BasicShadowMap;\r\n    exports.PCFShadowMap = PCFShadowMap;\r\n    exports.PCFSoftShadowMap = PCFSoftShadowMap;\r\n    exports.FrontSide = FrontSide;\r\n    exports.BackSide = BackSide;\r\n    exports.DoubleSide = DoubleSide;\r\n    exports.FlatShading = FlatShading;\r\n    exports.SmoothShading = SmoothShading;\r\n    exports.NoColors = NoColors;\r\n    exports.FaceColors = FaceColors;\r\n    exports.VertexColors = VertexColors;\r\n    exports.NoBlending = NoBlending;\r\n    exports.NormalBlending = NormalBlending;\r\n    exports.AdditiveBlending = AdditiveBlending;\r\n    exports.SubtractiveBlending = SubtractiveBlending;\r\n    exports.MultiplyBlending = MultiplyBlending;\r\n    exports.CustomBlending = CustomBlending;\r\n    exports.AddEquation = AddEquation;\r\n    exports.SubtractEquation = SubtractEquation;\r\n    exports.ReverseSubtractEquation = ReverseSubtractEquation;\r\n    exports.MinEquation = MinEquation;\r\n    exports.MaxEquation = MaxEquation;\r\n    exports.ZeroFactor = ZeroFactor;\r\n    exports.OneFactor = OneFactor;\r\n    exports.SrcColorFactor = SrcColorFactor;\r\n    exports.OneMinusSrcColorFactor = OneMinusSrcColorFactor;\r\n    exports.SrcAlphaFactor = SrcAlphaFactor;\r\n    exports.OneMinusSrcAlphaFactor = OneMinusSrcAlphaFactor;\r\n    exports.DstAlphaFactor = DstAlphaFactor;\r\n    exports.OneMinusDstAlphaFactor = OneMinusDstAlphaFactor;\r\n    exports.DstColorFactor = DstColorFactor;\r\n    exports.OneMinusDstColorFactor = OneMinusDstColorFactor;\r\n    exports.SrcAlphaSaturateFactor = SrcAlphaSaturateFactor;\r\n    exports.NeverDepth = NeverDepth;\r\n    exports.AlwaysDepth = AlwaysDepth;\r\n    exports.LessDepth = LessDepth;\r\n    exports.LessEqualDepth = LessEqualDepth;\r\n    exports.EqualDepth = EqualDepth;\r\n    exports.GreaterEqualDepth = GreaterEqualDepth;\r\n    exports.GreaterDepth = GreaterDepth;\r\n    exports.NotEqualDepth = NotEqualDepth;\r\n    exports.MultiplyOperation = MultiplyOperation;\r\n    exports.MixOperation = MixOperation;\r\n    exports.AddOperation = AddOperation;\r\n    exports.NoToneMapping = NoToneMapping;\r\n    exports.LinearToneMapping = LinearToneMapping;\r\n    exports.ReinhardToneMapping = ReinhardToneMapping;\r\n    exports.Uncharted2ToneMapping = Uncharted2ToneMapping;\r\n    exports.CineonToneMapping = CineonToneMapping;\r\n    exports.UVMapping = UVMapping;\r\n    exports.CubeReflectionMapping = CubeReflectionMapping;\r\n    exports.CubeRefractionMapping = CubeRefractionMapping;\r\n    exports.EquirectangularReflectionMapping = EquirectangularReflectionMapping;\r\n    exports.EquirectangularRefractionMapping = EquirectangularRefractionMapping;\r\n    exports.SphericalReflectionMapping = SphericalReflectionMapping;\r\n    exports.CubeUVReflectionMapping = CubeUVReflectionMapping;\r\n    exports.CubeUVRefractionMapping = CubeUVRefractionMapping;\r\n    exports.RepeatWrapping = RepeatWrapping;\r\n    exports.ClampToEdgeWrapping = ClampToEdgeWrapping;\r\n    exports.MirroredRepeatWrapping = MirroredRepeatWrapping;\r\n    exports.NearestFilter = NearestFilter;\r\n    exports.NearestMipMapNearestFilter = NearestMipMapNearestFilter;\r\n    exports.NearestMipMapLinearFilter = NearestMipMapLinearFilter;\r\n    exports.LinearFilter = LinearFilter;\r\n    exports.LinearMipMapNearestFilter = LinearMipMapNearestFilter;\r\n    exports.LinearMipMapLinearFilter = LinearMipMapLinearFilter;\r\n    exports.UnsignedByteType = UnsignedByteType;\r\n    exports.ByteType = ByteType;\r\n    exports.ShortType = ShortType;\r\n    exports.UnsignedShortType = UnsignedShortType;\r\n    exports.IntType = IntType;\r\n    exports.UnsignedIntType = UnsignedIntType;\r\n    exports.FloatType = FloatType;\r\n    exports.HalfFloatType = HalfFloatType;\r\n    exports.UnsignedShort4444Type = UnsignedShort4444Type;\r\n    exports.UnsignedShort5551Type = UnsignedShort5551Type;\r\n    exports.UnsignedShort565Type = UnsignedShort565Type;\r\n    exports.UnsignedInt248Type = UnsignedInt248Type;\r\n    exports.AlphaFormat = AlphaFormat;\r\n    exports.RGBFormat = RGBFormat;\r\n    exports.RGBAFormat = RGBAFormat;\r\n    exports.LuminanceFormat = LuminanceFormat;\r\n    exports.LuminanceAlphaFormat = LuminanceAlphaFormat;\r\n    exports.RGBEFormat = RGBEFormat;\r\n    exports.DepthFormat = DepthFormat;\r\n    exports.DepthStencilFormat = DepthStencilFormat;\r\n    exports.RGB_S3TC_DXT1_Format = RGB_S3TC_DXT1_Format;\r\n    exports.RGBA_S3TC_DXT1_Format = RGBA_S3TC_DXT1_Format;\r\n    exports.RGBA_S3TC_DXT3_Format = RGBA_S3TC_DXT3_Format;\r\n    exports.RGBA_S3TC_DXT5_Format = RGBA_S3TC_DXT5_Format;\r\n    exports.RGB_PVRTC_4BPPV1_Format = RGB_PVRTC_4BPPV1_Format;\r\n    exports.RGB_PVRTC_2BPPV1_Format = RGB_PVRTC_2BPPV1_Format;\r\n    exports.RGBA_PVRTC_4BPPV1_Format = RGBA_PVRTC_4BPPV1_Format;\r\n    exports.RGBA_PVRTC_2BPPV1_Format = RGBA_PVRTC_2BPPV1_Format;\r\n    exports.RGB_ETC1_Format = RGB_ETC1_Format;\r\n    exports.RGBA_ASTC_4x4_Format = RGBA_ASTC_4x4_Format;\r\n    exports.RGBA_ASTC_5x4_Format = RGBA_ASTC_5x4_Format;\r\n    exports.RGBA_ASTC_5x5_Format = RGBA_ASTC_5x5_Format;\r\n    exports.RGBA_ASTC_6x5_Format = RGBA_ASTC_6x5_Format;\r\n    exports.RGBA_ASTC_6x6_Format = RGBA_ASTC_6x6_Format;\r\n    exports.RGBA_ASTC_8x5_Format = RGBA_ASTC_8x5_Format;\r\n    exports.RGBA_ASTC_8x6_Format = RGBA_ASTC_8x6_Format;\r\n    exports.RGBA_ASTC_8x8_Format = RGBA_ASTC_8x8_Format;\r\n    exports.RGBA_ASTC_10x5_Format = RGBA_ASTC_10x5_Format;\r\n    exports.RGBA_ASTC_10x6_Format = RGBA_ASTC_10x6_Format;\r\n    exports.RGBA_ASTC_10x8_Format = RGBA_ASTC_10x8_Format;\r\n    exports.RGBA_ASTC_10x10_Format = RGBA_ASTC_10x10_Format;\r\n    exports.RGBA_ASTC_12x10_Format = RGBA_ASTC_12x10_Format;\r\n    exports.RGBA_ASTC_12x12_Format = RGBA_ASTC_12x12_Format;\r\n    exports.LoopOnce = LoopOnce;\r\n    exports.LoopRepeat = LoopRepeat;\r\n    exports.LoopPingPong = LoopPingPong;\r\n    exports.InterpolateDiscrete = InterpolateDiscrete;\r\n    exports.InterpolateLinear = InterpolateLinear;\r\n    exports.InterpolateSmooth = InterpolateSmooth;\r\n    exports.ZeroCurvatureEnding = ZeroCurvatureEnding;\r\n    exports.ZeroSlopeEnding = ZeroSlopeEnding;\r\n    exports.WrapAroundEnding = WrapAroundEnding;\r\n    exports.TrianglesDrawMode = TrianglesDrawMode;\r\n    exports.TriangleStripDrawMode = TriangleStripDrawMode;\r\n    exports.TriangleFanDrawMode = TriangleFanDrawMode;\r\n    exports.LinearEncoding = LinearEncoding;\r\n    exports.sRGBEncoding = sRGBEncoding;\r\n    exports.GammaEncoding = GammaEncoding;\r\n    exports.RGBEEncoding = RGBEEncoding;\r\n    exports.LogLuvEncoding = LogLuvEncoding;\r\n    exports.RGBM7Encoding = RGBM7Encoding;\r\n    exports.RGBM16Encoding = RGBM16Encoding;\r\n    exports.RGBDEncoding = RGBDEncoding;\r\n    exports.BasicDepthPacking = BasicDepthPacking;\r\n    exports.RGBADepthPacking = RGBADepthPacking;\r\n    exports.CubeGeometry = BoxGeometry;\r\n    exports.Face4 = Face4;\r\n    exports.LineStrip = LineStrip;\r\n    exports.LinePieces = LinePieces;\r\n    exports.MeshFaceMaterial = MeshFaceMaterial;\r\n    exports.MultiMaterial = MultiMaterial;\r\n    exports.PointCloud = PointCloud;\r\n    exports.Particle = Particle;\r\n    exports.ParticleSystem = ParticleSystem;\r\n    exports.PointCloudMaterial = PointCloudMaterial;\r\n    exports.ParticleBasicMaterial = ParticleBasicMaterial;\r\n    exports.ParticleSystemMaterial = ParticleSystemMaterial;\r\n    exports.Vertex = Vertex;\r\n    exports.DynamicBufferAttribute = DynamicBufferAttribute;\r\n    exports.Int8Attribute = Int8Attribute;\r\n    exports.Uint8Attribute = Uint8Attribute;\r\n    exports.Uint8ClampedAttribute = Uint8ClampedAttribute;\r\n    exports.Int16Attribute = Int16Attribute;\r\n    exports.Uint16Attribute = Uint16Attribute;\r\n    exports.Int32Attribute = Int32Attribute;\r\n    exports.Uint32Attribute = Uint32Attribute;\r\n    exports.Float32Attribute = Float32Attribute;\r\n    exports.Float64Attribute = Float64Attribute;\r\n    exports.ClosedSplineCurve3 = ClosedSplineCurve3;\r\n    exports.SplineCurve3 = SplineCurve3;\r\n    exports.Spline = Spline;\r\n    exports.AxisHelper = AxisHelper;\r\n    exports.BoundingBoxHelper = BoundingBoxHelper;\r\n    exports.EdgesHelper = EdgesHelper;\r\n    exports.WireframeHelper = WireframeHelper;\r\n    exports.XHRLoader = XHRLoader;\r\n    exports.BinaryTextureLoader = BinaryTextureLoader;\r\n    exports.GeometryUtils = GeometryUtils;\r\n    exports.ImageUtils = ImageUtils;\r\n    exports.Projector = Projector;\r\n    exports.CanvasRenderer = CanvasRenderer;\r\n    exports.SceneUtils = SceneUtils;\r\n    exports.LensFlare = LensFlare;\r\n\r\n    Object.defineProperty(exports, '__esModule', { value: true });\r\n\r\n})));","import './weapp-adapter';\r\nimport './symbol';\r\nimport './tween-adapter'\r\n\r\nimport JumpDemo from '../src/JumpDemo';\r\n\r\nnew JumpDemo();","/**\r\n * ES6Symbol\r\n * \r\n */\r\n\r\nlet Symbol  = window.Symbol\r\nlet idCounter = 0\r\n\r\nif (!Symbol) {\r\n  Symbol = function Symbol(key) {\r\n    return `__${key}_${Math.floor(Math.random() * 1e9)}_${++idCounter}__`\r\n  }\r\n\r\n  Symbol.iterator = Symbol('Symbol.iterator')\r\n}\r\n\r\nwindow.Symbol = Symbol\r\n","import * as TWEEN from '../src/libs/Tween';\r\n\r\nvar oldFunc = TWEEN.Tween.prototype.to;\r\nTWEEN.Tween.prototype.to = function (coords, duration) {\r\n    duration /= 1000;\r\n    return oldFunc.call(this, coords, duration);\r\n};","/******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {}\r\n\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId])\r\n/******/ \t\t\treturn installedModules[moduleId].exports\r\n\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\texports: {},\r\n/******/ \t\t\tid: moduleId,\r\n/******/ \t\t\tloaded: false\r\n/******/ \t\t}\r\n\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__)\r\n\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.loaded = true\r\n\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports\r\n/******/ \t}\r\n\r\n\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules\r\n\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules\r\n\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\"\r\n\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(0)\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tvar _window2 = __webpack_require__(1)\r\n\r\n\tvar _window = _interopRequireWildcard(_window2)\r\n\r\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key] } } newObj.default = obj; return newObj } }\r\n\r\n\tvar global = GameGlobal\r\n\r\n\tfunction inject() {\r\n\t  _window.addEventListener = _window.canvas.addEventListener = function (type, listener) {\r\n\t    _window.document.addEventListener(type, listener)\r\n\t  }\r\n\t  _window.removeEventListener = _window.canvas.removeEventListener = function (type, listener) {\r\n\t    _window.document.removeEventListener(type, listener)\r\n\t  }\r\n\r\n\t  var _wx$getSystemInfoSync = wx.getSystemInfoSync(),\r\n\t      platform = _wx$getSystemInfoSync.platform\r\n\r\n\t  //  window\r\n\r\n\r\n\t  if (typeof __devtoolssubcontext === 'undefined' && platform === 'devtools') {\r\n\t    for (var key in _window) {\r\n\t      var descriptor = Object.getOwnPropertyDescriptor(global, key)\r\n\r\n\t      if (!descriptor || descriptor.configurable === true) {\r\n\t        Object.defineProperty(window, key, {\r\n\t          value: _window[key]\r\n\t        })\r\n\t      }\r\n\t    }\r\n\r\n\t    for (var _key in _window.document) {\r\n\t      var _descriptor = Object.getOwnPropertyDescriptor(global.document, _key)\r\n\r\n\t      if (!_descriptor || _descriptor.configurable === true) {\r\n\t        Object.defineProperty(global.document, _key, {\r\n\t          value: _window.document[_key]\r\n\t        })\r\n\t      }\r\n\t    }\r\n\t    window.parent = window\r\n\t  } else {\r\n\t    for (var _key2 in _window) {\r\n\t      global[_key2] = _window[_key2]\r\n\t    }\r\n\t    global.window = _window\r\n\t    window = global\r\n\t    window.top = window.parent = window\r\n\t  }\r\n\t}\r\n\r\n\tif (!GameGlobal.__isAdapterInjected) {\r\n\t  GameGlobal.__isAdapterInjected = true\r\n\t  inject()\r\n\t}\r\n\r\n/***/ }),\r\n/* 1 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\texports.cancelAnimationFrame = exports.requestAnimationFrame = exports.clearInterval = exports.clearTimeout = exports.setInterval = exports.setTimeout = exports.canvas = exports.location = exports.localStorage = exports.HTMLElement = exports.FileReader = exports.Audio = exports.Image = exports.WebSocket = exports.XMLHttpRequest = exports.navigator = exports.document = undefined\r\n\r\n\tvar _WindowProperties = __webpack_require__(2)\r\n\r\n\tObject.keys(_WindowProperties).forEach(function (key) {\r\n\t  if (key === \"default\" || key === \"__esModule\") return\r\n\t  Object.defineProperty(exports, key, {\r\n\t    enumerable: true,\r\n\t    get: function get() {\r\n\t      return _WindowProperties[key]\r\n\t    }\r\n\t  })\r\n\t})\r\n\r\n\tvar _constructor = __webpack_require__(3)\r\n\r\n\tObject.keys(_constructor).forEach(function (key) {\r\n\t  if (key === \"default\" || key === \"__esModule\") return\r\n\t  Object.defineProperty(exports, key, {\r\n\t    enumerable: true,\r\n\t    get: function get() {\r\n\t      return _constructor[key]\r\n\t    }\r\n\t  })\r\n\t})\r\n\r\n\tvar _Canvas = __webpack_require__(9)\r\n\r\n\tvar _Canvas2 = _interopRequireDefault(_Canvas)\r\n\r\n\tvar _document2 = __webpack_require__(10)\r\n\r\n\tvar _document3 = _interopRequireDefault(_document2)\r\n\r\n\tvar _navigator2 = __webpack_require__(17)\r\n\r\n\tvar _navigator3 = _interopRequireDefault(_navigator2)\r\n\r\n\tvar _XMLHttpRequest2 = __webpack_require__(18)\r\n\r\n\tvar _XMLHttpRequest3 = _interopRequireDefault(_XMLHttpRequest2)\r\n\r\n\tvar _WebSocket2 = __webpack_require__(19)\r\n\r\n\tvar _WebSocket3 = _interopRequireDefault(_WebSocket2)\r\n\r\n\tvar _Image2 = __webpack_require__(11)\r\n\r\n\tvar _Image3 = _interopRequireDefault(_Image2)\r\n\r\n\tvar _Audio2 = __webpack_require__(12)\r\n\r\n\tvar _Audio3 = _interopRequireDefault(_Audio2)\r\n\r\n\tvar _FileReader2 = __webpack_require__(20)\r\n\r\n\tvar _FileReader3 = _interopRequireDefault(_FileReader2)\r\n\r\n\tvar _HTMLElement2 = __webpack_require__(4)\r\n\r\n\tvar _HTMLElement3 = _interopRequireDefault(_HTMLElement2)\r\n\r\n\tvar _localStorage2 = __webpack_require__(21)\r\n\r\n\tvar _localStorage3 = _interopRequireDefault(_localStorage2)\r\n\r\n\tvar _location2 = __webpack_require__(22)\r\n\r\n\tvar _location3 = _interopRequireDefault(_location2)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\texports.document = _document3.default\r\n\texports.navigator = _navigator3.default\r\n\texports.XMLHttpRequest = _XMLHttpRequest3.default\r\n\texports.WebSocket = _WebSocket3.default\r\n\texports.Image = _Image3.default\r\n\texports.Audio = _Audio3.default\r\n\texports.FileReader = _FileReader3.default\r\n\texports.HTMLElement = _HTMLElement3.default\r\n\texports.localStorage = _localStorage3.default\r\n\texports.location = _location3.default\r\n\r\n\r\n\t//  canvas\r\n\tvar canvas = new _Canvas2.default()\r\n\r\n\texports.canvas = canvas\r\n\texports.setTimeout = setTimeout\r\n\texports.setInterval = setInterval\r\n\texports.clearTimeout = clearTimeout\r\n\texports.clearInterval = clearInterval\r\n\texports.requestAnimationFrame = requestAnimationFrame\r\n\texports.cancelAnimationFrame = cancelAnimationFrame\r\n\r\n/***/ }),\r\n/* 2 */\r\n/***/ (function(module, exports) {\r\n\r\n\t\"use strict\"\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _wx$getSystemInfoSync = wx.getSystemInfoSync(),\r\n\t    screenWidth = _wx$getSystemInfoSync.screenWidth,\r\n\t    screenHeight = _wx$getSystemInfoSync.screenHeight,\r\n\t    devicePixelRatio = _wx$getSystemInfoSync.devicePixelRatio\r\n\r\n\tvar innerWidth = exports.innerWidth = screenWidth\r\n\tvar innerHeight = exports.innerHeight = screenHeight\r\n\texports.devicePixelRatio = devicePixelRatio\r\n\tvar screen = exports.screen = {\r\n\t  availWidth: innerWidth,\r\n\t  availHeight: innerHeight\r\n\t}\r\n\tvar performance = exports.performance = {\r\n\t  now: function now() {\r\n\t    return Date.now() / 1000\r\n\t  }\r\n\t}\r\n\tvar ontouchstart = exports.ontouchstart = null\r\n\tvar ontouchmove = exports.ontouchmove = null\r\n\tvar ontouchend = exports.ontouchend = null\r\n\r\n/***/ }),\r\n/* 3 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\texports.HTMLCanvasElement = exports.HTMLImageElement = undefined\r\n\r\n\tvar _HTMLElement3 = __webpack_require__(4)\r\n\r\n\tvar _HTMLElement4 = _interopRequireDefault(_HTMLElement3)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\") } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self }\r\n\r\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass) } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass }\r\n\r\n\tvar HTMLImageElement = exports.HTMLImageElement = function (_HTMLElement) {\r\n\t  _inherits(HTMLImageElement, _HTMLElement)\r\n\r\n\t  function HTMLImageElement() {\r\n\t    _classCallCheck(this, HTMLImageElement)\r\n\r\n\t    return _possibleConstructorReturn(this, (HTMLImageElement.__proto__ || Object.getPrototypeOf(HTMLImageElement)).call(this, 'img'))\r\n\t  }\r\n\r\n\t  return HTMLImageElement\r\n\t}(_HTMLElement4.default)\r\n\r\n\tvar HTMLCanvasElement = exports.HTMLCanvasElement = function (_HTMLElement2) {\r\n\t  _inherits(HTMLCanvasElement, _HTMLElement2)\r\n\r\n\t  function HTMLCanvasElement() {\r\n\t    _classCallCheck(this, HTMLCanvasElement)\r\n\r\n\t    return _possibleConstructorReturn(this, (HTMLCanvasElement.__proto__ || Object.getPrototypeOf(HTMLCanvasElement)).call(this, 'canvas'))\r\n\t  }\r\n\r\n\t  return HTMLCanvasElement\r\n\t}(_HTMLElement4.default)\r\n\r\n/***/ }),\r\n/* 4 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor) } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor } }()\r\n\r\n\tvar _Element2 = __webpack_require__(5)\r\n\r\n\tvar _Element3 = _interopRequireDefault(_Element2)\r\n\r\n\tvar _util = __webpack_require__(8)\r\n\r\n\tvar _WindowProperties = __webpack_require__(2)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\") } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self }\r\n\r\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass) } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass }\r\n\r\n\tvar HTMLElement = function (_Element) {\r\n\t  _inherits(HTMLElement, _Element)\r\n\r\n\t  function HTMLElement() {\r\n\t    var tagName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ''\r\n\r\n\t    _classCallCheck(this, HTMLElement)\r\n\r\n\t    var _this = _possibleConstructorReturn(this, (HTMLElement.__proto__ || Object.getPrototypeOf(HTMLElement)).call(this))\r\n\r\n\t    _this.className = ''\r\n\t    _this.childern = []\r\n\t    _this.style = {\r\n\t      width: _WindowProperties.innerWidth + 'px',\r\n\t      height: _WindowProperties.innerHeight + 'px'\r\n\t    }\r\n\t    _this.insertBefore = _util.noop\r\n\t    _this.innerHTML = ''\r\n\r\n\t    _this.tagName = tagName.toUpperCase()\r\n\t    return _this\r\n\t  }\r\n\r\n\t  _createClass(HTMLElement, [{\r\n\t    key: 'setAttribute',\r\n\t    value: function setAttribute(name, value) {\r\n\t      this[name] = value\r\n\t    }\r\n\t  }, {\r\n\t    key: 'getAttribute',\r\n\t    value: function getAttribute(name) {\r\n\t      return this[name]\r\n\t    }\r\n\t  }, {\r\n\t    key: 'getBoundingClientRect',\r\n\t    value: function getBoundingClientRect() {\r\n\t      return {\r\n\t        top: 0,\r\n\t        left: 0,\r\n\t        width: _WindowProperties.innerWidth,\r\n\t        height: _WindowProperties.innerHeight\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'focus',\r\n\t    value: function focus() {}\r\n\t  }, {\r\n\t    key: 'clientWidth',\r\n\t    get: function get() {\r\n\t      var ret = parseInt(this.style.fontSize, 10) * this.innerHTML.length\r\n\r\n\t      return Number.isNaN(ret) ? 0 : ret\r\n\t    }\r\n\t  }, {\r\n\t    key: 'clientHeight',\r\n\t    get: function get() {\r\n\t      var ret = parseInt(this.style.fontSize, 10)\r\n\r\n\t      return Number.isNaN(ret) ? 0 : ret\r\n\t    }\r\n\t  }])\r\n\r\n\t  return HTMLElement\r\n\t}(_Element3.default)\r\n\r\n\texports.default = HTMLElement\r\n\r\n/***/ }),\r\n/* 5 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _Node2 = __webpack_require__(6)\r\n\r\n\tvar _Node3 = _interopRequireDefault(_Node2)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\") } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self }\r\n\r\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass) } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass }\r\n\r\n\tvar ELement = function (_Node) {\r\n\t  _inherits(ELement, _Node)\r\n\r\n\t  function ELement() {\r\n\t    _classCallCheck(this, ELement)\r\n\r\n\t    var _this = _possibleConstructorReturn(this, (ELement.__proto__ || Object.getPrototypeOf(ELement)).call(this))\r\n\r\n\t    _this.className = ''\r\n\t    _this.children = []\r\n\t    return _this\r\n\t  }\r\n\r\n\t  return ELement\r\n\t}(_Node3.default)\r\n\r\n\texports.default = ELement\r\n\r\n/***/ }),\r\n/* 6 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor) } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor } }()\r\n\r\n\tvar _EventTarget2 = __webpack_require__(7)\r\n\r\n\tvar _EventTarget3 = _interopRequireDefault(_EventTarget2)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\") } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self }\r\n\r\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass) } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass }\r\n\r\n\tvar Node = function (_EventTarget) {\r\n\t  _inherits(Node, _EventTarget)\r\n\r\n\t  function Node() {\r\n\t    _classCallCheck(this, Node)\r\n\r\n\t    var _this = _possibleConstructorReturn(this, (Node.__proto__ || Object.getPrototypeOf(Node)).call(this))\r\n\r\n\t    _this.childNodes = []\r\n\t    return _this\r\n\t  }\r\n\r\n\t  _createClass(Node, [{\r\n\t    key: 'appendChild',\r\n\t    value: function appendChild(node) {\r\n\t      if (node instanceof Node) {\r\n\t        this.childNodes.push(node)\r\n\t      } else {\r\n\t        throw new TypeError('Failed to executed \\'appendChild\\' on \\'Node\\': parameter 1 is not of type \\'Node\\'.')\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'cloneNode',\r\n\t    value: function cloneNode() {\r\n\t      var copyNode = Object.create(this)\r\n\r\n\t      Object.assign(copyNode, this)\r\n\t      return copyNode\r\n\t    }\r\n\t  }, {\r\n\t    key: 'removeChild',\r\n\t    value: function removeChild(node) {\r\n\t      var index = this.childNodes.findIndex(function (child) {\r\n\t        return child === node\r\n\t      })\r\n\r\n\t      if (index > -1) {\r\n\t        return this.childNodes.splice(index, 1)\r\n\t      }\r\n\t      return null\r\n\t    }\r\n\t  }])\r\n\r\n\t  return Node\r\n\t}(_EventTarget3.default)\r\n\r\n\texports.default = Node\r\n\r\n/***/ }),\r\n/* 7 */\r\n/***/ (function(module, exports) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor) } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor } }()\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tvar _events = new WeakMap()\r\n\r\n\tvar EventTarget = function () {\r\n\t  function EventTarget() {\r\n\t    _classCallCheck(this, EventTarget)\r\n\r\n\t    _events.set(this, {})\r\n\t  }\r\n\r\n\t  _createClass(EventTarget, [{\r\n\t    key: 'addEventListener',\r\n\t    value: function addEventListener(type, listener) {\r\n\t      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {}\r\n\r\n\t      var events = _events.get(this)\r\n\r\n\t      if (!events) {\r\n\t        events = {}\r\n\t        _events.set(this, events)\r\n\t      }\r\n\t      if (!events[type]) {\r\n\t        events[type] = []\r\n\t      }\r\n\t      events[type].push(listener)\r\n\r\n\t      if (options.capture) {\r\n\t        console.warn('EventTarget.addEventListener: options.capture is not implemented.')\r\n\t      }\r\n\t      if (options.once) {\r\n\t        console.warn('EventTarget.addEventListener: options.once is not implemented.')\r\n\t      }\r\n\t      if (options.passive) {\r\n\t        console.warn('EventTarget.addEventListener: options.passive is not implemented.')\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'removeEventListener',\r\n\t    value: function removeEventListener(type, listener) {\r\n\t      var listeners = _events.get(this)[type]\r\n\r\n\t      if (listeners && listeners.length > 0) {\r\n\t        for (var i = listeners.length; i--; i > 0) {\r\n\t          if (listeners[i] === listener) {\r\n\t            listeners.splice(i, 1)\r\n\t            break\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'dispatchEvent',\r\n\t    value: function dispatchEvent() {\r\n\t      var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}\r\n\r\n\t      var listeners = _events.get(this)[event.type]\r\n\r\n\t      if (listeners) {\r\n\t        for (var i = 0; i < listeners.length; i++) {\r\n\t          listeners[i](event)\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  }])\r\n\r\n\t  return EventTarget\r\n\t}()\r\n\r\n\texports.default = EventTarget\r\n\r\n/***/ }),\r\n/* 8 */\r\n/***/ (function(module, exports) {\r\n\r\n\t\"use strict\"\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\texports.noop = noop\r\n\tfunction noop() {}\r\n\r\n/***/ }),\r\n/* 9 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\texports.default = Canvas\r\n\r\n\tvar _constructor = __webpack_require__(3)\r\n\r\n\tvar _HTMLElement = __webpack_require__(4)\r\n\r\n\tvar _HTMLElement2 = _interopRequireDefault(_HTMLElement)\r\n\r\n\tvar _document = __webpack_require__(10)\r\n\r\n\tvar _document2 = _interopRequireDefault(_document)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tvar hasModifiedCanvasPrototype = false\r\n\tvar hasInit2DContextConstructor = false\r\n\tvar hasInitWebGLContextConstructor = false\r\n\r\n\tfunction Canvas() {\r\n\t  var canvas = wx.createCanvas()\r\n\r\n\t  canvas.type = 'canvas'\r\n\r\n\t  canvas.__proto__.__proto__ = new _HTMLElement2.default('canvas')\r\n\r\n\t  var _getContext = canvas.getContext\r\n\r\n\t  canvas.getBoundingClientRect = function () {\r\n\t    var ret = {\r\n\t      top: 0,\r\n\t      left: 0,\r\n\t      width: window.innerWidth,\r\n\t      height: window.innerHeight\r\n\t    }\r\n\t    return ret\r\n\t  }\r\n\r\n\t  return canvas\r\n\t}\r\n\r\n/***/ }),\r\n/* 10 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _window = __webpack_require__(1)\r\n\r\n\tvar window = _interopRequireWildcard(_window)\r\n\r\n\tvar _HTMLElement = __webpack_require__(4)\r\n\r\n\tvar _HTMLElement2 = _interopRequireDefault(_HTMLElement)\r\n\r\n\tvar _Image = __webpack_require__(11)\r\n\r\n\tvar _Image2 = _interopRequireDefault(_Image)\r\n\r\n\tvar _Audio = __webpack_require__(12)\r\n\r\n\tvar _Audio2 = _interopRequireDefault(_Audio)\r\n\r\n\tvar _Canvas = __webpack_require__(9)\r\n\r\n\tvar _Canvas2 = _interopRequireDefault(_Canvas)\r\n\r\n\t__webpack_require__(15)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key] } } newObj.default = obj; return newObj } }\r\n\r\n\tvar events = {}\r\n\r\n\tvar document = {\r\n\t  readyState: 'complete',\r\n\t  visibilityState: 'visible',\r\n\t  documentElement: window,\r\n\t  hidden: false,\r\n\t  style: {},\r\n\t  location: window.location,\r\n\t  ontouchstart: null,\r\n\t  ontouchmove: null,\r\n\t  ontouchend: null,\r\n\r\n\t  head: new _HTMLElement2.default('head'),\r\n\t  body: new _HTMLElement2.default('body'),\r\n\r\n\t  createElement: function createElement(tagName) {\r\n\t    if (tagName === 'canvas') {\r\n\t      return new _Canvas2.default()\r\n\t    } else if (tagName === 'audio') {\r\n\t      return new _Audio2.default()\r\n\t    } else if (tagName === 'img') {\r\n\t      return new _Image2.default()\r\n\t    }\r\n\r\n\t    return new _HTMLElement2.default(tagName)\r\n\t  },\r\n\t  getElementById: function getElementById(id) {\r\n\t    if (id === window.canvas.id) {\r\n\t      return window.canvas\r\n\t    }\r\n\t    return null\r\n\t  },\r\n\t  getElementsByTagName: function getElementsByTagName(tagName) {\r\n\t    if (tagName === 'head') {\r\n\t      return [document.head]\r\n\t    } else if (tagName === 'body') {\r\n\t      return [document.body]\r\n\t    } else if (tagName === 'canvas') {\r\n\t      return [window.canvas]\r\n\t    }\r\n\t    return []\r\n\t  },\r\n\t  querySelector: function querySelector(query) {\r\n\t    if (query === 'head') {\r\n\t      return document.head\r\n\t    } else if (query === 'body') {\r\n\t      return document.body\r\n\t    } else if (query === 'canvas') {\r\n\t      return window.canvas\r\n\t    } else if (query === '#' + window.canvas.id) {\r\n\t      return window.canvas\r\n\t    }\r\n\t    return null\r\n\t  },\r\n\t  querySelectorAll: function querySelectorAll(query) {\r\n\t    if (query === 'head') {\r\n\t      return [document.head]\r\n\t    } else if (query === 'body') {\r\n\t      return [document.body]\r\n\t    } else if (query === 'canvas') {\r\n\t      return [window.canvas]\r\n\t    }\r\n\t    return []\r\n\t  },\r\n\t  addEventListener: function addEventListener(type, listener) {\r\n\t    if (!events[type]) {\r\n\t      events[type] = []\r\n\t    }\r\n\t    events[type].push(listener)\r\n\t  },\r\n\t  removeEventListener: function removeEventListener(type, listener) {\r\n\t    var listeners = events[type]\r\n\r\n\t    if (listeners && listeners.length > 0) {\r\n\t      for (var i = listeners.length; i--; i > 0) {\r\n\t        if (listeners[i] === listener) {\r\n\t          listeners.splice(i, 1)\r\n\t          break\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  },\r\n\t  dispatchEvent: function dispatchEvent(event) {\r\n\t    var listeners = events[event.type]\r\n\r\n\t    if (listeners) {\r\n\t      for (var i = 0; i < listeners.length; i++) {\r\n\t        listeners[i](event)\r\n\t      }\r\n\t    }\r\n\t  }\r\n\t}\r\n\r\n\texports.default = document\r\n\r\n/***/ }),\r\n/* 11 */\r\n/***/ (function(module, exports) {\r\n\r\n\t\"use strict\"\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\texports.default = Image\r\n\tfunction Image() {\r\n\t  var image = wx.createImage()\r\n\r\n\t  return image\r\n\t}\r\n\r\n/***/ }),\r\n/* 12 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor) } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor } }()\r\n\r\n\tvar _HTMLAudioElement2 = __webpack_require__(13)\r\n\r\n\tvar _HTMLAudioElement3 = _interopRequireDefault(_HTMLAudioElement2)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\") } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self }\r\n\r\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass) } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass }\r\n\r\n\tvar HAVE_NOTHING = 0\r\n\tvar HAVE_METADATA = 1\r\n\tvar HAVE_CURRENT_DATA = 2\r\n\tvar HAVE_FUTURE_DATA = 3\r\n\tvar HAVE_ENOUGH_DATA = 4\r\n\r\n\tvar _innerAudioContext = new WeakMap()\r\n\tvar _src = new WeakMap()\r\n\tvar _loop = new WeakMap()\r\n\tvar _autoplay = new WeakMap()\r\n\r\n\tvar Audio = function (_HTMLAudioElement) {\r\n\t  _inherits(Audio, _HTMLAudioElement)\r\n\r\n\t  function Audio(url) {\r\n\t    _classCallCheck(this, Audio)\r\n\r\n\t    var _this = _possibleConstructorReturn(this, (Audio.__proto__ || Object.getPrototypeOf(Audio)).call(this))\r\n\r\n\t    _this.HAVE_NOTHING = HAVE_NOTHING\r\n\t    _this.HAVE_METADATA = HAVE_METADATA\r\n\t    _this.HAVE_CURRENT_DATA = HAVE_CURRENT_DATA\r\n\t    _this.HAVE_FUTURE_DATA = HAVE_FUTURE_DATA\r\n\t    _this.HAVE_ENOUGH_DATA = HAVE_ENOUGH_DATA\r\n\t    _this.readyState = HAVE_NOTHING\r\n\r\n\r\n\t    _src.set(_this, '')\r\n\r\n\t    var innerAudioContext = wx.createInnerAudioContext()\r\n\r\n\t    _innerAudioContext.set(_this, innerAudioContext)\r\n\r\n\t    innerAudioContext.onCanplay(function () {\r\n\t      _this.dispatchEvent({ type: 'load' })\r\n\t      _this.dispatchEvent({ type: 'loadend' })\r\n\t      _this.dispatchEvent({ type: 'canplay' })\r\n\t      _this.dispatchEvent({ type: 'canplaythrough' })\r\n\t      _this.dispatchEvent({ type: 'loadedmetadata' })\r\n\t      _this.readyState = HAVE_CURRENT_DATA\r\n\t    })\r\n\t    innerAudioContext.onPlay(function () {\r\n\t      _this.dispatchEvent({ type: 'play' })\r\n\t    })\r\n\t    innerAudioContext.onPause(function () {\r\n\t      _this.dispatchEvent({ type: 'pause' })\r\n\t    })\r\n\t    innerAudioContext.onEnded(function () {\r\n\t      _this.dispatchEvent({ type: 'ended' })\r\n\t      _this.readyState = HAVE_ENOUGH_DATA\r\n\t    })\r\n\t    innerAudioContext.onError(function () {\r\n\t      _this.dispatchEvent({ type: 'error' })\r\n\t    })\r\n\r\n\t    if (url) {\r\n\t      _innerAudioContext.get(_this).src = url\r\n\t    }\r\n\t    return _this\r\n\t  }\r\n\r\n\t  _createClass(Audio, [{\r\n\t    key: 'load',\r\n\t    value: function load() {\r\n\t      console.warn('HTMLAudioElement.load() is not implemented.')\r\n\t    }\r\n\t  }, {\r\n\t    key: 'play',\r\n\t    value: function play() {\r\n\t      _innerAudioContext.get(this).play()\r\n\t    }\r\n\t  }, {\r\n\t    key: 'pause',\r\n\t    value: function pause() {\r\n\t      _innerAudioContext.get(this).pause()\r\n\t    }\r\n\t  }, {\r\n\t    key: 'canPlayType',\r\n\t    value: function canPlayType() {\r\n\t      var mediaType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ''\r\n\r\n\t      if (typeof mediaType !== 'string') {\r\n\t        return ''\r\n\t      }\r\n\r\n\t      if (mediaType.indexOf('audio/mpeg') > -1 || mediaType.indexOf('audio/mp4')) {\r\n\t        return 'probably'\r\n\t      }\r\n\t      return ''\r\n\t    }\r\n\t  }, {\r\n\t    key: 'cloneNode',\r\n\t    value: function cloneNode() {\r\n\t      var newAudio = new Audio()\r\n\t      newAudio.loop = _innerAudioContext.get(this).loop\r\n\t      newAudio.autoplay = _innerAudioContext.get(this).loop\r\n\t      newAudio.src = this.src\r\n\t      return newAudio\r\n\t    }\r\n\t  }, {\r\n\t    key: 'currentTime',\r\n\t    get: function get() {\r\n\t      return _innerAudioContext.get(this).currentTime\r\n\t    },\r\n\t    set: function set(value) {\r\n\t      _innerAudioContext.get(this).seek(value)\r\n\t    }\r\n\t  }, {\r\n\t    key: 'src',\r\n\t    get: function get() {\r\n\t      return _src.get(this)\r\n\t    },\r\n\t    set: function set(value) {\r\n\t      _src.set(this, value)\r\n\t      _innerAudioContext.get(this).src = value\r\n\t    }\r\n\t  }, {\r\n\t    key: 'loop',\r\n\t    get: function get() {\r\n\t      return _innerAudioContext.get(this).loop\r\n\t    },\r\n\t    set: function set(value) {\r\n\t      _innerAudioContext.get(this).loop = value\r\n\t    }\r\n\t  }, {\r\n\t    key: 'autoplay',\r\n\t    get: function get() {\r\n\t      return _innerAudioContext.get(this).autoplay\r\n\t    },\r\n\t    set: function set(value) {\r\n\t      _innerAudioContext.get(this).autoplay = value\r\n\t    }\r\n\t  }, {\r\n\t    key: 'paused',\r\n\t    get: function get() {\r\n\t      return _innerAudioContext.get(this).paused\r\n\t    }\r\n\t  }])\r\n\r\n\t  return Audio\r\n\t}(_HTMLAudioElement3.default)\r\n\r\n\texports.default = Audio\r\n\r\n/***/ }),\r\n/* 13 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _HTMLMediaElement2 = __webpack_require__(14)\r\n\r\n\tvar _HTMLMediaElement3 = _interopRequireDefault(_HTMLMediaElement2)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\") } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self }\r\n\r\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass) } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass }\r\n\r\n\tvar HTMLAudioElement = function (_HTMLMediaElement) {\r\n\t  _inherits(HTMLAudioElement, _HTMLMediaElement)\r\n\r\n\t  function HTMLAudioElement() {\r\n\t    _classCallCheck(this, HTMLAudioElement)\r\n\r\n\t    return _possibleConstructorReturn(this, (HTMLAudioElement.__proto__ || Object.getPrototypeOf(HTMLAudioElement)).call(this, 'audio'))\r\n\t  }\r\n\r\n\t  return HTMLAudioElement\r\n\t}(_HTMLMediaElement3.default)\r\n\r\n\texports.default = HTMLAudioElement\r\n\r\n/***/ }),\r\n/* 14 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor) } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor } }()\r\n\r\n\tvar _HTMLElement2 = __webpack_require__(4)\r\n\r\n\tvar _HTMLElement3 = _interopRequireDefault(_HTMLElement2)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\") } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self }\r\n\r\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass) } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass }\r\n\r\n\tvar HTMLMediaElement = function (_HTMLElement) {\r\n\t  _inherits(HTMLMediaElement, _HTMLElement)\r\n\r\n\t  function HTMLMediaElement(type) {\r\n\t    _classCallCheck(this, HTMLMediaElement)\r\n\r\n\t    return _possibleConstructorReturn(this, (HTMLMediaElement.__proto__ || Object.getPrototypeOf(HTMLMediaElement)).call(this, type))\r\n\t  }\r\n\r\n\t  _createClass(HTMLMediaElement, [{\r\n\t    key: 'addTextTrack',\r\n\t    value: function addTextTrack() {}\r\n\t  }, {\r\n\t    key: 'captureStream',\r\n\t    value: function captureStream() {}\r\n\t  }, {\r\n\t    key: 'fastSeek',\r\n\t    value: function fastSeek() {}\r\n\t  }, {\r\n\t    key: 'load',\r\n\t    value: function load() {}\r\n\t  }, {\r\n\t    key: 'pause',\r\n\t    value: function pause() {}\r\n\t  }, {\r\n\t    key: 'play',\r\n\t    value: function play() {}\r\n\t  }])\r\n\r\n\t  return HTMLMediaElement\r\n\t}(_HTMLElement3.default)\r\n\r\n\texports.default = HTMLMediaElement\r\n\r\n/***/ }),\r\n/* 15 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\t__webpack_require__(16)\r\n\r\n/***/ }),\r\n/* 16 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tvar _window = __webpack_require__(1)\r\n\r\n\tvar window = _interopRequireWildcard(_window)\r\n\r\n\tvar _document = __webpack_require__(10)\r\n\r\n\tvar _document2 = _interopRequireDefault(_document)\r\n\r\n\tvar _util = __webpack_require__(8)\r\n\r\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj } }\r\n\r\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key] } } newObj.default = obj; return newObj } }\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tvar TouchEvent = function TouchEvent(type) {\r\n\t  _classCallCheck(this, TouchEvent)\r\n\r\n\t  this.target = window.canvas\r\n\t  this.currentTarget = window.canvas\r\n\t  this.touches = []\r\n\t  this.targetTouches = []\r\n\t  this.changedTouches = []\r\n\t  this.preventDefault = _util.noop\r\n\t  this.stopPropagation = _util.noop\r\n\r\n\t  this.type = type\r\n\t}\r\n\r\n\tfunction touchEventHandlerFactory(type) {\r\n\t  return function (event) {\r\n\t    var touchEvent = new TouchEvent(type)\r\n\r\n\t    touchEvent.touches = event.touches\r\n\t    touchEvent.targetTouches = Array.prototype.slice.call(event.touches)\r\n\t    touchEvent.changedTouches = event.changedTouches\r\n\t    touchEvent.timeStamp = event.timeStamp\r\n\t    _document2.default.dispatchEvent(touchEvent)\r\n\t  }\r\n\t}\r\n\r\n\twx.onTouchStart(touchEventHandlerFactory('touchstart'))\r\n\twx.onTouchMove(touchEventHandlerFactory('touchmove'))\r\n\twx.onTouchEnd(touchEventHandlerFactory('touchend'))\r\n\twx.onTouchCancel(touchEventHandlerFactory('touchcancel'))\r\n\r\n/***/ }),\r\n/* 17 */\r\n/***/ (function(module, exports, __webpack_require__) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _util = __webpack_require__(8)\r\n\r\n\t// TODO  wx.getSystemInfo \r\n\tvar _wx$getSystemInfoSync = wx.getSystemInfoSync(),\r\n\t    platform = _wx$getSystemInfoSync.platform\r\n\r\n\tvar navigator = {\r\n\t  platform: platform,\r\n\t  language: 'zh-cn',\r\n\t  appVersion: '5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1',\r\n\t  userAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN',\r\n\t  onLine: true, // TODO  wx.getNetworkStateChange  wx.onNetworkStateChange \r\n\r\n\t  // TODO  wx.getLocation  geolocation\r\n\t  geolocation: {\r\n\t    getCurrentPosition: _util.noop,\r\n\t    watchPosition: _util.noop,\r\n\t    clearWatch: _util.noop\r\n\t  }\r\n\t}\r\n\r\n\texports.default = navigator\r\n\r\n/***/ }),\r\n/* 18 */\r\n/***/ (function(module, exports) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor) } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor } }()\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tvar _url = new WeakMap()\r\n\tvar _method = new WeakMap()\r\n\tvar _requestHeader = new WeakMap()\r\n\tvar _responseHeader = new WeakMap()\r\n\tvar _requestTask = new WeakMap()\r\n\r\n\tfunction _triggerEvent(type) {\r\n\t  if (typeof this['on' + type] === 'function') {\r\n\t    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\r\n\t      args[_key - 1] = arguments[_key]\r\n\t    }\r\n\r\n\t    this['on' + type].apply(this, args)\r\n\t  }\r\n\t}\r\n\r\n\tfunction _changeReadyState(readyState) {\r\n\t  this.readyState = readyState\r\n\t  _triggerEvent.call(this, 'readystatechange')\r\n\t}\r\n\r\n\tvar XMLHttpRequest = function () {\r\n\t  // TODO  HEADERS_RECEIVED  LOADING \r\n\t  function XMLHttpRequest() {\r\n\t    _classCallCheck(this, XMLHttpRequest)\r\n\r\n\t    this.onabort = null\r\n\t    this.onerror = null\r\n\t    this.onload = null\r\n\t    this.onloadstart = null\r\n\t    this.onprogress = null\r\n\t    this.ontimeout = null\r\n\t    this.onloadend = null\r\n\t    this.onreadystatechange = null\r\n\t    this.readyState = 0\r\n\t    this.response = null\r\n\t    this.responseText = null\r\n\t    this.responseType = ''\r\n\t    this.responseXML = null\r\n\t    this.status = 0\r\n\t    this.statusText = ''\r\n\t    this.upload = {}\r\n\t    this.withCredentials = false\r\n\r\n\t    _requestHeader.set(this, {\r\n\t      'content-type': 'application/x-www-form-urlencoded'\r\n\t    })\r\n\t    _responseHeader.set(this, {})\r\n\t  }\r\n\r\n\t  /*\r\n\t   * TODO  XMLHttpRequestEventTarget.prototype \r\n\t   */\r\n\r\n\r\n\t  _createClass(XMLHttpRequest, [{\r\n\t    key: 'abort',\r\n\t    value: function abort() {\r\n\t      var myRequestTask = _requestTask.get(this)\r\n\r\n\t      if (myRequestTask) {\r\n\t        myRequestTask.abort()\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'getAllResponseHeaders',\r\n\t    value: function getAllResponseHeaders() {\r\n\t      var responseHeader = _responseHeader.get(this)\r\n\r\n\t      return Object.keys(responseHeader).map(function (header) {\r\n\t        return header + ': ' + responseHeader[header]\r\n\t      }).join('\\n')\r\n\t    }\r\n\t  }, {\r\n\t    key: 'getResponseHeader',\r\n\t    value: function getResponseHeader(header) {\r\n\t      return _responseHeader.get(this)[header]\r\n\t    }\r\n\t  }, {\r\n\t    key: 'open',\r\n\t    value: function open(method, url /* async, user, password */) {\r\n\t      _method.set(this, method)\r\n\t      _url.set(this, url)\r\n\t      _changeReadyState.call(this, XMLHttpRequest.OPENED)\r\n\t    }\r\n\t  }, {\r\n\t    key: 'overrideMimeType',\r\n\t    value: function overrideMimeType() {}\r\n    }, {\r\n      key: 'addEventListener',\r\n      value: function addEventListener(type, listener) {\r\n        if (typeof listener === 'function') {\r\n          let event = { target: this }\r\n          let that = this\r\n          this['on' + type] = function () {\r\n            listener.call(that, event)\r\n          }\r\n        }\r\n      }\r\n    }, {\r\n\t    key: 'send',\r\n\t    value: function send() {\r\n\t      var _this = this\r\n\r\n\t      var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ''\r\n\r\n\t      if (this.readyState !== XMLHttpRequest.OPENED) {\r\n\t        throw new Error(\"Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.\")\r\n\t      } else {\r\n\t        wx.request({\r\n\t          data: data,\r\n\t          url: _url.get(this),\r\n\t          method: _method.get(this),\r\n\t          header: _requestHeader.get(this),\r\n\t          responseType: this.responseType,\r\n\t          success: function success(_ref) {\r\n\t            var data = _ref.data,\r\n\t                statusCode = _ref.statusCode,\r\n\t                header = _ref.header\r\n\r\n\t            if (typeof data !== 'string' && !(data instanceof ArrayBuffer)) {\r\n\t              try {\r\n\t                data = JSON.stringify(data)\r\n\t              } catch (e) {\r\n\t                data = data\r\n\t              }\r\n\t            }\r\n\r\n\t            _this.status = statusCode\r\n\t            _responseHeader.set(_this, header)\r\n\t            _triggerEvent.call(_this, 'loadstart')\r\n\t            _changeReadyState.call(_this, XMLHttpRequest.HEADERS_RECEIVED)\r\n\t            _changeReadyState.call(_this, XMLHttpRequest.LOADING)\r\n\r\n\t            _this.response = data\r\n\r\n\t            if (data instanceof ArrayBuffer) {\r\n\t              _this.responseText = ''\r\n\t              var bytes = new Uint8Array(data)\r\n\t              var len = bytes.byteLength\r\n\r\n\t              for (var i = 0; i < len; i++) {\r\n\t                _this.responseText += String.fromCharCode(bytes[i])\r\n\t              }\r\n\t            } else {\r\n\t              _this.responseText = data\r\n\t            }\r\n\t            _changeReadyState.call(_this, XMLHttpRequest.DONE)\r\n\t            _triggerEvent.call(_this, 'load')\r\n\t            _triggerEvent.call(_this, 'loadend')\r\n\t          },\r\n\t          fail: function fail(_ref2) {\r\n\t            var errMsg = _ref2.errMsg\r\n\r\n\t            // TODO \r\n\t            if (errMsg.indexOf('abort') !== -1) {\r\n\t              _triggerEvent.call(_this, 'abort')\r\n\t            } else {\r\n\t              _triggerEvent.call(_this, 'error', errMsg)\r\n\t            }\r\n\t            _triggerEvent.call(_this, 'loadend')\r\n\t          }\r\n\t        })\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'setRequestHeader',\r\n\t    value: function setRequestHeader(header, value) {\r\n\t      var myHeader = _requestHeader.get(this)\r\n\r\n\t      myHeader[header] = value\r\n\t      _requestHeader.set(this, myHeader)\r\n\t    }\r\n\t  }])\r\n\r\n\t  return XMLHttpRequest\r\n\t}()\r\n\r\n\tXMLHttpRequest.UNSEND = 0\r\n\tXMLHttpRequest.OPENED = 1\r\n\tXMLHttpRequest.HEADERS_RECEIVED = 2\r\n\tXMLHttpRequest.LOADING = 3\r\n\tXMLHttpRequest.DONE = 4\r\n\texports.default = XMLHttpRequest\r\n\r\n/***/ }),\r\n/* 19 */\r\n/***/ (function(module, exports) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor) } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor } }()\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\tvar _socketTask = new WeakMap()\r\n\r\n\tvar WebSocket = function () {\r\n\t  // TODO  binaryType\r\n\t  // The connection is in the process of closing.\r\n\t  // The connection is not yet open.\r\n\t  function WebSocket(url) {\r\n\t    var _this = this\r\n\r\n\t    var protocols = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : []\r\n\r\n\t    _classCallCheck(this, WebSocket)\r\n\r\n\t    this.binaryType = ''\r\n\t    this.bufferedAmount = 0\r\n\t    this.extensions = ''\r\n\t    this.onclose = null\r\n\t    this.onerror = null\r\n\t    this.onmessage = null\r\n\t    this.onopen = null\r\n\t    this.protocol = ''\r\n\t    this.readyState = 3\r\n\r\n\t    if (typeof url !== 'string' || !/(^ws:\\/\\/)|(^wss:\\/\\/)/.test(url)) {\r\n\t      throw new TypeError('Failed to construct \\'WebSocket\\': The URL \\'' + url + '\\' is invalid')\r\n\t    }\r\n\r\n\t    this.url = url\r\n\t    this.readyState = WebSocket.CONNECTING\r\n\r\n\t    var socketTask = wx.connectSocket({\r\n\t      url: url,\r\n\t      protocols: Array.isArray(protocols) ? protocols : [protocols]\r\n\t    })\r\n\r\n\t    _socketTask.set(this, socketTask)\r\n\r\n\t    socketTask.onClose(function (res) {\r\n\t      _this.readyState = WebSocket.CLOSED\r\n\t      if (typeof _this.onclose === 'function') {\r\n\t        _this.onclose(res)\r\n\t      }\r\n\t    })\r\n\r\n\t    socketTask.onMessage(function (res) {\r\n\t      if (typeof _this.onmessage === 'function') {\r\n\t        _this.onmessage(res)\r\n\t      }\r\n\t    })\r\n\r\n\t    socketTask.onOpen(function () {\r\n\t      _this.readyState = WebSocket.OPEN\r\n\t      if (typeof _this.onopen === 'function') {\r\n\t        _this.onopen()\r\n\t      }\r\n\t    })\r\n\r\n\t    socketTask.onError(function (res) {\r\n\t      if (typeof _this.onerror === 'function') {\r\n\t        _this.onerror(new Error(res.errMsg))\r\n\t      }\r\n\t    })\r\n\r\n\t    return this\r\n\t  } // TODO  sub-protocol \r\n\t  // TODO  bufferedAmount\r\n\t  // The connection is closed or couldn't be opened.\r\n\r\n\t  // The connection is open and ready to communicate.\r\n\r\n\r\n\t  _createClass(WebSocket, [{\r\n\t    key: 'close',\r\n\t    value: function close(code, reason) {\r\n\t      this.readyState = WebSocket.CLOSING\r\n\t      var socketTask = _socketTask.get(this)\r\n\r\n\t      socketTask.close({\r\n\t        code: code,\r\n\t        reason: reason\r\n\t      })\r\n\t    }\r\n\t  }, {\r\n\t    key: 'send',\r\n\t    value: function send(data) {\r\n\t      if (typeof data !== 'string' && !(data instanceof ArrayBuffer)) {\r\n\t        throw new TypeError('Failed to send message: The data ' + data + ' is invalid')\r\n\t      }\r\n\r\n\t      var socketTask = _socketTask.get(this)\r\n\r\n\t      socketTask.send({\r\n\t        data: data\r\n\t      })\r\n\t    }\r\n\t  }])\r\n\r\n\t  return WebSocket\r\n\t}()\r\n\r\n\tWebSocket.CONNECTING = 0\r\n\tWebSocket.OPEN = 1\r\n\tWebSocket.CLOSING = 2\r\n\tWebSocket.CLOSED = 3\r\n\texports.default = WebSocket\r\n\r\n/***/ }),\r\n/* 20 */\r\n/***/ (function(module, exports) {\r\n\r\n\t\"use strict\"\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\") } }\r\n\r\n\t/*\r\n\t * TODO  wx.readFile  FileReader\r\n\t */\r\n\tvar FileReader = function FileReader() {\r\n\t  _classCallCheck(this, FileReader)\r\n\t}\r\n\r\n\texports.default = FileReader\r\n\r\n/***/ }),\r\n/* 21 */\r\n/***/ (function(module, exports) {\r\n\r\n\t\"use strict\"\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\tvar localStorage = {\r\n\t  get length() {\r\n\t    var _wx$getStorageInfoSyn = wx.getStorageInfoSync(),\r\n\t        keys = _wx$getStorageInfoSyn.keys\r\n\r\n\t    return keys.length\r\n\t  },\r\n\r\n\t  key: function key(n) {\r\n\t    var _wx$getStorageInfoSyn2 = wx.getStorageInfoSync(),\r\n\t        keys = _wx$getStorageInfoSyn2.keys\r\n\r\n\t    return keys[n]\r\n\t  },\r\n\t  getItem: function getItem(key) {\r\n\t    return wx.getStorageSync(key)\r\n\t  },\r\n\t  setItem: function setItem(key, value) {\r\n\t    return wx.setStorageSync(key, value)\r\n\t  },\r\n\t  removeItem: function removeItem(key) {\r\n\t    wx.removeStorageSync(key)\r\n\t  },\r\n\t  clear: function clear() {\r\n\t    wx.clearStorageSync()\r\n\t  }\r\n\t}\r\n\r\n\texports.default = localStorage\r\n\r\n/***/ }),\r\n/* 22 */\r\n/***/ (function(module, exports) {\r\n\r\n\t'use strict'\r\n\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t})\r\n\tvar location = {\r\n\t  href: 'game.js',\r\n\t  reload: function reload() {}\r\n\t}\r\n\r\n\texports.default = location\r\n\r\n/***/ })\r\n/******/ ])"],"sourceRoot":""}