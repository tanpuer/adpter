{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./iqiyi/adapter/Canvas.js","webpack:///./iqiyi/adapter/Element.js","webpack:///./iqiyi/adapter/EventTarget.js","webpack:///./iqiyi/adapter/HTMLElement.js","webpack:///./iqiyi/adapter/Image.js","webpack:///./iqiyi/adapter/Node.js","webpack:///./iqiyi/adapter/document.js","webpack:///./iqiyi/adapter/index.js","webpack:///./iqiyi/adapter/navigator.js","webpack:///./iqiyi/adapter/window.js","webpack:///./iqiyi/game.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/MeshDemo.js","webpack:///./src/libs/three.js"],"names":["Canvas","width","height","canvas","Cube","createCanvas","type","__proto__","HTMLElement","Element","className","children","Node","_events","WeakMap","EventTarget","set","listener","options","events","get","push","listeners","length","i","event","console","log","obtainWindowCanvas","gl","getContext","innerWidth","innerHeight","tagName","toUpperCase","childern","style","innerHTML","name","value","top","left","ret","parseInt","fontSize","Number","isNaN","Image","childNodes","node","copyNode","Object","create","assign","index","findIndex","child","splice","Document","namespaceURI","qualifiedName","createElement","document","windowKeys","keys","_window","defineProperty","global","window","navigator","language","appVersion","userAgent","onLine","geolocation","getCurrentPosition","watchPosition","clearWatch","addEventListener","getExtension","getOwnPropertyNames","forEach","val","idx","array","MeshDemo","THREE","scene","Scene","camera","PerspectiveCamera","ctx","antialias","renderer","WebGLRenderer","context","setClearColor","position","z","addLight","drawSphere","render","geometry","SphereGeometry","material","MeshBasicMaterial","color","sphere","Mesh","add","requestAnimationFrame","loop","addArrowOnSphere","facesLength","faces","face","arrow","ArrowHelper","normal","Vector3","ambientLight","AmbientLight","rotation","y","group","size","facialMaterial","x","cubeGeometry","CubeGeometry","cube","factory","exports","module","EPSILON","undefined","Math","pow","isInteger","isFinite","floor","sign","Function","prototype","toString","match","target","TypeError","output","arguments","source","nextKey","hasOwnProperty","call","EventDispatcher","_listeners","indexOf","hasEventListener","removeEventListener","listenerArray","dispatchEvent","slice","l","REVISION","MOUSE","LEFT","MIDDLE","RIGHT","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","_Math","DEG2RAD","PI","RAD2DEG","generateUUID","lut","d0","random","d1","d2","d3","uuid","clamp","min","max","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","lerp","t","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","LN2","floorPowerOfTwo","Vector2","defineProperties","isVector2","setScalar","scalar","setX","setY","setComponent","Error","getComponent","clone","constructor","copy","v","w","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","e","elements","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","dot","lengthSq","sqrt","manhattanLength","abs","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","offset","toArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","c","cos","sin","Matrix4","error","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","identity","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","setFromMatrixColumn","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","d","f","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","zero","one","q","compose","lookAt","eye","up","crossVectors","multiplyMatrices","premultiply","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","applyToBufferAttribute","count","getZ","applyMatrix4","setXYZ","determinant","transpose","tmp","setPosition","getInverse","throwOnDegenerate","t11","t12","t13","t14","det","msg","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","theta","makeRotationY","makeRotationZ","makeRotationAxis","axis","tx","ty","makeScale","makeShear","quaternion","_x","_y","_z","_w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","decompose","vector","matrix","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","right","bottom","near","far","makeOrthographic","h","p","Quaternion","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","len","tDir","onChangeCallback","setFromEuler","update","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","r","EPS","vFrom","vTo","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","onChange","callback","isVector3","setZ","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","project","projectionMatrix","matrixWorld","unproject","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","angleTo","acos","dz","setFromSpherical","sinPhiRadius","phi","radius","setFromCylindrical","setFromMatrixPosition","setFromMatrixScale","Matrix3","isMatrix3","setFromMatrix4","g","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","cx","cy","rotate","translate","textureId","Texture","image","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","isTexture","updateMatrix","toJSON","meta","isRootObject","textures","getDataURL","HTMLCanvasElement","createElementNS","ImageData","putImageData","drawImage","toDataURL","metadata","generator","wrap","images","url","dispose","transformUv","uv","Vector4","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","setSize","WebGLRenderTargetCube","activeCubeFace","activeMipMapLevel","isWebGLRenderTargetCube","DataTexture","data","isDataTexture","Box3","Infinity","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","setFromObject","object","expandByObject","box","isEmpty","getCenter","getSize","point","expandByVector","expandByScalar","scope","traverse","isGeometry","vertices","isBufferGeometry","attributes","updateMatrixWorld","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","closestPoint","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","v0","f0","f1","f2","testAxis","extents","triangleNormal","satForAxes","axes","j","p0","p1","p2","triangle","distanceToPoint","clampedPoint","getBoundingSphere","Sphere","intersect","union","xax","xay","xaz","xbx","xby","xbz","yax","yay","yaz","ybx","yby","ybz","zax","zay","zaz","zbx","zby","zbz","optionalCenter","maxRadiusSq","empty","radiusSum","deltaLengthSq","getBoundingBox","Plane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","direction","delta","denominator","start","intersectsLine","startSign","endSign","end","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","referencePoint","Frustum","p3","p4","p5","planes","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","boundingSphere","computeBoundingSphere","intersectsSprite","sprite","negRadius","distance","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_pars_maps","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","ShaderChunk","UniformsUtils","merge","uniforms","merged","u","uniforms_src","uniforms_dst","parameter_src","isColor","Array","isArray","ColorKeywords","Color","setRGB","setHex","setStyle","hex","setHSL","hue2rgb","handleAlpha","string","parseFloat","exec","components","charAt","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","hsl","addColors","color1","color2","UniformsLib","diffuse","opacity","map","uvTransform","alphaMap","specularmap","specularMap","envmap","envMap","flipEnvMap","reflectivity","refractionRatio","maxMipLevel","aomap","aoMap","aoMapIntensity","lightmap","lightMap","lightMapIntensity","emissivemap","emissiveMap","bumpmap","bumpMap","bumpScale","normalmap","normalMap","normalScale","displacementmap","displacementMap","displacementScale","displacementBias","roughnessmap","roughnessMap","metalnessmap","metalnessMap","gradientmap","gradientMap","fog","fogDensity","fogNear","fogFar","fogColor","lights","ambientLightColor","directionalLights","properties","shadow","shadowBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotShadowMap","spotShadowMatrix","pointLights","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ShaderLib","basic","vertexShader","fragmentShader","lambert","emissive","phong","specular","shininess","standard","roughness","metalness","envMapIntensity","dashed","dashSize","totalSize","depth","tCube","tFlip","equirect","tEquirect","distanceRGBA","referencePosition","nearDistance","farDistance","physical","clearCoat","clearCoatRoughness","WebGLAnimation","isAnimating","animationLoop","onAnimationFrame","time","frame","stop","setAnimationLoop","setContext","WebGLAttributes","buffers","createBuffer","bufferType","usage","dynamic","DYNAMIC_DRAW","STATIC_DRAW","buffer","bindBuffer","bufferData","onUploadCallback","FLOAT","Float32Array","Float64Array","Uint16Array","UNSIGNED_SHORT","Int16Array","SHORT","Uint32Array","UNSIGNED_INT","Int32Array","INT","Int8Array","BYTE","Uint8Array","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","updateRange","bufferSubData","subarray","isInterleavedBufferAttribute","remove","deleteBuffer","delete","Euler","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","enable","toggle","disable","test","layers","object3DId","Object3D","parent","DefaultUp","onRotationChange","onQuaternionChange","enumerable","modelViewMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","q1","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","isCamera","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverseVisible","traverseAncestors","force","geometries","materials","shapes","JSON","stringify","serialize","library","element","parameters","shape","uuids","extractFromCache","cache","values","key","recursive","parse","Camera","matrixWorldInverse","OrthographicCamera","zoom","view","updateProjectionMatrix","isOrthographicCamera","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","zoomW","zoomH","scaleW","scaleH","Face3","materialIndex","vertexNormals","vertexColors","geometryId","Geometry","colors","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","jl","computeBoundingBox","obj","fromBufferGeometry","indices","positions","normals","uvs","uvs2","uv2","tempNormals","tempUVs","tempUVs2","addFace","groups","computeFaceNormals","cb","ab","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mesh","isMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","precision","faceIndicesToRemove","diff","sortFacesByMaterialIndex","_id","materialIndexSort","sort","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","k","kl","uvsCopy","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","BufferAttribute","itemSize","normalized","isBufferAttribute","setArray","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZW","onUpload","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float32BufferAttribute","Float64BufferAttribute","DirectGeometry","computeGroups","fromGeometry","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","arrayMax","bufferGeometryId","BufferGeometry","morphAttributes","drawRange","getIndex","setIndex","addAttribute","getAttribute","removeAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","isPoints","isLine","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","pA","pB","pC","normalizeNormals","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","toNonIndexed","geometry2","array2","morphAttribute","BoxGeometry","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","materialId","Material","blending","side","flatShading","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","overdraw","isMaterial","onBeforeCompile","setValues","newValue","currentValue","isRoot","emissiveIntensity","sizeAttenuation","linewidth","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","srcPlanes","dstPlanes","combine","isMeshBasicMaterial","ShaderMaterial","defines","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","Ray","origin","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","Line3","distanceSq","closestPointToPointParameter","startP","startEnd","clampToLine","startEnd2","startEnd_startP","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","getArea","getMidpoint","getPlane","edgeList","projectedPoint","minDistance","drawMode","updateMorphTargets","setDrawMode","morphTargetInfluences","morphTargetDictionary","ml","String","inverseMatrix","tempA","tempB","tempC","uvA","uvB","uvC","barycoord","intersectionPoint","intersectionPointWorld","uvIntersection","uv1","uv3","checkIntersection","raycaster","checkBufferGeometryIntersection","intersection","intersects","faceIndex","fvA","fvB","fvC","isMultiMaterial","faceMaterial","morphInfluences","tl","influence","targets","uvs_f","WebGLBackground","state","objects","clearColor","clearAlpha","planeCamera","planeMesh","boxMesh","renderList","forceClear","background","setClear","autoClear","clear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","renderBufferDirect","getClearColor","getClearAlpha","setClearAlpha","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","extension","drawArraysInstancedANGLE","maxInstancedCount","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","maxPrecision","logarithmicDepthBuffer","maxTextures","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","floatVertexTextures","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","numPlanes","numIntersection","init","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLExtensions","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","geometryAttributes","ELEMENT_ARRAY_BUFFER","ARRAY_BUFFER","getWireframeAttribute","geometryIndex","WebGLIndexedBufferRenderer","drawElements","drawElementsInstancedANGLE","WebGLInfo","calls","triangles","lines","instanceCount","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","LINES","LINE_STRIP","LINE_LOOP","POINTS","reset","programs","autoReset","absNumericalSort","WebGLMorphtargets","influencesList","program","objectInfluences","influences","getUniforms","setValue","WebGLObjects","updateList","CubeTexture","emptyTexture","emptyCubeTexture","UniformContainer","seq","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocTextureUnit","setValue1f","uniform1f","addr","setValue1i","uniform1i","setValue2fv","uniform2f","uniform2fv","setValue3fv","uniform3f","uniform3fv","setValue4fv","uniform4f","uniform4fv","setValue2fm","uniformMatrix2fv","setValue3fm","uniformMatrix3fv","setValue4fm","uniformMatrix4fv","setValueT1","unit","setTexture2D","setValueT6","setTextureCube","setValue2iv","uniform2iv","setValue3iv","uniform3iv","setValue4iv","uniform4iv","getSingularSetter","setValue1fv","uniform1fv","setValue1iv","uniform1iv","setValueV2a","updateCache","setValueV3a","setValueV4a","setValueM2a","setValueM3a","setValueM4a","setValueT1a","units","setValueT6a","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","StructuredUniform","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","addLineNumbers","split","join","WebGLShader","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","programIdCount","getEncodingComponents","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMapping","toneMappingName","generateExtensions","rendererExtensions","chunks","envMapCubeUV","filter","filterEmptyLine","generateDefines","fetchAttributeLocations","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","parseIncludes","pattern","include","unrollLoops","snippet","unroll","WebGLProgram","code","shadowMapTypeDefine","shadowMapType","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","isRawShaderMaterial","supportsVertexTextures","maxBones","useFog","fogExp","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","outputEncoding","mapEncoding","envMapEncoding","emissiveMapEncoding","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","programLog","getProgramInfoLog","trim","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","cachedUniforms","cachedAttributes","getAttributes","destroy","deleteProgram","usedTimes","WebGLPrograms","capabilities","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","parameterNames","allocateBones","skeleton","bones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","gammaOverrideLinear","getParameters","shadows","nClipPlanes","nClipIntersection","shaderID","isSkinnedMesh","currentRenderTarget","getRenderTarget","gammaOutput","gammaInput","envMapMode","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCode","acquireProgram","pl","programInfo","releaseProgram","pop","WebGLProperties","painterSortStable","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","renderItem","WebGLRenderLists","lists","list","UniformsCache","light","halfWidth","halfHeight","WebGLLights","ambient","vector3","matrix42","setup","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","intensity","isAmbientLight","isDirectionalLight","bias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","spritesArray","pushLight","pushShadow","shadowLight","pushSprite","setupLights","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","WebGLShadowMap","_renderer","_objects","_frustum","_projScreenMatrix","_shadowMapSize","_maxShadowMapSize","_lookTarget","_lightPositionWorld","_MorphingFlag","_SkinningFlag","_NumberOfMaterialVariants","_depthMaterials","_distanceMaterials","_materialCache","cubeDirections","cubeUps","cube2DViewPorts","useMorphing","useSkinning","depthMaterial","distanceMaterial","autoUpdate","_gl","_state","BLEND","setTest","setScissorTest","faceCount","shadowCamera","vpWidth","vpHeight","pars","isSpotLightShadow","shadowMatrix","setRenderTarget","vpDimensions","renderObject","getDepthMaterial","lightPositionWorld","result","materialVariants","customMaterial","customDepthMaterial","customDistanceMaterial","variantIndex","keyA","keyB","materialsForVariant","cachedMaterial","groupMaterial","CanvasTexture","isCanvasTexture","WebGLSpriteRenderer","vertexBuffer","elementBuffer","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fogDepth","fillStyle","fillRect","sprites","useProgram","initAttributes","enableAttribute","disableUnusedAttributes","CULL_FACE","vertexAttribPointer","activeTexture","TEXTURE0","oldFogType","sceneFogType","isFog","density","setBlending","setMask","WebGLState","utils","ColorBuffer","locked","currentColorMask","currentColorClear","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","colorBuffer","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","compressedTextureFormats","currentProgram","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","setFlipSided","setCullFace","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","vertexAttribDivisorANGLE","disableVertexAttribArray","getCompressedTextureFormats","formats","COMPRESSED_TEXTURE_FORMATS","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","ONE","blendFunc","SRC_ALPHA","ZERO","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","SRC_COLOR","convert","setMaterial","frontFaceCW","setPolygonOffset","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","setLineWidth","lineWidth","factor","POLYGON_OFFSET_FILL","SCISSOR_TEST","webglSlot","webglType","webglTexture","boundTexture","compressedTexImage2D","apply","WebGLTextures","_isWebGL2","WebGL2RenderingContext","_videoTextures","_canvas","clampToMaxSize","maxSize","makePowerOfTwo","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","generateMipmap","textureProperties","__maxMipLevel","LOG2E","filterFallback","LINEAR","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTarget","deallocateRenderTarget","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","slot","updateVideoTexture","__version","complete","uploadTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isCompressedTexture","cubeImage","isPowerOfTwoImage","glFormat","glType","setTextureParameters","mipmap","setTextureCubeDynamic","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","CLAMP_TO_EDGE","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","isDepthTexture","internalFormat","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","bindRenderbuffer","RENDERBUFFER","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","RGBA4","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","isTargetPowerOfTwo","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","WebGLUtils","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","RGB","LUMINANCE","LUMINANCE_ALPHA","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","MIN_EXT","MAX_EXT","UNSIGNED_INT_24_8_WEBGL","fov","aspect","focus","filmGauge","filmOffset","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","skew","ArrayCamera","cameras","isArrayCamera","WebVRManager","device","frameData","poseTarget","standingMatrix","standingMatrixInverse","VRFrameData","onVRDisplayPresentChange","tempQuaternion","tempPosition","cameraL","bounds","cameraR","cameraVR","isPresenting","currentSize","currentPixelRatio","eyeParameters","getEyeParameters","renderWidth","renderHeight","getPixelRatio","setDrawingBufferSize","animation","userHeight","getDevice","setDevice","setPoseTarget","getCamera","depthNear","depthFar","getFrameData","stageParameters","sittingToStandingTransform","pose","poseObject","orientation","leftViewMatrix","rightViewMatrix","leftProjectionMatrix","rightProjectionMatrix","getLayers","layer","leftBounds","rightBounds","getStandingMatrix","submitFrame","WebXRManager","session","frameOfRef","setCompatibleXRDevice","setSession","setFramebuffer","baseLayer","XRWebGLLayer","requestFrameOfReference","frameOfReferenceType","then","updateCamera","onAnimationFrameCallback","getDevicePose","views","getViewport","getViewMatrix","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","currentRenderList","currentRenderState","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","_this","_isContextLost","_framebuffer","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_usedTextureUnits","_width","_height","_pixelRatio","_viewport","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_vector3","getTargetPixelRatio","contextAttributes","onContextLost","onContextRestore","message","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","spriteRenderer","initGLContext","vr","getContextAttributes","forceContextLoss","loseContext","forceContextRestore","restoreContext","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","pixelRatio","getCurrentViewport","setScissor","boolean","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearTarget","preventDefault","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","isMeshPhongMaterial","isMeshStandardMaterial","isMeshNormalMaterial","normalArray","nx","ny","nz","uvArray","colorArray","setProgram","geometryProgram","updateBuffers","rangeFactor","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isInstancedBufferGeometry","materialDefaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","compile","isLight","initMaterial","projectObject","opaqueObjects","transparentObjects","overrideMaterial","renderObjects","isSprite","isImmediateRenderObject","camera2","materialProperties","programChange","lightsHash","numSupportedMorphTargets","numSupportedMorphNormals","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isMeshLambertMaterial","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","refreshUniformsDepth","refreshUniformsDistance","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isShadowMaterial","ltc_1","LTC_1","ltc_2","LTC_2","uvScaleMap","textureUnit","warned","setTexture","readRenderTargetPixels","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","FogExp2","Fog","SpriteMaterial","isSpriteMaterial","Sprite","intersectPoint","worldPosition","worldScale","guessSizeSq","LOD","levels","addLevel","getObjectForDistance","matrixPosition","Skeleton","boneInverses","calculateInverses","bone","isBone","offsetMatrix","identityMatrix","getBoneByName","Bone","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","initBones","bind","normalizeSkinWeights","gbone","pos","rotq","scl","sw","vec","skinWeight","linecap","linejoin","Line","LineSegments","computeLineDistances","positionAttribute","linePrecision","precisionSq","vStart","vEnd","interSegment","interRay","step","distSq","nbVertices","LineLoop","Points","threshold","params","localThreshold","localThresholdSq","testPoint","rayPointDistanceSq","distanceToRay","Group","isGroup","VideoTexture","video","readyState","HAVE_CURRENT_DATA","CompressedTexture","DepthTexture","WireframeGeometry","o","ol","edge","edges","ParametricGeometry","func","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","PolyhedronGeometry","detail","PolyhedronBufferGeometry","uvBuffer","subdivide","appplyRadius","generateUVs","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","azi","correctUV","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","closed","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","frames","computeFrenetFrames","P","generateBufferData","generateSegment","generateIndices","getPointAt","N","B","TorusKnotGeometry","tube","heightScale","TorusKnotBufferGeometry","P1","P2","T","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","invSize","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","prev","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","nextZ","prevZ","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q2","inside","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","ahole","hl","shapePoints","extractPoints","reverse","concat","scalePt2","pt","bs","vert","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","buildLidFaces","buildSideFaces","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","text","TextBufferGeometry","font","isFont","generateShapes","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","segment","radiusStep","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","base","inverseSegments","n1","n2","ShapeGeometry","ShapeBufferGeometry","toJSON$1","shapeHole","indexOffset","shapeVertices","shapeHoles","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","Geometries","freeze","RawShaderMaterial","Materials","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","transform","DefaultLoadingManager","loading","FileLoader","manager","load","cached","setTimeout","dataUriRegex","dataUriRegexResult","mimeType","isBase64","decodeURIComponent","atob","response","responseType","toLowerCase","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","open","callbacks","status","withCredentials","overrideMimeType","header","requestHeader","setRequestHeader","send","setPath","setResponseType","setWithCredentials","setMimeType","CompressedTextureLoader","_parser","loader","loadTexture","texDatas","loaded","mipmapCount","isCubemap","DataTextureLoader","texData","ImageLoader","crossOrigin","onImageLoad","onImageError","substr","src","setCrossOrigin","CubeTextureLoader","urls","TextureLoader","isJPEG","search","Curve","arcLengthDivisions","getPoint","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","t2","pt1","pt2","getTangentAt","mat","MAX_VALUE","tz","fromJSON","json","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","weight","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","tangent","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","lens","cacheLengths","sums","resolution","Path","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","absarc","absellipse","ellipse","firstPoint","lastPoint","Shape","getPointsHoles","holesPts","Light","HemisphereLight","LightShadow","SpotLightShadow","SpotLight","power","PointLight","DirectionalLightShadow","DirectionalLight","RectAreaLight","StringKeyframeTrack","times","interpolation","KeyframeTrack","ValueTypeName","ValueBufferType","DefaultInterpolation","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","BooleanKeyframeTrack","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","evaluate","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","QuaternionLinearInterpolant","QuaternionKeyframeTrack","getValueSize","ColorKeyframeTrack","NumberKeyframeTrack","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","TimeBufferType","setInterpolation","validate","optimize","trackType","_getTrackTypeForValueTypeName","track","getInterpolation","typeName","VectorKeyframeTrack","InterpolantFactoryMethodDiscrete","factoryMethod","createInterpolant","shift","timeOffset","timeScale","startTime","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","AnimationClip","duration","tracks","resetDuration","jsonTracks","frameTime","fps","clip","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","MaterialLoader","setTextures","getTexture","shading","BufferGeometryLoader","typedArray","TYPED_ARRAYS","drawcalls","offsets","Loader","Handlers","handlers","regex","onLoadStart","onLoadProgress","onLoadComplete","initMaterials","texturePath","createMaterial","BlendingMode","textureLoader","materialLoader","fullPath","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapEmissiveRepeat","mapEmissiveOffset","mapEmissiveWrap","mapEmissiveAnisotropy","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapMetalnessRepeat","mapMetalnessOffset","mapMetalnessWrap","mapMetalnessAnisotropy","mapRoughnessRepeat","mapRoughnessOffset","mapRoughnessWrap","mapRoughnessAnisotropy","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","escape","extractUrlBase","lastIndexOf","JSONLoader","setTexturePath","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","parseMorphing","dstVertices","srcVertices","morphColors","parseAnimations","outputAnimations","morphAnimationClips","ObjectLoader","substring","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","details","geometryShapes","loadImage","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","ImageBitmapLoader","createImageBitmap","fetch","setOptions","res","blob","imageBitmap","catch","ShapePath","subPaths","currentPath","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Font","paths","createPaths","chars","line_height","yMax","yMin","underlineThickness","char","createPath","glyph","glyphs","cpx","cpy","cpx1","cpy1","cpx2","cpy2","outline","_cachedOutline","action","ha","FontLoader","AudioContext","webkitAudioContext","AudioLoader","decodeAudioData","audioBuffer","StereoCamera","eyeSep","instance","eyeRight","eyeLeft","eyeSepOnProjection","ymax","xmin","xmax","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","AudioListener","gain","createGain","connect","destination","getInput","removeFilter","disconnect","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","setValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","Audio","autoplay","playbackRate","isPlaying","hasPlaybackControl","sourceType","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setBuffer","play","createBufferSource","onended","onEnded","pause","getFilters","setFilters","setPlaybackRate","getPlaybackRate","getLoop","setLoop","getVolume","setVolume","PositionalAudio","panner","createPanner","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","PropertyMixer","binding","mixFunction","_slerp","_select","_lerp","_mixBufferRegion","cumulativeWeight","useCount","referenceCount","accumulate","accuIndex","currentWeight","mix","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","RESERVED_CHARS_RE","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","findNode","nodeName","root","isAnimationObjectGroup","sanitizeNodeName","reservedRe","RegExp","wordChar","wordCharOrDot","directoryRe","nodeRe","objectRe","propertyRe","trackRe","supportedObjectNames","matches","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","getValue_direct","getValue_array","resolvedProperty","getValue_arrayElement","getValue_toArray","SetterByBindingTypeAndVersioning","setValue_direct","targetObject","setValue_direct_setNeedsUpdate","setValue_direct_setMatrixWorldNeedsUpdate","setValue_array","dest","setValue_array_setNeedsUpdate","setValue_array_setMatrixWorldNeedsUpdate","setValue_arrayElement","setValue_arrayElement_setNeedsUpdate","setValue_arrayElement_setMatrixWorldNeedsUpdate","setValue_fromArray","setValue_fromArray_setNeedsUpdate","setValue_fromArray_setMatrixWorldNeedsUpdate","getValue_unbound","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","total","inUse","bindingsPerObject","nObjects","nCachedObjects","indicesByUUID","parsedPaths","nBindings","knownObject","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","interpolant","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","_setEndings","handle_stop","pingPong","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","remove_empty_map","_","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedBufferGeometry","InterleavedBufferAttribute","interleavedBuffer","InterleavedBuffer","isInterleavedBuffer","InstancedInterleavedBuffer","InstancedBufferAttribute","Raycaster","PointCloud","ascSort","intersectObject","setFromCamera","coords","intersectObjects","Clock","autoStart","oldTime","elapsedTime","running","performance","Date","getElapsedTime","getDelta","newTime","Spherical","other","makeSafe","vec3","Cylindrical","Box2","ImmediateRenderObject","VertexNormalsHelper","nNormals","objGeometry","objPos","objNorm","SpotLightHelper","cone","coneLength","coneWidth","getBoneList","boneList","SkeletonHelper","boneMatrix","matrixWorldInv","PointLightHelper","sphereSize","RectAreaLightHelper","HemisphereLightHelper","GridHelper","PolarGridHelper","radials","circles","FaceNormalsHelper","DirectionalLightHelper","lightPlane","targetLine","CameraHelper","pointMap","colorFrustum","colorCone","colorUp","colorTarget","colorCross","addLine","addPoint","setPoint","BoxHelper","Box3Helper","PlaneHelper","positions2","lineGeometry","coneGeometry","headLength","headWidth","setDirection","setColor","AxesHelper","Face4","LineStrip","LinePieces","MeshFaceMaterial","MultiMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","ClosedSplineCurve3","SplineCurve3","Spline","initFromArray","getControlPointsArray","reparametrizeByArcLength","AxisHelper","BoundingBoxHelper","EdgesHelper","setColors","WireframeHelper","XHRLoader","BinaryTextureLoader","isIntersectionBox","isIntersectionSphere","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBuffer","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","copyIndicesArray","addIndex","addDrawCall","clearDrawCalls","computeOffsets","getArrays","addShapeList","wrapAround","wrapRGB","metal","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","shadowMapCullFace","renderReverseSided","renderSingleSided","standing","audioLoader","getData","updateCubeMap","GeometryUtils","geometry1","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","Projector","projectVector","unprojectVector","pickingRay","CanvasRenderer","SceneUtils","createMultiMaterialObject","detach","attach","LensFlare"],"mappings":"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","file":"iqiyi/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./iqiyi/game.js\");\n","import HTMLElement from './HTMLElement';\r\nimport _window from './window';\r\n\r\n\r\nexport default function Canvas(width,height) {\r\n    const canvas = Cube.createCanvas(width,height);\r\n    canvas.type = \"canvas\";\r\n    canvas.__proto__.__proto__ = new HTMLElement('canvas');\r\n    return canvas;\r\n}","import Node from './Node';\r\n\r\nexport default class Element extends Node {\r\n\r\n\r\n    constructor() {\r\n        super();\r\n        this.className = '';\r\n        this.children = [];\r\n    }\r\n}\r\n","const _events = new WeakMap();\r\n\r\nexport default class EventTarget {\r\n\r\n    constructor(){\r\n        _events.set(this,{});\r\n    }\r\n\r\n    addEventListener(type,listener,options={}){\r\n        let events = _events.get(this);\r\n        if (!events){\r\n            events = {};\r\n            _events.set(this, events);\r\n        }\r\n        if (!events[type]) {\r\n            events[type] = [];\r\n        }\r\n        events[type].push(listener);\r\n    }\r\n\r\n    removeEventListener(type,listener){\r\n        let listeners = _events.get(this)[type];\r\n        if (listeners && listeners.length){\r\n            for (let i = 0; i < listeners.length; i++) {\r\n                if (listeners[i] === listener){\r\n                    listeners[i] = ()=>{};\r\n                }\r\n            }\r\n        } \r\n    }\r\n\r\n    dispatchEvent(event){\r\n        if (event.type) {\r\n            let listeners = _events.get(type);\r\n            if (listeners && listeners.length) {\r\n                for (let i = 0; i < listeners.length(); i++){\r\n                    listeners[i](event);\r\n                }\r\n            }\r\n        }\r\n        console.log(\"dispatchEvent must have type!\");\r\n    }\r\n\r\n}","import Element from './Element'\r\n\r\nconst canvas = Cube.obtainWindowCanvas();\r\nconst gl = canvas.getContext('webgl');\r\nconst innerWidth = gl.canvas.width;\r\nconst innerHeight = gl.canvas.height;\r\n\r\nexport default class HTMLElement extends Element {\r\n\r\n    constructor(tagName = '') {\r\n        super();\r\n        this.tagName = tagName.toUpperCase();\r\n        this.className= '';\r\n        this.childern= [];\r\n        this.style={\r\n            width: `${innerWidth}px`,\r\n            height: `${innerHeight}px`\r\n        };\r\n        this.innerHTML = '';\r\n    }\r\n\r\n    setAttribute(name, value) {\r\n        this[name] = value;\r\n    }\r\n\r\n    getAttribute(name) {\r\n        return this[name];\r\n    }\r\n\r\n    get clientWidth() {\r\n        const ret = parseInt(this.style.fontSize, 10) * this.innerHTML.length;\r\n\r\n        return Number.isNaN(ret) ? 0 : ret\r\n    }\r\n\r\n    get clientHeight() {\r\n        const ret = parseInt(this.style.fontSize, 10);\r\n\r\n        return Number.isNaN(ret) ? 0 : ret\r\n    }\r\n\r\n    getBoundingClientRect() {\r\n        return {\r\n            top: 0,\r\n            left: 0,\r\n            width: innerWidth,\r\n            height: innerHeight\r\n        }\r\n    }\r\n\r\n    focus() {\r\n\r\n    }\r\n}\r\n","export default function Image() {\r\n    return new Image();\r\n}","import EventTarget from './EventTarget';\r\n\r\nexport default class Node extends EventTarget{\r\n\r\n    constructor(){\r\n        super();\r\n        this.childNodes = [];\r\n    }\r\n\r\n    appendChild(node){\r\n        if (node instanceof Node){\r\n            this.childNodes.push(node);\r\n        }\r\n    }\r\n\r\n    cloneNode() {\r\n        const copyNode = Object.create(this);\r\n        Object.assign(copyNode, this);\r\n        return copyNode;\r\n    }\r\n\r\n    removeChild(node) {\r\n        const index = this.childNodes.findIndex((child) => child === node);\r\n        if (index > -1) {\r\n            return this.childNodes.splice(index, 1);\r\n        }\r\n        return null\r\n    }\r\n\r\n}","import Canvas from './Canvas';\r\nimport Image from './Image';\r\nimport HTMLElement from './HTMLElement'\r\n\r\nclass Document extends HTMLElement{\r\n\r\n    constructor(){\r\n        super();\r\n    }\r\n\r\n    createElement(tagName){\r\n        if (tagName === \"canvas\"){\r\n            return new Canvas();\r\n        } else if (tagName === \"img\") {\r\n            return new Image();\r\n        }\r\n        return null;\r\n    }\r\n\r\n    createElementNS(namespaceURI, qualifiedName, options={}){\r\n        return this.createElement(qualifiedName);\r\n    }\r\n}\r\n\r\nconst document = new Document();\r\nexport default document;\r\n\r\n","import _window from './window';\r\n\r\n\r\n\r\nconsole.log(\"inject!!!\");\r\nlet windowKeys = Object.keys(_window);\r\nfor (let i=0;i<windowKeys.length;i++){\r\n    Object.defineProperty(global,windowKeys[i],{value:_window[windowKeys[i]]});\r\n    console.log(\"global add key: \" + windowKeys[i]);\r\n    console.log(\"global add value: \",_window[windowKeys[i]]);\r\n}\r\n\r\nglobal.window = _window;\r\n\r\n\r\nconsole.log(\"window injected\");\r\n","\r\nconst navigator = {\r\n    language: 'zh-cn',\r\n    appVersion: '5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1',\r\n    userAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN',\r\n    onLine: true,\r\n\r\n    // TODO\r\n    geolocation: {\r\n        getCurrentPosition: ()=>{},\r\n        watchPosition: ()=>{},\r\n        clearWatch: ()=>{}\r\n    }\r\n};\r\n\r\nexport default navigator","import Canvas from \"./Canvas\";\r\nimport Image from \"./Image\";\r\nimport document from './document';\r\nimport navigator from './navigator';\r\nimport HTMLElement from './HTMLElement'\r\n\r\n\r\n//canvas\r\nconst canvas = Cube.obtainWindowCanvas();\r\ncanvas.__proto__.__proto__ = new HTMLElement('canvas');\r\n\r\nconst gl = canvas.getContext('webgl');\r\nconst innerWidth = gl.canvas.width;\r\nconst innerHeight = gl.canvas.height;\r\n\r\ncanvas.addEventListener = function(){};\r\ngl.getExtension = function(){};\r\n\r\nconsole.log(\"gl properties\");\r\nObject.getOwnPropertyNames(gl).forEach((val,idx,array)=>{\r\n    console.log(gl[val]);\r\n});\r\n\r\nconst _window = {\r\n    Canvas:Canvas,\r\n    Image: Image,\r\n    canvas: canvas,\r\n    gl:gl,\r\n    innerWidth:innerWidth,\r\n    innerHeight:innerHeight,\r\n    document:document,\r\n    navigator:navigator,\r\n    addEventListener:()=>{},\r\n};\r\n\r\nexport default _window;\r\n\r\n","import './adapter/index';\r\n\r\n// import JumpDemo from '../src/JumpDemo';\r\n// new JumpDemo();\r\n\r\nimport MeshDemo from '../src/MeshDemo';\r\nnew MeshDemo();","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import * as THREE from './libs/three.js';\r\n\r\nexport default class MeshDemo {\r\n\r\n    constructor() {\r\n        this.scene = new THREE.Scene();\r\n        this.camera = new THREE.PerspectiveCamera(75, innerWidth / innerHeight, 0.1, 1000);\r\n        const ctx = canvas.getContext('webgl', { antialias: true });\r\n        this.renderer = new THREE.WebGLRenderer({ canvas: canvas, context: ctx });\r\n        this.renderer.setClearColor(\"#ffffff\");\r\n        this.camera.position.z = 5;\r\n\r\n        this.addLight();\r\n        this.drawSphere();\r\n        // this.addMeshFacialMaterial();\r\n        this.renderer.render(this.scene, this.camera);\r\n    }\r\n\r\n    drawSphere() {\r\n        let geometry = new THREE.SphereGeometry(0.6, 32, 32);\r\n        // let texture = new THREE.TextureLoader().load(\"res/moonmap.bmp\");\r\n        let material = new THREE.MeshBasicMaterial({color: \"#ffffff\" });\r\n        this.sphere = new THREE.Mesh(geometry, material);\r\n        this.scene.add(this.sphere);\r\n        this.renderer.render(this.scene, this.camera);\r\n        requestAnimationFrame(() => this.loop());\r\n        this.addArrowOnSphere();\r\n    }\r\n\r\n    addArrowOnSphere() {\r\n        const facesLength = this.sphere.geometry.faces.length;\r\n        for (let i = 0; i < facesLength; i += 10) {\r\n            let face = this.sphere.geometry.faces[i];\r\n            let arrow = new THREE.ArrowHelper(face.normal, new THREE.Vector3(0, 0, 0), 1.2, \"#ff0000\");\r\n            this.sphere.add(arrow);\r\n        }\r\n    }\r\n\r\n    addLight() {\r\n        let ambientLight = new THREE.AmbientLight(\"#ffffff\");\r\n        this.scene.add(ambientLight);\r\n    }\r\n\r\n    loop() {\r\n        this.renderer.render(this.scene, this.camera);\r\n        this.sphere.rotation.y += 0.02;\r\n        this.group.rotation.y += 0.02;\r\n        requestAnimationFrame(() => this.loop());\r\n    }\r\n\r\n    addMeshFacialMaterial() {\r\n        let group = new THREE.Mesh();\r\n        this.group = group;\r\n        const size = 0.29;\r\n        let facialMaterial = [\r\n            new THREE.MeshBasicMaterial({ color: 0x009e60 }),\r\n            new THREE.MeshBasicMaterial({ color: 0x0051ba }),\r\n            new THREE.MeshBasicMaterial({ color: 0xffd500 }),\r\n            new THREE.MeshBasicMaterial({ color: 0xC41E3A }),\r\n            new THREE.MeshBasicMaterial({ color: 0xff5800 }),\r\n            new THREE.MeshBasicMaterial({ color: 0xffffff })\r\n        ];\r\n        for (let x = -3; x < 3; x++) {\r\n            for (let y = -1.5; y < 3; y++) {\r\n                for (let z = -1.5; z < 3; z++) {\r\n                    let cubeGeometry = new THREE.CubeGeometry(size, size, size);\r\n                    let cube = new THREE.Mesh(cubeGeometry, facialMaterial);\r\n                    group.add(cube);\r\n                    cube.position.set(x, y, z)\r\n                }\r\n            }\r\n        }\r\n        this.scene.add(group);\r\n    }\r\n\r\n}","(function (global, factory) {\r\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\r\n        typeof define === 'function' && define.amd ? define(['exports'], factory) :\r\n            (factory((global.THREE = {})));\r\n}(this, (function (exports) { 'use strict';\r\n\r\n    // Polyfills\r\n\r\n    if ( Number.EPSILON === undefined ) {\r\n\r\n        Number.EPSILON = Math.pow( 2, - 52 );\r\n\r\n    }\r\n\r\n    if ( Number.isInteger === undefined ) {\r\n\r\n        // Missing in IE\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\r\n\r\n        Number.isInteger = function ( value ) {\r\n\r\n            return typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    //\r\n\r\n    if ( Math.sign === undefined ) {\r\n\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n        Math.sign = function ( x ) {\r\n\r\n            return ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    if ( 'name' in Function.prototype === false ) {\r\n\r\n        // Missing in IE\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n        Object.defineProperty( Function.prototype, 'name', {\r\n\r\n            get: function () {\r\n\r\n                return this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\r\n\r\n            }\r\n\r\n        } );\r\n\r\n    }\r\n\r\n    if ( Object.assign === undefined ) {\r\n\r\n        // Missing in IE\r\n        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\r\n\r\n        ( function () {\r\n\r\n            Object.assign = function ( target ) {\r\n\r\n                if ( target === undefined || target === null ) {\r\n\r\n                    throw new TypeError( 'Cannot convert undefined or null to object' );\r\n\r\n                }\r\n\r\n                var output = Object( target );\r\n\r\n                for ( var index = 1; index < arguments.length; index ++ ) {\r\n\r\n                    var source = arguments[ index ];\r\n\r\n                    if ( source !== undefined && source !== null ) {\r\n\r\n                        for ( var nextKey in source ) {\r\n\r\n                            if ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\r\n\r\n                                output[ nextKey ] = source[ nextKey ];\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return output;\r\n\r\n            };\r\n\r\n        } )();\r\n\r\n    }\r\n\r\n    /**\r\n     * https://github.com/mrdoob/eventdispatcher.js/\r\n     */\r\n\r\n    function EventDispatcher() {}\r\n\r\n    Object.assign( EventDispatcher.prototype, {\r\n\r\n        addEventListener: function ( type, listener ) {\r\n\r\n            if ( this._listeners === undefined ) this._listeners = {};\r\n\r\n            var listeners = this._listeners;\r\n\r\n            if ( listeners[ type ] === undefined ) {\r\n\r\n                listeners[ type ] = [];\r\n\r\n            }\r\n\r\n            if ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n                listeners[ type ].push( listener );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        hasEventListener: function ( type, listener ) {\r\n\r\n            if ( this._listeners === undefined ) return false;\r\n\r\n            var listeners = this._listeners;\r\n\r\n            return listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\r\n\r\n        },\r\n\r\n        removeEventListener: function ( type, listener ) {\r\n\r\n            if ( this._listeners === undefined ) return;\r\n\r\n            var listeners = this._listeners;\r\n            var listenerArray = listeners[ type ];\r\n\r\n            if ( listenerArray !== undefined ) {\r\n\r\n                var index = listenerArray.indexOf( listener );\r\n\r\n                if ( index !== - 1 ) {\r\n\r\n                    listenerArray.splice( index, 1 );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        dispatchEvent: function ( event ) {\r\n\r\n            if ( this._listeners === undefined ) return;\r\n\r\n            var listeners = this._listeners;\r\n            var listenerArray = listeners[ event.type ];\r\n\r\n            if ( listenerArray !== undefined ) {\r\n\r\n                event.target = this;\r\n\r\n                var array = listenerArray.slice( 0 );\r\n\r\n                for ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n                    array[ i ].call( this, event );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var REVISION = '93';\r\n    var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n    var CullFaceNone = 0;\r\n    var CullFaceBack = 1;\r\n    var CullFaceFront = 2;\r\n    var CullFaceFrontBack = 3;\r\n    var FrontFaceDirectionCW = 0;\r\n    var FrontFaceDirectionCCW = 1;\r\n    var BasicShadowMap = 0;\r\n    var PCFShadowMap = 1;\r\n    var PCFSoftShadowMap = 2;\r\n    var FrontSide = 0;\r\n    var BackSide = 1;\r\n    var DoubleSide = 2;\r\n    var FlatShading = 1;\r\n    var SmoothShading = 2;\r\n    var NoColors = 0;\r\n    var FaceColors = 1;\r\n    var VertexColors = 2;\r\n    var NoBlending = 0;\r\n    var NormalBlending = 1;\r\n    var AdditiveBlending = 2;\r\n    var SubtractiveBlending = 3;\r\n    var MultiplyBlending = 4;\r\n    var CustomBlending = 5;\r\n    var AddEquation = 100;\r\n    var SubtractEquation = 101;\r\n    var ReverseSubtractEquation = 102;\r\n    var MinEquation = 103;\r\n    var MaxEquation = 104;\r\n    var ZeroFactor = 200;\r\n    var OneFactor = 201;\r\n    var SrcColorFactor = 202;\r\n    var OneMinusSrcColorFactor = 203;\r\n    var SrcAlphaFactor = 204;\r\n    var OneMinusSrcAlphaFactor = 205;\r\n    var DstAlphaFactor = 206;\r\n    var OneMinusDstAlphaFactor = 207;\r\n    var DstColorFactor = 208;\r\n    var OneMinusDstColorFactor = 209;\r\n    var SrcAlphaSaturateFactor = 210;\r\n    var NeverDepth = 0;\r\n    var AlwaysDepth = 1;\r\n    var LessDepth = 2;\r\n    var LessEqualDepth = 3;\r\n    var EqualDepth = 4;\r\n    var GreaterEqualDepth = 5;\r\n    var GreaterDepth = 6;\r\n    var NotEqualDepth = 7;\r\n    var MultiplyOperation = 0;\r\n    var MixOperation = 1;\r\n    var AddOperation = 2;\r\n    var NoToneMapping = 0;\r\n    var LinearToneMapping = 1;\r\n    var ReinhardToneMapping = 2;\r\n    var Uncharted2ToneMapping = 3;\r\n    var CineonToneMapping = 4;\r\n    var UVMapping = 300;\r\n    var CubeReflectionMapping = 301;\r\n    var CubeRefractionMapping = 302;\r\n    var EquirectangularReflectionMapping = 303;\r\n    var EquirectangularRefractionMapping = 304;\r\n    var SphericalReflectionMapping = 305;\r\n    var CubeUVReflectionMapping = 306;\r\n    var CubeUVRefractionMapping = 307;\r\n    var RepeatWrapping = 1000;\r\n    var ClampToEdgeWrapping = 1001;\r\n    var MirroredRepeatWrapping = 1002;\r\n    var NearestFilter = 1003;\r\n    var NearestMipMapNearestFilter = 1004;\r\n    var NearestMipMapLinearFilter = 1005;\r\n    var LinearFilter = 1006;\r\n    var LinearMipMapNearestFilter = 1007;\r\n    var LinearMipMapLinearFilter = 1008;\r\n    var UnsignedByteType = 1009;\r\n    var ByteType = 1010;\r\n    var ShortType = 1011;\r\n    var UnsignedShortType = 1012;\r\n    var IntType = 1013;\r\n    var UnsignedIntType = 1014;\r\n    var FloatType = 1015;\r\n    var HalfFloatType = 1016;\r\n    var UnsignedShort4444Type = 1017;\r\n    var UnsignedShort5551Type = 1018;\r\n    var UnsignedShort565Type = 1019;\r\n    var UnsignedInt248Type = 1020;\r\n    var AlphaFormat = 1021;\r\n    var RGBFormat = 1022;\r\n    var RGBAFormat = 1023;\r\n    var LuminanceFormat = 1024;\r\n    var LuminanceAlphaFormat = 1025;\r\n    var RGBEFormat = RGBAFormat;\r\n    var DepthFormat = 1026;\r\n    var DepthStencilFormat = 1027;\r\n    var RGB_S3TC_DXT1_Format = 33776;\r\n    var RGBA_S3TC_DXT1_Format = 33777;\r\n    var RGBA_S3TC_DXT3_Format = 33778;\r\n    var RGBA_S3TC_DXT5_Format = 33779;\r\n    var RGB_PVRTC_4BPPV1_Format = 35840;\r\n    var RGB_PVRTC_2BPPV1_Format = 35841;\r\n    var RGBA_PVRTC_4BPPV1_Format = 35842;\r\n    var RGBA_PVRTC_2BPPV1_Format = 35843;\r\n    var RGB_ETC1_Format = 36196;\r\n    var RGBA_ASTC_4x4_Format = 37808;\r\n    var RGBA_ASTC_5x4_Format = 37809;\r\n    var RGBA_ASTC_5x5_Format = 37810;\r\n    var RGBA_ASTC_6x5_Format = 37811;\r\n    var RGBA_ASTC_6x6_Format = 37812;\r\n    var RGBA_ASTC_8x5_Format = 37813;\r\n    var RGBA_ASTC_8x6_Format = 37814;\r\n    var RGBA_ASTC_8x8_Format = 37815;\r\n    var RGBA_ASTC_10x5_Format = 37816;\r\n    var RGBA_ASTC_10x6_Format = 37817;\r\n    var RGBA_ASTC_10x8_Format = 37818;\r\n    var RGBA_ASTC_10x10_Format = 37819;\r\n    var RGBA_ASTC_12x10_Format = 37820;\r\n    var RGBA_ASTC_12x12_Format = 37821;\r\n    var LoopOnce = 2200;\r\n    var LoopRepeat = 2201;\r\n    var LoopPingPong = 2202;\r\n    var InterpolateDiscrete = 2300;\r\n    var InterpolateLinear = 2301;\r\n    var InterpolateSmooth = 2302;\r\n    var ZeroCurvatureEnding = 2400;\r\n    var ZeroSlopeEnding = 2401;\r\n    var WrapAroundEnding = 2402;\r\n    var TrianglesDrawMode = 0;\r\n    var TriangleStripDrawMode = 1;\r\n    var TriangleFanDrawMode = 2;\r\n    var LinearEncoding = 3000;\r\n    var sRGBEncoding = 3001;\r\n    var GammaEncoding = 3007;\r\n    var RGBEEncoding = 3002;\r\n    var LogLuvEncoding = 3003;\r\n    var RGBM7Encoding = 3004;\r\n    var RGBM16Encoding = 3005;\r\n    var RGBDEncoding = 3006;\r\n    var BasicDepthPacking = 3200;\r\n    var RGBADepthPacking = 3201;\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var _Math = {\r\n\r\n        DEG2RAD: Math.PI / 180,\r\n        RAD2DEG: 180 / Math.PI,\r\n\r\n        generateUUID: ( function () {\r\n\r\n            // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\r\n\r\n            var lut = [];\r\n\r\n            for ( var i = 0; i < 256; i ++ ) {\r\n\r\n                lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\r\n\r\n            }\r\n\r\n            return function generateUUID() {\r\n\r\n                var d0 = Math.random() * 0xffffffff | 0;\r\n                var d1 = Math.random() * 0xffffffff | 0;\r\n                var d2 = Math.random() * 0xffffffff | 0;\r\n                var d3 = Math.random() * 0xffffffff | 0;\r\n                var uuid = lut[ d0 & 0xff ] + lut[ d0 >> 8 & 0xff ] + lut[ d0 >> 16 & 0xff ] + lut[ d0 >> 24 & 0xff ] + '-' +\r\n                    lut[ d1 & 0xff ] + lut[ d1 >> 8 & 0xff ] + '-' + lut[ d1 >> 16 & 0x0f | 0x40 ] + lut[ d1 >> 24 & 0xff ] + '-' +\r\n                    lut[ d2 & 0x3f | 0x80 ] + lut[ d2 >> 8 & 0xff ] + '-' + lut[ d2 >> 16 & 0xff ] + lut[ d2 >> 24 & 0xff ] +\r\n                    lut[ d3 & 0xff ] + lut[ d3 >> 8 & 0xff ] + lut[ d3 >> 16 & 0xff ] + lut[ d3 >> 24 & 0xff ];\r\n\r\n                // .toUpperCase() here flattens concatenated strings to save heap memory space.\r\n                return uuid.toUpperCase();\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        clamp: function ( value, min, max ) {\r\n\r\n            return Math.max( min, Math.min( max, value ) );\r\n\r\n        },\r\n\r\n        // compute euclidian modulo of m % n\r\n        // https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n        euclideanModulo: function ( n, m ) {\r\n\r\n            return ( ( n % m ) + m ) % m;\r\n\r\n        },\r\n\r\n        // Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n        mapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n            return b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n        },\r\n\r\n        // https://en.wikipedia.org/wiki/Linear_interpolation\r\n\r\n        lerp: function ( x, y, t ) {\r\n\r\n            return ( 1 - t ) * x + t * y;\r\n\r\n        },\r\n\r\n        // http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n        smoothstep: function ( x, min, max ) {\r\n\r\n            if ( x <= min ) return 0;\r\n            if ( x >= max ) return 1;\r\n\r\n            x = ( x - min ) / ( max - min );\r\n\r\n            return x * x * ( 3 - 2 * x );\r\n\r\n        },\r\n\r\n        smootherstep: function ( x, min, max ) {\r\n\r\n            if ( x <= min ) return 0;\r\n            if ( x >= max ) return 1;\r\n\r\n            x = ( x - min ) / ( max - min );\r\n\r\n            return x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n        },\r\n\r\n        // Random integer from <low, high> interval\r\n\r\n        randInt: function ( low, high ) {\r\n\r\n            return low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n        },\r\n\r\n        // Random float from <low, high> interval\r\n\r\n        randFloat: function ( low, high ) {\r\n\r\n            return low + Math.random() * ( high - low );\r\n\r\n        },\r\n\r\n        // Random float from <-range/2, range/2> interval\r\n\r\n        randFloatSpread: function ( range ) {\r\n\r\n            return range * ( 0.5 - Math.random() );\r\n\r\n        },\r\n\r\n        degToRad: function ( degrees ) {\r\n\r\n            return degrees * _Math.DEG2RAD;\r\n\r\n        },\r\n\r\n        radToDeg: function ( radians ) {\r\n\r\n            return radians * _Math.RAD2DEG;\r\n\r\n        },\r\n\r\n        isPowerOfTwo: function ( value ) {\r\n\r\n            return ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n        },\r\n\r\n        ceilPowerOfTwo: function ( value ) {\r\n\r\n            return Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\r\n\r\n        },\r\n\r\n        floorPowerOfTwo: function ( value ) {\r\n\r\n            return Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author egraether / http://egraether.com/\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     */\r\n\r\n    function Vector2( x, y ) {\r\n\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n\r\n    }\r\n\r\n    Object.defineProperties( Vector2.prototype, {\r\n\r\n        \"width\": {\r\n\r\n            get: function () {\r\n\r\n                return this.x;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this.x = value;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        \"height\": {\r\n\r\n            get: function () {\r\n\r\n                return this.y;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this.y = value;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector2.prototype, {\r\n\r\n        isVector2: true,\r\n\r\n        set: function ( x, y ) {\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.x = scalar;\r\n            this.y = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setX: function ( x ) {\r\n\r\n            this.x = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( y ) {\r\n\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponent: function ( index, value ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: this.x = value; break;\r\n                case 1: this.y = value; break;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getComponent: function ( index ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: return this.x;\r\n                case 1: return this.y;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.x, this.y );\r\n\r\n        },\r\n\r\n        copy: function ( v ) {\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        add: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n                return this.addVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x += v.x;\r\n            this.y += v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.x += s;\r\n            this.y += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addVectors: function ( a, b ) {\r\n\r\n            this.x = a.x + b.x;\r\n            this.y = a.y + b.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScaledVector: function ( v, s ) {\r\n\r\n            this.x += v.x * s;\r\n            this.y += v.y * s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n                return this.subVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x -= v.x;\r\n            this.y -= v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subScalar: function ( s ) {\r\n\r\n            this.x -= s;\r\n            this.y -= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subVectors: function ( a, b ) {\r\n\r\n            this.x = a.x - b.x;\r\n            this.y = a.y - b.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( v ) {\r\n\r\n            this.x *= v.x;\r\n            this.y *= v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( scalar ) {\r\n\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divide: function ( v ) {\r\n\r\n            this.x /= v.x;\r\n            this.y /= v.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divideScalar: function ( scalar ) {\r\n\r\n            return this.multiplyScalar( 1 / scalar );\r\n\r\n        },\r\n\r\n        applyMatrix3: function ( m ) {\r\n\r\n            var x = this.x, y = this.y;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\r\n            this.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        min: function ( v ) {\r\n\r\n            this.x = Math.min( this.x, v.x );\r\n            this.y = Math.min( this.y, v.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        max: function ( v ) {\r\n\r\n            this.x = Math.max( this.x, v.x );\r\n            this.y = Math.max( this.y, v.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clamp: function ( min, max ) {\r\n\r\n            // assumes min < max, componentwise\r\n\r\n            this.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n            this.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clampScalar: function () {\r\n\r\n            var min = new Vector2();\r\n            var max = new Vector2();\r\n\r\n            return function clampScalar( minVal, maxVal ) {\r\n\r\n                min.set( minVal, minVal );\r\n                max.set( maxVal, maxVal );\r\n\r\n                return this.clamp( min, max );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clampLength: function ( min, max ) {\r\n\r\n            var length = this.length();\r\n\r\n            return this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n        },\r\n\r\n        floor: function () {\r\n\r\n            this.x = Math.floor( this.x );\r\n            this.y = Math.floor( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        ceil: function () {\r\n\r\n            this.x = Math.ceil( this.x );\r\n            this.y = Math.ceil( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        round: function () {\r\n\r\n            this.x = Math.round( this.x );\r\n            this.y = Math.round( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        roundToZero: function () {\r\n\r\n            this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n            this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.x = - this.x;\r\n            this.y = - this.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this.x * v.x + this.y * v.y;\r\n\r\n        },\r\n\r\n        lengthSq: function () {\r\n\r\n            return this.x * this.x + this.y * this.y;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n        },\r\n\r\n        manhattanLength: function () {\r\n\r\n            return Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            return this.divideScalar( this.length() || 1 );\r\n\r\n        },\r\n\r\n        angle: function () {\r\n\r\n            // computes the angle in radians with respect to the positive x-axis\r\n\r\n            var angle = Math.atan2( this.y, this.x );\r\n\r\n            if ( angle < 0 ) angle += 2 * Math.PI;\r\n\r\n            return angle;\r\n\r\n        },\r\n\r\n        distanceTo: function ( v ) {\r\n\r\n            return Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n        },\r\n\r\n        distanceToSquared: function ( v ) {\r\n\r\n            var dx = this.x - v.x, dy = this.y - v.y;\r\n            return dx * dx + dy * dy;\r\n\r\n        },\r\n\r\n        manhattanDistanceTo: function ( v ) {\r\n\r\n            return Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\r\n\r\n        },\r\n\r\n        setLength: function ( length ) {\r\n\r\n            return this.normalize().multiplyScalar( length );\r\n\r\n        },\r\n\r\n        lerp: function ( v, alpha ) {\r\n\r\n            this.x += ( v.x - this.x ) * alpha;\r\n            this.y += ( v.y - this.y ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerpVectors: function ( v1, v2, alpha ) {\r\n\r\n            return this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n        },\r\n\r\n        equals: function ( v ) {\r\n\r\n            return ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.x = array[ offset ];\r\n            this.y = array[ offset + 1 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.x;\r\n            array[ offset + 1 ] = this.y;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        fromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n            if ( offset !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\r\n\r\n            }\r\n\r\n            this.x = attribute.getX( index );\r\n            this.y = attribute.getY( index );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotateAround: function ( center, angle ) {\r\n\r\n            var c = Math.cos( angle ), s = Math.sin( angle );\r\n\r\n            var x = this.x - center.x;\r\n            var y = this.y - center.y;\r\n\r\n            this.x = x * c - y * s + center.x;\r\n            this.y = x * s + y * c + center.y;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author supereggbert / http://www.paulbrunt.co.uk/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author jordi_ros / http://plattsoft.com\r\n     * @author D1plo1d / http://github.com/D1plo1d\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author timknip / http://www.floorplanner.com/\r\n     * @author bhouston / http://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Matrix4() {\r\n\r\n        this.elements = [\r\n\r\n            1, 0, 0, 0,\r\n            0, 1, 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1\r\n\r\n        ];\r\n\r\n        if ( arguments.length > 0 ) {\r\n\r\n            console.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Matrix4.prototype, {\r\n\r\n        isMatrix4: true,\r\n\r\n        set: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n            te[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n            te[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n            te[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        identity: function () {\r\n\r\n            this.set(\r\n\r\n                1, 0, 0, 0,\r\n                0, 1, 0, 0,\r\n                0, 0, 1, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new Matrix4().fromArray( this.elements );\r\n\r\n        },\r\n\r\n        copy: function ( m ) {\r\n\r\n            var te = this.elements;\r\n            var me = m.elements;\r\n\r\n            te[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\r\n            te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\r\n            te[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\r\n            te[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyPosition: function ( m ) {\r\n\r\n            var te = this.elements, me = m.elements;\r\n\r\n            te[ 12 ] = me[ 12 ];\r\n            te[ 13 ] = me[ 13 ];\r\n            te[ 14 ] = me[ 14 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        extractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n            xAxis.setFromMatrixColumn( this, 0 );\r\n            yAxis.setFromMatrixColumn( this, 1 );\r\n            zAxis.setFromMatrixColumn( this, 2 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n            this.set(\r\n                xAxis.x, yAxis.x, zAxis.x, 0,\r\n                xAxis.y, yAxis.y, zAxis.y, 0,\r\n                xAxis.z, yAxis.z, zAxis.z, 0,\r\n                0, 0, 0, 1\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        extractRotation: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function extractRotation( m ) {\r\n\r\n                // this method does not support reflection matrices\r\n\r\n                var te = this.elements;\r\n                var me = m.elements;\r\n\r\n                var scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\r\n                var scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\r\n                var scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\r\n\r\n                te[ 0 ] = me[ 0 ] * scaleX;\r\n                te[ 1 ] = me[ 1 ] * scaleX;\r\n                te[ 2 ] = me[ 2 ] * scaleX;\r\n                te[ 3 ] = 0;\r\n\r\n                te[ 4 ] = me[ 4 ] * scaleY;\r\n                te[ 5 ] = me[ 5 ] * scaleY;\r\n                te[ 6 ] = me[ 6 ] * scaleY;\r\n                te[ 7 ] = 0;\r\n\r\n                te[ 8 ] = me[ 8 ] * scaleZ;\r\n                te[ 9 ] = me[ 9 ] * scaleZ;\r\n                te[ 10 ] = me[ 10 ] * scaleZ;\r\n                te[ 11 ] = 0;\r\n\r\n                te[ 12 ] = 0;\r\n                te[ 13 ] = 0;\r\n                te[ 14 ] = 0;\r\n                te[ 15 ] = 1;\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        makeRotationFromEuler: function ( euler ) {\r\n\r\n            if ( ! ( euler && euler.isEuler ) ) {\r\n\r\n                console.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n            }\r\n\r\n            var te = this.elements;\r\n\r\n            var x = euler.x, y = euler.y, z = euler.z;\r\n            var a = Math.cos( x ), b = Math.sin( x );\r\n            var c = Math.cos( y ), d = Math.sin( y );\r\n            var e = Math.cos( z ), f = Math.sin( z );\r\n\r\n            if ( euler.order === 'XYZ' ) {\r\n\r\n                var ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = - c * f;\r\n                te[ 8 ] = d;\r\n\r\n                te[ 1 ] = af + be * d;\r\n                te[ 5 ] = ae - bf * d;\r\n                te[ 9 ] = - b * c;\r\n\r\n                te[ 2 ] = bf - ae * d;\r\n                te[ 6 ] = be + af * d;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'YXZ' ) {\r\n\r\n                var ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n                te[ 0 ] = ce + df * b;\r\n                te[ 4 ] = de * b - cf;\r\n                te[ 8 ] = a * d;\r\n\r\n                te[ 1 ] = a * f;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = - b;\r\n\r\n                te[ 2 ] = cf * b - de;\r\n                te[ 6 ] = df + ce * b;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'ZXY' ) {\r\n\r\n                var ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n                te[ 0 ] = ce - df * b;\r\n                te[ 4 ] = - a * f;\r\n                te[ 8 ] = de + cf * b;\r\n\r\n                te[ 1 ] = cf + de * b;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = df - ce * b;\r\n\r\n                te[ 2 ] = - a * d;\r\n                te[ 6 ] = b;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'ZYX' ) {\r\n\r\n                var ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = be * d - af;\r\n                te[ 8 ] = ae * d + bf;\r\n\r\n                te[ 1 ] = c * f;\r\n                te[ 5 ] = bf * d + ae;\r\n                te[ 9 ] = af * d - be;\r\n\r\n                te[ 2 ] = - d;\r\n                te[ 6 ] = b * c;\r\n                te[ 10 ] = a * c;\r\n\r\n            } else if ( euler.order === 'YZX' ) {\r\n\r\n                var ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = bd - ac * f;\r\n                te[ 8 ] = bc * f + ad;\r\n\r\n                te[ 1 ] = f;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = - b * e;\r\n\r\n                te[ 2 ] = - d * e;\r\n                te[ 6 ] = ad * f + bc;\r\n                te[ 10 ] = ac - bd * f;\r\n\r\n            } else if ( euler.order === 'XZY' ) {\r\n\r\n                var ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n                te[ 0 ] = c * e;\r\n                te[ 4 ] = - f;\r\n                te[ 8 ] = d * e;\r\n\r\n                te[ 1 ] = ac * f + bd;\r\n                te[ 5 ] = a * e;\r\n                te[ 9 ] = ad * f - bc;\r\n\r\n                te[ 2 ] = bc * f - ad;\r\n                te[ 6 ] = b * e;\r\n                te[ 10 ] = bd * f + ac;\r\n\r\n            }\r\n\r\n            // bottom row\r\n            te[ 3 ] = 0;\r\n            te[ 7 ] = 0;\r\n            te[ 11 ] = 0;\r\n\r\n            // last column\r\n            te[ 12 ] = 0;\r\n            te[ 13 ] = 0;\r\n            te[ 14 ] = 0;\r\n            te[ 15 ] = 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationFromQuaternion: function () {\r\n\r\n            var zero = new Vector3( 0, 0, 0 );\r\n            var one = new Vector3( 1, 1, 1 );\r\n\r\n            return function makeRotationFromQuaternion( q ) {\r\n\r\n                return this.compose( zero, q, one );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            var x = new Vector3();\r\n            var y = new Vector3();\r\n            var z = new Vector3();\r\n\r\n            return function lookAt( eye, target, up ) {\r\n\r\n                var te = this.elements;\r\n\r\n                z.subVectors( eye, target );\r\n\r\n                if ( z.lengthSq() === 0 ) {\r\n\r\n                    // eye and target are in the same position\r\n\r\n                    z.z = 1;\r\n\r\n                }\r\n\r\n                z.normalize();\r\n                x.crossVectors( up, z );\r\n\r\n                if ( x.lengthSq() === 0 ) {\r\n\r\n                    // up and z are parallel\r\n\r\n                    if ( Math.abs( up.z ) === 1 ) {\r\n\r\n                        z.x += 0.0001;\r\n\r\n                    } else {\r\n\r\n                        z.z += 0.0001;\r\n\r\n                    }\r\n\r\n                    z.normalize();\r\n                    x.crossVectors( up, z );\r\n\r\n                }\r\n\r\n                x.normalize();\r\n                y.crossVectors( z, x );\r\n\r\n                te[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n                te[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n                te[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        multiply: function ( m, n ) {\r\n\r\n            if ( n !== undefined ) {\r\n\r\n                console.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n                return this.multiplyMatrices( m, n );\r\n\r\n            }\r\n\r\n            return this.multiplyMatrices( this, m );\r\n\r\n        },\r\n\r\n        premultiply: function ( m ) {\r\n\r\n            return this.multiplyMatrices( m, this );\r\n\r\n        },\r\n\r\n        multiplyMatrices: function ( a, b ) {\r\n\r\n            var ae = a.elements;\r\n            var be = b.elements;\r\n            var te = this.elements;\r\n\r\n            var a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n            var a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n            var a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n            var a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n            var b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n            var b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n            var b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n            var b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n            te[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n            te[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n            te[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n            te[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n            te[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n            te[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n            te[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n            te[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n            te[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n            te[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n            te[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n            te[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n            te[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n            te[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n            te[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n            te[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( s ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n            te[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n            te[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n            te[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyToBufferAttribute: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function applyToBufferAttribute( attribute ) {\r\n\r\n                for ( var i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                    v1.x = attribute.getX( i );\r\n                    v1.y = attribute.getY( i );\r\n                    v1.z = attribute.getZ( i );\r\n\r\n                    v1.applyMatrix4( this );\r\n\r\n                    attribute.setXYZ( i, v1.x, v1.y, v1.z );\r\n\r\n                }\r\n\r\n                return attribute;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        determinant: function () {\r\n\r\n            var te = this.elements;\r\n\r\n            var n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n            var n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n            var n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n            var n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n            //TODO: make this more efficient\r\n            //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n            return (\r\n                n41 * (\r\n                    + n14 * n23 * n32\r\n                    - n13 * n24 * n32\r\n                    - n14 * n22 * n33\r\n                    + n12 * n24 * n33\r\n                    + n13 * n22 * n34\r\n                    - n12 * n23 * n34\r\n                ) +\r\n                n42 * (\r\n                    + n11 * n23 * n34\r\n                    - n11 * n24 * n33\r\n                    + n14 * n21 * n33\r\n                    - n13 * n21 * n34\r\n                    + n13 * n24 * n31\r\n                    - n14 * n23 * n31\r\n                ) +\r\n                n43 * (\r\n                    + n11 * n24 * n32\r\n                    - n11 * n22 * n34\r\n                    - n14 * n21 * n32\r\n                    + n12 * n21 * n34\r\n                    + n14 * n22 * n31\r\n                    - n12 * n24 * n31\r\n                ) +\r\n                n44 * (\r\n                    - n13 * n22 * n31\r\n                    - n11 * n23 * n32\r\n                    + n11 * n22 * n33\r\n                    + n13 * n21 * n32\r\n                    - n12 * n21 * n33\r\n                    + n12 * n23 * n31\r\n                )\r\n\r\n            );\r\n\r\n        },\r\n\r\n        transpose: function () {\r\n\r\n            var te = this.elements;\r\n            var tmp;\r\n\r\n            tmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n            tmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n            tmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n            tmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n            tmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n            tmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setPosition: function ( v ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 12 ] = v.x;\r\n            te[ 13 ] = v.y;\r\n            te[ 14 ] = v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getInverse: function ( m, throwOnDegenerate ) {\r\n\r\n            // based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n            var te = this.elements,\r\n                me = m.elements,\r\n\r\n                n11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\r\n                n12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\r\n                n13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\r\n                n14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\r\n\r\n                t11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\r\n                t12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\r\n                t13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\r\n                t14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\r\n            var det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\r\n\r\n            if ( det === 0 ) {\r\n\r\n                var msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\r\n\r\n                if ( throwOnDegenerate === true ) {\r\n\r\n                    throw new Error( msg );\r\n\r\n                } else {\r\n\r\n                    console.warn( msg );\r\n\r\n                }\r\n\r\n                return this.identity();\r\n\r\n            }\r\n\r\n            var detInv = 1 / det;\r\n\r\n            te[ 0 ] = t11 * detInv;\r\n            te[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\r\n            te[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\r\n            te[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\r\n\r\n            te[ 4 ] = t12 * detInv;\r\n            te[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\r\n            te[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\r\n            te[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\r\n\r\n            te[ 8 ] = t13 * detInv;\r\n            te[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\r\n            te[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\r\n            te[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\r\n\r\n            te[ 12 ] = t14 * detInv;\r\n            te[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\r\n            te[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\r\n            te[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        scale: function ( v ) {\r\n\r\n            var te = this.elements;\r\n            var x = v.x, y = v.y, z = v.z;\r\n\r\n            te[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n            te[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n            te[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n            te[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getMaxScaleOnAxis: function () {\r\n\r\n            var te = this.elements;\r\n\r\n            var scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n            var scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n            var scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n            return Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\r\n\r\n        },\r\n\r\n        makeTranslation: function ( x, y, z ) {\r\n\r\n            this.set(\r\n\r\n                1, 0, 0, x,\r\n                0, 1, 0, y,\r\n                0, 0, 1, z,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationX: function ( theta ) {\r\n\r\n            var c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n            this.set(\r\n\r\n                1, 0, 0, 0,\r\n                0, c, - s, 0,\r\n                0, s, c, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationY: function ( theta ) {\r\n\r\n            var c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n            this.set(\r\n\r\n                c, 0, s, 0,\r\n                0, 1, 0, 0,\r\n                - s, 0, c, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationZ: function ( theta ) {\r\n\r\n            var c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n            this.set(\r\n\r\n                c, - s, 0, 0,\r\n                s, c, 0, 0,\r\n                0, 0, 1, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeRotationAxis: function ( axis, angle ) {\r\n\r\n            // Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n            var c = Math.cos( angle );\r\n            var s = Math.sin( angle );\r\n            var t = 1 - c;\r\n            var x = axis.x, y = axis.y, z = axis.z;\r\n            var tx = t * x, ty = t * y;\r\n\r\n            this.set(\r\n\r\n                tx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n                tx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n                tx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeScale: function ( x, y, z ) {\r\n\r\n            this.set(\r\n\r\n                x, 0, 0, 0,\r\n                0, y, 0, 0,\r\n                0, 0, z, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeShear: function ( x, y, z ) {\r\n\r\n            this.set(\r\n\r\n                1, y, z, 0,\r\n                x, 1, z, 0,\r\n                x, y, 1, 0,\r\n                0, 0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        compose: function ( position, quaternion, scale ) {\r\n\r\n            var te = this.elements;\r\n\r\n            var x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\r\n            var x2 = x + x,\ty2 = y + y, z2 = z + z;\r\n            var xx = x * x2, xy = x * y2, xz = x * z2;\r\n            var yy = y * y2, yz = y * z2, zz = z * z2;\r\n            var wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n            var sx = scale.x, sy = scale.y, sz = scale.z;\r\n\r\n            te[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\r\n            te[ 1 ] = ( xy + wz ) * sx;\r\n            te[ 2 ] = ( xz - wy ) * sx;\r\n            te[ 3 ] = 0;\r\n\r\n            te[ 4 ] = ( xy - wz ) * sy;\r\n            te[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\r\n            te[ 6 ] = ( yz + wx ) * sy;\r\n            te[ 7 ] = 0;\r\n\r\n            te[ 8 ] = ( xz + wy ) * sz;\r\n            te[ 9 ] = ( yz - wx ) * sz;\r\n            te[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\r\n            te[ 11 ] = 0;\r\n\r\n            te[ 12 ] = position.x;\r\n            te[ 13 ] = position.y;\r\n            te[ 14 ] = position.z;\r\n            te[ 15 ] = 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        decompose: function () {\r\n\r\n            var vector = new Vector3();\r\n            var matrix = new Matrix4();\r\n\r\n            return function decompose( position, quaternion, scale ) {\r\n\r\n                var te = this.elements;\r\n\r\n                var sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n                var sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n                var sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n                // if determine is negative, we need to invert one scale\r\n                var det = this.determinant();\r\n                if ( det < 0 ) sx = - sx;\r\n\r\n                position.x = te[ 12 ];\r\n                position.y = te[ 13 ];\r\n                position.z = te[ 14 ];\r\n\r\n                // scale the rotation part\r\n                matrix.copy( this );\r\n\r\n                var invSX = 1 / sx;\r\n                var invSY = 1 / sy;\r\n                var invSZ = 1 / sz;\r\n\r\n                matrix.elements[ 0 ] *= invSX;\r\n                matrix.elements[ 1 ] *= invSX;\r\n                matrix.elements[ 2 ] *= invSX;\r\n\r\n                matrix.elements[ 4 ] *= invSY;\r\n                matrix.elements[ 5 ] *= invSY;\r\n                matrix.elements[ 6 ] *= invSY;\r\n\r\n                matrix.elements[ 8 ] *= invSZ;\r\n                matrix.elements[ 9 ] *= invSZ;\r\n                matrix.elements[ 10 ] *= invSZ;\r\n\r\n                quaternion.setFromRotationMatrix( matrix );\r\n\r\n                scale.x = sx;\r\n                scale.y = sy;\r\n                scale.z = sz;\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        makePerspective: function ( left, right, top, bottom, near, far ) {\r\n\r\n            if ( far === undefined ) {\r\n\r\n                console.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\r\n\r\n            }\r\n\r\n            var te = this.elements;\r\n            var x = 2 * near / ( right - left );\r\n            var y = 2 * near / ( top - bottom );\r\n\r\n            var a = ( right + left ) / ( right - left );\r\n            var b = ( top + bottom ) / ( top - bottom );\r\n            var c = - ( far + near ) / ( far - near );\r\n            var d = - 2 * far * near / ( far - near );\r\n\r\n            te[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n            te[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n            te[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n            te[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n            var te = this.elements;\r\n            var w = 1.0 / ( right - left );\r\n            var h = 1.0 / ( top - bottom );\r\n            var p = 1.0 / ( far - near );\r\n\r\n            var x = ( right + left ) * w;\r\n            var y = ( top + bottom ) * h;\r\n            var z = ( far + near ) * p;\r\n\r\n            te[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n            te[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n            te[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\r\n            te[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( matrix ) {\r\n\r\n            var te = this.elements;\r\n            var me = matrix.elements;\r\n\r\n            for ( var i = 0; i < 16; i ++ ) {\r\n\r\n                if ( te[ i ] !== me[ i ] ) return false;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            for ( var i = 0; i < 16; i ++ ) {\r\n\r\n                this.elements[ i ] = array[ i + offset ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            var te = this.elements;\r\n\r\n            array[ offset ] = te[ 0 ];\r\n            array[ offset + 1 ] = te[ 1 ];\r\n            array[ offset + 2 ] = te[ 2 ];\r\n            array[ offset + 3 ] = te[ 3 ];\r\n\r\n            array[ offset + 4 ] = te[ 4 ];\r\n            array[ offset + 5 ] = te[ 5 ];\r\n            array[ offset + 6 ] = te[ 6 ];\r\n            array[ offset + 7 ] = te[ 7 ];\r\n\r\n            array[ offset + 8 ] = te[ 8 ];\r\n            array[ offset + 9 ] = te[ 9 ];\r\n            array[ offset + 10 ] = te[ 10 ];\r\n            array[ offset + 11 ] = te[ 11 ];\r\n\r\n            array[ offset + 12 ] = te[ 12 ];\r\n            array[ offset + 13 ] = te[ 13 ];\r\n            array[ offset + 14 ] = te[ 14 ];\r\n            array[ offset + 15 ] = te[ 15 ];\r\n\r\n            return array;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Quaternion( x, y, z, w ) {\r\n\r\n        this._x = x || 0;\r\n        this._y = y || 0;\r\n        this._z = z || 0;\r\n        this._w = ( w !== undefined ) ? w : 1;\r\n\r\n    }\r\n\r\n    Object.assign( Quaternion, {\r\n\r\n        slerp: function ( qa, qb, qm, t ) {\r\n\r\n            return qm.copy( qa ).slerp( qb, t );\r\n\r\n        },\r\n\r\n        slerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\r\n\r\n            // fuzz-free, array-based Quaternion SLERP operation\r\n\r\n            var x0 = src0[ srcOffset0 + 0 ],\r\n                y0 = src0[ srcOffset0 + 1 ],\r\n                z0 = src0[ srcOffset0 + 2 ],\r\n                w0 = src0[ srcOffset0 + 3 ],\r\n\r\n                x1 = src1[ srcOffset1 + 0 ],\r\n                y1 = src1[ srcOffset1 + 1 ],\r\n                z1 = src1[ srcOffset1 + 2 ],\r\n                w1 = src1[ srcOffset1 + 3 ];\r\n\r\n            if ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\r\n\r\n                var s = 1 - t,\r\n\r\n                    cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\r\n\r\n                    dir = ( cos >= 0 ? 1 : - 1 ),\r\n                    sqrSin = 1 - cos * cos;\r\n\r\n                // Skip the Slerp for tiny steps to avoid numeric problems:\r\n                if ( sqrSin > Number.EPSILON ) {\r\n\r\n                    var sin = Math.sqrt( sqrSin ),\r\n                        len = Math.atan2( sin, cos * dir );\r\n\r\n                    s = Math.sin( s * len ) / sin;\r\n                    t = Math.sin( t * len ) / sin;\r\n\r\n                }\r\n\r\n                var tDir = t * dir;\r\n\r\n                x0 = x0 * s + x1 * tDir;\r\n                y0 = y0 * s + y1 * tDir;\r\n                z0 = z0 * s + z1 * tDir;\r\n                w0 = w0 * s + w1 * tDir;\r\n\r\n                // Normalize in case we just did a lerp:\r\n                if ( s === 1 - t ) {\r\n\r\n                    var f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\r\n\r\n                    x0 *= f;\r\n                    y0 *= f;\r\n                    z0 *= f;\r\n                    w0 *= f;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            dst[ dstOffset ] = x0;\r\n            dst[ dstOffset + 1 ] = y0;\r\n            dst[ dstOffset + 2 ] = z0;\r\n            dst[ dstOffset + 3 ] = w0;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( Quaternion.prototype, {\r\n\r\n        x: {\r\n\r\n            get: function () {\r\n\r\n                return this._x;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._x = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        y: {\r\n\r\n            get: function () {\r\n\r\n                return this._y;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._y = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        z: {\r\n\r\n            get: function () {\r\n\r\n                return this._z;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._z = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        w: {\r\n\r\n            get: function () {\r\n\r\n                return this._w;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._w = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Quaternion.prototype, {\r\n\r\n        set: function ( x, y, z, w ) {\r\n\r\n            this._x = x;\r\n            this._y = y;\r\n            this._z = z;\r\n            this._w = w;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n        },\r\n\r\n        copy: function ( quaternion ) {\r\n\r\n            this._x = quaternion.x;\r\n            this._y = quaternion.y;\r\n            this._z = quaternion.z;\r\n            this._w = quaternion.w;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromEuler: function ( euler, update ) {\r\n\r\n            if ( ! ( euler && euler.isEuler ) ) {\r\n\r\n                throw new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n            }\r\n\r\n            var x = euler._x, y = euler._y, z = euler._z, order = euler.order;\r\n\r\n            // http://www.mathworks.com/matlabcentral/fileexchange/\r\n            // \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n            //\tcontent/SpinCalc.m\r\n\r\n            var cos = Math.cos;\r\n            var sin = Math.sin;\r\n\r\n            var c1 = cos( x / 2 );\r\n            var c2 = cos( y / 2 );\r\n            var c3 = cos( z / 2 );\r\n\r\n            var s1 = sin( x / 2 );\r\n            var s2 = sin( y / 2 );\r\n            var s3 = sin( z / 2 );\r\n\r\n            if ( order === 'XYZ' ) {\r\n\r\n                this._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n            } else if ( order === 'YXZ' ) {\r\n\r\n                this._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n            } else if ( order === 'ZXY' ) {\r\n\r\n                this._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n            } else if ( order === 'ZYX' ) {\r\n\r\n                this._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n            } else if ( order === 'YZX' ) {\r\n\r\n                this._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n            } else if ( order === 'XZY' ) {\r\n\r\n                this._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n                this._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n                this._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n                this._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n            }\r\n\r\n            if ( update !== false ) this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromAxisAngle: function ( axis, angle ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n            // assumes axis is normalized\r\n\r\n            var halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n            this._x = axis.x * s;\r\n            this._y = axis.y * s;\r\n            this._z = axis.z * s;\r\n            this._w = Math.cos( halfAngle );\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromRotationMatrix: function ( m ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            var te = m.elements,\r\n\r\n                m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n                m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n                m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n                trace = m11 + m22 + m33,\r\n                s;\r\n\r\n            if ( trace > 0 ) {\r\n\r\n                s = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n                this._w = 0.25 / s;\r\n                this._x = ( m32 - m23 ) * s;\r\n                this._y = ( m13 - m31 ) * s;\r\n                this._z = ( m21 - m12 ) * s;\r\n\r\n            } else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n                s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n                this._w = ( m32 - m23 ) / s;\r\n                this._x = 0.25 * s;\r\n                this._y = ( m12 + m21 ) / s;\r\n                this._z = ( m13 + m31 ) / s;\r\n\r\n            } else if ( m22 > m33 ) {\r\n\r\n                s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n                this._w = ( m13 - m31 ) / s;\r\n                this._x = ( m12 + m21 ) / s;\r\n                this._y = 0.25 * s;\r\n                this._z = ( m23 + m32 ) / s;\r\n\r\n            } else {\r\n\r\n                s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n                this._w = ( m21 - m12 ) / s;\r\n                this._x = ( m13 + m31 ) / s;\r\n                this._y = ( m23 + m32 ) / s;\r\n                this._z = 0.25 * s;\r\n\r\n            }\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromUnitVectors: function () {\r\n\r\n            // assumes direction vectors vFrom and vTo are normalized\r\n\r\n            var v1 = new Vector3();\r\n            var r;\r\n\r\n            var EPS = 0.000001;\r\n\r\n            return function setFromUnitVectors( vFrom, vTo ) {\r\n\r\n                if ( v1 === undefined ) v1 = new Vector3();\r\n\r\n                r = vFrom.dot( vTo ) + 1;\r\n\r\n                if ( r < EPS ) {\r\n\r\n                    r = 0;\r\n\r\n                    if ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n                        v1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n                    } else {\r\n\r\n                        v1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    v1.crossVectors( vFrom, vTo );\r\n\r\n                }\r\n\r\n                this._x = v1.x;\r\n                this._y = v1.y;\r\n                this._z = v1.z;\r\n                this._w = r;\r\n\r\n                return this.normalize();\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        inverse: function () {\r\n\r\n            // quaternion is assumed to have unit length\r\n\r\n            return this.conjugate();\r\n\r\n        },\r\n\r\n        conjugate: function () {\r\n\r\n            this._x *= - 1;\r\n            this._y *= - 1;\r\n            this._z *= - 1;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n        },\r\n\r\n        lengthSq: function () {\r\n\r\n            return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            var l = this.length();\r\n\r\n            if ( l === 0 ) {\r\n\r\n                this._x = 0;\r\n                this._y = 0;\r\n                this._z = 0;\r\n                this._w = 1;\r\n\r\n            } else {\r\n\r\n                l = 1 / l;\r\n\r\n                this._x = this._x * l;\r\n                this._y = this._y * l;\r\n                this._z = this._z * l;\r\n                this._w = this._w * l;\r\n\r\n            }\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( q, p ) {\r\n\r\n            if ( p !== undefined ) {\r\n\r\n                console.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n                return this.multiplyQuaternions( q, p );\r\n\r\n            }\r\n\r\n            return this.multiplyQuaternions( this, q );\r\n\r\n        },\r\n\r\n        premultiply: function ( q ) {\r\n\r\n            return this.multiplyQuaternions( q, this );\r\n\r\n        },\r\n\r\n        multiplyQuaternions: function ( a, b ) {\r\n\r\n            // from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n            var qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n            var qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n            this._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n            this._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n            this._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n            this._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        slerp: function ( qb, t ) {\r\n\r\n            if ( t === 0 ) return this;\r\n            if ( t === 1 ) return this.copy( qb );\r\n\r\n            var x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n            // http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n            var cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n            if ( cosHalfTheta < 0 ) {\r\n\r\n                this._w = - qb._w;\r\n                this._x = - qb._x;\r\n                this._y = - qb._y;\r\n                this._z = - qb._z;\r\n\r\n                cosHalfTheta = - cosHalfTheta;\r\n\r\n            } else {\r\n\r\n                this.copy( qb );\r\n\r\n            }\r\n\r\n            if ( cosHalfTheta >= 1.0 ) {\r\n\r\n                this._w = w;\r\n                this._x = x;\r\n                this._y = y;\r\n                this._z = z;\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            var sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n            if ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n                this._w = 0.5 * ( w + this._w );\r\n                this._x = 0.5 * ( x + this._x );\r\n                this._y = 0.5 * ( y + this._y );\r\n                this._z = 0.5 * ( z + this._z );\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            var halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\r\n            var ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n                ratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n            this._w = ( w * ratioA + this._w * ratioB );\r\n            this._x = ( x * ratioA + this._x * ratioB );\r\n            this._y = ( y * ratioA + this._y * ratioB );\r\n            this._z = ( z * ratioA + this._z * ratioB );\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( quaternion ) {\r\n\r\n            return ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this._x = array[ offset ];\r\n            this._y = array[ offset + 1 ];\r\n            this._z = array[ offset + 2 ];\r\n            this._w = array[ offset + 3 ];\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this._x;\r\n            array[ offset + 1 ] = this._y;\r\n            array[ offset + 2 ] = this._z;\r\n            array[ offset + 3 ] = this._w;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        onChange: function ( callback ) {\r\n\r\n            this.onChangeCallback = callback;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        onChangeCallback: function () {}\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author kile / http://kile.stravaganza.org/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author egraether / http://egraether.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Vector3( x, y, z ) {\r\n\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.z = z || 0;\r\n\r\n    }\r\n\r\n    Object.assign( Vector3.prototype, {\r\n\r\n        isVector3: true,\r\n\r\n        set: function ( x, y, z ) {\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n            this.z = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.x = scalar;\r\n            this.y = scalar;\r\n            this.z = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setX: function ( x ) {\r\n\r\n            this.x = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( y ) {\r\n\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setZ: function ( z ) {\r\n\r\n            this.z = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponent: function ( index, value ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: this.x = value; break;\r\n                case 1: this.y = value; break;\r\n                case 2: this.z = value; break;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getComponent: function ( index ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: return this.x;\r\n                case 1: return this.y;\r\n                case 2: return this.z;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.x, this.y, this.z );\r\n\r\n        },\r\n\r\n        copy: function ( v ) {\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n            this.z = v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        add: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n                return this.addVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x += v.x;\r\n            this.y += v.y;\r\n            this.z += v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.x += s;\r\n            this.y += s;\r\n            this.z += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addVectors: function ( a, b ) {\r\n\r\n            this.x = a.x + b.x;\r\n            this.y = a.y + b.y;\r\n            this.z = a.z + b.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScaledVector: function ( v, s ) {\r\n\r\n            this.x += v.x * s;\r\n            this.y += v.y * s;\r\n            this.z += v.z * s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n                return this.subVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x -= v.x;\r\n            this.y -= v.y;\r\n            this.z -= v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subScalar: function ( s ) {\r\n\r\n            this.x -= s;\r\n            this.y -= s;\r\n            this.z -= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subVectors: function ( a, b ) {\r\n\r\n            this.x = a.x - b.x;\r\n            this.y = a.y - b.y;\r\n            this.z = a.z - b.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n                return this.multiplyVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x *= v.x;\r\n            this.y *= v.y;\r\n            this.z *= v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( scalar ) {\r\n\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n            this.z *= scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyVectors: function ( a, b ) {\r\n\r\n            this.x = a.x * b.x;\r\n            this.y = a.y * b.y;\r\n            this.z = a.z * b.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyEuler: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function applyEuler( euler ) {\r\n\r\n                if ( ! ( euler && euler.isEuler ) ) {\r\n\r\n                    console.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\r\n\r\n                }\r\n\r\n                return this.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        applyAxisAngle: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function applyAxisAngle( axis, angle ) {\r\n\r\n                return this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        applyMatrix3: function ( m ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n            this.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n            this.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( m ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var e = m.elements;\r\n\r\n            var w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\r\n\r\n            this.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\r\n            this.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\r\n            this.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyQuaternion: function ( q ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var qx = q.x, qy = q.y, qz = q.z, qw = q.w;\r\n\r\n            // calculate quat * vector\r\n\r\n            var ix = qw * x + qy * z - qz * y;\r\n            var iy = qw * y + qz * x - qx * z;\r\n            var iz = qw * z + qx * y - qy * x;\r\n            var iw = - qx * x - qy * y - qz * z;\r\n\r\n            // calculate result * inverse quat\r\n\r\n            this.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n            this.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n            this.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        project: function () {\r\n\r\n            var matrix = new Matrix4();\r\n\r\n            return function project( camera ) {\r\n\r\n                matrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n                return this.applyMatrix4( matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        unproject: function () {\r\n\r\n            var matrix = new Matrix4();\r\n\r\n            return function unproject( camera ) {\r\n\r\n                matrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n                return this.applyMatrix4( matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        transformDirection: function ( m ) {\r\n\r\n            // input: THREE.Matrix4 affine matrix\r\n            // vector interpreted as a direction\r\n\r\n            var x = this.x, y = this.y, z = this.z;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\r\n            this.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\r\n            this.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n            return this.normalize();\r\n\r\n        },\r\n\r\n        divide: function ( v ) {\r\n\r\n            this.x /= v.x;\r\n            this.y /= v.y;\r\n            this.z /= v.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divideScalar: function ( scalar ) {\r\n\r\n            return this.multiplyScalar( 1 / scalar );\r\n\r\n        },\r\n\r\n        min: function ( v ) {\r\n\r\n            this.x = Math.min( this.x, v.x );\r\n            this.y = Math.min( this.y, v.y );\r\n            this.z = Math.min( this.z, v.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        max: function ( v ) {\r\n\r\n            this.x = Math.max( this.x, v.x );\r\n            this.y = Math.max( this.y, v.y );\r\n            this.z = Math.max( this.z, v.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clamp: function ( min, max ) {\r\n\r\n            // assumes min < max, componentwise\r\n\r\n            this.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n            this.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n            this.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clampScalar: function () {\r\n\r\n            var min = new Vector3();\r\n            var max = new Vector3();\r\n\r\n            return function clampScalar( minVal, maxVal ) {\r\n\r\n                min.set( minVal, minVal, minVal );\r\n                max.set( maxVal, maxVal, maxVal );\r\n\r\n                return this.clamp( min, max );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clampLength: function ( min, max ) {\r\n\r\n            var length = this.length();\r\n\r\n            return this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n        },\r\n\r\n        floor: function () {\r\n\r\n            this.x = Math.floor( this.x );\r\n            this.y = Math.floor( this.y );\r\n            this.z = Math.floor( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        ceil: function () {\r\n\r\n            this.x = Math.ceil( this.x );\r\n            this.y = Math.ceil( this.y );\r\n            this.z = Math.ceil( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        round: function () {\r\n\r\n            this.x = Math.round( this.x );\r\n            this.y = Math.round( this.y );\r\n            this.z = Math.round( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        roundToZero: function () {\r\n\r\n            this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n            this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n            this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.x = - this.x;\r\n            this.y = - this.y;\r\n            this.z = - this.z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n        },\r\n\r\n        // TODO lengthSquared?\r\n\r\n        lengthSq: function () {\r\n\r\n            return this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n        },\r\n\r\n        manhattanLength: function () {\r\n\r\n            return Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            return this.divideScalar( this.length() || 1 );\r\n\r\n        },\r\n\r\n        setLength: function ( length ) {\r\n\r\n            return this.normalize().multiplyScalar( length );\r\n\r\n        },\r\n\r\n        lerp: function ( v, alpha ) {\r\n\r\n            this.x += ( v.x - this.x ) * alpha;\r\n            this.y += ( v.y - this.y ) * alpha;\r\n            this.z += ( v.z - this.z ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerpVectors: function ( v1, v2, alpha ) {\r\n\r\n            return this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n        },\r\n\r\n        cross: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n                return this.crossVectors( v, w );\r\n\r\n            }\r\n\r\n            return this.crossVectors( this, v );\r\n\r\n        },\r\n\r\n        crossVectors: function ( a, b ) {\r\n\r\n            var ax = a.x, ay = a.y, az = a.z;\r\n            var bx = b.x, by = b.y, bz = b.z;\r\n\r\n            this.x = ay * bz - az * by;\r\n            this.y = az * bx - ax * bz;\r\n            this.z = ax * by - ay * bx;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        projectOnVector: function ( vector ) {\r\n\r\n            var scalar = vector.dot( this ) / vector.lengthSq();\r\n\r\n            return this.copy( vector ).multiplyScalar( scalar );\r\n\r\n        },\r\n\r\n        projectOnPlane: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function projectOnPlane( planeNormal ) {\r\n\r\n                v1.copy( this ).projectOnVector( planeNormal );\r\n\r\n                return this.sub( v1 );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        reflect: function () {\r\n\r\n            // reflect incident vector off plane orthogonal to normal\r\n            // normal is assumed to have unit length\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function reflect( normal ) {\r\n\r\n                return this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        angleTo: function ( v ) {\r\n\r\n            var theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\r\n\r\n            // clamp, to handle numerical problems\r\n\r\n            return Math.acos( _Math.clamp( theta, - 1, 1 ) );\r\n\r\n        },\r\n\r\n        distanceTo: function ( v ) {\r\n\r\n            return Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n        },\r\n\r\n        distanceToSquared: function ( v ) {\r\n\r\n            var dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\r\n\r\n            return dx * dx + dy * dy + dz * dz;\r\n\r\n        },\r\n\r\n        manhattanDistanceTo: function ( v ) {\r\n\r\n            return Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\r\n\r\n        },\r\n\r\n        setFromSpherical: function ( s ) {\r\n\r\n            var sinPhiRadius = Math.sin( s.phi ) * s.radius;\r\n\r\n            this.x = sinPhiRadius * Math.sin( s.theta );\r\n            this.y = Math.cos( s.phi ) * s.radius;\r\n            this.z = sinPhiRadius * Math.cos( s.theta );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCylindrical: function ( c ) {\r\n\r\n            this.x = c.radius * Math.sin( c.theta );\r\n            this.y = c.y;\r\n            this.z = c.radius * Math.cos( c.theta );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrixPosition: function ( m ) {\r\n\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 12 ];\r\n            this.y = e[ 13 ];\r\n            this.z = e[ 14 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrixScale: function ( m ) {\r\n\r\n            var sx = this.setFromMatrixColumn( m, 0 ).length();\r\n            var sy = this.setFromMatrixColumn( m, 1 ).length();\r\n            var sz = this.setFromMatrixColumn( m, 2 ).length();\r\n\r\n            this.x = sx;\r\n            this.y = sy;\r\n            this.z = sz;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrixColumn: function ( m, index ) {\r\n\r\n            return this.fromArray( m.elements, index * 4 );\r\n\r\n        },\r\n\r\n        equals: function ( v ) {\r\n\r\n            return ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.x = array[ offset ];\r\n            this.y = array[ offset + 1 ];\r\n            this.z = array[ offset + 2 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.x;\r\n            array[ offset + 1 ] = this.y;\r\n            array[ offset + 2 ] = this.z;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        fromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n            if ( offset !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\r\n\r\n            }\r\n\r\n            this.x = attribute.getX( index );\r\n            this.y = attribute.getY( index );\r\n            this.z = attribute.getZ( index );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author bhouston / http://clara.io\r\n     * @author tschw\r\n     */\r\n\r\n    function Matrix3() {\r\n\r\n        this.elements = [\r\n\r\n            1, 0, 0,\r\n            0, 1, 0,\r\n            0, 0, 1\r\n\r\n        ];\r\n\r\n        if ( arguments.length > 0 ) {\r\n\r\n            console.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Matrix3.prototype, {\r\n\r\n        isMatrix3: true,\r\n\r\n        set: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\r\n            te[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\r\n            te[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        identity: function () {\r\n\r\n            this.set(\r\n\r\n                1, 0, 0,\r\n                0, 1, 0,\r\n                0, 0, 1\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().fromArray( this.elements );\r\n\r\n        },\r\n\r\n        copy: function ( m ) {\r\n\r\n            var te = this.elements;\r\n            var me = m.elements;\r\n\r\n            te[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\r\n            te[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\r\n            te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrix4: function ( m ) {\r\n\r\n            var me = m.elements;\r\n\r\n            this.set(\r\n\r\n                me[ 0 ], me[ 4 ], me[ 8 ],\r\n                me[ 1 ], me[ 5 ], me[ 9 ],\r\n                me[ 2 ], me[ 6 ], me[ 10 ]\r\n\r\n            );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyToBufferAttribute: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function applyToBufferAttribute( attribute ) {\r\n\r\n                for ( var i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                    v1.x = attribute.getX( i );\r\n                    v1.y = attribute.getY( i );\r\n                    v1.z = attribute.getZ( i );\r\n\r\n                    v1.applyMatrix3( this );\r\n\r\n                    attribute.setXYZ( i, v1.x, v1.y, v1.z );\r\n\r\n                }\r\n\r\n                return attribute;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        multiply: function ( m ) {\r\n\r\n            return this.multiplyMatrices( this, m );\r\n\r\n        },\r\n\r\n        premultiply: function ( m ) {\r\n\r\n            return this.multiplyMatrices( m, this );\r\n\r\n        },\r\n\r\n        multiplyMatrices: function ( a, b ) {\r\n\r\n            var ae = a.elements;\r\n            var be = b.elements;\r\n            var te = this.elements;\r\n\r\n            var a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\r\n            var a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\r\n            var a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\r\n\r\n            var b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\r\n            var b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\r\n            var b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\r\n\r\n            te[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\r\n            te[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\r\n            te[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\r\n\r\n            te[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\r\n            te[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\r\n            te[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\r\n\r\n            te[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\r\n            te[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\r\n            te[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( s ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n            te[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n            te[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        determinant: function () {\r\n\r\n            var te = this.elements;\r\n\r\n            var a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n                d = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n                g = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n            return a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n        },\r\n\r\n        getInverse: function ( matrix, throwOnDegenerate ) {\r\n\r\n            if ( matrix && matrix.isMatrix4 ) {\r\n\r\n                console.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\r\n\r\n            }\r\n\r\n            var me = matrix.elements,\r\n                te = this.elements,\r\n\r\n                n11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\r\n                n12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\r\n                n13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\r\n\r\n                t11 = n33 * n22 - n32 * n23,\r\n                t12 = n32 * n13 - n33 * n12,\r\n                t13 = n23 * n12 - n22 * n13,\r\n\r\n                det = n11 * t11 + n21 * t12 + n31 * t13;\r\n\r\n            if ( det === 0 ) {\r\n\r\n                var msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\r\n\r\n                if ( throwOnDegenerate === true ) {\r\n\r\n                    throw new Error( msg );\r\n\r\n                } else {\r\n\r\n                    console.warn( msg );\r\n\r\n                }\r\n\r\n                return this.identity();\r\n\r\n            }\r\n\r\n            var detInv = 1 / det;\r\n\r\n            te[ 0 ] = t11 * detInv;\r\n            te[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\r\n            te[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\r\n\r\n            te[ 3 ] = t12 * detInv;\r\n            te[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\r\n            te[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\r\n\r\n            te[ 6 ] = t13 * detInv;\r\n            te[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\r\n            te[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        transpose: function () {\r\n\r\n            var tmp, m = this.elements;\r\n\r\n            tmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n            tmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n            tmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getNormalMatrix: function ( matrix4 ) {\r\n\r\n            return this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\r\n\r\n        },\r\n\r\n        transposeIntoArray: function ( r ) {\r\n\r\n            var m = this.elements;\r\n\r\n            r[ 0 ] = m[ 0 ];\r\n            r[ 1 ] = m[ 3 ];\r\n            r[ 2 ] = m[ 6 ];\r\n            r[ 3 ] = m[ 1 ];\r\n            r[ 4 ] = m[ 4 ];\r\n            r[ 5 ] = m[ 7 ];\r\n            r[ 6 ] = m[ 2 ];\r\n            r[ 7 ] = m[ 5 ];\r\n            r[ 8 ] = m[ 8 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\r\n\r\n            var c = Math.cos( rotation );\r\n            var s = Math.sin( rotation );\r\n\r\n            this.set(\r\n                sx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\r\n                - sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\r\n                0, 0, 1\r\n            );\r\n\r\n        },\r\n\r\n        scale: function ( sx, sy ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\r\n            te[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotate: function ( theta ) {\r\n\r\n            var c = Math.cos( theta );\r\n            var s = Math.sin( theta );\r\n\r\n            var te = this.elements;\r\n\r\n            var a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\r\n            var a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\r\n\r\n            te[ 0 ] = c * a11 + s * a21;\r\n            te[ 3 ] = c * a12 + s * a22;\r\n            te[ 6 ] = c * a13 + s * a23;\r\n\r\n            te[ 1 ] = - s * a11 + c * a21;\r\n            te[ 4 ] = - s * a12 + c * a22;\r\n            te[ 7 ] = - s * a13 + c * a23;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( tx, ty ) {\r\n\r\n            var te = this.elements;\r\n\r\n            te[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\r\n            te[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( matrix ) {\r\n\r\n            var te = this.elements;\r\n            var me = matrix.elements;\r\n\r\n            for ( var i = 0; i < 9; i ++ ) {\r\n\r\n                if ( te[ i ] !== me[ i ] ) return false;\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            for ( var i = 0; i < 9; i ++ ) {\r\n\r\n                this.elements[ i ] = array[ i + offset ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            var te = this.elements;\r\n\r\n            array[ offset ] = te[ 0 ];\r\n            array[ offset + 1 ] = te[ 1 ];\r\n            array[ offset + 2 ] = te[ 2 ];\r\n\r\n            array[ offset + 3 ] = te[ 3 ];\r\n            array[ offset + 4 ] = te[ 4 ];\r\n            array[ offset + 5 ] = te[ 5 ];\r\n\r\n            array[ offset + 6 ] = te[ 6 ];\r\n            array[ offset + 7 ] = te[ 7 ];\r\n            array[ offset + 8 ] = te[ 8 ];\r\n\r\n            return array;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author szimek / https://github.com/szimek/\r\n     */\r\n\r\n    var textureId = 0;\r\n\r\n    function Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n        Object.defineProperty( this, 'id', { value: textureId ++ } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n\r\n        this.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\r\n        this.mipmaps = [];\r\n\r\n        this.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\r\n\r\n        this.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\r\n        this.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\r\n\r\n        this.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\r\n        this.minFilter = minFilter !== undefined ? minFilter : LinearMipMapLinearFilter;\r\n\r\n        this.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n        this.format = format !== undefined ? format : RGBAFormat;\r\n        this.type = type !== undefined ? type : UnsignedByteType;\r\n\r\n        this.offset = new Vector2( 0, 0 );\r\n        this.repeat = new Vector2( 1, 1 );\r\n        this.center = new Vector2( 0, 0 );\r\n        this.rotation = 0;\r\n\r\n        this.matrixAutoUpdate = true;\r\n        this.matrix = new Matrix3();\r\n\r\n        this.generateMipmaps = true;\r\n        this.premultiplyAlpha = false;\r\n        this.flipY = true;\r\n        this.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n        // Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\r\n        //\r\n        // Also changing the encoding after already used by a Material will not automatically make the Material\r\n        // update.  You need to explicitly call Material.needsUpdate to trigger it to recompile.\r\n        this.encoding = encoding !== undefined ? encoding : LinearEncoding;\r\n\r\n        this.version = 0;\r\n        this.onUpdate = null;\r\n\r\n    }\r\n\r\n    Texture.DEFAULT_IMAGE = undefined;\r\n    Texture.DEFAULT_MAPPING = UVMapping;\r\n\r\n    Texture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Texture,\r\n\r\n        isTexture: true,\r\n\r\n        updateMatrix: function () {\r\n\r\n            this.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.name = source.name;\r\n\r\n            this.image = source.image;\r\n            this.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n            this.mapping = source.mapping;\r\n\r\n            this.wrapS = source.wrapS;\r\n            this.wrapT = source.wrapT;\r\n\r\n            this.magFilter = source.magFilter;\r\n            this.minFilter = source.minFilter;\r\n\r\n            this.anisotropy = source.anisotropy;\r\n\r\n            this.format = source.format;\r\n            this.type = source.type;\r\n\r\n            this.offset.copy( source.offset );\r\n            this.repeat.copy( source.repeat );\r\n            this.center.copy( source.center );\r\n            this.rotation = source.rotation;\r\n\r\n            this.matrixAutoUpdate = source.matrixAutoUpdate;\r\n            this.matrix.copy( source.matrix );\r\n\r\n            this.generateMipmaps = source.generateMipmaps;\r\n            this.premultiplyAlpha = source.premultiplyAlpha;\r\n            this.flipY = source.flipY;\r\n            this.unpackAlignment = source.unpackAlignment;\r\n            this.encoding = source.encoding;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n            if ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n                return meta.textures[ this.uuid ];\r\n\r\n            }\r\n\r\n            function getDataURL( image ) {\r\n\r\n                var canvas;\r\n\r\n                if ( image instanceof HTMLCanvasElement ) {\r\n\r\n                    canvas = image;\r\n\r\n                } else {\r\n\r\n                    canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n                    canvas.width = image.width;\r\n                    canvas.height = image.height;\r\n\r\n                    var context = canvas.getContext( '2d' );\r\n\r\n                    if ( image instanceof ImageData ) {\r\n\r\n                        context.putImageData( image, 0, 0 );\r\n\r\n                    } else {\r\n\r\n                        context.drawImage( image, 0, 0, image.width, image.height );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n                    return canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n                } else {\r\n\r\n                    return canvas.toDataURL( 'image/png' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var output = {\r\n\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Texture',\r\n                    generator: 'Texture.toJSON'\r\n                },\r\n\r\n                uuid: this.uuid,\r\n                name: this.name,\r\n\r\n                mapping: this.mapping,\r\n\r\n                repeat: [ this.repeat.x, this.repeat.y ],\r\n                offset: [ this.offset.x, this.offset.y ],\r\n                center: [ this.center.x, this.center.y ],\r\n                rotation: this.rotation,\r\n\r\n                wrap: [ this.wrapS, this.wrapT ],\r\n\r\n                format: this.format,\r\n                minFilter: this.minFilter,\r\n                magFilter: this.magFilter,\r\n                anisotropy: this.anisotropy,\r\n\r\n                flipY: this.flipY\r\n\r\n            };\r\n\r\n            if ( this.image !== undefined ) {\r\n\r\n                // TODO: Move to THREE.Image\r\n\r\n                var image = this.image;\r\n\r\n                if ( image.uuid === undefined ) {\r\n\r\n                    image.uuid = _Math.generateUUID(); // UGH\r\n\r\n                }\r\n\r\n                if ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\r\n\r\n                    meta.images[ image.uuid ] = {\r\n                        uuid: image.uuid,\r\n                        url: getDataURL( image )\r\n                    };\r\n\r\n                }\r\n\r\n                output.image = image.uuid;\r\n\r\n            }\r\n\r\n            if ( ! isRootObject ) {\r\n\r\n                meta.textures[ this.uuid ] = output;\r\n\r\n            }\r\n\r\n            return output;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        },\r\n\r\n        transformUv: function ( uv ) {\r\n\r\n            if ( this.mapping !== UVMapping ) return;\r\n\r\n            uv.applyMatrix3( this.matrix );\r\n\r\n            if ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n                switch ( this.wrapS ) {\r\n\r\n                    case RepeatWrapping:\r\n\r\n                        uv.x = uv.x - Math.floor( uv.x );\r\n                        break;\r\n\r\n                    case ClampToEdgeWrapping:\r\n\r\n                        uv.x = uv.x < 0 ? 0 : 1;\r\n                        break;\r\n\r\n                    case MirroredRepeatWrapping:\r\n\r\n                        if ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n                            uv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n                        } else {\r\n\r\n                            uv.x = uv.x - Math.floor( uv.x );\r\n\r\n                        }\r\n                        break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n                switch ( this.wrapT ) {\r\n\r\n                    case RepeatWrapping:\r\n\r\n                        uv.y = uv.y - Math.floor( uv.y );\r\n                        break;\r\n\r\n                    case ClampToEdgeWrapping:\r\n\r\n                        uv.y = uv.y < 0 ? 0 : 1;\r\n                        break;\r\n\r\n                    case MirroredRepeatWrapping:\r\n\r\n                        if ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n                            uv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n                        } else {\r\n\r\n                            uv.y = uv.y - Math.floor( uv.y );\r\n\r\n                        }\r\n                        break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.flipY ) {\r\n\r\n                uv.y = 1 - uv.y;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperty( Texture.prototype, \"needsUpdate\", {\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value === true ) this.version ++;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author supereggbert / http://www.paulbrunt.co.uk/\r\n     * @author philogb / http://blog.thejit.org/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author egraether / http://egraether.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Vector4( x, y, z, w ) {\r\n\r\n        this.x = x || 0;\r\n        this.y = y || 0;\r\n        this.z = z || 0;\r\n        this.w = ( w !== undefined ) ? w : 1;\r\n\r\n    }\r\n\r\n    Object.assign( Vector4.prototype, {\r\n\r\n        isVector4: true,\r\n\r\n        set: function ( x, y, z, w ) {\r\n\r\n            this.x = x;\r\n            this.y = y;\r\n            this.z = z;\r\n            this.w = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.x = scalar;\r\n            this.y = scalar;\r\n            this.z = scalar;\r\n            this.w = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setX: function ( x ) {\r\n\r\n            this.x = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( y ) {\r\n\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setZ: function ( z ) {\r\n\r\n            this.z = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setW: function ( w ) {\r\n\r\n            this.w = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponent: function ( index, value ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: this.x = value; break;\r\n                case 1: this.y = value; break;\r\n                case 2: this.z = value; break;\r\n                case 3: this.w = value; break;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getComponent: function ( index ) {\r\n\r\n            switch ( index ) {\r\n\r\n                case 0: return this.x;\r\n                case 1: return this.y;\r\n                case 2: return this.z;\r\n                case 3: return this.w;\r\n                default: throw new Error( 'index is out of range: ' + index );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n        },\r\n\r\n        copy: function ( v ) {\r\n\r\n            this.x = v.x;\r\n            this.y = v.y;\r\n            this.z = v.z;\r\n            this.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        add: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n                return this.addVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x += v.x;\r\n            this.y += v.y;\r\n            this.z += v.z;\r\n            this.w += v.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.x += s;\r\n            this.y += s;\r\n            this.z += s;\r\n            this.w += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addVectors: function ( a, b ) {\r\n\r\n            this.x = a.x + b.x;\r\n            this.y = a.y + b.y;\r\n            this.z = a.z + b.z;\r\n            this.w = a.w + b.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScaledVector: function ( v, s ) {\r\n\r\n            this.x += v.x * s;\r\n            this.y += v.y * s;\r\n            this.z += v.z * s;\r\n            this.w += v.w * s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( v, w ) {\r\n\r\n            if ( w !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n                return this.subVectors( v, w );\r\n\r\n            }\r\n\r\n            this.x -= v.x;\r\n            this.y -= v.y;\r\n            this.z -= v.z;\r\n            this.w -= v.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subScalar: function ( s ) {\r\n\r\n            this.x -= s;\r\n            this.y -= s;\r\n            this.z -= s;\r\n            this.w -= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        subVectors: function ( a, b ) {\r\n\r\n            this.x = a.x - b.x;\r\n            this.y = a.y - b.y;\r\n            this.z = a.z - b.z;\r\n            this.w = a.w - b.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( scalar ) {\r\n\r\n            this.x *= scalar;\r\n            this.y *= scalar;\r\n            this.z *= scalar;\r\n            this.w *= scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( m ) {\r\n\r\n            var x = this.x, y = this.y, z = this.z, w = this.w;\r\n            var e = m.elements;\r\n\r\n            this.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n            this.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n            this.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n            this.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        divideScalar: function ( scalar ) {\r\n\r\n            return this.multiplyScalar( 1 / scalar );\r\n\r\n        },\r\n\r\n        setAxisAngleFromQuaternion: function ( q ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n            // q is assumed to be normalized\r\n\r\n            this.w = 2 * Math.acos( q.w );\r\n\r\n            var s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n            if ( s < 0.0001 ) {\r\n\r\n                this.x = 1;\r\n                this.y = 0;\r\n                this.z = 0;\r\n\r\n            } else {\r\n\r\n                this.x = q.x / s;\r\n                this.y = q.y / s;\r\n                this.z = q.z / s;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n            // http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            var angle, x, y, z,\t\t// variables for result\r\n                epsilon = 0.01,\t\t// margin to allow for rounding errors\r\n                epsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n                te = m.elements,\r\n\r\n                m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n                m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n                m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n            if ( ( Math.abs( m12 - m21 ) < epsilon ) &&\r\n                ( Math.abs( m13 - m31 ) < epsilon ) &&\r\n                ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n                // singularity found\r\n                // first check for identity matrix which must have +1 for all terms\r\n                // in leading diagonal and zero in other terms\r\n\r\n                if ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\r\n                    ( Math.abs( m13 + m31 ) < epsilon2 ) &&\r\n                    ( Math.abs( m23 + m32 ) < epsilon2 ) &&\r\n                    ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n                    // this singularity is identity matrix so angle = 0\r\n\r\n                    this.set( 1, 0, 0, 0 );\r\n\r\n                    return this; // zero angle, arbitrary axis\r\n\r\n                }\r\n\r\n                // otherwise this singularity is angle = 180\r\n\r\n                angle = Math.PI;\r\n\r\n                var xx = ( m11 + 1 ) / 2;\r\n                var yy = ( m22 + 1 ) / 2;\r\n                var zz = ( m33 + 1 ) / 2;\r\n                var xy = ( m12 + m21 ) / 4;\r\n                var xz = ( m13 + m31 ) / 4;\r\n                var yz = ( m23 + m32 ) / 4;\r\n\r\n                if ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n                    // m11 is the largest diagonal term\r\n\r\n                    if ( xx < epsilon ) {\r\n\r\n                        x = 0;\r\n                        y = 0.707106781;\r\n                        z = 0.707106781;\r\n\r\n                    } else {\r\n\r\n                        x = Math.sqrt( xx );\r\n                        y = xy / x;\r\n                        z = xz / x;\r\n\r\n                    }\r\n\r\n                } else if ( yy > zz ) {\r\n\r\n                    // m22 is the largest diagonal term\r\n\r\n                    if ( yy < epsilon ) {\r\n\r\n                        x = 0.707106781;\r\n                        y = 0;\r\n                        z = 0.707106781;\r\n\r\n                    } else {\r\n\r\n                        y = Math.sqrt( yy );\r\n                        x = xy / y;\r\n                        z = yz / y;\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // m33 is the largest diagonal term so base result on this\r\n\r\n                    if ( zz < epsilon ) {\r\n\r\n                        x = 0.707106781;\r\n                        y = 0.707106781;\r\n                        z = 0;\r\n\r\n                    } else {\r\n\r\n                        z = Math.sqrt( zz );\r\n                        x = xz / z;\r\n                        y = yz / z;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.set( x, y, z, angle );\r\n\r\n                return this; // return 180 deg rotation\r\n\r\n            }\r\n\r\n            // as we have reached here there are no singularities so we can handle normally\r\n\r\n            var s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\r\n                ( m13 - m31 ) * ( m13 - m31 ) +\r\n                ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n            if ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n            // prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n            // caught by singularity test above, but I've left it in just in case\r\n\r\n            this.x = ( m32 - m23 ) / s;\r\n            this.y = ( m13 - m31 ) / s;\r\n            this.z = ( m21 - m12 ) / s;\r\n            this.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        min: function ( v ) {\r\n\r\n            this.x = Math.min( this.x, v.x );\r\n            this.y = Math.min( this.y, v.y );\r\n            this.z = Math.min( this.z, v.z );\r\n            this.w = Math.min( this.w, v.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        max: function ( v ) {\r\n\r\n            this.x = Math.max( this.x, v.x );\r\n            this.y = Math.max( this.y, v.y );\r\n            this.z = Math.max( this.z, v.z );\r\n            this.w = Math.max( this.w, v.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clamp: function ( min, max ) {\r\n\r\n            // assumes min < max, componentwise\r\n\r\n            this.x = Math.max( min.x, Math.min( max.x, this.x ) );\r\n            this.y = Math.max( min.y, Math.min( max.y, this.y ) );\r\n            this.z = Math.max( min.z, Math.min( max.z, this.z ) );\r\n            this.w = Math.max( min.w, Math.min( max.w, this.w ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clampScalar: function () {\r\n\r\n            var min, max;\r\n\r\n            return function clampScalar( minVal, maxVal ) {\r\n\r\n                if ( min === undefined ) {\r\n\r\n                    min = new Vector4();\r\n                    max = new Vector4();\r\n\r\n                }\r\n\r\n                min.set( minVal, minVal, minVal, minVal );\r\n                max.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n                return this.clamp( min, max );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clampLength: function ( min, max ) {\r\n\r\n            var length = this.length();\r\n\r\n            return this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\r\n\r\n        },\r\n\r\n        floor: function () {\r\n\r\n            this.x = Math.floor( this.x );\r\n            this.y = Math.floor( this.y );\r\n            this.z = Math.floor( this.z );\r\n            this.w = Math.floor( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        ceil: function () {\r\n\r\n            this.x = Math.ceil( this.x );\r\n            this.y = Math.ceil( this.y );\r\n            this.z = Math.ceil( this.z );\r\n            this.w = Math.ceil( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        round: function () {\r\n\r\n            this.x = Math.round( this.x );\r\n            this.y = Math.round( this.y );\r\n            this.z = Math.round( this.z );\r\n            this.w = Math.round( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        roundToZero: function () {\r\n\r\n            this.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n            this.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n            this.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n            this.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.x = - this.x;\r\n            this.y = - this.y;\r\n            this.z = - this.z;\r\n            this.w = - this.w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dot: function ( v ) {\r\n\r\n            return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n        },\r\n\r\n        lengthSq: function () {\r\n\r\n            return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n        },\r\n\r\n        length: function () {\r\n\r\n            return Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n        },\r\n\r\n        manhattanLength: function () {\r\n\r\n            return Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            return this.divideScalar( this.length() || 1 );\r\n\r\n        },\r\n\r\n        setLength: function ( length ) {\r\n\r\n            return this.normalize().multiplyScalar( length );\r\n\r\n        },\r\n\r\n        lerp: function ( v, alpha ) {\r\n\r\n            this.x += ( v.x - this.x ) * alpha;\r\n            this.y += ( v.y - this.y ) * alpha;\r\n            this.z += ( v.z - this.z ) * alpha;\r\n            this.w += ( v.w - this.w ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerpVectors: function ( v1, v2, alpha ) {\r\n\r\n            return this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n        },\r\n\r\n        equals: function ( v ) {\r\n\r\n            return ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.x = array[ offset ];\r\n            this.y = array[ offset + 1 ];\r\n            this.z = array[ offset + 2 ];\r\n            this.w = array[ offset + 3 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.x;\r\n            array[ offset + 1 ] = this.y;\r\n            array[ offset + 2 ] = this.z;\r\n            array[ offset + 3 ] = this.w;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        fromBufferAttribute: function ( attribute, index, offset ) {\r\n\r\n            if ( offset !== undefined ) {\r\n\r\n                console.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\r\n\r\n            }\r\n\r\n            this.x = attribute.getX( index );\r\n            this.y = attribute.getY( index );\r\n            this.z = attribute.getZ( index );\r\n            this.w = attribute.getW( index );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author szimek / https://github.com/szimek/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author Marius Kintel / https://github.com/kintel\r\n     */\r\n\r\n    /*\r\n\t In options, we can specify:\r\n\t * Texture parameters for an auto-generated target texture\r\n\t * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\r\n\t*/\r\n    function WebGLRenderTarget( width, height, options ) {\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.scissor = new Vector4( 0, 0, width, height );\r\n        this.scissorTest = false;\r\n\r\n        this.viewport = new Vector4( 0, 0, width, height );\r\n\r\n        options = options || {};\r\n\r\n        if ( options.minFilter === undefined ) options.minFilter = LinearFilter;\r\n\r\n        this.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\r\n\r\n        this.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : true;\r\n\r\n        this.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n        this.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n        this.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\r\n\r\n    }\r\n\r\n    WebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: WebGLRenderTarget,\r\n\r\n        isWebGLRenderTarget: true,\r\n\r\n        setSize: function ( width, height ) {\r\n\r\n            if ( this.width !== width || this.height !== height ) {\r\n\r\n                this.width = width;\r\n                this.height = height;\r\n\r\n                this.dispose();\r\n\r\n            }\r\n\r\n            this.viewport.set( 0, 0, width, height );\r\n            this.scissor.set( 0, 0, width, height );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.width = source.width;\r\n            this.height = source.height;\r\n\r\n            this.viewport.copy( source.viewport );\r\n\r\n            this.texture = source.texture.clone();\r\n\r\n            this.depthBuffer = source.depthBuffer;\r\n            this.stencilBuffer = source.stencilBuffer;\r\n            this.depthTexture = source.depthTexture;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com\r\n     */\r\n\r\n    function WebGLRenderTargetCube( width, height, options ) {\r\n\r\n        WebGLRenderTarget.call( this, width, height, options );\r\n\r\n        this.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n        this.activeMipMapLevel = 0;\r\n\r\n    }\r\n\r\n    WebGLRenderTargetCube.prototype = Object.create( WebGLRenderTarget.prototype );\r\n    WebGLRenderTargetCube.prototype.constructor = WebGLRenderTargetCube;\r\n\r\n    WebGLRenderTargetCube.prototype.isWebGLRenderTargetCube = true;\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n        Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n        this.image = { data: data, width: width, height: height };\r\n\r\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n        this.generateMipmaps = false;\r\n        this.flipY = false;\r\n        this.unpackAlignment = 1;\r\n\r\n    }\r\n\r\n    DataTexture.prototype = Object.create( Texture.prototype );\r\n    DataTexture.prototype.constructor = DataTexture;\r\n\r\n    DataTexture.prototype.isDataTexture = true;\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Box3( min, max ) {\r\n\r\n        this.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\r\n        this.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n    }\r\n\r\n    Object.assign( Box3.prototype, {\r\n\r\n        isBox3: true,\r\n\r\n        set: function ( min, max ) {\r\n\r\n            this.min.copy( min );\r\n            this.max.copy( max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromArray: function ( array ) {\r\n\r\n            var minX = + Infinity;\r\n            var minY = + Infinity;\r\n            var minZ = + Infinity;\r\n\r\n            var maxX = - Infinity;\r\n            var maxY = - Infinity;\r\n            var maxZ = - Infinity;\r\n\r\n            for ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n                var x = array[ i ];\r\n                var y = array[ i + 1 ];\r\n                var z = array[ i + 2 ];\r\n\r\n                if ( x < minX ) minX = x;\r\n                if ( y < minY ) minY = y;\r\n                if ( z < minZ ) minZ = z;\r\n\r\n                if ( x > maxX ) maxX = x;\r\n                if ( y > maxY ) maxY = y;\r\n                if ( z > maxZ ) maxZ = z;\r\n\r\n            }\r\n\r\n            this.min.set( minX, minY, minZ );\r\n            this.max.set( maxX, maxY, maxZ );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromBufferAttribute: function ( attribute ) {\r\n\r\n            var minX = + Infinity;\r\n            var minY = + Infinity;\r\n            var minZ = + Infinity;\r\n\r\n            var maxX = - Infinity;\r\n            var maxY = - Infinity;\r\n            var maxZ = - Infinity;\r\n\r\n            for ( var i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                var x = attribute.getX( i );\r\n                var y = attribute.getY( i );\r\n                var z = attribute.getZ( i );\r\n\r\n                if ( x < minX ) minX = x;\r\n                if ( y < minY ) minY = y;\r\n                if ( z < minZ ) minZ = z;\r\n\r\n                if ( x > maxX ) maxX = x;\r\n                if ( y > maxY ) maxY = y;\r\n                if ( z > maxZ ) maxZ = z;\r\n\r\n            }\r\n\r\n            this.min.set( minX, minY, minZ );\r\n            this.max.set( maxX, maxY, maxZ );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.makeEmpty();\r\n\r\n            for ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n                this.expandByPoint( points[ i ] );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCenterAndSize: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function setFromCenterAndSize( center, size ) {\r\n\r\n                var halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n                this.min.copy( center ).sub( halfSize );\r\n                this.max.copy( center ).add( halfSize );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setFromObject: function ( object ) {\r\n\r\n            this.makeEmpty();\r\n\r\n            return this.expandByObject( object );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( box ) {\r\n\r\n            this.min.copy( box.min );\r\n            this.max.copy( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeEmpty: function () {\r\n\r\n            this.min.x = this.min.y = this.min.z = + Infinity;\r\n            this.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        isEmpty: function () {\r\n\r\n            // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n            return ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n        },\r\n\r\n        getCenter: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .getCenter() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n        },\r\n\r\n        getSize: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .getSize() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n        },\r\n\r\n        expandByPoint: function ( point ) {\r\n\r\n            this.min.min( point );\r\n            this.max.max( point );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByVector: function ( vector ) {\r\n\r\n            this.min.sub( vector );\r\n            this.max.add( vector );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByScalar: function ( scalar ) {\r\n\r\n            this.min.addScalar( - scalar );\r\n            this.max.addScalar( scalar );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByObject: function () {\r\n\r\n            // Computes the world-axis-aligned bounding box of an object (including its children),\r\n            // accounting for both the object's, and children's, world transforms\r\n\r\n            var scope, i, l;\r\n\r\n            var v1 = new Vector3();\r\n\r\n            function traverse( node ) {\r\n\r\n                var geometry = node.geometry;\r\n\r\n                if ( geometry !== undefined ) {\r\n\r\n                    if ( geometry.isGeometry ) {\r\n\r\n                        var vertices = geometry.vertices;\r\n\r\n                        for ( i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n                            v1.copy( vertices[ i ] );\r\n                            v1.applyMatrix4( node.matrixWorld );\r\n\r\n                            scope.expandByPoint( v1 );\r\n\r\n                        }\r\n\r\n                    } else if ( geometry.isBufferGeometry ) {\r\n\r\n                        var attribute = geometry.attributes.position;\r\n\r\n                        if ( attribute !== undefined ) {\r\n\r\n                            for ( i = 0, l = attribute.count; i < l; i ++ ) {\r\n\r\n                                v1.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\r\n\r\n                                scope.expandByPoint( v1 );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return function expandByObject( object ) {\r\n\r\n                scope = this;\r\n\r\n                object.updateMatrixWorld( true );\r\n\r\n                object.traverse( traverse );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return point.x < this.min.x || point.x > this.max.x ||\r\n            point.y < this.min.y || point.y > this.max.y ||\r\n            point.z < this.min.z || point.z > this.max.z ? false : true;\r\n\r\n        },\r\n\r\n        containsBox: function ( box ) {\r\n\r\n            return this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n                this.min.y <= box.min.y && box.max.y <= this.max.y &&\r\n                this.min.z <= box.min.z && box.max.z <= this.max.z;\r\n\r\n        },\r\n\r\n        getParameter: function ( point, target ) {\r\n\r\n            // This can potentially have a divide by zero if the box\r\n            // has a size dimension of 0.\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .getParameter() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.set(\r\n                ( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n                ( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n                ( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n            );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            // using 6 splitting planes to rule out intersections.\r\n            return box.max.x < this.min.x || box.min.x > this.max.x ||\r\n            box.max.y < this.min.y || box.min.y > this.max.y ||\r\n            box.max.z < this.min.z || box.min.z > this.max.z ? false : true;\r\n\r\n        },\r\n\r\n        intersectsSphere: ( function () {\r\n\r\n            var closestPoint = new Vector3();\r\n\r\n            return function intersectsSphere( sphere ) {\r\n\r\n                // Find the point on the AABB closest to the sphere center.\r\n                this.clampPoint( sphere.center, closestPoint );\r\n\r\n                // If that point is inside the sphere, the AABB and sphere intersect.\r\n                return closestPoint.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        intersectsPlane: function ( plane ) {\r\n\r\n            // We compute the minimum and maximum dot product values. If those values\r\n            // are on the same side (back or front) of the plane, then there is no intersection.\r\n\r\n            var min, max;\r\n\r\n            if ( plane.normal.x > 0 ) {\r\n\r\n                min = plane.normal.x * this.min.x;\r\n                max = plane.normal.x * this.max.x;\r\n\r\n            } else {\r\n\r\n                min = plane.normal.x * this.max.x;\r\n                max = plane.normal.x * this.min.x;\r\n\r\n            }\r\n\r\n            if ( plane.normal.y > 0 ) {\r\n\r\n                min += plane.normal.y * this.min.y;\r\n                max += plane.normal.y * this.max.y;\r\n\r\n            } else {\r\n\r\n                min += plane.normal.y * this.max.y;\r\n                max += plane.normal.y * this.min.y;\r\n\r\n            }\r\n\r\n            if ( plane.normal.z > 0 ) {\r\n\r\n                min += plane.normal.z * this.min.z;\r\n                max += plane.normal.z * this.max.z;\r\n\r\n            } else {\r\n\r\n                min += plane.normal.z * this.max.z;\r\n                max += plane.normal.z * this.min.z;\r\n\r\n            }\r\n\r\n            return ( min <= plane.constant && max >= plane.constant );\r\n\r\n        },\r\n\r\n        intersectsTriangle: ( function () {\r\n\r\n            // triangle centered vertices\r\n            var v0 = new Vector3();\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            // triangle edge vectors\r\n            var f0 = new Vector3();\r\n            var f1 = new Vector3();\r\n            var f2 = new Vector3();\r\n\r\n            var testAxis = new Vector3();\r\n\r\n            var center = new Vector3();\r\n            var extents = new Vector3();\r\n\r\n            var triangleNormal = new Vector3();\r\n\r\n            function satForAxes( axes ) {\r\n\r\n                var i, j;\r\n\r\n                for ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\r\n\r\n                    testAxis.fromArray( axes, i );\r\n                    // project the aabb onto the seperating axis\r\n                    var r = extents.x * Math.abs( testAxis.x ) + extents.y * Math.abs( testAxis.y ) + extents.z * Math.abs( testAxis.z );\r\n                    // project all 3 vertices of the triangle onto the seperating axis\r\n                    var p0 = v0.dot( testAxis );\r\n                    var p1 = v1.dot( testAxis );\r\n                    var p2 = v2.dot( testAxis );\r\n                    // actual test, basically see if either of the most extreme of the triangle points intersects r\r\n                    if ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\r\n\r\n                        // points of the projected triangle are outside the projected half-length of the aabb\r\n                        // the axis is seperating and we can exit\r\n                        return false;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            return function intersectsTriangle( triangle ) {\r\n\r\n                if ( this.isEmpty() ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                // compute box center and extents\r\n                this.getCenter( center );\r\n                extents.subVectors( this.max, center );\r\n\r\n                // translate triangle to aabb origin\r\n                v0.subVectors( triangle.a, center );\r\n                v1.subVectors( triangle.b, center );\r\n                v2.subVectors( triangle.c, center );\r\n\r\n                // compute edge vectors for triangle\r\n                f0.subVectors( v1, v0 );\r\n                f1.subVectors( v2, v1 );\r\n                f2.subVectors( v0, v2 );\r\n\r\n                // test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\r\n                // make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\r\n                // axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\r\n                var axes = [\r\n                    0, - f0.z, f0.y, 0, - f1.z, f1.y, 0, - f2.z, f2.y,\r\n                    f0.z, 0, - f0.x, f1.z, 0, - f1.x, f2.z, 0, - f2.x,\r\n                    - f0.y, f0.x, 0, - f1.y, f1.x, 0, - f2.y, f2.x, 0\r\n                ];\r\n                if ( ! satForAxes( axes ) ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                // test 3 face normals from the aabb\r\n                axes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\r\n                if ( ! satForAxes( axes ) ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n                // finally testing the face normal of the triangle\r\n                // use already existing triangle edge vectors here\r\n                triangleNormal.crossVectors( f0, f1 );\r\n                axes = [ triangleNormal.x, triangleNormal.y, triangleNormal.z ];\r\n                return satForAxes( axes );\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        clampPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box3: .clampPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( point ).clamp( this.min, this.max );\r\n\r\n        },\r\n\r\n        distanceToPoint: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function distanceToPoint( point ) {\r\n\r\n                var clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n                return clampedPoint.sub( point ).length();\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getBoundingSphere: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function getBoundingSphere( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Box3: .getBoundingSphere() target is now required' );\r\n                    target = new Sphere();\r\n\r\n                }\r\n\r\n                this.getCenter( target.center );\r\n\r\n                target.radius = this.getSize( v1 ).length() * 0.5;\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersect: function ( box ) {\r\n\r\n            this.min.max( box.min );\r\n            this.max.min( box.max );\r\n\r\n            // ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\r\n            if ( this.isEmpty() ) this.makeEmpty();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        union: function ( box ) {\r\n\r\n            this.min.min( box.min );\r\n            this.max.max( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( matrix ) {\r\n\r\n            // transform of empty box is an empty box.\r\n            if ( this.isEmpty( ) ) return this;\r\n\r\n            var m = matrix.elements;\r\n\r\n            var xax = m[ 0 ] * this.min.x, xay = m[ 1 ] * this.min.x, xaz = m[ 2 ] * this.min.x;\r\n            var xbx = m[ 0 ] * this.max.x, xby = m[ 1 ] * this.max.x, xbz = m[ 2 ] * this.max.x;\r\n            var yax = m[ 4 ] * this.min.y, yay = m[ 5 ] * this.min.y, yaz = m[ 6 ] * this.min.y;\r\n            var ybx = m[ 4 ] * this.max.y, yby = m[ 5 ] * this.max.y, ybz = m[ 6 ] * this.max.y;\r\n            var zax = m[ 8 ] * this.min.z, zay = m[ 9 ] * this.min.z, zaz = m[ 10 ] * this.min.z;\r\n            var zbx = m[ 8 ] * this.max.z, zby = m[ 9 ] * this.max.z, zbz = m[ 10 ] * this.max.z;\r\n\r\n            this.min.x = Math.min( xax, xbx ) + Math.min( yax, ybx ) + Math.min( zax, zbx ) + m[ 12 ];\r\n            this.min.y = Math.min( xay, xby ) + Math.min( yay, yby ) + Math.min( zay, zby ) + m[ 13 ];\r\n            this.min.z = Math.min( xaz, xbz ) + Math.min( yaz, ybz ) + Math.min( zaz, zbz ) + m[ 14 ];\r\n            this.max.x = Math.max( xax, xbx ) + Math.max( yax, ybx ) + Math.max( zax, zbx ) + m[ 12 ];\r\n            this.max.y = Math.max( xay, xby ) + Math.max( yay, yby ) + Math.max( zay, zby ) + m[ 13 ];\r\n            this.max.z = Math.max( xaz, xbz ) + Math.max( yaz, ybz ) + Math.max( zaz, zbz ) + m[ 14 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.min.add( offset );\r\n            this.max.add( offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( box ) {\r\n\r\n            return box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Sphere( center, radius ) {\r\n\r\n        this.center = ( center !== undefined ) ? center : new Vector3();\r\n        this.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n    }\r\n\r\n    Object.assign( Sphere.prototype, {\r\n\r\n        set: function ( center, radius ) {\r\n\r\n            this.center.copy( center );\r\n            this.radius = radius;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function () {\r\n\r\n            var box = new Box3();\r\n\r\n            return function setFromPoints( points, optionalCenter ) {\r\n\r\n                var center = this.center;\r\n\r\n                if ( optionalCenter !== undefined ) {\r\n\r\n                    center.copy( optionalCenter );\r\n\r\n                } else {\r\n\r\n                    box.setFromPoints( points ).getCenter( center );\r\n\r\n                }\r\n\r\n                var maxRadiusSq = 0;\r\n\r\n                for ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n                    maxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n                }\r\n\r\n                this.radius = Math.sqrt( maxRadiusSq );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( sphere ) {\r\n\r\n            this.center.copy( sphere.center );\r\n            this.radius = sphere.radius;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        empty: function () {\r\n\r\n            return ( this.radius <= 0 );\r\n\r\n        },\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n        },\r\n\r\n        distanceToPoint: function ( point ) {\r\n\r\n            return ( point.distanceTo( this.center ) - this.radius );\r\n\r\n        },\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            var radiusSum = this.radius + sphere.radius;\r\n\r\n            return sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            return box.intersectsSphere( this );\r\n\r\n        },\r\n\r\n        intersectsPlane: function ( plane ) {\r\n\r\n            return Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\r\n\r\n        },\r\n\r\n        clampPoint: function ( point, target ) {\r\n\r\n            var deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Sphere: .clampPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            target.copy( point );\r\n\r\n            if ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n                target.sub( this.center ).normalize();\r\n                target.multiplyScalar( this.radius ).add( this.center );\r\n\r\n            }\r\n\r\n            return target;\r\n\r\n        },\r\n\r\n        getBoundingBox: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\r\n                target = new Box3();\r\n\r\n            }\r\n\r\n            target.set( this.center, this.center );\r\n            target.expandByScalar( this.radius );\r\n\r\n            return target;\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( matrix ) {\r\n\r\n            this.center.applyMatrix4( matrix );\r\n            this.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.center.add( offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( sphere ) {\r\n\r\n            return sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Plane( normal, constant ) {\r\n\r\n        // normal is assumed to be normalized\r\n\r\n        this.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\r\n        this.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n    }\r\n\r\n    Object.assign( Plane.prototype, {\r\n\r\n        set: function ( normal, constant ) {\r\n\r\n            this.normal.copy( normal );\r\n            this.constant = constant;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setComponents: function ( x, y, z, w ) {\r\n\r\n            this.normal.set( x, y, z );\r\n            this.constant = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n            this.normal.copy( normal );\r\n            this.constant = - point.dot( this.normal );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCoplanarPoints: function () {\r\n\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            return function setFromCoplanarPoints( a, b, c ) {\r\n\r\n                var normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n                // Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n                this.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( plane ) {\r\n\r\n            this.normal.copy( plane.normal );\r\n            this.constant = plane.constant;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        normalize: function () {\r\n\r\n            // Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n            var inverseNormalLength = 1.0 / this.normal.length();\r\n            this.normal.multiplyScalar( inverseNormalLength );\r\n            this.constant *= inverseNormalLength;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        negate: function () {\r\n\r\n            this.constant *= - 1;\r\n            this.normal.negate();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        distanceToPoint: function ( point ) {\r\n\r\n            return this.normal.dot( point ) + this.constant;\r\n\r\n        },\r\n\r\n        distanceToSphere: function ( sphere ) {\r\n\r\n            return this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n        },\r\n\r\n        projectPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Plane: .projectPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\r\n\r\n        },\r\n\r\n        intersectLine: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function intersectLine( line, target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Plane: .intersectLine() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                var direction = line.delta( v1 );\r\n\r\n                var denominator = this.normal.dot( direction );\r\n\r\n                if ( denominator === 0 ) {\r\n\r\n                    // line is coplanar, return origin\r\n                    if ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n                        return target.copy( line.start );\r\n\r\n                    }\r\n\r\n                    // Unsure if this is the correct method to handle this case.\r\n                    return undefined;\r\n\r\n                }\r\n\r\n                var t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n                if ( t < 0 || t > 1 ) {\r\n\r\n                    return undefined;\r\n\r\n                }\r\n\r\n                return target.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsLine: function ( line ) {\r\n\r\n            // Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n            var startSign = this.distanceToPoint( line.start );\r\n            var endSign = this.distanceToPoint( line.end );\r\n\r\n            return ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            return box.intersectsPlane( this );\r\n\r\n        },\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            return sphere.intersectsPlane( this );\r\n\r\n        },\r\n\r\n        coplanarPoint: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n        },\r\n\r\n        applyMatrix4: function () {\r\n\r\n            var v1 = new Vector3();\r\n            var m1 = new Matrix3();\r\n\r\n            return function applyMatrix4( matrix, optionalNormalMatrix ) {\r\n\r\n                var normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\r\n                var referencePoint = this.coplanarPoint( v1 ).applyMatrix4( matrix );\r\n\r\n                var normal = this.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                this.constant = - referencePoint.dot( normal );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.constant -= offset.dot( this.normal );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( plane ) {\r\n\r\n            return plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Frustum( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n        this.planes = [\r\n\r\n            ( p0 !== undefined ) ? p0 : new Plane(),\r\n            ( p1 !== undefined ) ? p1 : new Plane(),\r\n            ( p2 !== undefined ) ? p2 : new Plane(),\r\n            ( p3 !== undefined ) ? p3 : new Plane(),\r\n            ( p4 !== undefined ) ? p4 : new Plane(),\r\n            ( p5 !== undefined ) ? p5 : new Plane()\r\n\r\n        ];\r\n\r\n    }\r\n\r\n    Object.assign( Frustum.prototype, {\r\n\r\n        set: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n            var planes = this.planes;\r\n\r\n            planes[ 0 ].copy( p0 );\r\n            planes[ 1 ].copy( p1 );\r\n            planes[ 2 ].copy( p2 );\r\n            planes[ 3 ].copy( p3 );\r\n            planes[ 4 ].copy( p4 );\r\n            planes[ 5 ].copy( p5 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( frustum ) {\r\n\r\n            var planes = this.planes;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                planes[ i ].copy( frustum.planes[ i ] );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromMatrix: function ( m ) {\r\n\r\n            var planes = this.planes;\r\n            var me = m.elements;\r\n            var me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n            var me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n            var me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n            var me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n            planes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n            planes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n            planes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n            planes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n            planes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n            planes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        intersectsObject: function () {\r\n\r\n            var sphere = new Sphere();\r\n\r\n            return function intersectsObject( object ) {\r\n\r\n                var geometry = object.geometry;\r\n\r\n                if ( geometry.boundingSphere === null )\r\n                    geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere )\r\n                    .applyMatrix4( object.matrixWorld );\r\n\r\n                return this.intersectsSphere( sphere );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsSprite: function () {\r\n\r\n            var sphere = new Sphere();\r\n\r\n            return function intersectsSprite( sprite ) {\r\n\r\n                sphere.center.set( 0, 0, 0 );\r\n                sphere.radius = 0.7071067811865476;\r\n                sphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n                return this.intersectsSphere( sphere );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            var planes = this.planes;\r\n            var center = sphere.center;\r\n            var negRadius = - sphere.radius;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                var distance = planes[ i ].distanceToPoint( center );\r\n\r\n                if ( distance < negRadius ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        },\r\n\r\n        intersectsBox: function () {\r\n\r\n            var p1 = new Vector3(),\r\n                p2 = new Vector3();\r\n\r\n            return function intersectsBox( box ) {\r\n\r\n                var planes = this.planes;\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    var plane = planes[ i ];\r\n\r\n                    p1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n                    p2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n                    p1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n                    p2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n                    p1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n                    p2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n                    var d1 = plane.distanceToPoint( p1 );\r\n                    var d2 = plane.distanceToPoint( p2 );\r\n\r\n                    // if both outside plane, no intersection\r\n\r\n                    if ( d1 < 0 && d2 < 0 ) {\r\n\r\n                        return false;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return true;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            var planes = this.planes;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                if ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n                    return false;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\\n\";\r\n\r\n    var alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\\n\";\r\n\r\n    var alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\\n\";\r\n\r\n    var aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\r\n\r\n    var begin_vertex = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n    var beginnormal_vertex = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n    var bsdfs = \"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\tif( decayExponent > 0.0 ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\treturn distanceFalloff * maxDistanceCutoffFactor;\\n#else\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n#endif\\n\\t}\\n\\treturn 1.0;\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\\n\\treturn specularColor * AB.x + AB.y;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n\";\r\n\r\n    var bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\\n\";\r\n\r\n    var clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\t\\tvarying vec3 vViewPosition;\\n\\t#endif\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\\n\";\r\n\r\n    var clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n\";\r\n\r\n    var clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n\";\r\n\r\n    var color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\r\n\r\n    var color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\\n\";\r\n\r\n    var color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\r\n\r\n    var color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\r\n\r\n    var common = \"#define PI 3.14159265359\\n#define PI2 6.28318530718\\n#define PI_HALF 1.5707963267949\\n#define RECIPROCAL_PI 0.31830988618\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\n\";\r\n\r\n    var cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_textureSize (1024.0)\\nint getFaceFromDirection(vec3 direction) {\\n\\tvec3 absDirection = abs(direction);\\n\\tint face = -1;\\n\\tif( absDirection.x > absDirection.z ) {\\n\\t\\tif(absDirection.x > absDirection.y )\\n\\t\\t\\tface = direction.x > 0.0 ? 0 : 3;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\telse {\\n\\t\\tif(absDirection.z > absDirection.y )\\n\\t\\t\\tface = direction.z > 0.0 ? 2 : 5;\\n\\t\\telse\\n\\t\\t\\tface = direction.y > 0.0 ? 1 : 4;\\n\\t}\\n\\treturn face;\\n}\\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\\n\\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\\n\\tfloat dxRoughness = dFdx(roughness);\\n\\tfloat dyRoughness = dFdy(roughness);\\n\\tvec3 dx = dFdx( vec * scale * dxRoughness );\\n\\tvec3 dy = dFdy( vec * scale * dyRoughness );\\n\\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\\n\\td = clamp(d, 1.0, cubeUV_rangeClamp);\\n\\tfloat mipLevel = 0.5 * log2(d);\\n\\treturn vec2(floor(mipLevel), fract(mipLevel));\\n}\\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\\n\\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\\n\\tfloat a = 16.0 * cubeUV_rcpTextureSize;\\n\\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\\n\\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\\n\\tfloat powScale = exp2_packed.x * exp2_packed.y;\\n\\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\\n\\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\\n\\tbool bRes = mipLevel == 0.0;\\n\\tscale =  bRes && (scale < a) ? a : scale;\\n\\tvec3 r;\\n\\tvec2 offset;\\n\\tint face = getFaceFromDirection(direction);\\n\\tfloat rcpPowScale = 1.0 / powScale;\\n\\tif( face == 0) {\\n\\t\\tr = vec3(direction.x, -direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 1) {\\n\\t\\tr = vec3(direction.y, direction.x, direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 2) {\\n\\t\\tr = vec3(direction.z, direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\\n\\t}\\n\\telse if( face == 3) {\\n\\t\\tr = vec3(direction.x, direction.z, direction.y);\\n\\t\\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse if( face == 4) {\\n\\t\\tr = vec3(direction.y, direction.x, -direction.z);\\n\\t\\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\telse {\\n\\t\\tr = vec3(direction.z, -direction.x, direction.y);\\n\\t\\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\\n\\t\\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\\n\\t}\\n\\tr = normalize(r);\\n\\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\\n\\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\\n\\tvec2 base = offset + vec2( texelOffset );\\n\\treturn base + s * ( scale - 2.0 * texelOffset );\\n}\\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\\n\\tfloat roughnessVal = roughness* cubeUV_maxLods3;\\n\\tfloat r1 = floor(roughnessVal);\\n\\tfloat r2 = r1 + 1.0;\\n\\tfloat t = fract(roughnessVal);\\n\\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\\n\\tfloat s = mipInfo.y;\\n\\tfloat level0 = mipInfo.x;\\n\\tfloat level1 = level0 + 1.0;\\n\\tlevel1 = level1 > 5.0 ? 5.0 : level1;\\n\\tlevel0 += min( floor( s + 0.5 ), 5.0 );\\n\\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\\n\\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\\n\\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\\n\\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\\n\\tvec4 result = mix(color10, color20, t);\\n\\treturn vec4(result.rgb, 1.0);\\n}\\n#endif\\n\";\r\n\r\n    var defaultnormal_vertex = \"vec3 transformedNormal = normalMatrix * objectNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n\";\r\n\r\n    var displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\\n\";\r\n\r\n    var displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n#endif\\n\";\r\n\r\n    var emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\\n\";\r\n\r\n    var emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\\n\";\r\n\r\n    var encodings_fragment = \"  gl_FragColor = linearToOutputTexel( gl_FragColor );\\n\";\r\n\r\n    var encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM            = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\\n\\tfloat D      = max( maxRange / maxRGB, 1.0 );\\n\\tD            = min( floor( D ) / 255.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\\n\\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract(Le);\\n\\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\\n\\treturn vec4( max(vRGB, 0.0), 1.0 );\\n}\\n\";\r\n\r\n    var envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\tvec2 sampleUV;\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\\n\\t\\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var envmap_pars_fragment = \"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\\n\\tuniform float reflectivity;\\n\\tuniform float envMapIntensity;\\n#endif\\n#ifdef USE_ENVMAP\\n\\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var fog_vertex = \"\\n#ifdef USE_FOG\\nfogDepth = -mvPosition.z;\\n#endif\";\r\n\r\n    var fog_pars_vertex = \"#ifdef USE_FOG\\n  varying float fogDepth;\\n#endif\\n\";\r\n\r\n    var fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\\n\";\r\n\r\n    var fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var gradientmap_pars_fragment = \"#ifdef TOON\\n\\tuniform sampler2D gradientMap;\\n\\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\t\\tfloat dotNL = dot( normal, lightDirection );\\n\\t\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t\\t#ifdef USE_GRADIENTMAP\\n\\t\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\r\n\r\n    var lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n#endif\\n\";\r\n\r\n    var lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\r\n\r\n    var lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\r\n\r\n    var lights_pars_begin = \"uniform vec3 ambientLightColor;\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t\\tfloat shadowCameraNear;\\n\\t\\tfloat shadowCameraFar;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t\\tint shadow;\\n\\t\\tfloat shadowBias;\\n\\t\\tfloat shadowRadius;\\n\\t\\tvec2 shadowMapSize;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\\n\";\r\n\r\n    var lights_pars_maps = \"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV;\\n\\t\\t\\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\t\\t\\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\\t\\t\\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\\n\";\r\n\r\n    var lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\\n\";\r\n\r\n    var lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifdef TOON\\n\\t\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#else\\n\\t\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\t\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#endif\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\\n\";\r\n\r\n    var lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\\n#ifdef STANDARD\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.clearCoat = saturate( clearCoat );\\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\\n#endif\\n\";\r\n\r\n    var lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoat;\\n\\t\\tfloat clearCoatRoughness;\\n\\t#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifndef STANDARD\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\\n\\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t#ifndef STANDARD\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\tfloat dotNL = dotNV;\\n\\t\\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\\n\\t#else\\n\\t\\tfloat clearCoatDHR = 0.0;\\n\\t#endif\\n\\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\\n\\t#ifndef STANDARD\\n\\t\\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\\n\\t#endif\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\\n\";\r\n\r\n    var lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = normalize( vViewPosition );\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#ifdef USE_SHADOWMAP\\n\\t\\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearCoatRadiance = vec3( 0.0 );\\n#endif\\n\";\r\n\r\n    var lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#ifndef STANDARD\\n\\t\\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\\n#endif\\n\";\r\n\r\n    var logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\r\n\r\n    var logdepthbuf_pars_fragment = \"#ifdef USE_LOGDEPTHBUF\\n\\tuniform float logDepthBufFC;\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t#endif\\n\\tuniform float logDepthBufFC;\\n#endif\";\r\n\r\n    var logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t#else\\n\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\tgl_Position.z *= gl_Position.w;\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\\n\";\r\n\r\n    var map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n    var map_particle_fragment = \"#ifdef USE_MAP\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n\";\r\n\r\n    var map_particle_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform mat3 uvTransform;\\n\\tuniform sampler2D map;\\n#endif\\n\";\r\n\r\n    var metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\\n\";\r\n\r\n    var metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\r\n\r\n    var morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n#endif\\n\";\r\n\r\n    var morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\r\n\r\n    var morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var normal_fragment_maps = \"#ifdef USE_NORMALMAP\\n\\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\\n\";\r\n\r\n    var normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t\\tmapN.xy *= normalScale;\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\\n\";\r\n\r\n    var packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\\n\";\r\n\r\n    var premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n\";\r\n\r\n    var project_vertex = \"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n    var dithering_fragment = \"#if defined( DITHERING )\\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\\n\";\r\n\r\n    var dithering_pars_fragment = \"#if defined( DITHERING )\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\\n\";\r\n\r\n    var roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\\n\";\r\n\r\n    var roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\r\n\r\n    var shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\\n\\t\\tconst vec2 offset = vec2( 0.0, 1.0 );\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / size;\\n\\t\\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\\n\\t\\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\\n\\t\\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\\n\\t\\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\\n\\t\\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\\n\\t\\tvec2 f = fract( uv * size + 0.5 );\\n\\t\\tfloat a = mix( lb, lt, f.y );\\n\\t\\tfloat b = mix( rb, rt, f.y );\\n\\t\\tfloat c = mix( a, b, f.x );\\n\\t\\treturn c;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\\n\";\r\n\r\n    var shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\\n\\t}\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHTS > 0\\n\\tDirectionalLight directionalLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHTS > 0\\n\\tSpotLight spotLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#if NUM_POINT_LIGHTS > 0\\n\\tPointLight pointLight;\\n\\t#pragma unroll_loop\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\\n\";\r\n\r\n    var skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\r\n\r\n    var skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\\n\";\r\n\r\n    var skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\\n\";\r\n\r\n    var skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n#endif\\n\";\r\n\r\n    var specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\r\n\r\n    var specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\r\n\r\n    var tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\\n\";\r\n\r\n    var tonemapping_pars_fragment = \"#ifndef saturate\\n\\t#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nuniform float toneMappingWhitePoint;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\\nvec3 Uncharted2ToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\n\";\r\n\r\n    var uv_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n#endif\";\r\n\r\n    var uv_pars_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\n\";\r\n\r\n    var uv_vertex = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\r\n\r\n    var uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n    var uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n#endif\";\r\n\r\n    var uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = uv2;\\n#endif\";\r\n\r\n    var worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n#endif\\n\";\r\n\r\n    var cube_frag = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldPosition;\\nvoid main() {\\n\\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\\n\\tgl_FragColor.a *= opacity;\\n}\\n\";\r\n\r\n    var cube_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\\n\";\r\n\r\n    var depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\\n\\t#endif\\n}\\n\";\r\n\r\n    var depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n}\\n\";\r\n\r\n    var distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\\n\";\r\n\r\n    var distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\\n\";\r\n\r\n    var equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldPosition );\\n\\tvec2 sampleUV;\\n\\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n}\\n\";\r\n\r\n    var equirect_vert = \"varying vec3 vWorldPosition;\\n#include <common>\\nvoid main() {\\n\\tvWorldPosition = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\\n\";\r\n\r\n    var linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\tvLineDistance = scale * lineDistance;\\n\\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\r\n\r\n    var meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\r\n\r\n    var meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var meshphysical_frag = \"#define PHYSICAL\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifndef STANDARD\\n\\tuniform float clearCoat;\\n\\tuniform float clearCoatRoughness;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <lights_pars_begin>\\n#include <lights_pars_maps>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\\n\";\r\n\r\n    var meshphysical_vert = \"#define PHYSICAL\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\\n\";\r\n\r\n    var normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\\n\";\r\n\r\n    var points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tgl_PointSize = size * ( scale / - mvPosition.z );\\n\\t#else\\n\\t\\tgl_PointSize = size;\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <fog_fragment>\\n}\\n\";\r\n\r\n    var shadow_vert = \"#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\\n\";\r\n\r\n    var ShaderChunk = {\r\n        alphamap_fragment: alphamap_fragment,\r\n        alphamap_pars_fragment: alphamap_pars_fragment,\r\n        alphatest_fragment: alphatest_fragment,\r\n        aomap_fragment: aomap_fragment,\r\n        aomap_pars_fragment: aomap_pars_fragment,\r\n        begin_vertex: begin_vertex,\r\n        beginnormal_vertex: beginnormal_vertex,\r\n        bsdfs: bsdfs,\r\n        bumpmap_pars_fragment: bumpmap_pars_fragment,\r\n        clipping_planes_fragment: clipping_planes_fragment,\r\n        clipping_planes_pars_fragment: clipping_planes_pars_fragment,\r\n        clipping_planes_pars_vertex: clipping_planes_pars_vertex,\r\n        clipping_planes_vertex: clipping_planes_vertex,\r\n        color_fragment: color_fragment,\r\n        color_pars_fragment: color_pars_fragment,\r\n        color_pars_vertex: color_pars_vertex,\r\n        color_vertex: color_vertex,\r\n        common: common,\r\n        cube_uv_reflection_fragment: cube_uv_reflection_fragment,\r\n        defaultnormal_vertex: defaultnormal_vertex,\r\n        displacementmap_pars_vertex: displacementmap_pars_vertex,\r\n        displacementmap_vertex: displacementmap_vertex,\r\n        emissivemap_fragment: emissivemap_fragment,\r\n        emissivemap_pars_fragment: emissivemap_pars_fragment,\r\n        encodings_fragment: encodings_fragment,\r\n        encodings_pars_fragment: encodings_pars_fragment,\r\n        envmap_fragment: envmap_fragment,\r\n        envmap_pars_fragment: envmap_pars_fragment,\r\n        envmap_pars_vertex: envmap_pars_vertex,\r\n        envmap_vertex: envmap_vertex,\r\n        fog_vertex: fog_vertex,\r\n        fog_pars_vertex: fog_pars_vertex,\r\n        fog_fragment: fog_fragment,\r\n        fog_pars_fragment: fog_pars_fragment,\r\n        gradientmap_pars_fragment: gradientmap_pars_fragment,\r\n        lightmap_fragment: lightmap_fragment,\r\n        lightmap_pars_fragment: lightmap_pars_fragment,\r\n        lights_lambert_vertex: lights_lambert_vertex,\r\n        lights_pars_begin: lights_pars_begin,\r\n        lights_pars_maps: lights_pars_maps,\r\n        lights_phong_fragment: lights_phong_fragment,\r\n        lights_phong_pars_fragment: lights_phong_pars_fragment,\r\n        lights_physical_fragment: lights_physical_fragment,\r\n        lights_physical_pars_fragment: lights_physical_pars_fragment,\r\n        lights_fragment_begin: lights_fragment_begin,\r\n        lights_fragment_maps: lights_fragment_maps,\r\n        lights_fragment_end: lights_fragment_end,\r\n        logdepthbuf_fragment: logdepthbuf_fragment,\r\n        logdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\r\n        logdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\r\n        logdepthbuf_vertex: logdepthbuf_vertex,\r\n        map_fragment: map_fragment,\r\n        map_pars_fragment: map_pars_fragment,\r\n        map_particle_fragment: map_particle_fragment,\r\n        map_particle_pars_fragment: map_particle_pars_fragment,\r\n        metalnessmap_fragment: metalnessmap_fragment,\r\n        metalnessmap_pars_fragment: metalnessmap_pars_fragment,\r\n        morphnormal_vertex: morphnormal_vertex,\r\n        morphtarget_pars_vertex: morphtarget_pars_vertex,\r\n        morphtarget_vertex: morphtarget_vertex,\r\n        normal_fragment_begin: normal_fragment_begin,\r\n        normal_fragment_maps: normal_fragment_maps,\r\n        normalmap_pars_fragment: normalmap_pars_fragment,\r\n        packing: packing,\r\n        premultiplied_alpha_fragment: premultiplied_alpha_fragment,\r\n        project_vertex: project_vertex,\r\n        dithering_fragment: dithering_fragment,\r\n        dithering_pars_fragment: dithering_pars_fragment,\r\n        roughnessmap_fragment: roughnessmap_fragment,\r\n        roughnessmap_pars_fragment: roughnessmap_pars_fragment,\r\n        shadowmap_pars_fragment: shadowmap_pars_fragment,\r\n        shadowmap_pars_vertex: shadowmap_pars_vertex,\r\n        shadowmap_vertex: shadowmap_vertex,\r\n        shadowmask_pars_fragment: shadowmask_pars_fragment,\r\n        skinbase_vertex: skinbase_vertex,\r\n        skinning_pars_vertex: skinning_pars_vertex,\r\n        skinning_vertex: skinning_vertex,\r\n        skinnormal_vertex: skinnormal_vertex,\r\n        specularmap_fragment: specularmap_fragment,\r\n        specularmap_pars_fragment: specularmap_pars_fragment,\r\n        tonemapping_fragment: tonemapping_fragment,\r\n        tonemapping_pars_fragment: tonemapping_pars_fragment,\r\n        uv_pars_fragment: uv_pars_fragment,\r\n        uv_pars_vertex: uv_pars_vertex,\r\n        uv_vertex: uv_vertex,\r\n        uv2_pars_fragment: uv2_pars_fragment,\r\n        uv2_pars_vertex: uv2_pars_vertex,\r\n        uv2_vertex: uv2_vertex,\r\n        worldpos_vertex: worldpos_vertex,\r\n\r\n        cube_frag: cube_frag,\r\n        cube_vert: cube_vert,\r\n        depth_frag: depth_frag,\r\n        depth_vert: depth_vert,\r\n        distanceRGBA_frag: distanceRGBA_frag,\r\n        distanceRGBA_vert: distanceRGBA_vert,\r\n        equirect_frag: equirect_frag,\r\n        equirect_vert: equirect_vert,\r\n        linedashed_frag: linedashed_frag,\r\n        linedashed_vert: linedashed_vert,\r\n        meshbasic_frag: meshbasic_frag,\r\n        meshbasic_vert: meshbasic_vert,\r\n        meshlambert_frag: meshlambert_frag,\r\n        meshlambert_vert: meshlambert_vert,\r\n        meshphong_frag: meshphong_frag,\r\n        meshphong_vert: meshphong_vert,\r\n        meshphysical_frag: meshphysical_frag,\r\n        meshphysical_vert: meshphysical_vert,\r\n        normal_frag: normal_frag,\r\n        normal_vert: normal_vert,\r\n        points_frag: points_frag,\r\n        points_vert: points_vert,\r\n        shadow_frag: shadow_frag,\r\n        shadow_vert: shadow_vert\r\n    };\r\n\r\n    /**\r\n     * Uniform Utilities\r\n     */\r\n\r\n    var UniformsUtils = {\r\n\r\n        merge: function ( uniforms ) {\r\n\r\n            var merged = {};\r\n\r\n            for ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n                var tmp = this.clone( uniforms[ u ] );\r\n\r\n                for ( var p in tmp ) {\r\n\r\n                    merged[ p ] = tmp[ p ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return merged;\r\n\r\n        },\r\n\r\n        clone: function ( uniforms_src ) {\r\n\r\n            var uniforms_dst = {};\r\n\r\n            for ( var u in uniforms_src ) {\r\n\r\n                uniforms_dst[ u ] = {};\r\n\r\n                for ( var p in uniforms_src[ u ] ) {\r\n\r\n                    var parameter_src = uniforms_src[ u ][ p ];\r\n\r\n                    if ( parameter_src && ( parameter_src.isColor ||\r\n                        parameter_src.isMatrix3 || parameter_src.isMatrix4 ||\r\n                        parameter_src.isVector2 || parameter_src.isVector3 || parameter_src.isVector4 ||\r\n                        parameter_src.isTexture ) ) {\r\n\r\n                        uniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n                    } else if ( Array.isArray( parameter_src ) ) {\r\n\r\n                        uniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n                    } else {\r\n\r\n                        uniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return uniforms_dst;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n        'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n        'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n        'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n        'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n        'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n        'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n        'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n        'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n        'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n        'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n        'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n        'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n        'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n        'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n        'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n        'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n        'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n        'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n        'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n        'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n        'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n        'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n        'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n    function Color( r, g, b ) {\r\n\r\n        if ( g === undefined && b === undefined ) {\r\n\r\n            // r is THREE.Color, hex or string\r\n            return this.set( r );\r\n\r\n        }\r\n\r\n        return this.setRGB( r, g, b );\r\n\r\n    }\r\n\r\n    Object.assign( Color.prototype, {\r\n\r\n        isColor: true,\r\n\r\n        r: 1, g: 1, b: 1,\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value && value.isColor ) {\r\n\r\n                this.copy( value );\r\n\r\n            } else if ( typeof value === 'number' ) {\r\n\r\n                this.setHex( value );\r\n\r\n            } else if ( typeof value === 'string' ) {\r\n\r\n                this.setStyle( value );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setScalar: function ( scalar ) {\r\n\r\n            this.r = scalar;\r\n            this.g = scalar;\r\n            this.b = scalar;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setHex: function ( hex ) {\r\n\r\n            hex = Math.floor( hex );\r\n\r\n            this.r = ( hex >> 16 & 255 ) / 255;\r\n            this.g = ( hex >> 8 & 255 ) / 255;\r\n            this.b = ( hex & 255 ) / 255;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setRGB: function ( r, g, b ) {\r\n\r\n            this.r = r;\r\n            this.g = g;\r\n            this.b = b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setHSL: function () {\r\n\r\n            function hue2rgb( p, q, t ) {\r\n\r\n                if ( t < 0 ) t += 1;\r\n                if ( t > 1 ) t -= 1;\r\n                if ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n                if ( t < 1 / 2 ) return q;\r\n                if ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n                return p;\r\n\r\n            }\r\n\r\n            return function setHSL( h, s, l ) {\r\n\r\n                // h,s,l ranges are in 0.0 - 1.0\r\n                h = _Math.euclideanModulo( h, 1 );\r\n                s = _Math.clamp( s, 0, 1 );\r\n                l = _Math.clamp( l, 0, 1 );\r\n\r\n                if ( s === 0 ) {\r\n\r\n                    this.r = this.g = this.b = l;\r\n\r\n                } else {\r\n\r\n                    var p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n                    var q = ( 2 * l ) - p;\r\n\r\n                    this.r = hue2rgb( q, p, h + 1 / 3 );\r\n                    this.g = hue2rgb( q, p, h );\r\n                    this.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setStyle: function ( style ) {\r\n\r\n            function handleAlpha( string ) {\r\n\r\n                if ( string === undefined ) return;\r\n\r\n                if ( parseFloat( string ) < 1 ) {\r\n\r\n                    console.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            var m;\r\n\r\n            if ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n                // rgb / hsl\r\n\r\n                var color;\r\n                var name = m[ 1 ];\r\n                var components = m[ 2 ];\r\n\r\n                switch ( name ) {\r\n\r\n                    case 'rgb':\r\n                    case 'rgba':\r\n\r\n                        if ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n                            // rgb(255,0,0) rgba(255,0,0,0.5)\r\n                            this.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n                            this.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n                            this.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n                            handleAlpha( color[ 5 ] );\r\n\r\n                            return this;\r\n\r\n                        }\r\n\r\n                        if ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n                            // rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\r\n                            this.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n                            this.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n                            this.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n                            handleAlpha( color[ 5 ] );\r\n\r\n                            return this;\r\n\r\n                        }\r\n\r\n                        break;\r\n\r\n                    case 'hsl':\r\n                    case 'hsla':\r\n\r\n                        if ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\r\n\r\n                            // hsl(120,50%,50%) hsla(120,50%,50%,0.5)\r\n                            var h = parseFloat( color[ 1 ] ) / 360;\r\n                            var s = parseInt( color[ 2 ], 10 ) / 100;\r\n                            var l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n                            handleAlpha( color[ 5 ] );\r\n\r\n                            return this.setHSL( h, s, l );\r\n\r\n                        }\r\n\r\n                        break;\r\n\r\n                }\r\n\r\n            } else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n                // hex color\r\n\r\n                var hex = m[ 1 ];\r\n                var size = hex.length;\r\n\r\n                if ( size === 3 ) {\r\n\r\n                    // #ff0\r\n                    this.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n                    this.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n                    this.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n                    return this;\r\n\r\n                } else if ( size === 6 ) {\r\n\r\n                    // #ff0000\r\n                    this.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n                    this.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n                    this.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n                    return this;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( style && style.length > 0 ) {\r\n\r\n                // color keywords\r\n                var hex = ColorKeywords[ style ];\r\n\r\n                if ( hex !== undefined ) {\r\n\r\n                    // red\r\n                    this.setHex( hex );\r\n\r\n                } else {\r\n\r\n                    // unknown color\r\n                    console.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.r, this.g, this.b );\r\n\r\n        },\r\n\r\n        copy: function ( color ) {\r\n\r\n            this.r = color.r;\r\n            this.g = color.g;\r\n            this.b = color.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n            if ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n            this.r = Math.pow( color.r, gammaFactor );\r\n            this.g = Math.pow( color.g, gammaFactor );\r\n            this.b = Math.pow( color.b, gammaFactor );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n            if ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n            var safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n            this.r = Math.pow( color.r, safeInverse );\r\n            this.g = Math.pow( color.g, safeInverse );\r\n            this.b = Math.pow( color.b, safeInverse );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        convertGammaToLinear: function ( gammaFactor ) {\r\n\r\n            this.copyGammaToLinear( this, gammaFactor );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        convertLinearToGamma: function ( gammaFactor ) {\r\n\r\n            this.copyLinearToGamma( this, gammaFactor );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getHex: function () {\r\n\r\n            return ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n        },\r\n\r\n        getHexString: function () {\r\n\r\n            return ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n        },\r\n\r\n        getHSL: function ( target ) {\r\n\r\n            // h,s,l ranges are in 0.0 - 1.0\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Color: .getHSL() target is now required' );\r\n                target = { h: 0, s: 0, l: 0 };\r\n\r\n            }\r\n\r\n            var r = this.r, g = this.g, b = this.b;\r\n\r\n            var max = Math.max( r, g, b );\r\n            var min = Math.min( r, g, b );\r\n\r\n            var hue, saturation;\r\n            var lightness = ( min + max ) / 2.0;\r\n\r\n            if ( min === max ) {\r\n\r\n                hue = 0;\r\n                saturation = 0;\r\n\r\n            } else {\r\n\r\n                var delta = max - min;\r\n\r\n                saturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n                switch ( max ) {\r\n\r\n                    case r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n                    case g: hue = ( b - r ) / delta + 2; break;\r\n                    case b: hue = ( r - g ) / delta + 4; break;\r\n\r\n                }\r\n\r\n                hue /= 6;\r\n\r\n            }\r\n\r\n            target.h = hue;\r\n            target.s = saturation;\r\n            target.l = lightness;\r\n\r\n            return target;\r\n\r\n        },\r\n\r\n        getStyle: function () {\r\n\r\n            return 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n        },\r\n\r\n        offsetHSL: function () {\r\n\r\n            var hsl = {};\r\n\r\n            return function ( h, s, l ) {\r\n\r\n                this.getHSL( hsl );\r\n\r\n                hsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n                this.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        add: function ( color ) {\r\n\r\n            this.r += color.r;\r\n            this.g += color.g;\r\n            this.b += color.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addColors: function ( color1, color2 ) {\r\n\r\n            this.r = color1.r + color2.r;\r\n            this.g = color1.g + color2.g;\r\n            this.b = color1.b + color2.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addScalar: function ( s ) {\r\n\r\n            this.r += s;\r\n            this.g += s;\r\n            this.b += s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sub: function ( color ) {\r\n\r\n            this.r = Math.max( 0, this.r - color.r );\r\n            this.g = Math.max( 0, this.g - color.g );\r\n            this.b = Math.max( 0, this.b - color.b );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiply: function ( color ) {\r\n\r\n            this.r *= color.r;\r\n            this.g *= color.g;\r\n            this.b *= color.b;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        multiplyScalar: function ( s ) {\r\n\r\n            this.r *= s;\r\n            this.g *= s;\r\n            this.b *= s;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        lerp: function ( color, alpha ) {\r\n\r\n            this.r += ( color.r - this.r ) * alpha;\r\n            this.g += ( color.g - this.g ) * alpha;\r\n            this.b += ( color.b - this.b ) * alpha;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( c ) {\r\n\r\n            return ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n        },\r\n\r\n        fromArray: function ( array, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.r = array[ offset ];\r\n            this.g = array[ offset + 1 ];\r\n            this.b = array[ offset + 2 ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this.r;\r\n            array[ offset + 1 ] = this.g;\r\n            array[ offset + 2 ] = this.b;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            return this.getHex();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * Uniforms library for shared webgl shaders\r\n     */\r\n\r\n    var UniformsLib = {\r\n\r\n        common: {\r\n\r\n            diffuse: { value: new Color( 0xeeeeee ) },\r\n            opacity: { value: 1.0 },\r\n\r\n            map: { value: null },\r\n            uvTransform: { value: new Matrix3() },\r\n\r\n            alphaMap: { value: null },\r\n\r\n        },\r\n\r\n        specularmap: {\r\n\r\n            specularMap: { value: null },\r\n\r\n        },\r\n\r\n        envmap: {\r\n\r\n            envMap: { value: null },\r\n            flipEnvMap: { value: - 1 },\r\n            reflectivity: { value: 1.0 },\r\n            refractionRatio: { value: 0.98 },\r\n            maxMipLevel: { value: 0 }\r\n\r\n        },\r\n\r\n        aomap: {\r\n\r\n            aoMap: { value: null },\r\n            aoMapIntensity: { value: 1 }\r\n\r\n        },\r\n\r\n        lightmap: {\r\n\r\n            lightMap: { value: null },\r\n            lightMapIntensity: { value: 1 }\r\n\r\n        },\r\n\r\n        emissivemap: {\r\n\r\n            emissiveMap: { value: null }\r\n\r\n        },\r\n\r\n        bumpmap: {\r\n\r\n            bumpMap: { value: null },\r\n            bumpScale: { value: 1 }\r\n\r\n        },\r\n\r\n        normalmap: {\r\n\r\n            normalMap: { value: null },\r\n            normalScale: { value: new Vector2( 1, 1 ) }\r\n\r\n        },\r\n\r\n        displacementmap: {\r\n\r\n            displacementMap: { value: null },\r\n            displacementScale: { value: 1 },\r\n            displacementBias: { value: 0 }\r\n\r\n        },\r\n\r\n        roughnessmap: {\r\n\r\n            roughnessMap: { value: null }\r\n\r\n        },\r\n\r\n        metalnessmap: {\r\n\r\n            metalnessMap: { value: null }\r\n\r\n        },\r\n\r\n        gradientmap: {\r\n\r\n            gradientMap: { value: null }\r\n\r\n        },\r\n\r\n        fog: {\r\n\r\n            fogDensity: { value: 0.00025 },\r\n            fogNear: { value: 1 },\r\n            fogFar: { value: 2000 },\r\n            fogColor: { value: new Color( 0xffffff ) }\r\n\r\n        },\r\n\r\n        lights: {\r\n\r\n            ambientLightColor: { value: [] },\r\n\r\n            directionalLights: { value: [], properties: {\r\n                    direction: {},\r\n                    color: {},\r\n\r\n                    shadow: {},\r\n                    shadowBias: {},\r\n                    shadowRadius: {},\r\n                    shadowMapSize: {}\r\n                } },\r\n\r\n            directionalShadowMap: { value: [] },\r\n            directionalShadowMatrix: { value: [] },\r\n\r\n            spotLights: { value: [], properties: {\r\n                    color: {},\r\n                    position: {},\r\n                    direction: {},\r\n                    distance: {},\r\n                    coneCos: {},\r\n                    penumbraCos: {},\r\n                    decay: {},\r\n\r\n                    shadow: {},\r\n                    shadowBias: {},\r\n                    shadowRadius: {},\r\n                    shadowMapSize: {}\r\n                } },\r\n\r\n            spotShadowMap: { value: [] },\r\n            spotShadowMatrix: { value: [] },\r\n\r\n            pointLights: { value: [], properties: {\r\n                    color: {},\r\n                    position: {},\r\n                    decay: {},\r\n                    distance: {},\r\n\r\n                    shadow: {},\r\n                    shadowBias: {},\r\n                    shadowRadius: {},\r\n                    shadowMapSize: {},\r\n                    shadowCameraNear: {},\r\n                    shadowCameraFar: {}\r\n                } },\r\n\r\n            pointShadowMap: { value: [] },\r\n            pointShadowMatrix: { value: [] },\r\n\r\n            hemisphereLights: { value: [], properties: {\r\n                    direction: {},\r\n                    skyColor: {},\r\n                    groundColor: {}\r\n                } },\r\n\r\n            // TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\r\n            rectAreaLights: { value: [], properties: {\r\n                    color: {},\r\n                    position: {},\r\n                    width: {},\r\n                    height: {}\r\n                } }\r\n\r\n        },\r\n\r\n        points: {\r\n\r\n            diffuse: { value: new Color( 0xeeeeee ) },\r\n            opacity: { value: 1.0 },\r\n            size: { value: 1.0 },\r\n            scale: { value: 1.0 },\r\n            map: { value: null },\r\n            uvTransform: { value: new Matrix3() }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     */\r\n\r\n    var ShaderLib = {\r\n\r\n        basic: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.specularmap,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.fog\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshbasic_vert,\r\n            fragmentShader: ShaderChunk.meshbasic_frag\r\n\r\n        },\r\n\r\n        lambert: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.specularmap,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.emissivemap,\r\n                UniformsLib.fog,\r\n                UniformsLib.lights,\r\n                {\r\n                    emissive: { value: new Color( 0x000000 ) }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshlambert_vert,\r\n            fragmentShader: ShaderChunk.meshlambert_frag\r\n\r\n        },\r\n\r\n        phong: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.specularmap,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.emissivemap,\r\n                UniformsLib.bumpmap,\r\n                UniformsLib.normalmap,\r\n                UniformsLib.displacementmap,\r\n                UniformsLib.gradientmap,\r\n                UniformsLib.fog,\r\n                UniformsLib.lights,\r\n                {\r\n                    emissive: { value: new Color( 0x000000 ) },\r\n                    specular: { value: new Color( 0x111111 ) },\r\n                    shininess: { value: 30 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshphong_vert,\r\n            fragmentShader: ShaderChunk.meshphong_frag\r\n\r\n        },\r\n\r\n        standard: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.envmap,\r\n                UniformsLib.aomap,\r\n                UniformsLib.lightmap,\r\n                UniformsLib.emissivemap,\r\n                UniformsLib.bumpmap,\r\n                UniformsLib.normalmap,\r\n                UniformsLib.displacementmap,\r\n                UniformsLib.roughnessmap,\r\n                UniformsLib.metalnessmap,\r\n                UniformsLib.fog,\r\n                UniformsLib.lights,\r\n                {\r\n                    emissive: { value: new Color( 0x000000 ) },\r\n                    roughness: { value: 0.5 },\r\n                    metalness: { value: 0.5 },\r\n                    envMapIntensity: { value: 1 } // temporary\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.meshphysical_vert,\r\n            fragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n        },\r\n\r\n        points: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.points,\r\n                UniformsLib.fog\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.points_vert,\r\n            fragmentShader: ShaderChunk.points_frag\r\n\r\n        },\r\n\r\n        dashed: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.fog,\r\n                {\r\n                    scale: { value: 1 },\r\n                    dashSize: { value: 1 },\r\n                    totalSize: { value: 2 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.linedashed_vert,\r\n            fragmentShader: ShaderChunk.linedashed_frag\r\n\r\n        },\r\n\r\n        depth: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.displacementmap\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.depth_vert,\r\n            fragmentShader: ShaderChunk.depth_frag\r\n\r\n        },\r\n\r\n        normal: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.bumpmap,\r\n                UniformsLib.normalmap,\r\n                UniformsLib.displacementmap,\r\n                {\r\n                    opacity: { value: 1.0 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.normal_vert,\r\n            fragmentShader: ShaderChunk.normal_frag\r\n\r\n        },\r\n\r\n        /* -------------------------------------------------------------------------\r\n\t\t//\tCube map shader\r\n\t\t ------------------------------------------------------------------------- */\r\n\r\n        cube: {\r\n\r\n            uniforms: {\r\n                tCube: { value: null },\r\n                tFlip: { value: - 1 },\r\n                opacity: { value: 1.0 }\r\n            },\r\n\r\n            vertexShader: ShaderChunk.cube_vert,\r\n            fragmentShader: ShaderChunk.cube_frag\r\n\r\n        },\r\n\r\n        equirect: {\r\n\r\n            uniforms: {\r\n                tEquirect: { value: null },\r\n            },\r\n\r\n            vertexShader: ShaderChunk.equirect_vert,\r\n            fragmentShader: ShaderChunk.equirect_frag\r\n\r\n        },\r\n\r\n        distanceRGBA: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.common,\r\n                UniformsLib.displacementmap,\r\n                {\r\n                    referencePosition: { value: new Vector3() },\r\n                    nearDistance: { value: 1 },\r\n                    farDistance: { value: 1000 }\r\n                }\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.distanceRGBA_vert,\r\n            fragmentShader: ShaderChunk.distanceRGBA_frag\r\n\r\n        },\r\n\r\n        shadow: {\r\n\r\n            uniforms: UniformsUtils.merge( [\r\n                UniformsLib.lights,\r\n                UniformsLib.fog,\r\n                {\r\n                    color: { value: new Color( 0x00000 ) },\r\n                    opacity: { value: 1.0 }\r\n                },\r\n            ] ),\r\n\r\n            vertexShader: ShaderChunk.shadow_vert,\r\n            fragmentShader: ShaderChunk.shadow_frag\r\n\r\n        }\r\n\r\n    };\r\n\r\n    ShaderLib.physical = {\r\n\r\n        uniforms: UniformsUtils.merge( [\r\n            ShaderLib.standard.uniforms,\r\n            {\r\n                clearCoat: { value: 0 },\r\n                clearCoatRoughness: { value: 0 }\r\n            }\r\n        ] ),\r\n\r\n        vertexShader: ShaderChunk.meshphysical_vert,\r\n        fragmentShader: ShaderChunk.meshphysical_frag\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLAnimation() {\r\n\r\n        var context = null;\r\n        var isAnimating = false;\r\n        var animationLoop = null;\r\n\r\n        function onAnimationFrame( time, frame ) {\r\n\r\n            if ( isAnimating === false ) return;\r\n\r\n            animationLoop( time, frame );\r\n\r\n            context.requestAnimationFrame( onAnimationFrame );\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            start: function () {\r\n\r\n                if ( isAnimating === true ) return;\r\n                if ( animationLoop === null ) return;\r\n\r\n                context.requestAnimationFrame( onAnimationFrame );\r\n\r\n                isAnimating = true;\r\n\r\n            },\r\n\r\n            stop: function () {\r\n\r\n                isAnimating = false;\r\n\r\n            },\r\n\r\n            setAnimationLoop: function ( callback ) {\r\n\r\n                animationLoop = callback;\r\n\r\n            },\r\n\r\n            setContext: function ( value ) {\r\n\r\n                context = value;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLAttributes( gl ) {\r\n\r\n        var buffers = new WeakMap();\r\n\r\n        function createBuffer( attribute, bufferType ) {\r\n\r\n            var array = attribute.array;\r\n            var usage = attribute.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n            var buffer = gl.createBuffer();\r\n\r\n            gl.bindBuffer( bufferType, buffer );\r\n            gl.bufferData( bufferType, array, usage );\r\n\r\n            attribute.onUploadCallback();\r\n\r\n            var type = gl.FLOAT;\r\n\r\n            if ( array instanceof Float32Array ) {\r\n\r\n                type = gl.FLOAT;\r\n\r\n            } else if ( array instanceof Float64Array ) {\r\n\r\n                console.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\r\n\r\n            } else if ( array instanceof Uint16Array ) {\r\n\r\n                type = gl.UNSIGNED_SHORT;\r\n\r\n            } else if ( array instanceof Int16Array ) {\r\n\r\n                type = gl.SHORT;\r\n\r\n            } else if ( array instanceof Uint32Array ) {\r\n\r\n                type = gl.UNSIGNED_INT;\r\n\r\n            } else if ( array instanceof Int32Array ) {\r\n\r\n                type = gl.INT;\r\n\r\n            } else if ( array instanceof Int8Array ) {\r\n\r\n                type = gl.BYTE;\r\n\r\n            } else if ( array instanceof Uint8Array ) {\r\n\r\n                type = gl.UNSIGNED_BYTE;\r\n\r\n            }\r\n\r\n            return {\r\n                buffer: buffer,\r\n                type: type,\r\n                bytesPerElement: array.BYTES_PER_ELEMENT,\r\n                version: attribute.version\r\n            };\r\n\r\n        }\r\n\r\n        function updateBuffer( buffer, attribute, bufferType ) {\r\n\r\n            var array = attribute.array;\r\n            var updateRange = attribute.updateRange;\r\n\r\n            gl.bindBuffer( bufferType, buffer );\r\n\r\n            if ( attribute.dynamic === false ) {\r\n\r\n                gl.bufferData( bufferType, array, gl.STATIC_DRAW );\r\n\r\n            } else if ( updateRange.count === - 1 ) {\r\n\r\n                // Not using update ranges\r\n\r\n                gl.bufferSubData( bufferType, 0, array );\r\n\r\n            } else if ( updateRange.count === 0 ) {\r\n\r\n                console.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n            } else {\r\n\r\n                gl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\r\n                    array.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\r\n\r\n                updateRange.count = - 1; // reset range\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function get( attribute ) {\r\n\r\n            if ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n            return buffers.get( attribute );\r\n\r\n        }\r\n\r\n        function remove( attribute ) {\r\n\r\n            if ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n            var data = buffers.get( attribute );\r\n\r\n            if ( data ) {\r\n\r\n                gl.deleteBuffer( data.buffer );\r\n\r\n                buffers.delete( attribute );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function update( attribute, bufferType ) {\r\n\r\n            if ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\r\n\r\n            var data = buffers.get( attribute );\r\n\r\n            if ( data === undefined ) {\r\n\r\n                buffers.set( attribute, createBuffer( attribute, bufferType ) );\r\n\r\n            } else if ( data.version < attribute.version ) {\r\n\r\n                updateBuffer( data.buffer, attribute, bufferType );\r\n\r\n                data.version = attribute.version;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            get: get,\r\n            remove: remove,\r\n            update: update\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Euler( x, y, z, order ) {\r\n\r\n        this._x = x || 0;\r\n        this._y = y || 0;\r\n        this._z = z || 0;\r\n        this._order = order || Euler.DefaultOrder;\r\n\r\n    }\r\n\r\n    Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\n    Euler.DefaultOrder = 'XYZ';\r\n\r\n    Object.defineProperties( Euler.prototype, {\r\n\r\n        x: {\r\n\r\n            get: function () {\r\n\r\n                return this._x;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._x = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        y: {\r\n\r\n            get: function () {\r\n\r\n                return this._y;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._y = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        z: {\r\n\r\n            get: function () {\r\n\r\n                return this._z;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._z = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        order: {\r\n\r\n            get: function () {\r\n\r\n                return this._order;\r\n\r\n            },\r\n\r\n            set: function ( value ) {\r\n\r\n                this._order = value;\r\n                this.onChangeCallback();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Euler.prototype, {\r\n\r\n        isEuler: true,\r\n\r\n        set: function ( x, y, z, order ) {\r\n\r\n            this._x = x;\r\n            this._y = y;\r\n            this._z = z;\r\n            this._order = order || this._order;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this._x, this._y, this._z, this._order );\r\n\r\n        },\r\n\r\n        copy: function ( euler ) {\r\n\r\n            this._x = euler._x;\r\n            this._y = euler._y;\r\n            this._z = euler._z;\r\n            this._order = euler._order;\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromRotationMatrix: function ( m, order, update ) {\r\n\r\n            var clamp = _Math.clamp;\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            var te = m.elements;\r\n            var m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n            var m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n            var m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n            order = order || this._order;\r\n\r\n            if ( order === 'XYZ' ) {\r\n\r\n                this._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( - m23, m33 );\r\n                    this._z = Math.atan2( - m12, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = Math.atan2( m32, m22 );\r\n                    this._z = 0;\r\n\r\n                }\r\n\r\n            } else if ( order === 'YXZ' ) {\r\n\r\n                this._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n                    this._y = Math.atan2( m13, m33 );\r\n                    this._z = Math.atan2( m21, m22 );\r\n\r\n                } else {\r\n\r\n                    this._y = Math.atan2( - m31, m11 );\r\n                    this._z = 0;\r\n\r\n                }\r\n\r\n            } else if ( order === 'ZXY' ) {\r\n\r\n                this._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n                    this._y = Math.atan2( - m31, m33 );\r\n                    this._z = Math.atan2( - m12, m22 );\r\n\r\n                } else {\r\n\r\n                    this._y = 0;\r\n                    this._z = Math.atan2( m21, m11 );\r\n\r\n                }\r\n\r\n            } else if ( order === 'ZYX' ) {\r\n\r\n                this._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( m32, m33 );\r\n                    this._z = Math.atan2( m21, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = 0;\r\n                    this._z = Math.atan2( - m12, m22 );\r\n\r\n                }\r\n\r\n            } else if ( order === 'YZX' ) {\r\n\r\n                this._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( - m23, m22 );\r\n                    this._y = Math.atan2( - m31, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = 0;\r\n                    this._y = Math.atan2( m13, m33 );\r\n\r\n                }\r\n\r\n            } else if ( order === 'XZY' ) {\r\n\r\n                this._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n                if ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n                    this._x = Math.atan2( m32, m22 );\r\n                    this._y = Math.atan2( m13, m11 );\r\n\r\n                } else {\r\n\r\n                    this._x = Math.atan2( - m23, m33 );\r\n                    this._y = 0;\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                console.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\r\n\r\n            }\r\n\r\n            this._order = order;\r\n\r\n            if ( update !== false ) this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromQuaternion: function () {\r\n\r\n            var matrix = new Matrix4();\r\n\r\n            return function setFromQuaternion( q, order, update ) {\r\n\r\n                matrix.makeRotationFromQuaternion( q );\r\n\r\n                return this.setFromRotationMatrix( matrix, order, update );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setFromVector3: function ( v, order ) {\r\n\r\n            return this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n        },\r\n\r\n        reorder: function () {\r\n\r\n            // WARNING: this discards revolution information -bhouston\r\n\r\n            var q = new Quaternion();\r\n\r\n            return function reorder( newOrder ) {\r\n\r\n                q.setFromEuler( this );\r\n\r\n                return this.setFromQuaternion( q, newOrder );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        equals: function ( euler ) {\r\n\r\n            return ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n        },\r\n\r\n        fromArray: function ( array ) {\r\n\r\n            this._x = array[ 0 ];\r\n            this._y = array[ 1 ];\r\n            this._z = array[ 2 ];\r\n            if ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n            this.onChangeCallback();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toArray: function ( array, offset ) {\r\n\r\n            if ( array === undefined ) array = [];\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            array[ offset ] = this._x;\r\n            array[ offset + 1 ] = this._y;\r\n            array[ offset + 2 ] = this._z;\r\n            array[ offset + 3 ] = this._order;\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        toVector3: function ( optionalResult ) {\r\n\r\n            if ( optionalResult ) {\r\n\r\n                return optionalResult.set( this._x, this._y, this._z );\r\n\r\n            } else {\r\n\r\n                return new Vector3( this._x, this._y, this._z );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        onChange: function ( callback ) {\r\n\r\n            this.onChangeCallback = callback;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        onChangeCallback: function () {}\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Layers() {\r\n\r\n        this.mask = 1 | 0;\r\n\r\n    }\r\n\r\n    Object.assign( Layers.prototype, {\r\n\r\n        set: function ( channel ) {\r\n\r\n            this.mask = 1 << channel | 0;\r\n\r\n        },\r\n\r\n        enable: function ( channel ) {\r\n\r\n            this.mask |= 1 << channel | 0;\r\n\r\n        },\r\n\r\n        toggle: function ( channel ) {\r\n\r\n            this.mask ^= 1 << channel | 0;\r\n\r\n        },\r\n\r\n        disable: function ( channel ) {\r\n\r\n            this.mask &= ~ ( 1 << channel | 0 );\r\n\r\n        },\r\n\r\n        test: function ( layers ) {\r\n\r\n            return ( this.mask & layers.mask ) !== 0;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author elephantatwork / www.elephantatwork.ch\r\n     */\r\n\r\n    var object3DId = 0;\r\n\r\n    function Object3D() {\r\n\r\n        Object.defineProperty( this, 'id', { value: object3DId ++ } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'Object3D';\r\n\r\n        this.parent = null;\r\n        this.children = [];\r\n\r\n        this.up = Object3D.DefaultUp.clone();\r\n\r\n        var position = new Vector3();\r\n        var rotation = new Euler();\r\n        var quaternion = new Quaternion();\r\n        var scale = new Vector3( 1, 1, 1 );\r\n\r\n        function onRotationChange() {\r\n\r\n            quaternion.setFromEuler( rotation, false );\r\n\r\n        }\r\n\r\n        function onQuaternionChange() {\r\n\r\n            rotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n        }\r\n\r\n        rotation.onChange( onRotationChange );\r\n        quaternion.onChange( onQuaternionChange );\r\n\r\n        Object.defineProperties( this, {\r\n            position: {\r\n                enumerable: true,\r\n                value: position\r\n            },\r\n            rotation: {\r\n                enumerable: true,\r\n                value: rotation\r\n            },\r\n            quaternion: {\r\n                enumerable: true,\r\n                value: quaternion\r\n            },\r\n            scale: {\r\n                enumerable: true,\r\n                value: scale\r\n            },\r\n            modelViewMatrix: {\r\n                value: new Matrix4()\r\n            },\r\n            normalMatrix: {\r\n                value: new Matrix3()\r\n            }\r\n        } );\r\n\r\n        this.matrix = new Matrix4();\r\n        this.matrixWorld = new Matrix4();\r\n\r\n        this.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\r\n        this.matrixWorldNeedsUpdate = false;\r\n\r\n        this.layers = new Layers();\r\n        this.visible = true;\r\n\r\n        this.castShadow = false;\r\n        this.receiveShadow = false;\r\n\r\n        this.frustumCulled = true;\r\n        this.renderOrder = 0;\r\n\r\n        this.userData = {};\r\n\r\n    }\r\n\r\n    Object3D.DefaultUp = new Vector3( 0, 1, 0 );\r\n    Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\n    Object3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Object3D,\r\n\r\n        isObject3D: true,\r\n\r\n        onBeforeRender: function () {},\r\n        onAfterRender: function () {},\r\n\r\n        applyMatrix: function ( matrix ) {\r\n\r\n            this.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n            this.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n        },\r\n\r\n        applyQuaternion: function ( q ) {\r\n\r\n            this.quaternion.premultiply( q );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n            // assumes axis is normalized\r\n\r\n            this.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n        },\r\n\r\n        setRotationFromEuler: function ( euler ) {\r\n\r\n            this.quaternion.setFromEuler( euler, true );\r\n\r\n        },\r\n\r\n        setRotationFromMatrix: function ( m ) {\r\n\r\n            // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n            this.quaternion.setFromRotationMatrix( m );\r\n\r\n        },\r\n\r\n        setRotationFromQuaternion: function ( q ) {\r\n\r\n            // assumes q is normalized\r\n\r\n            this.quaternion.copy( q );\r\n\r\n        },\r\n\r\n        rotateOnAxis: function () {\r\n\r\n            // rotate object on axis in object space\r\n            // axis is assumed to be normalized\r\n\r\n            var q1 = new Quaternion();\r\n\r\n            return function rotateOnAxis( axis, angle ) {\r\n\r\n                q1.setFromAxisAngle( axis, angle );\r\n\r\n                this.quaternion.multiply( q1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateOnWorldAxis: function () {\r\n\r\n            // rotate object on axis in world space\r\n            // axis is assumed to be normalized\r\n            // method assumes no rotated parent\r\n\r\n            var q1 = new Quaternion();\r\n\r\n            return function rotateOnWorldAxis( axis, angle ) {\r\n\r\n                q1.setFromAxisAngle( axis, angle );\r\n\r\n                this.quaternion.premultiply( q1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateX: function () {\r\n\r\n            var v1 = new Vector3( 1, 0, 0 );\r\n\r\n            return function rotateX( angle ) {\r\n\r\n                return this.rotateOnAxis( v1, angle );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateY: function () {\r\n\r\n            var v1 = new Vector3( 0, 1, 0 );\r\n\r\n            return function rotateY( angle ) {\r\n\r\n                return this.rotateOnAxis( v1, angle );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateZ: function () {\r\n\r\n            var v1 = new Vector3( 0, 0, 1 );\r\n\r\n            return function rotateZ( angle ) {\r\n\r\n                return this.rotateOnAxis( v1, angle );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateOnAxis: function () {\r\n\r\n            // translate object by distance along axis in object space\r\n            // axis is assumed to be normalized\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function translateOnAxis( axis, distance ) {\r\n\r\n                v1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n                this.position.add( v1.multiplyScalar( distance ) );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateX: function () {\r\n\r\n            var v1 = new Vector3( 1, 0, 0 );\r\n\r\n            return function translateX( distance ) {\r\n\r\n                return this.translateOnAxis( v1, distance );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateY: function () {\r\n\r\n            var v1 = new Vector3( 0, 1, 0 );\r\n\r\n            return function translateY( distance ) {\r\n\r\n                return this.translateOnAxis( v1, distance );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translateZ: function () {\r\n\r\n            var v1 = new Vector3( 0, 0, 1 );\r\n\r\n            return function translateZ( distance ) {\r\n\r\n                return this.translateOnAxis( v1, distance );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        localToWorld: function ( vector ) {\r\n\r\n            return vector.applyMatrix4( this.matrixWorld );\r\n\r\n        },\r\n\r\n        worldToLocal: function () {\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function worldToLocal( vector ) {\r\n\r\n                return vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            // This method does not support objects with rotated and/or translated parent(s)\r\n\r\n            var m1 = new Matrix4();\r\n            var vector = new Vector3();\r\n\r\n            return function lookAt( x, y, z ) {\r\n\r\n                if ( x.isVector3 ) {\r\n\r\n                    vector.copy( x );\r\n\r\n                } else {\r\n\r\n                    vector.set( x, y, z );\r\n\r\n                }\r\n\r\n                if ( this.isCamera ) {\r\n\r\n                    m1.lookAt( this.position, vector, this.up );\r\n\r\n                } else {\r\n\r\n                    m1.lookAt( vector, this.position, this.up );\r\n\r\n                }\r\n\r\n                this.quaternion.setFromRotationMatrix( m1 );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        add: function ( object ) {\r\n\r\n            if ( arguments.length > 1 ) {\r\n\r\n                for ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n                    this.add( arguments[ i ] );\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            if ( object === this ) {\r\n\r\n                console.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n                return this;\r\n\r\n            }\r\n\r\n            if ( ( object && object.isObject3D ) ) {\r\n\r\n                if ( object.parent !== null ) {\r\n\r\n                    object.parent.remove( object );\r\n\r\n                }\r\n\r\n                object.parent = this;\r\n                object.dispatchEvent( { type: 'added' } );\r\n\r\n                this.children.push( object );\r\n\r\n            } else {\r\n\r\n                console.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        remove: function ( object ) {\r\n\r\n            if ( arguments.length > 1 ) {\r\n\r\n                for ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n                    this.remove( arguments[ i ] );\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            var index = this.children.indexOf( object );\r\n\r\n            if ( index !== - 1 ) {\r\n\r\n                object.parent = null;\r\n\r\n                object.dispatchEvent( { type: 'removed' } );\r\n\r\n                this.children.splice( index, 1 );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getObjectById: function ( id ) {\r\n\r\n            return this.getObjectByProperty( 'id', id );\r\n\r\n        },\r\n\r\n        getObjectByName: function ( name ) {\r\n\r\n            return this.getObjectByProperty( 'name', name );\r\n\r\n        },\r\n\r\n        getObjectByProperty: function ( name, value ) {\r\n\r\n            if ( this[ name ] === value ) return this;\r\n\r\n            for ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n                var child = this.children[ i ];\r\n                var object = child.getObjectByProperty( name, value );\r\n\r\n                if ( object !== undefined ) {\r\n\r\n                    return object;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return undefined;\r\n\r\n        },\r\n\r\n        getWorldPosition: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            this.updateMatrixWorld( true );\r\n\r\n            return target.setFromMatrixPosition( this.matrixWorld );\r\n\r\n        },\r\n\r\n        getWorldQuaternion: function () {\r\n\r\n            var position = new Vector3();\r\n            var scale = new Vector3();\r\n\r\n            return function getWorldQuaternion( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\r\n                    target = new Quaternion();\r\n\r\n                }\r\n\r\n                this.updateMatrixWorld( true );\r\n\r\n                this.matrixWorld.decompose( position, target, scale );\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getWorldScale: function () {\r\n\r\n            var position = new Vector3();\r\n            var quaternion = new Quaternion();\r\n\r\n            return function getWorldScale( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                this.updateMatrixWorld( true );\r\n\r\n                this.matrixWorld.decompose( position, quaternion, target );\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getWorldDirection: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function getWorldDirection( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                this.getWorldQuaternion( quaternion );\r\n\r\n                return target.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        raycast: function () {},\r\n\r\n        traverse: function ( callback ) {\r\n\r\n            callback( this );\r\n\r\n            var children = this.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                children[ i ].traverse( callback );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        traverseVisible: function ( callback ) {\r\n\r\n            if ( this.visible === false ) return;\r\n\r\n            callback( this );\r\n\r\n            var children = this.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                children[ i ].traverseVisible( callback );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        traverseAncestors: function ( callback ) {\r\n\r\n            var parent = this.parent;\r\n\r\n            if ( parent !== null ) {\r\n\r\n                callback( parent );\r\n\r\n                parent.traverseAncestors( callback );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        updateMatrix: function () {\r\n\r\n            this.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n            this.matrixWorldNeedsUpdate = true;\r\n\r\n        },\r\n\r\n        updateMatrixWorld: function ( force ) {\r\n\r\n            if ( this.matrixAutoUpdate ) this.updateMatrix();\r\n\r\n            if ( this.matrixWorldNeedsUpdate || force ) {\r\n\r\n                if ( this.parent === null ) {\r\n\r\n                    this.matrixWorld.copy( this.matrix );\r\n\r\n                } else {\r\n\r\n                    this.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n                }\r\n\r\n                this.matrixWorldNeedsUpdate = false;\r\n\r\n                force = true;\r\n\r\n            }\r\n\r\n            // update children\r\n\r\n            var children = this.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                children[ i ].updateMatrixWorld( force );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            // meta is a string when called from JSON.stringify\r\n            var isRootObject = ( meta === undefined || typeof meta === 'string' );\r\n\r\n            var output = {};\r\n\r\n            // meta is a hash used to collect geometries, materials.\r\n            // not providing it implies that this is the root object\r\n            // being serialized.\r\n            if ( isRootObject ) {\r\n\r\n                // initialize meta obj\r\n                meta = {\r\n                    geometries: {},\r\n                    materials: {},\r\n                    textures: {},\r\n                    images: {},\r\n                    shapes: {}\r\n                };\r\n\r\n                output.metadata = {\r\n                    version: 4.5,\r\n                    type: 'Object',\r\n                    generator: 'Object3D.toJSON'\r\n                };\r\n\r\n            }\r\n\r\n            // standard Object3D serialization\r\n\r\n            var object = {};\r\n\r\n            object.uuid = this.uuid;\r\n            object.type = this.type;\r\n\r\n            if ( this.name !== '' ) object.name = this.name;\r\n            if ( this.castShadow === true ) object.castShadow = true;\r\n            if ( this.receiveShadow === true ) object.receiveShadow = true;\r\n            if ( this.visible === false ) object.visible = false;\r\n            if ( this.frustumCulled === false ) object.frustumCulled = false;\r\n            if ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\r\n            if ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\r\n\r\n            object.matrix = this.matrix.toArray();\r\n\r\n            if ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\r\n\r\n            //\r\n\r\n            function serialize( library, element ) {\r\n\r\n                if ( library[ element.uuid ] === undefined ) {\r\n\r\n                    library[ element.uuid ] = element.toJSON( meta );\r\n\r\n                }\r\n\r\n                return element.uuid;\r\n\r\n            }\r\n\r\n            if ( this.geometry !== undefined ) {\r\n\r\n                object.geometry = serialize( meta.geometries, this.geometry );\r\n\r\n                var parameters = this.geometry.parameters;\r\n\r\n                if ( parameters !== undefined && parameters.shapes !== undefined ) {\r\n\r\n                    var shapes = parameters.shapes;\r\n\r\n                    if ( Array.isArray( shapes ) ) {\r\n\r\n                        for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n                            var shape = shapes[ i ];\r\n\r\n                            serialize( meta.shapes, shape );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        serialize( meta.shapes, shapes );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.material !== undefined ) {\r\n\r\n                if ( Array.isArray( this.material ) ) {\r\n\r\n                    var uuids = [];\r\n\r\n                    for ( var i = 0, l = this.material.length; i < l; i ++ ) {\r\n\r\n                        uuids.push( serialize( meta.materials, this.material[ i ] ) );\r\n\r\n                    }\r\n\r\n                    object.material = uuids;\r\n\r\n                } else {\r\n\r\n                    object.material = serialize( meta.materials, this.material );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //\r\n\r\n            if ( this.children.length > 0 ) {\r\n\r\n                object.children = [];\r\n\r\n                for ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n                    object.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( isRootObject ) {\r\n\r\n                var geometries = extractFromCache( meta.geometries );\r\n                var materials = extractFromCache( meta.materials );\r\n                var textures = extractFromCache( meta.textures );\r\n                var images = extractFromCache( meta.images );\r\n                var shapes = extractFromCache( meta.shapes );\r\n\r\n                if ( geometries.length > 0 ) output.geometries = geometries;\r\n                if ( materials.length > 0 ) output.materials = materials;\r\n                if ( textures.length > 0 ) output.textures = textures;\r\n                if ( images.length > 0 ) output.images = images;\r\n                if ( shapes.length > 0 ) output.shapes = shapes;\r\n\r\n            }\r\n\r\n            output.object = object;\r\n\r\n            return output;\r\n\r\n            // extract data from the cache hash\r\n            // remove metadata on each item\r\n            // and return as array\r\n            function extractFromCache( cache ) {\r\n\r\n                var values = [];\r\n                for ( var key in cache ) {\r\n\r\n                    var data = cache[ key ];\r\n                    delete data.metadata;\r\n                    values.push( data );\r\n\r\n                }\r\n                return values;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function ( recursive ) {\r\n\r\n            return new this.constructor().copy( this, recursive );\r\n\r\n        },\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            if ( recursive === undefined ) recursive = true;\r\n\r\n            this.name = source.name;\r\n\r\n            this.up.copy( source.up );\r\n\r\n            this.position.copy( source.position );\r\n            this.quaternion.copy( source.quaternion );\r\n            this.scale.copy( source.scale );\r\n\r\n            this.matrix.copy( source.matrix );\r\n            this.matrixWorld.copy( source.matrixWorld );\r\n\r\n            this.matrixAutoUpdate = source.matrixAutoUpdate;\r\n            this.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n            this.layers.mask = source.layers.mask;\r\n            this.visible = source.visible;\r\n\r\n            this.castShadow = source.castShadow;\r\n            this.receiveShadow = source.receiveShadow;\r\n\r\n            this.frustumCulled = source.frustumCulled;\r\n            this.renderOrder = source.renderOrder;\r\n\r\n            this.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n            if ( recursive === true ) {\r\n\r\n                for ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n                    var child = source.children[ i ];\r\n                    this.add( child.clone() );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Camera() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Camera';\r\n\r\n        this.matrixWorldInverse = new Matrix4();\r\n        this.projectionMatrix = new Matrix4();\r\n\r\n    }\r\n\r\n    Camera.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Camera,\r\n\r\n        isCamera: true,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Object3D.prototype.copy.call( this, source, recursive );\r\n\r\n            this.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n            this.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getWorldDirection: function () {\r\n\r\n            var quaternion = new Quaternion();\r\n\r\n            return function getWorldDirection( target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                this.getWorldQuaternion( quaternion );\r\n\r\n                return target.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        updateMatrixWorld: function ( force ) {\r\n\r\n            Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n            this.matrixWorldInverse.getInverse( this.matrixWorld );\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author arose / http://github.com/arose\r\n     */\r\n\r\n    function OrthographicCamera( left, right, top, bottom, near, far ) {\r\n\r\n        Camera.call( this );\r\n\r\n        this.type = 'OrthographicCamera';\r\n\r\n        this.zoom = 1;\r\n        this.view = null;\r\n\r\n        this.left = left;\r\n        this.right = right;\r\n        this.top = top;\r\n        this.bottom = bottom;\r\n\r\n        this.near = ( near !== undefined ) ? near : 0.1;\r\n        this.far = ( far !== undefined ) ? far : 2000;\r\n\r\n        this.updateProjectionMatrix();\r\n\r\n    }\r\n\r\n    OrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n        constructor: OrthographicCamera,\r\n\r\n        isOrthographicCamera: true,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Camera.prototype.copy.call( this, source, recursive );\r\n\r\n            this.left = source.left;\r\n            this.right = source.right;\r\n            this.top = source.top;\r\n            this.bottom = source.bottom;\r\n            this.near = source.near;\r\n            this.far = source.far;\r\n\r\n            this.zoom = source.zoom;\r\n            this.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n            if ( this.view === null ) {\r\n\r\n                this.view = {\r\n                    enabled: true,\r\n                    fullWidth: 1,\r\n                    fullHeight: 1,\r\n                    offsetX: 0,\r\n                    offsetY: 0,\r\n                    width: 1,\r\n                    height: 1\r\n                };\r\n\r\n            }\r\n\r\n            this.view.enabled = true;\r\n            this.view.fullWidth = fullWidth;\r\n            this.view.fullHeight = fullHeight;\r\n            this.view.offsetX = x;\r\n            this.view.offsetY = y;\r\n            this.view.width = width;\r\n            this.view.height = height;\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        clearViewOffset: function () {\r\n\r\n            if ( this.view !== null ) {\r\n\r\n                this.view.enabled = false;\r\n\r\n            }\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        updateProjectionMatrix: function () {\r\n\r\n            var dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n            var dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n            var cx = ( this.right + this.left ) / 2;\r\n            var cy = ( this.top + this.bottom ) / 2;\r\n\r\n            var left = cx - dx;\r\n            var right = cx + dx;\r\n            var top = cy + dy;\r\n            var bottom = cy - dy;\r\n\r\n            if ( this.view !== null && this.view.enabled ) {\r\n\r\n                var zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\r\n                var zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\r\n                var scaleW = ( this.right - this.left ) / this.view.width;\r\n                var scaleH = ( this.top - this.bottom ) / this.view.height;\r\n\r\n                left += scaleW * ( this.view.offsetX / zoomW );\r\n                right = left + scaleW * ( this.view.width / zoomW );\r\n                top -= scaleH * ( this.view.offsetY / zoomH );\r\n                bottom = top - scaleH * ( this.view.height / zoomH );\r\n\r\n            }\r\n\r\n            this.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.zoom = this.zoom;\r\n            data.object.left = this.left;\r\n            data.object.right = this.right;\r\n            data.object.top = this.top;\r\n            data.object.bottom = this.bottom;\r\n            data.object.near = this.near;\r\n            data.object.far = this.far;\r\n\r\n            if ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Face3( a, b, c, normal, color, materialIndex ) {\r\n\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n\r\n        this.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\r\n        this.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n        this.color = ( color && color.isColor ) ? color : new Color();\r\n        this.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n        this.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n    }\r\n\r\n    Object.assign( Face3.prototype, {\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.a = source.a;\r\n            this.b = source.b;\r\n            this.c = source.c;\r\n\r\n            this.normal.copy( source.normal );\r\n            this.color.copy( source.color );\r\n\r\n            this.materialIndex = source.materialIndex;\r\n\r\n            for ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n                this.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n            }\r\n\r\n            for ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n                this.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author kile / http://kile.stravaganza.org/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    var geometryId = 0; // Geometry uses even numbers as Id\r\n\r\n    function Geometry() {\r\n\r\n        Object.defineProperty( this, 'id', { value: geometryId += 2 } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'Geometry';\r\n\r\n        this.vertices = [];\r\n        this.colors = [];\r\n        this.faces = [];\r\n        this.faceVertexUvs = [[]];\r\n\r\n        this.morphTargets = [];\r\n        this.morphNormals = [];\r\n\r\n        this.skinWeights = [];\r\n        this.skinIndices = [];\r\n\r\n        this.lineDistances = [];\r\n\r\n        this.boundingBox = null;\r\n        this.boundingSphere = null;\r\n\r\n        // update flags\r\n\r\n        this.elementsNeedUpdate = false;\r\n        this.verticesNeedUpdate = false;\r\n        this.uvsNeedUpdate = false;\r\n        this.normalsNeedUpdate = false;\r\n        this.colorsNeedUpdate = false;\r\n        this.lineDistancesNeedUpdate = false;\r\n        this.groupsNeedUpdate = false;\r\n\r\n    }\r\n\r\n    Geometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Geometry,\r\n\r\n        isGeometry: true,\r\n\r\n        applyMatrix: function ( matrix ) {\r\n\r\n            var normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n            for ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n                var vertex = this.vertices[ i ];\r\n                vertex.applyMatrix4( matrix );\r\n\r\n            }\r\n\r\n            for ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n                var face = this.faces[ i ];\r\n                face.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                for ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n                    face.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.boundingBox !== null ) {\r\n\r\n                this.computeBoundingBox();\r\n\r\n            }\r\n\r\n            if ( this.boundingSphere !== null ) {\r\n\r\n                this.computeBoundingSphere();\r\n\r\n            }\r\n\r\n            this.verticesNeedUpdate = true;\r\n            this.normalsNeedUpdate = true;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotateX: function () {\r\n\r\n            // rotate geometry around world x-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateX( angle ) {\r\n\r\n                m1.makeRotationX( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateY: function () {\r\n\r\n            // rotate geometry around world y-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateY( angle ) {\r\n\r\n                m1.makeRotationY( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateZ: function () {\r\n\r\n            // rotate geometry around world z-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateZ( angle ) {\r\n\r\n                m1.makeRotationZ( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translate: function () {\r\n\r\n            // translate geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function translate( x, y, z ) {\r\n\r\n                m1.makeTranslation( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        scale: function () {\r\n\r\n            // scale geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function scale( x, y, z ) {\r\n\r\n                m1.makeScale( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            var obj = new Object3D();\r\n\r\n            return function lookAt( vector ) {\r\n\r\n                obj.lookAt( vector );\r\n\r\n                obj.updateMatrix();\r\n\r\n                this.applyMatrix( obj.matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        fromBufferGeometry: function ( geometry ) {\r\n\r\n            var scope = this;\r\n\r\n            var indices = geometry.index !== null ? geometry.index.array : undefined;\r\n            var attributes = geometry.attributes;\r\n\r\n            var positions = attributes.position.array;\r\n            var normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n            var colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n            var uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n            var uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n            if ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n            var tempNormals = [];\r\n            var tempUVs = [];\r\n            var tempUVs2 = [];\r\n\r\n            for ( var i = 0, j = 0; i < positions.length; i += 3, j += 2 ) {\r\n\r\n                scope.vertices.push( new Vector3( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] ) );\r\n\r\n                if ( normals !== undefined ) {\r\n\r\n                    tempNormals.push( new Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n                }\r\n\r\n                if ( colors !== undefined ) {\r\n\r\n                    scope.colors.push( new Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n                }\r\n\r\n                if ( uvs !== undefined ) {\r\n\r\n                    tempUVs.push( new Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n                }\r\n\r\n                if ( uvs2 !== undefined ) {\r\n\r\n                    tempUVs2.push( new Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function addFace( a, b, c, materialIndex ) {\r\n\r\n                var vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n                var vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n                var face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\r\n\r\n                scope.faces.push( face );\r\n\r\n                if ( uvs !== undefined ) {\r\n\r\n                    scope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n                }\r\n\r\n                if ( uvs2 !== undefined ) {\r\n\r\n                    scope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var groups = geometry.groups;\r\n\r\n            if ( groups.length > 0 ) {\r\n\r\n                for ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n                    var group = groups[ i ];\r\n\r\n                    var start = group.start;\r\n                    var count = group.count;\r\n\r\n                    for ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n                        if ( indices !== undefined ) {\r\n\r\n                            addFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\r\n\r\n                        } else {\r\n\r\n                            addFace( j, j + 1, j + 2, group.materialIndex );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                if ( indices !== undefined ) {\r\n\r\n                    for ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n                        addFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    for ( var i = 0; i < positions.length / 3; i += 3 ) {\r\n\r\n                        addFace( i, i + 1, i + 2 );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.computeFaceNormals();\r\n\r\n            if ( geometry.boundingBox !== null ) {\r\n\r\n                this.boundingBox = geometry.boundingBox.clone();\r\n\r\n            }\r\n\r\n            if ( geometry.boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        center: function () {\r\n\r\n            var offset = new Vector3();\r\n\r\n            return function center() {\r\n\r\n                this.computeBoundingBox();\r\n\r\n                this.boundingBox.getCenter( offset ).negate();\r\n\r\n                this.translate( offset.x, offset.y, offset.z );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        normalize: function () {\r\n\r\n            this.computeBoundingSphere();\r\n\r\n            var center = this.boundingSphere.center;\r\n            var radius = this.boundingSphere.radius;\r\n\r\n            var s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n            var matrix = new Matrix4();\r\n            matrix.set(\r\n                s, 0, 0, - s * center.x,\r\n                0, s, 0, - s * center.y,\r\n                0, 0, s, - s * center.z,\r\n                0, 0, 0, 1\r\n            );\r\n\r\n            this.applyMatrix( matrix );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        computeFaceNormals: function () {\r\n\r\n            var cb = new Vector3(), ab = new Vector3();\r\n\r\n            for ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                var face = this.faces[ f ];\r\n\r\n                var vA = this.vertices[ face.a ];\r\n                var vB = this.vertices[ face.b ];\r\n                var vC = this.vertices[ face.c ];\r\n\r\n                cb.subVectors( vC, vB );\r\n                ab.subVectors( vA, vB );\r\n                cb.cross( ab );\r\n\r\n                cb.normalize();\r\n\r\n                face.normal.copy( cb );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeVertexNormals: function ( areaWeighted ) {\r\n\r\n            if ( areaWeighted === undefined ) areaWeighted = true;\r\n\r\n            var v, vl, f, fl, face, vertices;\r\n\r\n            vertices = new Array( this.vertices.length );\r\n\r\n            for ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n                vertices[ v ] = new Vector3();\r\n\r\n            }\r\n\r\n            if ( areaWeighted ) {\r\n\r\n                // vertex normals weighted by triangle areas\r\n                // http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n                var vA, vB, vC;\r\n                var cb = new Vector3(), ab = new Vector3();\r\n\r\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                    face = this.faces[ f ];\r\n\r\n                    vA = this.vertices[ face.a ];\r\n                    vB = this.vertices[ face.b ];\r\n                    vC = this.vertices[ face.c ];\r\n\r\n                    cb.subVectors( vC, vB );\r\n                    ab.subVectors( vA, vB );\r\n                    cb.cross( ab );\r\n\r\n                    vertices[ face.a ].add( cb );\r\n                    vertices[ face.b ].add( cb );\r\n                    vertices[ face.c ].add( cb );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                this.computeFaceNormals();\r\n\r\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                    face = this.faces[ f ];\r\n\r\n                    vertices[ face.a ].add( face.normal );\r\n                    vertices[ face.b ].add( face.normal );\r\n                    vertices[ face.c ].add( face.normal );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n                vertices[ v ].normalize();\r\n\r\n            }\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                var vertexNormals = face.vertexNormals;\r\n\r\n                if ( vertexNormals.length === 3 ) {\r\n\r\n                    vertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n                    vertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n                    vertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n                } else {\r\n\r\n                    vertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n                    vertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n                    vertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.faces.length > 0 ) {\r\n\r\n                this.normalsNeedUpdate = true;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeFlatVertexNormals: function () {\r\n\r\n            var f, fl, face;\r\n\r\n            this.computeFaceNormals();\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                var vertexNormals = face.vertexNormals;\r\n\r\n                if ( vertexNormals.length === 3 ) {\r\n\r\n                    vertexNormals[ 0 ].copy( face.normal );\r\n                    vertexNormals[ 1 ].copy( face.normal );\r\n                    vertexNormals[ 2 ].copy( face.normal );\r\n\r\n                } else {\r\n\r\n                    vertexNormals[ 0 ] = face.normal.clone();\r\n                    vertexNormals[ 1 ] = face.normal.clone();\r\n                    vertexNormals[ 2 ] = face.normal.clone();\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.faces.length > 0 ) {\r\n\r\n                this.normalsNeedUpdate = true;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeMorphNormals: function () {\r\n\r\n            var i, il, f, fl, face;\r\n\r\n            // save original normals\r\n            // - create temp variables on first access\r\n            //   otherwise just copy (for faster repeated calls)\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                if ( ! face.__originalFaceNormal ) {\r\n\r\n                    face.__originalFaceNormal = face.normal.clone();\r\n\r\n                } else {\r\n\r\n                    face.__originalFaceNormal.copy( face.normal );\r\n\r\n                }\r\n\r\n                if ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n                for ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n                    if ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n                        face.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n                    } else {\r\n\r\n                        face.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // use temp geometry to compute face and vertex normals for each morph\r\n\r\n            var tmpGeo = new Geometry();\r\n            tmpGeo.faces = this.faces;\r\n\r\n            for ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n                // create on first access\r\n\r\n                if ( ! this.morphNormals[ i ] ) {\r\n\r\n                    this.morphNormals[ i ] = {};\r\n                    this.morphNormals[ i ].faceNormals = [];\r\n                    this.morphNormals[ i ].vertexNormals = [];\r\n\r\n                    var dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n                    var dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n                    var faceNormal, vertexNormals;\r\n\r\n                    for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                        faceNormal = new Vector3();\r\n                        vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\r\n\r\n                        dstNormalsFace.push( faceNormal );\r\n                        dstNormalsVertex.push( vertexNormals );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                var morphNormals = this.morphNormals[ i ];\r\n\r\n                // set vertices to morph target\r\n\r\n                tmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n                // compute morph normals\r\n\r\n                tmpGeo.computeFaceNormals();\r\n                tmpGeo.computeVertexNormals();\r\n\r\n                // store morph normals\r\n\r\n                var faceNormal, vertexNormals;\r\n\r\n                for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                    face = this.faces[ f ];\r\n\r\n                    faceNormal = morphNormals.faceNormals[ f ];\r\n                    vertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n                    faceNormal.copy( face.normal );\r\n\r\n                    vertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n                    vertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n                    vertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // restore original normals\r\n\r\n            for ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n                face = this.faces[ f ];\r\n\r\n                face.normal = face.__originalFaceNormal;\r\n                face.vertexNormals = face.__originalVertexNormals;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeBoundingBox: function () {\r\n\r\n            if ( this.boundingBox === null ) {\r\n\r\n                this.boundingBox = new Box3();\r\n\r\n            }\r\n\r\n            this.boundingBox.setFromPoints( this.vertices );\r\n\r\n        },\r\n\r\n        computeBoundingSphere: function () {\r\n\r\n            if ( this.boundingSphere === null ) {\r\n\r\n                this.boundingSphere = new Sphere();\r\n\r\n            }\r\n\r\n            this.boundingSphere.setFromPoints( this.vertices );\r\n\r\n        },\r\n\r\n        merge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n            if ( ! ( geometry && geometry.isGeometry ) ) {\r\n\r\n                console.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n                return;\r\n\r\n            }\r\n\r\n            var normalMatrix,\r\n                vertexOffset = this.vertices.length,\r\n                vertices1 = this.vertices,\r\n                vertices2 = geometry.vertices,\r\n                faces1 = this.faces,\r\n                faces2 = geometry.faces,\r\n                uvs1 = this.faceVertexUvs[ 0 ],\r\n                uvs2 = geometry.faceVertexUvs[ 0 ],\r\n                colors1 = this.colors,\r\n                colors2 = geometry.colors;\r\n\r\n            if ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n            if ( matrix !== undefined ) {\r\n\r\n                normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n            }\r\n\r\n            // vertices\r\n\r\n            for ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n                var vertex = vertices2[ i ];\r\n\r\n                var vertexCopy = vertex.clone();\r\n\r\n                if ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n                vertices1.push( vertexCopy );\r\n\r\n            }\r\n\r\n            // colors\r\n\r\n            for ( var i = 0, il = colors2.length; i < il; i ++ ) {\r\n\r\n                colors1.push( colors2[ i ].clone() );\r\n\r\n            }\r\n\r\n            // faces\r\n\r\n            for ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n                var face = faces2[ i ], faceCopy, normal, color,\r\n                    faceVertexNormals = face.vertexNormals,\r\n                    faceVertexColors = face.vertexColors;\r\n\r\n                faceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n                faceCopy.normal.copy( face.normal );\r\n\r\n                if ( normalMatrix !== undefined ) {\r\n\r\n                    faceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                }\r\n\r\n                for ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n                    normal = faceVertexNormals[ j ].clone();\r\n\r\n                    if ( normalMatrix !== undefined ) {\r\n\r\n                        normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n                    }\r\n\r\n                    faceCopy.vertexNormals.push( normal );\r\n\r\n                }\r\n\r\n                faceCopy.color.copy( face.color );\r\n\r\n                for ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n                    color = faceVertexColors[ j ];\r\n                    faceCopy.vertexColors.push( color.clone() );\r\n\r\n                }\r\n\r\n                faceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n                faces1.push( faceCopy );\r\n\r\n            }\r\n\r\n            // uvs\r\n\r\n            for ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n                var uv = uvs2[ i ], uvCopy = [];\r\n\r\n                if ( uv === undefined ) {\r\n\r\n                    continue;\r\n\r\n                }\r\n\r\n                for ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n                    uvCopy.push( uv[ j ].clone() );\r\n\r\n                }\r\n\r\n                uvs1.push( uvCopy );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        mergeMesh: function ( mesh ) {\r\n\r\n            if ( ! ( mesh && mesh.isMesh ) ) {\r\n\r\n                console.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\r\n\r\n            this.merge( mesh.geometry, mesh.matrix );\r\n\r\n        },\r\n\r\n        /*\r\n\t\t * Checks for duplicate vertices with hashmap.\r\n\t\t * Duplicated vertices are removed\r\n\t\t * and faces' vertices are updated.\r\n\t\t */\r\n\r\n        mergeVertices: function () {\r\n\r\n            var verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n            var unique = [], changes = [];\r\n\r\n            var v, key;\r\n            var precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n            var precision = Math.pow( 10, precisionPoints );\r\n            var i, il, face;\r\n            var indices, j, jl;\r\n\r\n            for ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n                v = this.vertices[ i ];\r\n                key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n                if ( verticesMap[ key ] === undefined ) {\r\n\r\n                    verticesMap[ key ] = i;\r\n                    unique.push( this.vertices[ i ] );\r\n                    changes[ i ] = unique.length - 1;\r\n\r\n                } else {\r\n\r\n                    //console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n                    changes[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            // if faces are completely degenerate after merging vertices, we\r\n            // have to remove them from the geometry.\r\n            var faceIndicesToRemove = [];\r\n\r\n            for ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n                face = this.faces[ i ];\r\n\r\n                face.a = changes[ face.a ];\r\n                face.b = changes[ face.b ];\r\n                face.c = changes[ face.c ];\r\n\r\n                indices = [ face.a, face.b, face.c ];\r\n\r\n                // if any duplicate vertices are found in a Face3\r\n                // we have to remove the face as nothing can be saved\r\n                for ( var n = 0; n < 3; n ++ ) {\r\n\r\n                    if ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n                        faceIndicesToRemove.push( i );\r\n                        break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n                var idx = faceIndicesToRemove[ i ];\r\n\r\n                this.faces.splice( idx, 1 );\r\n\r\n                for ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n                    this.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Use unique set of vertices\r\n\r\n            var diff = this.vertices.length - unique.length;\r\n            this.vertices = unique;\r\n            return diff;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.vertices = [];\r\n\r\n            for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                var point = points[ i ];\r\n                this.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        sortFacesByMaterialIndex: function () {\r\n\r\n            var faces = this.faces;\r\n            var length = faces.length;\r\n\r\n            // tag faces\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                faces[ i ]._id = i;\r\n\r\n            }\r\n\r\n            // sort faces\r\n\r\n            function materialIndexSort( a, b ) {\r\n\r\n                return a.materialIndex - b.materialIndex;\r\n\r\n            }\r\n\r\n            faces.sort( materialIndexSort );\r\n\r\n            // sort uvs\r\n\r\n            var uvs1 = this.faceVertexUvs[ 0 ];\r\n            var uvs2 = this.faceVertexUvs[ 1 ];\r\n\r\n            var newUvs1, newUvs2;\r\n\r\n            if ( uvs1 && uvs1.length === length ) newUvs1 = [];\r\n            if ( uvs2 && uvs2.length === length ) newUvs2 = [];\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                var id = faces[ i ]._id;\r\n\r\n                if ( newUvs1 ) newUvs1.push( uvs1[ id ] );\r\n                if ( newUvs2 ) newUvs2.push( uvs2[ id ] );\r\n\r\n            }\r\n\r\n            if ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\r\n            if ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Geometry',\r\n                    generator: 'Geometry.toJSON'\r\n                }\r\n            };\r\n\r\n            // standard Geometry serialization\r\n\r\n            data.uuid = this.uuid;\r\n            data.type = this.type;\r\n            if ( this.name !== '' ) data.name = this.name;\r\n\r\n            if ( this.parameters !== undefined ) {\r\n\r\n                var parameters = this.parameters;\r\n\r\n                for ( var key in parameters ) {\r\n\r\n                    if ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n                }\r\n\r\n                return data;\r\n\r\n            }\r\n\r\n            var vertices = [];\r\n\r\n            for ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n                var vertex = this.vertices[ i ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n            var faces = [];\r\n            var normals = [];\r\n            var normalsHash = {};\r\n            var colors = [];\r\n            var colorsHash = {};\r\n            var uvs = [];\r\n            var uvsHash = {};\r\n\r\n            for ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n                var face = this.faces[ i ];\r\n\r\n                var hasMaterial = true;\r\n                var hasFaceUv = false; // deprecated\r\n                var hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n                var hasFaceNormal = face.normal.length() > 0;\r\n                var hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n                var hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n                var hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n                var faceType = 0;\r\n\r\n                faceType = setBit( faceType, 0, 0 ); // isQuad\r\n                faceType = setBit( faceType, 1, hasMaterial );\r\n                faceType = setBit( faceType, 2, hasFaceUv );\r\n                faceType = setBit( faceType, 3, hasFaceVertexUv );\r\n                faceType = setBit( faceType, 4, hasFaceNormal );\r\n                faceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n                faceType = setBit( faceType, 6, hasFaceColor );\r\n                faceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n                faces.push( faceType );\r\n                faces.push( face.a, face.b, face.c );\r\n                faces.push( face.materialIndex );\r\n\r\n                if ( hasFaceVertexUv ) {\r\n\r\n                    var faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n                    faces.push(\r\n                        getUvIndex( faceVertexUvs[ 0 ] ),\r\n                        getUvIndex( faceVertexUvs[ 1 ] ),\r\n                        getUvIndex( faceVertexUvs[ 2 ] )\r\n                    );\r\n\r\n                }\r\n\r\n                if ( hasFaceNormal ) {\r\n\r\n                    faces.push( getNormalIndex( face.normal ) );\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexNormal ) {\r\n\r\n                    var vertexNormals = face.vertexNormals;\r\n\r\n                    faces.push(\r\n                        getNormalIndex( vertexNormals[ 0 ] ),\r\n                        getNormalIndex( vertexNormals[ 1 ] ),\r\n                        getNormalIndex( vertexNormals[ 2 ] )\r\n                    );\r\n\r\n                }\r\n\r\n                if ( hasFaceColor ) {\r\n\r\n                    faces.push( getColorIndex( face.color ) );\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexColor ) {\r\n\r\n                    var vertexColors = face.vertexColors;\r\n\r\n                    faces.push(\r\n                        getColorIndex( vertexColors[ 0 ] ),\r\n                        getColorIndex( vertexColors[ 1 ] ),\r\n                        getColorIndex( vertexColors[ 2 ] )\r\n                    );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function setBit( value, position, enabled ) {\r\n\r\n                return enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n            }\r\n\r\n            function getNormalIndex( normal ) {\r\n\r\n                var hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n                if ( normalsHash[ hash ] !== undefined ) {\r\n\r\n                    return normalsHash[ hash ];\r\n\r\n                }\r\n\r\n                normalsHash[ hash ] = normals.length / 3;\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                return normalsHash[ hash ];\r\n\r\n            }\r\n\r\n            function getColorIndex( color ) {\r\n\r\n                var hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n                if ( colorsHash[ hash ] !== undefined ) {\r\n\r\n                    return colorsHash[ hash ];\r\n\r\n                }\r\n\r\n                colorsHash[ hash ] = colors.length;\r\n                colors.push( color.getHex() );\r\n\r\n                return colorsHash[ hash ];\r\n\r\n            }\r\n\r\n            function getUvIndex( uv ) {\r\n\r\n                var hash = uv.x.toString() + uv.y.toString();\r\n\r\n                if ( uvsHash[ hash ] !== undefined ) {\r\n\r\n                    return uvsHash[ hash ];\r\n\r\n                }\r\n\r\n                uvsHash[ hash ] = uvs.length / 2;\r\n                uvs.push( uv.x, uv.y );\r\n\r\n                return uvsHash[ hash ];\r\n\r\n            }\r\n\r\n            data.data = {};\r\n\r\n            data.data.vertices = vertices;\r\n            data.data.normals = normals;\r\n            if ( colors.length > 0 ) data.data.colors = colors;\r\n            if ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n            data.data.faces = faces;\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            /*\r\n\t\t\t // Handle primitives\r\n\r\n\t\t\t var parameters = this.parameters;\r\n\r\n\t\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t\t var values = [];\r\n\r\n\t\t\t for ( var key in parameters ) {\r\n\r\n\t\t\t values.push( parameters[ key ] );\r\n\r\n\t\t\t }\r\n\r\n\t\t\t var geometry = Object.create( this.constructor.prototype );\r\n\t\t\t this.constructor.apply( geometry, values );\r\n\t\t\t return geometry;\r\n\r\n\t\t\t }\r\n\r\n\t\t\t return new this.constructor().copy( this );\r\n\t\t\t */\r\n\r\n            return new Geometry().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            var i, il, j, jl, k, kl;\r\n\r\n            // reset\r\n\r\n            this.vertices = [];\r\n            this.colors = [];\r\n            this.faces = [];\r\n            this.faceVertexUvs = [[]];\r\n            this.morphTargets = [];\r\n            this.morphNormals = [];\r\n            this.skinWeights = [];\r\n            this.skinIndices = [];\r\n            this.lineDistances = [];\r\n            this.boundingBox = null;\r\n            this.boundingSphere = null;\r\n\r\n            // name\r\n\r\n            this.name = source.name;\r\n\r\n            // vertices\r\n\r\n            var vertices = source.vertices;\r\n\r\n            for ( i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n                this.vertices.push( vertices[ i ].clone() );\r\n\r\n            }\r\n\r\n            // colors\r\n\r\n            var colors = source.colors;\r\n\r\n            for ( i = 0, il = colors.length; i < il; i ++ ) {\r\n\r\n                this.colors.push( colors[ i ].clone() );\r\n\r\n            }\r\n\r\n            // faces\r\n\r\n            var faces = source.faces;\r\n\r\n            for ( i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n                this.faces.push( faces[ i ].clone() );\r\n\r\n            }\r\n\r\n            // face vertex uvs\r\n\r\n            for ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n                var faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n                if ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n                    this.faceVertexUvs[ i ] = [];\r\n\r\n                }\r\n\r\n                for ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n                    var uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n                    for ( k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n                        var uv = uvs[ k ];\r\n\r\n                        uvsCopy.push( uv.clone() );\r\n\r\n                    }\r\n\r\n                    this.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // morph targets\r\n\r\n            var morphTargets = source.morphTargets;\r\n\r\n            for ( i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n                var morphTarget = {};\r\n                morphTarget.name = morphTargets[ i ].name;\r\n\r\n                // vertices\r\n\r\n                if ( morphTargets[ i ].vertices !== undefined ) {\r\n\r\n                    morphTarget.vertices = [];\r\n\r\n                    for ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\r\n\r\n                        morphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // normals\r\n\r\n                if ( morphTargets[ i ].normals !== undefined ) {\r\n\r\n                    morphTarget.normals = [];\r\n\r\n                    for ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\r\n\r\n                        morphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.morphTargets.push( morphTarget );\r\n\r\n            }\r\n\r\n            // morph normals\r\n\r\n            var morphNormals = source.morphNormals;\r\n\r\n            for ( i = 0, il = morphNormals.length; i < il; i ++ ) {\r\n\r\n                var morphNormal = {};\r\n\r\n                // vertex normals\r\n\r\n                if ( morphNormals[ i ].vertexNormals !== undefined ) {\r\n\r\n                    morphNormal.vertexNormals = [];\r\n\r\n                    for ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\r\n\r\n                        var srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\r\n                        var destVertexNormal = {};\r\n\r\n                        destVertexNormal.a = srcVertexNormal.a.clone();\r\n                        destVertexNormal.b = srcVertexNormal.b.clone();\r\n                        destVertexNormal.c = srcVertexNormal.c.clone();\r\n\r\n                        morphNormal.vertexNormals.push( destVertexNormal );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // face normals\r\n\r\n                if ( morphNormals[ i ].faceNormals !== undefined ) {\r\n\r\n                    morphNormal.faceNormals = [];\r\n\r\n                    for ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\r\n\r\n                        morphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.morphNormals.push( morphNormal );\r\n\r\n            }\r\n\r\n            // skin weights\r\n\r\n            var skinWeights = source.skinWeights;\r\n\r\n            for ( i = 0, il = skinWeights.length; i < il; i ++ ) {\r\n\r\n                this.skinWeights.push( skinWeights[ i ].clone() );\r\n\r\n            }\r\n\r\n            // skin indices\r\n\r\n            var skinIndices = source.skinIndices;\r\n\r\n            for ( i = 0, il = skinIndices.length; i < il; i ++ ) {\r\n\r\n                this.skinIndices.push( skinIndices[ i ].clone() );\r\n\r\n            }\r\n\r\n            // line distances\r\n\r\n            var lineDistances = source.lineDistances;\r\n\r\n            for ( i = 0, il = lineDistances.length; i < il; i ++ ) {\r\n\r\n                this.lineDistances.push( lineDistances[ i ] );\r\n\r\n            }\r\n\r\n            // bounding box\r\n\r\n            var boundingBox = source.boundingBox;\r\n\r\n            if ( boundingBox !== null ) {\r\n\r\n                this.boundingBox = boundingBox.clone();\r\n\r\n            }\r\n\r\n            // bounding sphere\r\n\r\n            var boundingSphere = source.boundingSphere;\r\n\r\n            if ( boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = boundingSphere.clone();\r\n\r\n            }\r\n\r\n            // update flags\r\n\r\n            this.elementsNeedUpdate = source.elementsNeedUpdate;\r\n            this.verticesNeedUpdate = source.verticesNeedUpdate;\r\n            this.uvsNeedUpdate = source.uvsNeedUpdate;\r\n            this.normalsNeedUpdate = source.normalsNeedUpdate;\r\n            this.colorsNeedUpdate = source.colorsNeedUpdate;\r\n            this.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\r\n            this.groupsNeedUpdate = source.groupsNeedUpdate;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        if ( Array.isArray( array ) ) {\r\n\r\n            throw new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n        }\r\n\r\n        this.name = '';\r\n\r\n        this.array = array;\r\n        this.itemSize = itemSize;\r\n        this.count = array !== undefined ? array.length / itemSize : 0;\r\n        this.normalized = normalized === true;\r\n\r\n        this.dynamic = false;\r\n        this.updateRange = { offset: 0, count: - 1 };\r\n\r\n        this.version = 0;\r\n\r\n    }\r\n\r\n    Object.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value === true ) this.version ++;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( BufferAttribute.prototype, {\r\n\r\n        isBufferAttribute: true,\r\n\r\n        onUploadCallback: function () {},\r\n\r\n        setArray: function ( array ) {\r\n\r\n            if ( Array.isArray( array ) ) {\r\n\r\n                throw new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n            }\r\n\r\n            this.count = array !== undefined ? array.length / this.itemSize : 0;\r\n            this.array = array;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setDynamic: function ( value ) {\r\n\r\n            this.dynamic = value;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.name = source.name;\r\n            this.array = new source.array.constructor( source.array );\r\n            this.itemSize = source.itemSize;\r\n            this.count = source.count;\r\n            this.normalized = source.normalized;\r\n\r\n            this.dynamic = source.dynamic;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyAt: function ( index1, attribute, index2 ) {\r\n\r\n            index1 *= this.itemSize;\r\n            index2 *= attribute.itemSize;\r\n\r\n            for ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n                this.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyArray: function ( array ) {\r\n\r\n            this.array.set( array );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyColorsArray: function ( colors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n                var color = colors[ i ];\r\n\r\n                if ( color === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n                    color = new Color();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = color.r;\r\n                array[ offset ++ ] = color.g;\r\n                array[ offset ++ ] = color.b;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyVector2sArray: function ( vectors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n                var vector = vectors[ i ];\r\n\r\n                if ( vector === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n                    vector = new Vector2();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = vector.x;\r\n                array[ offset ++ ] = vector.y;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyVector3sArray: function ( vectors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n                var vector = vectors[ i ];\r\n\r\n                if ( vector === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n                    vector = new Vector3();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = vector.x;\r\n                array[ offset ++ ] = vector.y;\r\n                array[ offset ++ ] = vector.z;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyVector4sArray: function ( vectors ) {\r\n\r\n            var array = this.array, offset = 0;\r\n\r\n            for ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n                var vector = vectors[ i ];\r\n\r\n                if ( vector === undefined ) {\r\n\r\n                    console.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n                    vector = new Vector4();\r\n\r\n                }\r\n\r\n                array[ offset ++ ] = vector.x;\r\n                array[ offset ++ ] = vector.y;\r\n                array[ offset ++ ] = vector.z;\r\n                array[ offset ++ ] = vector.w;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        set: function ( value, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.array.set( value, offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getX: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize ];\r\n\r\n        },\r\n\r\n        setX: function ( index, x ) {\r\n\r\n            this.array[ index * this.itemSize ] = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getY: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize + 1 ];\r\n\r\n        },\r\n\r\n        setY: function ( index, y ) {\r\n\r\n            this.array[ index * this.itemSize + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getZ: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize + 2 ];\r\n\r\n        },\r\n\r\n        setZ: function ( index, z ) {\r\n\r\n            this.array[ index * this.itemSize + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getW: function ( index ) {\r\n\r\n            return this.array[ index * this.itemSize + 3 ];\r\n\r\n        },\r\n\r\n        setW: function ( index, w ) {\r\n\r\n            this.array[ index * this.itemSize + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXY: function ( index, x, y ) {\r\n\r\n            index *= this.itemSize;\r\n\r\n            this.array[ index + 0 ] = x;\r\n            this.array[ index + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZ: function ( index, x, y, z ) {\r\n\r\n            index *= this.itemSize;\r\n\r\n            this.array[ index + 0 ] = x;\r\n            this.array[ index + 1 ] = y;\r\n            this.array[ index + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZW: function ( index, x, y, z, w ) {\r\n\r\n            index *= this.itemSize;\r\n\r\n            this.array[ index + 0 ] = x;\r\n            this.array[ index + 1 ] = y;\r\n            this.array[ index + 2 ] = z;\r\n            this.array[ index + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        onUpload: function ( callback ) {\r\n\r\n            this.onUploadCallback = callback;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.array, this.itemSize ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    function Int8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Int8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Int8BufferAttribute.prototype.constructor = Int8BufferAttribute;\r\n\r\n\r\n    function Uint8BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\r\n\r\n\r\n    function Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\r\n\r\n\r\n    function Int16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Int16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Int16BufferAttribute.prototype.constructor = Int16BufferAttribute;\r\n\r\n\r\n    function Uint16BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\r\n\r\n\r\n    function Int32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Int32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Int32BufferAttribute.prototype.constructor = Int32BufferAttribute;\r\n\r\n\r\n    function Uint32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Uint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Uint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\r\n\r\n\r\n    function Float32BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Float32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Float32BufferAttribute.prototype.constructor = Float32BufferAttribute;\r\n\r\n\r\n    function Float64BufferAttribute( array, itemSize, normalized ) {\r\n\r\n        BufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\r\n\r\n    }\r\n\r\n    Float64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\r\n    Float64BufferAttribute.prototype.constructor = Float64BufferAttribute;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function DirectGeometry() {\r\n\r\n        this.vertices = [];\r\n        this.normals = [];\r\n        this.colors = [];\r\n        this.uvs = [];\r\n        this.uvs2 = [];\r\n\r\n        this.groups = [];\r\n\r\n        this.morphTargets = {};\r\n\r\n        this.skinWeights = [];\r\n        this.skinIndices = [];\r\n\r\n        // this.lineDistances = [];\r\n\r\n        this.boundingBox = null;\r\n        this.boundingSphere = null;\r\n\r\n        // update flags\r\n\r\n        this.verticesNeedUpdate = false;\r\n        this.normalsNeedUpdate = false;\r\n        this.colorsNeedUpdate = false;\r\n        this.uvsNeedUpdate = false;\r\n        this.groupsNeedUpdate = false;\r\n\r\n    }\r\n\r\n    Object.assign( DirectGeometry.prototype, {\r\n\r\n        computeGroups: function ( geometry ) {\r\n\r\n            var group;\r\n            var groups = [];\r\n            var materialIndex = undefined;\r\n\r\n            var faces = geometry.faces;\r\n\r\n            for ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                // materials\r\n\r\n                if ( face.materialIndex !== materialIndex ) {\r\n\r\n                    materialIndex = face.materialIndex;\r\n\r\n                    if ( group !== undefined ) {\r\n\r\n                        group.count = ( i * 3 ) - group.start;\r\n                        groups.push( group );\r\n\r\n                    }\r\n\r\n                    group = {\r\n                        start: i * 3,\r\n                        materialIndex: materialIndex\r\n                    };\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( group !== undefined ) {\r\n\r\n                group.count = ( i * 3 ) - group.start;\r\n                groups.push( group );\r\n\r\n            }\r\n\r\n            this.groups = groups;\r\n\r\n        },\r\n\r\n        fromGeometry: function ( geometry ) {\r\n\r\n            var faces = geometry.faces;\r\n            var vertices = geometry.vertices;\r\n            var faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n            var hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n            var hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n            // morphs\r\n\r\n            var morphTargets = geometry.morphTargets;\r\n            var morphTargetsLength = morphTargets.length;\r\n\r\n            var morphTargetsPosition;\r\n\r\n            if ( morphTargetsLength > 0 ) {\r\n\r\n                morphTargetsPosition = [];\r\n\r\n                for ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n                    morphTargetsPosition[ i ] = [];\r\n\r\n                }\r\n\r\n                this.morphTargets.position = morphTargetsPosition;\r\n\r\n            }\r\n\r\n            var morphNormals = geometry.morphNormals;\r\n            var morphNormalsLength = morphNormals.length;\r\n\r\n            var morphTargetsNormal;\r\n\r\n            if ( morphNormalsLength > 0 ) {\r\n\r\n                morphTargetsNormal = [];\r\n\r\n                for ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n                    morphTargetsNormal[ i ] = [];\r\n\r\n                }\r\n\r\n                this.morphTargets.normal = morphTargetsNormal;\r\n\r\n            }\r\n\r\n            // skins\r\n\r\n            var skinIndices = geometry.skinIndices;\r\n            var skinWeights = geometry.skinWeights;\r\n\r\n            var hasSkinIndices = skinIndices.length === vertices.length;\r\n            var hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n            //\r\n\r\n            if ( faces.length === 0 ) {\r\n\r\n                console.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                this.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n                var vertexNormals = face.vertexNormals;\r\n\r\n                if ( vertexNormals.length === 3 ) {\r\n\r\n                    this.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n                } else {\r\n\r\n                    var normal = face.normal;\r\n\r\n                    this.normals.push( normal, normal, normal );\r\n\r\n                }\r\n\r\n                var vertexColors = face.vertexColors;\r\n\r\n                if ( vertexColors.length === 3 ) {\r\n\r\n                    this.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n                } else {\r\n\r\n                    var color = face.color;\r\n\r\n                    this.colors.push( color, color, color );\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexUv === true ) {\r\n\r\n                    var vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n                    if ( vertexUvs !== undefined ) {\r\n\r\n                        this.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n                        this.uvs.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( hasFaceVertexUv2 === true ) {\r\n\r\n                    var vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n                    if ( vertexUvs !== undefined ) {\r\n\r\n                        this.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n                        this.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // morphs\r\n\r\n                for ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n                    var morphTarget = morphTargets[ j ].vertices;\r\n\r\n                    morphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n                }\r\n\r\n                for ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n                    var morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n                    morphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n                }\r\n\r\n                // skins\r\n\r\n                if ( hasSkinIndices ) {\r\n\r\n                    this.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n                }\r\n\r\n                if ( hasSkinWeights ) {\r\n\r\n                    this.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.computeGroups( geometry );\r\n\r\n            this.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n            this.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n            this.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n            this.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n            this.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function arrayMax( array ) {\r\n\r\n        if ( array.length === 0 ) return - Infinity;\r\n\r\n        var max = array[ 0 ];\r\n\r\n        for ( var i = 1, l = array.length; i < l; ++ i ) {\r\n\r\n            if ( array[ i ] > max ) max = array[ i ];\r\n\r\n        }\r\n\r\n        return max;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\r\n\r\n    function BufferGeometry() {\r\n\r\n        Object.defineProperty( this, 'id', { value: bufferGeometryId += 2 } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'BufferGeometry';\r\n\r\n        this.index = null;\r\n        this.attributes = {};\r\n\r\n        this.morphAttributes = {};\r\n\r\n        this.groups = [];\r\n\r\n        this.boundingBox = null;\r\n        this.boundingSphere = null;\r\n\r\n        this.drawRange = { start: 0, count: Infinity };\r\n\r\n        this.userData = {};\r\n\r\n    }\r\n\r\n    BufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: BufferGeometry,\r\n\r\n        isBufferGeometry: true,\r\n\r\n        getIndex: function () {\r\n\r\n            return this.index;\r\n\r\n        },\r\n\r\n        setIndex: function ( index ) {\r\n\r\n            if ( Array.isArray( index ) ) {\r\n\r\n                this.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\r\n\r\n            } else {\r\n\r\n                this.index = index;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        addAttribute: function ( name, attribute ) {\r\n\r\n            if ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n                return this.addAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n            }\r\n\r\n            if ( name === 'index' ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n                this.setIndex( attribute );\r\n\r\n                return this;\r\n\r\n            }\r\n\r\n            this.attributes[ name ] = attribute;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getAttribute: function ( name ) {\r\n\r\n            return this.attributes[ name ];\r\n\r\n        },\r\n\r\n        removeAttribute: function ( name ) {\r\n\r\n            delete this.attributes[ name ];\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addGroup: function ( start, count, materialIndex ) {\r\n\r\n            this.groups.push( {\r\n\r\n                start: start,\r\n                count: count,\r\n                materialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n            } );\r\n\r\n        },\r\n\r\n        clearGroups: function () {\r\n\r\n            this.groups = [];\r\n\r\n        },\r\n\r\n        setDrawRange: function ( start, count ) {\r\n\r\n            this.drawRange.start = start;\r\n            this.drawRange.count = count;\r\n\r\n        },\r\n\r\n        applyMatrix: function ( matrix ) {\r\n\r\n            var position = this.attributes.position;\r\n\r\n            if ( position !== undefined ) {\r\n\r\n                matrix.applyToBufferAttribute( position );\r\n                position.needsUpdate = true;\r\n\r\n            }\r\n\r\n            var normal = this.attributes.normal;\r\n\r\n            if ( normal !== undefined ) {\r\n\r\n                var normalMatrix = new Matrix3().getNormalMatrix( matrix );\r\n\r\n                normalMatrix.applyToBufferAttribute( normal );\r\n                normal.needsUpdate = true;\r\n\r\n            }\r\n\r\n            if ( this.boundingBox !== null ) {\r\n\r\n                this.computeBoundingBox();\r\n\r\n            }\r\n\r\n            if ( this.boundingSphere !== null ) {\r\n\r\n                this.computeBoundingSphere();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        rotateX: function () {\r\n\r\n            // rotate geometry around world x-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateX( angle ) {\r\n\r\n                m1.makeRotationX( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateY: function () {\r\n\r\n            // rotate geometry around world y-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateY( angle ) {\r\n\r\n                m1.makeRotationY( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        rotateZ: function () {\r\n\r\n            // rotate geometry around world z-axis\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function rotateZ( angle ) {\r\n\r\n                m1.makeRotationZ( angle );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        translate: function () {\r\n\r\n            // translate geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function translate( x, y, z ) {\r\n\r\n                m1.makeTranslation( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        scale: function () {\r\n\r\n            // scale geometry\r\n\r\n            var m1 = new Matrix4();\r\n\r\n            return function scale( x, y, z ) {\r\n\r\n                m1.makeScale( x, y, z );\r\n\r\n                this.applyMatrix( m1 );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        lookAt: function () {\r\n\r\n            var obj = new Object3D();\r\n\r\n            return function lookAt( vector ) {\r\n\r\n                obj.lookAt( vector );\r\n\r\n                obj.updateMatrix();\r\n\r\n                this.applyMatrix( obj.matrix );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        center: function () {\r\n\r\n            var offset = new Vector3();\r\n\r\n            return function center() {\r\n\r\n                this.computeBoundingBox();\r\n\r\n                this.boundingBox.getCenter( offset ).negate();\r\n\r\n                this.translate( offset.x, offset.y, offset.z );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        setFromObject: function ( object ) {\r\n\r\n            // console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n            var geometry = object.geometry;\r\n\r\n            if ( object.isPoints || object.isLine ) {\r\n\r\n                var positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\r\n                var colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\r\n\r\n                this.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n                this.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n                if ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n                    var lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\r\n\r\n                    this.addAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n                }\r\n\r\n                if ( geometry.boundingSphere !== null ) {\r\n\r\n                    this.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n                }\r\n\r\n                if ( geometry.boundingBox !== null ) {\r\n\r\n                    this.boundingBox = geometry.boundingBox.clone();\r\n\r\n                }\r\n\r\n            } else if ( object.isMesh ) {\r\n\r\n                if ( geometry && geometry.isGeometry ) {\r\n\r\n                    this.fromGeometry( geometry );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            var position = [];\r\n\r\n            for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                var point = points[ i ];\r\n                position.push( point.x, point.y, point.z || 0 );\r\n\r\n            }\r\n\r\n            this.addAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        updateFromObject: function ( object ) {\r\n\r\n            var geometry = object.geometry;\r\n\r\n            if ( object.isMesh ) {\r\n\r\n                var direct = geometry.__directGeometry;\r\n\r\n                if ( geometry.elementsNeedUpdate === true ) {\r\n\r\n                    direct = undefined;\r\n                    geometry.elementsNeedUpdate = false;\r\n\r\n                }\r\n\r\n                if ( direct === undefined ) {\r\n\r\n                    return this.fromGeometry( geometry );\r\n\r\n                }\r\n\r\n                direct.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n                direct.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n                direct.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n                direct.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n                direct.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n                geometry.verticesNeedUpdate = false;\r\n                geometry.normalsNeedUpdate = false;\r\n                geometry.colorsNeedUpdate = false;\r\n                geometry.uvsNeedUpdate = false;\r\n                geometry.groupsNeedUpdate = false;\r\n\r\n                geometry = direct;\r\n\r\n            }\r\n\r\n            var attribute;\r\n\r\n            if ( geometry.verticesNeedUpdate === true ) {\r\n\r\n                attribute = this.attributes.position;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyVector3sArray( geometry.vertices );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.verticesNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.normalsNeedUpdate === true ) {\r\n\r\n                attribute = this.attributes.normal;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyVector3sArray( geometry.normals );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.normalsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.colorsNeedUpdate === true ) {\r\n\r\n                attribute = this.attributes.color;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyColorsArray( geometry.colors );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.colorsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.uvsNeedUpdate ) {\r\n\r\n                attribute = this.attributes.uv;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyVector2sArray( geometry.uvs );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.uvsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n                attribute = this.attributes.lineDistance;\r\n\r\n                if ( attribute !== undefined ) {\r\n\r\n                    attribute.copyArray( geometry.lineDistances );\r\n                    attribute.needsUpdate = true;\r\n\r\n                }\r\n\r\n                geometry.lineDistancesNeedUpdate = false;\r\n\r\n            }\r\n\r\n            if ( geometry.groupsNeedUpdate ) {\r\n\r\n                geometry.computeGroups( object.geometry );\r\n                this.groups = geometry.groups;\r\n\r\n                geometry.groupsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        fromGeometry: function ( geometry ) {\r\n\r\n            geometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\r\n\r\n            return this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n        },\r\n\r\n        fromDirectGeometry: function ( geometry ) {\r\n\r\n            var positions = new Float32Array( geometry.vertices.length * 3 );\r\n            this.addAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n            if ( geometry.normals.length > 0 ) {\r\n\r\n                var normals = new Float32Array( geometry.normals.length * 3 );\r\n                this.addAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n            }\r\n\r\n            if ( geometry.colors.length > 0 ) {\r\n\r\n                var colors = new Float32Array( geometry.colors.length * 3 );\r\n                this.addAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n            }\r\n\r\n            if ( geometry.uvs.length > 0 ) {\r\n\r\n                var uvs = new Float32Array( geometry.uvs.length * 2 );\r\n                this.addAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n            }\r\n\r\n            if ( geometry.uvs2.length > 0 ) {\r\n\r\n                var uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n                this.addAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n            }\r\n\r\n            // groups\r\n\r\n            this.groups = geometry.groups;\r\n\r\n            // morphs\r\n\r\n            for ( var name in geometry.morphTargets ) {\r\n\r\n                var array = [];\r\n                var morphTargets = geometry.morphTargets[ name ];\r\n\r\n                for ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n                    var morphTarget = morphTargets[ i ];\r\n\r\n                    var attribute = new Float32BufferAttribute( morphTarget.length * 3, 3 );\r\n\r\n                    array.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n                }\r\n\r\n                this.morphAttributes[ name ] = array;\r\n\r\n            }\r\n\r\n            // skinning\r\n\r\n            if ( geometry.skinIndices.length > 0 ) {\r\n\r\n                var skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\r\n                this.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n            }\r\n\r\n            if ( geometry.skinWeights.length > 0 ) {\r\n\r\n                var skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\r\n                this.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n            }\r\n\r\n            //\r\n\r\n            if ( geometry.boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n            }\r\n\r\n            if ( geometry.boundingBox !== null ) {\r\n\r\n                this.boundingBox = geometry.boundingBox.clone();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        computeBoundingBox: function () {\r\n\r\n            if ( this.boundingBox === null ) {\r\n\r\n                this.boundingBox = new Box3();\r\n\r\n            }\r\n\r\n            var position = this.attributes.position;\r\n\r\n            if ( position !== undefined ) {\r\n\r\n                this.boundingBox.setFromBufferAttribute( position );\r\n\r\n            } else {\r\n\r\n                this.boundingBox.makeEmpty();\r\n\r\n            }\r\n\r\n            if ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n                console.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        computeBoundingSphere: function () {\r\n\r\n            var box = new Box3();\r\n            var vector = new Vector3();\r\n\r\n            return function computeBoundingSphere() {\r\n\r\n                if ( this.boundingSphere === null ) {\r\n\r\n                    this.boundingSphere = new Sphere();\r\n\r\n                }\r\n\r\n                var position = this.attributes.position;\r\n\r\n                if ( position ) {\r\n\r\n                    var center = this.boundingSphere.center;\r\n\r\n                    box.setFromBufferAttribute( position );\r\n                    box.getCenter( center );\r\n\r\n                    // hoping to find a boundingSphere with a radius smaller than the\r\n                    // boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n                    var maxRadiusSq = 0;\r\n\r\n                    for ( var i = 0, il = position.count; i < il; i ++ ) {\r\n\r\n                        vector.x = position.getX( i );\r\n                        vector.y = position.getY( i );\r\n                        vector.z = position.getZ( i );\r\n                        maxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n                    }\r\n\r\n                    this.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n                    if ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n                        console.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        computeFaceNormals: function () {\r\n\r\n            // backwards compatibility\r\n\r\n        },\r\n\r\n        computeVertexNormals: function () {\r\n\r\n            var index = this.index;\r\n            var attributes = this.attributes;\r\n            var groups = this.groups;\r\n\r\n            if ( attributes.position ) {\r\n\r\n                var positions = attributes.position.array;\r\n\r\n                if ( attributes.normal === undefined ) {\r\n\r\n                    this.addAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n                } else {\r\n\r\n                    // reset existing normals to zero\r\n\r\n                    var array = attributes.normal.array;\r\n\r\n                    for ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n                        array[ i ] = 0;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                var normals = attributes.normal.array;\r\n\r\n                var vA, vB, vC;\r\n                var pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\r\n                var cb = new Vector3(), ab = new Vector3();\r\n\r\n                // indexed elements\r\n\r\n                if ( index ) {\r\n\r\n                    var indices = index.array;\r\n\r\n                    if ( groups.length === 0 ) {\r\n\r\n                        this.addGroup( 0, indices.length );\r\n\r\n                    }\r\n\r\n                    for ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n                        var group = groups[ j ];\r\n\r\n                        var start = group.start;\r\n                        var count = group.count;\r\n\r\n                        for ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n                            vA = indices[ i + 0 ] * 3;\r\n                            vB = indices[ i + 1 ] * 3;\r\n                            vC = indices[ i + 2 ] * 3;\r\n\r\n                            pA.fromArray( positions, vA );\r\n                            pB.fromArray( positions, vB );\r\n                            pC.fromArray( positions, vC );\r\n\r\n                            cb.subVectors( pC, pB );\r\n                            ab.subVectors( pA, pB );\r\n                            cb.cross( ab );\r\n\r\n                            normals[ vA ] += cb.x;\r\n                            normals[ vA + 1 ] += cb.y;\r\n                            normals[ vA + 2 ] += cb.z;\r\n\r\n                            normals[ vB ] += cb.x;\r\n                            normals[ vB + 1 ] += cb.y;\r\n                            normals[ vB + 2 ] += cb.z;\r\n\r\n                            normals[ vC ] += cb.x;\r\n                            normals[ vC + 1 ] += cb.y;\r\n                            normals[ vC + 2 ] += cb.z;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // non-indexed elements (unconnected triangle soup)\r\n\r\n                    for ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n                        pA.fromArray( positions, i );\r\n                        pB.fromArray( positions, i + 3 );\r\n                        pC.fromArray( positions, i + 6 );\r\n\r\n                        cb.subVectors( pC, pB );\r\n                        ab.subVectors( pA, pB );\r\n                        cb.cross( ab );\r\n\r\n                        normals[ i ] = cb.x;\r\n                        normals[ i + 1 ] = cb.y;\r\n                        normals[ i + 2 ] = cb.z;\r\n\r\n                        normals[ i + 3 ] = cb.x;\r\n                        normals[ i + 4 ] = cb.y;\r\n                        normals[ i + 5 ] = cb.z;\r\n\r\n                        normals[ i + 6 ] = cb.x;\r\n                        normals[ i + 7 ] = cb.y;\r\n                        normals[ i + 8 ] = cb.z;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this.normalizeNormals();\r\n\r\n                attributes.normal.needsUpdate = true;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        merge: function ( geometry, offset ) {\r\n\r\n            if ( ! ( geometry && geometry.isBufferGeometry ) ) {\r\n\r\n                console.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( offset === undefined ) {\r\n\r\n                offset = 0;\r\n\r\n                console.warn(\r\n                    'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\r\n                    + 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\r\n                );\r\n\r\n            }\r\n\r\n            var attributes = this.attributes;\r\n\r\n            for ( var key in attributes ) {\r\n\r\n                if ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n                var attribute1 = attributes[ key ];\r\n                var attributeArray1 = attribute1.array;\r\n\r\n                var attribute2 = geometry.attributes[ key ];\r\n                var attributeArray2 = attribute2.array;\r\n\r\n                var attributeSize = attribute2.itemSize;\r\n\r\n                for ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n                    attributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        normalizeNormals: function () {\r\n\r\n            var vector = new Vector3();\r\n\r\n            return function normalizeNormals() {\r\n\r\n                var normals = this.attributes.normal;\r\n\r\n                for ( var i = 0, il = normals.count; i < il; i ++ ) {\r\n\r\n                    vector.x = normals.getX( i );\r\n                    vector.y = normals.getY( i );\r\n                    vector.z = normals.getZ( i );\r\n\r\n                    vector.normalize();\r\n\r\n                    normals.setXYZ( i, vector.x, vector.y, vector.z );\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        toNonIndexed: function () {\r\n\r\n            if ( this.index === null ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\r\n                return this;\r\n\r\n            }\r\n\r\n            var geometry2 = new BufferGeometry();\r\n\r\n            var indices = this.index.array;\r\n            var attributes = this.attributes;\r\n\r\n            for ( var name in attributes ) {\r\n\r\n                var attribute = attributes[ name ];\r\n\r\n                var array = attribute.array;\r\n                var itemSize = attribute.itemSize;\r\n\r\n                var array2 = new array.constructor( indices.length * itemSize );\r\n\r\n                var index = 0, index2 = 0;\r\n\r\n                for ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n                    index = indices[ i ] * itemSize;\r\n\r\n                    for ( var j = 0; j < itemSize; j ++ ) {\r\n\r\n                        array2[ index2 ++ ] = array[ index ++ ];\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                geometry2.addAttribute( name, new BufferAttribute( array2, itemSize ) );\r\n\r\n            }\r\n\r\n            var groups = this.groups;\r\n\r\n            for ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n                var group = groups[ i ];\r\n                geometry2.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n            }\r\n\r\n            return geometry2;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'BufferGeometry',\r\n                    generator: 'BufferGeometry.toJSON'\r\n                }\r\n            };\r\n\r\n            // standard BufferGeometry serialization\r\n\r\n            data.uuid = this.uuid;\r\n            data.type = this.type;\r\n            if ( this.name !== '' ) data.name = this.name;\r\n            if ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\r\n\r\n            if ( this.parameters !== undefined ) {\r\n\r\n                var parameters = this.parameters;\r\n\r\n                for ( var key in parameters ) {\r\n\r\n                    if ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n                }\r\n\r\n                return data;\r\n\r\n            }\r\n\r\n            data.data = { attributes: {} };\r\n\r\n            var index = this.index;\r\n\r\n            if ( index !== null ) {\r\n\r\n                var array = Array.prototype.slice.call( index.array );\r\n\r\n                data.data.index = {\r\n                    type: index.array.constructor.name,\r\n                    array: array\r\n                };\r\n\r\n            }\r\n\r\n            var attributes = this.attributes;\r\n\r\n            for ( var key in attributes ) {\r\n\r\n                var attribute = attributes[ key ];\r\n\r\n                var array = Array.prototype.slice.call( attribute.array );\r\n\r\n                data.data.attributes[ key ] = {\r\n                    itemSize: attribute.itemSize,\r\n                    type: attribute.array.constructor.name,\r\n                    array: array,\r\n                    normalized: attribute.normalized\r\n                };\r\n\r\n            }\r\n\r\n            var groups = this.groups;\r\n\r\n            if ( groups.length > 0 ) {\r\n\r\n                data.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n            }\r\n\r\n            var boundingSphere = this.boundingSphere;\r\n\r\n            if ( boundingSphere !== null ) {\r\n\r\n                data.data.boundingSphere = {\r\n                    center: boundingSphere.center.toArray(),\r\n                    radius: boundingSphere.radius\r\n                };\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            /*\r\n\t\t\t // Handle primitives\r\n\r\n\t\t\t var parameters = this.parameters;\r\n\r\n\t\t\t if ( parameters !== undefined ) {\r\n\r\n\t\t\t var values = [];\r\n\r\n\t\t\t for ( var key in parameters ) {\r\n\r\n\t\t\t values.push( parameters[ key ] );\r\n\r\n\t\t\t }\r\n\r\n\t\t\t var geometry = Object.create( this.constructor.prototype );\r\n\t\t\t this.constructor.apply( geometry, values );\r\n\t\t\t return geometry;\r\n\r\n\t\t\t }\r\n\r\n\t\t\t return new this.constructor().copy( this );\r\n\t\t\t */\r\n\r\n            return new BufferGeometry().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            var name, i, l;\r\n\r\n            // reset\r\n\r\n            this.index = null;\r\n            this.attributes = {};\r\n            this.morphAttributes = {};\r\n            this.groups = [];\r\n            this.boundingBox = null;\r\n            this.boundingSphere = null;\r\n\r\n            // name\r\n\r\n            this.name = source.name;\r\n\r\n            // index\r\n\r\n            var index = source.index;\r\n\r\n            if ( index !== null ) {\r\n\r\n                this.setIndex( index.clone() );\r\n\r\n            }\r\n\r\n            // attributes\r\n\r\n            var attributes = source.attributes;\r\n\r\n            for ( name in attributes ) {\r\n\r\n                var attribute = attributes[ name ];\r\n                this.addAttribute( name, attribute.clone() );\r\n\r\n            }\r\n\r\n            // morph attributes\r\n\r\n            var morphAttributes = source.morphAttributes;\r\n\r\n            for ( name in morphAttributes ) {\r\n\r\n                var array = [];\r\n                var morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\r\n\r\n                for ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\r\n\r\n                    array.push( morphAttribute[ i ].clone() );\r\n\r\n                }\r\n\r\n                this.morphAttributes[ name ] = array;\r\n\r\n            }\r\n\r\n            // groups\r\n\r\n            var groups = source.groups;\r\n\r\n            for ( i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n                var group = groups[ i ];\r\n                this.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n            }\r\n\r\n            // bounding box\r\n\r\n            var boundingBox = source.boundingBox;\r\n\r\n            if ( boundingBox !== null ) {\r\n\r\n                this.boundingBox = boundingBox.clone();\r\n\r\n            }\r\n\r\n            // bounding sphere\r\n\r\n            var boundingSphere = source.boundingSphere;\r\n\r\n            if ( boundingSphere !== null ) {\r\n\r\n                this.boundingSphere = boundingSphere.clone();\r\n\r\n            }\r\n\r\n            // draw range\r\n\r\n            this.drawRange.start = source.drawRange.start;\r\n            this.drawRange.count = source.drawRange.count;\r\n\r\n            // user data\r\n\r\n            this.userData = source.userData;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // BoxGeometry\r\n\r\n    function BoxGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'BoxGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            depth: depth,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            depthSegments: depthSegments\r\n        };\r\n\r\n        this.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    BoxGeometry.prototype = Object.create( Geometry.prototype );\r\n    BoxGeometry.prototype.constructor = BoxGeometry;\r\n\r\n    // BoxBufferGeometry\r\n\r\n    function BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'BoxBufferGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            depth: depth,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            depthSegments: depthSegments\r\n        };\r\n\r\n        var scope = this;\r\n\r\n        width = width || 1;\r\n        height = height || 1;\r\n        depth = depth || 1;\r\n\r\n        // segments\r\n\r\n        widthSegments = Math.floor( widthSegments ) || 1;\r\n        heightSegments = Math.floor( heightSegments ) || 1;\r\n        depthSegments = Math.floor( depthSegments ) || 1;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var numberOfVertices = 0;\r\n        var groupStart = 0;\r\n\r\n        // build each side of the box geometry\r\n\r\n        buildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\r\n        buildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\r\n        buildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\r\n        buildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\r\n        buildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\r\n        buildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        function buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\r\n\r\n            var segmentWidth = width / gridX;\r\n            var segmentHeight = height / gridY;\r\n\r\n            var widthHalf = width / 2;\r\n            var heightHalf = height / 2;\r\n            var depthHalf = depth / 2;\r\n\r\n            var gridX1 = gridX + 1;\r\n            var gridY1 = gridY + 1;\r\n\r\n            var vertexCounter = 0;\r\n            var groupCount = 0;\r\n\r\n            var ix, iy;\r\n\r\n            var vector = new Vector3();\r\n\r\n            // generate vertices, normals and uvs\r\n\r\n            for ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n                var y = iy * segmentHeight - heightHalf;\r\n\r\n                for ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n                    var x = ix * segmentWidth - widthHalf;\r\n\r\n                    // set values to correct vector component\r\n\r\n                    vector[ u ] = x * udir;\r\n                    vector[ v ] = y * vdir;\r\n                    vector[ w ] = depthHalf;\r\n\r\n                    // now apply vector to vertex buffer\r\n\r\n                    vertices.push( vector.x, vector.y, vector.z );\r\n\r\n                    // set values to correct vector component\r\n\r\n                    vector[ u ] = 0;\r\n                    vector[ v ] = 0;\r\n                    vector[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n                    // now apply vector to normal buffer\r\n\r\n                    normals.push( vector.x, vector.y, vector.z );\r\n\r\n                    // uvs\r\n\r\n                    uvs.push( ix / gridX );\r\n                    uvs.push( 1 - ( iy / gridY ) );\r\n\r\n                    // counters\r\n\r\n                    vertexCounter += 1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // indices\r\n\r\n            // 1. you need three indices to draw a single face\r\n            // 2. a single segment consists of two faces\r\n            // 3. so we need to generate six (2*3) indices per segment\r\n\r\n            for ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n                for ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n                    var a = numberOfVertices + ix + gridX1 * iy;\r\n                    var b = numberOfVertices + ix + gridX1 * ( iy + 1 );\r\n                    var c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n                    var d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\r\n\r\n                    // faces\r\n\r\n                    indices.push( a, b, d );\r\n                    indices.push( b, c, d );\r\n\r\n                    // increase counter\r\n\r\n                    groupCount += 6;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // add a group to the geometry. this will ensure multi material support\r\n\r\n            scope.addGroup( groupStart, groupCount, materialIndex );\r\n\r\n            // calculate new start value for groups\r\n\r\n            groupStart += groupCount;\r\n\r\n            // update total number of vertices\r\n\r\n            numberOfVertices += vertexCounter;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    BoxBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    BoxBufferGeometry.prototype.constructor = BoxBufferGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // PlaneGeometry\r\n\r\n    function PlaneGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'PlaneGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments\r\n        };\r\n\r\n        this.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    PlaneGeometry.prototype = Object.create( Geometry.prototype );\r\n    PlaneGeometry.prototype.constructor = PlaneGeometry;\r\n\r\n    // PlaneBufferGeometry\r\n\r\n    function PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'PlaneBufferGeometry';\r\n\r\n        this.parameters = {\r\n            width: width,\r\n            height: height,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments\r\n        };\r\n\r\n        width = width || 1;\r\n        height = height || 1;\r\n\r\n        var width_half = width / 2;\r\n        var height_half = height / 2;\r\n\r\n        var gridX = Math.floor( widthSegments ) || 1;\r\n        var gridY = Math.floor( heightSegments ) || 1;\r\n\r\n        var gridX1 = gridX + 1;\r\n        var gridY1 = gridY + 1;\r\n\r\n        var segment_width = width / gridX;\r\n        var segment_height = height / gridY;\r\n\r\n        var ix, iy;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n            var y = iy * segment_height - height_half;\r\n\r\n            for ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n                var x = ix * segment_width - width_half;\r\n\r\n                vertices.push( x, - y, 0 );\r\n\r\n                normals.push( 0, 0, 1 );\r\n\r\n                uvs.push( ix / gridX );\r\n                uvs.push( 1 - ( iy / gridY ) );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n            for ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n                var a = ix + gridX1 * iy;\r\n                var b = ix + gridX1 * ( iy + 1 );\r\n                var c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n                var d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    PlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    PlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    var materialId = 0;\r\n\r\n    function Material() {\r\n\r\n        Object.defineProperty( this, 'id', { value: materialId ++ } );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.name = '';\r\n        this.type = 'Material';\r\n\r\n        this.fog = true;\r\n        this.lights = true;\r\n\r\n        this.blending = NormalBlending;\r\n        this.side = FrontSide;\r\n        this.flatShading = false;\r\n        this.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\r\n\r\n        this.opacity = 1;\r\n        this.transparent = false;\r\n\r\n        this.blendSrc = SrcAlphaFactor;\r\n        this.blendDst = OneMinusSrcAlphaFactor;\r\n        this.blendEquation = AddEquation;\r\n        this.blendSrcAlpha = null;\r\n        this.blendDstAlpha = null;\r\n        this.blendEquationAlpha = null;\r\n\r\n        this.depthFunc = LessEqualDepth;\r\n        this.depthTest = true;\r\n        this.depthWrite = true;\r\n\r\n        this.clippingPlanes = null;\r\n        this.clipIntersection = false;\r\n        this.clipShadows = false;\r\n\r\n        this.shadowSide = null;\r\n\r\n        this.colorWrite = true;\r\n\r\n        this.precision = null; // override the renderer's default precision for this material\r\n\r\n        this.polygonOffset = false;\r\n        this.polygonOffsetFactor = 0;\r\n        this.polygonOffsetUnits = 0;\r\n\r\n        this.dithering = false;\r\n\r\n        this.alphaTest = 0;\r\n        this.premultipliedAlpha = false;\r\n\r\n        this.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n        this.visible = true;\r\n\r\n        this.userData = {};\r\n\r\n        this.needsUpdate = true;\r\n\r\n    }\r\n\r\n    Material.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: Material,\r\n\r\n        isMaterial: true,\r\n\r\n        onBeforeCompile: function () {},\r\n\r\n        setValues: function ( values ) {\r\n\r\n            if ( values === undefined ) return;\r\n\r\n            for ( var key in values ) {\r\n\r\n                var newValue = values[ key ];\r\n\r\n                if ( newValue === undefined ) {\r\n\r\n                    console.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n                    continue;\r\n\r\n                }\r\n\r\n                // for backward compatability if shading is set in the constructor\r\n                if ( key === 'shading' ) {\r\n\r\n                    console.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n                    this.flatShading = ( newValue === FlatShading ) ? true : false;\r\n                    continue;\r\n\r\n                }\r\n\r\n                var currentValue = this[ key ];\r\n\r\n                if ( currentValue === undefined ) {\r\n\r\n                    console.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n                    continue;\r\n\r\n                }\r\n\r\n                if ( currentValue && currentValue.isColor ) {\r\n\r\n                    currentValue.set( newValue );\r\n\r\n                } else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\r\n\r\n                    currentValue.copy( newValue );\r\n\r\n                } else if ( key === 'overdraw' ) {\r\n\r\n                    // ensure overdraw is backwards-compatible with legacy boolean type\r\n                    this[ key ] = Number( newValue );\r\n\r\n                } else {\r\n\r\n                    this[ key ] = newValue;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var isRoot = ( meta === undefined || typeof meta === 'string' );\r\n\r\n            if ( isRoot ) {\r\n\r\n                meta = {\r\n                    textures: {},\r\n                    images: {}\r\n                };\r\n\r\n            }\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Material',\r\n                    generator: 'Material.toJSON'\r\n                }\r\n            };\r\n\r\n            // standard Material serialization\r\n            data.uuid = this.uuid;\r\n            data.type = this.type;\r\n\r\n            if ( this.name !== '' ) data.name = this.name;\r\n\r\n            if ( this.color && this.color.isColor ) data.color = this.color.getHex();\r\n\r\n            if ( this.roughness !== undefined ) data.roughness = this.roughness;\r\n            if ( this.metalness !== undefined ) data.metalness = this.metalness;\r\n\r\n            if ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\r\n            if ( this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\r\n\r\n            if ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\r\n            if ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n            if ( this.clearCoat !== undefined ) data.clearCoat = this.clearCoat;\r\n            if ( this.clearCoatRoughness !== undefined ) data.clearCoatRoughness = this.clearCoatRoughness;\r\n\r\n            if ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\r\n            if ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n            if ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\r\n            if ( this.aoMap && this.aoMap.isTexture ) {\r\n\r\n                data.aoMap = this.aoMap.toJSON( meta ).uuid;\r\n                data.aoMapIntensity = this.aoMapIntensity;\r\n\r\n            }\r\n\r\n            if ( this.bumpMap && this.bumpMap.isTexture ) {\r\n\r\n                data.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n                data.bumpScale = this.bumpScale;\r\n\r\n            }\r\n\r\n            if ( this.normalMap && this.normalMap.isTexture ) {\r\n\r\n                data.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n                data.normalScale = this.normalScale.toArray();\r\n\r\n            }\r\n\r\n            if ( this.displacementMap && this.displacementMap.isTexture ) {\r\n\r\n                data.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n                data.displacementScale = this.displacementScale;\r\n                data.displacementBias = this.displacementBias;\r\n\r\n            }\r\n\r\n            if ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\r\n            if ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\r\n\r\n            if ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\r\n            if ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\r\n            if ( this.envMap && this.envMap.isTexture ) {\r\n\r\n                data.envMap = this.envMap.toJSON( meta ).uuid;\r\n                data.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n            }\r\n\r\n            if ( this.gradientMap && this.gradientMap.isTexture ) {\r\n\r\n                data.gradientMap = this.gradientMap.toJSON( meta ).uuid;\r\n\r\n            }\r\n\r\n            if ( this.size !== undefined ) data.size = this.size;\r\n            if ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n            if ( this.blending !== NormalBlending ) data.blending = this.blending;\r\n            if ( this.flatShading === true ) data.flatShading = this.flatShading;\r\n            if ( this.side !== FrontSide ) data.side = this.side;\r\n            if ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\r\n\r\n            if ( this.opacity < 1 ) data.opacity = this.opacity;\r\n            if ( this.transparent === true ) data.transparent = this.transparent;\r\n\r\n            data.depthFunc = this.depthFunc;\r\n            data.depthTest = this.depthTest;\r\n            data.depthWrite = this.depthWrite;\r\n\r\n            // rotation (SpriteMaterial)\r\n            if ( this.rotation !== 0 ) data.rotation = this.rotation;\r\n\r\n            if ( this.linewidth !== 1 ) data.linewidth = this.linewidth;\r\n            if ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\r\n            if ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\r\n            if ( this.scale !== undefined ) data.scale = this.scale;\r\n\r\n            if ( this.dithering === true ) data.dithering = true;\r\n\r\n            if ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n            if ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\r\n\r\n            if ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n            if ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n            if ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\r\n            if ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\r\n\r\n            if ( this.morphTargets === true ) data.morphTargets = true;\r\n            if ( this.skinning === true ) data.skinning = true;\r\n\r\n            if ( this.visible === false ) data.visible = false;\r\n            if ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\r\n            // TODO: Copied from Object3D.toJSON\r\n\r\n            function extractFromCache( cache ) {\r\n\r\n                var values = [];\r\n\r\n                for ( var key in cache ) {\r\n\r\n                    var data = cache[ key ];\r\n                    delete data.metadata;\r\n                    values.push( data );\r\n\r\n                }\r\n\r\n                return values;\r\n\r\n            }\r\n\r\n            if ( isRoot ) {\r\n\r\n                var textures = extractFromCache( meta.textures );\r\n                var images = extractFromCache( meta.images );\r\n\r\n                if ( textures.length > 0 ) data.textures = textures;\r\n                if ( images.length > 0 ) data.images = images;\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.name = source.name;\r\n\r\n            this.fog = source.fog;\r\n            this.lights = source.lights;\r\n\r\n            this.blending = source.blending;\r\n            this.side = source.side;\r\n            this.flatShading = source.flatShading;\r\n            this.vertexColors = source.vertexColors;\r\n\r\n            this.opacity = source.opacity;\r\n            this.transparent = source.transparent;\r\n\r\n            this.blendSrc = source.blendSrc;\r\n            this.blendDst = source.blendDst;\r\n            this.blendEquation = source.blendEquation;\r\n            this.blendSrcAlpha = source.blendSrcAlpha;\r\n            this.blendDstAlpha = source.blendDstAlpha;\r\n            this.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n            this.depthFunc = source.depthFunc;\r\n            this.depthTest = source.depthTest;\r\n            this.depthWrite = source.depthWrite;\r\n\r\n            this.colorWrite = source.colorWrite;\r\n\r\n            this.precision = source.precision;\r\n\r\n            this.polygonOffset = source.polygonOffset;\r\n            this.polygonOffsetFactor = source.polygonOffsetFactor;\r\n            this.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n            this.dithering = source.dithering;\r\n\r\n            this.alphaTest = source.alphaTest;\r\n            this.premultipliedAlpha = source.premultipliedAlpha;\r\n\r\n            this.overdraw = source.overdraw;\r\n\r\n            this.visible = source.visible;\r\n            this.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n            this.clipShadows = source.clipShadows;\r\n            this.clipIntersection = source.clipIntersection;\r\n\r\n            var srcPlanes = source.clippingPlanes,\r\n                dstPlanes = null;\r\n\r\n            if ( srcPlanes !== null ) {\r\n\r\n                var n = srcPlanes.length;\r\n                dstPlanes = new Array( n );\r\n\r\n                for ( var i = 0; i !== n; ++ i )\r\n                    dstPlanes[ i ] = srcPlanes[ i ].clone();\r\n\r\n            }\r\n\r\n            this.clippingPlanes = dstPlanes;\r\n\r\n            this.shadowSide = source.shadowSide;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        dispose: function () {\r\n\r\n            this.dispatchEvent( { type: 'dispose' } );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshBasicMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshBasicMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // emissive\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.specularMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.combine = MultiplyOperation;\r\n        this.reflectivity = 1;\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshBasicMaterial.prototype = Object.create( Material.prototype );\r\n    MeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\r\n\r\n    MeshBasicMaterial.prototype.isMeshBasicMaterial = true;\r\n\r\n    MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.specularMap = source.specularMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.combine = source.combine;\r\n        this.reflectivity = source.reflectivity;\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  defines: { \"label\" : \"value\" },\r\n\t *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\r\n\t *\r\n\t *  fragmentShader: <string>,\r\n\t *  vertexShader: <string>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  lights: <bool>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function ShaderMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'ShaderMaterial';\r\n\r\n        this.defines = {};\r\n        this.uniforms = {};\r\n\r\n        this.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n        this.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n        this.linewidth = 1;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n\r\n        this.fog = false; // set to use scene fog\r\n        this.lights = false; // set to use scene lights\r\n        this.clipping = false; // set to use user-defined clipping planes\r\n\r\n        this.skinning = false; // set to use skinning attribute streams\r\n        this.morphTargets = false; // set to use morph targets\r\n        this.morphNormals = false; // set to use morph normals\r\n\r\n        this.extensions = {\r\n            derivatives: false, // set to use derivatives\r\n            fragDepth: false, // set to use fragment depth values\r\n            drawBuffers: false, // set to use draw buffers\r\n            shaderTextureLOD: false // set to use shader texture LOD\r\n        };\r\n\r\n        // When rendered geometry doesn't include these attributes but the material does,\r\n        // use these default values in WebGL. This avoids errors when buffer data is missing.\r\n        this.defaultAttributeValues = {\r\n            'color': [ 1, 1, 1 ],\r\n            'uv': [ 0, 0 ],\r\n            'uv2': [ 0, 0 ]\r\n        };\r\n\r\n        this.index0AttributeName = undefined;\r\n        this.uniformsNeedUpdate = false;\r\n\r\n        if ( parameters !== undefined ) {\r\n\r\n            if ( parameters.attributes !== undefined ) {\r\n\r\n                console.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n            }\r\n\r\n            this.setValues( parameters );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    ShaderMaterial.prototype = Object.create( Material.prototype );\r\n    ShaderMaterial.prototype.constructor = ShaderMaterial;\r\n\r\n    ShaderMaterial.prototype.isShaderMaterial = true;\r\n\r\n    ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.fragmentShader = source.fragmentShader;\r\n        this.vertexShader = source.vertexShader;\r\n\r\n        this.uniforms = UniformsUtils.clone( source.uniforms );\r\n\r\n        this.defines = Object.assign( {}, source.defines );\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n        this.lights = source.lights;\r\n        this.clipping = source.clipping;\r\n\r\n        this.skinning = source.skinning;\r\n\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        this.extensions = source.extensions;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n        var data = Material.prototype.toJSON.call( this, meta );\r\n\r\n        data.uniforms = this.uniforms;\r\n        data.vertexShader = this.vertexShader;\r\n        data.fragmentShader = this.fragmentShader;\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Ray( origin, direction ) {\r\n\r\n        this.origin = ( origin !== undefined ) ? origin : new Vector3();\r\n        this.direction = ( direction !== undefined ) ? direction : new Vector3();\r\n\r\n    }\r\n\r\n    Object.assign( Ray.prototype, {\r\n\r\n        set: function ( origin, direction ) {\r\n\r\n            this.origin.copy( origin );\r\n            this.direction.copy( direction );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( ray ) {\r\n\r\n            this.origin.copy( ray.origin );\r\n            this.direction.copy( ray.direction );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        at: function ( t, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Ray: .at() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n        },\r\n\r\n        lookAt: function ( v ) {\r\n\r\n            this.direction.copy( v ).sub( this.origin ).normalize();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        recast: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function recast( t ) {\r\n\r\n                this.origin.copy( this.at( t, v1 ) );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        closestPointToPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            target.subVectors( point, this.origin );\r\n\r\n            var directionDistance = target.dot( this.direction );\r\n\r\n            if ( directionDistance < 0 ) {\r\n\r\n                return target.copy( this.origin );\r\n\r\n            }\r\n\r\n            return target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n        },\r\n\r\n        distanceToPoint: function ( point ) {\r\n\r\n            return Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n        },\r\n\r\n        distanceSqToPoint: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function distanceSqToPoint( point ) {\r\n\r\n                var directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n                // point behind the ray\r\n\r\n                if ( directionDistance < 0 ) {\r\n\r\n                    return this.origin.distanceToSquared( point );\r\n\r\n                }\r\n\r\n                v1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n                return v1.distanceToSquared( point );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        distanceSqToSegment: function () {\r\n\r\n            var segCenter = new Vector3();\r\n            var segDir = new Vector3();\r\n            var diff = new Vector3();\r\n\r\n            return function distanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n                // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\r\n                // It returns the min distance between the ray and the segment\r\n                // defined by v0 and v1\r\n                // It can also set two optional targets :\r\n                // - The closest point on the ray\r\n                // - The closest point on the segment\r\n\r\n                segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n                segDir.copy( v1 ).sub( v0 ).normalize();\r\n                diff.copy( this.origin ).sub( segCenter );\r\n\r\n                var segExtent = v0.distanceTo( v1 ) * 0.5;\r\n                var a01 = - this.direction.dot( segDir );\r\n                var b0 = diff.dot( this.direction );\r\n                var b1 = - diff.dot( segDir );\r\n                var c = diff.lengthSq();\r\n                var det = Math.abs( 1 - a01 * a01 );\r\n                var s0, s1, sqrDist, extDet;\r\n\r\n                if ( det > 0 ) {\r\n\r\n                    // The ray and segment are not parallel.\r\n\r\n                    s0 = a01 * b1 - b0;\r\n                    s1 = a01 * b0 - b1;\r\n                    extDet = segExtent * det;\r\n\r\n                    if ( s0 >= 0 ) {\r\n\r\n                        if ( s1 >= - extDet ) {\r\n\r\n                            if ( s1 <= extDet ) {\r\n\r\n                                // region 0\r\n                                // Minimum at interior points of ray and segment.\r\n\r\n                                var invDet = 1 / det;\r\n                                s0 *= invDet;\r\n                                s1 *= invDet;\r\n                                sqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n                            } else {\r\n\r\n                                // region 1\r\n\r\n                                s1 = segExtent;\r\n                                s0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n                                sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            // region 5\r\n\r\n                            s1 = - segExtent;\r\n                            s0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n                            sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        if ( s1 <= - extDet ) {\r\n\r\n                            // region 4\r\n\r\n                            s0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n                            s1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n                            sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        } else if ( s1 <= extDet ) {\r\n\r\n                            // region 3\r\n\r\n                            s0 = 0;\r\n                            s1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n                            sqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        } else {\r\n\r\n                            // region 2\r\n\r\n                            s0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n                            s1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n                            sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Ray and segment are parallel.\r\n\r\n                    s1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n                    s0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n                    sqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n                }\r\n\r\n                if ( optionalPointOnRay ) {\r\n\r\n                    optionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n                }\r\n\r\n                if ( optionalPointOnSegment ) {\r\n\r\n                    optionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n                }\r\n\r\n                return sqrDist;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectSphere: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function intersectSphere( sphere, target ) {\r\n\r\n                v1.subVectors( sphere.center, this.origin );\r\n                var tca = v1.dot( this.direction );\r\n                var d2 = v1.dot( v1 ) - tca * tca;\r\n                var radius2 = sphere.radius * sphere.radius;\r\n\r\n                if ( d2 > radius2 ) return null;\r\n\r\n                var thc = Math.sqrt( radius2 - d2 );\r\n\r\n                // t0 = first intersect point - entrance on front of sphere\r\n                var t0 = tca - thc;\r\n\r\n                // t1 = second intersect point - exit point on back of sphere\r\n                var t1 = tca + thc;\r\n\r\n                // test to see if both t0 and t1 are behind the ray - if so, return null\r\n                if ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n                // test to see if t0 is behind the ray:\r\n                // if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n                // in order to always return an intersect point that is in front of the ray.\r\n                if ( t0 < 0 ) return this.at( t1, target );\r\n\r\n                // else t0 is in front of the ray, so return the first collision point scaled by t0\r\n                return this.at( t0, target );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersectsSphere: function ( sphere ) {\r\n\r\n            return this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n        },\r\n\r\n        distanceToPlane: function ( plane ) {\r\n\r\n            var denominator = plane.normal.dot( this.direction );\r\n\r\n            if ( denominator === 0 ) {\r\n\r\n                // line is coplanar, return origin\r\n                if ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n                    return 0;\r\n\r\n                }\r\n\r\n                // Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n            var t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n            // Return if the ray never intersects the plane\r\n\r\n            return t >= 0 ? t : null;\r\n\r\n        },\r\n\r\n        intersectPlane: function ( plane, target ) {\r\n\r\n            var t = this.distanceToPlane( plane );\r\n\r\n            if ( t === null ) {\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n            return this.at( t, target );\r\n\r\n        },\r\n\r\n        intersectsPlane: function ( plane ) {\r\n\r\n            // check if the ray lies on the plane first\r\n\r\n            var distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n            if ( distToPoint === 0 ) {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            var denominator = plane.normal.dot( this.direction );\r\n\r\n            if ( denominator * distToPoint < 0 ) {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            // ray origin is behind the plane (and is pointing behind it)\r\n\r\n            return false;\r\n\r\n        },\r\n\r\n        intersectBox: function ( box, target ) {\r\n\r\n            var tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n            var invdirx = 1 / this.direction.x,\r\n                invdiry = 1 / this.direction.y,\r\n                invdirz = 1 / this.direction.z;\r\n\r\n            var origin = this.origin;\r\n\r\n            if ( invdirx >= 0 ) {\r\n\r\n                tmin = ( box.min.x - origin.x ) * invdirx;\r\n                tmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n            } else {\r\n\r\n                tmin = ( box.max.x - origin.x ) * invdirx;\r\n                tmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n            }\r\n\r\n            if ( invdiry >= 0 ) {\r\n\r\n                tymin = ( box.min.y - origin.y ) * invdiry;\r\n                tymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n            } else {\r\n\r\n                tymin = ( box.max.y - origin.y ) * invdiry;\r\n                tymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n            }\r\n\r\n            if ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n            // These lines also handle the case where tmin or tmax is NaN\r\n            // (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n            if ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n            if ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n            if ( invdirz >= 0 ) {\r\n\r\n                tzmin = ( box.min.z - origin.z ) * invdirz;\r\n                tzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n            } else {\r\n\r\n                tzmin = ( box.max.z - origin.z ) * invdirz;\r\n                tzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n            }\r\n\r\n            if ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n            if ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n            if ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n            //return point closest to the ray (positive side)\r\n\r\n            if ( tmax < 0 ) return null;\r\n\r\n            return this.at( tmin >= 0 ? tmin : tmax, target );\r\n\r\n        },\r\n\r\n        intersectsBox: ( function () {\r\n\r\n            var v = new Vector3();\r\n\r\n            return function intersectsBox( box ) {\r\n\r\n                return this.intersectBox( box, v ) !== null;\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        intersectTriangle: function () {\r\n\r\n            // Compute the offset origin, edges, and normal.\r\n            var diff = new Vector3();\r\n            var edge1 = new Vector3();\r\n            var edge2 = new Vector3();\r\n            var normal = new Vector3();\r\n\r\n            return function intersectTriangle( a, b, c, backfaceCulling, target ) {\r\n\r\n                // from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\r\n\r\n                edge1.subVectors( b, a );\r\n                edge2.subVectors( c, a );\r\n                normal.crossVectors( edge1, edge2 );\r\n\r\n                // Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n                // E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n                //   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n                //   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n                //   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n                var DdN = this.direction.dot( normal );\r\n                var sign;\r\n\r\n                if ( DdN > 0 ) {\r\n\r\n                    if ( backfaceCulling ) return null;\r\n                    sign = 1;\r\n\r\n                } else if ( DdN < 0 ) {\r\n\r\n                    sign = - 1;\r\n                    DdN = - DdN;\r\n\r\n                } else {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                diff.subVectors( this.origin, a );\r\n                var DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n                // b1 < 0, no intersection\r\n                if ( DdQxE2 < 0 ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                var DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n                // b2 < 0, no intersection\r\n                if ( DdE1xQ < 0 ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                // b1+b2 > 1, no intersection\r\n                if ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                // Line intersects triangle, check if ray does.\r\n                var QdN = - sign * diff.dot( normal );\r\n\r\n                // t < 0, no intersection\r\n                if ( QdN < 0 ) {\r\n\r\n                    return null;\r\n\r\n                }\r\n\r\n                // Ray intersects triangle.\r\n                return this.at( QdN / DdN, target );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        applyMatrix4: function ( matrix4 ) {\r\n\r\n            this.origin.applyMatrix4( matrix4 );\r\n            this.direction.transformDirection( matrix4 );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( ray ) {\r\n\r\n            return ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Line3( start, end ) {\r\n\r\n        this.start = ( start !== undefined ) ? start : new Vector3();\r\n        this.end = ( end !== undefined ) ? end : new Vector3();\r\n\r\n    }\r\n\r\n    Object.assign( Line3.prototype, {\r\n\r\n        set: function ( start, end ) {\r\n\r\n            this.start.copy( start );\r\n            this.end.copy( end );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( line ) {\r\n\r\n            this.start.copy( line.start );\r\n            this.end.copy( line.end );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getCenter: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .getCenter() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n        },\r\n\r\n        delta: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .delta() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.subVectors( this.end, this.start );\r\n\r\n        },\r\n\r\n        distanceSq: function () {\r\n\r\n            return this.start.distanceToSquared( this.end );\r\n\r\n        },\r\n\r\n        distance: function () {\r\n\r\n            return this.start.distanceTo( this.end );\r\n\r\n        },\r\n\r\n        at: function ( t, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .at() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n        },\r\n\r\n        closestPointToPointParameter: function () {\r\n\r\n            var startP = new Vector3();\r\n            var startEnd = new Vector3();\r\n\r\n            return function closestPointToPointParameter( point, clampToLine ) {\r\n\r\n                startP.subVectors( point, this.start );\r\n                startEnd.subVectors( this.end, this.start );\r\n\r\n                var startEnd2 = startEnd.dot( startEnd );\r\n                var startEnd_startP = startEnd.dot( startP );\r\n\r\n                var t = startEnd_startP / startEnd2;\r\n\r\n                if ( clampToLine ) {\r\n\r\n                    t = _Math.clamp( t, 0, 1 );\r\n\r\n                }\r\n\r\n                return t;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        closestPointToPoint: function ( point, clampToLine, target ) {\r\n\r\n            var t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return this.delta( target ).multiplyScalar( t ).add( this.start );\r\n\r\n        },\r\n\r\n        applyMatrix4: function ( matrix ) {\r\n\r\n            this.start.applyMatrix4( matrix );\r\n            this.end.applyMatrix4( matrix );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( line ) {\r\n\r\n            return line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Triangle( a, b, c ) {\r\n\r\n        this.a = ( a !== undefined ) ? a : new Vector3();\r\n        this.b = ( b !== undefined ) ? b : new Vector3();\r\n        this.c = ( c !== undefined ) ? c : new Vector3();\r\n\r\n    }\r\n\r\n    Object.assign( Triangle, {\r\n\r\n        getNormal: function () {\r\n\r\n            var v0 = new Vector3();\r\n\r\n            return function getNormal( a, b, c, target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Triangle: .getNormal() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                target.subVectors( c, b );\r\n                v0.subVectors( a, b );\r\n                target.cross( v0 );\r\n\r\n                var targetLengthSq = target.lengthSq();\r\n                if ( targetLengthSq > 0 ) {\r\n\r\n                    return target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\r\n\r\n                }\r\n\r\n                return target.set( 0, 0, 0 );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        // static/instance method to calculate barycentric coordinates\r\n        // based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\n        getBarycoord: function () {\r\n\r\n            var v0 = new Vector3();\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            return function getBarycoord( point, a, b, c, target ) {\r\n\r\n                v0.subVectors( c, a );\r\n                v1.subVectors( b, a );\r\n                v2.subVectors( point, a );\r\n\r\n                var dot00 = v0.dot( v0 );\r\n                var dot01 = v0.dot( v1 );\r\n                var dot02 = v0.dot( v2 );\r\n                var dot11 = v1.dot( v1 );\r\n                var dot12 = v1.dot( v2 );\r\n\r\n                var denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                // collinear or singular triangle\r\n                if ( denom === 0 ) {\r\n\r\n                    // arbitrary location outside of triangle?\r\n                    // not sure if this is the best idea, maybe should be returning undefined\r\n                    return target.set( - 2, - 1, - 1 );\r\n\r\n                }\r\n\r\n                var invDenom = 1 / denom;\r\n                var u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n                var v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n                // barycentric coordinates must always sum to 1\r\n                return target.set( 1 - u - v, v, u );\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        containsPoint: function () {\r\n\r\n            var v1 = new Vector3();\r\n\r\n            return function containsPoint( point, a, b, c ) {\r\n\r\n                Triangle.getBarycoord( point, a, b, c, v1 );\r\n\r\n                return ( v1.x >= 0 ) && ( v1.y >= 0 ) && ( ( v1.x + v1.y ) <= 1 );\r\n\r\n            };\r\n\r\n        }()\r\n\r\n    } );\r\n\r\n    Object.assign( Triangle.prototype, {\r\n\r\n        set: function ( a, b, c ) {\r\n\r\n            this.a.copy( a );\r\n            this.b.copy( b );\r\n            this.c.copy( c );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n            this.a.copy( points[ i0 ] );\r\n            this.b.copy( points[ i1 ] );\r\n            this.c.copy( points[ i2 ] );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( triangle ) {\r\n\r\n            this.a.copy( triangle.a );\r\n            this.b.copy( triangle.b );\r\n            this.c.copy( triangle.c );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getArea: function () {\r\n\r\n            var v0 = new Vector3();\r\n            var v1 = new Vector3();\r\n\r\n            return function getArea() {\r\n\r\n                v0.subVectors( this.c, this.b );\r\n                v1.subVectors( this.a, this.b );\r\n\r\n                return v0.cross( v1 ).length() * 0.5;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        getMidpoint: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n        },\r\n\r\n        getNormal: function ( target ) {\r\n\r\n            return Triangle.getNormal( this.a, this.b, this.c, target );\r\n\r\n        },\r\n\r\n        getPlane: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Triangle: .getPlane() target is now required' );\r\n                target = new Vector3();\r\n\r\n            }\r\n\r\n            return target.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n        },\r\n\r\n        getBarycoord: function ( point, target ) {\r\n\r\n            return Triangle.getBarycoord( point, this.a, this.b, this.c, target );\r\n\r\n        },\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            return box.intersectsTriangle( this );\r\n\r\n        },\r\n\r\n        closestPointToPoint: function () {\r\n\r\n            var plane = new Plane();\r\n            var edgeList = [ new Line3(), new Line3(), new Line3() ];\r\n            var projectedPoint = new Vector3();\r\n            var closestPoint = new Vector3();\r\n\r\n            return function closestPointToPoint( point, target ) {\r\n\r\n                if ( target === undefined ) {\r\n\r\n                    console.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\r\n                    target = new Vector3();\r\n\r\n                }\r\n\r\n                var minDistance = Infinity;\r\n\r\n                // project the point onto the plane of the triangle\r\n\r\n                plane.setFromCoplanarPoints( this.a, this.b, this.c );\r\n                plane.projectPoint( point, projectedPoint );\r\n\r\n                // check if the projection lies within the triangle\r\n\r\n                if ( this.containsPoint( projectedPoint ) === true ) {\r\n\r\n                    // if so, this is the closest point\r\n\r\n                    target.copy( projectedPoint );\r\n\r\n                } else {\r\n\r\n                    // if not, the point falls outside the triangle. the target is the closest point to the triangle's edges or vertices\r\n\r\n                    edgeList[ 0 ].set( this.a, this.b );\r\n                    edgeList[ 1 ].set( this.b, this.c );\r\n                    edgeList[ 2 ].set( this.c, this.a );\r\n\r\n                    for ( var i = 0; i < edgeList.length; i ++ ) {\r\n\r\n                        edgeList[ i ].closestPointToPoint( projectedPoint, true, closestPoint );\r\n\r\n                        var distance = projectedPoint.distanceToSquared( closestPoint );\r\n\r\n                        if ( distance < minDistance ) {\r\n\r\n                            minDistance = distance;\r\n\r\n                            target.copy( closestPoint );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return target;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        equals: function ( triangle ) {\r\n\r\n            return triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author jonobr1 / http://jonobr1.com/\r\n     */\r\n\r\n    function Mesh( geometry, material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Mesh';\r\n\r\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n        this.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n        this.drawMode = TrianglesDrawMode;\r\n\r\n        this.updateMorphTargets();\r\n\r\n    }\r\n\r\n    Mesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Mesh,\r\n\r\n        isMesh: true,\r\n\r\n        setDrawMode: function ( value ) {\r\n\r\n            this.drawMode = value;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source );\r\n\r\n            this.drawMode = source.drawMode;\r\n\r\n            if ( source.morphTargetInfluences !== undefined ) {\r\n\r\n                this.morphTargetInfluences = source.morphTargetInfluences.slice();\r\n\r\n            }\r\n\r\n            if ( source.morphTargetDictionary !== undefined ) {\r\n\r\n                this.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        updateMorphTargets: function () {\r\n\r\n            var geometry = this.geometry;\r\n            var m, ml, name;\r\n\r\n            if ( geometry.isBufferGeometry ) {\r\n\r\n                var morphAttributes = geometry.morphAttributes;\r\n                var keys = Object.keys( morphAttributes );\r\n\r\n                if ( keys.length > 0 ) {\r\n\r\n                    var morphAttribute = morphAttributes[ keys[ 0 ] ];\r\n\r\n                    if ( morphAttribute !== undefined ) {\r\n\r\n                        this.morphTargetInfluences = [];\r\n                        this.morphTargetDictionary = {};\r\n\r\n                        for ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\r\n\r\n                            name = morphAttribute[ m ].name || String( m );\r\n\r\n                            this.morphTargetInfluences.push( 0 );\r\n                            this.morphTargetDictionary[ name ] = m;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                var morphTargets = geometry.morphTargets;\r\n\r\n                if ( morphTargets !== undefined && morphTargets.length > 0 ) {\r\n\r\n                    this.morphTargetInfluences = [];\r\n                    this.morphTargetDictionary = {};\r\n\r\n                    for ( m = 0, ml = morphTargets.length; m < ml; m ++ ) {\r\n\r\n                        name = morphTargets[ m ].name || String( m );\r\n\r\n                        this.morphTargetInfluences.push( 0 );\r\n                        this.morphTargetDictionary[ name ] = m;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        raycast: ( function () {\r\n\r\n            var inverseMatrix = new Matrix4();\r\n            var ray = new Ray();\r\n            var sphere = new Sphere();\r\n\r\n            var vA = new Vector3();\r\n            var vB = new Vector3();\r\n            var vC = new Vector3();\r\n\r\n            var tempA = new Vector3();\r\n            var tempB = new Vector3();\r\n            var tempC = new Vector3();\r\n\r\n            var uvA = new Vector2();\r\n            var uvB = new Vector2();\r\n            var uvC = new Vector2();\r\n\r\n            var barycoord = new Vector3();\r\n\r\n            var intersectionPoint = new Vector3();\r\n            var intersectionPointWorld = new Vector3();\r\n\r\n            function uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n                Triangle.getBarycoord( point, p1, p2, p3, barycoord );\r\n\r\n                uv1.multiplyScalar( barycoord.x );\r\n                uv2.multiplyScalar( barycoord.y );\r\n                uv3.multiplyScalar( barycoord.z );\r\n\r\n                uv1.add( uv2 ).add( uv3 );\r\n\r\n                return uv1.clone();\r\n\r\n            }\r\n\r\n            function checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\r\n\r\n                var intersect;\r\n\r\n                if ( material.side === BackSide ) {\r\n\r\n                    intersect = ray.intersectTriangle( pC, pB, pA, true, point );\r\n\r\n                } else {\r\n\r\n                    intersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\r\n\r\n                }\r\n\r\n                if ( intersect === null ) return null;\r\n\r\n                intersectionPointWorld.copy( point );\r\n                intersectionPointWorld.applyMatrix4( object.matrixWorld );\r\n\r\n                var distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n                if ( distance < raycaster.near || distance > raycaster.far ) return null;\r\n\r\n                return {\r\n                    distance: distance,\r\n                    point: intersectionPointWorld.clone(),\r\n                    object: object\r\n                };\r\n\r\n            }\r\n\r\n            function checkBufferGeometryIntersection( object, raycaster, ray, position, uv, a, b, c ) {\r\n\r\n                vA.fromBufferAttribute( position, a );\r\n                vB.fromBufferAttribute( position, b );\r\n                vC.fromBufferAttribute( position, c );\r\n\r\n                var intersection = checkIntersection( object, object.material, raycaster, ray, vA, vB, vC, intersectionPoint );\r\n\r\n                if ( intersection ) {\r\n\r\n                    if ( uv ) {\r\n\r\n                        uvA.fromBufferAttribute( uv, a );\r\n                        uvB.fromBufferAttribute( uv, b );\r\n                        uvC.fromBufferAttribute( uv, c );\r\n\r\n                        intersection.uv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\r\n                    }\r\n\r\n                    var face = new Face3( a, b, c );\r\n                    Triangle.getNormal( vA, vB, vC, face.normal );\r\n\r\n                    intersection.face = face;\r\n\r\n                }\r\n\r\n                return intersection;\r\n\r\n            }\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                var geometry = this.geometry;\r\n                var material = this.material;\r\n                var matrixWorld = this.matrixWorld;\r\n\r\n                if ( material === undefined ) return;\r\n\r\n                // Checking boundingSphere distance to ray\r\n\r\n                if ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere );\r\n                sphere.applyMatrix4( matrixWorld );\r\n\r\n                if ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n                //\r\n\r\n                inverseMatrix.getInverse( matrixWorld );\r\n                ray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n                // Check boundingBox before continuing\r\n\r\n                if ( geometry.boundingBox !== null ) {\r\n\r\n                    if ( ray.intersectsBox( geometry.boundingBox ) === false ) return;\r\n\r\n                }\r\n\r\n                var intersection;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    var a, b, c;\r\n                    var index = geometry.index;\r\n                    var position = geometry.attributes.position;\r\n                    var uv = geometry.attributes.uv;\r\n                    var i, l;\r\n\r\n                    if ( index !== null ) {\r\n\r\n                        // indexed buffer geometry\r\n\r\n                        for ( i = 0, l = index.count; i < l; i += 3 ) {\r\n\r\n                            a = index.getX( i );\r\n                            b = index.getX( i + 1 );\r\n                            c = index.getX( i + 2 );\r\n\r\n                            intersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\r\n\r\n                            if ( intersection ) {\r\n\r\n                                intersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\r\n                                intersects.push( intersection );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else if ( position !== undefined ) {\r\n\r\n                        // non-indexed buffer geometry\r\n\r\n                        for ( i = 0, l = position.count; i < l; i += 3 ) {\r\n\r\n                            a = i;\r\n                            b = i + 1;\r\n                            c = i + 2;\r\n\r\n                            intersection = checkBufferGeometryIntersection( this, raycaster, ray, position, uv, a, b, c );\r\n\r\n                            if ( intersection ) {\r\n\r\n                                intersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\r\n                                intersects.push( intersection );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var fvA, fvB, fvC;\r\n                    var isMultiMaterial = Array.isArray( material );\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var faces = geometry.faces;\r\n                    var uvs;\r\n\r\n                    var faceVertexUvs = geometry.faceVertexUvs[ 0 ];\r\n                    if ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\r\n\r\n                    for ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n                        var face = faces[ f ];\r\n                        var faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\r\n\r\n                        if ( faceMaterial === undefined ) continue;\r\n\r\n                        fvA = vertices[ face.a ];\r\n                        fvB = vertices[ face.b ];\r\n                        fvC = vertices[ face.c ];\r\n\r\n                        if ( faceMaterial.morphTargets === true ) {\r\n\r\n                            var morphTargets = geometry.morphTargets;\r\n                            var morphInfluences = this.morphTargetInfluences;\r\n\r\n                            vA.set( 0, 0, 0 );\r\n                            vB.set( 0, 0, 0 );\r\n                            vC.set( 0, 0, 0 );\r\n\r\n                            for ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n                                var influence = morphInfluences[ t ];\r\n\r\n                                if ( influence === 0 ) continue;\r\n\r\n                                var targets = morphTargets[ t ].vertices;\r\n\r\n                                vA.addScaledVector( tempA.subVectors( targets[ face.a ], fvA ), influence );\r\n                                vB.addScaledVector( tempB.subVectors( targets[ face.b ], fvB ), influence );\r\n                                vC.addScaledVector( tempC.subVectors( targets[ face.c ], fvC ), influence );\r\n\r\n                            }\r\n\r\n                            vA.add( fvA );\r\n                            vB.add( fvB );\r\n                            vC.add( fvC );\r\n\r\n                            fvA = vA;\r\n                            fvB = vB;\r\n                            fvC = vC;\r\n\r\n                        }\r\n\r\n                        intersection = checkIntersection( this, faceMaterial, raycaster, ray, fvA, fvB, fvC, intersectionPoint );\r\n\r\n                        if ( intersection ) {\r\n\r\n                            if ( uvs && uvs[ f ] ) {\r\n\r\n                                var uvs_f = uvs[ f ];\r\n                                uvA.copy( uvs_f[ 0 ] );\r\n                                uvB.copy( uvs_f[ 1 ] );\r\n                                uvC.copy( uvs_f[ 2 ] );\r\n\r\n                                intersection.uv = uvIntersection( intersectionPoint, fvA, fvB, fvC, uvA, uvB, uvC );\r\n\r\n                            }\r\n\r\n                            intersection.face = face;\r\n                            intersection.faceIndex = f;\r\n                            intersects.push( intersection );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\r\n\r\n        var clearColor = new Color( 0x000000 );\r\n        var clearAlpha = 0;\r\n\r\n        var planeCamera, planeMesh;\r\n        var boxMesh;\r\n\r\n        function render( renderList, scene, camera, forceClear ) {\r\n\r\n            var background = scene.background;\r\n\r\n            if ( background === null ) {\r\n\r\n                setClear( clearColor, clearAlpha );\r\n\r\n            } else if ( background && background.isColor ) {\r\n\r\n                setClear( background, 1 );\r\n                forceClear = true;\r\n\r\n            }\r\n\r\n            if ( renderer.autoClear || forceClear ) {\r\n\r\n                renderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\r\n\r\n            }\r\n\r\n            if ( background && background.isCubeTexture ) {\r\n\r\n                if ( boxMesh === undefined ) {\r\n\r\n                    boxMesh = new Mesh(\r\n                        new BoxBufferGeometry( 1, 1, 1 ),\r\n                        new ShaderMaterial( {\r\n                            uniforms: ShaderLib.cube.uniforms,\r\n                            vertexShader: ShaderLib.cube.vertexShader,\r\n                            fragmentShader: ShaderLib.cube.fragmentShader,\r\n                            side: BackSide,\r\n                            depthTest: true,\r\n                            depthWrite: false,\r\n                            fog: false\r\n                        } )\r\n                    );\r\n\r\n                    boxMesh.geometry.removeAttribute( 'normal' );\r\n                    boxMesh.geometry.removeAttribute( 'uv' );\r\n\r\n                    boxMesh.onBeforeRender = function ( renderer, scene, camera ) {\r\n\r\n                        this.matrixWorld.copyPosition( camera.matrixWorld );\r\n\r\n                    };\r\n\r\n                    objects.update( boxMesh );\r\n\r\n                }\r\n\r\n                boxMesh.material.uniforms.tCube.value = background;\r\n\r\n                renderList.push( boxMesh, boxMesh.geometry, boxMesh.material, 0, null );\r\n\r\n            } else if ( background && background.isTexture ) {\r\n\r\n                if ( planeCamera === undefined ) {\r\n\r\n                    planeCamera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\r\n\r\n                    planeMesh = new Mesh(\r\n                        new PlaneBufferGeometry( 2, 2 ),\r\n                        new MeshBasicMaterial( { depthTest: false, depthWrite: false, fog: false } )\r\n                    );\r\n\r\n                    objects.update( planeMesh );\r\n\r\n                }\r\n\r\n                planeMesh.material.map = background;\r\n\r\n                // TODO Push this to renderList\r\n\r\n                renderer.renderBufferDirect( planeCamera, null, planeMesh.geometry, planeMesh.material, planeMesh, null );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setClear( color, alpha ) {\r\n\r\n            state.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            getClearColor: function () {\r\n\r\n                return clearColor;\r\n\r\n            },\r\n            setClearColor: function ( color, alpha ) {\r\n\r\n                clearColor.set( color );\r\n                clearAlpha = alpha !== undefined ? alpha : 1;\r\n                setClear( clearColor, clearAlpha );\r\n\r\n            },\r\n            getClearAlpha: function () {\r\n\r\n                return clearAlpha;\r\n\r\n            },\r\n            setClearAlpha: function ( alpha ) {\r\n\r\n                clearAlpha = alpha;\r\n                setClear( clearColor, clearAlpha );\r\n\r\n            },\r\n            render: render\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLBufferRenderer( gl, extensions, info ) {\r\n\r\n        var mode;\r\n\r\n        function setMode( value ) {\r\n\r\n            mode = value;\r\n\r\n        }\r\n\r\n        function render( start, count ) {\r\n\r\n            gl.drawArrays( mode, start, count );\r\n\r\n            info.update( count, mode );\r\n\r\n        }\r\n\r\n        function renderInstances( geometry, start, count ) {\r\n\r\n            var extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n            if ( extension === null ) {\r\n\r\n                console.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n                return;\r\n\r\n            }\r\n\r\n            extension.drawArraysInstancedANGLE( mode, start, count, geometry.maxInstancedCount );\r\n\r\n            info.update( count, mode, geometry.maxInstancedCount );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        this.setMode = setMode;\r\n        this.render = render;\r\n        this.renderInstances = renderInstances;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLCapabilities( gl, extensions, parameters ) {\r\n\r\n        var maxAnisotropy;\r\n\r\n        function getMaxAnisotropy() {\r\n\r\n            if ( maxAnisotropy !== undefined ) return maxAnisotropy;\r\n\r\n            var extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n            if ( extension !== null ) {\r\n\r\n                maxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n            } else {\r\n\r\n                maxAnisotropy = 0;\r\n\r\n            }\r\n\r\n            return maxAnisotropy;\r\n\r\n        }\r\n\r\n        function getMaxPrecision( precision ) {\r\n\r\n            if ( precision === 'highp' ) {\r\n\r\n                if ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n                    gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n                    return 'highp';\r\n\r\n                }\r\n\r\n                precision = 'mediump';\r\n\r\n            }\r\n\r\n            if ( precision === 'mediump' ) {\r\n\r\n                if ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n                    gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n                    return 'mediump';\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return 'lowp';\r\n\r\n        }\r\n\r\n        var precision = parameters.precision !== undefined ? parameters.precision : 'highp';\r\n        var maxPrecision = getMaxPrecision( precision );\r\n\r\n        if ( maxPrecision !== precision ) {\r\n\r\n            console.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\r\n            precision = maxPrecision;\r\n\r\n        }\r\n\r\n        var logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\r\n\r\n        var maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n        var maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n        var maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n        var maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n        var maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n        var maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n        var maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n        var maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n        var vertexTextures = maxVertexTextures > 0;\r\n        var floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n        var floatVertexTextures = vertexTextures && floatFragmentTextures;\r\n\r\n        return {\r\n\r\n            getMaxAnisotropy: getMaxAnisotropy,\r\n            getMaxPrecision: getMaxPrecision,\r\n\r\n            precision: precision,\r\n            logarithmicDepthBuffer: logarithmicDepthBuffer,\r\n\r\n            maxTextures: maxTextures,\r\n            maxVertexTextures: maxVertexTextures,\r\n            maxTextureSize: maxTextureSize,\r\n            maxCubemapSize: maxCubemapSize,\r\n\r\n            maxAttributes: maxAttributes,\r\n            maxVertexUniforms: maxVertexUniforms,\r\n            maxVaryings: maxVaryings,\r\n            maxFragmentUniforms: maxFragmentUniforms,\r\n\r\n            vertexTextures: vertexTextures,\r\n            floatFragmentTextures: floatFragmentTextures,\r\n            floatVertexTextures: floatVertexTextures\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author tschw\r\n     */\r\n\r\n    function WebGLClipping() {\r\n\r\n        var scope = this,\r\n\r\n            globalState = null,\r\n            numGlobalPlanes = 0,\r\n            localClippingEnabled = false,\r\n            renderingShadows = false,\r\n\r\n            plane = new Plane(),\r\n            viewNormalMatrix = new Matrix3(),\r\n\r\n            uniform = { value: null, needsUpdate: false };\r\n\r\n        this.uniform = uniform;\r\n        this.numPlanes = 0;\r\n        this.numIntersection = 0;\r\n\r\n        this.init = function ( planes, enableLocalClipping, camera ) {\r\n\r\n            var enabled =\r\n                planes.length !== 0 ||\r\n                enableLocalClipping ||\r\n                // enable state of previous frame - the clipping code has to\r\n                // run another frame in order to reset the state:\r\n                numGlobalPlanes !== 0 ||\r\n                localClippingEnabled;\r\n\r\n            localClippingEnabled = enableLocalClipping;\r\n\r\n            globalState = projectPlanes( planes, camera, 0 );\r\n            numGlobalPlanes = planes.length;\r\n\r\n            return enabled;\r\n\r\n        };\r\n\r\n        this.beginShadows = function () {\r\n\r\n            renderingShadows = true;\r\n            projectPlanes( null );\r\n\r\n        };\r\n\r\n        this.endShadows = function () {\r\n\r\n            renderingShadows = false;\r\n            resetGlobalState();\r\n\r\n        };\r\n\r\n        this.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\r\n\r\n            if ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\r\n\r\n                // there's no local clipping\r\n\r\n                if ( renderingShadows ) {\r\n\r\n                    // there's no global clipping\r\n\r\n                    projectPlanes( null );\r\n\r\n                } else {\r\n\r\n                    resetGlobalState();\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                var nGlobal = renderingShadows ? 0 : numGlobalPlanes,\r\n                    lGlobal = nGlobal * 4,\r\n\r\n                    dstArray = cache.clippingState || null;\r\n\r\n                uniform.value = dstArray; // ensure unique state\r\n\r\n                dstArray = projectPlanes( planes, camera, lGlobal, fromCache );\r\n\r\n                for ( var i = 0; i !== lGlobal; ++ i ) {\r\n\r\n                    dstArray[ i ] = globalState[ i ];\r\n\r\n                }\r\n\r\n                cache.clippingState = dstArray;\r\n                this.numIntersection = clipIntersection ? this.numPlanes : 0;\r\n                this.numPlanes += nGlobal;\r\n\r\n            }\r\n\r\n\r\n        };\r\n\r\n        function resetGlobalState() {\r\n\r\n            if ( uniform.value !== globalState ) {\r\n\r\n                uniform.value = globalState;\r\n                uniform.needsUpdate = numGlobalPlanes > 0;\r\n\r\n            }\r\n\r\n            scope.numPlanes = numGlobalPlanes;\r\n            scope.numIntersection = 0;\r\n\r\n        }\r\n\r\n        function projectPlanes( planes, camera, dstOffset, skipTransform ) {\r\n\r\n            var nPlanes = planes !== null ? planes.length : 0,\r\n                dstArray = null;\r\n\r\n            if ( nPlanes !== 0 ) {\r\n\r\n                dstArray = uniform.value;\r\n\r\n                if ( skipTransform !== true || dstArray === null ) {\r\n\r\n                    var flatSize = dstOffset + nPlanes * 4,\r\n                        viewMatrix = camera.matrixWorldInverse;\r\n\r\n                    viewNormalMatrix.getNormalMatrix( viewMatrix );\r\n\r\n                    if ( dstArray === null || dstArray.length < flatSize ) {\r\n\r\n                        dstArray = new Float32Array( flatSize );\r\n\r\n                    }\r\n\r\n                    for ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\r\n\r\n                        plane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\r\n\r\n                        plane.normal.toArray( dstArray, i4 );\r\n                        dstArray[ i4 + 3 ] = plane.constant;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                uniform.value = dstArray;\r\n                uniform.needsUpdate = true;\r\n\r\n            }\r\n\r\n            scope.numPlanes = nPlanes;\r\n\r\n            return dstArray;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLExtensions( gl ) {\r\n\r\n        var extensions = {};\r\n\r\n        return {\r\n\r\n            get: function ( name ) {\r\n\r\n                if ( extensions[ name ] !== undefined ) {\r\n\r\n                    return extensions[ name ];\r\n\r\n                }\r\n\r\n                var extension;\r\n\r\n                switch ( name ) {\r\n\r\n                    case 'WEBGL_depth_texture':\r\n                        extension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\r\n                        break;\r\n\r\n                    case 'EXT_texture_filter_anisotropic':\r\n                        extension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n                        break;\r\n\r\n                    case 'WEBGL_compressed_texture_s3tc':\r\n                        extension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n                        break;\r\n\r\n                    case 'WEBGL_compressed_texture_pvrtc':\r\n                        extension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n                        break;\r\n\r\n                    default:\r\n                        extension = gl.getExtension( name );\r\n\r\n                }\r\n\r\n                if ( extension === null ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n                }\r\n\r\n                extensions[ name ] = extension;\r\n\r\n                return extension;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLGeometries( gl, attributes, info ) {\r\n\r\n        var geometries = {};\r\n        var wireframeAttributes = {};\r\n\r\n        function onGeometryDispose( event ) {\r\n\r\n            var geometry = event.target;\r\n            var buffergeometry = geometries[ geometry.id ];\r\n\r\n            if ( buffergeometry.index !== null ) {\r\n\r\n                attributes.remove( buffergeometry.index );\r\n\r\n            }\r\n\r\n            for ( var name in buffergeometry.attributes ) {\r\n\r\n                attributes.remove( buffergeometry.attributes[ name ] );\r\n\r\n            }\r\n\r\n            geometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n            delete geometries[ geometry.id ];\r\n\r\n            // TODO Remove duplicate code\r\n\r\n            var attribute = wireframeAttributes[ geometry.id ];\r\n\r\n            if ( attribute ) {\r\n\r\n                attributes.remove( attribute );\r\n                delete wireframeAttributes[ geometry.id ];\r\n\r\n            }\r\n\r\n            attribute = wireframeAttributes[ buffergeometry.id ];\r\n\r\n            if ( attribute ) {\r\n\r\n                attributes.remove( attribute );\r\n                delete wireframeAttributes[ buffergeometry.id ];\r\n\r\n            }\r\n\r\n            //\r\n\r\n            info.memory.geometries --;\r\n\r\n        }\r\n\r\n        function get( object, geometry ) {\r\n\r\n            var buffergeometry = geometries[ geometry.id ];\r\n\r\n            if ( buffergeometry ) return buffergeometry;\r\n\r\n            geometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n            if ( geometry.isBufferGeometry ) {\r\n\r\n                buffergeometry = geometry;\r\n\r\n            } else if ( geometry.isGeometry ) {\r\n\r\n                if ( geometry._bufferGeometry === undefined ) {\r\n\r\n                    geometry._bufferGeometry = new BufferGeometry().setFromObject( object );\r\n\r\n                }\r\n\r\n                buffergeometry = geometry._bufferGeometry;\r\n\r\n            }\r\n\r\n            geometries[ geometry.id ] = buffergeometry;\r\n\r\n            info.memory.geometries ++;\r\n\r\n            return buffergeometry;\r\n\r\n        }\r\n\r\n        function update( geometry ) {\r\n\r\n            var index = geometry.index;\r\n            var geometryAttributes = geometry.attributes;\r\n\r\n            if ( index !== null ) {\r\n\r\n                attributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n            }\r\n\r\n            for ( var name in geometryAttributes ) {\r\n\r\n                attributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n            }\r\n\r\n            // morph targets\r\n\r\n            var morphAttributes = geometry.morphAttributes;\r\n\r\n            for ( var name in morphAttributes ) {\r\n\r\n                var array = morphAttributes[ name ];\r\n\r\n                for ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n                    attributes.update( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function getWireframeAttribute( geometry ) {\r\n\r\n            var attribute = wireframeAttributes[ geometry.id ];\r\n\r\n            if ( attribute ) return attribute;\r\n\r\n            var indices = [];\r\n\r\n            var geometryIndex = geometry.index;\r\n            var geometryAttributes = geometry.attributes;\r\n\r\n            // console.time( 'wireframe' );\r\n\r\n            if ( geometryIndex !== null ) {\r\n\r\n                var array = geometryIndex.array;\r\n\r\n                for ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n                    var a = array[ i + 0 ];\r\n                    var b = array[ i + 1 ];\r\n                    var c = array[ i + 2 ];\r\n\r\n                    indices.push( a, b, b, c, c, a );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                var array = geometryAttributes.position.array;\r\n\r\n                for ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n                    var a = i + 0;\r\n                    var b = i + 1;\r\n                    var c = i + 2;\r\n\r\n                    indices.push( a, b, b, c, c, a );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // console.timeEnd( 'wireframe' );\r\n\r\n            attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\r\n\r\n            attributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n            wireframeAttributes[ geometry.id ] = attribute;\r\n\r\n            return attribute;\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            get: get,\r\n            update: update,\r\n\r\n            getWireframeAttribute: getWireframeAttribute\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLIndexedBufferRenderer( gl, extensions, info ) {\r\n\r\n        var mode;\r\n\r\n        function setMode( value ) {\r\n\r\n            mode = value;\r\n\r\n        }\r\n\r\n        var type, bytesPerElement;\r\n\r\n        function setIndex( value ) {\r\n\r\n            type = value.type;\r\n            bytesPerElement = value.bytesPerElement;\r\n\r\n        }\r\n\r\n        function render( start, count ) {\r\n\r\n            gl.drawElements( mode, count, type, start * bytesPerElement );\r\n\r\n            info.update( count, mode );\r\n\r\n        }\r\n\r\n        function renderInstances( geometry, start, count ) {\r\n\r\n            var extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n            if ( extension === null ) {\r\n\r\n                console.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n                return;\r\n\r\n            }\r\n\r\n            extension.drawElementsInstancedANGLE( mode, count, type, start * bytesPerElement, geometry.maxInstancedCount );\r\n\r\n            info.update( count, mode, geometry.maxInstancedCount );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        this.setMode = setMode;\r\n        this.setIndex = setIndex;\r\n        this.render = render;\r\n        this.renderInstances = renderInstances;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function WebGLInfo( gl ) {\r\n\r\n        var memory = {\r\n            geometries: 0,\r\n            textures: 0\r\n        };\r\n\r\n        var render = {\r\n            frame: 0,\r\n            calls: 0,\r\n            triangles: 0,\r\n            points: 0,\r\n            lines: 0\r\n        };\r\n\r\n        function update( count, mode, instanceCount ) {\r\n\r\n            instanceCount = instanceCount || 1;\r\n\r\n            render.calls ++;\r\n\r\n            switch ( mode ) {\r\n\r\n                case gl.TRIANGLES:\r\n                    render.triangles += instanceCount * ( count / 3 );\r\n                    break;\r\n\r\n                case gl.TRIANGLE_STRIP:\r\n                case gl.TRIANGLE_FAN:\r\n                    render.triangles += instanceCount * ( count - 2 );\r\n                    break;\r\n\r\n                case gl.LINES:\r\n                    render.lines += instanceCount * ( count / 2 );\r\n                    break;\r\n\r\n                case gl.LINE_STRIP:\r\n                    render.lines += instanceCount * ( count - 1 );\r\n                    break;\r\n\r\n                case gl.LINE_LOOP:\r\n                    render.lines += instanceCount * count;\r\n                    break;\r\n\r\n                case gl.POINTS:\r\n                    render.points += instanceCount * count;\r\n                    break;\r\n\r\n                default:\r\n                    console.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function reset() {\r\n\r\n            render.frame ++;\r\n            render.calls = 0;\r\n            render.triangles = 0;\r\n            render.points = 0;\r\n            render.lines = 0;\r\n\r\n        }\r\n\r\n        return {\r\n            memory: memory,\r\n            render: render,\r\n            programs: null,\r\n            autoReset: true,\r\n            reset: reset,\r\n            update: update\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function absNumericalSort( a, b ) {\r\n\r\n        return Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\r\n\r\n    }\r\n\r\n    function WebGLMorphtargets( gl ) {\r\n\r\n        var influencesList = {};\r\n        var morphInfluences = new Float32Array( 8 );\r\n\r\n        function update( object, geometry, material, program ) {\r\n\r\n            var objectInfluences = object.morphTargetInfluences;\r\n\r\n            var length = objectInfluences.length;\r\n\r\n            var influences = influencesList[ geometry.id ];\r\n\r\n            if ( influences === undefined ) {\r\n\r\n                // initialise list\r\n\r\n                influences = [];\r\n\r\n                for ( var i = 0; i < length; i ++ ) {\r\n\r\n                    influences[ i ] = [ i, 0 ];\r\n\r\n                }\r\n\r\n                influencesList[ geometry.id ] = influences;\r\n\r\n            }\r\n\r\n            var morphTargets = material.morphTargets && geometry.morphAttributes.position;\r\n            var morphNormals = material.morphNormals && geometry.morphAttributes.normal;\r\n\r\n            // Remove current morphAttributes\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                var influence = influences[ i ];\r\n\r\n                if ( influence[ 1 ] !== 0 ) {\r\n\r\n                    if ( morphTargets ) geometry.removeAttribute( 'morphTarget' + i );\r\n                    if ( morphNormals ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Collect influences\r\n\r\n            for ( var i = 0; i < length; i ++ ) {\r\n\r\n                var influence = influences[ i ];\r\n\r\n                influence[ 0 ] = i;\r\n                influence[ 1 ] = objectInfluences[ i ];\r\n\r\n            }\r\n\r\n            influences.sort( absNumericalSort );\r\n\r\n            // Add morphAttributes\r\n\r\n            for ( var i = 0; i < 8; i ++ ) {\r\n\r\n                var influence = influences[ i ];\r\n\r\n                if ( influence ) {\r\n\r\n                    var index = influence[ 0 ];\r\n                    var value = influence[ 1 ];\r\n\r\n                    if ( value ) {\r\n\r\n                        if ( morphTargets ) geometry.addAttribute( 'morphTarget' + i, morphTargets[ index ] );\r\n                        if ( morphNormals ) geometry.addAttribute( 'morphNormal' + i, morphNormals[ index ] );\r\n\r\n                        morphInfluences[ i ] = value;\r\n                        continue;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                morphInfluences[ i ] = 0;\r\n\r\n            }\r\n\r\n            program.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            update: update\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLObjects( geometries, info ) {\r\n\r\n        var updateList = {};\r\n\r\n        function update( object ) {\r\n\r\n            var frame = info.render.frame;\r\n\r\n            var geometry = object.geometry;\r\n            var buffergeometry = geometries.get( object, geometry );\r\n\r\n            // Update once per frame\r\n\r\n            if ( updateList[ buffergeometry.id ] !== frame ) {\r\n\r\n                if ( geometry.isGeometry ) {\r\n\r\n                    buffergeometry.updateFromObject( object );\r\n\r\n                }\r\n\r\n                geometries.update( buffergeometry );\r\n\r\n                updateList[ buffergeometry.id ] = frame;\r\n\r\n            }\r\n\r\n            return buffergeometry;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            updateList = {};\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            update: update,\r\n            dispose: dispose\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\r\n\r\n        images = images !== undefined ? images : [];\r\n        mapping = mapping !== undefined ? mapping : CubeReflectionMapping;\r\n\r\n        Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n        this.flipY = false;\r\n\r\n    }\r\n\r\n    CubeTexture.prototype = Object.create( Texture.prototype );\r\n    CubeTexture.prototype.constructor = CubeTexture;\r\n\r\n    CubeTexture.prototype.isCubeTexture = true;\r\n\r\n    Object.defineProperty( CubeTexture.prototype, 'images', {\r\n\r\n        get: function () {\r\n\r\n            return this.image;\r\n\r\n        },\r\n\r\n        set: function ( value ) {\r\n\r\n            this.image = value;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author tschw\r\n     *\r\n     * Uniforms of a program.\r\n     * Those form a tree structure with a special top-level container for the root,\r\n     * which you get by calling 'new WebGLUniforms( gl, program, renderer )'.\r\n     *\r\n     *\r\n     * Properties of inner nodes including the top-level container:\r\n     *\r\n     * .seq - array of nested uniforms\r\n     * .map - nested uniforms by name\r\n     *\r\n     *\r\n     * Methods of all nodes except the top-level container:\r\n     *\r\n     * .setValue( gl, value, [renderer] )\r\n     *\r\n     * \t\tuploads a uniform value(s)\r\n     *  \tthe 'renderer' parameter is needed for sampler uniforms\r\n     *\r\n     *\r\n     * Static methods of the top-level container (renderer factorizations):\r\n     *\r\n     * .upload( gl, seq, values, renderer )\r\n     *\r\n     * \t\tsets uniforms in 'seq' to 'values[id].value'\r\n     *\r\n     * .seqWithValue( seq, values ) : filteredSeq\r\n     *\r\n     * \t\tfilters 'seq' entries with corresponding entry in values\r\n     *\r\n     *\r\n     * Methods of the top-level container (renderer factorizations):\r\n     *\r\n     * .setValue( gl, name, value )\r\n     *\r\n     * \t\tsets uniform with  name 'name' to 'value'\r\n     *\r\n     * .set( gl, obj, prop )\r\n     *\r\n     * \t\tsets uniform from object and property with same name than uniform\r\n     *\r\n     * .setOptional( gl, obj, prop )\r\n     *\r\n     * \t\tlike .set for an optional property of the object\r\n     *\r\n     */\r\n\r\n    var emptyTexture = new Texture();\r\n    var emptyCubeTexture = new CubeTexture();\r\n\r\n    // --- Base for inner nodes (including the root) ---\r\n\r\n    function UniformContainer() {\r\n\r\n        this.seq = [];\r\n        this.map = {};\r\n\r\n    }\r\n\r\n    // --- Utilities ---\r\n\r\n    // Array Caches (provide typed arrays for temporary by size)\r\n\r\n    var arrayCacheF32 = [];\r\n    var arrayCacheI32 = [];\r\n\r\n    // Float32Array caches used for uploading Matrix uniforms\r\n\r\n    var mat4array = new Float32Array( 16 );\r\n    var mat3array = new Float32Array( 9 );\r\n    var mat2array = new Float32Array( 4 );\r\n\r\n    // Flattening for arrays of vectors and matrices\r\n\r\n    function flatten( array, nBlocks, blockSize ) {\r\n\r\n        var firstElem = array[ 0 ];\r\n\r\n        if ( firstElem <= 0 || firstElem > 0 ) return array;\r\n        // unoptimized: ! isNaN( firstElem )\r\n        // see http://jacksondunstan.com/articles/983\r\n\r\n        var n = nBlocks * blockSize,\r\n            r = arrayCacheF32[ n ];\r\n\r\n        if ( r === undefined ) {\r\n\r\n            r = new Float32Array( n );\r\n            arrayCacheF32[ n ] = r;\r\n\r\n        }\r\n\r\n        if ( nBlocks !== 0 ) {\r\n\r\n            firstElem.toArray( r, 0 );\r\n\r\n            for ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\r\n\r\n                offset += blockSize;\r\n                array[ i ].toArray( r, offset );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return r;\r\n\r\n    }\r\n\r\n    function arraysEqual( a, b ) {\r\n\r\n        if ( a.length !== b.length ) return false;\r\n\r\n        for ( var i = 0, l = a.length; i < l; i ++ ) {\r\n\r\n            if ( a[ i ] !== b[ i ] ) return false;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    function copyArray( a, b ) {\r\n\r\n        for ( var i = 0, l = b.length; i < l; i ++ ) {\r\n\r\n            a[ i ] = b[ i ];\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Texture unit allocation\r\n\r\n    function allocTexUnits( renderer, n ) {\r\n\r\n        var r = arrayCacheI32[ n ];\r\n\r\n        if ( r === undefined ) {\r\n\r\n            r = new Int32Array( n );\r\n            arrayCacheI32[ n ] = r;\r\n\r\n        }\r\n\r\n        for ( var i = 0; i !== n; ++ i )\r\n            r[ i ] = renderer.allocTextureUnit();\r\n\r\n        return r;\r\n\r\n    }\r\n\r\n    // --- Setters ---\r\n\r\n    // Note: Defining these methods externally, because they come in a bunch\r\n    // and this way their names minify.\r\n\r\n    // Single scalar\r\n\r\n    function setValue1f( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( cache[ 0 ] === v ) return;\r\n\r\n        gl.uniform1f( this.addr, v );\r\n\r\n        cache[ 0 ] = v;\r\n\r\n    }\r\n\r\n    function setValue1i( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( cache[ 0 ] === v ) return;\r\n\r\n        gl.uniform1i( this.addr, v );\r\n\r\n        cache[ 0 ] = v;\r\n\r\n    }\r\n\r\n    // Single float vector (from flat array or THREE.VectorN)\r\n\r\n    function setValue2fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( v.x !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\r\n\r\n                gl.uniform2f( this.addr, v.x, v.y );\r\n\r\n                cache[ 0 ] = v.x;\r\n                cache[ 1 ] = v.y;\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniform2fv( this.addr, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue3fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( v.x !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\r\n\r\n                gl.uniform3f( this.addr, v.x, v.y, v.z );\r\n\r\n                cache[ 0 ] = v.x;\r\n                cache[ 1 ] = v.y;\r\n                cache[ 2 ] = v.z;\r\n\r\n            }\r\n\r\n        } else if ( v.r !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\r\n\r\n                gl.uniform3f( this.addr, v.r, v.g, v.b );\r\n\r\n                cache[ 0 ] = v.r;\r\n                cache[ 1 ] = v.g;\r\n                cache[ 2 ] = v.b;\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniform3fv( this.addr, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue4fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( v.x !== undefined ) {\r\n\r\n            if ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\r\n\r\n                gl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\r\n\r\n                cache[ 0 ] = v.x;\r\n                cache[ 1 ] = v.y;\r\n                cache[ 2 ] = v.z;\r\n                cache[ 3 ] = v.w;\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniform4fv( this.addr, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Single matrix (from flat array or MatrixN)\r\n\r\n    function setValue2fm( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var elements = v.elements;\r\n\r\n        if ( elements === undefined ) {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniformMatrix2fv( this.addr, false, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, elements ) ) return;\r\n\r\n            mat2array.set( elements );\r\n\r\n            gl.uniformMatrix2fv( this.addr, false, mat2array );\r\n\r\n            copyArray( cache, elements );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue3fm( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var elements = v.elements;\r\n\r\n        if ( elements === undefined ) {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniformMatrix3fv( this.addr, false, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, elements ) ) return;\r\n\r\n            mat3array.set( elements );\r\n\r\n            gl.uniformMatrix3fv( this.addr, false, mat3array );\r\n\r\n            copyArray( cache, elements );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValue4fm( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var elements = v.elements;\r\n\r\n        if ( elements === undefined ) {\r\n\r\n            if ( arraysEqual( cache, v ) ) return;\r\n\r\n            gl.uniformMatrix4fv( this.addr, false, v );\r\n\r\n            copyArray( cache, v );\r\n\r\n        } else {\r\n\r\n            if ( arraysEqual( cache, elements ) ) return;\r\n\r\n            mat4array.set( elements );\r\n\r\n            gl.uniformMatrix4fv( this.addr, false, mat4array );\r\n\r\n            copyArray( cache, elements );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Single texture (2D / Cube)\r\n\r\n    function setValueT1( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var unit = renderer.allocTextureUnit();\r\n\r\n        if ( cache[ 0 ] !== unit ) {\r\n\r\n            gl.uniform1i( this.addr, unit );\r\n            cache[ 0 ] = unit;\r\n\r\n        }\r\n\r\n        renderer.setTexture2D( v || emptyTexture, unit );\r\n\r\n    }\r\n\r\n    function setValueT6( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var unit = renderer.allocTextureUnit();\r\n\r\n        if ( cache[ 0 ] !== unit ) {\r\n\r\n            gl.uniform1i( this.addr, unit );\r\n            cache[ 0 ] = unit;\r\n\r\n        }\r\n\r\n        renderer.setTextureCube( v || emptyCubeTexture, unit );\r\n\r\n    }\r\n\r\n    // Integer / Boolean vectors or arrays thereof (always flat arrays)\r\n\r\n    function setValue2iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform2iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    function setValue3iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform3iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    function setValue4iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform4iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    // Helper to pick the right setter for the singular case\r\n\r\n    function getSingularSetter( type ) {\r\n\r\n        switch ( type ) {\r\n\r\n            case 0x1406: return setValue1f; // FLOAT\r\n            case 0x8b50: return setValue2fv; // _VEC2\r\n            case 0x8b51: return setValue3fv; // _VEC3\r\n            case 0x8b52: return setValue4fv; // _VEC4\r\n\r\n            case 0x8b5a: return setValue2fm; // _MAT2\r\n            case 0x8b5b: return setValue3fm; // _MAT3\r\n            case 0x8b5c: return setValue4fm; // _MAT4\r\n\r\n            case 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\r\n            case 0x8b60: return setValueT6; // SAMPLER_CUBE\r\n\r\n            case 0x1404: case 0x8b56: return setValue1i; // INT, BOOL\r\n            case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n            case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n            case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Array of scalars\r\n\r\n    function setValue1fv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform1fv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n    function setValue1iv( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( arraysEqual( cache, v ) ) return;\r\n\r\n        gl.uniform1iv( this.addr, v );\r\n\r\n        copyArray( cache, v );\r\n\r\n    }\r\n\r\n    // Array of vectors (flat or from THREE classes)\r\n\r\n    function setValueV2a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 2 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniform2fv( this.addr, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueV3a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 3 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniform3fv( this.addr, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueV4a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 4 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniform4fv( this.addr, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    // Array of matrices (flat or from THREE clases)\r\n\r\n    function setValueM2a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 4 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniformMatrix2fv( this.addr, false, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueM3a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 9 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniformMatrix3fv( this.addr, false, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    function setValueM4a( gl, v ) {\r\n\r\n        var cache = this.cache;\r\n        var data = flatten( v, this.size, 16 );\r\n\r\n        if ( arraysEqual( cache, data ) ) return;\r\n\r\n        gl.uniformMatrix4fv( this.addr, false, data );\r\n\r\n        this.updateCache( data );\r\n\r\n    }\r\n\r\n    // Array of textures (2D / Cube)\r\n\r\n    function setValueT1a( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var n = v.length;\r\n\r\n        var units = allocTexUnits( renderer, n );\r\n\r\n        if ( arraysEqual( cache, units ) === false ) {\r\n\r\n            gl.uniform1iv( this.addr, units );\r\n            copyArray( cache, units );\r\n\r\n        }\r\n\r\n        for ( var i = 0; i !== n; ++ i ) {\r\n\r\n            renderer.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function setValueT6a( gl, v, renderer ) {\r\n\r\n        var cache = this.cache;\r\n        var n = v.length;\r\n\r\n        var units = allocTexUnits( renderer, n );\r\n\r\n        if ( arraysEqual( cache, units ) === false ) {\r\n\r\n            gl.uniform1iv( this.addr, units );\r\n            copyArray( cache, units );\r\n\r\n        }\r\n\r\n        for ( var i = 0; i !== n; ++ i ) {\r\n\r\n            renderer.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Helper to pick the right setter for a pure (bottom-level) array\r\n\r\n    function getPureArraySetter( type ) {\r\n\r\n        switch ( type ) {\r\n\r\n            case 0x1406: return setValue1fv; // FLOAT\r\n            case 0x8b50: return setValueV2a; // _VEC2\r\n            case 0x8b51: return setValueV3a; // _VEC3\r\n            case 0x8b52: return setValueV4a; // _VEC4\r\n\r\n            case 0x8b5a: return setValueM2a; // _MAT2\r\n            case 0x8b5b: return setValueM3a; // _MAT3\r\n            case 0x8b5c: return setValueM4a; // _MAT4\r\n\r\n            case 0x8b5e: return setValueT1a; // SAMPLER_2D\r\n            case 0x8b60: return setValueT6a; // SAMPLER_CUBE\r\n\r\n            case 0x1404: case 0x8b56: return setValue1iv; // INT, BOOL\r\n            case 0x8b53: case 0x8b57: return setValue2iv; // _VEC2\r\n            case 0x8b54: case 0x8b58: return setValue3iv; // _VEC3\r\n            case 0x8b55: case 0x8b59: return setValue4iv; // _VEC4\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // --- Uniform Classes ---\r\n\r\n    function SingleUniform( id, activeInfo, addr ) {\r\n\r\n        this.id = id;\r\n        this.addr = addr;\r\n        this.cache = [];\r\n        this.setValue = getSingularSetter( activeInfo.type );\r\n\r\n        // this.path = activeInfo.name; // DEBUG\r\n\r\n    }\r\n\r\n    function PureArrayUniform( id, activeInfo, addr ) {\r\n\r\n        this.id = id;\r\n        this.addr = addr;\r\n        this.cache = [];\r\n        this.size = activeInfo.size;\r\n        this.setValue = getPureArraySetter( activeInfo.type );\r\n\r\n        // this.path = activeInfo.name; // DEBUG\r\n\r\n    }\r\n\r\n    PureArrayUniform.prototype.updateCache = function ( data ) {\r\n\r\n        var cache = this.cache;\r\n\r\n        if ( data instanceof Float32Array && cache.length !== data.length ) {\r\n\r\n            this.cache = new Float32Array( data.length );\r\n\r\n        }\r\n\r\n        copyArray( cache, data );\r\n\r\n    };\r\n\r\n    function StructuredUniform( id ) {\r\n\r\n        this.id = id;\r\n\r\n        UniformContainer.call( this ); // mix-in\r\n\r\n    }\r\n\r\n    StructuredUniform.prototype.setValue = function ( gl, value ) {\r\n\r\n        // Note: Don't need an extra 'renderer' parameter, since samplers\r\n        // are not allowed in structured uniforms.\r\n\r\n        var seq = this.seq;\r\n\r\n        for ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n            var u = seq[ i ];\r\n            u.setValue( gl, value[ u.id ] );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // --- Top-level ---\r\n\r\n    // Parser - builds up the property tree from the path strings\r\n\r\n    var RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\r\n\r\n    // extracts\r\n    // \t- the identifier (member name or array index)\r\n    //  - followed by an optional right bracket (found when array index)\r\n    //  - followed by an optional left bracket or dot (type of subscript)\r\n    //\r\n    // Note: These portions can be read in a non-overlapping fashion and\r\n    // allow straightforward parsing of the hierarchy that WebGL encodes\r\n    // in the uniform names.\r\n\r\n    function addUniform( container, uniformObject ) {\r\n\r\n        container.seq.push( uniformObject );\r\n        container.map[ uniformObject.id ] = uniformObject;\r\n\r\n    }\r\n\r\n    function parseUniform( activeInfo, addr, container ) {\r\n\r\n        var path = activeInfo.name,\r\n            pathLength = path.length;\r\n\r\n        // reset RegExp object, because of the early exit of a previous run\r\n        RePathPart.lastIndex = 0;\r\n\r\n        while ( true ) {\r\n\r\n            var match = RePathPart.exec( path ),\r\n                matchEnd = RePathPart.lastIndex,\r\n\r\n                id = match[ 1 ],\r\n                idIsIndex = match[ 2 ] === ']',\r\n                subscript = match[ 3 ];\r\n\r\n            if ( idIsIndex ) id = id | 0; // convert to integer\r\n\r\n            if ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\r\n\r\n                // bare name or \"pure\" bottom-level array \"[0]\" suffix\r\n\r\n                addUniform( container, subscript === undefined ?\r\n                    new SingleUniform( id, activeInfo, addr ) :\r\n                    new PureArrayUniform( id, activeInfo, addr ) );\r\n\r\n                break;\r\n\r\n            } else {\r\n\r\n                // step into inner node / create it in case it doesn't exist\r\n\r\n                var map = container.map, next = map[ id ];\r\n\r\n                if ( next === undefined ) {\r\n\r\n                    next = new StructuredUniform( id );\r\n                    addUniform( container, next );\r\n\r\n                }\r\n\r\n                container = next;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // Root Container\r\n\r\n    function WebGLUniforms( gl, program, renderer ) {\r\n\r\n        UniformContainer.call( this );\r\n\r\n        this.renderer = renderer;\r\n\r\n        var n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n        for ( var i = 0; i < n; ++ i ) {\r\n\r\n            var info = gl.getActiveUniform( program, i ),\r\n                addr = gl.getUniformLocation( program, info.name );\r\n\r\n            parseUniform( info, addr, this );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    WebGLUniforms.prototype.setValue = function ( gl, name, value ) {\r\n\r\n        var u = this.map[ name ];\r\n\r\n        if ( u !== undefined ) u.setValue( gl, value, this.renderer );\r\n\r\n    };\r\n\r\n    WebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\r\n\r\n        var v = object[ name ];\r\n\r\n        if ( v !== undefined ) this.setValue( gl, name, v );\r\n\r\n    };\r\n\r\n\r\n    // Static interface\r\n\r\n    WebGLUniforms.upload = function ( gl, seq, values, renderer ) {\r\n\r\n        for ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n            var u = seq[ i ],\r\n                v = values[ u.id ];\r\n\r\n            if ( v.needsUpdate !== false ) {\r\n\r\n                // note: always updating when .needsUpdate is undefined\r\n                u.setValue( gl, v.value, renderer );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    WebGLUniforms.seqWithValue = function ( seq, values ) {\r\n\r\n        var r = [];\r\n\r\n        for ( var i = 0, n = seq.length; i !== n; ++ i ) {\r\n\r\n            var u = seq[ i ];\r\n            if ( u.id in values ) r.push( u );\r\n\r\n        }\r\n\r\n        return r;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function addLineNumbers( string ) {\r\n\r\n        var lines = string.split( '\\n' );\r\n\r\n        for ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n            lines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n        }\r\n\r\n        return lines.join( '\\n' );\r\n\r\n    }\r\n\r\n    function WebGLShader( gl, type, string ) {\r\n\r\n        var shader = gl.createShader( type );\r\n\r\n        gl.shaderSource( shader, string );\r\n        gl.compileShader( shader );\r\n\r\n        if ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n            console.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n        }\r\n\r\n        if ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n            console.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n        }\r\n\r\n        // --enable-privileged-webgl-extension\r\n        // console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n        return shader;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var programIdCount = 0;\r\n\r\n    function getEncodingComponents( encoding ) {\r\n\r\n        switch ( encoding ) {\r\n\r\n            case LinearEncoding:\r\n                return [ 'Linear', '( value )' ];\r\n            case sRGBEncoding:\r\n                return [ 'sRGB', '( value )' ];\r\n            case RGBEEncoding:\r\n                return [ 'RGBE', '( value )' ];\r\n            case RGBM7Encoding:\r\n                return [ 'RGBM', '( value, 7.0 )' ];\r\n            case RGBM16Encoding:\r\n                return [ 'RGBM', '( value, 16.0 )' ];\r\n            case RGBDEncoding:\r\n                return [ 'RGBD', '( value, 256.0 )' ];\r\n            case GammaEncoding:\r\n                return [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\r\n            default:\r\n                throw new Error( 'unsupported encoding: ' + encoding );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function getTexelDecodingFunction( functionName, encoding ) {\r\n\r\n        var components = getEncodingComponents( encoding );\r\n        return 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\r\n\r\n    }\r\n\r\n    function getTexelEncodingFunction( functionName, encoding ) {\r\n\r\n        var components = getEncodingComponents( encoding );\r\n        return 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\r\n\r\n    }\r\n\r\n    function getToneMappingFunction( functionName, toneMapping ) {\r\n\r\n        var toneMappingName;\r\n\r\n        switch ( toneMapping ) {\r\n\r\n            case LinearToneMapping:\r\n                toneMappingName = 'Linear';\r\n                break;\r\n\r\n            case ReinhardToneMapping:\r\n                toneMappingName = 'Reinhard';\r\n                break;\r\n\r\n            case Uncharted2ToneMapping:\r\n                toneMappingName = 'Uncharted2';\r\n                break;\r\n\r\n            case CineonToneMapping:\r\n                toneMappingName = 'OptimizedCineon';\r\n                break;\r\n\r\n            default:\r\n                throw new Error( 'unsupported toneMapping: ' + toneMapping );\r\n\r\n        }\r\n\r\n        return 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\r\n\r\n    }\r\n\r\n    function generateExtensions( extensions, parameters, rendererExtensions ) {\r\n\r\n        extensions = extensions || {};\r\n\r\n        var chunks = [\r\n            ( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.normalMap || parameters.flatShading ) ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n            ( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n            ( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\r\n            ( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\r\n        ];\r\n\r\n        return chunks.filter( filterEmptyLine ).join( '\\n' );\r\n\r\n    }\r\n\r\n    function generateDefines( defines ) {\r\n\r\n        var chunks = [];\r\n\r\n        for ( var name in defines ) {\r\n\r\n            var value = defines[ name ];\r\n\r\n            if ( value === false ) continue;\r\n\r\n            chunks.push( '#define ' + name + ' ' + value );\r\n\r\n        }\r\n\r\n        return chunks.join( '\\n' );\r\n\r\n    }\r\n\r\n    function fetchAttributeLocations( gl, program ) {\r\n\r\n        var attributes = {};\r\n\r\n        var n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n        for ( var i = 0; i < n; i ++ ) {\r\n\r\n            var info = gl.getActiveAttrib( program, i );\r\n            var name = info.name;\r\n\r\n            // console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\r\n\r\n            attributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n        }\r\n\r\n        return attributes;\r\n\r\n    }\r\n\r\n    function filterEmptyLine( string ) {\r\n\r\n        return string !== '';\r\n\r\n    }\r\n\r\n    function replaceLightNums( string, parameters ) {\r\n\r\n        return string\r\n            .replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\r\n            .replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\r\n            .replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\r\n            .replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\r\n            .replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights );\r\n\r\n    }\r\n\r\n    function replaceClippingPlaneNums( string, parameters ) {\r\n\r\n        return string\r\n            .replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\r\n            .replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\r\n\r\n    }\r\n\r\n    function parseIncludes( string ) {\r\n\r\n        var pattern = /^[ \\t]*#include +<([\\w\\d.]+)>/gm;\r\n\r\n        function replace( match, include ) {\r\n\r\n            var replace = ShaderChunk[ include ];\r\n\r\n            if ( replace === undefined ) {\r\n\r\n                throw new Error( 'Can not resolve #include <' + include + '>' );\r\n\r\n            }\r\n\r\n            return parseIncludes( replace );\r\n\r\n        }\r\n\r\n        return string.replace( pattern, replace );\r\n\r\n    }\r\n\r\n    function unrollLoops( string ) {\r\n\r\n        var pattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\r\n\r\n        function replace( match, start, end, snippet ) {\r\n\r\n            var unroll = '';\r\n\r\n            for ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\r\n\r\n                unroll += snippet.replace( /\\[ i \\]/g, '[ ' + i + ' ]' );\r\n\r\n            }\r\n\r\n            return unroll;\r\n\r\n        }\r\n\r\n        return string.replace( pattern, replace );\r\n\r\n    }\r\n\r\n    function WebGLProgram( renderer, extensions, code, material, shader, parameters ) {\r\n\r\n        var gl = renderer.context;\r\n\r\n        var defines = material.defines;\r\n\r\n        var vertexShader = shader.vertexShader;\r\n        var fragmentShader = shader.fragmentShader;\r\n\r\n        var shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n        if ( parameters.shadowMapType === PCFShadowMap ) {\r\n\r\n            shadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n        } else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\r\n\r\n            shadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n        }\r\n\r\n        var envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n        var envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n        var envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n        if ( parameters.envMap ) {\r\n\r\n            switch ( material.envMap.mapping ) {\r\n\r\n                case CubeReflectionMapping:\r\n                case CubeRefractionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n                    break;\r\n\r\n                case CubeUVReflectionMapping:\r\n                case CubeUVRefractionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\r\n                    break;\r\n\r\n                case EquirectangularReflectionMapping:\r\n                case EquirectangularRefractionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n                    break;\r\n\r\n                case SphericalReflectionMapping:\r\n                    envMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n                    break;\r\n\r\n            }\r\n\r\n            switch ( material.envMap.mapping ) {\r\n\r\n                case CubeRefractionMapping:\r\n                case EquirectangularRefractionMapping:\r\n                    envMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n                    break;\r\n\r\n            }\r\n\r\n            switch ( material.combine ) {\r\n\r\n                case MultiplyOperation:\r\n                    envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n                    break;\r\n\r\n                case MixOperation:\r\n                    envMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n                    break;\r\n\r\n                case AddOperation:\r\n                    envMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n                    break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n        // console.log( 'building new program ' );\r\n\r\n        //\r\n\r\n        var customExtensions = generateExtensions( material.extensions, parameters, extensions );\r\n\r\n        var customDefines = generateDefines( defines );\r\n\r\n        //\r\n\r\n        var program = gl.createProgram();\r\n\r\n        var prefixVertex, prefixFragment;\r\n\r\n        if ( material.isRawShaderMaterial ) {\r\n\r\n            prefixVertex = [\r\n\r\n                customDefines\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n            if ( prefixVertex.length > 0 ) {\r\n\r\n                prefixVertex += '\\n';\r\n\r\n            }\r\n\r\n            prefixFragment = [\r\n\r\n                customExtensions,\r\n                customDefines\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n            if ( prefixFragment.length > 0 ) {\r\n\r\n                prefixFragment += '\\n';\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            prefixVertex = [\r\n\r\n                'precision ' + parameters.precision + ' float;',\r\n                'precision ' + parameters.precision + ' int;',\r\n\r\n                '#define SHADER_NAME ' + shader.name,\r\n\r\n                customDefines,\r\n\r\n                parameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n                '#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n                '#define MAX_BONES ' + parameters.maxBones,\r\n                ( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n                ( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n                parameters.map ? '#define USE_MAP' : '',\r\n                parameters.envMap ? '#define USE_ENVMAP' : '',\r\n                parameters.envMap ? '#define ' + envMapModeDefine : '',\r\n                parameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n                parameters.aoMap ? '#define USE_AOMAP' : '',\r\n                parameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n                parameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n                parameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n                parameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n                parameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n                parameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n                parameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n                parameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n                parameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n                parameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n                parameters.skinning ? '#define USE_SKINNING' : '',\r\n                parameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n                parameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n                parameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n                parameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n                parameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n                parameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n                parameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n                parameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n                parameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n                parameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n                'uniform mat4 modelMatrix;',\r\n                'uniform mat4 modelViewMatrix;',\r\n                'uniform mat4 projectionMatrix;',\r\n                'uniform mat4 viewMatrix;',\r\n                'uniform mat3 normalMatrix;',\r\n                'uniform vec3 cameraPosition;',\r\n\r\n                'attribute vec3 position;',\r\n                'attribute vec3 normal;',\r\n                'attribute vec2 uv;',\r\n\r\n                '#ifdef USE_COLOR',\r\n\r\n                '\tattribute vec3 color;',\r\n\r\n                '#endif',\r\n\r\n                '#ifdef USE_MORPHTARGETS',\r\n\r\n                '\tattribute vec3 morphTarget0;',\r\n                '\tattribute vec3 morphTarget1;',\r\n                '\tattribute vec3 morphTarget2;',\r\n                '\tattribute vec3 morphTarget3;',\r\n\r\n                '\t#ifdef USE_MORPHNORMALS',\r\n\r\n                '\t\tattribute vec3 morphNormal0;',\r\n                '\t\tattribute vec3 morphNormal1;',\r\n                '\t\tattribute vec3 morphNormal2;',\r\n                '\t\tattribute vec3 morphNormal3;',\r\n\r\n                '\t#else',\r\n\r\n                '\t\tattribute vec3 morphTarget4;',\r\n                '\t\tattribute vec3 morphTarget5;',\r\n                '\t\tattribute vec3 morphTarget6;',\r\n                '\t\tattribute vec3 morphTarget7;',\r\n\r\n                '\t#endif',\r\n\r\n                '#endif',\r\n\r\n                '#ifdef USE_SKINNING',\r\n\r\n                '\tattribute vec4 skinIndex;',\r\n                '\tattribute vec4 skinWeight;',\r\n\r\n                '#endif',\r\n\r\n                '\\n'\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n            prefixFragment = [\r\n\r\n                customExtensions,\r\n\r\n                'precision ' + parameters.precision + ' float;',\r\n                'precision ' + parameters.precision + ' int;',\r\n\r\n                '#define SHADER_NAME ' + shader.name,\r\n\r\n                customDefines,\r\n\r\n                parameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\r\n\r\n                '#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n                ( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n                ( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n                parameters.map ? '#define USE_MAP' : '',\r\n                parameters.envMap ? '#define USE_ENVMAP' : '',\r\n                parameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n                parameters.envMap ? '#define ' + envMapModeDefine : '',\r\n                parameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n                parameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n                parameters.aoMap ? '#define USE_AOMAP' : '',\r\n                parameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n                parameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n                parameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n                parameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n                parameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\r\n                parameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\r\n                parameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n                parameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n                parameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\r\n\r\n                parameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n                parameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n                parameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n                parameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n                parameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\r\n                parameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\r\n\r\n                parameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\r\n\r\n                parameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n                parameters.logarithmicDepthBuffer && extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n                parameters.envMap && extensions.get( 'EXT_shader_texture_lod' ) ? '#define TEXTURE_LOD_EXT' : '',\r\n\r\n                'uniform mat4 viewMatrix;',\r\n                'uniform vec3 cameraPosition;',\r\n\r\n                ( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\r\n                ( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\r\n                ( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\r\n\r\n                parameters.dithering ? '#define DITHERING' : '',\r\n\r\n                ( parameters.outputEncoding || parameters.mapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding ) ? ShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\r\n                parameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\r\n                parameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\r\n                parameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\r\n                parameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\r\n\r\n                parameters.depthPacking ? '#define DEPTH_PACKING ' + material.depthPacking : '',\r\n\r\n                '\\n'\r\n\r\n            ].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n        }\r\n\r\n        vertexShader = parseIncludes( vertexShader );\r\n        vertexShader = replaceLightNums( vertexShader, parameters );\r\n        vertexShader = replaceClippingPlaneNums( vertexShader, parameters );\r\n\r\n        fragmentShader = parseIncludes( fragmentShader );\r\n        fragmentShader = replaceLightNums( fragmentShader, parameters );\r\n        fragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\r\n\r\n        vertexShader = unrollLoops( vertexShader );\r\n        fragmentShader = unrollLoops( fragmentShader );\r\n\r\n        var vertexGlsl = prefixVertex + vertexShader;\r\n        var fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n        // console.log( '*VERTEX*', vertexGlsl );\r\n        // console.log( '*FRAGMENT*', fragmentGlsl );\r\n\r\n        var glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n        var glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n        gl.attachShader( program, glVertexShader );\r\n        gl.attachShader( program, glFragmentShader );\r\n\r\n        // Force a particular attribute to index 0.\r\n\r\n        if ( material.index0AttributeName !== undefined ) {\r\n\r\n            gl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n        } else if ( parameters.morphTargets === true ) {\r\n\r\n            // programs with morphTargets displace position out of attribute 0\r\n            gl.bindAttribLocation( program, 0, 'position' );\r\n\r\n        }\r\n\r\n        gl.linkProgram( program );\r\n\r\n        var programLog = gl.getProgramInfoLog( program ).trim();\r\n        var vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\r\n        var fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\r\n\r\n        var runnable = true;\r\n        var haveDiagnostics = true;\r\n\r\n        // console.log( '**VERTEX**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glVertexShader ) );\r\n        // console.log( '**FRAGMENT**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( glFragmentShader ) );\r\n\r\n        if ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n            runnable = false;\r\n\r\n            console.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n        } else if ( programLog !== '' ) {\r\n\r\n            console.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n        } else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n            haveDiagnostics = false;\r\n\r\n        }\r\n\r\n        if ( haveDiagnostics ) {\r\n\r\n            this.diagnostics = {\r\n\r\n                runnable: runnable,\r\n                material: material,\r\n\r\n                programLog: programLog,\r\n\r\n                vertexShader: {\r\n\r\n                    log: vertexLog,\r\n                    prefix: prefixVertex\r\n\r\n                },\r\n\r\n                fragmentShader: {\r\n\r\n                    log: fragmentLog,\r\n                    prefix: prefixFragment\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        // clean up\r\n\r\n        gl.deleteShader( glVertexShader );\r\n        gl.deleteShader( glFragmentShader );\r\n\r\n        // set up caching for uniform locations\r\n\r\n        var cachedUniforms;\r\n\r\n        this.getUniforms = function () {\r\n\r\n            if ( cachedUniforms === undefined ) {\r\n\r\n                cachedUniforms = new WebGLUniforms( gl, program, renderer );\r\n\r\n            }\r\n\r\n            return cachedUniforms;\r\n\r\n        };\r\n\r\n        // set up caching for attribute locations\r\n\r\n        var cachedAttributes;\r\n\r\n        this.getAttributes = function () {\r\n\r\n            if ( cachedAttributes === undefined ) {\r\n\r\n                cachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n            }\r\n\r\n            return cachedAttributes;\r\n\r\n        };\r\n\r\n        // free resource\r\n\r\n        this.destroy = function () {\r\n\r\n            gl.deleteProgram( program );\r\n            this.program = undefined;\r\n\r\n        };\r\n\r\n        // DEPRECATED\r\n\r\n        Object.defineProperties( this, {\r\n\r\n            uniforms: {\r\n                get: function () {\r\n\r\n                    console.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n                    return this.getUniforms();\r\n\r\n                }\r\n            },\r\n\r\n            attributes: {\r\n                get: function () {\r\n\r\n                    console.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n                    return this.getAttributes();\r\n\r\n                }\r\n            }\r\n\r\n        } );\r\n\r\n\r\n        //\r\n\r\n        this.name = shader.name;\r\n        this.id = programIdCount ++;\r\n        this.code = code;\r\n        this.usedTimes = 1;\r\n        this.program = program;\r\n        this.vertexShader = glVertexShader;\r\n        this.fragmentShader = glFragmentShader;\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLPrograms( renderer, extensions, capabilities ) {\r\n\r\n        var programs = [];\r\n\r\n        var shaderIDs = {\r\n            MeshDepthMaterial: 'depth',\r\n            MeshDistanceMaterial: 'distanceRGBA',\r\n            MeshNormalMaterial: 'normal',\r\n            MeshBasicMaterial: 'basic',\r\n            MeshLambertMaterial: 'lambert',\r\n            MeshPhongMaterial: 'phong',\r\n            MeshToonMaterial: 'phong',\r\n            MeshStandardMaterial: 'physical',\r\n            MeshPhysicalMaterial: 'physical',\r\n            LineBasicMaterial: 'basic',\r\n            LineDashedMaterial: 'dashed',\r\n            PointsMaterial: 'points',\r\n            ShadowMaterial: 'shadow'\r\n        };\r\n\r\n        var parameterNames = [\r\n            \"precision\", \"supportsVertexTextures\", \"map\", \"mapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\",\r\n            \"lightMap\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"displacementMap\", \"specularMap\",\r\n            \"roughnessMap\", \"metalnessMap\", \"gradientMap\",\r\n            \"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n            \"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n            \"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n            \"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\r\n            \"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\r\n            \"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\r\n            \"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\"\r\n        ];\r\n\r\n\r\n        function allocateBones( object ) {\r\n\r\n            var skeleton = object.skeleton;\r\n            var bones = skeleton.bones;\r\n\r\n            if ( capabilities.floatVertexTextures ) {\r\n\r\n                return 1024;\r\n\r\n            } else {\r\n\r\n                // default for when object is not specified\r\n                // ( for example when prebuilding shader to be used with multiple objects )\r\n                //\r\n                //  - leave some extra space for other uniforms\r\n                //  - limit here is ANGLE's 254 max uniform vectors\r\n                //    (up to 54 should be safe)\r\n\r\n                var nVertexUniforms = capabilities.maxVertexUniforms;\r\n                var nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n                var maxBones = Math.min( nVertexMatrices, bones.length );\r\n\r\n                if ( maxBones < bones.length ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\r\n                    return 0;\r\n\r\n                }\r\n\r\n                return maxBones;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function getTextureEncodingFromMap( map, gammaOverrideLinear ) {\r\n\r\n            var encoding;\r\n\r\n            if ( ! map ) {\r\n\r\n                encoding = LinearEncoding;\r\n\r\n            } else if ( map.isTexture ) {\r\n\r\n                encoding = map.encoding;\r\n\r\n            } else if ( map.isWebGLRenderTarget ) {\r\n\r\n                console.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\r\n                encoding = map.texture.encoding;\r\n\r\n            }\r\n\r\n            // add backwards compatibility for WebGLRenderer.gammaInput/gammaOutput parameter, should probably be removed at some point.\r\n            if ( encoding === LinearEncoding && gammaOverrideLinear ) {\r\n\r\n                encoding = GammaEncoding;\r\n\r\n            }\r\n\r\n            return encoding;\r\n\r\n        }\r\n\r\n        this.getParameters = function ( material, lights, shadows, fog, nClipPlanes, nClipIntersection, object ) {\r\n\r\n            var shaderID = shaderIDs[ material.type ];\r\n\r\n            // heuristics to create shader parameters according to lights in the scene\r\n            // (not to blow over maxLights budget)\r\n\r\n            var maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\r\n            var precision = capabilities.precision;\r\n\r\n            if ( material.precision !== null ) {\r\n\r\n                precision = capabilities.getMaxPrecision( material.precision );\r\n\r\n                if ( precision !== material.precision ) {\r\n\r\n                    console.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var currentRenderTarget = renderer.getRenderTarget();\r\n\r\n            var parameters = {\r\n\r\n                shaderID: shaderID,\r\n\r\n                precision: precision,\r\n                supportsVertexTextures: capabilities.vertexTextures,\r\n                outputEncoding: getTextureEncodingFromMap( ( ! currentRenderTarget ) ? null : currentRenderTarget.texture, renderer.gammaOutput ),\r\n                map: !! material.map,\r\n                mapEncoding: getTextureEncodingFromMap( material.map, renderer.gammaInput ),\r\n                envMap: !! material.envMap,\r\n                envMapMode: material.envMap && material.envMap.mapping,\r\n                envMapEncoding: getTextureEncodingFromMap( material.envMap, renderer.gammaInput ),\r\n                envMapCubeUV: ( !! material.envMap ) && ( ( material.envMap.mapping === CubeUVReflectionMapping ) || ( material.envMap.mapping === CubeUVRefractionMapping ) ),\r\n                lightMap: !! material.lightMap,\r\n                aoMap: !! material.aoMap,\r\n                emissiveMap: !! material.emissiveMap,\r\n                emissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap, renderer.gammaInput ),\r\n                bumpMap: !! material.bumpMap,\r\n                normalMap: !! material.normalMap,\r\n                displacementMap: !! material.displacementMap,\r\n                roughnessMap: !! material.roughnessMap,\r\n                metalnessMap: !! material.metalnessMap,\r\n                specularMap: !! material.specularMap,\r\n                alphaMap: !! material.alphaMap,\r\n\r\n                gradientMap: !! material.gradientMap,\r\n\r\n                combine: material.combine,\r\n\r\n                vertexColors: material.vertexColors,\r\n\r\n                fog: !! fog,\r\n                useFog: material.fog,\r\n                fogExp: ( fog && fog.isFogExp2 ),\r\n\r\n                flatShading: material.flatShading,\r\n\r\n                sizeAttenuation: material.sizeAttenuation,\r\n                logarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n                skinning: material.skinning && maxBones > 0,\r\n                maxBones: maxBones,\r\n                useVertexTexture: capabilities.floatVertexTextures,\r\n\r\n                morphTargets: material.morphTargets,\r\n                morphNormals: material.morphNormals,\r\n                maxMorphTargets: renderer.maxMorphTargets,\r\n                maxMorphNormals: renderer.maxMorphNormals,\r\n\r\n                numDirLights: lights.directional.length,\r\n                numPointLights: lights.point.length,\r\n                numSpotLights: lights.spot.length,\r\n                numRectAreaLights: lights.rectArea.length,\r\n                numHemiLights: lights.hemi.length,\r\n\r\n                numClippingPlanes: nClipPlanes,\r\n                numClipIntersection: nClipIntersection,\r\n\r\n                dithering: material.dithering,\r\n\r\n                shadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && shadows.length > 0,\r\n                shadowMapType: renderer.shadowMap.type,\r\n\r\n                toneMapping: renderer.toneMapping,\r\n                physicallyCorrectLights: renderer.physicallyCorrectLights,\r\n\r\n                premultipliedAlpha: material.premultipliedAlpha,\r\n\r\n                alphaTest: material.alphaTest,\r\n                doubleSided: material.side === DoubleSide,\r\n                flipSided: material.side === BackSide,\r\n\r\n                depthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\r\n\r\n            };\r\n\r\n            return parameters;\r\n\r\n        };\r\n\r\n        this.getProgramCode = function ( material, parameters ) {\r\n\r\n            var array = [];\r\n\r\n            if ( parameters.shaderID ) {\r\n\r\n                array.push( parameters.shaderID );\r\n\r\n            } else {\r\n\r\n                array.push( material.fragmentShader );\r\n                array.push( material.vertexShader );\r\n\r\n            }\r\n\r\n            if ( material.defines !== undefined ) {\r\n\r\n                for ( var name in material.defines ) {\r\n\r\n                    array.push( name );\r\n                    array.push( material.defines[ name ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n                array.push( parameters[ parameterNames[ i ] ] );\r\n\r\n            }\r\n\r\n            array.push( material.onBeforeCompile.toString() );\r\n\r\n            array.push( renderer.gammaOutput );\r\n\r\n            return array.join();\r\n\r\n        };\r\n\r\n        this.acquireProgram = function ( material, shader, parameters, code ) {\r\n\r\n            var program;\r\n\r\n            // Check if code has been already compiled\r\n            for ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n                var programInfo = programs[ p ];\r\n\r\n                if ( programInfo.code === code ) {\r\n\r\n                    program = programInfo;\r\n                    ++ program.usedTimes;\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( program === undefined ) {\r\n\r\n                program = new WebGLProgram( renderer, extensions, code, material, shader, parameters );\r\n                programs.push( program );\r\n\r\n            }\r\n\r\n            return program;\r\n\r\n        };\r\n\r\n        this.releaseProgram = function ( program ) {\r\n\r\n            if ( -- program.usedTimes === 0 ) {\r\n\r\n                // Remove from unordered set\r\n                var i = programs.indexOf( program );\r\n                programs[ i ] = programs[ programs.length - 1 ];\r\n                programs.pop();\r\n\r\n                // Free WebGL resources\r\n                program.destroy();\r\n\r\n            }\r\n\r\n        };\r\n\r\n        // Exposed for resource monitoring & error feedback via renderer.info:\r\n        this.programs = programs;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author fordacious / fordacious.github.io\r\n     */\r\n\r\n    function WebGLProperties() {\r\n\r\n        var properties = new WeakMap();\r\n\r\n        function get( object ) {\r\n\r\n            var map = properties.get( object );\r\n\r\n            if ( map === undefined ) {\r\n\r\n                map = {};\r\n                properties.set( object, map );\r\n\r\n            }\r\n\r\n            return map;\r\n\r\n        }\r\n\r\n        function remove( object ) {\r\n\r\n            properties.delete( object );\r\n\r\n        }\r\n\r\n        function update( object, key, value ) {\r\n\r\n            properties.get( object )[ key ] = value;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            properties = new WeakMap();\r\n\r\n        }\r\n\r\n        return {\r\n            get: get,\r\n            remove: remove,\r\n            update: update,\r\n            dispose: dispose\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function painterSortStable( a, b ) {\r\n\r\n        if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n            return a.renderOrder - b.renderOrder;\r\n\r\n        } else if ( a.program && b.program && a.program !== b.program ) {\r\n\r\n            return a.program.id - b.program.id;\r\n\r\n        } else if ( a.material.id !== b.material.id ) {\r\n\r\n            return a.material.id - b.material.id;\r\n\r\n        } else if ( a.z !== b.z ) {\r\n\r\n            return a.z - b.z;\r\n\r\n        } else {\r\n\r\n            return a.id - b.id;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function reversePainterSortStable( a, b ) {\r\n\r\n        if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n            return a.renderOrder - b.renderOrder;\r\n\r\n        } if ( a.z !== b.z ) {\r\n\r\n            return b.z - a.z;\r\n\r\n        } else {\r\n\r\n            return a.id - b.id;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function WebGLRenderList() {\r\n\r\n        var renderItems = [];\r\n        var renderItemsIndex = 0;\r\n\r\n        var opaque = [];\r\n        var transparent = [];\r\n\r\n        function init() {\r\n\r\n            renderItemsIndex = 0;\r\n\r\n            opaque.length = 0;\r\n            transparent.length = 0;\r\n\r\n        }\r\n\r\n        function push( object, geometry, material, z, group ) {\r\n\r\n            var renderItem = renderItems[ renderItemsIndex ];\r\n\r\n            if ( renderItem === undefined ) {\r\n\r\n                renderItem = {\r\n                    id: object.id,\r\n                    object: object,\r\n                    geometry: geometry,\r\n                    material: material,\r\n                    program: material.program,\r\n                    renderOrder: object.renderOrder,\r\n                    z: z,\r\n                    group: group\r\n                };\r\n\r\n                renderItems[ renderItemsIndex ] = renderItem;\r\n\r\n            } else {\r\n\r\n                renderItem.id = object.id;\r\n                renderItem.object = object;\r\n                renderItem.geometry = geometry;\r\n                renderItem.material = material;\r\n                renderItem.program = material.program;\r\n                renderItem.renderOrder = object.renderOrder;\r\n                renderItem.z = z;\r\n                renderItem.group = group;\r\n\r\n            }\r\n\r\n            ( material.transparent === true ? transparent : opaque ).push( renderItem );\r\n\r\n            renderItemsIndex ++;\r\n\r\n        }\r\n\r\n        function sort() {\r\n\r\n            if ( opaque.length > 1 ) opaque.sort( painterSortStable );\r\n            if ( transparent.length > 1 ) transparent.sort( reversePainterSortStable );\r\n\r\n        }\r\n\r\n        return {\r\n            opaque: opaque,\r\n            transparent: transparent,\r\n\r\n            init: init,\r\n            push: push,\r\n\r\n            sort: sort\r\n        };\r\n\r\n    }\r\n\r\n    function WebGLRenderLists() {\r\n\r\n        var lists = {};\r\n\r\n        function get( scene, camera ) {\r\n\r\n            var hash = scene.id + ',' + camera.id;\r\n            var list = lists[ hash ];\r\n\r\n            if ( list === undefined ) {\r\n\r\n                // console.log( 'THREE.WebGLRenderLists:', hash );\r\n\r\n                list = new WebGLRenderList();\r\n                lists[ hash ] = list;\r\n\r\n            }\r\n\r\n            return list;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            lists = {};\r\n\r\n        }\r\n\r\n        return {\r\n            get: get,\r\n            dispose: dispose\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function UniformsCache() {\r\n\r\n        var lights = {};\r\n\r\n        return {\r\n\r\n            get: function ( light ) {\r\n\r\n                if ( lights[ light.id ] !== undefined ) {\r\n\r\n                    return lights[ light.id ];\r\n\r\n                }\r\n\r\n                var uniforms;\r\n\r\n                switch ( light.type ) {\r\n\r\n                    case 'DirectionalLight':\r\n                        uniforms = {\r\n                            direction: new Vector3(),\r\n                            color: new Color(),\r\n\r\n                            shadow: false,\r\n                            shadowBias: 0,\r\n                            shadowRadius: 1,\r\n                            shadowMapSize: new Vector2()\r\n                        };\r\n                        break;\r\n\r\n                    case 'SpotLight':\r\n                        uniforms = {\r\n                            position: new Vector3(),\r\n                            direction: new Vector3(),\r\n                            color: new Color(),\r\n                            distance: 0,\r\n                            coneCos: 0,\r\n                            penumbraCos: 0,\r\n                            decay: 0,\r\n\r\n                            shadow: false,\r\n                            shadowBias: 0,\r\n                            shadowRadius: 1,\r\n                            shadowMapSize: new Vector2()\r\n                        };\r\n                        break;\r\n\r\n                    case 'PointLight':\r\n                        uniforms = {\r\n                            position: new Vector3(),\r\n                            color: new Color(),\r\n                            distance: 0,\r\n                            decay: 0,\r\n\r\n                            shadow: false,\r\n                            shadowBias: 0,\r\n                            shadowRadius: 1,\r\n                            shadowMapSize: new Vector2(),\r\n                            shadowCameraNear: 1,\r\n                            shadowCameraFar: 1000\r\n                        };\r\n                        break;\r\n\r\n                    case 'HemisphereLight':\r\n                        uniforms = {\r\n                            direction: new Vector3(),\r\n                            skyColor: new Color(),\r\n                            groundColor: new Color()\r\n                        };\r\n                        break;\r\n\r\n                    case 'RectAreaLight':\r\n                        uniforms = {\r\n                            color: new Color(),\r\n                            position: new Vector3(),\r\n                            halfWidth: new Vector3(),\r\n                            halfHeight: new Vector3()\r\n                            // TODO (abelnation): set RectAreaLight shadow uniforms\r\n                        };\r\n                        break;\r\n\r\n                }\r\n\r\n                lights[ light.id ] = uniforms;\r\n\r\n                return uniforms;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    var count = 0;\r\n\r\n    function WebGLLights() {\r\n\r\n        var cache = new UniformsCache();\r\n\r\n        var state = {\r\n\r\n            id: count ++,\r\n\r\n            hash: '',\r\n\r\n            ambient: [ 0, 0, 0 ],\r\n            directional: [],\r\n            directionalShadowMap: [],\r\n            directionalShadowMatrix: [],\r\n            spot: [],\r\n            spotShadowMap: [],\r\n            spotShadowMatrix: [],\r\n            rectArea: [],\r\n            point: [],\r\n            pointShadowMap: [],\r\n            pointShadowMatrix: [],\r\n            hemi: []\r\n\r\n        };\r\n\r\n        var vector3 = new Vector3();\r\n        var matrix4 = new Matrix4();\r\n        var matrix42 = new Matrix4();\r\n\r\n        function setup( lights, shadows, camera ) {\r\n\r\n            var r = 0, g = 0, b = 0;\r\n\r\n            var directionalLength = 0;\r\n            var pointLength = 0;\r\n            var spotLength = 0;\r\n            var rectAreaLength = 0;\r\n            var hemiLength = 0;\r\n\r\n            var viewMatrix = camera.matrixWorldInverse;\r\n\r\n            for ( var i = 0, l = lights.length; i < l; i ++ ) {\r\n\r\n                var light = lights[ i ];\r\n\r\n                var color = light.color;\r\n                var intensity = light.intensity;\r\n                var distance = light.distance;\r\n\r\n                var shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\r\n\r\n                if ( light.isAmbientLight ) {\r\n\r\n                    r += color.r * intensity;\r\n                    g += color.g * intensity;\r\n                    b += color.b * intensity;\r\n\r\n                } else if ( light.isDirectionalLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n                    uniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n                    vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n                    uniforms.direction.sub( vector3 );\r\n                    uniforms.direction.transformDirection( viewMatrix );\r\n\r\n                    uniforms.shadow = light.castShadow;\r\n\r\n                    if ( light.castShadow ) {\r\n\r\n                        var shadow = light.shadow;\r\n\r\n                        uniforms.shadowBias = shadow.bias;\r\n                        uniforms.shadowRadius = shadow.radius;\r\n                        uniforms.shadowMapSize = shadow.mapSize;\r\n\r\n                    }\r\n\r\n                    state.directionalShadowMap[ directionalLength ] = shadowMap;\r\n                    state.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\r\n                    state.directional[ directionalLength ] = uniforms;\r\n\r\n                    directionalLength ++;\r\n\r\n                } else if ( light.isSpotLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.position.applyMatrix4( viewMatrix );\r\n\r\n                    uniforms.color.copy( color ).multiplyScalar( intensity );\r\n                    uniforms.distance = distance;\r\n\r\n                    uniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n                    vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n                    uniforms.direction.sub( vector3 );\r\n                    uniforms.direction.transformDirection( viewMatrix );\r\n\r\n                    uniforms.coneCos = Math.cos( light.angle );\r\n                    uniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\r\n                    uniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n                    uniforms.shadow = light.castShadow;\r\n\r\n                    if ( light.castShadow ) {\r\n\r\n                        var shadow = light.shadow;\r\n\r\n                        uniforms.shadowBias = shadow.bias;\r\n                        uniforms.shadowRadius = shadow.radius;\r\n                        uniforms.shadowMapSize = shadow.mapSize;\r\n\r\n                    }\r\n\r\n                    state.spotShadowMap[ spotLength ] = shadowMap;\r\n                    state.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\r\n                    state.spot[ spotLength ] = uniforms;\r\n\r\n                    spotLength ++;\r\n\r\n                } else if ( light.isRectAreaLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    // (a) intensity is the total visible light emitted\r\n                    //uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\r\n\r\n                    // (b) intensity is the brightness of the light\r\n                    uniforms.color.copy( color ).multiplyScalar( intensity );\r\n\r\n                    uniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.position.applyMatrix4( viewMatrix );\r\n\r\n                    // extract local rotation of light to derive width/height half vectors\r\n                    matrix42.identity();\r\n                    matrix4.copy( light.matrixWorld );\r\n                    matrix4.premultiply( viewMatrix );\r\n                    matrix42.extractRotation( matrix4 );\r\n\r\n                    uniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\r\n                    uniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\r\n\r\n                    uniforms.halfWidth.applyMatrix4( matrix42 );\r\n                    uniforms.halfHeight.applyMatrix4( matrix42 );\r\n\r\n                    // TODO (abelnation): RectAreaLight distance?\r\n                    // uniforms.distance = distance;\r\n\r\n                    state.rectArea[ rectAreaLength ] = uniforms;\r\n\r\n                    rectAreaLength ++;\r\n\r\n                } else if ( light.isPointLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.position.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.position.applyMatrix4( viewMatrix );\r\n\r\n                    uniforms.color.copy( light.color ).multiplyScalar( light.intensity );\r\n                    uniforms.distance = light.distance;\r\n                    uniforms.decay = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n                    uniforms.shadow = light.castShadow;\r\n\r\n                    if ( light.castShadow ) {\r\n\r\n                        var shadow = light.shadow;\r\n\r\n                        uniforms.shadowBias = shadow.bias;\r\n                        uniforms.shadowRadius = shadow.radius;\r\n                        uniforms.shadowMapSize = shadow.mapSize;\r\n                        uniforms.shadowCameraNear = shadow.camera.near;\r\n                        uniforms.shadowCameraFar = shadow.camera.far;\r\n\r\n                    }\r\n\r\n                    state.pointShadowMap[ pointLength ] = shadowMap;\r\n                    state.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\r\n                    state.point[ pointLength ] = uniforms;\r\n\r\n                    pointLength ++;\r\n\r\n                } else if ( light.isHemisphereLight ) {\r\n\r\n                    var uniforms = cache.get( light );\r\n\r\n                    uniforms.direction.setFromMatrixPosition( light.matrixWorld );\r\n                    uniforms.direction.transformDirection( viewMatrix );\r\n                    uniforms.direction.normalize();\r\n\r\n                    uniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\r\n                    uniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\r\n\r\n                    state.hemi[ hemiLength ] = uniforms;\r\n\r\n                    hemiLength ++;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.ambient[ 0 ] = r;\r\n            state.ambient[ 1 ] = g;\r\n            state.ambient[ 2 ] = b;\r\n\r\n            state.directional.length = directionalLength;\r\n            state.spot.length = spotLength;\r\n            state.rectArea.length = rectAreaLength;\r\n            state.point.length = pointLength;\r\n            state.hemi.length = hemiLength;\r\n\r\n            state.hash = state.id + ',' + directionalLength + ',' + pointLength + ',' + spotLength + ',' + rectAreaLength + ',' + hemiLength + ',' + shadows.length;\r\n\r\n        }\r\n\r\n        return {\r\n            setup: setup,\r\n            state: state\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function WebGLRenderState() {\r\n\r\n        var lights = new WebGLLights();\r\n\r\n        var lightsArray = [];\r\n        var shadowsArray = [];\r\n        var spritesArray = [];\r\n\r\n        function init() {\r\n\r\n            lightsArray.length = 0;\r\n            shadowsArray.length = 0;\r\n            spritesArray.length = 0;\r\n\r\n        }\r\n\r\n        function pushLight( light ) {\r\n\r\n            lightsArray.push( light );\r\n\r\n        }\r\n\r\n        function pushShadow( shadowLight ) {\r\n\r\n            shadowsArray.push( shadowLight );\r\n\r\n        }\r\n\r\n        function pushSprite( shadowLight ) {\r\n\r\n            spritesArray.push( shadowLight );\r\n\r\n        }\r\n\r\n        function setupLights( camera ) {\r\n\r\n            lights.setup( lightsArray, shadowsArray, camera );\r\n\r\n        }\r\n\r\n        var state = {\r\n            lightsArray: lightsArray,\r\n            shadowsArray: shadowsArray,\r\n            spritesArray: spritesArray,\r\n\r\n            lights: lights\r\n        };\r\n\r\n        return {\r\n            init: init,\r\n            state: state,\r\n            setupLights: setupLights,\r\n\r\n            pushLight: pushLight,\r\n            pushShadow: pushShadow,\r\n            pushSprite: pushSprite\r\n        };\r\n\r\n    }\r\n\r\n    function WebGLRenderStates() {\r\n\r\n        var renderStates = {};\r\n\r\n        function get( scene, camera ) {\r\n\r\n            var hash = scene.id + ',' + camera.id;\r\n\r\n            var renderState = renderStates[ hash ];\r\n\r\n            if ( renderState === undefined ) {\r\n\r\n                renderState = new WebGLRenderState();\r\n                renderStates[ hash ] = renderState;\r\n\r\n            }\r\n\r\n            return renderState;\r\n\r\n        }\r\n\r\n        function dispose() {\r\n\r\n            renderStates = {};\r\n\r\n        }\r\n\r\n        return {\r\n            get: get,\r\n            dispose: dispose\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author bhouston / https://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t * }\r\n     */\r\n\r\n    function MeshDepthMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshDepthMaterial';\r\n\r\n        this.depthPacking = BasicDepthPacking;\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n\r\n        this.map = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshDepthMaterial.prototype = Object.create( Material.prototype );\r\n    MeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\r\n\r\n    MeshDepthMaterial.prototype.isMeshDepthMaterial = true;\r\n\r\n    MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.depthPacking = source.depthPacking;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        this.map = source.map;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *\r\n\t *  referencePosition: <float>,\r\n\t *  nearDistance: <float>,\r\n\t *  farDistance: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>\r\n\t *\r\n\t * }\r\n     */\r\n\r\n    function MeshDistanceMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshDistanceMaterial';\r\n\r\n        this.referencePosition = new Vector3();\r\n        this.nearDistance = 1;\r\n        this.farDistance = 1000;\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n\r\n        this.map = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshDistanceMaterial.prototype = Object.create( Material.prototype );\r\n    MeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\r\n\r\n    MeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\r\n\r\n    MeshDistanceMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.referencePosition.copy( source.referencePosition );\r\n        this.nearDistance = source.nearDistance;\r\n        this.farDistance = source.farDistance;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        this.map = source.map;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\r\n\r\n        var _frustum = new Frustum(),\r\n            _projScreenMatrix = new Matrix4(),\r\n\r\n            _shadowMapSize = new Vector2(),\r\n            _maxShadowMapSize = new Vector2( maxTextureSize, maxTextureSize ),\r\n\r\n            _lookTarget = new Vector3(),\r\n            _lightPositionWorld = new Vector3(),\r\n\r\n            _MorphingFlag = 1,\r\n            _SkinningFlag = 2,\r\n\r\n            _NumberOfMaterialVariants = ( _MorphingFlag | _SkinningFlag ) + 1,\r\n\r\n            _depthMaterials = new Array( _NumberOfMaterialVariants ),\r\n            _distanceMaterials = new Array( _NumberOfMaterialVariants ),\r\n\r\n            _materialCache = {};\r\n\r\n        var shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\r\n\r\n        var cubeDirections = [\r\n            new Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\r\n            new Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\r\n        ];\r\n\r\n        var cubeUps = [\r\n            new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\r\n            new Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\r\n        ];\r\n\r\n        var cube2DViewPorts = [\r\n            new Vector4(), new Vector4(), new Vector4(),\r\n            new Vector4(), new Vector4(), new Vector4()\r\n        ];\r\n\r\n        // init\r\n\r\n        for ( var i = 0; i !== _NumberOfMaterialVariants; ++ i ) {\r\n\r\n            var useMorphing = ( i & _MorphingFlag ) !== 0;\r\n            var useSkinning = ( i & _SkinningFlag ) !== 0;\r\n\r\n            var depthMaterial = new MeshDepthMaterial( {\r\n\r\n                depthPacking: RGBADepthPacking,\r\n\r\n                morphTargets: useMorphing,\r\n                skinning: useSkinning\r\n\r\n            } );\r\n\r\n            _depthMaterials[ i ] = depthMaterial;\r\n\r\n            //\r\n\r\n            var distanceMaterial = new MeshDistanceMaterial( {\r\n\r\n                morphTargets: useMorphing,\r\n                skinning: useSkinning\r\n\r\n            } );\r\n\r\n            _distanceMaterials[ i ] = distanceMaterial;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var scope = this;\r\n\r\n        this.enabled = false;\r\n\r\n        this.autoUpdate = true;\r\n        this.needsUpdate = false;\r\n\r\n        this.type = PCFShadowMap;\r\n\r\n        this.render = function ( lights, scene, camera ) {\r\n\r\n            if ( scope.enabled === false ) return;\r\n            if ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n            if ( lights.length === 0 ) return;\r\n\r\n            // TODO Clean up (needed in case of contextlost)\r\n            var _gl = _renderer.context;\r\n            var _state = _renderer.state;\r\n\r\n            // Set GL state for depth map.\r\n            _state.disable( _gl.BLEND );\r\n            _state.buffers.color.setClear( 1, 1, 1, 1 );\r\n            _state.buffers.depth.setTest( true );\r\n            _state.setScissorTest( false );\r\n\r\n            // render depth map\r\n\r\n            var faceCount;\r\n\r\n            for ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n                var light = lights[ i ];\r\n                var shadow = light.shadow;\r\n                var isPointLight = light && light.isPointLight;\r\n\r\n                if ( shadow === undefined ) {\r\n\r\n                    console.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\r\n                    continue;\r\n\r\n                }\r\n\r\n                var shadowCamera = shadow.camera;\r\n\r\n                _shadowMapSize.copy( shadow.mapSize );\r\n                _shadowMapSize.min( _maxShadowMapSize );\r\n\r\n                if ( isPointLight ) {\r\n\r\n                    var vpWidth = _shadowMapSize.x;\r\n                    var vpHeight = _shadowMapSize.y;\r\n\r\n                    // These viewports map a cube-map onto a 2D texture with the\r\n                    // following orientation:\r\n                    //\r\n                    //  xzXZ\r\n                    //   y Y\r\n                    //\r\n                    // X - Positive x direction\r\n                    // x - Negative x direction\r\n                    // Y - Positive y direction\r\n                    // y - Negative y direction\r\n                    // Z - Positive z direction\r\n                    // z - Negative z direction\r\n\r\n                    // positive X\r\n                    cube2DViewPorts[ 0 ].set( vpWidth * 2, vpHeight, vpWidth, vpHeight );\r\n                    // negative X\r\n                    cube2DViewPorts[ 1 ].set( 0, vpHeight, vpWidth, vpHeight );\r\n                    // positive Z\r\n                    cube2DViewPorts[ 2 ].set( vpWidth * 3, vpHeight, vpWidth, vpHeight );\r\n                    // negative Z\r\n                    cube2DViewPorts[ 3 ].set( vpWidth, vpHeight, vpWidth, vpHeight );\r\n                    // positive Y\r\n                    cube2DViewPorts[ 4 ].set( vpWidth * 3, 0, vpWidth, vpHeight );\r\n                    // negative Y\r\n                    cube2DViewPorts[ 5 ].set( vpWidth, 0, vpWidth, vpHeight );\r\n\r\n                    _shadowMapSize.x *= 4.0;\r\n                    _shadowMapSize.y *= 2.0;\r\n\r\n                }\r\n\r\n                if ( shadow.map === null ) {\r\n\r\n                    var pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\r\n\r\n                    shadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\r\n                    shadow.map.texture.name = light.name + \".shadowMap\";\r\n\r\n                    shadowCamera.updateProjectionMatrix();\r\n\r\n                }\r\n\r\n                if ( shadow.isSpotLightShadow ) {\r\n\r\n                    shadow.update( light );\r\n\r\n                }\r\n\r\n                var shadowMap = shadow.map;\r\n                var shadowMatrix = shadow.matrix;\r\n\r\n                _lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\r\n                shadowCamera.position.copy( _lightPositionWorld );\r\n\r\n                if ( isPointLight ) {\r\n\r\n                    faceCount = 6;\r\n\r\n                    // for point lights we set the shadow matrix to be a translation-only matrix\r\n                    // equal to inverse of the light's position\r\n\r\n                    shadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\r\n\r\n                } else {\r\n\r\n                    faceCount = 1;\r\n\r\n                    _lookTarget.setFromMatrixPosition( light.target.matrixWorld );\r\n                    shadowCamera.lookAt( _lookTarget );\r\n                    shadowCamera.updateMatrixWorld();\r\n\r\n                    // compute shadow matrix\r\n\r\n                    shadowMatrix.set(\r\n                        0.5, 0.0, 0.0, 0.5,\r\n                        0.0, 0.5, 0.0, 0.5,\r\n                        0.0, 0.0, 0.5, 0.5,\r\n                        0.0, 0.0, 0.0, 1.0\r\n                    );\r\n\r\n                    shadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n                    shadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n                }\r\n\r\n                _renderer.setRenderTarget( shadowMap );\r\n                _renderer.clear();\r\n\r\n                // render shadow map for each cube face (if omni-directional) or\r\n                // run a single pass if not\r\n\r\n                for ( var face = 0; face < faceCount; face ++ ) {\r\n\r\n                    if ( isPointLight ) {\r\n\r\n                        _lookTarget.copy( shadowCamera.position );\r\n                        _lookTarget.add( cubeDirections[ face ] );\r\n                        shadowCamera.up.copy( cubeUps[ face ] );\r\n                        shadowCamera.lookAt( _lookTarget );\r\n                        shadowCamera.updateMatrixWorld();\r\n\r\n                        var vpDimensions = cube2DViewPorts[ face ];\r\n                        _state.viewport( vpDimensions );\r\n\r\n                    }\r\n\r\n                    // update camera matrices and frustum\r\n\r\n                    _projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n                    _frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n                    // set object matrices & frustum culling\r\n\r\n                    renderObject( scene, camera, shadowCamera, isPointLight );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            scope.needsUpdate = false;\r\n\r\n        };\r\n\r\n        function getDepthMaterial( object, material, isPointLight, lightPositionWorld, shadowCameraNear, shadowCameraFar ) {\r\n\r\n            var geometry = object.geometry;\r\n\r\n            var result = null;\r\n\r\n            var materialVariants = _depthMaterials;\r\n            var customMaterial = object.customDepthMaterial;\r\n\r\n            if ( isPointLight ) {\r\n\r\n                materialVariants = _distanceMaterials;\r\n                customMaterial = object.customDistanceMaterial;\r\n\r\n            }\r\n\r\n            if ( ! customMaterial ) {\r\n\r\n                var useMorphing = false;\r\n\r\n                if ( material.morphTargets ) {\r\n\r\n                    if ( geometry && geometry.isBufferGeometry ) {\r\n\r\n                        useMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\r\n\r\n                    } else if ( geometry && geometry.isGeometry ) {\r\n\r\n                        useMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( object.isSkinnedMesh && material.skinning === false ) {\r\n\r\n                    console.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\r\n\r\n                }\r\n\r\n                var useSkinning = object.isSkinnedMesh && material.skinning;\r\n\r\n                var variantIndex = 0;\r\n\r\n                if ( useMorphing ) variantIndex |= _MorphingFlag;\r\n                if ( useSkinning ) variantIndex |= _SkinningFlag;\r\n\r\n                result = materialVariants[ variantIndex ];\r\n\r\n            } else {\r\n\r\n                result = customMaterial;\r\n\r\n            }\r\n\r\n            if ( _renderer.localClippingEnabled &&\r\n                material.clipShadows === true &&\r\n                material.clippingPlanes.length !== 0 ) {\r\n\r\n                // in this case we need a unique material instance reflecting the\r\n                // appropriate state\r\n\r\n                var keyA = result.uuid, keyB = material.uuid;\r\n\r\n                var materialsForVariant = _materialCache[ keyA ];\r\n\r\n                if ( materialsForVariant === undefined ) {\r\n\r\n                    materialsForVariant = {};\r\n                    _materialCache[ keyA ] = materialsForVariant;\r\n\r\n                }\r\n\r\n                var cachedMaterial = materialsForVariant[ keyB ];\r\n\r\n                if ( cachedMaterial === undefined ) {\r\n\r\n                    cachedMaterial = result.clone();\r\n                    materialsForVariant[ keyB ] = cachedMaterial;\r\n\r\n                }\r\n\r\n                result = cachedMaterial;\r\n\r\n            }\r\n\r\n            result.visible = material.visible;\r\n            result.wireframe = material.wireframe;\r\n\r\n            result.side = ( material.shadowSide != null ) ? material.shadowSide : shadowSide[ material.side ];\r\n\r\n            result.clipShadows = material.clipShadows;\r\n            result.clippingPlanes = material.clippingPlanes;\r\n            result.clipIntersection = material.clipIntersection;\r\n\r\n            result.wireframeLinewidth = material.wireframeLinewidth;\r\n            result.linewidth = material.linewidth;\r\n\r\n            if ( isPointLight && result.isMeshDistanceMaterial ) {\r\n\r\n                result.referencePosition.copy( lightPositionWorld );\r\n                result.nearDistance = shadowCameraNear;\r\n                result.farDistance = shadowCameraFar;\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        function renderObject( object, camera, shadowCamera, isPointLight ) {\r\n\r\n            if ( object.visible === false ) return;\r\n\r\n            var visible = object.layers.test( camera.layers );\r\n\r\n            if ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\r\n\r\n                if ( object.castShadow && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\r\n\r\n                    object.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\r\n\r\n                    var geometry = _objects.update( object );\r\n                    var material = object.material;\r\n\r\n                    if ( Array.isArray( material ) ) {\r\n\r\n                        var groups = geometry.groups;\r\n\r\n                        for ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n                            var group = groups[ k ];\r\n                            var groupMaterial = material[ group.materialIndex ];\r\n\r\n                            if ( groupMaterial && groupMaterial.visible ) {\r\n\r\n                                var depthMaterial = getDepthMaterial( object, groupMaterial, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\r\n                                _renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else if ( material.visible ) {\r\n\r\n                        var depthMaterial = getDepthMaterial( object, material, isPointLight, _lightPositionWorld, shadowCamera.near, shadowCamera.far );\r\n                        _renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var children = object.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                renderObject( children[ i ], camera, shadowCamera, isPointLight );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n        Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n        this.needsUpdate = true;\r\n\r\n    }\r\n\r\n    CanvasTexture.prototype = Object.create( Texture.prototype );\r\n    CanvasTexture.prototype.constructor = CanvasTexture;\r\n    CanvasTexture.prototype.isCanvasTexture = true;\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function WebGLSpriteRenderer( renderer, gl, state, textures, capabilities ) {\r\n\r\n        var vertexBuffer, elementBuffer;\r\n        var program, attributes, uniforms;\r\n\r\n        var texture;\r\n\r\n        // decompose matrixWorld\r\n\r\n        var spritePosition = new Vector3();\r\n        var spriteRotation = new Quaternion();\r\n        var spriteScale = new Vector3();\r\n\r\n        function init() {\r\n\r\n            var vertices = new Float32Array( [\r\n                - 0.5, - 0.5, 0, 0,\r\n                0.5, - 0.5, 1, 0,\r\n                0.5, 0.5, 1, 1,\r\n                - 0.5, 0.5, 0, 1\r\n            ] );\r\n\r\n            var faces = new Uint16Array( [\r\n                0, 1, 2,\r\n                0, 2, 3\r\n            ] );\r\n\r\n            vertexBuffer = gl.createBuffer();\r\n            elementBuffer = gl.createBuffer();\r\n\r\n            gl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n            gl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n            gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n            gl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n            program = createProgram();\r\n\r\n            attributes = {\r\n                position: gl.getAttribLocation( program, 'position' ),\r\n                uv: gl.getAttribLocation( program, 'uv' )\r\n            };\r\n\r\n            uniforms = {\r\n                uvOffset: gl.getUniformLocation( program, 'uvOffset' ),\r\n                uvScale: gl.getUniformLocation( program, 'uvScale' ),\r\n\r\n                rotation: gl.getUniformLocation( program, 'rotation' ),\r\n                center: gl.getUniformLocation( program, 'center' ),\r\n                scale: gl.getUniformLocation( program, 'scale' ),\r\n\r\n                color: gl.getUniformLocation( program, 'color' ),\r\n                map: gl.getUniformLocation( program, 'map' ),\r\n                opacity: gl.getUniformLocation( program, 'opacity' ),\r\n\r\n                modelViewMatrix: gl.getUniformLocation( program, 'modelViewMatrix' ),\r\n                projectionMatrix: gl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n                fogType: gl.getUniformLocation( program, 'fogType' ),\r\n                fogDensity: gl.getUniformLocation( program, 'fogDensity' ),\r\n                fogNear: gl.getUniformLocation( program, 'fogNear' ),\r\n                fogFar: gl.getUniformLocation( program, 'fogFar' ),\r\n                fogColor: gl.getUniformLocation( program, 'fogColor' ),\r\n                fogDepth: gl.getUniformLocation( program, 'fogDepth' ),\r\n\r\n                alphaTest: gl.getUniformLocation( program, 'alphaTest' )\r\n            };\r\n\r\n            var canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n            canvas.width = 8;\r\n            canvas.height = 8;\r\n\r\n            var context = canvas.getContext( '2d' );\r\n            context.fillStyle = 'white';\r\n            context.fillRect( 0, 0, 8, 8 );\r\n\r\n            texture = new CanvasTexture( canvas );\r\n\r\n        }\r\n\r\n        this.render = function ( sprites, scene, camera ) {\r\n\r\n            if ( sprites.length === 0 ) return;\r\n\r\n            // setup gl\r\n\r\n            if ( program === undefined ) {\r\n\r\n                init();\r\n\r\n            }\r\n\r\n            state.useProgram( program );\r\n\r\n            state.initAttributes();\r\n            state.enableAttribute( attributes.position );\r\n            state.enableAttribute( attributes.uv );\r\n            state.disableUnusedAttributes();\r\n\r\n            state.disable( gl.CULL_FACE );\r\n            state.enable( gl.BLEND );\r\n\r\n            gl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n            gl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n            gl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n            gl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n            gl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n            state.activeTexture( gl.TEXTURE0 );\r\n            gl.uniform1i( uniforms.map, 0 );\r\n\r\n            var oldFogType = 0;\r\n            var sceneFogType = 0;\r\n            var fog = scene.fog;\r\n\r\n            if ( fog ) {\r\n\r\n                gl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n                if ( fog.isFog ) {\r\n\r\n                    gl.uniform1f( uniforms.fogNear, fog.near );\r\n                    gl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n                    gl.uniform1i( uniforms.fogType, 1 );\r\n                    oldFogType = 1;\r\n                    sceneFogType = 1;\r\n\r\n                } else if ( fog.isFogExp2 ) {\r\n\r\n                    gl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n                    gl.uniform1i( uniforms.fogType, 2 );\r\n                    oldFogType = 2;\r\n                    sceneFogType = 2;\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                gl.uniform1i( uniforms.fogType, 0 );\r\n                oldFogType = 0;\r\n                sceneFogType = 0;\r\n\r\n            }\r\n\r\n\r\n            // update positions and sort\r\n\r\n            for ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n                var sprite = sprites[ i ];\r\n\r\n                sprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n                sprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n            }\r\n\r\n            sprites.sort( painterSortStable );\r\n\r\n            // render all sprites\r\n\r\n            var scale = [];\r\n            var center = [];\r\n\r\n            for ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n                var sprite = sprites[ i ];\r\n                var material = sprite.material;\r\n\r\n                if ( material.visible === false ) continue;\r\n\r\n                sprite.onBeforeRender( renderer, scene, camera, undefined, material, undefined );\r\n\r\n                gl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n                gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n                sprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n                scale[ 0 ] = spriteScale.x;\r\n                scale[ 1 ] = spriteScale.y;\r\n\r\n                center[ 0 ] = sprite.center.x - 0.5;\r\n                center[ 1 ] = sprite.center.y - 0.5;\r\n\r\n                var fogType = 0;\r\n\r\n                if ( scene.fog && material.fog ) {\r\n\r\n                    fogType = sceneFogType;\r\n\r\n                }\r\n\r\n                if ( oldFogType !== fogType ) {\r\n\r\n                    gl.uniform1i( uniforms.fogType, fogType );\r\n                    oldFogType = fogType;\r\n\r\n                }\r\n\r\n                if ( material.map !== null ) {\r\n\r\n                    gl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n                    gl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n                } else {\r\n\r\n                    gl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n                    gl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n                }\r\n\r\n                gl.uniform1f( uniforms.opacity, material.opacity );\r\n                gl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n                gl.uniform1f( uniforms.rotation, material.rotation );\r\n                gl.uniform2fv( uniforms.center, center );\r\n                gl.uniform2fv( uniforms.scale, scale );\r\n\r\n                state.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\r\n                state.buffers.depth.setTest( material.depthTest );\r\n                state.buffers.depth.setMask( material.depthWrite );\r\n                state.buffers.color.setMask( material.colorWrite );\r\n\r\n                textures.setTexture2D( material.map || texture, 0 );\r\n\r\n                gl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n                sprite.onAfterRender( renderer, scene, camera, undefined, material, undefined );\r\n\r\n            }\r\n\r\n            // restore gl\r\n\r\n            state.enable( gl.CULL_FACE );\r\n\r\n            state.reset();\r\n\r\n        };\r\n\r\n        function createProgram() {\r\n\r\n            var program = gl.createProgram();\r\n\r\n            var vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n            var fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n            gl.shaderSource( vertexShader, [\r\n\r\n                'precision ' + capabilities.precision + ' float;',\r\n\r\n                '#define SHADER_NAME ' + 'SpriteMaterial',\r\n\r\n                'uniform mat4 modelViewMatrix;',\r\n                'uniform mat4 projectionMatrix;',\r\n                'uniform float rotation;',\r\n                'uniform vec2 center;',\r\n                'uniform vec2 scale;',\r\n                'uniform vec2 uvOffset;',\r\n                'uniform vec2 uvScale;',\r\n\r\n                'attribute vec2 position;',\r\n                'attribute vec2 uv;',\r\n\r\n                'varying vec2 vUV;',\r\n                'varying float fogDepth;',\r\n\r\n                'void main() {',\r\n\r\n                '\tvUV = uvOffset + uv * uvScale;',\r\n\r\n                '\tvec2 alignedPosition = ( position - center ) * scale;',\r\n\r\n                '\tvec2 rotatedPosition;',\r\n                '\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n                '\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n                '\tvec4 mvPosition;',\r\n\r\n                '\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n                '\tmvPosition.xy += rotatedPosition;',\r\n\r\n                '\tgl_Position = projectionMatrix * mvPosition;',\r\n\r\n                '\tfogDepth = - mvPosition.z;',\r\n\r\n                '}'\r\n\r\n            ].join( '\\n' ) );\r\n\r\n            gl.shaderSource( fragmentShader, [\r\n\r\n                'precision ' + capabilities.precision + ' float;',\r\n\r\n                '#define SHADER_NAME ' + 'SpriteMaterial',\r\n\r\n                'uniform vec3 color;',\r\n                'uniform sampler2D map;',\r\n                'uniform float opacity;',\r\n\r\n                'uniform int fogType;',\r\n                'uniform vec3 fogColor;',\r\n                'uniform float fogDensity;',\r\n                'uniform float fogNear;',\r\n                'uniform float fogFar;',\r\n                'uniform float alphaTest;',\r\n\r\n                'varying vec2 vUV;',\r\n                'varying float fogDepth;',\r\n\r\n                'void main() {',\r\n\r\n                '\tvec4 texture = texture2D( map, vUV );',\r\n\r\n                '\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n                '\tif ( gl_FragColor.a < alphaTest ) discard;',\r\n\r\n                '\tif ( fogType > 0 ) {',\r\n\r\n                '\t\tfloat fogFactor = 0.0;',\r\n\r\n                '\t\tif ( fogType == 1 ) {',\r\n\r\n                '\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );',\r\n\r\n                '\t\t} else {',\r\n\r\n                '\t\t\tconst float LOG2 = 1.442695;',\r\n                '\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );',\r\n                '\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n                '\t\t}',\r\n\r\n                '\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );',\r\n\r\n                '\t}',\r\n\r\n                '}'\r\n\r\n            ].join( '\\n' ) );\r\n\r\n            gl.compileShader( vertexShader );\r\n            gl.compileShader( fragmentShader );\r\n\r\n            gl.attachShader( program, vertexShader );\r\n            gl.attachShader( program, fragmentShader );\r\n\r\n            gl.linkProgram( program );\r\n\r\n            return program;\r\n\r\n        }\r\n\r\n        function painterSortStable( a, b ) {\r\n\r\n            if ( a.renderOrder !== b.renderOrder ) {\r\n\r\n                return a.renderOrder - b.renderOrder;\r\n\r\n            } else if ( a.z !== b.z ) {\r\n\r\n                return b.z - a.z;\r\n\r\n            } else {\r\n\r\n                return b.id - a.id;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLState( gl, extensions, utils ) {\r\n\r\n        function ColorBuffer() {\r\n\r\n            var locked = false;\r\n\r\n            var color = new Vector4();\r\n            var currentColorMask = null;\r\n            var currentColorClear = new Vector4( 0, 0, 0, 0 );\r\n\r\n            return {\r\n\r\n                setMask: function ( colorMask ) {\r\n\r\n                    if ( currentColorMask !== colorMask && ! locked ) {\r\n\r\n                        gl.colorMask( colorMask, colorMask, colorMask, colorMask );\r\n                        currentColorMask = colorMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setLocked: function ( lock ) {\r\n\r\n                    locked = lock;\r\n\r\n                },\r\n\r\n                setClear: function ( r, g, b, a, premultipliedAlpha ) {\r\n\r\n                    if ( premultipliedAlpha === true ) {\r\n\r\n                        r *= a; g *= a; b *= a;\r\n\r\n                    }\r\n\r\n                    color.set( r, g, b, a );\r\n\r\n                    if ( currentColorClear.equals( color ) === false ) {\r\n\r\n                        gl.clearColor( r, g, b, a );\r\n                        currentColorClear.copy( color );\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                reset: function () {\r\n\r\n                    locked = false;\r\n\r\n                    currentColorMask = null;\r\n                    currentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        function DepthBuffer() {\r\n\r\n            var locked = false;\r\n\r\n            var currentDepthMask = null;\r\n            var currentDepthFunc = null;\r\n            var currentDepthClear = null;\r\n\r\n            return {\r\n\r\n                setTest: function ( depthTest ) {\r\n\r\n                    if ( depthTest ) {\r\n\r\n                        enable( gl.DEPTH_TEST );\r\n\r\n                    } else {\r\n\r\n                        disable( gl.DEPTH_TEST );\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setMask: function ( depthMask ) {\r\n\r\n                    if ( currentDepthMask !== depthMask && ! locked ) {\r\n\r\n                        gl.depthMask( depthMask );\r\n                        currentDepthMask = depthMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setFunc: function ( depthFunc ) {\r\n\r\n                    if ( currentDepthFunc !== depthFunc ) {\r\n\r\n                        if ( depthFunc ) {\r\n\r\n                            switch ( depthFunc ) {\r\n\r\n                                case NeverDepth:\r\n\r\n                                    gl.depthFunc( gl.NEVER );\r\n                                    break;\r\n\r\n                                case AlwaysDepth:\r\n\r\n                                    gl.depthFunc( gl.ALWAYS );\r\n                                    break;\r\n\r\n                                case LessDepth:\r\n\r\n                                    gl.depthFunc( gl.LESS );\r\n                                    break;\r\n\r\n                                case LessEqualDepth:\r\n\r\n                                    gl.depthFunc( gl.LEQUAL );\r\n                                    break;\r\n\r\n                                case EqualDepth:\r\n\r\n                                    gl.depthFunc( gl.EQUAL );\r\n                                    break;\r\n\r\n                                case GreaterEqualDepth:\r\n\r\n                                    gl.depthFunc( gl.GEQUAL );\r\n                                    break;\r\n\r\n                                case GreaterDepth:\r\n\r\n                                    gl.depthFunc( gl.GREATER );\r\n                                    break;\r\n\r\n                                case NotEqualDepth:\r\n\r\n                                    gl.depthFunc( gl.NOTEQUAL );\r\n                                    break;\r\n\r\n                                default:\r\n\r\n                                    gl.depthFunc( gl.LEQUAL );\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            gl.depthFunc( gl.LEQUAL );\r\n\r\n                        }\r\n\r\n                        currentDepthFunc = depthFunc;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setLocked: function ( lock ) {\r\n\r\n                    locked = lock;\r\n\r\n                },\r\n\r\n                setClear: function ( depth ) {\r\n\r\n                    if ( currentDepthClear !== depth ) {\r\n\r\n                        gl.clearDepth( depth );\r\n                        currentDepthClear = depth;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                reset: function () {\r\n\r\n                    locked = false;\r\n\r\n                    currentDepthMask = null;\r\n                    currentDepthFunc = null;\r\n                    currentDepthClear = null;\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        function StencilBuffer() {\r\n\r\n            var locked = false;\r\n\r\n            var currentStencilMask = null;\r\n            var currentStencilFunc = null;\r\n            var currentStencilRef = null;\r\n            var currentStencilFuncMask = null;\r\n            var currentStencilFail = null;\r\n            var currentStencilZFail = null;\r\n            var currentStencilZPass = null;\r\n            var currentStencilClear = null;\r\n\r\n            return {\r\n\r\n                setTest: function ( stencilTest ) {\r\n\r\n                    if ( stencilTest ) {\r\n\r\n                        enable( gl.STENCIL_TEST );\r\n\r\n                    } else {\r\n\r\n                        disable( gl.STENCIL_TEST );\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setMask: function ( stencilMask ) {\r\n\r\n                    if ( currentStencilMask !== stencilMask && ! locked ) {\r\n\r\n                        gl.stencilMask( stencilMask );\r\n                        currentStencilMask = stencilMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setFunc: function ( stencilFunc, stencilRef, stencilMask ) {\r\n\r\n                    if ( currentStencilFunc !== stencilFunc ||\r\n                        currentStencilRef \t!== stencilRef \t||\r\n                        currentStencilFuncMask !== stencilMask ) {\r\n\r\n                        gl.stencilFunc( stencilFunc, stencilRef, stencilMask );\r\n\r\n                        currentStencilFunc = stencilFunc;\r\n                        currentStencilRef = stencilRef;\r\n                        currentStencilFuncMask = stencilMask;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setOp: function ( stencilFail, stencilZFail, stencilZPass ) {\r\n\r\n                    if ( currentStencilFail\t !== stencilFail \t||\r\n                        currentStencilZFail !== stencilZFail ||\r\n                        currentStencilZPass !== stencilZPass ) {\r\n\r\n                        gl.stencilOp( stencilFail, stencilZFail, stencilZPass );\r\n\r\n                        currentStencilFail = stencilFail;\r\n                        currentStencilZFail = stencilZFail;\r\n                        currentStencilZPass = stencilZPass;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                setLocked: function ( lock ) {\r\n\r\n                    locked = lock;\r\n\r\n                },\r\n\r\n                setClear: function ( stencil ) {\r\n\r\n                    if ( currentStencilClear !== stencil ) {\r\n\r\n                        gl.clearStencil( stencil );\r\n                        currentStencilClear = stencil;\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                reset: function () {\r\n\r\n                    locked = false;\r\n\r\n                    currentStencilMask = null;\r\n                    currentStencilFunc = null;\r\n                    currentStencilRef = null;\r\n                    currentStencilFuncMask = null;\r\n                    currentStencilFail = null;\r\n                    currentStencilZFail = null;\r\n                    currentStencilZPass = null;\r\n                    currentStencilClear = null;\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var colorBuffer = new ColorBuffer();\r\n        var depthBuffer = new DepthBuffer();\r\n        var stencilBuffer = new StencilBuffer();\r\n\r\n        var maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n        var newAttributes = new Uint8Array( maxVertexAttributes );\r\n        var enabledAttributes = new Uint8Array( maxVertexAttributes );\r\n        var attributeDivisors = new Uint8Array( maxVertexAttributes );\r\n\r\n        var capabilities = {};\r\n\r\n        var compressedTextureFormats = null;\r\n\r\n        var currentProgram = null;\r\n\r\n        var currentBlending = null;\r\n        var currentBlendEquation = null;\r\n        var currentBlendSrc = null;\r\n        var currentBlendDst = null;\r\n        var currentBlendEquationAlpha = null;\r\n        var currentBlendSrcAlpha = null;\r\n        var currentBlendDstAlpha = null;\r\n        var currentPremultipledAlpha = false;\r\n\r\n        var currentFlipSided = null;\r\n        var currentCullFace = null;\r\n\r\n        var currentLineWidth = null;\r\n\r\n        var currentPolygonOffsetFactor = null;\r\n        var currentPolygonOffsetUnits = null;\r\n\r\n        var maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\r\n\r\n        var lineWidthAvailable = false;\r\n        var version = 0;\r\n        var glVersion = gl.getParameter( gl.VERSION );\r\n\r\n        if ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\r\n\r\n            version = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n            lineWidthAvailable = ( version >= 1.0 );\r\n\r\n        } else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\r\n\r\n            version = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\r\n            lineWidthAvailable = ( version >= 2.0 );\r\n\r\n        }\r\n\r\n        var currentTextureSlot = null;\r\n        var currentBoundTextures = {};\r\n\r\n        var currentScissor = new Vector4();\r\n        var currentViewport = new Vector4();\r\n\r\n        function createTexture( type, target, count ) {\r\n\r\n            var data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\r\n            var texture = gl.createTexture();\r\n\r\n            gl.bindTexture( type, texture );\r\n            gl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n            gl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\r\n            for ( var i = 0; i < count; i ++ ) {\r\n\r\n                gl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\r\n\r\n            }\r\n\r\n            return texture;\r\n\r\n        }\r\n\r\n        var emptyTextures = {};\r\n        emptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\r\n        emptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\r\n\r\n        // init\r\n\r\n        colorBuffer.setClear( 0, 0, 0, 1 );\r\n        depthBuffer.setClear( 1 );\r\n        stencilBuffer.setClear( 0 );\r\n\r\n        enable( gl.DEPTH_TEST );\r\n        depthBuffer.setFunc( LessEqualDepth );\r\n\r\n        setFlipSided( false );\r\n        setCullFace( CullFaceBack );\r\n        enable( gl.CULL_FACE );\r\n\r\n        enable( gl.BLEND );\r\n        setBlending( NormalBlending );\r\n\r\n        //\r\n\r\n        function initAttributes() {\r\n\r\n            for ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n                newAttributes[ i ] = 0;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function enableAttribute( attribute ) {\r\n\r\n            enableAttributeAndDivisor( attribute, 0 );\r\n\r\n        }\r\n\r\n        function enableAttributeAndDivisor( attribute, meshPerAttribute ) {\r\n\r\n            newAttributes[ attribute ] = 1;\r\n\r\n            if ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n                gl.enableVertexAttribArray( attribute );\r\n                enabledAttributes[ attribute ] = 1;\r\n\r\n            }\r\n\r\n            if ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\r\n\r\n                var extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n                extension.vertexAttribDivisorANGLE( attribute, meshPerAttribute );\r\n                attributeDivisors[ attribute ] = meshPerAttribute;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function disableUnusedAttributes() {\r\n\r\n            for ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\r\n\r\n                if ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n                    gl.disableVertexAttribArray( i );\r\n                    enabledAttributes[ i ] = 0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function enable( id ) {\r\n\r\n            if ( capabilities[ id ] !== true ) {\r\n\r\n                gl.enable( id );\r\n                capabilities[ id ] = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function disable( id ) {\r\n\r\n            if ( capabilities[ id ] !== false ) {\r\n\r\n                gl.disable( id );\r\n                capabilities[ id ] = false;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function getCompressedTextureFormats() {\r\n\r\n            if ( compressedTextureFormats === null ) {\r\n\r\n                compressedTextureFormats = [];\r\n\r\n                if ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n                    extensions.get( 'WEBGL_compressed_texture_s3tc' ) ||\r\n                    extensions.get( 'WEBGL_compressed_texture_etc1' ) ||\r\n                    extensions.get( 'WEBGL_compressed_texture_astc' ) ) {\r\n\r\n                    var formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n                    for ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n                        compressedTextureFormats.push( formats[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return compressedTextureFormats;\r\n\r\n        }\r\n\r\n        function useProgram( program ) {\r\n\r\n            if ( currentProgram !== program ) {\r\n\r\n                gl.useProgram( program );\r\n\r\n                currentProgram = program;\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            return false;\r\n\r\n        }\r\n\r\n        function setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\r\n\r\n            if ( blending !== NoBlending ) {\r\n\r\n                enable( gl.BLEND );\r\n\r\n            } else {\r\n\r\n                disable( gl.BLEND );\r\n\r\n            }\r\n\r\n            if ( blending !== CustomBlending ) {\r\n\r\n                if ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\r\n\r\n                    switch ( blending ) {\r\n\r\n                        case AdditiveBlending:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ONE, gl.ONE, gl.ONE, gl.ONE );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquation( gl.FUNC_ADD );\r\n                                gl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n                            }\r\n                            break;\r\n\r\n                        case SubtractiveBlending:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquation( gl.FUNC_ADD );\r\n                                gl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n                            }\r\n                            break;\r\n\r\n                        case MultiplyBlending:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquation( gl.FUNC_ADD );\r\n                                gl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n                            }\r\n                            break;\r\n\r\n                        default:\r\n\r\n                            if ( premultipliedAlpha ) {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n                            } else {\r\n\r\n                                gl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n                                gl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n                            }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                currentBlendEquation = null;\r\n                currentBlendSrc = null;\r\n                currentBlendDst = null;\r\n                currentBlendEquationAlpha = null;\r\n                currentBlendSrcAlpha = null;\r\n                currentBlendDstAlpha = null;\r\n\r\n            } else {\r\n\r\n                blendEquationAlpha = blendEquationAlpha || blendEquation;\r\n                blendSrcAlpha = blendSrcAlpha || blendSrc;\r\n                blendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n                if ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n                    gl.blendEquationSeparate( utils.convert( blendEquation ), utils.convert( blendEquationAlpha ) );\r\n\r\n                    currentBlendEquation = blendEquation;\r\n                    currentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n                }\r\n\r\n                if ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n                    gl.blendFuncSeparate( utils.convert( blendSrc ), utils.convert( blendDst ), utils.convert( blendSrcAlpha ), utils.convert( blendDstAlpha ) );\r\n\r\n                    currentBlendSrc = blendSrc;\r\n                    currentBlendDst = blendDst;\r\n                    currentBlendSrcAlpha = blendSrcAlpha;\r\n                    currentBlendDstAlpha = blendDstAlpha;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            currentBlending = blending;\r\n            currentPremultipledAlpha = premultipliedAlpha;\r\n\r\n        }\r\n\r\n        function setMaterial( material, frontFaceCW ) {\r\n\r\n            material.side === DoubleSide\r\n                ? disable( gl.CULL_FACE )\r\n                : enable( gl.CULL_FACE );\r\n\r\n            var flipSided = ( material.side === BackSide );\r\n            if ( frontFaceCW ) flipSided = ! flipSided;\r\n\r\n            setFlipSided( flipSided );\r\n\r\n            material.transparent === true\r\n                ? setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha )\r\n                : setBlending( NoBlending );\r\n\r\n            depthBuffer.setFunc( material.depthFunc );\r\n            depthBuffer.setTest( material.depthTest );\r\n            depthBuffer.setMask( material.depthWrite );\r\n            colorBuffer.setMask( material.colorWrite );\r\n\r\n            setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function setFlipSided( flipSided ) {\r\n\r\n            if ( currentFlipSided !== flipSided ) {\r\n\r\n                if ( flipSided ) {\r\n\r\n                    gl.frontFace( gl.CW );\r\n\r\n                } else {\r\n\r\n                    gl.frontFace( gl.CCW );\r\n\r\n                }\r\n\r\n                currentFlipSided = flipSided;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setCullFace( cullFace ) {\r\n\r\n            if ( cullFace !== CullFaceNone ) {\r\n\r\n                enable( gl.CULL_FACE );\r\n\r\n                if ( cullFace !== currentCullFace ) {\r\n\r\n                    if ( cullFace === CullFaceBack ) {\r\n\r\n                        gl.cullFace( gl.BACK );\r\n\r\n                    } else if ( cullFace === CullFaceFront ) {\r\n\r\n                        gl.cullFace( gl.FRONT );\r\n\r\n                    } else {\r\n\r\n                        gl.cullFace( gl.FRONT_AND_BACK );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                disable( gl.CULL_FACE );\r\n\r\n            }\r\n\r\n            currentCullFace = cullFace;\r\n\r\n        }\r\n\r\n        function setLineWidth( width ) {\r\n\r\n            if ( width !== currentLineWidth ) {\r\n\r\n                if ( lineWidthAvailable ) gl.lineWidth( width );\r\n\r\n                currentLineWidth = width;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setPolygonOffset( polygonOffset, factor, units ) {\r\n\r\n            if ( polygonOffset ) {\r\n\r\n                enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n                if ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\r\n\r\n                    gl.polygonOffset( factor, units );\r\n\r\n                    currentPolygonOffsetFactor = factor;\r\n                    currentPolygonOffsetUnits = units;\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setScissorTest( scissorTest ) {\r\n\r\n            if ( scissorTest ) {\r\n\r\n                enable( gl.SCISSOR_TEST );\r\n\r\n            } else {\r\n\r\n                disable( gl.SCISSOR_TEST );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // texture\r\n\r\n        function activeTexture( webglSlot ) {\r\n\r\n            if ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n            if ( currentTextureSlot !== webglSlot ) {\r\n\r\n                gl.activeTexture( webglSlot );\r\n                currentTextureSlot = webglSlot;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function bindTexture( webglType, webglTexture ) {\r\n\r\n            if ( currentTextureSlot === null ) {\r\n\r\n                activeTexture();\r\n\r\n            }\r\n\r\n            var boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n            if ( boundTexture === undefined ) {\r\n\r\n                boundTexture = { type: undefined, texture: undefined };\r\n                currentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n            }\r\n\r\n            if ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n                gl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\r\n\r\n                boundTexture.type = webglType;\r\n                boundTexture.texture = webglTexture;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function compressedTexImage2D() {\r\n\r\n            try {\r\n\r\n                gl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n            } catch ( error ) {\r\n\r\n                console.error( 'THREE.WebGLState:', error );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function texImage2D() {\r\n\r\n            try {\r\n\r\n                gl.texImage2D.apply( gl, arguments );\r\n\r\n            } catch ( error ) {\r\n\r\n                console.error( 'THREE.WebGLState:', error );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function scissor( scissor ) {\r\n\r\n            if ( currentScissor.equals( scissor ) === false ) {\r\n\r\n                gl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\r\n                currentScissor.copy( scissor );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function viewport( viewport ) {\r\n\r\n            if ( currentViewport.equals( viewport ) === false ) {\r\n\r\n                gl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\r\n                currentViewport.copy( viewport );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function reset() {\r\n\r\n            for ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n                if ( enabledAttributes[ i ] === 1 ) {\r\n\r\n                    gl.disableVertexAttribArray( i );\r\n                    enabledAttributes[ i ] = 0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            capabilities = {};\r\n\r\n            compressedTextureFormats = null;\r\n\r\n            currentTextureSlot = null;\r\n            currentBoundTextures = {};\r\n\r\n            currentProgram = null;\r\n\r\n            currentBlending = null;\r\n\r\n            currentFlipSided = null;\r\n            currentCullFace = null;\r\n\r\n            colorBuffer.reset();\r\n            depthBuffer.reset();\r\n            stencilBuffer.reset();\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            buffers: {\r\n                color: colorBuffer,\r\n                depth: depthBuffer,\r\n                stencil: stencilBuffer\r\n            },\r\n\r\n            initAttributes: initAttributes,\r\n            enableAttribute: enableAttribute,\r\n            enableAttributeAndDivisor: enableAttributeAndDivisor,\r\n            disableUnusedAttributes: disableUnusedAttributes,\r\n            enable: enable,\r\n            disable: disable,\r\n            getCompressedTextureFormats: getCompressedTextureFormats,\r\n\r\n            useProgram: useProgram,\r\n\r\n            setBlending: setBlending,\r\n            setMaterial: setMaterial,\r\n\r\n            setFlipSided: setFlipSided,\r\n            setCullFace: setCullFace,\r\n\r\n            setLineWidth: setLineWidth,\r\n            setPolygonOffset: setPolygonOffset,\r\n\r\n            setScissorTest: setScissorTest,\r\n\r\n            activeTexture: activeTexture,\r\n            bindTexture: bindTexture,\r\n            compressedTexImage2D: compressedTexImage2D,\r\n            texImage2D: texImage2D,\r\n\r\n            scissor: scissor,\r\n            viewport: viewport,\r\n\r\n            reset: reset\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\r\n\r\n        var _isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && _gl instanceof WebGL2RenderingContext ); /* global WebGL2RenderingContext */\r\n        var _videoTextures = {};\r\n        var _canvas;\r\n\r\n        //\r\n\r\n        function clampToMaxSize( image, maxSize ) {\r\n\r\n            if ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n                if ( 'data' in image ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\r\n                    return;\r\n\r\n                }\r\n\r\n                // Warning: Scaling through the canvas will only work with images that use\r\n                // premultiplied alpha.\r\n\r\n                var scale = maxSize / Math.max( image.width, image.height );\r\n\r\n                var canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n                canvas.width = Math.floor( image.width * scale );\r\n                canvas.height = Math.floor( image.height * scale );\r\n\r\n                var context = canvas.getContext( '2d' );\r\n                context.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n                console.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n                return canvas;\r\n\r\n            }\r\n\r\n            return image;\r\n\r\n        }\r\n\r\n        function isPowerOfTwo( image ) {\r\n\r\n            return _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\r\n\r\n        }\r\n\r\n        function makePowerOfTwo( image ) {\r\n\r\n            if ( image instanceof HTMLImageElement || image instanceof HTMLCanvasElement || image instanceof ImageBitmap ) {\r\n\r\n                if ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n\r\n                _canvas.width = _Math.floorPowerOfTwo( image.width );\r\n                _canvas.height = _Math.floorPowerOfTwo( image.height );\r\n\r\n                var context = _canvas.getContext( '2d' );\r\n                context.drawImage( image, 0, 0, _canvas.width, _canvas.height );\r\n\r\n                console.warn( 'THREE.WebGLRenderer: image is not power of two (' + image.width + 'x' + image.height + '). Resized to ' + _canvas.width + 'x' + _canvas.height, image );\r\n\r\n                return _canvas;\r\n\r\n            }\r\n\r\n            return image;\r\n\r\n        }\r\n\r\n        function textureNeedsPowerOfTwo( texture ) {\r\n\r\n            return ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\r\n                ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\r\n\r\n        }\r\n\r\n        function textureNeedsGenerateMipmaps( texture, isPowerOfTwo ) {\r\n\r\n            return texture.generateMipmaps && isPowerOfTwo &&\r\n                texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\r\n\r\n        }\r\n\r\n        function generateMipmap( target, texture, width, height ) {\r\n\r\n            _gl.generateMipmap( target );\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            // Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\r\n            textureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\r\n\r\n        }\r\n\r\n        // Fallback filters for non-power-of-2 textures\r\n\r\n        function filterFallback( f ) {\r\n\r\n            if ( f === NearestFilter || f === NearestMipMapNearestFilter || f === NearestMipMapLinearFilter ) {\r\n\r\n                return _gl.NEAREST;\r\n\r\n            }\r\n\r\n            return _gl.LINEAR;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function onTextureDispose( event ) {\r\n\r\n            var texture = event.target;\r\n\r\n            texture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n            deallocateTexture( texture );\r\n\r\n            if ( texture.isVideoTexture ) {\r\n\r\n                delete _videoTextures[ texture.id ];\r\n\r\n            }\r\n\r\n            info.memory.textures --;\r\n\r\n        }\r\n\r\n        function onRenderTargetDispose( event ) {\r\n\r\n            var renderTarget = event.target;\r\n\r\n            renderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n            deallocateRenderTarget( renderTarget );\r\n\r\n            info.memory.textures --;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        function deallocateTexture( texture ) {\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            if ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n                // cube texture\r\n\r\n                _gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n            } else {\r\n\r\n                // 2D texture\r\n\r\n                if ( textureProperties.__webglInit === undefined ) return;\r\n\r\n                _gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n            }\r\n\r\n            // remove all webgl properties\r\n            properties.remove( texture );\r\n\r\n        }\r\n\r\n        function deallocateRenderTarget( renderTarget ) {\r\n\r\n            var renderTargetProperties = properties.get( renderTarget );\r\n            var textureProperties = properties.get( renderTarget.texture );\r\n\r\n            if ( ! renderTarget ) return;\r\n\r\n            if ( textureProperties.__webglTexture !== undefined ) {\r\n\r\n                _gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n            }\r\n\r\n            if ( renderTarget.depthTexture ) {\r\n\r\n                renderTarget.depthTexture.dispose();\r\n\r\n            }\r\n\r\n            if ( renderTarget.isWebGLRenderTargetCube ) {\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n                    if ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n                if ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\r\n\r\n            }\r\n\r\n            properties.remove( renderTarget.texture );\r\n            properties.remove( renderTarget );\r\n\r\n        }\r\n\r\n        //\r\n\r\n\r\n\r\n        function setTexture2D( texture, slot ) {\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            if ( texture.isVideoTexture ) updateVideoTexture( texture );\r\n\r\n            if ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n                var image = texture.image;\r\n\r\n                if ( image === undefined ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\r\n                } else if ( image.complete === false ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\r\n                } else {\r\n\r\n                    uploadTexture( textureProperties, texture, slot );\r\n                    return;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.activeTexture( _gl.TEXTURE0 + slot );\r\n            state.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n        }\r\n\r\n        function setTextureCube( texture, slot ) {\r\n\r\n            var textureProperties = properties.get( texture );\r\n\r\n            if ( texture.image.length === 6 ) {\r\n\r\n                if ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n                    if ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n                        texture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n                        textureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n                        info.memory.textures ++;\r\n\r\n                    }\r\n\r\n                    state.activeTexture( _gl.TEXTURE0 + slot );\r\n                    state.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n                    _gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n                    var isCompressed = ( texture && texture.isCompressedTexture );\r\n                    var isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\r\n\r\n                    var cubeImage = [];\r\n\r\n                    for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                        if ( ! isCompressed && ! isDataTexture ) {\r\n\r\n                            cubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n                        } else {\r\n\r\n                            cubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    var image = cubeImage[ 0 ],\r\n                        isPowerOfTwoImage = isPowerOfTwo( image ),\r\n                        glFormat = utils.convert( texture.format ),\r\n                        glType = utils.convert( texture.type );\r\n\r\n                    setTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isPowerOfTwoImage );\r\n\r\n                    for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                        if ( ! isCompressed ) {\r\n\r\n                            if ( isDataTexture ) {\r\n\r\n                                state.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n                            } else {\r\n\r\n                                state.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            var mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n                            for ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n                                mipmap = mipmaps[ j ];\r\n\r\n                                if ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n                                    if ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n                                        state.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n                                    } else {\r\n\r\n                                        console.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\r\n\r\n                                    }\r\n\r\n                                } else {\r\n\r\n                                    state.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if ( ! isCompressed ) {\r\n\r\n                        textureProperties.__maxMipLevel = 0;\r\n\r\n                    } else {\r\n\r\n                        textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n                    }\r\n\r\n                    if ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\r\n\r\n                        // We assume images for cube map have the same size.\r\n                        generateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\r\n\r\n                    }\r\n\r\n                    textureProperties.__version = texture.version;\r\n\r\n                    if ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n                } else {\r\n\r\n                    state.activeTexture( _gl.TEXTURE0 + slot );\r\n                    state.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function setTextureCubeDynamic( texture, slot ) {\r\n\r\n            state.activeTexture( _gl.TEXTURE0 + slot );\r\n            state.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n        }\r\n\r\n        function setTextureParameters( textureType, texture, isPowerOfTwoImage ) {\r\n\r\n            var extension;\r\n\r\n            if ( isPowerOfTwoImage ) {\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, utils.convert( texture.wrapS ) );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, utils.convert( texture.wrapT ) );\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, utils.convert( texture.magFilter ) );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, utils.convert( texture.minFilter ) );\r\n\r\n            } else {\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n                if ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.', texture );\r\n\r\n                }\r\n\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n                _gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n                if ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\r\n\r\n                    console.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.', texture );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n            if ( extension ) {\r\n\r\n                if ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n                if ( texture.type === HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n                if ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n                    _gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\r\n                    properties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function uploadTexture( textureProperties, texture, slot ) {\r\n\r\n            if ( textureProperties.__webglInit === undefined ) {\r\n\r\n                textureProperties.__webglInit = true;\r\n\r\n                texture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n                textureProperties.__webglTexture = _gl.createTexture();\r\n\r\n                info.memory.textures ++;\r\n\r\n            }\r\n\r\n            state.activeTexture( _gl.TEXTURE0 + slot );\r\n            state.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n            _gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n            _gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n            _gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n            var image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n            if ( textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( image ) === false ) {\r\n\r\n                image = makePowerOfTwo( image );\r\n\r\n            }\r\n\r\n            var isPowerOfTwoImage = isPowerOfTwo( image ),\r\n                glFormat = utils.convert( texture.format ),\r\n                glType = utils.convert( texture.type );\r\n\r\n            setTextureParameters( _gl.TEXTURE_2D, texture, isPowerOfTwoImage );\r\n\r\n            var mipmap, mipmaps = texture.mipmaps;\r\n\r\n            if ( texture.isDepthTexture ) {\r\n\r\n                // populate depth texture with dummy data\r\n\r\n                var internalFormat = _gl.DEPTH_COMPONENT;\r\n\r\n                if ( texture.type === FloatType ) {\r\n\r\n                    if ( ! _isWebGL2 ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\r\n                    internalFormat = _gl.DEPTH_COMPONENT32F;\r\n\r\n                } else if ( _isWebGL2 ) {\r\n\r\n                    // WebGL 2.0 requires signed internalformat for glTexImage2D\r\n                    internalFormat = _gl.DEPTH_COMPONENT16;\r\n\r\n                }\r\n\r\n                if ( texture.format === DepthFormat && internalFormat === _gl.DEPTH_COMPONENT ) {\r\n\r\n                    // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n                    // DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\r\n                    // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n                    if ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\r\n\r\n                        console.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\r\n\r\n                        texture.type = UnsignedShortType;\r\n                        glType = utils.convert( texture.type );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // Depth stencil textures need the DEPTH_STENCIL internal format\r\n                // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n                if ( texture.format === DepthStencilFormat ) {\r\n\r\n                    internalFormat = _gl.DEPTH_STENCIL;\r\n\r\n                    // The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\r\n                    // DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\r\n                    // (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\r\n                    if ( texture.type !== UnsignedInt248Type ) {\r\n\r\n                        console.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\r\n\r\n                        texture.type = UnsignedInt248Type;\r\n                        glType = utils.convert( texture.type );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                state.texImage2D( _gl.TEXTURE_2D, 0, internalFormat, image.width, image.height, 0, glFormat, glType, null );\r\n\r\n            } else if ( texture.isDataTexture ) {\r\n\r\n                // use manually created mipmaps if available\r\n                // if there are no manual mipmaps\r\n                // set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n                if ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n                    for ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n                        mipmap = mipmaps[ i ];\r\n                        state.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n                    }\r\n\r\n                    texture.generateMipmaps = false;\r\n                    textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n                } else {\r\n\r\n                    state.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n                    textureProperties.__maxMipLevel = 0;\r\n\r\n                }\r\n\r\n            } else if ( texture.isCompressedTexture ) {\r\n\r\n                for ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n                    mipmap = mipmaps[ i ];\r\n\r\n                    if ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\r\n\r\n                        if ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n                            state.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n                        } else {\r\n\r\n                            console.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        state.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n            } else {\r\n\r\n                // regular Texture (image, video, canvas)\r\n\r\n                // use manually created mipmaps if available\r\n                // if there are no manual mipmaps\r\n                // set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n                if ( mipmaps.length > 0 && isPowerOfTwoImage ) {\r\n\r\n                    for ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n                        mipmap = mipmaps[ i ];\r\n                        state.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n                    }\r\n\r\n                    texture.generateMipmaps = false;\r\n                    textureProperties.__maxMipLevel = mipmaps.length - 1;\r\n\r\n                } else {\r\n\r\n                    state.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, image );\r\n                    textureProperties.__maxMipLevel = 0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( textureNeedsGenerateMipmaps( texture, isPowerOfTwoImage ) ) {\r\n\r\n                generateMipmap( _gl.TEXTURE_2D, texture, image.width, image.height );\r\n\r\n            }\r\n\r\n            textureProperties.__version = texture.version;\r\n\r\n            if ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n        }\r\n\r\n        // Render targets\r\n\r\n        // Setup storage for target texture and bind it to correct framebuffer\r\n        function setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\r\n\r\n            var glFormat = utils.convert( renderTarget.texture.format );\r\n            var glType = utils.convert( renderTarget.texture.type );\r\n            state.texImage2D( textureTarget, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n            _gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n        }\r\n\r\n        // Setup storage for internal depth/stencil buffers and bind to correct framebuffer\r\n        function setupRenderBufferStorage( renderbuffer, renderTarget ) {\r\n\r\n            _gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n            if ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n                _gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n                _gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n            } else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n                _gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n                _gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n            } else {\r\n\r\n                // FIXME: We don't support !depth !stencil\r\n                _gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n            }\r\n\r\n            _gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\r\n        }\r\n\r\n        // Setup resources for a Depth Texture for a FBO (needs an extension)\r\n        function setupDepthTexture( framebuffer, renderTarget ) {\r\n\r\n            var isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\r\n            if ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\r\n\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n            if ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\r\n\r\n                throw new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\r\n\r\n            }\r\n\r\n            // upload an empty depth texture with framebuffer size\r\n            if ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\r\n                renderTarget.depthTexture.image.width !== renderTarget.width ||\r\n                renderTarget.depthTexture.image.height !== renderTarget.height ) {\r\n\r\n                renderTarget.depthTexture.image.width = renderTarget.width;\r\n                renderTarget.depthTexture.image.height = renderTarget.height;\r\n                renderTarget.depthTexture.needsUpdate = true;\r\n\r\n            }\r\n\r\n            setTexture2D( renderTarget.depthTexture, 0 );\r\n\r\n            var webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\r\n\r\n            if ( renderTarget.depthTexture.format === DepthFormat ) {\r\n\r\n                _gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\r\n\r\n            } else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\r\n\r\n                _gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\r\n\r\n            } else {\r\n\r\n                throw new Error( 'Unknown depthTexture format' );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Setup GL resources for a non-texture depth buffer\r\n        function setupDepthRenderbuffer( renderTarget ) {\r\n\r\n            var renderTargetProperties = properties.get( renderTarget );\r\n\r\n            var isCube = ( renderTarget.isWebGLRenderTargetCube === true );\r\n\r\n            if ( renderTarget.depthTexture ) {\r\n\r\n                if ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\r\n\r\n                setupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\r\n\r\n            } else {\r\n\r\n                if ( isCube ) {\r\n\r\n                    renderTargetProperties.__webglDepthbuffer = [];\r\n\r\n                    for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                        _gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\r\n                        renderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\r\n                        setupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    _gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\r\n                    renderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\r\n                    setupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            _gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n        }\r\n\r\n        // Set up GL resources for the render target\r\n        function setupRenderTarget( renderTarget ) {\r\n\r\n            var renderTargetProperties = properties.get( renderTarget );\r\n            var textureProperties = properties.get( renderTarget.texture );\r\n\r\n            renderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n            textureProperties.__webglTexture = _gl.createTexture();\r\n\r\n            info.memory.textures ++;\r\n\r\n            var isCube = ( renderTarget.isWebGLRenderTargetCube === true );\r\n            var isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\r\n\r\n            // Setup framebuffer\r\n\r\n            if ( isCube ) {\r\n\r\n                renderTargetProperties.__webglFramebuffer = [];\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    renderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                renderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n            }\r\n\r\n            // Setup color buffer\r\n\r\n            if ( isCube ) {\r\n\r\n                state.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\r\n                setTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, isTargetPowerOfTwo );\r\n\r\n                for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                    setupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\r\n                }\r\n\r\n                if ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\r\n\r\n                    generateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n                }\r\n\r\n                state.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n            } else {\r\n\r\n                state.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n                setTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, isTargetPowerOfTwo );\r\n                setupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\r\n\r\n                if ( textureNeedsGenerateMipmaps( renderTarget.texture, isTargetPowerOfTwo ) ) {\r\n\r\n                    generateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\r\n\r\n                }\r\n\r\n                state.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n            }\r\n\r\n            // Setup depth and stencil buffers\r\n\r\n            if ( renderTarget.depthBuffer ) {\r\n\r\n                setupDepthRenderbuffer( renderTarget );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function updateRenderTargetMipmap( renderTarget ) {\r\n\r\n            var texture = renderTarget.texture;\r\n            var isTargetPowerOfTwo = isPowerOfTwo( renderTarget );\r\n\r\n            if ( textureNeedsGenerateMipmaps( texture, isTargetPowerOfTwo ) ) {\r\n\r\n                var target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\r\n                var webglTexture = properties.get( texture ).__webglTexture;\r\n\r\n                state.bindTexture( target, webglTexture );\r\n                generateMipmap( target, texture, renderTarget.width, renderTarget.height );\r\n                state.bindTexture( target, null );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function updateVideoTexture( texture ) {\r\n\r\n            var id = texture.id;\r\n            var frame = info.render.frame;\r\n\r\n            // Check the last frame we updated the VideoTexture\r\n\r\n            if ( _videoTextures[ id ] !== frame ) {\r\n\r\n                _videoTextures[ id ] = frame;\r\n                texture.update();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        this.setTexture2D = setTexture2D;\r\n        this.setTextureCube = setTextureCube;\r\n        this.setTextureCubeDynamic = setTextureCubeDynamic;\r\n        this.setupRenderTarget = setupRenderTarget;\r\n        this.updateRenderTargetMipmap = updateRenderTargetMipmap;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author thespite / http://www.twitter.com/thespite\r\n     */\r\n\r\n    function WebGLUtils( gl, extensions ) {\r\n\r\n        function convert( p ) {\r\n\r\n            var extension;\r\n\r\n            if ( p === RepeatWrapping ) return gl.REPEAT;\r\n            if ( p === ClampToEdgeWrapping ) return gl.CLAMP_TO_EDGE;\r\n            if ( p === MirroredRepeatWrapping ) return gl.MIRRORED_REPEAT;\r\n\r\n            if ( p === NearestFilter ) return gl.NEAREST;\r\n            if ( p === NearestMipMapNearestFilter ) return gl.NEAREST_MIPMAP_NEAREST;\r\n            if ( p === NearestMipMapLinearFilter ) return gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n            if ( p === LinearFilter ) return gl.LINEAR;\r\n            if ( p === LinearMipMapNearestFilter ) return gl.LINEAR_MIPMAP_NEAREST;\r\n            if ( p === LinearMipMapLinearFilter ) return gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n            if ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\r\n            if ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\r\n            if ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\r\n            if ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n            if ( p === ByteType ) return gl.BYTE;\r\n            if ( p === ShortType ) return gl.SHORT;\r\n            if ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\r\n            if ( p === IntType ) return gl.INT;\r\n            if ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\r\n            if ( p === FloatType ) return gl.FLOAT;\r\n\r\n            if ( p === HalfFloatType ) {\r\n\r\n                extension = extensions.get( 'OES_texture_half_float' );\r\n\r\n                if ( extension !== null ) return extension.HALF_FLOAT_OES;\r\n\r\n            }\r\n\r\n            if ( p === AlphaFormat ) return gl.ALPHA;\r\n            if ( p === RGBFormat ) return gl.RGB;\r\n            if ( p === RGBAFormat ) return gl.RGBA;\r\n            if ( p === LuminanceFormat ) return gl.LUMINANCE;\r\n            if ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\r\n            if ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\r\n            if ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\r\n\r\n            if ( p === AddEquation ) return gl.FUNC_ADD;\r\n            if ( p === SubtractEquation ) return gl.FUNC_SUBTRACT;\r\n            if ( p === ReverseSubtractEquation ) return gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n            if ( p === ZeroFactor ) return gl.ZERO;\r\n            if ( p === OneFactor ) return gl.ONE;\r\n            if ( p === SrcColorFactor ) return gl.SRC_COLOR;\r\n            if ( p === OneMinusSrcColorFactor ) return gl.ONE_MINUS_SRC_COLOR;\r\n            if ( p === SrcAlphaFactor ) return gl.SRC_ALPHA;\r\n            if ( p === OneMinusSrcAlphaFactor ) return gl.ONE_MINUS_SRC_ALPHA;\r\n            if ( p === DstAlphaFactor ) return gl.DST_ALPHA;\r\n            if ( p === OneMinusDstAlphaFactor ) return gl.ONE_MINUS_DST_ALPHA;\r\n\r\n            if ( p === DstColorFactor ) return gl.DST_COLOR;\r\n            if ( p === OneMinusDstColorFactor ) return gl.ONE_MINUS_DST_COLOR;\r\n            if ( p === SrcAlphaSaturateFactor ) return gl.SRC_ALPHA_SATURATE;\r\n\r\n            if ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\r\n                p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    if ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n                    if ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n                    if ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n                    if ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\r\n                p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    if ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n                    if ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n                    if ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n                    if ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === RGB_ETC1_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_etc1' );\r\n\r\n                if ( extension !== null ) return extension.COMPRESSED_RGB_ETC1_WEBGL;\r\n\r\n            }\r\n\r\n            if ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\r\n                p === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\r\n                p === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\r\n                p === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\r\n                p === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\r\n\r\n                extension = extensions.get( 'WEBGL_compressed_texture_astc' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    return p;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === MinEquation || p === MaxEquation ) {\r\n\r\n                extension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n                if ( extension !== null ) {\r\n\r\n                    if ( p === MinEquation ) return extension.MIN_EXT;\r\n                    if ( p === MaxEquation ) return extension.MAX_EXT;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( p === UnsignedInt248Type ) {\r\n\r\n                extension = extensions.get( 'WEBGL_depth_texture' );\r\n\r\n                if ( extension !== null ) return extension.UNSIGNED_INT_24_8_WEBGL;\r\n\r\n            }\r\n\r\n            return 0;\r\n\r\n        }\r\n\r\n        return { convert: convert };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author greggman / http://games.greggman.com/\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author tschw\r\n     */\r\n\r\n    function PerspectiveCamera( fov, aspect, near, far ) {\r\n\r\n        Camera.call( this );\r\n\r\n        this.type = 'PerspectiveCamera';\r\n\r\n        this.fov = fov !== undefined ? fov : 50;\r\n        this.zoom = 1;\r\n\r\n        this.near = near !== undefined ? near : 0.1;\r\n        this.far = far !== undefined ? far : 2000;\r\n        this.focus = 10;\r\n\r\n        this.aspect = aspect !== undefined ? aspect : 1;\r\n        this.view = null;\r\n\r\n        this.filmGauge = 35;\t// width of the film (default in millimeters)\r\n        this.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\r\n\r\n        this.updateProjectionMatrix();\r\n\r\n    }\r\n\r\n    PerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\r\n\r\n        constructor: PerspectiveCamera,\r\n\r\n        isPerspectiveCamera: true,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Camera.prototype.copy.call( this, source, recursive );\r\n\r\n            this.fov = source.fov;\r\n            this.zoom = source.zoom;\r\n\r\n            this.near = source.near;\r\n            this.far = source.far;\r\n            this.focus = source.focus;\r\n\r\n            this.aspect = source.aspect;\r\n            this.view = source.view === null ? null : Object.assign( {}, source.view );\r\n\r\n            this.filmGauge = source.filmGauge;\r\n            this.filmOffset = source.filmOffset;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        /**\r\n         * Sets the FOV by focal length in respect to the current .filmGauge.\r\n         *\r\n         * The default film gauge is 35, so that the focal length can be specified for\r\n         * a 35mm (full frame) camera.\r\n         *\r\n         * Values for focal length and film gauge must have the same unit.\r\n         */\r\n        setFocalLength: function ( focalLength ) {\r\n\r\n            // see http://www.bobatkins.com/photography/technical/field_of_view.html\r\n            var vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\r\n\r\n            this.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        /**\r\n         * Calculates the focal length from the current .fov and .filmGauge.\r\n         */\r\n        getFocalLength: function () {\r\n\r\n            var vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\r\n\r\n            return 0.5 * this.getFilmHeight() / vExtentSlope;\r\n\r\n        },\r\n\r\n        getEffectiveFOV: function () {\r\n\r\n            return _Math.RAD2DEG * 2 * Math.atan(\r\n                Math.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\r\n\r\n        },\r\n\r\n        getFilmWidth: function () {\r\n\r\n            // film not completely covered in portrait format (aspect < 1)\r\n            return this.filmGauge * Math.min( this.aspect, 1 );\r\n\r\n        },\r\n\r\n        getFilmHeight: function () {\r\n\r\n            // film not completely covered in landscape format (aspect > 1)\r\n            return this.filmGauge / Math.max( this.aspect, 1 );\r\n\r\n        },\r\n\r\n        /**\r\n         * Sets an offset in a larger frustum. This is useful for multi-window or\r\n         * multi-monitor/multi-machine setups.\r\n         *\r\n         * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n         * the monitors are in grid like this\r\n         *\r\n         *   +---+---+---+\r\n         *   | A | B | C |\r\n         *   +---+---+---+\r\n         *   | D | E | F |\r\n         *   +---+---+---+\r\n         *\r\n         * then for each monitor you would call it like this\r\n         *\r\n         *   var w = 1920;\r\n         *   var h = 1080;\r\n         *   var fullWidth = w * 3;\r\n         *   var fullHeight = h * 2;\r\n         *\r\n         *   --A--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n         *   --B--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n         *   --C--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n         *   --D--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n         *   --E--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n         *   --F--\r\n         *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n         *\r\n         *   Note there is no reason monitors have to be the same size or in a grid.\r\n         */\r\n        setViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n            this.aspect = fullWidth / fullHeight;\r\n\r\n            if ( this.view === null ) {\r\n\r\n                this.view = {\r\n                    enabled: true,\r\n                    fullWidth: 1,\r\n                    fullHeight: 1,\r\n                    offsetX: 0,\r\n                    offsetY: 0,\r\n                    width: 1,\r\n                    height: 1\r\n                };\r\n\r\n            }\r\n\r\n            this.view.enabled = true;\r\n            this.view.fullWidth = fullWidth;\r\n            this.view.fullHeight = fullHeight;\r\n            this.view.offsetX = x;\r\n            this.view.offsetY = y;\r\n            this.view.width = width;\r\n            this.view.height = height;\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        clearViewOffset: function () {\r\n\r\n            if ( this.view !== null ) {\r\n\r\n                this.view.enabled = false;\r\n\r\n            }\r\n\r\n            this.updateProjectionMatrix();\r\n\r\n        },\r\n\r\n        updateProjectionMatrix: function () {\r\n\r\n            var near = this.near,\r\n                top = near * Math.tan(\r\n                    _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\r\n                height = 2 * top,\r\n                width = this.aspect * height,\r\n                left = - 0.5 * width,\r\n                view = this.view;\r\n\r\n            if ( this.view !== null && this.view.enabled ) {\r\n\r\n                var fullWidth = view.fullWidth,\r\n                    fullHeight = view.fullHeight;\r\n\r\n                left += view.offsetX * width / fullWidth;\r\n                top -= view.offsetY * height / fullHeight;\r\n                width *= view.width / fullWidth;\r\n                height *= view.height / fullHeight;\r\n\r\n            }\r\n\r\n            var skew = this.filmOffset;\r\n            if ( skew !== 0 ) left += near * skew / this.getFilmWidth();\r\n\r\n            this.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.fov = this.fov;\r\n            data.object.zoom = this.zoom;\r\n\r\n            data.object.near = this.near;\r\n            data.object.far = this.far;\r\n            data.object.focus = this.focus;\r\n\r\n            data.object.aspect = this.aspect;\r\n\r\n            if ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\r\n\r\n            data.object.filmGauge = this.filmGauge;\r\n            data.object.filmOffset = this.filmOffset;\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function ArrayCamera( array ) {\r\n\r\n        PerspectiveCamera.call( this );\r\n\r\n        this.cameras = array || [];\r\n\r\n    }\r\n\r\n    ArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\r\n\r\n        constructor: ArrayCamera,\r\n\r\n        isArrayCamera: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebVRManager( renderer ) {\r\n\r\n        var scope = this;\r\n\r\n        var device = null;\r\n        var frameData = null;\r\n\r\n        var poseTarget = null;\r\n\r\n        var standingMatrix = new Matrix4();\r\n        var standingMatrixInverse = new Matrix4();\r\n\r\n        if ( typeof window !== 'undefined' && 'VRFrameData' in window ) {\r\n\r\n            frameData = new window.VRFrameData();\r\n            window.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\r\n\r\n        }\r\n\r\n        var matrixWorldInverse = new Matrix4();\r\n        var tempQuaternion = new Quaternion();\r\n        var tempPosition = new Vector3();\r\n\r\n        var cameraL = new PerspectiveCamera();\r\n        cameraL.bounds = new Vector4( 0.0, 0.0, 0.5, 1.0 );\r\n        cameraL.layers.enable( 1 );\r\n\r\n        var cameraR = new PerspectiveCamera();\r\n        cameraR.bounds = new Vector4( 0.5, 0.0, 0.5, 1.0 );\r\n        cameraR.layers.enable( 2 );\r\n\r\n        var cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\r\n        cameraVR.layers.enable( 1 );\r\n        cameraVR.layers.enable( 2 );\r\n\r\n        //\r\n\r\n        function isPresenting() {\r\n\r\n            return device !== null && device.isPresenting === true;\r\n\r\n        }\r\n\r\n        var currentSize, currentPixelRatio;\r\n\r\n        function onVRDisplayPresentChange() {\r\n\r\n            if ( isPresenting() ) {\r\n\r\n                var eyeParameters = device.getEyeParameters( 'left' );\r\n                var renderWidth = eyeParameters.renderWidth;\r\n                var renderHeight = eyeParameters.renderHeight;\r\n\r\n                currentPixelRatio = renderer.getPixelRatio();\r\n                currentSize = renderer.getSize();\r\n\r\n                renderer.setDrawingBufferSize( renderWidth * 2, renderHeight, 1 );\r\n\r\n                animation.start();\r\n\r\n            } else if ( scope.enabled ) {\r\n\r\n                renderer.setDrawingBufferSize( currentSize.width, currentSize.height, currentPixelRatio );\r\n\r\n                animation.stop();\r\n\r\n            }\r\n\r\n        }\r\n\r\n        //\r\n\r\n        this.enabled = false;\r\n        this.userHeight = 1.6;\r\n\r\n        this.getDevice = function () {\r\n\r\n            return device;\r\n\r\n        };\r\n\r\n        this.setDevice = function ( value ) {\r\n\r\n            if ( value !== undefined ) device = value;\r\n\r\n            animation.setContext( value );\r\n\r\n        };\r\n\r\n        this.setPoseTarget = function ( object ) {\r\n\r\n            if ( object !== undefined ) poseTarget = object;\r\n\r\n        };\r\n\r\n        this.getCamera = function ( camera ) {\r\n\r\n            if ( device === null ) return camera;\r\n\r\n            device.depthNear = camera.near;\r\n            device.depthFar = camera.far;\r\n\r\n            device.getFrameData( frameData );\r\n\r\n            //\r\n\r\n            var stageParameters = device.stageParameters;\r\n\r\n            if ( stageParameters ) {\r\n\r\n                standingMatrix.fromArray( stageParameters.sittingToStandingTransform );\r\n\r\n            } else {\r\n\r\n                standingMatrix.makeTranslation( 0, scope.userHeight, 0 );\r\n\r\n            }\r\n\r\n\r\n            var pose = frameData.pose;\r\n            var poseObject = poseTarget !== null ? poseTarget : camera;\r\n\r\n            // We want to manipulate poseObject by its position and quaternion components since users may rely on them.\r\n            poseObject.matrix.copy( standingMatrix );\r\n            poseObject.matrix.decompose( poseObject.position, poseObject.quaternion, poseObject.scale );\r\n\r\n            if ( pose.orientation !== null ) {\r\n\r\n                tempQuaternion.fromArray( pose.orientation );\r\n                poseObject.quaternion.multiply( tempQuaternion );\r\n\r\n            }\r\n\r\n            if ( pose.position !== null ) {\r\n\r\n                tempQuaternion.setFromRotationMatrix( standingMatrix );\r\n                tempPosition.fromArray( pose.position );\r\n                tempPosition.applyQuaternion( tempQuaternion );\r\n                poseObject.position.add( tempPosition );\r\n\r\n            }\r\n\r\n            poseObject.updateMatrixWorld();\r\n\r\n            if ( device.isPresenting === false ) return camera;\r\n\r\n            //\r\n\r\n            cameraL.near = camera.near;\r\n            cameraR.near = camera.near;\r\n\r\n            cameraL.far = camera.far;\r\n            cameraR.far = camera.far;\r\n\r\n            cameraVR.matrixWorld.copy( camera.matrixWorld );\r\n            cameraVR.matrixWorldInverse.copy( camera.matrixWorldInverse );\r\n\r\n            cameraL.matrixWorldInverse.fromArray( frameData.leftViewMatrix );\r\n            cameraR.matrixWorldInverse.fromArray( frameData.rightViewMatrix );\r\n\r\n            // TODO (mrdoob) Double check this code\r\n\r\n            standingMatrixInverse.getInverse( standingMatrix );\r\n\r\n            cameraL.matrixWorldInverse.multiply( standingMatrixInverse );\r\n            cameraR.matrixWorldInverse.multiply( standingMatrixInverse );\r\n\r\n            var parent = poseObject.parent;\r\n\r\n            if ( parent !== null ) {\r\n\r\n                matrixWorldInverse.getInverse( parent.matrixWorld );\r\n\r\n                cameraL.matrixWorldInverse.multiply( matrixWorldInverse );\r\n                cameraR.matrixWorldInverse.multiply( matrixWorldInverse );\r\n\r\n            }\r\n\r\n            // envMap and Mirror needs camera.matrixWorld\r\n\r\n            cameraL.matrixWorld.getInverse( cameraL.matrixWorldInverse );\r\n            cameraR.matrixWorld.getInverse( cameraR.matrixWorldInverse );\r\n\r\n            cameraL.projectionMatrix.fromArray( frameData.leftProjectionMatrix );\r\n            cameraR.projectionMatrix.fromArray( frameData.rightProjectionMatrix );\r\n\r\n            // HACK (mrdoob)\r\n            // https://github.com/w3c/webvr/issues/203\r\n\r\n            cameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\r\n\r\n            //\r\n\r\n            var layers = device.getLayers();\r\n\r\n            if ( layers.length ) {\r\n\r\n                var layer = layers[ 0 ];\r\n\r\n                if ( layer.leftBounds !== null && layer.leftBounds.length === 4 ) {\r\n\r\n                    cameraL.bounds.fromArray( layer.leftBounds );\r\n\r\n                }\r\n\r\n                if ( layer.rightBounds !== null && layer.rightBounds.length === 4 ) {\r\n\r\n                    cameraR.bounds.fromArray( layer.rightBounds );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return cameraVR;\r\n\r\n        };\r\n\r\n        this.getStandingMatrix = function () {\r\n\r\n            return standingMatrix;\r\n\r\n        };\r\n\r\n        this.isPresenting = isPresenting;\r\n\r\n        // Animation Loop\r\n\r\n        var animation = new WebGLAnimation();\r\n\r\n        this.setAnimationLoop = function ( callback ) {\r\n\r\n            animation.setAnimationLoop( callback );\r\n\r\n        };\r\n\r\n        this.submitFrame = function () {\r\n\r\n            if ( isPresenting() ) device.submitFrame();\r\n\r\n        };\r\n\r\n        this.dispose = function () {\r\n\r\n            if ( typeof window !== 'undefined' ) {\r\n\r\n                window.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function WebXRManager( renderer ) {\r\n\r\n        var gl = renderer.context;\r\n\r\n        var device = null;\r\n        var session = null;\r\n\r\n        var frameOfRef = null;\r\n\r\n        var pose = null;\r\n\r\n        function isPresenting() {\r\n\r\n            return session !== null && frameOfRef !== null;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var cameraL = new PerspectiveCamera();\r\n        cameraL.layers.enable( 1 );\r\n        cameraL.viewport = new Vector4();\r\n\r\n        var cameraR = new PerspectiveCamera();\r\n        cameraR.layers.enable( 2 );\r\n        cameraR.viewport = new Vector4();\r\n\r\n        var cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\r\n        cameraVR.layers.enable( 1 );\r\n        cameraVR.layers.enable( 2 );\r\n\r\n        //\r\n\r\n        this.enabled = false;\r\n\r\n        this.getDevice = function () {\r\n\r\n            return device;\r\n\r\n        };\r\n\r\n        this.setDevice = function ( value ) {\r\n\r\n            if ( value !== undefined ) device = value;\r\n\r\n            gl.setCompatibleXRDevice( value );\r\n\r\n        };\r\n\r\n        //\r\n\r\n        this.setSession = function ( value, options ) {\r\n\r\n            session = value;\r\n\r\n            if ( session !== null ) {\r\n\r\n                session.addEventListener( 'end', function () {\r\n\r\n                    renderer.setFramebuffer( null );\r\n                    animation.stop();\r\n\r\n                } );\r\n\r\n                session.baseLayer = new XRWebGLLayer( session, gl );\r\n                session.requestFrameOfReference( options.frameOfReferenceType ).then( function ( value ) {\r\n\r\n                    frameOfRef = value;\r\n\r\n                    renderer.setFramebuffer( session.baseLayer.framebuffer );\r\n\r\n                    animation.setContext( session );\r\n                    animation.start();\r\n\r\n                } );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        function updateCamera( camera, parent ) {\r\n\r\n            if ( parent === null ) {\r\n\r\n                camera.matrixWorld.copy( camera.matrix );\r\n\r\n            } else {\r\n\r\n                camera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\r\n\r\n            }\r\n\r\n            camera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n        }\r\n\r\n        this.getCamera = function ( camera ) {\r\n\r\n            if ( isPresenting() ) {\r\n\r\n                var parent = camera.parent;\r\n                var cameras = cameraVR.cameras;\r\n\r\n                // apply camera.parent to cameraVR\r\n\r\n                updateCamera( cameraVR, parent );\r\n\r\n                for ( var i = 0; i < cameras.length; i ++ ) {\r\n\r\n                    updateCamera( cameras[ i ], parent );\r\n\r\n                }\r\n\r\n                // update camera and its children\r\n\r\n                camera.matrixWorld.copy( cameraVR.matrixWorld );\r\n\r\n                var children = camera.children;\r\n\r\n                for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                    children[ i ].updateMatrixWorld( true );\r\n\r\n                }\r\n\r\n                return cameraVR;\r\n\r\n            }\r\n\r\n            return camera;\r\n\r\n        };\r\n\r\n        this.isPresenting = isPresenting;\r\n\r\n        // Animation Loop\r\n\r\n        var onAnimationFrameCallback = null;\r\n\r\n        function onAnimationFrame( time, frame ) {\r\n\r\n            pose = frame.getDevicePose( frameOfRef );\r\n\r\n            var layer = session.baseLayer;\r\n            var views = frame.views;\r\n\r\n            for ( var i = 0; i < views.length; i ++ ) {\r\n\r\n                var view = views[ i ];\r\n                var viewport = layer.getViewport( view );\r\n                var viewMatrix = pose.getViewMatrix( view );\r\n\r\n                var camera = cameraVR.cameras[ i ];\r\n                camera.matrix.fromArray( viewMatrix ).getInverse( camera.matrix );\r\n                camera.projectionMatrix.fromArray( view.projectionMatrix );\r\n                camera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\r\n\r\n                if ( i === 0 ) {\r\n\r\n                    cameraVR.matrix.copy( camera.matrix );\r\n\r\n                    // HACK (mrdoob)\r\n                    // https://github.com/w3c/webvr/issues/203\r\n\r\n                    cameraVR.projectionMatrix.copy( camera.projectionMatrix );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( onAnimationFrameCallback ) onAnimationFrameCallback();\r\n\r\n        }\r\n\r\n        var animation = new WebGLAnimation();\r\n        animation.setAnimationLoop( onAnimationFrame );\r\n\r\n        this.setAnimationLoop = function ( callback ) {\r\n\r\n            onAnimationFrameCallback = callback;\r\n\r\n        };\r\n\r\n        // DEPRECATED\r\n\r\n        this.getStandingMatrix = function () {\r\n\r\n            console.warn( 'THREE.WebXRManager: getStandingMatrix() is no longer needed.' );\r\n            return new THREE.Matrix4();\r\n\r\n        };\r\n\r\n        this.submitFrame = function () {};\r\n\r\n    }\r\n\r\n    /**\r\n     * @author supereggbert / http://www.paulbrunt.co.uk/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author szimek / https://github.com/szimek/\r\n     * @author tschw\r\n     */\r\n\r\n    function WebGLRenderer( parameters ) {\r\n\r\n        console.log( 'THREE.WebGLRenderer', REVISION );\r\n\r\n        parameters = parameters || {};\r\n\r\n        var _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\r\n            _context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n            _alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n            _depth = parameters.depth !== undefined ? parameters.depth : true,\r\n            _stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n            _antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n            _premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n            _preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n            _powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default';\r\n\r\n        var currentRenderList = null;\r\n        var currentRenderState = null;\r\n\r\n        // public properties\r\n\r\n        this.domElement = _canvas;\r\n        this.context = null;\r\n\r\n        // clearing\r\n\r\n        this.autoClear = true;\r\n        this.autoClearColor = true;\r\n        this.autoClearDepth = true;\r\n        this.autoClearStencil = true;\r\n\r\n        // scene graph\r\n\r\n        this.sortObjects = true;\r\n\r\n        // user-defined clipping\r\n\r\n        this.clippingPlanes = [];\r\n        this.localClippingEnabled = false;\r\n\r\n        // physically based shading\r\n\r\n        this.gammaFactor = 2.0;\t// for backwards compatibility\r\n        this.gammaInput = false;\r\n        this.gammaOutput = false;\r\n\r\n        // physical lights\r\n\r\n        this.physicallyCorrectLights = false;\r\n\r\n        // tone mapping\r\n\r\n        this.toneMapping = LinearToneMapping;\r\n        this.toneMappingExposure = 1.0;\r\n        this.toneMappingWhitePoint = 1.0;\r\n\r\n        // morphs\r\n\r\n        this.maxMorphTargets = 8;\r\n        this.maxMorphNormals = 4;\r\n\r\n        // internal properties\r\n\r\n        var _this = this,\r\n\r\n            _isContextLost = false,\r\n\r\n            // internal state cache\r\n\r\n            _framebuffer = null,\r\n\r\n            _currentRenderTarget = null,\r\n            _currentFramebuffer = null,\r\n            _currentMaterialId = - 1,\r\n            _currentGeometryProgram = '',\r\n\r\n            _currentCamera = null,\r\n            _currentArrayCamera = null,\r\n\r\n            _currentViewport = new Vector4(),\r\n            _currentScissor = new Vector4(),\r\n            _currentScissorTest = null,\r\n\r\n            //\r\n\r\n            _usedTextureUnits = 0,\r\n\r\n            //\r\n\r\n            _width = _canvas.width,\r\n            _height = _canvas.height,\r\n\r\n            _pixelRatio = 1,\r\n\r\n            _viewport = new Vector4( 0, 0, _width, _height ),\r\n            _scissor = new Vector4( 0, 0, _width, _height ),\r\n            _scissorTest = false,\r\n\r\n            // frustum\r\n\r\n            _frustum = new Frustum(),\r\n\r\n            // clipping\r\n\r\n            _clipping = new WebGLClipping(),\r\n            _clippingEnabled = false,\r\n            _localClippingEnabled = false,\r\n\r\n            // camera matrices cache\r\n\r\n            _projScreenMatrix = new Matrix4(),\r\n\r\n            _vector3 = new Vector3();\r\n\r\n        function getTargetPixelRatio() {\r\n\r\n            return _currentRenderTarget === null ? _pixelRatio : 1;\r\n\r\n        }\r\n\r\n        // initialize\r\n\r\n        var _gl;\r\n\r\n        try {\r\n\r\n            var contextAttributes = {\r\n                alpha: _alpha,\r\n                depth: _depth,\r\n                stencil: _stencil,\r\n                antialias: _antialias,\r\n                premultipliedAlpha: _premultipliedAlpha,\r\n                preserveDrawingBuffer: _preserveDrawingBuffer,\r\n                powerPreference: _powerPreference\r\n            };\r\n\r\n            // event listeners must be registered before WebGL context is created, see #12753\r\n\r\n            _canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n            _canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n            _gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\r\n\r\n            if ( _gl === null ) {\r\n\r\n                if ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n                    throw new Error( 'Error creating WebGL context with your selected attributes.' );\r\n\r\n                } else {\r\n\r\n                    throw new Error( 'Error creating WebGL context.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Some experimental-webgl implementations do not have getShaderPrecisionFormat\r\n\r\n            if ( _gl.getShaderPrecisionFormat === undefined ) {\r\n\r\n                _gl.getShaderPrecisionFormat = function () {\r\n\r\n                    return { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\r\n\r\n                };\r\n\r\n            }\r\n\r\n        } catch ( error ) {\r\n\r\n            console.error( 'THREE.WebGLRenderer: ' + error.message );\r\n\r\n        }\r\n\r\n        var extensions, capabilities, state, info;\r\n        var properties, textures, attributes, geometries, objects;\r\n        var programCache, renderLists, renderStates;\r\n\r\n        var background, morphtargets, bufferRenderer, indexedBufferRenderer;\r\n        var spriteRenderer;\r\n\r\n        var utils;\r\n\r\n        function initGLContext() {\r\n\r\n            extensions = new WebGLExtensions( _gl );\r\n            extensions.get( 'WEBGL_depth_texture' );\r\n            extensions.get( 'OES_texture_float' );\r\n            extensions.get( 'OES_texture_float_linear' );\r\n            extensions.get( 'OES_texture_half_float' );\r\n            extensions.get( 'OES_texture_half_float_linear' );\r\n            extensions.get( 'OES_standard_derivatives' );\r\n            extensions.get( 'OES_element_index_uint' );\r\n            extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n            utils = new WebGLUtils( _gl, extensions );\r\n\r\n            capabilities = new WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n            state = new WebGLState( _gl, extensions, utils );\r\n            state.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n            state.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n            info = new WebGLInfo( _gl );\r\n            properties = new WebGLProperties();\r\n            textures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\r\n            attributes = new WebGLAttributes( _gl );\r\n            geometries = new WebGLGeometries( _gl, attributes, info );\r\n            objects = new WebGLObjects( geometries, info );\r\n            morphtargets = new WebGLMorphtargets( _gl );\r\n            programCache = new WebGLPrograms( _this, extensions, capabilities );\r\n            renderLists = new WebGLRenderLists();\r\n            renderStates = new WebGLRenderStates();\r\n\r\n            background = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\r\n\r\n            bufferRenderer = new WebGLBufferRenderer( _gl, extensions, info );\r\n            indexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info );\r\n\r\n            spriteRenderer = new WebGLSpriteRenderer( _this, _gl, state, textures, capabilities );\r\n\r\n            info.programs = programCache.programs;\r\n\r\n            _this.context = _gl;\r\n            _this.capabilities = capabilities;\r\n            _this.extensions = extensions;\r\n            _this.properties = properties;\r\n            _this.renderLists = renderLists;\r\n            _this.state = state;\r\n            _this.info = info;\r\n\r\n        }\r\n\r\n        initGLContext();\r\n\r\n        // vr\r\n\r\n        var vr = ( 'xr' in navigator ) ? new WebXRManager( _this ) : new WebVRManager( _this );\r\n\r\n        this.vr = vr;\r\n\r\n        // shadow map\r\n\r\n        var shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\r\n\r\n        this.shadowMap = shadowMap;\r\n\r\n        // API\r\n\r\n        this.getContext = function () {\r\n\r\n            return _gl;\r\n\r\n        };\r\n\r\n        this.getContextAttributes = function () {\r\n\r\n            return _gl.getContextAttributes();\r\n\r\n        };\r\n\r\n        this.forceContextLoss = function () {\r\n\r\n            var extension = extensions.get( 'WEBGL_lose_context' );\r\n            if ( extension ) extension.loseContext();\r\n\r\n        };\r\n\r\n        this.forceContextRestore = function () {\r\n\r\n            var extension = extensions.get( 'WEBGL_lose_context' );\r\n            if ( extension ) extension.restoreContext();\r\n\r\n        };\r\n\r\n        this.getPixelRatio = function () {\r\n\r\n            return _pixelRatio;\r\n\r\n        };\r\n\r\n        this.setPixelRatio = function ( value ) {\r\n\r\n            if ( value === undefined ) return;\r\n\r\n            _pixelRatio = value;\r\n\r\n            this.setSize( _width, _height, false );\r\n\r\n        };\r\n\r\n        this.getSize = function () {\r\n\r\n            return {\r\n                width: _width,\r\n                height: _height\r\n            };\r\n\r\n        };\r\n\r\n        this.setSize = function ( width, height, updateStyle ) {\r\n\r\n            if ( vr.isPresenting() ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\r\n                return;\r\n\r\n            }\r\n\r\n            _width = width;\r\n            _height = height;\r\n\r\n            _canvas.width = width * _pixelRatio;\r\n            _canvas.height = height * _pixelRatio;\r\n\r\n            if ( updateStyle !== false ) {\r\n\r\n                _canvas.style.width = width + 'px';\r\n                _canvas.style.height = height + 'px';\r\n\r\n            }\r\n\r\n            this.setViewport( 0, 0, width, height );\r\n\r\n        };\r\n\r\n        this.getDrawingBufferSize = function () {\r\n\r\n            return {\r\n                width: _width * _pixelRatio,\r\n                height: _height * _pixelRatio\r\n            };\r\n\r\n        };\r\n\r\n        this.setDrawingBufferSize = function ( width, height, pixelRatio ) {\r\n\r\n            _width = width;\r\n            _height = height;\r\n\r\n            _pixelRatio = pixelRatio;\r\n\r\n            _canvas.width = width * pixelRatio;\r\n            _canvas.height = height * pixelRatio;\r\n\r\n            this.setViewport( 0, 0, width, height );\r\n\r\n        };\r\n\r\n        this.getCurrentViewport = function () {\r\n\r\n            return _currentViewport;\r\n\r\n        };\r\n\r\n        this.setViewport = function ( x, y, width, height ) {\r\n\r\n            _viewport.set( x, _height - y - height, width, height );\r\n            state.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ) );\r\n\r\n        };\r\n\r\n        this.setScissor = function ( x, y, width, height ) {\r\n\r\n            _scissor.set( x, _height - y - height, width, height );\r\n            state.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ) );\r\n\r\n        };\r\n\r\n        this.setScissorTest = function ( boolean ) {\r\n\r\n            state.setScissorTest( _scissorTest = boolean );\r\n\r\n        };\r\n\r\n        // Clearing\r\n\r\n        this.getClearColor = function () {\r\n\r\n            return background.getClearColor();\r\n\r\n        };\r\n\r\n        this.setClearColor = function () {\r\n\r\n            background.setClearColor.apply( background, arguments );\r\n\r\n        };\r\n\r\n        this.getClearAlpha = function () {\r\n\r\n            return background.getClearAlpha();\r\n\r\n        };\r\n\r\n        this.setClearAlpha = function () {\r\n\r\n            background.setClearAlpha.apply( background, arguments );\r\n\r\n        };\r\n\r\n        this.clear = function ( color, depth, stencil ) {\r\n\r\n            var bits = 0;\r\n\r\n            if ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n            if ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n            if ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n            _gl.clear( bits );\r\n\r\n        };\r\n\r\n        this.clearColor = function () {\r\n\r\n            this.clear( true, false, false );\r\n\r\n        };\r\n\r\n        this.clearDepth = function () {\r\n\r\n            this.clear( false, true, false );\r\n\r\n        };\r\n\r\n        this.clearStencil = function () {\r\n\r\n            this.clear( false, false, true );\r\n\r\n        };\r\n\r\n        this.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n            this.setRenderTarget( renderTarget );\r\n            this.clear( color, depth, stencil );\r\n\r\n        };\r\n\r\n        //\r\n\r\n        this.dispose = function () {\r\n\r\n            _canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n            _canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\r\n\r\n            renderLists.dispose();\r\n            renderStates.dispose();\r\n            properties.dispose();\r\n            objects.dispose();\r\n\r\n            vr.dispose();\r\n\r\n            animation.stop();\r\n\r\n        };\r\n\r\n        // Events\r\n\r\n        function onContextLost( event ) {\r\n\r\n            event.preventDefault();\r\n\r\n            console.log( 'THREE.WebGLRenderer: Context Lost.' );\r\n\r\n            _isContextLost = true;\r\n\r\n        }\r\n\r\n        function onContextRestore( /* event */ ) {\r\n\r\n            console.log( 'THREE.WebGLRenderer: Context Restored.' );\r\n\r\n            _isContextLost = false;\r\n\r\n            initGLContext();\r\n\r\n        }\r\n\r\n        function onMaterialDispose( event ) {\r\n\r\n            var material = event.target;\r\n\r\n            material.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n            deallocateMaterial( material );\r\n\r\n        }\r\n\r\n        // Buffer deallocation\r\n\r\n        function deallocateMaterial( material ) {\r\n\r\n            releaseMaterialProgramReference( material );\r\n\r\n            properties.remove( material );\r\n\r\n        }\r\n\r\n\r\n        function releaseMaterialProgramReference( material ) {\r\n\r\n            var programInfo = properties.get( material ).program;\r\n\r\n            material.program = undefined;\r\n\r\n            if ( programInfo !== undefined ) {\r\n\r\n                programCache.releaseProgram( programInfo );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Buffer rendering\r\n\r\n        function renderObjectImmediate( object, program, material ) {\r\n\r\n            object.render( function ( object ) {\r\n\r\n                _this.renderBufferImmediate( object, program, material );\r\n\r\n            } );\r\n\r\n        }\r\n\r\n        this.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n            state.initAttributes();\r\n\r\n            var buffers = properties.get( object );\r\n\r\n            if ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n            if ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n            if ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n            if ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n            var programAttributes = program.getAttributes();\r\n\r\n            if ( object.hasPositions ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.position );\r\n                _gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( object.hasNormals ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n                if ( ! material.isMeshPhongMaterial &&\r\n                    ! material.isMeshStandardMaterial &&\r\n                    ! material.isMeshNormalMaterial &&\r\n                    material.flatShading === true ) {\r\n\r\n                    for ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n                        var array = object.normalArray;\r\n\r\n                        var nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n                        var ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n                        var nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n                        array[ i + 0 ] = nx;\r\n                        array[ i + 1 ] = ny;\r\n                        array[ i + 2 ] = nz;\r\n\r\n                        array[ i + 3 ] = nx;\r\n                        array[ i + 4 ] = ny;\r\n                        array[ i + 5 ] = nz;\r\n\r\n                        array[ i + 6 ] = nx;\r\n                        array[ i + 7 ] = ny;\r\n                        array[ i + 8 ] = nz;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.normal );\r\n\r\n                _gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( object.hasUvs && material.map ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.uv );\r\n\r\n                _gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( object.hasColors && material.vertexColors !== NoColors ) {\r\n\r\n                _gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n                _gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n                state.enableAttribute( programAttributes.color );\r\n\r\n                _gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n            }\r\n\r\n            state.disableUnusedAttributes();\r\n\r\n            _gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n            object.count = 0;\r\n\r\n        };\r\n\r\n        this.renderBufferDirect = function ( camera, fog, geometry, material, object, group ) {\r\n\r\n            var frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\r\n\r\n            state.setMaterial( material, frontFaceCW );\r\n\r\n            var program = setProgram( camera, fog, material, object );\r\n            var geometryProgram = geometry.id + '_' + program.id + '_' + ( material.wireframe === true );\r\n\r\n            var updateBuffers = false;\r\n\r\n            if ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n                _currentGeometryProgram = geometryProgram;\r\n                updateBuffers = true;\r\n\r\n            }\r\n\r\n            if ( object.morphTargetInfluences ) {\r\n\r\n                morphtargets.update( object, geometry, material, program );\r\n\r\n                updateBuffers = true;\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var index = geometry.index;\r\n            var position = geometry.attributes.position;\r\n            var rangeFactor = 1;\r\n\r\n            if ( material.wireframe === true ) {\r\n\r\n                index = geometries.getWireframeAttribute( geometry );\r\n                rangeFactor = 2;\r\n\r\n            }\r\n\r\n            var attribute;\r\n            var renderer = bufferRenderer;\r\n\r\n            if ( index !== null ) {\r\n\r\n                attribute = attributes.get( index );\r\n\r\n                renderer = indexedBufferRenderer;\r\n                renderer.setIndex( attribute );\r\n\r\n            }\r\n\r\n            if ( updateBuffers ) {\r\n\r\n                setupVertexAttributes( material, program, geometry );\r\n\r\n                if ( index !== null ) {\r\n\r\n                    _gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var dataCount = Infinity;\r\n\r\n            if ( index !== null ) {\r\n\r\n                dataCount = index.count;\r\n\r\n            } else if ( position !== undefined ) {\r\n\r\n                dataCount = position.count;\r\n\r\n            }\r\n\r\n            var rangeStart = geometry.drawRange.start * rangeFactor;\r\n            var rangeCount = geometry.drawRange.count * rangeFactor;\r\n\r\n            var groupStart = group !== null ? group.start * rangeFactor : 0;\r\n            var groupCount = group !== null ? group.count * rangeFactor : Infinity;\r\n\r\n            var drawStart = Math.max( rangeStart, groupStart );\r\n            var drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\r\n\r\n            var drawCount = Math.max( 0, drawEnd - drawStart + 1 );\r\n\r\n            if ( drawCount === 0 ) return;\r\n\r\n            //\r\n\r\n            if ( object.isMesh ) {\r\n\r\n                if ( material.wireframe === true ) {\r\n\r\n                    state.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\r\n                    renderer.setMode( _gl.LINES );\r\n\r\n                } else {\r\n\r\n                    switch ( object.drawMode ) {\r\n\r\n                        case TrianglesDrawMode:\r\n                            renderer.setMode( _gl.TRIANGLES );\r\n                            break;\r\n\r\n                        case TriangleStripDrawMode:\r\n                            renderer.setMode( _gl.TRIANGLE_STRIP );\r\n                            break;\r\n\r\n                        case TriangleFanDrawMode:\r\n                            renderer.setMode( _gl.TRIANGLE_FAN );\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n\r\n            } else if ( object.isLine ) {\r\n\r\n                var lineWidth = material.linewidth;\r\n\r\n                if ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n                state.setLineWidth( lineWidth * getTargetPixelRatio() );\r\n\r\n                if ( object.isLineSegments ) {\r\n\r\n                    renderer.setMode( _gl.LINES );\r\n\r\n                } else if ( object.isLineLoop ) {\r\n\r\n                    renderer.setMode( _gl.LINE_LOOP );\r\n\r\n                } else {\r\n\r\n                    renderer.setMode( _gl.LINE_STRIP );\r\n\r\n                }\r\n\r\n            } else if ( object.isPoints ) {\r\n\r\n                renderer.setMode( _gl.POINTS );\r\n\r\n            }\r\n\r\n            if ( geometry && geometry.isInstancedBufferGeometry ) {\r\n\r\n                if ( geometry.maxInstancedCount > 0 ) {\r\n\r\n                    renderer.renderInstances( geometry, drawStart, drawCount );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                renderer.render( drawStart, drawCount );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        function setupVertexAttributes( material, program, geometry ) {\r\n\r\n            if ( geometry && geometry.isInstancedBufferGeometry ) {\r\n\r\n                if ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) {\r\n\r\n                    console.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n                    return;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.initAttributes();\r\n\r\n            var geometryAttributes = geometry.attributes;\r\n\r\n            var programAttributes = program.getAttributes();\r\n\r\n            var materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n            for ( var name in programAttributes ) {\r\n\r\n                var programAttribute = programAttributes[ name ];\r\n\r\n                if ( programAttribute >= 0 ) {\r\n\r\n                    var geometryAttribute = geometryAttributes[ name ];\r\n\r\n                    if ( geometryAttribute !== undefined ) {\r\n\r\n                        var normalized = geometryAttribute.normalized;\r\n                        var size = geometryAttribute.itemSize;\r\n\r\n                        var attribute = attributes.get( geometryAttribute );\r\n\r\n                        // TODO Attribute may not be available on context restore\r\n\r\n                        if ( attribute === undefined ) continue;\r\n\r\n                        var buffer = attribute.buffer;\r\n                        var type = attribute.type;\r\n                        var bytesPerElement = attribute.bytesPerElement;\r\n\r\n                        if ( geometryAttribute.isInterleavedBufferAttribute ) {\r\n\r\n                            var data = geometryAttribute.data;\r\n                            var stride = data.stride;\r\n                            var offset = geometryAttribute.offset;\r\n\r\n                            if ( data && data.isInstancedInterleavedBuffer ) {\r\n\r\n                                state.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\r\n\r\n                                if ( geometry.maxInstancedCount === undefined ) {\r\n\r\n                                    geometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n                                }\r\n\r\n                            } else {\r\n\r\n                                state.enableAttribute( programAttribute );\r\n\r\n                            }\r\n\r\n                            _gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n                            _gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\r\n\r\n                        } else {\r\n\r\n                            if ( geometryAttribute.isInstancedBufferAttribute ) {\r\n\r\n                                state.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\r\n\r\n                                if ( geometry.maxInstancedCount === undefined ) {\r\n\r\n                                    geometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n                                }\r\n\r\n                            } else {\r\n\r\n                                state.enableAttribute( programAttribute );\r\n\r\n                            }\r\n\r\n                            _gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n                            _gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\r\n\r\n                        }\r\n\r\n                    } else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n                        var value = materialDefaultAttributeValues[ name ];\r\n\r\n                        if ( value !== undefined ) {\r\n\r\n                            switch ( value.length ) {\r\n\r\n                                case 2:\r\n                                    _gl.vertexAttrib2fv( programAttribute, value );\r\n                                    break;\r\n\r\n                                case 3:\r\n                                    _gl.vertexAttrib3fv( programAttribute, value );\r\n                                    break;\r\n\r\n                                case 4:\r\n                                    _gl.vertexAttrib4fv( programAttribute, value );\r\n                                    break;\r\n\r\n                                default:\r\n                                    _gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            state.disableUnusedAttributes();\r\n\r\n        }\r\n\r\n        // Compile\r\n\r\n        this.compile = function ( scene, camera ) {\r\n\r\n            currentRenderState = renderStates.get( scene, camera );\r\n            currentRenderState.init();\r\n\r\n            scene.traverse( function ( object ) {\r\n\r\n                if ( object.isLight ) {\r\n\r\n                    currentRenderState.pushLight( object );\r\n\r\n                    if ( object.castShadow ) {\r\n\r\n                        currentRenderState.pushShadow( object );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } );\r\n\r\n            currentRenderState.setupLights( camera );\r\n\r\n            scene.traverse( function ( object ) {\r\n\r\n                if ( object.material ) {\r\n\r\n                    if ( Array.isArray( object.material ) ) {\r\n\r\n                        for ( var i = 0; i < object.material.length; i ++ ) {\r\n\r\n                            initMaterial( object.material[ i ], scene.fog, object );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        initMaterial( object.material, scene.fog, object );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } );\r\n\r\n        };\r\n\r\n        // Animation Loop\r\n\r\n        var onAnimationFrameCallback = null;\r\n\r\n        function onAnimationFrame() {\r\n\r\n            if ( vr.isPresenting() ) return;\r\n            if ( onAnimationFrameCallback ) onAnimationFrameCallback();\r\n\r\n        }\r\n\r\n        var animation = new WebGLAnimation();\r\n        animation.setAnimationLoop( onAnimationFrame );\r\n        animation.setContext( window );\r\n\r\n        this.setAnimationLoop = function ( callback ) {\r\n\r\n            onAnimationFrameCallback = callback;\r\n            vr.setAnimationLoop( callback );\r\n\r\n            animation.start();\r\n\r\n        };\r\n\r\n        // Rendering\r\n\r\n        this.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n            if ( ! ( camera && camera.isCamera ) ) {\r\n\r\n                console.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( _isContextLost ) return;\r\n\r\n            // reset caching for this frame\r\n\r\n            _currentGeometryProgram = '';\r\n            _currentMaterialId = - 1;\r\n            _currentCamera = null;\r\n\r\n            // update scene graph\r\n\r\n            if ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n            // update camera matrices and frustum\r\n\r\n            if ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n            if ( vr.enabled ) {\r\n\r\n                camera = vr.getCamera( camera );\r\n\r\n            }\r\n\r\n            //\r\n\r\n            currentRenderState = renderStates.get( scene, camera );\r\n            currentRenderState.init();\r\n\r\n            scene.onBeforeRender( _this, scene, camera, renderTarget );\r\n\r\n            _projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n            _frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n            _localClippingEnabled = this.localClippingEnabled;\r\n            _clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\r\n\r\n            currentRenderList = renderLists.get( scene, camera );\r\n            currentRenderList.init();\r\n\r\n            projectObject( scene, camera, _this.sortObjects );\r\n\r\n            if ( _this.sortObjects === true ) {\r\n\r\n                currentRenderList.sort();\r\n\r\n            }\r\n\r\n            //\r\n\r\n            if ( _clippingEnabled ) _clipping.beginShadows();\r\n\r\n            var shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n            shadowMap.render( shadowsArray, scene, camera );\r\n\r\n            currentRenderState.setupLights( camera );\r\n\r\n            if ( _clippingEnabled ) _clipping.endShadows();\r\n\r\n            //\r\n\r\n            if ( this.info.autoReset ) this.info.reset();\r\n\r\n            if ( renderTarget === undefined ) {\r\n\r\n                renderTarget = null;\r\n\r\n            }\r\n\r\n            this.setRenderTarget( renderTarget );\r\n\r\n            //\r\n\r\n            background.render( currentRenderList, scene, camera, forceClear );\r\n\r\n            // render scene\r\n\r\n            var opaqueObjects = currentRenderList.opaque;\r\n            var transparentObjects = currentRenderList.transparent;\r\n\r\n            if ( scene.overrideMaterial ) {\r\n\r\n                var overrideMaterial = scene.overrideMaterial;\r\n\r\n                if ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\r\n                if ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\r\n\r\n            } else {\r\n\r\n                // opaque pass (front-to-back order)\r\n\r\n                if ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\r\n\r\n                // transparent pass (back-to-front order)\r\n\r\n                if ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\r\n\r\n            }\r\n\r\n            // custom renderers\r\n\r\n            var spritesArray = currentRenderState.state.spritesArray;\r\n\r\n            spriteRenderer.render( spritesArray, scene, camera );\r\n\r\n            // Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n            if ( renderTarget ) {\r\n\r\n                textures.updateRenderTargetMipmap( renderTarget );\r\n\r\n            }\r\n\r\n            // Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n            state.buffers.depth.setTest( true );\r\n            state.buffers.depth.setMask( true );\r\n            state.buffers.color.setMask( true );\r\n\r\n            state.setPolygonOffset( false );\r\n\r\n            scene.onAfterRender( _this, scene, camera );\r\n\r\n            if ( vr.enabled ) {\r\n\r\n                vr.submitFrame();\r\n\r\n            }\r\n\r\n            // _gl.finish();\r\n\r\n            currentRenderList = null;\r\n            currentRenderState = null;\r\n\r\n        };\r\n\r\n        /*\r\n\t\t// TODO Duplicated code (Frustum)\r\n\r\n\t\tvar _sphere = new Sphere();\r\n\r\n\t\tfunction isObjectViewable( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null )\r\n\t\t\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\t\t_sphere.copy( geometry.boundingSphere ).\r\n\t\t\tapplyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn isSphereViewable( _sphere );\r\n\r\n\t\t}\r\n\r\n\t\tfunction isSpriteViewable( sprite ) {\r\n\r\n\t\t\t_sphere.center.set( 0, 0, 0 );\r\n\t\t\t_sphere.radius = 0.7071067811865476;\r\n\t\t\t_sphere.applyMatrix4( sprite.matrixWorld );\r\n\r\n\t\t\treturn isSphereViewable( _sphere );\r\n\r\n\t\t}\r\n\r\n\t\tfunction isSphereViewable( sphere ) {\r\n\r\n\t\t\tif ( ! _frustum.intersectsSphere( sphere ) ) return false;\r\n\r\n\t\t\tvar numPlanes = _clipping.numPlanes;\r\n\r\n\t\t\tif ( numPlanes === 0 ) return true;\r\n\r\n\t\t\tvar planes = _this.clippingPlanes,\r\n\r\n\t\t\t\tcenter = sphere.center,\r\n\t\t\t\tnegRad = - sphere.radius,\r\n\t\t\t\ti = 0;\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\t// out when deeper than radius in the negative halfspace\r\n\t\t\t\tif ( planes[ i ].distanceToPoint( center ) < negRad ) return false;\r\n\r\n\t\t\t} while ( ++ i !== numPlanes );\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\t\t*/\r\n\r\n        function projectObject( object, camera, sortObjects ) {\r\n\r\n            if ( object.visible === false ) return;\r\n\r\n            var visible = object.layers.test( camera.layers );\r\n\r\n            if ( visible ) {\r\n\r\n                if ( object.isLight ) {\r\n\r\n                    currentRenderState.pushLight( object );\r\n\r\n                    if ( object.castShadow ) {\r\n\r\n                        currentRenderState.pushShadow( object );\r\n\r\n                    }\r\n\r\n                } else if ( object.isSprite ) {\r\n\r\n                    if ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\r\n\r\n                        currentRenderState.pushSprite( object );\r\n\r\n                    }\r\n\r\n                } else if ( object.isImmediateRenderObject ) {\r\n\r\n                    if ( sortObjects ) {\r\n\r\n                        _vector3.setFromMatrixPosition( object.matrixWorld )\r\n                            .applyMatrix4( _projScreenMatrix );\r\n\r\n                    }\r\n\r\n                    currentRenderList.push( object, null, object.material, _vector3.z, null );\r\n\r\n                } else if ( object.isMesh || object.isLine || object.isPoints ) {\r\n\r\n                    if ( object.isSkinnedMesh ) {\r\n\r\n                        object.skeleton.update();\r\n\r\n                    }\r\n\r\n                    if ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\r\n\r\n                        if ( sortObjects ) {\r\n\r\n                            _vector3.setFromMatrixPosition( object.matrixWorld )\r\n                                .applyMatrix4( _projScreenMatrix );\r\n\r\n                        }\r\n\r\n                        var geometry = objects.update( object );\r\n                        var material = object.material;\r\n\r\n                        if ( Array.isArray( material ) ) {\r\n\r\n                            var groups = geometry.groups;\r\n\r\n                            for ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n                                var group = groups[ i ];\r\n                                var groupMaterial = material[ group.materialIndex ];\r\n\r\n                                if ( groupMaterial && groupMaterial.visible ) {\r\n\r\n                                    currentRenderList.push( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        } else if ( material.visible ) {\r\n\r\n                            currentRenderList.push( object, geometry, material, _vector3.z, null );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var children = object.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                projectObject( children[ i ], camera, sortObjects );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function renderObjects( renderList, scene, camera, overrideMaterial ) {\r\n\r\n            for ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n                var renderItem = renderList[ i ];\r\n\r\n                var object = renderItem.object;\r\n                var geometry = renderItem.geometry;\r\n                var material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n                var group = renderItem.group;\r\n\r\n                if ( camera.isArrayCamera ) {\r\n\r\n                    _currentArrayCamera = camera;\r\n\r\n                    var cameras = camera.cameras;\r\n\r\n                    for ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\r\n\r\n                        var camera2 = cameras[ j ];\r\n\r\n                        if ( object.layers.test( camera2.layers ) ) {\r\n\r\n                            if ( 'viewport' in camera2 ) { // XR\r\n\r\n                                state.viewport( _currentViewport.copy( camera2.viewport ) );\r\n\r\n                            } else {\r\n\r\n                                var bounds = camera2.bounds;\r\n\r\n                                var x = bounds.x * _width;\r\n                                var y = bounds.y * _height;\r\n                                var width = bounds.z * _width;\r\n                                var height = bounds.w * _height;\r\n\r\n                                state.viewport( _currentViewport.set( x, y, width, height ).multiplyScalar( _pixelRatio ) );\r\n\r\n                            }\r\n\r\n                            renderObject( object, scene, camera2, geometry, material, group );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    _currentArrayCamera = null;\r\n\r\n                    renderObject( object, scene, camera, geometry, material, group );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function renderObject( object, scene, camera, geometry, material, group ) {\r\n\r\n            object.onBeforeRender( _this, scene, camera, geometry, material, group );\r\n            currentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n            object.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n            object.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n            if ( object.isImmediateRenderObject ) {\r\n\r\n                var frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\r\n\r\n                state.setMaterial( material, frontFaceCW );\r\n\r\n                var program = setProgram( camera, scene.fog, material, object );\r\n\r\n                _currentGeometryProgram = '';\r\n\r\n                renderObjectImmediate( object, program, material );\r\n\r\n            } else {\r\n\r\n                _this.renderBufferDirect( camera, scene.fog, geometry, material, object, group );\r\n\r\n            }\r\n\r\n            object.onAfterRender( _this, scene, camera, geometry, material, group );\r\n            currentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\r\n\r\n        }\r\n\r\n        function initMaterial( material, fog, object ) {\r\n\r\n            var materialProperties = properties.get( material );\r\n\r\n            var lights = currentRenderState.state.lights;\r\n            var shadowsArray = currentRenderState.state.shadowsArray;\r\n\r\n            var parameters = programCache.getParameters(\r\n                material, lights.state, shadowsArray, fog, _clipping.numPlanes, _clipping.numIntersection, object );\r\n\r\n            var code = programCache.getProgramCode( material, parameters );\r\n\r\n            var program = materialProperties.program;\r\n            var programChange = true;\r\n\r\n            if ( program === undefined ) {\r\n\r\n                // new material\r\n                material.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n            } else if ( program.code !== code ) {\r\n\r\n                // changed glsl or parameters\r\n                releaseMaterialProgramReference( material );\r\n\r\n            } else if ( materialProperties.lightsHash !== lights.state.hash ) {\r\n\r\n                properties.update( material, 'lightsHash', lights.state.hash );\r\n                programChange = false;\r\n\r\n            } else if ( parameters.shaderID !== undefined ) {\r\n\r\n                // same glsl and uniform list\r\n                return;\r\n\r\n            } else {\r\n\r\n                // only rebuild uniform list\r\n                programChange = false;\r\n\r\n            }\r\n\r\n            if ( programChange ) {\r\n\r\n                if ( parameters.shaderID ) {\r\n\r\n                    var shader = ShaderLib[ parameters.shaderID ];\r\n\r\n                    materialProperties.shader = {\r\n                        name: material.type,\r\n                        uniforms: UniformsUtils.clone( shader.uniforms ),\r\n                        vertexShader: shader.vertexShader,\r\n                        fragmentShader: shader.fragmentShader\r\n                    };\r\n\r\n                } else {\r\n\r\n                    materialProperties.shader = {\r\n                        name: material.type,\r\n                        uniforms: material.uniforms,\r\n                        vertexShader: material.vertexShader,\r\n                        fragmentShader: material.fragmentShader\r\n                    };\r\n\r\n                }\r\n\r\n                material.onBeforeCompile( materialProperties.shader, _this );\r\n\r\n                program = programCache.acquireProgram( material, materialProperties.shader, parameters, code );\r\n\r\n                materialProperties.program = program;\r\n                material.program = program;\r\n\r\n            }\r\n\r\n            var programAttributes = program.getAttributes();\r\n\r\n            if ( material.morphTargets ) {\r\n\r\n                material.numSupportedMorphTargets = 0;\r\n\r\n                for ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n                    if ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n                        material.numSupportedMorphTargets ++;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( material.morphNormals ) {\r\n\r\n                material.numSupportedMorphNormals = 0;\r\n\r\n                for ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n                    if ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n                        material.numSupportedMorphNormals ++;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var uniforms = materialProperties.shader.uniforms;\r\n\r\n            if ( ! material.isShaderMaterial &&\r\n                ! material.isRawShaderMaterial ||\r\n                material.clipping === true ) {\r\n\r\n                materialProperties.numClippingPlanes = _clipping.numPlanes;\r\n                materialProperties.numIntersection = _clipping.numIntersection;\r\n                uniforms.clippingPlanes = _clipping.uniform;\r\n\r\n            }\r\n\r\n            materialProperties.fog = fog;\r\n\r\n            // store the light setup it was created for\r\n\r\n            materialProperties.lightsHash = lights.state.hash;\r\n\r\n            if ( material.lights ) {\r\n\r\n                // wire up the material to this renderer's lighting state\r\n\r\n                uniforms.ambientLightColor.value = lights.state.ambient;\r\n                uniforms.directionalLights.value = lights.state.directional;\r\n                uniforms.spotLights.value = lights.state.spot;\r\n                uniforms.rectAreaLights.value = lights.state.rectArea;\r\n                uniforms.pointLights.value = lights.state.point;\r\n                uniforms.hemisphereLights.value = lights.state.hemi;\r\n\r\n                uniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\r\n                uniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\r\n                uniforms.spotShadowMap.value = lights.state.spotShadowMap;\r\n                uniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\r\n                uniforms.pointShadowMap.value = lights.state.pointShadowMap;\r\n                uniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\r\n                // TODO (abelnation): add area lights shadow info to uniforms\r\n\r\n            }\r\n\r\n            var progUniforms = materialProperties.program.getUniforms(),\r\n                uniformsList =\r\n                    WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\r\n\r\n            materialProperties.uniformsList = uniformsList;\r\n\r\n        }\r\n\r\n        function setProgram( camera, fog, material, object ) {\r\n\r\n            _usedTextureUnits = 0;\r\n\r\n            var materialProperties = properties.get( material );\r\n            var lights = currentRenderState.state.lights;\r\n\r\n            if ( _clippingEnabled ) {\r\n\r\n                if ( _localClippingEnabled || camera !== _currentCamera ) {\r\n\r\n                    var useCache =\r\n                        camera === _currentCamera &&\r\n                        material.id === _currentMaterialId;\r\n\r\n                    // we might want to call this function with some ClippingGroup\r\n                    // object instead of the material, once it becomes feasible\r\n                    // (#8465, #8379)\r\n                    _clipping.setState(\r\n                        material.clippingPlanes, material.clipIntersection, material.clipShadows,\r\n                        camera, materialProperties, useCache );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( material.needsUpdate === false ) {\r\n\r\n                if ( materialProperties.program === undefined ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                } else if ( material.fog && materialProperties.fog !== fog ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                } else if ( material.lights && materialProperties.lightsHash !== lights.state.hash ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                } else if ( materialProperties.numClippingPlanes !== undefined &&\r\n                    ( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\r\n                        materialProperties.numIntersection !== _clipping.numIntersection ) ) {\r\n\r\n                    material.needsUpdate = true;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( material.needsUpdate ) {\r\n\r\n                initMaterial( material, fog, object );\r\n                material.needsUpdate = false;\r\n\r\n            }\r\n\r\n            var refreshProgram = false;\r\n            var refreshMaterial = false;\r\n            var refreshLights = false;\r\n\r\n            var program = materialProperties.program,\r\n                p_uniforms = program.getUniforms(),\r\n                m_uniforms = materialProperties.shader.uniforms;\r\n\r\n            if ( state.useProgram( program.program ) ) {\r\n\r\n                refreshProgram = true;\r\n                refreshMaterial = true;\r\n                refreshLights = true;\r\n\r\n            }\r\n\r\n            if ( material.id !== _currentMaterialId ) {\r\n\r\n                _currentMaterialId = material.id;\r\n\r\n                refreshMaterial = true;\r\n\r\n            }\r\n\r\n            if ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n                p_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\r\n\r\n                if ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n                    p_uniforms.setValue( _gl, 'logDepthBufFC',\r\n                        2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n                }\r\n\r\n                // Avoid unneeded uniform updates per ArrayCamera's sub-camera\r\n\r\n                if ( _currentCamera !== ( _currentArrayCamera || camera ) ) {\r\n\r\n                    _currentCamera = ( _currentArrayCamera || camera );\r\n\r\n                    // lighting uniforms depend on the camera so enforce an update\r\n                    // now, in case this material supports lights - or later, when\r\n                    // the next material that does gets activated:\r\n\r\n                    refreshMaterial = true;\t\t// set to true on material change\r\n                    refreshLights = true;\t\t// remains set until update done\r\n\r\n                }\r\n\r\n                // load material specific uniforms\r\n                // (shader material also gets them for the sake of genericity)\r\n\r\n                if ( material.isShaderMaterial ||\r\n                    material.isMeshPhongMaterial ||\r\n                    material.isMeshStandardMaterial ||\r\n                    material.envMap ) {\r\n\r\n                    var uCamPos = p_uniforms.map.cameraPosition;\r\n\r\n                    if ( uCamPos !== undefined ) {\r\n\r\n                        uCamPos.setValue( _gl,\r\n                            _vector3.setFromMatrixPosition( camera.matrixWorld ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( material.isMeshPhongMaterial ||\r\n                    material.isMeshLambertMaterial ||\r\n                    material.isMeshBasicMaterial ||\r\n                    material.isMeshStandardMaterial ||\r\n                    material.isShaderMaterial ||\r\n                    material.skinning ) {\r\n\r\n                    p_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // skinning uniforms must be set even if material didn't change\r\n            // auto-setting of texture unit for bone texture must go before other textures\r\n            // not sure why, but otherwise weird things happen\r\n\r\n            if ( material.skinning ) {\r\n\r\n                p_uniforms.setOptional( _gl, object, 'bindMatrix' );\r\n                p_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\r\n\r\n                var skeleton = object.skeleton;\r\n\r\n                if ( skeleton ) {\r\n\r\n                    var bones = skeleton.bones;\r\n\r\n                    if ( capabilities.floatVertexTextures ) {\r\n\r\n                        if ( skeleton.boneTexture === undefined ) {\r\n\r\n                            // layout (1 matrix = 4 pixels)\r\n                            //      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n                            //  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n                            //       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n                            //       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n                            //       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\r\n                            var size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n                            size = _Math.ceilPowerOfTwo( size );\r\n                            size = Math.max( size, 4 );\r\n\r\n                            var boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\r\n                            boneMatrices.set( skeleton.boneMatrices ); // copy current values\r\n\r\n                            var boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\r\n                            boneTexture.needsUpdate = true;\r\n\r\n                            skeleton.boneMatrices = boneMatrices;\r\n                            skeleton.boneTexture = boneTexture;\r\n                            skeleton.boneTextureSize = size;\r\n\r\n                        }\r\n\r\n                        p_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture );\r\n                        p_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\r\n\r\n                    } else {\r\n\r\n                        p_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( refreshMaterial ) {\r\n\r\n                p_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\r\n                p_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\r\n\r\n                if ( material.lights ) {\r\n\r\n                    // the current material requires lighting info\r\n\r\n                    // note: all lighting uniforms are always set correctly\r\n                    // they simply reference the renderer's state for their\r\n                    // values\r\n                    //\r\n                    // use the current material's .needsUpdate flags to set\r\n                    // the GL state when required\r\n\r\n                    markUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\r\n\r\n                }\r\n\r\n                // refresh uniforms common to several materials\r\n\r\n                if ( fog && material.fog ) {\r\n\r\n                    refreshUniformsFog( m_uniforms, fog );\r\n\r\n                }\r\n\r\n                if ( material.isMeshBasicMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshLambertMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsLambert( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshPhongMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n\r\n                    if ( material.isMeshToonMaterial ) {\r\n\r\n                        refreshUniformsToon( m_uniforms, material );\r\n\r\n                    } else {\r\n\r\n                        refreshUniformsPhong( m_uniforms, material );\r\n\r\n                    }\r\n\r\n                } else if ( material.isMeshStandardMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n\r\n                    if ( material.isMeshPhysicalMaterial ) {\r\n\r\n                        refreshUniformsPhysical( m_uniforms, material );\r\n\r\n                    } else {\r\n\r\n                        refreshUniformsStandard( m_uniforms, material );\r\n\r\n                    }\r\n\r\n                } else if ( material.isMeshDepthMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsDepth( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshDistanceMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsDistance( m_uniforms, material );\r\n\r\n                } else if ( material.isMeshNormalMaterial ) {\r\n\r\n                    refreshUniformsCommon( m_uniforms, material );\r\n                    refreshUniformsNormal( m_uniforms, material );\r\n\r\n                } else if ( material.isLineBasicMaterial ) {\r\n\r\n                    refreshUniformsLine( m_uniforms, material );\r\n\r\n                    if ( material.isLineDashedMaterial ) {\r\n\r\n                        refreshUniformsDash( m_uniforms, material );\r\n\r\n                    }\r\n\r\n                } else if ( material.isPointsMaterial ) {\r\n\r\n                    refreshUniformsPoints( m_uniforms, material );\r\n\r\n                } else if ( material.isShadowMaterial ) {\r\n\r\n                    m_uniforms.color.value = material.color;\r\n                    m_uniforms.opacity.value = material.opacity;\r\n\r\n                }\r\n\r\n                // RectAreaLight Texture\r\n                // TODO (mrdoob): Find a nicer implementation\r\n\r\n                if ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\r\n                if ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\r\n\r\n                WebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\r\n\r\n            }\r\n\r\n            if ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\r\n\r\n                WebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, _this );\r\n                material.uniformsNeedUpdate = false;\r\n\r\n            }\r\n\r\n            // common matrices\r\n\r\n            p_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\r\n            p_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\r\n            p_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\r\n\r\n            return program;\r\n\r\n        }\r\n\r\n        // Uniforms (refresh uniforms objects)\r\n\r\n        function refreshUniformsCommon( uniforms, material ) {\r\n\r\n            uniforms.opacity.value = material.opacity;\r\n\r\n            if ( material.color ) {\r\n\r\n                uniforms.diffuse.value = material.color;\r\n\r\n            }\r\n\r\n            if ( material.emissive ) {\r\n\r\n                uniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\r\n\r\n            }\r\n\r\n            if ( material.map ) {\r\n\r\n                uniforms.map.value = material.map;\r\n\r\n            }\r\n\r\n            if ( material.alphaMap ) {\r\n\r\n                uniforms.alphaMap.value = material.alphaMap;\r\n\r\n            }\r\n\r\n            if ( material.specularMap ) {\r\n\r\n                uniforms.specularMap.value = material.specularMap;\r\n\r\n            }\r\n\r\n            if ( material.envMap ) {\r\n\r\n                uniforms.envMap.value = material.envMap;\r\n\r\n                // don't flip CubeTexture envMaps, flip everything else:\r\n                //  WebGLRenderTargetCube will be flipped for backwards compatibility\r\n                //  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\r\n                // this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\r\n                uniforms.flipEnvMap.value = ( ! ( material.envMap && material.envMap.isCubeTexture ) ) ? 1 : - 1;\r\n\r\n                uniforms.reflectivity.value = material.reflectivity;\r\n                uniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n                uniforms.maxMipLevel.value = properties.get( material.envMap ).__maxMipLevel;\r\n\r\n            }\r\n\r\n            if ( material.lightMap ) {\r\n\r\n                uniforms.lightMap.value = material.lightMap;\r\n                uniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n            }\r\n\r\n            if ( material.aoMap ) {\r\n\r\n                uniforms.aoMap.value = material.aoMap;\r\n                uniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n            }\r\n\r\n            // uv repeat and offset setting priorities\r\n            // 1. color map\r\n            // 2. specular map\r\n            // 3. normal map\r\n            // 4. bump map\r\n            // 5. alpha map\r\n            // 6. emissive map\r\n\r\n            var uvScaleMap;\r\n\r\n            if ( material.map ) {\r\n\r\n                uvScaleMap = material.map;\r\n\r\n            } else if ( material.specularMap ) {\r\n\r\n                uvScaleMap = material.specularMap;\r\n\r\n            } else if ( material.displacementMap ) {\r\n\r\n                uvScaleMap = material.displacementMap;\r\n\r\n            } else if ( material.normalMap ) {\r\n\r\n                uvScaleMap = material.normalMap;\r\n\r\n            } else if ( material.bumpMap ) {\r\n\r\n                uvScaleMap = material.bumpMap;\r\n\r\n            } else if ( material.roughnessMap ) {\r\n\r\n                uvScaleMap = material.roughnessMap;\r\n\r\n            } else if ( material.metalnessMap ) {\r\n\r\n                uvScaleMap = material.metalnessMap;\r\n\r\n            } else if ( material.alphaMap ) {\r\n\r\n                uvScaleMap = material.alphaMap;\r\n\r\n            } else if ( material.emissiveMap ) {\r\n\r\n                uvScaleMap = material.emissiveMap;\r\n\r\n            }\r\n\r\n            if ( uvScaleMap !== undefined ) {\r\n\r\n                // backwards compatibility\r\n                if ( uvScaleMap.isWebGLRenderTarget ) {\r\n\r\n                    uvScaleMap = uvScaleMap.texture;\r\n\r\n                }\r\n\r\n                if ( uvScaleMap.matrixAutoUpdate === true ) {\r\n\r\n                    uvScaleMap.updateMatrix();\r\n\r\n                }\r\n\r\n                uniforms.uvTransform.value.copy( uvScaleMap.matrix );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsLine( uniforms, material ) {\r\n\r\n            uniforms.diffuse.value = material.color;\r\n            uniforms.opacity.value = material.opacity;\r\n\r\n        }\r\n\r\n        function refreshUniformsDash( uniforms, material ) {\r\n\r\n            uniforms.dashSize.value = material.dashSize;\r\n            uniforms.totalSize.value = material.dashSize + material.gapSize;\r\n            uniforms.scale.value = material.scale;\r\n\r\n        }\r\n\r\n        function refreshUniformsPoints( uniforms, material ) {\r\n\r\n            uniforms.diffuse.value = material.color;\r\n            uniforms.opacity.value = material.opacity;\r\n            uniforms.size.value = material.size * _pixelRatio;\r\n            uniforms.scale.value = _height * 0.5;\r\n\r\n            uniforms.map.value = material.map;\r\n\r\n            if ( material.map !== null ) {\r\n\r\n                if ( material.map.matrixAutoUpdate === true ) {\r\n\r\n                    material.map.updateMatrix();\r\n\r\n                }\r\n\r\n                uniforms.uvTransform.value.copy( material.map.matrix );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsFog( uniforms, fog ) {\r\n\r\n            uniforms.fogColor.value = fog.color;\r\n\r\n            if ( fog.isFog ) {\r\n\r\n                uniforms.fogNear.value = fog.near;\r\n                uniforms.fogFar.value = fog.far;\r\n\r\n            } else if ( fog.isFogExp2 ) {\r\n\r\n                uniforms.fogDensity.value = fog.density;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsLambert( uniforms, material ) {\r\n\r\n            if ( material.emissiveMap ) {\r\n\r\n                uniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsPhong( uniforms, material ) {\r\n\r\n            uniforms.specular.value = material.specular;\r\n            uniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\r\n\r\n            if ( material.emissiveMap ) {\r\n\r\n                uniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n            }\r\n\r\n            if ( material.bumpMap ) {\r\n\r\n                uniforms.bumpMap.value = material.bumpMap;\r\n                uniforms.bumpScale.value = material.bumpScale;\r\n                if ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n            }\r\n\r\n            if ( material.normalMap ) {\r\n\r\n                uniforms.normalMap.value = material.normalMap;\r\n                uniforms.normalScale.value.copy( material.normalScale );\r\n                if ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n            }\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsToon( uniforms, material ) {\r\n\r\n            refreshUniformsPhong( uniforms, material );\r\n\r\n            if ( material.gradientMap ) {\r\n\r\n                uniforms.gradientMap.value = material.gradientMap;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsStandard( uniforms, material ) {\r\n\r\n            uniforms.roughness.value = material.roughness;\r\n            uniforms.metalness.value = material.metalness;\r\n\r\n            if ( material.roughnessMap ) {\r\n\r\n                uniforms.roughnessMap.value = material.roughnessMap;\r\n\r\n            }\r\n\r\n            if ( material.metalnessMap ) {\r\n\r\n                uniforms.metalnessMap.value = material.metalnessMap;\r\n\r\n            }\r\n\r\n            if ( material.emissiveMap ) {\r\n\r\n                uniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n            }\r\n\r\n            if ( material.bumpMap ) {\r\n\r\n                uniforms.bumpMap.value = material.bumpMap;\r\n                uniforms.bumpScale.value = material.bumpScale;\r\n                if ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n            }\r\n\r\n            if ( material.normalMap ) {\r\n\r\n                uniforms.normalMap.value = material.normalMap;\r\n                uniforms.normalScale.value.copy( material.normalScale );\r\n                if ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n            }\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n            if ( material.envMap ) {\r\n\r\n                //uniforms.envMap.value = material.envMap; // part of uniforms common\r\n                uniforms.envMapIntensity.value = material.envMapIntensity;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsPhysical( uniforms, material ) {\r\n\r\n            uniforms.clearCoat.value = material.clearCoat;\r\n            uniforms.clearCoatRoughness.value = material.clearCoatRoughness;\r\n\r\n            refreshUniformsStandard( uniforms, material );\r\n\r\n        }\r\n\r\n        function refreshUniformsDepth( uniforms, material ) {\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function refreshUniformsDistance( uniforms, material ) {\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n            uniforms.referencePosition.value.copy( material.referencePosition );\r\n            uniforms.nearDistance.value = material.nearDistance;\r\n            uniforms.farDistance.value = material.farDistance;\r\n\r\n        }\r\n\r\n        function refreshUniformsNormal( uniforms, material ) {\r\n\r\n            if ( material.bumpMap ) {\r\n\r\n                uniforms.bumpMap.value = material.bumpMap;\r\n                uniforms.bumpScale.value = material.bumpScale;\r\n                if ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\r\n\r\n            }\r\n\r\n            if ( material.normalMap ) {\r\n\r\n                uniforms.normalMap.value = material.normalMap;\r\n                uniforms.normalScale.value.copy( material.normalScale );\r\n                if ( material.side === BackSide ) uniforms.normalScale.value.negate();\r\n\r\n            }\r\n\r\n            if ( material.displacementMap ) {\r\n\r\n                uniforms.displacementMap.value = material.displacementMap;\r\n                uniforms.displacementScale.value = material.displacementScale;\r\n                uniforms.displacementBias.value = material.displacementBias;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n        function markUniformsLightsNeedsUpdate( uniforms, value ) {\r\n\r\n            uniforms.ambientLightColor.needsUpdate = value;\r\n\r\n            uniforms.directionalLights.needsUpdate = value;\r\n            uniforms.pointLights.needsUpdate = value;\r\n            uniforms.spotLights.needsUpdate = value;\r\n            uniforms.rectAreaLights.needsUpdate = value;\r\n            uniforms.hemisphereLights.needsUpdate = value;\r\n\r\n        }\r\n\r\n        // Textures\r\n\r\n        function allocTextureUnit() {\r\n\r\n            var textureUnit = _usedTextureUnits;\r\n\r\n            if ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n            }\r\n\r\n            _usedTextureUnits += 1;\r\n\r\n            return textureUnit;\r\n\r\n        }\r\n\r\n        this.allocTextureUnit = allocTextureUnit;\r\n\r\n        // this.setTexture2D = setTexture2D;\r\n        this.setTexture2D = ( function () {\r\n\r\n            var warned = false;\r\n\r\n            // backwards compatibility: peel texture.texture\r\n            return function setTexture2D( texture, slot ) {\r\n\r\n                if ( texture && texture.isWebGLRenderTarget ) {\r\n\r\n                    if ( ! warned ) {\r\n\r\n                        console.warn( \"THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\r\n                        warned = true;\r\n\r\n                    }\r\n\r\n                    texture = texture.texture;\r\n\r\n                }\r\n\r\n                textures.setTexture2D( texture, slot );\r\n\r\n            };\r\n\r\n        }() );\r\n\r\n        this.setTexture = ( function () {\r\n\r\n            var warned = false;\r\n\r\n            return function setTexture( texture, slot ) {\r\n\r\n                if ( ! warned ) {\r\n\r\n                    console.warn( \"THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.\" );\r\n                    warned = true;\r\n\r\n                }\r\n\r\n                textures.setTexture2D( texture, slot );\r\n\r\n            };\r\n\r\n        }() );\r\n\r\n        this.setTextureCube = ( function () {\r\n\r\n            var warned = false;\r\n\r\n            return function setTextureCube( texture, slot ) {\r\n\r\n                // backwards compatibility: peel texture.texture\r\n                if ( texture && texture.isWebGLRenderTargetCube ) {\r\n\r\n                    if ( ! warned ) {\r\n\r\n                        console.warn( \"THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\r\n                        warned = true;\r\n\r\n                    }\r\n\r\n                    texture = texture.texture;\r\n\r\n                }\r\n\r\n                // currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\r\n                // TODO: unify these code paths\r\n                if ( ( texture && texture.isCubeTexture ) ||\r\n                    ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n                    // CompressedTexture can have Array in image :/\r\n\r\n                    // this function alone should take care of cube textures\r\n                    textures.setTextureCube( texture, slot );\r\n\r\n                } else {\r\n\r\n                    // assumed: texture property of THREE.WebGLRenderTargetCube\r\n\r\n                    textures.setTextureCubeDynamic( texture, slot );\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() );\r\n\r\n        //\r\n\r\n        this.setFramebuffer = function ( value ) {\r\n\r\n            _framebuffer = value;\r\n\r\n        };\r\n\r\n        this.getRenderTarget = function () {\r\n\r\n            return _currentRenderTarget;\r\n\r\n        };\r\n\r\n        this.setRenderTarget = function ( renderTarget ) {\r\n\r\n            _currentRenderTarget = renderTarget;\r\n\r\n            if ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n                textures.setupRenderTarget( renderTarget );\r\n\r\n            }\r\n\r\n            var framebuffer = _framebuffer;\r\n            var isCube = false;\r\n\r\n            if ( renderTarget ) {\r\n\r\n                var __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n                if ( renderTarget.isWebGLRenderTargetCube ) {\r\n\r\n                    framebuffer = __webglFramebuffer[ renderTarget.activeCubeFace ];\r\n                    isCube = true;\r\n\r\n                } else {\r\n\r\n                    framebuffer = __webglFramebuffer;\r\n\r\n                }\r\n\r\n                _currentViewport.copy( renderTarget.viewport );\r\n                _currentScissor.copy( renderTarget.scissor );\r\n                _currentScissorTest = renderTarget.scissorTest;\r\n\r\n            } else {\r\n\r\n                _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio );\r\n                _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio );\r\n                _currentScissorTest = _scissorTest;\r\n\r\n            }\r\n\r\n            if ( _currentFramebuffer !== framebuffer ) {\r\n\r\n                _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n                _currentFramebuffer = framebuffer;\r\n\r\n            }\r\n\r\n            state.viewport( _currentViewport );\r\n            state.scissor( _currentScissor );\r\n            state.setScissorTest( _currentScissorTest );\r\n\r\n            if ( isCube ) {\r\n\r\n                var textureProperties = properties.get( renderTarget.texture );\r\n                _gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + renderTarget.activeCubeFace, textureProperties.__webglTexture, renderTarget.activeMipMapLevel );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer ) {\r\n\r\n            if ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\r\n\r\n                console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n                return;\r\n\r\n            }\r\n\r\n            var framebuffer = properties.get( renderTarget ).__webglFramebuffer;\r\n\r\n            if ( framebuffer ) {\r\n\r\n                var restore = false;\r\n\r\n                if ( framebuffer !== _currentFramebuffer ) {\r\n\r\n                    _gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\r\n                    restore = true;\r\n\r\n                }\r\n\r\n                try {\r\n\r\n                    var texture = renderTarget.texture;\r\n                    var textureFormat = texture.format;\r\n                    var textureType = texture.type;\r\n\r\n                    if ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\r\n\r\n                        console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    if ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\r\n                        ! ( textureType === FloatType && ( extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\r\n                        ! ( textureType === HalfFloatType && extensions.get( 'EXT_color_buffer_half_float' ) ) ) {\r\n\r\n                        console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    if ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n                        // the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\r\n\r\n                        if ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\r\n\r\n                            _gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        console.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n                    }\r\n\r\n                } finally {\r\n\r\n                    if ( restore ) {\r\n\r\n                        _gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.copyFramebufferToTexture = function ( position, texture, level ) {\r\n\r\n            var width = texture.image.width;\r\n            var height = texture.image.height;\r\n            var glFormat = utils.convert( texture.format );\r\n\r\n            this.setTexture2D( texture, 0 );\r\n\r\n            _gl.copyTexImage2D( _gl.TEXTURE_2D, level || 0, glFormat, position.x, position.y, width, height, 0 );\r\n\r\n        };\r\n\r\n        this.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\r\n\r\n            var width = srcTexture.image.width;\r\n            var height = srcTexture.image.height;\r\n            var glFormat = utils.convert( dstTexture.format );\r\n            var glType = utils.convert( dstTexture.type );\r\n\r\n            this.setTexture2D( dstTexture, 0 );\r\n\r\n            if ( srcTexture.isDataTexture ) {\r\n\r\n                _gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\r\n\r\n            } else {\r\n\r\n                _gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, glFormat, glType, srcTexture.image );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function FogExp2( color, density ) {\r\n\r\n        this.name = '';\r\n\r\n        this.color = new Color( color );\r\n        this.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n    }\r\n\r\n    FogExp2.prototype.isFogExp2 = true;\r\n\r\n    FogExp2.prototype.clone = function () {\r\n\r\n        return new FogExp2( this.color, this.density );\r\n\r\n    };\r\n\r\n    FogExp2.prototype.toJSON = function ( /* meta */ ) {\r\n\r\n        return {\r\n            type: 'FogExp2',\r\n            color: this.color.getHex(),\r\n            density: this.density\r\n        };\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Fog( color, near, far ) {\r\n\r\n        this.name = '';\r\n\r\n        this.color = new Color( color );\r\n\r\n        this.near = ( near !== undefined ) ? near : 1;\r\n        this.far = ( far !== undefined ) ? far : 1000;\r\n\r\n    }\r\n\r\n    Fog.prototype.isFog = true;\r\n\r\n    Fog.prototype.clone = function () {\r\n\r\n        return new Fog( this.color, this.near, this.far );\r\n\r\n    };\r\n\r\n    Fog.prototype.toJSON = function ( /* meta */ ) {\r\n\r\n        return {\r\n            type: 'Fog',\r\n            color: this.color.getHex(),\r\n            near: this.near,\r\n            far: this.far\r\n        };\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Scene() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Scene';\r\n\r\n        this.background = null;\r\n        this.fog = null;\r\n        this.overrideMaterial = null;\r\n\r\n        this.autoUpdate = true; // checked by the renderer\r\n\r\n    }\r\n\r\n    Scene.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Scene,\r\n\r\n        copy: function ( source, recursive ) {\r\n\r\n            Object3D.prototype.copy.call( this, source, recursive );\r\n\r\n            if ( source.background !== null ) this.background = source.background.clone();\r\n            if ( source.fog !== null ) this.fog = source.fog.clone();\r\n            if ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n            this.autoUpdate = source.autoUpdate;\r\n            this.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            if ( this.background !== null ) data.object.background = this.background.toJSON( meta );\r\n            if ( this.fog !== null ) data.object.fog = this.fog.toJSON();\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *\tuvOffset: new THREE.Vector2(),\r\n\t *\tuvScale: new THREE.Vector2()\r\n\t * }\r\n     */\r\n\r\n    function SpriteMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'SpriteMaterial';\r\n\r\n        this.color = new Color( 0xffffff );\r\n        this.map = null;\r\n\r\n        this.rotation = 0;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    SpriteMaterial.prototype = Object.create( Material.prototype );\r\n    SpriteMaterial.prototype.constructor = SpriteMaterial;\r\n    SpriteMaterial.prototype.isSpriteMaterial = true;\r\n\r\n    SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n        this.map = source.map;\r\n\r\n        this.rotation = source.rotation;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Sprite( material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Sprite';\r\n\r\n        this.material = ( material !== undefined ) ? material : new SpriteMaterial();\r\n\r\n        this.center = new Vector2( 0.5, 0.5 );\r\n\r\n    }\r\n\r\n    Sprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Sprite,\r\n\r\n        isSprite: true,\r\n\r\n        raycast: ( function () {\r\n\r\n            var intersectPoint = new Vector3();\r\n            var worldPosition = new Vector3();\r\n            var worldScale = new Vector3();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                worldPosition.setFromMatrixPosition( this.matrixWorld );\r\n                raycaster.ray.closestPointToPoint( worldPosition, intersectPoint );\r\n\r\n                worldScale.setFromMatrixScale( this.matrixWorld );\r\n                var guessSizeSq = worldScale.x * worldScale.y / 4;\r\n\r\n                if ( worldPosition.distanceToSquared( intersectPoint ) > guessSizeSq ) return;\r\n\r\n                var distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n                if ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n                intersects.push( {\r\n\r\n                    distance: distance,\r\n                    point: intersectPoint.clone(),\r\n                    face: null,\r\n                    object: this\r\n\r\n                } );\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.material ).copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source );\r\n\r\n            if ( source.center !== undefined ) this.center.copy( source.center );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LOD() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'LOD';\r\n\r\n        Object.defineProperties( this, {\r\n            levels: {\r\n                enumerable: true,\r\n                value: []\r\n            }\r\n        } );\r\n\r\n    }\r\n\r\n    LOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: LOD,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source, false );\r\n\r\n            var levels = source.levels;\r\n\r\n            for ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n                var level = levels[ i ];\r\n\r\n                this.addLevel( level.object.clone(), level.distance );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        addLevel: function ( object, distance ) {\r\n\r\n            if ( distance === undefined ) distance = 0;\r\n\r\n            distance = Math.abs( distance );\r\n\r\n            var levels = this.levels;\r\n\r\n            for ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n                if ( distance < levels[ l ].distance ) {\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            levels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n            this.add( object );\r\n\r\n        },\r\n\r\n        getObjectForDistance: function ( distance ) {\r\n\r\n            var levels = this.levels;\r\n\r\n            for ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n                if ( distance < levels[ i ].distance ) {\r\n\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return levels[ i - 1 ].object;\r\n\r\n        },\r\n\r\n        raycast: ( function () {\r\n\r\n            var matrixPosition = new Vector3();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                matrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n                var distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n                this.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        update: function () {\r\n\r\n            var v1 = new Vector3();\r\n            var v2 = new Vector3();\r\n\r\n            return function update( camera ) {\r\n\r\n                var levels = this.levels;\r\n\r\n                if ( levels.length > 1 ) {\r\n\r\n                    v1.setFromMatrixPosition( camera.matrixWorld );\r\n                    v2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n                    var distance = v1.distanceTo( v2 );\r\n\r\n                    levels[ 0 ].object.visible = true;\r\n\r\n                    for ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n                        if ( distance >= levels[ i ].distance ) {\r\n\r\n                            levels[ i - 1 ].object.visible = false;\r\n                            levels[ i ].object.visible = true;\r\n\r\n                        } else {\r\n\r\n                            break;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    for ( ; i < l; i ++ ) {\r\n\r\n                        levels[ i ].object.visible = false;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.levels = [];\r\n\r\n            var levels = this.levels;\r\n\r\n            for ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n                var level = levels[ i ];\r\n\r\n                data.object.levels.push( {\r\n                    object: level.object.uuid,\r\n                    distance: level.distance\r\n                } );\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author michael guerrero / http://realitymeltdown.com\r\n     * @author ikerr / http://verold.com\r\n     */\r\n\r\n    function Skeleton( bones, boneInverses ) {\r\n\r\n        // copy the bone array\r\n\r\n        bones = bones || [];\r\n\r\n        this.bones = bones.slice( 0 );\r\n        this.boneMatrices = new Float32Array( this.bones.length * 16 );\r\n\r\n        // use the supplied bone inverses or calculate the inverses\r\n\r\n        if ( boneInverses === undefined ) {\r\n\r\n            this.calculateInverses();\r\n\r\n        } else {\r\n\r\n            if ( this.bones.length === boneInverses.length ) {\r\n\r\n                this.boneInverses = boneInverses.slice( 0 );\r\n\r\n            } else {\r\n\r\n                console.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\r\n\r\n                this.boneInverses = [];\r\n\r\n                for ( var i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                    this.boneInverses.push( new Matrix4() );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Skeleton.prototype, {\r\n\r\n        calculateInverses: function () {\r\n\r\n            this.boneInverses = [];\r\n\r\n            for ( var i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                var inverse = new Matrix4();\r\n\r\n                if ( this.bones[ i ] ) {\r\n\r\n                    inverse.getInverse( this.bones[ i ].matrixWorld );\r\n\r\n                }\r\n\r\n                this.boneInverses.push( inverse );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        pose: function () {\r\n\r\n            var bone, i, il;\r\n\r\n            // recover the bind-time world matrices\r\n\r\n            for ( i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                bone = this.bones[ i ];\r\n\r\n                if ( bone ) {\r\n\r\n                    bone.matrixWorld.getInverse( this.boneInverses[ i ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // compute the local matrices, positions, rotations and scales\r\n\r\n            for ( i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                bone = this.bones[ i ];\r\n\r\n                if ( bone ) {\r\n\r\n                    if ( bone.parent && bone.parent.isBone ) {\r\n\r\n                        bone.matrix.getInverse( bone.parent.matrixWorld );\r\n                        bone.matrix.multiply( bone.matrixWorld );\r\n\r\n                    } else {\r\n\r\n                        bone.matrix.copy( bone.matrixWorld );\r\n\r\n                    }\r\n\r\n                    bone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        update: ( function () {\r\n\r\n            var offsetMatrix = new Matrix4();\r\n            var identityMatrix = new Matrix4();\r\n\r\n            return function update() {\r\n\r\n                var bones = this.bones;\r\n                var boneInverses = this.boneInverses;\r\n                var boneMatrices = this.boneMatrices;\r\n                var boneTexture = this.boneTexture;\r\n\r\n                // flatten bone matrices to array\r\n\r\n                for ( var i = 0, il = bones.length; i < il; i ++ ) {\r\n\r\n                    // compute the offset between the current and the original transform\r\n\r\n                    var matrix = bones[ i ] ? bones[ i ].matrixWorld : identityMatrix;\r\n\r\n                    offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\r\n                    offsetMatrix.toArray( boneMatrices, i * 16 );\r\n\r\n                }\r\n\r\n                if ( boneTexture !== undefined ) {\r\n\r\n                    boneTexture.needsUpdate = true;\r\n\r\n                }\r\n\r\n            };\r\n\r\n        } )(),\r\n\r\n        clone: function () {\r\n\r\n            return new Skeleton( this.bones, this.boneInverses );\r\n\r\n        },\r\n\r\n        getBoneByName: function ( name ) {\r\n\r\n            for ( var i = 0, il = this.bones.length; i < il; i ++ ) {\r\n\r\n                var bone = this.bones[ i ];\r\n\r\n                if ( bone.name === name ) {\r\n\r\n                    return bone;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return undefined;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author ikerr / http://verold.com\r\n     */\r\n\r\n    function Bone() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Bone';\r\n\r\n    }\r\n\r\n    Bone.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Bone,\r\n\r\n        isBone: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mikael emtinger / http://gomo.se/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author ikerr / http://verold.com\r\n     */\r\n\r\n    function SkinnedMesh( geometry, material ) {\r\n\r\n        Mesh.call( this, geometry, material );\r\n\r\n        this.type = 'SkinnedMesh';\r\n\r\n        this.bindMode = 'attached';\r\n        this.bindMatrix = new Matrix4();\r\n        this.bindMatrixInverse = new Matrix4();\r\n\r\n        var bones = this.initBones();\r\n        var skeleton = new Skeleton( bones );\r\n\r\n        this.bind( skeleton, this.matrixWorld );\r\n\r\n        this.normalizeSkinWeights();\r\n\r\n    }\r\n\r\n    SkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\r\n\r\n        constructor: SkinnedMesh,\r\n\r\n        isSkinnedMesh: true,\r\n\r\n        initBones: function () {\r\n\r\n            var bones = [], bone, gbone;\r\n            var i, il;\r\n\r\n            if ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n                // first, create array of 'Bone' objects from geometry data\r\n\r\n                for ( i = 0, il = this.geometry.bones.length; i < il; i ++ ) {\r\n\r\n                    gbone = this.geometry.bones[ i ];\r\n\r\n                    // create new 'Bone' object\r\n\r\n                    bone = new Bone();\r\n                    bones.push( bone );\r\n\r\n                    // apply values\r\n\r\n                    bone.name = gbone.name;\r\n                    bone.position.fromArray( gbone.pos );\r\n                    bone.quaternion.fromArray( gbone.rotq );\r\n                    if ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n                }\r\n\r\n                // second, create bone hierarchy\r\n\r\n                for ( i = 0, il = this.geometry.bones.length; i < il; i ++ ) {\r\n\r\n                    gbone = this.geometry.bones[ i ];\r\n\r\n                    if ( ( gbone.parent !== - 1 ) && ( gbone.parent !== null ) && ( bones[ gbone.parent ] !== undefined ) ) {\r\n\r\n                        // subsequent bones in the hierarchy\r\n\r\n                        bones[ gbone.parent ].add( bones[ i ] );\r\n\r\n                    } else {\r\n\r\n                        // topmost bone, immediate child of the skinned mesh\r\n\r\n                        this.add( bones[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // now the bones are part of the scene graph and children of the skinned mesh.\r\n            // let's update the corresponding matrices\r\n\r\n            this.updateMatrixWorld( true );\r\n\r\n            return bones;\r\n\r\n        },\r\n\r\n        bind: function ( skeleton, bindMatrix ) {\r\n\r\n            this.skeleton = skeleton;\r\n\r\n            if ( bindMatrix === undefined ) {\r\n\r\n                this.updateMatrixWorld( true );\r\n\r\n                this.skeleton.calculateInverses();\r\n\r\n                bindMatrix = this.matrixWorld;\r\n\r\n            }\r\n\r\n            this.bindMatrix.copy( bindMatrix );\r\n            this.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n        },\r\n\r\n        pose: function () {\r\n\r\n            this.skeleton.pose();\r\n\r\n        },\r\n\r\n        normalizeSkinWeights: function () {\r\n\r\n            var scale, i;\r\n\r\n            if ( this.geometry && this.geometry.isGeometry ) {\r\n\r\n                for ( i = 0; i < this.geometry.skinWeights.length; i ++ ) {\r\n\r\n                    var sw = this.geometry.skinWeights[ i ];\r\n\r\n                    scale = 1.0 / sw.manhattanLength();\r\n\r\n                    if ( scale !== Infinity ) {\r\n\r\n                        sw.multiplyScalar( scale );\r\n\r\n                    } else {\r\n\r\n                        sw.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( this.geometry && this.geometry.isBufferGeometry ) {\r\n\r\n                var vec = new Vector4();\r\n\r\n                var skinWeight = this.geometry.attributes.skinWeight;\r\n\r\n                for ( i = 0; i < skinWeight.count; i ++ ) {\r\n\r\n                    vec.x = skinWeight.getX( i );\r\n                    vec.y = skinWeight.getY( i );\r\n                    vec.z = skinWeight.getZ( i );\r\n                    vec.w = skinWeight.getW( i );\r\n\r\n                    scale = 1.0 / vec.manhattanLength();\r\n\r\n                    if ( scale !== Infinity ) {\r\n\r\n                        vec.multiplyScalar( scale );\r\n\r\n                    } else {\r\n\r\n                        vec.set( 1, 0, 0, 0 ); // do something reasonable\r\n\r\n                    }\r\n\r\n                    skinWeight.setXYZW( i, vec.x, vec.y, vec.z, vec.w );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        updateMatrixWorld: function ( force ) {\r\n\r\n            Mesh.prototype.updateMatrixWorld.call( this, force );\r\n\r\n            if ( this.bindMode === 'attached' ) {\r\n\r\n                this.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n            } else if ( this.bindMode === 'detached' ) {\r\n\r\n                this.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n            } else {\r\n\r\n                console.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *  linecap: \"round\",\r\n\t *  linejoin: \"round\"\r\n\t * }\r\n     */\r\n\r\n    function LineBasicMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'LineBasicMaterial';\r\n\r\n        this.color = new Color( 0xffffff );\r\n\r\n        this.linewidth = 1;\r\n        this.linecap = 'round';\r\n        this.linejoin = 'round';\r\n\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    LineBasicMaterial.prototype = Object.create( Material.prototype );\r\n    LineBasicMaterial.prototype.constructor = LineBasicMaterial;\r\n\r\n    LineBasicMaterial.prototype.isLineBasicMaterial = true;\r\n\r\n    LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.linewidth = source.linewidth;\r\n        this.linecap = source.linecap;\r\n        this.linejoin = source.linejoin;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Line( geometry, material, mode ) {\r\n\r\n        if ( mode === 1 ) {\r\n\r\n            console.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n            return new LineSegments( geometry, material );\r\n\r\n        }\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Line';\r\n\r\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n        this.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n    }\r\n\r\n    Line.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Line,\r\n\r\n        isLine: true,\r\n\r\n        computeLineDistances: ( function () {\r\n\r\n            var start = new Vector3();\r\n            var end = new Vector3();\r\n\r\n            return function computeLineDistances() {\r\n\r\n                var geometry = this.geometry;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    // we assume non-indexed geometry\r\n\r\n                    if ( geometry.index === null ) {\r\n\r\n                        var positionAttribute = geometry.attributes.position;\r\n                        var lineDistances = [ 0 ];\r\n\r\n                        for ( var i = 1, l = positionAttribute.count; i < l; i ++ ) {\r\n\r\n                            start.fromBufferAttribute( positionAttribute, i - 1 );\r\n                            end.fromBufferAttribute( positionAttribute, i );\r\n\r\n                            lineDistances[ i ] = lineDistances[ i - 1 ];\r\n                            lineDistances[ i ] += start.distanceTo( end );\r\n\r\n                        }\r\n\r\n                        geometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var lineDistances = geometry.lineDistances;\r\n\r\n                    lineDistances[ 0 ] = 0;\r\n\r\n                    for ( var i = 1, l = vertices.length; i < l; i ++ ) {\r\n\r\n                        lineDistances[ i ] = lineDistances[ i - 1 ];\r\n                        lineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        raycast: ( function () {\r\n\r\n            var inverseMatrix = new Matrix4();\r\n            var ray = new Ray();\r\n            var sphere = new Sphere();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                var precision = raycaster.linePrecision;\r\n                var precisionSq = precision * precision;\r\n\r\n                var geometry = this.geometry;\r\n                var matrixWorld = this.matrixWorld;\r\n\r\n                // Checking boundingSphere distance to ray\r\n\r\n                if ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere );\r\n                sphere.applyMatrix4( matrixWorld );\r\n\r\n                if ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n                //\r\n\r\n                inverseMatrix.getInverse( matrixWorld );\r\n                ray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n                var vStart = new Vector3();\r\n                var vEnd = new Vector3();\r\n                var interSegment = new Vector3();\r\n                var interRay = new Vector3();\r\n                var step = ( this && this.isLineSegments ) ? 2 : 1;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    var index = geometry.index;\r\n                    var attributes = geometry.attributes;\r\n                    var positions = attributes.position.array;\r\n\r\n                    if ( index !== null ) {\r\n\r\n                        var indices = index.array;\r\n\r\n                        for ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n                            var a = indices[ i ];\r\n                            var b = indices[ i + 1 ];\r\n\r\n                            vStart.fromArray( positions, a * 3 );\r\n                            vEnd.fromArray( positions, b * 3 );\r\n\r\n                            var distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n                            if ( distSq > precisionSq ) continue;\r\n\r\n                            interRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n                            var distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n                            if ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n                            intersects.push( {\r\n\r\n                                distance: distance,\r\n                                // What do we want? intersection point on the ray or on the segment??\r\n                                // point: raycaster.ray.at( distance ),\r\n                                point: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n                                index: i,\r\n                                face: null,\r\n                                faceIndex: null,\r\n                                object: this\r\n\r\n                            } );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        for ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n                            vStart.fromArray( positions, 3 * i );\r\n                            vEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n                            var distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n                            if ( distSq > precisionSq ) continue;\r\n\r\n                            interRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n                            var distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n                            if ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n                            intersects.push( {\r\n\r\n                                distance: distance,\r\n                                // What do we want? intersection point on the ray or on the segment??\r\n                                // point: raycaster.ray.at( distance ),\r\n                                point: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n                                index: i,\r\n                                face: null,\r\n                                faceIndex: null,\r\n                                object: this\r\n\r\n                            } );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var nbVertices = vertices.length;\r\n\r\n                    for ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n                        var distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n                        if ( distSq > precisionSq ) continue;\r\n\r\n                        interRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n                        var distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n                        if ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n                        intersects.push( {\r\n\r\n                            distance: distance,\r\n                            // What do we want? intersection point on the ray or on the segment??\r\n                            // point: raycaster.ray.at( distance ),\r\n                            point: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n                            index: i,\r\n                            face: null,\r\n                            faceIndex: null,\r\n                            object: this\r\n\r\n                        } );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LineSegments( geometry, material ) {\r\n\r\n        Line.call( this, geometry, material );\r\n\r\n        this.type = 'LineSegments';\r\n\r\n    }\r\n\r\n    LineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n        constructor: LineSegments,\r\n\r\n        isLineSegments: true,\r\n\r\n        computeLineDistances: ( function () {\r\n\r\n            var start = new Vector3();\r\n            var end = new Vector3();\r\n\r\n            return function computeLineDistances() {\r\n\r\n                var geometry = this.geometry;\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    // we assume non-indexed geometry\r\n\r\n                    if ( geometry.index === null ) {\r\n\r\n                        var positionAttribute = geometry.attributes.position;\r\n                        var lineDistances = [];\r\n\r\n                        for ( var i = 0, l = positionAttribute.count; i < l; i += 2 ) {\r\n\r\n                            start.fromBufferAttribute( positionAttribute, i );\r\n                            end.fromBufferAttribute( positionAttribute, i + 1 );\r\n\r\n                            lineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n                            lineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\r\n\r\n                        }\r\n\r\n                        geometry.addAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\r\n\r\n                    } else {\r\n\r\n                        console.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\r\n\r\n                    }\r\n\r\n                } else if ( geometry.isGeometry ) {\r\n\r\n                    var vertices = geometry.vertices;\r\n                    var lineDistances = geometry.lineDistances;\r\n\r\n                    for ( var i = 0, l = vertices.length; i < l; i += 2 ) {\r\n\r\n                        start.copy( vertices[ i ] );\r\n                        end.copy( vertices[ i + 1 ] );\r\n\r\n                        lineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\r\n                        lineDistances[ i + 1 ] = lineDistances[ i ] + start.distanceTo( end );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }() )\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mgreter / http://github.com/mgreter\r\n     */\r\n\r\n    function LineLoop( geometry, material ) {\r\n\r\n        Line.call( this, geometry, material );\r\n\r\n        this.type = 'LineLoop';\r\n\r\n    }\r\n\r\n    LineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\r\n\r\n        constructor: LineLoop,\r\n\r\n        isLineLoop: true,\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  size: <float>,\r\n\t *  sizeAttenuation: <bool>\r\n\t *\r\n\t *  morphTargets: <bool>\r\n\t * }\r\n     */\r\n\r\n    function PointsMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'PointsMaterial';\r\n\r\n        this.color = new Color( 0xffffff );\r\n\r\n        this.map = null;\r\n\r\n        this.size = 1;\r\n        this.sizeAttenuation = true;\r\n\r\n        this.morphTargets = false;\r\n\r\n        this.lights = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    PointsMaterial.prototype = Object.create( Material.prototype );\r\n    PointsMaterial.prototype.constructor = PointsMaterial;\r\n\r\n    PointsMaterial.prototype.isPointsMaterial = true;\r\n\r\n    PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.map = source.map;\r\n\r\n        this.size = source.size;\r\n        this.sizeAttenuation = source.sizeAttenuation;\r\n\r\n        this.morphTargets = source.morphTargets;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Points( geometry, material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Points';\r\n\r\n        this.geometry = geometry !== undefined ? geometry : new BufferGeometry();\r\n        this.material = material !== undefined ? material : new PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n    }\r\n\r\n    Points.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Points,\r\n\r\n        isPoints: true,\r\n\r\n        raycast: ( function () {\r\n\r\n            var inverseMatrix = new Matrix4();\r\n            var ray = new Ray();\r\n            var sphere = new Sphere();\r\n\r\n            return function raycast( raycaster, intersects ) {\r\n\r\n                var object = this;\r\n                var geometry = this.geometry;\r\n                var matrixWorld = this.matrixWorld;\r\n                var threshold = raycaster.params.Points.threshold;\r\n\r\n                // Checking boundingSphere distance to ray\r\n\r\n                if ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n                sphere.copy( geometry.boundingSphere );\r\n                sphere.applyMatrix4( matrixWorld );\r\n                sphere.radius += threshold;\r\n\r\n                if ( raycaster.ray.intersectsSphere( sphere ) === false ) return;\r\n\r\n                //\r\n\r\n                inverseMatrix.getInverse( matrixWorld );\r\n                ray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n                var localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n                var localThresholdSq = localThreshold * localThreshold;\r\n                var position = new Vector3();\r\n                var intersectPoint = new Vector3();\r\n\r\n                function testPoint( point, index ) {\r\n\r\n                    var rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n                    if ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n                        ray.closestPointToPoint( point, intersectPoint );\r\n                        intersectPoint.applyMatrix4( matrixWorld );\r\n\r\n                        var distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n                        if ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n                        intersects.push( {\r\n\r\n                            distance: distance,\r\n                            distanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n                            point: intersectPoint.clone(),\r\n                            index: index,\r\n                            face: null,\r\n                            object: object\r\n\r\n                        } );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( geometry.isBufferGeometry ) {\r\n\r\n                    var index = geometry.index;\r\n                    var attributes = geometry.attributes;\r\n                    var positions = attributes.position.array;\r\n\r\n                    if ( index !== null ) {\r\n\r\n                        var indices = index.array;\r\n\r\n                        for ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n                            var a = indices[ i ];\r\n\r\n                            position.fromArray( positions, a * 3 );\r\n\r\n                            testPoint( position, a );\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        for ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n                            position.fromArray( positions, i * 3 );\r\n\r\n                            testPoint( position, i );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    var vertices = geometry.vertices;\r\n\r\n                    for ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n                        testPoint( vertices[ i ], i );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Group() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Group';\r\n\r\n    }\r\n\r\n    Group.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Group,\r\n\r\n        isGroup: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n        Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n        this.generateMipmaps = false;\r\n\r\n    }\r\n\r\n    VideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\r\n\r\n        constructor: VideoTexture,\r\n\r\n        isVideoTexture: true,\r\n\r\n        update: function () {\r\n\r\n            var video = this.image;\r\n\r\n            if ( video.readyState >= video.HAVE_CURRENT_DATA ) {\r\n\r\n                this.needsUpdate = true;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\r\n\r\n        Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\r\n\r\n        this.image = { width: width, height: height };\r\n        this.mipmaps = mipmaps;\r\n\r\n        // no flipping for cube textures\r\n        // (also flipping doesn't work for compressed textures )\r\n\r\n        this.flipY = false;\r\n\r\n        // can't generate mipmaps for compressed textures\r\n        // mips must be embedded in DDS files\r\n\r\n        this.generateMipmaps = false;\r\n\r\n    }\r\n\r\n    CompressedTexture.prototype = Object.create( Texture.prototype );\r\n    CompressedTexture.prototype.constructor = CompressedTexture;\r\n\r\n    CompressedTexture.prototype.isCompressedTexture = true;\r\n\r\n    /**\r\n     * @author Matt DesLauriers / @mattdesl\r\n     * @author atix / arthursilber.de\r\n     */\r\n\r\n    function DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\r\n\r\n        format = format !== undefined ? format : DepthFormat;\r\n\r\n        if ( format !== DepthFormat && format !== DepthStencilFormat ) {\r\n\r\n            throw new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\r\n\r\n        }\r\n\r\n        if ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\r\n        if ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\r\n\r\n        Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n        this.image = { width: width, height: height };\r\n\r\n        this.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\r\n        this.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\r\n\r\n        this.flipY = false;\r\n        this.generateMipmaps\t= false;\r\n\r\n    }\r\n\r\n    DepthTexture.prototype = Object.create( Texture.prototype );\r\n    DepthTexture.prototype.constructor = DepthTexture;\r\n    DepthTexture.prototype.isDepthTexture = true;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function WireframeGeometry( geometry ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'WireframeGeometry';\r\n\r\n        // buffer\r\n\r\n        var vertices = [];\r\n\r\n        // helper variables\r\n\r\n        var i, j, l, o, ol;\r\n        var edge = [ 0, 0 ], edges = {}, e, edge1, edge2;\r\n        var key, keys = [ 'a', 'b', 'c' ];\r\n        var vertex;\r\n\r\n        // different logic for Geometry and BufferGeometry\r\n\r\n        if ( geometry && geometry.isGeometry ) {\r\n\r\n            // create a data structure that contains all edges without duplicates\r\n\r\n            var faces = geometry.faces;\r\n\r\n            for ( i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                for ( j = 0; j < 3; j ++ ) {\r\n\r\n                    edge1 = face[ keys[ j ] ];\r\n                    edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n                    edge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n                    edge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n                    key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n                    if ( edges[ key ] === undefined ) {\r\n\r\n                        edges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // generate vertices\r\n\r\n            for ( key in edges ) {\r\n\r\n                e = edges[ key ];\r\n\r\n                vertex = geometry.vertices[ e.index1 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                vertex = geometry.vertices[ e.index2 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n        } else if ( geometry && geometry.isBufferGeometry ) {\r\n\r\n            var position, indices, groups;\r\n            var group, start, count;\r\n            var index1, index2;\r\n\r\n            vertex = new Vector3();\r\n\r\n            if ( geometry.index !== null ) {\r\n\r\n                // indexed BufferGeometry\r\n\r\n                position = geometry.attributes.position;\r\n                indices = geometry.index;\r\n                groups = geometry.groups;\r\n\r\n                if ( groups.length === 0 ) {\r\n\r\n                    groups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\r\n\r\n                }\r\n\r\n                // create a data structure that contains all eges without duplicates\r\n\r\n                for ( o = 0, ol = groups.length; o < ol; ++ o ) {\r\n\r\n                    group = groups[ o ];\r\n\r\n                    start = group.start;\r\n                    count = group.count;\r\n\r\n                    for ( i = start, l = ( start + count ); i < l; i += 3 ) {\r\n\r\n                        for ( j = 0; j < 3; j ++ ) {\r\n\r\n                            edge1 = indices.getX( i + j );\r\n                            edge2 = indices.getX( i + ( j + 1 ) % 3 );\r\n                            edge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\r\n                            edge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n                            key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n                            if ( edges[ key ] === undefined ) {\r\n\r\n                                edges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // generate vertices\r\n\r\n                for ( key in edges ) {\r\n\r\n                    e = edges[ key ];\r\n\r\n                    vertex.fromBufferAttribute( position, e.index1 );\r\n                    vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                    vertex.fromBufferAttribute( position, e.index2 );\r\n                    vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                // non-indexed BufferGeometry\r\n\r\n                position = geometry.attributes.position;\r\n\r\n                for ( i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\r\n\r\n                    for ( j = 0; j < 3; j ++ ) {\r\n\r\n                        // three edges per triangle, an edge is represented as (index1, index2)\r\n                        // e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\r\n\r\n                        index1 = 3 * i + j;\r\n                        vertex.fromBufferAttribute( position, index1 );\r\n                        vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                        index2 = 3 * i + ( ( j + 1 ) % 3 );\r\n                        vertex.fromBufferAttribute( position, index2 );\r\n                        vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n    }\r\n\r\n    WireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    WireframeGeometry.prototype.constructor = WireframeGeometry;\r\n\r\n    /**\r\n     * @author zz85 / https://github.com/zz85\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     * Parametric Surfaces Geometry\r\n     * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n     */\r\n\r\n    // ParametricGeometry\r\n\r\n    function ParametricGeometry( func, slices, stacks ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'ParametricGeometry';\r\n\r\n        this.parameters = {\r\n            func: func,\r\n            slices: slices,\r\n            stacks: stacks\r\n        };\r\n\r\n        this.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    ParametricGeometry.prototype = Object.create( Geometry.prototype );\r\n    ParametricGeometry.prototype.constructor = ParametricGeometry;\r\n\r\n    // ParametricBufferGeometry\r\n\r\n    function ParametricBufferGeometry( func, slices, stacks ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'ParametricBufferGeometry';\r\n\r\n        this.parameters = {\r\n            func: func,\r\n            slices: slices,\r\n            stacks: stacks\r\n        };\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        var EPS = 0.00001;\r\n\r\n        var normal = new Vector3();\r\n\r\n        var p0 = new Vector3(), p1 = new Vector3();\r\n        var pu = new Vector3(), pv = new Vector3();\r\n\r\n        var i, j;\r\n\r\n        if ( func.length < 3 ) {\r\n\r\n            console.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\r\n\r\n        }\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        var sliceCount = slices + 1;\r\n\r\n        for ( i = 0; i <= stacks; i ++ ) {\r\n\r\n            var v = i / stacks;\r\n\r\n            for ( j = 0; j <= slices; j ++ ) {\r\n\r\n                var u = j / slices;\r\n\r\n                // vertex\r\n\r\n                func( u, v, p0 );\r\n                vertices.push( p0.x, p0.y, p0.z );\r\n\r\n                // normal\r\n\r\n                // approximate tangent vectors via finite differences\r\n\r\n                if ( u - EPS >= 0 ) {\r\n\r\n                    func( u - EPS, v, p1 );\r\n                    pu.subVectors( p0, p1 );\r\n\r\n                } else {\r\n\r\n                    func( u + EPS, v, p1 );\r\n                    pu.subVectors( p1, p0 );\r\n\r\n                }\r\n\r\n                if ( v - EPS >= 0 ) {\r\n\r\n                    func( u, v - EPS, p1 );\r\n                    pv.subVectors( p0, p1 );\r\n\r\n                } else {\r\n\r\n                    func( u, v + EPS, p1 );\r\n                    pv.subVectors( p1, p0 );\r\n\r\n                }\r\n\r\n                // cross product of tangent vectors returns surface normal\r\n\r\n                normal.crossVectors( pu, pv ).normalize();\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( u, v );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate indices\r\n\r\n        for ( i = 0; i < stacks; i ++ ) {\r\n\r\n            for ( j = 0; j < slices; j ++ ) {\r\n\r\n                var a = i * sliceCount + j;\r\n                var b = i * sliceCount + j + 1;\r\n                var c = ( i + 1 ) * sliceCount + j + 1;\r\n                var d = ( i + 1 ) * sliceCount + j;\r\n\r\n                // faces one and two\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    ParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    ParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\r\n\r\n    /**\r\n     * @author clockworkgeek / https://github.com/clockworkgeek\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // PolyhedronGeometry\r\n\r\n    function PolyhedronGeometry( vertices, indices, radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'PolyhedronGeometry';\r\n\r\n        this.parameters = {\r\n            vertices: vertices,\r\n            indices: indices,\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    PolyhedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    PolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\r\n\r\n    // PolyhedronBufferGeometry\r\n\r\n    function PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'PolyhedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            vertices: vertices,\r\n            indices: indices,\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        radius = radius || 1;\r\n        detail = detail || 0;\r\n\r\n        // default buffer data\r\n\r\n        var vertexBuffer = [];\r\n        var uvBuffer = [];\r\n\r\n        // the subdivision creates the vertex buffer data\r\n\r\n        subdivide( detail );\r\n\r\n        // all vertices should lie on a conceptual sphere with a given radius\r\n\r\n        appplyRadius( radius );\r\n\r\n        // finally, create the uv data\r\n\r\n        generateUVs();\r\n\r\n        // build non-indexed geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\r\n\r\n        if ( detail === 0 ) {\r\n\r\n            this.computeVertexNormals(); // flat normals\r\n\r\n        } else {\r\n\r\n            this.normalizeNormals(); // smooth normals\r\n\r\n        }\r\n\r\n        // helper functions\r\n\r\n        function subdivide( detail ) {\r\n\r\n            var a = new Vector3();\r\n            var b = new Vector3();\r\n            var c = new Vector3();\r\n\r\n            // iterate over all faces and apply a subdivison with the given detail value\r\n\r\n            for ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n                // get the vertices of the face\r\n\r\n                getVertexByIndex( indices[ i + 0 ], a );\r\n                getVertexByIndex( indices[ i + 1 ], b );\r\n                getVertexByIndex( indices[ i + 2 ], c );\r\n\r\n                // perform subdivision\r\n\r\n                subdivideFace( a, b, c, detail );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function subdivideFace( a, b, c, detail ) {\r\n\r\n            var cols = Math.pow( 2, detail );\r\n\r\n            // we use this multidimensional array as a data structure for creating the subdivision\r\n\r\n            var v = [];\r\n\r\n            var i, j;\r\n\r\n            // construct all of the vertices for this subdivision\r\n\r\n            for ( i = 0; i <= cols; i ++ ) {\r\n\r\n                v[ i ] = [];\r\n\r\n                var aj = a.clone().lerp( c, i / cols );\r\n                var bj = b.clone().lerp( c, i / cols );\r\n\r\n                var rows = cols - i;\r\n\r\n                for ( j = 0; j <= rows; j ++ ) {\r\n\r\n                    if ( j === 0 && i === cols ) {\r\n\r\n                        v[ i ][ j ] = aj;\r\n\r\n                    } else {\r\n\r\n                        v[ i ][ j ] = aj.clone().lerp( bj, j / rows );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // construct all of the faces\r\n\r\n            for ( i = 0; i < cols; i ++ ) {\r\n\r\n                for ( j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n                    var k = Math.floor( j / 2 );\r\n\r\n                    if ( j % 2 === 0 ) {\r\n\r\n                        pushVertex( v[ i ][ k + 1 ] );\r\n                        pushVertex( v[ i + 1 ][ k ] );\r\n                        pushVertex( v[ i ][ k ] );\r\n\r\n                    } else {\r\n\r\n                        pushVertex( v[ i ][ k + 1 ] );\r\n                        pushVertex( v[ i + 1 ][ k + 1 ] );\r\n                        pushVertex( v[ i + 1 ][ k ] );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function appplyRadius( radius ) {\r\n\r\n            var vertex = new Vector3();\r\n\r\n            // iterate over the entire buffer and apply the radius to each vertex\r\n\r\n            for ( var i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n                vertex.x = vertexBuffer[ i + 0 ];\r\n                vertex.y = vertexBuffer[ i + 1 ];\r\n                vertex.z = vertexBuffer[ i + 2 ];\r\n\r\n                vertex.normalize().multiplyScalar( radius );\r\n\r\n                vertexBuffer[ i + 0 ] = vertex.x;\r\n                vertexBuffer[ i + 1 ] = vertex.y;\r\n                vertexBuffer[ i + 2 ] = vertex.z;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function generateUVs() {\r\n\r\n            var vertex = new Vector3();\r\n\r\n            for ( var i = 0; i < vertexBuffer.length; i += 3 ) {\r\n\r\n                vertex.x = vertexBuffer[ i + 0 ];\r\n                vertex.y = vertexBuffer[ i + 1 ];\r\n                vertex.z = vertexBuffer[ i + 2 ];\r\n\r\n                var u = azimuth( vertex ) / 2 / Math.PI + 0.5;\r\n                var v = inclination( vertex ) / Math.PI + 0.5;\r\n                uvBuffer.push( u, 1 - v );\r\n\r\n            }\r\n\r\n            correctUVs();\r\n\r\n            correctSeam();\r\n\r\n        }\r\n\r\n        function correctSeam() {\r\n\r\n            // handle case when face straddles the seam, see #3269\r\n\r\n            for ( var i = 0; i < uvBuffer.length; i += 6 ) {\r\n\r\n                // uv data of a single face\r\n\r\n                var x0 = uvBuffer[ i + 0 ];\r\n                var x1 = uvBuffer[ i + 2 ];\r\n                var x2 = uvBuffer[ i + 4 ];\r\n\r\n                var max = Math.max( x0, x1, x2 );\r\n                var min = Math.min( x0, x1, x2 );\r\n\r\n                // 0.9 is somewhat arbitrary\r\n\r\n                if ( max > 0.9 && min < 0.1 ) {\r\n\r\n                    if ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\r\n                    if ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\r\n                    if ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function pushVertex( vertex ) {\r\n\r\n            vertexBuffer.push( vertex.x, vertex.y, vertex.z );\r\n\r\n        }\r\n\r\n        function getVertexByIndex( index, vertex ) {\r\n\r\n            var stride = index * 3;\r\n\r\n            vertex.x = vertices[ stride + 0 ];\r\n            vertex.y = vertices[ stride + 1 ];\r\n            vertex.z = vertices[ stride + 2 ];\r\n\r\n        }\r\n\r\n        function correctUVs() {\r\n\r\n            var a = new Vector3();\r\n            var b = new Vector3();\r\n            var c = new Vector3();\r\n\r\n            var centroid = new Vector3();\r\n\r\n            var uvA = new Vector2();\r\n            var uvB = new Vector2();\r\n            var uvC = new Vector2();\r\n\r\n            for ( var i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\r\n\r\n                a.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\r\n                b.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\r\n                c.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\r\n\r\n                uvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\r\n                uvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\r\n                uvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\r\n\r\n                centroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\r\n\r\n                var azi = azimuth( centroid );\r\n\r\n                correctUV( uvA, j + 0, a, azi );\r\n                correctUV( uvB, j + 2, b, azi );\r\n                correctUV( uvC, j + 4, c, azi );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function correctUV( uv, stride, vector, azimuth ) {\r\n\r\n            if ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\r\n\r\n                uvBuffer[ stride ] = uv.x - 1;\r\n\r\n            }\r\n\r\n            if ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\r\n\r\n                uvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n        function azimuth( vector ) {\r\n\r\n            return Math.atan2( vector.z, - vector.x );\r\n\r\n        }\r\n\r\n\r\n        // Angle above the XZ plane.\r\n\r\n        function inclination( vector ) {\r\n\r\n            return Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    PolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    PolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\r\n\r\n    /**\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // TetrahedronGeometry\r\n\r\n    function TetrahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TetrahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TetrahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    TetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\r\n\r\n    // TetrahedronBufferGeometry\r\n\r\n    function TetrahedronBufferGeometry( radius, detail ) {\r\n\r\n        var vertices = [\r\n            1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\r\n        ];\r\n\r\n        var indices = [\r\n            2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'TetrahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    TetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    TetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // OctahedronGeometry\r\n\r\n    function OctahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'OctahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    OctahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    OctahedronGeometry.prototype.constructor = OctahedronGeometry;\r\n\r\n    // OctahedronBufferGeometry\r\n\r\n    function OctahedronBufferGeometry( radius, detail ) {\r\n\r\n        var vertices = [\r\n            1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\r\n            0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\r\n        ];\r\n\r\n        var indices = [\r\n            0, 2, 4,\t0, 4, 3,\t0, 3, 5,\r\n            0, 5, 2,\t1, 2, 5,\t1, 5, 3,\r\n            1, 3, 4,\t1, 4, 2\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'OctahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    OctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    OctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author timothypratley / https://github.com/timothypratley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // IcosahedronGeometry\r\n\r\n    function IcosahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'IcosahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    IcosahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    IcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\r\n\r\n    // IcosahedronBufferGeometry\r\n\r\n    function IcosahedronBufferGeometry( radius, detail ) {\r\n\r\n        var t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n        var vertices = [\r\n            - 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\r\n            0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\r\n            t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\r\n        ];\r\n\r\n        var indices = [\r\n            0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\r\n            1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\r\n            3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\r\n            4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'IcosahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    IcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    IcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author Abe Pazos / https://hamoid.com\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // DodecahedronGeometry\r\n\r\n    function DodecahedronGeometry( radius, detail ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'DodecahedronGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n        this.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    DodecahedronGeometry.prototype = Object.create( Geometry.prototype );\r\n    DodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\r\n\r\n    // DodecahedronBufferGeometry\r\n\r\n    function DodecahedronBufferGeometry( radius, detail ) {\r\n\r\n        var t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n        var r = 1 / t;\r\n\r\n        var vertices = [\r\n\r\n            // (1, 1, 1)\r\n            - 1, - 1, - 1,\t- 1, - 1, 1,\r\n            - 1, 1, - 1, - 1, 1, 1,\r\n            1, - 1, - 1, 1, - 1, 1,\r\n            1, 1, - 1, 1, 1, 1,\r\n\r\n            // (0, 1/, )\r\n            0, - r, - t, 0, - r, t,\r\n            0, r, - t, 0, r, t,\r\n\r\n            // (1/, , 0)\r\n            - r, - t, 0, - r, t, 0,\r\n            r, - t, 0, r, t, 0,\r\n\r\n            // (, 0, 1/)\r\n            - t, 0, - r, t, 0, - r,\r\n            - t, 0, r, t, 0, r\r\n        ];\r\n\r\n        var indices = [\r\n            3, 11, 7, \t3, 7, 15, \t3, 15, 13,\r\n            7, 19, 17, \t7, 17, 6, \t7, 6, 15,\r\n            17, 4, 8, \t17, 8, 10, \t17, 10, 6,\r\n            8, 0, 16, \t8, 16, 2, \t8, 2, 10,\r\n            0, 12, 1, \t0, 1, 18, \t0, 18, 16,\r\n            6, 10, 2, \t6, 2, 13, \t6, 13, 15,\r\n            2, 16, 18, \t2, 18, 3, \t2, 3, 13,\r\n            18, 1, 9, \t18, 9, 11, \t18, 11, 3,\r\n            4, 14, 12, \t4, 12, 0, \t4, 0, 8,\r\n            11, 9, 5, \t11, 5, 19, \t11, 19, 7,\r\n            19, 5, 14, \t19, 14, 4, \t19, 4, 17,\r\n            1, 12, 14, \t1, 14, 5, \t1, 5, 9\r\n        ];\r\n\r\n        PolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n        this.type = 'DodecahedronBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            detail: detail\r\n        };\r\n\r\n    }\r\n\r\n    DodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\r\n    DodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\r\n\r\n    /**\r\n     * @author oosmoxiecode / https://github.com/oosmoxiecode\r\n     * @author WestLangley / https://github.com/WestLangley\r\n     * @author zz85 / https://github.com/zz85\r\n     * @author miningold / https://github.com/miningold\r\n     * @author jonobr1 / https://github.com/jonobr1\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     */\r\n\r\n    // TubeGeometry\r\n\r\n    function TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TubeGeometry';\r\n\r\n        this.parameters = {\r\n            path: path,\r\n            tubularSegments: tubularSegments,\r\n            radius: radius,\r\n            radialSegments: radialSegments,\r\n            closed: closed\r\n        };\r\n\r\n        if ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\r\n\r\n        var bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\r\n\r\n        // expose internals\r\n\r\n        this.tangents = bufferGeometry.tangents;\r\n        this.normals = bufferGeometry.normals;\r\n        this.binormals = bufferGeometry.binormals;\r\n\r\n        // create geometry\r\n\r\n        this.fromBufferGeometry( bufferGeometry );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TubeGeometry.prototype = Object.create( Geometry.prototype );\r\n    TubeGeometry.prototype.constructor = TubeGeometry;\r\n\r\n    // TubeBufferGeometry\r\n\r\n    function TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'TubeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            path: path,\r\n            tubularSegments: tubularSegments,\r\n            radius: radius,\r\n            radialSegments: radialSegments,\r\n            closed: closed\r\n        };\r\n\r\n        tubularSegments = tubularSegments || 64;\r\n        radius = radius || 1;\r\n        radialSegments = radialSegments || 8;\r\n        closed = closed || false;\r\n\r\n        var frames = path.computeFrenetFrames( tubularSegments, closed );\r\n\r\n        // expose internals\r\n\r\n        this.tangents = frames.tangents;\r\n        this.normals = frames.normals;\r\n        this.binormals = frames.binormals;\r\n\r\n        // helper variables\r\n\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n        var uv = new Vector2();\r\n        var P = new Vector3();\r\n\r\n        var i, j;\r\n\r\n        // buffer\r\n\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n        var indices = [];\r\n\r\n        // create buffer data\r\n\r\n        generateBufferData();\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        // functions\r\n\r\n        function generateBufferData() {\r\n\r\n            for ( i = 0; i < tubularSegments; i ++ ) {\r\n\r\n                generateSegment( i );\r\n\r\n            }\r\n\r\n            // if the geometry is not closed, generate the last row of vertices and normals\r\n            // at the regular position on the given path\r\n            //\r\n            // if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\r\n\r\n            generateSegment( ( closed === false ) ? tubularSegments : 0 );\r\n\r\n            // uvs are generated in a separate function.\r\n            // this makes it easy compute correct values for closed geometries\r\n\r\n            generateUVs();\r\n\r\n            // finally create faces\r\n\r\n            generateIndices();\r\n\r\n        }\r\n\r\n        function generateSegment( i ) {\r\n\r\n            // we use getPointAt to sample evenly distributed points from the given path\r\n\r\n            P = path.getPointAt( i / tubularSegments, P );\r\n\r\n            // retrieve corresponding normal and binormal\r\n\r\n            var N = frames.normals[ i ];\r\n            var B = frames.binormals[ i ];\r\n\r\n            // generate normals and vertices for the current segment\r\n\r\n            for ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n                var v = j / radialSegments * Math.PI * 2;\r\n\r\n                var sin = Math.sin( v );\r\n                var cos = - Math.cos( v );\r\n\r\n                // normal\r\n\r\n                normal.x = ( cos * N.x + sin * B.x );\r\n                normal.y = ( cos * N.y + sin * B.y );\r\n                normal.z = ( cos * N.z + sin * B.z );\r\n                normal.normalize();\r\n\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // vertex\r\n\r\n                vertex.x = P.x + radius * normal.x;\r\n                vertex.y = P.y + radius * normal.y;\r\n                vertex.z = P.z + radius * normal.z;\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function generateIndices() {\r\n\r\n            for ( j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n                for ( i = 1; i <= radialSegments; i ++ ) {\r\n\r\n                    var a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n                    var b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n                    var c = ( radialSegments + 1 ) * j + i;\r\n                    var d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n                    // faces\r\n\r\n                    indices.push( a, b, d );\r\n                    indices.push( b, c, d );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        function generateUVs() {\r\n\r\n            for ( i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n                for ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n                    uv.x = i / tubularSegments;\r\n                    uv.y = j / radialSegments;\r\n\r\n                    uvs.push( uv.x, uv.y );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    TubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    TubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\r\n\r\n    /**\r\n     * @author oosmoxiecode\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     * based on http://www.blackpawn.com/texts/pqtorus/\r\n     */\r\n\r\n    // TorusKnotGeometry\r\n\r\n    function TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TorusKnotGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            tubularSegments: tubularSegments,\r\n            radialSegments: radialSegments,\r\n            p: p,\r\n            q: q\r\n        };\r\n\r\n        if ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\r\n\r\n        this.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TorusKnotGeometry.prototype = Object.create( Geometry.prototype );\r\n    TorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\r\n\r\n    // TorusKnotBufferGeometry\r\n\r\n    function TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'TorusKnotBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            tubularSegments: tubularSegments,\r\n            radialSegments: radialSegments,\r\n            p: p,\r\n            q: q\r\n        };\r\n\r\n        radius = radius || 1;\r\n        tube = tube || 0.4;\r\n        tubularSegments = Math.floor( tubularSegments ) || 64;\r\n        radialSegments = Math.floor( radialSegments ) || 8;\r\n        p = p || 2;\r\n        q = q || 3;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var i, j;\r\n\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n\r\n        var P1 = new Vector3();\r\n        var P2 = new Vector3();\r\n\r\n        var B = new Vector3();\r\n        var T = new Vector3();\r\n        var N = new Vector3();\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( i = 0; i <= tubularSegments; ++ i ) {\r\n\r\n            // the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\r\n\r\n            var u = i / tubularSegments * p * Math.PI * 2;\r\n\r\n            // now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\r\n            // these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\r\n\r\n            calculatePositionOnCurve( u, p, q, radius, P1 );\r\n            calculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\r\n\r\n            // calculate orthonormal basis\r\n\r\n            T.subVectors( P2, P1 );\r\n            N.addVectors( P2, P1 );\r\n            B.crossVectors( T, N );\r\n            N.crossVectors( B, T );\r\n\r\n            // normalize B, N. T can be ignored, we don't use it\r\n\r\n            B.normalize();\r\n            N.normalize();\r\n\r\n            for ( j = 0; j <= radialSegments; ++ j ) {\r\n\r\n                // now calculate the vertices. they are nothing more than an extrusion of the torus curve.\r\n                // because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\r\n\r\n                var v = j / radialSegments * Math.PI * 2;\r\n                var cx = - tube * Math.cos( v );\r\n                var cy = tube * Math.sin( v );\r\n\r\n                // now calculate the final vertex position.\r\n                // first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\r\n\r\n                vertex.x = P1.x + ( cx * N.x + cy * B.x );\r\n                vertex.y = P1.y + ( cx * N.y + cy * B.y );\r\n                vertex.z = P1.z + ( cx * N.z + cy * B.z );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\r\n\r\n                normal.subVectors( vertex, P1 ).normalize();\r\n\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( i / tubularSegments );\r\n                uvs.push( j / radialSegments );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate indices\r\n\r\n        for ( j = 1; j <= tubularSegments; j ++ ) {\r\n\r\n            for ( i = 1; i <= radialSegments; i ++ ) {\r\n\r\n                // indices\r\n\r\n                var a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\r\n                var b = ( radialSegments + 1 ) * j + ( i - 1 );\r\n                var c = ( radialSegments + 1 ) * j + i;\r\n                var d = ( radialSegments + 1 ) * ( j - 1 ) + i;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        // this function calculates the current position on the torus curve\r\n\r\n        function calculatePositionOnCurve( u, p, q, radius, position ) {\r\n\r\n            var cu = Math.cos( u );\r\n            var su = Math.sin( u );\r\n            var quOverP = q / p * u;\r\n            var cs = Math.cos( quOverP );\r\n\r\n            position.x = radius * ( 2 + cs ) * 0.5 * cu;\r\n            position.y = radius * ( 2 + cs ) * su * 0.5;\r\n            position.z = radius * Math.sin( quOverP ) * 0.5;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    TorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    TorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\r\n\r\n    /**\r\n     * @author oosmoxiecode\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // TorusGeometry\r\n\r\n    function TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TorusGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            radialSegments: radialSegments,\r\n            tubularSegments: tubularSegments,\r\n            arc: arc\r\n        };\r\n\r\n        this.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TorusGeometry.prototype = Object.create( Geometry.prototype );\r\n    TorusGeometry.prototype.constructor = TorusGeometry;\r\n\r\n    // TorusBufferGeometry\r\n\r\n    function TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'TorusBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            tube: tube,\r\n            radialSegments: radialSegments,\r\n            tubularSegments: tubularSegments,\r\n            arc: arc\r\n        };\r\n\r\n        radius = radius || 1;\r\n        tube = tube || 0.4;\r\n        radialSegments = Math.floor( radialSegments ) || 8;\r\n        tubularSegments = Math.floor( tubularSegments ) || 6;\r\n        arc = arc || Math.PI * 2;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var center = new Vector3();\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n\r\n        var j, i;\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( j = 0; j <= radialSegments; j ++ ) {\r\n\r\n            for ( i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n                var u = i / tubularSegments * arc;\r\n                var v = j / radialSegments * Math.PI * 2;\r\n\r\n                // vertex\r\n\r\n                vertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n                vertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n                vertex.z = tube * Math.sin( v );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                center.x = radius * Math.cos( u );\r\n                center.y = radius * Math.sin( u );\r\n                normal.subVectors( vertex, center ).normalize();\r\n\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( i / tubularSegments );\r\n                uvs.push( j / radialSegments );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate indices\r\n\r\n        for ( j = 1; j <= radialSegments; j ++ ) {\r\n\r\n            for ( i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n                // indices\r\n\r\n                var a = ( tubularSegments + 1 ) * j + i - 1;\r\n                var b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n                var c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n                var d = ( tubularSegments + 1 ) * j + i;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    TorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    TorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     * Port from https://github.com/mapbox/earcut (v2.1.2)\r\n     */\r\n\r\n    var Earcut = {\r\n\r\n        triangulate: function ( data, holeIndices, dim ) {\r\n\r\n            dim = dim || 2;\r\n\r\n            var hasHoles = holeIndices && holeIndices.length,\r\n                outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\r\n                outerNode = linkedList( data, 0, outerLen, dim, true ),\r\n                triangles = [];\r\n\r\n            if ( ! outerNode ) return triangles;\r\n\r\n            var minX, minY, maxX, maxY, x, y, invSize;\r\n\r\n            if ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\r\n\r\n            // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\r\n\r\n            if ( data.length > 80 * dim ) {\r\n\r\n                minX = maxX = data[ 0 ];\r\n                minY = maxY = data[ 1 ];\r\n\r\n                for ( var i = dim; i < outerLen; i += dim ) {\r\n\r\n                    x = data[ i ];\r\n                    y = data[ i + 1 ];\r\n                    if ( x < minX ) minX = x;\r\n                    if ( y < minY ) minY = y;\r\n                    if ( x > maxX ) maxX = x;\r\n                    if ( y > maxY ) maxY = y;\r\n\r\n                }\r\n\r\n                // minX, minY and invSize are later used to transform coords into integers for z-order calculation\r\n\r\n                invSize = Math.max( maxX - minX, maxY - minY );\r\n                invSize = invSize !== 0 ? 1 / invSize : 0;\r\n\r\n            }\r\n\r\n            earcutLinked( outerNode, triangles, dim, minX, minY, invSize );\r\n\r\n            return triangles;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    // create a circular doubly linked list from polygon points in the specified winding order\r\n\r\n    function linkedList( data, start, end, dim, clockwise ) {\r\n\r\n        var i, last;\r\n\r\n        if ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\r\n\r\n            for ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n        } else {\r\n\r\n            for ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\r\n\r\n        }\r\n\r\n        if ( last && equals( last, last.next ) ) {\r\n\r\n            removeNode( last );\r\n            last = last.next;\r\n\r\n        }\r\n\r\n        return last;\r\n\r\n    }\r\n\r\n    // eliminate colinear or duplicate points\r\n\r\n    function filterPoints( start, end ) {\r\n\r\n        if ( ! start ) return start;\r\n        if ( ! end ) end = start;\r\n\r\n        var p = start, again;\r\n\r\n        do {\r\n\r\n            again = false;\r\n\r\n            if ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\r\n\r\n                removeNode( p );\r\n                p = end = p.prev;\r\n                if ( p === p.next ) break;\r\n                again = true;\r\n\r\n            } else {\r\n\r\n                p = p.next;\r\n\r\n            }\r\n\r\n        } while ( again || p !== end );\r\n\r\n        return end;\r\n\r\n    }\r\n\r\n    // main ear slicing loop which triangulates a polygon (given as a linked list)\r\n\r\n    function earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\r\n\r\n        if ( ! ear ) return;\r\n\r\n        // interlink polygon nodes in z-order\r\n\r\n        if ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\r\n\r\n        var stop = ear, prev, next;\r\n\r\n        // iterate through ears, slicing them one by one\r\n\r\n        while ( ear.prev !== ear.next ) {\r\n\r\n            prev = ear.prev;\r\n            next = ear.next;\r\n\r\n            if ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\r\n\r\n                // cut off the triangle\r\n                triangles.push( prev.i / dim );\r\n                triangles.push( ear.i / dim );\r\n                triangles.push( next.i / dim );\r\n\r\n                removeNode( ear );\r\n\r\n                // skipping the next vertice leads to less sliver triangles\r\n                ear = next.next;\r\n                stop = next.next;\r\n\r\n                continue;\r\n\r\n            }\r\n\r\n            ear = next;\r\n\r\n            // if we looped through the whole remaining polygon and can't find any more ears\r\n\r\n            if ( ear === stop ) {\r\n\r\n                // try filtering points and slicing again\r\n\r\n                if ( ! pass ) {\r\n\r\n                    earcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\r\n\r\n                    // if this didn't work, try curing all small self-intersections locally\r\n\r\n                } else if ( pass === 1 ) {\r\n\r\n                    ear = cureLocalIntersections( ear, triangles, dim );\r\n                    earcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\r\n\r\n                    // as a last resort, try splitting the remaining polygon into two\r\n\r\n                } else if ( pass === 2 ) {\r\n\r\n                    splitEarcut( ear, triangles, dim, minX, minY, invSize );\r\n\r\n                }\r\n\r\n                break;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // check whether a polygon node forms a valid ear with adjacent nodes\r\n\r\n    function isEar( ear ) {\r\n\r\n        var a = ear.prev,\r\n            b = ear,\r\n            c = ear.next;\r\n\r\n        if ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n        // now make sure we don't have other points inside the potential ear\r\n        var p = ear.next.next;\r\n\r\n        while ( p !== ear.prev ) {\r\n\r\n            if ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) {\r\n\r\n                return false;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    function isEarHashed( ear, minX, minY, invSize ) {\r\n\r\n        var a = ear.prev,\r\n            b = ear,\r\n            c = ear.next;\r\n\r\n        if ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\r\n\r\n        // triangle bbox; min & max are calculated like this for speed\r\n\r\n        var minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\r\n            minTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\r\n            maxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\r\n            maxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\r\n\r\n        // z-order range for the current triangle bbox;\r\n\r\n        var minZ = zOrder( minTX, minTY, minX, minY, invSize ),\r\n            maxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\r\n\r\n        // first look for points inside the triangle in increasing z-order\r\n\r\n        var p = ear.nextZ;\r\n\r\n        while ( p && p.z <= maxZ ) {\r\n\r\n            if ( p !== ear.prev && p !== ear.next &&\r\n                pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n                area( p.prev, p, p.next ) >= 0 ) return false;\r\n            p = p.nextZ;\r\n\r\n        }\r\n\r\n        // then look for points in decreasing z-order\r\n\r\n        p = ear.prevZ;\r\n\r\n        while ( p && p.z >= minZ ) {\r\n\r\n            if ( p !== ear.prev && p !== ear.next &&\r\n                pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\r\n                area( p.prev, p, p.next ) >= 0 ) return false;\r\n\r\n            p = p.prevZ;\r\n\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    // go through all polygon nodes and cure small local self-intersections\r\n\r\n    function cureLocalIntersections( start, triangles, dim ) {\r\n\r\n        var p = start;\r\n\r\n        do {\r\n\r\n            var a = p.prev, b = p.next.next;\r\n\r\n            if ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\r\n\r\n                triangles.push( a.i / dim );\r\n                triangles.push( p.i / dim );\r\n                triangles.push( b.i / dim );\r\n\r\n                // remove two nodes involved\r\n\r\n                removeNode( p );\r\n                removeNode( p.next );\r\n\r\n                p = start = b;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== start );\r\n\r\n        return p;\r\n\r\n    }\r\n\r\n    // try splitting polygon into two and triangulate them independently\r\n\r\n    function splitEarcut( start, triangles, dim, minX, minY, invSize ) {\r\n\r\n        // look for a valid diagonal that divides the polygon into two\r\n\r\n        var a = start;\r\n\r\n        do {\r\n\r\n            var b = a.next.next;\r\n\r\n            while ( b !== a.prev ) {\r\n\r\n                if ( a.i !== b.i && isValidDiagonal( a, b ) ) {\r\n\r\n                    // split the polygon in two by the diagonal\r\n\r\n                    var c = splitPolygon( a, b );\r\n\r\n                    // filter colinear points around the cuts\r\n\r\n                    a = filterPoints( a, a.next );\r\n                    c = filterPoints( c, c.next );\r\n\r\n                    // run earcut on each half\r\n\r\n                    earcutLinked( a, triangles, dim, minX, minY, invSize );\r\n                    earcutLinked( c, triangles, dim, minX, minY, invSize );\r\n                    return;\r\n\r\n                }\r\n\r\n                b = b.next;\r\n\r\n            }\r\n\r\n            a = a.next;\r\n\r\n        } while ( a !== start );\r\n\r\n    }\r\n\r\n    // link every hole into the outer loop, producing a single-ring polygon without holes\r\n\r\n    function eliminateHoles( data, holeIndices, outerNode, dim ) {\r\n\r\n        var queue = [], i, len, start, end, list;\r\n\r\n        for ( i = 0, len = holeIndices.length; i < len; i ++ ) {\r\n\r\n            start = holeIndices[ i ] * dim;\r\n            end = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\r\n            list = linkedList( data, start, end, dim, false );\r\n            if ( list === list.next ) list.steiner = true;\r\n            queue.push( getLeftmost( list ) );\r\n\r\n        }\r\n\r\n        queue.sort( compareX );\r\n\r\n        // process holes from left to right\r\n\r\n        for ( i = 0; i < queue.length; i ++ ) {\r\n\r\n            eliminateHole( queue[ i ], outerNode );\r\n            outerNode = filterPoints( outerNode, outerNode.next );\r\n\r\n        }\r\n\r\n        return outerNode;\r\n\r\n    }\r\n\r\n    function compareX( a, b ) {\r\n\r\n        return a.x - b.x;\r\n\r\n    }\r\n\r\n    // find a bridge between vertices that connects hole with an outer ring and and link it\r\n\r\n    function eliminateHole( hole, outerNode ) {\r\n\r\n        outerNode = findHoleBridge( hole, outerNode );\r\n\r\n        if ( outerNode ) {\r\n\r\n            var b = splitPolygon( outerNode, hole );\r\n\r\n            filterPoints( b, b.next );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    // David Eberly's algorithm for finding a bridge between hole and outer polygon\r\n\r\n    function findHoleBridge( hole, outerNode ) {\r\n\r\n        var p = outerNode,\r\n            hx = hole.x,\r\n            hy = hole.y,\r\n            qx = - Infinity,\r\n            m;\r\n\r\n        // find a segment intersected by a ray from the hole's leftmost point to the left;\r\n        // segment's endpoint with lesser x will be potential connection point\r\n\r\n        do {\r\n\r\n            if ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\r\n\r\n                var x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\r\n\r\n                if ( x <= hx && x > qx ) {\r\n\r\n                    qx = x;\r\n\r\n                    if ( x === hx ) {\r\n\r\n                        if ( hy === p.y ) return p;\r\n                        if ( hy === p.next.y ) return p.next;\r\n\r\n                    }\r\n\r\n                    m = p.x < p.next.x ? p : p.next;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== outerNode );\r\n\r\n        if ( ! m ) return null;\r\n\r\n        if ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\r\n\r\n        // look for points inside the triangle of hole point, segment intersection and endpoint;\r\n        // if there are no points found, we have a valid connection;\r\n        // otherwise choose the point of the minimum angle with the ray as connection point\r\n\r\n        var stop = m,\r\n            mx = m.x,\r\n            my = m.y,\r\n            tanMin = Infinity,\r\n            tan;\r\n\r\n        p = m.next;\r\n\r\n        while ( p !== stop ) {\r\n\r\n            if ( hx >= p.x && p.x >= mx && hx !== p.x &&\r\n                pointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\r\n\r\n                tan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\r\n\r\n                if ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\r\n\r\n                    m = p;\r\n                    tanMin = tan;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        }\r\n\r\n        return m;\r\n\r\n    }\r\n\r\n    // interlink polygon nodes in z-order\r\n\r\n    function indexCurve( start, minX, minY, invSize ) {\r\n\r\n        var p = start;\r\n\r\n        do {\r\n\r\n            if ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\r\n            p.prevZ = p.prev;\r\n            p.nextZ = p.next;\r\n            p = p.next;\r\n\r\n        } while ( p !== start );\r\n\r\n        p.prevZ.nextZ = null;\r\n        p.prevZ = null;\r\n\r\n        sortLinked( p );\r\n\r\n    }\r\n\r\n    // Simon Tatham's linked list merge sort algorithm\r\n    // http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\r\n\r\n    function sortLinked( list ) {\r\n\r\n        var i, p, q, e, tail, numMerges, pSize, qSize, inSize = 1;\r\n\r\n        do {\r\n\r\n            p = list;\r\n            list = null;\r\n            tail = null;\r\n            numMerges = 0;\r\n\r\n            while ( p ) {\r\n\r\n                numMerges ++;\r\n                q = p;\r\n                pSize = 0;\r\n\r\n                for ( i = 0; i < inSize; i ++ ) {\r\n\r\n                    pSize ++;\r\n                    q = q.nextZ;\r\n                    if ( ! q ) break;\r\n\r\n                }\r\n\r\n                qSize = inSize;\r\n\r\n                while ( pSize > 0 || ( qSize > 0 && q ) ) {\r\n\r\n                    if ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\r\n\r\n                        e = p;\r\n                        p = p.nextZ;\r\n                        pSize --;\r\n\r\n                    } else {\r\n\r\n                        e = q;\r\n                        q = q.nextZ;\r\n                        qSize --;\r\n\r\n                    }\r\n\r\n                    if ( tail ) tail.nextZ = e;\r\n                    else list = e;\r\n\r\n                    e.prevZ = tail;\r\n                    tail = e;\r\n\r\n                }\r\n\r\n                p = q;\r\n\r\n            }\r\n\r\n            tail.nextZ = null;\r\n            inSize *= 2;\r\n\r\n        } while ( numMerges > 1 );\r\n\r\n        return list;\r\n\r\n    }\r\n\r\n    // z-order of a point given coords and inverse of the longer side of data bbox\r\n\r\n    function zOrder( x, y, minX, minY, invSize ) {\r\n\r\n        // coords are transformed into non-negative 15-bit integer range\r\n\r\n        x = 32767 * ( x - minX ) * invSize;\r\n        y = 32767 * ( y - minY ) * invSize;\r\n\r\n        x = ( x | ( x << 8 ) ) & 0x00FF00FF;\r\n        x = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\r\n        x = ( x | ( x << 2 ) ) & 0x33333333;\r\n        x = ( x | ( x << 1 ) ) & 0x55555555;\r\n\r\n        y = ( y | ( y << 8 ) ) & 0x00FF00FF;\r\n        y = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\r\n        y = ( y | ( y << 2 ) ) & 0x33333333;\r\n        y = ( y | ( y << 1 ) ) & 0x55555555;\r\n\r\n        return x | ( y << 1 );\r\n\r\n    }\r\n\r\n    // find the leftmost node of a polygon ring\r\n\r\n    function getLeftmost( start ) {\r\n\r\n        var p = start, leftmost = start;\r\n\r\n        do {\r\n\r\n            if ( p.x < leftmost.x ) leftmost = p;\r\n            p = p.next;\r\n\r\n        } while ( p !== start );\r\n\r\n        return leftmost;\r\n\r\n    }\r\n\r\n    // check if a point lies within a convex triangle\r\n\r\n    function pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\r\n\r\n        return ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\r\n            ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\r\n            ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\r\n\r\n    }\r\n\r\n    // check if a diagonal between two polygon nodes is valid (lies in polygon interior)\r\n\r\n    function isValidDiagonal( a, b ) {\r\n\r\n        return a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\r\n            locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\r\n\r\n    }\r\n\r\n    // signed area of a triangle\r\n\r\n    function area( p, q, r ) {\r\n\r\n        return ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\r\n\r\n    }\r\n\r\n    // check if two points are equal\r\n\r\n    function equals( p1, p2 ) {\r\n\r\n        return p1.x === p2.x && p1.y === p2.y;\r\n\r\n    }\r\n\r\n    // check if two segments intersect\r\n\r\n    function intersects( p1, q1, p2, q2 ) {\r\n\r\n        if ( ( equals( p1, q1 ) && equals( p2, q2 ) ) ||\r\n            ( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\r\n\r\n        return area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\r\n            area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\r\n\r\n    }\r\n\r\n    // check if a polygon diagonal intersects any polygon segments\r\n\r\n    function intersectsPolygon( a, b ) {\r\n\r\n        var p = a;\r\n\r\n        do {\r\n\r\n            if ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\r\n                intersects( p, p.next, a, b ) ) {\r\n\r\n                return true;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== a );\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    // check if a polygon diagonal is locally inside the polygon\r\n\r\n    function locallyInside( a, b ) {\r\n\r\n        return area( a.prev, a, a.next ) < 0 ?\r\n            area( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\r\n            area( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\r\n\r\n    }\r\n\r\n    // check if the middle point of a polygon diagonal is inside the polygon\r\n\r\n    function middleInside( a, b ) {\r\n\r\n        var p = a,\r\n            inside = false,\r\n            px = ( a.x + b.x ) / 2,\r\n            py = ( a.y + b.y ) / 2;\r\n\r\n        do {\r\n\r\n            if ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\r\n                ( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) ) {\r\n\r\n                inside = ! inside;\r\n\r\n            }\r\n\r\n            p = p.next;\r\n\r\n        } while ( p !== a );\r\n\r\n        return inside;\r\n\r\n    }\r\n\r\n    // link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\r\n    // if one belongs to the outer ring and another to a hole, it merges it into a single ring\r\n\r\n    function splitPolygon( a, b ) {\r\n\r\n        var a2 = new Node( a.i, a.x, a.y ),\r\n            b2 = new Node( b.i, b.x, b.y ),\r\n            an = a.next,\r\n            bp = b.prev;\r\n\r\n        a.next = b;\r\n        b.prev = a;\r\n\r\n        a2.next = an;\r\n        an.prev = a2;\r\n\r\n        b2.next = a2;\r\n        a2.prev = b2;\r\n\r\n        bp.next = b2;\r\n        b2.prev = bp;\r\n\r\n        return b2;\r\n\r\n    }\r\n\r\n    // create a node and optionally link it with previous one (in a circular doubly linked list)\r\n\r\n    function insertNode( i, x, y, last ) {\r\n\r\n        var p = new Node( i, x, y );\r\n\r\n        if ( ! last ) {\r\n\r\n            p.prev = p;\r\n            p.next = p;\r\n\r\n        } else {\r\n\r\n            p.next = last.next;\r\n            p.prev = last;\r\n            last.next.prev = p;\r\n            last.next = p;\r\n\r\n        }\r\n\r\n        return p;\r\n\r\n    }\r\n\r\n    function removeNode( p ) {\r\n\r\n        p.next.prev = p.prev;\r\n        p.prev.next = p.next;\r\n\r\n        if ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\r\n        if ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\r\n\r\n    }\r\n\r\n    function Node( i, x, y ) {\r\n\r\n        // vertice index in coordinates array\r\n        this.i = i;\r\n\r\n        // vertex coordinates\r\n        this.x = x;\r\n        this.y = y;\r\n\r\n        // previous and next vertice nodes in a polygon ring\r\n        this.prev = null;\r\n        this.next = null;\r\n\r\n        // z-order curve value\r\n        this.z = null;\r\n\r\n        // previous and next nodes in z-order\r\n        this.prevZ = null;\r\n        this.nextZ = null;\r\n\r\n        // indicates whether this is a steiner point\r\n        this.steiner = false;\r\n\r\n    }\r\n\r\n    function signedArea( data, start, end, dim ) {\r\n\r\n        var sum = 0;\r\n\r\n        for ( var i = start, j = end - dim; i < end; i += dim ) {\r\n\r\n            sum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\r\n            j = i;\r\n\r\n        }\r\n\r\n        return sum;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     */\r\n\r\n    var ShapeUtils = {\r\n\r\n        // calculate area of the contour polygon\r\n\r\n        area: function ( contour ) {\r\n\r\n            var n = contour.length;\r\n            var a = 0.0;\r\n\r\n            for ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n                a += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n            }\r\n\r\n            return a * 0.5;\r\n\r\n        },\r\n\r\n        isClockWise: function ( pts ) {\r\n\r\n            return ShapeUtils.area( pts ) < 0;\r\n\r\n        },\r\n\r\n        triangulateShape: function ( contour, holes ) {\r\n\r\n            var vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\r\n            var holeIndices = []; // array of hole indices\r\n            var faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\r\n\r\n            removeDupEndPts( contour );\r\n            addContour( vertices, contour );\r\n\r\n            //\r\n\r\n            var holeIndex = contour.length;\r\n\r\n            holes.forEach( removeDupEndPts );\r\n\r\n            for ( var i = 0; i < holes.length; i ++ ) {\r\n\r\n                holeIndices.push( holeIndex );\r\n                holeIndex += holes[ i ].length;\r\n                addContour( vertices, holes[ i ] );\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var triangles = Earcut.triangulate( vertices, holeIndices );\r\n\r\n            //\r\n\r\n            for ( var i = 0; i < triangles.length; i += 3 ) {\r\n\r\n                faces.push( triangles.slice( i, i + 3 ) );\r\n\r\n            }\r\n\r\n            return faces;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    function removeDupEndPts( points ) {\r\n\r\n        var l = points.length;\r\n\r\n        if ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n            points.pop();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    function addContour( vertices, contour ) {\r\n\r\n        for ( var i = 0; i < contour.length; i ++ ) {\r\n\r\n            vertices.push( contour[ i ].x );\r\n            vertices.push( contour[ i ].y );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     *\r\n     * Creates extruded geometry from a path shape.\r\n     *\r\n     * parameters = {\r\n\t *\r\n\t *  curveSegments: <int>, // number of points on the curves\r\n\t *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n\t *  depth: <float>, // Depth to extrude the shape\r\n\t *\r\n\t *  bevelEnabled: <bool>, // turn on bevel\r\n\t *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n\t *  bevelSize: <float>, // how far from shape outline is bevel\r\n\t *  bevelSegments: <int>, // number of bevel layers\r\n\t *\r\n\t *  extrudePath: <THREE.Curve> // curve to extrude shape along\r\n\t *\r\n\t *  UVGenerator: <Object> // object that provides UV generator functions\r\n\t *\r\n\t * }\r\n     */\r\n\r\n    // ExtrudeGeometry\r\n\r\n    function ExtrudeGeometry( shapes, options ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'ExtrudeGeometry';\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            options: options\r\n        };\r\n\r\n        this.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    ExtrudeGeometry.prototype = Object.create( Geometry.prototype );\r\n    ExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\r\n\r\n    ExtrudeGeometry.prototype.toJSON = function () {\r\n\r\n        var data = Geometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n        var options = this.parameters.options;\r\n\r\n        return toJSON( shapes, options, data );\r\n\r\n    };\r\n\r\n    // ExtrudeBufferGeometry\r\n\r\n    function ExtrudeBufferGeometry( shapes, options ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'ExtrudeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            options: options\r\n        };\r\n\r\n        shapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n        var scope = this;\r\n\r\n        var verticesArray = [];\r\n        var uvArray = [];\r\n\r\n        for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n            var shape = shapes[ i ];\r\n            addShape( shape );\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\r\n\r\n        this.computeVertexNormals();\r\n\r\n        // functions\r\n\r\n        function addShape( shape ) {\r\n\r\n            var placeholder = [];\r\n\r\n            // options\r\n\r\n            var curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n            var steps = options.steps !== undefined ? options.steps : 1;\r\n            var depth = options.depth !== undefined ? options.depth : 100;\r\n\r\n            var bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\r\n            var bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\r\n            var bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\r\n            var bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n            var extrudePath = options.extrudePath;\r\n\r\n            var uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\r\n\r\n            // deprecated options\r\n\r\n            if ( options.amount !== undefined ) {\r\n\r\n                console.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\r\n                depth = options.amount;\r\n\r\n            }\r\n\r\n            //\r\n\r\n            var extrudePts, extrudeByPath = false;\r\n            var splineTube, binormal, normal, position2;\r\n\r\n            if ( extrudePath ) {\r\n\r\n                extrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n                extrudeByPath = true;\r\n                bevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n                // SETUP TNB variables\r\n\r\n                // TODO1 - have a .isClosed in spline?\r\n\r\n                splineTube = extrudePath.computeFrenetFrames( steps, false );\r\n\r\n                // console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n                binormal = new Vector3();\r\n                normal = new Vector3();\r\n                position2 = new Vector3();\r\n\r\n            }\r\n\r\n            // Safeguards if bevels are not enabled\r\n\r\n            if ( ! bevelEnabled ) {\r\n\r\n                bevelSegments = 0;\r\n                bevelThickness = 0;\r\n                bevelSize = 0;\r\n\r\n            }\r\n\r\n            // Variables initialization\r\n\r\n            var ahole, h, hl; // looping of holes\r\n\r\n            var shapePoints = shape.extractPoints( curveSegments );\r\n\r\n            var vertices = shapePoints.shape;\r\n            var holes = shapePoints.holes;\r\n\r\n            var reverse = ! ShapeUtils.isClockWise( vertices );\r\n\r\n            if ( reverse ) {\r\n\r\n                vertices = vertices.reverse();\r\n\r\n                // Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n\r\n                    if ( ShapeUtils.isClockWise( ahole ) ) {\r\n\r\n                        holes[ h ] = ahole.reverse();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            var faces = ShapeUtils.triangulateShape( vertices, holes );\r\n\r\n            /* Vertices */\r\n\r\n            var contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n            for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                ahole = holes[ h ];\r\n\r\n                vertices = vertices.concat( ahole );\r\n\r\n            }\r\n\r\n\r\n            function scalePt2( pt, vec, size ) {\r\n\r\n                if ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n                return vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n            }\r\n\r\n            var b, bs, t, z,\r\n                vert, vlen = vertices.length,\r\n                face, flen = faces.length;\r\n\r\n\r\n            // Find directions for point movement\r\n\r\n\r\n            function getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n                // computes for inPt the corresponding point inPt' on a new contour\r\n                //   shifted by 1 unit (length of normalized vector) to the left\r\n                // if we walk along contour clockwise, this new contour is outside the old one\r\n                //\r\n                // inPt' is the intersection of the two lines parallel to the two\r\n                //  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n                var v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\r\n\r\n                // good reading for geometry algorithms (here: line-line intersection)\r\n                // http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n                var v_prev_x = inPt.x - inPrev.x,\r\n                    v_prev_y = inPt.y - inPrev.y;\r\n                var v_next_x = inNext.x - inPt.x,\r\n                    v_next_y = inNext.y - inPt.y;\r\n\r\n                var v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n                // check for collinear edges\r\n                var collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n                if ( Math.abs( collinear0 ) > Number.EPSILON ) {\r\n\r\n                    // not collinear\r\n\r\n                    // length of vectors for normalizing\r\n\r\n                    var v_prev_len = Math.sqrt( v_prev_lensq );\r\n                    var v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n                    // shift adjacent points by unit vectors to the left\r\n\r\n                    var ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n                    var ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n                    var ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n                    var ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n                    // scaling factor for v_prev to intersection point\r\n\r\n                    var sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n                        ( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\r\n                        ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n                    // vector from inPt to intersection point\r\n\r\n                    v_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n                    v_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n                    // Don't normalize!, otherwise sharp corners become ugly\r\n                    //  but prevent crazy spikes\r\n                    var v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n                    if ( v_trans_lensq <= 2 ) {\r\n\r\n                        return new Vector2( v_trans_x, v_trans_y );\r\n\r\n                    } else {\r\n\r\n                        shrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // handle special case of collinear edges\r\n\r\n                    var direction_eq = false; // assumes: opposite\r\n                    if ( v_prev_x > Number.EPSILON ) {\r\n\r\n                        if ( v_next_x > Number.EPSILON ) {\r\n\r\n                            direction_eq = true;\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        if ( v_prev_x < - Number.EPSILON ) {\r\n\r\n                            if ( v_next_x < - Number.EPSILON ) {\r\n\r\n                                direction_eq = true;\r\n\r\n                            }\r\n\r\n                        } else {\r\n\r\n                            if ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n                                direction_eq = true;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if ( direction_eq ) {\r\n\r\n                        // console.log(\"Warning: lines are a straight sequence\");\r\n                        v_trans_x = - v_prev_y;\r\n                        v_trans_y = v_prev_x;\r\n                        shrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n                    } else {\r\n\r\n                        // console.log(\"Warning: lines are a straight spike\");\r\n                        v_trans_x = v_prev_x;\r\n                        v_trans_y = v_prev_y;\r\n                        shrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n            }\r\n\r\n\r\n            var contourMovements = [];\r\n\r\n            for ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n                if ( j === il ) j = 0;\r\n                if ( k === il ) k = 0;\r\n\r\n                //  (j)---(i)---(k)\r\n                // console.log('i,j,k', i, j , k)\r\n\r\n                contourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n            }\r\n\r\n            var holesMovements = [],\r\n                oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n            for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                ahole = holes[ h ];\r\n\r\n                oneHoleMovements = [];\r\n\r\n                for ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n                    if ( j === il ) j = 0;\r\n                    if ( k === il ) k = 0;\r\n\r\n                    //  (j)---(i)---(k)\r\n                    oneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n                }\r\n\r\n                holesMovements.push( oneHoleMovements );\r\n                verticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n            }\r\n\r\n\r\n            // Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n            for ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n                //for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n                t = b / bevelSegments;\r\n                z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n                bs = bevelSize * Math.sin( t * Math.PI / 2 );\r\n\r\n                // contract shape\r\n\r\n                for ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n                    vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n                    v( vert.x, vert.y, - z );\r\n\r\n                }\r\n\r\n                // expand holes\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n                    oneHoleMovements = holesMovements[ h ];\r\n\r\n                    for ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n                        vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n                        v( vert.x, vert.y, - z );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            bs = bevelSize;\r\n\r\n            // Back facing vertices\r\n\r\n            for ( i = 0; i < vlen; i ++ ) {\r\n\r\n                vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n                if ( ! extrudeByPath ) {\r\n\r\n                    v( vert.x, vert.y, 0 );\r\n\r\n                } else {\r\n\r\n                    // v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n                    normal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n                    binormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n                    position2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n                    v( position2.x, position2.y, position2.z );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // Add stepped vertices...\r\n            // Including front facing vertices\r\n\r\n            var s;\r\n\r\n            for ( s = 1; s <= steps; s ++ ) {\r\n\r\n                for ( i = 0; i < vlen; i ++ ) {\r\n\r\n                    vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n                    if ( ! extrudeByPath ) {\r\n\r\n                        v( vert.x, vert.y, depth / steps * s );\r\n\r\n                    } else {\r\n\r\n                        // v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n                        normal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n                        binormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n                        position2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n                        v( position2.x, position2.y, position2.z );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n\r\n            // Add bevel segments planes\r\n\r\n            //for ( b = 1; b <= bevelSegments; b ++ ) {\r\n            for ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n                t = b / bevelSegments;\r\n                z = bevelThickness * Math.cos( t * Math.PI / 2 );\r\n                bs = bevelSize * Math.sin( t * Math.PI / 2 );\r\n\r\n                // contract shape\r\n\r\n                for ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n                    vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n                    v( vert.x, vert.y, depth + z );\r\n\r\n                }\r\n\r\n                // expand holes\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n                    oneHoleMovements = holesMovements[ h ];\r\n\r\n                    for ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n                        vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n                        if ( ! extrudeByPath ) {\r\n\r\n                            v( vert.x, vert.y, depth + z );\r\n\r\n                        } else {\r\n\r\n                            v( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            /* Faces */\r\n\r\n            // Top and bottom faces\r\n\r\n            buildLidFaces();\r\n\r\n            // Sides faces\r\n\r\n            buildSideFaces();\r\n\r\n\r\n            /////  Internal functions\r\n\r\n            function buildLidFaces() {\r\n\r\n                var start = verticesArray.length / 3;\r\n\r\n                if ( bevelEnabled ) {\r\n\r\n                    var layer = 0; // steps + 1\r\n                    var offset = vlen * layer;\r\n\r\n                    // Bottom faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n                    }\r\n\r\n                    layer = steps + bevelSegments * 2;\r\n                    offset = vlen * layer;\r\n\r\n                    // Top faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    // Bottom faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n                    }\r\n\r\n                    // Top faces\r\n\r\n                    for ( i = 0; i < flen; i ++ ) {\r\n\r\n                        face = faces[ i ];\r\n                        f3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                scope.addGroup( start, verticesArray.length / 3 - start, 0 );\r\n\r\n            }\r\n\r\n            // Create faces for the z-sides of the shape\r\n\r\n            function buildSideFaces() {\r\n\r\n                var start = verticesArray.length / 3;\r\n                var layeroffset = 0;\r\n                sidewalls( contour, layeroffset );\r\n                layeroffset += contour.length;\r\n\r\n                for ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n                    ahole = holes[ h ];\r\n                    sidewalls( ahole, layeroffset );\r\n\r\n                    //, true\r\n                    layeroffset += ahole.length;\r\n\r\n                }\r\n\r\n\r\n                scope.addGroup( start, verticesArray.length / 3 - start, 1 );\r\n\r\n\r\n            }\r\n\r\n            function sidewalls( contour, layeroffset ) {\r\n\r\n                var j, k;\r\n                i = contour.length;\r\n\r\n                while ( -- i >= 0 ) {\r\n\r\n                    j = i;\r\n                    k = i - 1;\r\n                    if ( k < 0 ) k = contour.length - 1;\r\n\r\n                    //console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n                    var s = 0,\r\n                        sl = steps + bevelSegments * 2;\r\n\r\n                    for ( s = 0; s < sl; s ++ ) {\r\n\r\n                        var slen1 = vlen * s;\r\n                        var slen2 = vlen * ( s + 1 );\r\n\r\n                        var a = layeroffset + j + slen1,\r\n                            b = layeroffset + k + slen1,\r\n                            c = layeroffset + k + slen2,\r\n                            d = layeroffset + j + slen2;\r\n\r\n                        f4( a, b, c, d );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function v( x, y, z ) {\r\n\r\n                placeholder.push( x );\r\n                placeholder.push( y );\r\n                placeholder.push( z );\r\n\r\n            }\r\n\r\n\r\n            function f3( a, b, c ) {\r\n\r\n                addVertex( a );\r\n                addVertex( b );\r\n                addVertex( c );\r\n\r\n                var nextIndex = verticesArray.length / 3;\r\n                var uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n                addUV( uvs[ 0 ] );\r\n                addUV( uvs[ 1 ] );\r\n                addUV( uvs[ 2 ] );\r\n\r\n            }\r\n\r\n            function f4( a, b, c, d ) {\r\n\r\n                addVertex( a );\r\n                addVertex( b );\r\n                addVertex( d );\r\n\r\n                addVertex( b );\r\n                addVertex( c );\r\n                addVertex( d );\r\n\r\n\r\n                var nextIndex = verticesArray.length / 3;\r\n                var uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\r\n\r\n                addUV( uvs[ 0 ] );\r\n                addUV( uvs[ 1 ] );\r\n                addUV( uvs[ 3 ] );\r\n\r\n                addUV( uvs[ 1 ] );\r\n                addUV( uvs[ 2 ] );\r\n                addUV( uvs[ 3 ] );\r\n\r\n            }\r\n\r\n            function addVertex( index ) {\r\n\r\n                verticesArray.push( placeholder[ index * 3 + 0 ] );\r\n                verticesArray.push( placeholder[ index * 3 + 1 ] );\r\n                verticesArray.push( placeholder[ index * 3 + 2 ] );\r\n\r\n            }\r\n\r\n\r\n            function addUV( vector2 ) {\r\n\r\n                uvArray.push( vector2.x );\r\n                uvArray.push( vector2.y );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    ExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    ExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\r\n\r\n    ExtrudeBufferGeometry.prototype.toJSON = function () {\r\n\r\n        var data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n        var options = this.parameters.options;\r\n\r\n        return toJSON( shapes, options, data );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    var WorldUVGenerator = {\r\n\r\n        generateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\r\n\r\n            var a_x = vertices[ indexA * 3 ];\r\n            var a_y = vertices[ indexA * 3 + 1 ];\r\n            var b_x = vertices[ indexB * 3 ];\r\n            var b_y = vertices[ indexB * 3 + 1 ];\r\n            var c_x = vertices[ indexC * 3 ];\r\n            var c_y = vertices[ indexC * 3 + 1 ];\r\n\r\n            return [\r\n                new Vector2( a_x, a_y ),\r\n                new Vector2( b_x, b_y ),\r\n                new Vector2( c_x, c_y )\r\n            ];\r\n\r\n        },\r\n\r\n        generateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\r\n\r\n            var a_x = vertices[ indexA * 3 ];\r\n            var a_y = vertices[ indexA * 3 + 1 ];\r\n            var a_z = vertices[ indexA * 3 + 2 ];\r\n            var b_x = vertices[ indexB * 3 ];\r\n            var b_y = vertices[ indexB * 3 + 1 ];\r\n            var b_z = vertices[ indexB * 3 + 2 ];\r\n            var c_x = vertices[ indexC * 3 ];\r\n            var c_y = vertices[ indexC * 3 + 1 ];\r\n            var c_z = vertices[ indexC * 3 + 2 ];\r\n            var d_x = vertices[ indexD * 3 ];\r\n            var d_y = vertices[ indexD * 3 + 1 ];\r\n            var d_z = vertices[ indexD * 3 + 2 ];\r\n\r\n            if ( Math.abs( a_y - b_y ) < 0.01 ) {\r\n\r\n                return [\r\n                    new Vector2( a_x, 1 - a_z ),\r\n                    new Vector2( b_x, 1 - b_z ),\r\n                    new Vector2( c_x, 1 - c_z ),\r\n                    new Vector2( d_x, 1 - d_z )\r\n                ];\r\n\r\n            } else {\r\n\r\n                return [\r\n                    new Vector2( a_y, 1 - a_z ),\r\n                    new Vector2( b_y, 1 - b_z ),\r\n                    new Vector2( c_y, 1 - c_z ),\r\n                    new Vector2( d_y, 1 - d_z )\r\n                ];\r\n\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    function toJSON( shapes, options, data ) {\r\n\r\n        //\r\n\r\n        data.shapes = [];\r\n\r\n        if ( Array.isArray( shapes ) ) {\r\n\r\n            for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n                var shape = shapes[ i ];\r\n\r\n                data.shapes.push( shape.uuid );\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            data.shapes.push( shapes.uuid );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        if ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\r\n\r\n        return data;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * Text = 3D Text\r\n     *\r\n     * parameters = {\r\n\t *  font: <THREE.Font>, // font\r\n\t *\r\n\t *  size: <float>, // size of the text\r\n\t *  height: <float>, // thickness to extrude text\r\n\t *  curveSegments: <int>, // number of points on the curves\r\n\t *\r\n\t *  bevelEnabled: <bool>, // turn on bevel\r\n\t *  bevelThickness: <float>, // how deep into text bevel goes\r\n\t *  bevelSize: <float> // how far from text outline is bevel\r\n\t * }\r\n     */\r\n\r\n    // TextGeometry\r\n\r\n    function TextGeometry( text, parameters ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'TextGeometry';\r\n\r\n        this.parameters = {\r\n            text: text,\r\n            parameters: parameters\r\n        };\r\n\r\n        this.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    TextGeometry.prototype = Object.create( Geometry.prototype );\r\n    TextGeometry.prototype.constructor = TextGeometry;\r\n\r\n    // TextBufferGeometry\r\n\r\n    function TextBufferGeometry( text, parameters ) {\r\n\r\n        parameters = parameters || {};\r\n\r\n        var font = parameters.font;\r\n\r\n        if ( ! ( font && font.isFont ) ) {\r\n\r\n            console.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\r\n            return new Geometry();\r\n\r\n        }\r\n\r\n        var shapes = font.generateShapes( text, parameters.size, parameters.curveSegments );\r\n\r\n        // translate parameters to ExtrudeGeometry API\r\n\r\n        parameters.depth = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n        // defaults\r\n\r\n        if ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n        if ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n        if ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n        ExtrudeBufferGeometry.call( this, shapes, parameters );\r\n\r\n        this.type = 'TextBufferGeometry';\r\n\r\n    }\r\n\r\n    TextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\r\n    TextBufferGeometry.prototype.constructor = TextBufferGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // SphereGeometry\r\n\r\n    function SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'SphereGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    SphereGeometry.prototype = Object.create( Geometry.prototype );\r\n    SphereGeometry.prototype.constructor = SphereGeometry;\r\n\r\n    // SphereBufferGeometry\r\n\r\n    function SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'SphereBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            widthSegments: widthSegments,\r\n            heightSegments: heightSegments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        radius = radius || 1;\r\n\r\n        widthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n        heightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n        phiStart = phiStart !== undefined ? phiStart : 0;\r\n        phiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n        var thetaEnd = thetaStart + thetaLength;\r\n\r\n        var ix, iy;\r\n\r\n        var index = 0;\r\n        var grid = [];\r\n\r\n        var vertex = new Vector3();\r\n        var normal = new Vector3();\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( iy = 0; iy <= heightSegments; iy ++ ) {\r\n\r\n            var verticesRow = [];\r\n\r\n            var v = iy / heightSegments;\r\n\r\n            for ( ix = 0; ix <= widthSegments; ix ++ ) {\r\n\r\n                var u = ix / widthSegments;\r\n\r\n                // vertex\r\n\r\n                vertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n                vertex.y = radius * Math.cos( thetaStart + v * thetaLength );\r\n                vertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                normal.set( vertex.x, vertex.y, vertex.z ).normalize();\r\n                normals.push( normal.x, normal.y, normal.z );\r\n\r\n                // uv\r\n\r\n                uvs.push( u, 1 - v );\r\n\r\n                verticesRow.push( index ++ );\r\n\r\n            }\r\n\r\n            grid.push( verticesRow );\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( iy = 0; iy < heightSegments; iy ++ ) {\r\n\r\n            for ( ix = 0; ix < widthSegments; ix ++ ) {\r\n\r\n                var a = grid[ iy ][ ix + 1 ];\r\n                var b = grid[ iy ][ ix ];\r\n                var c = grid[ iy + 1 ][ ix ];\r\n                var d = grid[ iy + 1 ][ ix + 1 ];\r\n\r\n                if ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\r\n                if ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    SphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    SphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\r\n\r\n    /**\r\n     * @author Kaleb Murphy\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // RingGeometry\r\n\r\n    function RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'RingGeometry';\r\n\r\n        this.parameters = {\r\n            innerRadius: innerRadius,\r\n            outerRadius: outerRadius,\r\n            thetaSegments: thetaSegments,\r\n            phiSegments: phiSegments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    RingGeometry.prototype = Object.create( Geometry.prototype );\r\n    RingGeometry.prototype.constructor = RingGeometry;\r\n\r\n    // RingBufferGeometry\r\n\r\n    function RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'RingBufferGeometry';\r\n\r\n        this.parameters = {\r\n            innerRadius: innerRadius,\r\n            outerRadius: outerRadius,\r\n            thetaSegments: thetaSegments,\r\n            phiSegments: phiSegments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        innerRadius = innerRadius || 0.5;\r\n        outerRadius = outerRadius || 1;\r\n\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n        thetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n        phiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // some helper variables\r\n\r\n        var segment;\r\n        var radius = innerRadius;\r\n        var radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n        var vertex = new Vector3();\r\n        var uv = new Vector2();\r\n        var j, i;\r\n\r\n        // generate vertices, normals and uvs\r\n\r\n        for ( j = 0; j <= phiSegments; j ++ ) {\r\n\r\n            for ( i = 0; i <= thetaSegments; i ++ ) {\r\n\r\n                // values are generate from the inside of the ring to the outside\r\n\r\n                segment = thetaStart + i / thetaSegments * thetaLength;\r\n\r\n                // vertex\r\n\r\n                vertex.x = radius * Math.cos( segment );\r\n                vertex.y = radius * Math.sin( segment );\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                normals.push( 0, 0, 1 );\r\n\r\n                // uv\r\n\r\n                uv.x = ( vertex.x / outerRadius + 1 ) / 2;\r\n                uv.y = ( vertex.y / outerRadius + 1 ) / 2;\r\n\r\n                uvs.push( uv.x, uv.y );\r\n\r\n            }\r\n\r\n            // increase the radius for next row of vertices\r\n\r\n            radius += radiusStep;\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( j = 0; j < phiSegments; j ++ ) {\r\n\r\n            var thetaSegmentLevel = j * ( thetaSegments + 1 );\r\n\r\n            for ( i = 0; i < thetaSegments; i ++ ) {\r\n\r\n                segment = i + thetaSegmentLevel;\r\n\r\n                var a = segment;\r\n                var b = segment + thetaSegments + 1;\r\n                var c = segment + thetaSegments + 2;\r\n                var d = segment + 1;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    RingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    RingBufferGeometry.prototype.constructor = RingBufferGeometry;\r\n\r\n    /**\r\n     * @author astrodud / http://astrodud.isgreat.org/\r\n     * @author zz85 / https://github.com/zz85\r\n     * @author bhouston / http://clara.io\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // LatheGeometry\r\n\r\n    function LatheGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'LatheGeometry';\r\n\r\n        this.parameters = {\r\n            points: points,\r\n            segments: segments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    LatheGeometry.prototype = Object.create( Geometry.prototype );\r\n    LatheGeometry.prototype.constructor = LatheGeometry;\r\n\r\n    // LatheBufferGeometry\r\n\r\n    function LatheBufferGeometry( points, segments, phiStart, phiLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'LatheBufferGeometry';\r\n\r\n        this.parameters = {\r\n            points: points,\r\n            segments: segments,\r\n            phiStart: phiStart,\r\n            phiLength: phiLength\r\n        };\r\n\r\n        segments = Math.floor( segments ) || 12;\r\n        phiStart = phiStart || 0;\r\n        phiLength = phiLength || Math.PI * 2;\r\n\r\n        // clamp phiLength so it's in range of [ 0, 2PI ]\r\n\r\n        phiLength = _Math.clamp( phiLength, 0, Math.PI * 2 );\r\n\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var base;\r\n        var inverseSegments = 1.0 / segments;\r\n        var vertex = new Vector3();\r\n        var uv = new Vector2();\r\n        var i, j;\r\n\r\n        // generate vertices and uvs\r\n\r\n        for ( i = 0; i <= segments; i ++ ) {\r\n\r\n            var phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n            var sin = Math.sin( phi );\r\n            var cos = Math.cos( phi );\r\n\r\n            for ( j = 0; j <= ( points.length - 1 ); j ++ ) {\r\n\r\n                // vertex\r\n\r\n                vertex.x = points[ j ].x * sin;\r\n                vertex.y = points[ j ].y;\r\n                vertex.z = points[ j ].x * cos;\r\n\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // uv\r\n\r\n                uv.x = i / segments;\r\n                uv.y = j / ( points.length - 1 );\r\n\r\n                uvs.push( uv.x, uv.y );\r\n\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( i = 0; i < segments; i ++ ) {\r\n\r\n            for ( j = 0; j < ( points.length - 1 ); j ++ ) {\r\n\r\n                base = j + i * points.length;\r\n\r\n                var a = base;\r\n                var b = base + points.length;\r\n                var c = base + points.length + 1;\r\n                var d = base + 1;\r\n\r\n                // faces\r\n\r\n                indices.push( a, b, d );\r\n                indices.push( b, c, d );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        // generate normals\r\n\r\n        this.computeVertexNormals();\r\n\r\n        // if the geometry is closed, we need to average the normals along the seam.\r\n        // because the corresponding vertices are identical (but still have different UVs).\r\n\r\n        if ( phiLength === Math.PI * 2 ) {\r\n\r\n            var normals = this.attributes.normal.array;\r\n            var n1 = new Vector3();\r\n            var n2 = new Vector3();\r\n            var n = new Vector3();\r\n\r\n            // this is the buffer offset for the last line of vertices\r\n\r\n            base = segments * points.length * 3;\r\n\r\n            for ( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\r\n\r\n                // select the normal of the vertex in the first line\r\n\r\n                n1.x = normals[ j + 0 ];\r\n                n1.y = normals[ j + 1 ];\r\n                n1.z = normals[ j + 2 ];\r\n\r\n                // select the normal of the vertex in the last line\r\n\r\n                n2.x = normals[ base + j + 0 ];\r\n                n2.y = normals[ base + j + 1 ];\r\n                n2.z = normals[ base + j + 2 ];\r\n\r\n                // average normals\r\n\r\n                n.addVectors( n1, n2 ).normalize();\r\n\r\n                // assign the new values to both normals\r\n\r\n                normals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\r\n                normals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\r\n                normals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    LatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    LatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\r\n\r\n    /**\r\n     * @author jonobr1 / http://jonobr1.com\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // ShapeGeometry\r\n\r\n    function ShapeGeometry( shapes, curveSegments ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'ShapeGeometry';\r\n\r\n        if ( typeof curveSegments === 'object' ) {\r\n\r\n            console.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\r\n\r\n            curveSegments = curveSegments.curveSegments;\r\n\r\n        }\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            curveSegments: curveSegments\r\n        };\r\n\r\n        this.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    ShapeGeometry.prototype = Object.create( Geometry.prototype );\r\n    ShapeGeometry.prototype.constructor = ShapeGeometry;\r\n\r\n    ShapeGeometry.prototype.toJSON = function () {\r\n\r\n        var data = Geometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n\r\n        return toJSON$1( shapes, data );\r\n\r\n    };\r\n\r\n    // ShapeBufferGeometry\r\n\r\n    function ShapeBufferGeometry( shapes, curveSegments ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'ShapeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            shapes: shapes,\r\n            curveSegments: curveSegments\r\n        };\r\n\r\n        curveSegments = curveSegments || 12;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var groupStart = 0;\r\n        var groupCount = 0;\r\n\r\n        // allow single and array values for \"shapes\" parameter\r\n\r\n        if ( Array.isArray( shapes ) === false ) {\r\n\r\n            addShape( shapes );\r\n\r\n        } else {\r\n\r\n            for ( var i = 0; i < shapes.length; i ++ ) {\r\n\r\n                addShape( shapes[ i ] );\r\n\r\n                this.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\r\n\r\n                groupStart += groupCount;\r\n                groupCount = 0;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n\r\n        // helper functions\r\n\r\n        function addShape( shape ) {\r\n\r\n            var i, l, shapeHole;\r\n\r\n            var indexOffset = vertices.length / 3;\r\n            var points = shape.extractPoints( curveSegments );\r\n\r\n            var shapeVertices = points.shape;\r\n            var shapeHoles = points.holes;\r\n\r\n            // check direction of vertices\r\n\r\n            if ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\r\n\r\n                shapeVertices = shapeVertices.reverse();\r\n\r\n                // also check if holes are in the opposite direction\r\n\r\n                for ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n                    shapeHole = shapeHoles[ i ];\r\n\r\n                    if ( ShapeUtils.isClockWise( shapeHole ) === true ) {\r\n\r\n                        shapeHoles[ i ] = shapeHole.reverse();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\r\n\r\n            // join vertices of inner and outer paths to a single array\r\n\r\n            for ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\r\n\r\n                shapeHole = shapeHoles[ i ];\r\n                shapeVertices = shapeVertices.concat( shapeHole );\r\n\r\n            }\r\n\r\n            // vertices, normals, uvs\r\n\r\n            for ( i = 0, l = shapeVertices.length; i < l; i ++ ) {\r\n\r\n                var vertex = shapeVertices[ i ];\r\n\r\n                vertices.push( vertex.x, vertex.y, 0 );\r\n                normals.push( 0, 0, 1 );\r\n                uvs.push( vertex.x, vertex.y ); // world uvs\r\n\r\n            }\r\n\r\n            // incides\r\n\r\n            for ( i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                var a = face[ 0 ] + indexOffset;\r\n                var b = face[ 1 ] + indexOffset;\r\n                var c = face[ 2 ] + indexOffset;\r\n\r\n                indices.push( a, b, c );\r\n                groupCount += 3;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    ShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    ShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\r\n\r\n    ShapeBufferGeometry.prototype.toJSON = function () {\r\n\r\n        var data = BufferGeometry.prototype.toJSON.call( this );\r\n\r\n        var shapes = this.parameters.shapes;\r\n\r\n        return toJSON$1( shapes, data );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    function toJSON$1( shapes, data ) {\r\n\r\n        data.shapes = [];\r\n\r\n        if ( Array.isArray( shapes ) ) {\r\n\r\n            for ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n                var shape = shapes[ i ];\r\n\r\n                data.shapes.push( shape.uuid );\r\n\r\n            }\r\n\r\n        } else {\r\n\r\n            data.shapes.push( shapes.uuid );\r\n\r\n        }\r\n\r\n        return data;\r\n\r\n    }\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function EdgesGeometry( geometry, thresholdAngle ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'EdgesGeometry';\r\n\r\n        this.parameters = {\r\n            thresholdAngle: thresholdAngle\r\n        };\r\n\r\n        thresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n        // buffer\r\n\r\n        var vertices = [];\r\n\r\n        // helper variables\r\n\r\n        var thresholdDot = Math.cos( _Math.DEG2RAD * thresholdAngle );\r\n        var edge = [ 0, 0 ], edges = {}, edge1, edge2;\r\n        var key, keys = [ 'a', 'b', 'c' ];\r\n\r\n        // prepare source geometry\r\n\r\n        var geometry2;\r\n\r\n        if ( geometry.isBufferGeometry ) {\r\n\r\n            geometry2 = new Geometry();\r\n            geometry2.fromBufferGeometry( geometry );\r\n\r\n        } else {\r\n\r\n            geometry2 = geometry.clone();\r\n\r\n        }\r\n\r\n        geometry2.mergeVertices();\r\n        geometry2.computeFaceNormals();\r\n\r\n        var sourceVertices = geometry2.vertices;\r\n        var faces = geometry2.faces;\r\n\r\n        // now create a data structure where each entry represents an edge with its adjoining faces\r\n\r\n        for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n            var face = faces[ i ];\r\n\r\n            for ( var j = 0; j < 3; j ++ ) {\r\n\r\n                edge1 = face[ keys[ j ] ];\r\n                edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\r\n                edge[ 0 ] = Math.min( edge1, edge2 );\r\n                edge[ 1 ] = Math.max( edge1, edge2 );\r\n\r\n                key = edge[ 0 ] + ',' + edge[ 1 ];\r\n\r\n                if ( edges[ key ] === undefined ) {\r\n\r\n                    edges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n                } else {\r\n\r\n                    edges[ key ].face2 = i;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // generate vertices\r\n\r\n        for ( key in edges ) {\r\n\r\n            var e = edges[ key ];\r\n\r\n            // an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\r\n\r\n            if ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\r\n\r\n                var vertex = sourceVertices[ e.index1 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                vertex = sourceVertices[ e.index2 ];\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n\r\n    }\r\n\r\n    EdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    EdgesGeometry.prototype.constructor = EdgesGeometry;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    // CylinderGeometry\r\n\r\n    function CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'CylinderGeometry';\r\n\r\n        this.parameters = {\r\n            radiusTop: radiusTop,\r\n            radiusBottom: radiusBottom,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    CylinderGeometry.prototype = Object.create( Geometry.prototype );\r\n    CylinderGeometry.prototype.constructor = CylinderGeometry;\r\n\r\n    // CylinderBufferGeometry\r\n\r\n    function CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'CylinderBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radiusTop: radiusTop,\r\n            radiusBottom: radiusBottom,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        var scope = this;\r\n\r\n        radiusTop = radiusTop !== undefined ? radiusTop : 1;\r\n        radiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\r\n        height = height || 1;\r\n\r\n        radialSegments = Math.floor( radialSegments ) || 8;\r\n        heightSegments = Math.floor( heightSegments ) || 1;\r\n\r\n        openEnded = openEnded !== undefined ? openEnded : false;\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0.0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var index = 0;\r\n        var indexArray = [];\r\n        var halfHeight = height / 2;\r\n        var groupStart = 0;\r\n\r\n        // generate geometry\r\n\r\n        generateTorso();\r\n\r\n        if ( openEnded === false ) {\r\n\r\n            if ( radiusTop > 0 ) generateCap( true );\r\n            if ( radiusBottom > 0 ) generateCap( false );\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n        function generateTorso() {\r\n\r\n            var x, y;\r\n            var normal = new Vector3();\r\n            var vertex = new Vector3();\r\n\r\n            var groupCount = 0;\r\n\r\n            // this will be used to calculate the normal\r\n            var slope = ( radiusBottom - radiusTop ) / height;\r\n\r\n            // generate vertices, normals and uvs\r\n\r\n            for ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n                var indexRow = [];\r\n\r\n                var v = y / heightSegments;\r\n\r\n                // calculate the radius of the current row\r\n\r\n                var radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n                for ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n                    var u = x / radialSegments;\r\n\r\n                    var theta = u * thetaLength + thetaStart;\r\n\r\n                    var sinTheta = Math.sin( theta );\r\n                    var cosTheta = Math.cos( theta );\r\n\r\n                    // vertex\r\n\r\n                    vertex.x = radius * sinTheta;\r\n                    vertex.y = - v * height + halfHeight;\r\n                    vertex.z = radius * cosTheta;\r\n                    vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                    // normal\r\n\r\n                    normal.set( sinTheta, slope, cosTheta ).normalize();\r\n                    normals.push( normal.x, normal.y, normal.z );\r\n\r\n                    // uv\r\n\r\n                    uvs.push( u, 1 - v );\r\n\r\n                    // save index of vertex in respective row\r\n\r\n                    indexRow.push( index ++ );\r\n\r\n                }\r\n\r\n                // now save vertices of the row in our index array\r\n\r\n                indexArray.push( indexRow );\r\n\r\n            }\r\n\r\n            // generate indices\r\n\r\n            for ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n                for ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n                    // we use the index array to access the correct indices\r\n\r\n                    var a = indexArray[ y ][ x ];\r\n                    var b = indexArray[ y + 1 ][ x ];\r\n                    var c = indexArray[ y + 1 ][ x + 1 ];\r\n                    var d = indexArray[ y ][ x + 1 ];\r\n\r\n                    // faces\r\n\r\n                    indices.push( a, b, d );\r\n                    indices.push( b, c, d );\r\n\r\n                    // update group counter\r\n\r\n                    groupCount += 6;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // add a group to the geometry. this will ensure multi material support\r\n\r\n            scope.addGroup( groupStart, groupCount, 0 );\r\n\r\n            // calculate new start value for groups\r\n\r\n            groupStart += groupCount;\r\n\r\n        }\r\n\r\n        function generateCap( top ) {\r\n\r\n            var x, centerIndexStart, centerIndexEnd;\r\n\r\n            var uv = new Vector2();\r\n            var vertex = new Vector3();\r\n\r\n            var groupCount = 0;\r\n\r\n            var radius = ( top === true ) ? radiusTop : radiusBottom;\r\n            var sign = ( top === true ) ? 1 : - 1;\r\n\r\n            // save the index of the first center vertex\r\n            centerIndexStart = index;\r\n\r\n            // first we generate the center vertex data of the cap.\r\n            // because the geometry needs one set of uvs per face,\r\n            // we must generate a center vertex per face/segment\r\n\r\n            for ( x = 1; x <= radialSegments; x ++ ) {\r\n\r\n                // vertex\r\n\r\n                vertices.push( 0, halfHeight * sign, 0 );\r\n\r\n                // normal\r\n\r\n                normals.push( 0, sign, 0 );\r\n\r\n                // uv\r\n\r\n                uvs.push( 0.5, 0.5 );\r\n\r\n                // increase index\r\n\r\n                index ++;\r\n\r\n            }\r\n\r\n            // save the index of the last center vertex\r\n\r\n            centerIndexEnd = index;\r\n\r\n            // now we generate the surrounding vertices, normals and uvs\r\n\r\n            for ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n                var u = x / radialSegments;\r\n                var theta = u * thetaLength + thetaStart;\r\n\r\n                var cosTheta = Math.cos( theta );\r\n                var sinTheta = Math.sin( theta );\r\n\r\n                // vertex\r\n\r\n                vertex.x = radius * sinTheta;\r\n                vertex.y = halfHeight * sign;\r\n                vertex.z = radius * cosTheta;\r\n                vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n                // normal\r\n\r\n                normals.push( 0, sign, 0 );\r\n\r\n                // uv\r\n\r\n                uv.x = ( cosTheta * 0.5 ) + 0.5;\r\n                uv.y = ( sinTheta * 0.5 * sign ) + 0.5;\r\n                uvs.push( uv.x, uv.y );\r\n\r\n                // increase index\r\n\r\n                index ++;\r\n\r\n            }\r\n\r\n            // generate indices\r\n\r\n            for ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n                var c = centerIndexStart + x;\r\n                var i = centerIndexEnd + x;\r\n\r\n                if ( top === true ) {\r\n\r\n                    // face top\r\n\r\n                    indices.push( i, i + 1, c );\r\n\r\n                } else {\r\n\r\n                    // face bottom\r\n\r\n                    indices.push( i + 1, i, c );\r\n\r\n                }\r\n\r\n                groupCount += 3;\r\n\r\n            }\r\n\r\n            // add a group to the geometry. this will ensure multi material support\r\n\r\n            scope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\r\n\r\n            // calculate new start value for groups\r\n\r\n            groupStart += groupCount;\r\n\r\n        }\r\n\r\n    }\r\n\r\n    CylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    CylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\r\n\r\n    /**\r\n     * @author abelnation / http://github.com/abelnation\r\n     */\r\n\r\n    // ConeGeometry\r\n\r\n    function ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        CylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n        this.type = 'ConeGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n    }\r\n\r\n    ConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\r\n    ConeGeometry.prototype.constructor = ConeGeometry;\r\n\r\n    // ConeBufferGeometry\r\n\r\n    function ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n        CylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\r\n\r\n        this.type = 'ConeBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            height: height,\r\n            radialSegments: radialSegments,\r\n            heightSegments: heightSegments,\r\n            openEnded: openEnded,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n    }\r\n\r\n    ConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\r\n    ConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     * @author hughes\r\n     */\r\n\r\n    // CircleGeometry\r\n\r\n    function CircleGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n        Geometry.call( this );\r\n\r\n        this.type = 'CircleGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            segments: segments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        this.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\r\n        this.mergeVertices();\r\n\r\n    }\r\n\r\n    CircleGeometry.prototype = Object.create( Geometry.prototype );\r\n    CircleGeometry.prototype.constructor = CircleGeometry;\r\n\r\n    // CircleBufferGeometry\r\n\r\n    function CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'CircleBufferGeometry';\r\n\r\n        this.parameters = {\r\n            radius: radius,\r\n            segments: segments,\r\n            thetaStart: thetaStart,\r\n            thetaLength: thetaLength\r\n        };\r\n\r\n        radius = radius || 1;\r\n        segments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n        thetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n        thetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n        // buffers\r\n\r\n        var indices = [];\r\n        var vertices = [];\r\n        var normals = [];\r\n        var uvs = [];\r\n\r\n        // helper variables\r\n\r\n        var i, s;\r\n        var vertex = new Vector3();\r\n        var uv = new Vector2();\r\n\r\n        // center point\r\n\r\n        vertices.push( 0, 0, 0 );\r\n        normals.push( 0, 0, 1 );\r\n        uvs.push( 0.5, 0.5 );\r\n\r\n        for ( s = 0, i = 3; s <= segments; s ++, i += 3 ) {\r\n\r\n            var segment = thetaStart + s / segments * thetaLength;\r\n\r\n            // vertex\r\n\r\n            vertex.x = radius * Math.cos( segment );\r\n            vertex.y = radius * Math.sin( segment );\r\n\r\n            vertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n            // normal\r\n\r\n            normals.push( 0, 0, 1 );\r\n\r\n            // uvs\r\n\r\n            uv.x = ( vertices[ i ] / radius + 1 ) / 2;\r\n            uv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n            uvs.push( uv.x, uv.y );\r\n\r\n        }\r\n\r\n        // indices\r\n\r\n        for ( i = 1; i <= segments; i ++ ) {\r\n\r\n            indices.push( i, i + 1, 0 );\r\n\r\n        }\r\n\r\n        // build geometry\r\n\r\n        this.setIndex( indices );\r\n        this.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        this.addAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\r\n        this.addAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\r\n\r\n    }\r\n\r\n    CircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\r\n    CircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\r\n\r\n\r\n\r\n    var Geometries = /*#__PURE__*/Object.freeze({\r\n        WireframeGeometry: WireframeGeometry,\r\n        ParametricGeometry: ParametricGeometry,\r\n        ParametricBufferGeometry: ParametricBufferGeometry,\r\n        TetrahedronGeometry: TetrahedronGeometry,\r\n        TetrahedronBufferGeometry: TetrahedronBufferGeometry,\r\n        OctahedronGeometry: OctahedronGeometry,\r\n        OctahedronBufferGeometry: OctahedronBufferGeometry,\r\n        IcosahedronGeometry: IcosahedronGeometry,\r\n        IcosahedronBufferGeometry: IcosahedronBufferGeometry,\r\n        DodecahedronGeometry: DodecahedronGeometry,\r\n        DodecahedronBufferGeometry: DodecahedronBufferGeometry,\r\n        PolyhedronGeometry: PolyhedronGeometry,\r\n        PolyhedronBufferGeometry: PolyhedronBufferGeometry,\r\n        TubeGeometry: TubeGeometry,\r\n        TubeBufferGeometry: TubeBufferGeometry,\r\n        TorusKnotGeometry: TorusKnotGeometry,\r\n        TorusKnotBufferGeometry: TorusKnotBufferGeometry,\r\n        TorusGeometry: TorusGeometry,\r\n        TorusBufferGeometry: TorusBufferGeometry,\r\n        TextGeometry: TextGeometry,\r\n        TextBufferGeometry: TextBufferGeometry,\r\n        SphereGeometry: SphereGeometry,\r\n        SphereBufferGeometry: SphereBufferGeometry,\r\n        RingGeometry: RingGeometry,\r\n        RingBufferGeometry: RingBufferGeometry,\r\n        PlaneGeometry: PlaneGeometry,\r\n        PlaneBufferGeometry: PlaneBufferGeometry,\r\n        LatheGeometry: LatheGeometry,\r\n        LatheBufferGeometry: LatheBufferGeometry,\r\n        ShapeGeometry: ShapeGeometry,\r\n        ShapeBufferGeometry: ShapeBufferGeometry,\r\n        ExtrudeGeometry: ExtrudeGeometry,\r\n        ExtrudeBufferGeometry: ExtrudeBufferGeometry,\r\n        EdgesGeometry: EdgesGeometry,\r\n        ConeGeometry: ConeGeometry,\r\n        ConeBufferGeometry: ConeBufferGeometry,\r\n        CylinderGeometry: CylinderGeometry,\r\n        CylinderBufferGeometry: CylinderBufferGeometry,\r\n        CircleGeometry: CircleGeometry,\r\n        CircleBufferGeometry: CircleBufferGeometry,\r\n        BoxGeometry: BoxGeometry,\r\n        BoxBufferGeometry: BoxBufferGeometry\r\n    });\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <THREE.Color>\r\n\t * }\r\n     */\r\n\r\n    function ShadowMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'ShadowMaterial';\r\n\r\n        this.color = new Color( 0x000000 );\r\n        this.transparent = true;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    ShadowMaterial.prototype = Object.create( Material.prototype );\r\n    ShadowMaterial.prototype.constructor = ShadowMaterial;\r\n\r\n    ShadowMaterial.prototype.isShadowMaterial = true;\r\n\r\n    ShadowMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function RawShaderMaterial( parameters ) {\r\n\r\n        ShaderMaterial.call( this, parameters );\r\n\r\n        this.type = 'RawShaderMaterial';\r\n\r\n    }\r\n\r\n    RawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\r\n    RawShaderMaterial.prototype.constructor = RawShaderMaterial;\r\n\r\n    RawShaderMaterial.prototype.isRawShaderMaterial = true;\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  roughness: <float>,\r\n\t *  metalness: <float>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissive: <hex>,\r\n\t *  emissiveIntensity: <float>\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  roughnessMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  metalnessMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  envMapIntensity: <float>\r\n\t *\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshStandardMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.defines = { 'STANDARD': '' };\r\n\r\n        this.type = 'MeshStandardMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // diffuse\r\n        this.roughness = 0.5;\r\n        this.metalness = 0.5;\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.emissive = new Color( 0x000000 );\r\n        this.emissiveIntensity = 1.0;\r\n        this.emissiveMap = null;\r\n\r\n        this.bumpMap = null;\r\n        this.bumpScale = 1;\r\n\r\n        this.normalMap = null;\r\n        this.normalScale = new Vector2( 1, 1 );\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.roughnessMap = null;\r\n\r\n        this.metalnessMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.envMapIntensity = 1.0;\r\n\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshStandardMaterial.prototype = Object.create( Material.prototype );\r\n    MeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\r\n\r\n    MeshStandardMaterial.prototype.isMeshStandardMaterial = true;\r\n\r\n    MeshStandardMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.defines = { 'STANDARD': '' };\r\n\r\n        this.color.copy( source.color );\r\n        this.roughness = source.roughness;\r\n        this.metalness = source.metalness;\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.emissive.copy( source.emissive );\r\n        this.emissiveMap = source.emissiveMap;\r\n        this.emissiveIntensity = source.emissiveIntensity;\r\n\r\n        this.bumpMap = source.bumpMap;\r\n        this.bumpScale = source.bumpScale;\r\n\r\n        this.normalMap = source.normalMap;\r\n        this.normalScale.copy( source.normalScale );\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.roughnessMap = source.roughnessMap;\r\n\r\n        this.metalnessMap = source.metalnessMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.envMapIntensity = source.envMapIntensity;\r\n\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *  reflectivity: <float>\r\n\t * }\r\n     */\r\n\r\n    function MeshPhysicalMaterial( parameters ) {\r\n\r\n        MeshStandardMaterial.call( this );\r\n\r\n        this.defines = { 'PHYSICAL': '' };\r\n\r\n        this.type = 'MeshPhysicalMaterial';\r\n\r\n        this.reflectivity = 0.5; // maps to F0 = 0.04\r\n\r\n        this.clearCoat = 0.0;\r\n        this.clearCoatRoughness = 0.0;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\r\n    MeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\r\n\r\n    MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\r\n\r\n    MeshPhysicalMaterial.prototype.copy = function ( source ) {\r\n\r\n        MeshStandardMaterial.prototype.copy.call( this, source );\r\n\r\n        this.defines = { 'PHYSICAL': '' };\r\n\r\n        this.reflectivity = source.reflectivity;\r\n\r\n        this.clearCoat = source.clearCoat;\r\n        this.clearCoatRoughness = source.clearCoatRoughness;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  specular: <hex>,\r\n\t *  shininess: <float>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissive: <hex>,\r\n\t *  emissiveIntensity: <float>\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshPhongMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshPhongMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // diffuse\r\n        this.specular = new Color( 0x111111 );\r\n        this.shininess = 30;\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.emissive = new Color( 0x000000 );\r\n        this.emissiveIntensity = 1.0;\r\n        this.emissiveMap = null;\r\n\r\n        this.bumpMap = null;\r\n        this.bumpScale = 1;\r\n\r\n        this.normalMap = null;\r\n        this.normalScale = new Vector2( 1, 1 );\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.specularMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.combine = MultiplyOperation;\r\n        this.reflectivity = 1;\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshPhongMaterial.prototype = Object.create( Material.prototype );\r\n    MeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\r\n\r\n    MeshPhongMaterial.prototype.isMeshPhongMaterial = true;\r\n\r\n    MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n        this.specular.copy( source.specular );\r\n        this.shininess = source.shininess;\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.emissive.copy( source.emissive );\r\n        this.emissiveMap = source.emissiveMap;\r\n        this.emissiveIntensity = source.emissiveIntensity;\r\n\r\n        this.bumpMap = source.bumpMap;\r\n        this.bumpScale = source.bumpScale;\r\n\r\n        this.normalMap = source.normalMap;\r\n        this.normalScale.copy( source.normalScale );\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.specularMap = source.specularMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.combine = source.combine;\r\n        this.reflectivity = source.reflectivity;\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author takahirox / http://github.com/takahirox\r\n     *\r\n     * parameters = {\r\n\t *  gradientMap: new THREE.Texture( <Image> )\r\n\t * }\r\n     */\r\n\r\n    function MeshToonMaterial( parameters ) {\r\n\r\n        MeshPhongMaterial.call( this );\r\n\r\n        this.defines = { 'TOON': '' };\r\n\r\n        this.type = 'MeshToonMaterial';\r\n\r\n        this.gradientMap = null;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshToonMaterial.prototype = Object.create( MeshPhongMaterial.prototype );\r\n    MeshToonMaterial.prototype.constructor = MeshToonMaterial;\r\n\r\n    MeshToonMaterial.prototype.isMeshToonMaterial = true;\r\n\r\n    MeshToonMaterial.prototype.copy = function ( source ) {\r\n\r\n        MeshPhongMaterial.prototype.copy.call( this, source );\r\n\r\n        this.gradientMap = source.gradientMap;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * parameters = {\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshNormalMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshNormalMaterial';\r\n\r\n        this.bumpMap = null;\r\n        this.bumpScale = 1;\r\n\r\n        this.normalMap = null;\r\n        this.normalScale = new Vector2( 1, 1 );\r\n\r\n        this.displacementMap = null;\r\n        this.displacementScale = 1;\r\n        this.displacementBias = 0;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n\r\n        this.fog = false;\r\n        this.lights = false;\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshNormalMaterial.prototype = Object.create( Material.prototype );\r\n    MeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\r\n\r\n    MeshNormalMaterial.prototype.isMeshNormalMaterial = true;\r\n\r\n    MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.bumpMap = source.bumpMap;\r\n        this.bumpScale = source.bumpScale;\r\n\r\n        this.normalMap = source.normalMap;\r\n        this.normalScale.copy( source.normalScale );\r\n\r\n        this.displacementMap = source.displacementMap;\r\n        this.displacementScale = source.displacementScale;\r\n        this.displacementBias = source.displacementBias;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissive: <hex>,\r\n\t *  emissiveIntensity: <float>\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>\r\n\t * }\r\n     */\r\n\r\n    function MeshLambertMaterial( parameters ) {\r\n\r\n        Material.call( this );\r\n\r\n        this.type = 'MeshLambertMaterial';\r\n\r\n        this.color = new Color( 0xffffff ); // diffuse\r\n\r\n        this.map = null;\r\n\r\n        this.lightMap = null;\r\n        this.lightMapIntensity = 1.0;\r\n\r\n        this.aoMap = null;\r\n        this.aoMapIntensity = 1.0;\r\n\r\n        this.emissive = new Color( 0x000000 );\r\n        this.emissiveIntensity = 1.0;\r\n        this.emissiveMap = null;\r\n\r\n        this.specularMap = null;\r\n\r\n        this.alphaMap = null;\r\n\r\n        this.envMap = null;\r\n        this.combine = MultiplyOperation;\r\n        this.reflectivity = 1;\r\n        this.refractionRatio = 0.98;\r\n\r\n        this.wireframe = false;\r\n        this.wireframeLinewidth = 1;\r\n        this.wireframeLinecap = 'round';\r\n        this.wireframeLinejoin = 'round';\r\n\r\n        this.skinning = false;\r\n        this.morphTargets = false;\r\n        this.morphNormals = false;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    MeshLambertMaterial.prototype = Object.create( Material.prototype );\r\n    MeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\r\n\r\n    MeshLambertMaterial.prototype.isMeshLambertMaterial = true;\r\n\r\n    MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n        Material.prototype.copy.call( this, source );\r\n\r\n        this.color.copy( source.color );\r\n\r\n        this.map = source.map;\r\n\r\n        this.lightMap = source.lightMap;\r\n        this.lightMapIntensity = source.lightMapIntensity;\r\n\r\n        this.aoMap = source.aoMap;\r\n        this.aoMapIntensity = source.aoMapIntensity;\r\n\r\n        this.emissive.copy( source.emissive );\r\n        this.emissiveMap = source.emissiveMap;\r\n        this.emissiveIntensity = source.emissiveIntensity;\r\n\r\n        this.specularMap = source.specularMap;\r\n\r\n        this.alphaMap = source.alphaMap;\r\n\r\n        this.envMap = source.envMap;\r\n        this.combine = source.combine;\r\n        this.reflectivity = source.reflectivity;\r\n        this.refractionRatio = source.refractionRatio;\r\n\r\n        this.wireframe = source.wireframe;\r\n        this.wireframeLinewidth = source.wireframeLinewidth;\r\n        this.wireframeLinecap = source.wireframeLinecap;\r\n        this.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n        this.skinning = source.skinning;\r\n        this.morphTargets = source.morphTargets;\r\n        this.morphNormals = source.morphNormals;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     *\r\n     * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *\r\n\t *  scale: <float>,\r\n\t *  dashSize: <float>,\r\n\t *  gapSize: <float>\r\n\t * }\r\n     */\r\n\r\n    function LineDashedMaterial( parameters ) {\r\n\r\n        LineBasicMaterial.call( this );\r\n\r\n        this.type = 'LineDashedMaterial';\r\n\r\n        this.scale = 1;\r\n        this.dashSize = 3;\r\n        this.gapSize = 1;\r\n\r\n        this.setValues( parameters );\r\n\r\n    }\r\n\r\n    LineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\r\n    LineDashedMaterial.prototype.constructor = LineDashedMaterial;\r\n\r\n    LineDashedMaterial.prototype.isLineDashedMaterial = true;\r\n\r\n    LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n        LineBasicMaterial.prototype.copy.call( this, source );\r\n\r\n        this.scale = source.scale;\r\n        this.dashSize = source.dashSize;\r\n        this.gapSize = source.gapSize;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n\r\n\r\n    var Materials = /*#__PURE__*/Object.freeze({\r\n        ShadowMaterial: ShadowMaterial,\r\n        SpriteMaterial: SpriteMaterial,\r\n        RawShaderMaterial: RawShaderMaterial,\r\n        ShaderMaterial: ShaderMaterial,\r\n        PointsMaterial: PointsMaterial,\r\n        MeshPhysicalMaterial: MeshPhysicalMaterial,\r\n        MeshStandardMaterial: MeshStandardMaterial,\r\n        MeshPhongMaterial: MeshPhongMaterial,\r\n        MeshToonMaterial: MeshToonMaterial,\r\n        MeshNormalMaterial: MeshNormalMaterial,\r\n        MeshLambertMaterial: MeshLambertMaterial,\r\n        MeshDepthMaterial: MeshDepthMaterial,\r\n        MeshDistanceMaterial: MeshDistanceMaterial,\r\n        MeshBasicMaterial: MeshBasicMaterial,\r\n        LineDashedMaterial: LineDashedMaterial,\r\n        LineBasicMaterial: LineBasicMaterial,\r\n        Material: Material\r\n    });\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var Cache = {\r\n\r\n        enabled: false,\r\n\r\n        files: {},\r\n\r\n        add: function ( key, file ) {\r\n\r\n            if ( this.enabled === false ) return;\r\n\r\n            // console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n            this.files[ key ] = file;\r\n\r\n        },\r\n\r\n        get: function ( key ) {\r\n\r\n            if ( this.enabled === false ) return;\r\n\r\n            // console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n            return this.files[ key ];\r\n\r\n        },\r\n\r\n        remove: function ( key ) {\r\n\r\n            delete this.files[ key ];\r\n\r\n        },\r\n\r\n        clear: function () {\r\n\r\n            this.files = {};\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LoadingManager( onLoad, onProgress, onError ) {\r\n\r\n        var scope = this;\r\n\r\n        var isLoading = false;\r\n        var itemsLoaded = 0;\r\n        var itemsTotal = 0;\r\n        var urlModifier = undefined;\r\n\r\n        this.onStart = undefined;\r\n        this.onLoad = onLoad;\r\n        this.onProgress = onProgress;\r\n        this.onError = onError;\r\n\r\n        this.itemStart = function ( url ) {\r\n\r\n            itemsTotal ++;\r\n\r\n            if ( isLoading === false ) {\r\n\r\n                if ( scope.onStart !== undefined ) {\r\n\r\n                    scope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            isLoading = true;\r\n\r\n        };\r\n\r\n        this.itemEnd = function ( url ) {\r\n\r\n            itemsLoaded ++;\r\n\r\n            if ( scope.onProgress !== undefined ) {\r\n\r\n                scope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n            }\r\n\r\n            if ( itemsLoaded === itemsTotal ) {\r\n\r\n                isLoading = false;\r\n\r\n                if ( scope.onLoad !== undefined ) {\r\n\r\n                    scope.onLoad();\r\n\r\n                }\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.itemError = function ( url ) {\r\n\r\n            if ( scope.onError !== undefined ) {\r\n\r\n                scope.onError( url );\r\n\r\n            }\r\n\r\n        };\r\n\r\n        this.resolveURL = function ( url ) {\r\n\r\n            if ( urlModifier ) {\r\n\r\n                return urlModifier( url );\r\n\r\n            }\r\n\r\n            return url;\r\n\r\n        };\r\n\r\n        this.setURLModifier = function ( transform ) {\r\n\r\n            urlModifier = transform;\r\n            return this;\r\n\r\n        };\r\n\r\n    }\r\n\r\n    var DefaultLoadingManager = new LoadingManager();\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var loading = {};\r\n\r\n    function FileLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( FileLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( url === undefined ) url = '';\r\n\r\n            if ( this.path !== undefined ) url = this.path + url;\r\n\r\n            url = this.manager.resolveURL( url );\r\n\r\n            var scope = this;\r\n\r\n            var cached = Cache.get( url );\r\n\r\n            if ( cached !== undefined ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                setTimeout( function () {\r\n\r\n                    if ( onLoad ) onLoad( cached );\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, 0 );\r\n\r\n                return cached;\r\n\r\n            }\r\n\r\n            // Check if request is duplicate\r\n\r\n            if ( loading[ url ] !== undefined ) {\r\n\r\n                loading[ url ].push( {\r\n\r\n                    onLoad: onLoad,\r\n                    onProgress: onProgress,\r\n                    onError: onError\r\n\r\n                } );\r\n\r\n                return;\r\n\r\n            }\r\n\r\n            // Check for data: URI\r\n            var dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\r\n            var dataUriRegexResult = url.match( dataUriRegex );\r\n\r\n            // Safari can not handle Data URIs through XMLHttpRequest so process manually\r\n            if ( dataUriRegexResult ) {\r\n\r\n                var mimeType = dataUriRegexResult[ 1 ];\r\n                var isBase64 = !! dataUriRegexResult[ 2 ];\r\n                var data = dataUriRegexResult[ 3 ];\r\n\r\n                data = window.decodeURIComponent( data );\r\n\r\n                if ( isBase64 ) data = window.atob( data );\r\n\r\n                try {\r\n\r\n                    var response;\r\n                    var responseType = ( this.responseType || '' ).toLowerCase();\r\n\r\n                    switch ( responseType ) {\r\n\r\n                        case 'arraybuffer':\r\n                        case 'blob':\r\n\r\n                            var view = new Uint8Array( data.length );\r\n\r\n                            for ( var i = 0; i < data.length; i ++ ) {\r\n\r\n                                view[ i ] = data.charCodeAt( i );\r\n\r\n                            }\r\n\r\n                            if ( responseType === 'blob' ) {\r\n\r\n                                response = new Blob( [ view.buffer ], { type: mimeType } );\r\n\r\n                            } else {\r\n\r\n                                response = view.buffer;\r\n\r\n                            }\r\n\r\n                            break;\r\n\r\n                        case 'document':\r\n\r\n                            var parser = new DOMParser();\r\n                            response = parser.parseFromString( data, mimeType );\r\n\r\n                            break;\r\n\r\n                        case 'json':\r\n\r\n                            response = JSON.parse( data );\r\n\r\n                            break;\r\n\r\n                        default: // 'text' or other\r\n\r\n                            response = data;\r\n\r\n                            break;\r\n\r\n                    }\r\n\r\n                    // Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n                    window.setTimeout( function () {\r\n\r\n                        if ( onLoad ) onLoad( response );\r\n\r\n                        scope.manager.itemEnd( url );\r\n\r\n                    }, 0 );\r\n\r\n                } catch ( error ) {\r\n\r\n                    // Wait for next browser tick like standard XMLHttpRequest event dispatching does\r\n                    window.setTimeout( function () {\r\n\r\n                        if ( onError ) onError( error );\r\n\r\n                        scope.manager.itemEnd( url );\r\n                        scope.manager.itemError( url );\r\n\r\n                    }, 0 );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                // Initialise array for duplicate requests\r\n\r\n                loading[ url ] = [];\r\n\r\n                loading[ url ].push( {\r\n\r\n                    onLoad: onLoad,\r\n                    onProgress: onProgress,\r\n                    onError: onError\r\n\r\n                } );\r\n\r\n                var request = new XMLHttpRequest();\r\n\r\n                request.open( 'GET', url, true );\r\n\r\n                request.addEventListener( 'load', function ( event ) {\r\n\r\n                    var response = this.response;\r\n\r\n                    Cache.add( url, response );\r\n\r\n                    var callbacks = loading[ url ];\r\n\r\n                    delete loading[ url ];\r\n\r\n                    if ( this.status === 200 || this.status === 0 ) {\r\n\r\n                        // Some browsers return HTTP Status 0 when using non-http protocol\r\n                        // e.g. 'file://' or 'data://'. Handle as success.\r\n\r\n                        if ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\r\n\r\n                        for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                            var callback = callbacks[ i ];\r\n                            if ( callback.onLoad ) callback.onLoad( response );\r\n\r\n                        }\r\n\r\n                        scope.manager.itemEnd( url );\r\n\r\n                    } else {\r\n\r\n                        for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                            var callback = callbacks[ i ];\r\n                            if ( callback.onError ) callback.onError( event );\r\n\r\n                        }\r\n\r\n                        scope.manager.itemEnd( url );\r\n                        scope.manager.itemError( url );\r\n\r\n                    }\r\n\r\n                }, false );\r\n\r\n                request.addEventListener( 'progress', function ( event ) {\r\n\r\n                    var callbacks = loading[ url ];\r\n\r\n                    for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                        var callback = callbacks[ i ];\r\n                        if ( callback.onProgress ) callback.onProgress( event );\r\n\r\n                    }\r\n\r\n                }, false );\r\n\r\n                request.addEventListener( 'error', function ( event ) {\r\n\r\n                    var callbacks = loading[ url ];\r\n\r\n                    delete loading[ url ];\r\n\r\n                    for ( var i = 0, il = callbacks.length; i < il; i ++ ) {\r\n\r\n                        var callback = callbacks[ i ];\r\n                        if ( callback.onError ) callback.onError( event );\r\n\r\n                    }\r\n\r\n                    scope.manager.itemEnd( url );\r\n                    scope.manager.itemError( url );\r\n\r\n                }, false );\r\n\r\n                if ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n                if ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n                if ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\r\n\r\n                for ( var header in this.requestHeader ) {\r\n\r\n                    request.setRequestHeader( header, this.requestHeader[ header ] );\r\n\r\n                }\r\n\r\n                request.send( null );\r\n\r\n            }\r\n\r\n            scope.manager.itemStart( url );\r\n\r\n            return request;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setResponseType: function ( value ) {\r\n\r\n            this.responseType = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setWithCredentials: function ( value ) {\r\n\r\n            this.withCredentials = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setMimeType: function ( value ) {\r\n\r\n            this.mimeType = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setRequestHeader: function ( value ) {\r\n\r\n            this.requestHeader = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     *\r\n     * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n     */\r\n\r\n    function CompressedTextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n        // override in sub classes\r\n        this._parser = null;\r\n\r\n    }\r\n\r\n    Object.assign( CompressedTextureLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var images = [];\r\n\r\n            var texture = new CompressedTexture();\r\n            texture.image = images;\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setPath( this.path );\r\n            loader.setResponseType( 'arraybuffer' );\r\n\r\n            function loadTexture( i ) {\r\n\r\n                loader.load( url[ i ], function ( buffer ) {\r\n\r\n                    var texDatas = scope._parser( buffer, true );\r\n\r\n                    images[ i ] = {\r\n                        width: texDatas.width,\r\n                        height: texDatas.height,\r\n                        format: texDatas.format,\r\n                        mipmaps: texDatas.mipmaps\r\n                    };\r\n\r\n                    loaded += 1;\r\n\r\n                    if ( loaded === 6 ) {\r\n\r\n                        if ( texDatas.mipmapCount === 1 )\r\n                            texture.minFilter = LinearFilter;\r\n\r\n                        texture.format = texDatas.format;\r\n                        texture.needsUpdate = true;\r\n\r\n                        if ( onLoad ) onLoad( texture );\r\n\r\n                    }\r\n\r\n                }, onProgress, onError );\r\n\r\n            }\r\n\r\n            if ( Array.isArray( url ) ) {\r\n\r\n                var loaded = 0;\r\n\r\n                for ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n                    loadTexture( i );\r\n\r\n                }\r\n\r\n            } else {\r\n\r\n                // compressed cubemap texture stored in a single DDS file\r\n\r\n                loader.load( url, function ( buffer ) {\r\n\r\n                    var texDatas = scope._parser( buffer, true );\r\n\r\n                    if ( texDatas.isCubemap ) {\r\n\r\n                        var faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n                        for ( var f = 0; f < faces; f ++ ) {\r\n\r\n                            images[ f ] = { mipmaps: [] };\r\n\r\n                            for ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n                                images[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n                                images[ f ].format = texDatas.format;\r\n                                images[ f ].width = texDatas.width;\r\n                                images[ f ].height = texDatas.height;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        texture.image.width = texDatas.width;\r\n                        texture.image.height = texDatas.height;\r\n                        texture.mipmaps = texDatas.mipmaps;\r\n\r\n                    }\r\n\r\n                    if ( texDatas.mipmapCount === 1 ) {\r\n\r\n                        texture.minFilter = LinearFilter;\r\n\r\n                    }\r\n\r\n                    texture.format = texDatas.format;\r\n                    texture.needsUpdate = true;\r\n\r\n                    if ( onLoad ) onLoad( texture );\r\n\r\n                }, onProgress, onError );\r\n\r\n            }\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author Nikos M. / https://github.com/foo123/\r\n     *\r\n     * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n     */\r\n\r\n    function DataTextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n        // override in sub classes\r\n        this._parser = null;\r\n\r\n    }\r\n\r\n    Object.assign( DataTextureLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var texture = new DataTexture();\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setResponseType( 'arraybuffer' );\r\n\r\n            loader.load( url, function ( buffer ) {\r\n\r\n                var texData = scope._parser( buffer );\r\n\r\n                if ( ! texData ) return;\r\n\r\n                if ( undefined !== texData.image ) {\r\n\r\n                    texture.image = texData.image;\r\n\r\n                } else if ( undefined !== texData.data ) {\r\n\r\n                    texture.image.width = texData.width;\r\n                    texture.image.height = texData.height;\r\n                    texture.image.data = texData.data;\r\n\r\n                }\r\n\r\n                texture.wrapS = undefined !== texData.wrapS ? texData.wrapS : ClampToEdgeWrapping;\r\n                texture.wrapT = undefined !== texData.wrapT ? texData.wrapT : ClampToEdgeWrapping;\r\n\r\n                texture.magFilter = undefined !== texData.magFilter ? texData.magFilter : LinearFilter;\r\n                texture.minFilter = undefined !== texData.minFilter ? texData.minFilter : LinearMipMapLinearFilter;\r\n\r\n                texture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n                if ( undefined !== texData.format ) {\r\n\r\n                    texture.format = texData.format;\r\n\r\n                }\r\n                if ( undefined !== texData.type ) {\r\n\r\n                    texture.type = texData.type;\r\n\r\n                }\r\n\r\n                if ( undefined !== texData.mipmaps ) {\r\n\r\n                    texture.mipmaps = texData.mipmaps;\r\n\r\n                }\r\n\r\n                if ( 1 === texData.mipmapCount ) {\r\n\r\n                    texture.minFilter = LinearFilter;\r\n\r\n                }\r\n\r\n                texture.needsUpdate = true;\r\n\r\n                if ( onLoad ) onLoad( texture, texData );\r\n\r\n            }, onProgress, onError );\r\n\r\n\r\n            return texture;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function ImageLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( ImageLoader.prototype, {\r\n\r\n        crossOrigin: 'Anonymous',\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( url === undefined ) url = '';\r\n\r\n            if ( this.path !== undefined ) url = this.path + url;\r\n\r\n            url = this.manager.resolveURL( url );\r\n\r\n            var scope = this;\r\n\r\n            var cached = Cache.get( url );\r\n\r\n            if ( cached !== undefined ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                setTimeout( function () {\r\n\r\n                    if ( onLoad ) onLoad( cached );\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, 0 );\r\n\r\n                return cached;\r\n\r\n            }\r\n\r\n            var image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\r\n\r\n            function onImageLoad() {\r\n\r\n                image.removeEventListener( 'load', onImageLoad, false );\r\n                image.removeEventListener( 'error', onImageError, false );\r\n\r\n                Cache.add( url, this );\r\n\r\n                if ( onLoad ) onLoad( this );\r\n\r\n                scope.manager.itemEnd( url );\r\n\r\n            }\r\n\r\n            function onImageError( event ) {\r\n\r\n                image.removeEventListener( 'load', onImageLoad, false );\r\n                image.removeEventListener( 'error', onImageError, false );\r\n\r\n                if ( onError ) onError( event );\r\n\r\n                scope.manager.itemEnd( url );\r\n                scope.manager.itemError( url );\r\n\r\n            }\r\n\r\n            image.addEventListener( 'load', onImageLoad, false );\r\n            image.addEventListener( 'error', onImageError, false );\r\n\r\n            if ( url.substr( 0, 5 ) !== 'data:' ) {\r\n\r\n                if ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n            }\r\n\r\n            scope.manager.itemStart( url );\r\n\r\n            image.src = url;\r\n\r\n            return image;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function CubeTextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( CubeTextureLoader.prototype, {\r\n\r\n        crossOrigin: 'Anonymous',\r\n\r\n        load: function ( urls, onLoad, onProgress, onError ) {\r\n\r\n            var texture = new CubeTexture();\r\n\r\n            var loader = new ImageLoader( this.manager );\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n            loader.setPath( this.path );\r\n\r\n            var loaded = 0;\r\n\r\n            function loadTexture( i ) {\r\n\r\n                loader.load( urls[ i ], function ( image ) {\r\n\r\n                    texture.images[ i ] = image;\r\n\r\n                    loaded ++;\r\n\r\n                    if ( loaded === 6 ) {\r\n\r\n                        texture.needsUpdate = true;\r\n\r\n                        if ( onLoad ) onLoad( texture );\r\n\r\n                    }\r\n\r\n                }, undefined, onError );\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < urls.length; ++ i ) {\r\n\r\n                loadTexture( i );\r\n\r\n            }\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function TextureLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( TextureLoader.prototype, {\r\n\r\n        crossOrigin: 'Anonymous',\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var texture = new Texture();\r\n\r\n            var loader = new ImageLoader( this.manager );\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n            loader.setPath( this.path );\r\n\r\n            loader.load( url, function ( image ) {\r\n\r\n                texture.image = image;\r\n\r\n                // JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\r\n                var isJPEG = url.search( /\\.(jpg|jpeg)$/ ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\r\n\r\n                texture.format = isJPEG ? RGBFormat : RGBAFormat;\r\n                texture.needsUpdate = true;\r\n\r\n                if ( onLoad !== undefined ) {\r\n\r\n                    onLoad( texture );\r\n\r\n                }\r\n\r\n            }, onProgress, onError );\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * Extensible curve object\r\n     *\r\n     * Some common of curve methods:\r\n     * .getPoint( t, optionalTarget ), .getTangent( t )\r\n     * .getPointAt( u, optionalTarget ), .getTangentAt( u )\r\n     * .getPoints(), .getSpacedPoints()\r\n     * .getLength()\r\n     * .updateArcLengths()\r\n     *\r\n     * This following curves inherit from THREE.Curve:\r\n     *\r\n     * -- 2D curves --\r\n     * THREE.ArcCurve\r\n     * THREE.CubicBezierCurve\r\n     * THREE.EllipseCurve\r\n     * THREE.LineCurve\r\n     * THREE.QuadraticBezierCurve\r\n     * THREE.SplineCurve\r\n     *\r\n     * -- 3D curves --\r\n     * THREE.CatmullRomCurve3\r\n     * THREE.CubicBezierCurve3\r\n     * THREE.LineCurve3\r\n     * THREE.QuadraticBezierCurve3\r\n     *\r\n     * A series of curves can be represented as a THREE.CurvePath.\r\n     *\r\n     **/\r\n\r\n    /**************************************************************\r\n     *\tAbstract Curve base class\r\n     **************************************************************/\r\n\r\n    function Curve() {\r\n\r\n        this.type = 'Curve';\r\n\r\n        this.arcLengthDivisions = 200;\r\n\r\n    }\r\n\r\n    Object.assign( Curve.prototype, {\r\n\r\n        // Virtual base class method to overwrite and implement in subclasses\r\n        //\t- t [0 .. 1]\r\n\r\n        getPoint: function ( /* t, optionalTarget */ ) {\r\n\r\n            console.warn( 'THREE.Curve: .getPoint() not implemented.' );\r\n            return null;\r\n\r\n        },\r\n\r\n        // Get point at relative position in curve according to arc length\r\n        // - u [0 .. 1]\r\n\r\n        getPointAt: function ( u, optionalTarget ) {\r\n\r\n            var t = this.getUtoTmapping( u );\r\n            return this.getPoint( t, optionalTarget );\r\n\r\n        },\r\n\r\n        // Get sequence of points using getPoint( t )\r\n\r\n        getPoints: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = 5;\r\n\r\n            var points = [];\r\n\r\n            for ( var d = 0; d <= divisions; d ++ ) {\r\n\r\n                points.push( this.getPoint( d / divisions ) );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        // Get sequence of points using getPointAt( u )\r\n\r\n        getSpacedPoints: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = 5;\r\n\r\n            var points = [];\r\n\r\n            for ( var d = 0; d <= divisions; d ++ ) {\r\n\r\n                points.push( this.getPointAt( d / divisions ) );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        // Get total curve arc length\r\n\r\n        getLength: function () {\r\n\r\n            var lengths = this.getLengths();\r\n            return lengths[ lengths.length - 1 ];\r\n\r\n        },\r\n\r\n        // Get list of cumulative segment lengths\r\n\r\n        getLengths: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = this.arcLengthDivisions;\r\n\r\n            if ( this.cacheArcLengths &&\r\n                ( this.cacheArcLengths.length === divisions + 1 ) &&\r\n                ! this.needsUpdate ) {\r\n\r\n                return this.cacheArcLengths;\r\n\r\n            }\r\n\r\n            this.needsUpdate = false;\r\n\r\n            var cache = [];\r\n            var current, last = this.getPoint( 0 );\r\n            var p, sum = 0;\r\n\r\n            cache.push( 0 );\r\n\r\n            for ( p = 1; p <= divisions; p ++ ) {\r\n\r\n                current = this.getPoint( p / divisions );\r\n                sum += current.distanceTo( last );\r\n                cache.push( sum );\r\n                last = current;\r\n\r\n            }\r\n\r\n            this.cacheArcLengths = cache;\r\n\r\n            return cache; // { sums: cache, sum: sum }; Sum is in the last element.\r\n\r\n        },\r\n\r\n        updateArcLengths: function () {\r\n\r\n            this.needsUpdate = true;\r\n            this.getLengths();\r\n\r\n        },\r\n\r\n        // Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\n        getUtoTmapping: function ( u, distance ) {\r\n\r\n            var arcLengths = this.getLengths();\r\n\r\n            var i = 0, il = arcLengths.length;\r\n\r\n            var targetArcLength; // The targeted u distance value to get\r\n\r\n            if ( distance ) {\r\n\r\n                targetArcLength = distance;\r\n\r\n            } else {\r\n\r\n                targetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n            }\r\n\r\n            // binary search for the index with largest value smaller than target u distance\r\n\r\n            var low = 0, high = il - 1, comparison;\r\n\r\n            while ( low <= high ) {\r\n\r\n                i = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n                comparison = arcLengths[ i ] - targetArcLength;\r\n\r\n                if ( comparison < 0 ) {\r\n\r\n                    low = i + 1;\r\n\r\n                } else if ( comparison > 0 ) {\r\n\r\n                    high = i - 1;\r\n\r\n                } else {\r\n\r\n                    high = i;\r\n                    break;\r\n\r\n                    // DONE\r\n\r\n                }\r\n\r\n            }\r\n\r\n            i = high;\r\n\r\n            if ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n                return i / ( il - 1 );\r\n\r\n            }\r\n\r\n            // we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n            var lengthBefore = arcLengths[ i ];\r\n            var lengthAfter = arcLengths[ i + 1 ];\r\n\r\n            var segmentLength = lengthAfter - lengthBefore;\r\n\r\n            // determine where we are between the 'before' and 'after' points\r\n\r\n            var segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n            // add that fractional amount to t\r\n\r\n            var t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n            return t;\r\n\r\n        },\r\n\r\n        // Returns a unit vector tangent at t\r\n        // In case any sub curve does not implement its tangent derivation,\r\n        // 2 points a small delta apart will be used to find its gradient\r\n        // which seems to give a reasonable approximation\r\n\r\n        getTangent: function ( t ) {\r\n\r\n            var delta = 0.0001;\r\n            var t1 = t - delta;\r\n            var t2 = t + delta;\r\n\r\n            // Capping in case of danger\r\n\r\n            if ( t1 < 0 ) t1 = 0;\r\n            if ( t2 > 1 ) t2 = 1;\r\n\r\n            var pt1 = this.getPoint( t1 );\r\n            var pt2 = this.getPoint( t2 );\r\n\r\n            var vec = pt2.clone().sub( pt1 );\r\n            return vec.normalize();\r\n\r\n        },\r\n\r\n        getTangentAt: function ( u ) {\r\n\r\n            var t = this.getUtoTmapping( u );\r\n            return this.getTangent( t );\r\n\r\n        },\r\n\r\n        computeFrenetFrames: function ( segments, closed ) {\r\n\r\n            // see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n\r\n            var normal = new Vector3();\r\n\r\n            var tangents = [];\r\n            var normals = [];\r\n            var binormals = [];\r\n\r\n            var vec = new Vector3();\r\n            var mat = new Matrix4();\r\n\r\n            var i, u, theta;\r\n\r\n            // compute the tangent vectors for each segment on the curve\r\n\r\n            for ( i = 0; i <= segments; i ++ ) {\r\n\r\n                u = i / segments;\r\n\r\n                tangents[ i ] = this.getTangentAt( u );\r\n                tangents[ i ].normalize();\r\n\r\n            }\r\n\r\n            // select an initial normal vector perpendicular to the first tangent vector,\r\n            // and in the direction of the minimum tangent xyz component\r\n\r\n            normals[ 0 ] = new Vector3();\r\n            binormals[ 0 ] = new Vector3();\r\n            var min = Number.MAX_VALUE;\r\n            var tx = Math.abs( tangents[ 0 ].x );\r\n            var ty = Math.abs( tangents[ 0 ].y );\r\n            var tz = Math.abs( tangents[ 0 ].z );\r\n\r\n            if ( tx <= min ) {\r\n\r\n                min = tx;\r\n                normal.set( 1, 0, 0 );\r\n\r\n            }\r\n\r\n            if ( ty <= min ) {\r\n\r\n                min = ty;\r\n                normal.set( 0, 1, 0 );\r\n\r\n            }\r\n\r\n            if ( tz <= min ) {\r\n\r\n                normal.set( 0, 0, 1 );\r\n\r\n            }\r\n\r\n            vec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n            normals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n            binormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\r\n            // compute the slowly-varying normal and binormal vectors for each segment on the curve\r\n\r\n            for ( i = 1; i <= segments; i ++ ) {\r\n\r\n                normals[ i ] = normals[ i - 1 ].clone();\r\n\r\n                binormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n                vec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n                if ( vec.length() > Number.EPSILON ) {\r\n\r\n                    vec.normalize();\r\n\r\n                    theta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n                    normals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n                }\r\n\r\n                binormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n            }\r\n\r\n            // if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n            if ( closed === true ) {\r\n\r\n                theta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\r\n                theta /= segments;\r\n\r\n                if ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\r\n\r\n                    theta = - theta;\r\n\r\n                }\r\n\r\n                for ( i = 1; i <= segments; i ++ ) {\r\n\r\n                    // twist a little...\r\n                    normals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n                    binormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return {\r\n                tangents: tangents,\r\n                normals: normals,\r\n                binormals: binormals\r\n            };\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.arcLengthDivisions = source.arcLengthDivisions;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = {\r\n                metadata: {\r\n                    version: 4.5,\r\n                    type: 'Curve',\r\n                    generator: 'Curve.toJSON'\r\n                }\r\n            };\r\n\r\n            data.arcLengthDivisions = this.arcLengthDivisions;\r\n            data.type = this.type;\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            this.arcLengthDivisions = json.arcLengthDivisions;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    function EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'EllipseCurve';\r\n\r\n        this.aX = aX || 0;\r\n        this.aY = aY || 0;\r\n\r\n        this.xRadius = xRadius || 1;\r\n        this.yRadius = yRadius || 1;\r\n\r\n        this.aStartAngle = aStartAngle || 0;\r\n        this.aEndAngle = aEndAngle || 2 * Math.PI;\r\n\r\n        this.aClockwise = aClockwise || false;\r\n\r\n        this.aRotation = aRotation || 0;\r\n\r\n    }\r\n\r\n    EllipseCurve.prototype = Object.create( Curve.prototype );\r\n    EllipseCurve.prototype.constructor = EllipseCurve;\r\n\r\n    EllipseCurve.prototype.isEllipseCurve = true;\r\n\r\n    EllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var twoPi = Math.PI * 2;\r\n        var deltaAngle = this.aEndAngle - this.aStartAngle;\r\n        var samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\r\n\r\n        // ensures that deltaAngle is 0 .. 2 PI\r\n        while ( deltaAngle < 0 ) deltaAngle += twoPi;\r\n        while ( deltaAngle > twoPi ) deltaAngle -= twoPi;\r\n\r\n        if ( deltaAngle < Number.EPSILON ) {\r\n\r\n            if ( samePoints ) {\r\n\r\n                deltaAngle = 0;\r\n\r\n            } else {\r\n\r\n                deltaAngle = twoPi;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        if ( this.aClockwise === true && ! samePoints ) {\r\n\r\n            if ( deltaAngle === twoPi ) {\r\n\r\n                deltaAngle = - twoPi;\r\n\r\n            } else {\r\n\r\n                deltaAngle = deltaAngle - twoPi;\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var angle = this.aStartAngle + t * deltaAngle;\r\n        var x = this.aX + this.xRadius * Math.cos( angle );\r\n        var y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n        if ( this.aRotation !== 0 ) {\r\n\r\n            var cos = Math.cos( this.aRotation );\r\n            var sin = Math.sin( this.aRotation );\r\n\r\n            var tx = x - this.aX;\r\n            var ty = y - this.aY;\r\n\r\n            // Rotate the point about the center of the ellipse.\r\n            x = tx * cos - ty * sin + this.aX;\r\n            y = tx * sin + ty * cos + this.aY;\r\n\r\n        }\r\n\r\n        return point.set( x, y );\r\n\r\n    };\r\n\r\n    EllipseCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.aX = source.aX;\r\n        this.aY = source.aY;\r\n\r\n        this.xRadius = source.xRadius;\r\n        this.yRadius = source.yRadius;\r\n\r\n        this.aStartAngle = source.aStartAngle;\r\n        this.aEndAngle = source.aEndAngle;\r\n\r\n        this.aClockwise = source.aClockwise;\r\n\r\n        this.aRotation = source.aRotation;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n\r\n    EllipseCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.aX = this.aX;\r\n        data.aY = this.aY;\r\n\r\n        data.xRadius = this.xRadius;\r\n        data.yRadius = this.yRadius;\r\n\r\n        data.aStartAngle = this.aStartAngle;\r\n        data.aEndAngle = this.aEndAngle;\r\n\r\n        data.aClockwise = this.aClockwise;\r\n\r\n        data.aRotation = this.aRotation;\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    EllipseCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.aX = json.aX;\r\n        this.aY = json.aY;\r\n\r\n        this.xRadius = json.xRadius;\r\n        this.yRadius = json.yRadius;\r\n\r\n        this.aStartAngle = json.aStartAngle;\r\n        this.aEndAngle = json.aEndAngle;\r\n\r\n        this.aClockwise = json.aClockwise;\r\n\r\n        this.aRotation = json.aRotation;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n        EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n        this.type = 'ArcCurve';\r\n\r\n    }\r\n\r\n    ArcCurve.prototype = Object.create( EllipseCurve.prototype );\r\n    ArcCurve.prototype.constructor = ArcCurve;\r\n\r\n    ArcCurve.prototype.isArcCurve = true;\r\n\r\n    /**\r\n     * @author zz85 https://github.com/zz85\r\n     *\r\n     * Centripetal CatmullRom Curve - which is useful for avoiding\r\n     * cusps and self-intersections in non-uniform catmull rom curves.\r\n     * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n     *\r\n     * curve.type accepts centripetal(default), chordal and catmullrom\r\n     * curve.tension is used for catmullrom which defaults to 0.5\r\n     */\r\n\r\n\r\n    /*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n    function CubicPoly() {\r\n\r\n        var c0 = 0, c1 = 0, c2 = 0, c3 = 0;\r\n\r\n        /*\r\n\t\t * Compute coefficients for a cubic polynomial\r\n\t\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t\t * such that\r\n\t\t *   p(0) = x0, p(1) = x1\r\n\t\t *  and\r\n\t\t *   p'(0) = t0, p'(1) = t1.\r\n\t\t */\r\n        function init( x0, x1, t0, t1 ) {\r\n\r\n            c0 = x0;\r\n            c1 = t0;\r\n            c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n            c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n        }\r\n\r\n        return {\r\n\r\n            initCatmullRom: function ( x0, x1, x2, x3, tension ) {\r\n\r\n                init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n            },\r\n\r\n            initNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n                // compute tangents when parameterized in [t1,t2]\r\n                var t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n                var t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n                // rescale tangents for parametrization in [0,1]\r\n                t1 *= dt1;\r\n                t2 *= dt1;\r\n\r\n                init( x1, x2, t1, t2 );\r\n\r\n            },\r\n\r\n            calc: function ( t ) {\r\n\r\n                var t2 = t * t;\r\n                var t3 = t2 * t;\r\n                return c0 + c1 * t + c2 * t2 + c3 * t3;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    //\r\n\r\n    var tmp = new Vector3();\r\n    var px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\r\n\r\n    function CatmullRomCurve3( points, closed, curveType, tension ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CatmullRomCurve3';\r\n\r\n        this.points = points || [];\r\n        this.closed = closed || false;\r\n        this.curveType = curveType || 'centripetal';\r\n        this.tension = tension || 0.5;\r\n\r\n    }\r\n\r\n    CatmullRomCurve3.prototype = Object.create( Curve.prototype );\r\n    CatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\r\n\r\n    CatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\r\n\r\n    CatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        var points = this.points;\r\n        var l = points.length;\r\n\r\n        var p = ( l - ( this.closed ? 0 : 1 ) ) * t;\r\n        var intPoint = Math.floor( p );\r\n        var weight = p - intPoint;\r\n\r\n        if ( this.closed ) {\r\n\r\n            intPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\r\n\r\n        } else if ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n            intPoint = l - 2;\r\n            weight = 1;\r\n\r\n        }\r\n\r\n        var p0, p1, p2, p3; // 4 points\r\n\r\n        if ( this.closed || intPoint > 0 ) {\r\n\r\n            p0 = points[ ( intPoint - 1 ) % l ];\r\n\r\n        } else {\r\n\r\n            // extrapolate first point\r\n            tmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n            p0 = tmp;\r\n\r\n        }\r\n\r\n        p1 = points[ intPoint % l ];\r\n        p2 = points[ ( intPoint + 1 ) % l ];\r\n\r\n        if ( this.closed || intPoint + 2 < l ) {\r\n\r\n            p3 = points[ ( intPoint + 2 ) % l ];\r\n\r\n        } else {\r\n\r\n            // extrapolate last point\r\n            tmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\r\n            p3 = tmp;\r\n\r\n        }\r\n\r\n        if ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\r\n\r\n            // init Centripetal / Chordal Catmull-Rom\r\n            var pow = this.curveType === 'chordal' ? 0.5 : 0.25;\r\n            var dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n            var dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n            var dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n            // safety check for repeated points\r\n            if ( dt1 < 1e-4 ) dt1 = 1.0;\r\n            if ( dt0 < 1e-4 ) dt0 = dt1;\r\n            if ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n            px.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n            py.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n            pz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n        } else if ( this.curveType === 'catmullrom' ) {\r\n\r\n            px.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\r\n            py.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\r\n            pz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\r\n\r\n        }\r\n\r\n        point.set(\r\n            px.calc( weight ),\r\n            py.calc( weight ),\r\n            pz.calc( weight )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    CatmullRomCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n            var point = source.points[ i ];\r\n\r\n            this.points.push( point.clone() );\r\n\r\n        }\r\n\r\n        this.closed = source.closed;\r\n        this.curveType = source.curveType;\r\n        this.tension = source.tension;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    CatmullRomCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.points = [];\r\n\r\n        for ( var i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n            var point = this.points[ i ];\r\n            data.points.push( point.toArray() );\r\n\r\n        }\r\n\r\n        data.closed = this.closed;\r\n        data.curveType = this.curveType;\r\n        data.tension = this.tension;\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    CatmullRomCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n            var point = json.points[ i ];\r\n            this.points.push( new Vector3().fromArray( point ) );\r\n\r\n        }\r\n\r\n        this.closed = json.closed;\r\n        this.curveType = json.curveType;\r\n        this.tension = json.tension;\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     *\r\n     * Bezier Curves formulas obtained from\r\n     * http://en.wikipedia.org/wiki/Bzier_curve\r\n     */\r\n\r\n    function CatmullRom( t, p0, p1, p2, p3 ) {\r\n\r\n        var v0 = ( p2 - p0 ) * 0.5;\r\n        var v1 = ( p3 - p1 ) * 0.5;\r\n        var t2 = t * t;\r\n        var t3 = t * t2;\r\n        return ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function QuadraticBezierP0( t, p ) {\r\n\r\n        var k = 1 - t;\r\n        return k * k * p;\r\n\r\n    }\r\n\r\n    function QuadraticBezierP1( t, p ) {\r\n\r\n        return 2 * ( 1 - t ) * t * p;\r\n\r\n    }\r\n\r\n    function QuadraticBezierP2( t, p ) {\r\n\r\n        return t * t * p;\r\n\r\n    }\r\n\r\n    function QuadraticBezier( t, p0, p1, p2 ) {\r\n\r\n        return QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\r\n            QuadraticBezierP2( t, p2 );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function CubicBezierP0( t, p ) {\r\n\r\n        var k = 1 - t;\r\n        return k * k * k * p;\r\n\r\n    }\r\n\r\n    function CubicBezierP1( t, p ) {\r\n\r\n        var k = 1 - t;\r\n        return 3 * k * k * t * p;\r\n\r\n    }\r\n\r\n    function CubicBezierP2( t, p ) {\r\n\r\n        return 3 * ( 1 - t ) * t * t * p;\r\n\r\n    }\r\n\r\n    function CubicBezierP3( t, p ) {\r\n\r\n        return t * t * t * p;\r\n\r\n    }\r\n\r\n    function CubicBezier( t, p0, p1, p2, p3 ) {\r\n\r\n        return CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\r\n            CubicBezierP3( t, p3 );\r\n\r\n    }\r\n\r\n    function CubicBezierCurve( v0, v1, v2, v3 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CubicBezierCurve';\r\n\r\n        this.v0 = v0 || new Vector2();\r\n        this.v1 = v1 || new Vector2();\r\n        this.v2 = v2 || new Vector2();\r\n        this.v3 = v3 || new Vector2();\r\n\r\n    }\r\n\r\n    CubicBezierCurve.prototype = Object.create( Curve.prototype );\r\n    CubicBezierCurve.prototype.constructor = CubicBezierCurve;\r\n\r\n    CubicBezierCurve.prototype.isCubicBezierCurve = true;\r\n\r\n    CubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n        point.set(\r\n            CubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n            CubicBezier( t, v0.y, v1.y, v2.y, v3.y )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    CubicBezierCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n        this.v3.copy( source.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    CubicBezierCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n        data.v3 = this.v3.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    CubicBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n        this.v3.fromArray( json.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function CubicBezierCurve3( v0, v1, v2, v3 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CubicBezierCurve3';\r\n\r\n        this.v0 = v0 || new Vector3();\r\n        this.v1 = v1 || new Vector3();\r\n        this.v2 = v2 || new Vector3();\r\n        this.v3 = v3 || new Vector3();\r\n\r\n    }\r\n\r\n    CubicBezierCurve3.prototype = Object.create( Curve.prototype );\r\n    CubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\r\n\r\n    CubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\r\n\r\n    CubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\r\n\r\n        point.set(\r\n            CubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\r\n            CubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\r\n            CubicBezier( t, v0.z, v1.z, v2.z, v3.z )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    CubicBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n        this.v3.copy( source.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    CubicBezierCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n        data.v3 = this.v3.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    CubicBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n        this.v3.fromArray( json.v3 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function LineCurve( v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'LineCurve';\r\n\r\n        this.v1 = v1 || new Vector2();\r\n        this.v2 = v2 || new Vector2();\r\n\r\n    }\r\n\r\n    LineCurve.prototype = Object.create( Curve.prototype );\r\n    LineCurve.prototype.constructor = LineCurve;\r\n\r\n    LineCurve.prototype.isLineCurve = true;\r\n\r\n    LineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        if ( t === 1 ) {\r\n\r\n            point.copy( this.v2 );\r\n\r\n        } else {\r\n\r\n            point.copy( this.v2 ).sub( this.v1 );\r\n            point.multiplyScalar( t ).add( this.v1 );\r\n\r\n        }\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    // Line curve is linear, so we can overwrite default getPointAt\r\n\r\n    LineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n        return this.getPoint( u, optionalTarget );\r\n\r\n    };\r\n\r\n    LineCurve.prototype.getTangent = function ( /* t */ ) {\r\n\r\n        var tangent = this.v2.clone().sub( this.v1 );\r\n\r\n        return tangent.normalize();\r\n\r\n    };\r\n\r\n    LineCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    LineCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    LineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function LineCurve3( v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'LineCurve3';\r\n\r\n        this.v1 = v1 || new Vector3();\r\n        this.v2 = v2 || new Vector3();\r\n\r\n    }\r\n\r\n    LineCurve3.prototype = Object.create( Curve.prototype );\r\n    LineCurve3.prototype.constructor = LineCurve3;\r\n\r\n    LineCurve3.prototype.isLineCurve3 = true;\r\n\r\n    LineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        if ( t === 1 ) {\r\n\r\n            point.copy( this.v2 );\r\n\r\n        } else {\r\n\r\n            point.copy( this.v2 ).sub( this.v1 );\r\n            point.multiplyScalar( t ).add( this.v1 );\r\n\r\n        }\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    // Line curve is linear, so we can overwrite default getPointAt\r\n\r\n    LineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\r\n\r\n        return this.getPoint( u, optionalTarget );\r\n\r\n    };\r\n\r\n    LineCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    LineCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    LineCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function QuadraticBezierCurve( v0, v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'QuadraticBezierCurve';\r\n\r\n        this.v0 = v0 || new Vector2();\r\n        this.v1 = v1 || new Vector2();\r\n        this.v2 = v2 || new Vector2();\r\n\r\n    }\r\n\r\n    QuadraticBezierCurve.prototype = Object.create( Curve.prototype );\r\n    QuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\r\n\r\n    QuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\r\n\r\n    QuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n        point.set(\r\n            QuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n            QuadraticBezier( t, v0.y, v1.y, v2.y )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function QuadraticBezierCurve3( v0, v1, v2 ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'QuadraticBezierCurve3';\r\n\r\n        this.v0 = v0 || new Vector3();\r\n        this.v1 = v1 || new Vector3();\r\n        this.v2 = v2 || new Vector3();\r\n\r\n    }\r\n\r\n    QuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\r\n    QuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\r\n\r\n    QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\r\n\r\n    QuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector3();\r\n\r\n        var v0 = this.v0, v1 = this.v1, v2 = this.v2;\r\n\r\n        point.set(\r\n            QuadraticBezier( t, v0.x, v1.x, v2.x ),\r\n            QuadraticBezier( t, v0.y, v1.y, v2.y ),\r\n            QuadraticBezier( t, v0.z, v1.z, v2.z )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve3.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.v0.copy( source.v0 );\r\n        this.v1.copy( source.v1 );\r\n        this.v2.copy( source.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve3.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.v0 = this.v0.toArray();\r\n        data.v1 = this.v1.toArray();\r\n        data.v2 = this.v2.toArray();\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    QuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.v0.fromArray( json.v0 );\r\n        this.v1.fromArray( json.v1 );\r\n        this.v2.fromArray( json.v2 );\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    function SplineCurve( points /* array of Vector2 */ ) {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'SplineCurve';\r\n\r\n        this.points = points || [];\r\n\r\n    }\r\n\r\n    SplineCurve.prototype = Object.create( Curve.prototype );\r\n    SplineCurve.prototype.constructor = SplineCurve;\r\n\r\n    SplineCurve.prototype.isSplineCurve = true;\r\n\r\n    SplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\r\n\r\n        var point = optionalTarget || new Vector2();\r\n\r\n        var points = this.points;\r\n        var p = ( points.length - 1 ) * t;\r\n\r\n        var intPoint = Math.floor( p );\r\n        var weight = p - intPoint;\r\n\r\n        var p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n        var p1 = points[ intPoint ];\r\n        var p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n        var p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n        point.set(\r\n            CatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\r\n            CatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\r\n        );\r\n\r\n        return point;\r\n\r\n    };\r\n\r\n    SplineCurve.prototype.copy = function ( source ) {\r\n\r\n        Curve.prototype.copy.call( this, source );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = source.points.length; i < l; i ++ ) {\r\n\r\n            var point = source.points[ i ];\r\n\r\n            this.points.push( point.clone() );\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    SplineCurve.prototype.toJSON = function () {\r\n\r\n        var data = Curve.prototype.toJSON.call( this );\r\n\r\n        data.points = [];\r\n\r\n        for ( var i = 0, l = this.points.length; i < l; i ++ ) {\r\n\r\n            var point = this.points[ i ];\r\n            data.points.push( point.toArray() );\r\n\r\n        }\r\n\r\n        return data;\r\n\r\n    };\r\n\r\n    SplineCurve.prototype.fromJSON = function ( json ) {\r\n\r\n        Curve.prototype.fromJSON.call( this, json );\r\n\r\n        this.points = [];\r\n\r\n        for ( var i = 0, l = json.points.length; i < l; i ++ ) {\r\n\r\n            var point = json.points[ i ];\r\n            this.points.push( new Vector2().fromArray( point ) );\r\n\r\n        }\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n\r\n\r\n    var Curves = /*#__PURE__*/Object.freeze({\r\n        ArcCurve: ArcCurve,\r\n        CatmullRomCurve3: CatmullRomCurve3,\r\n        CubicBezierCurve: CubicBezierCurve,\r\n        CubicBezierCurve3: CubicBezierCurve3,\r\n        EllipseCurve: EllipseCurve,\r\n        LineCurve: LineCurve,\r\n        LineCurve3: LineCurve3,\r\n        QuadraticBezierCurve: QuadraticBezierCurve,\r\n        QuadraticBezierCurve3: QuadraticBezierCurve3,\r\n        SplineCurve: SplineCurve\r\n    });\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     *\r\n     **/\r\n\r\n    /**************************************************************\r\n     *\tCurved Path - a curve path is simply a array of connected\r\n     *  curves, but retains the api of a curve\r\n     **************************************************************/\r\n\r\n    function CurvePath() {\r\n\r\n        Curve.call( this );\r\n\r\n        this.type = 'CurvePath';\r\n\r\n        this.curves = [];\r\n        this.autoClose = false; // Automatically closes the path\r\n\r\n    }\r\n\r\n    CurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\r\n\r\n        constructor: CurvePath,\r\n\r\n        add: function ( curve ) {\r\n\r\n            this.curves.push( curve );\r\n\r\n        },\r\n\r\n        closePath: function () {\r\n\r\n            // Add a line curve if start and end of lines are not connected\r\n            var startPoint = this.curves[ 0 ].getPoint( 0 );\r\n            var endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n            if ( ! startPoint.equals( endPoint ) ) {\r\n\r\n                this.curves.push( new LineCurve( endPoint, startPoint ) );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // To get accurate point with reference to\r\n        // entire path distance at time t,\r\n        // following has to be done:\r\n\r\n        // 1. Length of each sub path have to be known\r\n        // 2. Locate and identify type of curve\r\n        // 3. Get t for the curve\r\n        // 4. Return curve.getPointAt(t')\r\n\r\n        getPoint: function ( t ) {\r\n\r\n            var d = t * this.getLength();\r\n            var curveLengths = this.getCurveLengths();\r\n            var i = 0;\r\n\r\n            // To think about boundaries points.\r\n\r\n            while ( i < curveLengths.length ) {\r\n\r\n                if ( curveLengths[ i ] >= d ) {\r\n\r\n                    var diff = curveLengths[ i ] - d;\r\n                    var curve = this.curves[ i ];\r\n\r\n                    var segmentLength = curve.getLength();\r\n                    var u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\r\n\r\n                    return curve.getPointAt( u );\r\n\r\n                }\r\n\r\n                i ++;\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n            // loop where sum != 0, sum > d , sum+1 <d\r\n\r\n        },\r\n\r\n        // We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n        // THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n        // getPoint() depends on getLength\r\n\r\n        getLength: function () {\r\n\r\n            var lens = this.getCurveLengths();\r\n            return lens[ lens.length - 1 ];\r\n\r\n        },\r\n\r\n        // cacheLengths must be recalculated.\r\n        updateArcLengths: function () {\r\n\r\n            this.needsUpdate = true;\r\n            this.cacheLengths = null;\r\n            this.getCurveLengths();\r\n\r\n        },\r\n\r\n        // Compute lengths and cache them\r\n        // We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\n        getCurveLengths: function () {\r\n\r\n            // We use cache values if curves and cache array are same length\r\n\r\n            if ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n                return this.cacheLengths;\r\n\r\n            }\r\n\r\n            // Get length of sub-curve\r\n            // Push sums into cached array\r\n\r\n            var lengths = [], sums = 0;\r\n\r\n            for ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n                sums += this.curves[ i ].getLength();\r\n                lengths.push( sums );\r\n\r\n            }\r\n\r\n            this.cacheLengths = lengths;\r\n\r\n            return lengths;\r\n\r\n        },\r\n\r\n        getSpacedPoints: function ( divisions ) {\r\n\r\n            if ( divisions === undefined ) divisions = 40;\r\n\r\n            var points = [];\r\n\r\n            for ( var i = 0; i <= divisions; i ++ ) {\r\n\r\n                points.push( this.getPoint( i / divisions ) );\r\n\r\n            }\r\n\r\n            if ( this.autoClose ) {\r\n\r\n                points.push( points[ 0 ] );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        getPoints: function ( divisions ) {\r\n\r\n            divisions = divisions || 12;\r\n\r\n            var points = [], last;\r\n\r\n            for ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\r\n\r\n                var curve = curves[ i ];\r\n                var resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\r\n                    : ( curve && curve.isLineCurve ) ? 1\r\n                        : ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\r\n                            : divisions;\r\n\r\n                var pts = curve.getPoints( resolution );\r\n\r\n                for ( var j = 0; j < pts.length; j ++ ) {\r\n\r\n                    var point = pts[ j ];\r\n\r\n                    if ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\r\n\r\n                    points.push( point );\r\n                    last = point;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\r\n\r\n                points.push( points[ 0 ] );\r\n\r\n            }\r\n\r\n            return points;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Curve.prototype.copy.call( this, source );\r\n\r\n            this.curves = [];\r\n\r\n            for ( var i = 0, l = source.curves.length; i < l; i ++ ) {\r\n\r\n                var curve = source.curves[ i ];\r\n\r\n                this.curves.push( curve.clone() );\r\n\r\n            }\r\n\r\n            this.autoClose = source.autoClose;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = Curve.prototype.toJSON.call( this );\r\n\r\n            data.autoClose = this.autoClose;\r\n            data.curves = [];\r\n\r\n            for ( var i = 0, l = this.curves.length; i < l; i ++ ) {\r\n\r\n                var curve = this.curves[ i ];\r\n                data.curves.push( curve.toJSON() );\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            Curve.prototype.fromJSON.call( this, json );\r\n\r\n            this.autoClose = json.autoClose;\r\n            this.curves = [];\r\n\r\n            for ( var i = 0, l = json.curves.length; i < l; i ++ ) {\r\n\r\n                var curve = json.curves[ i ];\r\n                this.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * Creates free form 2d path using series of points, lines or curves.\r\n     **/\r\n\r\n    function Path( points ) {\r\n\r\n        CurvePath.call( this );\r\n\r\n        this.type = 'Path';\r\n\r\n        this.currentPoint = new Vector2();\r\n\r\n        if ( points ) {\r\n\r\n            this.setFromPoints( points );\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Path.prototype = Object.assign( Object.create( CurvePath.prototype ), {\r\n\r\n        constructor: Path,\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.moveTo( points[ 0 ].x, points[ 0 ].y );\r\n\r\n            for ( var i = 1, l = points.length; i < l; i ++ ) {\r\n\r\n                this.lineTo( points[ i ].x, points[ i ].y );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        moveTo: function ( x, y ) {\r\n\r\n            this.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\r\n\r\n        },\r\n\r\n        lineTo: function ( x, y ) {\r\n\r\n            var curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.set( x, y );\r\n\r\n        },\r\n\r\n        quadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n            var curve = new QuadraticBezierCurve(\r\n                this.currentPoint.clone(),\r\n                new Vector2( aCPx, aCPy ),\r\n                new Vector2( aX, aY )\r\n            );\r\n\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.set( aX, aY );\r\n\r\n        },\r\n\r\n        bezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n            var curve = new CubicBezierCurve(\r\n                this.currentPoint.clone(),\r\n                new Vector2( aCP1x, aCP1y ),\r\n                new Vector2( aCP2x, aCP2y ),\r\n                new Vector2( aX, aY )\r\n            );\r\n\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.set( aX, aY );\r\n\r\n        },\r\n\r\n        splineThru: function ( pts /*Array of Vector*/ ) {\r\n\r\n            var npts = [ this.currentPoint.clone() ].concat( pts );\r\n\r\n            var curve = new SplineCurve( npts );\r\n            this.curves.push( curve );\r\n\r\n            this.currentPoint.copy( pts[ pts.length - 1 ] );\r\n\r\n        },\r\n\r\n        arc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n            var x0 = this.currentPoint.x;\r\n            var y0 = this.currentPoint.y;\r\n\r\n            this.absarc( aX + x0, aY + y0, aRadius,\r\n                aStartAngle, aEndAngle, aClockwise );\r\n\r\n        },\r\n\r\n        absarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n            this.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n        },\r\n\r\n        ellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n            var x0 = this.currentPoint.x;\r\n            var y0 = this.currentPoint.y;\r\n\r\n            this.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n        },\r\n\r\n        absellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n            var curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n            if ( this.curves.length > 0 ) {\r\n\r\n                // if a previous curve is present, attempt to join\r\n                var firstPoint = curve.getPoint( 0 );\r\n\r\n                if ( ! firstPoint.equals( this.currentPoint ) ) {\r\n\r\n                    this.lineTo( firstPoint.x, firstPoint.y );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.curves.push( curve );\r\n\r\n            var lastPoint = curve.getPoint( 1 );\r\n            this.currentPoint.copy( lastPoint );\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            CurvePath.prototype.copy.call( this, source );\r\n\r\n            this.currentPoint.copy( source.currentPoint );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = CurvePath.prototype.toJSON.call( this );\r\n\r\n            data.currentPoint = this.currentPoint.toArray();\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            CurvePath.prototype.fromJSON.call( this, json );\r\n\r\n            this.currentPoint.fromArray( json.currentPoint );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * Defines a 2d shape plane using paths.\r\n     **/\r\n\r\n    // STEP 1 Create a path.\r\n    // STEP 2 Turn path into shape.\r\n    // STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n    // STEP 3a - Extract points from each shape, turn to vertices\r\n    // STEP 3b - Triangulate each shape, add faces.\r\n\r\n    function Shape( points ) {\r\n\r\n        Path.call( this, points );\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        this.type = 'Shape';\r\n\r\n        this.holes = [];\r\n\r\n    }\r\n\r\n    Shape.prototype = Object.assign( Object.create( Path.prototype ), {\r\n\r\n        constructor: Shape,\r\n\r\n        getPointsHoles: function ( divisions ) {\r\n\r\n            var holesPts = [];\r\n\r\n            for ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n                holesPts[ i ] = this.holes[ i ].getPoints( divisions );\r\n\r\n            }\r\n\r\n            return holesPts;\r\n\r\n        },\r\n\r\n        // get points of shape and holes (keypoints based on segments parameter)\r\n\r\n        extractPoints: function ( divisions ) {\r\n\r\n            return {\r\n\r\n                shape: this.getPoints( divisions ),\r\n                holes: this.getPointsHoles( divisions )\r\n\r\n            };\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            Path.prototype.copy.call( this, source );\r\n\r\n            this.holes = [];\r\n\r\n            for ( var i = 0, l = source.holes.length; i < l; i ++ ) {\r\n\r\n                var hole = source.holes[ i ];\r\n\r\n                this.holes.push( hole.clone() );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var data = Path.prototype.toJSON.call( this );\r\n\r\n            data.uuid = this.uuid;\r\n            data.holes = [];\r\n\r\n            for ( var i = 0, l = this.holes.length; i < l; i ++ ) {\r\n\r\n                var hole = this.holes[ i ];\r\n                data.holes.push( hole.toJSON() );\r\n\r\n            }\r\n\r\n            return data;\r\n\r\n        },\r\n\r\n        fromJSON: function ( json ) {\r\n\r\n            Path.prototype.fromJSON.call( this, json );\r\n\r\n            this.uuid = json.uuid;\r\n            this.holes = [];\r\n\r\n            for ( var i = 0, l = json.holes.length; i < l; i ++ ) {\r\n\r\n                var hole = json.holes[ i ];\r\n                this.holes.push( new Path().fromJSON( hole ) );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Light( color, intensity ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Light';\r\n\r\n        this.color = new Color( color );\r\n        this.intensity = intensity !== undefined ? intensity : 1;\r\n\r\n        this.receiveShadow = undefined;\r\n\r\n    }\r\n\r\n    Light.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Light,\r\n\r\n        isLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Object3D.prototype.copy.call( this, source );\r\n\r\n            this.color.copy( source.color );\r\n            this.intensity = source.intensity;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Object3D.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.color = this.color.getHex();\r\n            data.object.intensity = this.intensity;\r\n\r\n            if ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\r\n\r\n            if ( this.distance !== undefined ) data.object.distance = this.distance;\r\n            if ( this.angle !== undefined ) data.object.angle = this.angle;\r\n            if ( this.decay !== undefined ) data.object.decay = this.decay;\r\n            if ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\r\n\r\n            if ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function HemisphereLight( skyColor, groundColor, intensity ) {\r\n\r\n        Light.call( this, skyColor, intensity );\r\n\r\n        this.type = 'HemisphereLight';\r\n\r\n        this.castShadow = undefined;\r\n\r\n        this.position.copy( Object3D.DefaultUp );\r\n        this.updateMatrix();\r\n\r\n        this.groundColor = new Color( groundColor );\r\n\r\n    }\r\n\r\n    HemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: HemisphereLight,\r\n\r\n        isHemisphereLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.groundColor.copy( source.groundColor );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function LightShadow( camera ) {\r\n\r\n        this.camera = camera;\r\n\r\n        this.bias = 0;\r\n        this.radius = 1;\r\n\r\n        this.mapSize = new Vector2( 512, 512 );\r\n\r\n        this.map = null;\r\n        this.matrix = new Matrix4();\r\n\r\n    }\r\n\r\n    Object.assign( LightShadow.prototype, {\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.camera = source.camera.clone();\r\n\r\n            this.bias = source.bias;\r\n            this.radius = source.radius;\r\n\r\n            this.mapSize.copy( source.mapSize );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        toJSON: function () {\r\n\r\n            var object = {};\r\n\r\n            if ( this.bias !== 0 ) object.bias = this.bias;\r\n            if ( this.radius !== 1 ) object.radius = this.radius;\r\n            if ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\r\n\r\n            object.camera = this.camera.toJSON( false ).object;\r\n            delete object.camera.matrix;\r\n\r\n            return object;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function SpotLightShadow() {\r\n\r\n        LightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\r\n\r\n    }\r\n\r\n    SpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n        constructor: SpotLightShadow,\r\n\r\n        isSpotLightShadow: true,\r\n\r\n        update: function ( light ) {\r\n\r\n            var camera = this.camera;\r\n\r\n            var fov = _Math.RAD2DEG * 2 * light.angle;\r\n            var aspect = this.mapSize.width / this.mapSize.height;\r\n            var far = light.distance || camera.far;\r\n\r\n            if ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\r\n\r\n                camera.fov = fov;\r\n                camera.aspect = aspect;\r\n                camera.far = far;\r\n                camera.updateProjectionMatrix();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function SpotLight( color, intensity, distance, angle, penumbra, decay ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'SpotLight';\r\n\r\n        this.position.copy( Object3D.DefaultUp );\r\n        this.updateMatrix();\r\n\r\n        this.target = new Object3D();\r\n\r\n        Object.defineProperty( this, 'power', {\r\n            get: function () {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                return this.intensity * Math.PI;\r\n\r\n            },\r\n            set: function ( power ) {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                this.intensity = power / Math.PI;\r\n\r\n            }\r\n        } );\r\n\r\n        this.distance = ( distance !== undefined ) ? distance : 0;\r\n        this.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n        this.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\r\n        this.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n        this.shadow = new SpotLightShadow();\r\n\r\n    }\r\n\r\n    SpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: SpotLight,\r\n\r\n        isSpotLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.distance = source.distance;\r\n            this.angle = source.angle;\r\n            this.penumbra = source.penumbra;\r\n            this.decay = source.decay;\r\n\r\n            this.target = source.target.clone();\r\n\r\n            this.shadow = source.shadow.clone();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function PointLight( color, intensity, distance, decay ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'PointLight';\r\n\r\n        Object.defineProperty( this, 'power', {\r\n            get: function () {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                return this.intensity * 4 * Math.PI;\r\n\r\n            },\r\n            set: function ( power ) {\r\n\r\n                // intensity = power per solid angle.\r\n                // ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\r\n                this.intensity = power / ( 4 * Math.PI );\r\n\r\n            }\r\n        } );\r\n\r\n        this.distance = ( distance !== undefined ) ? distance : 0;\r\n        this.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n        this.shadow = new LightShadow( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\r\n\r\n    }\r\n\r\n    PointLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: PointLight,\r\n\r\n        isPointLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.distance = source.distance;\r\n            this.decay = source.decay;\r\n\r\n            this.shadow = source.shadow.clone();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function DirectionalLightShadow( ) {\r\n\r\n        LightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\r\n\r\n    }\r\n\r\n    DirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\r\n\r\n        constructor: DirectionalLightShadow\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function DirectionalLight( color, intensity ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'DirectionalLight';\r\n\r\n        this.position.copy( Object3D.DefaultUp );\r\n        this.updateMatrix();\r\n\r\n        this.target = new Object3D();\r\n\r\n        this.shadow = new DirectionalLightShadow();\r\n\r\n    }\r\n\r\n    DirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: DirectionalLight,\r\n\r\n        isDirectionalLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.target = source.target.clone();\r\n\r\n            this.shadow = source.shadow.clone();\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AmbientLight( color, intensity ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'AmbientLight';\r\n\r\n        this.castShadow = undefined;\r\n\r\n    }\r\n\r\n    AmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: AmbientLight,\r\n\r\n        isAmbientLight: true\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author abelnation / http://github.com/abelnation\r\n     */\r\n\r\n    function RectAreaLight( color, intensity, width, height ) {\r\n\r\n        Light.call( this, color, intensity );\r\n\r\n        this.type = 'RectAreaLight';\r\n\r\n        this.width = ( width !== undefined ) ? width : 10;\r\n        this.height = ( height !== undefined ) ? height : 10;\r\n\r\n    }\r\n\r\n    RectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\r\n\r\n        constructor: RectAreaLight,\r\n\r\n        isRectAreaLight: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            Light.prototype.copy.call( this, source );\r\n\r\n            this.width = source.width;\r\n            this.height = source.height;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        toJSON: function ( meta ) {\r\n\r\n            var data = Light.prototype.toJSON.call( this, meta );\r\n\r\n            data.object.width = this.width;\r\n            data.object.height = this.height;\r\n\r\n            return data;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track that interpolates Strings\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function StringKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    StringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: StringKeyframeTrack,\r\n\r\n        ValueTypeName: 'string',\r\n        ValueBufferType: Array,\r\n\r\n        DefaultInterpolation: InterpolateDiscrete,\r\n\r\n        InterpolantFactoryMethodLinear: undefined,\r\n\r\n        InterpolantFactoryMethodSmooth: undefined\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of Boolean keyframe values.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function BooleanKeyframeTrack( name, times, values ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values );\r\n\r\n    }\r\n\r\n    BooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: BooleanKeyframeTrack,\r\n\r\n        ValueTypeName: 'bool',\r\n        ValueBufferType: Array,\r\n\r\n        DefaultInterpolation: InterpolateDiscrete,\r\n\r\n        InterpolantFactoryMethodLinear: undefined,\r\n        InterpolantFactoryMethodSmooth: undefined\r\n\r\n        // Note: Actually this track could have a optimized / compressed\r\n        // representation of a single value and a custom interpolant that\r\n        // computes \"firstValue ^ isOdd( index )\".\r\n\r\n    } );\r\n\r\n    /**\r\n     * Abstract base class of interpolants over parametric samples.\r\n     *\r\n     * The parameter domain is one dimensional, typically the time or a path\r\n     * along a curve defined by the data.\r\n     *\r\n     * The sample values can have any dimensionality and derived classes may\r\n     * apply special interpretations to the data.\r\n     *\r\n     * This class provides the interval seek in a Template Method, deferring\r\n     * the actual interpolation to derived classes.\r\n     *\r\n     * Time complexity is O(1) for linear access crossing at most two points\r\n     * and O(log N) for random access, where N is the number of positions.\r\n     *\r\n     * References:\r\n     *\r\n     * \t\thttp://www.oodesign.com/template-method-pattern.html\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        this.parameterPositions = parameterPositions;\r\n        this._cachedIndex = 0;\r\n\r\n        this.resultBuffer = resultBuffer !== undefined ?\r\n            resultBuffer : new sampleValues.constructor( sampleSize );\r\n        this.sampleValues = sampleValues;\r\n        this.valueSize = sampleSize;\r\n\r\n    }\r\n\r\n    Object.assign( Interpolant.prototype, {\r\n\r\n        evaluate: function ( t ) {\r\n\r\n            var pp = this.parameterPositions,\r\n                i1 = this._cachedIndex,\r\n\r\n                t1 = pp[ i1 ],\r\n                t0 = pp[ i1 - 1 ];\r\n\r\n            validate_interval: {\r\n\r\n                seek: {\r\n\r\n                    var right;\r\n\r\n                    linear_scan: {\r\n\r\n                        //- See http://jsperf.com/comparison-to-undefined/3\r\n                        //- slower code:\r\n                        //-\r\n                        //- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\r\n                        forward_scan: if ( ! ( t < t1 ) ) {\r\n\r\n                            for ( var giveUpAt = i1 + 2; ; ) {\r\n\r\n                                if ( t1 === undefined ) {\r\n\r\n                                    if ( t < t0 ) break forward_scan;\r\n\r\n                                    // after end\r\n\r\n                                    i1 = pp.length;\r\n                                    this._cachedIndex = i1;\r\n                                    return this.afterEnd_( i1 - 1, t, t0 );\r\n\r\n                                }\r\n\r\n                                if ( i1 === giveUpAt ) break; // this loop\r\n\r\n                                t0 = t1;\r\n                                t1 = pp[ ++ i1 ];\r\n\r\n                                if ( t < t1 ) {\r\n\r\n                                    // we have arrived at the sought interval\r\n                                    break seek;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                            // prepare binary search on the right side of the index\r\n                            right = pp.length;\r\n                            break linear_scan;\r\n\r\n                        }\r\n\r\n                        //- slower code:\r\n                        //-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\r\n                        if ( ! ( t >= t0 ) ) {\r\n\r\n                            // looping?\r\n\r\n                            var t1global = pp[ 1 ];\r\n\r\n                            if ( t < t1global ) {\r\n\r\n                                i1 = 2; // + 1, using the scan for the details\r\n                                t0 = t1global;\r\n\r\n                            }\r\n\r\n                            // linear reverse scan\r\n\r\n                            for ( var giveUpAt = i1 - 2; ; ) {\r\n\r\n                                if ( t0 === undefined ) {\r\n\r\n                                    // before start\r\n\r\n                                    this._cachedIndex = 0;\r\n                                    return this.beforeStart_( 0, t, t1 );\r\n\r\n                                }\r\n\r\n                                if ( i1 === giveUpAt ) break; // this loop\r\n\r\n                                t1 = t0;\r\n                                t0 = pp[ -- i1 - 1 ];\r\n\r\n                                if ( t >= t0 ) {\r\n\r\n                                    // we have arrived at the sought interval\r\n                                    break seek;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                            // prepare binary search on the left side of the index\r\n                            right = i1;\r\n                            i1 = 0;\r\n                            break linear_scan;\r\n\r\n                        }\r\n\r\n                        // the interval is valid\r\n\r\n                        break validate_interval;\r\n\r\n                    } // linear scan\r\n\r\n                    // binary search\r\n\r\n                    while ( i1 < right ) {\r\n\r\n                        var mid = ( i1 + right ) >>> 1;\r\n\r\n                        if ( t < pp[ mid ] ) {\r\n\r\n                            right = mid;\r\n\r\n                        } else {\r\n\r\n                            i1 = mid + 1;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    t1 = pp[ i1 ];\r\n                    t0 = pp[ i1 - 1 ];\r\n\r\n                    // check boundary cases, again\r\n\r\n                    if ( t0 === undefined ) {\r\n\r\n                        this._cachedIndex = 0;\r\n                        return this.beforeStart_( 0, t, t1 );\r\n\r\n                    }\r\n\r\n                    if ( t1 === undefined ) {\r\n\r\n                        i1 = pp.length;\r\n                        this._cachedIndex = i1;\r\n                        return this.afterEnd_( i1 - 1, t0, t );\r\n\r\n                    }\r\n\r\n                } // seek\r\n\r\n                this._cachedIndex = i1;\r\n\r\n                this.intervalChanged_( i1, t0, t1 );\r\n\r\n            } // validate_interval\r\n\r\n            return this.interpolate_( i1, t0, t, t1 );\r\n\r\n        },\r\n\r\n        settings: null, // optional, subclass-specific settings structure\r\n        // Note: The indirection allows central control of many interpolants.\r\n\r\n        // --- Protected interface\r\n\r\n        DefaultSettings_: {},\r\n\r\n        getSettings_: function () {\r\n\r\n            return this.settings || this.DefaultSettings_;\r\n\r\n        },\r\n\r\n        copySampleValue_: function ( index ) {\r\n\r\n            // copies a sample value to the result buffer\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n                offset = index * stride;\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                result[ i ] = values[ offset + i ];\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        },\r\n\r\n        // Template methods for derived classes:\r\n\r\n        interpolate_: function ( /* i1, t0, t, t1 */ ) {\r\n\r\n            throw new Error( 'call to abstract method' );\r\n            // implementations shall return this.resultBuffer\r\n\r\n        },\r\n\r\n        intervalChanged_: function ( /* i1, t0, t1 */ ) {\r\n\r\n            // empty\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //!\\ DECLARE ALIAS AFTER assign prototype !\r\n    Object.assign( Interpolant.prototype, {\r\n\r\n        //( 0, t, t0 ), returns this.resultBuffer\r\n        beforeStart_: Interpolant.prototype.copySampleValue_,\r\n\r\n        //( N-1, tN-1, t ), returns this.resultBuffer\r\n        afterEnd_: Interpolant.prototype.copySampleValue_,\r\n\r\n    } );\r\n\r\n    /**\r\n     * Spherical linear unit quaternion interpolant.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n    }\r\n\r\n    QuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: QuaternionLinearInterpolant,\r\n\r\n        interpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n\r\n                offset = i1 * stride,\r\n\r\n                alpha = ( t - t0 ) / ( t1 - t0 );\r\n\r\n            for ( var end = offset + stride; offset !== end; offset += 4 ) {\r\n\r\n                Quaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of quaternion keyframe values.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function QuaternionKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    QuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: QuaternionKeyframeTrack,\r\n\r\n        ValueTypeName: 'quaternion',\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        DefaultInterpolation: InterpolateLinear,\r\n\r\n        InterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n            return new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        InterpolantFactoryMethodSmooth: undefined // not yet implemented\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of keyframe values that represent color.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function ColorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    ColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: ColorKeyframeTrack,\r\n\r\n        ValueTypeName: 'color'\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        // DefaultInterpolation is inherited\r\n\r\n        // Note: Very basic implementation and nothing special yet.\r\n        // However, this is the place for color space parameterization.\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of numeric keyframe values.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function NumberKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    NumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: NumberKeyframeTrack,\r\n\r\n        ValueTypeName: 'number'\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        // DefaultInterpolation is inherited\r\n\r\n    } );\r\n\r\n    /**\r\n     * Fast and simple cubic spline interpolant.\r\n     *\r\n     * It was derived from a Hermitian construction setting the first derivative\r\n     * at each sample position to the linear slope between neighboring positions\r\n     * over their parameter interval.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n        this._weightPrev = - 0;\r\n        this._offsetPrev = - 0;\r\n        this._weightNext = - 0;\r\n        this._offsetNext = - 0;\r\n\r\n    }\r\n\r\n    CubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: CubicInterpolant,\r\n\r\n        DefaultSettings_: {\r\n\r\n            endingStart: ZeroCurvatureEnding,\r\n            endingEnd: ZeroCurvatureEnding\r\n\r\n        },\r\n\r\n        intervalChanged_: function ( i1, t0, t1 ) {\r\n\r\n            var pp = this.parameterPositions,\r\n                iPrev = i1 - 2,\r\n                iNext = i1 + 1,\r\n\r\n                tPrev = pp[ iPrev ],\r\n                tNext = pp[ iNext ];\r\n\r\n            if ( tPrev === undefined ) {\r\n\r\n                switch ( this.getSettings_().endingStart ) {\r\n\r\n                    case ZeroSlopeEnding:\r\n\r\n                        // f'(t0) = 0\r\n                        iPrev = i1;\r\n                        tPrev = 2 * t0 - t1;\r\n\r\n                        break;\r\n\r\n                    case WrapAroundEnding:\r\n\r\n                        // use the other end of the curve\r\n                        iPrev = pp.length - 2;\r\n                        tPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\r\n\r\n                        break;\r\n\r\n                    default: // ZeroCurvatureEnding\r\n\r\n                        // f''(t0) = 0 a.k.a. Natural Spline\r\n                        iPrev = i1;\r\n                        tPrev = t1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( tNext === undefined ) {\r\n\r\n                switch ( this.getSettings_().endingEnd ) {\r\n\r\n                    case ZeroSlopeEnding:\r\n\r\n                        // f'(tN) = 0\r\n                        iNext = i1;\r\n                        tNext = 2 * t1 - t0;\r\n\r\n                        break;\r\n\r\n                    case WrapAroundEnding:\r\n\r\n                        // use the other end of the curve\r\n                        iNext = 1;\r\n                        tNext = t1 + pp[ 1 ] - pp[ 0 ];\r\n\r\n                        break;\r\n\r\n                    default: // ZeroCurvatureEnding\r\n\r\n                        // f''(tN) = 0, a.k.a. Natural Spline\r\n                        iNext = i1 - 1;\r\n                        tNext = t0;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var halfDt = ( t1 - t0 ) * 0.5,\r\n                stride = this.valueSize;\r\n\r\n            this._weightPrev = halfDt / ( t0 - tPrev );\r\n            this._weightNext = halfDt / ( tNext - t1 );\r\n            this._offsetPrev = iPrev * stride;\r\n            this._offsetNext = iNext * stride;\r\n\r\n        },\r\n\r\n        interpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n\r\n                o1 = i1 * stride,\t\to0 = o1 - stride,\r\n                oP = this._offsetPrev, \toN = this._offsetNext,\r\n                wP = this._weightPrev,\twN = this._weightNext,\r\n\r\n                p = ( t - t0 ) / ( t1 - t0 ),\r\n                pp = p * p,\r\n                ppp = pp * p;\r\n\r\n            // evaluate polynomials\r\n\r\n            var sP = - wP * ppp + 2 * wP * pp - wP * p;\r\n            var s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\r\n            var s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\r\n            var sN = wN * ppp - wN * pp;\r\n\r\n            // combine data linearly\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                result[ i ] =\r\n                    sP * values[ oP + i ] +\r\n                    s0 * values[ o0 + i ] +\r\n                    s1 * values[ o1 + i ] +\r\n                    sN * values[ oN + i ];\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author tschw\r\n     */\r\n\r\n    function LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n    }\r\n\r\n    LinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: LinearInterpolant,\r\n\r\n        interpolate_: function ( i1, t0, t, t1 ) {\r\n\r\n            var result = this.resultBuffer,\r\n                values = this.sampleValues,\r\n                stride = this.valueSize,\r\n\r\n                offset1 = i1 * stride,\r\n                offset0 = offset1 - stride,\r\n\r\n                weight1 = ( t - t0 ) / ( t1 - t0 ),\r\n                weight0 = 1 - weight1;\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                result[ i ] =\r\n                    values[ offset0 + i ] * weight0 +\r\n                    values[ offset1 + i ] * weight1;\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Interpolant that evaluates to the sample value at the position preceeding\r\n     * the parameter.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\r\n\r\n        Interpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\r\n\r\n    }\r\n\r\n    DiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\r\n\r\n        constructor: DiscreteInterpolant,\r\n\r\n        interpolate_: function ( i1 /*, t0, t, t1 */ ) {\r\n\r\n            return this.copySampleValue_( i1 - 1 );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author tschw\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     */\r\n\r\n    var AnimationUtils = {\r\n\r\n        // same as Array.prototype.slice, but also works on typed arrays\r\n        arraySlice: function ( array, from, to ) {\r\n\r\n            if ( AnimationUtils.isTypedArray( array ) ) {\r\n\r\n                // in ios9 array.subarray(from, undefined) will return empty array\r\n                // but array.subarray(from) or array.subarray(from, len) is correct\r\n                return new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\r\n\r\n            }\r\n\r\n            return array.slice( from, to );\r\n\r\n        },\r\n\r\n        // converts an array to a specific type\r\n        convertArray: function ( array, type, forceClone ) {\r\n\r\n            if ( ! array || // let 'undefined' and 'null' pass\r\n                ! forceClone && array.constructor === type ) return array;\r\n\r\n            if ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\r\n\r\n                return new type( array ); // create typed array\r\n\r\n            }\r\n\r\n            return Array.prototype.slice.call( array ); // create Array\r\n\r\n        },\r\n\r\n        isTypedArray: function ( object ) {\r\n\r\n            return ArrayBuffer.isView( object ) &&\r\n                ! ( object instanceof DataView );\r\n\r\n        },\r\n\r\n        // returns an array by which times and values can be sorted\r\n        getKeyframeOrder: function ( times ) {\r\n\r\n            function compareTime( i, j ) {\r\n\r\n                return times[ i ] - times[ j ];\r\n\r\n            }\r\n\r\n            var n = times.length;\r\n            var result = new Array( n );\r\n            for ( var i = 0; i !== n; ++ i ) result[ i ] = i;\r\n\r\n            result.sort( compareTime );\r\n\r\n            return result;\r\n\r\n        },\r\n\r\n        // uses the array previously returned by 'getKeyframeOrder' to sort data\r\n        sortedArray: function ( values, stride, order ) {\r\n\r\n            var nValues = values.length;\r\n            var result = new values.constructor( nValues );\r\n\r\n            for ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\r\n\r\n                var srcOffset = order[ i ] * stride;\r\n\r\n                for ( var j = 0; j !== stride; ++ j ) {\r\n\r\n                    result[ dstOffset ++ ] = values[ srcOffset + j ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        },\r\n\r\n        // function for parsing AOS keyframe formats\r\n        flattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\r\n\r\n            var i = 1, key = jsonKeys[ 0 ];\r\n\r\n            while ( key !== undefined && key[ valuePropertyName ] === undefined ) {\r\n\r\n                key = jsonKeys[ i ++ ];\r\n\r\n            }\r\n\r\n            if ( key === undefined ) return; // no data\r\n\r\n            var value = key[ valuePropertyName ];\r\n            if ( value === undefined ) return; // no data\r\n\r\n            if ( Array.isArray( value ) ) {\r\n\r\n                do {\r\n\r\n                    value = key[ valuePropertyName ];\r\n\r\n                    if ( value !== undefined ) {\r\n\r\n                        times.push( key.time );\r\n                        values.push.apply( values, value ); // push all elements\r\n\r\n                    }\r\n\r\n                    key = jsonKeys[ i ++ ];\r\n\r\n                } while ( key !== undefined );\r\n\r\n            } else if ( value.toArray !== undefined ) {\r\n\r\n                // ...assume THREE.Math-ish\r\n\r\n                do {\r\n\r\n                    value = key[ valuePropertyName ];\r\n\r\n                    if ( value !== undefined ) {\r\n\r\n                        times.push( key.time );\r\n                        value.toArray( values, values.length );\r\n\r\n                    }\r\n\r\n                    key = jsonKeys[ i ++ ];\r\n\r\n                } while ( key !== undefined );\r\n\r\n            } else {\r\n\r\n                // otherwise push as-is\r\n\r\n                do {\r\n\r\n                    value = key[ valuePropertyName ];\r\n\r\n                    if ( value !== undefined ) {\r\n\r\n                        times.push( key.time );\r\n                        values.push( value );\r\n\r\n                    }\r\n\r\n                    key = jsonKeys[ i ++ ];\r\n\r\n                } while ( key !== undefined );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     *\r\n     * A timed sequence of keyframes for a specific property.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function KeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        if ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\r\n        if ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\r\n\r\n        this.name = name;\r\n\r\n        this.times = AnimationUtils.convertArray( times, this.TimeBufferType );\r\n        this.values = AnimationUtils.convertArray( values, this.ValueBufferType );\r\n\r\n        this.setInterpolation( interpolation || this.DefaultInterpolation );\r\n\r\n        this.validate();\r\n        this.optimize();\r\n\r\n    }\r\n\r\n    // Static methods:\r\n\r\n    Object.assign( KeyframeTrack, {\r\n\r\n        // Serialization (in static context, because of constructor invocation\r\n        // and automatic invocation of .toJSON):\r\n\r\n        parse: function ( json ) {\r\n\r\n            if ( json.type === undefined ) {\r\n\r\n                throw new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\r\n\r\n            }\r\n\r\n            var trackType = KeyframeTrack._getTrackTypeForValueTypeName( json.type );\r\n\r\n            if ( json.times === undefined ) {\r\n\r\n                var times = [], values = [];\r\n\r\n                AnimationUtils.flattenJSON( json.keys, times, values, 'value' );\r\n\r\n                json.times = times;\r\n                json.values = values;\r\n\r\n            }\r\n\r\n            // derived classes can define a static parse method\r\n            if ( trackType.parse !== undefined ) {\r\n\r\n                return trackType.parse( json );\r\n\r\n            } else {\r\n\r\n                // by default, we assume a constructor compatible with the base\r\n                return new trackType( json.name, json.times, json.values, json.interpolation );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        toJSON: function ( track ) {\r\n\r\n            var trackType = track.constructor;\r\n\r\n            var json;\r\n\r\n            // derived classes can define a static toJSON method\r\n            if ( trackType.toJSON !== undefined ) {\r\n\r\n                json = trackType.toJSON( track );\r\n\r\n            } else {\r\n\r\n                // by default, we assume the data can be serialized as-is\r\n                json = {\r\n\r\n                    'name': track.name,\r\n                    'times': AnimationUtils.convertArray( track.times, Array ),\r\n                    'values': AnimationUtils.convertArray( track.values, Array )\r\n\r\n                };\r\n\r\n                var interpolation = track.getInterpolation();\r\n\r\n                if ( interpolation !== track.DefaultInterpolation ) {\r\n\r\n                    json.interpolation = interpolation;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            json.type = track.ValueTypeName; // mandatory\r\n\r\n            return json;\r\n\r\n        },\r\n\r\n        _getTrackTypeForValueTypeName: function ( typeName ) {\r\n\r\n            switch ( typeName.toLowerCase() ) {\r\n\r\n                case 'scalar':\r\n                case 'double':\r\n                case 'float':\r\n                case 'number':\r\n                case 'integer':\r\n\r\n                    return NumberKeyframeTrack;\r\n\r\n                case 'vector':\r\n                case 'vector2':\r\n                case 'vector3':\r\n                case 'vector4':\r\n\r\n                    return VectorKeyframeTrack;\r\n\r\n                case 'color':\r\n\r\n                    return ColorKeyframeTrack;\r\n\r\n                case 'quaternion':\r\n\r\n                    return QuaternionKeyframeTrack;\r\n\r\n                case 'bool':\r\n                case 'boolean':\r\n\r\n                    return BooleanKeyframeTrack;\r\n\r\n                case 'string':\r\n\r\n                    return StringKeyframeTrack;\r\n\r\n            }\r\n\r\n            throw new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( KeyframeTrack.prototype, {\r\n\r\n        constructor: KeyframeTrack,\r\n\r\n        TimeBufferType: Float32Array,\r\n\r\n        ValueBufferType: Float32Array,\r\n\r\n        DefaultInterpolation: InterpolateLinear,\r\n\r\n        InterpolantFactoryMethodDiscrete: function ( result ) {\r\n\r\n            return new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        InterpolantFactoryMethodLinear: function ( result ) {\r\n\r\n            return new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        InterpolantFactoryMethodSmooth: function ( result ) {\r\n\r\n            return new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\r\n\r\n        },\r\n\r\n        setInterpolation: function ( interpolation ) {\r\n\r\n            var factoryMethod;\r\n\r\n            switch ( interpolation ) {\r\n\r\n                case InterpolateDiscrete:\r\n\r\n                    factoryMethod = this.InterpolantFactoryMethodDiscrete;\r\n\r\n                    break;\r\n\r\n                case InterpolateLinear:\r\n\r\n                    factoryMethod = this.InterpolantFactoryMethodLinear;\r\n\r\n                    break;\r\n\r\n                case InterpolateSmooth:\r\n\r\n                    factoryMethod = this.InterpolantFactoryMethodSmooth;\r\n\r\n                    break;\r\n\r\n            }\r\n\r\n            if ( factoryMethod === undefined ) {\r\n\r\n                var message = \"unsupported interpolation for \" +\r\n                    this.ValueTypeName + \" keyframe track named \" + this.name;\r\n\r\n                if ( this.createInterpolant === undefined ) {\r\n\r\n                    // fall back to default, unless the default itself is messed up\r\n                    if ( interpolation !== this.DefaultInterpolation ) {\r\n\r\n                        this.setInterpolation( this.DefaultInterpolation );\r\n\r\n                    } else {\r\n\r\n                        throw new Error( message ); // fatal, in this case\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                console.warn( 'THREE.KeyframeTrack:', message );\r\n                return;\r\n\r\n            }\r\n\r\n            this.createInterpolant = factoryMethod;\r\n\r\n        },\r\n\r\n        getInterpolation: function () {\r\n\r\n            switch ( this.createInterpolant ) {\r\n\r\n                case this.InterpolantFactoryMethodDiscrete:\r\n\r\n                    return InterpolateDiscrete;\r\n\r\n                case this.InterpolantFactoryMethodLinear:\r\n\r\n                    return InterpolateLinear;\r\n\r\n                case this.InterpolantFactoryMethodSmooth:\r\n\r\n                    return InterpolateSmooth;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        getValueSize: function () {\r\n\r\n            return this.values.length / this.times.length;\r\n\r\n        },\r\n\r\n        // move all keyframes either forwards or backwards in time\r\n        shift: function ( timeOffset ) {\r\n\r\n            if ( timeOffset !== 0.0 ) {\r\n\r\n                var times = this.times;\r\n\r\n                for ( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n                    times[ i ] += timeOffset;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // scale all keyframe times by a factor (useful for frame <-> seconds conversions)\r\n        scale: function ( timeScale ) {\r\n\r\n            if ( timeScale !== 1.0 ) {\r\n\r\n                var times = this.times;\r\n\r\n                for ( var i = 0, n = times.length; i !== n; ++ i ) {\r\n\r\n                    times[ i ] *= timeScale;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // removes keyframes before and after animation without changing any values within the range [startTime, endTime].\r\n        // IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\r\n        trim: function ( startTime, endTime ) {\r\n\r\n            var times = this.times,\r\n                nKeys = times.length,\r\n                from = 0,\r\n                to = nKeys - 1;\r\n\r\n            while ( from !== nKeys && times[ from ] < startTime ) {\r\n\r\n                ++ from;\r\n\r\n            }\r\n\r\n            while ( to !== - 1 && times[ to ] > endTime ) {\r\n\r\n                -- to;\r\n\r\n            }\r\n\r\n            ++ to; // inclusive -> exclusive bound\r\n\r\n            if ( from !== 0 || to !== nKeys ) {\r\n\r\n                // empty tracks are forbidden, so keep at least one keyframe\r\n                if ( from >= to ) to = Math.max( to, 1 ), from = to - 1;\r\n\r\n                var stride = this.getValueSize();\r\n                this.times = AnimationUtils.arraySlice( times, from, to );\r\n                this.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\r\n        validate: function () {\r\n\r\n            var valid = true;\r\n\r\n            var valueSize = this.getValueSize();\r\n            if ( valueSize - Math.floor( valueSize ) !== 0 ) {\r\n\r\n                console.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\r\n                valid = false;\r\n\r\n            }\r\n\r\n            var times = this.times,\r\n                values = this.values,\r\n\r\n                nKeys = times.length;\r\n\r\n            if ( nKeys === 0 ) {\r\n\r\n                console.error( 'THREE.KeyframeTrack: Track is empty.', this );\r\n                valid = false;\r\n\r\n            }\r\n\r\n            var prevTime = null;\r\n\r\n            for ( var i = 0; i !== nKeys; i ++ ) {\r\n\r\n                var currTime = times[ i ];\r\n\r\n                if ( typeof currTime === 'number' && isNaN( currTime ) ) {\r\n\r\n                    console.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\r\n                    valid = false;\r\n                    break;\r\n\r\n                }\r\n\r\n                if ( prevTime !== null && prevTime > currTime ) {\r\n\r\n                    console.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\r\n                    valid = false;\r\n                    break;\r\n\r\n                }\r\n\r\n                prevTime = currTime;\r\n\r\n            }\r\n\r\n            if ( values !== undefined ) {\r\n\r\n                if ( AnimationUtils.isTypedArray( values ) ) {\r\n\r\n                    for ( var i = 0, n = values.length; i !== n; ++ i ) {\r\n\r\n                        var value = values[ i ];\r\n\r\n                        if ( isNaN( value ) ) {\r\n\r\n                            console.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\r\n                            valid = false;\r\n                            break;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return valid;\r\n\r\n        },\r\n\r\n        // removes equivalent sequential keys as common in morph target sequences\r\n        // (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\r\n        optimize: function () {\r\n\r\n            var times = this.times,\r\n                values = this.values,\r\n                stride = this.getValueSize(),\r\n\r\n                smoothInterpolation = this.getInterpolation() === InterpolateSmooth,\r\n\r\n                writeIndex = 1,\r\n                lastIndex = times.length - 1;\r\n\r\n            for ( var i = 1; i < lastIndex; ++ i ) {\r\n\r\n                var keep = false;\r\n\r\n                var time = times[ i ];\r\n                var timeNext = times[ i + 1 ];\r\n\r\n                // remove adjacent keyframes scheduled at the same time\r\n\r\n                if ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\r\n\r\n                    if ( ! smoothInterpolation ) {\r\n\r\n                        // remove unnecessary keyframes same as their neighbors\r\n\r\n                        var offset = i * stride,\r\n                            offsetP = offset - stride,\r\n                            offsetN = offset + stride;\r\n\r\n                        for ( var j = 0; j !== stride; ++ j ) {\r\n\r\n                            var value = values[ offset + j ];\r\n\r\n                            if ( value !== values[ offsetP + j ] ||\r\n                                value !== values[ offsetN + j ] ) {\r\n\r\n                                keep = true;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        keep = true;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                // in-place compaction\r\n\r\n                if ( keep ) {\r\n\r\n                    if ( i !== writeIndex ) {\r\n\r\n                        times[ writeIndex ] = times[ i ];\r\n\r\n                        var readOffset = i * stride,\r\n                            writeOffset = writeIndex * stride;\r\n\r\n                        for ( var j = 0; j !== stride; ++ j ) {\r\n\r\n                            values[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    ++ writeIndex;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // flush last keyframe (compaction looks ahead)\r\n\r\n            if ( lastIndex > 0 ) {\r\n\r\n                times[ writeIndex ] = times[ lastIndex ];\r\n\r\n                for ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\r\n\r\n                    values[ writeOffset + j ] = values[ readOffset + j ];\r\n\r\n                }\r\n\r\n                ++ writeIndex;\r\n\r\n            }\r\n\r\n            if ( writeIndex !== times.length ) {\r\n\r\n                this.times = AnimationUtils.arraySlice( times, 0, writeIndex );\r\n                this.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A Track of vectored keyframe values.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function VectorKeyframeTrack( name, times, values, interpolation ) {\r\n\r\n        KeyframeTrack.call( this, name, times, values, interpolation );\r\n\r\n    }\r\n\r\n    VectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\r\n\r\n        constructor: VectorKeyframeTrack,\r\n\r\n        ValueTypeName: 'vector'\r\n\r\n        // ValueBufferType is inherited\r\n\r\n        // DefaultInterpolation is inherited\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Reusable set of Tracks that represent an animation.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     */\r\n\r\n    function AnimationClip( name, duration, tracks ) {\r\n\r\n        this.name = name;\r\n        this.tracks = tracks;\r\n        this.duration = ( duration !== undefined ) ? duration : - 1;\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        // this means it should figure out its duration by scanning the tracks\r\n        if ( this.duration < 0 ) {\r\n\r\n            this.resetDuration();\r\n\r\n        }\r\n\r\n        this.optimize();\r\n\r\n    }\r\n\r\n    Object.assign( AnimationClip, {\r\n\r\n        parse: function ( json ) {\r\n\r\n            var tracks = [],\r\n                jsonTracks = json.tracks,\r\n                frameTime = 1.0 / ( json.fps || 1.0 );\r\n\r\n            for ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\r\n\r\n                tracks.push( KeyframeTrack.parse( jsonTracks[ i ] ).scale( frameTime ) );\r\n\r\n            }\r\n\r\n            return new AnimationClip( json.name, json.duration, tracks );\r\n\r\n        },\r\n\r\n        toJSON: function ( clip ) {\r\n\r\n            var tracks = [],\r\n                clipTracks = clip.tracks;\r\n\r\n            var json = {\r\n\r\n                'name': clip.name,\r\n                'duration': clip.duration,\r\n                'tracks': tracks,\r\n                'uuid': clip.uuid\r\n\r\n            };\r\n\r\n            for ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\r\n\r\n                tracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\r\n\r\n            }\r\n\r\n            return json;\r\n\r\n        },\r\n\r\n        CreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\r\n\r\n            var numMorphTargets = morphTargetSequence.length;\r\n            var tracks = [];\r\n\r\n            for ( var i = 0; i < numMorphTargets; i ++ ) {\r\n\r\n                var times = [];\r\n                var values = [];\r\n\r\n                times.push(\r\n                    ( i + numMorphTargets - 1 ) % numMorphTargets,\r\n                    i,\r\n                    ( i + 1 ) % numMorphTargets );\r\n\r\n                values.push( 0, 1, 0 );\r\n\r\n                var order = AnimationUtils.getKeyframeOrder( times );\r\n                times = AnimationUtils.sortedArray( times, 1, order );\r\n                values = AnimationUtils.sortedArray( values, 1, order );\r\n\r\n                // if there is a key at the first frame, duplicate it as the\r\n                // last frame as well for perfect loop.\r\n                if ( ! noLoop && times[ 0 ] === 0 ) {\r\n\r\n                    times.push( numMorphTargets );\r\n                    values.push( values[ 0 ] );\r\n\r\n                }\r\n\r\n                tracks.push(\r\n                    new NumberKeyframeTrack(\r\n                        '.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\r\n                        times, values\r\n                    ).scale( 1.0 / fps ) );\r\n\r\n            }\r\n\r\n            return new AnimationClip( name, - 1, tracks );\r\n\r\n        },\r\n\r\n        findByName: function ( objectOrClipArray, name ) {\r\n\r\n            var clipArray = objectOrClipArray;\r\n\r\n            if ( ! Array.isArray( objectOrClipArray ) ) {\r\n\r\n                var o = objectOrClipArray;\r\n                clipArray = o.geometry && o.geometry.animations || o.animations;\r\n\r\n            }\r\n\r\n            for ( var i = 0; i < clipArray.length; i ++ ) {\r\n\r\n                if ( clipArray[ i ].name === name ) {\r\n\r\n                    return clipArray[ i ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        },\r\n\r\n        CreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\r\n\r\n            var animationToMorphTargets = {};\r\n\r\n            // tested with https://regex101.com/ on trick sequences\r\n            // such flamingo_flyA_003, flamingo_run1_003, crdeath0059\r\n            var pattern = /^([\\w-]*?)([\\d]+)$/;\r\n\r\n            // sort morph target names into animation groups based\r\n            // patterns like Walk_001, Walk_002, Run_001, Run_002\r\n            for ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\r\n\r\n                var morphTarget = morphTargets[ i ];\r\n                var parts = morphTarget.name.match( pattern );\r\n\r\n                if ( parts && parts.length > 1 ) {\r\n\r\n                    var name = parts[ 1 ];\r\n\r\n                    var animationMorphTargets = animationToMorphTargets[ name ];\r\n                    if ( ! animationMorphTargets ) {\r\n\r\n                        animationToMorphTargets[ name ] = animationMorphTargets = [];\r\n\r\n                    }\r\n\r\n                    animationMorphTargets.push( morphTarget );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var clips = [];\r\n\r\n            for ( var name in animationToMorphTargets ) {\r\n\r\n                clips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\r\n\r\n            }\r\n\r\n            return clips;\r\n\r\n        },\r\n\r\n        // parse the animation.hierarchy format\r\n        parseAnimation: function ( animation, bones ) {\r\n\r\n            if ( ! animation ) {\r\n\r\n                console.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\r\n                return null;\r\n\r\n            }\r\n\r\n            var addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\r\n\r\n                // only return track if there are actually keys.\r\n                if ( animationKeys.length !== 0 ) {\r\n\r\n                    var times = [];\r\n                    var values = [];\r\n\r\n                    AnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\r\n\r\n                    // empty keys are filtered out, so check again\r\n                    if ( times.length !== 0 ) {\r\n\r\n                        destTracks.push( new trackType( trackName, times, values ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            };\r\n\r\n            var tracks = [];\r\n\r\n            var clipName = animation.name || 'default';\r\n            // automatic length determination in AnimationClip.\r\n            var duration = animation.length || - 1;\r\n            var fps = animation.fps || 30;\r\n\r\n            var hierarchyTracks = animation.hierarchy || [];\r\n\r\n            for ( var h = 0; h < hierarchyTracks.length; h ++ ) {\r\n\r\n                var animationKeys = hierarchyTracks[ h ].keys;\r\n\r\n                // skip empty tracks\r\n                if ( ! animationKeys || animationKeys.length === 0 ) continue;\r\n\r\n                // process morph targets\r\n                if ( animationKeys[ 0 ].morphTargets ) {\r\n\r\n                    // figure out all morph targets used in this track\r\n                    var morphTargetNames = {};\r\n\r\n                    for ( var k = 0; k < animationKeys.length; k ++ ) {\r\n\r\n                        if ( animationKeys[ k ].morphTargets ) {\r\n\r\n                            for ( var m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\r\n\r\n                                morphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    // create a track for each morph target with all zero\r\n                    // morphTargetInfluences except for the keys in which\r\n                    // the morphTarget is named.\r\n                    for ( var morphTargetName in morphTargetNames ) {\r\n\r\n                        var times = [];\r\n                        var values = [];\r\n\r\n                        for ( var m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\r\n\r\n                            var animationKey = animationKeys[ k ];\r\n\r\n                            times.push( animationKey.time );\r\n                            values.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\r\n\r\n                        }\r\n\r\n                        tracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\r\n\r\n                    }\r\n\r\n                    duration = morphTargetNames.length * ( fps || 1.0 );\r\n\r\n                } else {\r\n\r\n                    // ...assume skeletal animation\r\n\r\n                    var boneName = '.bones[' + bones[ h ].name + ']';\r\n\r\n                    addNonemptyTrack(\r\n                        VectorKeyframeTrack, boneName + '.position',\r\n                        animationKeys, 'pos', tracks );\r\n\r\n                    addNonemptyTrack(\r\n                        QuaternionKeyframeTrack, boneName + '.quaternion',\r\n                        animationKeys, 'rot', tracks );\r\n\r\n                    addNonemptyTrack(\r\n                        VectorKeyframeTrack, boneName + '.scale',\r\n                        animationKeys, 'scl', tracks );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( tracks.length === 0 ) {\r\n\r\n                return null;\r\n\r\n            }\r\n\r\n            var clip = new AnimationClip( clipName, duration, tracks );\r\n\r\n            return clip;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( AnimationClip.prototype, {\r\n\r\n        resetDuration: function () {\r\n\r\n            var tracks = this.tracks, duration = 0;\r\n\r\n            for ( var i = 0, n = tracks.length; i !== n; ++ i ) {\r\n\r\n                var track = this.tracks[ i ];\r\n\r\n                duration = Math.max( duration, track.times[ track.times.length - 1 ] );\r\n\r\n            }\r\n\r\n            this.duration = duration;\r\n\r\n        },\r\n\r\n        trim: function () {\r\n\r\n            for ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n                this.tracks[ i ].trim( 0, this.duration );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        optimize: function () {\r\n\r\n            for ( var i = 0; i < this.tracks.length; i ++ ) {\r\n\r\n                this.tracks[ i ].optimize();\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function MaterialLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n        this.textures = {};\r\n\r\n    }\r\n\r\n    Object.assign( MaterialLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( scope.manager );\r\n            loader.load( url, function ( text ) {\r\n\r\n                onLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        setTextures: function ( value ) {\r\n\r\n            this.textures = value;\r\n\r\n        },\r\n\r\n        parse: function ( json ) {\r\n\r\n            var textures = this.textures;\r\n\r\n            function getTexture( name ) {\r\n\r\n                if ( textures[ name ] === undefined ) {\r\n\r\n                    console.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n                }\r\n\r\n                return textures[ name ];\r\n\r\n            }\r\n\r\n            var material = new Materials[ json.type ]();\r\n\r\n            if ( json.uuid !== undefined ) material.uuid = json.uuid;\r\n            if ( json.name !== undefined ) material.name = json.name;\r\n            if ( json.color !== undefined ) material.color.setHex( json.color );\r\n            if ( json.roughness !== undefined ) material.roughness = json.roughness;\r\n            if ( json.metalness !== undefined ) material.metalness = json.metalness;\r\n            if ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n            if ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n            if ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n            if ( json.clearCoat !== undefined ) material.clearCoat = json.clearCoat;\r\n            if ( json.clearCoatRoughness !== undefined ) material.clearCoatRoughness = json.clearCoatRoughness;\r\n            if ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n            if ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n            if ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n            if ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n            if ( json.fog !== undefined ) material.fog = json.fog;\r\n            if ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\r\n            if ( json.blending !== undefined ) material.blending = json.blending;\r\n            if ( json.side !== undefined ) material.side = json.side;\r\n            if ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n            if ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n            if ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n            if ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n            if ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n            if ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\r\n            if ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n            if ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n            if ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\r\n            if ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\r\n\r\n            if ( json.rotation !== undefined ) material.rotation = json.rotation;\r\n\r\n            if ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\r\n            if ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\r\n            if ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\r\n            if ( json.scale !== undefined ) material.scale = json.scale;\r\n\r\n            if ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\r\n            if ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\r\n            if ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\r\n\r\n            if ( json.skinning !== undefined ) material.skinning = json.skinning;\r\n            if ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\r\n            if ( json.dithering !== undefined ) material.dithering = json.dithering;\r\n\r\n            if ( json.visible !== undefined ) material.visible = json.visible;\r\n            if ( json.userData !== undefined ) material.userData = json.userData;\r\n\r\n            // Deprecated\r\n\r\n            if ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\r\n\r\n            // for PointsMaterial\r\n\r\n            if ( json.size !== undefined ) material.size = json.size;\r\n            if ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n            // maps\r\n\r\n            if ( json.map !== undefined ) material.map = getTexture( json.map );\r\n\r\n            if ( json.alphaMap !== undefined ) {\r\n\r\n                material.alphaMap = getTexture( json.alphaMap );\r\n                material.transparent = true;\r\n\r\n            }\r\n\r\n            if ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\r\n            if ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n            if ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\r\n            if ( json.normalScale !== undefined ) {\r\n\r\n                var normalScale = json.normalScale;\r\n\r\n                if ( Array.isArray( normalScale ) === false ) {\r\n\r\n                    // Blender exporter used to export a scalar. See #7459\r\n\r\n                    normalScale = [ normalScale, normalScale ];\r\n\r\n                }\r\n\r\n                material.normalScale = new Vector2().fromArray( normalScale );\r\n\r\n            }\r\n\r\n            if ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\r\n            if ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n            if ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n            if ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\r\n            if ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\r\n\r\n            if ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\r\n            if ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\r\n\r\n            if ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\r\n\r\n            if ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\r\n\r\n            if ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\r\n\r\n            if ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\r\n            if ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n            if ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\r\n            if ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n            if ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\r\n\r\n            return material;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function BufferGeometryLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( BufferGeometryLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( scope.manager );\r\n            loader.load( url, function ( text ) {\r\n\r\n                onLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        parse: function ( json ) {\r\n\r\n            var geometry = new BufferGeometry();\r\n\r\n            var index = json.data.index;\r\n\r\n            if ( index !== undefined ) {\r\n\r\n                var typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\r\n                geometry.setIndex( new BufferAttribute( typedArray, 1 ) );\r\n\r\n            }\r\n\r\n            var attributes = json.data.attributes;\r\n\r\n            for ( var key in attributes ) {\r\n\r\n                var attribute = attributes[ key ];\r\n                var typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\r\n\r\n                geometry.addAttribute( key, new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized ) );\r\n\r\n            }\r\n\r\n            var groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n            if ( groups !== undefined ) {\r\n\r\n                for ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n                    var group = groups[ i ];\r\n\r\n                    geometry.addGroup( group.start, group.count, group.materialIndex );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var boundingSphere = json.data.boundingSphere;\r\n\r\n            if ( boundingSphere !== undefined ) {\r\n\r\n                var center = new Vector3();\r\n\r\n                if ( boundingSphere.center !== undefined ) {\r\n\r\n                    center.fromArray( boundingSphere.center );\r\n\r\n                }\r\n\r\n                geometry.boundingSphere = new Sphere( center, boundingSphere.radius );\r\n\r\n            }\r\n\r\n            return geometry;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var TYPED_ARRAYS = {\r\n        Int8Array: Int8Array,\r\n        Uint8Array: Uint8Array,\r\n        // Workaround for IE11 pre KB2929437. See #11440\r\n        Uint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\r\n        Int16Array: Int16Array,\r\n        Uint16Array: Uint16Array,\r\n        Int32Array: Int32Array,\r\n        Uint32Array: Uint32Array,\r\n        Float32Array: Float32Array,\r\n        Float64Array: Float64Array\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Loader() {}\r\n\r\n    Loader.Handlers = {\r\n\r\n        handlers: [],\r\n\r\n        add: function ( regex, loader ) {\r\n\r\n            this.handlers.push( regex, loader );\r\n\r\n        },\r\n\r\n        get: function ( file ) {\r\n\r\n            var handlers = this.handlers;\r\n\r\n            for ( var i = 0, l = handlers.length; i < l; i += 2 ) {\r\n\r\n                var regex = handlers[ i ];\r\n                var loader = handlers[ i + 1 ];\r\n\r\n                if ( regex.test( file ) ) {\r\n\r\n                    return loader;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    Object.assign( Loader.prototype, {\r\n\r\n        crossOrigin: undefined,\r\n\r\n        onLoadStart: function () {},\r\n\r\n        onLoadProgress: function () {},\r\n\r\n        onLoadComplete: function () {},\r\n\r\n        initMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n            var array = [];\r\n\r\n            for ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n                array[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n            }\r\n\r\n            return array;\r\n\r\n        },\r\n\r\n        createMaterial: ( function () {\r\n\r\n            var BlendingMode = {\r\n                NoBlending: NoBlending,\r\n                NormalBlending: NormalBlending,\r\n                AdditiveBlending: AdditiveBlending,\r\n                SubtractiveBlending: SubtractiveBlending,\r\n                MultiplyBlending: MultiplyBlending,\r\n                CustomBlending: CustomBlending\r\n            };\r\n\r\n            var color = new Color();\r\n            var textureLoader = new TextureLoader();\r\n            var materialLoader = new MaterialLoader();\r\n\r\n            return function createMaterial( m, texturePath, crossOrigin ) {\r\n\r\n                // convert from old material format\r\n\r\n                var textures = {};\r\n\r\n                function loadTexture( path, repeat, offset, wrap, anisotropy ) {\r\n\r\n                    var fullPath = texturePath + path;\r\n                    var loader = Loader.Handlers.get( fullPath );\r\n\r\n                    var texture;\r\n\r\n                    if ( loader !== null ) {\r\n\r\n                        texture = loader.load( fullPath );\r\n\r\n                    } else {\r\n\r\n                        textureLoader.setCrossOrigin( crossOrigin );\r\n                        texture = textureLoader.load( fullPath );\r\n\r\n                    }\r\n\r\n                    if ( repeat !== undefined ) {\r\n\r\n                        texture.repeat.fromArray( repeat );\r\n\r\n                        if ( repeat[ 0 ] !== 1 ) texture.wrapS = RepeatWrapping;\r\n                        if ( repeat[ 1 ] !== 1 ) texture.wrapT = RepeatWrapping;\r\n\r\n                    }\r\n\r\n                    if ( offset !== undefined ) {\r\n\r\n                        texture.offset.fromArray( offset );\r\n\r\n                    }\r\n\r\n                    if ( wrap !== undefined ) {\r\n\r\n                        if ( wrap[ 0 ] === 'repeat' ) texture.wrapS = RepeatWrapping;\r\n                        if ( wrap[ 0 ] === 'mirror' ) texture.wrapS = MirroredRepeatWrapping;\r\n\r\n                        if ( wrap[ 1 ] === 'repeat' ) texture.wrapT = RepeatWrapping;\r\n                        if ( wrap[ 1 ] === 'mirror' ) texture.wrapT = MirroredRepeatWrapping;\r\n\r\n                    }\r\n\r\n                    if ( anisotropy !== undefined ) {\r\n\r\n                        texture.anisotropy = anisotropy;\r\n\r\n                    }\r\n\r\n                    var uuid = _Math.generateUUID();\r\n\r\n                    textures[ uuid ] = texture;\r\n\r\n                    return uuid;\r\n\r\n                }\r\n\r\n                //\r\n\r\n                var json = {\r\n                    uuid: _Math.generateUUID(),\r\n                    type: 'MeshLambertMaterial'\r\n                };\r\n\r\n                for ( var name in m ) {\r\n\r\n                    var value = m[ name ];\r\n\r\n                    switch ( name ) {\r\n\r\n                        case 'DbgColor':\r\n                        case 'DbgIndex':\r\n                        case 'opticalDensity':\r\n                        case 'illumination':\r\n                            break;\r\n                        case 'DbgName':\r\n                            json.name = value;\r\n                            break;\r\n                        case 'blending':\r\n                            json.blending = BlendingMode[ value ];\r\n                            break;\r\n                        case 'colorAmbient':\r\n                        case 'mapAmbient':\r\n                            console.warn( 'THREE.Loader.createMaterial:', name, 'is no longer supported.' );\r\n                            break;\r\n                        case 'colorDiffuse':\r\n                            json.color = color.fromArray( value ).getHex();\r\n                            break;\r\n                        case 'colorSpecular':\r\n                            json.specular = color.fromArray( value ).getHex();\r\n                            break;\r\n                        case 'colorEmissive':\r\n                            json.emissive = color.fromArray( value ).getHex();\r\n                            break;\r\n                        case 'specularCoef':\r\n                            json.shininess = value;\r\n                            break;\r\n                        case 'shading':\r\n                            if ( value.toLowerCase() === 'basic' ) json.type = 'MeshBasicMaterial';\r\n                            if ( value.toLowerCase() === 'phong' ) json.type = 'MeshPhongMaterial';\r\n                            if ( value.toLowerCase() === 'standard' ) json.type = 'MeshStandardMaterial';\r\n                            break;\r\n                        case 'mapDiffuse':\r\n                            json.map = loadTexture( value, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n                            break;\r\n                        case 'mapDiffuseRepeat':\r\n                        case 'mapDiffuseOffset':\r\n                        case 'mapDiffuseWrap':\r\n                        case 'mapDiffuseAnisotropy':\r\n                            break;\r\n                        case 'mapEmissive':\r\n                            json.emissiveMap = loadTexture( value, m.mapEmissiveRepeat, m.mapEmissiveOffset, m.mapEmissiveWrap, m.mapEmissiveAnisotropy );\r\n                            break;\r\n                        case 'mapEmissiveRepeat':\r\n                        case 'mapEmissiveOffset':\r\n                        case 'mapEmissiveWrap':\r\n                        case 'mapEmissiveAnisotropy':\r\n                            break;\r\n                        case 'mapLight':\r\n                            json.lightMap = loadTexture( value, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n                            break;\r\n                        case 'mapLightRepeat':\r\n                        case 'mapLightOffset':\r\n                        case 'mapLightWrap':\r\n                        case 'mapLightAnisotropy':\r\n                            break;\r\n                        case 'mapAO':\r\n                            json.aoMap = loadTexture( value, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n                            break;\r\n                        case 'mapAORepeat':\r\n                        case 'mapAOOffset':\r\n                        case 'mapAOWrap':\r\n                        case 'mapAOAnisotropy':\r\n                            break;\r\n                        case 'mapBump':\r\n                            json.bumpMap = loadTexture( value, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n                            break;\r\n                        case 'mapBumpScale':\r\n                            json.bumpScale = value;\r\n                            break;\r\n                        case 'mapBumpRepeat':\r\n                        case 'mapBumpOffset':\r\n                        case 'mapBumpWrap':\r\n                        case 'mapBumpAnisotropy':\r\n                            break;\r\n                        case 'mapNormal':\r\n                            json.normalMap = loadTexture( value, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n                            break;\r\n                        case 'mapNormalFactor':\r\n                            json.normalScale = value;\r\n                            break;\r\n                        case 'mapNormalRepeat':\r\n                        case 'mapNormalOffset':\r\n                        case 'mapNormalWrap':\r\n                        case 'mapNormalAnisotropy':\r\n                            break;\r\n                        case 'mapSpecular':\r\n                            json.specularMap = loadTexture( value, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n                            break;\r\n                        case 'mapSpecularRepeat':\r\n                        case 'mapSpecularOffset':\r\n                        case 'mapSpecularWrap':\r\n                        case 'mapSpecularAnisotropy':\r\n                            break;\r\n                        case 'mapMetalness':\r\n                            json.metalnessMap = loadTexture( value, m.mapMetalnessRepeat, m.mapMetalnessOffset, m.mapMetalnessWrap, m.mapMetalnessAnisotropy );\r\n                            break;\r\n                        case 'mapMetalnessRepeat':\r\n                        case 'mapMetalnessOffset':\r\n                        case 'mapMetalnessWrap':\r\n                        case 'mapMetalnessAnisotropy':\r\n                            break;\r\n                        case 'mapRoughness':\r\n                            json.roughnessMap = loadTexture( value, m.mapRoughnessRepeat, m.mapRoughnessOffset, m.mapRoughnessWrap, m.mapRoughnessAnisotropy );\r\n                            break;\r\n                        case 'mapRoughnessRepeat':\r\n                        case 'mapRoughnessOffset':\r\n                        case 'mapRoughnessWrap':\r\n                        case 'mapRoughnessAnisotropy':\r\n                            break;\r\n                        case 'mapAlpha':\r\n                            json.alphaMap = loadTexture( value, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n                            break;\r\n                        case 'mapAlphaRepeat':\r\n                        case 'mapAlphaOffset':\r\n                        case 'mapAlphaWrap':\r\n                        case 'mapAlphaAnisotropy':\r\n                            break;\r\n                        case 'flipSided':\r\n                            json.side = BackSide;\r\n                            break;\r\n                        case 'doubleSided':\r\n                            json.side = DoubleSide;\r\n                            break;\r\n                        case 'transparency':\r\n                            console.warn( 'THREE.Loader.createMaterial: transparency has been renamed to opacity' );\r\n                            json.opacity = value;\r\n                            break;\r\n                        case 'depthTest':\r\n                        case 'depthWrite':\r\n                        case 'colorWrite':\r\n                        case 'opacity':\r\n                        case 'reflectivity':\r\n                        case 'transparent':\r\n                        case 'visible':\r\n                        case 'wireframe':\r\n                            json[ name ] = value;\r\n                            break;\r\n                        case 'vertexColors':\r\n                            if ( value === true ) json.vertexColors = VertexColors;\r\n                            if ( value === 'face' ) json.vertexColors = FaceColors;\r\n                            break;\r\n                        default:\r\n                            console.error( 'THREE.Loader.createMaterial: Unsupported', name, value );\r\n                            break;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( json.type === 'MeshBasicMaterial' ) delete json.emissive;\r\n                if ( json.type !== 'MeshPhongMaterial' ) delete json.specular;\r\n\r\n                if ( json.opacity < 1 ) json.transparent = true;\r\n\r\n                materialLoader.setTextures( textures );\r\n\r\n                return materialLoader.parse( json );\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author Don McCurdy / https://www.donmccurdy.com\r\n     */\r\n\r\n    var LoaderUtils = {\r\n\r\n        decodeText: function ( array ) {\r\n\r\n            if ( typeof TextDecoder !== 'undefined' ) {\r\n\r\n                return new TextDecoder().decode( array );\r\n\r\n            }\r\n\r\n            // Avoid the String.fromCharCode.apply(null, array) shortcut, which\r\n            // throws a \"maximum call stack size exceeded\" error for large arrays.\r\n\r\n            var s = '';\r\n\r\n            for ( var i = 0, il = array.length; i < il; i ++ ) {\r\n\r\n                // Implicitly assumes little-endian.\r\n                s += String.fromCharCode( array[ i ] );\r\n\r\n            }\r\n\r\n            // Merges multi-byte utf-8 characters.\r\n            return decodeURIComponent( escape( s ) );\r\n\r\n        },\r\n\r\n        extractUrlBase: function ( url ) {\r\n\r\n            var index = url.lastIndexOf( '/' );\r\n\r\n            if ( index === - 1 ) return './';\r\n\r\n            return url.substr( 0, index + 1 );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function JSONLoader( manager ) {\r\n\r\n        if ( typeof manager === 'boolean' ) {\r\n\r\n            console.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n            manager = undefined;\r\n\r\n        }\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n        this.withCredentials = false;\r\n\r\n    }\r\n\r\n    Object.assign( JSONLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var texturePath = this.texturePath && ( typeof this.texturePath === 'string' ) ? this.texturePath : LoaderUtils.extractUrlBase( url );\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setWithCredentials( this.withCredentials );\r\n            loader.load( url, function ( text ) {\r\n\r\n                var json = JSON.parse( text );\r\n                var metadata = json.metadata;\r\n\r\n                if ( metadata !== undefined ) {\r\n\r\n                    var type = metadata.type;\r\n\r\n                    if ( type !== undefined ) {\r\n\r\n                        if ( type.toLowerCase() === 'object' ) {\r\n\r\n                            console.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n                            return;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                var object = scope.parse( json, texturePath );\r\n                onLoad( object.geometry, object.materials );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        setTexturePath: function ( value ) {\r\n\r\n            this.texturePath = value;\r\n\r\n        },\r\n\r\n        parse: ( function () {\r\n\r\n            function parseModel( json, geometry ) {\r\n\r\n                function isBitSet( value, position ) {\r\n\r\n                    return value & ( 1 << position );\r\n\r\n                }\r\n\r\n                var i, j, fi,\r\n\r\n                    offset, zLength,\r\n\r\n                    colorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n                    type,\r\n                    isQuad,\r\n                    hasMaterial,\r\n                    hasFaceVertexUv,\r\n                    hasFaceNormal, hasFaceVertexNormal,\r\n                    hasFaceColor, hasFaceVertexColor,\r\n\r\n                    vertex, face, faceA, faceB, hex, normal,\r\n\r\n                    uvLayer, uv, u, v,\r\n\r\n                    faces = json.faces,\r\n                    vertices = json.vertices,\r\n                    normals = json.normals,\r\n                    colors = json.colors,\r\n\r\n                    scale = json.scale,\r\n\r\n                    nUvLayers = 0;\r\n\r\n\r\n                if ( json.uvs !== undefined ) {\r\n\r\n                    // disregard empty arrays\r\n\r\n                    for ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n                        if ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n                    }\r\n\r\n                    for ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n                        geometry.faceVertexUvs[ i ] = [];\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                offset = 0;\r\n                zLength = vertices.length;\r\n\r\n                while ( offset < zLength ) {\r\n\r\n                    vertex = new Vector3();\r\n\r\n                    vertex.x = vertices[ offset ++ ] * scale;\r\n                    vertex.y = vertices[ offset ++ ] * scale;\r\n                    vertex.z = vertices[ offset ++ ] * scale;\r\n\r\n                    geometry.vertices.push( vertex );\r\n\r\n                }\r\n\r\n                offset = 0;\r\n                zLength = faces.length;\r\n\r\n                while ( offset < zLength ) {\r\n\r\n                    type = faces[ offset ++ ];\r\n\r\n                    isQuad = isBitSet( type, 0 );\r\n                    hasMaterial = isBitSet( type, 1 );\r\n                    hasFaceVertexUv = isBitSet( type, 3 );\r\n                    hasFaceNormal = isBitSet( type, 4 );\r\n                    hasFaceVertexNormal = isBitSet( type, 5 );\r\n                    hasFaceColor = isBitSet( type, 6 );\r\n                    hasFaceVertexColor = isBitSet( type, 7 );\r\n\r\n                    // console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n                    if ( isQuad ) {\r\n\r\n                        faceA = new Face3();\r\n                        faceA.a = faces[ offset ];\r\n                        faceA.b = faces[ offset + 1 ];\r\n                        faceA.c = faces[ offset + 3 ];\r\n\r\n                        faceB = new Face3();\r\n                        faceB.a = faces[ offset + 1 ];\r\n                        faceB.b = faces[ offset + 2 ];\r\n                        faceB.c = faces[ offset + 3 ];\r\n\r\n                        offset += 4;\r\n\r\n                        if ( hasMaterial ) {\r\n\r\n                            materialIndex = faces[ offset ++ ];\r\n                            faceA.materialIndex = materialIndex;\r\n                            faceB.materialIndex = materialIndex;\r\n\r\n                        }\r\n\r\n                        // to get face <=> uv index correspondence\r\n\r\n                        fi = geometry.faces.length;\r\n\r\n                        if ( hasFaceVertexUv ) {\r\n\r\n                            for ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n                                uvLayer = json.uvs[ i ];\r\n\r\n                                geometry.faceVertexUvs[ i ][ fi ] = [];\r\n                                geometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n                                for ( j = 0; j < 4; j ++ ) {\r\n\r\n                                    uvIndex = faces[ offset ++ ];\r\n\r\n                                    u = uvLayer[ uvIndex * 2 ];\r\n                                    v = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n                                    uv = new Vector2( u, v );\r\n\r\n                                    if ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n                                    if ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        if ( hasFaceNormal ) {\r\n\r\n                            normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                            faceA.normal.set(\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ]\r\n                            );\r\n\r\n                            faceB.normal.copy( faceA.normal );\r\n\r\n                        }\r\n\r\n                        if ( hasFaceVertexNormal ) {\r\n\r\n                            for ( i = 0; i < 4; i ++ ) {\r\n\r\n                                normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                                normal = new Vector3(\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ]\r\n                                );\r\n\r\n\r\n                                if ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n                                if ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceColor ) {\r\n\r\n                            colorIndex = faces[ offset ++ ];\r\n                            hex = colors[ colorIndex ];\r\n\r\n                            faceA.color.setHex( hex );\r\n                            faceB.color.setHex( hex );\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceVertexColor ) {\r\n\r\n                            for ( i = 0; i < 4; i ++ ) {\r\n\r\n                                colorIndex = faces[ offset ++ ];\r\n                                hex = colors[ colorIndex ];\r\n\r\n                                if ( i !== 2 ) faceA.vertexColors.push( new Color( hex ) );\r\n                                if ( i !== 0 ) faceB.vertexColors.push( new Color( hex ) );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        geometry.faces.push( faceA );\r\n                        geometry.faces.push( faceB );\r\n\r\n                    } else {\r\n\r\n                        face = new Face3();\r\n                        face.a = faces[ offset ++ ];\r\n                        face.b = faces[ offset ++ ];\r\n                        face.c = faces[ offset ++ ];\r\n\r\n                        if ( hasMaterial ) {\r\n\r\n                            materialIndex = faces[ offset ++ ];\r\n                            face.materialIndex = materialIndex;\r\n\r\n                        }\r\n\r\n                        // to get face <=> uv index correspondence\r\n\r\n                        fi = geometry.faces.length;\r\n\r\n                        if ( hasFaceVertexUv ) {\r\n\r\n                            for ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n                                uvLayer = json.uvs[ i ];\r\n\r\n                                geometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n                                for ( j = 0; j < 3; j ++ ) {\r\n\r\n                                    uvIndex = faces[ offset ++ ];\r\n\r\n                                    u = uvLayer[ uvIndex * 2 ];\r\n                                    v = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n                                    uv = new Vector2( u, v );\r\n\r\n                                    geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        if ( hasFaceNormal ) {\r\n\r\n                            normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                            face.normal.set(\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ++ ],\r\n                                normals[ normalIndex ]\r\n                            );\r\n\r\n                        }\r\n\r\n                        if ( hasFaceVertexNormal ) {\r\n\r\n                            for ( i = 0; i < 3; i ++ ) {\r\n\r\n                                normalIndex = faces[ offset ++ ] * 3;\r\n\r\n                                normal = new Vector3(\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ++ ],\r\n                                    normals[ normalIndex ]\r\n                                );\r\n\r\n                                face.vertexNormals.push( normal );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceColor ) {\r\n\r\n                            colorIndex = faces[ offset ++ ];\r\n                            face.color.setHex( colors[ colorIndex ] );\r\n\r\n                        }\r\n\r\n\r\n                        if ( hasFaceVertexColor ) {\r\n\r\n                            for ( i = 0; i < 3; i ++ ) {\r\n\r\n                                colorIndex = faces[ offset ++ ];\r\n                                face.vertexColors.push( new Color( colors[ colorIndex ] ) );\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        geometry.faces.push( face );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function parseSkin( json, geometry ) {\r\n\r\n                var influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n                if ( json.skinWeights ) {\r\n\r\n                    for ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n                        var x = json.skinWeights[ i ];\r\n                        var y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n                        var z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n                        var w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n                        geometry.skinWeights.push( new Vector4( x, y, z, w ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( json.skinIndices ) {\r\n\r\n                    for ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n                        var a = json.skinIndices[ i ];\r\n                        var b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n                        var c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n                        var d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n                        geometry.skinIndices.push( new Vector4( a, b, c, d ) );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                geometry.bones = json.bones;\r\n\r\n                if ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n                    console.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n                        geometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function parseMorphing( json, geometry ) {\r\n\r\n                var scale = json.scale;\r\n\r\n                if ( json.morphTargets !== undefined ) {\r\n\r\n                    for ( var i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n                        geometry.morphTargets[ i ] = {};\r\n                        geometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n                        geometry.morphTargets[ i ].vertices = [];\r\n\r\n                        var dstVertices = geometry.morphTargets[ i ].vertices;\r\n                        var srcVertices = json.morphTargets[ i ].vertices;\r\n\r\n                        for ( var v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n                            var vertex = new Vector3();\r\n                            vertex.x = srcVertices[ v ] * scale;\r\n                            vertex.y = srcVertices[ v + 1 ] * scale;\r\n                            vertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n                            dstVertices.push( vertex );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( json.morphColors !== undefined && json.morphColors.length > 0 ) {\r\n\r\n                    console.warn( 'THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.' );\r\n\r\n                    var faces = geometry.faces;\r\n                    var morphColors = json.morphColors[ 0 ].colors;\r\n\r\n                    for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                        faces[ i ].color.fromArray( morphColors, i * 3 );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            function parseAnimations( json, geometry ) {\r\n\r\n                var outputAnimations = [];\r\n\r\n                // parse old style Bone/Hierarchy animations\r\n                var animations = [];\r\n\r\n                if ( json.animation !== undefined ) {\r\n\r\n                    animations.push( json.animation );\r\n\r\n                }\r\n\r\n                if ( json.animations !== undefined ) {\r\n\r\n                    if ( json.animations.length ) {\r\n\r\n                        animations = animations.concat( json.animations );\r\n\r\n                    } else {\r\n\r\n                        animations.push( json.animations );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                for ( var i = 0; i < animations.length; i ++ ) {\r\n\r\n                    var clip = AnimationClip.parseAnimation( animations[ i ], geometry.bones );\r\n                    if ( clip ) outputAnimations.push( clip );\r\n\r\n                }\r\n\r\n                // parse implicit morph animations\r\n                if ( geometry.morphTargets ) {\r\n\r\n                    // TODO: Figure out what an appropraite FPS is for morph target animations -- defaulting to 10, but really it is completely arbitrary.\r\n                    var morphAnimationClips = AnimationClip.CreateClipsFromMorphTargetSequences( geometry.morphTargets, 10 );\r\n                    outputAnimations = outputAnimations.concat( morphAnimationClips );\r\n\r\n                }\r\n\r\n                if ( outputAnimations.length > 0 ) geometry.animations = outputAnimations;\r\n\r\n            }\r\n\r\n            return function parse( json, texturePath ) {\r\n\r\n                if ( json.data !== undefined ) {\r\n\r\n                    // Geometry 4.0 spec\r\n                    json = json.data;\r\n\r\n                }\r\n\r\n                if ( json.scale !== undefined ) {\r\n\r\n                    json.scale = 1.0 / json.scale;\r\n\r\n                } else {\r\n\r\n                    json.scale = 1.0;\r\n\r\n                }\r\n\r\n                var geometry = new Geometry();\r\n\r\n                parseModel( json, geometry );\r\n                parseSkin( json, geometry );\r\n                parseMorphing( json, geometry );\r\n                parseAnimations( json, geometry );\r\n\r\n                geometry.computeFaceNormals();\r\n                geometry.computeBoundingSphere();\r\n\r\n                if ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n                    return { geometry: geometry };\r\n\r\n                } else {\r\n\r\n                    var materials = Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n                    return { geometry: geometry, materials: materials };\r\n\r\n                }\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function ObjectLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n        this.texturePath = '';\r\n\r\n    }\r\n\r\n    Object.assign( ObjectLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( this.texturePath === '' ) {\r\n\r\n                this.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n            }\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( scope.manager );\r\n            loader.load( url, function ( text ) {\r\n\r\n                var json = null;\r\n\r\n                try {\r\n\r\n                    json = JSON.parse( text );\r\n\r\n                } catch ( error ) {\r\n\r\n                    if ( onError !== undefined ) onError( error );\r\n\r\n                    console.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\r\n\r\n                    return;\r\n\r\n                }\r\n\r\n                var metadata = json.metadata;\r\n\r\n                if ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\r\n\r\n                    console.error( 'THREE.ObjectLoader: Can\\'t load ' + url + '. Use THREE.JSONLoader instead.' );\r\n                    return;\r\n\r\n                }\r\n\r\n                scope.parse( json, onLoad );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        setTexturePath: function ( value ) {\r\n\r\n            this.texturePath = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( value ) {\r\n\r\n            this.crossOrigin = value;\r\n            return this;\r\n\r\n        },\r\n\r\n        parse: function ( json, onLoad ) {\r\n\r\n            var shapes = this.parseShape( json.shapes );\r\n            var geometries = this.parseGeometries( json.geometries, shapes );\r\n\r\n            var images = this.parseImages( json.images, function () {\r\n\r\n                if ( onLoad !== undefined ) onLoad( object );\r\n\r\n            } );\r\n\r\n            var textures = this.parseTextures( json.textures, images );\r\n            var materials = this.parseMaterials( json.materials, textures );\r\n\r\n            var object = this.parseObject( json.object, geometries, materials );\r\n\r\n            if ( json.animations ) {\r\n\r\n                object.animations = this.parseAnimations( json.animations );\r\n\r\n            }\r\n\r\n            if ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n                if ( onLoad !== undefined ) onLoad( object );\r\n\r\n            }\r\n\r\n            return object;\r\n\r\n        },\r\n\r\n        parseShape: function ( json ) {\r\n\r\n            var shapes = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var shape = new Shape().fromJSON( json[ i ] );\r\n\r\n                    shapes[ shape.uuid ] = shape;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return shapes;\r\n\r\n        },\r\n\r\n        parseGeometries: function ( json, shapes ) {\r\n\r\n            var geometries = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                var geometryLoader = new JSONLoader();\r\n                var bufferGeometryLoader = new BufferGeometryLoader();\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var geometry;\r\n                    var data = json[ i ];\r\n\r\n                    switch ( data.type ) {\r\n\r\n                        case 'PlaneGeometry':\r\n                        case 'PlaneBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.width,\r\n                                data.height,\r\n                                data.widthSegments,\r\n                                data.heightSegments\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'BoxGeometry':\r\n                        case 'BoxBufferGeometry':\r\n                        case 'CubeGeometry': // backwards compatible\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.width,\r\n                                data.height,\r\n                                data.depth,\r\n                                data.widthSegments,\r\n                                data.heightSegments,\r\n                                data.depthSegments\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'CircleGeometry':\r\n                        case 'CircleBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.segments,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'CylinderGeometry':\r\n                        case 'CylinderBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radiusTop,\r\n                                data.radiusBottom,\r\n                                data.height,\r\n                                data.radialSegments,\r\n                                data.heightSegments,\r\n                                data.openEnded,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'ConeGeometry':\r\n                        case 'ConeBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.height,\r\n                                data.radialSegments,\r\n                                data.heightSegments,\r\n                                data.openEnded,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'SphereGeometry':\r\n                        case 'SphereBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.widthSegments,\r\n                                data.heightSegments,\r\n                                data.phiStart,\r\n                                data.phiLength,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'DodecahedronGeometry':\r\n                        case 'DodecahedronBufferGeometry':\r\n                        case 'IcosahedronGeometry':\r\n                        case 'IcosahedronBufferGeometry':\r\n                        case 'OctahedronGeometry':\r\n                        case 'OctahedronBufferGeometry':\r\n                        case 'TetrahedronGeometry':\r\n                        case 'TetrahedronBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.detail\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'RingGeometry':\r\n                        case 'RingBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.innerRadius,\r\n                                data.outerRadius,\r\n                                data.thetaSegments,\r\n                                data.phiSegments,\r\n                                data.thetaStart,\r\n                                data.thetaLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'TorusGeometry':\r\n                        case 'TorusBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.tube,\r\n                                data.radialSegments,\r\n                                data.tubularSegments,\r\n                                data.arc\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'TorusKnotGeometry':\r\n                        case 'TorusKnotBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.radius,\r\n                                data.tube,\r\n                                data.tubularSegments,\r\n                                data.radialSegments,\r\n                                data.p,\r\n                                data.q\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'LatheGeometry':\r\n                        case 'LatheBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.points,\r\n                                data.segments,\r\n                                data.phiStart,\r\n                                data.phiLength\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'PolyhedronGeometry':\r\n                        case 'PolyhedronBufferGeometry':\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                data.vertices,\r\n                                data.indices,\r\n                                data.radius,\r\n                                data.details\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'ShapeGeometry':\r\n                        case 'ShapeBufferGeometry':\r\n\r\n                            var geometryShapes = [];\r\n\r\n                            for ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n                                var shape = shapes[ data.shapes[ j ] ];\r\n\r\n                                geometryShapes.push( shape );\r\n\r\n                            }\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                geometryShapes,\r\n                                data.curveSegments\r\n                            );\r\n\r\n                            break;\r\n\r\n\r\n                        case 'ExtrudeGeometry':\r\n                        case 'ExtrudeBufferGeometry':\r\n\r\n                            var geometryShapes = [];\r\n\r\n                            for ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\r\n\r\n                                var shape = shapes[ data.shapes[ j ] ];\r\n\r\n                                geometryShapes.push( shape );\r\n\r\n                            }\r\n\r\n                            var extrudePath = data.options.extrudePath;\r\n\r\n                            if ( extrudePath !== undefined ) {\r\n\r\n                                data.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\r\n\r\n                            }\r\n\r\n                            geometry = new Geometries[ data.type ](\r\n                                geometryShapes,\r\n                                data.options\r\n                            );\r\n\r\n                            break;\r\n\r\n                        case 'BufferGeometry':\r\n\r\n                            geometry = bufferGeometryLoader.parse( data );\r\n\r\n                            break;\r\n\r\n                        case 'Geometry':\r\n\r\n                            geometry = geometryLoader.parse( data, this.texturePath ).geometry;\r\n\r\n                            break;\r\n\r\n                        default:\r\n\r\n                            console.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n                            continue;\r\n\r\n                    }\r\n\r\n                    geometry.uuid = data.uuid;\r\n\r\n                    if ( data.name !== undefined ) geometry.name = data.name;\r\n                    if ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\r\n\r\n                    geometries[ data.uuid ] = geometry;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return geometries;\r\n\r\n        },\r\n\r\n        parseMaterials: function ( json, textures ) {\r\n\r\n            var materials = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                var loader = new MaterialLoader();\r\n                loader.setTextures( textures );\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var data = json[ i ];\r\n\r\n                    if ( data.type === 'MultiMaterial' ) {\r\n\r\n                        // Deprecated\r\n\r\n                        var array = [];\r\n\r\n                        for ( var j = 0; j < data.materials.length; j ++ ) {\r\n\r\n                            array.push( loader.parse( data.materials[ j ] ) );\r\n\r\n                        }\r\n\r\n                        materials[ data.uuid ] = array;\r\n\r\n                    } else {\r\n\r\n                        materials[ data.uuid ] = loader.parse( data );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return materials;\r\n\r\n        },\r\n\r\n        parseAnimations: function ( json ) {\r\n\r\n            var animations = [];\r\n\r\n            for ( var i = 0; i < json.length; i ++ ) {\r\n\r\n                var data = json[ i ];\r\n\r\n                var clip = AnimationClip.parse( data );\r\n\r\n                if ( data.uuid !== undefined ) clip.uuid = data.uuid;\r\n\r\n                animations.push( clip );\r\n\r\n            }\r\n\r\n            return animations;\r\n\r\n        },\r\n\r\n        parseImages: function ( json, onLoad ) {\r\n\r\n            var scope = this;\r\n            var images = {};\r\n\r\n            function loadImage( url ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                return loader.load( url, function () {\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, undefined, function () {\r\n\r\n                    scope.manager.itemEnd( url );\r\n                    scope.manager.itemError( url );\r\n\r\n                } );\r\n\r\n            }\r\n\r\n            if ( json !== undefined && json.length > 0 ) {\r\n\r\n                var manager = new LoadingManager( onLoad );\r\n\r\n                var loader = new ImageLoader( manager );\r\n                loader.setCrossOrigin( this.crossOrigin );\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var image = json[ i ];\r\n                    var path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n                    images[ image.uuid ] = loadImage( path );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return images;\r\n\r\n        },\r\n\r\n        parseTextures: function ( json, images ) {\r\n\r\n            function parseConstant( value, type ) {\r\n\r\n                if ( typeof value === 'number' ) return value;\r\n\r\n                console.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n                return type[ value ];\r\n\r\n            }\r\n\r\n            var textures = {};\r\n\r\n            if ( json !== undefined ) {\r\n\r\n                for ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n                    var data = json[ i ];\r\n\r\n                    if ( data.image === undefined ) {\r\n\r\n                        console.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n                    }\r\n\r\n                    if ( images[ data.image ] === undefined ) {\r\n\r\n                        console.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n                    }\r\n\r\n                    var texture = new Texture( images[ data.image ] );\r\n                    texture.needsUpdate = true;\r\n\r\n                    texture.uuid = data.uuid;\r\n\r\n                    if ( data.name !== undefined ) texture.name = data.name;\r\n\r\n                    if ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\r\n\r\n                    if ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\r\n                    if ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\r\n                    if ( data.center !== undefined ) texture.center.fromArray( data.center );\r\n                    if ( data.rotation !== undefined ) texture.rotation = data.rotation;\r\n\r\n                    if ( data.wrap !== undefined ) {\r\n\r\n                        texture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\r\n                        texture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\r\n\r\n                    }\r\n\r\n                    if ( data.format !== undefined ) texture.format = data.format;\r\n\r\n                    if ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\r\n                    if ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\r\n                    if ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\r\n                    if ( data.flipY !== undefined ) texture.flipY = data.flipY;\r\n\r\n                    textures[ data.uuid ] = texture;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return textures;\r\n\r\n        },\r\n\r\n        parseObject: function ( data, geometries, materials ) {\r\n\r\n            var object;\r\n\r\n            function getGeometry( name ) {\r\n\r\n                if ( geometries[ name ] === undefined ) {\r\n\r\n                    console.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n                }\r\n\r\n                return geometries[ name ];\r\n\r\n            }\r\n\r\n            function getMaterial( name ) {\r\n\r\n                if ( name === undefined ) return undefined;\r\n\r\n                if ( Array.isArray( name ) ) {\r\n\r\n                    var array = [];\r\n\r\n                    for ( var i = 0, l = name.length; i < l; i ++ ) {\r\n\r\n                        var uuid = name[ i ];\r\n\r\n                        if ( materials[ uuid ] === undefined ) {\r\n\r\n                            console.warn( 'THREE.ObjectLoader: Undefined material', uuid );\r\n\r\n                        }\r\n\r\n                        array.push( materials[ uuid ] );\r\n\r\n                    }\r\n\r\n                    return array;\r\n\r\n                }\r\n\r\n                if ( materials[ name ] === undefined ) {\r\n\r\n                    console.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n                }\r\n\r\n                return materials[ name ];\r\n\r\n            }\r\n\r\n            switch ( data.type ) {\r\n\r\n                case 'Scene':\r\n\r\n                    object = new Scene();\r\n\r\n                    if ( data.background !== undefined ) {\r\n\r\n                        if ( Number.isInteger( data.background ) ) {\r\n\r\n                            object.background = new Color( data.background );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    if ( data.fog !== undefined ) {\r\n\r\n                        if ( data.fog.type === 'Fog' ) {\r\n\r\n                            object.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\r\n\r\n                        } else if ( data.fog.type === 'FogExp2' ) {\r\n\r\n                            object.fog = new FogExp2( data.fog.color, data.fog.density );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                    break;\r\n\r\n                case 'PerspectiveCamera':\r\n\r\n                    object = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n                    if ( data.focus !== undefined ) object.focus = data.focus;\r\n                    if ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n                    if ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\r\n                    if ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\r\n                    if ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n                    break;\r\n\r\n                case 'OrthographicCamera':\r\n\r\n                    object = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n                    if ( data.zoom !== undefined ) object.zoom = data.zoom;\r\n                    if ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\r\n\r\n                    break;\r\n\r\n                case 'AmbientLight':\r\n\r\n                    object = new AmbientLight( data.color, data.intensity );\r\n\r\n                    break;\r\n\r\n                case 'DirectionalLight':\r\n\r\n                    object = new DirectionalLight( data.color, data.intensity );\r\n\r\n                    break;\r\n\r\n                case 'PointLight':\r\n\r\n                    object = new PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n                    break;\r\n\r\n                case 'RectAreaLight':\r\n\r\n                    object = new RectAreaLight( data.color, data.intensity, data.width, data.height );\r\n\r\n                    break;\r\n\r\n                case 'SpotLight':\r\n\r\n                    object = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\r\n\r\n                    break;\r\n\r\n                case 'HemisphereLight':\r\n\r\n                    object = new HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n                    break;\r\n\r\n                case 'SkinnedMesh':\r\n\r\n                    console.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\r\n\r\n                case 'Mesh':\r\n\r\n                    var geometry = getGeometry( data.geometry );\r\n                    var material = getMaterial( data.material );\r\n\r\n                    if ( geometry.bones && geometry.bones.length > 0 ) {\r\n\r\n                        object = new SkinnedMesh( geometry, material );\r\n\r\n                    } else {\r\n\r\n                        object = new Mesh( geometry, material );\r\n\r\n                    }\r\n\r\n                    break;\r\n\r\n                case 'LOD':\r\n\r\n                    object = new LOD();\r\n\r\n                    break;\r\n\r\n                case 'Line':\r\n\r\n                    object = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n                    break;\r\n\r\n                case 'LineLoop':\r\n\r\n                    object = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'LineSegments':\r\n\r\n                    object = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'PointCloud':\r\n                case 'Points':\r\n\r\n                    object = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'Sprite':\r\n\r\n                    object = new Sprite( getMaterial( data.material ) );\r\n\r\n                    break;\r\n\r\n                case 'Group':\r\n\r\n                    object = new Group();\r\n\r\n                    break;\r\n\r\n                default:\r\n\r\n                    object = new Object3D();\r\n\r\n            }\r\n\r\n            object.uuid = data.uuid;\r\n\r\n            if ( data.name !== undefined ) object.name = data.name;\r\n\r\n            if ( data.matrix !== undefined ) {\r\n\r\n                object.matrix.fromArray( data.matrix );\r\n\r\n                if ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\r\n                if ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n            } else {\r\n\r\n                if ( data.position !== undefined ) object.position.fromArray( data.position );\r\n                if ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n                if ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\r\n                if ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n            }\r\n\r\n            if ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n            if ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n            if ( data.shadow ) {\r\n\r\n                if ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\r\n                if ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\r\n                if ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\r\n                if ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\r\n\r\n            }\r\n\r\n            if ( data.visible !== undefined ) object.visible = data.visible;\r\n            if ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\r\n            if ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\r\n            if ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n            if ( data.children !== undefined ) {\r\n\r\n                var children = data.children;\r\n\r\n                for ( var i = 0; i < children.length; i ++ ) {\r\n\r\n                    object.add( this.parseObject( children[ i ], geometries, materials ) );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if ( data.type === 'LOD' ) {\r\n\r\n                var levels = data.levels;\r\n\r\n                for ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n                    var level = levels[ l ];\r\n                    var child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n                    if ( child !== undefined ) {\r\n\r\n                        object.addLevel( child, level.distance );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return object;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    var TEXTURE_MAPPING = {\r\n        UVMapping: UVMapping,\r\n        CubeReflectionMapping: CubeReflectionMapping,\r\n        CubeRefractionMapping: CubeRefractionMapping,\r\n        EquirectangularReflectionMapping: EquirectangularReflectionMapping,\r\n        EquirectangularRefractionMapping: EquirectangularRefractionMapping,\r\n        SphericalReflectionMapping: SphericalReflectionMapping,\r\n        CubeUVReflectionMapping: CubeUVReflectionMapping,\r\n        CubeUVRefractionMapping: CubeUVRefractionMapping\r\n    };\r\n\r\n    var TEXTURE_WRAPPING = {\r\n        RepeatWrapping: RepeatWrapping,\r\n        ClampToEdgeWrapping: ClampToEdgeWrapping,\r\n        MirroredRepeatWrapping: MirroredRepeatWrapping\r\n    };\r\n\r\n    var TEXTURE_FILTER = {\r\n        NearestFilter: NearestFilter,\r\n        NearestMipMapNearestFilter: NearestMipMapNearestFilter,\r\n        NearestMipMapLinearFilter: NearestMipMapLinearFilter,\r\n        LinearFilter: LinearFilter,\r\n        LinearMipMapNearestFilter: LinearMipMapNearestFilter,\r\n        LinearMipMapLinearFilter: LinearMipMapLinearFilter\r\n    };\r\n\r\n    /**\r\n     * @author thespite / http://clicktorelease.com/\r\n     */\r\n\r\n\r\n    function ImageBitmapLoader( manager ) {\r\n\r\n        if ( typeof createImageBitmap === 'undefined' ) {\r\n\r\n            console.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\r\n\r\n        }\r\n\r\n        if ( typeof fetch === 'undefined' ) {\r\n\r\n            console.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\r\n\r\n        }\r\n\r\n        this.manager = manager !== undefined ? manager : DefaultLoadingManager;\r\n        this.options = undefined;\r\n\r\n    }\r\n\r\n    ImageBitmapLoader.prototype = {\r\n\r\n        constructor: ImageBitmapLoader,\r\n\r\n        setOptions: function setOptions( options ) {\r\n\r\n            this.options = options;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            if ( url === undefined ) url = '';\r\n\r\n            if ( this.path !== undefined ) url = this.path + url;\r\n\r\n            url = this.manager.resolveURL( url );\r\n\r\n            var scope = this;\r\n\r\n            var cached = Cache.get( url );\r\n\r\n            if ( cached !== undefined ) {\r\n\r\n                scope.manager.itemStart( url );\r\n\r\n                setTimeout( function () {\r\n\r\n                    if ( onLoad ) onLoad( cached );\r\n\r\n                    scope.manager.itemEnd( url );\r\n\r\n                }, 0 );\r\n\r\n                return cached;\r\n\r\n            }\r\n\r\n            fetch( url ).then( function ( res ) {\r\n\r\n                return res.blob();\r\n\r\n            } ).then( function ( blob ) {\r\n\r\n                return createImageBitmap( blob, scope.options );\r\n\r\n            } ).then( function ( imageBitmap ) {\r\n\r\n                Cache.add( url, imageBitmap );\r\n\r\n                if ( onLoad ) onLoad( imageBitmap );\r\n\r\n                scope.manager.itemEnd( url );\r\n\r\n            } ).catch( function ( e ) {\r\n\r\n                if ( onError ) onError( e );\r\n\r\n                scope.manager.itemEnd( url );\r\n                scope.manager.itemError( url );\r\n\r\n            } );\r\n\r\n        },\r\n\r\n        setCrossOrigin: function ( /* value */ ) {\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\r\n     **/\r\n\r\n    function ShapePath() {\r\n\r\n        this.type = 'ShapePath';\r\n\r\n        this.color = new Color();\r\n\r\n        this.subPaths = [];\r\n        this.currentPath = null;\r\n\r\n    }\r\n\r\n    Object.assign( ShapePath.prototype, {\r\n\r\n        moveTo: function ( x, y ) {\r\n\r\n            this.currentPath = new Path();\r\n            this.subPaths.push( this.currentPath );\r\n            this.currentPath.moveTo( x, y );\r\n\r\n        },\r\n\r\n        lineTo: function ( x, y ) {\r\n\r\n            this.currentPath.lineTo( x, y );\r\n\r\n        },\r\n\r\n        quadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\r\n\r\n            this.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\r\n\r\n        },\r\n\r\n        bezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\r\n\r\n            this.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\r\n\r\n        },\r\n\r\n        splineThru: function ( pts ) {\r\n\r\n            this.currentPath.splineThru( pts );\r\n\r\n        },\r\n\r\n        toShapes: function ( isCCW, noHoles ) {\r\n\r\n            function toShapesNoHoles( inSubpaths ) {\r\n\r\n                var shapes = [];\r\n\r\n                for ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\r\n\r\n                    var tmpPath = inSubpaths[ i ];\r\n\r\n                    var tmpShape = new Shape();\r\n                    tmpShape.curves = tmpPath.curves;\r\n\r\n                    shapes.push( tmpShape );\r\n\r\n                }\r\n\r\n                return shapes;\r\n\r\n            }\r\n\r\n            function isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n                var polyLen = inPolygon.length;\r\n\r\n                // inPt on polygon contour => immediate success    or\r\n                // toggling of inside/outside at every single! intersection point of an edge\r\n                //  with the horizontal line through inPt, left of inPt\r\n                //  not counting lowerY endpoints of edges and whole edges on that line\r\n                var inside = false;\r\n                for ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n                    var edgeLowPt = inPolygon[ p ];\r\n                    var edgeHighPt = inPolygon[ q ];\r\n\r\n                    var edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n                    var edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n                    if ( Math.abs( edgeDy ) > Number.EPSILON ) {\r\n\r\n                        // not parallel\r\n                        if ( edgeDy < 0 ) {\r\n\r\n                            edgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\r\n                            edgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n                        }\r\n                        if ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n                        if ( inPt.y === edgeLowPt.y ) {\r\n\r\n                            if ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n                            // continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n                        } else {\r\n\r\n                            var perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n                            if ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n                            if ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n                            inside = ! inside;\t\t// true intersection left of inPt\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        // parallel or collinear\r\n                        if ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n                        // edge lies on the same horizontal line as inPt\r\n                        if ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n                            ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n                        // continue;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                return\tinside;\r\n\r\n            }\r\n\r\n            var isClockWise = ShapeUtils.isClockWise;\r\n\r\n            var subPaths = this.subPaths;\r\n            if ( subPaths.length === 0 ) return [];\r\n\r\n            if ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n            var solid, tmpPath, tmpShape, shapes = [];\r\n\r\n            if ( subPaths.length === 1 ) {\r\n\r\n                tmpPath = subPaths[ 0 ];\r\n                tmpShape = new Shape();\r\n                tmpShape.curves = tmpPath.curves;\r\n                shapes.push( tmpShape );\r\n                return shapes;\r\n\r\n            }\r\n\r\n            var holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\r\n            holesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n            // console.log(\"Holes first\", holesFirst);\r\n\r\n            var betterShapeHoles = [];\r\n            var newShapes = [];\r\n            var newShapeHoles = [];\r\n            var mainIdx = 0;\r\n            var tmpPoints;\r\n\r\n            newShapes[ mainIdx ] = undefined;\r\n            newShapeHoles[ mainIdx ] = [];\r\n\r\n            for ( var i = 0, l = subPaths.length; i < l; i ++ ) {\r\n\r\n                tmpPath = subPaths[ i ];\r\n                tmpPoints = tmpPath.getPoints();\r\n                solid = isClockWise( tmpPoints );\r\n                solid = isCCW ? ! solid : solid;\r\n\r\n                if ( solid ) {\r\n\r\n                    if ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n                    newShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\r\n                    newShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n                    if ( holesFirst )\tmainIdx ++;\r\n                    newShapeHoles[ mainIdx ] = [];\r\n\r\n                    //console.log('cw', i);\r\n\r\n                } else {\r\n\r\n                    newShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n                    //console.log('ccw', i);\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // only Holes? -> probably all Shapes with wrong orientation\r\n            if ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n            if ( newShapes.length > 1 ) {\r\n\r\n                var ambiguous = false;\r\n                var toChange = [];\r\n\r\n                for ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n                    betterShapeHoles[ sIdx ] = [];\r\n\r\n                }\r\n\r\n                for ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n                    var sho = newShapeHoles[ sIdx ];\r\n\r\n                    for ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n                        var ho = sho[ hIdx ];\r\n                        var hole_unassigned = true;\r\n\r\n                        for ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n                            if ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n                                if ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n                                if ( hole_unassigned ) {\r\n\r\n                                    hole_unassigned = false;\r\n                                    betterShapeHoles[ s2Idx ].push( ho );\r\n\r\n                                } else {\r\n\r\n                                    ambiguous = true;\r\n\r\n                                }\r\n\r\n                            }\r\n\r\n                        }\r\n                        if ( hole_unassigned ) {\r\n\r\n                            betterShapeHoles[ sIdx ].push( ho );\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n                // console.log(\"ambiguous: \", ambiguous);\r\n                if ( toChange.length > 0 ) {\r\n\r\n                    // console.log(\"to change: \", toChange);\r\n                    if ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var tmpHoles;\r\n\r\n            for ( var i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n                tmpShape = newShapes[ i ].s;\r\n                shapes.push( tmpShape );\r\n                tmpHoles = newShapeHoles[ i ];\r\n\r\n                for ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n                    tmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            //console.log(\"shape\", shapes);\r\n\r\n            return shapes;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author zz85 / http://www.lab4games.net/zz85/blog\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n\r\n    function Font( data ) {\r\n\r\n        this.type = 'Font';\r\n\r\n        this.data = data;\r\n\r\n    }\r\n\r\n    Object.assign( Font.prototype, {\r\n\r\n        isFont: true,\r\n\r\n        generateShapes: function ( text, size, divisions ) {\r\n\r\n            if ( size === undefined ) size = 100;\r\n            if ( divisions === undefined ) divisions = 4;\r\n\r\n            var shapes = [];\r\n            var paths = createPaths( text, size, divisions, this.data );\r\n\r\n            for ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n                Array.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n            }\r\n\r\n            return shapes;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    function createPaths( text, size, divisions, data ) {\r\n\r\n        var chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // see #13988\r\n        var scale = size / data.resolution;\r\n        var line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\r\n\r\n        var paths = [];\r\n\r\n        var offsetX = 0, offsetY = 0;\r\n\r\n        for ( var i = 0; i < chars.length; i ++ ) {\r\n\r\n            var char = chars[ i ];\r\n\r\n            if ( char === '\\n' ) {\r\n\r\n                offsetX = 0;\r\n                offsetY -= line_height;\r\n\r\n            } else {\r\n\r\n                var ret = createPath( char, divisions, scale, offsetX, offsetY, data );\r\n                offsetX += ret.offsetX;\r\n                paths.push( ret.path );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return paths;\r\n\r\n    }\r\n\r\n    function createPath( char, divisions, scale, offsetX, offsetY, data ) {\r\n\r\n        var glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\r\n\r\n        if ( ! glyph ) return;\r\n\r\n        var path = new ShapePath();\r\n\r\n        var x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\r\n\r\n        if ( glyph.o ) {\r\n\r\n            var outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\r\n            for ( var i = 0, l = outline.length; i < l; ) {\r\n\r\n                var action = outline[ i ++ ];\r\n\r\n                switch ( action ) {\r\n\r\n                    case 'm': // moveTo\r\n\r\n                        x = outline[ i ++ ] * scale + offsetX;\r\n                        y = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.moveTo( x, y );\r\n\r\n                        break;\r\n\r\n                    case 'l': // lineTo\r\n\r\n                        x = outline[ i ++ ] * scale + offsetX;\r\n                        y = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.lineTo( x, y );\r\n\r\n                        break;\r\n\r\n                    case 'q': // quadraticCurveTo\r\n\r\n                        cpx = outline[ i ++ ] * scale + offsetX;\r\n                        cpy = outline[ i ++ ] * scale + offsetY;\r\n                        cpx1 = outline[ i ++ ] * scale + offsetX;\r\n                        cpy1 = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n                        break;\r\n\r\n                    case 'b': // bezierCurveTo\r\n\r\n                        cpx = outline[ i ++ ] * scale + offsetX;\r\n                        cpy = outline[ i ++ ] * scale + offsetY;\r\n                        cpx1 = outline[ i ++ ] * scale + offsetX;\r\n                        cpy1 = outline[ i ++ ] * scale + offsetY;\r\n                        cpx2 = outline[ i ++ ] * scale + offsetX;\r\n                        cpy2 = outline[ i ++ ] * scale + offsetY;\r\n\r\n                        path.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n                        break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return { offsetX: glyph.ha * scale, path: path };\r\n\r\n    }\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function FontLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( FontLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var scope = this;\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setPath( this.path );\r\n            loader.load( url, function ( text ) {\r\n\r\n                var json;\r\n\r\n                try {\r\n\r\n                    json = JSON.parse( text );\r\n\r\n                } catch ( e ) {\r\n\r\n                    console.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\r\n                    json = JSON.parse( text.substring( 65, text.length - 2 ) );\r\n\r\n                }\r\n\r\n                var font = scope.parse( json );\r\n\r\n                if ( onLoad ) onLoad( font );\r\n\r\n            }, onProgress, onError );\r\n\r\n        },\r\n\r\n        parse: function ( json ) {\r\n\r\n            return new Font( json );\r\n\r\n        },\r\n\r\n        setPath: function ( value ) {\r\n\r\n            this.path = value;\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    var context;\r\n\r\n    var AudioContext = {\r\n\r\n        getContext: function () {\r\n\r\n            if ( context === undefined ) {\r\n\r\n                context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n            }\r\n\r\n            return context;\r\n\r\n        },\r\n\r\n        setContext: function ( value ) {\r\n\r\n            context = value;\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n     */\r\n\r\n    function AudioLoader( manager ) {\r\n\r\n        this.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n    }\r\n\r\n    Object.assign( AudioLoader.prototype, {\r\n\r\n        load: function ( url, onLoad, onProgress, onError ) {\r\n\r\n            var loader = new FileLoader( this.manager );\r\n            loader.setResponseType( 'arraybuffer' );\r\n            loader.load( url, function ( buffer ) {\r\n\r\n                var context = AudioContext.getContext();\r\n\r\n                context.decodeAudioData( buffer, function ( audioBuffer ) {\r\n\r\n                    onLoad( audioBuffer );\r\n\r\n                } );\r\n\r\n            }, onProgress, onError );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function StereoCamera() {\r\n\r\n        this.type = 'StereoCamera';\r\n\r\n        this.aspect = 1;\r\n\r\n        this.eyeSep = 0.064;\r\n\r\n        this.cameraL = new PerspectiveCamera();\r\n        this.cameraL.layers.enable( 1 );\r\n        this.cameraL.matrixAutoUpdate = false;\r\n\r\n        this.cameraR = new PerspectiveCamera();\r\n        this.cameraR.layers.enable( 2 );\r\n        this.cameraR.matrixAutoUpdate = false;\r\n\r\n    }\r\n\r\n    Object.assign( StereoCamera.prototype, {\r\n\r\n        update: ( function () {\r\n\r\n            var instance, focus, fov, aspect, near, far, zoom, eyeSep;\r\n\r\n            var eyeRight = new Matrix4();\r\n            var eyeLeft = new Matrix4();\r\n\r\n            return function update( camera ) {\r\n\r\n                var needsUpdate = instance !== this || focus !== camera.focus || fov !== camera.fov ||\r\n                    aspect !== camera.aspect * this.aspect || near !== camera.near ||\r\n                    far !== camera.far || zoom !== camera.zoom || eyeSep !== this.eyeSep;\r\n\r\n                if ( needsUpdate ) {\r\n\r\n                    instance = this;\r\n                    focus = camera.focus;\r\n                    fov = camera.fov;\r\n                    aspect = camera.aspect * this.aspect;\r\n                    near = camera.near;\r\n                    far = camera.far;\r\n                    zoom = camera.zoom;\r\n\r\n                    // Off-axis stereoscopic effect based on\r\n                    // http://paulbourke.net/stereographics/stereorender/\r\n\r\n                    var projectionMatrix = camera.projectionMatrix.clone();\r\n                    eyeSep = this.eyeSep / 2;\r\n                    var eyeSepOnProjection = eyeSep * near / focus;\r\n                    var ymax = ( near * Math.tan( _Math.DEG2RAD * fov * 0.5 ) ) / zoom;\r\n                    var xmin, xmax;\r\n\r\n                    // translate xOffset\r\n\r\n                    eyeLeft.elements[ 12 ] = - eyeSep;\r\n                    eyeRight.elements[ 12 ] = eyeSep;\r\n\r\n                    // for left eye\r\n\r\n                    xmin = - ymax * aspect + eyeSepOnProjection;\r\n                    xmax = ymax * aspect + eyeSepOnProjection;\r\n\r\n                    projectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n                    projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n                    this.cameraL.projectionMatrix.copy( projectionMatrix );\r\n\r\n                    // for right eye\r\n\r\n                    xmin = - ymax * aspect - eyeSepOnProjection;\r\n                    xmax = ymax * aspect - eyeSepOnProjection;\r\n\r\n                    projectionMatrix.elements[ 0 ] = 2 * near / ( xmax - xmin );\r\n                    projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\r\n\r\n                    this.cameraR.projectionMatrix.copy( projectionMatrix );\r\n\r\n                }\r\n\r\n                this.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( eyeLeft );\r\n                this.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( eyeRight );\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * Camera for rendering cube maps\r\n     *\t- renders scene into axis-aligned cube\r\n     *\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function CubeCamera( near, far, cubeResolution ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'CubeCamera';\r\n\r\n        var fov = 90, aspect = 1;\r\n\r\n        var cameraPX = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraPX.up.set( 0, - 1, 0 );\r\n        cameraPX.lookAt( new Vector3( 1, 0, 0 ) );\r\n        this.add( cameraPX );\r\n\r\n        var cameraNX = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraNX.up.set( 0, - 1, 0 );\r\n        cameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\r\n        this.add( cameraNX );\r\n\r\n        var cameraPY = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraPY.up.set( 0, 0, 1 );\r\n        cameraPY.lookAt( new Vector3( 0, 1, 0 ) );\r\n        this.add( cameraPY );\r\n\r\n        var cameraNY = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraNY.up.set( 0, 0, - 1 );\r\n        cameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\r\n        this.add( cameraNY );\r\n\r\n        var cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraPZ.up.set( 0, - 1, 0 );\r\n        cameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\r\n        this.add( cameraPZ );\r\n\r\n        var cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\r\n        cameraNZ.up.set( 0, - 1, 0 );\r\n        cameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\r\n        this.add( cameraNZ );\r\n\r\n        var options = { format: RGBFormat, magFilter: LinearFilter, minFilter: LinearFilter };\r\n\r\n        this.renderTarget = new WebGLRenderTargetCube( cubeResolution, cubeResolution, options );\r\n        this.renderTarget.texture.name = \"CubeCamera\";\r\n\r\n        this.update = function ( renderer, scene ) {\r\n\r\n            if ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n            var renderTarget = this.renderTarget;\r\n            var generateMipmaps = renderTarget.texture.generateMipmaps;\r\n\r\n            renderTarget.texture.generateMipmaps = false;\r\n\r\n            renderTarget.activeCubeFace = 0;\r\n            renderer.render( scene, cameraPX, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 1;\r\n            renderer.render( scene, cameraNX, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 2;\r\n            renderer.render( scene, cameraPY, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 3;\r\n            renderer.render( scene, cameraNY, renderTarget );\r\n\r\n            renderTarget.activeCubeFace = 4;\r\n            renderer.render( scene, cameraPZ, renderTarget );\r\n\r\n            renderTarget.texture.generateMipmaps = generateMipmaps;\r\n\r\n            renderTarget.activeCubeFace = 5;\r\n            renderer.render( scene, cameraNZ, renderTarget );\r\n\r\n            renderer.setRenderTarget( null );\r\n\r\n        };\r\n\r\n        this.clear = function ( renderer, color, depth, stencil ) {\r\n\r\n            var renderTarget = this.renderTarget;\r\n\r\n            for ( var i = 0; i < 6; i ++ ) {\r\n\r\n                renderTarget.activeCubeFace = i;\r\n                renderer.setRenderTarget( renderTarget );\r\n\r\n                renderer.clear( color, depth, stencil );\r\n\r\n            }\r\n\r\n            renderer.setRenderTarget( null );\r\n\r\n        };\r\n\r\n    }\r\n\r\n    CubeCamera.prototype = Object.create( Object3D.prototype );\r\n    CubeCamera.prototype.constructor = CubeCamera;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AudioListener() {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'AudioListener';\r\n\r\n        this.context = AudioContext.getContext();\r\n\r\n        this.gain = this.context.createGain();\r\n        this.gain.connect( this.context.destination );\r\n\r\n        this.filter = null;\r\n\r\n    }\r\n\r\n    AudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: AudioListener,\r\n\r\n        getInput: function () {\r\n\r\n            return this.gain;\r\n\r\n        },\r\n\r\n        removeFilter: function ( ) {\r\n\r\n            if ( this.filter !== null ) {\r\n\r\n                this.gain.disconnect( this.filter );\r\n                this.filter.disconnect( this.context.destination );\r\n                this.gain.connect( this.context.destination );\r\n                this.filter = null;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        getFilter: function () {\r\n\r\n            return this.filter;\r\n\r\n        },\r\n\r\n        setFilter: function ( value ) {\r\n\r\n            if ( this.filter !== null ) {\r\n\r\n                this.gain.disconnect( this.filter );\r\n                this.filter.disconnect( this.context.destination );\r\n\r\n            } else {\r\n\r\n                this.gain.disconnect( this.context.destination );\r\n\r\n            }\r\n\r\n            this.filter = value;\r\n            this.gain.connect( this.filter );\r\n            this.filter.connect( this.context.destination );\r\n\r\n        },\r\n\r\n        getMasterVolume: function () {\r\n\r\n            return this.gain.gain.value;\r\n\r\n        },\r\n\r\n        setMasterVolume: function ( value ) {\r\n\r\n            this.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n        },\r\n\r\n        updateMatrixWorld: ( function () {\r\n\r\n            var position = new Vector3();\r\n            var quaternion = new Quaternion();\r\n            var scale = new Vector3();\r\n\r\n            var orientation = new Vector3();\r\n\r\n            return function updateMatrixWorld( force ) {\r\n\r\n                Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n                var listener = this.context.listener;\r\n                var up = this.up;\r\n\r\n                this.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n                orientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n                if ( listener.positionX ) {\r\n\r\n                    listener.positionX.setValueAtTime( position.x, this.context.currentTime );\r\n                    listener.positionY.setValueAtTime( position.y, this.context.currentTime );\r\n                    listener.positionZ.setValueAtTime( position.z, this.context.currentTime );\r\n                    listener.forwardX.setValueAtTime( orientation.x, this.context.currentTime );\r\n                    listener.forwardY.setValueAtTime( orientation.y, this.context.currentTime );\r\n                    listener.forwardZ.setValueAtTime( orientation.z, this.context.currentTime );\r\n                    listener.upX.setValueAtTime( up.x, this.context.currentTime );\r\n                    listener.upY.setValueAtTime( up.y, this.context.currentTime );\r\n                    listener.upZ.setValueAtTime( up.z, this.context.currentTime );\r\n\r\n                } else {\r\n\r\n                    listener.setPosition( position.x, position.y, position.z );\r\n                    listener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n                }\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Reece Aaron Lecrivain / http://reecenotes.com/\r\n     */\r\n\r\n    function Audio( listener ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.type = 'Audio';\r\n\r\n        this.context = listener.context;\r\n\r\n        this.gain = this.context.createGain();\r\n        this.gain.connect( listener.getInput() );\r\n\r\n        this.autoplay = false;\r\n\r\n        this.buffer = null;\r\n        this.loop = false;\r\n        this.startTime = 0;\r\n        this.offset = 0;\r\n        this.playbackRate = 1;\r\n        this.isPlaying = false;\r\n        this.hasPlaybackControl = true;\r\n        this.sourceType = 'empty';\r\n\r\n        this.filters = [];\r\n\r\n    }\r\n\r\n    Audio.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n        constructor: Audio,\r\n\r\n        getOutput: function () {\r\n\r\n            return this.gain;\r\n\r\n        },\r\n\r\n        setNodeSource: function ( audioNode ) {\r\n\r\n            this.hasPlaybackControl = false;\r\n            this.sourceType = 'audioNode';\r\n            this.source = audioNode;\r\n            this.connect();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setMediaElementSource: function ( mediaElement ) {\r\n\r\n            this.hasPlaybackControl = false;\r\n            this.sourceType = 'mediaNode';\r\n            this.source = this.context.createMediaElementSource( mediaElement );\r\n            this.connect();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setBuffer: function ( audioBuffer ) {\r\n\r\n            this.buffer = audioBuffer;\r\n            this.sourceType = 'buffer';\r\n\r\n            if ( this.autoplay ) this.play();\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        play: function () {\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                console.warn( 'THREE.Audio: Audio is already playing.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            var source = this.context.createBufferSource();\r\n\r\n            source.buffer = this.buffer;\r\n            source.loop = this.loop;\r\n            source.onended = this.onEnded.bind( this );\r\n            source.playbackRate.setValueAtTime( this.playbackRate, this.startTime );\r\n            this.startTime = this.context.currentTime;\r\n            source.start( this.startTime, this.offset );\r\n\r\n            this.isPlaying = true;\r\n\r\n            this.source = source;\r\n\r\n            return this.connect();\r\n\r\n        },\r\n\r\n        pause: function () {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.source.stop();\r\n                this.offset += ( this.context.currentTime - this.startTime ) * this.playbackRate;\r\n                this.isPlaying = false;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        stop: function () {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            this.source.stop();\r\n            this.offset = 0;\r\n            this.isPlaying = false;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        connect: function () {\r\n\r\n            if ( this.filters.length > 0 ) {\r\n\r\n                this.source.connect( this.filters[ 0 ] );\r\n\r\n                for ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n                    this.filters[ i - 1 ].connect( this.filters[ i ] );\r\n\r\n                }\r\n\r\n                this.filters[ this.filters.length - 1 ].connect( this.getOutput() );\r\n\r\n            } else {\r\n\r\n                this.source.connect( this.getOutput() );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        disconnect: function () {\r\n\r\n            if ( this.filters.length > 0 ) {\r\n\r\n                this.source.disconnect( this.filters[ 0 ] );\r\n\r\n                for ( var i = 1, l = this.filters.length; i < l; i ++ ) {\r\n\r\n                    this.filters[ i - 1 ].disconnect( this.filters[ i ] );\r\n\r\n                }\r\n\r\n                this.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\r\n\r\n            } else {\r\n\r\n                this.source.disconnect( this.getOutput() );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getFilters: function () {\r\n\r\n            return this.filters;\r\n\r\n        },\r\n\r\n        setFilters: function ( value ) {\r\n\r\n            if ( ! value ) value = [];\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.disconnect();\r\n                this.filters = value;\r\n                this.connect();\r\n\r\n            } else {\r\n\r\n                this.filters = value;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getFilter: function () {\r\n\r\n            return this.getFilters()[ 0 ];\r\n\r\n        },\r\n\r\n        setFilter: function ( filter ) {\r\n\r\n            return this.setFilters( filter ? [ filter ] : [] );\r\n\r\n        },\r\n\r\n        setPlaybackRate: function ( value ) {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            this.playbackRate = value;\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.source.playbackRate.setValueAtTime( this.playbackRate, this.context.currentTime );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getPlaybackRate: function () {\r\n\r\n            return this.playbackRate;\r\n\r\n        },\r\n\r\n        onEnded: function () {\r\n\r\n            this.isPlaying = false;\r\n\r\n        },\r\n\r\n        getLoop: function () {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return false;\r\n\r\n            }\r\n\r\n            return this.loop;\r\n\r\n        },\r\n\r\n        setLoop: function ( value ) {\r\n\r\n            if ( this.hasPlaybackControl === false ) {\r\n\r\n                console.warn( 'THREE.Audio: this Audio has no playback control.' );\r\n                return;\r\n\r\n            }\r\n\r\n            this.loop = value;\r\n\r\n            if ( this.isPlaying === true ) {\r\n\r\n                this.source.loop = this.loop;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getVolume: function () {\r\n\r\n            return this.gain.gain.value;\r\n\r\n        },\r\n\r\n        setVolume: function ( value ) {\r\n\r\n            this.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function PositionalAudio( listener ) {\r\n\r\n        Audio.call( this, listener );\r\n\r\n        this.panner = this.context.createPanner();\r\n        this.panner.connect( this.gain );\r\n\r\n    }\r\n\r\n    PositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\r\n\r\n        constructor: PositionalAudio,\r\n\r\n        getOutput: function () {\r\n\r\n            return this.panner;\r\n\r\n        },\r\n\r\n        getRefDistance: function () {\r\n\r\n            return this.panner.refDistance;\r\n\r\n        },\r\n\r\n        setRefDistance: function ( value ) {\r\n\r\n            this.panner.refDistance = value;\r\n\r\n        },\r\n\r\n        getRolloffFactor: function () {\r\n\r\n            return this.panner.rolloffFactor;\r\n\r\n        },\r\n\r\n        setRolloffFactor: function ( value ) {\r\n\r\n            this.panner.rolloffFactor = value;\r\n\r\n        },\r\n\r\n        getDistanceModel: function () {\r\n\r\n            return this.panner.distanceModel;\r\n\r\n        },\r\n\r\n        setDistanceModel: function ( value ) {\r\n\r\n            this.panner.distanceModel = value;\r\n\r\n        },\r\n\r\n        getMaxDistance: function () {\r\n\r\n            return this.panner.maxDistance;\r\n\r\n        },\r\n\r\n        setMaxDistance: function ( value ) {\r\n\r\n            this.panner.maxDistance = value;\r\n\r\n        },\r\n\r\n        updateMatrixWorld: ( function () {\r\n\r\n            var position = new Vector3();\r\n\r\n            return function updateMatrixWorld( force ) {\r\n\r\n                Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n                position.setFromMatrixPosition( this.matrixWorld );\r\n\r\n                this.panner.setPosition( position.x, position.y, position.z );\r\n\r\n            };\r\n\r\n        } )()\r\n\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AudioAnalyser( audio, fftSize ) {\r\n\r\n        this.analyser = audio.context.createAnalyser();\r\n        this.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\r\n\r\n        this.data = new Uint8Array( this.analyser.frequencyBinCount );\r\n\r\n        audio.getOutput().connect( this.analyser );\r\n\r\n    }\r\n\r\n    Object.assign( AudioAnalyser.prototype, {\r\n\r\n        getFrequencyData: function () {\r\n\r\n            this.analyser.getByteFrequencyData( this.data );\r\n\r\n            return this.data;\r\n\r\n        },\r\n\r\n        getAverageFrequency: function () {\r\n\r\n            var value = 0, data = this.getFrequencyData();\r\n\r\n            for ( var i = 0; i < data.length; i ++ ) {\r\n\r\n                value += data[ i ];\r\n\r\n            }\r\n\r\n            return value / data.length;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Buffered scene graph property that allows weighted accumulation.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function PropertyMixer( binding, typeName, valueSize ) {\r\n\r\n        this.binding = binding;\r\n        this.valueSize = valueSize;\r\n\r\n        var bufferType = Float64Array,\r\n            mixFunction;\r\n\r\n        switch ( typeName ) {\r\n\r\n            case 'quaternion':\r\n                mixFunction = this._slerp;\r\n                break;\r\n\r\n            case 'string':\r\n            case 'bool':\r\n                bufferType = Array;\r\n                mixFunction = this._select;\r\n                break;\r\n\r\n            default:\r\n                mixFunction = this._lerp;\r\n\r\n        }\r\n\r\n        this.buffer = new bufferType( valueSize * 4 );\r\n        // layout: [ incoming | accu0 | accu1 | orig ]\r\n        //\r\n        // interpolators can use .buffer as their .result\r\n        // the data then goes to 'incoming'\r\n        //\r\n        // 'accu0' and 'accu1' are used frame-interleaved for\r\n        // the cumulative result and are compared to detect\r\n        // changes\r\n        //\r\n        // 'orig' stores the original state of the property\r\n\r\n        this._mixBufferRegion = mixFunction;\r\n\r\n        this.cumulativeWeight = 0;\r\n\r\n        this.useCount = 0;\r\n        this.referenceCount = 0;\r\n\r\n    }\r\n\r\n    Object.assign( PropertyMixer.prototype, {\r\n\r\n        // accumulate data in the 'incoming' region into 'accu<i>'\r\n        accumulate: function ( accuIndex, weight ) {\r\n\r\n            // note: happily accumulating nothing when weight = 0, the caller knows\r\n            // the weight and shouldn't have made the call in the first place\r\n\r\n            var buffer = this.buffer,\r\n                stride = this.valueSize,\r\n                offset = accuIndex * stride + stride,\r\n\r\n                currentWeight = this.cumulativeWeight;\r\n\r\n            if ( currentWeight === 0 ) {\r\n\r\n                // accuN := incoming * weight\r\n\r\n                for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                    buffer[ offset + i ] = buffer[ i ];\r\n\r\n                }\r\n\r\n                currentWeight = weight;\r\n\r\n            } else {\r\n\r\n                // accuN := accuN + incoming * weight\r\n\r\n                currentWeight += weight;\r\n                var mix = weight / currentWeight;\r\n                this._mixBufferRegion( buffer, offset, 0, mix, stride );\r\n\r\n            }\r\n\r\n            this.cumulativeWeight = currentWeight;\r\n\r\n        },\r\n\r\n        // apply the state of 'accu<i>' to the binding when accus differ\r\n        apply: function ( accuIndex ) {\r\n\r\n            var stride = this.valueSize,\r\n                buffer = this.buffer,\r\n                offset = accuIndex * stride + stride,\r\n\r\n                weight = this.cumulativeWeight,\r\n\r\n                binding = this.binding;\r\n\r\n            this.cumulativeWeight = 0;\r\n\r\n            if ( weight < 1 ) {\r\n\r\n                // accuN := accuN + original * ( 1 - cumulativeWeight )\r\n\r\n                var originalValueOffset = stride * 3;\r\n\r\n                this._mixBufferRegion(\r\n                    buffer, offset, originalValueOffset, 1 - weight, stride );\r\n\r\n            }\r\n\r\n            for ( var i = stride, e = stride + stride; i !== e; ++ i ) {\r\n\r\n                if ( buffer[ i ] !== buffer[ i + stride ] ) {\r\n\r\n                    // value has changed -> update scene graph\r\n\r\n                    binding.setValue( buffer, offset );\r\n                    break;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // remember the state of the bound property and copy it to both accus\r\n        saveOriginalState: function () {\r\n\r\n            var binding = this.binding;\r\n\r\n            var buffer = this.buffer,\r\n                stride = this.valueSize,\r\n\r\n                originalValueOffset = stride * 3;\r\n\r\n            binding.getValue( buffer, originalValueOffset );\r\n\r\n            // accu[0..1] := orig -- initially detect changes against the original\r\n            for ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\r\n\r\n                buffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\r\n\r\n            }\r\n\r\n            this.cumulativeWeight = 0;\r\n\r\n        },\r\n\r\n        // apply the state previously taken via 'saveOriginalState' to the binding\r\n        restoreOriginalState: function () {\r\n\r\n            var originalValueOffset = this.valueSize * 3;\r\n            this.binding.setValue( this.buffer, originalValueOffset );\r\n\r\n        },\r\n\r\n\r\n        // mix functions\r\n\r\n        _select: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n            if ( t >= 0.5 ) {\r\n\r\n                for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                    buffer[ dstOffset + i ] = buffer[ srcOffset + i ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _slerp: function ( buffer, dstOffset, srcOffset, t ) {\r\n\r\n            Quaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\r\n\r\n        },\r\n\r\n        _lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\r\n\r\n            var s = 1 - t;\r\n\r\n            for ( var i = 0; i !== stride; ++ i ) {\r\n\r\n                var j = dstOffset + i;\r\n\r\n                buffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A reference to a real property in the scene graph.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n        // Characters [].:/ are reserved for track binding syntax.\r\n    var RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\r\n\r\n    function Composite( targetGroup, path, optionalParsedPath ) {\r\n\r\n        var parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n        this._targetGroup = targetGroup;\r\n        this._bindings = targetGroup.subscribe_( path, parsedPath );\r\n\r\n    }\r\n\r\n    Object.assign( Composite.prototype, {\r\n\r\n        getValue: function ( array, offset ) {\r\n\r\n            this.bind(); // bind all binding\r\n\r\n            var firstValidIndex = this._targetGroup.nCachedObjects_,\r\n                binding = this._bindings[ firstValidIndex ];\r\n\r\n            // and only call .getValue on the first\r\n            if ( binding !== undefined ) binding.getValue( array, offset );\r\n\r\n        },\r\n\r\n        setValue: function ( array, offset ) {\r\n\r\n            var bindings = this._bindings;\r\n\r\n            for ( var i = this._targetGroup.nCachedObjects_,\r\n                      n = bindings.length; i !== n; ++ i ) {\r\n\r\n                bindings[ i ].setValue( array, offset );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        bind: function () {\r\n\r\n            var bindings = this._bindings;\r\n\r\n            for ( var i = this._targetGroup.nCachedObjects_,\r\n                      n = bindings.length; i !== n; ++ i ) {\r\n\r\n                bindings[ i ].bind();\r\n\r\n            }\r\n\r\n        },\r\n\r\n        unbind: function () {\r\n\r\n            var bindings = this._bindings;\r\n\r\n            for ( var i = this._targetGroup.nCachedObjects_,\r\n                      n = bindings.length; i !== n; ++ i ) {\r\n\r\n                bindings[ i ].unbind();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n\r\n    function PropertyBinding( rootNode, path, parsedPath ) {\r\n\r\n        this.path = path;\r\n        this.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\r\n\r\n        this.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\r\n\r\n        this.rootNode = rootNode;\r\n\r\n    }\r\n\r\n    Object.assign( PropertyBinding, {\r\n\r\n        Composite: Composite,\r\n\r\n        create: function ( root, path, parsedPath ) {\r\n\r\n            if ( ! ( root && root.isAnimationObjectGroup ) ) {\r\n\r\n                return new PropertyBinding( root, path, parsedPath );\r\n\r\n            } else {\r\n\r\n                return new PropertyBinding.Composite( root, path, parsedPath );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        /**\r\n         * Replaces spaces with underscores and removes unsupported characters from\r\n         * node names, to ensure compatibility with parseTrackName().\r\n         *\r\n         * @param  {string} name Node name to be sanitized.\r\n         * @return {string}\r\n         */\r\n        sanitizeNodeName: ( function () {\r\n\r\n            var reservedRe = new RegExp( '[' + RESERVED_CHARS_RE + ']', 'g' );\r\n\r\n            return function sanitizeNodeName( name ) {\r\n\r\n                return name.replace( /\\s/g, '_' ).replace( reservedRe, '' );\r\n\r\n            };\r\n\r\n        }() ),\r\n\r\n        parseTrackName: function () {\r\n\r\n            // Attempts to allow node names from any language. ES5's `\\w` regexp matches\r\n            // only latin characters, and the unicode \\p{L} is not yet supported. So\r\n            // instead, we exclude reserved characters and match everything else.\r\n            var wordChar = '[^' + RESERVED_CHARS_RE + ']';\r\n            var wordCharOrDot = '[^' + RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\r\n\r\n            // Parent directories, delimited by '/' or ':'. Currently unused, but must\r\n            // be matched to parse the rest of the track name.\r\n            var directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', wordChar );\r\n\r\n            // Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\r\n            var nodeRe = /(WCOD+)?/.source.replace( 'WCOD', wordCharOrDot );\r\n\r\n            // Object on target node, and accessor. May not contain reserved\r\n            // characters. Accessor may contain any character except closing bracket.\r\n            var objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', wordChar );\r\n\r\n            // Property and accessor. May not contain reserved characters. Accessor may\r\n            // contain any non-bracket characters.\r\n            var propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', wordChar );\r\n\r\n            var trackRe = new RegExp( ''\r\n                + '^'\r\n                + directoryRe\r\n                + nodeRe\r\n                + objectRe\r\n                + propertyRe\r\n                + '$'\r\n            );\r\n\r\n            var supportedObjectNames = [ 'material', 'materials', 'bones' ];\r\n\r\n            return function parseTrackName( trackName ) {\r\n\r\n                var matches = trackRe.exec( trackName );\r\n\r\n                if ( ! matches ) {\r\n\r\n                    throw new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\r\n\r\n                }\r\n\r\n                var results = {\r\n                    // directoryName: matches[ 1 ], // (tschw) currently unused\r\n                    nodeName: matches[ 2 ],\r\n                    objectName: matches[ 3 ],\r\n                    objectIndex: matches[ 4 ],\r\n                    propertyName: matches[ 5 ], // required\r\n                    propertyIndex: matches[ 6 ]\r\n                };\r\n\r\n                var lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\r\n\r\n                if ( lastDot !== undefined && lastDot !== - 1 ) {\r\n\r\n                    var objectName = results.nodeName.substring( lastDot + 1 );\r\n\r\n                    // Object names must be checked against a whitelist. Otherwise, there\r\n                    // is no way to parse 'foo.bar.baz': 'baz' must be a property, but\r\n                    // 'bar' could be the objectName, or part of a nodeName (which can\r\n                    // include '.' characters).\r\n                    if ( supportedObjectNames.indexOf( objectName ) !== - 1 ) {\r\n\r\n                        results.nodeName = results.nodeName.substring( 0, lastDot );\r\n                        results.objectName = objectName;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( results.propertyName === null || results.propertyName.length === 0 ) {\r\n\r\n                    throw new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\r\n\r\n                }\r\n\r\n                return results;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        findNode: function ( root, nodeName ) {\r\n\r\n            if ( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\r\n\r\n                return root;\r\n\r\n            }\r\n\r\n            // search into skeleton bones.\r\n            if ( root.skeleton ) {\r\n\r\n                var bone = root.skeleton.getBoneByName( nodeName );\r\n\r\n                if ( bone !== undefined ) {\r\n\r\n                    return bone;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // search into node subtree.\r\n            if ( root.children ) {\r\n\r\n                var searchNodeSubtree = function ( children ) {\r\n\r\n                    for ( var i = 0; i < children.length; i ++ ) {\r\n\r\n                        var childNode = children[ i ];\r\n\r\n                        if ( childNode.name === nodeName || childNode.uuid === nodeName ) {\r\n\r\n                            return childNode;\r\n\r\n                        }\r\n\r\n                        var result = searchNodeSubtree( childNode.children );\r\n\r\n                        if ( result ) return result;\r\n\r\n                    }\r\n\r\n                    return null;\r\n\r\n                };\r\n\r\n                var subTreeNode = searchNodeSubtree( root.children );\r\n\r\n                if ( subTreeNode ) {\r\n\r\n                    return subTreeNode;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( PropertyBinding.prototype, { // prototype, continued\r\n\r\n        // these are used to \"bind\" a nonexistent property\r\n        _getValue_unavailable: function () {},\r\n        _setValue_unavailable: function () {},\r\n\r\n        BindingType: {\r\n            Direct: 0,\r\n            EntireArray: 1,\r\n            ArrayElement: 2,\r\n            HasFromToArray: 3\r\n        },\r\n\r\n        Versioning: {\r\n            None: 0,\r\n            NeedsUpdate: 1,\r\n            MatrixWorldNeedsUpdate: 2\r\n        },\r\n\r\n        GetterByBindingType: [\r\n\r\n            function getValue_direct( buffer, offset ) {\r\n\r\n                buffer[ offset ] = this.node[ this.propertyName ];\r\n\r\n            },\r\n\r\n            function getValue_array( buffer, offset ) {\r\n\r\n                var source = this.resolvedProperty;\r\n\r\n                for ( var i = 0, n = source.length; i !== n; ++ i ) {\r\n\r\n                    buffer[ offset ++ ] = source[ i ];\r\n\r\n                }\r\n\r\n            },\r\n\r\n            function getValue_arrayElement( buffer, offset ) {\r\n\r\n                buffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\r\n\r\n            },\r\n\r\n            function getValue_toArray( buffer, offset ) {\r\n\r\n                this.resolvedProperty.toArray( buffer, offset );\r\n\r\n            }\r\n\r\n        ],\r\n\r\n        SetterByBindingTypeAndVersioning: [\r\n\r\n            [\r\n                // Direct\r\n\r\n                function setValue_direct( buffer, offset ) {\r\n\r\n                    this.targetObject[ this.propertyName ] = buffer[ offset ];\r\n\r\n                },\r\n\r\n                function setValue_direct_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.targetObject[ this.propertyName ] = buffer[ offset ];\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.targetObject[ this.propertyName ] = buffer[ offset ];\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ], [\r\n\r\n                // EntireArray\r\n\r\n                function setValue_array( buffer, offset ) {\r\n\r\n                    var dest = this.resolvedProperty;\r\n\r\n                    for ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n                        dest[ i ] = buffer[ offset ++ ];\r\n\r\n                    }\r\n\r\n                },\r\n\r\n                function setValue_array_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    var dest = this.resolvedProperty;\r\n\r\n                    for ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n                        dest[ i ] = buffer[ offset ++ ];\r\n\r\n                    }\r\n\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    var dest = this.resolvedProperty;\r\n\r\n                    for ( var i = 0, n = dest.length; i !== n; ++ i ) {\r\n\r\n                        dest[ i ] = buffer[ offset ++ ];\r\n\r\n                    }\r\n\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ], [\r\n\r\n                // ArrayElement\r\n\r\n                function setValue_arrayElement( buffer, offset ) {\r\n\r\n                    this.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n\r\n                },\r\n\r\n                function setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ], [\r\n\r\n                // HasToFromArray\r\n\r\n                function setValue_fromArray( buffer, offset ) {\r\n\r\n                    this.resolvedProperty.fromArray( buffer, offset );\r\n\r\n                },\r\n\r\n                function setValue_fromArray_setNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty.fromArray( buffer, offset );\r\n                    this.targetObject.needsUpdate = true;\r\n\r\n                },\r\n\r\n                function setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\r\n\r\n                    this.resolvedProperty.fromArray( buffer, offset );\r\n                    this.targetObject.matrixWorldNeedsUpdate = true;\r\n\r\n                }\r\n\r\n            ]\r\n\r\n        ],\r\n\r\n        getValue: function getValue_unbound( targetArray, offset ) {\r\n\r\n            this.bind();\r\n            this.getValue( targetArray, offset );\r\n\r\n            // Note: This class uses a State pattern on a per-method basis:\r\n            // 'bind' sets 'this.getValue' / 'setValue' and shadows the\r\n            // prototype version of these methods with one that represents\r\n            // the bound state. When the property is not found, the methods\r\n            // become no-ops.\r\n\r\n        },\r\n\r\n        setValue: function getValue_unbound( sourceArray, offset ) {\r\n\r\n            this.bind();\r\n            this.setValue( sourceArray, offset );\r\n\r\n        },\r\n\r\n        // create getter / setter pair for a property in the scene graph\r\n        bind: function () {\r\n\r\n            var targetObject = this.node,\r\n                parsedPath = this.parsedPath,\r\n\r\n                objectName = parsedPath.objectName,\r\n                propertyName = parsedPath.propertyName,\r\n                propertyIndex = parsedPath.propertyIndex;\r\n\r\n            if ( ! targetObject ) {\r\n\r\n                targetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\r\n\r\n                this.node = targetObject;\r\n\r\n            }\r\n\r\n            // set fail state so we can just 'return' on error\r\n            this.getValue = this._getValue_unavailable;\r\n            this.setValue = this._setValue_unavailable;\r\n\r\n            // ensure there is a value node\r\n            if ( ! targetObject ) {\r\n\r\n                console.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\r\n                return;\r\n\r\n            }\r\n\r\n            if ( objectName ) {\r\n\r\n                var objectIndex = parsedPath.objectIndex;\r\n\r\n                // special cases were we need to reach deeper into the hierarchy to get the face materials....\r\n                switch ( objectName ) {\r\n\r\n                    case 'materials':\r\n\r\n                        if ( ! targetObject.material ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        if ( ! targetObject.material.materials ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        targetObject = targetObject.material.materials;\r\n\r\n                        break;\r\n\r\n                    case 'bones':\r\n\r\n                        if ( ! targetObject.skeleton ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        // potential future optimization: skip this if propertyIndex is already an integer\r\n                        // and convert the integer string to a true integer.\r\n\r\n                        targetObject = targetObject.skeleton.bones;\r\n\r\n                        // support resolving morphTarget names into indices.\r\n                        for ( var i = 0; i < targetObject.length; i ++ ) {\r\n\r\n                            if ( targetObject[ i ].name === objectIndex ) {\r\n\r\n                                objectIndex = i;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                        break;\r\n\r\n                    default:\r\n\r\n                        if ( targetObject[ objectName ] === undefined ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        targetObject = targetObject[ objectName ];\r\n\r\n                }\r\n\r\n\r\n                if ( objectIndex !== undefined ) {\r\n\r\n                    if ( targetObject[ objectIndex ] === undefined ) {\r\n\r\n                        console.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    targetObject = targetObject[ objectIndex ];\r\n\r\n                }\r\n\r\n            }\r\n\r\n            // resolve property\r\n            var nodeProperty = targetObject[ propertyName ];\r\n\r\n            if ( nodeProperty === undefined ) {\r\n\r\n                var nodeName = parsedPath.nodeName;\r\n\r\n                console.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\r\n                    '.' + propertyName + ' but it wasn\\'t found.', targetObject );\r\n                return;\r\n\r\n            }\r\n\r\n            // determine versioning scheme\r\n            var versioning = this.Versioning.None;\r\n\r\n            if ( targetObject.needsUpdate !== undefined ) { // material\r\n\r\n                versioning = this.Versioning.NeedsUpdate;\r\n                this.targetObject = targetObject;\r\n\r\n            } else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\r\n\r\n                versioning = this.Versioning.MatrixWorldNeedsUpdate;\r\n                this.targetObject = targetObject;\r\n\r\n            }\r\n\r\n            // determine how the property gets bound\r\n            var bindingType = this.BindingType.Direct;\r\n\r\n            if ( propertyIndex !== undefined ) {\r\n\r\n                // access a sub element of the property array (only primitives are supported right now)\r\n\r\n                if ( propertyName === \"morphTargetInfluences\" ) {\r\n\r\n                    // potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\r\n\r\n                    // support resolving morphTarget names into indices.\r\n                    if ( ! targetObject.geometry ) {\r\n\r\n                        console.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\r\n                        return;\r\n\r\n                    }\r\n\r\n                    if ( targetObject.geometry.isBufferGeometry ) {\r\n\r\n                        if ( ! targetObject.geometry.morphAttributes ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        for ( var i = 0; i < this.node.geometry.morphAttributes.position.length; i ++ ) {\r\n\r\n                            if ( targetObject.geometry.morphAttributes.position[ i ].name === propertyIndex ) {\r\n\r\n                                propertyIndex = i;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n\r\n                    } else {\r\n\r\n                        if ( ! targetObject.geometry.morphTargets ) {\r\n\r\n                            console.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this );\r\n                            return;\r\n\r\n                        }\r\n\r\n                        for ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\r\n\r\n                            if ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\r\n\r\n                                propertyIndex = i;\r\n                                break;\r\n\r\n                            }\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                bindingType = this.BindingType.ArrayElement;\r\n\r\n                this.resolvedProperty = nodeProperty;\r\n                this.propertyIndex = propertyIndex;\r\n\r\n            } else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\r\n\r\n                // must use copy for Object3D.Euler/Quaternion\r\n\r\n                bindingType = this.BindingType.HasFromToArray;\r\n\r\n                this.resolvedProperty = nodeProperty;\r\n\r\n            } else if ( Array.isArray( nodeProperty ) ) {\r\n\r\n                bindingType = this.BindingType.EntireArray;\r\n\r\n                this.resolvedProperty = nodeProperty;\r\n\r\n            } else {\r\n\r\n                this.propertyName = propertyName;\r\n\r\n            }\r\n\r\n            // select getter / setter\r\n            this.getValue = this.GetterByBindingType[ bindingType ];\r\n            this.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\r\n\r\n        },\r\n\r\n        unbind: function () {\r\n\r\n            this.node = null;\r\n\r\n            // back to the prototype version of getValue / setValue\r\n            // note: avoiding to mutate the shape of 'this' via 'delete'\r\n            this.getValue = this._getValue_unbound;\r\n            this.setValue = this._setValue_unbound;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //!\\ DECLARE ALIAS AFTER assign prototype !\r\n    Object.assign( PropertyBinding.prototype, {\r\n\r\n        // initial state of these methods that calls 'bind'\r\n        _getValue_unbound: PropertyBinding.prototype.getValue,\r\n        _setValue_unbound: PropertyBinding.prototype.setValue,\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * A group of objects that receives a shared animation state.\r\n     *\r\n     * Usage:\r\n     *\r\n     * \t-\tAdd objects you would otherwise pass as 'root' to the\r\n     * \t\tconstructor or the .clipAction method of AnimationMixer.\r\n     *\r\n     * \t-\tInstead pass this object as 'root'.\r\n     *\r\n     * \t-\tYou can also add and remove objects later when the mixer\r\n     * \t\tis running.\r\n     *\r\n     * Note:\r\n     *\r\n     *  \tObjects of this class appear as one object to the mixer,\r\n     *  \tso cache control of the individual objects must be done\r\n     *  \ton the group.\r\n     *\r\n     * Limitation:\r\n     *\r\n     * \t- \tThe animated properties must be compatible among the\r\n     * \t\tall objects in the group.\r\n     *\r\n     *  -\tA single property can either be controlled through a\r\n     *  \ttarget group or directly, but not both.\r\n     *\r\n     * @author tschw\r\n     */\r\n\r\n    function AnimationObjectGroup() {\r\n\r\n        this.uuid = _Math.generateUUID();\r\n\r\n        // cached objects followed by the active ones\r\n        this._objects = Array.prototype.slice.call( arguments );\r\n\r\n        this.nCachedObjects_ = 0;\t\t\t// threshold\r\n        // note: read by PropertyBinding.Composite\r\n\r\n        var indices = {};\r\n        this._indicesByUUID = indices;\t\t// for bookkeeping\r\n\r\n        for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n            indices[ arguments[ i ].uuid ] = i;\r\n\r\n        }\r\n\r\n        this._paths = [];\t\t\t\t\t// inside: string\r\n        this._parsedPaths = [];\t\t\t\t// inside: { we don't care, here }\r\n        this._bindings = []; \t\t\t\t// inside: Array< PropertyBinding >\r\n        this._bindingsIndicesByPath = {}; \t// inside: indices in these arrays\r\n\r\n        var scope = this;\r\n\r\n        this.stats = {\r\n\r\n            objects: {\r\n                get total() {\r\n\r\n                    return scope._objects.length;\r\n\r\n                },\r\n                get inUse() {\r\n\r\n                    return this.total - scope.nCachedObjects_;\r\n\r\n                }\r\n            },\r\n            get bindingsPerObject() {\r\n\r\n                return scope._bindings.length;\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }\r\n\r\n    Object.assign( AnimationObjectGroup.prototype, {\r\n\r\n        isAnimationObjectGroup: true,\r\n\r\n        add: function () {\r\n\r\n            var objects = this._objects,\r\n                nObjects = objects.length,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                indicesByUUID = this._indicesByUUID,\r\n                paths = this._paths,\r\n                parsedPaths = this._parsedPaths,\r\n                bindings = this._bindings,\r\n                nBindings = bindings.length,\r\n                knownObject = undefined;\r\n\r\n            for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n                var object = arguments[ i ],\r\n                    uuid = object.uuid,\r\n                    index = indicesByUUID[ uuid ];\r\n\r\n                if ( index === undefined ) {\r\n\r\n                    // unknown object -> add it to the ACTIVE region\r\n\r\n                    index = nObjects ++;\r\n                    indicesByUUID[ uuid ] = index;\r\n                    objects.push( object );\r\n\r\n                    // accounting is done, now do the same for all bindings\r\n\r\n                    for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                        bindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\r\n\r\n                    }\r\n\r\n                } else if ( index < nCachedObjects ) {\r\n\r\n                    knownObject = objects[ index ];\r\n\r\n                    // move existing object to the ACTIVE region\r\n\r\n                    var firstActiveIndex = -- nCachedObjects,\r\n                        lastCachedObject = objects[ firstActiveIndex ];\r\n\r\n                    indicesByUUID[ lastCachedObject.uuid ] = index;\r\n                    objects[ index ] = lastCachedObject;\r\n\r\n                    indicesByUUID[ uuid ] = firstActiveIndex;\r\n                    objects[ firstActiveIndex ] = object;\r\n\r\n                    // accounting is done, now do the same for all bindings\r\n\r\n                    for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                        var bindingsForPath = bindings[ j ],\r\n                            lastCached = bindingsForPath[ firstActiveIndex ],\r\n                            binding = bindingsForPath[ index ];\r\n\r\n                        bindingsForPath[ index ] = lastCached;\r\n\r\n                        if ( binding === undefined ) {\r\n\r\n                            // since we do not bother to create new bindings\r\n                            // for objects that are cached, the binding may\r\n                            // or may not exist\r\n\r\n                            binding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\r\n\r\n                        }\r\n\r\n                        bindingsForPath[ firstActiveIndex ] = binding;\r\n\r\n                    }\r\n\r\n                } else if ( objects[ index ] !== knownObject ) {\r\n\r\n                    console.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\r\n                        'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\r\n\r\n                } // else the object is already where we want it to be\r\n\r\n            } // for arguments\r\n\r\n            this.nCachedObjects_ = nCachedObjects;\r\n\r\n        },\r\n\r\n        remove: function () {\r\n\r\n            var objects = this._objects,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                indicesByUUID = this._indicesByUUID,\r\n                bindings = this._bindings,\r\n                nBindings = bindings.length;\r\n\r\n            for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n                var object = arguments[ i ],\r\n                    uuid = object.uuid,\r\n                    index = indicesByUUID[ uuid ];\r\n\r\n                if ( index !== undefined && index >= nCachedObjects ) {\r\n\r\n                    // move existing object into the CACHED region\r\n\r\n                    var lastCachedIndex = nCachedObjects ++,\r\n                        firstActiveObject = objects[ lastCachedIndex ];\r\n\r\n                    indicesByUUID[ firstActiveObject.uuid ] = index;\r\n                    objects[ index ] = firstActiveObject;\r\n\r\n                    indicesByUUID[ uuid ] = lastCachedIndex;\r\n                    objects[ lastCachedIndex ] = object;\r\n\r\n                    // accounting is done, now do the same for all bindings\r\n\r\n                    for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                        var bindingsForPath = bindings[ j ],\r\n                            firstActive = bindingsForPath[ lastCachedIndex ],\r\n                            binding = bindingsForPath[ index ];\r\n\r\n                        bindingsForPath[ index ] = firstActive;\r\n                        bindingsForPath[ lastCachedIndex ] = binding;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } // for arguments\r\n\r\n            this.nCachedObjects_ = nCachedObjects;\r\n\r\n        },\r\n\r\n        // remove & forget\r\n        uncache: function () {\r\n\r\n            var objects = this._objects,\r\n                nObjects = objects.length,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                indicesByUUID = this._indicesByUUID,\r\n                bindings = this._bindings,\r\n                nBindings = bindings.length;\r\n\r\n            for ( var i = 0, n = arguments.length; i !== n; ++ i ) {\r\n\r\n                var object = arguments[ i ],\r\n                    uuid = object.uuid,\r\n                    index = indicesByUUID[ uuid ];\r\n\r\n                if ( index !== undefined ) {\r\n\r\n                    delete indicesByUUID[ uuid ];\r\n\r\n                    if ( index < nCachedObjects ) {\r\n\r\n                        // object is cached, shrink the CACHED region\r\n\r\n                        var firstActiveIndex = -- nCachedObjects,\r\n                            lastCachedObject = objects[ firstActiveIndex ],\r\n                            lastIndex = -- nObjects,\r\n                            lastObject = objects[ lastIndex ];\r\n\r\n                        // last cached object takes this object's place\r\n                        indicesByUUID[ lastCachedObject.uuid ] = index;\r\n                        objects[ index ] = lastCachedObject;\r\n\r\n                        // last object goes to the activated slot and pop\r\n                        indicesByUUID[ lastObject.uuid ] = firstActiveIndex;\r\n                        objects[ firstActiveIndex ] = lastObject;\r\n                        objects.pop();\r\n\r\n                        // accounting is done, now do the same for all bindings\r\n\r\n                        for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                            var bindingsForPath = bindings[ j ],\r\n                                lastCached = bindingsForPath[ firstActiveIndex ],\r\n                                last = bindingsForPath[ lastIndex ];\r\n\r\n                            bindingsForPath[ index ] = lastCached;\r\n                            bindingsForPath[ firstActiveIndex ] = last;\r\n                            bindingsForPath.pop();\r\n\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        // object is active, just swap with the last and pop\r\n\r\n                        var lastIndex = -- nObjects,\r\n                            lastObject = objects[ lastIndex ];\r\n\r\n                        indicesByUUID[ lastObject.uuid ] = index;\r\n                        objects[ index ] = lastObject;\r\n                        objects.pop();\r\n\r\n                        // accounting is done, now do the same for all bindings\r\n\r\n                        for ( var j = 0, m = nBindings; j !== m; ++ j ) {\r\n\r\n                            var bindingsForPath = bindings[ j ];\r\n\r\n                            bindingsForPath[ index ] = bindingsForPath[ lastIndex ];\r\n                            bindingsForPath.pop();\r\n\r\n                        }\r\n\r\n                    } // cached or active\r\n\r\n                } // if object is known\r\n\r\n            } // for arguments\r\n\r\n            this.nCachedObjects_ = nCachedObjects;\r\n\r\n        },\r\n\r\n        // Internal interface used by befriended PropertyBinding.Composite:\r\n\r\n        subscribe_: function ( path, parsedPath ) {\r\n\r\n            // returns an array of bindings for the given path that is changed\r\n            // according to the contained objects in the group\r\n\r\n            var indicesByPath = this._bindingsIndicesByPath,\r\n                index = indicesByPath[ path ],\r\n                bindings = this._bindings;\r\n\r\n            if ( index !== undefined ) return bindings[ index ];\r\n\r\n            var paths = this._paths,\r\n                parsedPaths = this._parsedPaths,\r\n                objects = this._objects,\r\n                nObjects = objects.length,\r\n                nCachedObjects = this.nCachedObjects_,\r\n                bindingsForPath = new Array( nObjects );\r\n\r\n            index = bindings.length;\r\n\r\n            indicesByPath[ path ] = index;\r\n\r\n            paths.push( path );\r\n            parsedPaths.push( parsedPath );\r\n            bindings.push( bindingsForPath );\r\n\r\n            for ( var i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\r\n\r\n                var object = objects[ i ];\r\n                bindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\r\n\r\n            }\r\n\r\n            return bindingsForPath;\r\n\r\n        },\r\n\r\n        unsubscribe_: function ( path ) {\r\n\r\n            // tells the group to forget about a property path and no longer\r\n            // update the array previously obtained with 'subscribe_'\r\n\r\n            var indicesByPath = this._bindingsIndicesByPath,\r\n                index = indicesByPath[ path ];\r\n\r\n            if ( index !== undefined ) {\r\n\r\n                var paths = this._paths,\r\n                    parsedPaths = this._parsedPaths,\r\n                    bindings = this._bindings,\r\n                    lastBindingsIndex = bindings.length - 1,\r\n                    lastBindings = bindings[ lastBindingsIndex ],\r\n                    lastBindingsPath = path[ lastBindingsIndex ];\r\n\r\n                indicesByPath[ lastBindingsPath ] = index;\r\n\r\n                bindings[ index ] = lastBindings;\r\n                bindings.pop();\r\n\r\n                parsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\r\n                parsedPaths.pop();\r\n\r\n                paths[ index ] = paths[ lastBindingsIndex ];\r\n                paths.pop();\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Action provided by AnimationMixer for scheduling clip playback on specific\r\n     * objects.\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     *\r\n     */\r\n\r\n    function AnimationAction( mixer, clip, localRoot ) {\r\n\r\n        this._mixer = mixer;\r\n        this._clip = clip;\r\n        this._localRoot = localRoot || null;\r\n\r\n        var tracks = clip.tracks,\r\n            nTracks = tracks.length,\r\n            interpolants = new Array( nTracks );\r\n\r\n        var interpolantSettings = {\r\n            endingStart: ZeroCurvatureEnding,\r\n            endingEnd: ZeroCurvatureEnding\r\n        };\r\n\r\n        for ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n            var interpolant = tracks[ i ].createInterpolant( null );\r\n            interpolants[ i ] = interpolant;\r\n            interpolant.settings = interpolantSettings;\r\n\r\n        }\r\n\r\n        this._interpolantSettings = interpolantSettings;\r\n\r\n        this._interpolants = interpolants;\t// bound by the mixer\r\n\r\n        // inside: PropertyMixer (managed by the mixer)\r\n        this._propertyBindings = new Array( nTracks );\r\n\r\n        this._cacheIndex = null;\t\t\t// for the memory manager\r\n        this._byClipCacheIndex = null;\t\t// for the memory manager\r\n\r\n        this._timeScaleInterpolant = null;\r\n        this._weightInterpolant = null;\r\n\r\n        this.loop = LoopRepeat;\r\n        this._loopCount = - 1;\r\n\r\n        // global mixer time when the action is to be started\r\n        // it's set back to 'null' upon start of the action\r\n        this._startTime = null;\r\n\r\n        // scaled local time of the action\r\n        // gets clamped or wrapped to 0..clip.duration according to loop\r\n        this.time = 0;\r\n\r\n        this.timeScale = 1;\r\n        this._effectiveTimeScale = 1;\r\n\r\n        this.weight = 1;\r\n        this._effectiveWeight = 1;\r\n\r\n        this.repetitions = Infinity; \t\t// no. of repetitions when looping\r\n\r\n        this.paused = false;\t\t\t\t// true -> zero effective time scale\r\n        this.enabled = true;\t\t\t\t// false -> zero effective weight\r\n\r\n        this.clampWhenFinished \t= false;\t// keep feeding the last frame?\r\n\r\n        this.zeroSlopeAtStart \t= true;\t\t// for smooth interpolation w/o separate\r\n        this.zeroSlopeAtEnd\t\t= true;\t\t// clips for start, loop and end\r\n\r\n    }\r\n\r\n    Object.assign( AnimationAction.prototype, {\r\n\r\n        // State & Scheduling\r\n\r\n        play: function () {\r\n\r\n            this._mixer._activateAction( this );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        stop: function () {\r\n\r\n            this._mixer._deactivateAction( this );\r\n\r\n            return this.reset();\r\n\r\n        },\r\n\r\n        reset: function () {\r\n\r\n            this.paused = false;\r\n            this.enabled = true;\r\n\r\n            this.time = 0;\t\t\t// restart clip\r\n            this._loopCount = - 1;\t// forget previous loops\r\n            this._startTime = null;\t// forget scheduling\r\n\r\n            return this.stopFading().stopWarping();\r\n\r\n        },\r\n\r\n        isRunning: function () {\r\n\r\n            return this.enabled && ! this.paused && this.timeScale !== 0 &&\r\n                this._startTime === null && this._mixer._isActiveAction( this );\r\n\r\n        },\r\n\r\n        // return true when play has been called\r\n        isScheduled: function () {\r\n\r\n            return this._mixer._isActiveAction( this );\r\n\r\n        },\r\n\r\n        startAt: function ( time ) {\r\n\r\n            this._startTime = time;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setLoop: function ( mode, repetitions ) {\r\n\r\n            this.loop = mode;\r\n            this.repetitions = repetitions;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // Weight\r\n\r\n        // set the weight stopping any scheduled fading\r\n        // although .enabled = false yields an effective weight of zero, this\r\n        // method does *not* change .enabled, because it would be confusing\r\n        setEffectiveWeight: function ( weight ) {\r\n\r\n            this.weight = weight;\r\n\r\n            // note: same logic as when updated at runtime\r\n            this._effectiveWeight = this.enabled ? weight : 0;\r\n\r\n            return this.stopFading();\r\n\r\n        },\r\n\r\n        // return the weight considering fading and .enabled\r\n        getEffectiveWeight: function () {\r\n\r\n            return this._effectiveWeight;\r\n\r\n        },\r\n\r\n        fadeIn: function ( duration ) {\r\n\r\n            return this._scheduleFading( duration, 0, 1 );\r\n\r\n        },\r\n\r\n        fadeOut: function ( duration ) {\r\n\r\n            return this._scheduleFading( duration, 1, 0 );\r\n\r\n        },\r\n\r\n        crossFadeFrom: function ( fadeOutAction, duration, warp ) {\r\n\r\n            fadeOutAction.fadeOut( duration );\r\n            this.fadeIn( duration );\r\n\r\n            if ( warp ) {\r\n\r\n                var fadeInDuration = this._clip.duration,\r\n                    fadeOutDuration = fadeOutAction._clip.duration,\r\n\r\n                    startEndRatio = fadeOutDuration / fadeInDuration,\r\n                    endStartRatio = fadeInDuration / fadeOutDuration;\r\n\r\n                fadeOutAction.warp( 1.0, startEndRatio, duration );\r\n                this.warp( endStartRatio, 1.0, duration );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        crossFadeTo: function ( fadeInAction, duration, warp ) {\r\n\r\n            return fadeInAction.crossFadeFrom( this, duration, warp );\r\n\r\n        },\r\n\r\n        stopFading: function () {\r\n\r\n            var weightInterpolant = this._weightInterpolant;\r\n\r\n            if ( weightInterpolant !== null ) {\r\n\r\n                this._weightInterpolant = null;\r\n                this._mixer._takeBackControlInterpolant( weightInterpolant );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // Time Scale Control\r\n\r\n        // set the time scale stopping any scheduled warping\r\n        // although .paused = true yields an effective time scale of zero, this\r\n        // method does *not* change .paused, because it would be confusing\r\n        setEffectiveTimeScale: function ( timeScale ) {\r\n\r\n            this.timeScale = timeScale;\r\n            this._effectiveTimeScale = this.paused ? 0 : timeScale;\r\n\r\n            return this.stopWarping();\r\n\r\n        },\r\n\r\n        // return the time scale considering warping and .paused\r\n        getEffectiveTimeScale: function () {\r\n\r\n            return this._effectiveTimeScale;\r\n\r\n        },\r\n\r\n        setDuration: function ( duration ) {\r\n\r\n            this.timeScale = this._clip.duration / duration;\r\n\r\n            return this.stopWarping();\r\n\r\n        },\r\n\r\n        syncWith: function ( action ) {\r\n\r\n            this.time = action.time;\r\n            this.timeScale = action.timeScale;\r\n\r\n            return this.stopWarping();\r\n\r\n        },\r\n\r\n        halt: function ( duration ) {\r\n\r\n            return this.warp( this._effectiveTimeScale, 0, duration );\r\n\r\n        },\r\n\r\n        warp: function ( startTimeScale, endTimeScale, duration ) {\r\n\r\n            var mixer = this._mixer, now = mixer.time,\r\n                interpolant = this._timeScaleInterpolant,\r\n\r\n                timeScale = this.timeScale;\r\n\r\n            if ( interpolant === null ) {\r\n\r\n                interpolant = mixer._lendControlInterpolant();\r\n                this._timeScaleInterpolant = interpolant;\r\n\r\n            }\r\n\r\n            var times = interpolant.parameterPositions,\r\n                values = interpolant.sampleValues;\r\n\r\n            times[ 0 ] = now;\r\n            times[ 1 ] = now + duration;\r\n\r\n            values[ 0 ] = startTimeScale / timeScale;\r\n            values[ 1 ] = endTimeScale / timeScale;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        stopWarping: function () {\r\n\r\n            var timeScaleInterpolant = this._timeScaleInterpolant;\r\n\r\n            if ( timeScaleInterpolant !== null ) {\r\n\r\n                this._timeScaleInterpolant = null;\r\n                this._mixer._takeBackControlInterpolant( timeScaleInterpolant );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // Object Accessors\r\n\r\n        getMixer: function () {\r\n\r\n            return this._mixer;\r\n\r\n        },\r\n\r\n        getClip: function () {\r\n\r\n            return this._clip;\r\n\r\n        },\r\n\r\n        getRoot: function () {\r\n\r\n            return this._localRoot || this._mixer._root;\r\n\r\n        },\r\n\r\n        // Interna\r\n\r\n        _update: function ( time, deltaTime, timeDirection, accuIndex ) {\r\n\r\n            // called by the mixer\r\n\r\n            if ( ! this.enabled ) {\r\n\r\n                // call ._updateWeight() to update ._effectiveWeight\r\n\r\n                this._updateWeight( time );\r\n                return;\r\n\r\n            }\r\n\r\n            var startTime = this._startTime;\r\n\r\n            if ( startTime !== null ) {\r\n\r\n                // check for scheduled start of action\r\n\r\n                var timeRunning = ( time - startTime ) * timeDirection;\r\n                if ( timeRunning < 0 || timeDirection === 0 ) {\r\n\r\n                    return; // yet to come / don't decide when delta = 0\r\n\r\n                }\r\n\r\n                // start\r\n\r\n                this._startTime = null; // unschedule\r\n                deltaTime = timeDirection * timeRunning;\r\n\r\n            }\r\n\r\n            // apply time scale and advance time\r\n\r\n            deltaTime *= this._updateTimeScale( time );\r\n            var clipTime = this._updateTime( deltaTime );\r\n\r\n            // note: _updateTime may disable the action resulting in\r\n            // an effective weight of 0\r\n\r\n            var weight = this._updateWeight( time );\r\n\r\n            if ( weight > 0 ) {\r\n\r\n                var interpolants = this._interpolants;\r\n                var propertyMixers = this._propertyBindings;\r\n\r\n                for ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\r\n\r\n                    interpolants[ j ].evaluate( clipTime );\r\n                    propertyMixers[ j ].accumulate( accuIndex, weight );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _updateWeight: function ( time ) {\r\n\r\n            var weight = 0;\r\n\r\n            if ( this.enabled ) {\r\n\r\n                weight = this.weight;\r\n                var interpolant = this._weightInterpolant;\r\n\r\n                if ( interpolant !== null ) {\r\n\r\n                    var interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n                    weight *= interpolantValue;\r\n\r\n                    if ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n                        this.stopFading();\r\n\r\n                        if ( interpolantValue === 0 ) {\r\n\r\n                            // faded out, disable\r\n                            this.enabled = false;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this._effectiveWeight = weight;\r\n            return weight;\r\n\r\n        },\r\n\r\n        _updateTimeScale: function ( time ) {\r\n\r\n            var timeScale = 0;\r\n\r\n            if ( ! this.paused ) {\r\n\r\n                timeScale = this.timeScale;\r\n\r\n                var interpolant = this._timeScaleInterpolant;\r\n\r\n                if ( interpolant !== null ) {\r\n\r\n                    var interpolantValue = interpolant.evaluate( time )[ 0 ];\r\n\r\n                    timeScale *= interpolantValue;\r\n\r\n                    if ( time > interpolant.parameterPositions[ 1 ] ) {\r\n\r\n                        this.stopWarping();\r\n\r\n                        if ( timeScale === 0 ) {\r\n\r\n                            // motion has halted, pause\r\n                            this.paused = true;\r\n\r\n                        } else {\r\n\r\n                            // warp done - apply final time scale\r\n                            this.timeScale = timeScale;\r\n\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this._effectiveTimeScale = timeScale;\r\n            return timeScale;\r\n\r\n        },\r\n\r\n        _updateTime: function ( deltaTime ) {\r\n\r\n            var time = this.time + deltaTime;\r\n\r\n            if ( deltaTime === 0 ) return time;\r\n\r\n            var duration = this._clip.duration,\r\n\r\n                loop = this.loop,\r\n                loopCount = this._loopCount;\r\n\r\n            if ( loop === LoopOnce ) {\r\n\r\n                if ( loopCount === - 1 ) {\r\n\r\n                    // just started\r\n\r\n                    this._loopCount = 0;\r\n                    this._setEndings( true, true, false );\r\n\r\n                }\r\n\r\n                handle_stop: {\r\n\r\n                    if ( time >= duration ) {\r\n\r\n                        time = duration;\r\n\r\n                    } else if ( time < 0 ) {\r\n\r\n                        time = 0;\r\n\r\n                    } else break handle_stop;\r\n\r\n                    if ( this.clampWhenFinished ) this.paused = true;\r\n                    else this.enabled = false;\r\n\r\n                    this._mixer.dispatchEvent( {\r\n                        type: 'finished', action: this,\r\n                        direction: deltaTime < 0 ? - 1 : 1\r\n                    } );\r\n\r\n                }\r\n\r\n            } else { // repetitive Repeat or PingPong\r\n\r\n                var pingPong = ( loop === LoopPingPong );\r\n\r\n                if ( loopCount === - 1 ) {\r\n\r\n                    // just started\r\n\r\n                    if ( deltaTime >= 0 ) {\r\n\r\n                        loopCount = 0;\r\n\r\n                        this._setEndings( true, this.repetitions === 0, pingPong );\r\n\r\n                    } else {\r\n\r\n                        // when looping in reverse direction, the initial\r\n                        // transition through zero counts as a repetition,\r\n                        // so leave loopCount at -1\r\n\r\n                        this._setEndings( this.repetitions === 0, true, pingPong );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( time >= duration || time < 0 ) {\r\n\r\n                    // wrap around\r\n\r\n                    var loopDelta = Math.floor( time / duration ); // signed\r\n                    time -= duration * loopDelta;\r\n\r\n                    loopCount += Math.abs( loopDelta );\r\n\r\n                    var pending = this.repetitions - loopCount;\r\n\r\n                    if ( pending <= 0 ) {\r\n\r\n                        // have to stop (switch state, clamp time, fire event)\r\n\r\n                        if ( this.clampWhenFinished ) this.paused = true;\r\n                        else this.enabled = false;\r\n\r\n                        time = deltaTime > 0 ? duration : 0;\r\n\r\n                        this._mixer.dispatchEvent( {\r\n                            type: 'finished', action: this,\r\n                            direction: deltaTime > 0 ? 1 : - 1\r\n                        } );\r\n\r\n                    } else {\r\n\r\n                        // keep running\r\n\r\n                        if ( pending === 1 ) {\r\n\r\n                            // entering the last round\r\n\r\n                            var atStart = deltaTime < 0;\r\n                            this._setEndings( atStart, ! atStart, pingPong );\r\n\r\n                        } else {\r\n\r\n                            this._setEndings( false, false, pingPong );\r\n\r\n                        }\r\n\r\n                        this._loopCount = loopCount;\r\n\r\n                        this._mixer.dispatchEvent( {\r\n                            type: 'loop', action: this, loopDelta: loopDelta\r\n                        } );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                if ( pingPong && ( loopCount & 1 ) === 1 ) {\r\n\r\n                    // invert time for the \"pong round\"\r\n\r\n                    this.time = time;\r\n                    return duration - time;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            this.time = time;\r\n            return time;\r\n\r\n        },\r\n\r\n        _setEndings: function ( atStart, atEnd, pingPong ) {\r\n\r\n            var settings = this._interpolantSettings;\r\n\r\n            if ( pingPong ) {\r\n\r\n                settings.endingStart \t= ZeroSlopeEnding;\r\n                settings.endingEnd\t\t= ZeroSlopeEnding;\r\n\r\n            } else {\r\n\r\n                // assuming for LoopOnce atStart == atEnd == true\r\n\r\n                if ( atStart ) {\r\n\r\n                    settings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n                } else {\r\n\r\n                    settings.endingStart = WrapAroundEnding;\r\n\r\n                }\r\n\r\n                if ( atEnd ) {\r\n\r\n                    settings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\r\n\r\n                } else {\r\n\r\n                    settings.endingEnd \t = WrapAroundEnding;\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _scheduleFading: function ( duration, weightNow, weightThen ) {\r\n\r\n            var mixer = this._mixer, now = mixer.time,\r\n                interpolant = this._weightInterpolant;\r\n\r\n            if ( interpolant === null ) {\r\n\r\n                interpolant = mixer._lendControlInterpolant();\r\n                this._weightInterpolant = interpolant;\r\n\r\n            }\r\n\r\n            var times = interpolant.parameterPositions,\r\n                values = interpolant.sampleValues;\r\n\r\n            times[ 0 ] = now; \t\t\t\tvalues[ 0 ] = weightNow;\r\n            times[ 1 ] = now + duration;\tvalues[ 1 ] = weightThen;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     *\r\n     * Player for AnimationClips.\r\n     *\r\n     *\r\n     * @author Ben Houston / http://clara.io/\r\n     * @author David Sarno / http://lighthaus.us/\r\n     * @author tschw\r\n     */\r\n\r\n    function AnimationMixer( root ) {\r\n\r\n        this._root = root;\r\n        this._initMemoryManager();\r\n        this._accuIndex = 0;\r\n\r\n        this.time = 0;\r\n\r\n        this.timeScale = 1.0;\r\n\r\n    }\r\n\r\n    AnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\r\n\r\n        constructor: AnimationMixer,\r\n\r\n        _bindAction: function ( action, prototypeAction ) {\r\n\r\n            var root = action._localRoot || this._root,\r\n                tracks = action._clip.tracks,\r\n                nTracks = tracks.length,\r\n                bindings = action._propertyBindings,\r\n                interpolants = action._interpolants,\r\n                rootUuid = root.uuid,\r\n                bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingsByName = bindingsByRoot[ rootUuid ];\r\n\r\n            if ( bindingsByName === undefined ) {\r\n\r\n                bindingsByName = {};\r\n                bindingsByRoot[ rootUuid ] = bindingsByName;\r\n\r\n            }\r\n\r\n            for ( var i = 0; i !== nTracks; ++ i ) {\r\n\r\n                var track = tracks[ i ],\r\n                    trackName = track.name,\r\n                    binding = bindingsByName[ trackName ];\r\n\r\n                if ( binding !== undefined ) {\r\n\r\n                    bindings[ i ] = binding;\r\n\r\n                } else {\r\n\r\n                    binding = bindings[ i ];\r\n\r\n                    if ( binding !== undefined ) {\r\n\r\n                        // existing binding, make sure the cache knows\r\n\r\n                        if ( binding._cacheIndex === null ) {\r\n\r\n                            ++ binding.referenceCount;\r\n                            this._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n                        }\r\n\r\n                        continue;\r\n\r\n                    }\r\n\r\n                    var path = prototypeAction && prototypeAction.\r\n                        _propertyBindings[ i ].binding.parsedPath;\r\n\r\n                    binding = new PropertyMixer(\r\n                        PropertyBinding.create( root, trackName, path ),\r\n                        track.ValueTypeName, track.getValueSize() );\r\n\r\n                    ++ binding.referenceCount;\r\n                    this._addInactiveBinding( binding, rootUuid, trackName );\r\n\r\n                    bindings[ i ] = binding;\r\n\r\n                }\r\n\r\n                interpolants[ i ].resultBuffer = binding.buffer;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _activateAction: function ( action ) {\r\n\r\n            if ( ! this._isActiveAction( action ) ) {\r\n\r\n                if ( action._cacheIndex === null ) {\r\n\r\n                    // this action has been forgotten by the cache, but the user\r\n                    // appears to be still using it -> rebind\r\n\r\n                    var rootUuid = ( action._localRoot || this._root ).uuid,\r\n                        clipUuid = action._clip.uuid,\r\n                        actionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n                    this._bindAction( action,\r\n                        actionsForClip && actionsForClip.knownActions[ 0 ] );\r\n\r\n                    this._addInactiveAction( action, clipUuid, rootUuid );\r\n\r\n                }\r\n\r\n                var bindings = action._propertyBindings;\r\n\r\n                // increment reference counts / sort out state\r\n                for ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n                    var binding = bindings[ i ];\r\n\r\n                    if ( binding.useCount ++ === 0 ) {\r\n\r\n                        this._lendBinding( binding );\r\n                        binding.saveOriginalState();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this._lendAction( action );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _deactivateAction: function ( action ) {\r\n\r\n            if ( this._isActiveAction( action ) ) {\r\n\r\n                var bindings = action._propertyBindings;\r\n\r\n                // decrement reference counts / sort out state\r\n                for ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n                    var binding = bindings[ i ];\r\n\r\n                    if ( -- binding.useCount === 0 ) {\r\n\r\n                        binding.restoreOriginalState();\r\n                        this._takeBackBinding( binding );\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                this._takeBackAction( action );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // Memory manager\r\n\r\n        _initMemoryManager: function () {\r\n\r\n            this._actions = []; // 'nActiveActions' followed by inactive ones\r\n            this._nActiveActions = 0;\r\n\r\n            this._actionsByClip = {};\r\n            // inside:\r\n            // {\r\n            // \t\tknownActions: Array< AnimationAction >\t- used as prototypes\r\n            // \t\tactionByRoot: AnimationAction\t\t\t- lookup\r\n            // }\r\n\r\n\r\n            this._bindings = []; // 'nActiveBindings' followed by inactive ones\r\n            this._nActiveBindings = 0;\r\n\r\n            this._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\r\n\r\n\r\n            this._controlInterpolants = []; // same game as above\r\n            this._nActiveControlInterpolants = 0;\r\n\r\n            var scope = this;\r\n\r\n            this.stats = {\r\n\r\n                actions: {\r\n                    get total() {\r\n\r\n                        return scope._actions.length;\r\n\r\n                    },\r\n                    get inUse() {\r\n\r\n                        return scope._nActiveActions;\r\n\r\n                    }\r\n                },\r\n                bindings: {\r\n                    get total() {\r\n\r\n                        return scope._bindings.length;\r\n\r\n                    },\r\n                    get inUse() {\r\n\r\n                        return scope._nActiveBindings;\r\n\r\n                    }\r\n                },\r\n                controlInterpolants: {\r\n                    get total() {\r\n\r\n                        return scope._controlInterpolants.length;\r\n\r\n                    },\r\n                    get inUse() {\r\n\r\n                        return scope._nActiveControlInterpolants;\r\n\r\n                    }\r\n                }\r\n\r\n            };\r\n\r\n        },\r\n\r\n        // Memory management for AnimationAction objects\r\n\r\n        _isActiveAction: function ( action ) {\r\n\r\n            var index = action._cacheIndex;\r\n            return index !== null && index < this._nActiveActions;\r\n\r\n        },\r\n\r\n        _addInactiveAction: function ( action, clipUuid, rootUuid ) {\r\n\r\n            var actions = this._actions,\r\n                actionsByClip = this._actionsByClip,\r\n                actionsForClip = actionsByClip[ clipUuid ];\r\n\r\n            if ( actionsForClip === undefined ) {\r\n\r\n                actionsForClip = {\r\n\r\n                    knownActions: [ action ],\r\n                    actionByRoot: {}\r\n\r\n                };\r\n\r\n                action._byClipCacheIndex = 0;\r\n\r\n                actionsByClip[ clipUuid ] = actionsForClip;\r\n\r\n            } else {\r\n\r\n                var knownActions = actionsForClip.knownActions;\r\n\r\n                action._byClipCacheIndex = knownActions.length;\r\n                knownActions.push( action );\r\n\r\n            }\r\n\r\n            action._cacheIndex = actions.length;\r\n            actions.push( action );\r\n\r\n            actionsForClip.actionByRoot[ rootUuid ] = action;\r\n\r\n        },\r\n\r\n        _removeInactiveAction: function ( action ) {\r\n\r\n            var actions = this._actions,\r\n                lastInactiveAction = actions[ actions.length - 1 ],\r\n                cacheIndex = action._cacheIndex;\r\n\r\n            lastInactiveAction._cacheIndex = cacheIndex;\r\n            actions[ cacheIndex ] = lastInactiveAction;\r\n            actions.pop();\r\n\r\n            action._cacheIndex = null;\r\n\r\n\r\n            var clipUuid = action._clip.uuid,\r\n                actionsByClip = this._actionsByClip,\r\n                actionsForClip = actionsByClip[ clipUuid ],\r\n                knownActionsForClip = actionsForClip.knownActions,\r\n\r\n                lastKnownAction =\r\n                    knownActionsForClip[ knownActionsForClip.length - 1 ],\r\n\r\n                byClipCacheIndex = action._byClipCacheIndex;\r\n\r\n            lastKnownAction._byClipCacheIndex = byClipCacheIndex;\r\n            knownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\r\n            knownActionsForClip.pop();\r\n\r\n            action._byClipCacheIndex = null;\r\n\r\n\r\n            var actionByRoot = actionsForClip.actionByRoot,\r\n                rootUuid = ( action._localRoot || this._root ).uuid;\r\n\r\n            delete actionByRoot[ rootUuid ];\r\n\r\n            if ( knownActionsForClip.length === 0 ) {\r\n\r\n                delete actionsByClip[ clipUuid ];\r\n\r\n            }\r\n\r\n            this._removeInactiveBindingsForAction( action );\r\n\r\n        },\r\n\r\n        _removeInactiveBindingsForAction: function ( action ) {\r\n\r\n            var bindings = action._propertyBindings;\r\n            for ( var i = 0, n = bindings.length; i !== n; ++ i ) {\r\n\r\n                var binding = bindings[ i ];\r\n\r\n                if ( -- binding.referenceCount === 0 ) {\r\n\r\n                    this._removeInactiveBinding( binding );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _lendAction: function ( action ) {\r\n\r\n            // [ active actions |  inactive actions  ]\r\n            // [  active actions >| inactive actions ]\r\n            //                 s        a\r\n            //                  <-swap->\r\n            //                 a        s\r\n\r\n            var actions = this._actions,\r\n                prevIndex = action._cacheIndex,\r\n\r\n                lastActiveIndex = this._nActiveActions ++,\r\n\r\n                firstInactiveAction = actions[ lastActiveIndex ];\r\n\r\n            action._cacheIndex = lastActiveIndex;\r\n            actions[ lastActiveIndex ] = action;\r\n\r\n            firstInactiveAction._cacheIndex = prevIndex;\r\n            actions[ prevIndex ] = firstInactiveAction;\r\n\r\n        },\r\n\r\n        _takeBackAction: function ( action ) {\r\n\r\n            // [  active actions  | inactive actions ]\r\n            // [ active actions |< inactive actions  ]\r\n            //        a        s\r\n            //         <-swap->\r\n            //        s        a\r\n\r\n            var actions = this._actions,\r\n                prevIndex = action._cacheIndex,\r\n\r\n                firstInactiveIndex = -- this._nActiveActions,\r\n\r\n                lastActiveAction = actions[ firstInactiveIndex ];\r\n\r\n            action._cacheIndex = firstInactiveIndex;\r\n            actions[ firstInactiveIndex ] = action;\r\n\r\n            lastActiveAction._cacheIndex = prevIndex;\r\n            actions[ prevIndex ] = lastActiveAction;\r\n\r\n        },\r\n\r\n        // Memory management for PropertyMixer objects\r\n\r\n        _addInactiveBinding: function ( binding, rootUuid, trackName ) {\r\n\r\n            var bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n                bindings = this._bindings;\r\n\r\n            if ( bindingByName === undefined ) {\r\n\r\n                bindingByName = {};\r\n                bindingsByRoot[ rootUuid ] = bindingByName;\r\n\r\n            }\r\n\r\n            bindingByName[ trackName ] = binding;\r\n\r\n            binding._cacheIndex = bindings.length;\r\n            bindings.push( binding );\r\n\r\n        },\r\n\r\n        _removeInactiveBinding: function ( binding ) {\r\n\r\n            var bindings = this._bindings,\r\n                propBinding = binding.binding,\r\n                rootUuid = propBinding.rootNode.uuid,\r\n                trackName = propBinding.path,\r\n                bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingByName = bindingsByRoot[ rootUuid ],\r\n\r\n                lastInactiveBinding = bindings[ bindings.length - 1 ],\r\n                cacheIndex = binding._cacheIndex;\r\n\r\n            lastInactiveBinding._cacheIndex = cacheIndex;\r\n            bindings[ cacheIndex ] = lastInactiveBinding;\r\n            bindings.pop();\r\n\r\n            delete bindingByName[ trackName ];\r\n\r\n            remove_empty_map: {\r\n\r\n                for ( var _ in bindingByName ) break remove_empty_map; // eslint-disable-line no-unused-vars\r\n\r\n                delete bindingsByRoot[ rootUuid ];\r\n\r\n            }\r\n\r\n        },\r\n\r\n        _lendBinding: function ( binding ) {\r\n\r\n            var bindings = this._bindings,\r\n                prevIndex = binding._cacheIndex,\r\n\r\n                lastActiveIndex = this._nActiveBindings ++,\r\n\r\n                firstInactiveBinding = bindings[ lastActiveIndex ];\r\n\r\n            binding._cacheIndex = lastActiveIndex;\r\n            bindings[ lastActiveIndex ] = binding;\r\n\r\n            firstInactiveBinding._cacheIndex = prevIndex;\r\n            bindings[ prevIndex ] = firstInactiveBinding;\r\n\r\n        },\r\n\r\n        _takeBackBinding: function ( binding ) {\r\n\r\n            var bindings = this._bindings,\r\n                prevIndex = binding._cacheIndex,\r\n\r\n                firstInactiveIndex = -- this._nActiveBindings,\r\n\r\n                lastActiveBinding = bindings[ firstInactiveIndex ];\r\n\r\n            binding._cacheIndex = firstInactiveIndex;\r\n            bindings[ firstInactiveIndex ] = binding;\r\n\r\n            lastActiveBinding._cacheIndex = prevIndex;\r\n            bindings[ prevIndex ] = lastActiveBinding;\r\n\r\n        },\r\n\r\n\r\n        // Memory management of Interpolants for weight and time scale\r\n\r\n        _lendControlInterpolant: function () {\r\n\r\n            var interpolants = this._controlInterpolants,\r\n                lastActiveIndex = this._nActiveControlInterpolants ++,\r\n                interpolant = interpolants[ lastActiveIndex ];\r\n\r\n            if ( interpolant === undefined ) {\r\n\r\n                interpolant = new LinearInterpolant(\r\n                    new Float32Array( 2 ), new Float32Array( 2 ),\r\n                    1, this._controlInterpolantsResultBuffer );\r\n\r\n                interpolant.__cacheIndex = lastActiveIndex;\r\n                interpolants[ lastActiveIndex ] = interpolant;\r\n\r\n            }\r\n\r\n            return interpolant;\r\n\r\n        },\r\n\r\n        _takeBackControlInterpolant: function ( interpolant ) {\r\n\r\n            var interpolants = this._controlInterpolants,\r\n                prevIndex = interpolant.__cacheIndex,\r\n\r\n                firstInactiveIndex = -- this._nActiveControlInterpolants,\r\n\r\n                lastActiveInterpolant = interpolants[ firstInactiveIndex ];\r\n\r\n            interpolant.__cacheIndex = firstInactiveIndex;\r\n            interpolants[ firstInactiveIndex ] = interpolant;\r\n\r\n            lastActiveInterpolant.__cacheIndex = prevIndex;\r\n            interpolants[ prevIndex ] = lastActiveInterpolant;\r\n\r\n        },\r\n\r\n        _controlInterpolantsResultBuffer: new Float32Array( 1 ),\r\n\r\n        // return an action for a clip optionally using a custom root target\r\n        // object (this method allocates a lot of dynamic memory in case a\r\n        // previously unknown clip/root combination is specified)\r\n        clipAction: function ( clip, optionalRoot ) {\r\n\r\n            var root = optionalRoot || this._root,\r\n                rootUuid = root.uuid,\r\n\r\n                clipObject = typeof clip === 'string' ?\r\n                    AnimationClip.findByName( root, clip ) : clip,\r\n\r\n                clipUuid = clipObject !== null ? clipObject.uuid : clip,\r\n\r\n                actionsForClip = this._actionsByClip[ clipUuid ],\r\n                prototypeAction = null;\r\n\r\n            if ( actionsForClip !== undefined ) {\r\n\r\n                var existingAction =\r\n                    actionsForClip.actionByRoot[ rootUuid ];\r\n\r\n                if ( existingAction !== undefined ) {\r\n\r\n                    return existingAction;\r\n\r\n                }\r\n\r\n                // we know the clip, so we don't have to parse all\r\n                // the bindings again but can just copy\r\n                prototypeAction = actionsForClip.knownActions[ 0 ];\r\n\r\n                // also, take the clip from the prototype action\r\n                if ( clipObject === null )\r\n                    clipObject = prototypeAction._clip;\r\n\r\n            }\r\n\r\n            // clip must be known when specified via string\r\n            if ( clipObject === null ) return null;\r\n\r\n            // allocate all resources required to run it\r\n            var newAction = new AnimationAction( this, clipObject, optionalRoot );\r\n\r\n            this._bindAction( newAction, prototypeAction );\r\n\r\n            // and make the action known to the memory manager\r\n            this._addInactiveAction( newAction, clipUuid, rootUuid );\r\n\r\n            return newAction;\r\n\r\n        },\r\n\r\n        // get an existing action\r\n        existingAction: function ( clip, optionalRoot ) {\r\n\r\n            var root = optionalRoot || this._root,\r\n                rootUuid = root.uuid,\r\n\r\n                clipObject = typeof clip === 'string' ?\r\n                    AnimationClip.findByName( root, clip ) : clip,\r\n\r\n                clipUuid = clipObject ? clipObject.uuid : clip,\r\n\r\n                actionsForClip = this._actionsByClip[ clipUuid ];\r\n\r\n            if ( actionsForClip !== undefined ) {\r\n\r\n                return actionsForClip.actionByRoot[ rootUuid ] || null;\r\n\r\n            }\r\n\r\n            return null;\r\n\r\n        },\r\n\r\n        // deactivates all previously scheduled actions\r\n        stopAllAction: function () {\r\n\r\n            var actions = this._actions,\r\n                nActions = this._nActiveActions,\r\n                bindings = this._bindings,\r\n                nBindings = this._nActiveBindings;\r\n\r\n            this._nActiveActions = 0;\r\n            this._nActiveBindings = 0;\r\n\r\n            for ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n                actions[ i ].reset();\r\n\r\n            }\r\n\r\n            for ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n                bindings[ i ].useCount = 0;\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // advance the time and update apply the animation\r\n        update: function ( deltaTime ) {\r\n\r\n            deltaTime *= this.timeScale;\r\n\r\n            var actions = this._actions,\r\n                nActions = this._nActiveActions,\r\n\r\n                time = this.time += deltaTime,\r\n                timeDirection = Math.sign( deltaTime ),\r\n\r\n                accuIndex = this._accuIndex ^= 1;\r\n\r\n            // run active actions\r\n\r\n            for ( var i = 0; i !== nActions; ++ i ) {\r\n\r\n                var action = actions[ i ];\r\n\r\n                action._update( time, deltaTime, timeDirection, accuIndex );\r\n\r\n            }\r\n\r\n            // update scene graph\r\n\r\n            var bindings = this._bindings,\r\n                nBindings = this._nActiveBindings;\r\n\r\n            for ( var i = 0; i !== nBindings; ++ i ) {\r\n\r\n                bindings[ i ].apply( accuIndex );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // return this mixer's root target object\r\n        getRoot: function () {\r\n\r\n            return this._root;\r\n\r\n        },\r\n\r\n        // free all resources specific to a particular clip\r\n        uncacheClip: function ( clip ) {\r\n\r\n            var actions = this._actions,\r\n                clipUuid = clip.uuid,\r\n                actionsByClip = this._actionsByClip,\r\n                actionsForClip = actionsByClip[ clipUuid ];\r\n\r\n            if ( actionsForClip !== undefined ) {\r\n\r\n                // note: just calling _removeInactiveAction would mess up the\r\n                // iteration state and also require updating the state we can\r\n                // just throw away\r\n\r\n                var actionsToRemove = actionsForClip.knownActions;\r\n\r\n                for ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\r\n\r\n                    var action = actionsToRemove[ i ];\r\n\r\n                    this._deactivateAction( action );\r\n\r\n                    var cacheIndex = action._cacheIndex,\r\n                        lastInactiveAction = actions[ actions.length - 1 ];\r\n\r\n                    action._cacheIndex = null;\r\n                    action._byClipCacheIndex = null;\r\n\r\n                    lastInactiveAction._cacheIndex = cacheIndex;\r\n                    actions[ cacheIndex ] = lastInactiveAction;\r\n                    actions.pop();\r\n\r\n                    this._removeInactiveBindingsForAction( action );\r\n\r\n                }\r\n\r\n                delete actionsByClip[ clipUuid ];\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // free all resources specific to a particular root target object\r\n        uncacheRoot: function ( root ) {\r\n\r\n            var rootUuid = root.uuid,\r\n                actionsByClip = this._actionsByClip;\r\n\r\n            for ( var clipUuid in actionsByClip ) {\r\n\r\n                var actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\r\n                    action = actionByRoot[ rootUuid ];\r\n\r\n                if ( action !== undefined ) {\r\n\r\n                    this._deactivateAction( action );\r\n                    this._removeInactiveAction( action );\r\n\r\n                }\r\n\r\n            }\r\n\r\n            var bindingsByRoot = this._bindingsByRootAndName,\r\n                bindingByName = bindingsByRoot[ rootUuid ];\r\n\r\n            if ( bindingByName !== undefined ) {\r\n\r\n                for ( var trackName in bindingByName ) {\r\n\r\n                    var binding = bindingByName[ trackName ];\r\n                    binding.restoreOriginalState();\r\n                    this._removeInactiveBinding( binding );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n\r\n        // remove a targeted clip from the cache\r\n        uncacheAction: function ( clip, optionalRoot ) {\r\n\r\n            var action = this.existingAction( clip, optionalRoot );\r\n\r\n            if ( action !== null ) {\r\n\r\n                this._deactivateAction( action );\r\n                this._removeInactiveAction( action );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Uniform( value ) {\r\n\r\n        if ( typeof value === 'string' ) {\r\n\r\n            console.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\r\n            value = arguments[ 1 ];\r\n\r\n        }\r\n\r\n        this.value = value;\r\n\r\n    }\r\n\r\n    Uniform.prototype.clone = function () {\r\n\r\n        return new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InstancedBufferGeometry() {\r\n\r\n        BufferGeometry.call( this );\r\n\r\n        this.type = 'InstancedBufferGeometry';\r\n        this.maxInstancedCount = undefined;\r\n\r\n    }\r\n\r\n    InstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\r\n\r\n        constructor: InstancedBufferGeometry,\r\n\r\n        isInstancedBufferGeometry: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            BufferGeometry.prototype.copy.call( this, source );\r\n\r\n            this.maxInstancedCount = source.maxInstancedCount;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\r\n\r\n        this.data = interleavedBuffer;\r\n        this.itemSize = itemSize;\r\n        this.offset = offset;\r\n\r\n        this.normalized = normalized === true;\r\n\r\n    }\r\n\r\n    Object.defineProperties( InterleavedBufferAttribute.prototype, {\r\n\r\n        count: {\r\n\r\n            get: function () {\r\n\r\n                return this.data.count;\r\n\r\n            }\r\n\r\n        },\r\n\r\n        array: {\r\n\r\n            get: function () {\r\n\r\n                return this.data.array;\r\n\r\n            }\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( InterleavedBufferAttribute.prototype, {\r\n\r\n        isInterleavedBufferAttribute: true,\r\n\r\n        setX: function ( index, x ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setY: function ( index, y ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setZ: function ( index, z ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setW: function ( index, w ) {\r\n\r\n            this.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        getX: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n        },\r\n\r\n        getY: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n        },\r\n\r\n        getZ: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n        },\r\n\r\n        getW: function ( index ) {\r\n\r\n            return this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n        },\r\n\r\n        setXY: function ( index, x, y ) {\r\n\r\n            index = index * this.data.stride + this.offset;\r\n\r\n            this.data.array[ index + 0 ] = x;\r\n            this.data.array[ index + 1 ] = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZ: function ( index, x, y, z ) {\r\n\r\n            index = index * this.data.stride + this.offset;\r\n\r\n            this.data.array[ index + 0 ] = x;\r\n            this.data.array[ index + 1 ] = y;\r\n            this.data.array[ index + 2 ] = z;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setXYZW: function ( index, x, y, z, w ) {\r\n\r\n            index = index * this.data.stride + this.offset;\r\n\r\n            this.data.array[ index + 0 ] = x;\r\n            this.data.array[ index + 1 ] = y;\r\n            this.data.array[ index + 2 ] = z;\r\n            this.data.array[ index + 3 ] = w;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InterleavedBuffer( array, stride ) {\r\n\r\n        this.array = array;\r\n        this.stride = stride;\r\n        this.count = array !== undefined ? array.length / stride : 0;\r\n\r\n        this.dynamic = false;\r\n        this.updateRange = { offset: 0, count: - 1 };\r\n\r\n        this.version = 0;\r\n\r\n    }\r\n\r\n    Object.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\r\n\r\n        set: function ( value ) {\r\n\r\n            if ( value === true ) this.version ++;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( InterleavedBuffer.prototype, {\r\n\r\n        isInterleavedBuffer: true,\r\n\r\n        onUploadCallback: function () {},\r\n\r\n        setArray: function ( array ) {\r\n\r\n            if ( Array.isArray( array ) ) {\r\n\r\n                throw new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\r\n\r\n            }\r\n\r\n            this.count = array !== undefined ? array.length / this.stride : 0;\r\n            this.array = array;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setDynamic: function ( value ) {\r\n\r\n            this.dynamic = value;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copy: function ( source ) {\r\n\r\n            this.array = new source.array.constructor( source.array );\r\n            this.count = source.count;\r\n            this.stride = source.stride;\r\n            this.dynamic = source.dynamic;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        copyAt: function ( index1, attribute, index2 ) {\r\n\r\n            index1 *= this.stride;\r\n            index2 *= attribute.stride;\r\n\r\n            for ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n                this.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        set: function ( value, offset ) {\r\n\r\n            if ( offset === undefined ) offset = 0;\r\n\r\n            this.array.set( value, offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        onUpload: function ( callback ) {\r\n\r\n            this.onUploadCallback = callback;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\r\n\r\n        InterleavedBuffer.call( this, array, stride );\r\n\r\n        this.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n    }\r\n\r\n    InstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\r\n\r\n        constructor: InstancedInterleavedBuffer,\r\n\r\n        isInstancedInterleavedBuffer: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n            this.meshPerAttribute = source.meshPerAttribute;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author benaadams / https://twitter.com/ben_a_adams\r\n     */\r\n\r\n    function InstancedBufferAttribute( array, itemSize, meshPerAttribute ) {\r\n\r\n        BufferAttribute.call( this, array, itemSize );\r\n\r\n        this.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n    }\r\n\r\n    InstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\r\n\r\n        constructor: InstancedBufferAttribute,\r\n\r\n        isInstancedBufferAttribute: true,\r\n\r\n        copy: function ( source ) {\r\n\r\n            BufferAttribute.prototype.copy.call( this, source );\r\n\r\n            this.meshPerAttribute = source.meshPerAttribute;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author bhouston / http://clara.io/\r\n     * @author stephomi / http://stephaneginier.com/\r\n     */\r\n\r\n    function Raycaster( origin, direction, near, far ) {\r\n\r\n        this.ray = new Ray( origin, direction );\r\n        // direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n        this.near = near || 0;\r\n        this.far = far || Infinity;\r\n\r\n        this.params = {\r\n            Mesh: {},\r\n            Line: {},\r\n            LOD: {},\r\n            Points: { threshold: 1 },\r\n            Sprite: {}\r\n        };\r\n\r\n        Object.defineProperties( this.params, {\r\n            PointCloud: {\r\n                get: function () {\r\n\r\n                    console.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n                    return this.Points;\r\n\r\n                }\r\n            }\r\n        } );\r\n\r\n    }\r\n\r\n    function ascSort( a, b ) {\r\n\r\n        return a.distance - b.distance;\r\n\r\n    }\r\n\r\n    function intersectObject( object, raycaster, intersects, recursive ) {\r\n\r\n        if ( object.visible === false ) return;\r\n\r\n        object.raycast( raycaster, intersects );\r\n\r\n        if ( recursive === true ) {\r\n\r\n            var children = object.children;\r\n\r\n            for ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n                intersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    Object.assign( Raycaster.prototype, {\r\n\r\n        linePrecision: 1,\r\n\r\n        set: function ( origin, direction ) {\r\n\r\n            // direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n            this.ray.set( origin, direction );\r\n\r\n        },\r\n\r\n        setFromCamera: function ( coords, camera ) {\r\n\r\n            if ( ( camera && camera.isPerspectiveCamera ) ) {\r\n\r\n                this.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n                this.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n            } else if ( ( camera && camera.isOrthographicCamera ) ) {\r\n\r\n                this.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\r\n                this.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n            } else {\r\n\r\n                console.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n            }\r\n\r\n        },\r\n\r\n        intersectObject: function ( object, recursive, optionalTarget ) {\r\n\r\n            var intersects = optionalTarget || [];\r\n\r\n            intersectObject( object, this, intersects, recursive );\r\n\r\n            intersects.sort( ascSort );\r\n\r\n            return intersects;\r\n\r\n        },\r\n\r\n        intersectObjects: function ( objects, recursive, optionalTarget ) {\r\n\r\n            var intersects = optionalTarget || [];\r\n\r\n            if ( Array.isArray( objects ) === false ) {\r\n\r\n                console.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n                return intersects;\r\n\r\n            }\r\n\r\n            for ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n                intersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n            }\r\n\r\n            intersects.sort( ascSort );\r\n\r\n            return intersects;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function Clock( autoStart ) {\r\n\r\n        this.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n        this.startTime = 0;\r\n        this.oldTime = 0;\r\n        this.elapsedTime = 0;\r\n\r\n        this.running = false;\r\n\r\n    }\r\n\r\n    Object.assign( Clock.prototype, {\r\n\r\n        start: function () {\r\n\r\n            this.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\r\n\r\n            this.oldTime = this.startTime;\r\n            this.elapsedTime = 0;\r\n            this.running = true;\r\n\r\n        },\r\n\r\n        stop: function () {\r\n\r\n            this.getElapsedTime();\r\n            this.running = false;\r\n            this.autoStart = false;\r\n\r\n        },\r\n\r\n        getElapsedTime: function () {\r\n\r\n            this.getDelta();\r\n            return this.elapsedTime;\r\n\r\n        },\r\n\r\n        getDelta: function () {\r\n\r\n            var diff = 0;\r\n\r\n            if ( this.autoStart && ! this.running ) {\r\n\r\n                this.start();\r\n                return 0;\r\n\r\n            }\r\n\r\n            if ( this.running ) {\r\n\r\n                var newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\r\n\r\n                diff = ( newTime - this.oldTime ) / 1000;\r\n                this.oldTime = newTime;\r\n\r\n                this.elapsedTime += diff;\r\n\r\n            }\r\n\r\n            return diff;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     *\r\n     * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\r\n     *\r\n     * The poles (phi) are at the positive and negative y axis.\r\n     * The equator starts at positive z.\r\n     */\r\n\r\n    function Spherical( radius, phi, theta ) {\r\n\r\n        this.radius = ( radius !== undefined ) ? radius : 1.0;\r\n        this.phi = ( phi !== undefined ) ? phi : 0; // up / down towards top and bottom pole\r\n        this.theta = ( theta !== undefined ) ? theta : 0; // around the equator of the sphere\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Object.assign( Spherical.prototype, {\r\n\r\n        set: function ( radius, phi, theta ) {\r\n\r\n            this.radius = radius;\r\n            this.phi = phi;\r\n            this.theta = theta;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( other ) {\r\n\r\n            this.radius = other.radius;\r\n            this.phi = other.phi;\r\n            this.theta = other.theta;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        // restrict phi to be betwee EPS and PI-EPS\r\n        makeSafe: function () {\r\n\r\n            var EPS = 0.000001;\r\n            this.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromVector3: function ( vec3 ) {\r\n\r\n            this.radius = vec3.length();\r\n\r\n            if ( this.radius === 0 ) {\r\n\r\n                this.theta = 0;\r\n                this.phi = 0;\r\n\r\n            } else {\r\n\r\n                this.theta = Math.atan2( vec3.x, vec3.z ); // equator angle around y-up axis\r\n                this.phi = Math.acos( _Math.clamp( vec3.y / this.radius, - 1, 1 ) ); // polar angle\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\r\n     *\r\n     */\r\n\r\n    function Cylindrical( radius, theta, y ) {\r\n\r\n        this.radius = ( radius !== undefined ) ? radius : 1.0; // distance from the origin to a point in the x-z plane\r\n        this.theta = ( theta !== undefined ) ? theta : 0; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\r\n        this.y = ( y !== undefined ) ? y : 0; // height above the x-z plane\r\n\r\n        return this;\r\n\r\n    }\r\n\r\n    Object.assign( Cylindrical.prototype, {\r\n\r\n        set: function ( radius, theta, y ) {\r\n\r\n            this.radius = radius;\r\n            this.theta = theta;\r\n            this.y = y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( other ) {\r\n\r\n            this.radius = other.radius;\r\n            this.theta = other.theta;\r\n            this.y = other.y;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromVector3: function ( vec3 ) {\r\n\r\n            this.radius = Math.sqrt( vec3.x * vec3.x + vec3.z * vec3.z );\r\n            this.theta = Math.atan2( vec3.x, vec3.z );\r\n            this.y = vec3.y;\r\n\r\n            return this;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author bhouston / http://clara.io\r\n     */\r\n\r\n    function Box2( min, max ) {\r\n\r\n        this.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\r\n        this.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\r\n\r\n    }\r\n\r\n    Object.assign( Box2.prototype, {\r\n\r\n        set: function ( min, max ) {\r\n\r\n            this.min.copy( min );\r\n            this.max.copy( max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromPoints: function ( points ) {\r\n\r\n            this.makeEmpty();\r\n\r\n            for ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n                this.expandByPoint( points[ i ] );\r\n\r\n            }\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        setFromCenterAndSize: function () {\r\n\r\n            var v1 = new Vector2();\r\n\r\n            return function setFromCenterAndSize( center, size ) {\r\n\r\n                var halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n                this.min.copy( center ).sub( halfSize );\r\n                this.max.copy( center ).add( halfSize );\r\n\r\n                return this;\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        clone: function () {\r\n\r\n            return new this.constructor().copy( this );\r\n\r\n        },\r\n\r\n        copy: function ( box ) {\r\n\r\n            this.min.copy( box.min );\r\n            this.max.copy( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        makeEmpty: function () {\r\n\r\n            this.min.x = this.min.y = + Infinity;\r\n            this.max.x = this.max.y = - Infinity;\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        isEmpty: function () {\r\n\r\n            // this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n            return ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n        },\r\n\r\n        getCenter: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .getCenter() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n        },\r\n\r\n        getSize: function ( target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .getSize() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\r\n\r\n        },\r\n\r\n        expandByPoint: function ( point ) {\r\n\r\n            this.min.min( point );\r\n            this.max.max( point );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByVector: function ( vector ) {\r\n\r\n            this.min.sub( vector );\r\n            this.max.add( vector );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        expandByScalar: function ( scalar ) {\r\n\r\n            this.min.addScalar( - scalar );\r\n            this.max.addScalar( scalar );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        containsPoint: function ( point ) {\r\n\r\n            return point.x < this.min.x || point.x > this.max.x ||\r\n            point.y < this.min.y || point.y > this.max.y ? false : true;\r\n\r\n        },\r\n\r\n        containsBox: function ( box ) {\r\n\r\n            return this.min.x <= box.min.x && box.max.x <= this.max.x &&\r\n                this.min.y <= box.min.y && box.max.y <= this.max.y;\r\n\r\n        },\r\n\r\n        getParameter: function ( point, target ) {\r\n\r\n            // This can potentially have a divide by zero if the box\r\n            // has a size dimension of 0.\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .getParameter() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return target.set(\r\n                ( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n                ( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n            );\r\n\r\n        },\r\n\r\n        intersectsBox: function ( box ) {\r\n\r\n            // using 4 splitting planes to rule out intersections\r\n\r\n            return box.max.x < this.min.x || box.min.x > this.max.x ||\r\n            box.max.y < this.min.y || box.min.y > this.max.y ? false : true;\r\n\r\n        },\r\n\r\n        clampPoint: function ( point, target ) {\r\n\r\n            if ( target === undefined ) {\r\n\r\n                console.warn( 'THREE.Box2: .clampPoint() target is now required' );\r\n                target = new Vector2();\r\n\r\n            }\r\n\r\n            return target.copy( point ).clamp( this.min, this.max );\r\n\r\n        },\r\n\r\n        distanceToPoint: function () {\r\n\r\n            var v1 = new Vector2();\r\n\r\n            return function distanceToPoint( point ) {\r\n\r\n                var clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n                return clampedPoint.sub( point ).length();\r\n\r\n            };\r\n\r\n        }(),\r\n\r\n        intersect: function ( box ) {\r\n\r\n            this.min.max( box.min );\r\n            this.max.min( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        union: function ( box ) {\r\n\r\n            this.min.min( box.min );\r\n            this.max.max( box.max );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        translate: function ( offset ) {\r\n\r\n            this.min.add( offset );\r\n            this.max.add( offset );\r\n\r\n            return this;\r\n\r\n        },\r\n\r\n        equals: function ( box ) {\r\n\r\n            return box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     */\r\n\r\n    function ImmediateRenderObject( material ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.material = material;\r\n        this.render = function ( /* renderCallback */ ) {};\r\n\r\n    }\r\n\r\n    ImmediateRenderObject.prototype = Object.create( Object3D.prototype );\r\n    ImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\r\n\r\n    ImmediateRenderObject.prototype.isImmediateRenderObject = true;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function VertexNormalsHelper( object, size, hex, linewidth ) {\r\n\r\n        this.object = object;\r\n\r\n        this.size = ( size !== undefined ) ? size : 1;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n        var width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n        //\r\n\r\n        var nNormals = 0;\r\n\r\n        var objGeometry = this.object.geometry;\r\n\r\n        if ( objGeometry && objGeometry.isGeometry ) {\r\n\r\n            nNormals = objGeometry.faces.length * 3;\r\n\r\n        } else if ( objGeometry && objGeometry.isBufferGeometry ) {\r\n\r\n            nNormals = objGeometry.attributes.normal.count;\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\r\n\r\n        geometry.addAttribute( 'position', positions );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n        //\r\n\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    VertexNormalsHelper.prototype = Object.create( LineSegments.prototype );\r\n    VertexNormalsHelper.prototype.constructor = VertexNormalsHelper;\r\n\r\n    VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n        var v1 = new Vector3();\r\n        var v2 = new Vector3();\r\n        var normalMatrix = new Matrix3();\r\n\r\n        return function update() {\r\n\r\n            var keys = [ 'a', 'b', 'c' ];\r\n\r\n            this.object.updateMatrixWorld( true );\r\n\r\n            normalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n            var matrixWorld = this.object.matrixWorld;\r\n\r\n            var position = this.geometry.attributes.position;\r\n\r\n            //\r\n\r\n            var objGeometry = this.object.geometry;\r\n\r\n            if ( objGeometry && objGeometry.isGeometry ) {\r\n\r\n                var vertices = objGeometry.vertices;\r\n\r\n                var faces = objGeometry.faces;\r\n\r\n                var idx = 0;\r\n\r\n                for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                    var face = faces[ i ];\r\n\r\n                    for ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n                        var vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n                        var normal = face.vertexNormals[ j ];\r\n\r\n                        v1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n                        v2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n                        position.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n                        idx = idx + 1;\r\n\r\n                        position.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n                        idx = idx + 1;\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            } else if ( objGeometry && objGeometry.isBufferGeometry ) {\r\n\r\n                var objPos = objGeometry.attributes.position;\r\n\r\n                var objNorm = objGeometry.attributes.normal;\r\n\r\n                var idx = 0;\r\n\r\n                // for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n                for ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n                    v1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n                    v2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n                    v2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n                    position.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n                    idx = idx + 1;\r\n\r\n                    position.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n                    idx = idx + 1;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            position.needsUpdate = true;\r\n\r\n        };\r\n\r\n    }() );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function SpotLightHelper( light, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var positions = [\r\n            0, 0, 0, \t0, 0, 1,\r\n            0, 0, 0, \t1, 0, 1,\r\n            0, 0, 0,\t- 1, 0, 1,\r\n            0, 0, 0, \t0, 1, 1,\r\n            0, 0, 0, \t0, - 1, 1\r\n        ];\r\n\r\n        for ( var i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\r\n\r\n            var p1 = ( i / l ) * Math.PI * 2;\r\n            var p2 = ( j / l ) * Math.PI * 2;\r\n\r\n            positions.push(\r\n                Math.cos( p1 ), Math.sin( p1 ), 1,\r\n                Math.cos( p2 ), Math.sin( p2 ), 1\r\n            );\r\n\r\n        }\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { fog: false } );\r\n\r\n        this.cone = new LineSegments( geometry, material );\r\n        this.add( this.cone );\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    SpotLightHelper.prototype = Object.create( Object3D.prototype );\r\n    SpotLightHelper.prototype.constructor = SpotLightHelper;\r\n\r\n    SpotLightHelper.prototype.dispose = function () {\r\n\r\n        this.cone.geometry.dispose();\r\n        this.cone.material.dispose();\r\n\r\n    };\r\n\r\n    SpotLightHelper.prototype.update = function () {\r\n\r\n        var vector = new Vector3();\r\n        var vector2 = new Vector3();\r\n\r\n        return function update() {\r\n\r\n            this.light.updateMatrixWorld();\r\n\r\n            var coneLength = this.light.distance ? this.light.distance : 1000;\r\n            var coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n            this.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n            vector.setFromMatrixPosition( this.light.matrixWorld );\r\n            vector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n            this.cone.lookAt( vector2.sub( vector ) );\r\n\r\n            if ( this.color !== undefined ) {\r\n\r\n                this.cone.material.color.set( this.color );\r\n\r\n            } else {\r\n\r\n                this.cone.material.color.copy( this.light.color );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author Sean Griffin / http://twitter.com/sgrif\r\n     * @author Michael Guerrero / http://realitymeltdown.com\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author ikerr / http://verold.com\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function getBoneList( object ) {\r\n\r\n        var boneList = [];\r\n\r\n        if ( object && object.isBone ) {\r\n\r\n            boneList.push( object );\r\n\r\n        }\r\n\r\n        for ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n            boneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\r\n\r\n        }\r\n\r\n        return boneList;\r\n\r\n    }\r\n\r\n    function SkeletonHelper( object ) {\r\n\r\n        var bones = getBoneList( object );\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var vertices = [];\r\n        var colors = [];\r\n\r\n        var color1 = new Color( 0, 0, 1 );\r\n        var color2 = new Color( 0, 1, 0 );\r\n\r\n        for ( var i = 0; i < bones.length; i ++ ) {\r\n\r\n            var bone = bones[ i ];\r\n\r\n            if ( bone.parent && bone.parent.isBone ) {\r\n\r\n                vertices.push( 0, 0, 0 );\r\n                vertices.push( 0, 0, 0 );\r\n                colors.push( color1.r, color1.g, color1.b );\r\n                colors.push( color2.r, color2.g, color2.b );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n        this.root = object;\r\n        this.bones = bones;\r\n\r\n        this.matrix = object.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n    }\r\n\r\n    SkeletonHelper.prototype = Object.create( LineSegments.prototype );\r\n    SkeletonHelper.prototype.constructor = SkeletonHelper;\r\n\r\n    SkeletonHelper.prototype.updateMatrixWorld = function () {\r\n\r\n        var vector = new Vector3();\r\n\r\n        var boneMatrix = new Matrix4();\r\n        var matrixWorldInv = new Matrix4();\r\n\r\n        return function updateMatrixWorld( force ) {\r\n\r\n            var bones = this.bones;\r\n\r\n            var geometry = this.geometry;\r\n            var position = geometry.getAttribute( 'position' );\r\n\r\n            matrixWorldInv.getInverse( this.root.matrixWorld );\r\n\r\n            for ( var i = 0, j = 0; i < bones.length; i ++ ) {\r\n\r\n                var bone = bones[ i ];\r\n\r\n                if ( bone.parent && bone.parent.isBone ) {\r\n\r\n                    boneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n                    vector.setFromMatrixPosition( boneMatrix );\r\n                    position.setXYZ( j, vector.x, vector.y, vector.z );\r\n\r\n                    boneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n                    vector.setFromMatrixPosition( boneMatrix );\r\n                    position.setXYZ( j + 1, vector.x, vector.y, vector.z );\r\n\r\n                    j += 2;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            geometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n            Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function PointLightHelper( light, sphereSize, color ) {\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.color = color;\r\n\r\n        var geometry = new SphereBufferGeometry( sphereSize, 4, 2 );\r\n        var material = new MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n        Mesh.call( this, geometry, material );\r\n\r\n        this.matrix = this.light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.update();\r\n\r\n\r\n        /*\r\n\t\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\t\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\t\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\t\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\t\tvar d = light.distance;\r\n\r\n\t\tif ( d === 0.0 ) {\r\n\r\n\t\t\tthis.lightDistance.visible = false;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t\t}\r\n\r\n\t\tthis.add( this.lightDistance );\r\n\t\t*/\r\n\r\n    }\r\n\r\n    PointLightHelper.prototype = Object.create( Mesh.prototype );\r\n    PointLightHelper.prototype.constructor = PointLightHelper;\r\n\r\n    PointLightHelper.prototype.dispose = function () {\r\n\r\n        this.geometry.dispose();\r\n        this.material.dispose();\r\n\r\n    };\r\n\r\n    PointLightHelper.prototype.update = function () {\r\n\r\n        if ( this.color !== undefined ) {\r\n\r\n            this.material.color.set( this.color );\r\n\r\n        } else {\r\n\r\n            this.material.color.copy( this.light.color );\r\n\r\n        }\r\n\r\n        /*\r\n\t\tvar d = this.light.distance;\r\n\r\n\t\tif ( d === 0.0 ) {\r\n\r\n\t\t\tthis.lightDistance.visible = false;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.lightDistance.visible = true;\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t\t}\r\n\t\t*/\r\n\r\n    };\r\n\r\n    /**\r\n     * @author abelnation / http://github.com/abelnation\r\n     * @author Mugen87 / http://github.com/Mugen87\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function RectAreaLightHelper( light, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        var material = new LineBasicMaterial( { fog: false } );\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        geometry.addAttribute( 'position', new BufferAttribute( new Float32Array( 5 * 3 ), 3 ) );\r\n\r\n        this.line = new Line( geometry, material );\r\n        this.add( this.line );\r\n\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    RectAreaLightHelper.prototype = Object.create( Object3D.prototype );\r\n    RectAreaLightHelper.prototype.constructor = RectAreaLightHelper;\r\n\r\n    RectAreaLightHelper.prototype.dispose = function () {\r\n\r\n        this.children[ 0 ].geometry.dispose();\r\n        this.children[ 0 ].material.dispose();\r\n\r\n    };\r\n\r\n    RectAreaLightHelper.prototype.update = function () {\r\n\r\n        // calculate new dimensions of the helper\r\n\r\n        var hx = this.light.width * 0.5;\r\n        var hy = this.light.height * 0.5;\r\n\r\n        var position = this.line.geometry.attributes.position;\r\n        var array = position.array;\r\n\r\n        // update vertices\r\n\r\n        array[ 0 ] = hx; array[ 1 ] = - hy; array[ 2 ] = 0;\r\n        array[ 3 ] = hx; array[ 4 ] = hy; array[ 5 ] = 0;\r\n        array[ 6 ] = - hx; array[ 7 ] = hy; array[ 8 ] = 0;\r\n        array[ 9 ] = - hx; array[ 10 ] = - hy; array[ 11 ] = 0;\r\n        array[ 12 ] = hx; array[ 13 ] = - hy; array[ 14 ] = 0;\r\n\r\n        position.needsUpdate = true;\r\n\r\n        if ( this.color !== undefined ) {\r\n\r\n            this.line.material.color.set( this.color );\r\n\r\n        } else {\r\n\r\n            this.line.material.color.copy( this.light.color );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     */\r\n\r\n    function HemisphereLightHelper( light, size, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        var geometry = new OctahedronBufferGeometry( size );\r\n        geometry.rotateY( Math.PI * 0.5 );\r\n\r\n        this.material = new MeshBasicMaterial( { wireframe: true, fog: false } );\r\n        if ( this.color === undefined ) this.material.vertexColors = VertexColors;\r\n\r\n        var position = geometry.getAttribute( 'position' );\r\n        var colors = new Float32Array( position.count * 3 );\r\n\r\n        geometry.addAttribute( 'color', new BufferAttribute( colors, 3 ) );\r\n\r\n        this.add( new Mesh( geometry, this.material ) );\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    HemisphereLightHelper.prototype = Object.create( Object3D.prototype );\r\n    HemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\r\n\r\n    HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n        this.children[ 0 ].geometry.dispose();\r\n        this.children[ 0 ].material.dispose();\r\n\r\n    };\r\n\r\n    HemisphereLightHelper.prototype.update = function () {\r\n\r\n        var vector = new Vector3();\r\n\r\n        var color1 = new Color();\r\n        var color2 = new Color();\r\n\r\n        return function update() {\r\n\r\n            var mesh = this.children[ 0 ];\r\n\r\n            if ( this.color !== undefined ) {\r\n\r\n                this.material.color.set( this.color );\r\n\r\n            } else {\r\n\r\n                var colors = mesh.geometry.getAttribute( 'color' );\r\n\r\n                color1.copy( this.light.color );\r\n                color2.copy( this.light.groundColor );\r\n\r\n                for ( var i = 0, l = colors.count; i < l; i ++ ) {\r\n\r\n                    var color = ( i < ( l / 2 ) ) ? color1 : color2;\r\n\r\n                    colors.setXYZ( i, color.r, color.g, color.b );\r\n\r\n                }\r\n\r\n                colors.needsUpdate = true;\r\n\r\n            }\r\n\r\n            mesh.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function GridHelper( size, divisions, color1, color2 ) {\r\n\r\n        size = size || 10;\r\n        divisions = divisions || 10;\r\n        color1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n        color2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n        var center = divisions / 2;\r\n        var step = size / divisions;\r\n        var halfSize = size / 2;\r\n\r\n        var vertices = [], colors = [];\r\n\r\n        for ( var i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\r\n\r\n            vertices.push( - halfSize, 0, k, halfSize, 0, k );\r\n            vertices.push( k, 0, - halfSize, k, 0, halfSize );\r\n\r\n            var color = i === center ? color1 : color2;\r\n\r\n            color.toArray( colors, j ); j += 3;\r\n            color.toArray( colors, j ); j += 3;\r\n            color.toArray( colors, j ); j += 3;\r\n            color.toArray( colors, j ); j += 3;\r\n\r\n        }\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n    }\r\n\r\n    GridHelper.prototype = Object.create( LineSegments.prototype );\r\n    GridHelper.prototype.constructor = GridHelper;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / http://github.com/Mugen87\r\n     * @author Hectate / http://www.github.com/Hectate\r\n     */\r\n\r\n    function PolarGridHelper( radius, radials, circles, divisions, color1, color2 ) {\r\n\r\n        radius = radius || 10;\r\n        radials = radials || 16;\r\n        circles = circles || 8;\r\n        divisions = divisions || 64;\r\n        color1 = new Color( color1 !== undefined ? color1 : 0x444444 );\r\n        color2 = new Color( color2 !== undefined ? color2 : 0x888888 );\r\n\r\n        var vertices = [];\r\n        var colors = [];\r\n\r\n        var x, z;\r\n        var v, i, j, r, color;\r\n\r\n        // create the radials\r\n\r\n        for ( i = 0; i <= radials; i ++ ) {\r\n\r\n            v = ( i / radials ) * ( Math.PI * 2 );\r\n\r\n            x = Math.sin( v ) * radius;\r\n            z = Math.cos( v ) * radius;\r\n\r\n            vertices.push( 0, 0, 0 );\r\n            vertices.push( x, 0, z );\r\n\r\n            color = ( i & 1 ) ? color1 : color2;\r\n\r\n            colors.push( color.r, color.g, color.b );\r\n            colors.push( color.r, color.g, color.b );\r\n\r\n        }\r\n\r\n        // create the circles\r\n\r\n        for ( i = 0; i <= circles; i ++ ) {\r\n\r\n            color = ( i & 1 ) ? color1 : color2;\r\n\r\n            r = radius - ( radius / circles * i );\r\n\r\n            for ( j = 0; j < divisions; j ++ ) {\r\n\r\n                // first vertex\r\n\r\n                v = ( j / divisions ) * ( Math.PI * 2 );\r\n\r\n                x = Math.sin( v ) * r;\r\n                z = Math.cos( v ) * r;\r\n\r\n                vertices.push( x, 0, z );\r\n                colors.push( color.r, color.g, color.b );\r\n\r\n                // second vertex\r\n\r\n                v = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\r\n\r\n                x = Math.sin( v ) * r;\r\n                z = Math.cos( v ) * r;\r\n\r\n                vertices.push( x, 0, z );\r\n                colors.push( color.r, color.g, color.b );\r\n\r\n            }\r\n\r\n        }\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n    }\r\n\r\n    PolarGridHelper.prototype = Object.create( LineSegments.prototype );\r\n    PolarGridHelper.prototype.constructor = PolarGridHelper;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function FaceNormalsHelper( object, size, hex, linewidth ) {\r\n\r\n        // FaceNormalsHelper only supports THREE.Geometry\r\n\r\n        this.object = object;\r\n\r\n        this.size = ( size !== undefined ) ? size : 1;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n        var width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n        //\r\n\r\n        var nNormals = 0;\r\n\r\n        var objGeometry = this.object.geometry;\r\n\r\n        if ( objGeometry && objGeometry.isGeometry ) {\r\n\r\n            nNormals = objGeometry.faces.length;\r\n\r\n        } else {\r\n\r\n            console.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n        }\r\n\r\n        //\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        var positions = new Float32BufferAttribute( nNormals * 2 * 3, 3 );\r\n\r\n        geometry.addAttribute( 'position', positions );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n        //\r\n\r\n        this.matrixAutoUpdate = false;\r\n        this.update();\r\n\r\n    }\r\n\r\n    FaceNormalsHelper.prototype = Object.create( LineSegments.prototype );\r\n    FaceNormalsHelper.prototype.constructor = FaceNormalsHelper;\r\n\r\n    FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n        var v1 = new Vector3();\r\n        var v2 = new Vector3();\r\n        var normalMatrix = new Matrix3();\r\n\r\n        return function update() {\r\n\r\n            this.object.updateMatrixWorld( true );\r\n\r\n            normalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n            var matrixWorld = this.object.matrixWorld;\r\n\r\n            var position = this.geometry.attributes.position;\r\n\r\n            //\r\n\r\n            var objGeometry = this.object.geometry;\r\n\r\n            var vertices = objGeometry.vertices;\r\n\r\n            var faces = objGeometry.faces;\r\n\r\n            var idx = 0;\r\n\r\n            for ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n                var face = faces[ i ];\r\n\r\n                var normal = face.normal;\r\n\r\n                v1.copy( vertices[ face.a ] )\r\n                    .add( vertices[ face.b ] )\r\n                    .add( vertices[ face.c ] )\r\n                    .divideScalar( 3 )\r\n                    .applyMatrix4( matrixWorld );\r\n\r\n                v2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n                position.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n                idx = idx + 1;\r\n\r\n                position.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n                idx = idx + 1;\r\n\r\n            }\r\n\r\n            position.needsUpdate = true;\r\n\r\n        };\r\n\r\n    }() );\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function DirectionalLightHelper( light, size, color ) {\r\n\r\n        Object3D.call( this );\r\n\r\n        this.light = light;\r\n        this.light.updateMatrixWorld();\r\n\r\n        this.matrix = light.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.color = color;\r\n\r\n        if ( size === undefined ) size = 1;\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( [\r\n            - size, size, 0,\r\n            size, size, 0,\r\n            size, - size, 0,\r\n            - size, - size, 0,\r\n            - size, size, 0\r\n        ], 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { fog: false } );\r\n\r\n        this.lightPlane = new Line( geometry, material );\r\n        this.add( this.lightPlane );\r\n\r\n        geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\r\n\r\n        this.targetLine = new Line( geometry, material );\r\n        this.add( this.targetLine );\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    DirectionalLightHelper.prototype = Object.create( Object3D.prototype );\r\n    DirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\r\n\r\n    DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n        this.lightPlane.geometry.dispose();\r\n        this.lightPlane.material.dispose();\r\n        this.targetLine.geometry.dispose();\r\n        this.targetLine.material.dispose();\r\n\r\n    };\r\n\r\n    DirectionalLightHelper.prototype.update = function () {\r\n\r\n        var v1 = new Vector3();\r\n        var v2 = new Vector3();\r\n        var v3 = new Vector3();\r\n\r\n        return function update() {\r\n\r\n            v1.setFromMatrixPosition( this.light.matrixWorld );\r\n            v2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n            v3.subVectors( v2, v1 );\r\n\r\n            this.lightPlane.lookAt( v3 );\r\n\r\n            if ( this.color !== undefined ) {\r\n\r\n                this.lightPlane.material.color.set( this.color );\r\n                this.targetLine.material.color.set( this.color );\r\n\r\n            } else {\r\n\r\n                this.lightPlane.material.color.copy( this.light.color );\r\n                this.targetLine.material.color.copy( this.light.color );\r\n\r\n            }\r\n\r\n            this.targetLine.lookAt( v3 );\r\n            this.targetLine.scale.z = v3.length();\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author alteredq / http://alteredqualia.com/\r\n     * @author Mugen87 / https://github.com/Mugen87\r\n     *\r\n     *\t- shows frustum, line of sight and up of the camera\r\n     *\t- suitable for fast updates\r\n     * \t- based on frustum visualization in lightgl.js shadowmap example\r\n     *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n     */\r\n\r\n    function CameraHelper( camera ) {\r\n\r\n        var geometry = new BufferGeometry();\r\n        var material = new LineBasicMaterial( { color: 0xffffff, vertexColors: FaceColors } );\r\n\r\n        var vertices = [];\r\n        var colors = [];\r\n\r\n        var pointMap = {};\r\n\r\n        // colors\r\n\r\n        var colorFrustum = new Color( 0xffaa00 );\r\n        var colorCone = new Color( 0xff0000 );\r\n        var colorUp = new Color( 0x00aaff );\r\n        var colorTarget = new Color( 0xffffff );\r\n        var colorCross = new Color( 0x333333 );\r\n\r\n        // near\r\n\r\n        addLine( 'n1', 'n2', colorFrustum );\r\n        addLine( 'n2', 'n4', colorFrustum );\r\n        addLine( 'n4', 'n3', colorFrustum );\r\n        addLine( 'n3', 'n1', colorFrustum );\r\n\r\n        // far\r\n\r\n        addLine( 'f1', 'f2', colorFrustum );\r\n        addLine( 'f2', 'f4', colorFrustum );\r\n        addLine( 'f4', 'f3', colorFrustum );\r\n        addLine( 'f3', 'f1', colorFrustum );\r\n\r\n        // sides\r\n\r\n        addLine( 'n1', 'f1', colorFrustum );\r\n        addLine( 'n2', 'f2', colorFrustum );\r\n        addLine( 'n3', 'f3', colorFrustum );\r\n        addLine( 'n4', 'f4', colorFrustum );\r\n\r\n        // cone\r\n\r\n        addLine( 'p', 'n1', colorCone );\r\n        addLine( 'p', 'n2', colorCone );\r\n        addLine( 'p', 'n3', colorCone );\r\n        addLine( 'p', 'n4', colorCone );\r\n\r\n        // up\r\n\r\n        addLine( 'u1', 'u2', colorUp );\r\n        addLine( 'u2', 'u3', colorUp );\r\n        addLine( 'u3', 'u1', colorUp );\r\n\r\n        // target\r\n\r\n        addLine( 'c', 't', colorTarget );\r\n        addLine( 'p', 'c', colorCross );\r\n\r\n        // cross\r\n\r\n        addLine( 'cn1', 'cn2', colorCross );\r\n        addLine( 'cn3', 'cn4', colorCross );\r\n\r\n        addLine( 'cf1', 'cf2', colorCross );\r\n        addLine( 'cf3', 'cf4', colorCross );\r\n\r\n        function addLine( a, b, color ) {\r\n\r\n            addPoint( a, color );\r\n            addPoint( b, color );\r\n\r\n        }\r\n\r\n        function addPoint( id, color ) {\r\n\r\n            vertices.push( 0, 0, 0 );\r\n            colors.push( color.r, color.g, color.b );\r\n\r\n            if ( pointMap[ id ] === undefined ) {\r\n\r\n                pointMap[ id ] = [];\r\n\r\n            }\r\n\r\n            pointMap[ id ].push( ( vertices.length / 3 ) - 1 );\r\n\r\n        }\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n        this.camera = camera;\r\n        if ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\r\n\r\n        this.matrix = camera.matrixWorld;\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.pointMap = pointMap;\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    CameraHelper.prototype = Object.create( LineSegments.prototype );\r\n    CameraHelper.prototype.constructor = CameraHelper;\r\n\r\n    CameraHelper.prototype.update = function () {\r\n\r\n        var geometry, pointMap;\r\n\r\n        var vector = new Vector3();\r\n        var camera = new Camera();\r\n\r\n        function setPoint( point, x, y, z ) {\r\n\r\n            vector.set( x, y, z ).unproject( camera );\r\n\r\n            var points = pointMap[ point ];\r\n\r\n            if ( points !== undefined ) {\r\n\r\n                var position = geometry.getAttribute( 'position' );\r\n\r\n                for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                    position.setXYZ( points[ i ], vector.x, vector.y, vector.z );\r\n\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n        return function update() {\r\n\r\n            geometry = this.geometry;\r\n            pointMap = this.pointMap;\r\n\r\n            var w = 1, h = 1;\r\n\r\n            // we need just camera projection matrix\r\n            // world matrix must be identity\r\n\r\n            camera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n            // center / target\r\n\r\n            setPoint( 'c', 0, 0, - 1 );\r\n            setPoint( 't', 0, 0, 1 );\r\n\r\n            // near\r\n\r\n            setPoint( 'n1', - w, - h, - 1 );\r\n            setPoint( 'n2', w, - h, - 1 );\r\n            setPoint( 'n3', - w, h, - 1 );\r\n            setPoint( 'n4', w, h, - 1 );\r\n\r\n            // far\r\n\r\n            setPoint( 'f1', - w, - h, 1 );\r\n            setPoint( 'f2', w, - h, 1 );\r\n            setPoint( 'f3', - w, h, 1 );\r\n            setPoint( 'f4', w, h, 1 );\r\n\r\n            // up\r\n\r\n            setPoint( 'u1', w * 0.7, h * 1.1, - 1 );\r\n            setPoint( 'u2', - w * 0.7, h * 1.1, - 1 );\r\n            setPoint( 'u3', 0, h * 2, - 1 );\r\n\r\n            // cross\r\n\r\n            setPoint( 'cf1', - w, 0, 1 );\r\n            setPoint( 'cf2', w, 0, 1 );\r\n            setPoint( 'cf3', 0, - h, 1 );\r\n            setPoint( 'cf4', 0, h, 1 );\r\n\r\n            setPoint( 'cn1', - w, 0, - 1 );\r\n            setPoint( 'cn2', w, 0, - 1 );\r\n            setPoint( 'cn3', 0, - h, - 1 );\r\n            setPoint( 'cn4', 0, h, - 1 );\r\n\r\n            geometry.getAttribute( 'position' ).needsUpdate = true;\r\n\r\n        };\r\n\r\n    }();\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     * @author Mugen87 / http://github.com/Mugen87\r\n     */\r\n\r\n    function BoxHelper( object, color ) {\r\n\r\n        this.object = object;\r\n\r\n        if ( color === undefined ) color = 0xffff00;\r\n\r\n        var indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n        var positions = new Float32Array( 8 * 3 );\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n        geometry.addAttribute( 'position', new BufferAttribute( positions, 3 ) );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color } ) );\r\n\r\n        this.matrixAutoUpdate = false;\r\n\r\n        this.update();\r\n\r\n    }\r\n\r\n    BoxHelper.prototype = Object.create( LineSegments.prototype );\r\n    BoxHelper.prototype.constructor = BoxHelper;\r\n\r\n    BoxHelper.prototype.update = ( function () {\r\n\r\n        var box = new Box3();\r\n\r\n        return function update( object ) {\r\n\r\n            if ( object !== undefined ) {\r\n\r\n                console.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\r\n\r\n            }\r\n\r\n            if ( this.object !== undefined ) {\r\n\r\n                box.setFromObject( this.object );\r\n\r\n            }\r\n\r\n            if ( box.isEmpty() ) return;\r\n\r\n            var min = box.min;\r\n            var max = box.max;\r\n\r\n            /*\r\n\t\t\t  5____4\r\n\t\t\t1/___0/|\r\n\t\t\t| 6__|_7\r\n\t\t\t2/___3/\r\n\r\n\t\t\t0: max.x, max.y, max.z\r\n\t\t\t1: min.x, max.y, max.z\r\n\t\t\t2: min.x, min.y, max.z\r\n\t\t\t3: max.x, min.y, max.z\r\n\t\t\t4: max.x, max.y, min.z\r\n\t\t\t5: min.x, max.y, min.z\r\n\t\t\t6: min.x, min.y, min.z\r\n\t\t\t7: max.x, min.y, min.z\r\n\t\t\t*/\r\n\r\n            var position = this.geometry.attributes.position;\r\n            var array = position.array;\r\n\r\n            array[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\r\n            array[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\r\n            array[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\r\n            array[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n            array[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n            array[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n            array[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n            array[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n            position.needsUpdate = true;\r\n\r\n            this.geometry.computeBoundingSphere();\r\n\r\n        };\r\n\r\n    } )();\r\n\r\n    BoxHelper.prototype.setFromObject = function ( object ) {\r\n\r\n        this.object = object;\r\n        this.update();\r\n\r\n        return this;\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function Box3Helper( box, hex ) {\r\n\r\n        this.type = 'Box3Helper';\r\n\r\n        this.box = box;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n        var indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\r\n        var positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\r\n\r\n        var geometry = new BufferGeometry();\r\n\r\n        geometry.setIndex( new BufferAttribute( indices, 1 ) );\r\n\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n\r\n        LineSegments.call( this, geometry, new LineBasicMaterial( { color: color } ) );\r\n\r\n        this.geometry.computeBoundingSphere();\r\n\r\n    }\r\n\r\n    Box3Helper.prototype = Object.create( LineSegments.prototype );\r\n    Box3Helper.prototype.constructor = Box3Helper;\r\n\r\n    Box3Helper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n        var box = this.box;\r\n\r\n        if ( box.isEmpty() ) return;\r\n\r\n        box.getCenter( this.position );\r\n\r\n        box.getSize( this.scale );\r\n\r\n        this.scale.multiplyScalar( 0.5 );\r\n\r\n        Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     */\r\n\r\n    function PlaneHelper( plane, size, hex ) {\r\n\r\n        this.type = 'PlaneHelper';\r\n\r\n        this.plane = plane;\r\n\r\n        this.size = ( size === undefined ) ? 1 : size;\r\n\r\n        var color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n        var positions = [ 1, - 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0 ];\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\r\n        geometry.computeBoundingSphere();\r\n\r\n        Line.call( this, geometry, new LineBasicMaterial( { color: color } ) );\r\n\r\n        //\r\n\r\n        var positions2 = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, - 1, 1, 1, - 1, 1 ];\r\n\r\n        var geometry2 = new BufferGeometry();\r\n        geometry2.addAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\r\n        geometry2.computeBoundingSphere();\r\n\r\n        this.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false } ) ) );\r\n\r\n    }\r\n\r\n    PlaneHelper.prototype = Object.create( Line.prototype );\r\n    PlaneHelper.prototype.constructor = PlaneHelper;\r\n\r\n    PlaneHelper.prototype.updateMatrixWorld = function ( force ) {\r\n\r\n        var scale = - this.plane.constant;\r\n\r\n        if ( Math.abs( scale ) < 1e-8 ) scale = 1e-8; // sign does not matter\r\n\r\n        this.scale.set( 0.5 * this.size, 0.5 * this.size, scale );\r\n\r\n        this.children[ 0 ].material.side = ( scale < 0 ) ? BackSide : FrontSide; // renderer flips side when determinant < 0; flipping not wanted here\r\n\r\n        this.lookAt( this.plane.normal );\r\n\r\n        Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author WestLangley / http://github.com/WestLangley\r\n     * @author zz85 / http://github.com/zz85\r\n     * @author bhouston / http://clara.io\r\n     *\r\n     * Creates an arrow for visualizing directions\r\n     *\r\n     * Parameters:\r\n     *  dir - Vector3\r\n     *  origin - Vector3\r\n     *  length - Number\r\n     *  color - color in hex value\r\n     *  headLength - Number\r\n     *  headWidth - Number\r\n     */\r\n\r\n    var lineGeometry, coneGeometry;\r\n\r\n    function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n        // dir is assumed to be normalized\r\n\r\n        Object3D.call( this );\r\n\r\n        if ( color === undefined ) color = 0xffff00;\r\n        if ( length === undefined ) length = 1;\r\n        if ( headLength === undefined ) headLength = 0.2 * length;\r\n        if ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n        if ( lineGeometry === undefined ) {\r\n\r\n            lineGeometry = new BufferGeometry();\r\n            lineGeometry.addAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\r\n\r\n            coneGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\r\n            coneGeometry.translate( 0, - 0.5, 0 );\r\n\r\n        }\r\n\r\n        this.position.copy( origin );\r\n\r\n        this.line = new Line( lineGeometry, new LineBasicMaterial( { color: color } ) );\r\n        this.line.matrixAutoUpdate = false;\r\n        this.add( this.line );\r\n\r\n        this.cone = new Mesh( coneGeometry, new MeshBasicMaterial( { color: color } ) );\r\n        this.cone.matrixAutoUpdate = false;\r\n        this.add( this.cone );\r\n\r\n        this.setDirection( dir );\r\n        this.setLength( length, headLength, headWidth );\r\n\r\n    }\r\n\r\n    ArrowHelper.prototype = Object.create( Object3D.prototype );\r\n    ArrowHelper.prototype.constructor = ArrowHelper;\r\n\r\n    ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n        var axis = new Vector3();\r\n        var radians;\r\n\r\n        return function setDirection( dir ) {\r\n\r\n            // dir is assumed to be normalized\r\n\r\n            if ( dir.y > 0.99999 ) {\r\n\r\n                this.quaternion.set( 0, 0, 0, 1 );\r\n\r\n            } else if ( dir.y < - 0.99999 ) {\r\n\r\n                this.quaternion.set( 1, 0, 0, 0 );\r\n\r\n            } else {\r\n\r\n                axis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n                radians = Math.acos( dir.y );\r\n\r\n                this.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n            }\r\n\r\n        };\r\n\r\n    }() );\r\n\r\n    ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n        if ( headLength === undefined ) headLength = 0.2 * length;\r\n        if ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n        this.line.scale.set( 1, Math.max( 0, length - headLength ), 1 );\r\n        this.line.updateMatrix();\r\n\r\n        this.cone.scale.set( headWidth, headLength, headWidth );\r\n        this.cone.position.y = length;\r\n        this.cone.updateMatrix();\r\n\r\n    };\r\n\r\n    ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n        this.line.material.color.copy( color );\r\n        this.cone.material.color.copy( color );\r\n\r\n    };\r\n\r\n    /**\r\n     * @author sroucheray / http://sroucheray.org/\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function AxesHelper( size ) {\r\n\r\n        size = size || 1;\r\n\r\n        var vertices = [\r\n            0, 0, 0,\tsize, 0, 0,\r\n            0, 0, 0,\t0, size, 0,\r\n            0, 0, 0,\t0, 0, size\r\n        ];\r\n\r\n        var colors = [\r\n            1, 0, 0,\t1, 0.6, 0,\r\n            0, 1, 0,\t0.6, 1, 0,\r\n            0, 0, 1,\t0, 0.6, 1\r\n        ];\r\n\r\n        var geometry = new BufferGeometry();\r\n        geometry.addAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\r\n        geometry.addAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\r\n\r\n        var material = new LineBasicMaterial( { vertexColors: VertexColors } );\r\n\r\n        LineSegments.call( this, geometry, material );\r\n\r\n    }\r\n\r\n    AxesHelper.prototype = Object.create( LineSegments.prototype );\r\n    AxesHelper.prototype.constructor = AxesHelper;\r\n\r\n    /**\r\n     * @author mrdoob / http://mrdoob.com/\r\n     */\r\n\r\n    function Face4( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n        console.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n        return new Face3( a, b, c, normal, color, materialIndex );\r\n\r\n    }\r\n\r\n    var LineStrip = 0;\r\n\r\n    var LinePieces = 1;\r\n\r\n    function MeshFaceMaterial( materials ) {\r\n\r\n        console.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\r\n        return materials;\r\n\r\n    }\r\n\r\n    function MultiMaterial( materials ) {\r\n\r\n        if ( materials === undefined ) materials = [];\r\n\r\n        console.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\r\n        materials.isMultiMaterial = true;\r\n        materials.materials = materials;\r\n        materials.clone = function () {\r\n\r\n            return materials.slice();\r\n\r\n        };\r\n        return materials;\r\n\r\n    }\r\n\r\n    function PointCloud( geometry, material ) {\r\n\r\n        console.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n        return new Points( geometry, material );\r\n\r\n    }\r\n\r\n    function Particle( material ) {\r\n\r\n        console.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\r\n        return new Sprite( material );\r\n\r\n    }\r\n\r\n    function ParticleSystem( geometry, material ) {\r\n\r\n        console.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n        return new Points( geometry, material );\r\n\r\n    }\r\n\r\n    function PointCloudMaterial( parameters ) {\r\n\r\n        console.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n        return new PointsMaterial( parameters );\r\n\r\n    }\r\n\r\n    function ParticleBasicMaterial( parameters ) {\r\n\r\n        console.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n        return new PointsMaterial( parameters );\r\n\r\n    }\r\n\r\n    function ParticleSystemMaterial( parameters ) {\r\n\r\n        console.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n        return new PointsMaterial( parameters );\r\n\r\n    }\r\n\r\n    function Vertex( x, y, z ) {\r\n\r\n        console.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\r\n        return new Vector3( x, y, z );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function DynamicBufferAttribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n        return new BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n    }\r\n\r\n    function Int8Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\r\n        return new Int8BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint8Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\r\n        return new Uint8BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint8ClampedAttribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\r\n        return new Uint8ClampedBufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Int16Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\r\n        return new Int16BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint16Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\r\n        return new Uint16BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Int32Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\r\n        return new Int32BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Uint32Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\r\n        return new Uint32BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Float32Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\r\n        return new Float32BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    function Float64Attribute( array, itemSize ) {\r\n\r\n        console.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\r\n        return new Float64BufferAttribute( array, itemSize );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    Curve.create = function ( construct, getPoint ) {\r\n\r\n        console.log( 'THREE.Curve.create() has been deprecated' );\r\n\r\n        construct.prototype = Object.create( Curve.prototype );\r\n        construct.prototype.constructor = construct;\r\n        construct.prototype.getPoint = getPoint;\r\n\r\n        return construct;\r\n\r\n    };\r\n\r\n    //\r\n\r\n    Object.assign( CurvePath.prototype, {\r\n\r\n        createPointsGeometry: function ( divisions ) {\r\n\r\n            console.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n            // generate geometry from path points (for Line or Points objects)\r\n\r\n            var pts = this.getPoints( divisions );\r\n            return this.createGeometry( pts );\r\n\r\n        },\r\n\r\n        createSpacedPointsGeometry: function ( divisions ) {\r\n\r\n            console.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n            // generate geometry from equidistant sampling along the path\r\n\r\n            var pts = this.getSpacedPoints( divisions );\r\n            return this.createGeometry( pts );\r\n\r\n        },\r\n\r\n        createGeometry: function ( points ) {\r\n\r\n            console.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\r\n\r\n            var geometry = new Geometry();\r\n\r\n            for ( var i = 0, l = points.length; i < l; i ++ ) {\r\n\r\n                var point = points[ i ];\r\n                geometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\r\n\r\n            }\r\n\r\n            return geometry;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( Path.prototype, {\r\n\r\n        fromPoints: function ( points ) {\r\n\r\n            console.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\r\n            this.setFromPoints( points );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    function ClosedSplineCurve3( points ) {\r\n\r\n        console.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n        CatmullRomCurve3.call( this, points );\r\n        this.type = 'catmullrom';\r\n        this.closed = true;\r\n\r\n    }\r\n\r\n    ClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n    //\r\n\r\n    function SplineCurve3( points ) {\r\n\r\n        console.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n        CatmullRomCurve3.call( this, points );\r\n        this.type = 'catmullrom';\r\n\r\n    }\r\n\r\n    SplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n    //\r\n\r\n    function Spline( points ) {\r\n\r\n        console.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\r\n\r\n        CatmullRomCurve3.call( this, points );\r\n        this.type = 'catmullrom';\r\n\r\n    }\r\n\r\n    Spline.prototype = Object.create( CatmullRomCurve3.prototype );\r\n\r\n    Object.assign( Spline.prototype, {\r\n\r\n        initFromArray: function ( /* a */ ) {\r\n\r\n            console.error( 'THREE.Spline: .initFromArray() has been removed.' );\r\n\r\n        },\r\n        getControlPointsArray: function ( /* optionalTarget */ ) {\r\n\r\n            console.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\r\n\r\n        },\r\n        reparametrizeByArcLength: function ( /* samplingCoef */ ) {\r\n\r\n            console.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    function AxisHelper( size ) {\r\n\r\n        console.warn( 'THREE.AxisHelper has been renamed to THREE.AxesHelper.' );\r\n        return new AxesHelper( size );\r\n\r\n    }\r\n\r\n    function BoundingBoxHelper( object, color ) {\r\n\r\n        console.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\r\n        return new BoxHelper( object, color );\r\n\r\n    }\r\n\r\n    function EdgesHelper( object, hex ) {\r\n\r\n        console.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\r\n        return new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n    }\r\n\r\n    GridHelper.prototype.setColors = function () {\r\n\r\n        console.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\r\n\r\n    };\r\n\r\n    SkeletonHelper.prototype.update = function () {\r\n\r\n        console.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\r\n\r\n    };\r\n\r\n    function WireframeHelper( object, hex ) {\r\n\r\n        console.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\r\n        return new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    Object.assign( Loader.prototype, {\r\n\r\n        extractUrlBase: function ( url ) {\r\n\r\n            console.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\r\n            return LoaderUtils.extractUrlBase( url );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    function XHRLoader( manager ) {\r\n\r\n        console.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\r\n        return new FileLoader( manager );\r\n\r\n    }\r\n\r\n    function BinaryTextureLoader( manager ) {\r\n\r\n        console.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\r\n        return new DataTextureLoader( manager );\r\n\r\n    }\r\n\r\n    //\r\n\r\n    Object.assign( Box2.prototype, {\r\n\r\n        center: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\r\n            return this.getCenter( optionalTarget );\r\n\r\n        },\r\n        empty: function () {\r\n\r\n            console.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\r\n            return this.isEmpty();\r\n\r\n        },\r\n        isIntersectionBox: function ( box ) {\r\n\r\n            console.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n            return this.intersectsBox( box );\r\n\r\n        },\r\n        size: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\r\n            return this.getSize( optionalTarget );\r\n\r\n        }\r\n    } );\r\n\r\n    Object.assign( Box3.prototype, {\r\n\r\n        center: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\r\n            return this.getCenter( optionalTarget );\r\n\r\n        },\r\n        empty: function () {\r\n\r\n            console.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\r\n            return this.isEmpty();\r\n\r\n        },\r\n        isIntersectionBox: function ( box ) {\r\n\r\n            console.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n            return this.intersectsBox( box );\r\n\r\n        },\r\n        isIntersectionSphere: function ( sphere ) {\r\n\r\n            console.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n            return this.intersectsSphere( sphere );\r\n\r\n        },\r\n        size: function ( optionalTarget ) {\r\n\r\n            console.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\r\n            return this.getSize( optionalTarget );\r\n\r\n        }\r\n    } );\r\n\r\n    Line3.prototype.center = function ( optionalTarget ) {\r\n\r\n        console.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\r\n        return this.getCenter( optionalTarget );\r\n\r\n    };\r\n\r\n    Object.assign( _Math, {\r\n\r\n        random16: function () {\r\n\r\n            console.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\r\n            return Math.random();\r\n\r\n        },\r\n\r\n        nearestPowerOfTwo: function ( value ) {\r\n\r\n            console.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\r\n            return _Math.floorPowerOfTwo( value );\r\n\r\n        },\r\n\r\n        nextPowerOfTwo: function ( value ) {\r\n\r\n            console.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\r\n            return _Math.ceilPowerOfTwo( value );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Matrix3.prototype, {\r\n\r\n        flattenToArrayOffset: function ( array, offset ) {\r\n\r\n            console.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n            return this.toArray( array, offset );\r\n\r\n        },\r\n        multiplyVector3: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n            return vector.applyMatrix3( this );\r\n\r\n        },\r\n        multiplyVector3Array: function ( /* a */ ) {\r\n\r\n            console.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\r\n\r\n        },\r\n        applyToBuffer: function ( buffer /*, offset, length */ ) {\r\n\r\n            console.warn( 'THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\r\n            return this.applyToBufferAttribute( buffer );\r\n\r\n        },\r\n        applyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n            console.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Matrix4.prototype, {\r\n\r\n        extractPosition: function ( m ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n            return this.copyPosition( m );\r\n\r\n        },\r\n        flattenToArrayOffset: function ( array, offset ) {\r\n\r\n            console.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\r\n            return this.toArray( array, offset );\r\n\r\n        },\r\n        getPosition: function () {\r\n\r\n            var v1;\r\n\r\n            return function getPosition() {\r\n\r\n                if ( v1 === undefined ) v1 = new Vector3();\r\n                console.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n                return v1.setFromMatrixColumn( this, 3 );\r\n\r\n            };\r\n\r\n        }(),\r\n        setRotationFromQuaternion: function ( q ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n            return this.makeRotationFromQuaternion( q );\r\n\r\n        },\r\n        multiplyToArray: function () {\r\n\r\n            console.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\r\n\r\n        },\r\n        multiplyVector3: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n            return vector.applyMatrix4( this );\r\n\r\n        },\r\n        multiplyVector4: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n            return vector.applyMatrix4( this );\r\n\r\n        },\r\n        multiplyVector3Array: function ( /* a */ ) {\r\n\r\n            console.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\r\n\r\n        },\r\n        rotateAxis: function ( v ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n            v.transformDirection( this );\r\n\r\n        },\r\n        crossVector: function ( vector ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n            return vector.applyMatrix4( this );\r\n\r\n        },\r\n        translate: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n        },\r\n        rotateX: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n        },\r\n        rotateY: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n        },\r\n        rotateZ: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n        },\r\n        rotateByAxis: function () {\r\n\r\n            console.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n        },\r\n        applyToBuffer: function ( buffer /*, offset, length */ ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.' );\r\n            return this.applyToBufferAttribute( buffer );\r\n\r\n        },\r\n        applyToVector3Array: function ( /* array, offset, length */ ) {\r\n\r\n            console.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\r\n\r\n        },\r\n        makeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n            console.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\r\n            return this.makePerspective( left, right, top, bottom, near, far );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Plane.prototype.isIntersectionLine = function ( line ) {\r\n\r\n        console.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\r\n        return this.intersectsLine( line );\r\n\r\n    };\r\n\r\n    Quaternion.prototype.multiplyVector3 = function ( vector ) {\r\n\r\n        console.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n        return vector.applyQuaternion( this );\r\n\r\n    };\r\n\r\n    Object.assign( Ray.prototype, {\r\n\r\n        isIntersectionBox: function ( box ) {\r\n\r\n            console.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\r\n            return this.intersectsBox( box );\r\n\r\n        },\r\n        isIntersectionPlane: function ( plane ) {\r\n\r\n            console.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\r\n            return this.intersectsPlane( plane );\r\n\r\n        },\r\n        isIntersectionSphere: function ( sphere ) {\r\n\r\n            console.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\r\n            return this.intersectsSphere( sphere );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Triangle.prototype, {\r\n\r\n        area: function () {\r\n\r\n            console.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\r\n            return this.getArea();\r\n\r\n        },\r\n        barycoordFromPoint: function ( point, target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n            return this.getBarycoord( point, target );\r\n\r\n        },\r\n        midpoint: function ( target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\r\n            return this.getMidpoint( target );\r\n\r\n        },\r\n        normal: function ( target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n            return this.getNormal( target );\r\n\r\n        },\r\n        plane: function ( target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\r\n            return this.getPlane( target );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Triangle, {\r\n\r\n        barycoordFromPoint: function ( point, a, b, c, target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\r\n            return Triangle.getBarycoord( point, a, b, c, target );\r\n\r\n        },\r\n        normal: function ( a, b, c, target ) {\r\n\r\n            console.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\r\n            return Triangle.getNormal( a, b, c, target );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Shape.prototype, {\r\n\r\n        extractAllPoints: function ( divisions ) {\r\n\r\n            console.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\r\n            return this.extractPoints( divisions );\r\n\r\n        },\r\n        extrude: function ( options ) {\r\n\r\n            console.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\r\n            return new ExtrudeGeometry( this, options );\r\n\r\n        },\r\n        makeGeometry: function ( options ) {\r\n\r\n            console.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\r\n            return new ShapeGeometry( this, options );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector2.prototype, {\r\n\r\n        fromAttribute: function ( attribute, index, offset ) {\r\n\r\n            console.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n            return this.fromBufferAttribute( attribute, index, offset );\r\n\r\n        },\r\n        distanceToManhattan: function ( v ) {\r\n\r\n            console.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n            return this.manhattanDistanceTo( v );\r\n\r\n        },\r\n        lengthManhattan: function () {\r\n\r\n            console.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n            return this.manhattanLength();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector3.prototype, {\r\n\r\n        setEulerFromRotationMatrix: function () {\r\n\r\n            console.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n        },\r\n        setEulerFromQuaternion: function () {\r\n\r\n            console.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n        },\r\n        getPositionFromMatrix: function ( m ) {\r\n\r\n            console.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n            return this.setFromMatrixPosition( m );\r\n\r\n        },\r\n        getScaleFromMatrix: function ( m ) {\r\n\r\n            console.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n            return this.setFromMatrixScale( m );\r\n\r\n        },\r\n        getColumnFromMatrix: function ( index, matrix ) {\r\n\r\n            console.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n            return this.setFromMatrixColumn( matrix, index );\r\n\r\n        },\r\n        applyProjection: function ( m ) {\r\n\r\n            console.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\r\n            return this.applyMatrix4( m );\r\n\r\n        },\r\n        fromAttribute: function ( attribute, index, offset ) {\r\n\r\n            console.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n            return this.fromBufferAttribute( attribute, index, offset );\r\n\r\n        },\r\n        distanceToManhattan: function ( v ) {\r\n\r\n            console.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\r\n            return this.manhattanDistanceTo( v );\r\n\r\n        },\r\n        lengthManhattan: function () {\r\n\r\n            console.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n            return this.manhattanLength();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Vector4.prototype, {\r\n\r\n        fromAttribute: function ( attribute, index, offset ) {\r\n\r\n            console.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\r\n            return this.fromBufferAttribute( attribute, index, offset );\r\n\r\n        },\r\n        lengthManhattan: function () {\r\n\r\n            console.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\r\n            return this.manhattanLength();\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( Geometry.prototype, {\r\n\r\n        computeTangents: function () {\r\n\r\n            console.error( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n        },\r\n        computeLineDistances: function () {\r\n\r\n            console.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( Object3D.prototype, {\r\n\r\n        getChildByName: function ( name ) {\r\n\r\n            console.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n            return this.getObjectByName( name );\r\n\r\n        },\r\n        renderDepth: function () {\r\n\r\n            console.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\r\n        },\r\n        translate: function ( distance, axis ) {\r\n\r\n            console.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n            return this.translateOnAxis( axis, distance );\r\n\r\n        },\r\n        getWorldRotation: function () {\r\n\r\n            console.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( Object3D.prototype, {\r\n\r\n        eulerOrder: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n                return this.rotation.order;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\r\n                this.rotation.order = value;\r\n\r\n            }\r\n        },\r\n        useQuaternion: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( LOD.prototype, {\r\n\r\n        objects: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n                return this.levels;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperty( Skeleton.prototype, 'useVertexTexture', {\r\n\r\n        get: function () {\r\n\r\n            console.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n        },\r\n        set: function () {\r\n\r\n            console.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperty( Curve.prototype, '__arcLengthDivisions', {\r\n\r\n        get: function () {\r\n\r\n            console.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n            return this.arcLengthDivisions;\r\n\r\n        },\r\n        set: function ( value ) {\r\n\r\n            console.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\r\n            this.arcLengthDivisions = value;\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    PerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\r\n\r\n        console.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\r\n            \"Use .setFocalLength and .filmGauge for a photographic setup.\" );\r\n\r\n        if ( filmGauge !== undefined ) this.filmGauge = filmGauge;\r\n        this.setFocalLength( focalLength );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    Object.defineProperties( Light.prototype, {\r\n        onlyShadow: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Light: .onlyShadow has been removed.' );\r\n\r\n            }\r\n        },\r\n        shadowCameraFov: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\r\n                this.shadow.camera.fov = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraLeft: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\r\n                this.shadow.camera.left = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraRight: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\r\n                this.shadow.camera.right = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraTop: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\r\n                this.shadow.camera.top = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraBottom: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\r\n                this.shadow.camera.bottom = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraNear: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\r\n                this.shadow.camera.near = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraFar: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\r\n                this.shadow.camera.far = value;\r\n\r\n            }\r\n        },\r\n        shadowCameraVisible: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\r\n\r\n            }\r\n        },\r\n        shadowBias: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\r\n                this.shadow.bias = value;\r\n\r\n            }\r\n        },\r\n        shadowDarkness: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Light: .shadowDarkness has been removed.' );\r\n\r\n            }\r\n        },\r\n        shadowMapWidth: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\r\n                this.shadow.mapSize.width = value;\r\n\r\n            }\r\n        },\r\n        shadowMapHeight: {\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\r\n                this.shadow.mapSize.height = value;\r\n\r\n            }\r\n        }\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( BufferAttribute.prototype, {\r\n\r\n        length: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\r\n                return this.array.length;\r\n\r\n            }\r\n        },\r\n        copyIndicesArray: function ( /* indices */ ) {\r\n\r\n            console.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.assign( BufferGeometry.prototype, {\r\n\r\n        addIndex: function ( index ) {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n            this.setIndex( index );\r\n\r\n        },\r\n        addDrawCall: function ( start, count, indexOffset ) {\r\n\r\n            if ( indexOffset !== undefined ) {\r\n\r\n                console.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\r\n            }\r\n            console.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n            this.addGroup( start, count );\r\n\r\n        },\r\n        clearDrawCalls: function () {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n            this.clearGroups();\r\n\r\n        },\r\n        computeTangents: function () {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\r\n        },\r\n        computeOffsets: function () {\r\n\r\n            console.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( BufferGeometry.prototype, {\r\n\r\n        drawcalls: {\r\n            get: function () {\r\n\r\n                console.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n                return this.groups;\r\n\r\n            }\r\n        },\r\n        offsets: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n                return this.groups;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( ExtrudeBufferGeometry.prototype, {\r\n\r\n        getArrays: function () {\r\n\r\n            console.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\r\n\r\n        },\r\n\r\n        addShapeList: function () {\r\n\r\n            console.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\r\n\r\n        },\r\n\r\n        addShape: function () {\r\n\r\n            console.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( Uniform.prototype, {\r\n\r\n        dynamic: {\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\r\n\r\n            }\r\n        },\r\n        onUpdate: {\r\n            value: function () {\r\n\r\n                console.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\r\n                return this;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( Material.prototype, {\r\n\r\n        wrapAround: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.Material: .wrapAround has been removed.' );\r\n\r\n            }\r\n        },\r\n        wrapRGB: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.Material: .wrapRGB has been removed.' );\r\n                return new Color();\r\n\r\n            }\r\n        },\r\n\r\n        shading: {\r\n            get: function () {\r\n\r\n                console.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\r\n                this.flatShading = ( value === FlatShading );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( MeshPhongMaterial.prototype, {\r\n\r\n        metal: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\r\n                return false;\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( ShaderMaterial.prototype, {\r\n\r\n        derivatives: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n                return this.extensions.derivatives;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\r\n                this.extensions.derivatives = value;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.assign( WebGLRenderer.prototype, {\r\n\r\n        animate: function ( callback ) {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\r\n            this.setAnimationLoop( callback );\r\n\r\n        },\r\n\r\n        getCurrentRenderTarget: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\r\n            return this.getRenderTarget();\r\n\r\n        },\r\n\r\n        getMaxAnisotropy: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\r\n            return this.capabilities.getMaxAnisotropy();\r\n\r\n        },\r\n\r\n        getPrecision: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\r\n            return this.capabilities.precision;\r\n\r\n        },\r\n\r\n        resetGLState: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\r\n            return this.state.reset();\r\n\r\n        },\r\n\r\n        supportsFloatTextures: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n            return this.extensions.get( 'OES_texture_float' );\r\n\r\n        },\r\n        supportsHalfFloatTextures: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n            return this.extensions.get( 'OES_texture_half_float' );\r\n\r\n        },\r\n        supportsStandardDerivatives: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n            return this.extensions.get( 'OES_standard_derivatives' );\r\n\r\n        },\r\n        supportsCompressedTextureS3TC: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n            return this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n        },\r\n        supportsCompressedTexturePVRTC: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n            return this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n        },\r\n        supportsBlendMinMax: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n            return this.extensions.get( 'EXT_blend_minmax' );\r\n\r\n        },\r\n        supportsVertexTextures: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\r\n            return this.capabilities.vertexTextures;\r\n\r\n        },\r\n        supportsInstancedArrays: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n            return this.extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n        },\r\n        enableScissorTest: function ( boolean ) {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\r\n            this.setScissorTest( boolean );\r\n\r\n        },\r\n        initMaterial: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n        },\r\n        addPrePlugin: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n        },\r\n        addPostPlugin: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n        },\r\n        updateShadowMap: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n        },\r\n        setFaceCulling: function () {\r\n\r\n            console.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\r\n\r\n        }\r\n\r\n    } );\r\n\r\n    Object.defineProperties( WebGLRenderer.prototype, {\r\n\r\n        shadowMapEnabled: {\r\n            get: function () {\r\n\r\n                return this.shadowMap.enabled;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n                this.shadowMap.enabled = value;\r\n\r\n            }\r\n        },\r\n        shadowMapType: {\r\n            get: function () {\r\n\r\n                return this.shadowMap.type;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n                this.shadowMap.type = value;\r\n\r\n            }\r\n        },\r\n        shadowMapCullFace: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function ( /* value */ ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        }\r\n    } );\r\n\r\n    Object.defineProperties( WebGLShadowMap.prototype, {\r\n\r\n        cullFace: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function ( /* cullFace */ ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        },\r\n        renderReverseSided: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        },\r\n        renderSingleSided: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n                return undefined;\r\n\r\n            },\r\n            set: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( WebGLRenderTarget.prototype, {\r\n\r\n        wrapS: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n                return this.texture.wrapS;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\r\n                this.texture.wrapS = value;\r\n\r\n            }\r\n        },\r\n        wrapT: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n                return this.texture.wrapT;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\r\n                this.texture.wrapT = value;\r\n\r\n            }\r\n        },\r\n        magFilter: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n                return this.texture.magFilter;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\r\n                this.texture.magFilter = value;\r\n\r\n            }\r\n        },\r\n        minFilter: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n                return this.texture.minFilter;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\r\n                this.texture.minFilter = value;\r\n\r\n            }\r\n        },\r\n        anisotropy: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n                return this.texture.anisotropy;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\r\n                this.texture.anisotropy = value;\r\n\r\n            }\r\n        },\r\n        offset: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n                return this.texture.offset;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\r\n                this.texture.offset = value;\r\n\r\n            }\r\n        },\r\n        repeat: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n                return this.texture.repeat;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\r\n                this.texture.repeat = value;\r\n\r\n            }\r\n        },\r\n        format: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n                return this.texture.format;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\r\n                this.texture.format = value;\r\n\r\n            }\r\n        },\r\n        type: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n                return this.texture.type;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\r\n                this.texture.type = value;\r\n\r\n            }\r\n        },\r\n        generateMipmaps: {\r\n            get: function () {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n                return this.texture.generateMipmaps;\r\n\r\n            },\r\n            set: function ( value ) {\r\n\r\n                console.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\r\n                this.texture.generateMipmaps = value;\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Object.defineProperties( WebVRManager.prototype, {\r\n\r\n        standing: {\r\n            set: function ( /* value */ ) {\r\n\r\n                console.warn( 'THREE.WebVRManager: .standing has been removed.' );\r\n\r\n            }\r\n        }\r\n\r\n    } );\r\n\r\n    //\r\n\r\n    Audio.prototype.load = function ( file ) {\r\n\r\n        console.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\r\n        var scope = this;\r\n        var audioLoader = new AudioLoader();\r\n        audioLoader.load( file, function ( buffer ) {\r\n\r\n            scope.setBuffer( buffer );\r\n\r\n        } );\r\n        return this;\r\n\r\n    };\r\n\r\n    AudioAnalyser.prototype.getData = function () {\r\n\r\n        console.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\r\n        return this.getFrequencyData();\r\n\r\n    };\r\n\r\n    //\r\n\r\n    CubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\r\n\r\n        console.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\r\n        return this.update( renderer, scene );\r\n\r\n    };\r\n\r\n    //\r\n\r\n    var GeometryUtils = {\r\n\r\n        merge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n            console.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n            var matrix;\r\n\r\n            if ( geometry2.isMesh ) {\r\n\r\n                geometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n                matrix = geometry2.matrix;\r\n                geometry2 = geometry2.geometry;\r\n\r\n            }\r\n\r\n            geometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n        },\r\n\r\n        center: function ( geometry ) {\r\n\r\n            console.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n            return geometry.center();\r\n\r\n        }\r\n\r\n    };\r\n\r\n    var ImageUtils = {\r\n\r\n        crossOrigin: undefined,\r\n\r\n        loadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n            console.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\r\n\r\n            var loader = new TextureLoader();\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n\r\n            var texture = loader.load( url, onLoad, undefined, onError );\r\n\r\n            if ( mapping ) texture.mapping = mapping;\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        loadTextureCube: function ( urls, mapping, onLoad, onError ) {\r\n\r\n            console.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\r\n\r\n            var loader = new CubeTextureLoader();\r\n            loader.setCrossOrigin( this.crossOrigin );\r\n\r\n            var texture = loader.load( urls, onLoad, undefined, onError );\r\n\r\n            if ( mapping ) texture.mapping = mapping;\r\n\r\n            return texture;\r\n\r\n        },\r\n\r\n        loadCompressedTexture: function () {\r\n\r\n            console.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n        },\r\n\r\n        loadCompressedTextureCube: function () {\r\n\r\n            console.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    //\r\n\r\n    function Projector() {\r\n\r\n        console.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n        this.projectVector = function ( vector, camera ) {\r\n\r\n            console.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n            vector.project( camera );\r\n\r\n        };\r\n\r\n        this.unprojectVector = function ( vector, camera ) {\r\n\r\n            console.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n            vector.unproject( camera );\r\n\r\n        };\r\n\r\n        this.pickingRay = function () {\r\n\r\n            console.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n        };\r\n\r\n    }\r\n\r\n    //\r\n\r\n    function CanvasRenderer() {\r\n\r\n        console.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n        this.domElement = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\r\n        this.clear = function () {};\r\n        this.render = function () {};\r\n        this.setClearColor = function () {};\r\n        this.setSize = function () {};\r\n\r\n    }\r\n\r\n    //\r\n\r\n    var SceneUtils = {\r\n\r\n        createMultiMaterialObject: function ( /* geometry, materials */ ) {\r\n\r\n            console.error( 'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js' );\r\n\r\n        },\r\n\r\n        detach: function ( /* child, parent, scene */ ) {\r\n\r\n            console.error( 'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js' );\r\n\r\n        },\r\n\r\n        attach: function ( /* child, scene, parent */ ) {\r\n\r\n            console.error( 'THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js' );\r\n\r\n        }\r\n\r\n    };\r\n\r\n    //\r\n\r\n    function LensFlare() {\r\n\r\n        console.error( 'THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js' );\r\n\r\n    }\r\n\r\n    exports.WebGLRenderTargetCube = WebGLRenderTargetCube;\r\n    exports.WebGLRenderTarget = WebGLRenderTarget;\r\n    exports.WebGLRenderer = WebGLRenderer;\r\n    exports.ShaderLib = ShaderLib;\r\n    exports.UniformsLib = UniformsLib;\r\n    exports.UniformsUtils = UniformsUtils;\r\n    exports.ShaderChunk = ShaderChunk;\r\n    exports.FogExp2 = FogExp2;\r\n    exports.Fog = Fog;\r\n    exports.Scene = Scene;\r\n    exports.Sprite = Sprite;\r\n    exports.LOD = LOD;\r\n    exports.SkinnedMesh = SkinnedMesh;\r\n    exports.Skeleton = Skeleton;\r\n    exports.Bone = Bone;\r\n    exports.Mesh = Mesh;\r\n    exports.LineSegments = LineSegments;\r\n    exports.LineLoop = LineLoop;\r\n    exports.Line = Line;\r\n    exports.Points = Points;\r\n    exports.Group = Group;\r\n    exports.VideoTexture = VideoTexture;\r\n    exports.DataTexture = DataTexture;\r\n    exports.CompressedTexture = CompressedTexture;\r\n    exports.CubeTexture = CubeTexture;\r\n    exports.CanvasTexture = CanvasTexture;\r\n    exports.DepthTexture = DepthTexture;\r\n    exports.Texture = Texture;\r\n    exports.CompressedTextureLoader = CompressedTextureLoader;\r\n    exports.DataTextureLoader = DataTextureLoader;\r\n    exports.CubeTextureLoader = CubeTextureLoader;\r\n    exports.TextureLoader = TextureLoader;\r\n    exports.ObjectLoader = ObjectLoader;\r\n    exports.MaterialLoader = MaterialLoader;\r\n    exports.BufferGeometryLoader = BufferGeometryLoader;\r\n    exports.DefaultLoadingManager = DefaultLoadingManager;\r\n    exports.LoadingManager = LoadingManager;\r\n    exports.JSONLoader = JSONLoader;\r\n    exports.ImageLoader = ImageLoader;\r\n    exports.ImageBitmapLoader = ImageBitmapLoader;\r\n    exports.FontLoader = FontLoader;\r\n    exports.FileLoader = FileLoader;\r\n    exports.Loader = Loader;\r\n    exports.LoaderUtils = LoaderUtils;\r\n    exports.Cache = Cache;\r\n    exports.AudioLoader = AudioLoader;\r\n    exports.SpotLightShadow = SpotLightShadow;\r\n    exports.SpotLight = SpotLight;\r\n    exports.PointLight = PointLight;\r\n    exports.RectAreaLight = RectAreaLight;\r\n    exports.HemisphereLight = HemisphereLight;\r\n    exports.DirectionalLightShadow = DirectionalLightShadow;\r\n    exports.DirectionalLight = DirectionalLight;\r\n    exports.AmbientLight = AmbientLight;\r\n    exports.LightShadow = LightShadow;\r\n    exports.Light = Light;\r\n    exports.StereoCamera = StereoCamera;\r\n    exports.PerspectiveCamera = PerspectiveCamera;\r\n    exports.OrthographicCamera = OrthographicCamera;\r\n    exports.CubeCamera = CubeCamera;\r\n    exports.ArrayCamera = ArrayCamera;\r\n    exports.Camera = Camera;\r\n    exports.AudioListener = AudioListener;\r\n    exports.PositionalAudio = PositionalAudio;\r\n    exports.AudioContext = AudioContext;\r\n    exports.AudioAnalyser = AudioAnalyser;\r\n    exports.Audio = Audio;\r\n    exports.VectorKeyframeTrack = VectorKeyframeTrack;\r\n    exports.StringKeyframeTrack = StringKeyframeTrack;\r\n    exports.QuaternionKeyframeTrack = QuaternionKeyframeTrack;\r\n    exports.NumberKeyframeTrack = NumberKeyframeTrack;\r\n    exports.ColorKeyframeTrack = ColorKeyframeTrack;\r\n    exports.BooleanKeyframeTrack = BooleanKeyframeTrack;\r\n    exports.PropertyMixer = PropertyMixer;\r\n    exports.PropertyBinding = PropertyBinding;\r\n    exports.KeyframeTrack = KeyframeTrack;\r\n    exports.AnimationUtils = AnimationUtils;\r\n    exports.AnimationObjectGroup = AnimationObjectGroup;\r\n    exports.AnimationMixer = AnimationMixer;\r\n    exports.AnimationClip = AnimationClip;\r\n    exports.Uniform = Uniform;\r\n    exports.InstancedBufferGeometry = InstancedBufferGeometry;\r\n    exports.BufferGeometry = BufferGeometry;\r\n    exports.Geometry = Geometry;\r\n    exports.InterleavedBufferAttribute = InterleavedBufferAttribute;\r\n    exports.InstancedInterleavedBuffer = InstancedInterleavedBuffer;\r\n    exports.InterleavedBuffer = InterleavedBuffer;\r\n    exports.InstancedBufferAttribute = InstancedBufferAttribute;\r\n    exports.Face3 = Face3;\r\n    exports.Object3D = Object3D;\r\n    exports.Raycaster = Raycaster;\r\n    exports.Layers = Layers;\r\n    exports.EventDispatcher = EventDispatcher;\r\n    exports.Clock = Clock;\r\n    exports.QuaternionLinearInterpolant = QuaternionLinearInterpolant;\r\n    exports.LinearInterpolant = LinearInterpolant;\r\n    exports.DiscreteInterpolant = DiscreteInterpolant;\r\n    exports.CubicInterpolant = CubicInterpolant;\r\n    exports.Interpolant = Interpolant;\r\n    exports.Triangle = Triangle;\r\n    exports.Math = _Math;\r\n    exports.Spherical = Spherical;\r\n    exports.Cylindrical = Cylindrical;\r\n    exports.Plane = Plane;\r\n    exports.Frustum = Frustum;\r\n    exports.Sphere = Sphere;\r\n    exports.Ray = Ray;\r\n    exports.Matrix4 = Matrix4;\r\n    exports.Matrix3 = Matrix3;\r\n    exports.Box3 = Box3;\r\n    exports.Box2 = Box2;\r\n    exports.Line3 = Line3;\r\n    exports.Euler = Euler;\r\n    exports.Vector4 = Vector4;\r\n    exports.Vector3 = Vector3;\r\n    exports.Vector2 = Vector2;\r\n    exports.Quaternion = Quaternion;\r\n    exports.Color = Color;\r\n    exports.ImmediateRenderObject = ImmediateRenderObject;\r\n    exports.VertexNormalsHelper = VertexNormalsHelper;\r\n    exports.SpotLightHelper = SpotLightHelper;\r\n    exports.SkeletonHelper = SkeletonHelper;\r\n    exports.PointLightHelper = PointLightHelper;\r\n    exports.RectAreaLightHelper = RectAreaLightHelper;\r\n    exports.HemisphereLightHelper = HemisphereLightHelper;\r\n    exports.GridHelper = GridHelper;\r\n    exports.PolarGridHelper = PolarGridHelper;\r\n    exports.FaceNormalsHelper = FaceNormalsHelper;\r\n    exports.DirectionalLightHelper = DirectionalLightHelper;\r\n    exports.CameraHelper = CameraHelper;\r\n    exports.BoxHelper = BoxHelper;\r\n    exports.Box3Helper = Box3Helper;\r\n    exports.PlaneHelper = PlaneHelper;\r\n    exports.ArrowHelper = ArrowHelper;\r\n    exports.AxesHelper = AxesHelper;\r\n    exports.Shape = Shape;\r\n    exports.Path = Path;\r\n    exports.ShapePath = ShapePath;\r\n    exports.Font = Font;\r\n    exports.CurvePath = CurvePath;\r\n    exports.Curve = Curve;\r\n    exports.ShapeUtils = ShapeUtils;\r\n    exports.WebGLUtils = WebGLUtils;\r\n    exports.WireframeGeometry = WireframeGeometry;\r\n    exports.ParametricGeometry = ParametricGeometry;\r\n    exports.ParametricBufferGeometry = ParametricBufferGeometry;\r\n    exports.TetrahedronGeometry = TetrahedronGeometry;\r\n    exports.TetrahedronBufferGeometry = TetrahedronBufferGeometry;\r\n    exports.OctahedronGeometry = OctahedronGeometry;\r\n    exports.OctahedronBufferGeometry = OctahedronBufferGeometry;\r\n    exports.IcosahedronGeometry = IcosahedronGeometry;\r\n    exports.IcosahedronBufferGeometry = IcosahedronBufferGeometry;\r\n    exports.DodecahedronGeometry = DodecahedronGeometry;\r\n    exports.DodecahedronBufferGeometry = DodecahedronBufferGeometry;\r\n    exports.PolyhedronGeometry = PolyhedronGeometry;\r\n    exports.PolyhedronBufferGeometry = PolyhedronBufferGeometry;\r\n    exports.TubeGeometry = TubeGeometry;\r\n    exports.TubeBufferGeometry = TubeBufferGeometry;\r\n    exports.TorusKnotGeometry = TorusKnotGeometry;\r\n    exports.TorusKnotBufferGeometry = TorusKnotBufferGeometry;\r\n    exports.TorusGeometry = TorusGeometry;\r\n    exports.TorusBufferGeometry = TorusBufferGeometry;\r\n    exports.TextGeometry = TextGeometry;\r\n    exports.TextBufferGeometry = TextBufferGeometry;\r\n    exports.SphereGeometry = SphereGeometry;\r\n    exports.SphereBufferGeometry = SphereBufferGeometry;\r\n    exports.RingGeometry = RingGeometry;\r\n    exports.RingBufferGeometry = RingBufferGeometry;\r\n    exports.PlaneGeometry = PlaneGeometry;\r\n    exports.PlaneBufferGeometry = PlaneBufferGeometry;\r\n    exports.LatheGeometry = LatheGeometry;\r\n    exports.LatheBufferGeometry = LatheBufferGeometry;\r\n    exports.ShapeGeometry = ShapeGeometry;\r\n    exports.ShapeBufferGeometry = ShapeBufferGeometry;\r\n    exports.ExtrudeGeometry = ExtrudeGeometry;\r\n    exports.ExtrudeBufferGeometry = ExtrudeBufferGeometry;\r\n    exports.EdgesGeometry = EdgesGeometry;\r\n    exports.ConeGeometry = ConeGeometry;\r\n    exports.ConeBufferGeometry = ConeBufferGeometry;\r\n    exports.CylinderGeometry = CylinderGeometry;\r\n    exports.CylinderBufferGeometry = CylinderBufferGeometry;\r\n    exports.CircleGeometry = CircleGeometry;\r\n    exports.CircleBufferGeometry = CircleBufferGeometry;\r\n    exports.BoxGeometry = BoxGeometry;\r\n    exports.BoxBufferGeometry = BoxBufferGeometry;\r\n    exports.ShadowMaterial = ShadowMaterial;\r\n    exports.SpriteMaterial = SpriteMaterial;\r\n    exports.RawShaderMaterial = RawShaderMaterial;\r\n    exports.ShaderMaterial = ShaderMaterial;\r\n    exports.PointsMaterial = PointsMaterial;\r\n    exports.MeshPhysicalMaterial = MeshPhysicalMaterial;\r\n    exports.MeshStandardMaterial = MeshStandardMaterial;\r\n    exports.MeshPhongMaterial = MeshPhongMaterial;\r\n    exports.MeshToonMaterial = MeshToonMaterial;\r\n    exports.MeshNormalMaterial = MeshNormalMaterial;\r\n    exports.MeshLambertMaterial = MeshLambertMaterial;\r\n    exports.MeshDepthMaterial = MeshDepthMaterial;\r\n    exports.MeshDistanceMaterial = MeshDistanceMaterial;\r\n    exports.MeshBasicMaterial = MeshBasicMaterial;\r\n    exports.LineDashedMaterial = LineDashedMaterial;\r\n    exports.LineBasicMaterial = LineBasicMaterial;\r\n    exports.Material = Material;\r\n    exports.Float64BufferAttribute = Float64BufferAttribute;\r\n    exports.Float32BufferAttribute = Float32BufferAttribute;\r\n    exports.Uint32BufferAttribute = Uint32BufferAttribute;\r\n    exports.Int32BufferAttribute = Int32BufferAttribute;\r\n    exports.Uint16BufferAttribute = Uint16BufferAttribute;\r\n    exports.Int16BufferAttribute = Int16BufferAttribute;\r\n    exports.Uint8ClampedBufferAttribute = Uint8ClampedBufferAttribute;\r\n    exports.Uint8BufferAttribute = Uint8BufferAttribute;\r\n    exports.Int8BufferAttribute = Int8BufferAttribute;\r\n    exports.BufferAttribute = BufferAttribute;\r\n    exports.ArcCurve = ArcCurve;\r\n    exports.CatmullRomCurve3 = CatmullRomCurve3;\r\n    exports.CubicBezierCurve = CubicBezierCurve;\r\n    exports.CubicBezierCurve3 = CubicBezierCurve3;\r\n    exports.EllipseCurve = EllipseCurve;\r\n    exports.LineCurve = LineCurve;\r\n    exports.LineCurve3 = LineCurve3;\r\n    exports.QuadraticBezierCurve = QuadraticBezierCurve;\r\n    exports.QuadraticBezierCurve3 = QuadraticBezierCurve3;\r\n    exports.SplineCurve = SplineCurve;\r\n    exports.REVISION = REVISION;\r\n    exports.MOUSE = MOUSE;\r\n    exports.CullFaceNone = CullFaceNone;\r\n    exports.CullFaceBack = CullFaceBack;\r\n    exports.CullFaceFront = CullFaceFront;\r\n    exports.CullFaceFrontBack = CullFaceFrontBack;\r\n    exports.FrontFaceDirectionCW = FrontFaceDirectionCW;\r\n    exports.FrontFaceDirectionCCW = FrontFaceDirectionCCW;\r\n    exports.BasicShadowMap = BasicShadowMap;\r\n    exports.PCFShadowMap = PCFShadowMap;\r\n    exports.PCFSoftShadowMap = PCFSoftShadowMap;\r\n    exports.FrontSide = FrontSide;\r\n    exports.BackSide = BackSide;\r\n    exports.DoubleSide = DoubleSide;\r\n    exports.FlatShading = FlatShading;\r\n    exports.SmoothShading = SmoothShading;\r\n    exports.NoColors = NoColors;\r\n    exports.FaceColors = FaceColors;\r\n    exports.VertexColors = VertexColors;\r\n    exports.NoBlending = NoBlending;\r\n    exports.NormalBlending = NormalBlending;\r\n    exports.AdditiveBlending = AdditiveBlending;\r\n    exports.SubtractiveBlending = SubtractiveBlending;\r\n    exports.MultiplyBlending = MultiplyBlending;\r\n    exports.CustomBlending = CustomBlending;\r\n    exports.AddEquation = AddEquation;\r\n    exports.SubtractEquation = SubtractEquation;\r\n    exports.ReverseSubtractEquation = ReverseSubtractEquation;\r\n    exports.MinEquation = MinEquation;\r\n    exports.MaxEquation = MaxEquation;\r\n    exports.ZeroFactor = ZeroFactor;\r\n    exports.OneFactor = OneFactor;\r\n    exports.SrcColorFactor = SrcColorFactor;\r\n    exports.OneMinusSrcColorFactor = OneMinusSrcColorFactor;\r\n    exports.SrcAlphaFactor = SrcAlphaFactor;\r\n    exports.OneMinusSrcAlphaFactor = OneMinusSrcAlphaFactor;\r\n    exports.DstAlphaFactor = DstAlphaFactor;\r\n    exports.OneMinusDstAlphaFactor = OneMinusDstAlphaFactor;\r\n    exports.DstColorFactor = DstColorFactor;\r\n    exports.OneMinusDstColorFactor = OneMinusDstColorFactor;\r\n    exports.SrcAlphaSaturateFactor = SrcAlphaSaturateFactor;\r\n    exports.NeverDepth = NeverDepth;\r\n    exports.AlwaysDepth = AlwaysDepth;\r\n    exports.LessDepth = LessDepth;\r\n    exports.LessEqualDepth = LessEqualDepth;\r\n    exports.EqualDepth = EqualDepth;\r\n    exports.GreaterEqualDepth = GreaterEqualDepth;\r\n    exports.GreaterDepth = GreaterDepth;\r\n    exports.NotEqualDepth = NotEqualDepth;\r\n    exports.MultiplyOperation = MultiplyOperation;\r\n    exports.MixOperation = MixOperation;\r\n    exports.AddOperation = AddOperation;\r\n    exports.NoToneMapping = NoToneMapping;\r\n    exports.LinearToneMapping = LinearToneMapping;\r\n    exports.ReinhardToneMapping = ReinhardToneMapping;\r\n    exports.Uncharted2ToneMapping = Uncharted2ToneMapping;\r\n    exports.CineonToneMapping = CineonToneMapping;\r\n    exports.UVMapping = UVMapping;\r\n    exports.CubeReflectionMapping = CubeReflectionMapping;\r\n    exports.CubeRefractionMapping = CubeRefractionMapping;\r\n    exports.EquirectangularReflectionMapping = EquirectangularReflectionMapping;\r\n    exports.EquirectangularRefractionMapping = EquirectangularRefractionMapping;\r\n    exports.SphericalReflectionMapping = SphericalReflectionMapping;\r\n    exports.CubeUVReflectionMapping = CubeUVReflectionMapping;\r\n    exports.CubeUVRefractionMapping = CubeUVRefractionMapping;\r\n    exports.RepeatWrapping = RepeatWrapping;\r\n    exports.ClampToEdgeWrapping = ClampToEdgeWrapping;\r\n    exports.MirroredRepeatWrapping = MirroredRepeatWrapping;\r\n    exports.NearestFilter = NearestFilter;\r\n    exports.NearestMipMapNearestFilter = NearestMipMapNearestFilter;\r\n    exports.NearestMipMapLinearFilter = NearestMipMapLinearFilter;\r\n    exports.LinearFilter = LinearFilter;\r\n    exports.LinearMipMapNearestFilter = LinearMipMapNearestFilter;\r\n    exports.LinearMipMapLinearFilter = LinearMipMapLinearFilter;\r\n    exports.UnsignedByteType = UnsignedByteType;\r\n    exports.ByteType = ByteType;\r\n    exports.ShortType = ShortType;\r\n    exports.UnsignedShortType = UnsignedShortType;\r\n    exports.IntType = IntType;\r\n    exports.UnsignedIntType = UnsignedIntType;\r\n    exports.FloatType = FloatType;\r\n    exports.HalfFloatType = HalfFloatType;\r\n    exports.UnsignedShort4444Type = UnsignedShort4444Type;\r\n    exports.UnsignedShort5551Type = UnsignedShort5551Type;\r\n    exports.UnsignedShort565Type = UnsignedShort565Type;\r\n    exports.UnsignedInt248Type = UnsignedInt248Type;\r\n    exports.AlphaFormat = AlphaFormat;\r\n    exports.RGBFormat = RGBFormat;\r\n    exports.RGBAFormat = RGBAFormat;\r\n    exports.LuminanceFormat = LuminanceFormat;\r\n    exports.LuminanceAlphaFormat = LuminanceAlphaFormat;\r\n    exports.RGBEFormat = RGBEFormat;\r\n    exports.DepthFormat = DepthFormat;\r\n    exports.DepthStencilFormat = DepthStencilFormat;\r\n    exports.RGB_S3TC_DXT1_Format = RGB_S3TC_DXT1_Format;\r\n    exports.RGBA_S3TC_DXT1_Format = RGBA_S3TC_DXT1_Format;\r\n    exports.RGBA_S3TC_DXT3_Format = RGBA_S3TC_DXT3_Format;\r\n    exports.RGBA_S3TC_DXT5_Format = RGBA_S3TC_DXT5_Format;\r\n    exports.RGB_PVRTC_4BPPV1_Format = RGB_PVRTC_4BPPV1_Format;\r\n    exports.RGB_PVRTC_2BPPV1_Format = RGB_PVRTC_2BPPV1_Format;\r\n    exports.RGBA_PVRTC_4BPPV1_Format = RGBA_PVRTC_4BPPV1_Format;\r\n    exports.RGBA_PVRTC_2BPPV1_Format = RGBA_PVRTC_2BPPV1_Format;\r\n    exports.RGB_ETC1_Format = RGB_ETC1_Format;\r\n    exports.RGBA_ASTC_4x4_Format = RGBA_ASTC_4x4_Format;\r\n    exports.RGBA_ASTC_5x4_Format = RGBA_ASTC_5x4_Format;\r\n    exports.RGBA_ASTC_5x5_Format = RGBA_ASTC_5x5_Format;\r\n    exports.RGBA_ASTC_6x5_Format = RGBA_ASTC_6x5_Format;\r\n    exports.RGBA_ASTC_6x6_Format = RGBA_ASTC_6x6_Format;\r\n    exports.RGBA_ASTC_8x5_Format = RGBA_ASTC_8x5_Format;\r\n    exports.RGBA_ASTC_8x6_Format = RGBA_ASTC_8x6_Format;\r\n    exports.RGBA_ASTC_8x8_Format = RGBA_ASTC_8x8_Format;\r\n    exports.RGBA_ASTC_10x5_Format = RGBA_ASTC_10x5_Format;\r\n    exports.RGBA_ASTC_10x6_Format = RGBA_ASTC_10x6_Format;\r\n    exports.RGBA_ASTC_10x8_Format = RGBA_ASTC_10x8_Format;\r\n    exports.RGBA_ASTC_10x10_Format = RGBA_ASTC_10x10_Format;\r\n    exports.RGBA_ASTC_12x10_Format = RGBA_ASTC_12x10_Format;\r\n    exports.RGBA_ASTC_12x12_Format = RGBA_ASTC_12x12_Format;\r\n    exports.LoopOnce = LoopOnce;\r\n    exports.LoopRepeat = LoopRepeat;\r\n    exports.LoopPingPong = LoopPingPong;\r\n    exports.InterpolateDiscrete = InterpolateDiscrete;\r\n    exports.InterpolateLinear = InterpolateLinear;\r\n    exports.InterpolateSmooth = InterpolateSmooth;\r\n    exports.ZeroCurvatureEnding = ZeroCurvatureEnding;\r\n    exports.ZeroSlopeEnding = ZeroSlopeEnding;\r\n    exports.WrapAroundEnding = WrapAroundEnding;\r\n    exports.TrianglesDrawMode = TrianglesDrawMode;\r\n    exports.TriangleStripDrawMode = TriangleStripDrawMode;\r\n    exports.TriangleFanDrawMode = TriangleFanDrawMode;\r\n    exports.LinearEncoding = LinearEncoding;\r\n    exports.sRGBEncoding = sRGBEncoding;\r\n    exports.GammaEncoding = GammaEncoding;\r\n    exports.RGBEEncoding = RGBEEncoding;\r\n    exports.LogLuvEncoding = LogLuvEncoding;\r\n    exports.RGBM7Encoding = RGBM7Encoding;\r\n    exports.RGBM16Encoding = RGBM16Encoding;\r\n    exports.RGBDEncoding = RGBDEncoding;\r\n    exports.BasicDepthPacking = BasicDepthPacking;\r\n    exports.RGBADepthPacking = RGBADepthPacking;\r\n    exports.CubeGeometry = BoxGeometry;\r\n    exports.Face4 = Face4;\r\n    exports.LineStrip = LineStrip;\r\n    exports.LinePieces = LinePieces;\r\n    exports.MeshFaceMaterial = MeshFaceMaterial;\r\n    exports.MultiMaterial = MultiMaterial;\r\n    exports.PointCloud = PointCloud;\r\n    exports.Particle = Particle;\r\n    exports.ParticleSystem = ParticleSystem;\r\n    exports.PointCloudMaterial = PointCloudMaterial;\r\n    exports.ParticleBasicMaterial = ParticleBasicMaterial;\r\n    exports.ParticleSystemMaterial = ParticleSystemMaterial;\r\n    exports.Vertex = Vertex;\r\n    exports.DynamicBufferAttribute = DynamicBufferAttribute;\r\n    exports.Int8Attribute = Int8Attribute;\r\n    exports.Uint8Attribute = Uint8Attribute;\r\n    exports.Uint8ClampedAttribute = Uint8ClampedAttribute;\r\n    exports.Int16Attribute = Int16Attribute;\r\n    exports.Uint16Attribute = Uint16Attribute;\r\n    exports.Int32Attribute = Int32Attribute;\r\n    exports.Uint32Attribute = Uint32Attribute;\r\n    exports.Float32Attribute = Float32Attribute;\r\n    exports.Float64Attribute = Float64Attribute;\r\n    exports.ClosedSplineCurve3 = ClosedSplineCurve3;\r\n    exports.SplineCurve3 = SplineCurve3;\r\n    exports.Spline = Spline;\r\n    exports.AxisHelper = AxisHelper;\r\n    exports.BoundingBoxHelper = BoundingBoxHelper;\r\n    exports.EdgesHelper = EdgesHelper;\r\n    exports.WireframeHelper = WireframeHelper;\r\n    exports.XHRLoader = XHRLoader;\r\n    exports.BinaryTextureLoader = BinaryTextureLoader;\r\n    exports.GeometryUtils = GeometryUtils;\r\n    exports.ImageUtils = ImageUtils;\r\n    exports.Projector = Projector;\r\n    exports.CanvasRenderer = CanvasRenderer;\r\n    exports.SceneUtils = SceneUtils;\r\n    exports.LensFlare = LensFlare;\r\n\r\n    Object.defineProperty(exports, '__esModule', { value: true });\r\n\r\n})));"],"sourceRoot":""}